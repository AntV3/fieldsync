{"version":3,"file":"SignatureLinkGenerator-CKoVc6KB.js","sources":["../../src/components/SignatureLinkGenerator.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react'\nimport { X, Link, Copy, Check, Clock, ExternalLink, AlertCircle, Trash2 } from 'lucide-react'\nimport { db } from '../lib/supabase'\n\n// Hook to lock body scroll when modal is open\nfunction useBodyScrollLock() {\n  useEffect(() => {\n    const scrollY = window.scrollY\n    document.body.style.overflow = 'hidden'\n    document.body.style.position = 'fixed'\n    document.body.style.top = `-${scrollY}px`\n    document.body.style.width = '100%'\n\n    return () => {\n      document.body.style.overflow = ''\n      document.body.style.position = ''\n      document.body.style.top = ''\n      document.body.style.width = ''\n      window.scrollTo(0, scrollY)\n    }\n  }, [])\n}\n\n// Helper to format date\nconst formatDate = (dateString) => {\n  if (!dateString) return 'Never'\n  return new Date(dateString).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n}\n\nexport default function SignatureLinkGenerator({\n  documentType, // 'cor' or 'tm_ticket'\n  documentId,\n  companyId,\n  projectId,\n  documentTitle = '',\n  onClose,\n  onShowToast\n}) {\n  const [loading, setLoading] = useState(true)\n  const [generating, setGenerating] = useState(false)\n  const [existingRequests, setExistingRequests] = useState([])\n  const [newLink, setNewLink] = useState(null)\n  const [copied, setCopied] = useState(false)\n  const expiresIn = '7' // Always 7 days - clients have 7 days to sign\n\n  // Lock body scroll when modal is open\n  useBodyScrollLock()\n\n  // Load existing signature requests for this document\n  useEffect(() => {\n    loadExistingRequests()\n  }, [documentType, documentId])\n\n  const loadExistingRequests = async () => {\n    try {\n      setLoading(true)\n      const requests = await db.getSignatureRequestsForDocument(documentType, documentId)\n      setExistingRequests(requests || [])\n    } catch (err) {\n      console.error('Error loading signature requests:', err)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  // Generate a new signature link\n  const generateLink = async () => {\n    try {\n      setGenerating(true)\n\n      // Calculate expiration date\n      let expiresAt = null\n      if (expiresIn !== 'never') {\n        const days = parseInt(expiresIn)\n        expiresAt = new Date()\n        expiresAt.setDate(expiresAt.getDate() + days)\n        expiresAt = expiresAt.toISOString()\n      }\n\n      const request = await db.createSignatureRequest(\n        documentType,\n        documentId,\n        companyId,\n        projectId,\n        null, // createdBy - would need user ID\n        expiresAt\n      )\n\n      if (request) {\n        const link = `${window.location.origin}/sign/${request.signature_token}`\n        setNewLink(link)\n        await loadExistingRequests()\n        onShowToast?.('Signature link created', 'success')\n      }\n    } catch (err) {\n      console.error('Error generating signature link:', err)\n      onShowToast?.('Failed to create signature link', 'error')\n    } finally {\n      setGenerating(false)\n    }\n  }\n\n  // Copy link to clipboard\n  const copyToClipboard = async (link) => {\n    try {\n      await navigator.clipboard.writeText(link)\n      setCopied(true)\n      onShowToast?.('Link copied to clipboard', 'success')\n      setTimeout(() => setCopied(false), 2000)\n    } catch (err) {\n      console.error('Error copying to clipboard:', err)\n    }\n  }\n\n  // Revoke a signature request\n  const revokeRequest = async (requestId) => {\n    if (!confirm('Are you sure you want to revoke this signature link? It will no longer be usable.')) {\n      return\n    }\n\n    try {\n      await db.revokeSignatureRequest(requestId)\n      await loadExistingRequests()\n      onShowToast?.('Signature link revoked', 'success')\n    } catch (err) {\n      console.error('Error revoking signature request:', err)\n      onShowToast?.('Failed to revoke link', 'error')\n    }\n  }\n\n  // Get status badge info\n  const getStatusBadge = (status) => {\n    switch (status) {\n      case 'pending':\n        return { label: 'Awaiting Signatures', color: '#f59e0b', bg: '#fef3c7' }\n      case 'partially_signed':\n        return { label: '1 of 2 Signed', color: '#3b82f6', bg: '#dbeafe' }\n      case 'completed':\n        return { label: 'Fully Signed', color: '#10b981', bg: '#d1fae5' }\n      case 'revoked':\n        return { label: 'Revoked', color: '#ef4444', bg: '#fee2e2' }\n      case 'expired':\n        return { label: 'Expired', color: '#6b7280', bg: '#f3f4f6' }\n      default:\n        return { label: status, color: '#6b7280', bg: '#f3f4f6' }\n    }\n  }\n\n  const docTypeLabel = documentType === 'cor' ? 'Change Order' : 'T&M Ticket'\n\n  return (\n    <div className=\"modal-overlay\" onClick={onClose} role=\"dialog\" aria-modal=\"true\">\n      <div className=\"modal-content signature-link-modal\" onClick={e => e.stopPropagation()}>\n        <div className=\"modal-header\">\n          <div>\n            <h2>Get Signature Link</h2>\n            {documentTitle && <span className=\"modal-subtitle\">{documentTitle}</span>}\n          </div>\n          <button className=\"close-btn\" onClick={onClose} aria-label=\"Close\">\n            <X size={20} />\n          </button>\n        </div>\n\n        <div className=\"modal-body\">\n          {/* Create New Link Section */}\n          <div className=\"signature-link-section\">\n            <h3>\n              <Link size={16} />\n              Create New Signature Link\n            </h3>\n            <p className=\"section-description\">\n              Generate a secure link that allows GC/Client to sign this {docTypeLabel} without logging in.\n            </p>\n\n            <div className=\"link-options\">\n              <div className=\"link-expiration-info\">\n                <Clock size={14} />\n                <span>Link expires in 7 days</span>\n              </div>\n\n              <button\n                className=\"btn btn-primary\"\n                onClick={generateLink}\n                disabled={generating}\n              >\n                {generating ? 'Generating...' : 'Generate Link'}\n              </button>\n            </div>\n\n            {/* Newly generated link */}\n            {newLink && (\n              <div className=\"new-link-box\">\n                <div className=\"link-display\">\n                  <input\n                    type=\"text\"\n                    value={newLink}\n                    readOnly\n                    className=\"link-input\"\n                  />\n                  <button\n                    className=\"btn btn-secondary copy-btn\"\n                    onClick={() => copyToClipboard(newLink)}\n                  >\n                    {copied ? <Check size={16} /> : <Copy size={16} />}\n                    {copied ? 'Copied!' : 'Copy'}\n                  </button>\n                </div>\n                <a\n                  href={newLink}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"preview-link\"\n                >\n                  <ExternalLink size={14} />\n                  Preview link\n                </a>\n              </div>\n            )}\n          </div>\n\n          {/* Existing Links Section */}\n          <div className=\"signature-link-section\">\n            <h3>\n              <Clock size={16} />\n              Existing Signature Links\n            </h3>\n\n            {loading ? (\n              <div className=\"loading-inline\">Loading...</div>\n            ) : existingRequests.length === 0 ? (\n              <p className=\"empty-state\">No signature links have been created for this {docTypeLabel}.</p>\n            ) : (\n              <div className=\"existing-links-list\">\n                {existingRequests.map(request => {\n                  const statusBadge = getStatusBadge(request.status)\n                  const link = `${window.location.origin}/sign/${request.signature_token}`\n                  const signatureCount = request.signatures?.length || 0\n\n                  return (\n                    <div key={request.id} className=\"existing-link-card\">\n                      <div className=\"link-card-header\">\n                        <span\n                          className=\"status-badge\"\n                          style={{ color: statusBadge.color, backgroundColor: statusBadge.bg }}\n                        >\n                          {statusBadge.label}\n                        </span>\n                        <span className=\"link-created\">\n                          Created {formatDate(request.created_at)}\n                        </span>\n                      </div>\n\n                      <div className=\"link-card-body\">\n                        <div className=\"link-info\">\n                          <span className=\"link-token\">...{request.signature_token.slice(-8)}</span>\n                          {request.expires_at && (\n                            <span className=\"link-expires\">\n                              Expires {formatDate(request.expires_at)}\n                            </span>\n                          )}\n                          <span className=\"link-views\">\n                            {request.view_count} view{request.view_count !== 1 ? 's' : ''}\n                          </span>\n                        </div>\n\n                        {/* Signature status */}\n                        {signatureCount > 0 && (\n                          <div className=\"signatures-summary\">\n                            {request.signatures.map(sig => (\n                              <div key={sig.id} className=\"sig-item\">\n                                <Check size={12} />\n                                <span>\n                                  Slot {sig.signature_slot}: {sig.signer_name}\n                                  {sig.signer_company && ` (${sig.signer_company})`}\n                                </span>\n                              </div>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"link-card-actions\">\n                        {request.status !== 'revoked' && request.status !== 'expired' && (\n                          <>\n                            <button\n                              className=\"btn btn-ghost btn-small\"\n                              onClick={() => copyToClipboard(link)}\n                            >\n                              <Copy size={14} /> Copy\n                            </button>\n                            <a\n                              href={link}\n                              target=\"_blank\"\n                              rel=\"noopener noreferrer\"\n                              className=\"btn btn-ghost btn-small\"\n                            >\n                              <ExternalLink size={14} /> Open\n                            </a>\n                          </>\n                        )}\n                        {request.status !== 'completed' && request.status !== 'revoked' && (\n                          <button\n                            className=\"btn btn-ghost btn-small btn-danger\"\n                            onClick={() => revokeRequest(request.id)}\n                          >\n                            <Trash2 size={14} /> Revoke\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  )\n                })}\n              </div>\n            )}\n          </div>\n\n          {/* Info box */}\n          <div className=\"signature-info-box\">\n            <AlertCircle size={16} />\n            <div>\n              <strong>How it works:</strong>\n              <ul>\n                <li>Share the link with your GC or Client</li>\n                <li>They can view the document and sign without logging in</li>\n                <li>Supports 2 signatures (GC + Client)</li>\n                <li>Signatures are recorded with name, title, company, date, and IP</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"modal-footer\">\n          <button className=\"btn btn-secondary\" onClick={onClose}>\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":["useBodyScrollLock","useEffect","scrollY","formatDate","dateString","SignatureLinkGenerator","documentType","documentId","companyId","projectId","documentTitle","onClose","onShowToast","loading","setLoading","useState","generating","setGenerating","existingRequests","setExistingRequests","newLink","setNewLink","copied","setCopied","expiresIn","loadExistingRequests","requests","db","err","generateLink","expiresAt","days","request","link","copyToClipboard","revokeRequest","requestId","getStatusBadge","status","docTypeLabel","jsxs","e","jsx","X","Link","Clock","Check","Copy","ExternalLink","statusBadge","signatureCount","sig","Fragment","Trash2","AlertCircle"],"mappings":"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"}