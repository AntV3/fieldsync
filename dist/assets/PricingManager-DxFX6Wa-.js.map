{"version":3,"file":"PricingManager-DxFX6Wa-.js","sources":["../../src/components/pricing/LaborRatesSection.jsx","../../src/components/pricing/MaterialsSection.jsx","../../src/components/PricingManager.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { db } from '../../lib/supabase'\nimport { ChevronDown, ChevronRight, Plus, Edit2, Trash2, DollarSign, X, Check, AlertCircle } from 'lucide-react'\n\n// Simplified rate types - scalable for any company type\nconst RATE_TYPES = [\n  { id: 'standard', label: 'Standard Rate' },\n  { id: 'prevailing', label: 'Prevailing Wage' }\n]\n\nexport default function LaborRatesSection({ company, onShowToast }) {\n  const [categories, setCategories] = useState([])\n  const [laborClasses, setLaborClasses] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [expandedCategories, setExpandedCategories] = useState({})\n\n  // Modal states\n  const [showCategoryModal, setShowCategoryModal] = useState(false)\n  const [showClassModal, setShowClassModal] = useState(false)\n  const [showRatesModal, setShowRatesModal] = useState(false)\n  const [editingCategory, setEditingCategory] = useState(null)\n  const [editingClass, setEditingClass] = useState(null)\n  const [selectedClassForRates, setSelectedClassForRates] = useState(null)\n\n  // Form states\n  const [categoryName, setCategoryName] = useState('')\n  const [className, setClassName] = useState('')\n  const [selectedCategoryId, setSelectedCategoryId] = useState('')\n  const [classRates, setClassRates] = useState({})\n  const [saving, setSaving] = useState(false)\n\n  useEffect(() => {\n    if (company?.id) {\n      loadData()\n    }\n  }, [company?.id])\n\n  const loadData = async () => {\n    try {\n      setLoading(true)\n      const data = await db.getLaborClassesWithCategories(company.id)\n      setCategories(data.categories || [])\n      setLaborClasses(data.classes || [])\n\n      // Expand all categories by default\n      const expanded = {}\n      data.categories.forEach(cat => {\n        expanded[cat.id] = true\n      })\n      setExpandedCategories(expanded)\n    } catch (error) {\n      console.error('Error loading labor classes:', error)\n      onShowToast?.('Error loading labor classes', 'error')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const toggleCategory = (categoryId) => {\n    setExpandedCategories(prev => ({\n      ...prev,\n      [categoryId]: !prev[categoryId]\n    }))\n  }\n\n  // ==========================================\n  // Category CRUD\n  // ==========================================\n\n  const openCategoryModal = (category = null) => {\n    setEditingCategory(category)\n    setCategoryName(category?.name || '')\n    setShowCategoryModal(true)\n  }\n\n  const saveCategory = async () => {\n    if (!categoryName.trim()) {\n      onShowToast?.('Please enter a category name', 'error')\n      return\n    }\n\n    setSaving(true)\n    try {\n      if (editingCategory) {\n        await db.updateLaborCategory(editingCategory.id, { name: categoryName.trim() })\n        onShowToast?.('Category updated', 'success')\n      } else {\n        const newCategory = await db.createLaborCategory(company.id, categoryName.trim(), categories.length)\n        if (newCategory) {\n          setExpandedCategories(prev => ({ ...prev, [newCategory.id]: true }))\n        }\n        onShowToast?.('Category created', 'success')\n      }\n      setShowCategoryModal(false)\n      setCategoryName('')\n      setEditingCategory(null)\n      await loadData()\n    } catch (error) {\n      console.error('Error saving category:', error)\n      if (error.message?.includes('duplicate')) {\n        onShowToast?.('A category with this name already exists', 'error')\n      } else {\n        onShowToast?.('Error saving category', 'error')\n      }\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const deleteCategory = async (category) => {\n    const classesInCategory = laborClasses.filter(c => c.category_id === category.id)\n    if (classesInCategory.length > 0) {\n      onShowToast?.('Remove all classes from this category first', 'error')\n      return\n    }\n\n    if (!confirm(`Delete category \"${category.name}\"?`)) return\n\n    try {\n      await db.deleteLaborCategory(category.id)\n      onShowToast?.('Category deleted', 'success')\n      await loadData()\n    } catch (error) {\n      console.error('Error deleting category:', error)\n      onShowToast?.('Error deleting category', 'error')\n    }\n  }\n\n  // ==========================================\n  // Class CRUD\n  // ==========================================\n\n  const openClassModal = (laborClass = null, categoryId = null) => {\n    setEditingClass(laborClass)\n    setClassName(laborClass?.name || '')\n    setSelectedCategoryId(laborClass?.category_id || categoryId || categories[0]?.id || '')\n    setShowClassModal(true)\n  }\n\n  const saveClass = async () => {\n    if (!className.trim()) {\n      onShowToast?.('Please enter a class name', 'error')\n      return\n    }\n\n    setSaving(true)\n    try {\n      if (editingClass) {\n        await db.updateLaborClass(editingClass.id, {\n          name: className.trim(),\n          category_id: selectedCategoryId || null\n        })\n        onShowToast?.('Labor class updated', 'success')\n      } else {\n        const classesInCategory = laborClasses.filter(c => c.category_id === selectedCategoryId)\n        await db.createLaborClass(company.id, selectedCategoryId || null, className.trim(), classesInCategory.length)\n        onShowToast?.('Labor class created', 'success')\n      }\n      setShowClassModal(false)\n      setClassName('')\n      setEditingClass(null)\n      setSelectedCategoryId('')\n      await loadData()\n    } catch (error) {\n      console.error('Error saving class:', error)\n      if (error.message?.includes('duplicate')) {\n        onShowToast?.('A class with this name already exists', 'error')\n      } else {\n        onShowToast?.('Error saving class', 'error')\n      }\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const deleteClass = async (laborClass) => {\n    if (!confirm(`Delete labor class \"${laborClass.name}\"? This will also delete all associated rates.`)) return\n\n    try {\n      await db.deleteLaborClass(laborClass.id)\n      onShowToast?.('Labor class deleted', 'success')\n      await loadData()\n    } catch (error) {\n      console.error('Error deleting class:', error)\n      onShowToast?.('Error deleting class', 'error')\n    }\n  }\n\n  // ==========================================\n  // Rates Modal\n  // ==========================================\n\n  const openRatesModal = async (laborClass) => {\n    setSelectedClassForRates(laborClass)\n\n    // Initialize simplified rates structure\n    const rates = {}\n    RATE_TYPES.forEach(rt => {\n      rates[rt.id] = { regular_rate: '', overtime_rate: '' }\n    })\n\n    // Load existing rates\n    try {\n      const existingRates = await db.getLaborClassRates(laborClass.id)\n      existingRates.forEach(r => {\n        // Map old structure to new: use job_type as rate type\n        const rateType = r.job_type === 'pla' ? 'prevailing' : r.job_type\n        if (rates[rateType]) {\n          rates[rateType] = {\n            regular_rate: r.regular_rate || '',\n            overtime_rate: r.overtime_rate || ''\n          }\n        }\n      })\n    } catch (error) {\n      console.error('Error loading rates:', error)\n    }\n\n    setClassRates(rates)\n    setShowRatesModal(true)\n  }\n\n  const updateClassRate = (rateType, field, value) => {\n    setClassRates(prev => ({\n      ...prev,\n      [rateType]: {\n        ...prev[rateType],\n        [field]: value.replace(/[^0-9.]/g, '')\n      }\n    }))\n  }\n\n  const saveClassRates = async () => {\n    if (!selectedClassForRates) return\n\n    setSaving(true)\n    try {\n      const ratesToSave = RATE_TYPES.map(rt => ({\n        work_type: 'labor',  // Generic work type for scalability\n        job_type: rt.id,\n        regular_rate: parseFloat(classRates[rt.id]?.regular_rate) || 0,\n        overtime_rate: parseFloat(classRates[rt.id]?.overtime_rate) || 0\n      }))\n\n      await db.saveLaborClassRates(selectedClassForRates.id, ratesToSave)\n      onShowToast?.('Rates saved', 'success')\n      setShowRatesModal(false)\n      setSelectedClassForRates(null)\n    } catch (error) {\n      console.error('Error saving rates:', error)\n      onShowToast?.('Error saving rates', 'error')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  // ==========================================\n  // Render\n  // ==========================================\n\n  if (loading) {\n    return <div className=\"loading\">Loading labor setup...</div>\n  }\n\n  const uncategorizedClasses = laborClasses.filter(c => !c.category_id)\n\n  return (\n    <div className=\"pricing-section labor-setup-section\">\n      <div className=\"pricing-section-header\">\n        <div>\n          <h2>Labor Setup</h2>\n          <p className=\"section-desc\">\n            Create custom labor categories and classes with rates per work type\n          </p>\n        </div>\n        <div className=\"labor-setup-actions\">\n          <button className=\"btn btn-secondary\" onClick={() => openCategoryModal()}>\n            <Plus size={16} /> Add Category\n          </button>\n          <button\n            className=\"btn btn-primary\"\n            onClick={() => openClassModal()}\n            disabled={categories.length === 0}\n          >\n            <Plus size={16} /> Add Class\n          </button>\n        </div>\n      </div>\n\n      {categories.length === 0 && laborClasses.length === 0 ? (\n        <div className=\"labor-setup-empty\">\n          <AlertCircle size={40} />\n          <h3>No Labor Classes Configured</h3>\n          <p>Create categories to organize your labor classes (e.g., \"Supervision\", \"Operators\", \"Labor\"), then add classes within each category.</p>\n          <button className=\"btn btn-primary\" onClick={() => openCategoryModal()}>\n            <Plus size={16} /> Create First Category\n          </button>\n        </div>\n      ) : (\n        <div className=\"labor-categories-list\">\n          {categories.map(category => {\n            const classesInCategory = laborClasses.filter(c => c.category_id === category.id)\n            const isExpanded = expandedCategories[category.id]\n\n            return (\n              <div key={category.id} className=\"labor-category-card\">\n                <div className=\"labor-category-header\" onClick={() => toggleCategory(category.id)}>\n                  <div className=\"category-expand-icon\">\n                    {isExpanded ? <ChevronDown size={18} /> : <ChevronRight size={18} />}\n                  </div>\n                  <span className=\"category-name\">{category.name}</span>\n                  <span className=\"category-count\">{classesInCategory.length} class{classesInCategory.length !== 1 ? 'es' : ''}</span>\n                  <div className=\"category-actions\" onClick={e => e.stopPropagation()}>\n                    <button\n                      className=\"btn btn-ghost btn-small\"\n                      onClick={() => openClassModal(null, category.id)}\n                      title=\"Add class to this category\"\n                    >\n                      <Plus size={14} />\n                    </button>\n                    <button\n                      className=\"btn btn-ghost btn-small\"\n                      onClick={() => openCategoryModal(category)}\n                      title=\"Edit category\"\n                    >\n                      <Edit2 size={14} />\n                    </button>\n                    <button\n                      className=\"btn btn-ghost btn-small btn-danger\"\n                      onClick={() => deleteCategory(category)}\n                      title=\"Delete category\"\n                    >\n                      <Trash2 size={14} />\n                    </button>\n                  </div>\n                </div>\n\n                {isExpanded && (\n                  <div className=\"labor-classes-list\">\n                    {classesInCategory.length === 0 ? (\n                      <div className=\"no-classes-message\">\n                        No classes in this category.\n                        <button className=\"link-btn\" onClick={() => openClassModal(null, category.id)}>\n                          Add one\n                        </button>\n                      </div>\n                    ) : (\n                      classesInCategory.map(laborClass => (\n                        <div key={laborClass.id} className=\"labor-class-row\">\n                          <span className=\"class-name\">{laborClass.name}</span>\n                          <div className=\"class-actions\">\n                            <button\n                              className=\"btn btn-secondary btn-small\"\n                              onClick={() => openRatesModal(laborClass)}\n                            >\n                              <DollarSign size={14} /> Set Rates\n                            </button>\n                            <button\n                              className=\"btn btn-ghost btn-small\"\n                              onClick={() => openClassModal(laborClass)}\n                              title=\"Edit class\"\n                            >\n                              <Edit2 size={14} />\n                            </button>\n                            <button\n                              className=\"btn btn-ghost btn-small btn-danger\"\n                              onClick={() => deleteClass(laborClass)}\n                              title=\"Delete class\"\n                            >\n                              <Trash2 size={14} />\n                            </button>\n                          </div>\n                        </div>\n                      ))\n                    )}\n                  </div>\n                )}\n              </div>\n            )\n          })}\n\n          {/* Uncategorized classes */}\n          {uncategorizedClasses.length > 0 && (\n            <div className=\"labor-category-card uncategorized\">\n              <div className=\"labor-category-header\">\n                <span className=\"category-name\">Uncategorized</span>\n                <span className=\"category-count\">{uncategorizedClasses.length} class{uncategorizedClasses.length !== 1 ? 'es' : ''}</span>\n              </div>\n              <div className=\"labor-classes-list\">\n                {uncategorizedClasses.map(laborClass => (\n                  <div key={laborClass.id} className=\"labor-class-row\">\n                    <span className=\"class-name\">{laborClass.name}</span>\n                    <div className=\"class-actions\">\n                      <button\n                        className=\"btn btn-secondary btn-small\"\n                        onClick={() => openRatesModal(laborClass)}\n                      >\n                        <DollarSign size={14} /> Set Rates\n                      </button>\n                      <button\n                        className=\"btn btn-ghost btn-small\"\n                        onClick={() => openClassModal(laborClass)}\n                      >\n                        <Edit2 size={14} />\n                      </button>\n                      <button\n                        className=\"btn btn-ghost btn-small btn-danger\"\n                        onClick={() => deleteClass(laborClass)}\n                      >\n                        <Trash2 size={14} />\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Category Modal */}\n      {showCategoryModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowCategoryModal(false)}>\n          <div className=\"modal-content labor-modal\" onClick={e => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>{editingCategory ? 'Edit Category' : 'Add Category'}</h2>\n              <button className=\"close-btn\" onClick={() => setShowCategoryModal(false)}>\n                <X size={20} />\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"form-group\">\n                <label>Category Name</label>\n                <input\n                  type=\"text\"\n                  value={categoryName}\n                  onChange={e => setCategoryName(e.target.value)}\n                  placeholder=\"e.g., Supervision, Operators, Labor\"\n                  autoFocus\n                />\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"btn btn-secondary\" onClick={() => setShowCategoryModal(false)}>\n                Cancel\n              </button>\n              <button className=\"btn btn-primary\" onClick={saveCategory} disabled={saving}>\n                {saving ? 'Saving...' : (editingCategory ? 'Update' : 'Create')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Class Modal */}\n      {showClassModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowClassModal(false)}>\n          <div className=\"modal-content labor-modal\" onClick={e => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>{editingClass ? 'Edit Labor Class' : 'Add Labor Class'}</h2>\n              <button className=\"close-btn\" onClick={() => setShowClassModal(false)}>\n                <X size={20} />\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"form-group\">\n                <label>Class Name</label>\n                <input\n                  type=\"text\"\n                  value={className}\n                  onChange={e => setClassName(e.target.value)}\n                  placeholder=\"e.g., Foreman, Operator, Laborer\"\n                  autoFocus\n                />\n              </div>\n              <div className=\"form-group\">\n                <label>Category</label>\n                <select\n                  value={selectedCategoryId}\n                  onChange={e => setSelectedCategoryId(e.target.value)}\n                >\n                  <option value=\"\">-- No Category --</option>\n                  {categories.map(cat => (\n                    <option key={cat.id} value={cat.id}>{cat.name}</option>\n                  ))}\n                </select>\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"btn btn-secondary\" onClick={() => setShowClassModal(false)}>\n                Cancel\n              </button>\n              <button className=\"btn btn-primary\" onClick={saveClass} disabled={saving}>\n                {saving ? 'Saving...' : (editingClass ? 'Update' : 'Create')}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Rates Modal - Simplified for scalability */}\n      {showRatesModal && selectedClassForRates && (\n        <div className=\"modal-overlay\" onClick={() => setShowRatesModal(false)}>\n          <div className=\"modal-content labor-modal rates-modal\" onClick={e => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h2>Set Rates: {selectedClassForRates.name}</h2>\n              <button className=\"close-btn\" onClick={() => setShowRatesModal(false)}>\n                <X size={20} />\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"rates-simple-grid\">\n                {RATE_TYPES.map(rateType => {\n                  const rateData = classRates[rateType.id] || {}\n                  return (\n                    <div key={rateType.id} className=\"rate-row-simple\">\n                      <span className=\"rate-type-label\">{rateType.label}</span>\n                      <div className=\"rate-inputs\">\n                        <div className=\"rate-input-group\">\n                          <label>Regular</label>\n                          <div className=\"rate-input-inline\">\n                            <span>$</span>\n                            <input\n                              type=\"text\"\n                              inputMode=\"decimal\"\n                              value={rateData.regular_rate || ''}\n                              onChange={e => updateClassRate(rateType.id, 'regular_rate', e.target.value)}\n                              placeholder=\"0.00\"\n                            />\n                            <span>/hr</span>\n                          </div>\n                        </div>\n                        <div className=\"rate-input-group\">\n                          <label>Overtime</label>\n                          <div className=\"rate-input-inline\">\n                            <span>$</span>\n                            <input\n                              type=\"text\"\n                              inputMode=\"decimal\"\n                              value={rateData.overtime_rate || ''}\n                              onChange={e => updateClassRate(rateType.id, 'overtime_rate', e.target.value)}\n                              placeholder=\"0.00\"\n                            />\n                            <span>/hr</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )\n                })}\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"btn btn-secondary\" onClick={() => setShowRatesModal(false)}>\n                Cancel\n              </button>\n              <button className=\"btn btn-primary\" onClick={saveClassRates} disabled={saving}>\n                <Check size={16} /> {saving ? 'Saving...' : 'Save Rates'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","import { useState, useEffect } from 'react'\nimport { Pencil, Trash2 } from 'lucide-react'\nimport { db } from '../../lib/supabase'\n\nconst CATEGORIES = ['Containment', 'PPE', 'Disposal', 'Equipment']\n\nexport default function MaterialsSection({ company, onShowToast }) {\n  const [items, setItems] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [filter, setFilter] = useState('all')\n  const [editingItem, setEditingItem] = useState(null)\n  const [showAddForm, setShowAddForm] = useState(false)\n  const [newItem, setNewItem] = useState({ name: '', category: 'Equipment', unit: 'each', cost_per_unit: '' })\n  const [duplicates, setDuplicates] = useState([])\n  const [showDuplicates, setShowDuplicates] = useState(false)\n\n  useEffect(() => {\n    if (company?.id) {\n      loadItems()\n    }\n  }, [company?.id])\n\n  const loadItems = async () => {\n    setLoading(true)\n    try {\n      const data = await db.getAllMaterialsEquipment(company.id)\n      setItems(data || [])\n      findDuplicates(data || [])\n    } catch (error) {\n      console.error('Error loading items:', error)\n      onShowToast('Error loading materials', 'error')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const findDuplicates = (itemList) => {\n    const nameMap = {}\n    const dupes = []\n    const activeItems = itemList.filter(item => item.active !== false)\n\n    activeItems.forEach(item => {\n      const normalizedName = item.name.toLowerCase().trim()\n      if (!nameMap[normalizedName]) {\n        nameMap[normalizedName] = []\n      }\n      nameMap[normalizedName].push(item)\n    })\n\n    Object.entries(nameMap).forEach(([name, group]) => {\n      if (group.length > 1) {\n        dupes.push({ name, items: group })\n      }\n    })\n\n    setDuplicates(dupes)\n  }\n\n  const mergeDuplicates = async (dupeGroup) => {\n    try {\n      const itemsWithCost = dupeGroup.items.filter(i => i.cost_per_unit > 0)\n      const keepItem = itemsWithCost.length > 0 ? itemsWithCost[0] : dupeGroup.items[0]\n      const deleteItems = dupeGroup.items.filter(i => i.id !== keepItem.id)\n\n      for (const item of deleteItems) {\n        await db.deleteMaterialEquipment(item.id)\n      }\n\n      onShowToast(`Merged ${dupeGroup.items.length} items into one`, 'success')\n      loadItems()\n    } catch (error) {\n      console.error('Error merging duplicates:', error)\n      onShowToast('Error merging duplicates', 'error')\n    }\n  }\n\n  const mergeAllDuplicates = async () => {\n    if (!confirm(`Merge all ${duplicates.length} duplicate groups?`)) return\n\n    try {\n      for (const dupeGroup of duplicates) {\n        const itemsWithCost = dupeGroup.items.filter(i => i.cost_per_unit > 0)\n        const keepItem = itemsWithCost.length > 0 ? itemsWithCost[0] : dupeGroup.items[0]\n        const deleteItems = dupeGroup.items.filter(i => i.id !== keepItem.id)\n\n        for (const item of deleteItems) {\n          await db.deleteMaterialEquipment(item.id)\n        }\n      }\n\n      onShowToast('All duplicates merged!', 'success')\n      loadItems()\n      setShowDuplicates(false)\n    } catch (error) {\n      console.error('Error merging all duplicates:', error)\n      onShowToast('Error merging duplicates', 'error')\n    }\n  }\n\n  const handleAddItem = async () => {\n    if (!newItem.name.trim()) {\n      onShowToast('Enter item name', 'error')\n      return\n    }\n\n    try {\n      await db.createMaterialEquipment({\n        company_id: company.id,\n        name: newItem.name.trim(),\n        category: newItem.category,\n        unit: newItem.unit || 'each',\n        cost_per_unit: parseFloat(newItem.cost_per_unit) || 0,\n        active: true\n      })\n\n      onShowToast('Item added', 'success')\n      setNewItem({ name: '', category: 'Equipment', unit: 'each', cost_per_unit: '' })\n      setShowAddForm(false)\n      loadItems()\n    } catch (error) {\n      console.error('Error adding item:', error)\n      onShowToast('Error adding item', 'error')\n    }\n  }\n\n  const handleUpdateItem = async (item) => {\n    try {\n      await db.updateMaterialEquipment(item.id, {\n        name: item.name,\n        category: item.category,\n        unit: item.unit,\n        cost_per_unit: parseFloat(item.cost_per_unit) || 0\n      })\n\n      onShowToast('Item updated', 'success')\n      setEditingItem(null)\n      loadItems()\n    } catch (error) {\n      console.error('Error updating item:', error)\n      onShowToast('Error updating item', 'error')\n    }\n  }\n\n  const handleDeleteItem = async (itemId) => {\n    if (!confirm('Delete this item?')) return\n\n    try {\n      await db.deleteMaterialEquipment(itemId)\n      onShowToast('Item deleted', 'success')\n      loadItems()\n    } catch (error) {\n      console.error('Error deleting item:', error)\n      onShowToast('Error deleting item', 'error')\n    }\n  }\n\n  const filteredItems = filter === 'all'\n    ? items.filter(i => i.active !== false)\n    : items.filter(i => i.category === filter && i.active !== false)\n\n  const groupedItems = filteredItems.reduce((acc, item) => {\n    const cat = item.category || 'Other'\n    if (!acc[cat]) acc[cat] = []\n    acc[cat].push(item)\n    return acc\n  }, {})\n\n  if (loading) {\n    return <div className=\"loading\">Loading materials...</div>\n  }\n\n  return (\n    <div className=\"pricing-section\">\n      <div className=\"materials-header\">\n        <div className=\"materials-title\">\n          <h2>Materials & Equipment</h2>\n          <span className=\"materials-count\">{items.filter(i => i.active !== false).length} items</span>\n        </div>\n        <div className=\"materials-actions\">\n          {duplicates.length > 0 && (\n            <button\n              className={`btn btn-warning ${showDuplicates ? 'active' : ''}`}\n              onClick={() => setShowDuplicates(!showDuplicates)}\n            >\n              {duplicates.length} Duplicates\n            </button>\n          )}\n          <button className=\"btn btn-primary\" onClick={() => setShowAddForm(true)}>\n            + Add Item\n          </button>\n        </div>\n      </div>\n\n      {/* Duplicates Panel */}\n      {showDuplicates && duplicates.length > 0 && (\n        <div className=\"duplicates-panel\">\n          <div className=\"duplicates-header\">\n            <h3>Duplicate Items Found</h3>\n            <button className=\"btn btn-success btn-small\" onClick={mergeAllDuplicates}>\n              Merge All ({duplicates.length})\n            </button>\n          </div>\n          <div className=\"duplicates-list\">\n            {duplicates.map((dupe, idx) => (\n              <div key={idx} className=\"duplicate-group\">\n                <div className=\"duplicate-name\">\"{dupe.name}\" x {dupe.items.length}</div>\n                <div className=\"duplicate-items\">\n                  {dupe.items.map(item => (\n                    <span key={item.id} className=\"duplicate-item\">\n                      {item.category} - ${item.cost_per_unit || 0}\n                    </span>\n                  ))}\n                </div>\n                <button\n                  className=\"btn btn-secondary btn-small\"\n                  onClick={() => mergeDuplicates(dupe)}\n                >\n                  Merge\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Add Item Form */}\n      {showAddForm && (\n        <div className=\"add-item-form\">\n          <h3>Add New Item</h3>\n          <div className=\"form-row\">\n            <input\n              type=\"text\"\n              placeholder=\"Item Name\"\n              value={newItem.name}\n              onChange={(e) => setNewItem({ ...newItem, name: e.target.value })}\n              autoFocus\n            />\n            <select\n              value={newItem.category}\n              onChange={(e) => setNewItem({ ...newItem, category: e.target.value })}\n            >\n              {CATEGORIES.map(cat => (\n                <option key={cat} value={cat}>{cat}</option>\n              ))}\n            </select>\n          </div>\n          <div className=\"form-row\">\n            <input\n              type=\"text\"\n              placeholder=\"Unit (e.g., each, day, hour)\"\n              value={newItem.unit}\n              onChange={(e) => setNewItem({ ...newItem, unit: e.target.value })}\n            />\n            <div className=\"dollar-input-wrapper\">\n              <span className=\"dollar-prefix\">$</span>\n              <input\n                type=\"text\"\n                inputMode=\"decimal\"\n                className=\"dollar-input\"\n                placeholder=\"Cost per unit\"\n                value={newItem.cost_per_unit}\n                onChange={(e) => {\n                  const val = e.target.value.replace(/[^0-9.]/g, '')\n                  setNewItem({ ...newItem, cost_per_unit: val })\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"form-actions\">\n            <button className=\"btn btn-secondary\" onClick={() => setShowAddForm(false)}>\n              Cancel\n            </button>\n            <button className=\"btn btn-primary\" onClick={handleAddItem}>\n              Add Item\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Filter Tabs */}\n      <div className=\"materials-filter\">\n        <button\n          className={`filter-tab ${filter === 'all' ? 'active' : ''}`}\n          onClick={() => setFilter('all')}\n        >\n          All\n        </button>\n        {CATEGORIES.map(cat => (\n          <button\n            key={cat}\n            className={`filter-tab ${filter === cat ? 'active' : ''}`}\n            onClick={() => setFilter(cat)}\n          >\n            {cat}\n            <span className=\"filter-count\">\n              {items.filter(i => i.category === cat && i.active !== false).length}\n            </span>\n          </button>\n        ))}\n      </div>\n\n      {/* Items List */}\n      <div className=\"materials-list\">\n        {filter === 'all' ? (\n          Object.entries(groupedItems).map(([category, catItems]) => (\n            <div key={category} className=\"materials-category\">\n              <h3 className=\"category-header\">{category}</h3>\n              <div className=\"category-items\">\n                {catItems.map(item => (\n                  <MaterialItem\n                    key={item.id}\n                    item={item}\n                    editingItem={editingItem}\n                    setEditingItem={setEditingItem}\n                    handleUpdateItem={handleUpdateItem}\n                    handleDeleteItem={handleDeleteItem}\n                    categories={CATEGORIES}\n                  />\n                ))}\n              </div>\n            </div>\n          ))\n        ) : (\n          <div className=\"materials-category\">\n            <h3 className=\"category-header\">{filter}</h3>\n            <div className=\"category-items\">\n              {filteredItems.map(item => (\n                <MaterialItem\n                  key={item.id}\n                  item={item}\n                  editingItem={editingItem}\n                  setEditingItem={setEditingItem}\n                  handleUpdateItem={handleUpdateItem}\n                  handleDeleteItem={handleDeleteItem}\n                  categories={CATEGORIES}\n                />\n              ))}\n            </div>\n          </div>\n        )}\n\n        {filteredItems.length === 0 && (\n          <div className=\"empty-state\">\n            <p>No items in this category</p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nfunction MaterialItem({ item, editingItem, setEditingItem, handleUpdateItem, handleDeleteItem, categories }) {\n  if (editingItem?.id === item.id) {\n    return (\n      <div className=\"material-item\">\n        <div className=\"item-edit-form\">\n          <input\n            type=\"text\"\n            value={editingItem.name}\n            onChange={(e) => setEditingItem({ ...editingItem, name: e.target.value })}\n          />\n          <select\n            value={editingItem.category}\n            onChange={(e) => setEditingItem({ ...editingItem, category: e.target.value })}\n          >\n            {categories.map(cat => (\n              <option key={cat} value={cat}>{cat}</option>\n            ))}\n          </select>\n          <input\n            type=\"text\"\n            value={editingItem.unit}\n            onChange={(e) => setEditingItem({ ...editingItem, unit: e.target.value })}\n            placeholder=\"Unit\"\n          />\n          <div className=\"dollar-input-wrapper compact\">\n            <span className=\"dollar-prefix\">$</span>\n            <input\n              type=\"text\"\n              inputMode=\"decimal\"\n              className=\"dollar-input\"\n              value={editingItem.cost_per_unit}\n              onChange={(e) => {\n                const val = e.target.value.replace(/[^0-9.]/g, '')\n                setEditingItem({ ...editingItem, cost_per_unit: val })\n              }}\n              placeholder=\"Cost\"\n            />\n          </div>\n          <div className=\"edit-actions\">\n            <button className=\"btn btn-success btn-small\" onClick={() => handleUpdateItem(editingItem)}>\n              Save\n            </button>\n            <button className=\"btn btn-secondary btn-small\" onClick={() => setEditingItem(null)}>\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"material-item\">\n      <div className=\"item-info\">\n        <span className=\"item-name\">{item.name}</span>\n        <span className=\"item-unit\">{item.unit || 'each'}</span>\n      </div>\n      <div className=\"item-cost\">\n        ${(item.cost_per_unit || 0).toFixed(2)}\n      </div>\n      <div className=\"item-actions\">\n        <button\n          className=\"btn-icon\"\n          onClick={() => setEditingItem({ ...item })}\n          title=\"Edit\"\n        >\n          <Pencil size={16} />\n        </button>\n        <button\n          className=\"btn-icon danger\"\n          onClick={() => handleDeleteItem(item.id)}\n          title=\"Delete\"\n        >\n          <Trash2 size={16} />\n        </button>\n      </div>\n    </div>\n  )\n}\n","import { useState } from 'react'\nimport { HardHat, Wrench } from 'lucide-react'\nimport LaborRatesSection from './pricing/LaborRatesSection'\nimport MaterialsSection from './pricing/MaterialsSection'\n\nconst PRICING_TABS = [\n  { id: 'labor', label: 'Labor Rates', Icon: HardHat },\n  { id: 'materials', label: 'Materials & Equipment', Icon: Wrench }\n]\n\nexport default function PricingManager({ company, onShowToast }) {\n  const [activeTab, setActiveTab] = useState('labor')\n\n  return (\n    <div className=\"pricing-manager\">\n      <div className=\"pricing-header\">\n        <h1>Pricing Configuration</h1>\n        <p className=\"pricing-subtitle\">Set up labor rates, materials pricing, and disposal costs</p>\n      </div>\n\n      {/* Pricing Tabs */}\n      <div className=\"pricing-tabs\">\n        {PRICING_TABS.map(tab => (\n          <button\n            key={tab.id}\n            className={`pricing-tab ${activeTab === tab.id ? 'active' : ''}`}\n            onClick={() => setActiveTab(tab.id)}\n          >\n            <tab.Icon size={18} className=\"pricing-tab-icon\" />\n            <span className=\"pricing-tab-label\">{tab.label}</span>\n          </button>\n        ))}\n      </div>\n\n      {/* Tab Content */}\n      <div className=\"pricing-content\">\n        {activeTab === 'labor' && (\n          <LaborRatesSection company={company} onShowToast={onShowToast} />\n        )}\n        {activeTab === 'materials' && (\n          <MaterialsSection company={company} onShowToast={onShowToast} />\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":["RATE_TYPES","LaborRatesSection","company","onShowToast","categories","setCategories","useState","laborClasses","setLaborClasses","loading","setLoading","expandedCategories","setExpandedCategories","showCategoryModal","setShowCategoryModal","showClassModal","setShowClassModal","showRatesModal","setShowRatesModal","editingCategory","setEditingCategory","editingClass","setEditingClass","selectedClassForRates","setSelectedClassForRates","categoryName","setCategoryName","className","setClassName","selectedCategoryId","setSelectedCategoryId","classRates","setClassRates","saving","setSaving","useEffect","loadData","data","db","expanded","cat","error","toggleCategory","categoryId","prev","openCategoryModal","category","saveCategory","newCategory","deleteCategory","c","openClassModal","laborClass","saveClass","classesInCategory","deleteClass","openRatesModal","rates","rt","r","rateType","updateClassRate","field","value","saveClassRates","ratesToSave","jsx","uncategorizedClasses","jsxs","Plus","AlertCircle","isExpanded","ChevronDown","ChevronRight","e","Edit2","Trash2","DollarSign","X","rateData","Check","CATEGORIES","MaterialsSection","items","setItems","filter","setFilter","editingItem","setEditingItem","showAddForm","setShowAddForm","newItem","setNewItem","duplicates","setDuplicates","showDuplicates","setShowDuplicates","loadItems","findDuplicates","itemList","nameMap","dupes","item","normalizedName","name","group","mergeDuplicates","dupeGroup","itemsWithCost","i","keepItem","deleteItems","mergeAllDuplicates","handleAddItem","handleUpdateItem","handleDeleteItem","itemId","filteredItems","groupedItems","acc","dupe","idx","val","catItems","MaterialItem","Pencil","PRICING_TABS","HardHat","Wrench","PricingManager","activeTab","setActiveTab","tab"],"mappings":"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"}