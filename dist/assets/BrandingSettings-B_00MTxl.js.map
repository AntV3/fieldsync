{"version":3,"file":"BrandingSettings-B_00MTxl.js","sources":["../../src/components/BrandingSettings.jsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react'\nimport { useBranding } from '../lib/BrandingContext'\nimport { supabase } from '../lib/supabase'\n\nexport default function BrandingSettings({ company, onShowToast }) {\n  const { branding, updateBranding, uploadBrandingImage, loading } = useBranding()\n  const [saving, setSaving] = useState(false)\n  const [previewMode, setPreviewMode] = useState(false)\n  const [localBranding, setLocalBranding] = useState(branding)\n\n  // Office code state\n  const [officeCode, setOfficeCode] = useState('')\n  const [regeneratingCode, setRegeneratingCode] = useState(false)\n\n  const logoInputRef = useRef(null)\n  const faviconInputRef = useRef(null)\n  const backgroundInputRef = useRef(null)\n\n  // Load office code on mount\n  useEffect(() => {\n    if (company?.id) {\n      loadOfficeCode()\n    }\n  }, [company?.id])\n\n  const loadOfficeCode = async () => {\n    try {\n      const { data, error } = await supabase\n        .from('companies')\n        .select('office_code')\n        .eq('id', company.id)\n        .single()\n\n      if (!error && data?.office_code) {\n        setOfficeCode(data.office_code)\n      }\n    } catch (err) {\n      console.error('Error loading office code:', err)\n    }\n  }\n\n  const regenerateOfficeCode = async () => {\n    if (!confirm('Regenerate office code? Current code will stop working immediately.')) {\n      return\n    }\n\n    setRegeneratingCode(true)\n    try {\n      // Generate new 6-character code using crypto for security\n      const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'\n      const array = new Uint8Array(6)\n      crypto.getRandomValues(array)\n      const newCode = Array.from(array, b => chars[b % chars.length]).join('')\n\n      const { error } = await supabase\n        .from('companies')\n        .update({ office_code: newCode })\n        .eq('id', company.id)\n\n      if (error) throw error\n\n      setOfficeCode(newCode)\n      onShowToast?.('Office code regenerated', 'success')\n    } catch {\n      onShowToast?.('Error regenerating code', 'error')\n    } finally {\n      setRegeneratingCode(false)\n    }\n  }\n\n  const copyOfficeCode = () => {\n    navigator.clipboard.writeText(officeCode)\n    onShowToast?.('Office code copied to clipboard', 'success')\n  }\n\n  // Tier restrictions\n  const tier = company?.subscription_tier || 'free'\n  const canCustomizeLogo = ['pro', 'business', 'enterprise'].includes(tier)\n  const canWhiteLabel = ['business', 'enterprise'].includes(tier)\n  const canCustomDomain = tier === 'enterprise'\n\n  const handleInputChange = (field, value) => {\n    setLocalBranding(prev => ({ ...prev, [field]: value }))\n  }\n\n  const handleImageUpload = async (file, type) => {\n    if (!file) return\n\n    // Validate file size (max 5MB)\n    if (file.size > 5 * 1024 * 1024) {\n      onShowToast?.('Image must be smaller than 5MB', 'error')\n      return\n    }\n\n    // Validate file type\n    if (!file.type.startsWith('image/')) {\n      onShowToast?.('Please upload an image file', 'error')\n      return\n    }\n\n    try {\n      const result = await uploadBrandingImage(file, type)\n      if (result.success) {\n        handleInputChange(`${type}_url`, result.url)\n        onShowToast?.(`${type.charAt(0).toUpperCase() + type.slice(1)} uploaded successfully`, 'success')\n      } else {\n        onShowToast?.(result.error || 'Failed to upload image', 'error')\n      }\n    } catch (error) {\n      console.error('Upload error:', error)\n      onShowToast?.('Failed to upload image', 'error')\n    }\n  }\n\n  const handleSave = async () => {\n    try {\n      setSaving(true)\n\n      // Validate colors\n      const colorRegex = /^#[0-9A-F]{6}$/i\n      if (!colorRegex.test(localBranding.primary_color)) {\n        onShowToast?.('Primary color must be a valid hex color (e.g., #3B82F6)', 'error')\n        return\n      }\n      if (!colorRegex.test(localBranding.secondary_color)) {\n        onShowToast?.('Secondary color must be a valid hex color (e.g., #1E40AF)', 'error')\n        return\n      }\n\n      const result = await updateBranding(localBranding)\n\n      if (result.success) {\n        onShowToast?.('Branding settings saved successfully!', 'success')\n      } else {\n        onShowToast?.(result.error || 'Failed to save branding settings', 'error')\n      }\n    } catch (error) {\n      console.error('Save error:', error)\n      onShowToast?.('Failed to save branding settings', 'error')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handlePreview = () => {\n    // Apply preview to DOM temporarily\n    if (!previewMode) {\n      document.documentElement.style.setProperty('--primary-color', localBranding.primary_color)\n      document.documentElement.style.setProperty('--secondary-color', localBranding.secondary_color)\n      document.title = localBranding.custom_app_name || 'FieldSync'\n    } else {\n      // Restore current branding\n      document.documentElement.style.setProperty('--primary-color', branding.primary_color)\n      document.documentElement.style.setProperty('--secondary-color', branding.secondary_color)\n      document.title = branding.custom_app_name || 'FieldSync'\n    }\n    setPreviewMode(!previewMode)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"settings-loading\">\n        <div className=\"spinner\"></div>\n        <p>Loading branding settings...</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"branding-settings\">\n      <div className=\"settings-header\">\n        <h2>ðŸŽ¨ Branding Settings</h2>\n        {tier === 'free' && (\n          <div className=\"tier-badge tier-free\">Free Plan - Upgrade for branding options</div>\n        )}\n        {tier === 'pro' && (\n          <div className=\"tier-badge tier-pro\">Pro Plan</div>\n        )}\n        {tier === 'business' && (\n          <div className=\"tier-badge tier-business\">Business Plan</div>\n        )}\n        {tier === 'enterprise' && (\n          <div className=\"tier-badge tier-enterprise\">Enterprise Plan</div>\n        )}\n      </div>\n\n      {/* Security Section - Office Code */}\n      <div className=\"settings-section security-section\">\n        <h3>Security</h3>\n\n        <div className=\"setting-item\">\n          <label>Office Code</label>\n          <p className=\"help-text\" style={{ marginBottom: '0.75rem' }}>\n            Share this code with office staff only. Required to create new office accounts.\n          </p>\n          <div className=\"office-code-display\">\n            <code className=\"office-code-value\">{officeCode || '------'}</code>\n            <button\n              className=\"btn-secondary btn-small\"\n              onClick={copyOfficeCode}\n              disabled={!officeCode}\n            >\n              Copy\n            </button>\n            <button\n              className=\"btn-secondary btn-small\"\n              onClick={regenerateOfficeCode}\n              disabled={regeneratingCode}\n            >\n              {regeneratingCode ? '...' : 'Regenerate'}\n            </button>\n          </div>\n          <p className=\"help-text\" style={{ marginTop: '0.5rem', color: 'var(--accent-amber)' }}>\n            Field workers should NOT have this code - they use project PINs only.\n          </p>\n        </div>\n\n        <div className=\"setting-item\">\n          <label>Company Code</label>\n          <p className=\"help-text\" style={{ marginBottom: '0.75rem' }}>\n            Public code for employees to find your company.\n          </p>\n          <div className=\"office-code-display\">\n            <code className=\"office-code-value\">{company?.code || '------'}</code>\n            <button\n              className=\"btn-secondary btn-small\"\n              onClick={() => {\n                navigator.clipboard.writeText(company?.code || '')\n                onShowToast?.('Company code copied', 'success')\n              }}\n              disabled={!company?.code}\n            >\n              Copy\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"settings-section\">\n        <h3>Visual Identity</h3>\n\n        {/* Logo Upload */}\n        <div className=\"setting-item\">\n          <label>Logo</label>\n          {!canCustomizeLogo ? (\n            <div className=\"upgrade-notice\">\n              <p>ðŸ”’ Upgrade to Pro, Business, or Enterprise to customize your logo</p>\n            </div>\n          ) : (\n            <>\n              {localBranding.logo_url && (\n                <div className=\"logo-preview\">\n                  <img src={localBranding.logo_url} alt=\"Logo preview\" />\n                </div>\n              )}\n              <input\n                ref={logoInputRef}\n                type=\"file\"\n                accept=\"image/*\"\n                style={{ display: 'none' }}\n                onChange={(e) => handleImageUpload(e.target.files[0], 'logo')}\n              />\n              <button\n                className=\"btn-secondary\"\n                onClick={() => logoInputRef.current?.click()}\n              >\n                {localBranding.logo_url ? 'Change Logo' : 'Upload Logo'}\n              </button>\n              <p className=\"help-text\">Recommended: 200x60px, PNG with transparent background</p>\n            </>\n          )}\n        </div>\n\n        {/* App Name */}\n        <div className=\"setting-item\">\n          <label htmlFor=\"app-name\">App Name</label>\n          {!canCustomizeLogo ? (\n            <div className=\"upgrade-notice\">\n              <p>ðŸ”’ Upgrade to Pro, Business, or Enterprise to customize your app name</p>\n            </div>\n          ) : (\n            <>\n              <input\n                id=\"app-name\"\n                type=\"text\"\n                className=\"input\"\n                value={localBranding.custom_app_name || ''}\n                onChange={(e) => handleInputChange('custom_app_name', e.target.value)}\n                placeholder=\"FieldSync\"\n                maxLength={50}\n              />\n              <p className=\"help-text\">This name appears in the browser tab and throughout the app</p>\n            </>\n          )}\n        </div>\n\n        {/* Primary Color */}\n        <div className=\"setting-item\">\n          <label htmlFor=\"primary-color\">Primary Color</label>\n          {!canCustomizeLogo ? (\n            <div className=\"upgrade-notice\">\n              <p>ðŸ”’ Upgrade to Pro, Business, or Enterprise to customize colors</p>\n            </div>\n          ) : (\n            <div className=\"color-input-group\">\n              <input\n                id=\"primary-color\"\n                type=\"color\"\n                value={localBranding.primary_color || '#3B82F6'}\n                onChange={(e) => handleInputChange('primary_color', e.target.value)}\n                className=\"color-picker\"\n              />\n              <input\n                type=\"text\"\n                className=\"input color-text\"\n                value={localBranding.primary_color || '#3B82F6'}\n                onChange={(e) => handleInputChange('primary_color', e.target.value)}\n                placeholder=\"#3B82F6\"\n                pattern=\"^#[0-9A-Fa-f]{6}$\"\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Secondary Color */}\n        <div className=\"setting-item\">\n          <label htmlFor=\"secondary-color\">Secondary Color</label>\n          {!canCustomizeLogo ? (\n            <div className=\"upgrade-notice\">\n              <p>ðŸ”’ Upgrade to Pro, Business, or Enterprise to customize colors</p>\n            </div>\n          ) : (\n            <div className=\"color-input-group\">\n              <input\n                id=\"secondary-color\"\n                type=\"color\"\n                value={localBranding.secondary_color || '#1E40AF'}\n                onChange={(e) => handleInputChange('secondary_color', e.target.value)}\n                className=\"color-picker\"\n              />\n              <input\n                type=\"text\"\n                className=\"input color-text\"\n                value={localBranding.secondary_color || '#1E40AF'}\n                onChange={(e) => handleInputChange('secondary_color', e.target.value)}\n                placeholder=\"#1E40AF\"\n                pattern=\"^#[0-9A-Fa-f]{6}$\"\n              />\n            </div>\n          )}\n        </div>\n\n        {/* Favicon */}\n        <div className=\"setting-item\">\n          <label>Favicon</label>\n          {!canCustomizeLogo ? (\n            <div className=\"upgrade-notice\">\n              <p>ðŸ”’ Upgrade to Pro, Business, or Enterprise to customize your favicon</p>\n            </div>\n          ) : (\n            <>\n              {localBranding.favicon_url && (\n                <div className=\"favicon-preview\">\n                  <img src={localBranding.favicon_url} alt=\"Favicon preview\" />\n                </div>\n              )}\n              <input\n                ref={faviconInputRef}\n                type=\"file\"\n                accept=\"image/*\"\n                style={{ display: 'none' }}\n                onChange={(e) => handleImageUpload(e.target.files[0], 'favicon')}\n              />\n              <button\n                className=\"btn-secondary\"\n                onClick={() => faviconInputRef.current?.click()}\n              >\n                {localBranding.favicon_url ? 'Change Favicon' : 'Upload Favicon'}\n              </button>\n              <p className=\"help-text\">Recommended: 32x32px or 64x64px, PNG or ICO format</p>\n            </>\n          )}\n        </div>\n\n        {/* Login Background */}\n        <div className=\"setting-item\">\n          <label>Login Background</label>\n          {!canWhiteLabel ? (\n            <div className=\"upgrade-notice\">\n              <p>ðŸ”’ Upgrade to Business or Enterprise to customize login background</p>\n            </div>\n          ) : (\n            <>\n              {localBranding.login_background_url && (\n                <div className=\"background-preview\">\n                  <img src={localBranding.login_background_url} alt=\"Background preview\" />\n                </div>\n              )}\n              <input\n                ref={backgroundInputRef}\n                type=\"file\"\n                accept=\"image/*\"\n                style={{ display: 'none' }}\n                onChange={(e) => handleImageUpload(e.target.files[0], 'login_background')}\n              />\n              <button\n                className=\"btn-secondary\"\n                onClick={() => backgroundInputRef.current?.click()}\n              >\n                {localBranding.login_background_url ? 'Change Background' : 'Upload Background'}\n              </button>\n              <p className=\"help-text\">Recommended: 1920x1080px, JPG or PNG</p>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* White-Label Options */}\n      <div className=\"settings-section\">\n        <h3>White-Label Options</h3>\n\n        <div className=\"setting-item\">\n          <label className=\"checkbox-label\">\n            <input\n              type=\"checkbox\"\n              checked={localBranding.hide_fieldsync_branding || false}\n              onChange={(e) => handleInputChange('hide_fieldsync_branding', e.target.checked)}\n              disabled={!canWhiteLabel}\n            />\n            <span>Hide \"Powered by FieldSync\"</span>\n          </label>\n          {!canWhiteLabel && (\n            <p className=\"help-text\">ðŸ”’ Business or Enterprise plan required</p>\n          )}\n        </div>\n      </div>\n\n      {/* Email Settings */}\n      <div className=\"settings-section\">\n        <h3>Email Branding</h3>\n\n        <div className=\"setting-item\">\n          <label htmlFor=\"email-from-name\">From Name</label>\n          <input\n            id=\"email-from-name\"\n            type=\"text\"\n            className=\"input\"\n            value={localBranding.email_from_name || ''}\n            onChange={(e) => handleInputChange('email_from_name', e.target.value)}\n            placeholder=\"Your Company Name\"\n            disabled={!canWhiteLabel}\n          />\n          {!canWhiteLabel && (\n            <p className=\"help-text\">ðŸ”’ Business or Enterprise plan required</p>\n          )}\n        </div>\n\n        <div className=\"setting-item\">\n          <label htmlFor=\"email-from-address\">From Email</label>\n          <input\n            id=\"email-from-address\"\n            type=\"email\"\n            className=\"input\"\n            value={localBranding.email_from_address || ''}\n            onChange={(e) => handleInputChange('email_from_address', e.target.value)}\n            placeholder=\"noreply@yourcompany.com\"\n            disabled={!canWhiteLabel}\n          />\n          {!canWhiteLabel && (\n            <p className=\"help-text\">ðŸ”’ Business or Enterprise plan required</p>\n          )}\n        </div>\n      </div>\n\n      {/* Custom Domain */}\n      <div className=\"settings-section\">\n        <h3>Custom Domain</h3>\n\n        <div className=\"setting-item\">\n          <label htmlFor=\"custom-domain\">Domain</label>\n          {!canCustomDomain ? (\n            <div className=\"upgrade-notice\">\n              <p>ðŸ”’ Enterprise plan required for custom domain support</p>\n              <p className=\"help-text\">\n                Custom domains allow you to host the app at your own URL (e.g., app.yourcompany.com)\n              </p>\n            </div>\n          ) : (\n            <>\n              <input\n                id=\"custom-domain\"\n                type=\"text\"\n                className=\"input\"\n                value={localBranding.custom_domain || ''}\n                onChange={(e) => handleInputChange('custom_domain', e.target.value)}\n                placeholder=\"app.yourcompany.com\"\n              />\n              {localBranding.custom_domain && (\n                <div className={`domain-status ${localBranding.domain_verified ? 'verified' : 'pending'}`}>\n                  {localBranding.domain_verified ? (\n                    <>âœ“ Connected</>\n                  ) : (\n                    <>âš  DNS setup required</>\n                  )}\n                </div>\n              )}\n              <p className=\"help-text\">\n                Contact support to configure DNS and SSL certificate for your custom domain\n              </p>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Actions */}\n      <div className=\"settings-actions\">\n        <button\n          className=\"btn-secondary\"\n          onClick={handlePreview}\n        >\n          {previewMode ? 'Exit Preview' : 'Preview Changes'}\n        </button>\n        <button\n          className=\"btn-primary\"\n          onClick={handleSave}\n          disabled={saving || !canCustomizeLogo}\n        >\n          {saving ? 'Saving...' : 'Save Changes'}\n        </button>\n      </div>\n\n      {previewMode && (\n        <div className=\"preview-banner\">\n          Preview Mode Active - Your changes are not yet saved\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["BrandingSettings","company","onShowToast","branding","updateBranding","uploadBrandingImage","loading","useBranding","saving","setSaving","useState","previewMode","setPreviewMode","localBranding","setLocalBranding","officeCode","setOfficeCode","regeneratingCode","setRegeneratingCode","logoInputRef","useRef","faviconInputRef","backgroundInputRef","useEffect","loadOfficeCode","data","error","supabase","err","regenerateOfficeCode","chars","array","newCode","b","copyOfficeCode","tier","canCustomizeLogo","canWhiteLabel","canCustomDomain","handleInputChange","field","value","prev","handleImageUpload","file","type","result","handleSave","colorRegex","handlePreview","jsxs","jsx","Fragment","e"],"mappings":"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"}