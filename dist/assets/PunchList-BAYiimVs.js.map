{"version":3,"file":"PunchList-BAYiimVs.js","sources":["../../src/components/PunchList.jsx"],"sourcesContent":["import { useState, useEffect, useCallback, useMemo } from 'react'\nimport { CheckCircle2, Circle, Clock, Plus, X, MapPin, User, Filter, Trash2, Edit3, Save } from 'lucide-react'\nimport { supabase, isSupabaseConfigured } from '../lib/supabase'\n\nconst PRIORITY_OPTIONS = [\n  { value: 'high', label: 'High', color: '#ef4444' },\n  { value: 'medium', label: 'Medium', color: '#f59e0b' },\n  { value: 'low', label: 'Low', color: '#6b7280' }\n]\n\nconst STATUS_OPTIONS = [\n  { value: 'open', label: 'Open', icon: Circle, color: '#ef4444' },\n  { value: 'in_progress', label: 'In Progress', icon: Clock, color: '#f59e0b' },\n  { value: 'complete', label: 'Complete', icon: CheckCircle2, color: '#10b981' }\n]\n\n/**\n * PunchList - Tracks deficiency items that need resolution before project closeout.\n * Items are linked to work areas and can include photos, assignees, and priorities.\n */\nexport default function PunchList({ projectId, areas = [], companyId, onShowToast }) {\n  const [items, setItems] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [showForm, setShowForm] = useState(false)\n  const [editingItem, setEditingItem] = useState(null)\n  const [filterStatus, setFilterStatus] = useState('all')\n  const [filterArea, setFilterArea] = useState('all')\n  const [saving, setSaving] = useState(false)\n  const [formData, setFormData] = useState({\n    description: '',\n    area_id: '',\n    assigned_to: '',\n    priority: 'medium',\n    notes: '',\n    photo_url: ''\n  })\n\n  const loadItems = useCallback(async () => {\n    if (!projectId || !isSupabaseConfigured) {\n      setLoading(false)\n      return\n    }\n\n    try {\n      const { data, error } = await supabase\n        .from('punch_list_items')\n        .select('*')\n        .eq('project_id', projectId)\n        .order('created_at', { ascending: false })\n\n      if (error) throw error\n      setItems(data || [])\n    } catch (err) {\n      console.error('Error loading punch list:', err)\n      // Table might not exist yet - that's OK\n      setItems([])\n    } finally {\n      setLoading(false)\n    }\n  }, [projectId])\n\n  useEffect(() => {\n    loadItems()\n  }, [loadItems])\n\n  // Subscribe to real-time updates\n  useEffect(() => {\n    if (!projectId || !isSupabaseConfigured) return\n\n    const channel = supabase\n      .channel(`punch_list:${projectId}`)\n      .on('postgres_changes',\n        { event: '*', schema: 'public', table: 'punch_list_items', filter: `project_id=eq.${projectId}` },\n        () => loadItems()\n      )\n      .subscribe()\n\n    return () => { supabase.removeChannel(channel) }\n  }, [projectId, loadItems])\n\n  const filteredItems = useMemo(() => {\n    return items.filter(item => {\n      if (filterStatus !== 'all' && item.status !== filterStatus) return false\n      if (filterArea !== 'all' && item.area_id !== filterArea) return false\n      return true\n    })\n  }, [items, filterStatus, filterArea])\n\n  const stats = useMemo(() => {\n    const open = items.filter(i => i.status === 'open').length\n    const inProgress = items.filter(i => i.status === 'in_progress').length\n    const complete = items.filter(i => i.status === 'complete').length\n    return { open, inProgress, complete, total: items.length }\n  }, [items])\n\n  const resetForm = () => {\n    setFormData({ description: '', area_id: '', assigned_to: '', priority: 'medium', notes: '', photo_url: '' })\n    setEditingItem(null)\n    setShowForm(false)\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n\n    if (!formData.description.trim()) {\n      onShowToast?.('Please enter a description', 'error')\n      return\n    }\n\n    setSaving(true)\n    try {\n      if (editingItem) {\n        const { error } = await supabase\n          .from('punch_list_items')\n          .update({\n            description: formData.description.trim(),\n            area_id: formData.area_id || null,\n            assigned_to: formData.assigned_to.trim() || null,\n            priority: formData.priority,\n            notes: formData.notes.trim() || null,\n            photo_url: formData.photo_url || null,\n            updated_at: new Date().toISOString()\n          })\n          .eq('id', editingItem.id)\n\n        if (error) throw error\n        onShowToast?.('Punch item updated', 'success')\n      } else {\n        const { error } = await supabase\n          .from('punch_list_items')\n          .insert({\n            project_id: projectId,\n            company_id: companyId,\n            description: formData.description.trim(),\n            area_id: formData.area_id || null,\n            assigned_to: formData.assigned_to.trim() || null,\n            priority: formData.priority,\n            notes: formData.notes.trim() || null,\n            photo_url: formData.photo_url || null,\n            status: 'open'\n          })\n\n        if (error) throw error\n        onShowToast?.('Punch item added', 'success')\n      }\n\n      resetForm()\n      loadItems()\n    } catch (err) {\n      console.error('Error saving punch item:', err)\n      onShowToast?.(err.message || 'Error saving item', 'error')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handleStatusChange = async (itemId, newStatus) => {\n    try {\n      const updates = {\n        status: newStatus,\n        updated_at: new Date().toISOString()\n      }\n      if (newStatus === 'complete') {\n        updates.completed_at = new Date().toISOString()\n      } else {\n        updates.completed_at = null\n      }\n\n      const { error } = await supabase\n        .from('punch_list_items')\n        .update(updates)\n        .eq('id', itemId)\n\n      if (error) throw error\n      loadItems()\n    } catch (err) {\n      console.error('Error updating status:', err)\n      onShowToast?.('Error updating status', 'error')\n    }\n  }\n\n  const handleDelete = async (itemId) => {\n    if (!confirm('Delete this punch item?')) return\n\n    try {\n      const { error } = await supabase\n        .from('punch_list_items')\n        .delete()\n        .eq('id', itemId)\n\n      if (error) throw error\n      onShowToast?.('Item deleted', 'success')\n      loadItems()\n    } catch (err) {\n      console.error('Error deleting item:', err)\n      onShowToast?.('Error deleting item', 'error')\n    }\n  }\n\n  const handleEdit = (item) => {\n    setFormData({\n      description: item.description,\n      area_id: item.area_id || '',\n      assigned_to: item.assigned_to || '',\n      priority: item.priority || 'medium',\n      notes: item.notes || '',\n      photo_url: item.photo_url || ''\n    })\n    setEditingItem(item)\n    setShowForm(true)\n  }\n\n  const getAreaName = (areaId) => {\n    if (!areaId) return null\n    const area = areas.find(a => a.id === areaId)\n    return area?.name || null\n  }\n\n  const getPriorityConfig = (priority) =>\n    PRIORITY_OPTIONS.find(p => p.value === priority) || PRIORITY_OPTIONS[1]\n\n  const getStatusConfig = (status) =>\n    STATUS_OPTIONS.find(s => s.value === status) || STATUS_OPTIONS[0]\n\n  return (\n    <div className=\"punch-list-card\">\n      {/* Header */}\n      <div className=\"punch-list-header\">\n        <div className=\"punch-list-title\">\n          <CheckCircle2 size={18} />\n          <h3>Punch List</h3>\n          {stats.total > 0 && (\n            <span className=\"punch-stats-inline\">\n              <span className=\"punch-stat-open\">{stats.open} open</span>\n              {stats.inProgress > 0 && <span className=\"punch-stat-progress\">{stats.inProgress} in progress</span>}\n              <span className=\"punch-stat-complete\">{stats.complete}/{stats.total} complete</span>\n            </span>\n          )}\n        </div>\n        <button className=\"punch-add-btn\" onClick={() => { resetForm(); setShowForm(true) }}>\n          <Plus size={16} />\n          Add Item\n        </button>\n      </div>\n\n      {/* Progress bar */}\n      {stats.total > 0 && (\n        <div className=\"punch-progress-bar\">\n          <div\n            className=\"punch-progress-fill\"\n            style={{ width: `${(stats.complete / stats.total) * 100}%` }}\n          />\n          <span className=\"punch-progress-label\">\n            {Math.round((stats.complete / stats.total) * 100)}% complete\n          </span>\n        </div>\n      )}\n\n      {/* Filters */}\n      {stats.total > 0 && (\n        <div className=\"punch-filters\">\n          <div className=\"punch-filter-group\">\n            <Filter size={14} />\n            <select value={filterStatus} onChange={e => setFilterStatus(e.target.value)} className=\"punch-filter-select\">\n              <option value=\"all\">All Status</option>\n              {STATUS_OPTIONS.map(s => (\n                <option key={s.value} value={s.value}>{s.label}</option>\n              ))}\n            </select>\n          </div>\n          {areas.length > 0 && (\n            <div className=\"punch-filter-group\">\n              <MapPin size={14} />\n              <select value={filterArea} onChange={e => setFilterArea(e.target.value)} className=\"punch-filter-select\">\n                <option value=\"all\">All Areas</option>\n                {areas.map(a => (\n                  <option key={a.id} value={a.id}>{a.name}</option>\n                ))}\n              </select>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Add/Edit Form */}\n      {showForm && (\n        <form className=\"punch-form\" onSubmit={handleSubmit}>\n          <div className=\"punch-form-header\">\n            <h4>{editingItem ? 'Edit Item' : 'New Punch Item'}</h4>\n            <button type=\"button\" className=\"punch-form-close\" onClick={resetForm}>\n              <X size={16} />\n            </button>\n          </div>\n\n          <div className=\"punch-form-field\">\n            <label>Description *</label>\n            <textarea\n              value={formData.description}\n              onChange={e => setFormData(prev => ({ ...prev, description: e.target.value }))}\n              placeholder=\"What needs to be fixed or completed?\"\n              rows={2}\n              required\n            />\n          </div>\n\n          <div className=\"punch-form-row\">\n            <div className=\"punch-form-field\">\n              <label>Area</label>\n              <select\n                value={formData.area_id}\n                onChange={e => setFormData(prev => ({ ...prev, area_id: e.target.value }))}\n              >\n                <option value=\"\">No area</option>\n                {areas.map(a => (\n                  <option key={a.id} value={a.id}>{a.name}</option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"punch-form-field\">\n              <label>Assigned To</label>\n              <input\n                type=\"text\"\n                value={formData.assigned_to}\n                onChange={e => setFormData(prev => ({ ...prev, assigned_to: e.target.value }))}\n                placeholder=\"Name or company\"\n              />\n            </div>\n\n            <div className=\"punch-form-field\">\n              <label>Priority</label>\n              <select\n                value={formData.priority}\n                onChange={e => setFormData(prev => ({ ...prev, priority: e.target.value }))}\n              >\n                {PRIORITY_OPTIONS.map(p => (\n                  <option key={p.value} value={p.value}>{p.label}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div className=\"punch-form-field\">\n            <label>Notes</label>\n            <textarea\n              value={formData.notes}\n              onChange={e => setFormData(prev => ({ ...prev, notes: e.target.value }))}\n              placeholder=\"Additional details...\"\n              rows={2}\n            />\n          </div>\n\n          <div className=\"punch-form-actions\">\n            <button type=\"button\" className=\"punch-btn-cancel\" onClick={resetForm}>Cancel</button>\n            <button type=\"submit\" className=\"punch-btn-save\" disabled={saving}>\n              <Save size={14} />\n              {saving ? 'Saving...' : editingItem ? 'Update' : 'Add Item'}\n            </button>\n          </div>\n        </form>\n      )}\n\n      {/* Items List */}\n      {loading ? (\n        <div className=\"punch-loading\">Loading punch list...</div>\n      ) : filteredItems.length === 0 ? (\n        <div className=\"punch-empty\">\n          <CheckCircle2 size={32} style={{ opacity: 0.3 }} />\n          <p>{items.length === 0 ? 'No punch items yet' : 'No items match filters'}</p>\n          {items.length === 0 && <span>Add items that need attention before project closeout</span>}\n        </div>\n      ) : (\n        <div className=\"punch-items-list\">\n          {filteredItems.map(item => {\n            const statusConfig = getStatusConfig(item.status)\n            const priorityConfig = getPriorityConfig(item.priority)\n            const StatusIcon = statusConfig.icon\n\n            return (\n              <div key={item.id} className={`punch-item punch-item-${item.status}`}>\n                <button\n                  className=\"punch-item-status-btn\"\n                  onClick={() => {\n                    const nextStatus = item.status === 'open' ? 'in_progress' :\n                                       item.status === 'in_progress' ? 'complete' : 'open'\n                    handleStatusChange(item.id, nextStatus)\n                  }}\n                  title={`Click to change status (current: ${statusConfig.label})`}\n                >\n                  <StatusIcon size={18} style={{ color: statusConfig.color }} />\n                </button>\n\n                <div className=\"punch-item-content\">\n                  <div className=\"punch-item-top\">\n                    <span className={`punch-item-desc ${item.status === 'complete' ? 'completed' : ''}`}>\n                      {item.description}\n                    </span>\n                    <div className=\"punch-item-badges\">\n                      <span className=\"punch-priority-badge\" style={{ color: priorityConfig.color, borderColor: `${priorityConfig.color}40` }}>\n                        {priorityConfig.label}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"punch-item-meta\">\n                    {getAreaName(item.area_id) && (\n                      <span className=\"punch-meta-tag\">\n                        <MapPin size={11} />\n                        {getAreaName(item.area_id)}\n                      </span>\n                    )}\n                    {item.assigned_to && (\n                      <span className=\"punch-meta-tag\">\n                        <User size={11} />\n                        {item.assigned_to}\n                      </span>\n                    )}\n                    {item.completed_at && (\n                      <span className=\"punch-meta-tag completed\">\n                        <CheckCircle2 size={11} />\n                        Done {new Date(item.completed_at).toLocaleDateString()}\n                      </span>\n                    )}\n                  </div>\n\n                  {item.notes && (\n                    <div className=\"punch-item-notes\">{item.notes}</div>\n                  )}\n                </div>\n\n                <div className=\"punch-item-actions\">\n                  <button className=\"punch-action-btn\" onClick={() => handleEdit(item)} title=\"Edit\">\n                    <Edit3 size={14} />\n                  </button>\n                  <button className=\"punch-action-btn delete\" onClick={() => handleDelete(item.id)} title=\"Delete\">\n                    <Trash2 size={14} />\n                  </button>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["PRIORITY_OPTIONS","STATUS_OPTIONS","Circle","Clock","CheckCircle2","PunchList","projectId","areas","companyId","onShowToast","items","setItems","useState","loading","setLoading","showForm","setShowForm","editingItem","setEditingItem","filterStatus","setFilterStatus","filterArea","setFilterArea","saving","setSaving","formData","setFormData","loadItems","useCallback","isSupabaseConfigured","data","error","supabase","err","useEffect","channel","filteredItems","useMemo","item","stats","open","inProgress","complete","resetForm","handleSubmit","handleStatusChange","itemId","newStatus","updates","handleDelete","handleEdit","getAreaName","areaId","a","getPriorityConfig","priority","p","getStatusConfig","status","s","jsxs","jsx","Plus","Filter","MapPin","X","prev","Save","statusConfig","priorityConfig","StatusIcon","nextStatus","User","Edit3","Trash2"],"mappings":"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"}