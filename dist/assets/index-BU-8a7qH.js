const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SignatureLinkGenerator-DZ8mnEUb.js","assets/icons-CwUiT5nc.js","assets/react-DXGY7bZi.js","assets/pdf-aQqpMATS.js","assets/supabase-VuevzHjS.js","assets/TMClientSignature-Bv3JBL_c.js","assets/Dashboard-Bmqaf2WO.js","assets/corCalculations-vdJc_BOT.js","assets/Setup-czeclDL7.js","assets/BrandingSettings-BqaQ_EA8.js","assets/PricingManager-8vOve4CM.js","assets/PublicView-LN5dz1tY.js","assets/SignaturePage-Dh2QYwQY.js","assets/SignatureCanvas-slDJvRsS.js","assets/MembershipManager-CmRoEfPm.js","assets/LandingPage-CpE_-QwC.js"])))=>i.map(i=>d[i]);
import{r as y,H as Po,B as VR,A as cr,C as bc,U as KA,a as WR,b as Ki,E as XR,c as ZR,S as YA,M as GA,T as lm,D as VA,X as Ob,d as WA,L as $s,F as Fo,e as Mo,f as Cb,g as QR,h as JR,i as my,j as hy,k as eq,l as Jn,R as xS,P as _c,m as tq,W as rq,Z as nq,G as aq,n as iq,o as oq,p as df,q as wS,s as Zd,t as sq,u as XA,v as ff,w as ZA,x as lq,y as cq,z as uq,I as dq,J as pc,K as fq,N as mq,O as hq,Q as pq,V as QA,Y as JA,_ as gq,$ as vq,a0 as yq,a1 as bq,a2 as _q,a3 as eN,a4 as xq,a5 as wq,a6 as jq,a7 as Sq,a8 as Eq,a9 as Oq,aa as Cq,ab as Aq,ac as Nq,ad as kq}from"./icons-CwUiT5nc.js";import{r as cm,b as tN,a as ri}from"./react-DXGY7bZi.js";import{_ as _a}from"./pdf-aQqpMATS.js";import{c as rN}from"./supabase-VuevzHjS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var pg={exports:{}},tc={};var jS;function Dq(){if(jS)return tc;jS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,s){var c=null;if(s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:n,key:c,ref:i!==void 0?i:null,props:s}}return tc.Fragment=t,tc.jsx=r,tc.jsxs=r,tc}var SS;function Tq(){return SS||(SS=1,pg.exports=Dq()),pg.exports}var f=Tq(),gg={exports:{}},rc={},vg={exports:{}},yg={};var ES;function Pq(){return ES||(ES=1,(function(e){function t(R,U){var Q=R.length;R.push(U);e:for(;0<Q;){var B=Q-1>>>1,fe=R[B];if(0<i(fe,U))R[B]=U,R[Q]=fe,Q=B;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var U=R[0],Q=R.pop();if(Q!==U){R[0]=Q;e:for(var B=0,fe=R.length,je=fe>>>1;B<je;){var ee=2*(B+1)-1,H=R[ee],Ee=ee+1,Te=R[Ee];if(0>i(H,Q))Ee<fe&&0>i(Te,H)?(R[B]=Te,R[Ee]=Q,B=Ee):(R[B]=H,R[ee]=Q,B=ee);else if(Ee<fe&&0>i(Te,Q))R[B]=Te,R[Ee]=Q,B=Ee;else break e}}return U}function i(R,U){var Q=R.sortIndex-U.sortIndex;return Q!==0?Q:R.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var m=[],h=[],p=1,g=null,_=3,x=!1,w=!1,j=!1,S=!1,O=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(R){for(var U=r(h);U!==null;){if(U.callback===null)n(h);else if(U.startTime<=R)n(h),U.sortIndex=U.expirationTime,t(m,U);else break;U=r(h)}}function D(R){if(j=!1,k(R),!w)if(r(m)!==null)w=!0,M||(M=!0,I());else{var U=r(h);U!==null&&q(D,U.startTime-R)}}var M=!1,L=-1,V=5,re=-1;function ie(){return S?!0:!(e.unstable_now()-re<V)}function X(){if(S=!1,M){var R=e.unstable_now();re=R;var U=!0;try{e:{w=!1,j&&(j=!1,C(L),L=-1),x=!0;var Q=_;try{t:{for(k(R),g=r(m);g!==null&&!(g.expirationTime>R&&ie());){var B=g.callback;if(typeof B=="function"){g.callback=null,_=g.priorityLevel;var fe=B(g.expirationTime<=R);if(R=e.unstable_now(),typeof fe=="function"){g.callback=fe,k(R),U=!0;break t}g===r(m)&&n(m),k(R)}else n(m);g=r(m)}if(g!==null)U=!0;else{var je=r(h);je!==null&&q(D,je.startTime-R),U=!1}}break e}finally{g=null,_=Q,x=!1}U=void 0}}finally{U?I():M=!1}}}var I;if(typeof A=="function")I=function(){A(X)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ge=ce.port2;ce.port1.onmessage=X,I=function(){ge.postMessage(null)}}else I=function(){O(X,0)};function q(R,U){L=O(function(){R(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(R){switch(_){case 1:case 2:case 3:var U=3;break;default:U=_}var Q=_;_=U;try{return R()}finally{_=Q}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var Q=_;_=R;try{return U()}finally{_=Q}},e.unstable_scheduleCallback=function(R,U,Q){var B=e.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?B+Q:B):Q=B,R){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Q+fe,R={id:p++,callback:U,priorityLevel:R,startTime:Q,expirationTime:fe,sortIndex:-1},Q>B?(R.sortIndex=Q,t(h,R),r(m)===null&&R===r(h)&&(j?(C(L),L=-1):j=!0,q(D,Q-B))):(R.sortIndex=fe,t(m,R),w||x||(w=!0,M||(M=!0,I()))),R},e.unstable_shouldYield=ie,e.unstable_wrapCallback=function(R){var U=_;return function(){var Q=_;_=U;try{return R.apply(this,arguments)}finally{_=Q}}}})(yg)),yg}var OS;function Mq(){return OS||(OS=1,vg.exports=Pq()),vg.exports}var CS;function Rq(){if(CS)return rc;CS=1;var e=Mq(),t=cm(),r=tN();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,l=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(l=o.return),a=o.return;while(a)}return o.tag===3?l:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function m(a){if(s(a)!==a)throw Error(n(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(n(188));return o!==a?null:a}for(var l=a,d=o;;){var v=l.return;if(v===null)break;var b=v.alternate;if(b===null){if(d=v.return,d!==null){l=d;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===l)return m(v),a;if(b===d)return m(v),o;b=b.sibling}throw Error(n(188))}if(l.return!==d.return)l=v,d=b;else{for(var E=!1,N=v.child;N;){if(N===l){E=!0,l=v,d=b;break}if(N===d){E=!0,d=v,l=b;break}N=N.sibling}if(!E){for(N=b.child;N;){if(N===l){E=!0,l=b,d=v;break}if(N===d){E=!0,d=b,l=v;break}N=N.sibling}if(!E)throw Error(n(189))}}if(l.alternate!==d)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),V=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),ie=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function I(a){return a===null||typeof a!="object"?null:(a=X&&a[X]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Symbol.for("react.client.reference");function ge(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ce?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case j:return"Fragment";case O:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case re:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case A:return a.displayName||"Context";case C:return(a._context.displayName||"Context")+".Consumer";case k:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return o=a.displayName||null,o!==null?o:ge(a.type)||"Memo";case V:o=a._payload,a=a._init;try{return ge(a(o))}catch{}}return null}var q=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},B=[],fe=-1;function je(a){return{current:a}}function ee(a){0>fe||(a.current=B[fe],B[fe]=null,fe--)}function H(a,o){fe++,B[fe]=a.current,a.current=o}var Ee=je(null),Te=je(null),Ie=je(null),pe=je(null);function ze(a,o){switch(H(Ie,o),H(Te,a),H(Ee,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Fj(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Fj(o),a=Kj(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}ee(Ee),H(Ee,a)}function J(){ee(Ee),ee(Te),ee(Ie)}function we(a){a.memoizedState!==null&&H(pe,a);var o=Ee.current,l=Kj(o,a.type);o!==l&&(H(Te,a),H(Ee,l))}function xe(a){Te.current===a&&(ee(Ee),ee(Te)),pe.current===a&&(ee(pe),Zl._currentValue=Q)}var ae,He;function ve(a){if(ae===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);ae=o&&o[1]||"",He=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ae+a+He}var Ne=!1;function Me(a,o){if(!a||Ne)return"";Ne=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(te){var Z=te}Reflect.construct(a,[],de)}else{try{de.call()}catch(te){Z=te}a.call(de.prototype)}}else{try{throw Error()}catch(te){Z=te}(de=a())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),E=b[0],N=b[1];if(E&&N){var z=E.split(`
`),G=N.split(`
`);for(v=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;v<G.length&&!G[v].includes("DetermineComponentFrameRoot");)v++;if(d===z.length||v===G.length)for(d=z.length-1,v=G.length-1;1<=d&&0<=v&&z[d]!==G[v];)v--;for(;1<=d&&0<=v;d--,v--)if(z[d]!==G[v]){if(d!==1||v!==1)do if(d--,v--,0>v||z[d]!==G[v]){var oe=`
`+z[d].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=d&&0<=v);break}}}finally{Ne=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?ve(l):""}function jt(a,o){switch(a.tag){case 26:case 27:case 5:return ve(a.type);case 16:return ve("Lazy");case 13:return a.child!==o&&o!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return Me(a.type,!1);case 11:return Me(a.type.render,!1);case 1:return Me(a.type,!0);case 31:return ve("Activity");default:return""}}function Re(a){try{var o="",l=null;do o+=jt(a,l),l=a,a=a.return;while(a);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var It=Object.prototype.hasOwnProperty,yt=e.unstable_scheduleCallback,Ct=e.unstable_cancelCallback,Br=e.unstable_shouldYield,xt=e.unstable_requestPaint,Ye=e.unstable_now,$r=e.unstable_getCurrentPriorityLevel,_n=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,jr=e.unstable_NormalPriority,Yt=e.unstable_LowPriority,he=e.unstable_IdlePriority,it=e.log,xn=e.unstable_setDisableYieldValue,Qt=null,Ut=null;function qt(a){if(typeof it=="function"&&xn(a),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Qt,a)}catch{}}var ft=Math.clz32?Math.clz32:oa,en=Math.log,$n=Math.LN2;function oa(a){return a>>>=0,a===0?32:31-(en(a)/$n|0)|0}var di=256,fi=262144,xa=4194304;function wn(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function mi(a,o,l){var d=a.pendingLanes;if(d===0)return 0;var v=0,b=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var N=d&134217727;return N!==0?(d=N&~b,d!==0?v=wn(d):(E&=N,E!==0?v=wn(E):l||(l=N&~a,l!==0&&(v=wn(l))))):(N=d&~b,N!==0?v=wn(N):E!==0?v=wn(E):l||(l=d&~a,l!==0&&(v=wn(l)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,l=o&-o,b>=l||b===32&&(l&4194048)!==0)?o:v}function wa(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function ll(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var a=xa;return xa<<=1,(xa&62914560)===0&&(xa=4194304),a}function Hn(a){for(var o=[],l=0;31>l;l++)o.push(a);return o}function ja(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function cl(a,o,l,d,v,b){var E=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var N=a.entanglements,z=a.expirationTimes,G=a.hiddenUpdates;for(l=E&~l;0<l;){var oe=31-ft(l),de=1<<oe;N[oe]=0,z[oe]=-1;var Z=G[oe];if(Z!==null)for(G[oe]=null,oe=0;oe<Z.length;oe++){var te=Z[oe];te!==null&&(te.lane&=-536870913)}l&=~de}d!==0&&fu(a,d,0),b!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=b&~(E&~o))}function fu(a,o,l){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-ft(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|l&261930}function mu(a,o){var l=a.entangledLanes|=o;for(a=a.entanglements;l;){var d=31-ft(l),v=1<<d;v&o|a[d]&o&&(a[d]|=o),l&=~v}}function Fn(a,o){var l=o&-o;return l=(l&42)!==0?1:ul(l),(l&(a.suspendedLanes|o))!==0?0:l}function ul(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function dl(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function eo(){var a=U.p;return a!==0?a:(a=window.event,a===void 0?32:hS(a.type))}function to(a,o){var l=U.p;try{return U.p=a,o()}finally{U.p=l}}var tn=Math.random().toString(36).slice(2),Bt="__reactFiber$"+tn,sr="__reactProps$"+tn,sa="__reactContainer$"+tn,ro="__reactEvents$"+tn,hu="__reactListeners$"+tn,fl="__reactHandles$"+tn,ml="__reactResources$"+tn,Zo="__reactMarker$"+tn;function Qo(a){delete a[Bt],delete a[sr],delete a[ro],delete a[hu],delete a[fl]}function Kn(a){var o=a[Bt];if(o)return o;for(var l=a.parentNode;l;){if(o=l[sa]||l[Bt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(a=Qj(a);a!==null;){if(l=a[Bt])return l;a=Qj(a)}return o}a=l,l=a.parentNode}return null}function hi(a){if(a=a[Bt]||a[sa]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function no(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function K(a){var o=a[ml];return o||(o=a[ml]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function le(a){a[Zo]=!0}var me=new Set,se={};function ne(a,o){Se(a,o),Se(a+"Capture",o)}function Se(a,o){for(se[a]=o,a=0;a<o.length;a++)me.add(o[a])}var Ue=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fe={},lt={};function Mr(a){return It.call(lt,a)?!0:It.call(Fe,a)?!1:Ue.test(a)?lt[a]=!0:(Fe[a]=!0,!1)}function Je(a,o,l){if(Mr(o))if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+l)}}function Gt(a,o,l){if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+l)}}function Yn(a,o,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(o,l,""+d)}}function jn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function q_(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function BM(a,o,l){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,b=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function(E){l=""+E,b.call(this,E)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function lh(a){if(!a._valueTracker){var o=q_(a)?"checked":"value";a._valueTracker=BM(a,o,""+a[o])}}function z_(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return a&&(d=q_(a)?a.checked?"true":"false":a.value),a=d,a!==l?(o.setValue(a),!0):!1}function pu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var $M=/[\n"\\]/g;function Sn(a){return a.replace($M,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ch(a,o,l,d,v,b,E,N){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),o!=null?E==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+jn(o)):a.value!==""+jn(o)&&(a.value=""+jn(o)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),o!=null?uh(a,E,jn(o)):l!=null?uh(a,E,jn(l)):d!=null&&a.removeAttribute("value"),v==null&&b!=null&&(a.defaultChecked=!!b),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+jn(N):a.removeAttribute("name")}function L_(a,o,l,d,v,b,E,N){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){lh(a);return}l=l!=null?""+jn(l):"",o=o!=null?""+jn(o):l,N||o===a.value||(a.value=o),a.defaultValue=o}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=N?a.checked:!!d,a.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E),lh(a)}function uh(a,o,l){o==="number"&&pu(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function Jo(a,o,l,d){if(a=a.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<a.length;l++)v=o.hasOwnProperty("$"+a[l].value),a[l].selected!==v&&(a[l].selected=v),v&&d&&(a[l].defaultSelected=!0)}else{for(l=""+jn(l),o=null,v=0;v<a.length;v++){if(a[v].value===l){a[v].selected=!0,d&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function I_(a,o,l){if(o!=null&&(o=""+jn(o),o!==a.value&&(a.value=o),l==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=l!=null?""+jn(l):""}function U_(a,o,l,d){if(o==null){if(d!=null){if(l!=null)throw Error(n(92));if(q(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),o=l}l=jn(o),a.defaultValue=l,d=a.textContent,d===l&&d!==""&&d!==null&&(a.value=d),lh(a)}function es(a,o){if(o){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=o;return}}a.textContent=o}var HM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function B_(a,o,l){var d=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,l):typeof l!="number"||l===0||HM.has(o)?o==="float"?a.cssFloat=l:a[o]=(""+l).trim():a[o]=l+"px"}function $_(a,o,l){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var v in o)d=o[v],o.hasOwnProperty(v)&&l[v]!==d&&B_(a,v,d)}else for(var b in o)o.hasOwnProperty(b)&&B_(a,b,o[b])}function dh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var FM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),KM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gu(a){return KM.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Sa(){}var fh=null;function mh(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ts=null,rs=null;function H_(a){var o=hi(a);if(o&&(a=o.stateNode)){var l=a[sr]||null;e:switch(a=o.stateNode,o.type){case"input":if(ch(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Sn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==a&&d.form===a.form){var v=d[sr]||null;if(!v)throw Error(n(90));ch(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<l.length;o++)d=l[o],d.form===a.form&&z_(d)}break e;case"textarea":I_(a,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Jo(a,!!l.multiple,o,!1)}}}var hh=!1;function F_(a,o,l){if(hh)return a(o,l);hh=!0;try{var d=a(o);return d}finally{if(hh=!1,(ts!==null||rs!==null)&&(nd(),ts&&(o=ts,a=rs,rs=ts=null,H_(o),a)))for(o=0;o<a.length;o++)H_(a[o])}}function hl(a,o){var l=a.stateNode;if(l===null)return null;var d=l[sr]||null;if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=!1;if(Ea)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){ph=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{ph=!1}var pi=null,gh=null,vu=null;function K_(){if(vu)return vu;var a,o=gh,l=o.length,d,v="value"in pi?pi.value:pi.textContent,b=v.length;for(a=0;a<l&&o[a]===v[a];a++);var E=l-a;for(d=1;d<=E&&o[l-d]===v[b-d];d++);return vu=v.slice(a,1<d?1-d:void 0)}function yu(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function bu(){return!0}function Y_(){return!1}function Fr(a){function o(l,d,v,b,E){this._reactName=l,this._targetInst=v,this.type=d,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(l=a[N],this[N]=l?l(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?bu:Y_,this.isPropagationStopped=Y_,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bu)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bu)},persist:function(){},isPersistent:bu}),o}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_u=Fr(ao),gl=g({},ao,{view:0,detail:0}),YM=Fr(gl),vh,yh,vl,xu=g({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_h,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==vl&&(vl&&a.type==="mousemove"?(vh=a.screenX-vl.screenX,yh=a.screenY-vl.screenY):yh=vh=0,vl=a),vh)},movementY:function(a){return"movementY"in a?a.movementY:yh}}),G_=Fr(xu),GM=g({},xu,{dataTransfer:0}),VM=Fr(GM),WM=g({},gl,{relatedTarget:0}),bh=Fr(WM),XM=g({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),ZM=Fr(XM),QM=g({},ao,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),JM=Fr(QM),e2=g({},ao,{data:0}),V_=Fr(e2),t2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},r2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},n2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a2(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=n2[a])?!!o[a]:!1}function _h(){return a2}var i2=g({},gl,{key:function(a){if(a.key){var o=t2[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=yu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?r2[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_h,charCode:function(a){return a.type==="keypress"?yu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?yu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),o2=Fr(i2),s2=g({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W_=Fr(s2),l2=g({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_h}),c2=Fr(l2),u2=g({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),d2=Fr(u2),f2=g({},xu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),m2=Fr(f2),h2=g({},ao,{newState:0,oldState:0}),p2=Fr(h2),g2=[9,13,27,32],xh=Ea&&"CompositionEvent"in window,yl=null;Ea&&"documentMode"in document&&(yl=document.documentMode);var v2=Ea&&"TextEvent"in window&&!yl,X_=Ea&&(!xh||yl&&8<yl&&11>=yl),Z_=" ",Q_=!1;function J_(a,o){switch(a){case"keyup":return g2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ex(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ns=!1;function y2(a,o){switch(a){case"compositionend":return ex(o);case"keypress":return o.which!==32?null:(Q_=!0,Z_);case"textInput":return a=o.data,a===Z_&&Q_?null:a;default:return null}}function b2(a,o){if(ns)return a==="compositionend"||!xh&&J_(a,o)?(a=K_(),vu=gh=pi=null,ns=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return X_&&o.locale!=="ko"?null:o.data;default:return null}}var _2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tx(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!_2[a.type]:o==="textarea"}function rx(a,o,l,d){ts?rs?rs.push(d):rs=[d]:ts=d,o=ud(o,"onChange"),0<o.length&&(l=new _u("onChange","change",null,l,d),a.push({event:l,listeners:o}))}var bl=null,_l=null;function x2(a){Lj(a,0)}function wu(a){var o=no(a);if(z_(o))return a}function nx(a,o){if(a==="change")return o}var ax=!1;if(Ea){var wh;if(Ea){var jh="oninput"in document;if(!jh){var ix=document.createElement("div");ix.setAttribute("oninput","return;"),jh=typeof ix.oninput=="function"}wh=jh}else wh=!1;ax=wh&&(!document.documentMode||9<document.documentMode)}function ox(){bl&&(bl.detachEvent("onpropertychange",sx),_l=bl=null)}function sx(a){if(a.propertyName==="value"&&wu(_l)){var o=[];rx(o,_l,a,mh(a)),F_(x2,o)}}function w2(a,o,l){a==="focusin"?(ox(),bl=o,_l=l,bl.attachEvent("onpropertychange",sx)):a==="focusout"&&ox()}function j2(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return wu(_l)}function S2(a,o){if(a==="click")return wu(o)}function E2(a,o){if(a==="input"||a==="change")return wu(o)}function O2(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var rn=typeof Object.is=="function"?Object.is:O2;function xl(a,o){if(rn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var l=Object.keys(a),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var v=l[d];if(!It.call(o,v)||!rn(a[v],o[v]))return!1}return!0}function lx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function cx(a,o){var l=lx(a);a=0;for(var d;l;){if(l.nodeType===3){if(d=a+l.textContent.length,a<=o&&d>=o)return{node:l,offset:o-a};a=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=lx(l)}}function ux(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?ux(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function dx(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=pu(a.document);o instanceof a.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)a=o.contentWindow;else break;o=pu(a.document)}return o}function Sh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var C2=Ea&&"documentMode"in document&&11>=document.documentMode,as=null,Eh=null,wl=null,Oh=!1;function fx(a,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Oh||as==null||as!==pu(d)||(d=as,"selectionStart"in d&&Sh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),wl&&xl(wl,d)||(wl=d,d=ud(Eh,"onSelect"),0<d.length&&(o=new _u("onSelect","select",null,o,l),a.push({event:o,listeners:d}),o.target=as)))}function io(a,o){var l={};return l[a.toLowerCase()]=o.toLowerCase(),l["Webkit"+a]="webkit"+o,l["Moz"+a]="moz"+o,l}var is={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionrun:io("Transition","TransitionRun"),transitionstart:io("Transition","TransitionStart"),transitioncancel:io("Transition","TransitionCancel"),transitionend:io("Transition","TransitionEnd")},Ch={},mx={};Ea&&(mx=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function oo(a){if(Ch[a])return Ch[a];if(!is[a])return a;var o=is[a],l;for(l in o)if(o.hasOwnProperty(l)&&l in mx)return Ch[a]=o[l];return a}var hx=oo("animationend"),px=oo("animationiteration"),gx=oo("animationstart"),A2=oo("transitionrun"),N2=oo("transitionstart"),k2=oo("transitioncancel"),vx=oo("transitionend"),yx=new Map,Ah="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ah.push("scrollEnd");function Gn(a,o){yx.set(a,o),ne(o,[a])}var ju=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},En=[],os=0,Nh=0;function Su(){for(var a=os,o=Nh=os=0;o<a;){var l=En[o];En[o++]=null;var d=En[o];En[o++]=null;var v=En[o];En[o++]=null;var b=En[o];if(En[o++]=null,d!==null&&v!==null){var E=d.pending;E===null?v.next=v:(v.next=E.next,E.next=v),d.pending=v}b!==0&&bx(l,v,b)}}function Eu(a,o,l,d){En[os++]=a,En[os++]=o,En[os++]=l,En[os++]=d,Nh|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function kh(a,o,l,d){return Eu(a,o,l,d),Ou(a)}function so(a,o){return Eu(a,null,null,o),Ou(a)}function bx(a,o,l){a.lanes|=l;var d=a.alternate;d!==null&&(d.lanes|=l);for(var v=!1,b=a.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(v=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,v&&o!==null&&(v=31-ft(l),a=b.hiddenUpdates,d=a[v],d===null?a[v]=[o]:d.push(o),o.lane=l|536870912),b):null}function Ou(a){if(50<Fl)throw Fl=0,Ip=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ss={};function D2(a,o,l,d){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(a,o,l,d){return new D2(a,o,l,d)}function Dh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Oa(a,o){var l=a.alternate;return l===null?(l=nn(a.tag,o,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=o,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,o=a.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function _x(a,o){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,o=l.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Cu(a,o,l,d,v,b){var E=0;if(d=a,typeof a=="function")Dh(a)&&(E=1);else if(typeof a=="string")E=qR(a,l,Ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case re:return a=nn(31,l,o,v),a.elementType=re,a.lanes=b,a;case j:return lo(l.children,v,b,o);case S:E=8,v|=24;break;case O:return a=nn(12,l,o,v|2),a.elementType=O,a.lanes=b,a;case D:return a=nn(13,l,o,v),a.elementType=D,a.lanes=b,a;case M:return a=nn(19,l,o,v),a.elementType=M,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:E=10;break e;case C:E=9;break e;case k:E=11;break e;case L:E=14;break e;case V:E=16,d=null;break e}E=29,l=Error(n(130,a===null?"null":typeof a,"")),d=null}return o=nn(E,l,o,v),o.elementType=a,o.type=d,o.lanes=b,o}function lo(a,o,l,d){return a=nn(7,a,d,o),a.lanes=l,a}function Th(a,o,l){return a=nn(6,a,null,o),a.lanes=l,a}function xx(a){var o=nn(18,null,null,0);return o.stateNode=a,o}function Ph(a,o,l){return o=nn(4,a.children!==null?a.children:[],a.key,o),o.lanes=l,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var wx=new WeakMap;function On(a,o){if(typeof a=="object"&&a!==null){var l=wx.get(a);return l!==void 0?l:(o={value:a,source:o,stack:Re(o)},wx.set(a,o),o)}return{value:a,source:o,stack:Re(o)}}var ls=[],cs=0,Au=null,jl=0,Cn=[],An=0,gi=null,la=1,ca="";function Ca(a,o){ls[cs++]=jl,ls[cs++]=Au,Au=a,jl=o}function jx(a,o,l){Cn[An++]=la,Cn[An++]=ca,Cn[An++]=gi,gi=a;var d=la;a=ca;var v=32-ft(d)-1;d&=~(1<<v),l+=1;var b=32-ft(o)+v;if(30<b){var E=v-v%5;b=(d&(1<<E)-1).toString(32),d>>=E,v-=E,la=1<<32-ft(o)+v|l<<v|d,ca=b+a}else la=1<<b|l<<v|d,ca=a}function Mh(a){a.return!==null&&(Ca(a,1),jx(a,1,0))}function Rh(a){for(;a===Au;)Au=ls[--cs],ls[cs]=null,jl=ls[--cs],ls[cs]=null;for(;a===gi;)gi=Cn[--An],Cn[An]=null,ca=Cn[--An],Cn[An]=null,la=Cn[--An],Cn[An]=null}function Sx(a,o){Cn[An++]=la,Cn[An++]=ca,Cn[An++]=gi,la=o.id,ca=o.overflow,gi=a}var Sr=null,St=null,Qe=!1,vi=null,Nn=!1,qh=Error(n(519));function yi(a){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(On(o,a)),qh}function Ex(a){var o=a.stateNode,l=a.type,d=a.memoizedProps;switch(o[Bt]=a,o[sr]=d,l){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(l=0;l<Yl.length;l++)We(Yl[l],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),L_(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),U_(o,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||d.suppressHydrationWarning===!0||$j(o.textContent,l)?(d.popover!=null&&(We("beforetoggle",o),We("toggle",o)),d.onScroll!=null&&We("scroll",o),d.onScrollEnd!=null&&We("scrollend",o),d.onClick!=null&&(o.onclick=Sa),o=!0):o=!1,o||yi(a,!0)}function Ox(a){for(Sr=a.return;Sr;)switch(Sr.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Sr=Sr.return}}function us(a){if(a!==Sr)return!1;if(!Qe)return Ox(a),Qe=!0,!1;var o=a.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||eg(a.type,a.memoizedProps)),l=!l),l&&St&&yi(a),Ox(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=Zj(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=Zj(a)}else o===27?(o=St,Ti(a.type)?(a=ig,ig=null,St=a):St=o):St=Sr?Dn(a.stateNode.nextSibling):null;return!0}function co(){St=Sr=null,Qe=!1}function zh(){var a=vi;return a!==null&&(Vr===null?Vr=a:Vr.push.apply(Vr,a),vi=null),a}function Sl(a){vi===null?vi=[a]:vi.push(a)}var Lh=je(null),uo=null,Aa=null;function bi(a,o,l){H(Lh,o._currentValue),o._currentValue=l}function Na(a){a._currentValue=Lh.current,ee(Lh)}function Ih(a,o,l){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===l)break;a=a.return}}function Uh(a,o,l,d){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var b=v.dependencies;if(b!==null){var E=v.child;b=b.firstContext;e:for(;b!==null;){var N=b;b=v;for(var z=0;z<o.length;z++)if(N.context===o[z]){b.lanes|=l,N=b.alternate,N!==null&&(N.lanes|=l),Ih(b.return,l,a),d||(E=null);break e}b=N.next}}else if(v.tag===18){if(E=v.return,E===null)throw Error(n(341));E.lanes|=l,b=E.alternate,b!==null&&(b.lanes|=l),Ih(E,l,a),E=null}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===a){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}}function ds(a,o,l,d){a=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var E=v.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var N=v.type;rn(v.pendingProps.value,E.value)||(a!==null?a.push(N):a=[N])}}else if(v===pe.current){if(E=v.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Zl):a=[Zl])}v=v.return}a!==null&&Uh(o,a,l,d),o.flags|=262144}function Nu(a){for(a=a.firstContext;a!==null;){if(!rn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function fo(a){uo=a,Aa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Er(a){return Cx(uo,a)}function ku(a,o){return uo===null&&fo(a),Cx(a,o)}function Cx(a,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Aa===null){if(a===null)throw Error(n(308));Aa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Aa=Aa.next=o;return l}var T2=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(l,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(l){return l()})}},P2=e.unstable_scheduleCallback,M2=e.unstable_NormalPriority,Jt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bh(){return{controller:new T2,data:new Map,refCount:0}}function El(a){a.refCount--,a.refCount===0&&P2(M2,function(){a.controller.abort()})}var Ol=null,$h=0,fs=0,ms=null;function R2(a,o){if(Ol===null){var l=Ol=[];$h=0,fs=Kp(),ms={status:"pending",value:void 0,then:function(d){l.push(d)}}}return $h++,o.then(Ax,Ax),o}function Ax(){if(--$h===0&&Ol!==null){ms!==null&&(ms.status="fulfilled");var a=Ol;Ol=null,fs=0,ms=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function q2(a,o){var l=[],d={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var v=0;v<l.length;v++)(0,l[v])(o)},function(v){for(d.status="rejected",d.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),d}var Nx=R.S;R.S=function(a,o){fj=Ye(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&R2(a,o),Nx!==null&&Nx(a,o)};var mo=je(null);function Hh(){var a=mo.current;return a!==null?a:bt.pooledCache}function Du(a,o){o===null?H(mo,mo.current):H(mo,o.pool)}function kx(){var a=Hh();return a===null?null:{parent:Jt._currentValue,pool:a}}var hs=Error(n(460)),Fh=Error(n(474)),Tu=Error(n(542)),Pu={then:function(){}};function Dx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Tx(a,o,l){switch(l=a[l],l===void 0?a.push(o):l!==o&&(o.then(Sa,Sa),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Mx(a),a;default:if(typeof o.status=="string")o.then(Sa,Sa);else{if(a=bt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=d}},function(d){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Mx(a),a}throw po=o,hs}}function ho(a){try{var o=a._init;return o(a._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(po=l,hs):l}}var po=null;function Px(){if(po===null)throw Error(n(459));var a=po;return po=null,a}function Mx(a){if(a===hs||a===Tu)throw Error(n(483))}var ps=null,Cl=0;function Mu(a){var o=Cl;return Cl+=1,ps===null&&(ps=[]),Tx(ps,a,o)}function Al(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Ru(a,o){throw o.$$typeof===_?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Rx(a){function o(F,$){if(a){var Y=F.deletions;Y===null?(F.deletions=[$],F.flags|=16):Y.push($)}}function l(F,$){if(!a)return null;for(;$!==null;)o(F,$),$=$.sibling;return null}function d(F){for(var $=new Map;F!==null;)F.key!==null?$.set(F.key,F):$.set(F.index,F),F=F.sibling;return $}function v(F,$){return F=Oa(F,$),F.index=0,F.sibling=null,F}function b(F,$,Y){return F.index=Y,a?(Y=F.alternate,Y!==null?(Y=Y.index,Y<$?(F.flags|=67108866,$):Y):(F.flags|=67108866,$)):(F.flags|=1048576,$)}function E(F){return a&&F.alternate===null&&(F.flags|=67108866),F}function N(F,$,Y,ue){return $===null||$.tag!==6?($=Th(Y,F.mode,ue),$.return=F,$):($=v($,Y),$.return=F,$)}function z(F,$,Y,ue){var qe=Y.type;return qe===j?oe(F,$,Y.props.children,ue,Y.key):$!==null&&($.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===V&&ho(qe)===$.type)?($=v($,Y.props),Al($,Y),$.return=F,$):($=Cu(Y.type,Y.key,Y.props,null,F.mode,ue),Al($,Y),$.return=F,$)}function G(F,$,Y,ue){return $===null||$.tag!==4||$.stateNode.containerInfo!==Y.containerInfo||$.stateNode.implementation!==Y.implementation?($=Ph(Y,F.mode,ue),$.return=F,$):($=v($,Y.children||[]),$.return=F,$)}function oe(F,$,Y,ue,qe){return $===null||$.tag!==7?($=lo(Y,F.mode,ue,qe),$.return=F,$):($=v($,Y),$.return=F,$)}function de(F,$,Y){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Th(""+$,F.mode,Y),$.return=F,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case x:return Y=Cu($.type,$.key,$.props,null,F.mode,Y),Al(Y,$),Y.return=F,Y;case w:return $=Ph($,F.mode,Y),$.return=F,$;case V:return $=ho($),de(F,$,Y)}if(q($)||I($))return $=lo($,F.mode,Y,null),$.return=F,$;if(typeof $.then=="function")return de(F,Mu($),Y);if($.$$typeof===A)return de(F,ku(F,$),Y);Ru(F,$)}return null}function Z(F,$,Y,ue){var qe=$!==null?$.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return qe!==null?null:N(F,$,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Y.key===qe?z(F,$,Y,ue):null;case w:return Y.key===qe?G(F,$,Y,ue):null;case V:return Y=ho(Y),Z(F,$,Y,ue)}if(q(Y)||I(Y))return qe!==null?null:oe(F,$,Y,ue,null);if(typeof Y.then=="function")return Z(F,$,Mu(Y),ue);if(Y.$$typeof===A)return Z(F,$,ku(F,Y),ue);Ru(F,Y)}return null}function te(F,$,Y,ue,qe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return F=F.get(Y)||null,N($,F,""+ue,qe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:return F=F.get(ue.key===null?Y:ue.key)||null,z($,F,ue,qe);case w:return F=F.get(ue.key===null?Y:ue.key)||null,G($,F,ue,qe);case V:return ue=ho(ue),te(F,$,Y,ue,qe)}if(q(ue)||I(ue))return F=F.get(Y)||null,oe($,F,ue,qe,null);if(typeof ue.then=="function")return te(F,$,Y,Mu(ue),qe);if(ue.$$typeof===A)return te(F,$,Y,ku($,ue),qe);Ru($,ue)}return null}function Ae(F,$,Y,ue){for(var qe=null,rt=null,Pe=$,$e=$=0,Ze=null;Pe!==null&&$e<Y.length;$e++){Pe.index>$e?(Ze=Pe,Pe=null):Ze=Pe.sibling;var nt=Z(F,Pe,Y[$e],ue);if(nt===null){Pe===null&&(Pe=Ze);break}a&&Pe&&nt.alternate===null&&o(F,Pe),$=b(nt,$,$e),rt===null?qe=nt:rt.sibling=nt,rt=nt,Pe=Ze}if($e===Y.length)return l(F,Pe),Qe&&Ca(F,$e),qe;if(Pe===null){for(;$e<Y.length;$e++)Pe=de(F,Y[$e],ue),Pe!==null&&($=b(Pe,$,$e),rt===null?qe=Pe:rt.sibling=Pe,rt=Pe);return Qe&&Ca(F,$e),qe}for(Pe=d(Pe);$e<Y.length;$e++)Ze=te(Pe,F,$e,Y[$e],ue),Ze!==null&&(a&&Ze.alternate!==null&&Pe.delete(Ze.key===null?$e:Ze.key),$=b(Ze,$,$e),rt===null?qe=Ze:rt.sibling=Ze,rt=Ze);return a&&Pe.forEach(function(zi){return o(F,zi)}),Qe&&Ca(F,$e),qe}function Le(F,$,Y,ue){if(Y==null)throw Error(n(151));for(var qe=null,rt=null,Pe=$,$e=$=0,Ze=null,nt=Y.next();Pe!==null&&!nt.done;$e++,nt=Y.next()){Pe.index>$e?(Ze=Pe,Pe=null):Ze=Pe.sibling;var zi=Z(F,Pe,nt.value,ue);if(zi===null){Pe===null&&(Pe=Ze);break}a&&Pe&&zi.alternate===null&&o(F,Pe),$=b(zi,$,$e),rt===null?qe=zi:rt.sibling=zi,rt=zi,Pe=Ze}if(nt.done)return l(F,Pe),Qe&&Ca(F,$e),qe;if(Pe===null){for(;!nt.done;$e++,nt=Y.next())nt=de(F,nt.value,ue),nt!==null&&($=b(nt,$,$e),rt===null?qe=nt:rt.sibling=nt,rt=nt);return Qe&&Ca(F,$e),qe}for(Pe=d(Pe);!nt.done;$e++,nt=Y.next())nt=te(Pe,F,$e,nt.value,ue),nt!==null&&(a&&nt.alternate!==null&&Pe.delete(nt.key===null?$e:nt.key),$=b(nt,$,$e),rt===null?qe=nt:rt.sibling=nt,rt=nt);return a&&Pe.forEach(function(GR){return o(F,GR)}),Qe&&Ca(F,$e),qe}function pt(F,$,Y,ue){if(typeof Y=="object"&&Y!==null&&Y.type===j&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:e:{for(var qe=Y.key;$!==null;){if($.key===qe){if(qe=Y.type,qe===j){if($.tag===7){l(F,$.sibling),ue=v($,Y.props.children),ue.return=F,F=ue;break e}}else if($.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===V&&ho(qe)===$.type){l(F,$.sibling),ue=v($,Y.props),Al(ue,Y),ue.return=F,F=ue;break e}l(F,$);break}else o(F,$);$=$.sibling}Y.type===j?(ue=lo(Y.props.children,F.mode,ue,Y.key),ue.return=F,F=ue):(ue=Cu(Y.type,Y.key,Y.props,null,F.mode,ue),Al(ue,Y),ue.return=F,F=ue)}return E(F);case w:e:{for(qe=Y.key;$!==null;){if($.key===qe)if($.tag===4&&$.stateNode.containerInfo===Y.containerInfo&&$.stateNode.implementation===Y.implementation){l(F,$.sibling),ue=v($,Y.children||[]),ue.return=F,F=ue;break e}else{l(F,$);break}else o(F,$);$=$.sibling}ue=Ph(Y,F.mode,ue),ue.return=F,F=ue}return E(F);case V:return Y=ho(Y),pt(F,$,Y,ue)}if(q(Y))return Ae(F,$,Y,ue);if(I(Y)){if(qe=I(Y),typeof qe!="function")throw Error(n(150));return Y=qe.call(Y),Le(F,$,Y,ue)}if(typeof Y.then=="function")return pt(F,$,Mu(Y),ue);if(Y.$$typeof===A)return pt(F,$,ku(F,Y),ue);Ru(F,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,$!==null&&$.tag===6?(l(F,$.sibling),ue=v($,Y),ue.return=F,F=ue):(l(F,$),ue=Th(Y,F.mode,ue),ue.return=F,F=ue),E(F)):l(F,$)}return function(F,$,Y,ue){try{Cl=0;var qe=pt(F,$,Y,ue);return ps=null,qe}catch(Pe){if(Pe===hs||Pe===Tu)throw Pe;var rt=nn(29,Pe,null,F.mode);return rt.lanes=ue,rt.return=F,rt}finally{}}}var go=Rx(!0),qx=Rx(!1),_i=!1;function Kh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function xi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function wi(a,o,l){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(ot&2)!==0){var v=d.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),d.pending=o,o=Ou(a),bx(a,null,l),o}return Eu(a,d,o,l),Ou(a)}function Nl(a,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,l|=d,o.lanes=l,mu(a,l)}}function Gh(a,o){var l=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var v=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?v=b=E:b=b.next=E,l=l.next}while(l!==null);b===null?v=b=o:b=b.next=o}else v=b=o;l={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=o:a.next=o,l.lastBaseUpdate=o}var Vh=!1;function kl(){if(Vh){var a=ms;if(a!==null)throw a}}function Dl(a,o,l,d){Vh=!1;var v=a.updateQueue;_i=!1;var b=v.firstBaseUpdate,E=v.lastBaseUpdate,N=v.shared.pending;if(N!==null){v.shared.pending=null;var z=N,G=z.next;z.next=null,E===null?b=G:E.next=G,E=z;var oe=a.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==E&&(N===null?oe.firstBaseUpdate=G:N.next=G,oe.lastBaseUpdate=z))}if(b!==null){var de=v.baseState;E=0,oe=G=z=null,N=b;do{var Z=N.lane&-536870913,te=Z!==N.lane;if(te?(Xe&Z)===Z:(d&Z)===Z){Z!==0&&Z===fs&&(Vh=!0),oe!==null&&(oe=oe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ae=a,Le=N;Z=o;var pt=l;switch(Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){de=Ae.call(pt,de,Z);break e}de=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,Z=typeof Ae=="function"?Ae.call(pt,de,Z):Ae,Z==null)break e;de=g({},de,Z);break e;case 2:_i=!0}}Z=N.callback,Z!==null&&(a.flags|=64,te&&(a.flags|=8192),te=v.callbacks,te===null?v.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(G=oe=te,z=de):oe=oe.next=te,E|=Z;if(N=N.next,N===null){if(N=v.shared.pending,N===null)break;te=N,N=te.next,te.next=null,v.lastBaseUpdate=te,v.shared.pending=null}}while(!0);oe===null&&(z=de),v.baseState=z,v.firstBaseUpdate=G,v.lastBaseUpdate=oe,b===null&&(v.shared.lanes=0),Ci|=E,a.lanes=E,a.memoizedState=de}}function zx(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function Lx(a,o){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)zx(l[a],o)}var gs=je(null),qu=je(0);function Ix(a,o){a=La,H(qu,a),H(gs,o),La=a|o.baseLanes}function Wh(){H(qu,La),H(gs,gs.current)}function Xh(){La=qu.current,ee(gs),ee(qu)}var an=je(null),kn=null;function ji(a){var o=a.alternate;H(Vt,Vt.current&1),H(an,a),kn===null&&(o===null||gs.current!==null||o.memoizedState!==null)&&(kn=a)}function Zh(a){H(Vt,Vt.current),H(an,a),kn===null&&(kn=a)}function Ux(a){a.tag===22?(H(Vt,Vt.current),H(an,a),kn===null&&(kn=a)):Si()}function Si(){H(Vt,Vt.current),H(an,an.current)}function on(a){ee(an),kn===a&&(kn=null),ee(Vt)}var Vt=je(0);function zu(a){for(var o=a;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ng(l)||ag(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ka=0,Be=null,mt=null,er=null,Lu=!1,vs=!1,vo=!1,Iu=0,Tl=0,ys=null,z2=0;function $t(){throw Error(n(321))}function Qh(a,o){if(o===null)return!1;for(var l=0;l<o.length&&l<a.length;l++)if(!rn(a[l],o[l]))return!1;return!0}function Jh(a,o,l,d,v,b){return ka=b,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=a===null||a.memoizedState===null?jw:hp,vo=!1,b=l(d,v),vo=!1,vs&&(b=$x(o,l,d,v)),Bx(a),b}function Bx(a){R.H=Rl;var o=mt!==null&&mt.next!==null;if(ka=0,er=mt=Be=null,Lu=!1,Tl=0,ys=null,o)throw Error(n(300));a===null||tr||(a=a.dependencies,a!==null&&Nu(a)&&(tr=!0))}function $x(a,o,l,d){Be=a;var v=0;do{if(vs&&(ys=null),Tl=0,vs=!1,25<=v)throw Error(n(301));if(v+=1,er=mt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}R.H=Sw,b=o(l,d)}while(vs);return b}function L2(){var a=R.H,o=a.useState()[0];return o=typeof o.then=="function"?Pl(o):o,a=a.useState()[0],(mt!==null?mt.memoizedState:null)!==a&&(Be.flags|=1024),o}function ep(){var a=Iu!==0;return Iu=0,a}function tp(a,o,l){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~l}function rp(a){if(Lu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Lu=!1}ka=0,er=mt=Be=null,vs=!1,Tl=Iu=0,ys=null}function Rr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?Be.memoizedState=er=a:er=er.next=a,er}function Wt(){if(mt===null){var a=Be.alternate;a=a!==null?a.memoizedState:null}else a=mt.next;var o=er===null?Be.memoizedState:er.next;if(o!==null)er=o,mt=a;else{if(a===null)throw Be.alternate===null?Error(n(467)):Error(n(310));mt=a,a={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},er===null?Be.memoizedState=er=a:er=er.next=a}return er}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(a){var o=Tl;return Tl+=1,ys===null&&(ys=[]),a=Tx(ys,a,o),o=Be,(er===null?o.memoizedState:er.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?jw:hp),a}function Bu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Pl(a);if(a.$$typeof===A)return Er(a)}throw Error(n(438,String(a)))}function np(a){var o=null,l=Be.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var d=Be.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Uu(),Be.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(a),d=0;d<a;d++)l[d]=ie;return o.index++,l}function Da(a,o){return typeof o=="function"?o(a):o}function $u(a){var o=Wt();return ap(o,mt,a)}function ap(a,o,l){var d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=l;var v=a.baseQueue,b=d.pending;if(b!==null){if(v!==null){var E=v.next;v.next=b.next,b.next=E}o.baseQueue=v=b,d.pending=null}if(b=a.baseState,v===null)a.memoizedState=b;else{o=v.next;var N=E=null,z=null,G=o,oe=!1;do{var de=G.lane&-536870913;if(de!==G.lane?(Xe&de)===de:(ka&de)===de){var Z=G.revertLane;if(Z===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),de===fs&&(oe=!0);else if((ka&Z)===Z){G=G.next,Z===fs&&(oe=!0);continue}else de={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},z===null?(N=z=de,E=b):z=z.next=de,Be.lanes|=Z,Ci|=Z;de=G.action,vo&&l(b,de),b=G.hasEagerState?G.eagerState:l(b,de)}else Z={lane:de,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},z===null?(N=z=Z,E=b):z=z.next=Z,Be.lanes|=de,Ci|=de;G=G.next}while(G!==null&&G!==o);if(z===null?E=b:z.next=N,!rn(b,a.memoizedState)&&(tr=!0,oe&&(l=ms,l!==null)))throw l;a.memoizedState=b,a.baseState=E,a.baseQueue=z,d.lastRenderedState=b}return v===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function ip(a){var o=Wt(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var d=l.dispatch,v=l.pending,b=o.memoizedState;if(v!==null){l.pending=null;var E=v=v.next;do b=a(b,E.action),E=E.next;while(E!==v);rn(b,o.memoizedState)||(tr=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),l.lastRenderedState=b}return[b,d]}function Hx(a,o,l){var d=Be,v=Wt(),b=Qe;if(b){if(l===void 0)throw Error(n(407));l=l()}else l=o();var E=!rn((mt||v).memoizedState,l);if(E&&(v.memoizedState=l,tr=!0),v=v.queue,lp(Yx.bind(null,d,v,a),[a]),v.getSnapshot!==o||E||er!==null&&er.memoizedState.tag&1){if(d.flags|=2048,bs(9,{destroy:void 0},Kx.bind(null,d,v,l,o),null),bt===null)throw Error(n(349));b||(ka&127)!==0||Fx(d,o,l)}return l}function Fx(a,o,l){a.flags|=16384,a={getSnapshot:o,value:l},o=Be.updateQueue,o===null?(o=Uu(),Be.updateQueue=o,o.stores=[a]):(l=o.stores,l===null?o.stores=[a]:l.push(a))}function Kx(a,o,l,d){o.value=l,o.getSnapshot=d,Gx(o)&&Vx(a)}function Yx(a,o,l){return l(function(){Gx(o)&&Vx(a)})}function Gx(a){var o=a.getSnapshot;a=a.value;try{var l=o();return!rn(a,l)}catch{return!0}}function Vx(a){var o=so(a,2);o!==null&&Wr(o,a,2)}function op(a){var o=Rr();if(typeof a=="function"){var l=a;if(a=l(),vo){qt(!0);try{l()}finally{qt(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:a},o}function Wx(a,o,l,d){return a.baseState=l,ap(a,mt,typeof d=="function"?d:Da)}function I2(a,o,l,d,v){if(Ku(a))throw Error(n(485));if(a=o.action,a!==null){var b={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};R.T!==null?l(!0):b.isTransition=!1,d(b),l=o.pending,l===null?(b.next=o.pending=b,Xx(o,b)):(b.next=l.next,o.pending=l.next=b)}}function Xx(a,o){var l=o.action,d=o.payload,v=a.state;if(o.isTransition){var b=R.T,E={};R.T=E;try{var N=l(v,d),z=R.S;z!==null&&z(E,N),Zx(a,o,N)}catch(G){sp(a,o,G)}finally{b!==null&&E.types!==null&&(b.types=E.types),R.T=b}}else try{b=l(v,d),Zx(a,o,b)}catch(G){sp(a,o,G)}}function Zx(a,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Qx(a,o,d)},function(d){return sp(a,o,d)}):Qx(a,o,l)}function Qx(a,o,l){o.status="fulfilled",o.value=l,Jx(o),a.state=l,o=a.pending,o!==null&&(l=o.next,l===o?a.pending=null:(l=l.next,o.next=l,Xx(a,l)))}function sp(a,o,l){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=l,Jx(o),o=o.next;while(o!==d)}a.action=null}function Jx(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function ew(a,o){return o}function tw(a,o){if(Qe){var l=bt.formState;if(l!==null){e:{var d=Be;if(Qe){if(St){t:{for(var v=St,b=Nn;v.nodeType!==8;){if(!b){v=null;break t}if(v=Dn(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){St=Dn(v.nextSibling),d=v.data==="F!";break e}}yi(d)}d=!1}d&&(o=l[0])}}return l=Rr(),l.memoizedState=l.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ew,lastRenderedState:o},l.queue=d,l=_w.bind(null,Be,d),d.dispatch=l,d=op(!1),b=mp.bind(null,Be,!1,d.queue),d=Rr(),v={state:o,dispatch:null,action:a,pending:null},d.queue=v,l=I2.bind(null,Be,v,b,l),v.dispatch=l,d.memoizedState=a,[o,l,!1]}function rw(a){var o=Wt();return nw(o,mt,a)}function nw(a,o,l){if(o=ap(a,o,ew)[0],a=$u(Da)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Pl(o)}catch(E){throw E===hs?Tu:E}else d=o;o=Wt();var v=o.queue,b=v.dispatch;return l!==o.memoizedState&&(Be.flags|=2048,bs(9,{destroy:void 0},U2.bind(null,v,l),null)),[d,b,a]}function U2(a,o){a.action=o}function aw(a){var o=Wt(),l=mt;if(l!==null)return nw(o,l,a);Wt(),o=o.memoizedState,l=Wt();var d=l.queue.dispatch;return l.memoizedState=a,[o,d,!1]}function bs(a,o,l,d){return a={tag:a,create:l,deps:d,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Uu(),Be.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=a.next=a:(d=l.next,l.next=a,a.next=d,o.lastEffect=a),a}function iw(){return Wt().memoizedState}function Hu(a,o,l,d){var v=Rr();Be.flags|=a,v.memoizedState=bs(1|o,{destroy:void 0},l,d===void 0?null:d)}function Fu(a,o,l,d){var v=Wt();d=d===void 0?null:d;var b=v.memoizedState.inst;mt!==null&&d!==null&&Qh(d,mt.memoizedState.deps)?v.memoizedState=bs(o,b,l,d):(Be.flags|=a,v.memoizedState=bs(1|o,b,l,d))}function ow(a,o){Hu(8390656,8,a,o)}function lp(a,o){Fu(2048,8,a,o)}function B2(a){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=Uu(),Be.updateQueue=o,o.events=[a];else{var l=o.events;l===null?o.events=[a]:l.push(a)}}function sw(a){var o=Wt().memoizedState;return B2({ref:o,nextImpl:a}),function(){if((ot&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function lw(a,o){return Fu(4,2,a,o)}function cw(a,o){return Fu(4,4,a,o)}function uw(a,o){if(typeof o=="function"){a=a();var l=o(a);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function dw(a,o,l){l=l!=null?l.concat([a]):null,Fu(4,4,uw.bind(null,o,a),l)}function cp(){}function fw(a,o){var l=Wt();o=o===void 0?null:o;var d=l.memoizedState;return o!==null&&Qh(o,d[1])?d[0]:(l.memoizedState=[a,o],a)}function mw(a,o){var l=Wt();o=o===void 0?null:o;var d=l.memoizedState;if(o!==null&&Qh(o,d[1]))return d[0];if(d=a(),vo){qt(!0);try{a()}finally{qt(!1)}}return l.memoizedState=[d,o],d}function up(a,o,l){return l===void 0||(ka&1073741824)!==0&&(Xe&261930)===0?a.memoizedState=o:(a.memoizedState=l,a=hj(),Be.lanes|=a,Ci|=a,l)}function hw(a,o,l,d){return rn(l,o)?l:gs.current!==null?(a=up(a,l,d),rn(a,o)||(tr=!0),a):(ka&42)===0||(ka&1073741824)!==0&&(Xe&261930)===0?(tr=!0,a.memoizedState=l):(a=hj(),Be.lanes|=a,Ci|=a,o)}function pw(a,o,l,d,v){var b=U.p;U.p=b!==0&&8>b?b:8;var E=R.T,N={};R.T=N,mp(a,!1,o,l);try{var z=v(),G=R.S;if(G!==null&&G(N,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var oe=q2(z,d);Ml(a,o,oe,cn(a))}else Ml(a,o,d,cn(a))}catch(de){Ml(a,o,{then:function(){},status:"rejected",reason:de},cn())}finally{U.p=b,E!==null&&N.types!==null&&(E.types=N.types),R.T=E}}function $2(){}function dp(a,o,l,d){if(a.tag!==5)throw Error(n(476));var v=gw(a).queue;pw(a,v,o,Q,l===null?$2:function(){return vw(a),l(d)})}function gw(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:Q},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:l},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function vw(a){var o=gw(a);o.next===null&&(o=a.alternate.memoizedState),Ml(a,o.next.queue,{},cn())}function fp(){return Er(Zl)}function yw(){return Wt().memoizedState}function bw(){return Wt().memoizedState}function H2(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var l=cn();a=xi(l);var d=wi(o,a,l);d!==null&&(Wr(d,o,l),Nl(d,o,l)),o={cache:Bh()},a.payload=o;return}o=o.return}}function F2(a,o,l){var d=cn();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ku(a)?xw(o,l):(l=kh(a,o,l,d),l!==null&&(Wr(l,a,d),ww(l,o,d)))}function _w(a,o,l){var d=cn();Ml(a,o,l,d)}function Ml(a,o,l,d){var v={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ku(a))xw(o,v);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var E=o.lastRenderedState,N=b(E,l);if(v.hasEagerState=!0,v.eagerState=N,rn(N,E))return Eu(a,o,v,0),bt===null&&Su(),!1}catch{}finally{}if(l=kh(a,o,v,d),l!==null)return Wr(l,a,d),ww(l,o,d),!0}return!1}function mp(a,o,l,d){if(d={lane:2,revertLane:Kp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ku(a)){if(o)throw Error(n(479))}else o=kh(a,l,d,2),o!==null&&Wr(o,a,2)}function Ku(a){var o=a.alternate;return a===Be||o!==null&&o===Be}function xw(a,o){vs=Lu=!0;var l=a.pending;l===null?o.next=o:(o.next=l.next,l.next=o),a.pending=o}function ww(a,o,l){if((l&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,l|=d,o.lanes=l,mu(a,l)}}var Rl={readContext:Er,use:Bu,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};Rl.useEffectEvent=$t;var jw={readContext:Er,use:Bu,useCallback:function(a,o){return Rr().memoizedState=[a,o===void 0?null:o],a},useContext:Er,useEffect:ow,useImperativeHandle:function(a,o,l){l=l!=null?l.concat([a]):null,Hu(4194308,4,uw.bind(null,o,a),l)},useLayoutEffect:function(a,o){return Hu(4194308,4,a,o)},useInsertionEffect:function(a,o){Hu(4,2,a,o)},useMemo:function(a,o){var l=Rr();o=o===void 0?null:o;var d=a();if(vo){qt(!0);try{a()}finally{qt(!1)}}return l.memoizedState=[d,o],d},useReducer:function(a,o,l){var d=Rr();if(l!==void 0){var v=l(o);if(vo){qt(!0);try{l(o)}finally{qt(!1)}}}else v=o;return d.memoizedState=d.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},d.queue=a,a=a.dispatch=F2.bind(null,Be,a),[d.memoizedState,a]},useRef:function(a){var o=Rr();return a={current:a},o.memoizedState=a},useState:function(a){a=op(a);var o=a.queue,l=_w.bind(null,Be,o);return o.dispatch=l,[a.memoizedState,l]},useDebugValue:cp,useDeferredValue:function(a,o){var l=Rr();return up(l,a,o)},useTransition:function(){var a=op(!1);return a=pw.bind(null,Be,a.queue,!0,!1),Rr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,l){var d=Be,v=Rr();if(Qe){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),bt===null)throw Error(n(349));(Xe&127)!==0||Fx(d,o,l)}v.memoizedState=l;var b={value:l,getSnapshot:o};return v.queue=b,ow(Yx.bind(null,d,b,a),[a]),d.flags|=2048,bs(9,{destroy:void 0},Kx.bind(null,d,b,l,o),null),l},useId:function(){var a=Rr(),o=bt.identifierPrefix;if(Qe){var l=ca,d=la;l=(d&~(1<<32-ft(d)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Iu++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=z2++,o="_"+o+"r_"+l.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:fp,useFormState:tw,useActionState:tw,useOptimistic:function(a){var o=Rr();o.memoizedState=o.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=mp.bind(null,Be,!0,l),l.dispatch=o,[a,o]},useMemoCache:np,useCacheRefresh:function(){return Rr().memoizedState=H2.bind(null,Be)},useEffectEvent:function(a){var o=Rr(),l={impl:a};return o.memoizedState=l,function(){if((ot&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},hp={readContext:Er,use:Bu,useCallback:fw,useContext:Er,useEffect:lp,useImperativeHandle:dw,useInsertionEffect:lw,useLayoutEffect:cw,useMemo:mw,useReducer:$u,useRef:iw,useState:function(){return $u(Da)},useDebugValue:cp,useDeferredValue:function(a,o){var l=Wt();return hw(l,mt.memoizedState,a,o)},useTransition:function(){var a=$u(Da)[0],o=Wt().memoizedState;return[typeof a=="boolean"?a:Pl(a),o]},useSyncExternalStore:Hx,useId:yw,useHostTransitionStatus:fp,useFormState:rw,useActionState:rw,useOptimistic:function(a,o){var l=Wt();return Wx(l,mt,a,o)},useMemoCache:np,useCacheRefresh:bw};hp.useEffectEvent=sw;var Sw={readContext:Er,use:Bu,useCallback:fw,useContext:Er,useEffect:lp,useImperativeHandle:dw,useInsertionEffect:lw,useLayoutEffect:cw,useMemo:mw,useReducer:ip,useRef:iw,useState:function(){return ip(Da)},useDebugValue:cp,useDeferredValue:function(a,o){var l=Wt();return mt===null?up(l,a,o):hw(l,mt.memoizedState,a,o)},useTransition:function(){var a=ip(Da)[0],o=Wt().memoizedState;return[typeof a=="boolean"?a:Pl(a),o]},useSyncExternalStore:Hx,useId:yw,useHostTransitionStatus:fp,useFormState:aw,useActionState:aw,useOptimistic:function(a,o){var l=Wt();return mt!==null?Wx(l,mt,a,o):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:np,useCacheRefresh:bw};Sw.useEffectEvent=sw;function pp(a,o,l,d){o=a.memoizedState,l=l(d,o),l=l==null?o:g({},o,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var gp={enqueueSetState:function(a,o,l){a=a._reactInternals;var d=cn(),v=xi(d);v.payload=o,l!=null&&(v.callback=l),o=wi(a,v,d),o!==null&&(Wr(o,a,d),Nl(o,a,d))},enqueueReplaceState:function(a,o,l){a=a._reactInternals;var d=cn(),v=xi(d);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=wi(a,v,d),o!==null&&(Wr(o,a,d),Nl(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var l=cn(),d=xi(l);d.tag=2,o!=null&&(d.callback=o),o=wi(a,d,l),o!==null&&(Wr(o,a,l),Nl(o,a,l))}};function Ew(a,o,l,d,v,b,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,b,E):o.prototype&&o.prototype.isPureReactComponent?!xl(l,d)||!xl(v,b):!0}function Ow(a,o,l,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==a&&gp.enqueueReplaceState(o,o.state,null)}function yo(a,o){var l=o;if("ref"in o){l={};for(var d in o)d!=="ref"&&(l[d]=o[d])}if(a=a.defaultProps){l===o&&(l=g({},l));for(var v in a)l[v]===void 0&&(l[v]=a[v])}return l}function Cw(a){ju(a)}function Aw(a){console.error(a)}function Nw(a){ju(a)}function Yu(a,o){try{var l=a.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function kw(a,o,l){try{var d=a.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function vp(a,o,l){return l=xi(l),l.tag=3,l.payload={element:null},l.callback=function(){Yu(a,o)},l}function Dw(a){return a=xi(a),a.tag=3,a}function Tw(a,o,l,d){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var b=d.value;a.payload=function(){return v(b)},a.callback=function(){kw(o,l,d)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){kw(o,l,d),typeof v!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function K2(a,o,l,d,v){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=l.alternate,o!==null&&ds(o,l,v,!0),l=an.current,l!==null){switch(l.tag){case 31:case 13:return kn===null?ad():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=v,d===Pu?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([d]):o.add(d),$p(a,d,v)),!1;case 22:return l.flags|=65536,d===Pu?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([d]):l.add(d)),$p(a,d,v)),!1}throw Error(n(435,l.tag))}return $p(a,d,v),ad(),!1}if(Qe)return o=an.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,d!==qh&&(a=Error(n(422),{cause:d}),Sl(On(a,l)))):(d!==qh&&(o=Error(n(423),{cause:d}),Sl(On(o,l))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,d=On(d,l),v=vp(a.stateNode,d,v),Gh(a,v),Ht!==4&&(Ht=2)),!1;var b=Error(n(520),{cause:d});if(b=On(b,l),Hl===null?Hl=[b]:Hl.push(b),Ht!==4&&(Ht=2),o===null)return!0;d=On(d,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,a=v&-v,l.lanes|=a,a=vp(l.stateNode,d,a),Gh(l,a),!1;case 1:if(o=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ai===null||!Ai.has(b))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Dw(v),Tw(v,a,l,d),Gh(l,v),!1}l=l.return}while(l!==null);return!1}var yp=Error(n(461)),tr=!1;function Or(a,o,l,d){o.child=a===null?qx(o,null,l,d):go(o,a.child,l,d)}function Pw(a,o,l,d,v){l=l.render;var b=o.ref;if("ref"in d){var E={};for(var N in d)N!=="ref"&&(E[N]=d[N])}else E=d;return fo(o),d=Jh(a,o,l,E,b,v),N=ep(),a!==null&&!tr?(tp(a,o,v),Ta(a,o,v)):(Qe&&N&&Mh(o),o.flags|=1,Or(a,o,d,v),o.child)}function Mw(a,o,l,d,v){if(a===null){var b=l.type;return typeof b=="function"&&!Dh(b)&&b.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=b,Rw(a,o,b,d,v)):(a=Cu(l.type,null,d,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!Op(a,v)){var E=b.memoizedProps;if(l=l.compare,l=l!==null?l:xl,l(E,d)&&a.ref===o.ref)return Ta(a,o,v)}return o.flags|=1,a=Oa(b,d),a.ref=o.ref,a.return=o,o.child=a}function Rw(a,o,l,d,v){if(a!==null){var b=a.memoizedProps;if(xl(b,d)&&a.ref===o.ref)if(tr=!1,o.pendingProps=d=b,Op(a,v))(a.flags&131072)!==0&&(tr=!0);else return o.lanes=a.lanes,Ta(a,o,v)}return bp(a,o,l,d,v)}function qw(a,o,l,d){var v=d.children,b=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,a!==null){for(d=o.child=a.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~b}else d=0,o.child=null;return zw(a,o,b,l,d)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Du(o,b!==null?b.cachePool:null),b!==null?Ix(o,b):Wh(),Ux(o);else return d=o.lanes=536870912,zw(a,o,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Du(o,b.cachePool),Ix(o,b),Si(),o.memoizedState=null):(a!==null&&Du(o,null),Wh(),Si());return Or(a,o,v,l),o.child}function ql(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function zw(a,o,l,d,v){var b=Hh();return b=b===null?null:{parent:Jt._currentValue,pool:b},o.memoizedState={baseLanes:l,cachePool:b},a!==null&&Du(o,null),Wh(),Ux(o),a!==null&&ds(a,o,d,!0),o.childLanes=v,null}function Gu(a,o){return o=Wu({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function Lw(a,o,l){return go(o,a.child,null,l),a=Gu(o,o.pendingProps),a.flags|=2,on(o),o.memoizedState=null,a}function Y2(a,o,l){var d=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Qe){if(d.mode==="hidden")return a=Gu(o,d),o.lanes=536870912,ql(null,a);if(Zh(o),(a=St)?(a=Xj(a,Nn),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:gi!==null?{id:la,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},l=xx(a),l.return=o,o.child=l,Sr=o,St=null)):a=null,a===null)throw yi(o);return o.lanes=536870912,null}return Gu(o,d)}var b=a.memoizedState;if(b!==null){var E=b.dehydrated;if(Zh(o),v)if(o.flags&256)o.flags&=-257,o=Lw(a,o,l);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(n(558));else if(tr||ds(a,o,l,!1),v=(l&a.childLanes)!==0,tr||v){if(d=bt,d!==null&&(E=Fn(d,l),E!==0&&E!==b.retryLane))throw b.retryLane=E,so(a,E),Wr(d,a,E),yp;ad(),o=Lw(a,o,l)}else a=b.treeContext,St=Dn(E.nextSibling),Sr=o,Qe=!0,vi=null,Nn=!1,a!==null&&Sx(o,a),o=Gu(o,d),o.flags|=4096;return o}return a=Oa(a.child,{mode:d.mode,children:d.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Vu(a,o){var l=o.ref;if(l===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(a===null||a.ref!==l)&&(o.flags|=4194816)}}function bp(a,o,l,d,v){return fo(o),l=Jh(a,o,l,d,void 0,v),d=ep(),a!==null&&!tr?(tp(a,o,v),Ta(a,o,v)):(Qe&&d&&Mh(o),o.flags|=1,Or(a,o,l,v),o.child)}function Iw(a,o,l,d,v,b){return fo(o),o.updateQueue=null,l=$x(o,d,l,v),Bx(a),d=ep(),a!==null&&!tr?(tp(a,o,b),Ta(a,o,b)):(Qe&&d&&Mh(o),o.flags|=1,Or(a,o,l,b),o.child)}function Uw(a,o,l,d,v){if(fo(o),o.stateNode===null){var b=ss,E=l.contextType;typeof E=="object"&&E!==null&&(b=Er(E)),b=new l(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=gp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},Kh(o),E=l.contextType,b.context=typeof E=="object"&&E!==null?Er(E):ss,b.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(pp(o,l,E,d),b.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&gp.enqueueReplaceState(b,b.state,null),Dl(o,d,b,v),kl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){b=o.stateNode;var N=o.memoizedProps,z=yo(l,N);b.props=z;var G=b.context,oe=l.contextType;E=ss,typeof oe=="object"&&oe!==null&&(E=Er(oe));var de=l.getDerivedStateFromProps;oe=typeof de=="function"||typeof b.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,oe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N||G!==E)&&Ow(o,b,d,E),_i=!1;var Z=o.memoizedState;b.state=Z,Dl(o,d,b,v),kl(),G=o.memoizedState,N||Z!==G||_i?(typeof de=="function"&&(pp(o,l,de,d),G=o.memoizedState),(z=_i||Ew(o,l,z,d,Z,G,E))?(oe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=G),b.props=d,b.state=G,b.context=E,d=z):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,Yh(a,o),E=o.memoizedProps,oe=yo(l,E),b.props=oe,de=o.pendingProps,Z=b.context,G=l.contextType,z=ss,typeof G=="object"&&G!==null&&(z=Er(G)),N=l.getDerivedStateFromProps,(G=typeof N=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==de||Z!==z)&&Ow(o,b,d,z),_i=!1,Z=o.memoizedState,b.state=Z,Dl(o,d,b,v),kl();var te=o.memoizedState;E!==de||Z!==te||_i||a!==null&&a.dependencies!==null&&Nu(a.dependencies)?(typeof N=="function"&&(pp(o,l,N,d),te=o.memoizedState),(oe=_i||Ew(o,l,oe,d,Z,te,z)||a!==null&&a.dependencies!==null&&Nu(a.dependencies))?(G||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,te,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,te,z)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=te),b.props=d,b.state=te,b.context=z,d=oe):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),d=!1)}return b=d,Vu(a,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&d?(o.child=go(o,a.child,null,v),o.child=go(o,null,l,v)):Or(a,o,l,v),o.memoizedState=b.state,a=o.child):a=Ta(a,o,v),a}function Bw(a,o,l,d){return co(),o.flags|=256,Or(a,o,l,d),o.child}var _p={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xp(a){return{baseLanes:a,cachePool:kx()}}function wp(a,o,l){return a=a!==null?a.childLanes&~l:0,o&&(a|=ln),a}function $w(a,o,l){var d=o.pendingProps,v=!1,b=(o.flags&128)!==0,E;if((E=b)||(E=a!==null&&a.memoizedState===null?!1:(Vt.current&2)!==0),E&&(v=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,a===null){if(Qe){if(v?ji(o):Si(),(a=St)?(a=Xj(a,Nn),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:gi!==null?{id:la,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},l=xx(a),l.return=o,o.child=l,Sr=o,St=null)):a=null,a===null)throw yi(o);return ag(a)?o.lanes=32:o.lanes=536870912,null}var N=d.children;return d=d.fallback,v?(Si(),v=o.mode,N=Wu({mode:"hidden",children:N},v),d=lo(d,v,l,null),N.return=o,d.return=o,N.sibling=d,o.child=N,d=o.child,d.memoizedState=xp(l),d.childLanes=wp(a,E,l),o.memoizedState=_p,ql(null,d)):(ji(o),jp(o,N))}var z=a.memoizedState;if(z!==null&&(N=z.dehydrated,N!==null)){if(b)o.flags&256?(ji(o),o.flags&=-257,o=Sp(a,o,l)):o.memoizedState!==null?(Si(),o.child=a.child,o.flags|=128,o=null):(Si(),N=d.fallback,v=o.mode,d=Wu({mode:"visible",children:d.children},v),N=lo(N,v,l,null),N.flags|=2,d.return=o,N.return=o,d.sibling=N,o.child=d,go(o,a.child,null,l),d=o.child,d.memoizedState=xp(l),d.childLanes=wp(a,E,l),o.memoizedState=_p,o=ql(null,d));else if(ji(o),ag(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var G=E.dgst;E=G,d=Error(n(419)),d.stack="",d.digest=E,Sl({value:d,source:null,stack:null}),o=Sp(a,o,l)}else if(tr||ds(a,o,l,!1),E=(l&a.childLanes)!==0,tr||E){if(E=bt,E!==null&&(d=Fn(E,l),d!==0&&d!==z.retryLane))throw z.retryLane=d,so(a,d),Wr(E,a,d),yp;ng(N)||ad(),o=Sp(a,o,l)}else ng(N)?(o.flags|=192,o.child=a.child,o=null):(a=z.treeContext,St=Dn(N.nextSibling),Sr=o,Qe=!0,vi=null,Nn=!1,a!==null&&Sx(o,a),o=jp(o,d.children),o.flags|=4096);return o}return v?(Si(),N=d.fallback,v=o.mode,z=a.child,G=z.sibling,d=Oa(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,G!==null?N=Oa(G,N):(N=lo(N,v,l,null),N.flags|=2),N.return=o,d.return=o,d.sibling=N,o.child=d,ql(null,d),d=o.child,N=a.child.memoizedState,N===null?N=xp(l):(v=N.cachePool,v!==null?(z=Jt._currentValue,v=v.parent!==z?{parent:z,pool:z}:v):v=kx(),N={baseLanes:N.baseLanes|l,cachePool:v}),d.memoizedState=N,d.childLanes=wp(a,E,l),o.memoizedState=_p,ql(a.child,d)):(ji(o),l=a.child,a=l.sibling,l=Oa(l,{mode:"visible",children:d.children}),l.return=o,l.sibling=null,a!==null&&(E=o.deletions,E===null?(o.deletions=[a],o.flags|=16):E.push(a)),o.child=l,o.memoizedState=null,l)}function jp(a,o){return o=Wu({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Wu(a,o){return a=nn(22,a,null,o),a.lanes=0,a}function Sp(a,o,l){return go(o,a.child,null,l),a=jp(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Hw(a,o,l){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),Ih(a.return,o,l)}function Ep(a,o,l,d,v,b){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:v,treeForkCount:b}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=d,E.tail=l,E.tailMode=v,E.treeForkCount=b)}function Fw(a,o,l){var d=o.pendingProps,v=d.revealOrder,b=d.tail;d=d.children;var E=Vt.current,N=(E&2)!==0;if(N?(E=E&1|2,o.flags|=128):E&=1,H(Vt,E),Or(a,o,d,l),d=Qe?jl:0,!N&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Hw(a,l,o);else if(a.tag===19)Hw(a,l,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(l=o.child,v=null;l!==null;)a=l.alternate,a!==null&&zu(a)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),Ep(o,!1,v,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&zu(a)===null){o.child=v;break}a=v.sibling,v.sibling=l,l=v,v=a}Ep(o,!0,l,null,b,d);break;case"together":Ep(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Ta(a,o,l){if(a!==null&&(o.dependencies=a.dependencies),Ci|=o.lanes,(l&o.childLanes)===0)if(a!==null){if(ds(a,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,l=Oa(a,a.pendingProps),o.child=l,l.return=o;a.sibling!==null;)a=a.sibling,l=l.sibling=Oa(a,a.pendingProps),l.return=o;l.sibling=null}return o.child}function Op(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Nu(a)))}function G2(a,o,l){switch(o.tag){case 3:ze(o,o.stateNode.containerInfo),bi(o,Jt,a.memoizedState.cache),co();break;case 27:case 5:we(o);break;case 4:ze(o,o.stateNode.containerInfo);break;case 10:bi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Zh(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(ji(o),o.flags|=128,null):(l&o.child.childLanes)!==0?$w(a,o,l):(ji(o),a=Ta(a,o,l),a!==null?a.sibling:null);ji(o);break;case 19:var v=(a.flags&128)!==0;if(d=(l&o.childLanes)!==0,d||(ds(a,o,l,!1),d=(l&o.childLanes)!==0),v){if(d)return Fw(a,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),H(Vt,Vt.current),d)break;return null;case 22:return o.lanes=0,qw(a,o,l,o.pendingProps);case 24:bi(o,Jt,a.memoizedState.cache)}return Ta(a,o,l)}function Kw(a,o,l){if(a!==null)if(a.memoizedProps!==o.pendingProps)tr=!0;else{if(!Op(a,l)&&(o.flags&128)===0)return tr=!1,G2(a,o,l);tr=(a.flags&131072)!==0}else tr=!1,Qe&&(o.flags&1048576)!==0&&jx(o,jl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(a=ho(o.elementType),o.type=a,typeof a=="function")Dh(a)?(d=yo(a,d),o.tag=1,o=Uw(null,o,a,d,l)):(o.tag=0,o=bp(null,o,a,d,l));else{if(a!=null){var v=a.$$typeof;if(v===k){o.tag=11,o=Pw(null,o,a,d,l);break e}else if(v===L){o.tag=14,o=Mw(null,o,a,d,l);break e}}throw o=ge(a)||a,Error(n(306,o,""))}}return o;case 0:return bp(a,o,o.type,o.pendingProps,l);case 1:return d=o.type,v=yo(d,o.pendingProps),Uw(a,o,d,v,l);case 3:e:{if(ze(o,o.stateNode.containerInfo),a===null)throw Error(n(387));d=o.pendingProps;var b=o.memoizedState;v=b.element,Yh(a,o),Dl(o,d,null,l);var E=o.memoizedState;if(d=E.cache,bi(o,Jt,d),d!==b.cache&&Uh(o,[Jt],l,!0),kl(),d=E.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Bw(a,o,d,l);break e}else if(d!==v){v=On(Error(n(424)),o),Sl(v),o=Bw(a,o,d,l);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(St=Dn(a.firstChild),Sr=o,Qe=!0,vi=null,Nn=!0,l=qx(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(co(),d===v){o=Ta(a,o,l);break e}Or(a,o,d,l)}o=o.child}return o;case 26:return Vu(a,o),a===null?(l=rS(o.type,null,o.pendingProps,null))?o.memoizedState=l:Qe||(l=o.type,a=o.pendingProps,d=dd(Ie.current).createElement(l),d[Bt]=o,d[sr]=a,Cr(d,l,a),le(d),o.stateNode=d):o.memoizedState=rS(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return we(o),a===null&&Qe&&(d=o.stateNode=Jj(o.type,o.pendingProps,Ie.current),Sr=o,Nn=!0,v=St,Ti(o.type)?(ig=v,St=Dn(d.firstChild)):St=v),Or(a,o,o.pendingProps.children,l),Vu(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Qe&&((v=d=St)&&(d=jR(d,o.type,o.pendingProps,Nn),d!==null?(o.stateNode=d,Sr=o,St=Dn(d.firstChild),Nn=!1,v=!0):v=!1),v||yi(o)),we(o),v=o.type,b=o.pendingProps,E=a!==null?a.memoizedProps:null,d=b.children,eg(v,b)?d=null:E!==null&&eg(v,E)&&(o.flags|=32),o.memoizedState!==null&&(v=Jh(a,o,L2,null,null,l),Zl._currentValue=v),Vu(a,o),Or(a,o,d,l),o.child;case 6:return a===null&&Qe&&((a=l=St)&&(l=SR(l,o.pendingProps,Nn),l!==null?(o.stateNode=l,Sr=o,St=null,a=!0):a=!1),a||yi(o)),null;case 13:return $w(a,o,l);case 4:return ze(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=go(o,null,d,l):Or(a,o,d,l),o.child;case 11:return Pw(a,o,o.type,o.pendingProps,l);case 7:return Or(a,o,o.pendingProps,l),o.child;case 8:return Or(a,o,o.pendingProps.children,l),o.child;case 12:return Or(a,o,o.pendingProps.children,l),o.child;case 10:return d=o.pendingProps,bi(o,o.type,d.value),Or(a,o,d.children,l),o.child;case 9:return v=o.type._context,d=o.pendingProps.children,fo(o),v=Er(v),d=d(v),o.flags|=1,Or(a,o,d,l),o.child;case 14:return Mw(a,o,o.type,o.pendingProps,l);case 15:return Rw(a,o,o.type,o.pendingProps,l);case 19:return Fw(a,o,l);case 31:return Y2(a,o,l);case 22:return qw(a,o,l,o.pendingProps);case 24:return fo(o),d=Er(Jt),a===null?(v=Hh(),v===null&&(v=bt,b=Bh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=l),v=b),o.memoizedState={parent:d,cache:v},Kh(o),bi(o,Jt,v)):((a.lanes&l)!==0&&(Yh(a,o),Dl(o,null,null,l),kl()),v=a.memoizedState,b=o.memoizedState,v.parent!==d?(v={parent:d,cache:d},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),bi(o,Jt,d)):(d=b.cache,bi(o,Jt,d),d!==v.cache&&Uh(o,[Jt],l,!0))),Or(a,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Pa(a){a.flags|=4}function Cp(a,o,l,d,v){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(yj())a.flags|=8192;else throw po=Pu,Fh}else a.flags&=-16777217}function Yw(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!sS(o))if(yj())a.flags|=8192;else throw po=Pu,Fh}function Xu(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ye():536870912,a.lanes|=o,js|=o)}function zl(a,o){if(!Qe)switch(a.tailMode){case"hidden":o=a.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Et(a){var o=a.alternate!==null&&a.alternate.child===a.child,l=0,d=0;if(o)for(var v=a.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=d,a.childLanes=l,o}function V2(a,o,l){var d=o.pendingProps;switch(Rh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return l=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Na(Jt),J(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(us(o)?Pa(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,zh())),Et(o),null;case 26:var v=o.type,b=o.memoizedState;return a===null?(Pa(o),b!==null?(Et(o),Yw(o,b)):(Et(o),Cp(o,v,null,d,l))):b?b!==a.memoizedState?(Pa(o),Et(o),Yw(o,b)):(Et(o),o.flags&=-16777217):(a=a.memoizedProps,a!==d&&Pa(o),Et(o),Cp(o,v,a,d,l)),null;case 27:if(xe(o),l=Ie.current,v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Pa(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Et(o),null}a=Ee.current,us(o)?Ex(o):(a=Jj(v,d,l),o.stateNode=a,Pa(o))}return Et(o),null;case 5:if(xe(o),v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Pa(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Et(o),null}if(b=Ee.current,us(o))Ex(o);else{var E=dd(Ie.current);switch(b){case 1:b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=E.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?E.createElement("select",{is:d.is}):E.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?E.createElement(v,{is:d.is}):E.createElement(v)}}b[Bt]=o,b[sr]=d;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)b.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=b;e:switch(Cr(b,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Pa(o)}}return Et(o),Cp(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,l),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Pa(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(a=Ie.current,us(o)){if(a=o.stateNode,l=o.memoizedProps,d=null,v=Sr,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}a[Bt]=o,a=!!(a.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||$j(a.nodeValue,l)),a||yi(o,!0)}else a=dd(a).createTextNode(d),a[Bt]=o,o.stateNode=a}return Et(o),null;case 31:if(l=o.memoizedState,a===null||a.memoizedState!==null){if(d=us(o),l!==null){if(a===null){if(!d)throw Error(n(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Bt]=o}else co(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),a=!1}else l=zh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=l),a=!0;if(!a)return o.flags&256?(on(o),o):(on(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Et(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=us(o),d!==null&&d.dehydrated!==null){if(a===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Bt]=o}else co(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),v=!1}else v=zh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(on(o),o):(on(o),null)}return on(o),(o.flags&128)!==0?(o.lanes=l,o):(l=d!==null,a=a!==null&&a.memoizedState!==null,l&&(d=o.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==v&&(d.flags|=2048)),l!==a&&l&&(o.child.flags|=8192),Xu(o,o.updateQueue),Et(o),null);case 4:return J(),a===null&&Wp(o.stateNode.containerInfo),Et(o),null;case 10:return Na(o.type),Et(o),null;case 19:if(ee(Vt),d=o.memoizedState,d===null)return Et(o),null;if(v=(o.flags&128)!==0,b=d.rendering,b===null)if(v)zl(d,!1);else{if(Ht!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=zu(a),b!==null){for(o.flags|=128,zl(d,!1),a=b.updateQueue,o.updateQueue=a,Xu(o,a),o.subtreeFlags=0,a=l,l=o.child;l!==null;)_x(l,a),l=l.sibling;return H(Vt,Vt.current&1|2),Qe&&Ca(o,d.treeForkCount),o.child}a=a.sibling}d.tail!==null&&Ye()>td&&(o.flags|=128,v=!0,zl(d,!1),o.lanes=4194304)}else{if(!v)if(a=zu(b),a!==null){if(o.flags|=128,v=!0,a=a.updateQueue,o.updateQueue=a,Xu(o,a),zl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Qe)return Et(o),null}else 2*Ye()-d.renderingStartTime>td&&l!==536870912&&(o.flags|=128,v=!0,zl(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(a=d.last,a!==null?a.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Ye(),a.sibling=null,l=Vt.current,H(Vt,v?l&1|2:l&1),Qe&&Ca(o,d.treeForkCount),a):(Et(o),null);case 22:case 23:return on(o),Xh(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(l&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),l=o.updateQueue,l!==null&&Xu(o,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==l&&(o.flags|=2048),a!==null&&ee(mo),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Na(Jt),Et(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function W2(a,o){switch(Rh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Na(Jt),J(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return xe(o),null;case 31:if(o.memoizedState!==null){if(on(o),o.alternate===null)throw Error(n(340));co()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(on(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));co()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return ee(Vt),null;case 4:return J(),null;case 10:return Na(o.type),null;case 22:case 23:return on(o),Xh(),a!==null&&ee(mo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Na(Jt),null;case 25:return null;default:return null}}function Gw(a,o){switch(Rh(o),o.tag){case 3:Na(Jt),J();break;case 26:case 27:case 5:xe(o);break;case 4:J();break;case 31:o.memoizedState!==null&&on(o);break;case 13:on(o);break;case 19:ee(Vt);break;case 10:Na(o.type);break;case 22:case 23:on(o),Xh(),a!==null&&ee(mo);break;case 24:Na(Jt)}}function Ll(a,o){try{var l=o.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var v=d.next;l=v;do{if((l.tag&a)===a){d=void 0;var b=l.create,E=l.inst;d=b(),E.destroy=d}l=l.next}while(l!==v)}}catch(N){ut(o,o.return,N)}}function Ei(a,o,l){try{var d=o.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var b=v.next;d=b;do{if((d.tag&a)===a){var E=d.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,v=o;var z=l,G=N;try{G()}catch(oe){ut(v,z,oe)}}}d=d.next}while(d!==b)}}catch(oe){ut(o,o.return,oe)}}function Vw(a){var o=a.updateQueue;if(o!==null){var l=a.stateNode;try{Lx(o,l)}catch(d){ut(a,a.return,d)}}}function Ww(a,o,l){l.props=yo(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(d){ut(a,o,d)}}function Il(a,o){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof l=="function"?a.refCleanup=l(d):l.current=d}}catch(v){ut(a,o,v)}}function ua(a,o){var l=a.ref,d=a.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(v){ut(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){ut(a,o,v)}else l.current=null}function Xw(a){var o=a.type,l=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(v){ut(a,a.return,v)}}function Ap(a,o,l){try{var d=a.stateNode;vR(d,a.type,l,o),d[sr]=o}catch(v){ut(a,a.return,v)}}function Zw(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ti(a.type)||a.tag===4}function Np(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Zw(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ti(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function kp(a,o,l){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(a),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Sa));else if(d!==4&&(d===27&&Ti(a.type)&&(l=a.stateNode,o=null),a=a.child,a!==null))for(kp(a,o,l),a=a.sibling;a!==null;)kp(a,o,l),a=a.sibling}function Zu(a,o,l){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?l.insertBefore(a,o):l.appendChild(a);else if(d!==4&&(d===27&&Ti(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Zu(a,o,l),a=a.sibling;a!==null;)Zu(a,o,l),a=a.sibling}function Qw(a){var o=a.stateNode,l=a.memoizedProps;try{for(var d=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Cr(o,d,l),o[Bt]=a,o[sr]=l}catch(b){ut(a,a.return,b)}}var Ma=!1,rr=!1,Dp=!1,Jw=typeof WeakSet=="function"?WeakSet:Set,pr=null;function X2(a,o){if(a=a.containerInfo,Qp=yd,a=dx(a),Sh(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var v=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var E=0,N=-1,z=-1,G=0,oe=0,de=a,Z=null;t:for(;;){for(var te;de!==l||v!==0&&de.nodeType!==3||(N=E+v),de!==b||d!==0&&de.nodeType!==3||(z=E+d),de.nodeType===3&&(E+=de.nodeValue.length),(te=de.firstChild)!==null;)Z=de,de=te;for(;;){if(de===a)break t;if(Z===l&&++G===v&&(N=E),Z===b&&++oe===d&&(z=E),(te=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=te}l=N===-1||z===-1?null:{start:N,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Jp={focusedElem:a,selectionRange:l},yd=!1,pr=o;pr!==null;)if(o=pr,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,pr=a;else for(;pr!==null;){switch(o=pr,b=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(l=0;l<a.length;l++)v=a[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,l=o,v=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var Ae=yo(l.type,v);a=d.getSnapshotBeforeUpdate(Ae,b),d.__reactInternalSnapshotBeforeUpdate=a}catch(Le){ut(l,l.return,Le)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,l=a.nodeType,l===9)rg(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":rg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,pr=a;break}pr=o.return}}function ej(a,o,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:qa(a,l),d&4&&Ll(5,l);break;case 1:if(qa(a,l),d&4)if(a=l.stateNode,o===null)try{a.componentDidMount()}catch(E){ut(l,l.return,E)}else{var v=yo(l.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(l,l.return,E)}}d&64&&Vw(l),d&512&&Il(l,l.return);break;case 3:if(qa(a,l),d&64&&(a=l.updateQueue,a!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Lx(a,o)}catch(E){ut(l,l.return,E)}}break;case 27:o===null&&d&4&&Qw(l);case 26:case 5:qa(a,l),o===null&&d&4&&Xw(l),d&512&&Il(l,l.return);break;case 12:qa(a,l);break;case 31:qa(a,l),d&4&&nj(a,l);break;case 13:qa(a,l),d&4&&aj(a,l),d&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=iR.bind(null,l),ER(a,l))));break;case 22:if(d=l.memoizedState!==null||Ma,!d){o=o!==null&&o.memoizedState!==null||rr,v=Ma;var b=rr;Ma=d,(rr=o)&&!b?za(a,l,(l.subtreeFlags&8772)!==0):qa(a,l),Ma=v,rr=b}break;case 30:break;default:qa(a,l)}}function tj(a){var o=a.alternate;o!==null&&(a.alternate=null,tj(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Qo(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var At=null,Kr=!1;function Ra(a,o,l){for(l=l.child;l!==null;)rj(a,o,l),l=l.sibling}function rj(a,o,l){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Qt,l)}catch{}switch(l.tag){case 26:rr||ua(l,o),Ra(a,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:rr||ua(l,o);var d=At,v=Kr;Ti(l.type)&&(At=l.stateNode,Kr=!1),Ra(a,o,l),Vl(l.stateNode),At=d,Kr=v;break;case 5:rr||ua(l,o);case 6:if(d=At,v=Kr,At=null,Ra(a,o,l),At=d,Kr=v,At!==null)if(Kr)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(l.stateNode)}catch(b){ut(l,o,b)}else try{At.removeChild(l.stateNode)}catch(b){ut(l,o,b)}break;case 18:At!==null&&(Kr?(a=At,Vj(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),Ds(a)):Vj(At,l.stateNode));break;case 4:d=At,v=Kr,At=l.stateNode.containerInfo,Kr=!0,Ra(a,o,l),At=d,Kr=v;break;case 0:case 11:case 14:case 15:Ei(2,l,o),rr||Ei(4,l,o),Ra(a,o,l);break;case 1:rr||(ua(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Ww(l,o,d)),Ra(a,o,l);break;case 21:Ra(a,o,l);break;case 22:rr=(d=rr)||l.memoizedState!==null,Ra(a,o,l),rr=d;break;default:Ra(a,o,l)}}function nj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Ds(a)}catch(l){ut(o,o.return,l)}}}function aj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Ds(a)}catch(l){ut(o,o.return,l)}}function Z2(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new Jw),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new Jw),o;default:throw Error(n(435,a.tag))}}function Qu(a,o){var l=Z2(a);o.forEach(function(d){if(!l.has(d)){l.add(d);var v=oR.bind(null,a,d);d.then(v,v)}})}function Yr(a,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var v=l[d],b=a,E=o,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(Ti(N.type)){At=N.stateNode,Kr=!1;break e}break;case 5:At=N.stateNode,Kr=!1;break e;case 3:case 4:At=N.stateNode.containerInfo,Kr=!0;break e}N=N.return}if(At===null)throw Error(n(160));rj(b,E,v),At=null,Kr=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)ij(o,a),o=o.sibling}var Vn=null;function ij(a,o){var l=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Yr(o,a),Gr(a),d&4&&(Ei(3,a,a.return),Ll(3,a),Ei(5,a,a.return));break;case 1:Yr(o,a),Gr(a),d&512&&(rr||l===null||ua(l,l.return)),d&64&&Ma&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var v=Vn;if(Yr(o,a),Gr(a),d&512&&(rr||l===null||ua(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=a.memoizedState,l===null)if(d===null)if(a.stateNode===null){e:{d=a.type,l=a.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Zo]||b[Bt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(d),v.head.insertBefore(b,v.querySelector("head > title"))),Cr(b,d,l),b[Bt]=a,le(b),d=b;break e;case"link":var E=iS("link","href",v).get(d+(l.href||""));if(E){for(var N=0;N<E.length;N++)if(b=E[N],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(N,1);break t}}b=v.createElement(d),Cr(b,d,l),v.head.appendChild(b);break;case"meta":if(E=iS("meta","content",v).get(d+(l.content||""))){for(N=0;N<E.length;N++)if(b=E[N],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(N,1);break t}}b=v.createElement(d),Cr(b,d,l),v.head.appendChild(b);break;default:throw Error(n(468,d))}b[Bt]=a,le(b),d=b}a.stateNode=d}else oS(v,a.type,a.stateNode);else a.stateNode=aS(v,d,a.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?oS(v,a.type,a.stateNode):aS(v,d,a.memoizedProps)):d===null&&a.stateNode!==null&&Ap(a,a.memoizedProps,l.memoizedProps)}break;case 27:Yr(o,a),Gr(a),d&512&&(rr||l===null||ua(l,l.return)),l!==null&&d&4&&Ap(a,a.memoizedProps,l.memoizedProps);break;case 5:if(Yr(o,a),Gr(a),d&512&&(rr||l===null||ua(l,l.return)),a.flags&32){v=a.stateNode;try{es(v,"")}catch(Ae){ut(a,a.return,Ae)}}d&4&&a.stateNode!=null&&(v=a.memoizedProps,Ap(a,v,l!==null?l.memoizedProps:v)),d&1024&&(Dp=!0);break;case 6:if(Yr(o,a),Gr(a),d&4){if(a.stateNode===null)throw Error(n(162));d=a.memoizedProps,l=a.stateNode;try{l.nodeValue=d}catch(Ae){ut(a,a.return,Ae)}}break;case 3:if(hd=null,v=Vn,Vn=fd(o.containerInfo),Yr(o,a),Vn=v,Gr(a),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Ds(o.containerInfo)}catch(Ae){ut(a,a.return,Ae)}Dp&&(Dp=!1,oj(a));break;case 4:d=Vn,Vn=fd(a.stateNode.containerInfo),Yr(o,a),Gr(a),Vn=d;break;case 12:Yr(o,a),Gr(a);break;case 31:Yr(o,a),Gr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Qu(a,d)));break;case 13:Yr(o,a),Gr(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ed=Ye()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Qu(a,d)));break;case 22:v=a.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,G=Ma,oe=rr;if(Ma=G||v,rr=oe||z,Yr(o,a),rr=oe,Ma=G,Gr(a),d&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(l===null||z||Ma||rr||bo(a)),l=null,o=a;;){if(o.tag===5||o.tag===26){if(l===null){z=l=o;try{if(b=z.stateNode,v)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=z.stateNode;var de=z.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ae){ut(z,z.return,Ae)}}}else if(o.tag===6){if(l===null){z=o;try{z.stateNode.nodeValue=v?"":z.memoizedProps}catch(Ae){ut(z,z.return,Ae)}}}else if(o.tag===18){if(l===null){z=o;try{var te=z.stateNode;v?Wj(te,!0):Wj(z.stateNode,!1)}catch(Ae){ut(z,z.return,Ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Qu(a,l))));break;case 19:Yr(o,a),Gr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Qu(a,d)));break;case 30:break;case 21:break;default:Yr(o,a),Gr(a)}}function Gr(a){var o=a.flags;if(o&2){try{for(var l,d=a.return;d!==null;){if(Zw(d)){l=d;break}d=d.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var v=l.stateNode,b=Np(a);Zu(a,b,v);break;case 5:var E=l.stateNode;l.flags&32&&(es(E,""),l.flags&=-33);var N=Np(a);Zu(a,N,E);break;case 3:case 4:var z=l.stateNode.containerInfo,G=Np(a);kp(a,G,z);break;default:throw Error(n(161))}}catch(oe){ut(a,a.return,oe)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function oj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;oj(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function qa(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ej(a,o.alternate,o),o=o.sibling}function bo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Ei(4,o,o.return),bo(o);break;case 1:ua(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Ww(o,o.return,l),bo(o);break;case 27:Vl(o.stateNode);case 26:case 5:ua(o,o.return),bo(o);break;case 22:o.memoizedState===null&&bo(o);break;case 30:bo(o);break;default:bo(o)}a=a.sibling}}function za(a,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,v=a,b=o,E=b.flags;switch(b.tag){case 0:case 11:case 15:za(v,b,l),Ll(4,b);break;case 1:if(za(v,b,l),d=b,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(G){ut(d,d.return,G)}if(d=b,v=d.updateQueue,v!==null){var N=d.stateNode;try{var z=v.shared.hiddenCallbacks;if(z!==null)for(v.shared.hiddenCallbacks=null,v=0;v<z.length;v++)zx(z[v],N)}catch(G){ut(d,d.return,G)}}l&&E&64&&Vw(b),Il(b,b.return);break;case 27:Qw(b);case 26:case 5:za(v,b,l),l&&d===null&&E&4&&Xw(b),Il(b,b.return);break;case 12:za(v,b,l);break;case 31:za(v,b,l),l&&E&4&&nj(v,b);break;case 13:za(v,b,l),l&&E&4&&aj(v,b);break;case 22:b.memoizedState===null&&za(v,b,l),Il(b,b.return);break;case 30:break;default:za(v,b,l)}o=o.sibling}}function Tp(a,o){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&El(l))}function Pp(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&El(a))}function Wn(a,o,l,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)sj(a,o,l,d),o=o.sibling}function sj(a,o,l,d){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Wn(a,o,l,d),v&2048&&Ll(9,o);break;case 1:Wn(a,o,l,d);break;case 3:Wn(a,o,l,d),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&El(a)));break;case 12:if(v&2048){Wn(a,o,l,d),a=o.stateNode;try{var b=o.memoizedProps,E=b.id,N=b.onPostCommit;typeof N=="function"&&N(E,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(z){ut(o,o.return,z)}}else Wn(a,o,l,d);break;case 31:Wn(a,o,l,d);break;case 13:Wn(a,o,l,d);break;case 23:break;case 22:b=o.stateNode,E=o.alternate,o.memoizedState!==null?b._visibility&2?Wn(a,o,l,d):Ul(a,o):b._visibility&2?Wn(a,o,l,d):(b._visibility|=2,_s(a,o,l,d,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Tp(E,o);break;case 24:Wn(a,o,l,d),v&2048&&Pp(o.alternate,o);break;default:Wn(a,o,l,d)}}function _s(a,o,l,d,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=a,E=o,N=l,z=d,G=E.flags;switch(E.tag){case 0:case 11:case 15:_s(b,E,N,z,v),Ll(8,E);break;case 23:break;case 22:var oe=E.stateNode;E.memoizedState!==null?oe._visibility&2?_s(b,E,N,z,v):Ul(b,E):(oe._visibility|=2,_s(b,E,N,z,v)),v&&G&2048&&Tp(E.alternate,E);break;case 24:_s(b,E,N,z,v),v&&G&2048&&Pp(E.alternate,E);break;default:_s(b,E,N,z,v)}o=o.sibling}}function Ul(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=a,d=o,v=d.flags;switch(d.tag){case 22:Ul(l,d),v&2048&&Tp(d.alternate,d);break;case 24:Ul(l,d),v&2048&&Pp(d.alternate,d);break;default:Ul(l,d)}o=o.sibling}}var Bl=8192;function xs(a,o,l){if(a.subtreeFlags&Bl)for(a=a.child;a!==null;)lj(a,o,l),a=a.sibling}function lj(a,o,l){switch(a.tag){case 26:xs(a,o,l),a.flags&Bl&&a.memoizedState!==null&&zR(l,Vn,a.memoizedState,a.memoizedProps);break;case 5:xs(a,o,l);break;case 3:case 4:var d=Vn;Vn=fd(a.stateNode.containerInfo),xs(a,o,l),Vn=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=Bl,Bl=16777216,xs(a,o,l),Bl=d):xs(a,o,l));break;default:xs(a,o,l)}}function cj(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function $l(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];pr=d,dj(d,a)}cj(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)uj(a),a=a.sibling}function uj(a){switch(a.tag){case 0:case 11:case 15:$l(a),a.flags&2048&&Ei(9,a,a.return);break;case 3:$l(a);break;case 12:$l(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Ju(a)):$l(a);break;default:$l(a)}}function Ju(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];pr=d,dj(d,a)}cj(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Ei(8,o,o.return),Ju(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Ju(o));break;default:Ju(o)}a=a.sibling}}function dj(a,o){for(;pr!==null;){var l=pr;switch(l.tag){case 0:case 11:case 15:Ei(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:El(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,pr=d;else e:for(l=a;pr!==null;){d=pr;var v=d.sibling,b=d.return;if(tj(d),d===l){pr=null;break e}if(v!==null){v.return=b,pr=v;break e}pr=b}}}var Q2={getCacheForType:function(a){var o=Er(Jt),l=o.data.get(a);return l===void 0&&(l=a(),o.data.set(a,l)),l},cacheSignal:function(){return Er(Jt).controller.signal}},J2=typeof WeakMap=="function"?WeakMap:Map,ot=0,bt=null,Ve=null,Xe=0,ct=0,sn=null,Oi=!1,ws=!1,Mp=!1,La=0,Ht=0,Ci=0,_o=0,Rp=0,ln=0,js=0,Hl=null,Vr=null,qp=!1,ed=0,fj=0,td=1/0,rd=null,Ai=null,lr=0,Ni=null,Ss=null,Ia=0,zp=0,Lp=null,mj=null,Fl=0,Ip=null;function cn(){return(ot&2)!==0&&Xe!==0?Xe&-Xe:R.T!==null?Kp():eo()}function hj(){if(ln===0)if((Xe&536870912)===0||Qe){var a=fi;fi<<=1,(fi&3932160)===0&&(fi=262144),ln=a}else ln=536870912;return a=an.current,a!==null&&(a.flags|=32),ln}function Wr(a,o,l){(a===bt&&(ct===2||ct===9)||a.cancelPendingCommit!==null)&&(Es(a,0),ki(a,Xe,ln,!1)),ja(a,l),((ot&2)===0||a!==bt)&&(a===bt&&((ot&2)===0&&(_o|=l),Ht===4&&ki(a,Xe,ln,!1)),da(a))}function pj(a,o,l){if((ot&6)!==0)throw Error(n(327));var d=!l&&(o&127)===0&&(o&a.expiredLanes)===0||wa(a,o),v=d?rR(a,o):Bp(a,o,!0),b=d;do{if(v===0){ws&&!d&&ki(a,o,0,!1);break}else{if(l=a.current.alternate,b&&!eR(l)){v=Bp(a,o,!1),b=!1;continue}if(v===2){if(b=o,a.errorRecoveryDisabledLanes&b)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var N=a;v=Hl;var z=N.current.memoizedState.isDehydrated;if(z&&(Es(N,E).flags|=256),E=Bp(N,E,!1),E!==2){if(Mp&&!z){N.errorRecoveryDisabledLanes|=b,_o|=b,v=4;break e}b=Vr,Vr=v,b!==null&&(Vr===null?Vr=b:Vr.push.apply(Vr,b))}v=E}if(b=!1,v!==2)continue}}if(v===1){Es(a,0),ki(a,o,0,!0);break}e:{switch(d=a,b=v,b){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:ki(d,o,ln,!Oi);break e;case 2:Vr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(v=ed+300-Ye(),10<v)){if(ki(d,o,ln,!Oi),mi(d,0,!0)!==0)break e;Ia=o,d.timeoutHandle=Yj(gj.bind(null,d,l,Vr,rd,qp,o,ln,_o,js,Oi,b,"Throttled",-0,0),v);break e}gj(d,l,Vr,rd,qp,o,ln,_o,js,Oi,b,null,-0,0)}}break}while(!0);da(a)}function gj(a,o,l,d,v,b,E,N,z,G,oe,de,Z,te){if(a.timeoutHandle=-1,de=o.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sa},lj(o,b,de);var Ae=(b&62914560)===b?ed-Ye():(b&4194048)===b?fj-Ye():0;if(Ae=LR(de,Ae),Ae!==null){Ia=b,a.cancelPendingCommit=Ae(Sj.bind(null,a,o,b,l,d,v,E,N,z,oe,de,null,Z,te)),ki(a,b,E,!G);return}}Sj(a,o,b,l,d,v,E,N,z)}function eR(a){for(var o=a;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var v=l[d],b=v.getSnapshot;v=v.value;try{if(!rn(b(),v))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ki(a,o,l,d){o&=~Rp,o&=~_o,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var v=o;0<v;){var b=31-ft(v),E=1<<b;d[b]=-1,v&=~E}l!==0&&fu(a,l,o)}function nd(){return(ot&6)===0?(Kl(0),!1):!0}function Up(){if(Ve!==null){if(ct===0)var a=Ve.return;else a=Ve,Aa=uo=null,rp(a),ps=null,Cl=0,a=Ve;for(;a!==null;)Gw(a.alternate,a),a=a.return;Ve=null}}function Es(a,o){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,_R(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Ia=0,Up(),bt=a,Ve=l=Oa(a.current,null),Xe=o,ct=0,sn=null,Oi=!1,ws=wa(a,o),Mp=!1,js=ln=Rp=_o=Ci=Ht=0,Vr=Hl=null,qp=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var v=31-ft(d),b=1<<v;o|=a[v],d&=~b}return La=o,Su(),l}function vj(a,o){Be=null,R.H=Rl,o===hs||o===Tu?(o=Px(),ct=3):o===Fh?(o=Px(),ct=4):ct=o===yp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,sn=o,Ve===null&&(Ht=1,Yu(a,On(o,a.current)))}function yj(){var a=an.current;return a===null?!0:(Xe&4194048)===Xe?kn===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?a===kn:!1}function bj(){var a=R.H;return R.H=Rl,a===null?Rl:a}function _j(){var a=R.A;return R.A=Q2,a}function ad(){Ht=4,Oi||(Xe&4194048)!==Xe&&an.current!==null||(ws=!0),(Ci&134217727)===0&&(_o&134217727)===0||bt===null||ki(bt,Xe,ln,!1)}function Bp(a,o,l){var d=ot;ot|=2;var v=bj(),b=_j();(bt!==a||Xe!==o)&&(rd=null,Es(a,o)),o=!1;var E=Ht;e:do try{if(ct!==0&&Ve!==null){var N=Ve,z=sn;switch(ct){case 8:Up(),E=6;break e;case 3:case 2:case 9:case 6:an.current===null&&(o=!0);var G=ct;if(ct=0,sn=null,Os(a,N,z,G),l&&ws){E=0;break e}break;default:G=ct,ct=0,sn=null,Os(a,N,z,G)}}tR(),E=Ht;break}catch(oe){vj(a,oe)}while(!0);return o&&a.shellSuspendCounter++,Aa=uo=null,ot=d,R.H=v,R.A=b,Ve===null&&(bt=null,Xe=0,Su()),E}function tR(){for(;Ve!==null;)xj(Ve)}function rR(a,o){var l=ot;ot|=2;var d=bj(),v=_j();bt!==a||Xe!==o?(rd=null,td=Ye()+500,Es(a,o)):ws=wa(a,o);e:do try{if(ct!==0&&Ve!==null){o=Ve;var b=sn;t:switch(ct){case 1:ct=0,sn=null,Os(a,o,b,1);break;case 2:case 9:if(Dx(b)){ct=0,sn=null,wj(o);break}o=function(){ct!==2&&ct!==9||bt!==a||(ct=7),da(a)},b.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Dx(b)?(ct=0,sn=null,wj(o)):(ct=0,sn=null,Os(a,o,b,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var N=Ve;if(E?sS(E):N.stateNode.complete){ct=0,sn=null;var z=N.sibling;if(z!==null)Ve=z;else{var G=N.return;G!==null?(Ve=G,id(G)):Ve=null}break t}}ct=0,sn=null,Os(a,o,b,5);break;case 6:ct=0,sn=null,Os(a,o,b,6);break;case 8:Up(),Ht=6;break e;default:throw Error(n(462))}}nR();break}catch(oe){vj(a,oe)}while(!0);return Aa=uo=null,R.H=d,R.A=v,ot=l,Ve!==null?0:(bt=null,Xe=0,Su(),Ht)}function nR(){for(;Ve!==null&&!Br();)xj(Ve)}function xj(a){var o=Kw(a.alternate,a,La);a.memoizedProps=a.pendingProps,o===null?id(a):Ve=o}function wj(a){var o=a,l=o.alternate;switch(o.tag){case 15:case 0:o=Iw(l,o,o.pendingProps,o.type,void 0,Xe);break;case 11:o=Iw(l,o,o.pendingProps,o.type.render,o.ref,Xe);break;case 5:rp(o);default:Gw(l,o),o=Ve=_x(o,La),o=Kw(l,o,La)}a.memoizedProps=a.pendingProps,o===null?id(a):Ve=o}function Os(a,o,l,d){Aa=uo=null,rp(o),ps=null,Cl=0;var v=o.return;try{if(K2(a,v,o,l,Xe)){Ht=1,Yu(a,On(l,a.current)),Ve=null;return}}catch(b){if(v!==null)throw Ve=v,b;Ht=1,Yu(a,On(l,a.current)),Ve=null;return}o.flags&32768?(Qe||d===1?a=!0:ws||(Xe&536870912)!==0?a=!1:(Oi=a=!0,(d===2||d===9||d===3||d===6)&&(d=an.current,d!==null&&d.tag===13&&(d.flags|=16384))),jj(o,a)):id(o)}function id(a){var o=a;do{if((o.flags&32768)!==0){jj(o,Oi);return}a=o.return;var l=V2(o.alternate,o,La);if(l!==null){Ve=l;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=a}while(o!==null);Ht===0&&(Ht=5)}function jj(a,o){do{var l=W2(a.alternate,a);if(l!==null){l.flags&=32767,Ve=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(a=a.sibling,a!==null)){Ve=a;return}Ve=a=l}while(a!==null);Ht=6,Ve=null}function Sj(a,o,l,d,v,b,E,N,z){a.cancelPendingCommit=null;do od();while(lr!==0);if((ot&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(b=o.lanes|o.childLanes,b|=Nh,cl(a,l,b,E,N,z),a===bt&&(Ve=bt=null,Xe=0),Ss=o,Ni=a,Ia=l,zp=b,Lp=v,mj=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,sR(jr,function(){return Nj(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=R.T,R.T=null,v=U.p,U.p=2,E=ot,ot|=4;try{X2(a,o,l)}finally{ot=E,U.p=v,R.T=d}}lr=1,Ej(),Oj(),Cj()}}function Ej(){if(lr===1){lr=0;var a=Ni,o=Ss,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var d=U.p;U.p=2;var v=ot;ot|=4;try{ij(o,a);var b=Jp,E=dx(a.containerInfo),N=b.focusedElem,z=b.selectionRange;if(E!==N&&N&&N.ownerDocument&&ux(N.ownerDocument.documentElement,N)){if(z!==null&&Sh(N)){var G=z.start,oe=z.end;if(oe===void 0&&(oe=G),"selectionStart"in N)N.selectionStart=G,N.selectionEnd=Math.min(oe,N.value.length);else{var de=N.ownerDocument||document,Z=de&&de.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),Ae=N.textContent.length,Le=Math.min(z.start,Ae),pt=z.end===void 0?Le:Math.min(z.end,Ae);!te.extend&&Le>pt&&(E=pt,pt=Le,Le=E);var F=cx(N,Le),$=cx(N,pt);if(F&&$&&(te.rangeCount!==1||te.anchorNode!==F.node||te.anchorOffset!==F.offset||te.focusNode!==$.node||te.focusOffset!==$.offset)){var Y=de.createRange();Y.setStart(F.node,F.offset),te.removeAllRanges(),Le>pt?(te.addRange(Y),te.extend($.node,$.offset)):(Y.setEnd($.node,$.offset),te.addRange(Y))}}}}for(de=[],te=N;te=te.parentNode;)te.nodeType===1&&de.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<de.length;N++){var ue=de[N];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}yd=!!Qp,Jp=Qp=null}finally{ot=v,U.p=d,R.T=l}}a.current=o,lr=2}}function Oj(){if(lr===2){lr=0;var a=Ni,o=Ss,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var d=U.p;U.p=2;var v=ot;ot|=4;try{ej(a,o.alternate,o)}finally{ot=v,U.p=d,R.T=l}}lr=3}}function Cj(){if(lr===4||lr===3){lr=0,xt();var a=Ni,o=Ss,l=Ia,d=mj;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?lr=5:(lr=0,Ss=Ni=null,Aj(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Ai=null),dl(l),o=o.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Qt,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=R.T,v=U.p,U.p=2,R.T=null;try{for(var b=a.onRecoverableError,E=0;E<d.length;E++){var N=d[E];b(N.value,{componentStack:N.stack})}}finally{R.T=o,U.p=v}}(Ia&3)!==0&&od(),da(a),v=a.pendingLanes,(l&261930)!==0&&(v&42)!==0?a===Ip?Fl++:(Fl=0,Ip=a):Fl=0,Kl(0)}}function Aj(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,El(o)))}function od(){return Ej(),Oj(),Cj(),Nj()}function Nj(){if(lr!==5)return!1;var a=Ni,o=zp;zp=0;var l=dl(Ia),d=R.T,v=U.p;try{U.p=32>l?32:l,R.T=null,l=Lp,Lp=null;var b=Ni,E=Ia;if(lr=0,Ss=Ni=null,Ia=0,(ot&6)!==0)throw Error(n(331));var N=ot;if(ot|=4,uj(b.current),sj(b,b.current,E,l),ot=N,Kl(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Qt,b)}catch{}return!0}finally{U.p=v,R.T=d,Aj(a,o)}}function kj(a,o,l){o=On(l,o),o=vp(a.stateNode,o,2),a=wi(a,o,2),a!==null&&(ja(a,2),da(a))}function ut(a,o,l){if(a.tag===3)kj(a,a,l);else for(;o!==null;){if(o.tag===3){kj(o,a,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ai===null||!Ai.has(d))){a=On(l,a),l=Dw(2),d=wi(o,l,2),d!==null&&(Tw(l,d,o,a),ja(d,2),da(d));break}}o=o.return}}function $p(a,o,l){var d=a.pingCache;if(d===null){d=a.pingCache=new J2;var v=new Set;d.set(o,v)}else v=d.get(o),v===void 0&&(v=new Set,d.set(o,v));v.has(l)||(Mp=!0,v.add(l),a=aR.bind(null,a,o,l),o.then(a,a))}function aR(a,o,l){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,bt===a&&(Xe&l)===l&&(Ht===4||Ht===3&&(Xe&62914560)===Xe&&300>Ye()-ed?(ot&2)===0&&Es(a,0):Rp|=l,js===Xe&&(js=0)),da(a)}function Dj(a,o){o===0&&(o=ye()),a=so(a,o),a!==null&&(ja(a,o),da(a))}function iR(a){var o=a.memoizedState,l=0;o!==null&&(l=o.retryLane),Dj(a,l)}function oR(a,o){var l=0;switch(a.tag){case 31:case 13:var d=a.stateNode,v=a.memoizedState;v!==null&&(l=v.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(o),Dj(a,l)}function sR(a,o){return yt(a,o)}var sd=null,Cs=null,Hp=!1,ld=!1,Fp=!1,Di=0;function da(a){a!==Cs&&a.next===null&&(Cs===null?sd=Cs=a:Cs=Cs.next=a),ld=!0,Hp||(Hp=!0,cR())}function Kl(a,o){if(!Fp&&ld){Fp=!0;do for(var l=!1,d=sd;d!==null;){if(a!==0){var v=d.pendingLanes;if(v===0)var b=0;else{var E=d.suspendedLanes,N=d.pingedLanes;b=(1<<31-ft(42|a)+1)-1,b&=v&~(E&~N),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,Rj(d,b))}else b=Xe,b=mi(d,d===bt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||wa(d,b)||(l=!0,Rj(d,b));d=d.next}while(l);Fp=!1}}function lR(){Tj()}function Tj(){ld=Hp=!1;var a=0;Di!==0&&bR()&&(a=Di);for(var o=Ye(),l=null,d=sd;d!==null;){var v=d.next,b=Pj(d,o);b===0?(d.next=null,l===null?sd=v:l.next=v,v===null&&(Cs=l)):(l=d,(a!==0||(b&3)!==0)&&(ld=!0)),d=v}lr!==0&&lr!==5||Kl(a),Di!==0&&(Di=0)}function Pj(a,o){for(var l=a.suspendedLanes,d=a.pingedLanes,v=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var E=31-ft(b),N=1<<E,z=v[E];z===-1?((N&l)===0||(N&d)!==0)&&(v[E]=ll(N,o)):z<=o&&(a.expiredLanes|=N),b&=~N}if(o=bt,l=Xe,l=mi(a,a===o?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,l===0||a===o&&(ct===2||ct===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Ct(d),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||wa(a,l)){if(o=l&-l,o===a.callbackPriority)return o;switch(d!==null&&Ct(d),dl(l)){case 2:case 8:l=Hr;break;case 32:l=jr;break;case 268435456:l=he;break;default:l=jr}return d=Mj.bind(null,a),l=yt(l,d),a.callbackPriority=o,a.callbackNode=l,o}return d!==null&&d!==null&&Ct(d),a.callbackPriority=2,a.callbackNode=null,2}function Mj(a,o){if(lr!==0&&lr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(od()&&a.callbackNode!==l)return null;var d=Xe;return d=mi(a,a===bt?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(pj(a,d,o),Pj(a,Ye()),a.callbackNode!=null&&a.callbackNode===l?Mj.bind(null,a):null)}function Rj(a,o){if(od())return null;pj(a,o,!0)}function cR(){xR(function(){(ot&6)!==0?yt(_n,lR):Tj()})}function Kp(){if(Di===0){var a=fs;a===0&&(a=di,di<<=1,(di&261888)===0&&(di=256)),Di=a}return Di}function qj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:gu(""+a)}function zj(a,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,a.id&&l.setAttribute("form",a.id),o.parentNode.insertBefore(l,o),a=new FormData(a),l.parentNode.removeChild(l),a}function uR(a,o,l,d,v){if(o==="submit"&&l&&l.stateNode===v){var b=qj((v[sr]||null).action),E=d.submitter;E&&(o=(o=E[sr]||null)?qj(o.formAction):E.getAttribute("formAction"),o!==null&&(b=o,E=null));var N=new _u("action","action",null,d,v);a.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Di!==0){var z=E?zj(v,E):new FormData(v);dp(l,{pending:!0,data:z,method:v.method,action:b},null,z)}}else typeof b=="function"&&(N.preventDefault(),z=E?zj(v,E):new FormData(v),dp(l,{pending:!0,data:z,method:v.method,action:b},b,z))},currentTarget:v}]})}}for(var Yp=0;Yp<Ah.length;Yp++){var Gp=Ah[Yp],dR=Gp.toLowerCase(),fR=Gp[0].toUpperCase()+Gp.slice(1);Gn(dR,"on"+fR)}Gn(hx,"onAnimationEnd"),Gn(px,"onAnimationIteration"),Gn(gx,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(A2,"onTransitionRun"),Gn(N2,"onTransitionStart"),Gn(k2,"onTransitionCancel"),Gn(vx,"onTransitionEnd"),Se("onMouseEnter",["mouseout","mouseover"]),Se("onMouseLeave",["mouseout","mouseover"]),Se("onPointerEnter",["pointerout","pointerover"]),Se("onPointerLeave",["pointerout","pointerover"]),ne("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ne("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ne("onBeforeInput",["compositionend","keypress","textInput","paste"]),ne("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ne("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ne("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function Lj(a,o){o=(o&4)!==0;for(var l=0;l<a.length;l++){var d=a[l],v=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var E=d.length-1;0<=E;E--){var N=d[E],z=N.instance,G=N.currentTarget;if(N=N.listener,z!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=G;try{b(v)}catch(oe){ju(oe)}v.currentTarget=null,b=z}else for(E=0;E<d.length;E++){if(N=d[E],z=N.instance,G=N.currentTarget,N=N.listener,z!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=G;try{b(v)}catch(oe){ju(oe)}v.currentTarget=null,b=z}}}}function We(a,o){var l=o[ro];l===void 0&&(l=o[ro]=new Set);var d=a+"__bubble";l.has(d)||(Ij(o,a,2,!1),l.add(d))}function Vp(a,o,l){var d=0;o&&(d|=4),Ij(l,a,d,o)}var cd="_reactListening"+Math.random().toString(36).slice(2);function Wp(a){if(!a[cd]){a[cd]=!0,me.forEach(function(l){l!=="selectionchange"&&(mR.has(l)||Vp(l,!1,a),Vp(l,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[cd]||(o[cd]=!0,Vp("selectionchange",!1,o))}}function Ij(a,o,l,d){switch(hS(o)){case 2:var v=BR;break;case 8:v=$R;break;default:v=ug}l=v.bind(null,o,l,a),v=void 0,!ph||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),d?v!==void 0?a.addEventListener(o,l,{capture:!0,passive:v}):a.addEventListener(o,l,!0):v!==void 0?a.addEventListener(o,l,{passive:v}):a.addEventListener(o,l,!1)}function Xp(a,o,l,d,v){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var N=d.stateNode.containerInfo;if(N===v)break;if(E===4)for(E=d.return;E!==null;){var z=E.tag;if((z===3||z===4)&&E.stateNode.containerInfo===v)return;E=E.return}for(;N!==null;){if(E=Kn(N),E===null)return;if(z=E.tag,z===5||z===6||z===26||z===27){d=b=E;continue e}N=N.parentNode}}d=d.return}F_(function(){var G=b,oe=mh(l),de=[];e:{var Z=yx.get(a);if(Z!==void 0){var te=_u,Ae=a;switch(a){case"keypress":if(yu(l)===0)break e;case"keydown":case"keyup":te=o2;break;case"focusin":Ae="focus",te=bh;break;case"focusout":Ae="blur",te=bh;break;case"beforeblur":case"afterblur":te=bh;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=G_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=VM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=c2;break;case hx:case px:case gx:te=ZM;break;case vx:te=d2;break;case"scroll":case"scrollend":te=YM;break;case"wheel":te=m2;break;case"copy":case"cut":case"paste":te=JM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=W_;break;case"toggle":case"beforetoggle":te=p2}var Le=(o&4)!==0,pt=!Le&&(a==="scroll"||a==="scrollend"),F=Le?Z!==null?Z+"Capture":null:Z;Le=[];for(var $=G,Y;$!==null;){var ue=$;if(Y=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Y===null||F===null||(ue=hl($,F),ue!=null&&Le.push(Gl($,ue,Y))),pt)break;$=$.return}0<Le.length&&(Z=new te(Z,Ae,null,l,oe),de.push({event:Z,listeners:Le}))}}if((o&7)===0){e:{if(Z=a==="mouseover"||a==="pointerover",te=a==="mouseout"||a==="pointerout",Z&&l!==fh&&(Ae=l.relatedTarget||l.fromElement)&&(Kn(Ae)||Ae[sa]))break e;if((te||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(Ae=l.relatedTarget||l.toElement,te=G,Ae=Ae?Kn(Ae):null,Ae!==null&&(pt=s(Ae),Le=Ae.tag,Ae!==pt||Le!==5&&Le!==27&&Le!==6)&&(Ae=null)):(te=null,Ae=G),te!==Ae)){if(Le=G_,ue="onMouseLeave",F="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(Le=W_,ue="onPointerLeave",F="onPointerEnter",$="pointer"),pt=te==null?Z:no(te),Y=Ae==null?Z:no(Ae),Z=new Le(ue,$+"leave",te,l,oe),Z.target=pt,Z.relatedTarget=Y,ue=null,Kn(oe)===G&&(Le=new Le(F,$+"enter",Ae,l,oe),Le.target=Y,Le.relatedTarget=pt,ue=Le),pt=ue,te&&Ae)t:{for(Le=hR,F=te,$=Ae,Y=0,ue=F;ue;ue=Le(ue))Y++;ue=0;for(var qe=$;qe;qe=Le(qe))ue++;for(;0<Y-ue;)F=Le(F),Y--;for(;0<ue-Y;)$=Le($),ue--;for(;Y--;){if(F===$||$!==null&&F===$.alternate){Le=F;break t}F=Le(F),$=Le($)}Le=null}else Le=null;te!==null&&Uj(de,Z,te,Le,!1),Ae!==null&&pt!==null&&Uj(de,pt,Ae,Le,!0)}}e:{if(Z=G?no(G):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var rt=nx;else if(tx(Z))if(ax)rt=E2;else{rt=j2;var Pe=w2}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?G&&dh(G.elementType)&&(rt=nx):rt=S2;if(rt&&(rt=rt(a,G))){rx(de,rt,l,oe);break e}Pe&&Pe(a,Z,G),a==="focusout"&&G&&Z.type==="number"&&G.memoizedProps.value!=null&&uh(Z,"number",Z.value)}switch(Pe=G?no(G):window,a){case"focusin":(tx(Pe)||Pe.contentEditable==="true")&&(as=Pe,Eh=G,wl=null);break;case"focusout":wl=Eh=as=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,fx(de,l,oe);break;case"selectionchange":if(C2)break;case"keydown":case"keyup":fx(de,l,oe)}var $e;if(xh)e:{switch(a){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else ns?J_(a,l)&&(Ze="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(X_&&l.locale!=="ko"&&(ns||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&ns&&($e=K_()):(pi=oe,gh="value"in pi?pi.value:pi.textContent,ns=!0)),Pe=ud(G,Ze),0<Pe.length&&(Ze=new V_(Ze,a,null,l,oe),de.push({event:Ze,listeners:Pe}),$e?Ze.data=$e:($e=ex(l),$e!==null&&(Ze.data=$e)))),($e=v2?y2(a,l):b2(a,l))&&(Ze=ud(G,"onBeforeInput"),0<Ze.length&&(Pe=new V_("onBeforeInput","beforeinput",null,l,oe),de.push({event:Pe,listeners:Ze}),Pe.data=$e)),uR(de,a,G,l,oe)}Lj(de,o)})}function Gl(a,o,l){return{instance:a,listener:o,currentTarget:l}}function ud(a,o){for(var l=o+"Capture",d=[];a!==null;){var v=a,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=hl(a,l),v!=null&&d.unshift(Gl(a,v,b)),v=hl(a,o),v!=null&&d.push(Gl(a,v,b))),a.tag===3)return d;a=a.return}return[]}function hR(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Uj(a,o,l,d,v){for(var b=o._reactName,E=[];l!==null&&l!==d;){var N=l,z=N.alternate,G=N.stateNode;if(N=N.tag,z!==null&&z===d)break;N!==5&&N!==26&&N!==27||G===null||(z=G,v?(G=hl(l,b),G!=null&&E.unshift(Gl(l,G,z))):v||(G=hl(l,b),G!=null&&E.push(Gl(l,G,z)))),l=l.return}E.length!==0&&a.push({event:o,listeners:E})}var pR=/\r\n?/g,gR=/\u0000|\uFFFD/g;function Bj(a){return(typeof a=="string"?a:""+a).replace(pR,`
`).replace(gR,"")}function $j(a,o){return o=Bj(o),Bj(a)===o}function ht(a,o,l,d,v,b){switch(l){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||es(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&es(a,""+d);break;case"className":Gt(a,"class",d);break;case"tabIndex":Gt(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Gt(a,l,d);break;case"style":$_(a,d,b);break;case"data":if(o!=="object"){Gt(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||l!=="href")){a.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(l);break}d=gu(""+d),a.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(o!=="input"&&ht(a,o,"name",v.name,v,null),ht(a,o,"formEncType",v.formEncType,v,null),ht(a,o,"formMethod",v.formMethod,v,null),ht(a,o,"formTarget",v.formTarget,v,null)):(ht(a,o,"encType",v.encType,v,null),ht(a,o,"method",v.method,v,null),ht(a,o,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(l);break}d=gu(""+d),a.setAttribute(l,d);break;case"onClick":d!=null&&(a.onclick=Sa);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}l=gu(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,""+d):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":d===!0?a.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,d):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(l,d):a.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(l):a.setAttribute(l,d);break;case"popover":We("beforetoggle",a),We("toggle",a),Je(a,"popover",d);break;case"xlinkActuate":Yn(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Yn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Yn(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Yn(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Yn(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Yn(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Yn(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Yn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Yn(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Je(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=FM.get(l)||l,Je(a,l,d))}}function Zp(a,o,l,d,v,b){switch(l){case"style":$_(a,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"children":typeof d=="string"?es(a,d):(typeof d=="number"||typeof d=="bigint")&&es(a,""+d);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Sa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!se.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),o=l.slice(2,v?l.length-7:void 0),b=a[sr]||null,b=b!=null?b[l]:null,typeof b=="function"&&a.removeEventListener(o,b,v),typeof d=="function")){typeof b!="function"&&b!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(o,d,v);break e}l in a?a[l]=d:d===!0?a.setAttribute(l,""):Je(a,l,d)}}}function Cr(a,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var d=!1,v=!1,b;for(b in l)if(l.hasOwnProperty(b)){var E=l[b];if(E!=null)switch(b){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ht(a,o,b,E,l,null)}}v&&ht(a,o,"srcSet",l.srcSet,l,null),d&&ht(a,o,"src",l.src,l,null);return;case"input":We("invalid",a);var N=b=E=v=null,z=null,G=null;for(d in l)if(l.hasOwnProperty(d)){var oe=l[d];if(oe!=null)switch(d){case"name":v=oe;break;case"type":E=oe;break;case"checked":z=oe;break;case"defaultChecked":G=oe;break;case"value":b=oe;break;case"defaultValue":N=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,o));break;default:ht(a,o,d,oe,l,null)}}L_(a,b,N,z,G,E,v,!1);return;case"select":We("invalid",a),d=E=b=null;for(v in l)if(l.hasOwnProperty(v)&&(N=l[v],N!=null))switch(v){case"value":b=N;break;case"defaultValue":E=N;break;case"multiple":d=N;default:ht(a,o,v,N,l,null)}o=b,l=E,a.multiple=!!d,o!=null?Jo(a,!!d,o,!1):l!=null&&Jo(a,!!d,l,!0);return;case"textarea":We("invalid",a),b=v=d=null;for(E in l)if(l.hasOwnProperty(E)&&(N=l[E],N!=null))switch(E){case"value":d=N;break;case"defaultValue":v=N;break;case"children":b=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:ht(a,o,E,N,l,null)}U_(a,d,v,b);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(d=l[z],d!=null))switch(z){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ht(a,o,z,d,l,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(d=0;d<Yl.length;d++)We(Yl[d],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in l)if(l.hasOwnProperty(G)&&(d=l[G],d!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ht(a,o,G,d,l,null)}return;default:if(dh(o)){for(oe in l)l.hasOwnProperty(oe)&&(d=l[oe],d!==void 0&&Zp(a,o,oe,d,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(d=l[N],d!=null&&ht(a,o,N,d,l,null))}function vR(a,o,l,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,E=null,N=null,z=null,G=null,oe=null;for(te in l){var de=l[te];if(l.hasOwnProperty(te)&&de!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":z=de;default:d.hasOwnProperty(te)||ht(a,o,te,null,d,de)}}for(var Z in d){var te=d[Z];if(de=l[Z],d.hasOwnProperty(Z)&&(te!=null||de!=null))switch(Z){case"type":b=te;break;case"name":v=te;break;case"checked":G=te;break;case"defaultChecked":oe=te;break;case"value":E=te;break;case"defaultValue":N=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,o));break;default:te!==de&&ht(a,o,Z,te,d,de)}}ch(a,E,N,z,G,oe,b,v);return;case"select":te=E=N=Z=null;for(b in l)if(z=l[b],l.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":te=z;default:d.hasOwnProperty(b)||ht(a,o,b,null,d,z)}for(v in d)if(b=d[v],z=l[v],d.hasOwnProperty(v)&&(b!=null||z!=null))switch(v){case"value":Z=b;break;case"defaultValue":N=b;break;case"multiple":E=b;default:b!==z&&ht(a,o,v,b,d,z)}o=N,l=E,d=te,Z!=null?Jo(a,!!l,Z,!1):!!d!=!!l&&(o!=null?Jo(a,!!l,o,!0):Jo(a,!!l,l?[]:"",!1));return;case"textarea":te=Z=null;for(N in l)if(v=l[N],l.hasOwnProperty(N)&&v!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ht(a,o,N,null,d,v)}for(E in d)if(v=d[E],b=l[E],d.hasOwnProperty(E)&&(v!=null||b!=null))switch(E){case"value":Z=v;break;case"defaultValue":te=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==b&&ht(a,o,E,v,d,b)}I_(a,Z,te);return;case"option":for(var Ae in l)if(Z=l[Ae],l.hasOwnProperty(Ae)&&Z!=null&&!d.hasOwnProperty(Ae))switch(Ae){case"selected":a.selected=!1;break;default:ht(a,o,Ae,null,d,Z)}for(z in d)if(Z=d[z],te=l[z],d.hasOwnProperty(z)&&Z!==te&&(Z!=null||te!=null))switch(z){case"selected":a.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ht(a,o,z,Z,d,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in l)Z=l[Le],l.hasOwnProperty(Le)&&Z!=null&&!d.hasOwnProperty(Le)&&ht(a,o,Le,null,d,Z);for(G in d)if(Z=d[G],te=l[G],d.hasOwnProperty(G)&&Z!==te&&(Z!=null||te!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,o));break;default:ht(a,o,G,Z,d,te)}return;default:if(dh(o)){for(var pt in l)Z=l[pt],l.hasOwnProperty(pt)&&Z!==void 0&&!d.hasOwnProperty(pt)&&Zp(a,o,pt,void 0,d,Z);for(oe in d)Z=d[oe],te=l[oe],!d.hasOwnProperty(oe)||Z===te||Z===void 0&&te===void 0||Zp(a,o,oe,Z,d,te);return}}for(var F in l)Z=l[F],l.hasOwnProperty(F)&&Z!=null&&!d.hasOwnProperty(F)&&ht(a,o,F,null,d,Z);for(de in d)Z=d[de],te=l[de],!d.hasOwnProperty(de)||Z===te||Z==null&&te==null||ht(a,o,de,Z,d,te)}function Hj(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var v=l[d],b=v.transferSize,E=v.initiatorType,N=v.duration;if(b&&N&&Hj(E)){for(E=0,N=v.responseEnd,d+=1;d<l.length;d++){var z=l[d],G=z.startTime;if(G>N)break;var oe=z.transferSize,de=z.initiatorType;oe&&Hj(de)&&(z=z.responseEnd,E+=oe*(z<N?1:(N-G)/(z-G)))}if(--d,o+=8*(b+E)/(v.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Qp=null,Jp=null;function dd(a){return a.nodeType===9?a:a.ownerDocument}function Fj(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Kj(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function eg(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var tg=null;function bR(){var a=window.event;return a&&a.type==="popstate"?a===tg?!1:(tg=a,!0):(tg=null,!1)}var Yj=typeof setTimeout=="function"?setTimeout:void 0,_R=typeof clearTimeout=="function"?clearTimeout:void 0,Gj=typeof Promise=="function"?Promise:void 0,xR=typeof queueMicrotask=="function"?queueMicrotask:typeof Gj<"u"?function(a){return Gj.resolve(null).then(a).catch(wR)}:Yj;function wR(a){setTimeout(function(){throw a})}function Ti(a){return a==="head"}function Vj(a,o){var l=o,d=0;do{var v=l.nextSibling;if(a.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(d===0){a.removeChild(v),Ds(o);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Vl(a.ownerDocument.documentElement);else if(l==="head"){l=a.ownerDocument.head,Vl(l);for(var b=l.firstChild;b;){var E=b.nextSibling,N=b.nodeName;b[Zo]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=E}}else l==="body"&&Vl(a.ownerDocument.body);l=v}while(l);Ds(o)}function Wj(a,o){var l=a;a=0;do{var d=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(a===0)break;a--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||a++;l=d}while(l)}function rg(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":rg(l),Qo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function jR(a,o,l,d){for(;a.nodeType===1;){var v=l;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Zo])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Dn(a.nextSibling),a===null)break}return null}function SR(a,o,l){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Dn(a.nextSibling),a===null))return null;return a}function Xj(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Dn(a.nextSibling),a===null))return null;return a}function ng(a){return a.data==="$?"||a.data==="$~"}function ag(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function ER(a,o){var l=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||l.readyState!=="loading")o();else{var d=function(){o(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Dn(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var ig=null;function Zj(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="/$"||l==="/&"){if(o===0)return Dn(a.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}a=a.nextSibling}return null}function Qj(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return a;o--}else l!=="/$"&&l!=="/&"||o++}a=a.previousSibling}return null}function Jj(a,o,l){switch(o=dd(l),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Vl(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Qo(a)}var Tn=new Map,eS=new Set;function fd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ua=U.d;U.d={f:OR,r:CR,D:AR,C:NR,L:kR,m:DR,X:PR,S:TR,M:MR};function OR(){var a=Ua.f(),o=nd();return a||o}function CR(a){var o=hi(a);o!==null&&o.tag===5&&o.type==="form"?vw(o):Ua.r(a)}var As=typeof document>"u"?null:document;function tS(a,o,l){var d=As;if(d&&typeof o=="string"&&o){var v=Sn(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),eS.has(v)||(eS.add(v),a={rel:a,crossOrigin:l,href:o},d.querySelector(v)===null&&(o=d.createElement("link"),Cr(o,"link",a),le(o),d.head.appendChild(o)))}}function AR(a){Ua.D(a),tS("dns-prefetch",a,null)}function NR(a,o){Ua.C(a,o),tS("preconnect",a,o)}function kR(a,o,l){Ua.L(a,o,l);var d=As;if(d&&a&&o){var v='link[rel="preload"][as="'+Sn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Sn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Sn(l.imageSizes)+'"]')):v+='[href="'+Sn(a)+'"]';var b=v;switch(o){case"style":b=Ns(a);break;case"script":b=ks(a)}Tn.has(b)||(a=g({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:a,as:o},l),Tn.set(b,a),d.querySelector(v)!==null||o==="style"&&d.querySelector(Wl(b))||o==="script"&&d.querySelector(Xl(b))||(o=d.createElement("link"),Cr(o,"link",a),le(o),d.head.appendChild(o)))}}function DR(a,o){Ua.m(a,o);var l=As;if(l&&a){var d=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Sn(d)+'"][href="'+Sn(a)+'"]',b=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ks(a)}if(!Tn.has(b)&&(a=g({rel:"modulepreload",href:a},o),Tn.set(b,a),l.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Xl(b)))return}d=l.createElement("link"),Cr(d,"link",a),le(d),l.head.appendChild(d)}}}function TR(a,o,l){Ua.S(a,o,l);var d=As;if(d&&a){var v=K(d).hoistableStyles,b=Ns(a);o=o||"default";var E=v.get(b);if(!E){var N={loading:0,preload:null};if(E=d.querySelector(Wl(b)))N.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},l),(l=Tn.get(b))&&og(a,l);var z=E=d.createElement("link");le(z),Cr(z,"link",a),z._p=new Promise(function(G,oe){z.onload=G,z.onerror=oe}),z.addEventListener("load",function(){N.loading|=1}),z.addEventListener("error",function(){N.loading|=2}),N.loading|=4,md(E,o,d)}E={type:"stylesheet",instance:E,count:1,state:N},v.set(b,E)}}}function PR(a,o){Ua.X(a,o);var l=As;if(l&&a){var d=K(l).hoistableScripts,v=ks(a),b=d.get(v);b||(b=l.querySelector(Xl(v)),b||(a=g({src:a,async:!0},o),(o=Tn.get(v))&&sg(a,o),b=l.createElement("script"),le(b),Cr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(v,b))}}function MR(a,o){Ua.M(a,o);var l=As;if(l&&a){var d=K(l).hoistableScripts,v=ks(a),b=d.get(v);b||(b=l.querySelector(Xl(v)),b||(a=g({src:a,async:!0,type:"module"},o),(o=Tn.get(v))&&sg(a,o),b=l.createElement("script"),le(b),Cr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(v,b))}}function rS(a,o,l,d){var v=(v=Ie.current)?fd(v):null;if(!v)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ns(l.href),l=K(v).hoistableStyles,d=l.get(o),d||(d={type:"style",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=Ns(l.href);var b=K(v).hoistableStyles,E=b.get(a);if(E||(v=v.ownerDocument||v,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,E),(b=v.querySelector(Wl(a)))&&!b._p&&(E.instance=b,E.state.loading=5),Tn.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Tn.set(a,l),b||RR(v,a,l,E.state))),o&&d===null)throw Error(n(528,""));return E}if(o&&d!==null)throw Error(n(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ks(l),l=K(v).hoistableScripts,d=l.get(o),d||(d={type:"script",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Ns(a){return'href="'+Sn(a)+'"'}function Wl(a){return'link[rel="stylesheet"]['+a+"]"}function nS(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function RR(a,o,l,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Cr(o,"link",l),le(o),a.head.appendChild(o))}function ks(a){return'[src="'+Sn(a)+'"]'}function Xl(a){return"script[async]"+a}function aS(a,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+Sn(l.href)+'"]');if(d)return o.instance=d,le(d),d;var v=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),le(d),Cr(d,"style",v),md(d,l.precedence,a),o.instance=d;case"stylesheet":v=Ns(l.href);var b=a.querySelector(Wl(v));if(b)return o.state.loading|=4,o.instance=b,le(b),b;d=nS(l),(v=Tn.get(v))&&og(d,v),b=(a.ownerDocument||a).createElement("link"),le(b);var E=b;return E._p=new Promise(function(N,z){E.onload=N,E.onerror=z}),Cr(b,"link",d),o.state.loading|=4,md(b,l.precedence,a),o.instance=b;case"script":return b=ks(l.src),(v=a.querySelector(Xl(b)))?(o.instance=v,le(v),v):(d=l,(v=Tn.get(b))&&(d=g({},l),sg(d,v)),a=a.ownerDocument||a,v=a.createElement("script"),le(v),Cr(v,"link",d),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,md(d,l.precedence,a));return o.instance}function md(a,o,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,b=v,E=0;E<d.length;E++){var N=d[E];if(N.dataset.precedence===o)b=N;else if(b!==v)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(a,o.firstChild))}function og(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function sg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var hd=null;function iS(a,o,l){if(hd===null){var d=new Map,v=hd=new Map;v.set(l,d)}else v=hd,d=v.get(l),d||(d=new Map,v.set(l,d));if(d.has(a))return d;for(d.set(a,null),l=l.getElementsByTagName(a),v=0;v<l.length;v++){var b=l[v];if(!(b[Zo]||b[Bt]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(o)||"";E=a+E;var N=d.get(E);N?N.push(b):d.set(E,[b])}}return d}function oS(a,o,l){a=a.ownerDocument||a,a.head.insertBefore(l,o==="title"?a.querySelector("head > title"):null)}function qR(a,o,l){if(l===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function sS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function zR(a,o,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Ns(d.href),b=o.querySelector(Wl(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=pd.bind(a),o.then(a,a)),l.state.loading|=4,l.instance=b,le(b);return}b=o.ownerDocument||o,d=nS(d),(v=Tn.get(v))&&og(d,v),b=b.createElement("link"),le(b);var E=b;E._p=new Promise(function(N,z){E.onload=N,E.onerror=z}),Cr(b,"link",d),l.instance=b}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=pd.bind(a),o.addEventListener("load",l),o.addEventListener("error",l))}}var lg=0;function LR(a,o){return a.stylesheets&&a.count===0&&vd(a,a.stylesheets),0<a.count||0<a.imgCount?function(l){var d=setTimeout(function(){if(a.stylesheets&&vd(a,a.stylesheets),a.unsuspend){var b=a.unsuspend;a.unsuspend=null,b()}},6e4+o);0<a.imgBytes&&lg===0&&(lg=62500*yR());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&vd(a,a.stylesheets),a.unsuspend)){var b=a.unsuspend;a.unsuspend=null,b()}},(a.imgBytes>lg?50:800)+o);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function pd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var gd=null;function vd(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,gd=new Map,o.forEach(IR,a),gd=null,pd.call(a))}function IR(a,o){if(!(o.state.loading&4)){var l=gd.get(a);if(l)var d=l.get(null);else{l=new Map,gd.set(a,l);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var E=v[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),d=E)}d&&l.set(null,d)}v=o.instance,E=v.getAttribute("data-precedence"),b=l.get(E)||d,b===d&&l.set(null,v),l.set(E,v),this.count++,d=pd.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),b?b.parentNode.insertBefore(v,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var Zl={$$typeof:A,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function UR(a,o,l,d,v,b,E,N,z){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.hiddenUpdates=Hn(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function lS(a,o,l,d,v,b,E,N,z,G,oe,de){return a=new UR(a,o,l,E,z,G,oe,de,N),o=1,b===!0&&(o|=24),b=nn(3,null,null,o),a.current=b,b.stateNode=a,o=Bh(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:o},Kh(b),a}function cS(a){return a?(a=ss,a):ss}function uS(a,o,l,d,v,b){v=cS(v),d.context===null?d.context=v:d.pendingContext=v,d=xi(o),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=wi(a,d,o),l!==null&&(Wr(l,a,o),Nl(l,a,o))}function dS(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<o?l:o}}function cg(a,o){dS(a,o),(a=a.alternate)&&dS(a,o)}function fS(a){if(a.tag===13||a.tag===31){var o=so(a,67108864);o!==null&&Wr(o,a,67108864),cg(a,67108864)}}function mS(a){if(a.tag===13||a.tag===31){var o=cn();o=ul(o);var l=so(a,o);l!==null&&Wr(l,a,o),cg(a,o)}}var yd=!0;function BR(a,o,l,d){var v=R.T;R.T=null;var b=U.p;try{U.p=2,ug(a,o,l,d)}finally{U.p=b,R.T=v}}function $R(a,o,l,d){var v=R.T;R.T=null;var b=U.p;try{U.p=8,ug(a,o,l,d)}finally{U.p=b,R.T=v}}function ug(a,o,l,d){if(yd){var v=dg(d);if(v===null)Xp(a,o,d,bd,l),pS(a,d);else if(FR(v,a,o,l,d))d.stopPropagation();else if(pS(a,d),o&4&&-1<HR.indexOf(a)){for(;v!==null;){var b=hi(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=wn(b.pendingLanes);if(E!==0){var N=b;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var z=1<<31-ft(E);N.entanglements[1]|=z,E&=~z}da(b),(ot&6)===0&&(td=Ye()+500,Kl(0))}}break;case 31:case 13:N=so(b,2),N!==null&&Wr(N,b,2),nd(),cg(b,2)}if(b=dg(d),b===null&&Xp(a,o,d,bd,l),b===v)break;v=b}v!==null&&d.stopPropagation()}else Xp(a,o,d,null,l)}}function dg(a){return a=mh(a),fg(a)}var bd=null;function fg(a){if(bd=null,a=Kn(a),a!==null){var o=s(a);if(o===null)a=null;else{var l=o.tag;if(l===13){if(a=c(o),a!==null)return a;a=null}else if(l===31){if(a=u(o),a!==null)return a;a=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return bd=a,null}function hS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($r()){case _n:return 2;case Hr:return 8;case jr:case Yt:return 32;case he:return 268435456;default:return 32}default:return 32}}var mg=!1,Pi=null,Mi=null,Ri=null,Ql=new Map,Jl=new Map,qi=[],HR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function pS(a,o){switch(a){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Ql.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(o.pointerId)}}function ec(a,o,l,d,v,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[v]},o!==null&&(o=hi(o),o!==null&&fS(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function FR(a,o,l,d,v){switch(o){case"focusin":return Pi=ec(Pi,a,o,l,d,v),!0;case"dragenter":return Mi=ec(Mi,a,o,l,d,v),!0;case"mouseover":return Ri=ec(Ri,a,o,l,d,v),!0;case"pointerover":var b=v.pointerId;return Ql.set(b,ec(Ql.get(b)||null,a,o,l,d,v)),!0;case"gotpointercapture":return b=v.pointerId,Jl.set(b,ec(Jl.get(b)||null,a,o,l,d,v)),!0}return!1}function gS(a){var o=Kn(a.target);if(o!==null){var l=s(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){a.blockedOn=o,to(a.priority,function(){mS(l)});return}}else if(o===31){if(o=u(l),o!==null){a.blockedOn=o,to(a.priority,function(){mS(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function _d(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var l=dg(a.nativeEvent);if(l===null){l=a.nativeEvent;var d=new l.constructor(l.type,l);fh=d,l.target.dispatchEvent(d),fh=null}else return o=hi(l),o!==null&&fS(o),a.blockedOn=l,!1;o.shift()}return!0}function vS(a,o,l){_d(a)&&l.delete(o)}function KR(){mg=!1,Pi!==null&&_d(Pi)&&(Pi=null),Mi!==null&&_d(Mi)&&(Mi=null),Ri!==null&&_d(Ri)&&(Ri=null),Ql.forEach(vS),Jl.forEach(vS)}function xd(a,o){a.blockedOn===o&&(a.blockedOn=null,mg||(mg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,KR)))}var wd=null;function yS(a){wd!==a&&(wd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){wd===a&&(wd=null);for(var o=0;o<a.length;o+=3){var l=a[o],d=a[o+1],v=a[o+2];if(typeof d!="function"){if(fg(d||l)===null)continue;break}var b=hi(l);b!==null&&(a.splice(o,3),o-=3,dp(b,{pending:!0,data:v,method:l.method,action:d},d,v))}}))}function Ds(a){function o(z){return xd(z,a)}Pi!==null&&xd(Pi,a),Mi!==null&&xd(Mi,a),Ri!==null&&xd(Ri,a),Ql.forEach(o),Jl.forEach(o);for(var l=0;l<qi.length;l++){var d=qi[l];d.blockedOn===a&&(d.blockedOn=null)}for(;0<qi.length&&(l=qi[0],l.blockedOn===null);)gS(l),l.blockedOn===null&&qi.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var v=l[d],b=l[d+1],E=v[sr]||null;if(typeof b=="function")E||yS(l);else if(E){var N=null;if(b&&b.hasAttribute("formAction")){if(v=b,E=b[sr]||null)N=E.formAction;else if(fg(v)!==null)continue}else N=E.action;typeof N=="function"?l[d+1]=N:(l.splice(d,3),d-=3),yS(l)}}}function bS(){function a(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(E){return v=E})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function hg(a){this._internalRoot=a}jd.prototype.render=hg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var l=o.current,d=cn();uS(l,d,a,o,null,null)},jd.prototype.unmount=hg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;uS(a.current,2,null,a,null,null),nd(),o[sa]=null}};function jd(a){this._internalRoot=a}jd.prototype.unstable_scheduleHydration=function(a){if(a){var o=eo();a={blockedOn:null,target:a,priority:o};for(var l=0;l<qi.length&&o!==0&&o<qi[l].priority;l++);qi.splice(l,0,a),l===0&&gS(a)}};var _S=t.version;if(_S!=="19.2.0")throw Error(n(527,_S,"19.2.0"));U.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var YR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{Qt=Sd.inject(YR),Ut=Sd}catch{}}return rc.createRoot=function(a,o){if(!i(a))throw Error(n(299));var l=!1,d="",v=Cw,b=Aw,E=Nw;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=lS(a,1,!1,null,null,l,d,null,v,b,E,bS),a[sa]=o.current,Wp(a),new hg(o)},rc.hydrateRoot=function(a,o,l){if(!i(a))throw Error(n(299));var d=!1,v="",b=Cw,E=Aw,N=Nw,z=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),o=lS(a,1,!0,o,l??null,d,v,z,b,E,N,bS),o.context=cS(null),l=o.current,d=cn(),d=ul(d),v=xi(d),v.callback=null,wi(l,v,d),l=d,o.current.lanes=l,ja(o,l),da(o),a[sa]=o.current,Wp(a),new jd(o)},rc.version="19.2.0",rc}var AS;function qq(){if(AS)return gg.exports;AS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gg.exports=Rq(),gg.exports}var zq=qq();const Lq=ri(zq);var NS="popstate";function kS(e){return typeof e=="object"&&e!=null&&"pathname"in e&&"search"in e&&"hash"in e&&"state"in e&&"key"in e}function Iq(e={}){function t(n,i){let s=i.state?.masked,{pathname:c,search:u,hash:m}=s||n.location;return py("",{pathname:c,search:u,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default",s?{pathname:n.location.pathname,search:n.location.search,hash:n.location.hash}:void 0)}function r(n,i){return typeof i=="string"?i:wc(i)}return Bq(t,r,null,e)}function Tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ln(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Uq(){return Math.random().toString(36).substring(2,10)}function DS(e,t){return{usr:e.state,key:e.key,idx:t,masked:e.unstable_mask?{pathname:e.pathname,search:e.search,hash:e.hash}:void 0}}function py(e,t,r=null,n,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ws(t):t,state:r,key:t&&t.key||n||Uq(),unstable_mask:i}}function wc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ws(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Bq(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,c=i.history,u="POP",m=null,h=p();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function p(){return(c.state||{idx:null}).idx}function g(){u="POP";let S=p(),O=S==null?null:S-h;h=S,m&&m({action:u,location:j.location,delta:O})}function _(S,O){u="PUSH";let C=kS(S)?S:py(j.location,S,O);h=p()+1;let A=DS(C,h),k=j.createHref(C.unstable_mask||C);try{c.pushState(A,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(k)}s&&m&&m({action:u,location:j.location,delta:1})}function x(S,O){u="REPLACE";let C=kS(S)?S:py(j.location,S,O);h=p();let A=DS(C,h),k=j.createHref(C.unstable_mask||C);c.replaceState(A,"",k),s&&m&&m({action:u,location:j.location,delta:0})}function w(S){return $q(S)}let j={get action(){return u},get location(){return e(i,c)},listen(S){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(NS,g),m=S,()=>{i.removeEventListener(NS,g),m=null}},createHref(S){return t(i,S)},createURL:w,encodeLocation(S){let O=w(S);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:x,go(S){return c.go(S)}};return j}function $q(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:wc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function nN(e,t,r="/"){return Hq(e,t,r,!1)}function Hq(e,t,r,n){let i=typeof t=="string"?Ws(t):t,s=Va(i.pathname||"/",r);if(s==null)return null;let c=aN(e);Fq(c);let u=null;for(let m=0;u==null&&m<c.length;++m){let h=tz(s);u=Jq(c[m],h,n)}return u}function aN(e,t=[],r=[],n="",i=!1){let s=(c,u,m=i,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&m)return;Tt(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=pa([n,p.relativePath]),_=r.concat(p);c.children&&c.children.length>0&&(Tt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),aN(c.children,t,_,g,m)),!(c.path==null&&!c.index)&&t.push({path:g,score:Zq(g,c.index),routesMeta:_})};return e.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))s(c,u);else for(let m of iN(c.path))s(c,u,!0,m)}),t}function iN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let c=iN(n.join("/")),u=[];return u.push(...c.map(m=>m===""?s:[s,m].join("/"))),i&&u.push(...c),u.map(m=>e.startsWith("/")&&m===""?"/":m)}function Fq(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Qq(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Kq=/^:[\w-]+$/,Yq=3,Gq=2,Vq=1,Wq=10,Xq=-2,TS=e=>e==="*";function Zq(e,t){let r=e.split("/"),n=r.length;return r.some(TS)&&(n+=Xq),t&&(n+=Gq),r.filter(i=>!TS(i)).reduce((i,s)=>i+(Kq.test(s)?Yq:s===""?Vq:Wq),n)}function Qq(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Jq(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",c=[];for(let u=0;u<n.length;++u){let m=n[u],h=u===n.length-1,p=s==="/"?t:t.slice(s.length)||"/",g=mf({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},p),_=m.route;if(!g&&h&&r&&!n[n.length-1].route.index&&(g=mf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:pa([s,g.pathname]),pathnameBase:iz(pa([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=pa([s,g.pathnameBase]))}return c}function mf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ez(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],c=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:g},_)=>{if(p==="*"){let w=u[_]||"";c=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[_];return g&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:c,pattern:e}}function ez(e,t=!1,r=!0){Ln(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,m,h,p)=>{if(n.push({paramName:u,isOptional:m!=null}),m){let g=p.charAt(h+c.length);return g&&g!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function tz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ln(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Va(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var rz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function nz(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Ws(e):e,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=PS(r.substring(1),"/"):s=PS(r,t)):s=t,{pathname:s,search:oz(n),hash:sz(i)}}function PS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function bg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function az(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Ab(e){let t=az(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function um(e,t,r,n=!1){let i;typeof e=="string"?i=Ws(e):(i={...e},Tt(!i.pathname||!i.pathname.includes("?"),bg("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),bg("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),bg("#","search","hash",i)));let s=e===""||i.pathname==="",c=s?"/":i.pathname,u;if(c==null)u=r;else{let g=t.length-1;if(!n&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}u=g>=0?t[g]:"/"}let m=nz(i,u),h=c&&c!=="/"&&c.endsWith("/"),p=(s||c===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(h||p)&&(m.pathname+="/"),m}var pa=e=>e.join("/").replace(/\/\/+/g,"/"),iz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,sz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,lz=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function cz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function uz(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var oN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sN(e,t){let r=e;if(typeof r!="string"||!rz.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(oN)try{let s=new URL(window.location.href),c=r.startsWith("//")?new URL(s.protocol+r):new URL(r),u=Va(c.pathname,t);c.origin===s.origin&&u!=null?r=u+c.search+c.hash:i=!0}catch{Ln(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lN=["POST","PUT","PATCH","DELETE"];new Set(lN);var dz=["GET",...lN];new Set(dz);var Xs=y.createContext(null);Xs.displayName="DataRouter";var dm=y.createContext(null);dm.displayName="DataRouterState";var fz=y.createContext(!1),cN=y.createContext({isTransitioning:!1});cN.displayName="ViewTransition";var mz=y.createContext(new Map);mz.displayName="Fetchers";var hz=y.createContext(null);hz.displayName="Await";var bn=y.createContext(null);bn.displayName="Navigation";var Ic=y.createContext(null);Ic.displayName="Location";var na=y.createContext({outlet:null,matches:[],isDataRoute:!1});na.displayName="Route";var Nb=y.createContext(null);Nb.displayName="RouteError";var uN="REACT_ROUTER_ERROR",pz="REDIRECT",gz="ROUTE_ERROR_RESPONSE";function vz(e){if(e.startsWith(`${uN}:${pz}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function yz(e){if(e.startsWith(`${uN}:${gz}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new lz(t.status,t.statusText,t.data)}catch{}}function bz(e,{relative:t}={}){Tt(Zs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(bn),{hash:i,pathname:s,search:c}=Uc(e,{relative:t}),u=s;return r!=="/"&&(u=s==="/"?r:pa([r,s])),n.createHref({pathname:u,search:c,hash:i})}function Zs(){return y.useContext(Ic)!=null}function aa(){return Tt(Zs(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Ic).location}var dN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fN(e){y.useContext(bn).static||y.useLayoutEffect(e)}function fm(){let{isDataRoute:e}=y.useContext(na);return e?Tz():_z()}function _z(){Tt(Zs(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(Xs),{basename:t,navigator:r}=y.useContext(bn),{matches:n}=y.useContext(na),{pathname:i}=aa(),s=JSON.stringify(Ab(n)),c=y.useRef(!1);return fN(()=>{c.current=!0}),y.useCallback((m,h={})=>{if(Ln(c.current,dN),!c.current)return;if(typeof m=="number"){r.go(m);return}let p=um(m,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:pa([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,s,i,e])}y.createContext(null);function mN(){let{matches:e}=y.useContext(na),t=e[e.length-1];return t?t.params:{}}function Uc(e,{relative:t}={}){let{matches:r}=y.useContext(na),{pathname:n}=aa(),i=JSON.stringify(Ab(r));return y.useMemo(()=>um(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function xz(e,t){return hN(e,t)}function hN(e,t,r){Tt(Zs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=y.useContext(bn),{matches:i}=y.useContext(na),s=i[i.length-1],c=s?s.params:{},u=s?s.pathname:"/",m=s?s.pathnameBase:"/",h=s&&s.route;{let S=h&&h.path||"";gN(u,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=aa(),g;if(t){let S=typeof t=="string"?Ws(t):t;Tt(m==="/"||S.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=p;let _=g.pathname||"/",x=_;if(m!=="/"){let S=m.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=nN(e,{pathname:x});Ln(h||w!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Ln(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Oz(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:pa([m,n.encodeLocation?n.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:pa([m,n.encodeLocation?n.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),i,r);return t&&j?y.createElement(Ic.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0,...g},navigationType:"POP"}},j):j}function wz(){let e=Dz(),t=cz(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:i},r):null,c)}var jz=y.createElement(wz,null),pN=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=yz(e.digest);r&&(e=r)}let t=e!==void 0?y.createElement(na.Provider,{value:this.props.routeContext},y.createElement(Nb.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?y.createElement(Sz,{error:e},t):t}};pN.contextType=fz;var _g=new WeakMap;function Sz({children:e,error:t}){let{basename:r}=y.useContext(bn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=vz(t.digest);if(n){let i=_g.get(t);if(i)throw i;let s=sN(n.location,r);if(oN&&!_g.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw _g.set(t,c),c}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function Ez({routeContext:e,match:t,children:r}){let n=y.useContext(Xs);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(na.Provider,{value:e},r)}function Oz(e,t=[],r){let n=r?.state;if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n?.errors;if(s!=null){let p=i.findIndex(g=>g.route.id&&s?.[g.route.id]!==void 0);Tt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,u=-1;if(r&&n){c=n.renderFallback;for(let p=0;p<i.length;p++){let g=i[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=p),g.route.id){let{loaderData:_,errors:x}=n,w=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!x||x[g.route.id]===void 0);if(g.route.lazy||w){r.isStatic&&(c=!0),u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}}let m=r?.onError,h=n&&m?(p,g)=>{m(p,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:uz(n.matches),errorInfo:g})}:void 0;return i.reduceRight((p,g,_)=>{let x,w=!1,j=null,S=null;n&&(x=s&&g.route.id?s[g.route.id]:void 0,j=g.route.errorElement||jz,c&&(u<0&&_===0?(gN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===_&&(w=!0,S=g.route.hydrateFallbackElement||null)));let O=t.concat(i.slice(0,_+1)),C=()=>{let A;return x?A=j:w?A=S:g.route.Component?A=y.createElement(g.route.Component,null):g.route.element?A=g.route.element:A=p,y.createElement(Ez,{match:g,routeContext:{outlet:p,matches:O,isDataRoute:n!=null},children:A})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?y.createElement(pN,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:C(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:h}):C()},null)}function kb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cz(e){let t=y.useContext(Xs);return Tt(t,kb(e)),t}function Az(e){let t=y.useContext(dm);return Tt(t,kb(e)),t}function Nz(e){let t=y.useContext(na);return Tt(t,kb(e)),t}function Db(e){let t=Nz(e),r=t.matches[t.matches.length-1];return Tt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function kz(){return Db("useRouteId")}function Dz(){let e=y.useContext(Nb),t=Az("useRouteError"),r=Db("useRouteError");return e!==void 0?e:t.errors?.[r]}function Tz(){let{router:e}=Cz("useNavigate"),t=Db("useNavigate"),r=y.useRef(!1);return fN(()=>{r.current=!0}),y.useCallback(async(i,s={})=>{Ln(r.current,dN),r.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var MS={};function gN(e,t,r){!t&&!MS[e]&&(MS[e]=!0,Ln(!1,r))}y.memo(Pz);function Pz({routes:e,future:t,state:r,isStatic:n,onError:i}){return hN(e,void 0,{state:r,isStatic:n,onError:i})}function xo({to:e,replace:t,state:r,relative:n}){Tt(Zs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(bn);Ln(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=y.useContext(na),{pathname:c}=aa(),u=fm(),m=um(e,Ab(s),c,n==="path"),h=JSON.stringify(m);return y.useEffect(()=>{u(JSON.parse(h),{replace:t,state:r,relative:n})},[u,h,n,t,r]),null}function fn(e){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Mz({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:c}){Tt(!Zs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),m=y.useMemo(()=>({basename:u,navigator:i,static:s,unstable_useTransitions:c,future:{}}),[u,i,s,c]);typeof r=="string"&&(r=Ws(r));let{pathname:h="/",search:p="",hash:g="",state:_=null,key:x="default",unstable_mask:w}=r,j=y.useMemo(()=>{let S=Va(h,u);return S==null?null:{location:{pathname:S,search:p,hash:g,state:_,key:x,unstable_mask:w},navigationType:n}},[u,h,p,g,_,x,n,w]);return Ln(j!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:y.createElement(bn.Provider,{value:m},y.createElement(Ic.Provider,{children:t,value:j}))}function Rz({children:e,location:t}){return xz(gy(e),t)}function gy(e,t=[]){let r=[];return y.Children.forEach(e,(n,i)=>{if(!y.isValidElement(n))return;let s=[...t,i];if(n.type===y.Fragment){r.push.apply(r,gy(n.props.children,s));return}Tt(n.type===fn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=gy(n.props.children,s)),r.push(c)}),r}var Qd="get",Jd="application/x-www-form-urlencoded";function mm(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function qz(e){return mm(e)&&e.tagName.toLowerCase()==="button"}function zz(e){return mm(e)&&e.tagName.toLowerCase()==="form"}function Lz(e){return mm(e)&&e.tagName.toLowerCase()==="input"}function Iz(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Uz(e,t){return e.button===0&&(!t||t==="_self")&&!Iz(e)}function vy(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Bz(e,t){let r=vy(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(s=>{r.append(i,s)})}),r}var Ed=null;function $z(){if(Ed===null)try{new FormData(document.createElement("form"),0),Ed=!1}catch{Ed=!0}return Ed}var Hz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xg(e){return e!=null&&!Hz.has(e)?(Ln(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jd}"`),null):e}function Fz(e,t){let r,n,i,s,c;if(zz(e)){let u=e.getAttribute("action");n=u?Va(u,t):null,r=e.getAttribute("method")||Qd,i=xg(e.getAttribute("enctype"))||Jd,s=new FormData(e)}else if(qz(e)||Lz(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||u.getAttribute("action");if(n=m?Va(m,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Qd,i=xg(e.getAttribute("formenctype"))||xg(u.getAttribute("enctype"))||Jd,s=new FormData(u,e),!$z()){let{name:h,type:p,value:g}=e;if(p==="image"){let _=h?`${h}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else h&&s.append(h,g)}}else{if(mm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Qd,n=null,i=Jd,c=e}return s&&i==="text/plain"&&(c=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kz(e,t,r,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:t&&Va(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Yz(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Gz(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Vz(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let c=await Yz(s,r);return c.links?c.links():[]}return[]}));return Qz(n.flat(1).filter(Gz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function RS(e,t,r,n,i,s){let c=(m,h)=>r[h]?m.route.id!==r[h].route.id:!0,u=(m,h)=>r[h].pathname!==m.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==m.params["*"];return s==="assets"?t.filter((m,h)=>c(m,h)||u(m,h)):s==="data"?t.filter((m,h)=>{let p=n.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(c(m,h)||u(m,h))return!0;if(m.route.shouldRevalidate){let g=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function Wz(e,t,{includeHydrateFallback:r}={}){return Xz(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Xz(e){return[...new Set(e)]}function Zz(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Qz(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(Zz(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function vN(){let e=y.useContext(Xs);return Tb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Jz(){let e=y.useContext(dm);return Tb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Pb=y.createContext(void 0);Pb.displayName="FrameworkContext";function yN(){let e=y.useContext(Pb);return Tb(e,"You must render this element inside a <HydratedRouter> element"),e}function eL(e,t){let r=y.useContext(Pb),[n,i]=y.useState(!1),[s,c]=y.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=t,_=y.useRef(null);y.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let j=O=>{O.forEach(C=>{c(C.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[e]),y.useEffect(()=>{if(n){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{i(!0)},w=()=>{i(!1),c(!1)};return r?e!=="intent"?[s,_,{}]:[s,_,{onFocus:nc(u,x),onBlur:nc(m,w),onMouseEnter:nc(h,x),onMouseLeave:nc(p,w),onTouchStart:nc(g,x)}]:[!1,_,{}]}function nc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function tL({page:e,...t}){let{router:r}=vN(),n=y.useMemo(()=>nN(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(nL,{page:e,matches:n,...t}):null}function rL(e){let{manifest:t,routeModules:r}=yN(),[n,i]=y.useState([]);return y.useEffect(()=>{let s=!1;return Vz(e,t,r).then(c=>{s||i(c)}),()=>{s=!0}},[e,t,r]),n}function nL({page:e,matches:t,...r}){let n=aa(),{future:i,manifest:s,routeModules:c}=yN(),{basename:u}=vN(),{loaderData:m,matches:h}=Jz(),p=y.useMemo(()=>RS(e,t,h,s,n,"data"),[e,t,h,s,n]),g=y.useMemo(()=>RS(e,t,h,s,n,"assets"),[e,t,h,s,n]),_=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,S=!1;if(t.forEach(C=>{let A=s.routes[C.route.id];!A||!A.hasLoader||(!p.some(k=>k.route.id===C.route.id)&&C.route.id in m&&c[C.route.id]?.shouldRevalidate||A.hasClientLoader?S=!0:j.add(C.route.id))}),j.size===0)return[];let O=Kz(e,u,i.unstable_trailingSlashAwareDataRequests,"data");return S&&j.size>0&&O.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[O.pathname+O.search]},[u,i.unstable_trailingSlashAwareDataRequests,m,n,s,p,t,e,c]),x=y.useMemo(()=>Wz(g,s),[g,s]),w=rL(g);return y.createElement(y.Fragment,null,_.map(j=>y.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>y.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),w.map(({key:j,link:S})=>y.createElement("link",{key:j,nonce:r.nonce,...S,crossOrigin:S.crossOrigin??r.crossOrigin})))}function aL(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var iL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iL&&(window.__reactRouterVersion="7.13.1")}catch{}function oL({basename:e,children:t,unstable_useTransitions:r,window:n}){let i=y.useRef();i.current==null&&(i.current=Iq({window:n,v5Compat:!0}));let s=i.current,[c,u]=y.useState({action:s.action,location:s.location}),m=y.useCallback(h=>{r===!1?u(h):y.startTransition(()=>u(h))},[r]);return y.useLayoutEffect(()=>s.listen(m),[s,m]),y.createElement(Mz,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:s,unstable_useTransitions:r})}var bN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_N=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:c,unstable_mask:u,state:m,target:h,to:p,preventScrollReset:g,viewTransition:_,unstable_defaultShouldRevalidate:x,...w},j){let{basename:S,navigator:O,unstable_useTransitions:C}=y.useContext(bn),A=typeof p=="string"&&bN.test(p),k=sN(p,S);p=k.to;let D=bz(p,{relative:i}),M=aa(),L=null;if(u){let q=um(u,[],M.unstable_mask?M.unstable_mask.pathname:"/",!0);S!=="/"&&(q.pathname=q.pathname==="/"?S:pa([S,q.pathname])),L=O.createHref(q)}let[V,re,ie]=eL(n,w),X=uL(p,{replace:c,unstable_mask:u,state:m,target:h,preventScrollReset:g,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:x,unstable_useTransitions:C});function I(q){t&&t(q),q.defaultPrevented||X(q)}let ce=!(k.isExternal||s),ge=y.createElement("a",{...w,...ie,href:(ce?L:void 0)||k.absoluteURL||D,onClick:ce?I:t,ref:aL(j,re),target:h,"data-discover":!A&&r==="render"?"true":void 0});return V&&!A?y.createElement(y.Fragment,null,ge,y.createElement(tL,{page:D})):ge});_N.displayName="Link";var sL=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:c,viewTransition:u,children:m,...h},p){let g=Uc(c,{relative:h.relative}),_=aa(),x=y.useContext(dm),{navigator:w,basename:j}=y.useContext(bn),S=x!=null&&gL(g)&&u===!0,O=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,C=_.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),A=A?A.toLowerCase():null,O=O.toLowerCase()),A&&j&&(A=Va(A,j)||A);const k=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let D=C===O||!i&&C.startsWith(O)&&C.charAt(k)==="/",M=A!=null&&(A===O||!i&&A.startsWith(O)&&A.charAt(O.length)==="/"),L={isActive:D,isPending:M,isTransitioning:S},V=D?t:void 0,re;typeof n=="function"?re=n(L):re=[n,D?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ie=typeof s=="function"?s(L):s;return y.createElement(_N,{...h,"aria-current":V,className:re,ref:p,style:ie,to:c,viewTransition:u},typeof m=="function"?m(L):m)});sL.displayName="NavLink";var lL=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:c=Qd,action:u,onSubmit:m,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:_,...x},w)=>{let{unstable_useTransitions:j}=y.useContext(bn),S=hL(),O=pL(u,{relative:h}),C=c.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&bN.test(u),k=D=>{if(m&&m(D),D.defaultPrevented)return;D.preventDefault();let M=D.nativeEvent.submitter,L=M?.getAttribute("formmethod")||c,V=()=>S(M||D.currentTarget,{fetcherKey:t,method:L,navigate:r,replace:i,state:s,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:_});j&&r!==!1?y.startTransition(()=>V()):V()};return y.createElement("form",{ref:w,method:C,action:O,onSubmit:n?m:k,...x,"data-discover":!A&&e==="render"?"true":void 0})});lL.displayName="Form";function cL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xN(e){let t=y.useContext(Xs);return Tt(t,cL(e)),t}function uL(e,{target:t,replace:r,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m,unstable_useTransitions:h}={}){let p=fm(),g=aa(),_=Uc(e,{relative:c});return y.useCallback(x=>{if(Uz(x,t)){x.preventDefault();let w=r!==void 0?r:wc(g)===wc(_),j=()=>p(e,{replace:w,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m});h?y.startTransition(()=>j()):j()}},[g,p,_,r,n,i,t,e,s,c,u,m,h])}function dL(e){Ln(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=y.useRef(vy(e)),r=y.useRef(!1),n=aa(),i=y.useMemo(()=>Bz(n.search,r.current?null:t.current),[n.search]),s=fm(),c=y.useCallback((u,m)=>{const h=vy(typeof u=="function"?u(new URLSearchParams(i)):u);r.current=!0,s("?"+h,m)},[s,i]);return[i,c]}var fL=0,mL=()=>`__${String(++fL)}__`;function hL(){let{router:e}=xN("useSubmit"),{basename:t}=y.useContext(bn),r=kz(),n=e.fetch,i=e.navigate;return y.useCallback(async(s,c={})=>{let{action:u,method:m,encType:h,formData:p,body:g}=Fz(s,t);if(c.navigate===!1){let _=c.fetcherKey||mL();await n(_,r,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||m,formEncType:c.encType||h,flushSync:c.flushSync})}else await i(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||m,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,i,t,r])}function pL(e,{relative:t}={}){let{basename:r}=y.useContext(bn),n=y.useContext(na);Tt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Uc(e||".",{relative:t})},c=aa();if(e==null){s.search=c.search;let u=new URLSearchParams(s.search),m=u.getAll("index");if(m.some(p=>p==="")){u.delete("index"),m.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();s.search=p?`?${p}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:pa([r,s.pathname])),wc(s)}function gL(e,{relative:t}={}){let r=y.useContext(cN);Tt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=xN("useViewTransitionState"),i=Uc(e,{relative:t});if(!r.isTransitioning)return!1;let s=Va(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=Va(r.nextLocation.pathname,n)||r.nextLocation.pathname;return mf(i.pathname,c)!=null||mf(i.pathname,s)!=null}var wN=tN();function vL(e,t,r=[]){if(!e||!t)return{hasConflict:!1,conflicts:[]};const n=new Date(e._offlineModifiedAt||e.updated_at||0),i=new Date(t.updated_at||0),s=new Date(e._cachedAt||0);if(i<=s)return{hasConflict:!1,conflicts:[]};const c=[],u=r.length>0?r:Object.keys(e).filter(m=>!m.startsWith("_")&&m!=="id"&&m!=="created_at");for(const m of u){const h=e[m],p=t[m];if(h!==void 0&&p!==void 0&&!ef(h,p)){const g=e._cachedValues?.[m],_=g!==void 0?!ef(h,g):!0,x=g!==void 0?!ef(p,g):!0;_&&x&&c.push({field:m,localValue:h,serverValue:p,cachedValue:g})}}return{hasConflict:c.length>0,conflicts:c,localModifiedAt:n,serverUpdatedAt:i}}function ef(e,t){if(e===t)return!0;if(e==null||t==null)return e===t;if(typeof e!=typeof t)return!1;if(typeof e!="object")return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;const r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(i=>ef(e[i],t[i]))}const yL={KEEP_LOCAL:"keep_local",KEEP_SERVER:"keep_server",MERGE:"merge"};function bL(e,t=[]){const r={...e,_cachedAt:new Date().toISOString()};if(t.length>0){r._cachedValues={};for(const n of t)e[n]!==void 0&&(r._cachedValues[n]=JSON.parse(JSON.stringify(e[n])))}return r}function _L(e,t="record"){if(!e.hasConflict)return null;if(e.deletedOnServer)return{title:`${qS(t)} was deleted`,description:`This ${t} was deleted by another user while you were offline.`,severity:"warning",conflictCount:1};const r=e.conflicts.map(n=>n.field).join(", ");return{title:`${qS(t)} was modified`,description:`The following fields were changed by another user: ${r}`,severity:e.conflicts.length>2?"warning":"info",conflictCount:e.conflicts.length,fields:e.conflicts}}function qS(e){return e.charAt(0).toUpperCase()+e.slice(1)}const xL="fieldsync-offline",wL=2,tt={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let Eo=null;const ni=()=>new Promise((e,t)=>{if(Eo){e(Eo);return}const r=indexedDB.open(xL,wL);r.onerror=()=>{console.error("Failed to open offline database"),t(r.error)},r.onsuccess=()=>{Eo=r.result,e(Eo)},r.onupgradeneeded=n=>{const i=n.target.result;if(i.objectStoreNames.contains(tt.PROJECTS)||i.createObjectStore(tt.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),i.objectStoreNames.contains(tt.AREAS)||i.createObjectStore(tt.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.CREW_CHECKINS)||i.createObjectStore(tt.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.TM_TICKETS)||i.createObjectStore(tt.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.DAILY_REPORTS)||i.createObjectStore(tt.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.MESSAGES)||i.createObjectStore(tt.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!i.objectStoreNames.contains(tt.PENDING_ACTIONS)){const s=i.createObjectStore(tt.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});s.createIndex("type","type",{unique:!1}),s.createIndex("created_at","created_at",{unique:!1})}i.objectStoreNames.contains(tt.CACHED_DATA)||i.createObjectStore(tt.CACHED_DATA,{keyPath:"key"})}}),Ko=(e,t="readonly")=>{if(!Eo)throw new Error("Database not initialized");return Eo.transaction(e,t).objectStore(e)},Bc=async(e,t)=>(await ni(),new Promise((r,n)=>{const s=Ko(e,"readwrite").put(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),jN=async(e,t)=>(await ni(),new Promise((r,n)=>{const i=Eo.transaction(e,"readwrite"),s=i.objectStore(e);t.forEach(c=>s.put(c)),i.oncomplete=()=>r(),i.onerror=()=>n(i.error)})),SN=async(e,t)=>(await ni(),new Promise((r,n)=>{const s=Ko(e).get(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),EN=async e=>(await ni(),new Promise((t,r)=>{const i=Ko(e).getAll();i.onsuccess=()=>t(i.result||[]),i.onerror=()=>r(i.error)})),Mb=async(e,t,r)=>(await ni(),new Promise((n,i)=>{const u=Ko(e).index(t).getAll(r);u.onsuccess=()=>n(u.result||[]),u.onerror=()=>i(u.error)})),jL=async(e,t)=>(await ni(),new Promise((r,n)=>{const s=Ko(e,"readwrite").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})),Zt={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},un=async(e,t,r={})=>{await ni();const n={type:e,payload:t,metadata:r,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((i,s)=>{const u=Ko(tt.PENDING_ACTIONS,"readwrite").add(n);u.onsuccess=()=>{i(u.result)},u.onerror=()=>s(u.error)})},ON=async()=>EN(tt.PENDING_ACTIONS),tf=async()=>(await ON()).length,zS=async e=>jL(tt.PENDING_ACTIONS,e),SL=async(e,t)=>(await ni(),new Promise((r,n)=>{const i=Ko(tt.PENDING_ACTIONS,"readwrite"),s=i.get(e);s.onsuccess=()=>{const c=s.result;if(c){const u={...c,...t},m=i.put(u);m.onsuccess=()=>r(u),m.onerror=()=>n(m.error)}else n(new Error("Action not found"))},s.onerror=()=>n(s.error)})),EL=async e=>jN(tt.PROJECTS,e),LS=async e=>e?Mb(tt.PROJECTS,"company_id",e):EN(tt.PROJECTS),OL=async e=>{const t=e.map(r=>bL(r,["status","weight","name"]));return jN(tt.AREAS,t)},IS=async e=>Mb(tt.AREAS,"project_id",e),wg=async(e,t)=>{const r=await SN(tt.AREAS,e);return r&&(r.status=t,r.updated_at=new Date().toISOString(),r._offlineModifiedAt=new Date().toISOString(),await Bc(tt.AREAS,r)),r},Od=async e=>Bc(tt.CREW_CHECKINS,e),US=async e=>Bc(tt.TM_TICKETS,e),Xr=()=>{const e=new Uint8Array(6);crypto.getRandomValues(e);const t=Array.from(e,r=>r.toString(36)).join("");return`temp_${Date.now()}_${t}`},Ts=async e=>Bc(tt.DAILY_REPORTS,e),CL=async(e,t)=>(await Mb(tt.DAILY_REPORTS,"project_id",e)).find(n=>n.report_date===t)||null,BS=async e=>Bc(tt.MESSAGES,e);let Rb=typeof navigator<"u"?navigator.onLine:!0;const yy=new Set,qb=e=>(yy.add(e),()=>yy.delete(e)),qn=()=>Rb,$S=e=>{Rb=e,yy.forEach(t=>t(e))};typeof window<"u"&&(window.addEventListener("online",()=>{$S(!0)}),window.addEventListener("offline",()=>{$S(!1)}));let jg=!1;const CN=async(e,t={})=>{if(jg||!Rb)return{synced:0,failed:0,conflicts:[]};const{onConflict:r}=t;jg=!0;const n={synced:0,failed:0,conflicts:[]};try{const i=await ON();for(const s of i)try{if(s.payload?.id&&s.type===Zt.UPDATE_AREA_STATUS){const c=await AL(e,s.type,s.payload);if(c){const u=await SN(tt.AREAS,s.payload.areaId||s.payload.id);if(u){const m=vL(u,c,["status"]);if(m.hasConflict){const h=_L(m,"area");if(n.conflicts.push({action:s,conflict:m,summary:h}),r&&await r({action:s,conflict:m,summary:h})===yL.KEEP_SERVER){await zS(s.id);continue}}}}}await NL(s,e),await zS(s.id),n.synced++}catch(c){n.failed++,await SL(s.id,{attempts:(s.attempts||0)+1,last_error:c.message,last_attempt:new Date().toISOString()})}}finally{jg=!1}return n},AL=async(e,t,r)=>{try{switch(t){case Zt.UPDATE_AREA_STATUS:return e.getArea?await e.getArea(r.areaId):null;default:return null}}catch{return null}},NL=async(e,t)=>{const{type:r,payload:n}=e;switch(r){case Zt.UPDATE_AREA_STATUS:return t.updateAreaStatus(n.areaId,n.status);case Zt.CREATE_TM_TICKET:{const i=await t.createTMTicket(n.ticket);return n.workers?.length>0&&await t.addTMWorkers(i.id,n.workers),n.items?.length>0&&await t.addTMItems(i.id,n.items),i}case Zt.SAVE_CREW_CHECKIN:return t.saveCrewCheckin(n.projectId,n.workers,n.checkInDate);case Zt.SUBMIT_DAILY_REPORT:return await t.saveDailyReport(n.projectId,n.reportData),t.submitDailyReport(n.projectId,n.submittedBy);case Zt.SEND_MESSAGE:return t.sendMessage(n.projectId,n.senderType,n.senderName,n.content);case Zt.CREATE_MATERIAL_REQUEST:return t.createMaterialRequest(n.projectId,n.items,n.requestedBy,n.neededBy,n.priority,n.notes);default:throw new Error(`Unknown action type: ${r}`)}},zb="",AN="",P=!!zb,T=P?rN(zb,AN):null,Cd={slowQueryThreshold:200,enableSupabase:P},Ke={query(e,t){const r={type:"query",operation:e,duration_ms:t.duration,rows_returned:t.rows,company_id:t.company_id||null,project_id:t.project_id||null,user_id:t.user_id||null,timestamp:new Date().toISOString()};Cd.enableSupabase&&t.duration>=Cd.slowQueryThreshold&&Sg("query",r)},error(e,t){const r={type:"error",category:e,severity:t.severity||"error",error_code:t.code||null,message:t.message,company_id:t.company_id||null,user_id:t.user_id||null,project_id:t.project_id||null,operation:t.operation||null,context:t.extra||{},timestamp:new Date().toISOString()};Cd.enableSupabase&&Sg("error",r)},storage(e,t){const r={type:"storage",operation:e,company_id:t.company_id||null,project_id:t.project_id||null,file_size_bytes:t.size||0,duration_ms:t.duration||0,success:t.success!==!1,error_message:t.error||null,timestamp:new Date().toISOString()};Cd.enableSupabase&&(!r.success||r.duration_ms>5e3)&&Sg("storage",r)},activity(e,t){}};async function Sg(e,t){if(T)try{e==="error"?await T.rpc("log_error",{p_severity:t.severity,p_category:t.category,p_message:t.message,p_company_id:t.company_id,p_user_id:t.user_id,p_project_id:t.project_id,p_operation:t.operation,p_error_code:t.error_code,p_context:t.context||{}}):e==="query"&&await T.rpc("log_query_metric",{p_operation:t.operation,p_duration_ms:t.duration_ms,p_rows_returned:t.rows_returned,p_company_id:t.company_id,p_project_id:t.project_id,p_user_id:t.user_id,p_context:{}})}catch{}}Ke.wrapQuery=function(e,t){return async function(...r){const n=performance.now();try{const i=await t.apply(this,r),c={duration:Math.round(performance.now()-n),rows:Array.isArray(i)?i.length:void 0};return Ke.query(e,c),i}catch(i){const s=Math.round(performance.now()-n);throw Ke.error("database",{message:i.message,operation:e,severity:"error",extra:{duration:s}}),i}}};Ke.time=async function(e,t){const r=performance.now();try{const n=await t(),i=Math.round(performance.now()-r);return Ke.query(e,{duration:i}),n}catch(n){throw Ke.error("general",{message:n.message,operation:e}),n}};const by="fieldsync_field_session";let gc=null;const $c=()=>{if(gc)return gc;try{const e=sessionStorage.getItem(by);if(e)return gc=JSON.parse(e),gc}catch{}return null},rf=e=>{gc=e,e?sessionStorage.setItem(by,JSON.stringify(e)):sessionStorage.removeItem(by)},_y=async()=>{const e=$c();if(e?.token&&P)try{await T.rpc("invalidate_field_session",{p_session_token:e.token})}catch{}rf(null)};let ac=null;const Lb=()=>{const e=$c();return!e?.token||!P?T:((!ac||ac._sessionToken!==e.token)&&(ac=rN(zb,AN,{global:{headers:{"x-field-session":e.token}}}),ac._sessionToken=e.token),ac)},$i=()=>$c()?.token?Lb():T,_e=()=>P?$c()?.token?Lb():T:null,xy=()=>{const e=$c();return!!(e?.token&&e?.projectId)},wy="fieldsync_data",hf="fieldsync_user",HS={projects:[],areas:[],users:[],assignments:[]},Oe=()=>{try{const e=localStorage.getItem(wy);return e?JSON.parse(e):HS}catch{return localStorage.removeItem(wy),HS}},Ge=e=>{localStorage.setItem(wy,JSON.stringify(e))},Ad=()=>{try{const e=localStorage.getItem(hf);return e?JSON.parse(e):null}catch{return localStorage.removeItem(hf),null}},Nd=e=>{e?localStorage.setItem(hf,JSON.stringify(e)):localStorage.removeItem(hf)},kL={async createCOR(e,t=0){if(P){let r=e.cor_number;t>0&&(r=await this.getNextCORNumber(e.project_id));const{data:n,error:i}=await T.from("change_orders").insert({company_id:e.company_id,project_id:e.project_id,area_id:e.area_id||null,cor_number:r,title:e.title,description:e.description||"",scope_of_work:e.scope_of_work,period_start:e.period_start,period_end:e.period_end,status:"draft",labor_markup_percent:e.labor_markup_percent??1500,materials_markup_percent:e.materials_markup_percent??1500,equipment_markup_percent:e.equipment_markup_percent??1500,subcontractors_markup_percent:e.subcontractors_markup_percent??500,liability_insurance_percent:e.liability_insurance_percent??144,bond_percent:e.bond_percent??100,license_fee_percent:e.license_fee_percent??10,created_by:e.created_by||null}).select().single();if((i?.code==="23505"||i?.code==="PGRST116"||i?.status===409||i?.message?.includes("duplicate")||i?.message?.includes("unique_cor_number"))&&t<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${t+1})`),this.createCOR(e,t+1);if(i)throw i;return n}return null},async updateCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteCOR(e){if(P){const{error:t}=await T.from("change_orders").delete().eq("id",e);if(t)throw t}},async bulkUpdateCORGroup(e,t){if(P){const{error:r}=await T.from("change_orders").update({group_name:t,updated_at:new Date().toISOString()}).in("id",e);if(r)throw r.message?.includes("group_name")||r.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):r}},async getCORs(e,t={}){if(P){let r=T.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",e);t.status&&(r=r.eq("status",t.status)),t.area_id&&(r=r.eq("area_id",t.area_id)),t.date_start&&(r=r.gte("period_start",t.date_start)),t.date_end&&(r=r.lte("period_end",t.date_end)),r=r.order("created_at",{ascending:!1});const{data:n,error:i}=await r;if(i)throw i;return n}return[]},async getCORById(e){if(P){const{data:t,error:r}=await T.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",e).single();if(r)throw r;return t}return null},async getCORsByArea(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").select("*").eq("project_id",e).eq("area_id",t).order("created_at",{ascending:!1});if(n)throw n;return r}return[]},async getAssignableCORs(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",e).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(n)throw n;return r||[]}return[]},async getNextCORNumber(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("cor_number").eq("project_id",e);if(r)throw r;if(t&&t.length>0){let n=0;for(const i of t){const s=i.cor_number?.match(/COR #(\d+)/);if(s){const c=parseInt(s[1]);c>n&&(n=c)}}return`COR #${n+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(e,t){if(P){const r=Math.round(t.regular_hours*t.regular_rate),n=Math.round(t.overtime_hours*t.overtime_rate),i=r+n,{data:s,error:c}=await T.from("change_order_labor").insert({change_order_id:e,labor_class:t.labor_class,wage_type:t.wage_type||"standard",regular_hours:t.regular_hours||0,overtime_hours:t.overtime_hours||0,regular_rate:t.regular_rate||0,overtime_rate:t.overtime_rate||0,regular_total:r,overtime_total:n,total:i,sort_order:t.sort_order||0,source_ticket_id:t.source_ticket_id||null}).select().single();if(c)throw c;return s}return null},async updateCORLaborItem(e,t){if(P){let r={...t};if(t.regular_hours!==void 0||t.regular_rate!==void 0||t.overtime_hours!==void 0||t.overtime_rate!==void 0){const{data:s}=await T.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",e).single(),c=t.regular_hours??s?.regular_hours??0,u=t.overtime_hours??s?.overtime_hours??0,m=t.regular_rate??s?.regular_rate??0,h=t.overtime_rate??s?.overtime_rate??0;r.regular_total=Math.round(c*m),r.overtime_total=Math.round(u*h),r.total=r.regular_total+r.overtime_total}const{data:n,error:i}=await T.from("change_order_labor").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORLaborItem(e){if(P){const{error:t}=await T.from("change_order_labor").delete().eq("id",e);if(t)throw t}},async addCORMaterialItem(e,t){if(P){const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_materials").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"each",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCORMaterialItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_materials").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_materials").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORMaterialItem(e){if(P){const{error:t}=await T.from("change_order_materials").delete().eq("id",e);if(t)throw t}},async addCOREquipmentItem(e,t){if(P){const n=["backup_sheet","invoice","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_equipment").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"day",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCOREquipmentItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_equipment").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_equipment").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCOREquipmentItem(e){if(P){const{error:t}=await T.from("change_order_equipment").delete().eq("id",e);if(t)throw t}},async addCORSubcontractorItem(e,t){if(P){const r=Math.round(t.quantity*t.unit_cost),{data:n,error:i}=await T.from("change_order_subcontractors").insert({change_order_id:e,description:t.description,quantity:t.quantity||1,unit:t.unit||"lump sum",unit_cost:t.unit_cost||0,total:r,source_type:t.source_type||"custom",source_reference:t.source_reference||null,sort_order:t.sort_order||0}).select().single();if(i)throw i;return n}return null},async updateCORSubcontractorItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_subcontractors").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORSubcontractorItem(e){if(P){const{error:t}=await T.from("change_order_subcontractors").delete().eq("id",e);if(t)throw t}},async addBulkLaborItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>{const m=Math.round(c.regular_hours*c.regular_rate),h=Math.round(c.overtime_hours*c.overtime_rate);return{change_order_id:e,labor_class:c.labor_class,wage_type:c.wage_type||"standard",regular_hours:c.regular_hours||0,overtime_hours:c.overtime_hours||0,regular_rate:c.regular_rate||0,overtime_rate:c.overtime_rate||0,regular_total:m,overtime_total:h,total:m+h,sort_order:c.sort_order??u,source_ticket_id:c.source_ticket_id||null}}),{data:i,error:s}=await r.from("change_order_labor").insert(n).select();if(s)throw s;return i}return[]},async addBulkMaterialItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",p=Math.round(Number(u.unit_cost)||0),g=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:g,unit:u.unit||"each",unit_cost:p,total:Math.round(g*p),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_materials").insert(i).select();if(c)throw c;return s}return[]},async addBulkEquipmentItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",p=Math.round(Number(u.unit_cost)||0),g=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:g,unit:u.unit||"day",unit_cost:p,total:Math.round(g*p),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_equipment").insert(i).select();if(c)throw c;return s}return[]},async addBulkSubcontractorItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>({change_order_id:e,company_name:c.company_name||"",description:c.description||"",quantity:c.quantity||1,unit:c.unit||"lump sum",unit_cost:c.unit_cost||c.total||c.amount||0,total:c.total||c.amount||0,source_type:c.source_type||"invoice",source_reference:c.source_reference||null,sort_order:c.sort_order??u})),{data:i,error:s}=await r.from("change_order_subcontractors").insert(n).select();if(s)throw s;return i}return[]},async clearCORLineItems(e){if(!P)return;const t=_e();if(!t)throw new Error("Database client not available");try{const r=await Promise.all([t.from("change_order_labor").delete().eq("change_order_id",e),t.from("change_order_materials").delete().eq("change_order_id",e),t.from("change_order_equipment").delete().eq("change_order_id",e),t.from("change_order_subcontractors").delete().eq("change_order_id",e)]);for(const n of r)if(n.error)throw n.error}catch(r){throw console.error("Error clearing COR line items:",r),r}},async saveCORLineItems(e,{laborItems:t,materialItems:r,equipmentItems:n,subcontractorItems:i}){if(P){await this.clearCORLineItems(e);const s=await Promise.all([t?.length>0?this.addBulkLaborItems(e,t):[],r?.length>0?this.addBulkMaterialItems(e,r):[],n?.length>0?this.addBulkEquipmentItems(e,n):[],i?.length>0?this.addBulkSubcontractorItems(e,i):[]]);return{labor:s[0],materials:s[1],equipment:s[2],subcontractors:s[3]}}return null},async assignTicketToCOR(e,t){if(P){const{error:r}=await T.rpc("assign_ticket_to_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"assignTicketToCOR",extra:{ticketId:e,corId:t}}),r;return{ticket_id:e,change_order_id:t}}return null},async unassignTicketFromCOR(e,t){if(P){const{error:r}=await T.rpc("unassign_ticket_from_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"unassignTicketFromCOR",extra:{ticketId:e,corId:t}}),r}},async checkTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("check_ticket_cor_integrity");if(t)throw t;return e||[]}return[]},async fixTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("fix_ticket_cor_integrity");if(t)throw t;return e}return 0},async getTicketsForCOR(e){if(P){const{data:t,error:r}=await T.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",e);if(r)throw r;return t}return[]},async getUnassignedTickets(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(r)throw r;return t}return[]},async importTicketDataToCOR(e,t,r,n,i){if(P){const s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",e).single();if(u)throw u;const{data:m,error:h}=await s.from("labor_rates").select("*").eq("company_id",r).eq("work_type",n||"demolition").eq("job_type",i||"standard");if(h)throw h;const p={};m?.forEach(S=>{p[S.role.toLowerCase()]=S});const g={};c.t_and_m_workers?.forEach(S=>{const O=(S.role||"laborer").toLowerCase();g[O]||(g[O]={regular_hours:0,overtime_hours:0}),g[O].regular_hours+=parseFloat(S.hours)||0,g[O].overtime_hours+=parseFloat(S.overtime_hours)||0});const _=Object.entries(g).map(([S,O])=>{const C=p[S]||{regular_rate:0,overtime_rate:0},A=Math.round((parseFloat(C.regular_rate)||0)*100),k=Math.round((parseFloat(C.overtime_rate)||0)*100);return{labor_class:S.charAt(0).toUpperCase()+S.slice(1),wage_type:i||"standard",regular_hours:O.regular_hours,overtime_hours:O.overtime_hours,regular_rate:A,overtime_rate:k,source_ticket_id:e}});_.length>0&&await this.addBulkLaborItems(t,_);const x=[],w=[];c.t_and_m_items?.forEach(S=>{const O=S.custom_name||S.materials_equipment?.name||"Unknown Item",C=S.custom_category||S.materials_equipment?.category||"Other",A=S.materials_equipment?.unit||"each",k=Math.round((parseFloat(S.materials_equipment?.cost_per_unit)||0)*100),D={description:O,quantity:S.quantity||1,unit:A,unit_cost:k,source_type:"backup_sheet",source_ticket_id:e};C==="Equipment"?w.push(D):x.push(D)}),x.length>0&&await this.addBulkMaterialItems(t,x),w.length>0&&await this.addBulkEquipmentItems(t,w);const{error:j}=await s.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",t).eq("ticket_id",e);if(j)throw j;return Ke.activity("cor_import_success",{ticket_id:e,cor_id:t,labor_count:_.length,material_count:x.length,equipment_count:w.length}),{laborItems:_,materialItems:x,equipmentItems:w}}return null},async reimportTicketDataToCOR(e,t,r,n,i){if(P){const s=_e();if(!s)throw new Error("Database client not available");return await s.from("change_order_labor").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_materials").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_equipment").delete().eq("change_order_id",t).eq("source_ticket_id",e),this.importTicketDataToCOR(e,t,r,n,i)}return null},async markImportFailed(e,t,r="Import failed"){if(P){const n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:r}).eq("change_order_id",t).eq("ticket_id",e);if(i)throw Ke.error("database",{message:i.message,operation:"markImportFailed",extra:{ticketId:e,corId:t}}),i;Ke.error("cor_import_failed",{ticket_id:e,cor_id:t,error:r})}},async getTicketsNeedingImport(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",e).eq("change_order_ticket_associations.import_status","failed");if(r)throw r;return t||[]}return[]},async getTicketImportStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",e).eq("change_order_id",t).single();if(n&&n.code!=="PGRST116")throw n;return r}return null},async recalculateCOR(e){if(P){const{error:t}=await T.rpc("recalculate_cor_totals",{cor_id:e});if(t)throw t;return this.getCORById(e)}return null},async updateCORMarkupPercentages(e,t){if(P){const r={};t.labor!==void 0&&(r.labor_markup_percent=t.labor),t.materials!==void 0&&(r.materials_markup_percent=t.materials),t.equipment!==void 0&&(r.equipment_markup_percent=t.equipment),t.subcontractors!==void 0&&(r.subcontractors_markup_percent=t.subcontractors);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async updateCORFeePercentages(e,t){if(P){const r={};t.liabilityInsurance!==void 0&&(r.liability_insurance_percent=t.liabilityInsurance),t.bond!==void 0&&(r.bond_percent=t.bond),t.licenseFee!==void 0&&(r.license_fee_percent=t.licenseFee);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async submitCORForApproval(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}return null},async approveCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"approved",approved_by:t,approved_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async rejectCOR(e,t=null){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"rejected",rejection_reason:t}).eq("id",e).select().single();if(n)throw n;return r}return null},async markCORAsBilled(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"billed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async closeCOR(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"closed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async saveCORSignature(e,t,r){if(P){const{data:n,error:i}=await T.from("change_orders").update({gc_signature_data:t,gc_signature_name:r,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",e).select().single();if(i)throw i;return n}return null},async getCORStats(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("status, cor_total").eq("project_id",e);if(r)throw r;const n={total_cors:t.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return t.forEach(i=>{switch(i.status){case"draft":n.draft_count++;break;case"pending_approval":n.pending_count++,n.total_pending_value+=i.cor_total||0;break;case"approved":n.approved_count++,n.total_approved_value+=i.cor_total||0;break;case"rejected":n.rejected_count++;break;case"billed":case"closed":n.billed_count++,n.total_billed_value+=i.cor_total||0;break}}),n}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(e,t){return P?T.channel(`change_orders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCorTickets(e,t){return P?T.channel(`cor-tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${e}`},t).subscribe():null},async getCORLog(e){if(P){const{data:t,error:r}=await T.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",e).order("log_number",{ascending:!0});if(r)throw console.error("Error fetching COR log:",r),r;return(t||[]).map(n=>({id:n.id,logNumber:n.log_number,dateSentToClient:n.date_sent_to_client,ceNumber:n.ce_number,comments:n.comments,createdAt:n.created_at,updatedAt:n.updated_at,changeOrder:{id:n.change_order?.id,corNumber:n.change_order?.cor_number,title:n.change_order?.title,corTotal:n.change_order?.cor_total,status:n.change_order?.status,createdAt:n.change_order?.created_at,approvedAt:n.change_order?.approved_at,approvedBy:n.change_order?.approved_by}}))}return[]},async updateCORLogEntry(e,t){if(P){const r={updated_at:new Date().toISOString()};t.dateSentToClient!==void 0&&(r.date_sent_to_client=t.dateSentToClient||null),t.ceNumber!==void 0&&(r.ce_number=t.ceNumber||null),t.comments!==void 0&&(r.comments=t.comments||null);const{data:n,error:i}=await T.from("cor_log_entries").update(r).eq("id",e).select().single();if(i)throw console.error("Error updating COR log entry:",i),i;return n}return null},async updateChangeOrderStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw console.error("Error updating change order status:",n),n;return r}return null},subscribeToCORLog(e,t){return P?T.channel(`cor-log:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocuments(e,t){return P?T.channel(`documents:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"documents",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocumentFolders(e,t){return P?T.channel(`document_folders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"document_folders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialsEquipment(e,t){return P?T.channel(`materials_equipment:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToLaborRates(e,t){return P?T.channel(`labor_rates:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToProject(e,t){return P?T.channel(`project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${e}`},t).subscribe():null},subscribeToPunchList(e,t){return P?T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},t).subscribe():null},async createSignatureRequest(e,t,r,n,i=null,s=null){if(P){const c=_e();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.rpc("generate_signature_token");if(m)throw m;const{data:h,error:p}=await c.from("signature_requests").insert({document_type:e,document_id:t,company_id:r,project_id:n,signature_token:u,expires_at:s,created_by:i}).select().single();if(p)throw p;return h}return null},async getSignatureRequestByToken(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");await t.rpc("increment_signature_view_count",{token:e});const{data:r,error:n}=await t.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",e).single();if(n)throw n;return r}return null},async getSignatureRequestsForDocument(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",e).eq("document_id",t).order("created_at",{ascending:!1});if(i)throw i;return n||[]}return[]},async addSignature(e,t,r){if(P){const n=_e();if(!n)throw new Error("Database client not available");const{data:i,error:s}=await n.from("signatures").insert({signature_request_id:e,signature_slot:t,signature_image:r.signature,signer_name:r.signerName,signer_title:r.signerTitle||null,signer_company:r.signerCompany||null,signed_at:r.signedAt||new Date().toISOString(),ip_address:r.ipAddress||null,user_agent:r.userAgent||null}).select().single();if(s)throw s;return i}return null},async syncSignatureToDocument(e,t){if(!P)return null;const r=_e();if(!r)throw new Error("Database client not available");const{document_type:n,document_id:i}=t,s=e.signature_slot,c={};s===1?(c.gc_signature_data=e.signature_image,c.gc_signature_name=e.signer_name,c.gc_signature_title=e.signer_title,c.gc_signature_company=e.signer_company,c.gc_signature_date=e.signed_at,c.gc_signature_ip=e.ip_address):s===2&&(c.client_signature_data=e.signature_image,c.client_signature_name=e.signer_name,c.client_signature_title=e.signer_title,c.client_signature_company=e.signer_company,c.client_signature_date=e.signed_at,c.client_signature_ip=e.ip_address);const u=n==="cor"?"change_orders":"t_and_m_tickets",{data:m,error:h}=await r.from(u).update(c).eq("id",i).select().single();if(h)throw h;return m},async revokeSignatureRequest(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("signature_requests").update({status:"revoked"}).eq("id",e).select().single();if(n)throw n;return r}return null},async getDocumentForSigning(e,t){if(!P)return null;const r=_e();if(!r)throw new Error("Database client not available");if(e==="cor"){const{data:n,error:i}=await r.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",t).single();if(i)throw i;return n}else if(e==="tm_ticket"){const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (
              id,
              name,
              unit,
              cost_per_unit,
              category
            )
          )
        `).eq("id",t).single();if(i)throw i;return n}return null},async getProjectCosts(e){if(P){const{data:r,error:n}=await T.from("project_costs").select("*").eq("project_id",e).order("cost_date",{ascending:!1});return n?(console.error("Error fetching project costs:",n),[]):r||[]}return(Oe().projectCosts||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.cost_date)-new Date(r.cost_date))},async addProjectCost(e,t,r){const n={project_id:e,company_id:t,category:r.category,description:r.description,amount:parseFloat(r.amount),cost_date:r.cost_date||new Date().toISOString().split("T")[0],notes:r.notes||null,created_by:r.created_by||null};if(P){const{data:c,error:u}=await T.from("project_costs").insert(n).select().single();if(u)throw console.error("Error adding project cost:",u),u;return c}const i=Oe();i.projectCosts||(i.projectCosts=[]);const s={...n,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i.projectCosts.push(s),Ge(i),s},async updateProjectCost(e,t){const r={category:t.category,description:t.description,amount:parseFloat(t.amount),cost_date:t.cost_date,notes:t.notes||null,updated_at:new Date().toISOString()};if(P){const{data:s,error:c}=await T.from("project_costs").update(r).eq("id",e).select().single();if(c)throw console.error("Error updating project cost:",c),c;return s}const n=Oe();if(!n.projectCosts)return null;const i=n.projectCosts.findIndex(s=>s.id===e);return i===-1?null:(n.projectCosts[i]={...n.projectCosts[i],...r},Ge(n),n.projectCosts[i])},async deleteProjectCost(e){if(P){const{error:r}=await T.from("project_costs").delete().eq("id",e);if(r)throw console.error("Error deleting project cost:",r),r;return!0}const t=Oe();return t.projectCosts&&(t.projectCosts=t.projectCosts.filter(r=>r.id!==e),Ge(t)),!0},async getProjectCostsSummary(e){const t=await this.getProjectCosts(e),r={};let n=0;return t.forEach(i=>{const s=parseFloat(i.amount)||0;n+=s,r[i.category]||(r[i.category]={category:i.category,total:0,count:0,items:[]}),r[i.category].total+=s,r[i.category].count++,r[i.category].items.push(i)}),Object.values(r).forEach(i=>{i.percentage=n>0?i.total/n*100:0}),{totalCost:n,byCategory:r,itemCount:t.length}},async getNextInvoiceNumber(e){if(P){const{data:t,error:r}=await T.rpc("get_next_invoice_number",{p_company_id:e});return r?(console.error("Error getting next invoice number:",r),this._generateLocalInvoiceNumber(e)):t}return this._generateLocalInvoiceNumber(e)},async _generateLocalInvoiceNumber(e){const r=(await this.getCompanyInvoices(e)).reduce((n,i)=>{const s=i.invoice_number?.match(/^INV-(\d+)$/);if(s){const c=parseInt(s[1],10);return c>n?c:n}return n},0);return`INV-${String(r+1).padStart(4,"0")}`},async getBillableItems(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("id, cor_number, title, cor_total, status, approved_at").eq("project_id",e).eq("status","approved").order("cor_number",{ascending:!0});r&&console.error("Error fetching billable CORs:",r);const{data:n,error:i}=await T.from("t_and_m_tickets").select("id, work_date, ce_pco_number, change_order_value, status, client_signature_date").eq("project_id",e).eq("status","approved").not("client_signature_data","is",null).order("work_date",{ascending:!0});return i&&console.error("Error fetching billable T&M tickets:",i),{cors:t||[],tickets:n||[]}}return{cors:[],tickets:[]}},async getProjectInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("project_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching project invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.project_id===e)},async getCompanyInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select("*").eq("company_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching company invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.company_id===e)},async createInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").insert({project_id:e.project_id,company_id:e.company_id,invoice_number:e.invoice_number,invoice_date:e.invoice_date,due_date:e.due_date,status:e.status||"draft",retention_percent:e.retention_percent||0,bill_to_name:e.bill_to_name,bill_to_address:e.bill_to_address,bill_to_contact:e.bill_to_contact,notes:e.notes,terms:e.terms||"Net 30",created_by:e.created_by}).select().single();if(s)throw console.error("Error creating invoice:",s),s;if(t&&t.length>0){const c=t.map((m,h)=>({invoice_id:i.id,item_type:m.item_type,reference_id:m.reference_id,reference_number:m.reference_number,description:m.description,amount:m.amount,sort_order:h})),{error:u}=await T.from("invoice_items").insert(c);if(u)throw console.error("Error creating invoice items:",u),await T.from("invoices").delete().eq("id",i.id),u}return this.getInvoice(i.id)}const r=Oe();r.invoices||(r.invoices=[]);const n={...e,id:Xr(),created_at:new Date().toISOString(),invoice_items:t||[]};return r.invoices.push(n),Ge(r),n},async getInvoice(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",e).single();if(n)throw console.error("Error fetching invoice:",n),n;return r}return(Oe().invoices||[]).find(r=>r.id===e)},async updateInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").update(t).eq("id",e).select().single();if(s)throw console.error("Error updating invoice:",s),s;return i}const r=Oe(),n=(r.invoices||[]).findIndex(i=>i.id===e);return n>=0?(r.invoices[n]={...r.invoices[n],...t},Ge(r),r.invoices[n]):null},async markInvoiceSent(e){return this.updateInvoice(e,{status:"sent",sent_at:new Date().toISOString()})},async recordInvoicePayment(e,t){const r=await this.getInvoice(e);if(!r)throw new Error("Invoice not found");const n=(r.amount_paid||0)+t,i=n>=r.total;return this.updateInvoice(e,{amount_paid:n,status:i?"paid":"partial",paid_at:i?new Date().toISOString():null})},async deleteInvoice(e){if(P){const{error:r}=await T.from("invoices").delete().eq("id",e).eq("status","draft");if(r)throw console.error("Error deleting invoice:",r),r;return!0}const t=Oe();return t.invoices=(t.invoices||[]).filter(r=>r.id!==e),Ge(t),!0},async markItemsBilled(e=[],t=[]){if(P){if(e.length>0){const{error:r}=await T.from("change_orders").update({status:"billed"}).in("id",e);r&&console.error("Error marking CORs as billed:",r)}if(t.length>0){const{error:r}=await T.from("t_and_m_tickets").update({status:"billed"}).in("id",t);r&&console.error("Error marking T&M tickets as billed:",r)}}}},DL={async getCompanyEquipment(e,t=!0){if(!P)return console.warn("Supabase not configured"),[];let r=T.from("equipment").select("*").eq("company_id",e).order("name");t&&(r=r.eq("is_active",!0));const{data:n,error:i}=await r;return i?(console.error("Error fetching company equipment:",i),[]):n||[]},async createEquipment(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("equipment").insert(e).select().single();if(r)throw console.error("Error creating equipment:",r),r;return t},async updateEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("equipment").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating equipment:",n),n;return r},async deactivateEquipment(e){return this.updateEquipment(e,{is_active:!1})},async getProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).order("start_date",{ascending:!1});return r?(console.error("Error fetching project equipment:",r),[]):t||[]},async getActiveProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).is("end_date",null).order("start_date",{ascending:!1});return r?(console.error("Error fetching active project equipment:",r),[]):t||[]},async addEquipmentToProject(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("project_equipment").insert(e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(r)throw console.error("Error adding equipment to project:",r),r;return t},async updateProjectEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("project_equipment").update(t).eq("id",e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(n)throw console.error("Error updating project equipment:",n),n;return r},async markEquipmentReturned(e,t=null){return this.updateProjectEquipment(e,{end_date:t||new Date().toISOString().split("T")[0]})},async removeEquipmentFromProject(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("project_equipment").delete().eq("id",e);if(t)throw console.error("Error removing project equipment:",t),t;return!0},calculateProjectEquipmentCost(e){const t=new Date;return t.setHours(0,0,0,0),e.reduce((r,n)=>{const i=new Date(n.start_date);i.setHours(0,0,0,0);let s;n.end_date?(s=new Date(n.end_date),s.setHours(0,0,0,0)):s=t;const c=Math.max(1,Math.floor((s-i)/(1e3*60*60*24))+1);return r+n.daily_rate*c},0)},calculateDaysOnSite(e,t=null){const r=new Date(e);r.setHours(0,0,0,0);let n;return t?n=new Date(t):n=new Date,n.setHours(0,0,0,0),Math.max(1,Math.floor((n-r)/(1e3*60*60*24))+1)}},TL={async getNextDrawNumber(e){if(!P)return console.warn("Supabase not configured"),1;const{data:t,error:r}=await T.from("draw_requests").select("draw_number").eq("project_id",e).order("draw_number",{ascending:!1}).limit(1).single();return r&&r.code!=="PGRST116"&&console.error("Error getting next draw number:",r),(t?.draw_number||0)+1},async getPreviousBillingTotals(e){if(!P)return console.warn("Supabase not configured"),{totalBilled:0,totalRetention:0};const{data:t,error:r}=await T.from("draw_requests").select("current_billing, retention_held").eq("project_id",e).in("status",["submitted","approved","paid"]);if(r)return console.error("Error getting previous billing totals:",r),{totalBilled:0,totalRetention:0};const n=(t||[]).reduce((s,c)=>s+(c.current_billing||0),0),i=t?.length>0?Math.max(...t.map(s=>s.retention_held||0)):0;return{totalBilled:n,totalRetention:i}},async getProjectDrawRequests(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("draw_requests").select("*").eq("project_id",e).order("draw_number",{ascending:!1});return r?(console.error("Error fetching draw requests:",r),[]):t||[]},async getDrawRequest(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("draw_requests").select(`
        *,
        draw_request_items (
          *
        )
      `).eq("id",e).single();return r?(console.error("Error fetching draw request:",r),null):t},async createDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").insert(e).select().single();if(n)throw console.error("Error creating draw request:",n),n;if(t&&t.length>0){const i=t.map((c,u)=>({...c,draw_request_id:r.id,sort_order:u})),{error:s}=await T.from("draw_request_items").insert(i);s&&console.error("Error creating draw request items:",s)}return this.getDrawRequest(r.id)},async updateDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating draw request:",n),n;return r},async updateDrawRequestStatus(e,t){const r={status:t};return t==="submitted"?r.submitted_at=new Date().toISOString():t==="approved"?r.approved_at=new Date().toISOString():t==="paid"&&(r.paid_at=new Date().toISOString()),this.updateDrawRequest(e,r)},async updateDrawRequestItems(e,t){if(!P)return console.warn("Supabase not configured"),!1;const{error:r}=await T.from("draw_request_items").delete().eq("draw_request_id",e);if(r)throw console.error("Error deleting old draw request items:",r),r;if(t&&t.length>0){const n=t.map((s,c)=>({...s,draw_request_id:e,sort_order:c})),{error:i}=await T.from("draw_request_items").insert(n);if(i)throw console.error("Error inserting draw request items:",i),i}return!0},async deleteDrawRequest(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("draw_requests").delete().eq("id",e);if(t)throw console.error("Error deleting draw request:",t),t;return!0},async getScheduleOfValues(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("areas").select("id, name, square_footage, price_per_sqft").eq("project_id",e).order("created_at");return r?(console.error("Error fetching schedule of values:",r),[]):(t||[]).map((n,i)=>({area_id:n.id,item_number:String(i+1),description:n.name,scheduled_value:Math.round((n.square_footage||0)*(n.price_per_sqft||0)*100)}))},async getPreviousDrawItems(e){if(!P)return console.warn("Supabase not configured"),{};const{data:t,error:r}=await T.from("draw_requests").select("id").eq("project_id",e).in("status",["submitted","approved","paid"]).order("draw_number",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")return console.error("Error fetching latest draw:",r),{};if(!t)return{};const{data:n,error:i}=await T.from("draw_request_items").select("area_id, total_percent, total_amount").eq("draw_request_id",t.id);return i?(console.error("Error fetching previous draw items:",i),{}):(n||[]).reduce((s,c)=>(c.area_id&&(s[c.area_id]={previous_percent:c.total_percent||0,previous_amount:c.total_amount||0}),s),{})},calculatePercentFromAmount(e,t){return!t||t===0?0:Math.round(e/t*1e4)},calculateAmountFromPercent(e,t){return Math.round(e/1e4*t)}};typeof window<"u"&&ni().catch(e=>console.error("Failed to init offline DB:",e));const Eg=()=>{const e="fieldsync_device_id";let t=localStorage.getItem(e);return t||(t=crypto.randomUUID(),localStorage.setItem(e,t)),t},nf={async signUp(e,t,r,n){if(P){const{data:i,error:s}=await T.auth.signUp({email:e,password:t,options:{data:{name:r,role:n}}});if(s)throw s;return i}else{const i=Oe(),s={id:crypto.randomUUID(),email:e,name:r,role:n,created_at:new Date().toISOString()};return i.users.push(s),Ge(i),Nd(s),{user:s}}},async signIn(e,t){if(P){const{data:r,error:n}=await T.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r}else{const n=Oe().users.find(i=>i.email===e);if(!n)throw new Error("User not found");return Nd(n),{user:n}}},async signOut(){if(P){const{error:e}=await T.auth.signOut();if(e)throw e}else Nd(null)},async getUser(){if(P){const{data:{user:e}}=await T.auth.getUser();return e}else return Ad()},async getProfile(){if(P){const{data:{user:e}}=await T.auth.getUser();if(!e)return null;const{data:t,error:r}=await T.from("users").select("*").eq("id",e.id).single();return r?{id:e.id,email:e.email,name:e.user_metadata?.name||"",role:e.user_metadata?.role||"foreman"}:t}else return Ad()},async updateRole(e,t){if(P){const{data:r,error:n}=await T.from("users").update({role:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.users.find(i=>i.id===e);return n&&(n.role=t,Ge(r),Ad()?.id===e&&Nd(n)),n}},onAuthStateChange(e){if(P)return T.auth.onAuthStateChange(e);{const t=Ad();return e(t?"SIGNED_IN":"SIGNED_OUT",{user:t}),{data:{subscription:{unsubscribe:()=>{}}}}}}},be={async getProjects(e=null,t=!1){if(P){if(!qn()){const n=await LS(e);return t?n:n.filter(i=>i.status!=="archived")}const r=performance.now();try{let n=T.from("projects").select("*").order("created_at",{ascending:!1});e&&(n=n.eq("company_id",e)),t||(n=n.eq("status","active"));const{data:i,error:s}=await n,c=Math.round(performance.now()-r);if(Ke.query("getProjects",{duration:c,rows:i?.length,company_id:e}),s){Ke.error("database",{message:s.message,operation:"getProjects",company_id:e});const u=await LS(e);if(u.length>0)return u;throw s}return i?.length>0&&EL(i).catch(u=>console.error("Failed to cache projects:",u)),i}catch(n){throw Ke.error("database",{message:n.message,operation:"getProjects",company_id:e}),n}}else{const r=Oe().projects;return t?r:r.filter(n=>n.status!=="archived")}},async getProjectsPaginated(e,{page:t=0,limit:r=25,status:n="active"}={}){if(P){const c=performance.now();try{let u=T.from("projects").select("*",{count:"exact"}).eq("company_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n!=="all"&&(u=u.eq("status",n));const{data:m,error:h,count:p}=await u,g=Math.round(performance.now()-c);if(Ke.query("getProjectsPaginated",{duration:g,rows:m?.length,page:t,company_id:e}),h)throw h;return{projects:m||[],totalCount:p||0,hasMore:(t+1)*r<(p||0),page:t,limit:r}}catch(u){throw Ke.error("database",{message:u.message,operation:"getProjectsPaginated",company_id:e}),u}}const i=Oe().projects.filter(c=>c.company_id===e&&(n==="all"||c.status===n)),s=t*r;return{projects:i.slice(s,s+r),totalCount:i.length,hasMore:s+r<i.length,page:t,limit:r}},async getProjectsWithSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!1}),i=Math.round(performance.now()-t);if(Ke.query("getProjectsWithSummary",{duration:i,rows:r?.length,company_id:e}),n)throw n;return(r||[]).map(s=>({...s,areaCount:s.areas?.[0]?.count||0,ticketCount:s.tickets?.[0]?.count||0,pendingTicketCount:0,reportCount:s.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,daily_reports:void 0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectsWithSummary",company_id:e}),this.getProjects(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getProjectDashboardSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.rpc("get_project_dashboard_summary",{p_company_id:e}),i=Math.round(performance.now()-t);if(Ke.query("getProjectDashboardSummary",{duration:i,rows:r?.length,company_id:e}),n){if(n.message?.includes("function")||n.code==="42883")return this.getProjectsWithSummary(e);throw n}return(r||[]).map(s=>({id:s.project_id,name:s.project_name,status:s.project_status,job_number:s.project_number,address:s.project_address,pin:s.project_pin,created_at:s.created_at,start_date:s.start_date,end_date:s.end_date,contract_value:Number(s.contract_value)||0,work_type:s.work_type||"demolition",job_type:s.job_type||"standard",general_contractor:s.general_contractor||"",areaCount:Number(s.total_areas)||0,completedAreas:Number(s.completed_areas)||0,inProgressAreas:Number(s.in_progress_areas)||0,pendingAreas:Number(s.pending_areas)||0,ticketCount:Number(s.total_tickets)||0,pendingTicketCount:Number(s.pending_tickets)||0,submittedTicketCount:Number(s.submitted_tickets)||0,approvedTicketCount:Number(s.approved_tickets)||0,totalLaborHours:Number(s.total_labor_hours)||0,todayLaborHours:Number(s.today_labor_hours)||0,todayWorkerCount:Number(s.today_worker_count)||0,lastActivityAt:s.last_activity_at,dailyReportsThisWeek:Number(s.daily_reports_this_week)||0,corCount:Number(s.cor_count)||0,pendingCorCount:Number(s.pending_cor_count)||0,disposalLoadsToday:Number(s.disposal_loads_today)||0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectDashboardSummary",company_id:e}),this.getProjectsWithSummary(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getArchivedProjects(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("company_id",e).eq("status","archived").order("archived_at",{ascending:!1});if(r)throw r;return t}else return Oe().projects.filter(t=>t.status==="archived")},async getProjectCount(e){if(P){const{count:t,error:r}=await T.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",e).in("status",["active","archived"]);if(r)throw r;return t||0}else return Oe().projects.filter(r=>r.company_id===e&&r.status!=="deleted").length},async universalSearch(e,t,r=10){if(!P||!t?.trim())return{projects:[],tickets:[],cors:[],workers:[]};const n=t.trim().toLowerCase(),i={projects:[],tickets:[],cors:[],workers:[]};try{const{data:s}=await T.from("projects").select("id, name, job_number, address, status").eq("company_id",e).eq("status","active").or(`name.ilike.%${n}%,job_number.ilike.%${n}%,address.ilike.%${n}%`).limit(r);i.projects=s||[];const{data:c}=await T.from("t_and_m_tickets").select(`
          id, notes, work_date, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).ilike("notes",`%${n}%`).order("work_date",{ascending:!1}).limit(r);i.tickets=(c||[]).map(p=>({...p,projectName:p.projects?.name||"Unknown Project"}));const{data:u}=await T.from("change_orders").select(`
          id, cor_number, title, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).or(`title.ilike.%${n}%,cor_number.ilike.%${n}%`).order("created_at",{ascending:!1}).limit(r);i.cors=(u||[]).map(p=>({...p,projectName:p.projects?.name||"Unknown Project"}));const{data:m}=await T.from("crew_checkins").select(`
          workers,
          project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).order("check_in_date",{ascending:!1}).limit(50),h=new Map;return(m||[]).forEach(p=>{(p.workers||[]).forEach(g=>{if(g.name.toLowerCase().includes(n)){const _=g.name.toLowerCase();h.has(_)||h.set(_,{name:g.name,role:g.role,projectName:p.projects?.name,lastProject:p.projects})}})}),i.workers=Array.from(h.values()).slice(0,r),i}catch(s){return console.error("Universal search error:",s),i}},async archiveProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="archived",r.archived_at=new Date().toISOString(),Ge(t)),r}},async getProjectStorageStats(e){if(!P)return{photoCount:0,estimatedMB:0};const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);if(r)throw r;let n=0;const i=[];t?.forEach(c=>{c.photos&&Array.isArray(c.photos)&&(n+=c.photos.length,i.push(...c.photos))});const s=n*1.5;return{photoCount:n,estimatedMB:s,photoUrls:i}},async archiveProjectDeep(e,t){if(!P)return null;const{photoUrls:r}=await this.getProjectStorageStats(e);if(r.length>0){const s=r.map(c=>{if(!c)return null;if(c.startsWith("http"))try{const m=new URL(c).pathname.match(/\/tm-photos\/(.+)$/);return m?m[1]:null}catch{return null}return c}).filter(Boolean);if(s.length>0)for(let c=0;c<s.length;c+=100){const u=s.slice(c,c+100);await T.storage.from("tm-photos").remove(u)}}await T.from("t_and_m_tickets").update({photos:[]}).eq("project_id",e);const{data:n,error:i}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",e).select().single();if(i)throw i;return{...n,photosDeleted:r.length}},async restoreProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"active",archived_at:null}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="active",r.archived_at=null,Ge(t)),r}},async getProject(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("id",e).single();if(r)throw r;return t}else return Oe().projects.find(t=>t.id===e)},async createProject(e){if(P){const{data:t,error:r}=await T.from("projects").insert({...e,status:"active"}).select().single();if(r)throw console.error("Supabase createProject error:",r.message,r.details,r.hint),r;return t}else{const t=Oe(),r={...e,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return t.projects.push(r),Ge(t),r}},async getProjectByPin(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("pin",e).eq("status","active").single();return r?null:t}else return Oe().projects.find(r=>r.pin===e&&r.status==="active")||null},async getProjectByPinAndCompany(e,t){if(P){const{data:r,error:n}=await T.from("projects").select("*").eq("pin",e).eq("company_id",t).eq("status","active").single();return n?null:r}else return Oe().projects.find(n=>n.pin===e&&n.company_id===t&&n.status==="active")||null},async getProjectByPinSecure(e,t){if(P){const r=`pin_attempts_${t}`,n=`pin_lockout_${t}`,i=5,s=300*1e3,c=localStorage.getItem(n);if(c&&Date.now()<parseInt(c)){const w=parseInt(c)-Date.now(),j=Math.ceil(w/6e4);return{success:!1,rateLimited:!0,project:null,error:`Too many attempts. Please try again in ${j} minute${j>1?"s":""}.`}}const u=Eg(),{data:m,error:h}=await T.rpc("validate_pin_and_create_session",{p_pin:e,p_company_code:t,p_device_id:u,p_ip_address:null});if(h)return console.warn("[PIN Auth] RPC unavailable, using direct PIN lookup:",h.message),await this._pinFallbackDirectQuery(e,t,r,n,i,s);if(!m||m.length===0)return{success:!1,rateLimited:!1,project:null};const p=m[0];if(p.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(p.error_code==="INVALID_COMPANY"||p.error_code==="INVALID_PIN"){let w=parseInt(localStorage.getItem(r)||"0");return w++,localStorage.setItem(r,w.toString()),w>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}if(!p.success||!p.project_id)return{success:!1,rateLimited:!1,project:null};localStorage.removeItem(`pin_attempts_${t}`),localStorage.removeItem(`pin_lockout_${t}`),rf({token:p.session_token,projectId:p.project_id,companyId:p.company_id,projectName:p.project_name,companyName:p.company_name,createdAt:new Date().toISOString()});const g=Lb(),{data:_,error:x}=await g.from("projects").select("*").eq("id",p.project_id).single();return{success:!0,rateLimited:!1,sessionToken:p.session_token,project:_||{id:p.project_id,name:p.project_name,company_id:p.company_id,status:"active"}}}else{const r=Oe(),i=(r.companies||[]).find(c=>c.code===t);if(!i)return{success:!1,rateLimited:!1,project:null};const s=r.projects.find(c=>c.pin===e&&c.company_id===i.id&&c.status==="active");if(s){const c=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;rf({token:c,projectId:s.id,companyId:i.id,projectName:s.name,companyName:i.name,createdAt:new Date().toISOString()})}return{success:!!s,rateLimited:!1,project:s||null}}},async _pinFallbackDirectQuery(e,t,r,n,i,s){try{const{data:c,error:u}=await T.from("companies").select("*").ilike("code",t.trim()).single();if(u||!c)return{success:!1,rateLimited:!1,project:null};const{data:m,error:h}=await T.from("projects").select("*").eq("pin",e.trim()).eq("company_id",c.id).eq("status","active").single();if(h||!m){let g=parseInt(localStorage.getItem(r)||"0");return g++,localStorage.setItem(r,g.toString()),g>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}localStorage.removeItem(r),localStorage.removeItem(n);let p=null;try{const g=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(x=>x.toString(16).padStart(2,"0")).join(""),{error:_}=await T.from("field_sessions").insert({project_id:m.id,company_id:c.id,session_token:g,device_id:typeof Eg=="function"?Eg():null});_||(p=g)}catch{}return p&&rf({token:p,projectId:m.id,companyId:c.id,projectName:m.name,companyName:c.name,createdAt:new Date().toISOString()}),{success:!0,rateLimited:!1,project:m}}catch(c){return console.error("[PIN Auth] Fallback query failed:",c),{success:!1,rateLimited:!1,project:null,error:"Connection error. Please try again."}}},async isPinAvailable(e,t=null){if(P){let r=T.from("projects").select("id").eq("pin",e);t&&(r=r.neq("id",t));const{data:n,error:i}=await r;if(i)throw i;return n.length===0}else return!Oe().projects.some(n=>n.pin===e&&n.id!==t)},async updateProjectPin(e,t){if(P){const{data:r,error:n}=await T.from("projects").update({pin:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.projects.find(i=>i.id===e);return n&&(n.pin=t,Ge(r)),n}},async updateProject(e,t,r=null){if(P){if(!r)throw console.error("[Security] updateProject called without companyId - this is a security risk"),new Error("Company ID is required for security verification");const{data:n,error:i}=await T.from("projects").update(t).eq("id",e).eq("company_id",r).select().single();if(i)throw console.error("Error updating project"),i;return n}else{const n=Oe(),i=n.projects.find(s=>s.id===e);return i&&(Object.assign(i,t),Ge(n)),i}},async deleteProject(e,t=null){if(P){let r=[];try{const{data:c}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);c?.forEach(u=>{Array.isArray(u.photos)&&u.photos.forEach(m=>{if(m)if(m.startsWith("http"))try{const h=new URL(m).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);h&&r.push(decodeURIComponent(h[1]))}catch{}else r.push(m)})})}catch{}if(r.length>0)try{for(let c=0;c<r.length;c+=100)await T.storage.from("tm-photos").remove(r.slice(c,c+100))}catch{}await T.from("t_and_m_tickets").delete().eq("project_id",e),await T.from("daily_reports").delete().eq("project_id",e);let n=T.from("projects").delete({count:"exact"}).eq("id",e);t&&(n=n.eq("company_id",t));const{error:i,count:s}=await n;if(i)throw i;if(s===0)throw new Error("Project could not be deleted. You may not have permission (admin or owner role required).")}else{const r=Oe();r.projects=r.projects.filter(n=>n.id!==e),r.areas=r.areas.filter(n=>n.project_id!==e),Ge(r)}},async getAreas(e){if(P){if(!qn())return IS(e);const t=_e(),{data:r,error:n}=await t.from("areas").select("*").eq("project_id",e).order("sort_order",{ascending:!0});if(n){const i=await IS(e);if(i.length>0)return i;throw n}return r?.length>0&&OL(r).catch(i=>console.error("Failed to cache areas:",i)),r}else return Oe().areas.filter(t=>t.project_id===e)},async createArea(e){if(P){const t=_e(),{data:r,error:n}=await t.from("areas").insert(e).select().single();if(n)throw n;return r}else{const t=Oe(),r={...e,id:crypto.randomUUID(),created_at:new Date().toISOString()};return t.areas.push(r),Ge(t),r}},async updateAreaStatus(e,t,r=null){if(P){if(!qn()){const u=await wg(e,t);return await un(Zt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}let i=_e().from("areas").update({status:t}).eq("id",e);r&&(i=i.eq("project_id",r));const{data:s,error:c}=await i.select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u=await wg(e,t);return await un(Zt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}throw c}return s&&wg(e,t).catch(u=>console.error("Failed to update cached area status:",u)),s}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(i.status=t,i.updated_at=new Date().toISOString()),Ge(n),i}},async updateArea(e,t,r=null){if(P){let n=T.from("areas").update(t).eq("id",e);r&&(n=n.eq("project_id",r));const{data:i,error:s}=await n.select().single();if(s)throw s;return i}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(Object.assign(i,t),i.updated_at=new Date().toISOString()),Ge(n),i}},async deleteArea(e,t=null){if(P){let r=T.from("areas").delete().eq("id",e);t&&(r=r.eq("project_id",t));const{error:n}=await r;if(n)throw n}else{const r=Oe();r.areas=r.areas.filter(n=>n.id!==e),Ge(r)}},subscribeToAreas(e,t){return P?T.channel(`areas:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMessages(e,t){return P?T.channel(`messages:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialRequests(e,t){return P?T.channel(`material_requests:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDailyReports(e,t){return P?T.channel(`daily_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCrewCheckins(e,t){return P?T.channel(`crew_checkins:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToInjuryReports(e,t){return P?T.channel(`injury_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToTMTickets(e,t){return P?T.channel(`tm_tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCompanyActivity(e,t,r){if(!P||!t||t.length===0)return null;const n=T.channel(`company_activity:${e}`);return t.forEach(i=>{n.on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${i}`},s=>r.onMessage?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${i}`},s=>r.onMaterialRequest?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${i}`},s=>r.onTMTicket?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${i}`},s=>r.onCrewCheckin?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${i}`},s=>r.onAreaUpdate?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${i}`},s=>r.onCORChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${i}`},s=>r.onProjectChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${i}`},s=>r.onPunchListChange?.(s))}),n.on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},i=>r.onInjuryReport?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},i=>r.onMaterialsEquipmentChange?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},i=>r.onLaborRateChange?.(i)),n.subscribe()},unsubscribe(e){e&&P&&T.removeChannel(e)},async getAssignedProjects(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",e);if(r)throw r;return t.map(n=>n.projects)}else{const t=Oe();return(t.assignments?.filter(n=>n.user_id===e)||[]).map(n=>t.projects.find(i=>i.id===n.project_id)).filter(Boolean)}},async assignUserToProject(e,t,r){if(P){const{data:n,error:i}=await T.from("project_assignments").insert({project_id:e,user_id:t,assigned_by:r}).select().single();if(i)throw i;return n}else{const n=Oe();n.assignments||(n.assignments=[]);const i={id:crypto.randomUUID(),project_id:e,user_id:t,assigned_by:r,assigned_at:new Date().toISOString()};return n.assignments.push(i),Ge(n),i}},async removeUserFromProject(e,t){if(P){const{error:r}=await T.from("project_assignments").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}else{const r=Oe();r.assignments=r.assignments?.filter(n=>!(n.project_id===e&&n.user_id===t))||[],Ge(r)}},async getProjectAssignments(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",e);if(r)throw r;return t.map(n=>n.users)}else{const t=Oe();return(t.assignments?.filter(n=>n.project_id===e)||[]).map(n=>t.users.find(i=>i.id===n.user_id)).filter(Boolean)}},async getAllUsers(){if(P){const{data:e,error:t}=await T.from("users").select("*").order("name");if(t)throw t;return e}else return Oe().users||[]},async getForemen(){if(P){const{data:e,error:t}=await T.from("users").select("*").eq("role","foreman").order("name");if(t)throw t;return e}else return(Oe().users||[]).filter(e=>e.role==="foreman")},async logActivity(e,t,r,n,i,s){if(P){const{error:c}=await T.from("activity_log").insert({user_id:e,project_id:t,area_id:r,action:n,old_value:i,new_value:s});c&&console.error("Error logging activity:",c)}},async getProjectActivity(e,t=50){if(P){const{data:r,error:n}=await T.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r}return[]},async getMaterialsEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").select("*").eq("company_id",e).eq("active",!0).order("category").order("name");if(r)throw r;return t}return[]},async getMaterialsEquipmentByCategory(e,t){if(P){const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("materials_equipment").select("*").eq("company_id",e).eq("category",t).eq("active",!0).order("name");if(i)throw i;return n}return[]},async getAllMaterialsEquipment(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("materials_equipment").select("*").eq("company_id",e).order("category").order("name");if(n)throw n;return r}return[]},async createMaterialEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").insert(e).select().single();if(r)throw r;return t}return null},async updateMaterialEquipment(e,t){if(P){const{data:r,error:n}=await T.from("materials_equipment").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteMaterialEquipment(e){if(P){const{error:t}=await T.from("materials_equipment").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborCategories(e){if(P){const{data:t,error:r}=await T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async createLaborCategory(e,t,r=0){if(P){const{data:n,error:i}=await T.from("labor_categories").insert({company_id:e,name:t,sort_order:r}).select().single();if(i)throw i;return n}return null},async updateLaborCategory(e,t){if(P){const{data:r,error:n}=await T.from("labor_categories").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborCategory(e){if(P){const{error:t}=await T.from("labor_categories").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClasses(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async getLaborClassesWithCategories(e){if(P){const[t,r]=await Promise.all([T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name"),T.from("labor_classes").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;return{categories:t.data||[],classes:r.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(e){if(P){const t=_e();if(!t)return{categories:[],classes:[]};const{data:r,error:n}=await t.rpc("get_labor_classes_for_field",{p_company_id:e});if(n){console.error("Error loading field labor classes:",n);const[c,u]=await Promise.all([t.from("labor_categories").select("id, name").eq("company_id",e).eq("active",!0).order("name"),t.from("labor_classes").select("id, name, category_id").eq("company_id",e).eq("active",!0).order("name")]);return{categories:c.data||[],classes:u.data||[]}}const i=new Map,s=[];for(const c of r||[])c.category_id&&c.category_name&&!i.has(c.category_id)&&i.set(c.category_id,{id:c.category_id,name:c.category_name}),s.push({id:c.id,name:c.name,category_id:c.category_id});return{categories:Array.from(i.values()),classes:s}}return{categories:[],classes:[]}},async createLaborClass(e,t,r,n=0){if(P){const{data:i,error:s}=await T.from("labor_classes").insert({company_id:e,category_id:t,name:r,sort_order:n}).select().single();if(s)throw s;return i}return null},async updateLaborClass(e,t){if(P){const{data:r,error:n}=await T.from("labor_classes").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborClass(e){if(P){const{error:t}=await T.from("labor_classes").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_class_rates").select("*").eq("labor_class_id",e);if(r)throw r;return t||[]}return[]},async getAllLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",e).eq("active",!0);if(r)throw r;return t||[]}return[]},async saveLaborClassRates(e,t){if(P){const r=t.map(i=>({...i,labor_class_id:e})),{error:n}=await T.from("labor_class_rates").upsert(r,{onConflict:"labor_class_id,work_type,job_type"});if(n)throw n}},async getLaborClassRate(e,t,r){if(P){const{data:n,error:i}=await T.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",e).eq("work_type",t).eq("job_type",r).single();if(i&&i.code!=="PGRST116")throw i;return n||null}return null},async getTMTickets(e){if(P){const t=performance.now(),r=_e(),i=xy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{const{data:s,error:c}=await r.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${i}
            )
          `).eq("project_id",e).order("created_at",{ascending:!1}),u=Math.round(performance.now()-t);if(Ke.query("getTMTickets",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s}catch(s){throw Ke.error("database",{message:s.message,operation:"getTMTickets",project_id:e}),s}}return[]},async getTMTicketsPaginated(e,{page:t=0,limit:r=25,status:n=null}={}){if(P){const i=performance.now(),s=_e(),u=xy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{let m=s.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${u}
            )
          `,{count:"exact"}).eq("project_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n&&(m=m.eq("status",n));const{data:h,error:p,count:g}=await m,_=Math.round(performance.now()-i);if(Ke.query("getTMTicketsPaginated",{duration:_,rows:h?.length,page:t,project_id:e}),p)throw p;return{tickets:h||[],totalCount:g||0,hasMore:(t+1)*r<(g||0),page:t,limit:r}}catch(m){throw Ke.error("database",{message:m.message,operation:"getTMTicketsPaginated",project_id:e}),m}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",e).not("ce_pco_number","is",null).neq("ce_pco_number","");if(r)throw r;const n={};let i=0,s=0;return t?.forEach(c=>{const u=c.ce_pco_number;if(n[u]||(n[u]={approved:0,pending:0,count:0}),n[u].count++,c.status==="approved"||c.status==="billed"){const m=parseFloat(c.change_order_value)||0;n[u].approved+=m,i+=m}else c.status==="pending"&&s++}),{changeOrders:n,totalApprovedValue:i,pendingCount:s}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(e,t){if(P){const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).eq("status",t).order("created_at",{ascending:!1});if(i)throw i;return n}return[]},async getCORTickets(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",e).order("work_date",{ascending:!0});if(n)throw n;return r||[]}return[]},async createTMTicket(e){if(P){if(!qn()){const i={id:Xr(),project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending_sync",created_by_name:e.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await US(i),await un(Zt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}const t=_e();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("t_and_m_tickets").insert({project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending",created_by_name:e.created_by_name||"Field User"}).select().single();if(n){if(n.message?.includes("fetch")||n.message?.includes("network")){const i={id:Xr(),...e,status:"pending_sync",_offline:!0};return await US(i),await un(Zt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}throw n}return r}return null},async addTMWorkers(e,t){if(P){const r=t.map(s=>({ticket_id:e,name:s.name,hours:s.hours,overtime_hours:s.overtime_hours||0,time_started:s.time_started||null,time_ended:s.time_ended||null,role:s.role||"Laborer"})),n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_workers").insert(r);if(i)throw i}},async addTMItems(e,t){if(P){const r=t.map(s=>({ticket_id:e,material_equipment_id:s.material_equipment_id||null,custom_name:s.custom_name||null,custom_category:s.custom_category||null,quantity:s.quantity})),n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_items").insert(r);if(i)throw i}},async getPreviousTicketCrew(e,t){if(!P)return null;const r=_e();if(!r)return null;const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",e).lt("work_date",t).order("work_date",{ascending:!1}).limit(1).maybeSingle();if(i||!n)return null;const s=n.t_and_m_workers||[],c=s.some(g=>g.labor_class_id),u={};c&&s.forEach(g=>{g.labor_class_id&&(u[g.labor_class_id]||(u[g.labor_class_id]=[]),u[g.labor_class_id].push({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||""}))});const m=s.filter(g=>["Foreman","General Foreman","Superintendent"].includes(g.role)).map(g=>({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||"",role:g.role})),h=s.filter(g=>g.role==="Operator").map(g=>({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||""})),p=s.filter(g=>g.role==="Laborer").map(g=>({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||""}));return{workDate:n.work_date,supervision:m.length>0?m:null,operators:h.length>0?h:null,laborers:p.length>0?p:null,dynamicWorkers:Object.keys(u).length>0?u:null,totalWorkers:s.length}},async updateTMTicketStatus(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({status:t}).eq("id",e).select().single();if(i)throw i;return n}return null},async approveTMTicket(e,t,r,n=null){if(P){const i={status:"approved",approved_by_user_id:t,approved_by_name:r,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};n!==null&&(i.change_order_value=parseFloat(n)||0);const s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(u)throw u;return c}return null},async rejectTMTicket(e,t,r,n=""){if(P){const i=_e();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:t,rejected_by_name:r,rejected_at:new Date().toISOString(),rejection_reason:n,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",e).select().single();if(c)throw c;return s}return null},canApproveTickets(e){return["owner","admin","manager"].includes(e)},async updateTMTicketPhotos(e,t,r=null){if(P){const n=_e();if(!n)throw new Error("Database client not available");const i={photos:t};r&&(i.photo_locations=r);const{data:s,error:c}=await n.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(c)throw c;return s}return null},async saveTMClientSignature(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({client_signature_data:t.signature,client_signature_name:t.signerName,client_signature_title:t.signerTitle,client_signature_company:t.signerCompany,client_signature_date:t.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteTMTicket(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("t_and_m_tickets").delete().eq("id",e);if(r)throw r}},async isTicketEditable(e){if(!e?.assigned_cor_id)return{editable:!0};if(P)try{const{data:t,error:r}=await T.from("change_orders").select("id, status, cor_number").eq("id",e.assigned_cor_id).single();if(r||!t)return{editable:!0};const i=["draft","pending_approval"].includes(t.status);return{editable:i,lockedBy:i?null:t,reason:i?null:`This ticket is linked to ${t.cor_number} which has been ${t.status==="approved"?"approved":t.status}`}}catch(t){return console.error("Error checking ticket editability:",t),{editable:!0}}return{editable:!0}},async getCompanyByCode(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").ilike("code",e.trim()).single();return r?(console.error("[Company Lookup] Error:",{message:r.message,code:r.code,details:r.details,hint:r.hint}),null):t}return null},async getCompany(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").eq("id",e).single();if(r)throw r;return t}return null},async getUserCompanies(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching user companies:",r),[]):t.map(n=>({id:n.companies.id,name:n.companies.name,code:n.companies.code,access_level:n.access_level}))}return[]},async getUserPendingMemberships(e){if(P){const{count:t,error:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("status","pending");return r?(console.error("Error fetching pending memberships:",r),0):t||0}return 0},async getCompanyMemberships(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching company memberships:",r),[]):t||[]}return[]},async approveMembership(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:t}).eq("id",e);if(r)throw r}},async approveMembershipWithRole(e,t,r="member"){if(P){const{error:n}=await T.rpc("approve_membership_with_role",{membership_id:e,approved_by_user:t,new_access_level:r});if(n)throw n}},async rejectMembership(e){if(P){const{error:t}=await T.from("user_companies").delete().eq("id",e);if(t)throw t}},async removeMember(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:t}).eq("id",e);if(r)throw r}},async getProjectTeam(e){if(P){const{data:t,error:r}=await T.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",e).order("assigned_at",{ascending:!0});return r?(console.error("Error fetching project team:",r),[]):t||[]}return[]},async getCompanyMembers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching company members:",r),[]):t||[]}return[]},async addProjectMember(e,t,r,n){if(P){const{data:i,error:s}=await T.from("project_users").insert({project_id:e,user_id:t,project_role:r,assigned_by:n}).select().single();if(s)throw s;return i}return null},async updateProjectMemberRole(e,t,r){if(P){const{error:n}=await T.from("project_users").update({project_role:r}).eq("project_id",e).eq("user_id",t);if(n)throw n}},async removeProjectMember(e,t){if(P){const{error:r}=await T.from("project_users").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}},async updateMemberAccessLevel(e,t){if(P){const{error:r}=await T.from("user_companies").update({access_level:t}).eq("id",e);if(r)throw r}},async updateMemberCompanyRole(e,t){if(P){const{error:r}=await T.from("user_companies").update({company_role:t}).eq("id",e);if(r)throw r}},async repairLegacyUser(e,t,r="member"){if(!P||!e||!t)return!1;try{const{data:n,error:i}=await T.rpc("repair_legacy_user",{p_user_id:e,p_company_id:t,p_role:r});return i?(console.error("RPC repair_legacy_user failed:",i),!1):n===!0}catch(n){return console.error("Error repairing legacy user:",n),!1}},async isLegacyUser(e){if(!P)return!1;try{const{data:t}=await T.from("users").select("company_id, role").eq("id",e).single();if(!t?.company_id)return!1;const{count:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e);return r===0}catch(t){return console.error("Error checking legacy user:",t),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(e,t){if(!P)return[];const r=_e();if(!r)return[];const n=performance.now();try{const{data:i,error:s}=await r.from("disposal_loads").select("*").eq("project_id",e).eq("work_date",t).order("created_at",{ascending:!1}),c=Math.round(performance.now()-n);if(Ke.query("getDisposalLoads",{duration:c,rows:i?.length,project_id:e}),s)throw s;return i||[]}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoads",project_id:e}),i}},async getDisposalLoadsHistory(e,t=14){if(!P)return[];const r=_e();if(!r)return[];const n=performance.now();try{const i=new Date,s=new Date;s.setDate(s.getDate()-t);const{data:c,error:u}=await r.from("disposal_loads").select("*").eq("project_id",e).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",i.toISOString().split("T")[0]).order("work_date",{ascending:!1}),m=Math.round(performance.now()-n);if(Ke.query("getDisposalLoadsHistory",{duration:m,rows:c?.length,project_id:e}),u)throw u;return(c||[]).map(h=>({...h,load_date:h.work_date}))}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoadsHistory",project_id:e}),i}},async addDisposalLoad(e,t,r,n,i,s=null){if(!P)return null;const c=_e();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.from("disposal_loads").insert({project_id:e,user_id:t,work_date:r,load_type:n,load_count:i,notes:s}).select().single();if(m)throw Ke.error("database",{message:m.message,operation:"addDisposalLoad",project_id:e}),m;return u},async updateDisposalLoad(e,t,r,n=null){if(!P)return null;const i=_e();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("disposal_loads").update({load_type:t,load_count:r,notes:n}).eq("id",e).select().single();if(c)throw Ke.error("database",{message:c.message,operation:"updateDisposalLoad"}),c;return s},async deleteDisposalLoad(e){if(!P)return!1;const t=_e();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("disposal_loads").delete().eq("id",e);if(r)throw Ke.error("database",{message:r.message,operation:"deleteDisposalLoad"}),r;return!0},async getDisposalSummary(e,t=null,r=null){if(!P)return[];const n=_e();if(!n)return[];const i=performance.now();try{const{data:s,error:c}=await n.rpc("get_disposal_summary",{p_project_id:e,p_start_date:t,p_end_date:r}),u=Math.round(performance.now()-i);if(Ke.query("getDisposalSummary",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s||[]}catch(s){return Ke.error("database",{message:s.message,operation:"getDisposalSummary",project_id:e}),this.getDisposalSummaryFallback(e,t,r)}},async getDisposalSummaryFallback(e,t,r){let i=(_e()||T).from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e);t&&(i=i.gte("work_date",t)),r&&(i=i.lte("work_date",r));const{data:s,error:c}=await i;if(c)throw c;const u={};return s?.forEach(m=>{u[m.load_type]||(u[m.load_type]={load_type:m.load_type,total_loads:0,days:new Set}),u[m.load_type].total_loads+=m.load_count,u[m.load_type].days.add(m.work_date)}),Object.values(u).map(m=>({load_type:m.load_type,total_loads:m.total_loads,days_with_activity:m.days.size}))},async getWeeklyDisposalSummary(e,t=4){if(!P)return[];const r=_e();if(!r)return[];const n=new Date,i=new Date;i.setDate(i.getDate()-t*7);const{data:s,error:c}=await r.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e).gte("work_date",i.toISOString().split("T")[0]).lte("work_date",n.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(c)throw c;const u={};return s?.forEach(m=>{const h=new Date(m.work_date),p=new Date(h);p.setDate(h.getDate()-h.getDay());const g=p.toISOString().split("T")[0];u[g]||(u[g]={week:g,concrete:0,trash:0,metals:0,hazardous_waste:0}),u[g][m.load_type]+=m.load_count}),Object.values(u).sort((m,h)=>m.week.localeCompare(h.week))},async uploadPhoto(e,t,r,n){if(!P)return null;const i=_e();if(!i)throw new Error("Database client not available");const s=performance.now(),c=n.size||0,u=Date.now(),m=new Uint8Array(6);crypto.getRandomValues(m);const h=Array.from(m,x=>x.toString(36)).join(""),p=n.name?.split(".").pop()||"jpg",g=`${u}-${h}.${p}`,_=`${e}/${t}/${r}/${g}`;try{const{data:x,error:w}=await i.storage.from("tm-photos").upload(_,n,{cacheControl:"3600",upsert:!1}),j=Math.round(performance.now()-s);if(Ke.storage("upload",{company_id:e,project_id:t,size:c,duration:j,success:!w}),w)throw w;return _}catch(x){throw Ke.error("storage",{message:x.message,operation:"uploadPhoto",company_id:e,project_id:t}),x}},async uploadPhotoBase64(e,t,r,n,i="photo.jpg"){if(!P)return null;const s=_e();if(!s)throw new Error("Database client not available");const u=await(await fetch(n)).blob(),m=Date.now(),h=new Uint8Array(6);crypto.getRandomValues(h);const p=Array.from(h,S=>S.toString(36)).join(""),g=i.split(".").pop()||"jpg",_=`${m}-${p}.${g}`,x=`${e}/${t}/${r}/${_}`,{data:w,error:j}=await s.storage.from("tm-photos").upload(x,u,{cacheControl:"3600",upsert:!1,contentType:u.type});if(j)throw j;return x},async resolvePhotoUrl(e){if(!e||!P)return e;let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return e;t=decodeURIComponent(n[1])}catch{return e}else t=e;try{const r=$i(),{data:n,error:i}=await r.storage.from("tm-photos").createSignedUrl(t,3600);return i||!n?.signedUrl?null:n.signedUrl}catch{return null}},async resolvePhotoUrls(e){if(!P||!e?.length)return e||[];const t=[],r=[];for(let n=0;n<e.length;n++){const i=e[n];if(!i)continue;let s;if(i.startsWith("http"))try{const u=new URL(i).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);u&&(s=decodeURIComponent(u[1]))}catch{}else s=i;s&&(t.push(s),r.push(n))}if(!t.length)return e;try{const n=$i(),{data:i,error:s}=await n.storage.from("tm-photos").createSignedUrls(t,3600);if(s||!i)return e;const c=[...e];return i.forEach((u,m)=>{c[r[m]]=u.signedUrl||null}),c}catch{return e}},async deletePhoto(e){if(!P||!e)return;let t;if(e.startsWith("http"))try{const i=new URL(e).pathname.match(/\/tm-photos\/(.+)$/);if(!i)return;t=i[1]}catch{return}else t=e;const{error:r}=await T.storage.from("tm-photos").remove([t]);if(r)throw r},async verifyPhotoAccessible(e){if(!P||!e)return{accessible:!1,error:"Invalid input"};let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return{accessible:!1,error:"Not a tm-photos URL"};t=decodeURIComponent(n[1])}catch{return{accessible:!1,error:"Invalid URL"}}else t=e;try{const{data:r,error:n}=await T.storage.from("tm-photos").createSignedUrl(t,60);return n?{accessible:!1,error:n.message}:{accessible:!!r?.signedUrl,status:200}}catch(r){return{accessible:!1,error:r.message||"Verification failed"}}},async verifyTicketPhotos(e){if(!P)return{verified:!1,issues:[]};try{const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("id",e).single();if(r)throw r;if(!t?.photos||t.photos.length===0)return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",e),{verified:!0,status:"empty",issues:[]};const n=[];for(const s of t.photos){const c=await this.verifyPhotoAccessible(s);c.accessible||n.push({url:s,error:c.error})}const i=n.length===0?"verified":"issues";return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:i,photos_issue_count:n.length}).eq("id",e),{verified:n.length===0,status:i,totalPhotos:t.photos.length,issues:n}}catch(t){return console.error("Error verifying ticket photos:",t),{verified:!1,error:t.message,issues:[]}}},async queuePhotoUpload(e,t,r,n){if(!P)return null;const{data:i,error:s}=await T.from("photo_upload_queue").insert({ticket_id:e,temp_id:t,file_name:r,file_size_bytes:n,status:"pending"}).select().single();return s?(console.error("Error queueing photo upload:",s),null):i},async confirmQueuedUpload(e,t,r){if(!P)return!1;const{data:n,error:i}=await T.rpc("confirm_photo_upload",{p_queue_id:e,p_uploaded_url:t,p_storage_path:r});return i?(console.error("Error confirming photo upload:",i),!1):n===!0},async markQueuedUploadFailed(e,t){if(!P)return!1;const{data:r,error:n}=await T.rpc("mark_photo_upload_failed",{p_queue_id:e,p_error:t});return n?(console.error("Error marking photo upload failed:",n),!1):r===!0},async getPendingPhotoUploads(e){if(!P)return[];const{data:t,error:r}=await T.rpc("get_pending_photo_uploads",{p_ticket_id:e});return r?(console.error("Error getting pending photo uploads:",r),[]):t||[]},async logPhotoOperation(e,t,r={}){if(P)try{await T.from("photo_audit_log").insert({ticket_id:e,cor_id:r.corId||null,operation:t,photo_url:r.photoUrl||null,storage_path:r.storagePath||null,details:r.metadata?r.metadata:null,error_message:r.error||null,triggered_by:r.triggeredBy||"system"})}catch(n){console.error("Error logging photo operation:",n)}},async saveExportSnapshot(e,t,r={}){if(!P)return null;const{exportType:n="pdf",exportReason:i=null,clientEmail:s=null,clientName:c=null}=r;try{const{data:u,error:m}=await T.from("cor_export_snapshots").insert({cor_id:e,export_type:n,export_reason:i,cor_data:t.cor_data,tickets_data:t.tickets_data,photos_manifest:t.photos_manifest,totals_snapshot:t.totals_snapshot,checksum:t.checksum,client_email:s,client_name:c}).select().single();if(m)throw m;return u}catch(u){return console.error("Error saving export snapshot:",u),null}},async getExportSnapshots(e){if(!P)return[];const{data:t,error:r}=await T.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",e).order("exported_at",{ascending:!1});return r?(console.error("Error fetching export snapshots:",r),[]):t||[]},async getExportSnapshot(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_snapshots").select("*").eq("id",e).single();return r?(console.error("Error fetching export snapshot:",r),null):t},async requestCORExport(e,t,r={}){if(!P)return null;try{const n=await T.auth.getUser(),{data:i,error:s}=await T.rpc("request_cor_export",{p_cor_id:e,p_idempotency_key:t,p_options:r,p_requested_by:n?.data?.user?.id||null});if(s)throw s;return i?.[0]||null}catch(n){throw Ke.error("database",{message:n.message,operation:"requestCORExport",extra:{corId:e}}),n}},async getExportJob(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_jobs").select("*").eq("id",e).single();return r?(console.error("Error fetching export job:",r),null):t},async getExportJobs(e,t=10){if(!P)return[];const{data:r,error:n}=await T.from("cor_export_jobs").select("*").eq("cor_id",e).order("created_at",{ascending:!1}).limit(t);return n?(console.error("Error fetching export jobs:",n),[]):r||[]},async updateExportJobStatus(e,t,r={}){if(!P)return null;try{const{data:n,error:i}=await T.rpc("update_export_job_status",{p_job_id:e,p_status:t,p_snapshot_id:r.snapshotId||null,p_pdf_url:r.pdfUrl||null,p_error:r.error||null,p_error_details:r.errorDetails||null,p_metrics:r.metrics||null});if(i)throw i;return n}catch(n){throw Ke.error("database",{message:n.message,operation:"updateExportJobStatus",extra:{jobId:e,status:t}}),n}},async getCurrentCORSnapshot(e){if(!P)return null;const{data:t}=await T.from("change_orders").select("version, last_snapshot_version").eq("id",e).single();if(!t||t.version!==t.last_snapshot_version)return null;const{data:r}=await T.from("cor_export_snapshots").select("*").eq("cor_id",e).eq("is_current",!0).single();return r||null},async saveCORSnapshot(e,t){if(!P)return null;try{await T.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",e.corId);const r=await T.auth.getUser(),{data:n,error:i}=await T.from("cor_export_snapshots").insert({id:e.snapshotId,cor_id:e.corId,job_id:t,cor_version:e.corVersion,cor_data:e.corData,tickets_data:e.ticketsData,photos_manifest:e.photoManifest,totals_snapshot:e.totals,checksum:e.checksum,is_current:!0,exported_by:r?.data?.user?.id||null}).select().single();if(i)throw i;return await T.from("change_orders").update({last_snapshot_version:e.corVersion}).eq("id",e.corId),n}catch(r){throw Ke.error("database",{message:r.message,operation:"saveCORSnapshot",extra:{corId:e.corId}}),r}},async updateCORAggregatedStats(e){if(P)try{await T.rpc("update_cor_aggregated_stats",{p_cor_id:e})}catch(t){console.error("Error updating COR aggregated stats:",t)}},async getCrewCheckin(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),{data:i,error:s}=await n.from("crew_checkins").select("*").eq("project_id",e).eq("check_in_date",r).maybeSingle();return s&&console.error("Error fetching crew checkin:",s),i},async saveCrewCheckin(e,t,r=null,n=null){if(!P)return null;const i=n||new Date().toISOString().split("T")[0];if(!qn()){const m={id:Xr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Od(m),await un(Zt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const s=_e();if(!s){const m={id:Xr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Od(m),await un(Zt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const{data:c,error:u}=await s.from("crew_checkins").upsert({project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Xr(),project_id:e,check_in_date:i,workers:t,_offline:!0};return await Od(m),await un(Zt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}throw console.error("Error saving crew checkin:",u),u}return c&&Od(c).catch(m=>console.error("Failed to cache checkin:",m)),c},async addCrewMember(e,t,r=null){if(!P)return null;const n=await this.getCrewCheckin(e),i=n?.workers||[];return i.find(s=>s.name.toLowerCase()===t.name.toLowerCase())?n:(i.push(t),await this.saveCrewCheckin(e,i,r))},async removeCrewMember(e,t){if(!P)return null;const r=await this.getCrewCheckin(e);if(!r)return null;const n=r.workers.filter(i=>i.name.toLowerCase()!==t.toLowerCase());return await this.saveCrewCheckin(e,n,r.created_by)},async getCrewCheckinHistory(e,t=30){if(!P)return[];const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("crew_checkins").select("*").eq("project_id",e).order("check_in_date",{ascending:!1}).limit(t);return i?(console.error("Error fetching crew history:",i),[]):n||[]},async getRecentWorkers(e,t=30){if(!P)return[];const r=await this.getCrewCheckinHistory(e,t),n=new Map;return r.forEach(i=>{(i.workers||[]).forEach(s=>{const c=s.name.toLowerCase();n.has(c)||n.set(c,{name:s.name,role:s.role,labor_class_id:s.labor_class_id||null,lastSeen:i.check_in_date})})}),Array.from(n.values()).sort((i,s)=>i.name.localeCompare(s.name))},async getLaborRates(e,t=null,r=null){if(!P)return[];let n=T.from("labor_rates").select("*").eq("company_id",e);t&&(n=n.eq("work_type",t)),r&&(n=n.eq("job_type",r));const{data:i,error:s}=await n;return s?(console.error("Error fetching labor rates:",s),[]):i||[]},async calculateManDayCosts(e,t,r,n){if(!P)return{totalCost:0,totalManDays:0,breakdown:[]};const i=await this.getCrewCheckinHistory(e,365),s=await this.getLaborRates(t,r,n),c={};s.forEach(g=>{c[g.role.toLowerCase()]=parseFloat(g.regular_rate)||0});let u=0,m=0;const h={},p=[];return i.forEach(g=>{const _=g.workers||[];let x=0;const w={};_.forEach(j=>{const S=(j.role||"laborer").toLowerCase(),O=c[S]||0;w[S]||(w[S]={count:0,cost:0}),w[S].count++,w[S].cost+=O,x+=O,h[S]||(h[S]={count:0,cost:0,rate:O}),h[S].count++,h[S].cost+=O}),u+=x,m+=_.length,p.push({date:g.check_in_date,workers:_.length,cost:x,breakdown:w})}),{totalCost:u,totalManDays:m,byRole:h,byDate:p,daysWorked:i.length}},async getDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),{data:i,error:s}=await n.from("daily_reports").select("*").eq("project_id",e).eq("report_date",r).maybeSingle();return s&&console.error("Error fetching daily report:",s),i},async compileDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),[i,s,c]=await Promise.all([this.getCrewCheckin(e,r),n.from("areas").select("*").eq("project_id",e),n.from("t_and_m_tickets").select("*").eq("project_id",e).eq("work_date",r)]),u=s?.data||[],m=c?.data||[],h=u.filter(g=>g.status==="done"&&g.completed_at?.startsWith(r)),p=m.reduce((g,_)=>g+(_.photos?.length||0),0);return{crew_count:i?.workers?.length||0,crew_list:i?.workers||[],tasks_completed:h.length,tasks_total:u.length,completed_tasks:h.map(g=>({name:g.name,group:g.group_name})),tm_tickets_count:m.length,photos_count:p}},async saveDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!qn()){const u={id:Xr(),project_id:e,report_date:n,...t,updated_at:new Date().toISOString(),_offline:!0};return await Ts(u),u}const i=_e(),{data:s,error:c}=await i.from("daily_reports").upsert({project_id:e,report_date:n,...t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u={id:Xr(),project_id:e,report_date:n,...t,_offline:!0};return await Ts(u),u}throw console.error("Error saving daily report:",c),c}return s&&Ts(s).catch(u=>console.error("Failed to cache report:",u)),s},async submitDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!qn()){const m=await CL(e,n),h={id:Xr(),project_id:e,report_date:n,...m||{},status:"pending_sync",submitted_by:t,submitted_at:new Date().toISOString(),_offline:!0};return await Ts(h),await un(Zt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:m||{},submittedBy:t}),h}const i=await this.compileDailyReport(e,n),s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("daily_reports").upsert({project_id:e,report_date:n,...i,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Xr(),project_id:e,report_date:n,...i,status:"pending_sync",submitted_by:t,_offline:!0};return await Ts(m),await un(Zt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:i,submittedBy:t}),m}throw console.error("Error submitting daily report:",u),u}return c&&Ts(c).catch(m=>console.error("Failed to cache report:",m)),c},async getDailyReports(e,t=30){if(!P)return[];const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("daily_reports").select("*").eq("project_id",e).order("report_date",{ascending:!1}).limit(t);return i?(console.error("Error fetching daily reports:",i),[]):n||[]},async sendMessage(e,t,r,n,i=null,s=null,c="general",u=null){if(!P)return null;if(!qn()){const p={id:Xr(),project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u,created_at:new Date().toISOString(),_offline:!0};return await BS(p),await un(Zt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),p}const{data:m,error:h}=await T.from("messages").insert({project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const p={id:Xr(),project_id:e,sender_type:r,sender_name:n,message:t,created_at:new Date().toISOString(),_offline:!0};return await BS(p),await un(Zt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),p}throw console.error("Error sending message:",h),h}return m},async getMessages(e,t=50){if(!P)return[];const r=_e(),{data:n,error:i}=await r.from("messages").select("*").eq("project_id",e).order("created_at",{ascending:!1}).limit(t);return i?[]:n||[]},async getUnreadCount(e,t){if(!P)return 0;const r=_e(),n=t==="field"?"office":"field",{count:i,error:s}=await r.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1);return s?0:i||0},async markMessagesRead(e,t){if(!P)return;const r=_e(),n=t==="field"?"office":"field";await r.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1)},async createMaterialRequest(e,t,r,n=null,i="normal",s=null){if(!P)return null;if(!qn()){const m={id:Xr(),project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await un(Zt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}const{data:c,error:u}=await T.from("material_requests").insert({project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Xr(),project_id:e,items:t,requested_by:r,status:"pending_sync",_offline:!0};return await un(Zt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}throw console.error("Error creating material request:",u),u}return c},async getMaterialRequests(e,t=null){if(!P)return[];let r=T.from("material_requests").select("*").eq("project_id",e).order("created_at",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching material requests:",i),[]):n||[]},async getPendingRequestsCount(e){if(!P)return 0;const{count:t,error:r}=await T.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("status","pending");return r?0:t||0},async updateMaterialRequest(e,t,r,n=null,i=null){if(!P)return null;const s={status:t,responded_by:r,responded_at:new Date().toISOString(),response_notes:n,updated_at:new Date().toISOString()};i&&(s.expected_delivery=i),t==="delivered"&&(s.delivered_at=new Date().toISOString());const{data:c,error:u}=await T.from("material_requests").update(s).eq("id",e).select().single();if(u)throw console.error("Error updating material request:",u),u;return c},generateShareToken(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=new Uint8Array(12);return crypto.getRandomValues(t),Array.from(t,r=>e[r%e.length]).join("")},async createProjectShare(e,t,r,n=null){if(!P){const m=Oe();m.projectShares||(m.projectShares=[]);const h={id:crypto.randomUUID(),project_id:e,share_token:this.generateShareToken(),created_by:t,expires_at:n,is_active:!0,permissions:r,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return m.projectShares.push(h),Ge(m),h}const{data:i,error:s}=await T.rpc("generate_share_token");if(s)throw console.error("Error generating share token:",s),s;const{data:c,error:u}=await T.from("project_shares").insert({project_id:e,share_token:i,created_by:t,expires_at:n,permissions:r}).select().single();if(u)throw console.error("Error creating project share:",u),u;return c},async getShareByToken(e){if(!P){const n=Oe();if(!n.projectShares)return null;const i=n.projectShares.find(s=>s.share_token===e&&s.is_active&&(!s.expires_at||new Date(s.expires_at)>new Date));return i&&(i.view_count++,i.last_viewed_at=new Date().toISOString(),Ge(n)),i}const{data:t,error:r}=await T.from("project_shares").select("*, projects(*)").eq("share_token",e).eq("is_active",!0).single();return r?(console.error("Error fetching share by token:",r),null):t.expires_at&&new Date(t.expires_at)<new Date?null:(await T.rpc("increment_share_view_count",{token:e}),t)},async getProjectShares(e){if(!P){const n=Oe();return n.projectShares?n.projectShares.filter(i=>i.project_id===e):[]}const{data:t,error:r}=await T.from("project_shares").select("*, users(name, email)").eq("project_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching project shares:",r),[]):t||[]},async updateProjectShare(e,t){if(!P){const i=Oe();if(!i.projectShares)return null;const s=i.projectShares.findIndex(c=>c.id===e);return s===-1?null:(i.projectShares[s]={...i.projectShares[s],...t,updated_at:new Date().toISOString()},Ge(i),i.projectShares[s])}const{data:r,error:n}=await T.from("project_shares").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating project share:",n),n;return r},async revokeProjectShare(e){return this.updateProjectShare(e,{is_active:!1})},async deleteProjectShare(e){if(!P){const r=Oe();if(!r.projectShares)return;r.projectShares=r.projectShares.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("project_shares").delete().eq("id",e);if(t)throw console.error("Error deleting project share:",t),t},async getPublicProjectData(e){const t=await this.getShareByToken(e);if(!t)return null;const r=t.project_id||t.projects?.id;if(!P){const s=Oe(),c=s.projects.find(g=>g.id===r);if(!c)return null;const u=s.areas.filter(g=>g.project_id===r),m=u.reduce((g,_)=>g+parseFloat(_.weight||0),0),h=u.filter(g=>g.status==="done").reduce((g,_)=>g+parseFloat(_.weight||0),0),p=m>0?Math.round(h/m*100):0;return{share:t,project:c,progress:p,areas:t.permissions.progress?u:[],photos:[],dailyReports:[],tmTickets:[]}}const n=t.projects||await this.getProject(r);if(!n)return null;const i={share:t,project:n,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(t.permissions.progress){i.areas=await this.getAreas(r);const s=i.areas.reduce((u,m)=>u+parseFloat(m.weight||0),0),c=i.areas.filter(u=>u.status==="done").reduce((u,m)=>u+parseFloat(m.weight||0),0);i.progress=s>0?Math.round(c/s*100):0}if(t.permissions.photos){const{data:s}=await T.from("t_and_m_tickets").select("photos, work_date").eq("project_id",r).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);i.photos=s?.flatMap(c=>(c.photos||[]).map(u=>({url:u,date:c.work_date})))||[]}if(t.permissions.daily_reports){const{data:s}=await T.from("daily_reports").select("*").eq("project_id",r).order("report_date",{ascending:!1}).limit(10);i.dailyReports=s||[]}return t.permissions.tm_tickets&&(i.tmTickets=await this.getTMTickets(r)),i},async createInjuryReport(e){if(!P){const n=Oe();n.injuryReports||(n.injuryReports=[]);const i={id:crypto.randomUUID(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return n.injuryReports.push(i),Ge(n),i}const{data:t,error:r}=await T.from("injury_reports").insert(e).select().single();if(r)throw console.error("Error creating injury report:",r),r;return t},async getInjuryReports(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.filter(i=>i.project_id===e).sort((i,s)=>new Date(s.incident_date)-new Date(i.incident_date)):[]}const{data:t,error:r}=await T.from("injury_reports").select("*").eq("project_id",e).order("incident_date",{ascending:!1});return r?(console.error("Error fetching injury reports:",r),[]):t||[]},async getCompanyInjuryReports(e,t=null){if(!P){const s=Oe();if(!s.injuryReports)return[];let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>u.status===t)),c.sort((u,m)=>new Date(m.incident_date)-new Date(u.incident_date))}let r=T.from("injury_reports").select("*, projects(name)").eq("company_id",e).order("incident_date",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching company injury reports:",i),[]):n||[]},async getInjuryReport(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.find(i=>i.id===e):null}const{data:t,error:r}=await T.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",e).single();return r?(console.error("Error fetching injury report:",r),null):t},async updateInjuryReport(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(c=>c.id===e);return s===-1?null:(i.injuryReports[s]={...i.injuryReports[s],...t,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s])}const{data:r,error:n}=await T.from("injury_reports").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating injury report:",n),n;return r},async closeInjuryReport(e,t){return this.updateInjuryReport(e,{status:"closed",closed_at:new Date().toISOString(),closed_by:t})},async deleteInjuryReport(e){if(!P){const r=Oe();if(!r.injuryReports)return;r.injuryReports=r.injuryReports.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("injury_reports").delete().eq("id",e);if(t)throw console.error("Error deleting injury report:",t),t},async getInjuryStatistics(e,t=null,r=null){if(!P){const s=Oe();if(!s.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>new Date(u.incident_date)>=new Date(t))),r&&(c=c.filter(u=>new Date(u.incident_date)<=new Date(r))),{total_incidents:c.length,minor_injuries:c.filter(u=>u.injury_type==="minor").length,serious_injuries:c.filter(u=>u.injury_type==="serious").length,critical_injuries:c.filter(u=>u.injury_type==="critical").length,near_misses:c.filter(u=>u.injury_type==="near_miss").length,osha_recordable:c.filter(u=>u.osha_recordable).length,total_days_away:c.reduce((u,m)=>u+(m.days_away_from_work||0),0),total_restricted_days:c.reduce((u,m)=>u+(m.restricted_work_days||0),0)}}const{data:n,error:i}=await T.rpc("get_injury_statistics",{comp_id:e,start_date:t,end_date:r});return i?(console.error("Error fetching injury statistics:",i),null):n[0]||null},async addWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.push(t),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.push(t),this.updateInjuryReport(e,{witnesses:n})},async removeWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.splice(t,1),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.splice(t,1),this.updateInjuryReport(e,{witnesses:n})},async getCompanyUsers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",e);return r?(console.error("Error fetching company users:",r),[]):t?.map(n=>({id:n.user_id,name:n.users?.name||n.users?.email,email:n.users?.email,role:n.role}))||[]}return[]},async getProjectNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",e);return n?(console.error("Error fetching notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.project_id===e):[]},async getUserNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",e);return n?(console.error("Error fetching user notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.user_id===e):[]},async setNotificationPreference(e,t,r){if(P){const{data:c,error:u}=await T.from("notification_preferences").upsert({project_id:e,user_id:t,notification_types:r,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(u)throw console.error("Error setting notification preference:",u),u;return c}const n=Oe();n.notificationPreferences||(n.notificationPreferences=[]);const i=n.notificationPreferences.findIndex(c=>c.project_id===e&&c.user_id===t),s={id:i>=0?n.notificationPreferences[i].id:crypto.randomUUID(),project_id:e,user_id:t,notification_types:r,created_at:i>=0?n.notificationPreferences[i].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i>=0?n.notificationPreferences[i]=s:n.notificationPreferences.push(s),Ge(n),s},async removeNotificationPreference(e,t){if(P){const{error:n}=await T.from("notification_preferences").delete().eq("project_id",e).eq("user_id",t);if(n)throw console.error("Error removing notification preference:",n),n;return!0}const r=Oe();return r.notificationPreferences&&(r.notificationPreferences=r.notificationPreferences.filter(n=>!(n.project_id===e&&n.user_id===t)),Ge(r)),!0},async setProjectNotificationPreferences(e,t){const r=[];for(const n of t)if(n.notificationTypes&&n.notificationTypes.length>0){const i=await this.setNotificationPreference(e,n.userId,n.notificationTypes);r.push(i)}else await this.removeNotificationPreference(e,n.userId);return r},async getNotificationPresets(e){if(P){const{data:r,error:n}=await T.from("notification_presets").select("*").eq("company_id",e).order("name");return n?(console.error("Error fetching notification presets:",n),[]):r||[]}const t=Oe();return t.notificationPresets?t.notificationPresets.filter(r=>r.company_id===e):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:e},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:e},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:e},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:e}]},async createNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").insert({company_id:e,name:t,notification_types:r}).select().single();if(c)throw console.error("Error creating notification preset:",c),c;return s}const n=Oe();n.notificationPresets||(n.notificationPresets=[]);const i={id:crypto.randomUUID(),company_id:e,name:t,notification_types:r,created_at:new Date().toISOString()};return n.notificationPresets.push(i),Ge(n),i},async updateNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").update({name:t,notification_types:r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(c)throw console.error("Error updating notification preset:",c),c;return s}const n=Oe();if(!n.notificationPresets)return null;const i=n.notificationPresets.findIndex(s=>s.id===e);return i===-1?null:(n.notificationPresets[i]={...n.notificationPresets[i],name:t,notification_types:r,updated_at:new Date().toISOString()},Ge(n),n.notificationPresets[i])},async deleteNotificationPreset(e){if(P){const{error:r}=await T.from("notification_presets").delete().eq("id",e);if(r)throw console.error("Error deleting notification preset:",r),r;return!0}const t=Oe();return t.notificationPresets&&(t.notificationPresets=t.notificationPresets.filter(r=>r.id!==e),Ge(t)),!0},async getDumpSites(e){if(P){const{data:r,error:n}=await T.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",e).eq("active",!0).order("name");return n?(console.error("Error fetching dump sites:",n),[]):r||[]}return(Oe().dumpSites||[]).filter(r=>r.company_id===e&&r.active)},async createDumpSite(e,t,r="",n=""){if(P){const{data:c,error:u}=await T.from("dump_sites").insert({company_id:e,name:t,address:r,notes:n,active:!0}).select().single();if(u)throw console.error("Error creating dump site:",u),u;return c}const i=Oe();i.dumpSites||(i.dumpSites=[]);const s={id:crypto.randomUUID(),company_id:e,name:t,address:r,notes:n,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return i.dumpSites.push(s),Ge(i),s},async updateDumpSite(e,t){if(P){const{data:i,error:s}=await T.from("dump_sites").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error updating dump site:",s),s;return i}const r=Oe();if(!r.dumpSites)return null;const n=r.dumpSites.findIndex(i=>i.id===e);return n===-1?null:(r.dumpSites[n]={...r.dumpSites[n],...t},Ge(r),r.dumpSites[n])},async deleteDumpSite(e){return this.updateDumpSite(e,{active:!1})},async setDumpSiteRate(e,t,r,n="load"){if(P){const{data:u}=await T.from("dump_site_rates").select("id").eq("dump_site_id",e).eq("waste_type",t).maybeSingle();if(u){const{data:m,error:h}=await T.from("dump_site_rates").update({estimated_cost_per_load:r,unit:n}).eq("id",u.id).select().single();if(h)throw console.error("Error updating dump site rate:",h),h;return m}else{const{data:m,error:h}=await T.from("dump_site_rates").insert({dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n}).select().single();if(h)throw console.error("Error inserting dump site rate:",h),h;return m}}const i=Oe();i.dumpSiteRates||(i.dumpSiteRates=[]);const s=i.dumpSiteRates.findIndex(u=>u.dump_site_id===e&&u.waste_type===t),c={id:s>=0?i.dumpSiteRates[s].id:crypto.randomUUID(),dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n,created_at:new Date().toISOString()};return s>=0?i.dumpSiteRates[s]=c:i.dumpSiteRates.push(c),Ge(i),c},async getDumpSiteRates(e){if(P){const{data:r,error:n}=await T.from("dump_site_rates").select("*").eq("dump_site_id",e);return n?(console.error("Error fetching dump site rates:",n),[]):r||[]}return(Oe().dumpSiteRates||[]).filter(r=>r.dump_site_id===e)},async getHaulOffs(e){if(P){const{data:r,error:n}=await T.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",e).order("work_date",{ascending:!1});return n?(console.error("Error fetching haul-offs:",n),[]):r||[]}return(Oe().haulOffs||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.work_date)-new Date(r.work_date))},async createHaulOff(e,t){const r={project_id:e,dump_site_id:t.dumpSiteId,waste_type:t.wasteType,loads:t.loads,hauling_company:t.haulingCompany||"",work_date:t.workDate,notes:t.notes||"",estimated_cost:t.estimatedCost||0,created_by:t.createdBy||""};if(P){const{data:s,error:c}=await T.from("haul_offs").insert(r).select().single();if(c)throw console.error("Error creating haul-off:",c),c;return s}const n=Oe();n.haulOffs||(n.haulOffs=[]);const i={...r,id:crypto.randomUUID(),created_at:new Date().toISOString()};return n.haulOffs.push(i),Ge(n),i},async calculateHaulOffCosts(e){const t=await this.getHaulOffs(e);let r=0,n=0;const i={},s=[],c={};t.forEach(m=>{const h=parseFloat(m.estimated_cost)||0,p=parseInt(m.loads)||0;r+=h,n+=p,i[m.waste_type]||(i[m.waste_type]={loads:0,cost:0}),i[m.waste_type].loads+=p,i[m.waste_type].cost+=h,c[m.work_date]||(c[m.work_date]={date:m.work_date,loads:0,cost:0}),c[m.work_date].loads+=p,c[m.work_date].cost+=h}),Object.values(c).sort((m,h)=>new Date(h.date)-new Date(m.date)).forEach(m=>s.push(m));const u=s.length;return{totalCost:r,totalLoads:n,byWasteType:i,byDate:s,daysWithHaulOff:u,avgDailyHaulOffCost:u>0?r/u:0}},subscribeToHaulOffs(e,t){return P?T.channel(`haul_offs:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${e}`},t).subscribe():null},...kL,async createFolder(e,t,r){const n=_e(),{data:i,error:s}=await n.from("document_folders").insert({company_id:e,project_id:t,name:r.name,description:r.description||null,icon:r.icon||"folder",color:r.color||"blue",sort_order:r.sort_order||0,created_by:(await n.auth.getUser()).data.user?.id}).select().single();if(s)throw s;return i},async getProjectFolders(e){const t=_e(),{data:r,error:n}=await t.from("document_folders").select("*").eq("project_id",e).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(n)throw n;const i=r.map(s=>s.id);if(i.length>0){const{data:s,error:c}=await t.from("documents").select("folder_id").in("folder_id",i).is("archived_at",null).eq("is_current",!0);if(!c&&s){const u={};s.forEach(m=>{u[m.folder_id]=(u[m.folder_id]||0)+1}),r.forEach(m=>{m.document_count=u[m.id]||0})}}return r},async updateFolder(e,t){const r=_e(),{data:n,error:i}=await r.from("document_folders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n},async deleteFolder(e){const t=_e();await t.from("documents").update({folder_id:null}).eq("folder_id",e);const{error:r}=await t.from("document_folders").delete().eq("id",e);if(r)throw r;return!0},async reorderFolders(e,t){const r=_e(),n=t.map(({id:i,sort_order:s})=>r.from("document_folders").update({sort_order:s,updated_at:new Date().toISOString()}).eq("id",i).eq("project_id",e));return await Promise.all(n),!0},async getFolderDocuments(e,t={}){const r=_e(),{page:n=0,limit:i=25}=t;let s=r.from("documents").select("*",{count:"exact"}).eq("folder_id",e).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);const{data:c,error:u,count:m}=await s;if(u)throw u;return{documents:c||[],totalCount:m||0,hasMore:(m||0)>(n+1)*i}},async moveDocumentToFolder(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").update({folder_id:t}).eq("id",e).select().single();if(i)throw i;return n},async getUnfiledDocuments(e,t={}){const r=_e(),{page:n=0,limit:i=25}=t,{data:s,error:c,count:u}=await r.from("documents").select("*",{count:"exact"}).eq("project_id",e).is("folder_id",null).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);if(c)throw c;return{documents:s||[],totalCount:u||0,hasMore:(u||0)>(n+1)*i}},async uploadDocument(e,t,r,n={}){const i=_e(),s=Date.now(),c=250*1024*1024,{data:u}=await i.from("documents").select("file_size_bytes").eq("project_id",t).is("archived_at",null),m=u?.reduce((j,S)=>j+(S.file_size_bytes||0),0)||0;if(m+r.size>c){const j=Math.round(m/1024/1024),S=Math.round(c/1024/1024);throw new Error(`Project storage limit reached (${j}/${S} MB). Contact support to upgrade.`)}const h=Date.now(),p=new Uint8Array(6);crypto.getRandomValues(p);const g=Array.from(p,j=>j.toString(36)).join(""),_=r.name.split(".").pop()?.toLowerCase()||"bin",x=`${h}-${g}.${_}`,w=`${e}/${t}/documents/${x}`;try{const{data:j,error:S}=await i.storage.from("project-documents").upload(w,r,{cacheControl:"3600",upsert:!1});if(S)throw S;const{data:O}=i.storage.from("project-documents").getPublicUrl(w),C=O.publicUrl,A=n.category==="contracts"?"pending":"approved",{data:k,error:D}=await i.from("documents").insert({company_id:e,project_id:t,name:n.name||r.name.replace(/\.[^/.]+$/,""),description:n.description||null,file_name:r.name,file_size_bytes:r.size,mime_type:r.type,storage_path:w,folder_id:n.folderId||null,category:n.category||"general",tags:n.tags||[],visibility:n.visibility||"all",approval_status:A,resource_type:n.resourceType||null,resource_id:n.resourceId||null,uploaded_by:(await i.auth.getUser()).data?.user?.id}).select().single();if(D)throw D;const M=Date.now()-s;return Ke.storage("document_upload",{company_id:e,project_id:t,file_size:r.size,mime_type:r.type,duration:M,success:!0}),{...k,url:C}}catch(j){throw Ke.error("storage",{message:j.message,operation:"uploadDocument",company_id:e,project_id:t}),j}},async getProjectDocuments(e,{category:t=null,page:r=0,limit:n=25,includeArchived:i=!1}={}){let c=_e().from("documents").select("*",{count:"exact"}).eq("project_id",e).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(r*n,(r+1)*n-1);i||(c=c.is("archived_at",null)),t&&t!=="all"&&(c=c.eq("category",t));const{data:u,error:m,count:h}=await c;if(m)throw m;return{documents:u||[],totalCount:h||0,hasMore:(r+1)*n<(h||0),page:r,limit:n}},async getDocument(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("*").eq("id",e).single();if(n)throw n;return r},async getDocumentVersions(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("id, parent_document_id").eq("id",e).single();if(n)throw n;const i=r.parent_document_id||e,{data:s,error:c}=await t.from("documents").select("*").or(`id.eq.${i},parent_document_id.eq.${i}`).order("version",{ascending:!1});if(c)throw c;return s||[]},async uploadDocumentVersion(e,t,r,n,i={}){const s=_e(),{data:c,error:u}=await s.from("documents").select("*").eq("id",e).single();if(u)throw u;const{data:m}=await s.from("documents").select("version").or(`id.eq.${e},parent_document_id.eq.${e}`).order("version",{ascending:!1}).limit(1),h=(m?.[0]?.version||1)+1;await s.from("documents").update({is_current:!1}).or(`id.eq.${e},parent_document_id.eq.${e}`);const p=await this.uploadDocument(t,r,n,{name:i.name||c.name,description:i.description||c.description,category:c.category,visibility:c.visibility,tags:c.tags,resourceType:c.resource_type,resourceId:c.resource_id}),{data:g,error:_}=await s.from("documents").update({version:h,is_current:!0,parent_document_id:e}).eq("id",p.id).select().single();if(_)throw _;return await s.from("document_audit_log").insert({document_id:p.id,project_id:r,company_id:t,operation:"version_created",details:{version:h,parent_id:e},triggered_by:"user",user_id:(await s.auth.getUser()).data?.user?.id}),{...p,...g}},async updateDocument(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").update({name:t.name,description:t.description,category:t.category,visibility:t.visibility,tags:t.tags}).eq("id",e).select().single();if(i)throw i;return n},async archiveDocument(e){const t=_e(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:new Date().toISOString(),archived_by:r}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"deleted",triggered_by:"user",user_id:r}),n},async restoreDocument(e){const t=_e(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:null,archived_by:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"restored",triggered_by:"user",user_id:r}),n},async deleteDocumentPermanently(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("storage_path, company_id, project_id").eq("id",e).single();if(n)throw n;r.storage_path&&await t.storage.from("project-documents").remove([r.storage_path]);const{error:i}=await t.from("documents").delete().eq("id",e);if(i)throw i;return!0},async linkDocumentToResource(e,t,r){const n=_e(),{data:i,error:s}=await n.from("documents").update({resource_type:t,resource_id:r}).eq("id",e).select().single();if(s)throw s;return await n.from("document_audit_log").insert({document_id:e,project_id:i.project_id,company_id:i.company_id,operation:"linked",details:{resource_type:t,resource_id:r},triggered_by:"user",user_id:(await n.auth.getUser()).data?.user?.id}),i},async unlinkDocumentFromResource(e){const t=_e(),{data:r}=await t.from("documents").select("resource_type, resource_id, project_id, company_id").eq("id",e).single(),{data:n,error:i}=await t.from("documents").update({resource_type:null,resource_id:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:r.project_id,company_id:r.company_id,operation:"unlinked",details:{resource_type:r.resource_type,resource_id:r.resource_id},triggered_by:"user",user_id:(await t.auth.getUser()).data?.user?.id}),n},async getResourceDocuments(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").select("*").eq("resource_type",e).eq("resource_id",t).is("archived_at",null).order("uploaded_at",{ascending:!1});if(i)throw i;return n||[]},async approveDocument(e){const t=_e(),{data:r,error:n}=await t.rpc("approve_document",{p_document_id:e});if(n)throw n;return r},async rejectDocument(e,t){const r=_e(),{data:n,error:i}=await r.rpc("reject_document",{p_document_id:e,p_reason:t});if(i)throw i;return n},async getPendingDocuments(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("*, project:projects(name)").eq("company_id",e).eq("approval_status","pending").is("archived_at",null).order("uploaded_at",{ascending:!1});if(n)throw n;return r||[]},async searchDocuments(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").select("*").eq("project_id",e).eq("is_current",!0).is("archived_at",null).or(`name.ilike.%${t}%,description.ilike.%${t}%`).order("uploaded_at",{ascending:!1}).limit(20);if(i)throw i;return n||[]},async logDocumentAccess(e,t="downloaded"){const r=_e(),{data:n}=await r.from("documents").select("project_id, company_id").eq("id",e).single();n&&await r.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:t,triggered_by:"user",user_id:(await r.auth.getUser()).data?.user?.id})}};qb(async e=>{if(e&&P)try{await CN(be)}catch(t){console.error("Error syncing pending actions:",t)}});const EZ=Object.freeze(Object.defineProperty({__proto__:null,auth:nf,clearFieldSession:_y,db:be,drawRequestOps:TL,equipmentOps:DL,getConnectionStatus:qn,getPendingActionCount:tf,getSupabaseClient:$i,isFieldMode:xy,isSupabaseConfigured:P,onConnectionChange:qb,supabase:T,syncPendingActions:CN},Symbol.toStringTag,{value:"Module"})),NN=y.createContext(),dn={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function kd({children:e,companyId:t}){const[r,n]=y.useState(dn),[i,s]=y.useState(!0);y.useEffect(()=>{t?c(t):u()},[t]),y.useEffect(()=>{p(r)},[r]);const c=async w=>{try{if(s(!0),!P){n(dn),s(!1);return}const{data:j,error:S}=await T.from("company_branding").select("*").eq("company_id",w).single();S?(S.code==="PGRST116"?await m(w):console.error("Error loading branding:",S),n(dn)):n({...dn,...j})}catch(j){console.error("Error in loadBranding:",j),n(dn)}finally{s(!1)}},u=async()=>{try{s(!0);const w=window.location.hostname;if(w==="localhost"||w==="127.0.0.1"){n(dn),s(!1);return}if(!P){n(dn),s(!1);return}const{data:j,error:S}=await T.rpc("get_branding_by_domain",{domain_name:w});S||!j||j.length===0?n(dn):n({...dn,...j[0]})}catch(w){console.error("Error loading branding by domain:",w),n(dn)}finally{s(!1)}},m=async w=>{try{const{data:j,error:S}=await T.from("company_branding").insert({company_id:w,...dn}).select().single();S&&console.error("Error creating default branding:",S)}catch(j){console.error("Error in createDefaultBranding:",j)}},h=y.useCallback(async w=>{try{if(!P)return n(D=>({...D,...w})),{success:!0};if(!t)return{success:!1,error:"No company ID"};const j={},S=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const D of S)w[D]!==void 0&&(j[D]=w[D]);const{data:O,error:C}=await T.from("company_branding").select("id").eq("company_id",t).single();if(C&&C.code==="PGRST116"){const{data:D,error:M}=await T.from("company_branding").insert({company_id:t,...j}).select().single();return M?(console.error("Error creating branding:",M),{success:!1,error:M.message}):(n({...dn,...D}),{success:!0,data:D})}const{data:A,error:k}=await T.from("company_branding").update(j).eq("company_id",t).select().single();return k?(console.error("Error updating branding:",k),{success:!1,error:k.message}):(n({...dn,...A}),{success:!0,data:A})}catch(j){return console.error("Error in updateBranding:",j),{success:!1,error:j.message}}},[t]),p=w=>{const j=document.documentElement;if(j.style.setProperty("--primary-color",w.primary_color),j.style.setProperty("--secondary-color",w.secondary_color),w.favicon_url){let S=document.querySelector("link[rel*='icon']");S||(S=document.createElement("link"),S.rel="icon",document.head.appendChild(S)),S.href=w.favicon_url}document.title=w.custom_app_name||"FieldSync"},g=y.useCallback(async(w,j)=>{try{if(!P)return{success:!0,url:URL.createObjectURL(w)};const S=w.name.split(".").pop(),C=`branding/${`${t}/${j}-${Date.now()}.${S}`}`,{data:A,error:k}=await T.storage.from("public").upload(C,w,{cacheControl:"3600",upsert:!0});if(k)return console.error("Error uploading image:",k),{success:!1,error:k.message};const{data:{publicUrl:D}}=T.storage.from("public").getPublicUrl(C);return{success:!0,url:D}}catch(S){return console.error("Error in uploadBrandingImage:",S),{success:!1,error:S.message}}},[t]),_=y.useCallback(()=>{t?c(t):u()},[t]),x=y.useMemo(()=>({branding:r,loading:i,updateBranding:h,uploadBrandingImage:g,refreshBranding:_}),[r,i,h,g,_]);return f.jsx(NN.Provider,{value:x,children:e})}function PL(){const e=y.useContext(NN);if(!e)throw new Error("useBranding must be used within a BrandingProvider");return e}const kN=y.createContext();function Og({children:e}){const[t,r]=y.useState(()=>{const s=localStorage.getItem("fieldsync-theme");return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});y.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("fieldsync-theme",t)},[t]),y.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: light)"),c=u=>{localStorage.getItem("fieldsync-theme")||r(u.matches?"light":"dark")};return s.addEventListener("change",c),()=>s.removeEventListener("change",c)},[]);const n=y.useCallback(()=>{r(s=>s==="dark"?"light":"dark")},[]),i=y.useMemo(()=>({theme:t,setTheme:r,toggleTheme:n}),[t,n]);return f.jsx(kN.Provider,{value:i,children:e})}function ML(){const e=y.useContext(kN);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}const RL=y.createContext(null);function qL({children:e}){const[t,r]=y.useState(null),[n,i]=y.useState([]),s=y.useCallback(()=>{r(null)},[]),c=y.useCallback((w,j="info",S=3e3)=>{if(t){i(O=>[...O,{message:w,type:j,duration:S}]);return}r({message:w,type:j,duration:S}),S>0&&setTimeout(()=>{r(null)},S)},[t]),u=y.useCallback(()=>{if(n.length>0){const[w,...j]=n;i(j),setTimeout(()=>{c(w.message,w.type,w.duration)},300)}},[n,c]),m=y.useCallback(()=>{s(),u()},[s,u]),h=y.useCallback((w,j)=>{c(w,"success",j)},[c]),p=y.useCallback((w,j)=>{c(w,"error",j)},[c]),g=y.useCallback((w,j)=>{c(w,"warning",j)},[c]),_=y.useCallback((w,j)=>{c(w,"info",j)},[c]),x=y.useMemo(()=>({toast:t,showToast:c,hideToast:m,success:h,error:p,warning:g,info:_}),[t,c,m,h,p,g,_]);return f.jsxs(RL.Provider,{value:x,children:[e,t&&f.jsx("div",{className:"toast-container",children:f.jsx("div",{className:`toast ${t.type}`,onClick:m,children:t.message})})]})}function qr({className:e="",showPoweredBy:t=!1}){const{branding:r}=PL();return f.jsxs("div",{className:`app-logo ${e}`,children:[r.logo_url?f.jsx("img",{src:r.logo_url,alt:r.custom_app_name||"Logo",className:"custom-logo"}):f.jsxs("div",{className:"logo",children:[r.custom_app_name||"Field",f.jsx("span",{children:"Sync"})]}),t&&!r.hide_fieldsync_branding&&f.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function zL(e){if(!e)return{score:0,label:"",color:""};let t=0;return e.length>=6&&t++,e.length>=8&&t++,/[A-Z]/.test(e)&&/[a-z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t<=1?{score:1,label:"Weak",color:"var(--accent-red)"}:t<=2?{score:2,label:"Fair",color:"var(--accent-orange)"}:t<=3?{score:3,label:"Good",color:"var(--accent-amber)"}:t<=4?{score:4,label:"Strong",color:"var(--accent-green)"}:{score:5,label:"Very strong",color:"var(--accent-green)"}}function FS(e=6){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",r=new Uint32Array(e);return crypto.getRandomValues(r),Array.from(r,n=>t[n%t.length]).join("")}function Ps(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function ic({steps:e,currentStep:t}){return f.jsx("div",{className:"onboarding-step-indicator",children:e.map((r,n)=>{const i=n+1,s=i===t,c=i<t;return f.jsxs("div",{className:"onboarding-step-wrapper",children:[n>0&&f.jsx("div",{className:`onboarding-step-line ${c?"completed":""}`}),f.jsx("div",{className:`onboarding-step-circle ${s?"active":""} ${c?"completed":""}`,children:c?f.jsx(Ki,{size:14}):i}),f.jsx("span",{className:`onboarding-step-label ${s?"active":""} ${c?"completed":""}`,children:r})]},n)})})}function KS({value:e,onChange:t,placeholder:r,onKeyDown:n,autoFocus:i,showStrength:s}){const[c,u]=y.useState(!1),m=zL(e);return f.jsxs("div",{className:"password-field",children:[f.jsxs("div",{className:"password-input-wrapper",children:[f.jsx("input",{type:c?"text":"password",value:e,onChange:t,placeholder:r||"Password",onKeyDown:n,autoFocus:i}),f.jsx("button",{type:"button",className:"password-toggle",onClick:()=>u(!c),tabIndex:-1,"aria-label":c?"Hide password":"Show password",children:c?f.jsx(XR,{size:18}):f.jsx(ZR,{size:18})})]}),s&&e&&f.jsxs("div",{className:"password-strength",children:[f.jsx("div",{className:"password-strength-bar",children:f.jsx("div",{className:"password-strength-fill",style:{width:`${m.score/5*100}%`,background:m.color}})}),f.jsx("span",{className:"password-strength-label",style:{color:m.color},children:m.label})]})]})}function LL({onForemanAccess:e,onOfficeLogin:t,onShowToast:r}){const[n]=dL(),[i,s]=y.useState(()=>{const he=n.get("mode");return he==="foreman"||he==="office"?he:null}),[c,u]=y.useState(""),[m,h]=y.useState(null),[p,g]=y.useState(""),[_,x]=y.useState(!1),[w,j]=y.useState(""),[S,O]=y.useState(null),[C,A]=y.useState(()=>{try{return localStorage.getItem("fieldsync_foreman_name")||""}catch{return""}}),k=y.useRef(null),D=y.useRef(null);y.useEffect(()=>()=>{k.current&&clearTimeout(k.current),D.current&&clearTimeout(D.current)},[]);const[M,L]=y.useState(""),[V,re]=y.useState(""),[ie,X]=y.useState(1),[I,ce]=y.useState(null),[ge,q]=y.useState(""),[R,U]=y.useState(""),[Q,B]=y.useState(""),[fe,je]=y.useState(""),[ee,H]=y.useState(!1),[Ee,Te]=y.useState(1),[Ie,pe]=y.useState(""),[ze,J]=y.useState(""),[we,xe]=y.useState(""),[ae,He]=y.useState(""),[ve,Ne]=y.useState(null),Me=he=>{const it=he.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);u(it)},jt=async()=>{if(c.length<2){r("Enter company code","error");return}x(!0);try{const he=await be.getCompanyByCode(c);he?h(he):(r("Invalid company code","error"),u(""))}catch{r("Error checking code","error")}finally{x(!1)}},Re=async he=>{if(he.length===4){x(!0),j("");try{const it=await be.getProjectByPinSecure(he,m.code);if(it.rateLimited){j("error"),r("Too many attempts. Please wait 15 minutes.","error"),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{g(""),j("")},800);return}if(it.success&&it.project){O(it.project);return}if(it.error){console.error("[Foreman Auth] PIN validation failed:",it.error),r(it.error,"error"),g("");return}r("Invalid PIN","error"),g("")}catch{r("Error checking PIN. Please check your connection.","error"),g("")}finally{x(!1)}}},It=()=>{if(!C.trim()){r("Enter your name to continue","error");return}try{localStorage.setItem("fieldsync_foreman_name",C.trim())}catch{}e(S,C.trim())},yt=he=>{if(p.length<4&&!_){const it=p+he;g(it),j(""),it.length===4&&(D.current&&clearTimeout(D.current),D.current=setTimeout(()=>Re(it),150))}},Ct=()=>{_||(g(he=>he.slice(0,-1)),j(""))},Br=()=>{h(null),g(""),j("")},xt=()=>{if(!M.trim()||!V.trim()){r("Enter email and password","error");return}t(M,V)},Ye=async()=>{if(c.length<2){r("Enter company code","error");return}x(!0);try{const he=await be.getCompanyByCode(c);he?(ce(he),X(2)):(r("Invalid company code","error"),u(""))}catch{r("Error checking code","error")}finally{x(!1)}},$r=async()=>{if(!ge.trim()){r("Enter office code","error");return}x(!0);try{const{data:he,error:it}=await T.rpc("verify_office_code",{company_id:I.id,code:ge.trim()});if(it)throw it;he===!0?X(3):(r("Invalid office code","error"),q(""))}catch{r("Error verifying code","error")}finally{x(!1)}},_n=async()=>{if(!_){if(!R.trim()){r("Enter your name","error");return}if(!Q.trim()||!Ps(Q)){r("Enter a valid email address","error");return}if(fe.length<6){r("Password must be 6+ characters","error");return}x(!0);try{const he=Q.toLowerCase().trim(),{data:it,error:xn}=await T.auth.signUp({email:he,password:fe});let Qt;if(xn?.message?.includes("already registered")||it?.user&&it.user.identities?.length===0){const{data:qt,error:ft}=await T.auth.signInWithPassword({email:he,password:fe});if(ft){r("Account exists with different password. Use your existing password.","error"),x(!1);return}Qt=qt.user.id;const{data:en}=await T.from("user_companies").select("id, status").eq("user_id",Qt).eq("company_id",I.id).maybeSingle();if(en){en.status==="active"?(r("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):en.status==="pending"?(r("Your request is still pending approval.","error"),await T.auth.signOut()):(r("Your membership was removed. Contact the company admin.","error"),await T.auth.signOut());return}const{error:$n}=await T.from("user_companies").insert({user_id:Qt,company_id:I.id,role:"member",status:"pending"});if($n)throw console.error("Error adding to user_companies:",$n),await T.auth.signOut(),new Error("Failed to submit join request");await T.auth.signOut(),H(!0)}else{if(xn)throw xn;{if(Qt=it.user?.id,!Qt)throw new Error("Failed to create user");const{error:qt}=await T.from("users").insert({id:Qt,email:he,password_hash:"managed_by_supabase_auth",name:R.trim(),company_id:I.id,role:"member",is_active:!0});if(qt)throw qt;const{error:ft}=await T.from("user_companies").insert({user_id:Qt,company_id:I.id,role:"member",status:"pending"});if(ft)throw console.error("Error adding to user_companies:",ft),new Error("Failed to submit join request");await T.auth.signOut(),H(!0)}}}catch(he){console.error("Join error:",he),r(he.message||"Error creating account","error")}finally{x(!1)}}},Hr=async()=>{if(!_){if(!ze.trim()){r("Enter your name","error");return}if(!we.trim()||!Ps(we)){r("Enter a valid email address","error");return}if(ae.length<6){r("Password must be 6+ characters","error");return}x(!0);try{const he=we.toLowerCase().trim(),it=FS(6),xn=FS(6),{data:Qt,error:Ut}=await T.auth.signUp({email:he,password:ae});if(Ut){if(Ut.message?.includes("already registered"))r("An account with this email already exists. Sign in instead.","error");else throw Ut;return}const qt=Qt.user?.id;if(!qt)throw new Error("Failed to create account");const{data:ft,error:en}=await T.from("companies").insert({name:Ie.trim(),code:it,office_code:xn,subscription_tier:"free",owner_user_id:qt}).select().single();if(en)throw console.error("Company creation error:",en),new Error("Failed to create company. Please try again.");const{error:$n}=await T.from("users").insert({id:qt,email:he,password_hash:"managed_by_supabase_auth",name:ze.trim(),company_id:ft.id,role:"admin",is_active:!0});if($n)throw console.error("User record error:",$n),new Error("Failed to set up user profile");const{error:oa}=await T.from("user_companies").insert({user_id:qt,company_id:ft.id,role:"admin",access_level:"administrator",status:"active"});if(oa)throw console.error("User-company link error:",oa),new Error("Failed to link account to company");Ne({name:ft.name,code:it,officeCode:xn}),Te(3)}catch(he){console.error("Registration error:",he),r(he.message||"Error creating company","error")}finally{x(!1)}}},jr=()=>{X(1),ce(null),q(""),U(""),B(""),je(""),H(!1),u("")},Yt=()=>{Te(1),pe(""),J(""),xe(""),He(""),Ne(null)};if(i===null)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in-up",children:[f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsxs("div",{className:"entry-buttons stagger-children",children:[f.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>s("foreman"),children:[f.jsx("span",{className:"entry-mode-icon",children:f.jsx(Po,{size:32})}),f.jsx("span",{className:"entry-mode-title",children:"Foreman"}),f.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),f.jsxs("button",{className:"entry-mode-btn office",onClick:()=>s("office"),children:[f.jsx("span",{className:"entry-mode-icon",children:f.jsx(VR,{size:32})}),f.jsx("span",{className:"entry-mode-title",children:"Office"}),f.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(i==="foreman")return S?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("div",{className:"entry-company-badge",children:S.name}),f.jsx("p",{className:"entry-subtitle",children:"Who's checking in?"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:C,onChange:he=>A(he.target.value),placeholder:"Your name",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&It()},style:{fontSize:"1.1rem",textAlign:"center"}}),f.jsx("button",{className:"entry-login-btn",onClick:It,disabled:!C.trim(),children:"Enter Site"})]}),f.jsx("p",{className:"entry-hint",style:{marginTop:"0.75rem"},children:"Your name will appear on reports and submissions"}),f.jsxs("button",{className:"entry-join-link",style:{marginTop:"0.5rem",display:"flex",alignSelf:"center"},onClick:()=>{O(null),g(""),j("")},children:[f.jsx(cr,{size:16}),f.jsx("span",{children:"Back"})]})]})}):m?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:Br,children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("div",{className:"entry-company-badge",children:m.name}),f.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),f.jsx("div",{className:`pin-display ${w==="error"?"shake":""}`,children:[0,1,2,3].map(he=>f.jsx("div",{className:`pin-dot ${p.length>he?"filled":""} ${w}`,children:p.length>he?"":""},he))}),f.jsxs("div",{className:"number-pad",role:"group","aria-label":"PIN entry keypad",children:[[1,2,3,4,5,6,7,8,9].map(he=>f.jsx("button",{className:"num-btn",onClick:()=>yt(he.toString()),disabled:_,"aria-label":String(he),children:he},he)),f.jsx("button",{className:"num-btn empty",disabled:!0,"aria-hidden":"true"}),f.jsx("button",{className:"num-btn",onClick:()=>yt("0"),disabled:_,"aria-label":"0",children:"0"}),f.jsx("button",{className:"num-btn backspace",onClick:Ct,disabled:_||p.length===0,"aria-label":"Delete last digit",children:f.jsx(cr,{size:18})})]}),_&&f.jsx("div",{className:"entry-loading",children:f.jsx("div",{className:"spinner"})})]})}):f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>s(null),children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"text",value:c,onChange:he=>Me(he.target.value),placeholder:"Company Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&jt()}}),f.jsx("button",{className:"entry-submit-btn",onClick:jt,disabled:_||c.length<2,children:_?f.jsx("div",{className:"spinner-small"}):f.jsx(bc,{size:20})})]})]})});if(i==="office")return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>s(null),children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"email",value:M,onChange:he=>L(he.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&xt()}}),f.jsx("input",{type:"password",value:V,onChange:he=>re(he.target.value),placeholder:"Password",onKeyDown:he=>{he.key==="Enter"&&xt()}}),f.jsx("button",{className:"entry-login-btn",onClick:xt,children:"Sign In"})]}),f.jsx("div",{className:"entry-signup-hint",children:f.jsxs("div",{className:"entry-signup-options",children:[f.jsxs("button",{className:"entry-join-link",onClick:()=>{jr(),s("join")},children:[f.jsx(KA,{size:16}),f.jsx("span",{children:"Join your company"})]}),f.jsxs("button",{className:"entry-join-link",onClick:()=>{Yt(),s("register")},children:[f.jsx(WR,{size:16}),f.jsx("span",{children:"Register a new company"})]})]})})]})});if(i==="join")return ee?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-scale-in",children:[f.jsx("div",{className:"entry-success-icon",children:f.jsx(Ki,{size:32})}),f.jsx("h2",{className:"entry-success-title",children:"Request Submitted"}),f.jsxs("p",{className:"entry-success-message",children:["Your request to join ",f.jsx("strong",{children:I?.name})," has been submitted. A company admin will review and approve your access."]}),f.jsx("p",{className:"entry-success-detail",children:"You'll be able to sign in once approved."}),f.jsx("button",{className:"entry-login-btn",onClick:()=>{jr(),s("office")},style:{marginTop:"1.5rem"},children:"Back to Sign In"})]})}):ie===1?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{jr(),s("office")},children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ic,{steps:["Company","Verify","Account"],currentStep:1}),f.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),f.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"text",value:c,onChange:he=>Me(he.target.value),placeholder:"Company Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Ye()}}),f.jsx("button",{className:"entry-submit-btn",onClick:Ye,disabled:_||c.length<2,children:_?f.jsx("div",{className:"spinner-small"}):f.jsx(bc,{size:20})})]})]})}):ie===2?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{X(1),ce(null),q("")},children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ic,{steps:["Company","Verify","Account"],currentStep:2}),f.jsx("div",{className:"entry-company-badge",children:I?.name}),f.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),f.jsx("p",{className:"entry-hint",children:"This verifies your office access"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"password",value:ge,onChange:he=>q(he.target.value),placeholder:"Office Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&$r()}}),f.jsx("button",{className:"entry-submit-btn",onClick:$r,disabled:_||!ge.trim(),children:_?f.jsx("div",{className:"spinner-small"}):f.jsx(bc,{size:20})})]})]})}):f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{X(2),q("")},children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ic,{steps:["Company","Verify","Account"],currentStep:3}),f.jsx("div",{className:"entry-company-badge",children:I?.name}),f.jsx("p",{className:"entry-subtitle",children:"Create your account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:R,onChange:he=>U(he.target.value),placeholder:"Your Name",autoFocus:!0}),f.jsx("input",{type:"email",value:Q,onChange:he=>B(he.target.value),placeholder:"Email",className:Q&&!Ps(Q)?"input-error":""}),f.jsx(KS,{value:fe,onChange:he=>je(he.target.value),placeholder:"Password (6+ characters)",onKeyDown:he=>{he.key==="Enter"&&_n()},showStrength:!0}),f.jsx("button",{className:"entry-login-btn",onClick:_n,disabled:_||!R.trim()||!Ps(Q)||fe.length<6,children:_?f.jsxs("span",{className:"btn-loading",children:[f.jsx("div",{className:"spinner-small"}),"Creating account..."]}):"Join Company"})]}),f.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})});if(i==="register"){if(Ee===3&&ve)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card entry-card-wide animate-scale-in",children:[f.jsx("div",{className:"entry-success-icon",children:f.jsx(Ki,{size:32})}),f.jsx("h2",{className:"entry-success-title",children:"Company Created"}),f.jsxs("p",{className:"entry-success-message",children:[f.jsx("strong",{children:ve.name})," is ready to go. Save these codes to share with your team."]}),f.jsxs("div",{className:"entry-codes-grid",children:[f.jsxs("div",{className:"entry-code-card",children:[f.jsx("span",{className:"entry-code-label",children:"Company Code"}),f.jsx("span",{className:"entry-code-value",children:ve.code}),f.jsx("span",{className:"entry-code-hint",children:"Share with all employees"})]}),f.jsxs("div",{className:"entry-code-card",children:[f.jsx("span",{className:"entry-code-label",children:"Office Code"}),f.jsx("span",{className:"entry-code-value",children:ve.officeCode}),f.jsx("span",{className:"entry-code-hint",children:"Office staff only"})]})]}),f.jsx("p",{className:"entry-codes-warning",children:"Save these codes now. You can also find them in your company settings later."}),f.jsx("button",{className:"entry-login-btn",onClick:()=>{window.location.reload()},style:{marginTop:"0.5rem"},children:"Go to Dashboard"})]})});if(Ee===1)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{Yt(),s("office")},children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ic,{steps:["Company","Your Account"],currentStep:1}),f.jsx("p",{className:"entry-subtitle",children:"Register your company"}),f.jsx("p",{className:"entry-hint",children:"Set up your company on FieldSync"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:Ie,onChange:he=>pe(he.target.value),placeholder:"Company Name",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Ie.trim()&&Te(2)}}),f.jsx("button",{className:"entry-login-btn",onClick:()=>Te(2),disabled:!Ie.trim(),children:"Continue"})]})]})});if(Ee===2)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>Te(1),children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ic,{steps:["Company","Your Account"],currentStep:2}),f.jsx("div",{className:"entry-company-badge",children:Ie}),f.jsx("p",{className:"entry-subtitle",children:"Create your admin account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:ze,onChange:he=>J(he.target.value),placeholder:"Your Name",autoFocus:!0}),f.jsx("input",{type:"email",value:we,onChange:he=>xe(he.target.value),placeholder:"Email",className:we&&!Ps(we)?"input-error":""}),f.jsx(KS,{value:ae,onChange:he=>He(he.target.value),placeholder:"Password (6+ characters)",onKeyDown:he=>{he.key==="Enter"&&Hr()},showStrength:!0}),f.jsx("button",{className:"entry-login-btn",onClick:Hr,disabled:_||!ze.trim()||!Ps(we)||ae.length<6,children:_?f.jsxs("span",{className:"btn-loading",children:[f.jsx("div",{className:"spinner-small"}),"Setting up company..."]}):"Create Company"})]}),f.jsx("p",{className:"entry-join-note",children:"You'll be the administrator. Company and office codes will be generated for you."})]})})}}function DN({message:e,type:t="",onClose:r}){return y.useEffect(()=>{const n=setTimeout(r,3e3);return()=>clearTimeout(n)},[r]),f.jsx("div",{className:"toast-container",children:f.jsx("div",{className:`toast ${t}`,children:e})})}function YS({compact:e=!1}){const{theme:t,toggleTheme:r}=ML();return f.jsx("button",{className:`theme-toggle ${e?"theme-toggle-compact":""}`,onClick:r,title:`Switch to ${t==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${t==="dark"?"light":"dark"} mode`,children:t==="dark"?f.jsxs(f.Fragment,{children:[f.jsx(YA,{size:e?18:16}),!e&&f.jsx("span",{children:"Light"})]}):f.jsxs(f.Fragment,{children:[f.jsx(GA,{size:e?18:16}),!e&&f.jsx("span",{children:"Dark"})]})})}class Li extends y.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("ErrorBoundary caught an error:",t,r),(t?.message?.includes("Failed to fetch dynamically imported module")||t?.message?.includes("Loading chunk")||t?.message?.includes("Loading CSS chunk"))&&(console.warn("[ErrorBoundary] Chunk load failure detected, clearing cache and reloading..."),"caches"in window?caches.keys().then(i=>{Promise.all(i.map(s=>caches.delete(s))).then(()=>{window.location.reload()})}).catch(i=>{console.warn("[ErrorBoundary] Cache clear failed, reloading anyway:",i.message),window.location.reload()}):window.location.reload())}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?f.jsx("div",{className:"error-boundary",children:f.jsxs("div",{className:"error-boundary-content",children:[f.jsx("div",{className:"error-icon",children:f.jsx(lm,{size:48})}),f.jsx("h2",{children:"Something went wrong"}),f.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),f.jsxs("div",{className:"error-actions",children:[f.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),f.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function GS(){const[e,t]=y.useState(qn()),[r,n]=y.useState(0),[i,s]=y.useState(!1),c=y.useRef(!1),u=y.useRef(null);return y.useEffect(()=>{const m=qb(async p=>{t(p),p&&c.current&&(s(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>s(!1),3e3),c.current=!1),p||(c.current=!0);const g=await tf();n(g)});tf().then(n);const h=setInterval(async()=>{if(!qn()){const p=await tf();n(p)}},5e3);return()=>{m(),clearInterval(h),u.current&&clearTimeout(u.current)}},[]),e&&r===0&&!i?null:f.jsxs("div",{className:`offline-indicator ${e?"online":"offline"} ${i?"synced":""}`,children:[f.jsx("div",{className:"offline-indicator-content",children:e?i?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"online-icon",children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f.jsx("polyline",{points:"20 6 9 17 4 12"})})}),f.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):r>0?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"syncing-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("polyline",{points:"23 4 23 10 17 10"}),f.jsx("polyline",{points:"1 20 1 14 7 14"}),f.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),f.jsxs("span",{className:"offline-text",children:["Syncing ",r,"..."]})]}):null:f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"offline-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),f.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),f.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),f.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),f.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),f.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),f.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),f.jsxs("span",{className:"offline-text",children:["Offline",r>0&&f.jsxs("span",{className:"pending-badge",children:[r," pending"]})]})]})}),f.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}function IL(){const[e,t]=y.useState(null),[r,n]=y.useState(!1);y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const c=localStorage.getItem("pwa-install-dismissed");if(c){const m=parseInt(c,10);if(Date.now()-m<10080*60*1e3)return}const u=m=>{m.preventDefault(),t(m),n(!0)};return window.addEventListener("beforeinstallprompt",u),()=>window.removeEventListener("beforeinstallprompt",u)},[]);const i=async()=>{if(!e)return;e.prompt();const{outcome:c}=await e.userChoice;c==="accepted"&&n(!1),t(null)},s=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return r?f.jsxs("div",{className:"install-prompt",children:[f.jsxs("div",{className:"install-prompt-content",children:[f.jsx(VA,{size:20}),f.jsxs("div",{className:"install-prompt-text",children:[f.jsx("strong",{children:"Install FieldSync"}),f.jsx("span",{children:"Add to home screen for quick access"})]})]}),f.jsxs("div",{className:"install-prompt-actions",children:[f.jsx("button",{className:"btn btn-primary btn-small",onClick:i,children:"Install"}),f.jsx("button",{className:"install-prompt-dismiss",onClick:s,"aria-label":"Dismiss",children:f.jsx(Ob,{size:18})})]})]}):null}function UL({factorId:e,onVerified:t,onCancel:r}){const[n,i]=y.useState(""),[s,c]=y.useState(!1),[u,m]=y.useState(null),h=async()=>{if(n.length===6){c(!0),m(null);try{const{data:g,error:_}=await T.auth.mfa.challenge({factorId:e});if(_)throw _;const{error:x}=await T.auth.mfa.verify({factorId:e,challengeId:g.id,code:n});if(x)throw x;t()}catch{m("Invalid code. Please try again."),i("")}finally{c(!1)}}},p=g=>{g.key==="Enter"&&n.length===6&&h()};return f.jsxs("div",{className:"mfa-challenge",children:[f.jsx("div",{className:"mfa-challenge-icon",children:f.jsx(WA,{size:40})}),f.jsx("h2",{children:"Two-Factor Authentication"}),f.jsx("p",{children:"Enter the 6-digit code from your authenticator app"}),f.jsx("div",{className:"mfa-code-input",children:f.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value.replace(/\D/g,"").slice(0,6)),onKeyDown:p,placeholder:"000000",maxLength:6,autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*",className:"mfa-input-large","aria-label":"MFA verification code"})}),u&&f.jsx("p",{className:"mfa-error",children:u}),f.jsxs("div",{className:"mfa-challenge-actions",children:[f.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Cancel"}),f.jsx("button",{className:"btn btn-primary",onClick:h,disabled:n.length!==6||s,children:s?f.jsxs(f.Fragment,{children:[f.jsx($s,{size:14,className:"spinner"})," Verifying..."]}):"Verify"})]})]})}function OZ(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function BL(e){if(!e||e.length===0)return 0;let t=0;return e.forEach(r=>{r.status==="done"&&(t+=r.weight||0)}),Math.round(t)}function CZ(e){if(!e||e.length===0)return{progress:0,earnedValue:0,totalValue:0,isValueBased:!1};if(e.some(n=>n.scheduled_value>0)){const n=e.reduce((c,u)=>c+(u.scheduled_value||0),0),i=e.filter(c=>c.status==="done").reduce((c,u)=>c+(u.scheduled_value||0),0);return{progress:n>0?Math.round(i/n*100):0,earnedValue:i,totalValue:n,isValueBased:!0}}const r=e.filter(n=>n.status==="done").reduce((n,i)=>n+(i.weight||0),0);return{progress:Math.round(r),earnedValue:0,totalValue:0,isValueBased:!1}}function $L(e){if(!e||e.length===0)return"not_started";const t=e.some(i=>i.status==="working"),r=e.some(i=>i.status==="done");return e.every(i=>i.status==="done")?"done":t||r?"working":"not_started"}function AZ(e){const t=$L(e);return t==="done"?"Complete":t==="working"?"In Progress":"Not Started"}function NZ(e,t=0){const r=new Date;r.setHours(0,0,0,0);const n={scheduleStatus:"on_track",scheduleVariance:0,scheduleLabel:"On Track",laborStatus:"on_track",laborVariance:0,laborLabel:null,hasScheduleData:!1,hasLaborData:!1};if(e.start_date&&e.end_date){const i=new Date(e.start_date),s=new Date(e.end_date);i.setHours(0,0,0,0),s.setHours(0,0,0,0);const c=Math.max(1,Math.ceil((s-i)/(1e3*60*60*24))),u=Math.max(0,Math.ceil((r-i)/(1e3*60*60*24))),m=Math.min(100,u/c*100),p=(e.progress||0)-m;n.scheduleVariance=Math.round(p),n.hasScheduleData=!0,p>5?(n.scheduleStatus="ahead",n.scheduleLabel=`Ahead of Schedule (+${n.scheduleVariance}%)`):p<-5?(n.scheduleStatus="behind",n.scheduleLabel=`Behind Schedule (${n.scheduleVariance}%)`):(n.scheduleStatus="on_track",n.scheduleLabel="On Track")}if(e.planned_man_days&&e.planned_man_days>0){const s=(e.progress||0)/100*e.planned_man_days;if(s>0&&t>0){const c=(t-s)/s*100;n.laborVariance=Math.round(c),n.hasLaborData=!0,c>10?(n.laborStatus="over",n.laborLabel=`Over Planned (+${n.laborVariance}% man-days)`):c<-10?(n.laborStatus="under",n.laborLabel=`Under Planned (${n.laborVariance}% man-days)`):(n.laborStatus="on_track",n.laborLabel="Labor On Track")}else t>0&&(n.hasLaborData=!0,n.laborLabel=`${t} man-days used`)}return n}function kZ(e,t=30){if(e.status==="archived"||e.progress<100)return!1;const r=e.areas||[];if(r.length===0||!r.every(c=>c.status==="done"))return!1;const i=r.reduce((c,u)=>{const m=new Date(u.updated_at);return m>c?m:c},new Date(0));return i.getTime()===0?!1:Math.floor((Date.now()-i.getTime())/(1e3*60*60*24))>=t}const DZ=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[59,130,246]},HL=(e,t=5e3,r=.85)=>new Promise(n=>{if(!e){n(null);return}const i=new Image;i.crossOrigin="anonymous";const s=setTimeout(()=>{i.src="",n(null)},t);i.onload=()=>{clearTimeout(s);try{const c=document.createElement("canvas");c.width=i.width,c.height=i.height,c.getContext("2d").drawImage(i,0,0);const m=c.toDataURL("image/jpeg",r);n(m)}catch{n(null)}},i.onerror=()=>{clearTimeout(s),n(null)},i.src=e}),TZ=async(e,t=5e3,r=.85)=>!e||e.length===0?[]:await Promise.all(e.map(i=>HL(i,t,r)));async function VS(e,t=1920,r=.8){return!e.type.startsWith("image/")||e.size<500*1024?e:new Promise(n=>{const i=document.createElement("canvas"),s=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:m}=c;u>t&&(m=Math.round(m*t/u),u=t);const h=1920;m>h&&(u=Math.round(u*h/m),m=h),i.width=u,i.height=m,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(c,0,0,u,m),i.toBlob(p=>{if(p){const g=e.name.replace(/\.[^/.]+$/,""),_=new File([p],`${g}.jpg`,{type:"image/jpeg",lastModified:Date.now()});n(_)}else console.warn("Image compression failed, using original"),n(e)},"image/jpeg",r),URL.revokeObjectURL(c.src)},c.onerror=()=>{console.warn("Failed to load image for compression, using original"),URL.revokeObjectURL(c.src),n(e)},c.src=URL.createObjectURL(e)})}function FL(e=5e3){return new Promise(t=>{if(!navigator.geolocation){t(null);return}navigator.geolocation.getCurrentPosition(r=>{t({latitude:r.coords.latitude,longitude:r.coords.longitude,accuracy:Math.round(r.coords.accuracy)})},()=>t(null),{enableHighAccuracy:!0,timeout:e,maximumAge:6e4})})}const Cg=["Containment","PPE","Disposal","Equipment"],TN={en:{workInfo:"Work Details",crewHours:"Crew & Hours",materialsEquipment:"Materials",evidence:"Evidence",review:"Review",quickActions:"Quick Actions",sameAsYesterday:"Same as Yesterday",setCrewHours:"Set Crew Hours",loading:"Loading...",supervision:"Supervision",operators:"Operators",laborers:"Laborers",addSupervision:"+ Add Supervision",addOperator:"+ Add Operator",addLaborer:"+ Add Laborer",foreman:"Foreman",superintendent:"Superintendent",firstLastName:"First & Last Name",start:"Start",end:"End",regHrs:"Reg Hrs",otHrs:"OT Hrs",selectCategory:"Select a category:",addCustomItem:"+ Add Custom Item",customItem:"Custom Item",itemName:"Item Name",category:"Category",quantity:"Quantity",addItem:"Add Item",cancel:"Cancel",noItemsCategory:"No items in this category yet",workDate:"Work Date",ceNumber:"CE/PCO #",optional:"optional",linkedCOR:"Link to Change Order",selectCOR:"Select COR (optional)",noCORs:"No pending CORs",laborSummary:"Labor Summary",worker:"worker",workers_plural:"workers",totalHours:"Total Hours",regular:"Regular",overtime:"Overtime",materials:"Materials",item:"item",items_plural:"items",noMaterials:"No materials added",notes:"Notes",addNotes:"Add notes about the work performed...",photos:"Photos",addPhotos:"Add Photos",maxPhotos:"max",noPhotos:"No photos added",certification:"Certification",certifyStatement:"I certify that this T&M ticket accurately reflects the work performed.",foremanSignature:"Foreman's Name (Signature)",yourName:"Your name",describeWork:"Describe the work performed",descriptionRequired:"Description is required",whatWorkPerformed:"What work was performed today?",searchMaterials:"Search materials & equipment...",noSearchResults:"No items found",orBrowse:"Or browse by category:",back:"Back",next:"Next",nextCrew:"Next: Crew",nextMaterials:"Next: Materials",reviewItems:"Review",skipNoMaterials:"Skip (no materials)",submitTM:"Submit T&M",submitting:"Submitting...",applySameHours:"Apply Same Hours",batchDescription:"Set start/end time and hours for all workers with names entered.",timeStarted:"Time Started",timeEnded:"Time Ended",regularHours:"Regular Hours",overtimeHours:"Overtime Hours",willApplyTo:"Will apply to",applyToAll:"Apply to All",preset8hr:"8hr Day",preset10hr:"10hr Day",preset4hr:"4hr Day",loadedWorkers:"Loaded {count} workers from {date}",noPreviousCrew:"No previous crew found for this project",appliedHours:"Applied hours to {count} worker(s)",assignedToCOR:"Assigned to COR",photoEvidence:"Photo Evidence",photosAdded:"photo(s) added",recommendedForBilling:"Recommended for billing",addMorePhotos:"Add More Photos",linkToChangeOrder:"Link to Change Order",linkedTo:"Linked to",optionalLinkCOR:"Optional - Link this T&M to a COR",selectCOROptional:"-- Select a COR (optional) --",noActiveCORs:"No active CORs available for this project",addWorkersFirst:"Add workers first",errorLoadingCrew:"Error loading previous crew",descriptionRecommended:"Description recommended",workersNoHours:"worker(s) have no hours entered",nameRequired:"Name required to submit",submitted:"Submitted",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Review & Submit",enterNameToSubmit:"Enter name to submit",done:"Done",skipSignature:"Skip signature for now",total:"total",needHours:"need hours",customHours:"Custom hours",selectTMWorkers:"Select T&M Workers",tapToAdd:"Tap to add",removeClass:"Remove this labor class",add:"Add",addLaborClass:"Add Labor Class...",other:"Other",noCustomClasses:"No custom labor classes set up for this company. Using default categories.",loadingLaborClasses:"Loading labor classes...",noLaborClassesYet:"No labor classes added yet. Select from crew check-in above or add manually:",tmSubmitted:"T&M Ticket Submitted!",ticketSavedReady:"Your ticket has been saved and is ready for client signature.",workersLabel:"Workers",retry:"Retry",retryAllPhotos:"Retry All Failed Photos",getClientSignature:"Get Client Signature",signatureDescription:"Have the client sign this T&M ticket to verify the work performed.",clientSignatureCollected:"Client signature collected!",signNowOnSite:"Sign Now (On-Site)",clientSignsDevice:"Client signs on this device",sendSignatureLink:"Send Signature Link",clientSignsLater:"Client signs later via link",ticketSummary:"Ticket Summary",edit:"Edit",submittedBy:"Submitted By",enterYourName:"Enter your name",certifyAccurate:"By submitting, you certify this T&M is accurate."},es:{workInfo:"Info del Trabajo",crewHours:"Cuadrilla y Horas",materialsEquipment:"Materiales",evidence:"Evidencia",review:"Revisar",quickActions:"Acciones Rapidas",sameAsYesterday:"Igual que Ayer",setCrewHours:"Poner Horas",loading:"Cargando...",supervision:"Supervision",operators:"Operadores",laborers:"Trabajadores",addSupervision:"+ Agregar Supervision",addOperator:"+ Agregar Operador",addLaborer:"+ Agregar Trabajador",foreman:"Capataz",superintendent:"Superintendente",firstLastName:"Nombre y Apellido",start:"Inicio",end:"Fin",regHrs:"Hrs Reg",otHrs:"Hrs Extra",selectCategory:"Seleccione una categoria:",addCustomItem:"+ Agregar Articulo",customItem:"Articulo Personalizado",itemName:"Nombre del Articulo",category:"Categoria",quantity:"Cantidad",addItem:"Agregar",cancel:"Cancelar",noItemsCategory:"No hay articulos en esta categoria",workDate:"Fecha de Trabajo",ceNumber:"CE/PCO #",optional:"opcional",linkedCOR:"Vincular a Orden de Cambio",selectCOR:"Seleccionar COR (opcional)",noCORs:"No hay CORs pendientes",laborSummary:"Resumen de Mano de Obra",worker:"trabajador",workers_plural:"trabajadores",totalHours:"Horas Totales",regular:"Regular",overtime:"Extra",materials:"Materiales",item:"articulo",items_plural:"articulos",noMaterials:"No se agregaron materiales",notes:"Notas",addNotes:"Agregar notas sobre el trabajo realizado...",photos:"Fotos",addPhotos:"Agregar Fotos",maxPhotos:"max",noPhotos:"No se agregaron fotos",certification:"Certificacion",certifyStatement:"Certifico que este ticket T&M refleja con precision el trabajo realizado.",foremanSignature:"Nombre del Capataz (Firma)",yourName:"Su nombre",describeWork:"Describir el trabajo realizado",descriptionRequired:"Descripcion es requerida",whatWorkPerformed:"Que trabajo se realizo hoy?",searchMaterials:"Buscar materiales y equipo...",noSearchResults:"No se encontraron articulos",orBrowse:"O navegar por categoria:",back:"Atras",next:"Siguiente",nextCrew:"Siguiente: Cuadrilla",nextMaterials:"Siguiente: Materiales",reviewItems:"Revisar",skipNoMaterials:"Saltar (sin materiales)",submitTM:"Enviar T&M",submitting:"Enviando...",applySameHours:"Aplicar Mismas Horas",batchDescription:"Establezca hora de inicio/fin y horas para todos los trabajadores.",timeStarted:"Hora de Inicio",timeEnded:"Hora de Fin",regularHours:"Horas Regulares",overtimeHours:"Horas Extra",willApplyTo:"Se aplicara a",applyToAll:"Aplicar a Todos",preset8hr:"Dia 8hr",preset10hr:"Dia 10hr",preset4hr:"Dia 4hr",loadedWorkers:"Se cargaron {count} trabajadores del {date}",noPreviousCrew:"No se encontro equipo anterior para este proyecto",appliedHours:"Horas aplicadas a {count} trabajador(es)",assignedToCOR:"Asignado a COR",photoEvidence:"Evidencia Fotogrfica",photosAdded:"foto(s) agregada(s)",recommendedForBilling:"Recomendado para facturacin",addMorePhotos:"Agregar Ms Fotos",linkToChangeOrder:"Vincular a Orden de Cambio",linkedTo:"Vinculado a",optionalLinkCOR:"Opcional - Vincular este T&M a un COR",selectCOROptional:"-- Seleccionar COR (opcional) --",noActiveCORs:"No hay CORs activos para este proyecto",addWorkersFirst:"Agregue trabajadores primero",errorLoadingCrew:"Error cargando equipo anterior",descriptionRecommended:"Descripcion recomendada",workersNoHours:"trabajador(es) sin horas",nameRequired:"Nombre requerido",submitted:"Enviado",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Revisar y Enviar",enterNameToSubmit:"Ingrese nombre",done:"Listo",skipSignature:"Saltar firma por ahora",total:"total",needHours:"sin horas",customHours:"Horas personalizadas",selectTMWorkers:"Seleccionar Trabajadores T&M",tapToAdd:"Toca para agregar",removeClass:"Eliminar esta clase",add:"Agregar",addLaborClass:"Agregar Clase de Trabajo...",other:"Otros",noCustomClasses:"No hay clases de trabajo personalizadas. Usando categorias predeterminadas.",loadingLaborClasses:"Cargando clases de trabajo...",noLaborClassesYet:"No hay clases de trabajo agregadas. Seleccione del check-in o agregue manualmente:",tmSubmitted:"Ticket T&M Enviado!",ticketSavedReady:"Su ticket ha sido guardado y est listo para la firma del cliente.",workersLabel:"Trabajadores",retry:"Reintentar",retryAllPhotos:"Reintentar Todas las Fotos",getClientSignature:"Obtener Firma del Cliente",signatureDescription:"Haga que el cliente firme este ticket T&M para verificar el trabajo realizado.",clientSignatureCollected:"Firma del cliente recopilada!",signNowOnSite:"Firmar Ahora",clientSignsDevice:"Cliente firma en este dispositivo",sendSignatureLink:"Enviar Enlace",clientSignsLater:"Cliente firma despus va enlace",ticketSummary:"Resumen del Ticket",edit:"Editar",submittedBy:"Enviado Por",enterYourName:"Ingrese su nombre",certifyAccurate:"Al enviar, certifica que este T&M es preciso."}},KL=e=>t=>TN[e]?.[t]||t;function YL({project:e,workDate:t,setWorkDate:r,cePcoNumber:n,setCePcoNumber:i,notes:s,setNotes:c,t:u,lang:m}){return f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-project-info",children:[e.job_number&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Job #"}),f.jsx("span",{className:"tm-project-value",children:e.job_number})]}),f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Project"}),f.jsx("span",{className:"tm-project-value",children:e.name})]}),e.address&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Address"}),f.jsx("span",{className:"tm-project-value",children:e.address})]}),e.general_contractor&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"GC"}),f.jsx("span",{className:"tm-project-value",children:e.general_contractor})]})]}),f.jsxs("div",{className:"tm-field-row",children:[f.jsxs("div",{className:"tm-field tm-field-half",children:[f.jsx("label",{children:"Date"}),f.jsx("input",{type:"date",value:t,onChange:h=>r(h.target.value),className:"tm-date"})]}),f.jsxs("div",{className:"tm-field tm-field-half",children:[f.jsx("label",{children:"CE / PCO #"}),f.jsx("input",{type:"text",placeholder:"Change Event / PCO",value:n,onChange:h=>i(h.target.value),className:"tm-input"})]})]}),f.jsxs("div",{className:"tm-field tm-description-field",children:[f.jsxs("label",{children:[f.jsx(Fo,{size:16,className:"inline-icon"}),u("describeWork")," ",f.jsx("span",{className:"tm-required",children:"*"})]}),f.jsx("textarea",{placeholder:u("whatWorkPerformed"),value:s,onChange:h=>c(h.target.value),rows:4,className:`tm-description ${s.trim()?"":"tm-field-required"}`})]})]})}const GL=e=>{if(!e)return"empty";const t=e.name&&e.name.trim()!=="",r=parseFloat(e.hours)>0||parseFloat(e.overtimeHours)>0;return t?r?"complete":"incomplete":"empty"},WS=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function oc({worker:e,index:t,onUpdate:r,onRemove:n,t:i,roleSelect:s}){const c=GL(e);return f.jsxs("div",{className:`tm-worker-card-expanded ${c!=="empty"?`worker-${c}`:""}`,children:[f.jsxs("div",{className:"tm-worker-row-top",children:[c==="complete"&&f.jsx("span",{className:"tm-worker-check",children:f.jsx(Ki,{size:14})}),s,f.jsx("input",{type:"text",placeholder:i("firstLastName"),value:e.name,onChange:u=>r(t,"name",u.target.value),className:"tm-worker-input"}),f.jsx("button",{className:"tm-remove",onClick:()=>n(t),children:""})]}),f.jsxs("div",{className:"tm-worker-row-bottom",children:[f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("start")}),f.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>r(t,"timeStarted",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("end")}),f.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>r(t,"timeEnded",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("regHrs")}),f.jsx("input",{type:"number",placeholder:"0",value:e.hours,onChange:u=>r(t,"hours",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("otHrs")}),f.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>r(t,"overtimeHours",u.target.value)})]})]})]})}function VL({batchHours:e,setBatchHours:t,namedWorkerCount:r,onApply:n,onClose:i,t:s}){const c=u=>{let m,h,p,g;switch(u){case"full":m="07:00",h="15:30",p="8",g="";break;case"10hr":m="06:00",h="16:30",p="8",g="2";break;case"half":m="07:00",h="11:00",p="4",g="";break;default:return}t({timeStarted:m,timeEnded:h,hours:p,overtimeHours:g})};return f.jsx("div",{className:"tm-modal-overlay",onClick:i,children:f.jsxs("div",{className:"tm-batch-modal",onClick:u=>u.stopPropagation(),children:[f.jsxs("h3",{children:[f.jsx(Mo,{size:18})," ",s("applySameHours")]}),f.jsx("p",{className:"tm-batch-description",children:s("batchDescription")}),f.jsxs("div",{className:"tm-time-presets",children:[f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("full"),children:s("preset8hr")}),f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("10hr"),children:s("preset10hr")}),f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("half"),children:s("preset4hr")})]}),f.jsxs("div",{className:"tm-batch-form",children:[f.jsxs("div",{className:"tm-batch-row",children:[f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("timeStarted")}),f.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>{const m=u.target.value,h=WS(m,e.timeEnded);t({...e,timeStarted:m,...h||{}})}})]}),f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("timeEnded")}),f.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>{const m=u.target.value,h=WS(e.timeStarted,m);t({...e,timeEnded:m,...h||{}})}})]})]}),f.jsxs("div",{className:"tm-batch-row",children:[f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("regularHours")}),f.jsx("input",{type:"number",placeholder:"8",value:e.hours,onChange:u=>t({...e,hours:u.target.value})})]}),f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("overtimeHours")}),f.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>t({...e,overtimeHours:u.target.value})})]})]})]}),f.jsxs("div",{className:"tm-batch-preview",children:[f.jsxs("strong",{children:[s("willApplyTo"),":"]}),f.jsxs("span",{children:[r," ",s("workers_plural")]})]}),f.jsxs("div",{className:"tm-batch-actions",children:[f.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:s("cancel")}),f.jsx("button",{type:"button",className:"btn btn-primary",onClick:n,disabled:!e.hours&&!e.overtimeHours,children:s("applyToAll")})]})]})})}function WL({supervision:e,operators:t,laborers:r,dynamicWorkers:n,activeLaborClassIds:i,setActiveLaborClassIds:s,laborCategories:c,laborClasses:u,hasCustomLaborClasses:m,loadingLaborClasses:h,todaysCrew:p,showBatchHoursModal:g,setShowBatchHoursModal:_,batchHours:x,setBatchHours:w,loadingPreviousCrew:j,namedWorkers:S,workersNeedingHours:O,totalRegHours:C,totalOTHours:A,onLoadPreviousCrew:k,onApplyBatchHours:D,onApplyInlinePreset:M,onAddCrewWorker:L,onActivateLaborClass:V,onDeactivateLaborClass:re,addSupervision:ie,updateSupervision:X,removeSupervision:I,addOperator:ce,updateOperator:ge,removeOperator:q,addLaborer:R,updateLaborer:U,removeLaborer:Q,addDynamicWorker:B,updateDynamicWorker:fe,removeDynamicWorker:je,getInactiveLaborClasses:ee,t:H,lang:Ee,onShowToast:Te}){const Ie=S.length;return f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-crew-summary-bar",children:[f.jsxs("div",{className:"tm-summary-left",children:[f.jsx("span",{className:"tm-summary-count",children:S.length}),f.jsx("span",{className:"tm-summary-label",children:S.length===1?H("worker"):H("workers_plural")})]}),f.jsxs("div",{className:"tm-summary-middle",children:[f.jsxs("span",{className:"tm-summary-hours",children:[C+A,"h"]}),f.jsx("span",{className:"tm-summary-label",children:H("total")})]}),O>0&&f.jsxs("div",{className:"tm-summary-warning",children:[f.jsx(Cb,{size:14}),f.jsxs("span",{children:[O," ",H("needHours")]})]})]}),f.jsxs("div",{className:"tm-quick-actions-row",children:[f.jsxs("button",{className:"tm-quick-action",onClick:k,disabled:j,children:[f.jsx(QR,{size:16}),f.jsx("span",{children:H(j?"loading":"sameAsYesterday")})]}),S.length>0&&f.jsxs("div",{className:"tm-time-presets-inline",children:[f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("8hr"),children:"8h"}),f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("10hr"),children:"10h"}),f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("4hr"),children:"4h"}),f.jsx("button",{className:"tm-preset-chip more",onClick:()=>_(!0),title:H("customHours"),children:f.jsx(Mo,{size:14})})]})]}),p.length>0&&f.jsxs("div",{className:"tm-crew-select-section",children:[f.jsxs("div",{className:"tm-section-header",children:[f.jsxs("h4",{children:[f.jsx(Po,{size:16})," ",H("selectTMWorkers")]}),f.jsx("span",{className:"tm-section-hint",children:H("tapToAdd")})]}),f.jsx("div",{className:"tm-crew-grid",children:p.map((pe,ze)=>{const J=e.some(ae=>ae.name.toLowerCase()===pe.name.toLowerCase())||t.some(ae=>ae.name.toLowerCase()===pe.name.toLowerCase())||r.some(ae=>ae.name.toLowerCase()===pe.name.toLowerCase()),we=Object.values(n).some(ae=>ae.some(He=>He.name.toLowerCase()===pe.name.toLowerCase())),xe=J||we;return f.jsxs("button",{className:`tm-crew-item ${xe?"added":""}`,onClick:()=>{xe||L(pe)},disabled:xe,children:[f.jsx("span",{className:"tm-crew-item-name",children:pe.name}),f.jsx("span",{className:`tm-crew-item-role ${(pe.role||"laborer").toLowerCase()}`,children:pe.role||"Laborer"}),xe&&f.jsx("span",{className:"tm-crew-item-check",children:""})]},ze)})})]}),m&&!h&&f.jsxs(f.Fragment,{children:[c.map(pe=>{const ze=u.filter(J=>J.category_id===pe.id&&i.has(J.id));return ze.length===0?null:f.jsxs("div",{className:"tm-labor-category-section",children:[f.jsx("div",{className:"tm-category-header",children:pe.name}),ze.map(J=>f.jsxs("div",{className:"tm-field",children:[f.jsxs("div",{className:"tm-field-header",children:[f.jsx("label",{children:J.name}),f.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>re(J.id),title:H("removeClass"),children:""})]}),f.jsx("div",{className:"tm-workers-list",children:(n[J.id]||[]).map((we,xe)=>f.jsx(oc,{worker:we,index:xe,onUpdate:(ae,He,ve)=>fe(J.id,ae,He,ve),onRemove:ae=>je(J.id,ae),t:H},xe))}),f.jsxs("button",{className:"tm-add-btn",onClick:()=>B(J.id),children:["+ ",H("add")," ",J.name]})]},J.id))]},pe.id)}),u.filter(pe=>!pe.category_id&&i.has(pe.id)).map(pe=>f.jsxs("div",{className:"tm-field",children:[f.jsxs("div",{className:"tm-field-header",children:[f.jsx("label",{children:pe.name}),f.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>re(pe.id),title:H("removeClass"),children:""})]}),f.jsx("div",{className:"tm-workers-list",children:(n[pe.id]||[]).map((ze,J)=>f.jsx(oc,{worker:ze,index:J,onUpdate:(we,xe,ae)=>fe(pe.id,we,xe,ae),onRemove:we=>je(pe.id,we),t:H},J))}),f.jsxs("button",{className:"tm-add-btn",onClick:()=>B(pe.id),children:["+ ",H("add")," ",pe.name]})]},pe.id)),ee().length>0&&f.jsx("div",{className:"tm-add-labor-class-section",children:f.jsxs("select",{className:"tm-add-labor-class-select",value:"",onChange:pe=>{pe.target.value&&V(pe.target.value)},children:[f.jsxs("option",{value:"",children:["+ ",H("addLaborClass")]}),c.map(pe=>{const ze=ee().filter(J=>J.category_id===pe.id);return ze.length===0?null:f.jsx("optgroup",{label:pe.name,children:ze.map(J=>f.jsx("option",{value:J.id,children:J.name},J.id))},pe.id)}),ee().filter(pe=>!pe.category_id).length>0&&f.jsx("optgroup",{label:H("other"),children:ee().filter(pe=>!pe.category_id).map(pe=>f.jsx("option",{value:pe.id,children:pe.name},pe.id))})]})}),i.size===0&&f.jsx("div",{className:"tm-no-labor-classes",children:f.jsx("p",{children:H("noLaborClassesYet")})})]}),h&&f.jsxs("div",{className:"tm-loading-labor-classes",children:[f.jsx($s,{size:20,className:"tm-spinner"}),f.jsx("span",{children:H("loadingLaborClasses")})]}),!m&&!h&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:H("supervision")}),f.jsx("div",{className:"tm-workers-list",children:e.map((pe,ze)=>f.jsx(oc,{worker:pe,index:ze,onUpdate:X,onRemove:I,t:H,roleSelect:f.jsx("div",{className:"tm-role-select",children:f.jsxs("select",{value:pe.role,onChange:J=>X(ze,"role",J.target.value),children:[f.jsx("option",{value:"Foreman",children:H("foreman")}),f.jsx("option",{value:"Superintendent",children:H("superintendent")})]})})},ze))}),f.jsx("button",{className:"tm-add-btn",onClick:ie,children:H("addSupervision")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:H("operators")}),f.jsx("div",{className:"tm-workers-list",children:t.map((pe,ze)=>f.jsx(oc,{worker:pe,index:ze,onUpdate:ge,onRemove:q,t:H},ze))}),f.jsx("button",{className:"tm-add-btn",onClick:ce,children:H("addOperator")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:H("laborers")}),f.jsx("div",{className:"tm-workers-list",children:r.map((pe,ze)=>f.jsx(oc,{worker:pe,index:ze,onUpdate:U,onRemove:Q,t:H},ze))}),f.jsx("button",{className:"tm-add-btn",onClick:R,children:H("addLaborer")})]})]}),g&&f.jsx(VL,{batchHours:x,setBatchHours:w,namedWorkerCount:Ie,onApply:D,onClose:()=>_(!1),t:H})]})}function XL({companyId:e,items:t,setItems:r,t:n,lang:i,onShowToast:s}){const[c,u]=y.useState(null),[m,h]=y.useState([]),[p,g]=y.useState(!1),[_,x]=y.useState(""),[w,j]=y.useState([]),[S,O]=y.useState([]),[C,A]=y.useState(!1),[k,D]=y.useState({name:"",category:"",quantity:""}),M=y.useRef(null),L=y.useRef(null);y.useEffect(()=>{c&&e&&V(c)},[c,e]),y.useEffect(()=>(!c&&M.current&&(L.current=setTimeout(()=>{M.current?.focus()},100)),()=>{L.current&&clearTimeout(L.current)}),[c]);const V=async q=>{g(!0);try{const R=await be.getMaterialsEquipmentByCategory(e,q);h(R)}catch(R){console.error("Error loading items:",R),s("Error loading items","error")}finally{g(!1)}},re=async()=>{if(!(S.length>0))try{const q=[];for(const R of Cg){const U=await be.getMaterialsEquipmentByCategory(e,R);q.push(...U.map(Q=>({...Q,category:R})))}O(q)}catch(q){console.error("Error loading all materials:",q)}},ie=q=>{if(x(q),!q.trim()){j([]);return}const R=q.toLowerCase(),U=S.filter(Q=>Q.name.toLowerCase().includes(R)||Q.category.toLowerCase().includes(R));j(U.slice(0,10))},X=q=>{const R=t.findIndex(U=>U.material_equipment_id===q.id);R>=0?r(t.map((U,Q)=>Q===R?{...U,quantity:U.quantity+1}:U)):r([...t,{material_equipment_id:q.id,name:q.name,unit:q.unit,category:q.category,quantity:1,isCustom:!1}]),s(`Added ${q.name}`,"success")},I=()=>{if(!k.name||!k.category||!k.quantity){s("Fill in all fields","error");return}r([...t,{material_equipment_id:null,custom_name:k.name,custom_category:k.category,name:k.name,category:k.category,quantity:parseFloat(k.quantity),unit:"each",isCustom:!0}]),D({name:"",category:"",quantity:""}),A(!1),u(null),s("Custom item added","success")},ce=(q,R)=>{const U=parseFloat(R)||0;U<=0?r(t.filter((Q,B)=>B!==q)):r(t.map((Q,B)=>B===q?{...Q,quantity:U}:Q))},ge=()=>{C?A(!1):c&&(u(null),A(!1))};return c||C?f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-wizard-header",style:{margin:"-1rem -1rem 1rem -1rem",padding:"0.75rem 1rem"},children:[f.jsx("button",{className:"tm-back-btn",onClick:ge,children:""}),f.jsx("h2",{children:C?"Add Custom Item":c}),f.jsxs("div",{className:"tm-item-count",children:[t.length," items"]})]}),C?f.jsxs("div",{className:"tm-custom-form",children:[f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Item Name"}),f.jsx("input",{type:"text",placeholder:"What did you use?",value:k.name,onChange:q=>D({...k,name:q.target.value}),autoFocus:!0})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Category"}),f.jsx("div",{className:"tm-category-select",children:Cg.map(q=>f.jsx("button",{className:`tm-cat-chip ${k.category===q?"active":""}`,onClick:()=>D({...k,category:q}),children:q},q))})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Quantity"}),f.jsx("input",{type:"number",placeholder:"How many?",value:k.quantity,onChange:q=>D({...k,quantity:q.target.value})})]}),f.jsx("button",{className:"tm-big-btn primary",onClick:I,children:"Add Custom Item"})]}):f.jsx("div",{className:"tm-item-grid",children:p?f.jsx("div",{className:"tm-loading",children:"Loading..."}):f.jsxs(f.Fragment,{children:[m.map(q=>{const R=t.find(U=>U.material_equipment_id===q.id);return f.jsxs("button",{className:`tm-item-card ${R?"added":""}`,onClick:()=>X(q),children:[f.jsx("span",{className:"tm-item-name",children:q.name}),f.jsx("span",{className:"tm-item-unit",children:q.unit}),R&&f.jsx("span",{className:"tm-item-badge",children:R.quantity})]},q.id)}),f.jsxs("button",{className:"tm-item-card custom",onClick:()=>A(!0),children:[f.jsx("span",{className:"tm-item-name",children:"+ Add Other"}),f.jsx("span",{className:"tm-item-unit",children:"Not on list"})]})]})}),!C&&t.length>0&&f.jsx("div",{className:"tm-wizard-footer",children:f.jsxs("button",{className:"tm-big-btn primary",onClick:()=>u(null),children:["Done Adding (",t.length," items)"]})})]}):f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-field tm-search-field",children:[f.jsxs("div",{className:"tm-search-input-wrapper",children:[f.jsx(JR,{size:18,className:"tm-search-icon"}),f.jsx("input",{ref:M,type:"text",placeholder:n("searchMaterials"),value:_,onChange:q=>ie(q.target.value),onFocus:()=>re(),className:"tm-search-input"}),_&&f.jsx("button",{className:"tm-search-clear",onClick:()=>{x(""),j([])},children:""})]}),_&&w.length>0&&f.jsx("div",{className:"tm-search-results",children:w.map((q,R)=>{const U=t.find(Q=>Q.id===q.id);return f.jsxs("button",{className:`tm-search-result-item ${U?"added":""}`,onClick:()=>{U?ce(t.indexOf(U),U.quantity+1):r([...t,{...q,quantity:1,isCustom:!1}]),x(""),j([])},children:[f.jsx("span",{className:"tm-search-result-name",children:q.name}),f.jsx("span",{className:"tm-search-result-category",children:q.category}),U&&f.jsxs("span",{className:"tm-search-result-qty",children:["",U.quantity]})]},R)})}),_&&w.length===0&&f.jsx("div",{className:"tm-search-no-results",children:n("noSearchResults")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:n("orBrowse")}),f.jsx("div",{className:"tm-category-grid",children:Cg.map(q=>{const R=t.filter(U=>U.category===q);return f.jsxs("button",{className:"tm-category-card",onClick:()=>u(q),children:[f.jsx("span",{className:"tm-cat-name",children:q}),R.length>0&&f.jsx("span",{className:"tm-cat-count",children:R.length})]},q)})})]}),t.length>0&&f.jsxs("div",{className:"tm-field",children:[f.jsxs("label",{children:["Added Items (",t.length,")"]}),f.jsx("div",{className:"tm-added-list",children:t.map((q,R)=>f.jsxs("div",{className:"tm-added-item",children:[f.jsxs("div",{className:"tm-added-info",children:[q.isCustom&&f.jsx("span",{className:"tm-custom-badge",children:"Custom"}),f.jsx("span",{className:"tm-added-name",children:q.name})]}),f.jsxs("div",{className:"tm-added-qty",children:[f.jsx("button",{onClick:()=>ce(R,q.quantity-1),children:""}),f.jsx("span",{children:q.quantity}),f.jsx("button",{onClick:()=>ce(R,q.quantity+1),children:"+"})]})]},R))})]})]})}function ZL({photos:e,onPhotoAdd:t,onRemovePhoto:r,maxPhotos:n,selectedCorId:i,setSelectedCorId:s,assignableCORs:c,lang:u}){const m=KL(u);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`tm-action-card-prominent ${e.length>0?"has-content":"needs-action"}`,children:[f.jsxs("div",{className:"tm-action-card-header",children:[f.jsx("div",{className:"tm-action-card-icon",children:f.jsx(my,{size:24})}),f.jsxs("div",{className:"tm-action-card-title",children:[f.jsx("h4",{children:m("photoEvidence")}),f.jsx("span",{className:"tm-action-card-status",children:e.length>0?`${e.length} ${m("photosAdded")}`:m("recommendedForBilling")})]})]}),e.length>0&&f.jsx("div",{className:"tm-photo-preview-row",children:e.map(h=>f.jsxs("div",{className:"tm-photo-preview-thumb",children:[f.jsx("img",{src:h.previewUrl,alt:h.name}),h.latitude&&f.jsx("span",{className:"tm-photo-gps-badge",title:`${h.latitude.toFixed(4)}, ${h.longitude.toFixed(4)}`,children:f.jsx(hy,{size:10})}),f.jsx("button",{className:"tm-photo-remove-x",onClick:()=>r(h.id),children:""})]},h.id))}),f.jsxs("label",{className:`tm-action-card-btn ${e.length===0?"primary":""}`,children:[f.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t,style:{display:"none"}}),f.jsx(my,{size:18}),f.jsx("span",{children:e.length>0?m("addMorePhotos"):m("addPhotos")})]})]}),f.jsxs("div",{className:`tm-action-card-prominent ${i?"has-content":""}`,children:[f.jsxs("div",{className:"tm-action-card-header",children:[f.jsx("div",{className:"tm-action-card-icon cor",children:f.jsx(eq,{size:24})}),f.jsxs("div",{className:"tm-action-card-title",children:[f.jsx("h4",{children:m("linkToChangeOrder")}),f.jsx("span",{className:"tm-action-card-status",children:i?`${m("linkedTo")}: ${c.find(h=>h.id===i)?.cor_number||""}`:m("optionalLinkCOR")})]})]}),f.jsxs("select",{value:i,onChange:h=>s(h.target.value),className:"tm-cor-select-prominent",children:[f.jsx("option",{value:"",children:m("selectCOROptional")}),c.map(h=>f.jsxs("option",{value:h.id,children:[h.cor_number,": ",h.title||"Untitled"," (",h.status,")"]},h.id))]}),c.length===0&&f.jsx("p",{className:"tm-cor-hint",children:m("noActiveCORs")})]})]})}const QL=y.lazy(()=>_a(()=>import("./SignatureLinkGenerator-DZ8mnEUb.js"),__vite__mapDeps([0,1,2,3,4]))),JL=y.lazy(()=>_a(()=>import("./TMClientSignature-Bv3JBL_c.js"),__vite__mapDeps([5,1,2,3,4])));function e3({step:e,setStep:t,project:r,companyId:n,workDate:i,cePcoNumber:s,notes:c,photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:p,selectedCorId:g,setSelectedCorId:_,assignableCORs:x,items:w,hasCustomLaborClasses:j,validDynamicWorkersList:S,validSupervision:O,validOperators:C,validLaborers:A,totalWorkers:k,totalRegHours:D,totalOTHours:M,submittedByName:L,setSubmittedByName:V,submittedTicket:re,submitting:ie,submitProgress:X,clientSigned:I,setClientSigned:ce,showSignatureLinkModal:ge,setShowSignatureLinkModal:q,showOnSiteSignature:R,setShowOnSiteSignature:U,onRetryPhotoUpload:Q,t:B,lang:fe,onShowToast:je}){return e===5&&re?f.jsxs("div",{className:"tm-step-content tm-success-step",children:[f.jsxs("div",{className:"tm-success-header",children:[f.jsx("div",{className:"tm-success-icon",children:f.jsx(Jn,{size:48})}),f.jsx("h2",{children:B("tmSubmitted")}),f.jsx("p",{className:"tm-success-subtitle",children:B("ticketSavedReady")})]}),f.jsxs("div",{className:"tm-success-summary",children:[f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:k}),f.jsx("span",{className:"tm-success-stat-label",children:B("workersLabel")})]}),f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:D+M}),f.jsx("span",{className:"tm-success-stat-label",children:B("totalHours")})]}),f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),f.jsx("span",{className:"tm-success-stat-label",children:B("workDate")})]})]}),u.some(ee=>ee.status==="failed")&&f.jsxs("div",{className:"tm-failed-photos-section",children:[f.jsxs("div",{className:"tm-failed-photos-header",children:[f.jsx(Cb,{size:18}),f.jsx("span",{children:fe==="en"?`${u.filter(ee=>ee.status==="failed").length} photo(s) failed to upload`:`${u.filter(ee=>ee.status==="failed").length} foto(s) no se subieron`})]}),f.jsx("div",{className:"tm-failed-photos-grid",children:u.filter(ee=>ee.status==="failed").map(ee=>f.jsxs("div",{className:"tm-failed-photo-item",children:[f.jsx("img",{src:ee.previewUrl,alt:ee.name}),f.jsx("div",{className:"tm-failed-photo-overlay",children:f.jsx("button",{className:"tm-retry-photo-btn",onClick:()=>Q(ee.id,re.id),disabled:ee.status==="uploading"||ee.status==="compressing",children:ee.status==="uploading"||ee.status==="compressing"?f.jsx($s,{size:16,className:"tm-spinner"}):f.jsxs(f.Fragment,{children:[f.jsx(xS,{size:16}),f.jsx("span",{children:B("retry")})]})})}),ee.error&&f.jsxs("div",{className:"tm-failed-photo-error",title:ee.error,children:[ee.error.substring(0,20),ee.error.length>20?"...":""]})]},ee.id))}),f.jsxs("button",{className:"tm-retry-all-btn",onClick:async()=>{const ee=u.filter(H=>H.status==="failed");for(const H of ee)await Q(H.id,re.id)},children:[f.jsx(xS,{size:16}),B("retryAllPhotos")]})]}),u.length>0&&u.every(ee=>ee.status==="confirmed")&&f.jsxs("div",{className:"tm-photos-success",children:[f.jsx(Ki,{size:16}),f.jsx("span",{children:fe==="en"?`All ${u.length} photo(s) uploaded successfully`:`${u.length} foto(s) subidas exitosamente`})]}),f.jsxs("div",{className:"tm-signature-options",children:[f.jsx("h3",{children:B("getClientSignature")}),f.jsx("p",{className:"tm-signature-description",children:B("signatureDescription")}),I?f.jsxs("div",{className:"tm-signed-confirmation",children:[f.jsx(Jn,{size:32,className:"tm-signed-icon"}),f.jsx("span",{children:B("clientSignatureCollected")})]}):f.jsxs("div",{className:"tm-signature-buttons",children:[f.jsxs("button",{className:"tm-signature-option-btn primary",onClick:()=>U(!0),children:[f.jsx("div",{className:"tm-signature-option-icon",children:f.jsx(_c,{size:24})}),f.jsxs("div",{className:"tm-signature-option-text",children:[f.jsx("span",{className:"tm-signature-option-title",children:B("signNowOnSite")}),f.jsx("span",{className:"tm-signature-option-desc",children:B("clientSignsDevice")})]})]}),f.jsxs("button",{className:"tm-signature-option-btn",onClick:()=>q(!0),children:[f.jsx("div",{className:"tm-signature-option-icon",children:f.jsx(_c,{size:24})}),f.jsxs("div",{className:"tm-signature-option-text",children:[f.jsx("span",{className:"tm-signature-option-title",children:B("sendSignatureLink")}),f.jsx("span",{className:"tm-signature-option-desc",children:B("clientSignsLater")})]})]})]})]}),ge&&f.jsx(y.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading..."}),children:f.jsx(QL,{documentType:"tm_ticket",documentId:re.id,companyId:n,projectId:r.id,project:r,documentTitle:`T&M - ${new Date(i).toLocaleDateString()}`,onClose:()=>q(!1),onShowToast:je})}),R&&f.jsx(y.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading..."}),children:f.jsx(JL,{ticketId:re.id,ticketSummary:{workDate:i,workerCount:k,totalHours:D+M},lang:fe,onSave:()=>{U(!1),ce(!0)},onClose:()=>U(!1),onShowToast:je})})]}):f.jsxs("div",{className:"tm-step-content",children:[f.jsx(ZL,{photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:p,selectedCorId:g,setSelectedCorId:_,assignableCORs:x,lang:fe}),f.jsx("div",{className:"tm-review-divider",children:f.jsx("span",{children:B("ticketSummary")})}),f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[""," ",B("workDate")]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:B("edit")})]}),f.jsxs("div",{className:"tm-review-row",children:[f.jsx("span",{children:new Date(i).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),s&&f.jsxs("span",{children:["CE/PCO: ",s]})]})]}),c&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(Fo,{size:16,className:"inline-icon"})," ",B("notes")]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:B("edit")})]}),f.jsx("div",{className:"tm-review-notes",children:c})]}),j&&S.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(Po,{size:16,className:"inline-icon"})," ",B("workersLabel")," (",D+M," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:S.map((ee,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsxs("div",{className:"tm-review-worker-name",children:[f.jsx("span",{className:"tm-role-badge",children:ee.role})," ",ee.name]}),f.jsxs("div",{className:"tm-review-worker-details",children:[ee.time_started&&ee.time_ended&&f.jsxs("span",{className:"tm-review-time",children:[ee.time_started," - ",ee.time_ended]}),f.jsxs("span",{className:"tm-review-hours",children:[ee.hours||0," reg",ee.overtime_hours>0?` + ${ee.overtime_hours} OT`:""]})]})]},H))})]}),!j&&O.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(tq,{size:16,className:"inline-icon"})," Supervision (",O.reduce((ee,H)=>ee+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:O.map((ee,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsxs("div",{className:"tm-review-worker-name",children:[f.jsx("span",{className:"tm-role-badge",children:ee.role})," ",ee.name]}),f.jsxs("div",{className:"tm-review-worker-details",children:[ee.timeStarted&&ee.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[ee.timeStarted," - ",ee.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[ee.hours||0," reg",parseFloat(ee.overtimeHours)>0?` + ${ee.overtimeHours} OT`:""]})]})]},H))})]}),!j&&C.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[""," Operators (",C.reduce((ee,H)=>ee+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:C.map((ee,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsx("div",{className:"tm-review-worker-name",children:ee.name}),f.jsxs("div",{className:"tm-review-worker-details",children:[ee.timeStarted&&ee.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[ee.timeStarted," - ",ee.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[ee.hours||0," reg",parseFloat(ee.overtimeHours)>0?` + ${ee.overtimeHours} OT`:""]})]})]},H))})]}),!j&&A.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(Po,{size:16,className:"inline-icon"})," Laborers (",A.reduce((ee,H)=>ee+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:A.map((ee,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsx("div",{className:"tm-review-worker-name",children:ee.name}),f.jsxs("div",{className:"tm-review-worker-details",children:[ee.timeStarted&&ee.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[ee.timeStarted," - ",ee.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[ee.hours||0," reg",parseFloat(ee.overtimeHours)>0?` + ${ee.overtimeHours} OT`:""]})]})]},H))})]}),w.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(rq,{size:16,className:"inline-icon"})," Materials & Equipment (",w.length," items)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(3),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:w.map((ee,H)=>f.jsxs("div",{className:"tm-review-row",children:[f.jsxs("span",{children:[ee.isCustom&&f.jsxs(f.Fragment,{children:[f.jsx(nq,{size:14,className:"inline-icon"})," "]}),ee.name]}),f.jsxs("span",{children:[ee.quantity," ",ee.unit]})]},H))})]}),f.jsxs("div",{className:"tm-review-section tm-certification",children:[f.jsx("div",{className:"tm-review-header",children:f.jsxs("span",{children:[f.jsx(_c,{size:16,className:"inline-icon"})," ",B("submittedBy")]})}),f.jsx("input",{type:"text",className:"tm-certification-input",placeholder:B("enterYourName"),value:L,onChange:ee=>V(ee.target.value)}),f.jsx("p",{className:"tm-certification-note",children:B("certifyAccurate")})]})]})}const XS=()=>{const e=new Uint8Array(6);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(36)).join("")},Dd=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function t3({project:e,companyId:t,maxPhotos:r=10,onSubmit:n,onCancel:i,onShowToast:s}){const[c,u]=y.useState(1),[m,h]=y.useState(new Date().toISOString().split("T")[0]),[p,g]=y.useState(null),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState(!1),[C,A]=y.useState(""),[k,D]=y.useState(""),[M,L]=y.useState(""),[V,re]=y.useState([]),[ie,X]=y.useState(!1),[I,ce]=y.useState(!1),[ge,q]=y.useState({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),[R,U]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}]),[Q,B]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[fe,je]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[ee,H]=y.useState([]),[Ee,Te]=y.useState(""),[Ie,pe]=y.useState([]),[ze,J]=y.useState(!1),[we,xe]=y.useState(""),[ae,He]=y.useState([]),[ve,Ne]=y.useState(!1),[Me,jt]=y.useState("en"),Re=K=>TN[Me][K]||K,[It,yt]=y.useState([]),[Ct,Br]=y.useState([]),[xt,Ye]=y.useState({}),[$r,_n]=y.useState(!0),[Hr,jr]=y.useState(new Set),Yt=Ct.length>0;y.useEffect(()=>{Qt(),he();const K=be.subscribeToCORs?.(e.id,()=>{he()});return()=>{K?.unsubscribe?.()}},[e.id]),y.useEffect(()=>{(async()=>{if(!t){_n(!1);return}try{const le=await be.getLaborClassesForField(t);yt(le.categories||[]),Br(le.classes||[])}catch(le){console.error("Error loading labor classes:",le)}finally{_n(!1)}})()},[t]),y.useEffect(()=>{if($r||Ct.length===0)return;const K=new Set;ae.forEach(se=>{se.labor_class_id&&K.add(se.labor_class_id)});const le={},me=new Set;K.forEach(se=>{Ct.some(ne=>ne.id===se)&&(le[se]=[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}],me.add(se))}),Ye(se=>Object.keys(se).length===0?le:se),jr(se=>se.size===0?me:se)},[Ct,ae,$r]);const he=async()=>{X(!0);try{const K=await be.getAssignableCORs(e.id);re(K||[])}catch(K){console.error("Error loading assignable CORs:",K)}finally{X(!1)}},it=()=>{const{timeStarted:K,timeEnded:le,hours:me,overtimeHours:se}=ge;let ne=0;if(Yt){const Se={};Object.entries(xt).forEach(([Ue,Fe])=>{Se[Ue]=Fe.map(lt=>lt&&lt.name&&lt.name.trim()?(ne++,{...lt,timeStarted:K,timeEnded:le,hours:me,overtimeHours:se}):lt)}),Ye(Se)}else U(R.map(Se=>Se&&Se.name&&Se.name.trim()?(ne++,{...Se,timeStarted:K,timeEnded:le,hours:me,overtimeHours:se}):Se)),B(Q.map(Se=>Se&&Se.name&&Se.name.trim()?(ne++,{...Se,timeStarted:K,timeEnded:le,hours:me,overtimeHours:se}):Se)),je(fe.map(Se=>Se&&Se.name&&Se.name.trim()?(ne++,{...Se,timeStarted:K,timeEnded:le,hours:me,overtimeHours:se}):Se));ce(!1),q({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),ne>0?s(Re("appliedHours").replace("{count}",ne),"success"):s(Re("addWorkersFirst"),"info")},xn=K=>{let le,me,se,ne;switch(K){case"8hr":le="07:00",me="15:30",se="8",ne="";break;case"10hr":le="06:00",me="16:30",se="8",ne="2";break;case"4hr":le="07:00",me="11:00",se="4",ne="";break;default:return}let Se=0;if(Yt){const Ue={};Object.entries(xt).forEach(([Fe,lt])=>{Ue[Fe]=lt.map(Mr=>Mr&&Mr.name&&Mr.name.trim()?(Se++,{...Mr,timeStarted:le,timeEnded:me,hours:se,overtimeHours:ne}):Mr)}),Ye(Ue)}else U(Ue=>Ue.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(Se++,{...Fe,timeStarted:le,timeEnded:me,hours:se,overtimeHours:ne}):Fe)),B(Ue=>Ue.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(Se++,{...Fe,timeStarted:le,timeEnded:me,hours:se,overtimeHours:ne}):Fe)),je(Ue=>Ue.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(Se++,{...Fe,timeStarted:le,timeEnded:me,hours:se,overtimeHours:ne}):Fe));Se>0?s(Re("appliedHours").replace("{count}",Se),"success"):s(Re("addWorkersFirst"),"info")},Qt=async()=>{try{const K=await be.getCrewCheckin(e.id);K?.workers&&He(K.workers)}catch(K){console.error("Error loading crew:",K)}},Ut=async()=>{Ne(!0);try{const K=await be.getPreviousTicketCrew(e.id,m);if(!K||K.totalWorkers===0){s(Re("noPreviousCrew"),"info");return}Yt&&K.dynamicWorkers?Ye(K.dynamicWorkers):(K.supervision&&U(K.supervision),K.operators&&B(K.operators),K.laborers&&je(K.laborers));const le=new Date(K.workDate).toLocaleDateString();s(Re("loadedWorkers").replace("{count}",K.totalWorkers).replace("{date}",le),"success")}catch(K){console.error("Error loading previous crew:",K),s(Re("errorLoadingCrew"),"error")}finally{Ne(!1)}},qt=()=>{U([...R,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},ft=(K,le,me)=>{U(R.map((se,ne)=>{if(ne!==K)return se;const Se={...se,[le]:me};if(le==="timeStarted"||le==="timeEnded"){const Ue=le==="timeStarted"?me:se.timeStarted,Fe=le==="timeEnded"?me:se.timeEnded,lt=Dd(Ue,Fe);lt&&(Se.hours=lt.hours,Se.overtimeHours=lt.overtimeHours)}return Se}))},en=K=>{R.length>1?U(R.filter((le,me)=>me!==K)):U([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},$n=()=>{je([...fe,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},oa=(K,le,me)=>{je(fe.map((se,ne)=>{if(ne!==K)return se;const Se={...se,[le]:me};if(le==="timeStarted"||le==="timeEnded"){const Ue=le==="timeStarted"?me:se.timeStarted,Fe=le==="timeEnded"?me:se.timeEnded,lt=Dd(Ue,Fe);lt&&(Se.hours=lt.hours,Se.overtimeHours=lt.overtimeHours)}return Se}))},di=K=>{fe.length>1?je(fe.filter((le,me)=>me!==K)):je([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},fi=()=>{B([...Q,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},xa=(K,le,me)=>{B(Q.map((se,ne)=>{if(ne!==K)return se;const Se={...se,[le]:me};if(le==="timeStarted"||le==="timeEnded"){const Ue=le==="timeStarted"?me:se.timeStarted,Fe=le==="timeEnded"?me:se.timeEnded,lt=Dd(Ue,Fe);lt&&(Se.hours=lt.hours,Se.overtimeHours=lt.overtimeHours)}return Se}))},wn=K=>{Q.length>1?B(Q.filter((le,me)=>me!==K)):B([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},mi=K=>{Ye(le=>({...le,[K]:[...le[K]||[],{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))},wa=(K,le,me,se)=>{Ye(ne=>({...ne,[K]:(ne[K]||[]).map((Se,Ue)=>{if(Ue!==le)return Se;const Fe={...Se,[me]:se};if(me==="timeStarted"||me==="timeEnded"){const lt=me==="timeStarted"?se:Se.timeStarted,Mr=me==="timeEnded"?se:Se.timeEnded,Je=Dd(lt,Mr);Je&&(Fe.hours=Je.hours,Fe.overtimeHours=Je.overtimeHours)}return Fe})}))},ll=(K,le)=>{Ye(me=>{const se=me[K]||[];return se.length>1?{...me,[K]:se.filter((ne,Se)=>Se!==le)}:{...me,[K]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}})},ye=K=>{K&&(jr(le=>new Set([...le,K])),Ye(le=>!le[K]||le[K].length===0?{...le,[K]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}:le))},Hn=K=>{jr(le=>{const me=new Set(le);return me.delete(K),me}),Ye(le=>{const me={...le};return delete me[K],me})},ja=()=>Ct.filter(K=>!Hr.has(K.id)),cl=()=>{if(!xt||typeof xt!="object")return[];const K=[];return Object.entries(xt).forEach(([le,me])=>{if(!Array.isArray(me))return;const se=Ct.find(ne=>ne.id===le);me.forEach(ne=>{ne&&ne.name&&ne.name.trim()&&(parseFloat(ne.hours)>0||parseFloat(ne.overtimeHours)>0)&&K.push({name:ne.name.trim(),hours:parseFloat(ne.hours)||0,overtime_hours:parseFloat(ne.overtimeHours)||0,time_started:ne.timeStarted||null,time_ended:ne.timeEnded||null,role:se?.name||"Worker",labor_class_id:le})})}),K},fu=K=>{if(K.labor_class_id&&Yt&&Ct.some(me=>me.id===K.labor_class_id)){Hr.has(K.labor_class_id)||jr(ne=>new Set([...ne,K.labor_class_id]));const me=xt[K.labor_class_id]||[],se=me.findIndex(ne=>!ne||!ne.name||!ne.name.trim());if(se>=0){const ne=[...me];ne[se]={...ne[se],name:K.name},Ye(Se=>({...Se,[K.labor_class_id]:ne}))}else Ye(ne=>({...ne,[K.labor_class_id]:[...ne[K.labor_class_id]||[],{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}else if(Yt){const se=[...Hr][0]||Ct[0]?.id;if(se){Hr.has(se)||jr(Ue=>new Set([...Ue,se]));const ne=xt[se]||[],Se=ne.findIndex(Ue=>!Ue||!Ue.name||!Ue.name.trim());if(Se>=0){const Ue=[...ne];Ue[Se]={...Ue[Se],name:K.name},Ye(Fe=>({...Fe,[se]:Ue}))}else Ye(Ue=>({...Ue,[se]:[...Ue[se]||[],{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}}else{const me=(K.role||"").toLowerCase();if(me.includes("foreman")||me.includes("supervisor")||me.includes("superintendent")){const se=R.findIndex(ne=>!ne||!ne.name||!ne.name.trim());se>=0?(ft(se,"name",K.name),ft(se,"role",me.includes("superintendent")?"Superintendent":"Foreman")):U([...R,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:me.includes("superintendent")?"Superintendent":"Foreman"}])}else if(me.includes("operator")){const se=Q.findIndex(ne=>!ne||!ne.name||!ne.name.trim());se>=0?xa(se,"name",K.name):B([...Q,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}else{const se=fe.findIndex(ne=>!ne||!ne.name||!ne.name.trim());se>=0?oa(se,"name",K.name):je([...fe,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}}s(`Added ${K.name}`,"success")},mu=async K=>{const le=Array.from(K.target.files);if(le.length===0)return;const me=r===-1?1/0:r-Ie.length;if(me<=0){s(`Photo limit reached (${r} max)`,"error"),K.target.value="";return}const se=le.slice(0,me);se.length<le.length&&s(`Only ${se.length} photo(s) added (${r} max)`,"error");const ne=await FL(),Se=10*1024*1024;se.forEach(Ue=>{if(!Ue.type.startsWith("image/")){s("Please select an image file","error");return}if(Ue.size>Se){s(`Photo too large: ${Ue.name} (max 10MB)`,"error");return}const Fe=URL.createObjectURL(Ue),lt=`photo-${Date.now()}-${XS()}`;pe(Mr=>[...Mr,{id:`${Date.now()}-${XS()}`,tempId:lt,file:Ue,previewUrl:Fe,name:Ue.name,status:"pending",attempts:0,error:null,uploadedUrl:null,latitude:ne?.latitude||null,longitude:ne?.longitude||null,gpsAccuracy:ne?.accuracy||null}])}),K.target.value=""},Fn=(K,le)=>{pe(me=>me.map(se=>se.id===K?{...se,...le}:se))},ul=async(K,le)=>{const me=Ie.find(se=>se.id===K);if(!(!me||me.status!=="failed")){Fn(K,{status:"compressing",error:null});try{let se=me.file;try{se=await VS(me.file)}catch(Se){console.warn("Compression failed, using original:",Se)}Fn(K,{status:"uploading"});const ne=await be.uploadPhoto(t,e.id,le,se);Fn(K,{status:"confirmed",uploadedUrl:ne,attempts:me.attempts+1}),await be.updateTMTicketPhotos(le,[...Ie.filter(Se=>Se.uploadedUrl).map(Se=>Se.uploadedUrl),ne]),s("Photo uploaded successfully","success")}catch(se){console.error("Retry failed:",se),Fn(K,{status:"failed",error:se.message||"Upload failed",attempts:me.attempts+1}),s("Photo retry failed","error")}}},dl=K=>{const le=Ie.find(me=>me.id===K);le?.previewUrl&&URL.revokeObjectURL(le.previewUrl),pe(Ie.filter(me=>me.id!==K))},eo=R.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),to=Q.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),tn=fe.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),Bt=cl(),sr=Yt?Bt.length:eo.length+to.length+tn.length,sa=Yt?Bt.reduce((K,le)=>K+(le.hours||0),0):[...eo,...to,...tn].reduce((K,le)=>K+parseFloat(le.hours||0),0),ro=Yt?Bt.reduce((K,le)=>K+(le.overtime_hours||0),0):[...eo,...to,...tn].reduce((K,le)=>K+parseFloat(le.overtimeHours||0),0),hu=Yt?Object.values(xt||{}).flat().filter(K=>K&&K.name&&K.name.trim()):[...R.filter(K=>K&&K.name&&K.name.trim()),...Q.filter(K=>K&&K.name&&K.name.trim()),...fe.filter(K=>K&&K.name&&K.name.trim())],fl=hu.length-sr,ml=()=>{if(c===1)return Ee.trim().length>0;if(c===2){if(Yt)return cl().length>0;const K=R.some(se=>se&&se.name&&se.name.trim()&&(parseFloat(se.hours)>0||parseFloat(se.overtimeHours)>0)),le=Q.some(se=>se&&se.name&&se.name.trim()&&(parseFloat(se.hours)>0||parseFloat(se.overtimeHours)>0)),me=fe.some(se=>se&&se.name&&se.name.trim()&&(parseFloat(se.hours)>0||parseFloat(se.overtimeHours)>0));return K||le||me}return!0},Qo=(()=>{const K=[];return c===1&&!Ee.trim()&&K.push(Re("descriptionRecommended")),c===2&&fl>0&&K.push(`${fl} ${Re("workersNoHours")}`),c===4&&!k.trim()&&K.push(Re("nameRequired")),K})(),Kn=()=>{c<4&&u(c+1)},hi=()=>{c>1?u(c-1):i()},no=async()=>{if(!k.trim()){s("Enter your name to submit","error");return}let K=[];if(Yt){if(K=cl(),K.length===0){s("Add at least one worker","error");return}}else{const le=R.filter(ne=>ne&&ne.name&&ne.name.trim()&&(parseFloat(ne.hours)>0||parseFloat(ne.overtimeHours)>0)),me=Q.filter(ne=>ne&&ne.name&&ne.name.trim()&&(parseFloat(ne.hours)>0||parseFloat(ne.overtimeHours)>0)),se=fe.filter(ne=>ne&&ne.name&&ne.name.trim()&&(parseFloat(ne.hours)>0||parseFloat(ne.overtimeHours)>0));if(le.length===0&&me.length===0&&se.length===0){s("Add at least one worker","error");return}K=[...le.map(ne=>({name:ne.name.trim(),hours:parseFloat(ne.hours)||0,overtime_hours:parseFloat(ne.overtimeHours)||0,time_started:ne.timeStarted||null,time_ended:ne.timeEnded||null,role:ne.role})),...me.map(ne=>({name:ne.name.trim(),hours:parseFloat(ne.hours)||0,overtime_hours:parseFloat(ne.overtimeHours)||0,time_started:ne.timeStarted||null,time_ended:ne.timeEnded||null,role:"Operator"})),...se.map(ne=>({name:ne.name.trim(),hours:parseFloat(ne.hours)||0,overtime_hours:parseFloat(ne.overtimeHours)||0,time_started:ne.timeStarted||null,time_ended:ne.timeEnded||null,role:"Laborer"}))]}J(!0),xe("Creating ticket...");try{const le=await be.createTMTicket({project_id:e.id,work_date:m,ce_pco_number:C.trim()||null,assigned_cor_id:M||null,notes:Ee.trim()||null,photos:[],created_by_name:k.trim()});if(!le||!le.id)throw new Error("Failed to create ticket - no ticket ID returned");let me=[];const se=Ie.filter(ne=>ne.status==="pending");if(se.length>0){xe(`Compressing ${se.length} photo${se.length>1?"s":""}...`),se.forEach(Je=>Fn(Je.id,{status:"compressing"}));const ne=await Promise.all(se.map(async Je=>{try{const Gt=await VS(Je.file);return{...Je,file:Gt}}catch(Gt){return console.warn(`Failed to compress photo ${Je.name}, using original:`,Gt),Je}}));xe(`Uploading ${se.length} photo${se.length>1?"s":""}...`),se.forEach(Je=>Fn(Je.id,{status:"uploading"}));let Se=0,Ue=0;const Fe=ne.map(async Je=>{try{const Gt=await be.uploadPhoto(t,e.id,le.id,Je.file);return Se++,xe(`Uploading ${Se}/${se.length} photos...`),Fn(Je.id,{status:"confirmed",uploadedUrl:Gt,attempts:(Je.attempts||0)+1}),{id:Je.id,url:Gt}}catch(Gt){return console.error(`Photo ${Je.name} upload failed:`,Gt),Ue++,Fn(Je.id,{status:"failed",error:Gt.message||"Upload failed",attempts:(Je.attempts||0)+1}),{id:Je.id,url:null,error:Gt.message}}}),lt=await Promise.all(Fe);me=lt.filter(Je=>Je.url!==null).map(Je=>Je.url);const Mr={};for(const Je of lt)if(Je.url){const Gt=se.find(Yn=>Yn.id===Je.id);Gt?.latitude&&Gt?.longitude&&(Mr[Je.url]={lat:Gt.latitude,lng:Gt.longitude,accuracy:Gt.gpsAccuracy})}Ue>0&&me.length>0?s(`${me.length}/${se.length} photos uploaded. ${Ue} failed - can retry later.`,"warning"):Ue>0&&me.length===0&&s(`All ${Ue} photos failed to upload - can retry after submission.`,"error"),me.length>0&&(xe("Saving photos..."),await be.updateTMTicketPhotos(le.id,me,Object.keys(Mr).length>0?Mr:null))}else me.length>0&&(xe("Saving photos..."),await be.updateTMTicketPhotos(le.id,me));if(xe("Saving workers..."),await be.addTMWorkers(le.id,K),ee.length>0&&(xe("Saving materials..."),await be.addTMItems(le.id,ee.map(ne=>({material_equipment_id:ne.material_equipment_id,custom_name:ne.custom_name||null,custom_category:ne.custom_category||null,quantity:ne.quantity})))),M){xe("Importing to COR...");try{await be.importTicketDataToCOR(le.id,M,t,e.work_type||"demolition",e.job_type||"standard")}catch(ne){console.error("Error importing to COR:",ne);try{await be.markImportFailed(le.id,M,ne?.message||"Import failed")}catch(Se){console.error("Error marking import failed:",Se)}s("T&M saved. COR data sync failed - retry from ticket list.","warning")}}Ie.forEach(ne=>{ne.previewUrl&&URL.revokeObjectURL(ne.previewUrl)}),g(le),s("T&M submitted!","success"),u(5)}catch(le){console.error("Error submitting T&M:",le),s("Error submitting T&M","error")}finally{J(!1),xe("")}};return f.jsxs("div",{className:"tm-wizard",children:[f.jsxs("div",{className:"tm-wizard-header",children:[c<5?f.jsx("button",{className:"tm-back-btn",onClick:hi,children:""}):f.jsx("div",{className:"tm-success-check",children:f.jsx(Jn,{size:24})}),f.jsxs("h2",{children:[c===1&&Re("workInfo"),c===2&&Re("crewHours"),c===3&&Re("materialsEquipment"),c===4&&Re("review"),c===5&&Re("submitted")]}),f.jsxs("div",{className:"tm-header-right",children:[c<4&&f.jsxs("button",{className:"tm-lang-toggle",onClick:()=>jt(Me==="en"?"es":"en"),title:Re(Me==="en"?"switchToSpanish":"switchToEnglish"),children:[f.jsx(aq,{size:16}),Me==="en"?"ES":"EN"]}),c<5&&f.jsxs("div",{className:"tm-step-dots",children:[f.jsx("span",{className:`tm-dot ${c>=1?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=2?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=3?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=4?"active":""}`})]})]})]}),c===1&&f.jsx(YL,{project:e,workDate:m,setWorkDate:h,cePcoNumber:C,setCePcoNumber:A,notes:Ee,setNotes:Te,t:Re,lang:Me}),c===2&&f.jsx(WL,{supervision:R,operators:Q,laborers:fe,dynamicWorkers:xt,activeLaborClassIds:Hr,setActiveLaborClassIds:jr,laborCategories:It,laborClasses:Ct,hasCustomLaborClasses:Yt,loadingLaborClasses:$r,todaysCrew:ae,showBatchHoursModal:I,setShowBatchHoursModal:ce,batchHours:ge,setBatchHours:q,loadingPreviousCrew:ve,namedWorkers:hu,workersNeedingHours:fl,totalRegHours:sa,totalOTHours:ro,onLoadPreviousCrew:Ut,onApplyBatchHours:it,onApplyInlinePreset:xn,onAddCrewWorker:fu,onActivateLaborClass:ye,onDeactivateLaborClass:Hn,addSupervision:qt,updateSupervision:ft,removeSupervision:en,addOperator:fi,updateOperator:xa,removeOperator:wn,addLaborer:$n,updateLaborer:oa,removeLaborer:di,addDynamicWorker:mi,updateDynamicWorker:wa,removeDynamicWorker:ll,getInactiveLaborClasses:ja,t:Re,lang:Me,onShowToast:s}),c===3&&f.jsx(XL,{companyId:t,items:ee,setItems:H,t:Re,lang:Me,onShowToast:s}),(c===4||c===5)&&f.jsx(e3,{step:c,setStep:u,project:e,companyId:t,workDate:m,cePcoNumber:C,notes:Ee,photos:Ie,onPhotoAdd:mu,onRemovePhoto:dl,maxPhotos:r,selectedCorId:M,setSelectedCorId:L,assignableCORs:V,items:ee,hasCustomLaborClasses:Yt,validDynamicWorkersList:Bt,validSupervision:eo,validOperators:to,validLaborers:tn,totalWorkers:sr,totalRegHours:sa,totalOTHours:ro,submittedByName:k,setSubmittedByName:D,submittedTicket:p,submitting:ze,submitProgress:we,clientSigned:S,setClientSigned:O,showSignatureLinkModal:_,setShowSignatureLinkModal:x,showOnSiteSignature:w,setShowOnSiteSignature:j,onRetryPhotoUpload:ul,t:Re,lang:Me,onShowToast:s}),c<5&&f.jsxs("div",{className:"tm-wizard-footer",children:[Qo.length>0&&f.jsxs("div",{className:"tm-validation-summary",children:[f.jsx(Cb,{size:16}),f.jsx("span",{children:Qo[0]})]}),c===1&&f.jsx("button",{className:"tm-big-btn primary",onClick:Kn,disabled:!ml(),children:Re("nextCrew")}),c===2&&f.jsxs("button",{className:"tm-big-btn primary",onClick:Kn,disabled:!ml(),children:[Re("nextMaterials")," (",sr," ",Re(sr===1?"worker":"workers_plural"),", ",sa+ro," hrs)"]}),c===3&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"tm-big-btn primary",onClick:Kn,children:[Re("reviewAndSubmit")," (",ee.length," ",ee.length===1?Re("item"):Re("items_plural"),")"]}),f.jsx("button",{className:"tm-skip-btn",onClick:Kn,children:Re("skipNoMaterials")})]}),c===4&&f.jsx("button",{className:`tm-big-btn submit ${ze?"submitting":""} ${k.trim()?"ready":"needs-name"}`,onClick:no,disabled:ze||!k.trim(),children:ze?f.jsxs(f.Fragment,{children:[f.jsx($s,{size:20,className:"tm-spinner"}),f.jsx("span",{className:"tm-submit-text",children:we||Re("submitting")})]}):k.trim()?f.jsxs(f.Fragment,{children:[f.jsx(Ki,{size:20}),f.jsx("span",{children:Re("submitTM")})]}):f.jsxs(f.Fragment,{children:[f.jsx(_c,{size:18}),f.jsx("span",{children:Re("enterNameToSubmit")})]})})]}),c===5&&f.jsxs("div",{className:"tm-wizard-footer",children:[f.jsxs("button",{className:"tm-big-btn primary",onClick:n,children:[f.jsx(Ki,{size:20}),f.jsx("span",{children:Re("done")})]}),f.jsx("button",{className:"tm-skip-btn",onClick:n,children:Re("skipSignature")})]})]})}function r3({project:e,companyId:t,onShowToast:r}){const[n,i]=y.useState([]),[s,c]=y.useState(!0),[u,m]=y.useState(!1),[h,p]=y.useState(!1),[g,_]=y.useState({name:"",role:"",labor_class_id:null}),[x,w]=y.useState([]),[j,S]=y.useState(!0),[O,C]=y.useState([]),[A,k]=y.useState([]),[D,M]=y.useState(!0),L=["Foreman","Laborer","Supervisor","Operator"],V=y.useCallback(async()=>{try{const B=await be.getCrewCheckin(e.id);B?.workers&&i(B.workers)}catch(B){console.error("Error loading crew:",B),r?.("Error loading today's crew","error")}finally{c(!1)}},[e?.id,r]),re=y.useCallback(async()=>{try{const B=await be.getRecentWorkers(e.id,30);w(B)}catch(B){console.error("Error loading recent workers:",B)}finally{S(!1)}},[e?.id]),ie=y.useCallback(async()=>{try{const B=await be.getLaborClassesForField(t);C(B.categories||[]),k(B.classes||[]),B.classes&&B.classes.length>0&&_(fe=>({...fe,role:B.classes[0].name,labor_class_id:B.classes[0].id}))}catch(B){console.error("Error loading labor classes:",B),r?.("Using default roles - custom labor classes unavailable","info")}finally{M(!1)}},[t,r]);y.useEffect(()=>{e?.id&&(V(),re(),t?ie():M(!1))},[e?.id,t,V,re,ie]);const X=B=>{const fe=A.find(je=>je.id===B);_(fe?{...g,role:fe.name,labor_class_id:fe.id}:{...g,role:B,labor_class_id:null})},I=async()=>{if(!g.name.trim()){r("Enter worker name","error");return}if(!g.role){r("Select a role","error");return}if(n.find(B=>B.name.toLowerCase()===g.name.trim().toLowerCase())){r("Worker already added","error");return}m(!0);try{const B=[...n,{name:g.name.trim(),role:g.role,labor_class_id:g.labor_class_id}];await be.saveCrewCheckin(e.id,B),i(B),_({...g,name:""}),p(!1),r("Crew member added","success")}catch(B){console.error("Error adding worker:",B),r("Error adding crew member","error")}finally{m(!1)}},ce=async B=>{m(!0);try{const fe=n.filter(je=>je.name.toLowerCase()!==B.toLowerCase());await be.saveCrewCheckin(e.id,fe),i(fe),r("Crew member removed","success")}catch(fe){console.error("Error removing worker:",fe),r("Error removing crew member","error")}finally{m(!1)}},ge=async B=>{if(n.find(fe=>fe.name.toLowerCase()===B.name.toLowerCase())){r("Already checked in","info");return}m(!0);try{const fe=[...n,{name:B.name,role:B.role,labor_class_id:B.labor_class_id}];await be.saveCrewCheckin(e.id,fe),i(fe),r(`${B.name} checked in`,"success")}catch(fe){console.error("Error adding worker:",fe),r("Error adding crew member","error")}finally{m(!1)}},q=x.filter(B=>!n.find(fe=>fe.name.toLowerCase()===B.name.toLowerCase())),R=new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),U=()=>{const B={};O.forEach(je=>{B[je.id]={name:je.name,classes:A.filter(ee=>ee.category_id===je.id)}});const fe=A.filter(je=>!je.category_id);return fe.length>0&&(B.uncategorized={name:"Other",classes:fe}),B},Q=A.length>0;return s||D?f.jsxs("div",{className:"crew-checkin",children:[f.jsxs("div",{className:"crew-header",children:[f.jsxs("h3",{children:[f.jsx(Po,{size:18,className:"inline-icon"})," Today's Crew"]}),f.jsx("span",{className:"crew-date",children:R})]}),f.jsx("div",{className:"crew-loading",children:"Loading..."})]}):f.jsxs("div",{className:"crew-checkin",children:[f.jsxs("div",{className:"crew-header",children:[f.jsxs("h3",{children:[f.jsx(Po,{size:18,className:"inline-icon"})," Today's Crew"]}),f.jsx("span",{className:"crew-date",children:R})]}),n.length===0?f.jsxs("div",{className:"crew-empty",children:[f.jsx("p",{children:"No crew checked in yet"}),f.jsx("p",{className:"crew-empty-hint",children:"Add your crew for the day"})]}):f.jsx("div",{className:"crew-list",children:n.map(B=>f.jsxs("div",{className:"crew-member",children:[f.jsxs("div",{className:"crew-member-info",children:[f.jsx("span",{className:"crew-member-name",children:B.name}),f.jsx("span",{className:`crew-member-role ${(B.role||"laborer").toLowerCase().replace(/\s+/g,"-")}`,children:B.role})]}),f.jsx("button",{className:"crew-remove-btn",onClick:()=>ce(B.name),disabled:u,children:""})]},B.name))}),!j&&q.length>0&&f.jsxs("div",{className:"crew-quick-add",children:[f.jsx("div",{className:"crew-quick-add-header",children:f.jsx("span",{children:"Tap to add"})}),f.jsx("div",{className:"crew-quick-add-grid",children:q.map(B=>f.jsxs("button",{className:"crew-quick-add-btn",onClick:()=>ge(B),disabled:u,children:[f.jsx("span",{className:"crew-quick-add-name",children:B.name}),f.jsx("span",{className:"crew-quick-add-role",children:B.role})]},B.name))})]}),h?f.jsxs("div",{className:"crew-add-form",children:[f.jsx("input",{type:"text",value:g.name,onChange:B=>_({...g,name:B.target.value}),placeholder:"Name",autoFocus:!0}),f.jsx("select",{value:g.labor_class_id||g.role,onChange:B=>X(B.target.value),children:Q?Object.entries(U()).map(([B,fe])=>f.jsx("optgroup",{label:fe.name,children:fe.classes.map(je=>f.jsx("option",{value:je.id,children:je.name},je.id))},B)):L.map(B=>f.jsx("option",{value:B,children:B},B))}),f.jsxs("div",{className:"crew-add-buttons",children:[f.jsx("button",{className:"crew-add-confirm",onClick:I,disabled:u,children:u?"...":"Add"}),f.jsx("button",{className:"crew-add-cancel",onClick:()=>{p(!1),_({name:"",role:A[0]?.name||"Laborer",labor_class_id:A[0]?.id||null})},children:"Cancel"})]})]}):f.jsxs("button",{className:"crew-add-btn",onClick:()=>p(!0),children:[f.jsx(KA,{size:18}),f.jsx("span",{children:"Add New Person"})]}),f.jsxs("div",{className:"crew-count",children:[n.length," ",n.length===1?"person":"people"," on site"]})]})}function n3({project:e,onShowToast:t,onClose:r}){const[n,i]=y.useState(!0),[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(""),[g,_]=y.useState("");y.useEffect(()=>{e?.id&&x()},[e?.id]);const x=async()=>{try{const O=await be.getDailyReport(e.id);if(O)m(O),p(O.field_notes||""),_(O.issues||"");else{const C=await be.compileDailyReport(e.id);m({...C,status:"draft"})}}catch(O){console.error("Error loading report:",O),t("Error loading report","error")}finally{i(!1)}},w=async()=>{if(!P){t("Demo Mode: Report saved locally only - won't reach office","info"),r();return}c(!0);try{await be.saveDailyReport(e.id,{field_notes:h,issues:g}),await be.submitDailyReport(e.id,"Field")?(t("Daily report submitted!","success"),r()):t("Report not sent - check connection","error")}catch(O){console.error("Error submitting report:",O),t("Error submitting report","error")}finally{c(!1)}},j=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});if(n)return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsx("h2",{children:"Daily Report"})]}),f.jsx("div",{className:"daily-report-loading",children:"Compiling report..."})]});if(!u)return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsx("h2",{children:"Daily Report"})]}),f.jsxs("div",{className:"daily-report-error",children:[f.jsx("p",{children:"Unable to load report data."}),f.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Retry"})]})]});const S=u.status==="submitted";return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsxs("div",{children:[f.jsx("h2",{children:"Daily Report"}),f.jsx("p",{className:"daily-report-date",children:j})]})]}),S&&f.jsxs("div",{className:"daily-report-submitted-banner",children:[" Submitted ",new Date(u.submitted_at).toLocaleTimeString()]}),f.jsxs("div",{className:"daily-report-content",children:[f.jsxs("div",{className:"daily-report-summary",children:[f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.crew_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"Crew on Site"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.tasks_completed||0}),f.jsx("div",{className:"daily-report-card-label",children:"Tasks Done"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.tm_tickets_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"T&M Tickets"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.photos_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"Photos"})]})]}),u.crew_list?.length>0&&f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(Po,{size:18,className:"inline-icon"})," Crew"]}),f.jsx("div",{className:"daily-report-crew",children:u.crew_list.map((O,C)=>f.jsxs("div",{className:"daily-report-crew-item",children:[f.jsx("span",{children:O.name}),f.jsx("span",{className:"daily-report-crew-role",children:O.role})]},C))})]}),u.completed_tasks?.length>0&&f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(iq,{size:18,className:"inline-icon"})," Completed Today"]}),f.jsx("ul",{className:"daily-report-tasks",children:u.completed_tasks.map((O,C)=>f.jsxs("li",{children:[O.name,O.group&&f.jsx("span",{className:"daily-report-task-group",children:O.group})]},C))})]}),f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(Fo,{size:18,className:"inline-icon"})," Notes"]}),f.jsx("textarea",{value:h,onChange:O=>p(O.target.value),placeholder:"Any notes about today's work...",rows:3,disabled:S})]}),f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(lm,{size:18,className:"inline-icon"})," Issues / Concerns"]}),f.jsx("textarea",{value:g,onChange:O=>_(O.target.value),placeholder:"Any problems, delays, or concerns...",rows:3,disabled:S})]})]}),!S&&f.jsxs("div",{className:"daily-report-footer",children:[f.jsx("button",{className:"btn btn-primary daily-report-submit",onClick:w,disabled:s,children:s?"Submitting...":f.jsxs(f.Fragment,{children:[f.jsx(oq,{size:16,className:"inline-icon"})," Submit Report"]})}),f.jsx("p",{className:"daily-report-hint",children:"This will be sent to the office"})]})]})}function a3({project:e,companyId:t,user:r,onClose:n,onReportCreated:i}){const[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(1),[g,_]=y.useState(new Date().toISOString().split("T")[0]),[x,w]=y.useState(new Date().toTimeString().split(" ")[0].substring(0,5)),[j,S]=y.useState(""),[O,C]=y.useState(""),[A,k]=y.useState("minor"),[D,M]=y.useState(""),[L,V]=y.useState(""),[re,ie]=y.useState(""),[X,I]=y.useState(""),[ce,ge]=y.useState(""),[q,R]=y.useState(""),[U,Q]=y.useState(""),[B,fe]=y.useState(r?.name||""),[je,ee]=y.useState(""),[H,Ee]=y.useState(""),[Te,Ie]=y.useState(r?.email||""),[pe,ze]=y.useState([]),[J,we]=y.useState(""),[xe,ae]=y.useState(""),[He,ve]=y.useState(""),[Ne,Me]=y.useState(""),[jt,Re]=y.useState(!1),[It,yt]=y.useState(""),[Ct,Br]=y.useState(""),[xt,Ye]=y.useState(!1),[$r,_n]=y.useState(""),[Hr,jr]=y.useState(""),[Yt,he]=y.useState(""),[it,xn]=y.useState(""),[Qt,Ut]=y.useState(!1),[qt,ft]=y.useState(!1),[en,$n]=y.useState(0),[oa,di]=y.useState(0),fi=()=>{if(!J.trim()){m({type:"error",message:"Please enter witness name"});return}const ye={name:J,phone:xe,email:He,testimony:Ne};ze([...pe,ye]),we(""),ae(""),ve(""),Me(""),m({type:"success",message:"Witness added"})},xa=ye=>{ze(pe.filter((Hn,ja)=>ja!==ye))},wn=ye=>{switch(ye){case 1:if(!j.trim()||!O.trim())return m({type:"error",message:"Please fill in all incident details"}),!1;break;case 2:if(!L.trim()||!q.trim())return m({type:"error",message:"Please fill in employee name and job title"}),!1;break;case 3:if(!B.trim()||!je.trim())return m({type:"error",message:"Please fill in supervisor name and title"}),!1;break}return!0},mi=()=>{wn(h)&&p(h+1)},wa=()=>{p(h-1)},ll=async()=>{if(wn(h)){if(!P){m({type:"info",message:"Demo Mode: Report saved locally only - won't reach office"}),setTimeout(()=>{n()},1500);return}c(!0);try{const ye={project_id:e.id,company_id:t,incident_date:g,incident_time:x,incident_location:j,incident_description:O,injury_type:A,body_part_affected:D||null,employee_name:L,employee_phone:re||null,employee_email:X||null,employee_address:ce||null,employee_job_title:q,employee_hire_date:U||null,medical_treatment_required:jt,medical_facility_name:It||null,medical_facility_address:Ct||null,hospitalized:xt,reported_by_name:B,reported_by_title:je,reported_by_phone:H||null,reported_by_email:Te||null,witnesses:pe,immediate_actions_taken:$r||null,corrective_actions_planned:Hr||null,safety_equipment_used:Yt||null,safety_equipment_failed:it||null,osha_recordable:Qt,workers_comp_claim:qt,days_away_from_work:parseInt(en)||0,restricted_work_days:parseInt(oa)||0,status:"reported",created_by:r?.id},Hn=await be.createInjuryReport(ye);m({type:"success",message:"Injury report submitted successfully"}),i&&i(Hn),setTimeout(()=>{n()},1500)}catch(ye){console.error("Error submitting injury report:",ye),m({type:"error",message:"Failed to submit injury report"})}finally{c(!1)}}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"modal-overlay",onClick:n,children:f.jsxs("div",{className:"modal-content injury-report-modal",onClick:ye=>ye.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Workplace Injury/Incident Report"}),f.jsx("button",{className:"close-btn",onClick:n,children:""})]}),f.jsxs("div",{className:"progress-steps",children:[f.jsx("div",{className:`step ${h>=1?"active":""}`,children:"1. Incident"}),f.jsx("div",{className:`step ${h>=2?"active":""}`,children:"2. Employee"}),f.jsx("div",{className:`step ${h>=3?"active":""}`,children:"3. Supervisor"}),f.jsx("div",{className:`step ${h>=4?"active":""}`,children:"4. Witnesses"}),f.jsx("div",{className:`step ${h>=5?"active":""}`,children:"5. Medical & Safety"})]}),f.jsxs("div",{className:"modal-body",children:[h===1&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Incident Details"}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Date of Incident *"}),f.jsx("input",{type:"date",value:g,onChange:ye=>_(ye.target.value),max:new Date().toISOString().split("T")[0]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Time of Incident *"}),f.jsx("input",{type:"time",value:x,onChange:ye=>w(ye.target.value)})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Location on Site *"}),f.jsx("input",{type:"text",value:j,onChange:ye=>S(ye.target.value),placeholder:"e.g., Floor 2, near elevator shaft"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Incident Description *"}),f.jsx("textarea",{value:O,onChange:ye=>C(ye.target.value),rows:4,placeholder:"Describe what happened in detail..."})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Injury Type *"}),f.jsxs("select",{value:A,onChange:ye=>k(ye.target.value),children:[f.jsx("option",{value:"minor",children:"Minor Injury"}),f.jsx("option",{value:"serious",children:"Serious Injury"}),f.jsx("option",{value:"critical",children:"Critical Injury"}),f.jsx("option",{value:"near_miss",children:"Near Miss (No Injury)"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Body Part Affected"}),f.jsx("input",{type:"text",value:D,onChange:ye=>M(ye.target.value),placeholder:"e.g., Left hand, lower back"})]})]})]}),h===2&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Injured Employee Information"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Full Name *"}),f.jsx("input",{type:"text",value:L,onChange:ye=>V(ye.target.value),placeholder:"First and last name"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Phone Number"}),f.jsx("input",{type:"tel",value:re,onChange:ye=>ie(ye.target.value),placeholder:"(555) 123-4567"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email Address"}),f.jsx("input",{type:"email",value:X,onChange:ye=>I(ye.target.value),placeholder:"email@example.com"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Home Address"}),f.jsx("input",{type:"text",value:ce,onChange:ye=>ge(ye.target.value),placeholder:"Street address, city, state, zip"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Job Title *"}),f.jsx("input",{type:"text",value:q,onChange:ye=>R(ye.target.value),placeholder:"e.g., Carpenter, Electrician"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Hire Date"}),f.jsx("input",{type:"date",value:U,onChange:ye=>Q(ye.target.value)})]})]})]}),h===3&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Foreman/Supervisor Making Report"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Name *"}),f.jsx("input",{type:"text",value:B,onChange:ye=>fe(ye.target.value),placeholder:"Full name"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Title *"}),f.jsx("input",{type:"text",value:je,onChange:ye=>ee(ye.target.value),placeholder:"e.g., Site Foreman, Project Manager"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Phone Number"}),f.jsx("input",{type:"tel",value:H,onChange:ye=>Ee(ye.target.value),placeholder:"(555) 123-4567"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Email Address"}),f.jsx("input",{type:"email",value:Te,onChange:ye=>Ie(ye.target.value),placeholder:"email@example.com"})]})]}),h===4&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Witness Testimonies (Optional)"}),pe.length>0&&f.jsx("div",{className:"witnesses-list",children:pe.map((ye,Hn)=>f.jsxs("div",{className:"witness-item",children:[f.jsxs("div",{className:"witness-info",children:[f.jsx("strong",{children:ye.name}),ye.phone&&f.jsxs("span",{children:["  ",ye.phone]}),ye.testimony&&f.jsxs("p",{className:"witness-testimony",children:['"',ye.testimony,'"']})]}),f.jsx("button",{className:"btn-danger btn-small",onClick:()=>xa(Hn),children:"Remove"})]},Hn))}),f.jsxs("div",{className:"add-witness-form",children:[f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Witness Name"}),f.jsx("input",{type:"text",value:J,onChange:ye=>we(ye.target.value),placeholder:"Full name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Phone Number"}),f.jsx("input",{type:"tel",value:xe,onChange:ye=>ae(ye.target.value),placeholder:"(555) 123-4567"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email Address"}),f.jsx("input",{type:"email",value:He,onChange:ye=>ve(ye.target.value),placeholder:"email@example.com"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Witness Testimony"}),f.jsx("textarea",{value:Ne,onChange:ye=>Me(ye.target.value),rows:3,placeholder:"What did the witness see or hear?"})]}),f.jsx("button",{className:"btn-secondary",onClick:fi,children:"+ Add Witness"})]})]}),h===5&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Medical Treatment & Safety"}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:jt,onChange:ye=>Re(ye.target.checked)}),"Medical treatment required"]})}),jt&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Medical Facility Name"}),f.jsx("input",{type:"text",value:It,onChange:ye=>yt(ye.target.value),placeholder:"Hospital or clinic name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Medical Facility Address"}),f.jsx("input",{type:"text",value:Ct,onChange:ye=>Br(ye.target.value),placeholder:"Street address"})]}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:xt,onChange:ye=>Ye(ye.target.checked)}),"Employee was hospitalized"]})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Immediate Actions Taken"}),f.jsx("textarea",{value:$r,onChange:ye=>_n(ye.target.value),rows:2,placeholder:"What was done immediately after the incident?"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Corrective Actions Planned"}),f.jsx("textarea",{value:Hr,onChange:ye=>jr(ye.target.value),rows:2,placeholder:"What will be done to prevent this in the future?"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Safety Equipment Used"}),f.jsx("input",{type:"text",value:Yt,onChange:ye=>he(ye.target.value),placeholder:"e.g., Hard hat, gloves, harness"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Safety Equipment Failed"}),f.jsx("input",{type:"text",value:it,onChange:ye=>xn(ye.target.value),placeholder:"Equipment that failed, if any"})]})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Days Away From Work"}),f.jsx("input",{type:"number",min:"0",value:en,onChange:ye=>$n(ye.target.value)})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Restricted Work Days"}),f.jsx("input",{type:"number",min:"0",value:oa,onChange:ye=>di(ye.target.value)})]})]}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:Qt,onChange:ye=>Ut(ye.target.checked)}),"OSHA Recordable Incident"]})}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:qt,onChange:ye=>ft(ye.target.checked)}),"Workers' Compensation Claim Filed"]})})]})]}),f.jsx("div",{className:"modal-footer",children:f.jsxs("div",{className:"form-actions",children:[h>1&&f.jsx("button",{className:"btn-secondary",onClick:wa,children:" Back"}),f.jsx("button",{className:"btn-secondary",onClick:n,children:"Cancel"}),h<5?f.jsx("button",{className:"btn-primary",onClick:mi,children:"Next "}):f.jsx("button",{className:"btn-primary",onClick:ll,disabled:s,children:s?"Submitting...":"Submit Report"})]})})]})}),u&&f.jsx(DN,{message:u.message,type:u.type,onClose:()=>m(null)}),f.jsx("style",{children:`
        .injury-report-modal {
          max-width: 800px;
          max-height: 90vh;
          overflow-y: auto;
        }

        .progress-steps {
          display: flex;
          justify-content: space-between;
          padding: 1rem 1.5rem;
          border-bottom: 1px solid var(--border-color);
          background-color: var(--bg-elevated);
          overflow-x: auto;
        }

        .progress-steps .step {
          font-size: 0.875rem;
          color: var(--text-muted);
          font-weight: 500;
          white-space: nowrap;
          padding: 0.5rem;
        }

        .progress-steps .step.active {
          color: var(--accent-primary);
          font-weight: 600;
        }

        .form-step h3 {
          margin-top: 0;
          margin-bottom: 1.5rem;
          color: var(--text-primary);
          font-size: 1.25rem;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1rem;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: block;
          margin-bottom: 0.5rem;
          font-weight: 500;
          color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          width: 100%;
          padding: 0.5rem;
          border: 1px solid var(--border-color);
          border-radius: 4px;
          font-size: 1rem;
          background: var(--bg-card);
          color: var(--text-primary);
        }

        .form-group textarea {
          resize: vertical;
        }

        .checkbox-group label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-weight: normal;
          cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
          width: auto;
          margin: 0;
        }

        .witnesses-list {
          margin-bottom: 1.5rem;
        }

        .witness-item {
          border: 1px solid var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          margin-bottom: 0.5rem;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .witness-info {
          flex: 1;
          color: var(--text-primary);
        }

        .witness-testimony {
          margin-top: 0.5rem;
          color: var(--text-secondary);
          font-style: italic;
          font-size: 0.875rem;
        }

        .add-witness-form {
          border: 2px dashed var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          background-color: var(--bg-elevated);
        }

        .modal-footer {
          border-top: 1px solid var(--border-color);
          padding: 1rem 1.5rem;
        }

        .form-actions {
          display: flex;
          justify-content: space-between;
          gap: 0.5rem;
        }

        .btn-primary,
        .btn-secondary,
        .btn-danger {
          padding: 0.5rem 1rem;
          border-radius: 6px;
          font-weight: 500;
          cursor: pointer;
          border: none;
        }

        .btn-primary {
          background-color: var(--primary-color, #3b82f6);
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          opacity: 0.9;
        }

        .btn-primary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .btn-secondary {
          background-color: var(--bg-elevated);
          color: var(--text-primary);
          border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
          background-color: var(--bg-tertiary);
        }

        .btn-danger {
          background-color: #ef4444;
          color: white;
        }

        .btn-danger:hover {
          background-color: #dc2626;
        }

        .btn-small {
          padding: 0.25rem 0.75rem;
          font-size: 0.875rem;
        }

        @media (max-width: 768px) {
          .injury-report-modal {
            max-width: 100%;
            height: 100vh;
            max-height: 100vh;
            border-radius: 0;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .progress-steps .step {
            font-size: 0.75rem;
            padding: 0.25rem;
          }
        }
      `})]})}const af=[{value:"concrete",label:"Concrete",icon:""},{value:"trash",label:"Trash",icon:""},{value:"metals",label:"Metals",icon:""},{value:"hazardous_waste",label:"Hazardous",icon:""}],i3=e=>af.find(t=>t.value===e)||{label:e,icon:""};function o3({project:e,user:t=null,date:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState([]),[m,h]=y.useState(!0),[p,g]=y.useState(!1),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState({type:"concrete",count:1}),C=new Date(r).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});y.useEffect(()=>{A(),k()},[e.id,r]);const A=async()=>{try{h(!0);const I=await be.getDisposalLoads(e.id,r);s(I||[])}catch(I){console.error("Error loading disposal loads:",I)}finally{h(!1)}},k=async()=>{try{const ce=(await be.getDisposalLoadsHistory(e.id,14)||[]).filter(q=>q.load_date!==r).reduce((q,R)=>(q[R.load_date]||(q[R.load_date]=[]),q[R.load_date].push(R),q),{}),ge=Object.entries(ce).map(([q,R])=>({date:q,loads:R,totalLoads:R.reduce((U,Q)=>U+Q.load_count,0)})).sort((q,R)=>new Date(R.date)-new Date(q.date));u(ge)}catch(I){console.error("Error loading disposal history:",I)}},D=async()=>{if(!(S.count<1)){g(!0);try{await be.addDisposalLoad(e.id,t?.id||null,r,S.type,S.count),await A(),O({type:"concrete",count:1}),x(!1),n?.("Disposal load added","success")}catch(I){console.error("Error adding disposal load:",I),n?.("Error adding load","error")}finally{g(!1)}}},M=async I=>{g(!0);try{await be.deleteDisposalLoad(I),await A(),n?.("Load removed","success")}catch(ce){console.error("Error deleting disposal load:",ce),n?.("Error removing load","error")}finally{g(!1)}},L=async I=>{g(!0);try{await be.addDisposalLoad(e.id,t?.id||null,r,I,1),await A(),n?.("Load added","success")}catch(ce){console.error("Error adding disposal load:",ce),n?.("Error adding load","error")}finally{g(!1)}},V=async I=>{g(!0);try{await be.updateDisposalLoad(I.id,I.load_type,I.load_count+1),await A()}catch(ce){console.error("Error updating load:",ce),n?.("Error updating load","error")}finally{g(!1)}},re=async I=>{if(I.load_count<=1){await M(I.id);return}g(!0);try{await be.updateDisposalLoad(I.id,I.load_type,I.load_count-1),await A()}catch(ce){console.error("Error updating load:",ce),n?.("Error updating load","error")}finally{g(!1)}},ie=i.reduce((I,ce)=>(I[ce.load_type]||(I[ce.load_type]={items:[],total:0}),I[ce.load_type].items.push(ce),I[ce.load_type].total+=ce.load_count,I),{}),X=i.reduce((I,ce)=>I+ce.load_count,0);return m?f.jsxs("div",{className:"disposal-load-input",children:[f.jsxs("div",{className:"disposal-header",children:[f.jsx(df,{size:20}),f.jsx("span",{children:"Disposal Loads"})]}),f.jsx("div",{className:"disposal-loading",children:"Loading..."})]}):f.jsxs("div",{className:"disposal-load-input",children:[f.jsxs("div",{className:"disposal-header",children:[f.jsxs("div",{className:"disposal-title",children:[f.jsx(df,{size:20}),f.jsx("span",{children:"Disposal Loads"}),X>0&&f.jsx("span",{className:"disposal-badge",children:X})]}),f.jsx("span",{className:"disposal-date",children:C})]}),f.jsx("div",{className:"disposal-quick-add",children:af.map(I=>f.jsxs("button",{className:"quick-add-btn",onClick:()=>L(I.value),disabled:p,children:[f.jsx("span",{className:"quick-add-icon",children:I.icon}),f.jsxs("span",{className:"quick-add-label",children:["+ ",I.label]})]},I.value))}),Object.keys(ie).length>0?f.jsx("div",{className:"disposal-loads-list",children:af.map(I=>{const ce=ie[I.value];return ce?f.jsxs("div",{className:"disposal-load-row",children:[f.jsxs("div",{className:"load-info",children:[f.jsx("span",{className:"load-icon",children:I.icon}),f.jsx("span",{className:"load-label",children:I.label})]}),f.jsxs("div",{className:"load-controls",children:[f.jsx("button",{className:"load-btn decrement",onClick:()=>re(ce.items[0]),disabled:p,children:f.jsx(wS,{size:16})}),f.jsx("span",{className:"load-count",children:ce.total}),f.jsx("button",{className:"load-btn increment",onClick:()=>V(ce.items[0]),disabled:p,children:f.jsx(Zd,{size:16})})]})]},I.value):null})}):f.jsxs("div",{className:"disposal-empty",children:[f.jsxs("p",{children:["No disposal loads recorded for ",C]}),f.jsx("p",{className:"disposal-hint",children:"Tap a button above to add loads"})]}),_&&f.jsxs("div",{className:"disposal-add-form",children:[f.jsxs("div",{className:"add-form-row",children:[f.jsx("select",{value:S.type,onChange:I=>O({...S,type:I.target.value}),className:"load-type-select",children:af.map(I=>f.jsxs("option",{value:I.value,children:[I.icon," ",I.label]},I.value))}),f.jsxs("div",{className:"count-input-group",children:[f.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:Math.max(1,S.count-1)}),children:f.jsx(wS,{size:16})}),f.jsx("input",{type:"number",min:"1",value:S.count,onChange:I=>O({...S,count:parseInt(I.target.value)||1}),className:"count-input"}),f.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:S.count+1}),children:f.jsx(Zd,{size:16})})]})]}),f.jsxs("div",{className:"add-form-actions",children:[f.jsxs("button",{className:"btn btn-secondary btn-small",onClick:()=>x(!1),children:[f.jsx(Ob,{size:16})," Cancel"]}),f.jsxs("button",{className:"btn btn-primary btn-small",onClick:D,disabled:p,children:[f.jsx(Ki,{size:16})," Add"]})]})]}),!_&&f.jsxs("button",{className:"disposal-add-custom",onClick:()=>x(!0),children:[f.jsx(Zd,{size:16}),"Add multiple loads"]}),X>0&&f.jsxs("div",{className:"disposal-summary",children:[f.jsx("strong",{children:X})," total load",X!==1?"s":""," today"]}),c.length>0&&f.jsxs("div",{className:"disposal-history-section",children:[f.jsxs("button",{className:"disposal-history-toggle",onClick:()=>j(!w),children:[f.jsx(sq,{size:16}),f.jsxs("span",{children:["View History (",c.length," days)"]}),w?f.jsx(XA,{size:16}):f.jsx(ff,{size:16})]}),w&&f.jsx("div",{className:"disposal-history-list",children:c.map(I=>{const ce=new Date(I.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),ge=I.loads.reduce((q,R)=>(q[R.load_type]||(q[R.load_type]=0),q[R.load_type]+=R.load_count,q),{});return f.jsxs("div",{className:"disposal-history-day",children:[f.jsxs("div",{className:"disposal-history-header",children:[f.jsx("span",{className:"disposal-history-date",children:ce}),f.jsxs("span",{className:"disposal-history-total",children:[I.totalLoads," load",I.totalLoads!==1?"s":""]})]}),f.jsx("div",{className:"disposal-history-types",children:Object.entries(ge).map(([q,R])=>{const U=i3(q);return f.jsxs("span",{className:"disposal-history-type",children:[U.icon," ",R," ",U.label]},q)})})]},I.date)})})]})]})}const ZS={folder:pc,plans:dq,specs:Fo,permits:WA,contracts:uq,submittals:cq,rfis:lq,photos:my,reports:ZA,safety:lm},Td={blue:"#3b82f6",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",purple:"#8b5cf6",pink:"#ec4899",gray:"#6b7280",orange:"#f97316"},s3=e=>e?.startsWith("image/")?fq:e?.includes("spreadsheet")||e?.includes("excel")?mq:e?.includes("pdf")?Fo:hq,l3=e=>{if(!e)return"0 B";const t=["B","KB","MB","GB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(r<10?1:0)} ${t[n]}`};function c3({projectId:e,onShowToast:t}){const[r,n]=y.useState([]),[i,s]=y.useState(!0),[c,u]=y.useState(null),[m,h]=y.useState([]),[p,g]=y.useState(!1),_=y.useRef(null),x=y.useCallback(async()=>{s(!0);try{const C=await be.getProjectFolders(e);n(C)}catch(C){console.error("Error loading folders:",C),t?.("Failed to load folders","error")}finally{s(!1)}},[e,t]),w=y.useCallback(async C=>{if(C){g(!0);try{const A=await be.getFolderDocuments(C);h(A.documents)}catch(A){console.error("Error loading documents:",A),t?.("Failed to load documents","error")}finally{g(!1)}}},[t]);y.useEffect(()=>{x();const C=be.subscribeToDocumentFolders?.(e,()=>{x()}),A=be.subscribeToDocuments?.(e,()=>{x(),_.current&&w(_.current.id)});return()=>{C?.unsubscribe?.(),A?.unsubscribe?.()}},[e,x,w]);const j=async C=>{u(C),_.current=C,await w(C.id)},S=async C=>{try{await be.logDocumentAccess(C.id,"downloaded");const A=C.url||`/storage/v1/object/public/project-documents/${C.storage_path}`;window.open(A,"_blank")}catch(A){console.error("Download error:",A)}},O=()=>{u(null),_.current=null,h([])};if(i)return f.jsx("div",{className:"field-docs",children:f.jsxs("div",{className:"field-docs-loading",children:[f.jsx($s,{size:24,className:"spinner"}),f.jsx("span",{children:"Loading..."})]})});if(c){const C=ZS[c.icon]||pc,A=Td[c.color]||Td.blue;return f.jsxs("div",{className:"field-docs",children:[f.jsxs("div",{className:"field-docs-header",children:[f.jsx("button",{className:"field-docs-back",onClick:O,children:f.jsx(cr,{size:20})}),f.jsxs("div",{className:"field-docs-title",children:[f.jsx("div",{className:"field-docs-title-icon",style:{backgroundColor:`${A}15`},children:f.jsx(C,{size:20,style:{color:A}})}),f.jsxs("div",{className:"field-docs-title-text",children:[f.jsx("h2",{children:c.name}),f.jsxs("span",{children:[m.length," files"]})]})]})]}),f.jsx("div",{className:"field-docs-list",children:p?f.jsxs("div",{className:"field-docs-loading",children:[f.jsx($s,{size:24,className:"spinner"}),f.jsx("span",{children:"Loading..."})]}):m.length===0?f.jsxs("div",{className:"field-docs-empty",children:[f.jsx(pc,{size:48,style:{color:A,opacity:.3}}),f.jsx("p",{children:"No documents yet"})]}):m.map(k=>{const D=s3(k.mime_type);return f.jsxs("button",{className:"field-doc-item",onClick:()=>S(k),children:[f.jsx("div",{className:"field-doc-icon",children:f.jsx(D,{size:22})}),f.jsxs("div",{className:"field-doc-info",children:[f.jsx("span",{className:"field-doc-name",children:k.name}),f.jsx("span",{className:"field-doc-size",children:l3(k.file_size_bytes)})]}),f.jsx(VA,{size:20,className:"field-doc-download"})]},k.id)})})]})}return f.jsx("div",{className:"field-docs",children:f.jsx("div",{className:"field-docs-grid",children:r.length===0?f.jsxs("div",{className:"field-docs-empty",children:[f.jsx(pc,{size:56}),f.jsx("h3",{children:"No documents"}),f.jsx("p",{children:"Documents will appear here when added"})]}):r.map(C=>{const A=ZS[C.icon]||pc,k=Td[C.color]||Td.blue,D=C.document_count||0;return f.jsxs("button",{className:"field-folder-card",onClick:()=>j(C),children:[f.jsx("div",{className:"field-folder-icon",style:{backgroundColor:`${k}12`},children:f.jsx(A,{size:28,style:{color:k}})}),f.jsxs("div",{className:"field-folder-info",children:[f.jsx("span",{className:"field-folder-name",children:C.name}),f.jsxs("span",{className:"field-folder-count",children:[D," ",D===1?"file":"files"]})]}),f.jsx(bc,{size:20,className:"field-folder-arrow"})]},C.id)})})})}function PN(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=PN(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function st(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=PN(e))&&(n&&(n+=" "),n+=t);return n}var u3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Ib(e){if(typeof e!="string")return!1;var t=u3;return t.includes(e)}var d3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],f3=new Set(d3);function MN(e){return typeof e!="string"?!1:f3.has(e)}function RN(e){return typeof e=="string"&&e.startsWith("data-")}function vn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(MN(r)||RN(r))&&(t[r]=e[r]);return t}function Ro(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return vn(t)}return typeof e=="object"&&!Array.isArray(e)?vn(e):null}function Ir(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(MN(r)||RN(r)||Ib(r))&&(t[r]=e[r]);return t}function m3(e){return e==null?null:y.isValidElement(e)?Ir(e.props):typeof e=="object"&&!Array.isArray(e)?Ir(e):null}var h3=["children","width","height","viewBox","className","style","title","desc"];function jy(){return jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jy.apply(null,arguments)}function p3(e,t){if(e==null)return{};var r,n,i=g3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function g3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qN=y.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:s,className:c,style:u,title:m,desc:h}=e,p=p3(e,h3),g=s||{width:n,height:i,x:0,y:0},_=st("recharts-surface",c);return y.createElement("svg",jy({},Ir(p),{className:_,width:n,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),y.createElement("title",null,m),y.createElement("desc",null,h),r)}),v3=["children","className"];function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sy.apply(null,arguments)}function y3(e,t){if(e==null)return{};var r,n,i=b3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function b3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _r=y.forwardRef((e,t)=>{var{children:r,className:n}=e,i=y3(e,v3),s=st("recharts-layer",n);return y.createElement("g",Sy({className:s},Ir(i),{ref:t}),r)}),zN=y.createContext(null),PZ=()=>y.useContext(zN);function wt(e){return function(){return e}}const LN=Math.cos,pf=Math.sin,ia=Math.sqrt,gf=Math.PI,hm=2*gf,Ey=Math.PI,Oy=2*Ey,wo=1e-6,_3=Oy-wo;function IN(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function x3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return IN;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class w3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?IN:x3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,c){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,u=this._y1,m=n-t,h=i-r,p=c-t,g=u-r,_=p*p+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(_>wo)if(!(Math.abs(g*m-h*p)>wo)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-c,w=i-u,j=m*m+h*h,S=x*x+w*w,O=Math.sqrt(j),C=Math.sqrt(_),A=s*Math.tan((Ey-Math.acos((j+_-S)/(2*O*C)))/2),k=A/C,D=A/O;Math.abs(k-1)>wo&&this._append`L${t+k*p},${r+k*g}`,this._append`A${s},${s},0,0,${+(g*x>p*w)},${this._x1=t+D*m},${this._y1=r+D*h}`}}arc(t,r,n,i,s,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(i),m=n*Math.sin(i),h=t+u,p=r+m,g=1^c,_=c?i-s:s-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>wo||Math.abs(this._y1-p)>wo)&&this._append`L${h},${p}`,n&&(_<0&&(_=_%Oy+Oy),_>_3?this._append`A${n},${n},0,1,${g},${t-u},${r-m}A${n},${n},0,1,${g},${this._x1=h},${this._y1=p}`:_>wo&&this._append`A${n},${n},0,${+(_>=Ey)},${g},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Ub(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new w3(t)}function Bb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UN(e){this._context=e}UN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function pm(e){return new UN(e)}function BN(e){return e[0]}function $N(e){return e[1]}function HN(e,t){var r=wt(!0),n=null,i=pm,s=null,c=Ub(u);e=typeof e=="function"?e:e===void 0?BN:wt(e),t=typeof t=="function"?t:t===void 0?$N:wt(t);function u(m){var h,p=(m=Bb(m)).length,g,_=!1,x;for(n==null&&(s=i(x=c())),h=0;h<=p;++h)!(h<p&&r(g=m[h],h,m))===_&&((_=!_)?s.lineStart():s.lineEnd()),_&&s.point(+e(g,h,m),+t(g,h,m));if(x)return s=null,x+""||null}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:wt(+m),u):e},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:wt(+m),u):t},u.defined=function(m){return arguments.length?(r=typeof m=="function"?m:wt(!!m),u):r},u.curve=function(m){return arguments.length?(i=m,n!=null&&(s=i(n)),u):i},u.context=function(m){return arguments.length?(m==null?n=s=null:s=i(n=m),u):n},u}function Pd(e,t,r){var n=null,i=wt(!0),s=null,c=pm,u=null,m=Ub(h);e=typeof e=="function"?e:e===void 0?BN:wt(+e),t=typeof t=="function"?t:wt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?$N:wt(+r);function h(g){var _,x,w,j=(g=Bb(g)).length,S,O=!1,C,A=new Array(j),k=new Array(j);for(s==null&&(u=c(C=m())),_=0;_<=j;++_){if(!(_<j&&i(S=g[_],_,g))===O)if(O=!O)x=_,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=_-1;w>=x;--w)u.point(A[w],k[w]);u.lineEnd(),u.areaEnd()}O&&(A[_]=+e(S,_,g),k[_]=+t(S,_,g),u.point(n?+n(S,_,g):A[_],r?+r(S,_,g):k[_]))}if(C)return u=null,C+""||null}function p(){return HN().defined(i).curve(c).context(s)}return h.x=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),n=null,h):e},h.x0=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),h):e},h.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:wt(+g),h):n},h.y=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),r=null,h):t},h.y0=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),h):t},h.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:wt(+g),h):r},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(r)},h.lineX1=function(){return p().x(n).y(t)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:wt(!!g),h):i},h.curve=function(g){return arguments.length?(c=g,s!=null&&(u=c(s)),h):c},h.context=function(g){return arguments.length?(g==null?s=u=null:u=c(s=g),h):s},h}class FN{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function j3(e){return new FN(e,!0)}function S3(e){return new FN(e,!1)}const $b={draw(e,t){const r=ia(t/gf);e.moveTo(r,0),e.arc(0,0,r,0,hm)}},E3={draw(e,t){const r=ia(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},KN=ia(1/3),O3=KN*2,C3={draw(e,t){const r=ia(t/O3),n=r*KN;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},A3={draw(e,t){const r=ia(t),n=-r/2;e.rect(n,n,r,r)}},N3=.8908130915292852,YN=pf(gf/10)/pf(7*gf/10),k3=pf(hm/10)*YN,D3=-LN(hm/10)*YN,T3={draw(e,t){const r=ia(t*N3),n=k3*r,i=D3*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const c=hm*s/5,u=LN(c),m=pf(c);e.lineTo(m*r,-u*r),e.lineTo(u*n-m*i,m*n+u*i)}e.closePath()}},Ag=ia(3),P3={draw(e,t){const r=-ia(t/(Ag*3));e.moveTo(0,r*2),e.lineTo(-Ag*r,-r),e.lineTo(Ag*r,-r),e.closePath()}},Pn=-.5,Mn=ia(3)/2,Cy=1/ia(12),M3=(Cy/2+1)*3,R3={draw(e,t){const r=ia(t/M3),n=r/2,i=r*Cy,s=n,c=r*Cy+r,u=-s,m=c;e.moveTo(n,i),e.lineTo(s,c),e.lineTo(u,m),e.lineTo(Pn*n-Mn*i,Mn*n+Pn*i),e.lineTo(Pn*s-Mn*c,Mn*s+Pn*c),e.lineTo(Pn*u-Mn*m,Mn*u+Pn*m),e.lineTo(Pn*n+Mn*i,Pn*i-Mn*n),e.lineTo(Pn*s+Mn*c,Pn*c-Mn*s),e.lineTo(Pn*u+Mn*m,Pn*m-Mn*u),e.closePath()}};function q3(e,t){let r=null,n=Ub(i);e=typeof e=="function"?e:wt(e||$b),t=typeof t=="function"?t:wt(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:wt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:wt(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function vf(){}function yf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function GN(e){this._context=e}GN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function z3(e){return new GN(e)}function VN(e){this._context=e}VN.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function L3(e){return new VN(e)}function WN(e){this._context=e}WN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:yf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function I3(e){return new WN(e)}function XN(e){this._context=e}XN.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function U3(e){return new XN(e)}function QS(e){return e<0?-1:1}function JS(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),c=(r-e._y1)/(i||n<0&&-0),u=(s*i+c*n)/(n+i);return(QS(s)+QS(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(u))||0}function e1(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ng(e,t,r){var n=e._x0,i=e._y0,s=e._x1,c=e._y1,u=(s-n)/3;e._context.bezierCurveTo(n+u,i+u*t,s-u,c-u*r,s,c)}function bf(e){this._context=e}bf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ng(this,this._t0,e1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ng(this,e1(this,r=JS(this,e,t)),r);break;default:Ng(this,this._t0,r=JS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function ZN(e){this._context=new QN(e)}(ZN.prototype=Object.create(bf.prototype)).point=function(e,t){bf.prototype.point.call(this,t,e)};function QN(e){this._context=e}QN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function B3(e){return new bf(e)}function $3(e){return new ZN(e)}function JN(e){this._context=e}JN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=t1(e),i=t1(t),s=0,c=1;c<r;++s,++c)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function t1(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),c=new Array(r);for(i[0]=0,s[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,c[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,c[t]-=n*c[t-1];for(i[r-1]=c[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(c[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function H3(e){return new JN(e)}function gm(e,t){this._context=e,this._t=t}gm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function F3(e){return new gm(e,.5)}function K3(e){return new gm(e,0)}function Y3(e){return new gm(e,1)}function qo(e,t){if((c=e.length)>1)for(var r=1,n,i,s=e[t[0]],c,u=s.length;r<c;++r)for(i=s,s=e[t[r]],n=0;n<u;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Ay(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function G3(e,t){return e[t]}function V3(e){const t=[];return t.key=e,t}function W3(){var e=wt([]),t=Ay,r=qo,n=G3;function i(s){var c=Array.from(e.apply(this,arguments),V3),u,m=c.length,h=-1,p;for(const g of s)for(u=0,++h;u<m;++u)(c[u][h]=[0,+n(g,c[u].key,h,s)]).data=g;for(u=0,p=Bb(t(c));u<m;++u)c[p[u]].index=u;return r(c,p),c}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:wt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:wt(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?Ay:typeof s=="function"?s:wt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??qo,i):r},i}function X3(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,c;i<s;++i){for(c=r=0;r<n;++r)c+=e[r][i][1]||0;if(c)for(r=0;r<n;++r)e[r][i][1]/=c}qo(e,t)}}function Z3(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var c=0,u=0;c<i;++c)u+=e[c][r][1]||0;n[r][1]+=n[r][0]=-u/2}qo(e,t)}}function Q3(e,t){if(!(!((c=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,c;n<s;++n){for(var u=0,m=0,h=0;u<c;++u){for(var p=e[t[u]],g=p[n][1]||0,_=p[n-1][1]||0,x=(g-_)/2,w=0;w<u;++w){var j=e[t[w]],S=j[n][1]||0,O=j[n-1][1]||0;x+=S-O}m+=g,h+=x*g}i[n-1][1]+=i[n-1][0]=r,m&&(r-=h/m)}i[n-1][1]+=i[n-1][0]=r,qo(e,t)}}var kg={},Dg={},r1;function J3(){return r1||(r1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Dg)),Dg}var Tg={},n1;function ek(){return n1||(n1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Tg)),Tg}var Pg={},a1;function Hb(){return a1||(a1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Pg)),Pg}var Mg={},Rg={},i1;function e5(){return i1||(i1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Rg)),Rg}var o1;function Fb(){return o1||(o1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e5(),r=Hb();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],c=i.length;if(c===0)return s;let u=0,m="",h="",p=!1;for(i.charCodeAt(0)===46&&(s.push(""),u++);u<c;){const g=i[u];h?g==="\\"&&u+1<c?(u++,m+=i[u]):g===h?h="":m+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,s.push(m),m=""):m+=g:g==="["?(p=!0,m&&(s.push(m),m="")):g==="."?m&&(s.push(m),m=""):m+=g,u++}return m&&s.push(m),s}e.toPath=n})(Mg)),Mg}var s1;function Kb(){return s1||(s1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J3(),r=ek(),n=Hb(),i=Fb();function s(u,m,h){if(u==null)return h;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return h;const p=u[m];return p===void 0?r.isDeepKey(m)?s(u,i.toPath(m),h):h:p}case"number":case"symbol":{typeof m=="number"&&(m=n.toKey(m));const p=u[m];return p===void 0?h:p}default:{if(Array.isArray(m))return c(u,m,h);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return h;const p=u[m];return p===void 0?h:p}}}function c(u,m,h){if(m.length===0)return h;let p=u;for(let g=0;g<m.length;g++){if(p==null||t.isUnsafeProperty(m[g]))return h;p=p[m[g]]}return p===void 0?h:p}e.get=s})(kg)),kg}var qg,l1;function t5(){return l1||(l1=1,qg=Kb().get),qg}var r5=t5();const zo=ri(r5);var n5=4;function Hi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n5,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Ft(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,s,c)=>{var u=r[c-1];return typeof u=="string"?i+u+s:u!==void 0?i+Hi(u)+s:i+s},"")}var br=e=>e===0?0:e>0?1:-1,ta=e=>typeof e=="number"&&e!=+e,Wa=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ke=e=>(typeof e=="number"||e instanceof Number)&&!ta(e),va=e=>ke(e)||typeof e=="string",a5=0,jc=e=>{var t=++a5;return"".concat(e||"").concat(t)},Tr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(t)&&typeof t!="string")return n;var s;if(Wa(t)){if(r==null)return n;var c=t.indexOf("%");s=r*parseFloat(t.slice(0,c))/100}else s=+t;return ta(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},tk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function kt(e,t,r){return ke(e)&&ke(t)?Hi(e+r*(t-e)):t}function rk(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):zo(n,t))===r)}var Pt=e=>e===null||typeof e>"u",Hc=e=>Pt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function i5(e){return e!=null}function Fc(){}var o5=["type","size","sizeType"];function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ny.apply(null,arguments)}function c1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function u1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c1(Object(r),!0).forEach(function(n){s5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s5(e,t,r){return(t=l5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l5(e){var t=c5(e,"string");return typeof t=="symbol"?t:t+""}function c5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u5(e,t){if(e==null)return{};var r,n,i=d5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function d5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nk={symbolCircle:$b,symbolCross:E3,symbolDiamond:C3,symbolSquare:A3,symbolStar:T3,symbolTriangle:P3,symbolWye:R3},f5=Math.PI/180,m5=e=>{var t="symbol".concat(Hc(e));return nk[t]||$b},h5=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*f5;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},p5=(e,t)=>{nk["symbol".concat(Hc(e))]=t},ak=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=u5(e,o5),s=u1(u1({},i),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var u=()=>{var _=m5(c),x=q3().type(_).size(h5(r,n,c)),w=x();if(w!==null)return w},{className:m,cx:h,cy:p}=s,g=Ir(s);return ke(h)&&ke(p)&&ke(r)?y.createElement("path",Ny({},g,{className:st("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};ak.registerSymbol=p5;var ik=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Yb=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{Ib(i)&&(n[i]=(s=>r[i](r,s)))}),n},g5=(e,t,r)=>n=>(e(t,r,n),null),vm=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var s=e[i];Ib(i)&&typeof s=="function"&&(n||(n={}),n[i]=g5(s,t,r))}),n};function d1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function v5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d1(Object(r),!0).forEach(function(n){y5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y5(e,t,r){return(t=b5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b5(e){var t=_5(e,"string");return typeof t=="symbol"?t:t+""}function _5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xr(e,t){var r=v5({},e),n=t,i=Object.keys(t),s=i.reduce((c,u)=>(c[u]===void 0&&n[u]!==void 0&&(c[u]=n[u]),c),r);return s}var zg={},Lg={},f1;function x5(){return f1||(f1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let s=0;s<r.length;s++){const c=r[s],u=n(c);i.has(u)||i.set(u,c)}return Array.from(i.values())}e.uniqBy=t})(Lg)),Lg}var Ig={},m1;function ok(){return m1||(m1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Ig)),Ig}var Ug={},Bg={},$g={},h1;function w5(){return h1||(h1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})($g)),$g}var p1;function Gb(){return p1||(p1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w5();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Bg)),Bg}var Hg={},g1;function j5(){return g1||(g1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Hg)),Hg}var v1;function S5(){return v1||(v1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Gb(),r=j5();function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(Ug)),Ug}var Fg={},Kg={},y1;function E5(){return y1||(y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kb();function r(n){return function(i){return t.get(i,n)}}e.property=r})(Kg)),Kg}var Yg={},Gg={},Vg={},Wg={},b1;function sk(){return b1||(b1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Wg)),Wg}var Xg={},_1;function lk(){return _1||(_1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Xg)),Xg}var Zg={},x1;function ck(){return x1||(x1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Zg)),Zg}var w1;function O5(){return w1||(w1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sk(),r=lk(),n=ck();function i(p,g,_){return typeof _!="function"?i(p,g,()=>{}):s(p,g,function x(w,j,S,O,C,A){const k=_(w,j,S,O,C,A);return k!==void 0?!!k:s(w,j,x,A)},new Map)}function s(p,g,_,x){if(g===p)return!0;switch(typeof g){case"object":return c(p,g,_,x);case"function":return Object.keys(g).length>0?s(p,{...g},_,x):n.eq(p,g);default:return t.isObject(p)?typeof g=="string"?g==="":!0:n.eq(p,g)}}function c(p,g,_,x){if(g==null)return!0;if(Array.isArray(g))return m(p,g,_,x);if(g instanceof Map)return u(p,g,_,x);if(g instanceof Set)return h(p,g,_,x);const w=Object.keys(g);if(p==null||r.isPrimitive(p))return w.length===0;if(w.length===0)return!0;if(x?.has(g))return x.get(g)===p;x?.set(g,p);try{for(let j=0;j<w.length;j++){const S=w[j];if(!r.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!_(p[S],g[S],S,p,g,x))return!1}return!0}finally{x?.delete(g)}}function u(p,g,_,x){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[w,j]of g.entries()){const S=p.get(w);if(_(S,j,w,p,g,x)===!1)return!1}return!0}function m(p,g,_,x){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const w=new Set;for(let j=0;j<g.length;j++){const S=g[j];let O=!1;for(let C=0;C<p.length;C++){if(w.has(C))continue;const A=p[C];let k=!1;if(_(A,S,j,p,g,x)&&(k=!0),k){w.add(C),O=!0;break}}if(!O)return!1}return!0}function h(p,g,_,x){return g.size===0?!0:p instanceof Set?m([...p],[...g],_,x):!1}e.isMatchWith=i,e.isSetMatch=h})(Vg)),Vg}var j1;function uk(){return j1||(j1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O5();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(Gg)),Gg}var Qg={},Jg={},ev={},S1;function C5(){return S1||(S1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(ev)),ev}var tv={},E1;function dk(){return E1||(E1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(tv)),tv}var rv={},O1;function fk(){return O1||(O1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",c="[object Symbol]",u="[object Date]",m="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",_="[object ArrayBuffer]",x="[object Object]",w="[object Error]",j="[object DataView]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",k="[object BigUint64Array]",D="[object Int8Array]",M="[object Int16Array]",L="[object Int32Array]",V="[object BigInt64Array]",re="[object Float32Array]",ie="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=_,e.arrayTag=p,e.bigInt64ArrayTag=V,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=j,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=re,e.float64ArrayTag=ie,e.functionTag=g,e.int16ArrayTag=M,e.int32ArrayTag=L,e.int8ArrayTag=D,e.mapTag=m,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=C,e.uint32ArrayTag=A,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=O})(rv)),rv}var nv={},C1;function A5(){return C1||(C1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(nv)),nv}var A1;function mk(){return A1||(A1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C5(),r=dk(),n=fk(),i=lk(),s=A5();function c(p,g){return u(p,void 0,p,new Map,g)}function u(p,g,_,x=new Map,w=void 0){const j=w?.(p,g,_,x);if(j!==void 0)return j;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const S=new Array(p.length);x.set(p,S);for(let O=0;O<p.length;O++)S[O]=u(p[O],O,_,x,w);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;x.set(p,S);for(const[O,C]of p)S.set(O,u(C,O,_,x,w));return S}if(p instanceof Set){const S=new Set;x.set(p,S);for(const O of p)S.add(u(O,void 0,_,x,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,S);for(let O=0;O<p.length;O++)S[O]=u(p[O],O,_,x,w);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,S),m(S,p,_,x,w),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return x.set(p,S),m(S,p,_,x,w),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof Error){const S=new p.constructor;return x.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,m(S,p,_,x,w),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof Number){const S=new Number(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof String){const S=new String(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(typeof p=="object"&&h(p)){const S=Object.create(Object.getPrototypeOf(p));return x.set(p,S),m(S,p,_,x,w),S}return p}function m(p,g,_=p,x,w){const j=[...Object.keys(g),...t.getSymbols(g)];for(let S=0;S<j.length;S++){const O=j[S],C=Object.getOwnPropertyDescriptor(p,O);(C==null||C.writable)&&(p[O]=u(g[O],O,_,x,w))}}function h(p){switch(r.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=u,e.copyProperties=m})(Jg)),Jg}var N1;function N5(){return N1||(N1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mk();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Qg)),Qg}var k1;function k5(){return k1||(k1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uk(),r=N5();function n(i){return i=r.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=n})(Yg)),Yg}var av={},iv={},ov={},D1;function D5(){return D1||(D1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mk(),r=fk();function n(i,s){return t.cloneDeepWith(i,(c,u,m,h)=>{const p=s?.(c,u,m,h);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new i.constructor(i?.valueOf());return t.copyProperties(g,i),g}case r.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=n})(ov)),ov}var T1;function T5(){return T1||(T1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D5();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(iv)),iv}var sv={},lv={},P1;function hk(){return P1||(P1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(lv)),lv}var cv={},M1;function P5(){return M1||(M1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dk();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(cv)),cv}var R1;function M5(){return R1||(R1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ek(),r=hk(),n=P5(),i=Fb();function s(c,u){let m;if(Array.isArray(u)?m=u:typeof u=="string"&&t.isDeepKey(u)&&c?.[u]==null?m=i.toPath(u):m=[u],m.length===0)return!1;let h=c;for(let p=0;p<m.length;p++){const g=m[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}e.has=s})(sv)),sv}var q1;function R5(){return q1||(q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uk(),r=Hb(),n=T5(),i=Kb(),s=M5();function c(u,m){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return m=n.cloneDeep(m),function(h){const p=i.get(h,u);return p===void 0?s.has(h,u):m===void 0?p===void 0:t.isMatch(p,m)}}e.matchesProperty=c})(av)),av}var z1;function q5(){return z1||(z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ok(),r=E5(),n=k5(),i=R5();function s(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=s})(Fg)),Fg}var L1;function z5(){return L1||(L1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=x5(),r=ok(),n=S5(),i=q5();function s(c,u=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.iteratee(u)):[]}e.uniqBy=s})(zg)),zg}var uv,I1;function L5(){return I1||(I1=1,uv=z5().uniqBy),uv}var I5=L5();const U1=ri(I5);function U5(e,t,r){return t===!0?U1(e,r):typeof t=="function"?U1(e,t):e}var dv={exports:{}},fv={},mv={exports:{}},hv={};var B1;function B5(){if(B1)return hv;B1=1;var e=cm();function t(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,s=e.useLayoutEffect,c=e.useDebugValue;function u(g,_){var x=_(),w=n({inst:{value:x,getSnapshot:_}}),j=w[0].inst,S=w[1];return s(function(){j.value=x,j.getSnapshot=_,m(j)&&S({inst:j})},[g,x,_]),i(function(){return m(j)&&S({inst:j}),g(function(){m(j)&&S({inst:j})})},[g]),c(x),x}function m(g){var _=g.getSnapshot;g=g.value;try{var x=_();return!r(g,x)}catch{return!0}}function h(g,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return hv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,hv}var $1;function $5(){return $1||($1=1,mv.exports=B5()),mv.exports}var H1;function H5(){if(H1)return fv;H1=1;var e=cm(),t=$5();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,s=e.useRef,c=e.useEffect,u=e.useMemo,m=e.useDebugValue;return fv.useSyncExternalStoreWithSelector=function(h,p,g,_,x){var w=s(null);if(w.current===null){var j={hasValue:!1,value:null};w.current=j}else j=w.current;w=u(function(){function O(M){if(!C){if(C=!0,A=M,M=_(M),x!==void 0&&j.hasValue){var L=j.value;if(x(L,M))return k=L}return k=M}if(L=k,n(A,M))return L;var V=_(M);return x!==void 0&&x(L,V)?(A=M,L):(A=M,k=V)}var C=!1,A,k,D=g===void 0?null:g;return[function(){return O(p())},D===null?void 0:function(){return O(D())}]},[p,g,_,x]);var S=i(h,w[0],w[1]);return c(function(){j.hasValue=!0,j.value=S},[S]),m(S),S},fv}var F1;function F5(){return F1||(F1=1,dv.exports=H5()),dv.exports}var K5=F5(),Vb=y.createContext(null),Y5=e=>e,Mt=()=>{var e=y.useContext(Vb);return e?e.store.dispatch:Y5},of=()=>{},G5=()=>of,V5=(e,t)=>e===t;function De(e){var t=y.useContext(Vb);return K5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:G5,t?t.store.getState:of,t?t.store.getState:of,t?e:of,V5)}function W5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function X5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Z5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var K1=e=>Array.isArray(e)?e:[e];function Q5(e){const t=Array.isArray(e[0])?e[0]:e;return Z5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function J5(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var e4=class{constructor(e){this.value=e}deref(){return this.value}},t4=typeof WeakRef<"u"?WeakRef:e4,r4=0,Y1=1;function Md(){return{s:r4,v:void 0,o:null,p:null}}function pk(e,t={}){let r=Md();const{resultEqualityCheck:n}=t;let i,s=0;function c(){let u=r;const{length:m}=arguments;for(let g=0,_=m;g<_;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const j=w.get(x);j===void 0?(u=Md(),w.set(x,u)):u=j}else{let w=u.p;w===null&&(u.p=w=new Map);const j=w.get(x);j===void 0?(u=Md(),w.set(x,u)):u=j}}const h=u;let p;if(u.s===Y1)p=u.v;else if(p=e.apply(null,arguments),s++,n){const g=i?.deref?.()??i;g!=null&&n(g,p)&&(p=g,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new t4(p):p}return h.s=Y1,h.v=p,p}return c.clearCache=()=>{r=Md(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function n4(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let s=0,c=0,u,m={},h=i.pop();typeof h=="object"&&(m=h,h=i.pop()),W5(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...r,...m},{memoize:g,memoizeOptions:_=[],argsMemoize:x=pk,argsMemoizeOptions:w=[]}=p,j=K1(_),S=K1(w),O=Q5(i),C=g(function(){return s++,h.apply(null,arguments)},...j),A=x(function(){c++;const D=J5(O,arguments);return u=C.apply(null,D),u},...S);return Object.assign(A,{resultFunc:h,memoizedResultFunc:C,dependencies:O,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var W=n4(pk),a4=Object.assign((e,t=W)=>{X5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((c,u,m)=>(c[r[m]]=u,c),{}))},{withTypes:()=>a4}),pv={},gv={},vv={},G1;function i4(){return G1||(G1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const c=t(n),u=t(i);if(c===u&&c===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?u-c:c-u}return 0};e.compareValues=r})(vv)),vv}var yv={},bv={},V1;function gk(){return V1||(V1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(bv)),bv}var W1;function o4(){return W1||(W1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gk(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||c!=null&&Object.hasOwn(c,s)}e.isKey=i})(yv)),yv}var X1;function s4(){return X1||(X1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i4(),r=o4(),n=Fb();function i(s,c,u,m){if(s==null)return[];u=m?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,w)=>{let j=x;for(let S=0;S<w.length&&j!=null;++S)j=j[w[S]];return j},p=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:h(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?h(w,x):typeof w=="object"?w[x]:w,g=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return s.map(x=>({original:x,criteria:g.map(w=>p(w,x))})).slice().sort((x,w)=>{for(let j=0;j<g.length;j++){const S=t.compareValues(x.criteria[j],w.criteria[j],u[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(gv)),gv}var _v={},Z1;function l4(){return Z1||(Z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],s=Math.floor(n),c=(u,m)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&m<s?c(p,m+1):i.push(p)}};return c(r,0),i}e.flatten=t})(_v)),_v}var xv={},Q1;function vk(){return Q1||(Q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hk(),r=Gb(),n=sk(),i=ck();function s(c,u,m){return n.isObject(m)&&(typeof u=="number"&&r.isArrayLike(m)&&t.isIndex(u)&&u<m.length||typeof u=="string"&&u in m)?i.eq(m[u],c):!1}e.isIterateeCall=s})(xv)),xv}var J1;function c4(){return J1||(J1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s4(),r=l4(),n=vk();function i(s,...c){const u=c.length;return u>1&&n.isIterateeCall(s,c[0],c[1])?c=[]:u>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(s,r.flatten(c),["asc"])}e.sortBy=i})(pv)),pv}var wv,eE;function u4(){return eE||(eE=1,wv=c4().sortBy),wv}var d4=u4();const ym=ri(d4);var yk=e=>e.legend.settings,f4=e=>e.legend.size,m4=e=>e.legend.payload,MZ=W([m4,yk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?ym(n,r):n}),Rd=1;function h4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-t.height)>Rd||Math.abs(c.left-t.left)>Rd||Math.abs(c.top-t.top)>Rd||Math.abs(c.width-t.width)>Rd)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ar(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var p4=typeof Symbol=="function"&&Symbol.observable||"@@observable",tE=p4,jv=()=>Math.random().toString(36).substring(7).split("").join("."),g4={INIT:`@@redux/INIT${jv()}`,REPLACE:`@@redux/REPLACE${jv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${jv()}`},_f=g4;function Wb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function bk(e,t,r){if(typeof e!="function")throw new Error(Ar(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ar(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ar(1));return r(bk)(e,t)}let n=e,i=t,s=new Map,c=s,u=0,m=!1;function h(){c===s&&(c=new Map,s.forEach((S,O)=>{c.set(O,S)}))}function p(){if(m)throw new Error(Ar(3));return i}function g(S){if(typeof S!="function")throw new Error(Ar(4));if(m)throw new Error(Ar(5));let O=!0;h();const C=u++;return c.set(C,S),function(){if(O){if(m)throw new Error(Ar(6));O=!1,h(),c.delete(C),s=null}}}function _(S){if(!Wb(S))throw new Error(Ar(7));if(typeof S.type>"u")throw new Error(Ar(8));if(typeof S.type!="string")throw new Error(Ar(17));if(m)throw new Error(Ar(9));try{m=!0,i=n(i,S)}finally{m=!1}return(s=c).forEach(C=>{C()}),S}function x(S){if(typeof S!="function")throw new Error(Ar(10));n=S,_({type:_f.REPLACE})}function w(){const S=g;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(Ar(11));function C(){const k=O;k.next&&k.next(p())}return C(),{unsubscribe:S(C)}},[tE](){return this}}}return _({type:_f.INIT}),{dispatch:_,subscribe:g,getState:p,replaceReducer:x,[tE]:w}}function v4(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:_f.INIT})>"u")throw new Error(Ar(12));if(typeof r(void 0,{type:_f.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ar(13))})}function _k(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const c=t[s];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let i;try{v4(r)}catch(s){i=s}return function(c={},u){if(i)throw i;let m=!1;const h={};for(let p=0;p<n.length;p++){const g=n[p],_=r[g],x=c[g],w=_(x,u);if(typeof w>"u")throw u&&u.type,new Error(Ar(14));h[g]=w,m=m||w!==x}return m=m||n.length!==Object.keys(c).length,m?h:c}}function xf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function y4(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(Ar(15))};const c={getState:i.getState,dispatch:(m,...h)=>s(m,...h)},u=e.map(m=>m(c));return s=xf(...u)(i.dispatch),{...i,dispatch:s}}}function xk(e){return Wb(e)&&"type"in e&&typeof e.type=="string"}var wk=Symbol.for("immer-nothing"),rE=Symbol.for("immer-draftable"),Ur=Symbol.for("immer-state");function Xn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var pn=Object,Hs=pn.getPrototypeOf,wf="constructor",bm="prototype",ky="configurable",jf="enumerable",sf="writable",Sc="value",Xa=e=>!!e&&!!e[Ur];function ra(e){return e?jk(e)||xm(e)||!!e[rE]||!!e[wf]?.[rE]||wm(e)||jm(e):!1}var b4=pn[bm][wf].toString(),nE=new WeakMap;function jk(e){if(!e||!Xb(e))return!1;const t=Hs(e);if(t===null||t===pn[bm])return!0;const r=pn.hasOwnProperty.call(t,wf)&&t[wf];if(r===Object)return!0;if(!zs(r))return!1;let n=nE.get(r);return n===void 0&&(n=Function.toString.call(r),nE.set(r,n)),n===b4}function _m(e,t,r=!0){Kc(e)===0?(r?Reflect.ownKeys(e):pn.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Kc(e){const t=e[Ur];return t?t.type_:xm(e)?1:wm(e)?2:jm(e)?3:0}var aE=(e,t,r=Kc(e))=>r===2?e.has(t):pn[bm].hasOwnProperty.call(e,t),Dy=(e,t,r=Kc(e))=>r===2?e.get(t):e[t],Sf=(e,t,r,n=Kc(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function _4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var xm=Array.isArray,wm=e=>e instanceof Map,jm=e=>e instanceof Set,Xb=e=>typeof e=="object",zs=e=>typeof e=="function",Sv=e=>typeof e=="boolean";function x4(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Ba=e=>e.copy_||e.base_,Zb=e=>e.modified_?e.copy_:e.base_;function Ty(e,t){if(wm(e))return new Map(e);if(jm(e))return new Set(e);if(xm(e))return Array[bm].slice.call(e);const r=jk(e);if(t===!0||t==="class_only"&&!r){const n=pn.getOwnPropertyDescriptors(e);delete n[Ur];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u[sf]===!1&&(u[sf]=!0,u[ky]=!0),(u.get||u.set)&&(n[c]={[ky]:!0,[sf]:!0,[jf]:u[jf],[Sc]:e[c]})}return pn.create(Hs(e),n)}else{const n=Hs(e);if(n!==null&&r)return{...e};const i=pn.create(n);return pn.assign(i,e)}}function Qb(e,t=!1){return Sm(e)||Xa(e)||!ra(e)||(Kc(e)>1&&pn.defineProperties(e,{set:qd,add:qd,clear:qd,delete:qd}),pn.freeze(e),t&&_m(e,(r,n)=>{Qb(n,!0)},!1)),e}function w4(){Xn(2)}var qd={[Sc]:w4};function Sm(e){return e===null||!Xb(e)?!0:pn.isFrozen(e)}var Ef="MapSet",Py="Patches",iE="ArrayMethods",Sk={};function Lo(e){const t=Sk[e];return t||Xn(0,e),t}var oE=e=>!!Sk[e],Ec,Ek=()=>Ec,j4=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:oE(Ef)?Lo(Ef):void 0,arrayMethodsPlugin_:oE(iE)?Lo(iE):void 0});function sE(e,t){t&&(e.patchPlugin_=Lo(Py),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function My(e){Ry(e),e.drafts_.forEach(S4),e.drafts_=null}function Ry(e){e===Ec&&(Ec=e.parent_)}var lE=e=>Ec=j4(Ec,e);function S4(e){const t=e[Ur];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function cE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Ur].modified_&&(My(t),Xn(4)),ra(e)&&(e=uE(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[Ur].base_,e,t)}else e=uE(t,r);return E4(t,e,!0),My(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==wk?e:void 0}function uE(e,t){if(Sm(t))return t;const r=t[Ur];if(!r)return Of(t,e.handledSet_,e);if(!Em(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);Ak(r,e)}return r.copy_}function E4(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Qb(t,r)}function Ok(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Em=(e,t)=>e.scope_===t,O4=[];function Ck(e,t,r,n){const i=Ba(e),s=e.type_;if(n!==void 0&&Dy(i,n,s)===t){Sf(i,n,r,s);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;_m(i,(m,h)=>{if(Xa(h)){const p=u.get(h)||[];p.push(m),u.set(h,p)}})}const c=e.draftLocations_.get(t)??O4;for(const u of c)Sf(i,u,r,s)}function C4(e,t,r){e.callbacks_.push(function(i){const s=t;if(!s||!Em(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const c=Zb(s);Ck(e,s.draft_??s,c,r),Ak(s,i)})}function Ak(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}Ok(e)}}function A4(e,t,r){const{scope_:n}=e;if(Xa(r)){const i=r[Ur];Em(i,n)&&i.callbacks_.push(function(){lf(e);const c=Zb(i);Ck(e,r,c,t)})}else ra(r)&&e.callbacks_.push(function(){const s=Ba(e);e.type_===3?s.has(r)&&Of(r,n.handledSet_,n):Dy(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Of(Dy(e.copy_,t,e.type_),n.handledSet_,n)})}function Of(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Xa(e)||t.has(e)||!ra(e)||Sm(e)||(t.add(e),_m(e,(n,i)=>{if(Xa(i)){const s=i[Ur];if(Em(s,r)){const c=Zb(s);Sf(e,n,c,e.type_),Ok(s)}}else ra(i)&&Of(i,t,r)})),e}function N4(e,t){const r=xm(e),n={type_:r?1:0,scope_:t?t.scope_:Ek(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=Cf;r&&(i=[n],s=Oc);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,[u,n]}var Cf={get(e,t){if(t===Ur)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=Ba(e);if(!aE(i,t,e.type_))return k4(e,i,t);const s=i[t];if(e.finalized_||!ra(s)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&x4(t))return s;if(s===Ev(e.base_,t)){lf(e);const c=e.type_===1?+t:t,u=zy(e.scope_,s,e,c);return e.copy_[c]=u}return s},has(e,t){return t in Ba(e)},ownKeys(e){return Reflect.ownKeys(Ba(e))},set(e,t,r){const n=Nk(Ba(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Ev(Ba(e),t),s=i?.[Ur];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(_4(r,i)&&(r!==void 0||aE(e.base_,t,e.type_)))return!0;lf(e),qy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),A4(e,t,r)),!0},deleteProperty(e,t){return lf(e),Ev(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),qy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ba(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[sf]:!0,[ky]:e.type_!==1||t!=="length",[jf]:n[jf],[Sc]:r[t]}},defineProperty(){Xn(11)},getPrototypeOf(e){return Hs(e.base_)},setPrototypeOf(){Xn(12)}},Oc={};for(let e in Cf){let t=Cf[e];Oc[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Oc.deleteProperty=function(e,t){return Oc.set.call(this,e,t,void 0)};Oc.set=function(e,t,r){return Cf.set.call(this,e[0],t,r,e[0])};function Ev(e,t){const r=e[Ur];return(r?Ba(r):e)[t]}function k4(e,t,r){const n=Nk(t,r);return n?Sc in n?n[Sc]:n.get?.call(e.draft_):void 0}function Nk(e,t){if(!(t in e))return;let r=Hs(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Hs(r)}}function qy(e){e.modified_||(e.modified_=!0,e.parent_&&qy(e.parent_))}function lf(e){e.copy_||(e.assigned_=new Map,e.copy_=Ty(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var D4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(zs(r)&&!zs(n)){const c=n;n=r;const u=this;return function(h=c,...p){return u.produce(h,g=>n.call(this,g,...p))}}zs(n)||Xn(6),i!==void 0&&!zs(i)&&Xn(7);let s;if(ra(r)){const c=lE(this),u=zy(c,r,void 0);let m=!0;try{s=n(u),m=!1}finally{m?My(c):Ry(c)}return sE(c,i),cE(s,c)}else if(!r||!Xb(r)){if(s=n(r),s===void 0&&(s=r),s===wk&&(s=void 0),this.autoFreeze_&&Qb(s,!0),i){const c=[],u=[];Lo(Py).generateReplacementPatches_(r,s,{patches_:c,inversePatches_:u}),i(c,u)}return s}else Xn(1,r)},this.produceWithPatches=(r,n)=>{if(zs(r))return(u,...m)=>this.produceWithPatches(u,h=>r(h,...m));let i,s;return[this.produce(r,n,(u,m)=>{i=u,s=m}),i,s]},Sv(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Sv(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Sv(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ra(t)||Xn(8),Xa(t)&&(t=ea(t));const r=lE(this),n=zy(r,t,void 0);return n[Ur].isManual_=!0,Ry(r),n}finishDraft(t,r){const n=t&&t[Ur];(!n||!n.isManual_)&&Xn(9);const{scope_:i}=n;return sE(i,r),cE(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const i=Lo(Py).applyPatches_;return Xa(t)?i(t,r):this.produce(t,s=>i(s,r))}};function zy(e,t,r,n){const[i,s]=wm(t)?Lo(Ef).proxyMap_(t,r):jm(t)?Lo(Ef).proxySet_(t,r):N4(t,r);return(r?.scope_??Ek()).drafts_.push(i),s.callbacks_=r?.callbacks_??[],s.key_=n,r&&n!==void 0?C4(r,s,n):s.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:h}=m;s.modified_&&h&&h.generatePatches_(s,[],m)}),i}function ea(e){return Xa(e)||Xn(10,e),kk(e)}function kk(e){if(!ra(e)||Sm(e))return e;const t=e[Ur];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ty(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ty(e,!0);return _m(r,(i,s)=>{Sf(r,i,kk(s))},n),t&&(t.finalized_=!1),r}var T4=new D4,Dk=T4.produce;function Tk(e){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,e):i(s)}var P4=Tk(),M4=Tk,R4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?xf:xf.apply(null,arguments)};function In(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(gn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>xk(n)&&n.type===e,r}var Pk=class vc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,vc.prototype)}static get[Symbol.species](){return vc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new vc(...t[0].concat(this)):new vc(...t.concat(this))}};function dE(e){return ra(e)?Dk(e,()=>{}):e}function zd(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function q4(e){return typeof e=="boolean"}var z4=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let c=new Pk;return r&&(q4(r)?c.push(P4):c.push(M4(r.extraArgument))),c},Mk="RTK_autoBatch",Nt=()=>e=>({payload:e,meta:{[Mk]:!0}}),fE=e=>t=>{setTimeout(t,e)},Rk=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,c=!1;const u=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fE(10):e.type==="callback"?e.queueNotification:fE(e.timeout),h=()=>{c=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const g=()=>i&&p(),_=n.subscribe(g);return u.add(p),()=>{_(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[Mk],s=!i,s&&(c||(c=!0,m(h))),n.dispatch(p)}finally{i=!0}}})},L4=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new Pk(e);return n&&i.push(Rk(typeof n=="object"?n:void 0)),i};function I4(e){const t=z4(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:c=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(Wb(r))u=_k(r);else throw new Error(gn(1));let m;typeof n=="function"?m=n(t):m=t();let h=xf;i&&(h=R4({trace:!1,...typeof i=="object"&&i}));const p=y4(...m),g=L4(p);let _=typeof c=="function"?c(g):g();const x=h(..._);return bk(u,s,x)}function qk(e){const t={},r=[];let n;const i={addCase(s,c){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(gn(28));if(u in t)throw new Error(gn(29));return t[u]=c,i},addAsyncThunk(s,c){return c.pending&&(t[s.pending.type]=c.pending),c.rejected&&(t[s.rejected.type]=c.rejected),c.fulfilled&&(t[s.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:s.settled,reducer:c.settled}),i},addMatcher(s,c){return r.push({matcher:s,reducer:c}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function U4(e){return typeof e=="function"}function B4(e,t){let[r,n,i]=qk(t),s;if(U4(e))s=()=>dE(e());else{const u=dE(e);s=()=>u}function c(u=s(),m){let h=[r[m.type],...n.filter(({matcher:p})=>p(m)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,g)=>{if(g)if(Xa(p)){const x=g(p,m);return x===void 0?p:x}else{if(ra(p))return Dk(p,_=>g(_,m));{const _=g(p,m);if(_===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return p},u)}return c.getInitialState=s,c}var $4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",H4=(e=21)=>{let t="",r=e;for(;r--;)t+=$4[Math.random()*64|0];return t},F4=Symbol.for("rtk-slice-createasyncthunk");function K4(e,t){return`${e}/${t}`}function Y4({creators:e}={}){const t=e?.asyncThunk?.[F4];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(gn(11));const c=(typeof n.reducers=="function"?n.reducers(V4()):n.reducers)||{},u=Object.keys(c),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(A,k){const D=typeof A=="string"?A:A.type;if(!D)throw new Error(gn(12));if(D in m.sliceCaseReducersByType)throw new Error(gn(13));return m.sliceCaseReducersByType[D]=k,h},addMatcher(A,k){return m.sliceMatchers.push({matcher:A,reducer:k}),h},exposeAction(A,k){return m.actionCreators[A]=k,h},exposeCaseReducer(A,k){return m.sliceCaseReducersByName[A]=k,h}};u.forEach(A=>{const k=c[A],D={reducerName:A,type:K4(i,A),createNotation:typeof n.reducers=="function"};X4(k)?Q4(D,k,h,t):W4(D,k,h)});function p(){const[A={},k=[],D=void 0]=typeof n.extraReducers=="function"?qk(n.extraReducers):[n.extraReducers],M={...A,...m.sliceCaseReducersByType};return B4(n.initialState,L=>{for(let V in M)L.addCase(V,M[V]);for(let V of m.sliceMatchers)L.addMatcher(V.matcher,V.reducer);for(let V of k)L.addMatcher(V.matcher,V.reducer);D&&L.addDefaultCase(D)})}const g=A=>A,_=new Map,x=new WeakMap;let w;function j(A,k){return w||(w=p()),w(A,k)}function S(){return w||(w=p()),w.getInitialState()}function O(A,k=!1){function D(L){let V=L[A];return typeof V>"u"&&k&&(V=zd(x,D,S)),V}function M(L=g){const V=zd(_,k,()=>new WeakMap);return zd(V,L,()=>{const re={};for(const[ie,X]of Object.entries(n.selectors??{}))re[ie]=G4(X,L,()=>zd(x,L,S),k);return re})}return{reducerPath:A,getSelectors:M,get selectors(){return M(D)},selectSlice:D}}const C={name:i,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...O(s),injectInto(A,{reducerPath:k,...D}={}){const M=k??s;return A.inject({reducerPath:M,reducer:j},D),{...C,...O(M,!0)}}};return C}}function G4(e,t,r,n){function i(s,...c){let u=t(s);return typeof u>"u"&&n&&(u=r()),e(u,...c)}return i.unwrapped=e,i}var Qr=Y4();function V4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function W4({type:e,reducerName:t,createNotation:r},n,i){let s,c;if("reducer"in n){if(r&&!Z4(n))throw new Error(gn(17));s=n.reducer,c=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,c?In(e,c):In(e))}function X4(e){return e._reducerDefinitionType==="asyncThunk"}function Z4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Q4({type:e,reducerName:t},r,n,i){if(!i)throw new Error(gn(18));const{payloadCreator:s,fulfilled:c,pending:u,rejected:m,settled:h,options:p}=r,g=i(e,s,p);n.exposeAction(t,g),c&&n.addCase(g.fulfilled,c),u&&n.addCase(g.pending,u),m&&n.addCase(g.rejected,m),h&&n.addMatcher(g.settled,h),n.exposeCaseReducer(t,{fulfilled:c||Ld,pending:u||Ld,rejected:m||Ld,settled:h||Ld})}function Ld(){}var J4="task",zk="listener",Lk="completed",Jb="cancelled",eI=`task-${Jb}`,tI=`task-${Lk}`,Ly=`${zk}-${Jb}`,rI=`${zk}-${Lk}`,Om=class{constructor(e){this.code=e,this.message=`${J4} ${Jb} (reason: ${e})`}name="TaskAbortError";message},e0=(e,t)=>{if(typeof e!="function")throw new TypeError(gn(32))},Af=()=>{},Ik=(e,t=Af)=>(e.catch(t),e),Uk=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ko=e=>{if(e.aborted)throw new Om(e.reason)};function Bk(e,t){let r=Af;return new Promise((n,i)=>{const s=()=>i(new Om(e.reason));if(e.aborted){s();return}r=Uk(e,s),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Af})}var nI=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Om?"cancelled":"rejected",error:r}}finally{t?.()}},Nf=e=>t=>Ik(Bk(e,t).then(r=>(ko(e),r))),$k=e=>{const t=Nf(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Us}=Object,mE={},Cm="listenerMiddleware",aI=(e,t)=>{const r=n=>Uk(e,()=>n.abort(e.reason));return(n,i)=>{e0(n);const s=new AbortController;r(s);const c=nI(async()=>{ko(e),ko(s.signal);const u=await n({pause:Nf(s.signal),delay:$k(s.signal),signal:s.signal});return ko(s.signal),u},()=>s.abort(tI));return i?.autoJoin&&t.push(c.catch(Af)),{result:Nf(e)(c),cancel(){s.abort(eI)}}}},iI=(e,t)=>{const r=async(n,i)=>{ko(t);let s=()=>{};const u=[new Promise((m,h)=>{let p=e({predicate:n,effect:(g,_)=>{_.unsubscribe(),m([g,_.getState(),_.getOriginalState()])}});s=()=>{p(),h()}})];i!=null&&u.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await Bk(t,Promise.race(u));return ko(t),m}finally{s()}};return(n,i)=>Ik(r(n,i))},Hk=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=In(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(gn(21));return e0(s),{predicate:i,type:t,effect:s}},Fk=Us(e=>{const{type:t,predicate:r,effect:n}=Hk(e);return{id:H4(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(gn(22))}}},{withTypes:()=>Fk}),hE=(e,t)=>{const{type:r,effect:n,predicate:i}=Hk(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},Iy=e=>{e.pending.forEach(t=>{t.abort(Ly)})},oI=(e,t)=>()=>{for(const r of t.keys())Iy(r);e.clear()},pE=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Kk=Us(In(`${Cm}/add`),{withTypes:()=>Kk}),sI=In(`${Cm}/removeAll`),Yk=Us(In(`${Cm}/remove`),{withTypes:()=>Yk}),lI=(...e)=>{console.error(`${Cm}/error`,...e)},Yc=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},i=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:s,onError:c=lI}=e;e0(c);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w?.cancelActive&&Iy(x)}),m=x=>{const w=hE(t,x)??Fk(x);return u(w)};Us(m,{withTypes:()=>m});const h=x=>{const w=hE(t,x);return w&&(w.unsubscribe(),x.cancelActive&&Iy(w)),!!w};Us(h,{withTypes:()=>h});const p=async(x,w,j,S)=>{const O=new AbortController,C=iI(m,O.signal),A=[];try{x.pending.add(O),n(x),await Promise.resolve(x.effect(w,Us({},j,{getOriginalState:S,condition:(k,D)=>C(k,D).then(Boolean),take:C,delay:$k(O.signal),pause:Nf(O.signal),extra:s,signal:O.signal,fork:aI(O.signal,A),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((k,D,M)=>{k!==O&&(k.abort(Ly),M.delete(k))})},cancel:()=>{O.abort(Ly),x.pending.delete(O)},throwIfCancelled:()=>{ko(O.signal)}})))}catch(k){k instanceof Om||pE(c,k,{raisedBy:"effect"})}finally{await Promise.all(A),O.abort(rI),i(x),x.pending.delete(O)}},g=oI(t,r);return{middleware:x=>w=>j=>{if(!xk(j))return w(j);if(Kk.match(j))return m(j.payload);if(sI.match(j)){g();return}if(Yk.match(j))return h(j.payload);let S=x.getState();const O=()=>{if(S===mE)throw new Error(gn(23));return S};let C;try{if(C=w(j),t.size>0){const A=x.getState(),k=Array.from(t.values());for(const D of k){let M=!1;try{M=D.predicate(j,A,S)}catch(L){M=!1,pE(c,L,{raisedBy:"predicate"})}M&&p(D,j,x,O)}}}finally{S=mE}return C},startListening:m,stopListening:h,clearListeners:g}};function gn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var cI={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Gk=Qr({name:"chartLayout",initialState:cI,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:uI,setLayout:dI,setChartSize:fI,setScale:mI}=Gk.actions,hI=Gk.reducer;function Vk(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function zt(e){return Number.isFinite(e)}function ya(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function gE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gE(Object(r),!0).forEach(function(n){pI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pI(e,t,r){return(t=gI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gI(e){var t=vI(e,"string");return typeof t=="symbol"?t:t+""}function vI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vt(e,t,r){return Pt(e)||Pt(t)?r:va(t)?zo(e,t,r):typeof t=="function"?t(e):r}var yI=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:s,verticalAlign:c,layout:u}=t;if((u==="vertical"||u==="horizontal"&&c==="middle")&&s!=="center"&&ke(e[s]))return Ls(Ls({},e),{},{[s]:e[s]+(n||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&c!=="middle"&&ke(e[c]))return Ls(Ls({},e),{},{[c]:e[c]+(i||0)})}return e},Zi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Wk=(e,t,r,n)=>{if(n)return e.map(u=>u.coordinate);var i,s,c=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===r&&(s=!0),u.coordinate));return i||c.push(t),s||c.push(r),c},Xk=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:s,scale:c,realScaleType:u,isCategorical:m,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:_,axisType:x}=e;if(!c)return null;var w=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=i==="category"&&c.bandwidth?c.bandwidth()/w:0;if(j=x==="angleAxis"&&s&&s.length>=2?br(s[0]-s[1])*2*j:j,g||_){var S=(g||_||[]).map((O,C)=>{var A=n?n.indexOf(O):O;return{coordinate:c(A)+j,value:O,offset:j,index:C}});return S.filter(O=>!ta(O.coordinate))}return m&&h?h.map((O,C)=>({coordinate:c(O)+j,value:O,index:C,offset:j})):c.ticks&&p!=null?c.ticks(p).map((O,C)=>({coordinate:c(O)+j,value:O,offset:j,index:C})):c.domain().map((O,C)=>({coordinate:c(O)+j,value:n?n[O]:O,index:C,offset:j}))},vE=1e-4,bI=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-vE,s=Math.max(n[0],n[1])+vE,c=e(t[0]),u=e(t[r-1]);(c<i||c>s||u<i||u>s)&&e.domain([t[0],t[r-1]])}},_I=(e,t)=>{if(!t||t.length!==2||!ke(t[0])||!ke(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ke(e[0])||e[0]<r)&&(i[0]=r),(!ke(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},xI=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0,u=0;u<r;++u){var m=e[u],h=m?.[i];if(h!=null){var p=h[1],g=h[0],_=ta(p)?g:p;_>=0?(h[0]=s,h[1]=s+_,s=p):(h[0]=c,h[1]=c+_,c=p)}}}},wI=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0;c<r;++c){var u=e[c],m=u?.[i];if(m!=null){var h=ta(m[1])?m[0]:m[1];h>=0?(m[0]=s,m[1]=s+h,s=m[1]):(m[0]=0,m[1]=0)}}}},jI={sign:xI,expand:X3,none:qo,silhouette:Z3,wiggle:Q3,positive:wI},SI=(e,t,r)=>{var n,i=(n=jI[r])!==null&&n!==void 0?n:qo,s=W3().keys(t).value((u,m)=>Number(vt(u,m,0))).order(Ay).offset(i),c=s(e);return c.forEach((u,m)=>{u.forEach((h,p)=>{var g=vt(e[p],t[m],0);Array.isArray(g)&&g.length===2&&ke(g[0])&&ke(g[1])&&(h[0]=g[0],h[1]=g[1])})}),c};function EI(e){return e==null?void 0:String(e)}function yE(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:s,dataKey:c}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Pt(i[t.dataKey])){var u=rk(r,"value",i[t.dataKey]);if(u)return u.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var m=vt(i,Pt(c)?t.dataKey:c);return Pt(m)?null:t.scale(m)}var bE=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:s,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var u=vt(s,t.dataKey,t.scale.domain()[c]);return Pt(u)?null:t.scale(u)-i/2+n},OI=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},CI=e=>{var t=e.flat(2).filter(ke);return[Math.min(...t),Math.max(...t)]},AI=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],NI=(e,t,r)=>{if(e!=null)return AI(Object.keys(e).reduce((n,i)=>{var s=e[i];if(!s)return n;var{stackedData:c}=s,u=c.reduce((m,h)=>{var p=Vk(h,t,r),g=CI(p);return!zt(g[0])||!zt(g[1])?m:[Math.min(m[0],g[0]),Math.max(m[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},_E=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fs=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=ym(t,p=>p.coordinate),s=1/0,c=1,u=i.length;c<u;c++){var m=i[c],h=i[c-1];s=Math.min((m?.coordinate||0)-(h?.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function wE(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:s}=e;return Ls(Ls({},t),{},{dataKey:r,payload:n,value:i,name:s})}function Qs(e,t){if(e)return String(e);if(typeof t=="string")return t}var kI=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},DI=(e,t)=>t==="centric"?e.angle:e.radius,ai=e=>e.layout.width,ii=e=>e.layout.height,TI=e=>e.layout.scale,Zk=e=>e.layout.margin,Am=W(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Nm=W(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Qk="data-recharts-item-index",Jk="data-recharts-item-id",Gc=60;function jE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Id(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jE(Object(r),!0).forEach(function(n){PI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PI(e,t,r){return(t=MI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MI(e){var t=RI(e,"string");return typeof t=="symbol"?t:t+""}function RI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qI=e=>e.brush.height;function zI(e){var t=Nm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Gc;return r+i}return r},0)}function LI(e){var t=Nm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Gc;return r+i}return r},0)}function II(e){var t=Am(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function UI(e){var t=Am(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var dr=W([ai,ii,Zk,qI,zI,LI,II,UI,yk,f4],(e,t,r,n,i,s,c,u,m,h)=>{var p={left:(r.left||0)+i,right:(r.right||0)+s},g={top:(r.top||0)+c,bottom:(r.bottom||0)+u},_=Id(Id({},g),p),x=_.bottom;_.bottom+=n,_=yI(_,m,h);var w=e-_.left-_.right,j=t-_.top-_.bottom;return Id(Id({brushBottom:x},_),{},{width:Math.max(w,0),height:Math.max(j,0)})}),BI=W(dr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),t0=W(ai,ii,(e,t)=>({x:0,y:0,width:e,height:t})),$I=y.createContext(null),Pr=()=>y.useContext($I)!=null,km=e=>e.brush,Dm=W([km,dr,Zk],(e,t,r)=>({height:e.height,x:ke(e.x)?e.x:t.left,y:ke(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:ke(e.width)?e.width:t.width})),Ov={},Cv={},Av={},SE;function HI(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:s}={}){let c,u=null;const m=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{u!==null&&(r.apply(c,u),c=void 0,u=null)},g=()=>{h&&p(),j()};let _=null;const x=()=>{_!=null&&clearTimeout(_),_=setTimeout(()=>{_=null,g()},n)},w=()=>{_!==null&&(clearTimeout(_),_=null)},j=()=>{w(),c=void 0,u=null},S=()=>{p()},O=function(...C){if(i?.aborted)return;c=this,u=C;const A=_==null;x(),m&&A&&p()};return O.schedule=x,O.cancel=j,O.flush=S,i?.addEventListener("abort",j,{once:!0}),O}e.debounce=t})(Av)),Av}var EE;function FI(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HI();function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:u=!0,maxWait:m}=s,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let p,g=null;const _=t.debounce(function(...j){p=n.apply(this,j),g=null},i,{edges:h}),x=function(...j){return m!=null&&(g===null&&(g=Date.now()),Date.now()-g>=m)?(p=n.apply(this,j),g=Date.now(),_.cancel(),_.schedule(),p):(_.apply(this,j),p)},w=()=>(_.flush(),p);return x.cancel=_.cancel,x.flush=w,x}e.debounce=r})(Cv)),Cv}var OE;function KI(){return OE||(OE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FI();function r(n,i=0,s={}){const{leading:c=!0,trailing:u=!0}=s;return t.debounce(n,i,{leading:c,maxWait:i,trailing:u})}e.throttle=r})(Ov)),Ov}var Nv,CE;function YI(){return CE||(CE=1,Nv=KI().throttle),Nv}var GI=YI();const VI=ri(GI);var kf=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(r.replace(/%s/g,()=>i[c++]))}},eD=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:c}=r,u=Wa(n)?e:Number(n),m=Wa(i)?t:Number(i);return s&&s>0&&(u?m=u/s:m&&(u=m*s),c&&m!=null&&m>c&&(m=c)),{calculatedWidth:u,calculatedHeight:m}},WI={width:0,height:0,overflow:"visible"},XI={width:0,overflowX:"visible"},ZI={height:0,overflowY:"visible"},QI={},JI=e=>{var{width:t,height:r}=e,n=Wa(t),i=Wa(r);return n&&i?WI:n?XI:i?ZI:QI};function e6(e){var{width:t,height:r,aspect:n}=e,i=t,s=r;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function Uy(){return Uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uy.apply(null,arguments)}function AE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function NE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(r),!0).forEach(function(n){t6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t6(e,t,r){return(t=r6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r6(e){var t=n6(e,"string");return typeof t=="symbol"?t:t+""}function n6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tD=y.createContext({width:-1,height:-1});function a6(e){return ya(e.width)&&ya(e.height)}function rD(e){var{children:t,width:r,height:n}=e,i=y.useMemo(()=>({width:r,height:n}),[r,n]);return a6(i)?y.createElement(tD.Provider,{value:i},t):null}var r0=()=>y.useContext(tD),i6=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:c=0,minHeight:u,maxHeight:m,children:h,debounce:p=0,id:g,className:_,onResize:x,style:w={}}=e,j=y.useRef(null),S=y.useRef();S.current=x,y.useImperativeHandle(t,()=>j.current);var[O,C]=y.useState({containerWidth:n.width,containerHeight:n.height}),A=y.useCallback((V,re)=>{C(ie=>{var X=Math.round(V),I=Math.round(re);return ie.containerWidth===X&&ie.containerHeight===I?ie:{containerWidth:X,containerHeight:I}})},[]);y.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Fc;var V=I=>{var ce,{width:ge,height:q}=I[0].contentRect;A(ge,q),(ce=S.current)===null||ce===void 0||ce.call(S,ge,q)};p>0&&(V=VI(V,p,{trailing:!0,leading:!1}));var re=new ResizeObserver(V),{width:ie,height:X}=j.current.getBoundingClientRect();return A(ie,X),re.observe(j.current),()=>{re.disconnect()}},[A,p]);var{containerWidth:k,containerHeight:D}=O;kf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:M,calculatedHeight:L}=eD(k,D,{width:i,height:s,aspect:r,maxHeight:m});return kf(M!=null&&M>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,L,i,s,c,u,r),y.createElement("div",{id:g?"".concat(g):void 0,className:st("recharts-responsive-container",_),style:NE(NE({},w),{},{width:i,height:s,minWidth:c,minHeight:u,maxHeight:m}),ref:j},y.createElement("div",{style:JI({width:i,height:s})},y.createElement(rD,{width:M,height:L},h)))}),kv=y.forwardRef((e,t)=>{var r=r0();if(ya(r.width)&&ya(r.height))return e.children;var{width:n,height:i}=e6({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:c}=eD(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ke(s)&&ke(c)?y.createElement(rD,{width:s,height:c},e.children):y.createElement(i6,Uy({},e,{width:n,height:i,ref:t}))});function nD(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Tm=()=>{var e,t=Pr(),r=De(BI),n=De(Dm),i=(e=De(km))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},o6={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},aD=()=>{var e;return(e=De(dr))!==null&&e!==void 0?e:o6},iD=()=>De(ai),oD=()=>De(ii),qZ=()=>De(e=>e.layout.margin),et=e=>e.layout.layoutType,Yo=()=>De(et),zZ=()=>{var e=Yo();if(e==="horizontal"||e==="vertical")return e},s6=()=>{var e=Yo();return e!==void 0},Pm=e=>{var t=Mt(),r=Pr(),{width:n,height:i}=e,s=r0(),c=n,u=i;return s&&(c=s.width>0?s.width:n,u=s.height>0?s.height:i),y.useEffect(()=>{!r&&ya(c)&&ya(u)&&t(fI({width:c,height:u}))},[t,r,c,u]),null},sD=Symbol.for("immer-nothing"),kE=Symbol.for("immer-draftable"),yn=Symbol.for("immer-state");function Zn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Cc=Object.getPrototypeOf;function Ks(e){return!!e&&!!e[yn]}function Io(e){return e?lD(e)||Array.isArray(e)||!!e[kE]||!!e.constructor?.[kE]||Vc(e)||Rm(e):!1}var l6=Object.prototype.constructor.toString(),DE=new WeakMap;function lD(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=DE.get(r);return n===void 0&&(n=Function.toString.call(r),DE.set(r,n)),n===l6}function Df(e,t,r=!0){Mm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Mm(e){const t=e[yn];return t?t.type_:Array.isArray(e)?1:Vc(e)?2:Rm(e)?3:0}function By(e,t){return Mm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cD(e,t,r){const n=Mm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function c6(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Vc(e){return e instanceof Map}function Rm(e){return e instanceof Set}function jo(e){return e.copy_||e.base_}function $y(e,t){if(Vc(e))return new Map(e);if(Rm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=lD(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[yn];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[c]})}return Object.create(Cc(e),n)}else{const n=Cc(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function n0(e,t=!1){return qm(e)||Ks(e)||!Io(e)||(Mm(e)>1&&Object.defineProperties(e,{set:Ud,add:Ud,clear:Ud,delete:Ud}),Object.freeze(e),t&&Object.values(e).forEach(r=>n0(r,!0))),e}function u6(){Zn(2)}var Ud={value:u6};function qm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var d6={};function Uo(e){const t=d6[e];return t||Zn(0,e),t}var Ac;function uD(){return Ac}function f6(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TE(e,t){t&&(Uo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Hy(e){Fy(e),e.drafts_.forEach(m6),e.drafts_=null}function Fy(e){e===Ac&&(Ac=e.parent_)}function PE(e){return Ac=f6(Ac,e)}function m6(e){const t=e[yn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ME(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[yn].modified_&&(Hy(t),Zn(4)),Io(e)&&(e=Tf(t,e),t.parent_||Pf(t,e)),t.patches_&&Uo("Patches").generateReplacementPatches_(r[yn].base_,e,t.patches_,t.inversePatches_)):e=Tf(t,r,[]),Hy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==sD?e:void 0}function Tf(e,t,r){if(qm(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[yn];if(!i)return Df(t,(s,c)=>RE(e,i,t,s,c,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Pf(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let c=s,u=!1;i.type_===3&&(c=new Set(s),s.clear(),u=!0),Df(c,(m,h)=>RE(e,i,s,m,h,r,u),n),Pf(e,s,!1),r&&e.patches_&&Uo("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function RE(e,t,r,n,i,s,c){if(i==null||typeof i!="object"&&!c)return;const u=qm(i);if(!(u&&!c)){if(Ks(i)){const m=s&&t&&t.type_!==3&&!By(t.assigned_,n)?s.concat(n):void 0,h=Tf(e,i,m);if(cD(r,n,h),Ks(h))e.canAutoFreeze_=!1;else return}else c&&r.add(i);if(Io(i)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&u)return;Tf(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Vc(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Pf(e,i)}}}function Pf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&n0(t,r)}function h6(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:uD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=a0;r&&(i=[n],s=Nc);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,u}var a0={get(e,t){if(t===yn)return e;const r=jo(e);if(!By(r,t))return p6(e,r,t);const n=r[t];return e.finalized_||!Io(n)?n:n===Dv(e.base_,t)?(Tv(e),e.copy_[t]=Yy(n,e)):n},has(e,t){return t in jo(e)},ownKeys(e){return Reflect.ownKeys(jo(e))},set(e,t,r){const n=dD(jo(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Dv(jo(e),t),s=i?.[yn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(c6(r,i)&&(r!==void 0||By(e.base_,t)))return!0;Tv(e),Ky(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Dv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Tv(e),Ky(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=jo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Zn(11)},getPrototypeOf(e){return Cc(e.base_)},setPrototypeOf(){Zn(12)}},Nc={};Df(a0,(e,t)=>{Nc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Nc.deleteProperty=function(e,t){return Nc.set.call(this,e,t,void 0)};Nc.set=function(e,t,r){return a0.set.call(this,e[0],t,r,e[0])};function Dv(e,t){const r=e[yn];return(r?jo(r):e)[t]}function p6(e,t,r){const n=dD(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function dD(e,t){if(!(t in e))return;let r=Cc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Cc(r)}}function Ky(e){e.modified_||(e.modified_=!0,e.parent_&&Ky(e.parent_))}function Tv(e){e.copy_||(e.copy_=$y(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var g6=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const c=this;return function(m=s,...h){return c.produce(m,p=>r.call(this,p,...h))}}typeof r!="function"&&Zn(6),n!==void 0&&typeof n!="function"&&Zn(7);let i;if(Io(t)){const s=PE(this),c=Yy(t,void 0);let u=!0;try{i=r(c),u=!1}finally{u?Hy(s):Fy(s)}return TE(s,n),ME(i,s)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===sD&&(i=void 0),this.autoFreeze_&&n0(i,!0),n){const s=[],c=[];Uo("Patches").generateReplacementPatches_(t,i,s,c),n(s,c)}return i}else Zn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...u)=>this.produceWithPatches(c,m=>t(m,...u));let n,i;return[this.produce(t,r,(c,u)=>{n=c,i=u}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Io(e)||Zn(8),Ks(e)&&(e=v6(e));const t=PE(this),r=Yy(e,void 0);return r[yn].isManual_=!0,Fy(t),r}finishDraft(e,t){const r=e&&e[yn];(!r||!r.isManual_)&&Zn(9);const{scope_:n}=r;return TE(n,t),ME(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Uo("Patches").applyPatches_;return Ks(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Yy(e,t){const r=Vc(e)?Uo("MapSet").proxyMap_(e,t):Rm(e)?Uo("MapSet").proxySet_(e,t):h6(e,t);return(t?t.scope_:uD()).drafts_.push(r),r}function v6(e){return Ks(e)||Zn(10,e),fD(e)}function fD(e){if(!Io(e)||qm(e))return e;const t=e[yn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=$y(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=$y(e,!0);return Df(r,(i,s)=>{cD(r,i,fD(s))},n),t&&(t.finalized_=!1),r}var y6=new g6;y6.produce;var b6={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},mD=Qr({name:"legend",initialState:b6,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Nt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ea(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Nt()},removeLegendPayload:{reducer(e,t){var r=ea(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Nt()}}}),{setLegendSize:LZ,setLegendSettings:IZ,addLegendPayload:hD,replaceLegendPayload:pD,removeLegendPayload:gD}=mD.actions,_6=mD.reducer;function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gy.apply(null,arguments)}function qE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(r),!0).forEach(function(n){x6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x6(e,t,r){return(t=w6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w6(e){var t=j6(e,"string");return typeof t=="symbol"?t:t+""}function j6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S6(e){return Array.isArray(e)&&va(e[0])&&va(e[1])?e.join(" ~ "):e}var E6=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:s,formatter:c,itemSorter:u,wrapperClassName:m,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:_=!1}=e,x=()=>{if(s&&s.length){var D={padding:0,margin:0},M=(u?ym(s,u):s).map((L,V)=>{if(L.type==="none")return null;var re=L.formatter||c||S6,{value:ie,name:X}=L,I=ie,ce=X;if(re){var ge=re(ie,X,L,V,s);if(Array.isArray(ge))[I,ce]=ge;else if(ge!=null)I=ge;else return null}var q=Pv({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(V),style:q},va(ce)?y.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,va(ce)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},I),y.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:D},M)}return null},w=Pv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=Pv({margin:0},i),S=!Pt(p),O=S?p:"",C=st("recharts-default-tooltip",m),A=st("recharts-tooltip-label",h);S&&g&&s!==void 0&&s!==null&&(O=g(p,s));var k=_?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Gy({className:C,style:w},k),y.createElement("p",{className:A,style:j},y.isValidElement(O)?O:"".concat(O)),x())},sc="recharts-tooltip-wrapper",O6={visibility:"hidden"};function C6(e){var{coordinate:t,translateX:r,translateY:n}=e;return st(sc,{["".concat(sc,"-right")]:ke(r)&&t&&ke(t.x)&&r>=t.x,["".concat(sc,"-left")]:ke(r)&&t&&ke(t.x)&&r<t.x,["".concat(sc,"-bottom")]:ke(n)&&t&&ke(t.y)&&n>=t.y,["".concat(sc,"-top")]:ke(n)&&t&&ke(t.y)&&n<t.y})}function zE(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:s,reverseDirection:c,tooltipDimension:u,viewBox:m,viewBoxDimension:h}=e;if(s&&ke(s[n]))return s[n];var p=r[n]-u-(i>0?i:0),g=r[n]+i;if(t[n])return c[n]?p:g;var _=m[n];if(_==null)return 0;if(c[n]){var x=p,w=_;return x<w?Math.max(g,_):Math.max(p,_)}if(h==null)return 0;var j=g+u,S=_+h;return j>S?Math.max(p,_):Math.max(g,_)}function A6(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function N6(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:c,useTranslate3d:u,viewBox:m}=e,h,p,g;return c.height>0&&c.width>0&&r?(p=zE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.width,viewBox:m,viewBoxDimension:m.width}),g=zE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.height,viewBox:m,viewBoxDimension:m.height}),h=A6({translateX:p,translateY:g,useTranslate3d:u})):h=O6,{cssProperties:h,cssClasses:C6({translateX:p,translateY:g,coordinate:r})}}function LE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LE(Object(r),!0).forEach(function(n){Vy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vy(e,t,r){return(t=k6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k6(e){var t=D6(e,"string");return typeof t=="symbol"?t:t+""}function D6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class T6 extends y.PureComponent{constructor(){super(...arguments),Vy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Vy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:c,hasPayload:u,isAnimationActive:m,offset:h,position:p,reverseDirection:g,useTranslate3d:_,viewBox:x,wrapperStyle:w,lastBoundingBox:j,innerRef:S,hasPortalFromProps:O}=this.props,{cssClasses:C,cssProperties:A}=N6({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:h,position:p,reverseDirection:g,tooltipBox:{height:j.height,width:j.width},useTranslate3d:_,viewBox:x}),k=O?{}:Bd(Bd({transition:m&&t?"transform ".concat(n,"ms ").concat(i):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=Bd(Bd({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:D,ref:S},s)}}var vD=()=>{var e;return(e=De(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(null,arguments)}function IE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(r),!0).forEach(function(n){P6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P6(e,t,r){return(t=M6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M6(e){var t=R6(e,"string");return typeof t=="symbol"?t:t+""}function R6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BE={curveBasisClosed:L3,curveBasisOpen:I3,curveBasis:z3,curveBumpX:j3,curveBumpY:S3,curveLinearClosed:U3,curveLinear:pm,curveMonotoneX:B3,curveMonotoneY:$3,curveNatural:H3,curveStep:F3,curveStepAfter:Y3,curveStepBefore:K3},Mf=e=>zt(e.x)&&zt(e.y),$E=e=>e.base!=null&&Mf(e.base)&&Mf(e),lc=e=>e.x,cc=e=>e.y,q6=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Hc(e));return(r==="curveMonotone"||r==="curveBump")&&t?BE["".concat(r).concat(t==="vertical"?"Y":"X")]:BE[r]||pm},z6=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:s=!1}=e,c=q6(t,i),u=s?r.filter(Mf):r,m;if(Array.isArray(n)){var h=r.map((x,w)=>UE(UE({},x),{},{base:n[w]}));i==="vertical"?m=Pd().y(cc).x1(lc).x0(x=>x.base.x):m=Pd().x(lc).y1(cc).y0(x=>x.base.y);var p=m.defined($E).curve(c),g=s?h.filter($E):h;return p(g)}i==="vertical"&&ke(n)?m=Pd().y(cc).x1(lc).x0(n):ke(n)?m=Pd().x(lc).y1(cc).y0(n):m=HN().x(lc).y(cc);var _=m.defined(Mf).curve(c);return _(u)},i0=e=>{var{className:t,points:r,path:n,pathRef:i}=e,s=Yo();if((!r||!r.length)&&!n)return null;var c={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},u=r&&r.length?z6(c):n;return y.createElement("path",Wy({},vn(e),Yb(e),{className:st("recharts-curve",t),d:u===null?void 0:u,ref:i}))},L6=["x","y","top","left","width","height","className"];function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xy.apply(null,arguments)}function HE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function I6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(r),!0).forEach(function(n){U6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U6(e,t,r){return(t=B6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B6(e){var t=$6(e,"string");return typeof t=="symbol"?t:t+""}function $6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function H6(e,t){if(e==null)return{};var r,n,i=F6(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function F6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var K6=(e,t,r,n,i,s)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),Y6=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:s=0,height:c=0,className:u}=e,m=H6(e,L6),h=I6({x:t,y:r,top:n,left:i,width:s,height:c},m);return!ke(t)||!ke(r)||!ke(s)||!ke(c)||!ke(n)||!ke(i)?null:y.createElement("path",Xy({},Ir(h),{className:st("recharts-cross",u),d:K6(t,r,s,c,n,i)}))};function G6(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function KE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(n){V6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V6(e,t,r){return(t=W6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W6(e){var t=X6(e,"string");return typeof t=="symbol"?t:t+""}function X6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z6=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),yD=(e,t,r)=>e.map(n=>"".concat(Z6(n)," ").concat(t,"ms ").concat(r)).join(","),Q6=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),kc=(e,t)=>Object.keys(t).reduce((r,n)=>KE(KE({},r),{},{[n]:e(n,t[n])}),{});function YE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YE(Object(r),!0).forEach(function(n){J6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J6(e,t,r){return(t=eU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eU(e){var t=tU(e,"string");return typeof t=="symbol"?t:t+""}function tU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rf=(e,t,r)=>e+(t-e)*r,Zy=e=>{var{from:t,to:r}=e;return t!==r},bD=(e,t,r)=>{var n=kc((i,s)=>{if(Zy(s)){var[c,u]=e(s.from,s.to,s.velocity);return ur(ur({},s),{},{from:c,velocity:u})}return s},t);return r<1?kc((i,s)=>Zy(s)&&n[i]!=null?ur(ur({},s),{},{velocity:Rf(s.velocity,n[i].velocity,r),from:Rf(s.from,n[i].from,r)}):s,t):bD(e,n,r-1)};function rU(e,t,r,n,i,s){var c,u=n.reduce((_,x)=>ur(ur({},_),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),m=()=>kc((_,x)=>x.from,u),h=()=>!Object.values(u).filter(Zy).length,p=null,g=_=>{c||(c=_);var x=_-c,w=x/r.dt;u=bD(r,u,w),i(ur(ur(ur({},e),t),m())),c=_,h()||(p=s.setTimeout(g))};return()=>(p=s.setTimeout(g),()=>{var _;(_=p)===null||_===void 0||_()})}function nU(e,t,r,n,i,s,c){var u=null,m=i.reduce((g,_)=>{var x=e[_],w=t[_];return x==null||w==null?g:ur(ur({},g),{},{[_]:[x,w]})},{}),h,p=g=>{h||(h=g);var _=(g-h)/n,x=kc((j,S)=>Rf(...S,r(_)),m);if(s(ur(ur(ur({},e),t),x)),_<1)u=c.setTimeout(p);else{var w=kc((j,S)=>Rf(...S,r(1)),m);s(ur(ur(ur({},e),t),w))}};return()=>(u=c.setTimeout(p),()=>{var g;(g=u)===null||g===void 0||g()})}const aU=(e,t,r,n,i,s)=>{var c=Q6(e,t);return r==null?()=>(i(ur(ur({},e),t)),()=>{}):r.isStepper===!0?rU(e,t,r,c,i,s):nU(e,t,r,n,c,i,s)};var qf=1e-4,_D=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],xD=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),GE=(e,t)=>r=>{var n=_D(e,t);return xD(n,r)},iU=(e,t)=>r=>{var n=_D(e,t),i=[...n.map((s,c)=>s*c).slice(1),0];return xD(i,r)},oU=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},sU=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=oU(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},lU=(e,t,r,n)=>{var i=GE(e,r),s=GE(t,n),c=iU(e,r),u=h=>h>1?1:h<0?0:h,m=h=>{for(var p=h>1?1:h,g=p,_=0;_<8;++_){var x=i(g)-p,w=c(g);if(Math.abs(x-p)<qf||w<qf)return s(g);g=u(g-x/w)}return s(g)};return m.isStepper=!1,m},VE=function(){return lU(...sU(...arguments))},cU=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,s=(c,u,m)=>{var h=-(c-u)*r,p=m*n,g=m+(h-p)*i/1e3,_=m*i/1e3+c;return Math.abs(_-u)<qf&&Math.abs(g)<qf?[u,0]:[_,g]};return s.isStepper=!0,s.dt=i,s},uU=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return VE(e);case"spring":return cU();default:if(e.split("(")[0]==="cubic-bezier")return VE(e)}return typeof e=="function"?e:null};function dU(e){var t,r=()=>null,n=!1,i=null,s=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var u=c,[m,...h]=u;if(typeof m=="number"){i=e.setTimeout(s.bind(null,h),m);return}s(m),i=e.setTimeout(s.bind(null,h));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,i&&(i(),i=null),s(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class fU{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function mU(){return dU(new fU)}var hU=y.createContext(mU);function pU(e,t){var r=y.useContext(hU);return y.useMemo(()=>t??r(e),[e,t,r])}var gU=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),zm={isSsr:gU()},vU={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},WE={t:0},Mv={t:1};function Wc(e){var t=xr(e,vU),{isActive:r,canBegin:n,duration:i,easing:s,begin:c,onAnimationEnd:u,onAnimationStart:m,children:h}=t,p=r==="auto"?!zm.isSsr:r,g=pU(t.animationId,t.animationManager),[_,x]=y.useState(p?WE:Mv),w=y.useRef(null);return y.useEffect(()=>{p||x(Mv)},[p]),y.useEffect(()=>{if(!p||!n)return Fc;var j=aU(WE,Mv,uU(s),i,x,g.getTimeoutController()),S=()=>{w.current=j()};return g.start([m,c,S,i,u]),()=>{g.stop(),w.current&&w.current(),u()}},[p,n,i,s,c,m,u,g]),h(_.t)}function Xc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(jc(t)),n=y.useRef(e);return n.current!==e&&(r.current=jc(t),n.current=e),r.current}var yU=["radius"],bU=["radius"],XE,ZE,QE,JE,eO,tO,rO,nO,aO,iO;function oO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(r),!0).forEach(function(n){_U(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _U(e,t,r){return(t=xU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xU(e){var t=wU(e,"string");return typeof t=="symbol"?t:t+""}function wU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zf(){return zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zf.apply(null,arguments)}function lO(e,t){if(e==null)return{};var r,n,i=jU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var cO=(e,t,r,n,i)=>{var s=Hi(r),c=Hi(n),u=Math.min(Math.abs(s)/2,Math.abs(c)/2),m=c>=0?1:-1,h=s>=0?1:-1,p=c>=0&&s>=0||c<0&&s<0?1:0,g;if(u>0&&i instanceof Array){for(var _=[0,0,0,0],x=0,w=4;x<w;x++)_[x]=i[x]>u?u:i[x];g=Ft(XE||(XE=fa(["M",",",""])),e,t+m*_[0]),_[0]>0&&(g+=Ft(ZE||(ZE=fa(["A ",",",",0,0,",",",",",""])),_[0],_[0],p,e+h*_[0],t)),g+=Ft(QE||(QE=fa(["L ",",",""])),e+r-h*_[1],t),_[1]>0&&(g+=Ft(JE||(JE=fa(["A ",",",",0,0,",`,
        `,",",""])),_[1],_[1],p,e+r,t+m*_[1])),g+=Ft(eO||(eO=fa(["L ",",",""])),e+r,t+n-m*_[2]),_[2]>0&&(g+=Ft(tO||(tO=fa(["A ",",",",0,0,",`,
        `,",",""])),_[2],_[2],p,e+r-h*_[2],t+n)),g+=Ft(rO||(rO=fa(["L ",",",""])),e+h*_[3],t+n),_[3]>0&&(g+=Ft(nO||(nO=fa(["A ",",",",0,0,",`,
        `,",",""])),_[3],_[3],p,e,t+n-m*_[3])),g+="Z"}else if(u>0&&i===+i&&i>0){var j=Math.min(u,i);g=Ft(aO||(aO=fa(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*j,j,j,p,e+h*j,t,e+r-h*j,t,j,j,p,e+r,t+m*j,e+r,t+n-m*j,j,j,p,e+r-h*j,t+n,e+h*j,t+n,j,j,p,e,t+n-m*j)}else g=Ft(iO||(iO=fa(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return g},uO={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wD=e=>{var t=xr(e,uO),r=y.useRef(null),[n,i]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var U=r.current.getTotalLength();U&&i(U)}catch{}},[]);var{x:s,y:c,width:u,height:m,radius:h,className:p}=t,{animationEasing:g,animationDuration:_,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:j}=t,S=y.useRef(u),O=y.useRef(m),C=y.useRef(s),A=y.useRef(c),k=y.useMemo(()=>({x:s,y:c,width:u,height:m,radius:h}),[s,c,u,m,h]),D=Xc(k,"rectangle-");if(s!==+s||c!==+c||u!==+u||m!==+m||u===0||m===0)return null;var M=st("recharts-rectangle",p);if(!j){var L=Ir(t),{radius:V}=L,re=lO(L,yU);return y.createElement("path",zf({},re,{x:Hi(s),y:Hi(c),width:Hi(u),height:Hi(m),radius:typeof h=="number"?h:void 0,className:M,d:cO(s,c,u,m,h)}))}var ie=S.current,X=O.current,I=C.current,ce=A.current,ge="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),R=yD(["strokeDasharray"],_,typeof g=="string"?g:uO.animationEasing);return y.createElement(Wc,{animationId:D,key:D,canBegin:n>0,duration:_,easing:g,isActive:j,begin:x},U=>{var Q=kt(ie,u,U),B=kt(X,m,U),fe=kt(I,s,U),je=kt(ce,c,U);r.current&&(S.current=Q,O.current=B,C.current=fe,A.current=je);var ee;w?U>0?ee={transition:R,strokeDasharray:q}:ee={strokeDasharray:ge}:ee={strokeDasharray:q};var H=Ir(t),{radius:Ee}=H,Te=lO(H,bU);return y.createElement("path",zf({},Te,{radius:typeof h=="number"?h:void 0,className:M,d:cO(fe,je,Q,B,h),ref:r,style:sO(sO({},ee),t.style)}))})};function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(r),!0).forEach(function(n){SU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SU(e,t,r){return(t=EU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lf=Math.PI/180,CU=e=>e*180/Math.PI,ar=(e,t,r,n)=>({x:e+Math.cos(-Lf*n)*r,y:t+Math.sin(-Lf*n)*r}),jD=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},AU=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return Math.sqrt((r-i)**2+(n-s)**2)},NU=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:s}=t,c=AU({x:r,y:n},{x:i,y:s});if(c<=0)return{radius:c,angle:0};var u=(r-i)/c,m=Math.acos(u);return n>s&&(m=2*Math.PI-m),{radius:c,angle:CU(m),angleInRadian:m}},kU=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:t-s*360,endAngle:r-s*360}},DU=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),s=Math.floor(n/360),c=Math.min(i,s);return e+c*360},TU=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:s}=NU({x:r,y:n},t),{innerRadius:c,outerRadius:u}=t;if(i<c||i>u||i===0)return null;var{startAngle:m,endAngle:h}=kU(t),p=s,g;if(m<=h){for(;p>h;)p-=360;for(;p<m;)p+=360;g=p>=m&&p<=h}else{for(;p>m;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=m}return g?fO(fO({},t),{},{radius:i,angle:DU(p,t)}):null};function SD(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:s}=e,c=ar(t,r,n,i),u=ar(t,r,n,s);return{points:[c,u],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}var mO,hO,pO,gO,vO,yO,bO;function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qy.apply(null,arguments)}function Oo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var PU=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},$d=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:s,isExternal:c,cornerRadius:u,cornerIsExternal:m}=e,h=u*(c?1:-1)+n,p=Math.asin(u/h)/Lf,g=m?i:i+s*p,_=ar(t,r,h,g),x=ar(t,r,n,g),w=m?i-s*p:i,j=ar(t,r,h*Math.cos(p*Lf),w);return{center:_,circleTangency:x,lineTangency:j,theta:p}},ED=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:c}=e,u=PU(s,c),m=s+u,h=ar(t,r,i,s),p=ar(t,r,i,m),g=Ft(mO||(mO=Oo(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,i,i,+(Math.abs(u)>180),+(s>m),p.x,p.y);if(n>0){var _=ar(t,r,n,s),x=ar(t,r,n,m);g+=Ft(hO||(hO=Oo(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,n,n,+(Math.abs(u)>180),+(s<=m),_.x,_.y)}else g+=Ft(pO||(pO=Oo(["L ",","," Z"])),t,r);return g},MU=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:h}=e,p=br(h-m),{circleTangency:g,lineTangency:_,theta:x}=$d({cx:t,cy:r,radius:i,angle:m,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:w,lineTangency:j,theta:S}=$d({cx:t,cy:r,radius:i,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:u}),O=u?Math.abs(m-h):Math.abs(m-h)-x-S;if(O<0)return c?Ft(gO||(gO=Oo(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),_.x,_.y,s,s,s*2,s,s,-s*2):ED({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:m,endAngle:h});var C=Ft(vO||(vO=Oo(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),_.x,_.y,s,s,+(p<0),g.x,g.y,i,i,+(O>180),+(p<0),w.x,w.y,s,s,+(p<0),j.x,j.y);if(n>0){var{circleTangency:A,lineTangency:k,theta:D}=$d({cx:t,cy:r,radius:n,angle:m,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:M,lineTangency:L,theta:V}=$d({cx:t,cy:r,radius:n,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),re=u?Math.abs(m-h):Math.abs(m-h)-D-V;if(re<0&&s===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+=Ft(yO||(yO=Oo(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),L.x,L.y,s,s,+(p<0),M.x,M.y,n,n,+(re>180),+(p>0),A.x,A.y,s,s,+(p<0),k.x,k.y)}else C+=Ft(bO||(bO=Oo(["L",",","Z"])),t,r);return C},RU={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},OD=e=>{var t=xr(e,RU),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:p,className:g}=t;if(s<i||h===p)return null;var _=st("recharts-sector",g),x=s-i,w=Tr(c,x,0,!0),j;return w>0&&Math.abs(h-p)<360?j=MU({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(w,x/2),forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:p}):j=ED({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:h,endAngle:p}),y.createElement("path",Qy({},Ir(t),{className:_,d:j}))};function qU(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(ik(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:c,angle:u}=t,m=ar(n,i,s,u),h=ar(n,i,c,u);return[{x:m.x,y:m.y},{x:h.x,y:h.y}]}return SD(t)}}var Rv={},qv={},zv={},_O;function zU(){return _O||(_O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gk();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(zv)),zv}var xO;function LU(){return xO||(xO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zU();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(qv)),qv}var wO;function IU(){return wO||(wO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vk(),r=LU();function n(i,s,c){c&&typeof c!="number"&&t.isIterateeCall(i,s,c)&&(s=c=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),c=c===void 0?i<s?1:-1:r.toFinite(c);const u=Math.max(Math.ceil((s-i)/(c||1)),0),m=new Array(u);for(let h=0;h<u;h++)m[h]=i,i+=c;return m}e.range=n})(Rv)),Rv}var Lv,jO;function UU(){return jO||(jO=1,Lv=IU().range),Lv}var BU=UU();const CD=ri(BU);function Fi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $U(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function o0(e){let t,r,n;e.length!==2?(t=Fi,r=(u,m)=>Fi(e(u),m),n=(u,m)=>e(u)-m):(t=e===Fi||e===$U?e:HU,r=e,n=e);function i(u,m,h=0,p=u.length){if(h<p){if(t(m,m)!==0)return p;do{const g=h+p>>>1;r(u[g],m)<0?h=g+1:p=g}while(h<p)}return h}function s(u,m,h=0,p=u.length){if(h<p){if(t(m,m)!==0)return p;do{const g=h+p>>>1;r(u[g],m)<=0?h=g+1:p=g}while(h<p)}return h}function c(u,m,h=0,p=u.length){const g=i(u,m,h,p-1);return g>h&&n(u[g-1],m)>-n(u[g],m)?g-1:g}return{left:i,center:c,right:s}}function HU(){return 0}function AD(e){return e===null?NaN:+e}function*FU(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const KU=o0(Fi),Zc=KU.right;o0(AD).center;class SO extends Map{constructor(t,r=VU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(EO(this,t))}has(t){return super.has(EO(this,t))}set(t,r){return super.set(YU(this,t),r)}delete(t){return super.delete(GU(this,t))}}function EO({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function YU({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function GU({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function VU(e){return e!==null&&typeof e=="object"?e.valueOf():e}function WU(e=Fi){if(e===Fi)return ND;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ND(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const XU=Math.sqrt(50),ZU=Math.sqrt(10),QU=Math.sqrt(2);function If(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),c=s>=XU?10:s>=ZU?5:s>=QU?2:1;let u,m,h;return i<0?(h=Math.pow(10,-i)/c,u=Math.round(e*h),m=Math.round(t*h),u/h<e&&++u,m/h>t&&--m,h=-h):(h=Math.pow(10,i)*c,u=Math.round(e/h),m=Math.round(t/h),u*h<e&&++u,m*h>t&&--m),m<u&&.5<=r&&r<2?If(e,t,r*2):[u,m,h]}function Jy(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,c]=n?If(t,e,r):If(e,t,r);if(!(s>=i))return[];const u=s-i+1,m=new Array(u);if(n)if(c<0)for(let h=0;h<u;++h)m[h]=(s-h)/-c;else for(let h=0;h<u;++h)m[h]=(s-h)*c;else if(c<0)for(let h=0;h<u;++h)m[h]=(i+h)/-c;else for(let h=0;h<u;++h)m[h]=(i+h)*c;return m}function eb(e,t,r){return t=+t,e=+e,r=+r,If(e,t,r)[2]}function tb(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?eb(t,e,r):eb(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function OO(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function CO(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function kD(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?ND:WU(i);n>r;){if(n-r>600){const m=n-r+1,h=t-r+1,p=Math.log(m),g=.5*Math.exp(2*p/3),_=.5*Math.sqrt(p*g*(m-g)/m)*(h-m/2<0?-1:1),x=Math.max(r,Math.floor(t-h*g/m+_)),w=Math.min(n,Math.floor(t+(m-h)*g/m+_));kD(e,t,x,w,i)}const s=e[t];let c=r,u=n;for(uc(e,r,t),i(e[n],s)>0&&uc(e,r,n);c<u;){for(uc(e,c,u),++c,--u;i(e[c],s)<0;)++c;for(;i(e[u],s)>0;)--u}i(e[r],s)===0?uc(e,r,u):(++u,uc(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function uc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function JU(e,t,r){if(e=Float64Array.from(FU(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return CO(e);if(t>=1)return OO(e);var n,i=(n-1)*t,s=Math.floor(i),c=OO(kD(e,s).subarray(0,s+1)),u=CO(e.subarray(s+1));return c+(u-c)*(i-s)}}function eB(e,t,r=AD){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),c=+r(e[s],s,e),u=+r(e[s+1],s+1,e);return c+(u-c)*(i-s)}}function tB(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function Bn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function oi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rb=Symbol("implicit");function s0(){var e=new SO,t=[],r=[],n=rb;function i(s){let c=e.get(s);if(c===void 0){if(n!==rb)return n;e.set(s,c=t.push(s)-1)}return r[c%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new SO;for(const c of s)e.has(c)||e.set(c,t.push(c)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return s0(t,r).unknown(n)},Bn.apply(i,arguments),i}function l0(){var e=s0().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,c,u=!1,m=0,h=0,p=.5;delete e.unknown;function g(){var _=t().length,x=i<n,w=x?i:n,j=x?n:i;s=(j-w)/Math.max(1,_-m+h*2),u&&(s=Math.floor(s)),w+=(j-w-s*(_-m))*p,c=s*(1-m),u&&(w=Math.round(w),c=Math.round(c));var S=tB(_).map(function(O){return w+s*O});return r(x?S.reverse():S)}return e.domain=function(_){return arguments.length?(t(_),g()):t()},e.range=function(_){return arguments.length?([n,i]=_,n=+n,i=+i,g()):[n,i]},e.rangeRound=function(_){return[n,i]=_,n=+n,i=+i,u=!0,g()},e.bandwidth=function(){return c},e.step=function(){return s},e.round=function(_){return arguments.length?(u=!!_,g()):u},e.padding=function(_){return arguments.length?(m=Math.min(1,h=+_),g()):m},e.paddingInner=function(_){return arguments.length?(m=Math.min(1,_),g()):m},e.paddingOuter=function(_){return arguments.length?(h=+_,g()):h},e.align=function(_){return arguments.length?(p=Math.max(0,Math.min(1,_)),g()):p},e.copy=function(){return l0(t(),[n,i]).round(u).paddingInner(m).paddingOuter(h).align(p)},Bn.apply(g(),arguments)}function DD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return DD(t())},e}function rB(){return DD(l0.apply(null,arguments).paddingInner(1))}function c0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function TD(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Qc(){}var Dc=.7,Uf=1/Dc,Bs="\\s*([+-]?\\d+)\\s*",Tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ga="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",nB=/^#([0-9a-f]{3,8})$/,aB=new RegExp(`^rgb\\(${Bs},${Bs},${Bs}\\)$`),iB=new RegExp(`^rgb\\(${ga},${ga},${ga}\\)$`),oB=new RegExp(`^rgba\\(${Bs},${Bs},${Bs},${Tc}\\)$`),sB=new RegExp(`^rgba\\(${ga},${ga},${ga},${Tc}\\)$`),lB=new RegExp(`^hsl\\(${Tc},${ga},${ga}\\)$`),cB=new RegExp(`^hsla\\(${Tc},${ga},${ga},${Tc}\\)$`),AO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c0(Qc,Pc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:NO,formatHex:NO,formatHex8:uB,formatHsl:dB,formatRgb:kO,toString:kO});function NO(){return this.rgb().formatHex()}function uB(){return this.rgb().formatHex8()}function dB(){return PD(this).formatHsl()}function kO(){return this.rgb().formatRgb()}function Pc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=nB.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?DO(t):r===3?new Zr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Hd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Hd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=aB.exec(e))?new Zr(t[1],t[2],t[3],1):(t=iB.exec(e))?new Zr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=oB.exec(e))?Hd(t[1],t[2],t[3],t[4]):(t=sB.exec(e))?Hd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lB.exec(e))?MO(t[1],t[2]/100,t[3]/100,1):(t=cB.exec(e))?MO(t[1],t[2]/100,t[3]/100,t[4]):AO.hasOwnProperty(e)?DO(AO[e]):e==="transparent"?new Zr(NaN,NaN,NaN,0):null}function DO(e){return new Zr(e>>16&255,e>>8&255,e&255,1)}function Hd(e,t,r,n){return n<=0&&(e=t=r=NaN),new Zr(e,t,r,n)}function fB(e){return e instanceof Qc||(e=Pc(e)),e?(e=e.rgb(),new Zr(e.r,e.g,e.b,e.opacity)):new Zr}function nb(e,t,r,n){return arguments.length===1?fB(e):new Zr(e,t,r,n??1)}function Zr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}c0(Zr,nb,TD(Qc,{brighter(e){return e=e==null?Uf:Math.pow(Uf,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Dc:Math.pow(Dc,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zr(Do(this.r),Do(this.g),Do(this.b),Bf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TO,formatHex:TO,formatHex8:mB,formatRgb:PO,toString:PO}));function TO(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function mB(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function PO(){const e=Bf(this.opacity);return`${e===1?"rgb(":"rgba("}${Do(this.r)}, ${Do(this.g)}, ${Do(this.b)}${e===1?")":`, ${e})`}`}function Bf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Do(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=Do(e),(e<16?"0":"")+e.toString(16)}function MO(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Qn(e,t,r,n)}function PD(e){if(e instanceof Qn)return new Qn(e.h,e.s,e.l,e.opacity);if(e instanceof Qc||(e=Pc(e)),!e)return new Qn;if(e instanceof Qn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),c=NaN,u=s-i,m=(s+i)/2;return u?(t===s?c=(r-n)/u+(r<n)*6:r===s?c=(n-t)/u+2:c=(t-r)/u+4,u/=m<.5?s+i:2-s-i,c*=60):u=m>0&&m<1?0:c,new Qn(c,u,m,e.opacity)}function hB(e,t,r,n){return arguments.length===1?PD(e):new Qn(e,t,r,n??1)}function Qn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}c0(Qn,hB,TD(Qc,{brighter(e){return e=e==null?Uf:Math.pow(Uf,e),new Qn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Dc:Math.pow(Dc,e),new Qn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Zr(Iv(e>=240?e-240:e+120,i,n),Iv(e,i,n),Iv(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Qn(RO(this.h),Fd(this.s),Fd(this.l),Bf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Bf(this.opacity);return`${e===1?"hsl(":"hsla("}${RO(this.h)}, ${Fd(this.s)*100}%, ${Fd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function RO(e){return e=(e||0)%360,e<0?e+360:e}function Fd(e){return Math.max(0,Math.min(1,e||0))}function Iv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const u0=e=>()=>e;function pB(e,t){return function(r){return e+r*t}}function gB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function vB(e){return(e=+e)==1?MD:function(t,r){return r-t?gB(t,r,e):u0(isNaN(t)?r:t)}}function MD(e,t){var r=t-e;return r?pB(e,r):u0(isNaN(e)?t:e)}const qO=(function e(t){var r=vB(t);function n(i,s){var c=r((i=nb(i)).r,(s=nb(s)).r),u=r(i.g,s.g),m=r(i.b,s.b),h=MD(i.opacity,s.opacity);return function(p){return i.r=c(p),i.g=u(p),i.b=m(p),i.opacity=h(p),i+""}}return n.gamma=e,n})(1);function yB(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function bB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _B(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),c;for(c=0;c<n;++c)i[c]=Js(e[c],t[c]);for(;c<r;++c)s[c]=t[c];return function(u){for(c=0;c<n;++c)s[c]=i[c](u);return s}}function xB(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function $f(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function wB(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Js(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var ab=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uv=new RegExp(ab.source,"g");function jB(e){return function(){return e}}function SB(e){return function(t){return e(t)+""}}function EB(e,t){var r=ab.lastIndex=Uv.lastIndex=0,n,i,s,c=-1,u=[],m=[];for(e=e+"",t=t+"";(n=ab.exec(e))&&(i=Uv.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,m.push({i:c,x:$f(n,i)})),r=Uv.lastIndex;return r<t.length&&(s=t.slice(r),u[c]?u[c]+=s:u[++c]=s),u.length<2?m[0]?SB(m[0].x):jB(t):(t=m.length,function(h){for(var p=0,g;p<t;++p)u[(g=m[p]).i]=g.x(h);return u.join("")})}function Js(e,t){var r=typeof t,n;return t==null||r==="boolean"?u0(t):(r==="number"?$f:r==="string"?(n=Pc(t))?(t=n,qO):EB:t instanceof Pc?qO:t instanceof Date?xB:bB(t)?yB:Array.isArray(t)?_B:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?wB:$f)(e,t)}function d0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function OB(e,t){t===void 0&&(t=e,e=Js);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(c){var u=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return s[u](c-u)}}function CB(e){return function(){return e}}function Hf(e){return+e}var zO=[0,1];function Lr(e){return e}function ib(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:CB(isNaN(t)?NaN:.5)}function AB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function NB(e,t,r){var n=e[0],i=e[1],s=t[0],c=t[1];return i<n?(n=ib(i,n),s=r(c,s)):(n=ib(n,i),s=r(s,c)),function(u){return s(n(u))}}function kB(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)i[c]=ib(e[c],e[c+1]),s[c]=r(t[c],t[c+1]);return function(u){var m=Zc(e,u,1,n)-1;return s[m](i[m](u))}}function Jc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Lm(){var e=zO,t=zO,r=Js,n,i,s,c=Lr,u,m,h;function p(){var _=Math.min(e.length,t.length);return c!==Lr&&(c=AB(e[0],e[_-1])),u=_>2?kB:NB,m=h=null,g}function g(_){return _==null||isNaN(_=+_)?s:(m||(m=u(e.map(n),t,r)))(n(c(_)))}return g.invert=function(_){return c(i((h||(h=u(t,e.map(n),$f)))(_)))},g.domain=function(_){return arguments.length?(e=Array.from(_,Hf),p()):e.slice()},g.range=function(_){return arguments.length?(t=Array.from(_),p()):t.slice()},g.rangeRound=function(_){return t=Array.from(_),r=d0,p()},g.clamp=function(_){return arguments.length?(c=_?!0:Lr,p()):c!==Lr},g.interpolate=function(_){return arguments.length?(r=_,p()):r},g.unknown=function(_){return arguments.length?(s=_,g):s},function(_,x){return n=_,i=x,p()}}function f0(){return Lm()(Lr,Lr)}function DB(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ff(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ys(e){return e=Ff(Math.abs(e)),e?e[1]:NaN}function TB(e,t){return function(r,n){for(var i=r.length,s=[],c=0,u=e[0],m=0;i>0&&u>0&&(m+u+1>n&&(u=Math.max(1,n-m)),s.push(r.substring(i-=u,i+u)),!((m+=u+1)>n));)u=e[c=(c+1)%e.length];return s.reverse().join(t)}}function PB(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var MB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mc(e){if(!(t=MB.exec(e)))throw new Error("invalid format: "+e);var t;return new m0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Mc.prototype=m0.prototype;function m0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}m0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function RB(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var RD;function qB(e,t){var r=Ff(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(RD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=n.length;return s===c?n:s>c?n+new Array(s-c+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Ff(e,Math.max(0,t+s-1))[0]}function LO(e,t){var r=Ff(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const IO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:DB,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>LO(e*100,t),r:LO,s:qB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function UO(e){return e}var BO=Array.prototype.map,$O=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zB(e){var t=e.grouping===void 0||e.thousands===void 0?UO:TB(BO.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?UO:PB(BO.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function h(g){g=Mc(g);var _=g.fill,x=g.align,w=g.sign,j=g.symbol,S=g.zero,O=g.width,C=g.comma,A=g.precision,k=g.trim,D=g.type;D==="n"?(C=!0,D="g"):IO[D]||(A===void 0&&(A=12),k=!0,D="g"),(S||_==="0"&&x==="=")&&(S=!0,_="0",x="=");var M=j==="$"?r:j==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",L=j==="$"?n:/[%p]/.test(D)?c:"",V=IO[D],re=/[defgprs%]/.test(D);A=A===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function ie(X){var I=M,ce=L,ge,q,R;if(D==="c")ce=V(X)+ce,X="";else{X=+X;var U=X<0||1/X<0;if(X=isNaN(X)?m:V(Math.abs(X),A),k&&(X=RB(X)),U&&+X==0&&w!=="+"&&(U=!1),I=(U?w==="("?w:u:w==="-"||w==="("?"":w)+I,ce=(D==="s"?$O[8+RD/3]:"")+ce+(U&&w==="("?")":""),re){for(ge=-1,q=X.length;++ge<q;)if(R=X.charCodeAt(ge),48>R||R>57){ce=(R===46?i+X.slice(ge+1):X.slice(ge))+ce,X=X.slice(0,ge);break}}}C&&!S&&(X=t(X,1/0));var Q=I.length+X.length+ce.length,B=Q<O?new Array(O-Q+1).join(_):"";switch(C&&S&&(X=t(B+X,B.length?O-ce.length:1/0),B=""),x){case"<":X=I+X+ce+B;break;case"=":X=I+B+X+ce;break;case"^":X=B.slice(0,Q=B.length>>1)+I+X+ce+B.slice(Q);break;default:X=B+I+X+ce;break}return s(X)}return ie.toString=function(){return g+""},ie}function p(g,_){var x=h((g=Mc(g),g.type="f",g)),w=Math.max(-8,Math.min(8,Math.floor(Ys(_)/3)))*3,j=Math.pow(10,-w),S=$O[8+w/3];return function(O){return x(j*O)+S}}return{format:h,formatPrefix:p}}var Kd,h0,qD;LB({thousands:",",grouping:[3],currency:["$",""]});function LB(e){return Kd=zB(e),h0=Kd.format,qD=Kd.formatPrefix,Kd}function IB(e){return Math.max(0,-Ys(Math.abs(e)))}function UB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ys(t)/3)))*3-Ys(Math.abs(e)))}function BB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ys(t)-Ys(e))+1}function zD(e,t,r,n){var i=tb(e,t,r),s;switch(n=Mc(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=UB(i,c))&&(n.precision=s),qD(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=BB(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=IB(i))&&(n.precision=s-(n.type==="%")*2);break}}return h0(n)}function Qi(e){var t=e.domain;return e.ticks=function(r){var n=t();return Jy(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return zD(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,c=n[i],u=n[s],m,h,p=10;for(u<c&&(h=c,c=u,u=h,h=i,i=s,s=h);p-- >0;){if(h=eb(c,u,r),h===m)return n[i]=c,n[s]=u,t(n);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;m=h}return e},e}function LD(){var e=f0();return e.copy=function(){return Jc(e,LD())},Bn.apply(e,arguments),Qi(e)}function ID(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Hf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return ID(e).unknown(t)},e=arguments.length?Array.from(e,Hf):[0,1],Qi(r)}function UD(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],c;return s<i&&(c=r,r=n,n=c,c=i,i=s,s=c),e[r]=t.floor(i),e[n]=t.ceil(s),e}function HO(e){return Math.log(e)}function FO(e){return Math.exp(e)}function $B(e){return-Math.log(-e)}function HB(e){return-Math.exp(-e)}function FB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function KB(e){return e===10?FB:e===Math.E?Math.exp:t=>Math.pow(e,t)}function YB(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function KO(e){return(t,r)=>-e(-t,r)}function p0(e){const t=e(HO,FO),r=t.domain;let n=10,i,s;function c(){return i=YB(n),s=KB(n),r()[0]<0?(i=KO(i),s=KO(s),e($B,HB)):e(HO,FO),t}return t.base=function(u){return arguments.length?(n=+u,c()):n},t.domain=function(u){return arguments.length?(r(u),c()):r()},t.ticks=u=>{const m=r();let h=m[0],p=m[m.length-1];const g=p<h;g&&([h,p]=[p,h]);let _=i(h),x=i(p),w,j;const S=u==null?10:+u;let O=[];if(!(n%1)&&x-_<S){if(_=Math.floor(_),x=Math.ceil(x),h>0){for(;_<=x;++_)for(w=1;w<n;++w)if(j=_<0?w/s(-_):w*s(_),!(j<h)){if(j>p)break;O.push(j)}}else for(;_<=x;++_)for(w=n-1;w>=1;--w)if(j=_>0?w/s(-_):w*s(_),!(j<h)){if(j>p)break;O.push(j)}O.length*2<S&&(O=Jy(h,p,S))}else O=Jy(_,x,Math.min(x-_,S)).map(s);return g?O.reverse():O},t.tickFormat=(u,m)=>{if(u==null&&(u=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Mc(m)).precision==null&&(m.trim=!0),m=h0(m)),u===1/0)return m;const h=Math.max(1,n*u/t.ticks().length);return p=>{let g=p/s(Math.round(i(p)));return g*n<n-.5&&(g*=n),g<=h?m(p):""}},t.nice=()=>r(UD(r(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function BD(){const e=p0(Lm()).domain([1,10]);return e.copy=()=>Jc(e,BD()).base(e.base()),Bn.apply(e,arguments),e}function YO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function GO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function g0(e){var t=1,r=e(YO(t),GO(t));return r.constant=function(n){return arguments.length?e(YO(t=+n),GO(t)):t},Qi(r)}function $D(){var e=g0(Lm());return e.copy=function(){return Jc(e,$D()).constant(e.constant())},Bn.apply(e,arguments)}function VO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function GB(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function VB(e){return e<0?-e*e:e*e}function v0(e){var t=e(Lr,Lr),r=1;function n(){return r===1?e(Lr,Lr):r===.5?e(GB,VB):e(VO(r),VO(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Qi(t)}function y0(){var e=v0(Lm());return e.copy=function(){return Jc(e,y0()).exponent(e.exponent())},Bn.apply(e,arguments),e}function WB(){return y0.apply(null,arguments).exponent(.5)}function WO(e){return Math.sign(e)*e*e}function XB(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function HD(){var e=f0(),t=[0,1],r=!1,n;function i(s){var c=XB(e(s));return isNaN(c)?n:r?Math.round(c):c}return i.invert=function(s){return e.invert(WO(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Hf)).map(WO)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return HD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Bn.apply(i,arguments),Qi(i)}function FD(){var e=[],t=[],r=[],n;function i(){var c=0,u=Math.max(1,t.length);for(r=new Array(u-1);++c<u;)r[c-1]=eB(e,c/u);return s}function s(c){return c==null||isNaN(c=+c)?n:t[Zc(r,c)]}return s.invertExtent=function(c){var u=t.indexOf(c);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},s.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let u of c)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Fi),i()},s.range=function(c){return arguments.length?(t=Array.from(c),i()):t.slice()},s.unknown=function(c){return arguments.length?(n=c,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return FD().domain(e).range(t).unknown(n)},Bn.apply(s,arguments)}function KD(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function c(m){return m!=null&&m<=m?i[Zc(n,m,0,r)]:s}function u(){var m=-1;for(n=new Array(r);++m<r;)n[m]=((m+1)*t-(m-r)*e)/(r+1);return c}return c.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,u()):[e,t]},c.range=function(m){return arguments.length?(r=(i=Array.from(m)).length-1,u()):i.slice()},c.invertExtent=function(m){var h=i.indexOf(m);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},c.unknown=function(m){return arguments.length&&(s=m),c},c.thresholds=function(){return n.slice()},c.copy=function(){return KD().domain([e,t]).range(i).unknown(s)},Bn.apply(Qi(c),arguments)}function YD(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[Zc(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var c=t.indexOf(s);return[e[c-1],e[c]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return YD().domain(e).range(t).unknown(r)},Bn.apply(i,arguments)}const Bv=new Date,$v=new Date;function fr(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const c=i(s),u=i.ceil(s);return s-c<u-s?c:u},i.offset=(s,c)=>(t(s=new Date(+s),c==null?1:Math.floor(c)),s),i.range=(s,c,u)=>{const m=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<c)||!(u>0))return m;let h;do m.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<c);return m},i.filter=s=>fr(c=>{if(c>=c)for(;e(c),!s(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;t(c,-1),!s(c););else for(;--u>=0;)for(;t(c,1),!s(c););}),r&&(i.count=(s,c)=>(Bv.setTime(+s),$v.setTime(+c),e(Bv),e($v),Math.floor(r(Bv,$v))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?c=>n(c)%s===0:c=>i.count(0,c)%s===0):i)),i}const Kf=fr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Kf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Kf);Kf.range;const Fa=1e3,zn=Fa*60,Ka=zn*60,Za=Ka*24,b0=Za*7,XO=Za*30,Hv=Za*365,Ao=fr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Fa)},(e,t)=>(t-e)/Fa,e=>e.getUTCSeconds());Ao.range;const _0=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fa)},(e,t)=>{e.setTime(+e+t*zn)},(e,t)=>(t-e)/zn,e=>e.getMinutes());_0.range;const x0=fr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zn)},(e,t)=>(t-e)/zn,e=>e.getUTCMinutes());x0.range;const w0=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fa-e.getMinutes()*zn)},(e,t)=>{e.setTime(+e+t*Ka)},(e,t)=>(t-e)/Ka,e=>e.getHours());w0.range;const j0=fr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ka)},(e,t)=>(t-e)/Ka,e=>e.getUTCHours());j0.range;const eu=fr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zn)/Za,e=>e.getDate()-1);eu.range;const Im=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Za,e=>e.getUTCDate()-1);Im.range;const GD=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Za,e=>Math.floor(e/Za));GD.range;function Go(e){return fr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*zn)/b0)}const Um=Go(0),Yf=Go(1),ZB=Go(2),QB=Go(3),Gs=Go(4),JB=Go(5),e8=Go(6);Um.range;Yf.range;ZB.range;QB.range;Gs.range;JB.range;e8.range;function Vo(e){return fr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/b0)}const Bm=Vo(0),Gf=Vo(1),t8=Vo(2),r8=Vo(3),Vs=Vo(4),n8=Vo(5),a8=Vo(6);Bm.range;Gf.range;t8.range;r8.range;Vs.range;n8.range;a8.range;const S0=fr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());S0.range;const E0=fr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());E0.range;const Qa=fr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Qa.range;const Ja=fr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ja.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ja.range;function VD(e,t,r,n,i,s){const c=[[Ao,1,Fa],[Ao,5,5*Fa],[Ao,15,15*Fa],[Ao,30,30*Fa],[s,1,zn],[s,5,5*zn],[s,15,15*zn],[s,30,30*zn],[i,1,Ka],[i,3,3*Ka],[i,6,6*Ka],[i,12,12*Ka],[n,1,Za],[n,2,2*Za],[r,1,b0],[t,1,XO],[t,3,3*XO],[e,1,Hv]];function u(h,p,g){const _=p<h;_&&([h,p]=[p,h]);const x=g&&typeof g.range=="function"?g:m(h,p,g),w=x?x.range(h,+p+1):[];return _?w.reverse():w}function m(h,p,g){const _=Math.abs(p-h)/g,x=o0(([,,S])=>S).right(c,_);if(x===c.length)return e.every(tb(h/Hv,p/Hv,g));if(x===0)return Kf.every(Math.max(tb(h,p,g),1));const[w,j]=c[_/c[x-1][2]<c[x][2]/_?x-1:x];return w.every(j)}return[u,m]}const[i8,o8]=VD(Ja,E0,Bm,GD,j0,x0),[s8,l8]=VD(Qa,S0,Um,eu,w0,_0);function Fv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Kv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function dc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function c8(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,c=e.shortDays,u=e.months,m=e.shortMonths,h=fc(i),p=mc(i),g=fc(s),_=mc(s),x=fc(c),w=mc(c),j=fc(u),S=mc(u),O=fc(m),C=mc(m),A={a:U,A:Q,b:B,B:fe,c:null,d:rC,e:rC,f:T8,g:$8,G:F8,H:N8,I:k8,j:D8,L:WD,m:P8,M:M8,p:je,q:ee,Q:iC,s:oC,S:R8,u:q8,U:z8,V:L8,w:I8,W:U8,x:null,X:null,y:B8,Y:H8,Z:K8,"%":aC},k={a:H,A:Ee,b:Te,B:Ie,c:null,d:nC,e:nC,f:W8,g:i$,G:s$,H:Y8,I:G8,j:V8,L:ZD,m:X8,M:Z8,p:pe,q:ze,Q:iC,s:oC,S:Q8,u:J8,U:e$,V:t$,w:r$,W:n$,x:null,X:null,y:a$,Y:o$,Z:l$,"%":aC},D={a:ie,A:X,b:I,B:ce,c:ge,d:eC,e:eC,f:E8,g:JO,G:QO,H:tC,I:tC,j:x8,L:S8,m:_8,M:w8,p:re,q:b8,Q:C8,s:A8,S:j8,u:h8,U:p8,V:g8,w:m8,W:v8,x:q,X:R,y:JO,Y:QO,Z:y8,"%":O8};A.x=M(r,A),A.X=M(n,A),A.c=M(t,A),k.x=M(r,k),k.X=M(n,k),k.c=M(t,k);function M(J,we){return function(xe){var ae=[],He=-1,ve=0,Ne=J.length,Me,jt,Re;for(xe instanceof Date||(xe=new Date(+xe));++He<Ne;)J.charCodeAt(He)===37&&(ae.push(J.slice(ve,He)),(jt=ZO[Me=J.charAt(++He)])!=null?Me=J.charAt(++He):jt=Me==="e"?" ":"0",(Re=we[Me])&&(Me=Re(xe,jt)),ae.push(Me),ve=He+1);return ae.push(J.slice(ve,He)),ae.join("")}}function L(J,we){return function(xe){var ae=dc(1900,void 0,1),He=V(ae,J,xe+="",0),ve,Ne;if(He!=xe.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(we&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(ve=Kv(dc(ae.y,0,1)),Ne=ve.getUTCDay(),ve=Ne>4||Ne===0?Gf.ceil(ve):Gf(ve),ve=Im.offset(ve,(ae.V-1)*7),ae.y=ve.getUTCFullYear(),ae.m=ve.getUTCMonth(),ae.d=ve.getUTCDate()+(ae.w+6)%7):(ve=Fv(dc(ae.y,0,1)),Ne=ve.getDay(),ve=Ne>4||Ne===0?Yf.ceil(ve):Yf(ve),ve=eu.offset(ve,(ae.V-1)*7),ae.y=ve.getFullYear(),ae.m=ve.getMonth(),ae.d=ve.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),Ne="Z"in ae?Kv(dc(ae.y,0,1)).getUTCDay():Fv(dc(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(Ne+5)%7:ae.w+ae.U*7-(Ne+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,Kv(ae)):Fv(ae)}}function V(J,we,xe,ae){for(var He=0,ve=we.length,Ne=xe.length,Me,jt;He<ve;){if(ae>=Ne)return-1;if(Me=we.charCodeAt(He++),Me===37){if(Me=we.charAt(He++),jt=D[Me in ZO?we.charAt(He++):Me],!jt||(ae=jt(J,xe,ae))<0)return-1}else if(Me!=xe.charCodeAt(ae++))return-1}return ae}function re(J,we,xe){var ae=h.exec(we.slice(xe));return ae?(J.p=p.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function ie(J,we,xe){var ae=x.exec(we.slice(xe));return ae?(J.w=w.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function X(J,we,xe){var ae=g.exec(we.slice(xe));return ae?(J.w=_.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function I(J,we,xe){var ae=O.exec(we.slice(xe));return ae?(J.m=C.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function ce(J,we,xe){var ae=j.exec(we.slice(xe));return ae?(J.m=S.get(ae[0].toLowerCase()),xe+ae[0].length):-1}function ge(J,we,xe){return V(J,t,we,xe)}function q(J,we,xe){return V(J,r,we,xe)}function R(J,we,xe){return V(J,n,we,xe)}function U(J){return c[J.getDay()]}function Q(J){return s[J.getDay()]}function B(J){return m[J.getMonth()]}function fe(J){return u[J.getMonth()]}function je(J){return i[+(J.getHours()>=12)]}function ee(J){return 1+~~(J.getMonth()/3)}function H(J){return c[J.getUTCDay()]}function Ee(J){return s[J.getUTCDay()]}function Te(J){return m[J.getUTCMonth()]}function Ie(J){return u[J.getUTCMonth()]}function pe(J){return i[+(J.getUTCHours()>=12)]}function ze(J){return 1+~~(J.getUTCMonth()/3)}return{format:function(J){var we=M(J+="",A);return we.toString=function(){return J},we},parse:function(J){var we=L(J+="",!1);return we.toString=function(){return J},we},utcFormat:function(J){var we=M(J+="",k);return we.toString=function(){return J},we},utcParse:function(J){var we=L(J+="",!0);return we.toString=function(){return J},we}}}var ZO={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,u8=/^%/,d8=/[\\^$*+?|[\]().{}]/g;function at(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function f8(e){return e.replace(d8,"\\$&")}function fc(e){return new RegExp("^(?:"+e.map(f8).join("|")+")","i")}function mc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function m8(e,t,r){var n=wr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function h8(e,t,r){var n=wr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function p8(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function g8(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function v8(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function QO(e,t,r){var n=wr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function JO(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function y8(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function b8(e,t,r){var n=wr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function _8(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function eC(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function x8(e,t,r){var n=wr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function tC(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function w8(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function j8(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function S8(e,t,r){var n=wr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function E8(e,t,r){var n=wr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function O8(e,t,r){var n=u8.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function C8(e,t,r){var n=wr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function A8(e,t,r){var n=wr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function rC(e,t){return at(e.getDate(),t,2)}function N8(e,t){return at(e.getHours(),t,2)}function k8(e,t){return at(e.getHours()%12||12,t,2)}function D8(e,t){return at(1+eu.count(Qa(e),e),t,3)}function WD(e,t){return at(e.getMilliseconds(),t,3)}function T8(e,t){return WD(e,t)+"000"}function P8(e,t){return at(e.getMonth()+1,t,2)}function M8(e,t){return at(e.getMinutes(),t,2)}function R8(e,t){return at(e.getSeconds(),t,2)}function q8(e){var t=e.getDay();return t===0?7:t}function z8(e,t){return at(Um.count(Qa(e)-1,e),t,2)}function XD(e){var t=e.getDay();return t>=4||t===0?Gs(e):Gs.ceil(e)}function L8(e,t){return e=XD(e),at(Gs.count(Qa(e),e)+(Qa(e).getDay()===4),t,2)}function I8(e){return e.getDay()}function U8(e,t){return at(Yf.count(Qa(e)-1,e),t,2)}function B8(e,t){return at(e.getFullYear()%100,t,2)}function $8(e,t){return e=XD(e),at(e.getFullYear()%100,t,2)}function H8(e,t){return at(e.getFullYear()%1e4,t,4)}function F8(e,t){var r=e.getDay();return e=r>=4||r===0?Gs(e):Gs.ceil(e),at(e.getFullYear()%1e4,t,4)}function K8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function nC(e,t){return at(e.getUTCDate(),t,2)}function Y8(e,t){return at(e.getUTCHours(),t,2)}function G8(e,t){return at(e.getUTCHours()%12||12,t,2)}function V8(e,t){return at(1+Im.count(Ja(e),e),t,3)}function ZD(e,t){return at(e.getUTCMilliseconds(),t,3)}function W8(e,t){return ZD(e,t)+"000"}function X8(e,t){return at(e.getUTCMonth()+1,t,2)}function Z8(e,t){return at(e.getUTCMinutes(),t,2)}function Q8(e,t){return at(e.getUTCSeconds(),t,2)}function J8(e){var t=e.getUTCDay();return t===0?7:t}function e$(e,t){return at(Bm.count(Ja(e)-1,e),t,2)}function QD(e){var t=e.getUTCDay();return t>=4||t===0?Vs(e):Vs.ceil(e)}function t$(e,t){return e=QD(e),at(Vs.count(Ja(e),e)+(Ja(e).getUTCDay()===4),t,2)}function r$(e){return e.getUTCDay()}function n$(e,t){return at(Gf.count(Ja(e)-1,e),t,2)}function a$(e,t){return at(e.getUTCFullYear()%100,t,2)}function i$(e,t){return e=QD(e),at(e.getUTCFullYear()%100,t,2)}function o$(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function s$(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Vs(e):Vs.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function l$(){return"+0000"}function aC(){return"%"}function iC(e){return+e}function oC(e){return Math.floor(+e/1e3)}var Ms,JD,eT;c$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function c$(e){return Ms=c8(e),JD=Ms.format,Ms.parse,eT=Ms.utcFormat,Ms.utcParse,Ms}function u$(e){return new Date(e)}function d$(e){return e instanceof Date?+e:+new Date(+e)}function O0(e,t,r,n,i,s,c,u,m,h){var p=f0(),g=p.invert,_=p.domain,x=h(".%L"),w=h(":%S"),j=h("%I:%M"),S=h("%I %p"),O=h("%a %d"),C=h("%b %d"),A=h("%B"),k=h("%Y");function D(M){return(m(M)<M?x:u(M)<M?w:c(M)<M?j:s(M)<M?S:n(M)<M?i(M)<M?O:C:r(M)<M?A:k)(M)}return p.invert=function(M){return new Date(g(M))},p.domain=function(M){return arguments.length?_(Array.from(M,d$)):_().map(u$)},p.ticks=function(M){var L=_();return e(L[0],L[L.length-1],M??10)},p.tickFormat=function(M,L){return L==null?D:h(L)},p.nice=function(M){var L=_();return(!M||typeof M.range!="function")&&(M=t(L[0],L[L.length-1],M??10)),M?_(UD(L,M)):p},p.copy=function(){return Jc(p,O0(e,t,r,n,i,s,c,u,m,h))},p}function f$(){return Bn.apply(O0(s8,l8,Qa,S0,Um,eu,w0,_0,Ao,JD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function m$(){return Bn.apply(O0(i8,o8,Ja,E0,Bm,Im,j0,x0,Ao,eT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function $m(){var e=0,t=1,r,n,i,s,c=Lr,u=!1,m;function h(g){return g==null||isNaN(g=+g)?m:c(i===0?.5:(g=(s(g)-r)*i,u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(_){var x,w;return arguments.length?([x,w]=_,c=g(x,w),h):[c(0),c(1)]}}return h.range=p(Js),h.rangeRound=p(d0),h.unknown=function(g){return arguments.length?(m=g,h):m},function(g){return s=g,r=g(e),n=g(t),i=r===n?0:1/(n-r),h}}function Ji(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function tT(){var e=Qi($m()(Lr));return e.copy=function(){return Ji(e,tT())},oi.apply(e,arguments)}function rT(){var e=p0($m()).domain([1,10]);return e.copy=function(){return Ji(e,rT()).base(e.base())},oi.apply(e,arguments)}function nT(){var e=g0($m());return e.copy=function(){return Ji(e,nT()).constant(e.constant())},oi.apply(e,arguments)}function C0(){var e=v0($m());return e.copy=function(){return Ji(e,C0()).exponent(e.exponent())},oi.apply(e,arguments)}function h$(){return C0.apply(null,arguments).exponent(.5)}function aT(){var e=[],t=Lr;function r(n){if(n!=null&&!isNaN(n=+n))return t((Zc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Fi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>JU(e,s/n))},r.copy=function(){return aT(t).domain(e)},oi.apply(r,arguments)}function Hm(){var e=0,t=.5,r=1,n=1,i,s,c,u,m,h=Lr,p,g=!1,_;function x(j){return isNaN(j=+j)?_:(j=.5+((j=+p(j))-s)*(n*j<n*s?u:m),h(g?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,i=p(e=+e),s=p(t=+t),c=p(r=+r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(g=!!j,x):g},x.interpolator=function(j){return arguments.length?(h=j,x):h};function w(j){return function(S){var O,C,A;return arguments.length?([O,C,A]=S,h=OB(j,[O,C,A]),x):[h(0),h(.5),h(1)]}}return x.range=w(Js),x.rangeRound=w(d0),x.unknown=function(j){return arguments.length?(_=j,x):_},function(j){return p=j,i=j(e),s=j(t),c=j(r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x}}function iT(){var e=Qi(Hm()(Lr));return e.copy=function(){return Ji(e,iT())},oi.apply(e,arguments)}function oT(){var e=p0(Hm()).domain([.1,1,10]);return e.copy=function(){return Ji(e,oT()).base(e.base())},oi.apply(e,arguments)}function sT(){var e=g0(Hm());return e.copy=function(){return Ji(e,sT()).constant(e.constant())},oi.apply(e,arguments)}function A0(){var e=v0(Hm());return e.copy=function(){return Ji(e,A0()).exponent(e.exponent())},oi.apply(e,arguments)}function p$(){return A0.apply(null,arguments).exponent(.5)}const yc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:l0,scaleDiverging:iT,scaleDivergingLog:oT,scaleDivergingPow:A0,scaleDivergingSqrt:p$,scaleDivergingSymlog:sT,scaleIdentity:ID,scaleImplicit:rb,scaleLinear:LD,scaleLog:BD,scaleOrdinal:s0,scalePoint:rB,scalePow:y0,scaleQuantile:FD,scaleQuantize:KD,scaleRadial:HD,scaleSequential:tT,scaleSequentialLog:rT,scaleSequentialPow:C0,scaleSequentialQuantile:aT,scaleSequentialSqrt:h$,scaleSequentialSymlog:nT,scaleSqrt:WB,scaleSymlog:$D,scaleThreshold:YD,scaleTime:f$,scaleUtc:m$,tickFormat:zD},Symbol.toStringTag,{value:"Module"}));var si=e=>e.chartData,Fm=W([si],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),N0=(e,t,r,n)=>n?Fm(e):si(e),g$=(e,t,r)=>r?Fm(e):si(e);function Yi(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zt(t)&&zt(r))return!0}return!1}function sC(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function lT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,s;if(zt(r))i=r;else if(typeof r=="function")return;if(zt(n))s=n;else if(typeof n=="function")return;var c=[i,s];if(Yi(c))return c}}function v$(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Yi(n))return sC(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,c,u;if(i==="auto")t!=null&&(c=Math.min(...t));else if(ke(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[0]))}catch{}else if(typeof i=="string"&&_E.test(i)){var m=_E.exec(i);if(m==null||m[1]==null||t==null)c=void 0;else{var h=+m[1];c=t[0]-h}}else c=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(ke(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&xE.test(s)){var p=xE.exec(s);if(p==null||p[1]==null||t==null)u=void 0;else{var g=+p[1];u=t[1]+g}}else u=t?.[1];var _=[c,u];if(Yi(_))return t==null?_:sC(_,t,r)}}}var el=1e9,y$={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},D0,Dt=!0,Un="[DecimalError] ",To=Un+"Invalid argument: ",k0=Un+"Exponent out of range: ",tl=Math.floor,So=Math.pow,b$=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hn,yr=1e7,Ot=7,cT=9007199254740991,Vf=tl(cT/Ot),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ot;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(e){return Ya(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,r=t.constructor;return _t(Ya(t,new r(e),0,1),r.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return or(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(hn))throw Error(Un+"NaN");if(r.s<1)throw Error(Un+(r.s?"NaN":"-Infinity"));return r.eq(hn)?new n(0):(Dt=!1,t=Ya(Rc(r,s),Rc(e,s),s),Dt=!0,_t(t,i))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?fT(t,e):uT(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Un+"NaN");return r.s?(Dt=!1,t=Ya(r,e,0,1).times(e),Dt=!0,r.minus(t)):_t(new n(r),i)};Ce.naturalExponential=Ce.exp=function(){return dT(this)};Ce.naturalLogarithm=Ce.ln=function(){return Rc(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uT(t,e):fT(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(To+e);if(t=or(i)+1,n=i.d.length-1,r=n*Ot+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ce.squareRoot=Ce.sqrt=function(){var e,t,r,n,i,s,c,u=this,m=u.constructor;if(u.s<1){if(!u.s)return new m(0);throw Error(Un+"NaN")}for(e=or(u),Dt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ha(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=tl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(i.toString()),r=m.precision,i=c=r+3;;)if(s=n,n=s.plus(Ya(u,s,c+2)).times(.5),ha(s.d).slice(0,c)===(t=ha(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),i==c&&t=="4999"){if(_t(s,r+1,0),s.times(s).eq(u)){n=s;break}}else if(t!="9999")break;c+=4}return Dt=!0,_t(n,r)};Ce.times=Ce.mul=function(e){var t,r,n,i,s,c,u,m,h,p=this,g=p.constructor,_=p.d,x=(e=new g(e)).d;if(!p.s||!e.s)return new g(0);for(e.s*=p.s,r=p.e+e.e,m=_.length,h=x.length,m<h&&(s=_,_=x,x=s,c=m,m=h,h=c),s=[],c=m+h,n=c;n--;)s.push(0);for(n=h;--n>=0;){for(t=0,i=m+n;i>n;)u=s[i]+x[n]*_[i-n-1]+t,s[i--]=u%yr|0,t=u/yr|0;s[i]=(s[i]+t)%yr|0}for(;!s[--c];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Dt?_t(e,g.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ba(e,0,el),t===void 0?t=n.rounding:ba(t,0,8),_t(r,e+or(r)+1,t))};Ce.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Bo(n,!0):(ba(e,0,el),t===void 0?t=i.rounding:ba(t,0,8),n=_t(new i(n),e+1,t),r=Bo(n,!0,e+1)),r};Ce.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?Bo(i):(ba(e,0,el),t===void 0?t=s.rounding:ba(t,0,8),n=_t(new s(i),e+or(i)+1,t),r=Bo(n.abs(),!1,e+or(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return _t(new t(e),or(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,r,n,i,s,c,u=this,m=u.constructor,h=12,p=+(e=new m(e));if(!e.s)return new m(hn);if(u=new m(u),!u.s){if(e.s<1)throw Error(Un+"Infinity");return u}if(u.eq(hn))return u;if(n=m.precision,e.eq(hn))return _t(u,n);if(t=e.e,r=e.d.length-1,c=t>=r,s=u.s,c){if((r=p<0?-p:p)<=cT){for(i=new m(hn),t=Math.ceil(n/Ot+4),Dt=!1;r%2&&(i=i.times(u),cC(i.d,t)),r=tl(r/2),r!==0;)u=u.times(u),cC(u.d,t);return Dt=!0,e.s<0?new m(hn).div(i):_t(i,n)}}else if(s<0)throw Error(Un+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Dt=!1,i=e.times(Rc(u,n+h)),Dt=!0,i=dT(i),i.s=s,i};Ce.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=or(i),n=Bo(i,r<=s.toExpNeg||r>=s.toExpPos)):(ba(e,1,el),t===void 0?t=s.rounding:ba(t,0,8),i=_t(new s(i),e,t),r=or(i),n=Bo(i,e<=r||r<=s.toExpNeg,e)),n};Ce.toSignificantDigits=Ce.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ba(e,1,el),t===void 0?t=n.rounding:ba(t,0,8)),_t(new n(r),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=or(e),r=e.constructor;return Bo(e,t<=r.toExpNeg||t>=r.toExpPos)};function uT(e,t){var r,n,i,s,c,u,m,h,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),Dt?_t(t,g):t;if(m=e.d,h=t.d,c=e.e,i=t.e,m=m.slice(),s=c-i,s){for(s<0?(n=m,s=-s,u=h.length):(n=h,i=c,u=m.length),c=Math.ceil(g/Ot),u=c>u?c+1:u+1,s>u&&(s=u,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(u=m.length,s=h.length,u-s<0&&(s=u,n=h,h=m,m=n),r=0;s;)r=(m[--s]=m[s]+h[s]+r)/yr|0,m[s]%=yr;for(r&&(m.unshift(r),++i),u=m.length;m[--u]==0;)m.pop();return t.d=m,t.e=i,Dt?_t(t,g):t}function ba(e,t,r){if(e!==~~e||e<t||e>r)throw Error(To+e)}function ha(e){var t,r,n,i=e.length-1,s="",c=e[0];if(i>0){for(s+=c,t=1;t<i;t++)n=e[t]+"",r=Ot-n.length,r&&(s+=Ii(r)),s+=n;c=e[t],n=c+"",r=Ot-n.length,r&&(s+=Ii(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var Ya=(function(){function e(n,i){var s,c=0,u=n.length;for(n=n.slice();u--;)s=n[u]*i+c,n[u]=s%yr|0,c=s/yr|0;return c&&n.unshift(c),n}function t(n,i,s,c){var u,m;if(s!=c)m=s>c?1:-1;else for(u=m=0;u<s;u++)if(n[u]!=i[u]){m=n[u]>i[u]?1:-1;break}return m}function r(n,i,s){for(var c=0;s--;)n[s]-=c,c=n[s]<i[s]?1:0,n[s]=c*yr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,c){var u,m,h,p,g,_,x,w,j,S,O,C,A,k,D,M,L,V,re=n.constructor,ie=n.s==i.s?1:-1,X=n.d,I=i.d;if(!n.s)return new re(n);if(!i.s)throw Error(Un+"Division by zero");for(m=n.e-i.e,L=I.length,D=X.length,x=new re(ie),w=x.d=[],h=0;I[h]==(X[h]||0);)++h;if(I[h]>(X[h]||0)&&--m,s==null?C=s=re.precision:c?C=s+(or(n)-or(i))+1:C=s,C<0)return new re(0);if(C=C/Ot+2|0,h=0,L==1)for(p=0,I=I[0],C++;(h<D||p)&&C--;h++)A=p*yr+(X[h]||0),w[h]=A/I|0,p=A%I|0;else{for(p=yr/(I[0]+1)|0,p>1&&(I=e(I,p),X=e(X,p),L=I.length,D=X.length),k=L,j=X.slice(0,L),S=j.length;S<L;)j[S++]=0;V=I.slice(),V.unshift(0),M=I[0],I[1]>=yr/2&&++M;do p=0,u=t(I,j,L,S),u<0?(O=j[0],L!=S&&(O=O*yr+(j[1]||0)),p=O/M|0,p>1?(p>=yr&&(p=yr-1),g=e(I,p),_=g.length,S=j.length,u=t(g,j,_,S),u==1&&(p--,r(g,L<_?V:I,_))):(p==0&&(u=p=1),g=I.slice()),_=g.length,_<S&&g.unshift(0),r(j,g,S),u==-1&&(S=j.length,u=t(I,j,L,S),u<1&&(p++,r(j,L<S?V:I,S))),S=j.length):u===0&&(p++,j=[0]),w[h++]=p,u&&j[0]?j[S++]=X[k]||0:(j=[X[k]],S=1);while((k++<D||j[0]!==void 0)&&C--)}return w[0]||w.shift(),x.e=m,_t(x,c?s+or(x)+1:s)}})();function dT(e,t){var r,n,i,s,c,u,m=0,h=0,p=e.constructor,g=p.precision;if(or(e)>16)throw Error(k0+or(e));if(!e.s)return new p(hn);for(Dt=!1,u=g,c=new p(.03125);e.abs().gte(.1);)e=e.times(c),h+=5;for(n=Math.log(So(2,h))/Math.LN10*2+5|0,u+=n,r=i=s=new p(hn),p.precision=u;;){if(i=_t(i.times(e),u),r=r.times(++m),c=s.plus(Ya(i,r,u)),ha(c.d).slice(0,u)===ha(s.d).slice(0,u)){for(;h--;)s=_t(s.times(s),u);return p.precision=g,t==null?(Dt=!0,_t(s,g)):s}s=c}}function or(e){for(var t=e.e*Ot,r=e.d[0];r>=10;r/=10)t++;return t}function Yv(e,t,r){if(t>e.LN10.sd())throw Dt=!0,r&&(e.precision=r),Error(Un+"LN10 precision limit exceeded");return _t(new e(e.LN10),t)}function Ii(e){for(var t="";e--;)t+="0";return t}function Rc(e,t){var r,n,i,s,c,u,m,h,p,g=1,_=10,x=e,w=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(Un+(x.s?"NaN":"-Infinity"));if(x.eq(hn))return new j(0);if(t==null?(Dt=!1,h=S):h=t,x.eq(10))return t==null&&(Dt=!0),Yv(j,h);if(h+=_,j.precision=h,r=ha(w),n=r.charAt(0),s=or(x),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=ha(x.d),n=r.charAt(0),g++;s=or(x),n>1?(x=new j("0."+r),s++):x=new j(n+"."+r.slice(1))}else return m=Yv(j,h+2,S).times(s+""),x=Rc(new j(n+"."+r.slice(1)),h-_).plus(m),j.precision=S,t==null?(Dt=!0,_t(x,S)):x;for(u=c=x=Ya(x.minus(hn),x.plus(hn),h),p=_t(x.times(x),h),i=3;;){if(c=_t(c.times(p),h),m=u.plus(Ya(c,new j(i),h)),ha(m.d).slice(0,h)===ha(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(Yv(j,h+2,S).times(s+""))),u=Ya(u,new j(g),h),j.precision=S,t==null?(Dt=!0,_t(u,S)):u;u=m,i+=2}}function lC(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=tl(r/Ot),e.d=[],n=(r+1)%Ot,r<0&&(n+=Ot),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ot;n<i;)e.d.push(+t.slice(n,n+=Ot));t=t.slice(n),n=Ot-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Dt&&(e.e>Vf||e.e<-Vf))throw Error(k0+r)}else e.s=0,e.e=0,e.d=[0];return e}function _t(e,t,r){var n,i,s,c,u,m,h,p,g=e.d;for(c=1,s=g[0];s>=10;s/=10)c++;if(n=t-c,n<0)n+=Ot,i=t,h=g[p=0];else{if(p=Math.ceil((n+1)/Ot),s=g.length,p>=s)return e;for(h=s=g[p],c=1;s>=10;s/=10)c++;n%=Ot,i=n-Ot+c}if(r!==void 0&&(s=So(10,c-i-1),u=h/s%10|0,m=t<0||g[p+1]!==void 0||h%s,m=r<4?(u||m)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||m||r==6&&(n>0?i>0?h/So(10,c-i):0:g[p-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return m?(s=or(e),g.length=1,t=t-s-1,g[0]=So(10,(Ot-t%Ot)%Ot),e.e=tl(-t/Ot)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(n==0?(g.length=p,s=1,p--):(g.length=p+1,s=So(10,Ot-n),g[p]=i>0?(h/So(10,c-i)%So(10,i)|0)*s:0),m)for(;;)if(p==0){(g[0]+=s)==yr&&(g[0]=1,++e.e);break}else{if(g[p]+=s,g[p]!=yr)break;g[p--]=0,s=1}for(n=g.length;g[--n]===0;)g.pop();if(Dt&&(e.e>Vf||e.e<-Vf))throw Error(k0+or(e));return e}function fT(e,t){var r,n,i,s,c,u,m,h,p,g,_=e.constructor,x=_.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new _(e),Dt?_t(t,x):t;if(m=e.d,g=t.d,n=t.e,h=e.e,m=m.slice(),c=h-n,c){for(p=c<0,p?(r=m,c=-c,u=g.length):(r=g,n=h,u=m.length),i=Math.max(Math.ceil(x/Ot),u)+2,c>i&&(c=i,r.length=1),r.reverse(),i=c;i--;)r.push(0);r.reverse()}else{for(i=m.length,u=g.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(m[i]!=g[i]){p=m[i]<g[i];break}c=0}for(p&&(r=m,m=g,g=r,t.s=-t.s),u=m.length,i=g.length-u;i>0;--i)m[u++]=0;for(i=g.length;i>c;){if(m[--i]<g[i]){for(s=i;s&&m[--s]===0;)m[s]=yr-1;--m[s],m[i]+=yr}m[i]-=g[i]}for(;m[--u]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,Dt?_t(t,x):t):new _(0)}function Bo(e,t,r){var n,i=or(e),s=ha(e.d),c=s.length;return t?(r&&(n=r-c)>0?s=s.charAt(0)+"."+s.slice(1)+Ii(n):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ii(-i-1)+s,r&&(n=r-c)>0&&(s+=Ii(n))):i>=c?(s+=Ii(i+1-c),r&&(n=r-i-1)>0&&(s=s+"."+Ii(n))):((n=i+1)<c&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-c)>0&&(i+1===c&&(s+="."),s+=Ii(n))),e.s<0?"-"+s:s}function cC(e,t){if(e.length>t)return e.length=t,!0}function mT(e){var t,r,n;function i(s){var c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,s instanceof i){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(To+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return lC(c,s.toString())}else if(typeof s!="string")throw Error(To+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,b$.test(s))lC(c,s);else throw Error(To+s)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=mT,i.config=i.set=_$,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function _$(e){if(!e||typeof e!="object")throw Error(Un+"Object expected");var t,r,n,i=["precision",1,el,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(tl(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(To+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(To+r+": "+n);return this}var D0=mT(y$);hn=new D0(1);const dt=D0;var x$=e=>e,hT={},pT=e=>e===hT,uC=e=>function t(){return arguments.length===0||arguments.length===1&&pT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},gT=(e,t)=>e===1?t:uC(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.filter(c=>c!==hT).length;return s>=e?t(...n):gT(e-s,uC(function(){for(var c=arguments.length,u=new Array(c),m=0;m<c;m++)u[m]=arguments[m];var h=n.map(p=>pT(p)?u.shift():p);return t(...h,...u)}))}),w$=e=>gT(e.length,e),ob=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},j$=w$((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),S$=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return x$;var i=r.reverse(),s=i[0],c=i.slice(1);return function(){return c.reduce((u,m)=>m(u),s(...arguments))}};function vT(e){var t;return e===0?t=1:t=Math.floor(new dt(e).abs().log(10).toNumber())+1,t}function yT(e,t,r){for(var n=new dt(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var bT=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},_T=(e,t,r)=>{if(e.lte(0))return new dt(0);var n=vT(e.toNumber()),i=new dt(10).pow(n),s=e.div(i),c=n!==1?.05:.1,u=new dt(Math.ceil(s.div(c).toNumber())).add(r).mul(c),m=u.mul(i);return t?new dt(m.toNumber()):new dt(Math.ceil(m.toNumber()))},E$=(e,t,r)=>{var n=new dt(1),i=new dt(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new dt(10).pow(vT(e)-1),i=new dt(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new dt(Math.floor(e)))}else e===0?i=new dt(Math.floor((t-1)/2)):r||(i=new dt(Math.floor(e)));var c=Math.floor((t-1)/2),u=S$(j$(m=>i.add(new dt(m-c).mul(n)).toNumber()),ob);return u(0,t)},xT=function(t,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var c=_T(new dt(r).sub(t).div(n-1),i,s),u;t<=0&&r>=0?u=new dt(0):(u=new dt(t).add(r).div(2),u=u.sub(new dt(u).mod(c)));var m=Math.ceil(u.sub(t).div(c).toNumber()),h=Math.ceil(new dt(r).sub(u).div(c).toNumber()),p=m+h+1;return p>n?xT(t,r,n,i,s+1):(p<n&&(h=r>0?h+(n-p):h,m=r>0?m:m+(n-p)),{step:c,tickMin:u.sub(new dt(m).mul(c)),tickMax:u.add(new dt(h).mul(c))})},O$=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,m]=bT([r,n]);if(u===-1/0||m===1/0){var h=m===1/0?[u,...ob(0,i-1).map(()=>1/0)]:[...ob(0,i-1).map(()=>-1/0),m];return r>n?h.reverse():h}if(u===m)return E$(u,i,s);var{step:p,tickMin:g,tickMax:_}=xT(u,m,c,s,0),x=yT(g,_.add(new dt(.1).mul(p)),p);return r>n?x.reverse():x},C$=function(t,r){var[n,i]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=bT([n,i]);if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var m=Math.max(r,2),h=_T(new dt(u).sub(c).div(m-1),s,0),p=[...yT(new dt(c),new dt(u),h),u];return s===!1&&(p=p.map(g=>Math.round(g))),n>i?p.reverse():p},wT=e=>e.rootProps.maxBarSize,A$=e=>e.rootProps.barGap,jT=e=>e.rootProps.barCategoryGap,N$=e=>e.rootProps.barSize,tu=e=>e.rootProps.stackOffset,ST=e=>e.rootProps.reverseStackOrder,T0=e=>e.options.chartName,P0=e=>e.rootProps.syncId,ET=e=>e.rootProps.syncMethod,M0=e=>e.options.eventEmitter,UZ=e=>e.rootProps.baseValue,ir={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},$a={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},mn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Km=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},k$={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:$a.reversed,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:$a.type,unit:void 0},D$={allowDataOverflow:mn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mn.scale,tick:mn.tick,tickCount:mn.tickCount,ticks:void 0,type:mn.type,unit:void 0},T$={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$a.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},P$={allowDataOverflow:mn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mn.scale,tick:mn.tick,tickCount:mn.tickCount,ticks:void 0,type:"category",unit:void 0},R0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?T$:k$,q0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?P$:D$,Ym=e=>e.polarOptions,z0=W([ai,ii,dr],jD),OT=W([Ym,z0],(e,t)=>{if(e!=null)return Tr(e.innerRadius,t,0)}),CT=W([Ym,z0],(e,t)=>{if(e!=null)return Tr(e.outerRadius,t,t*.8)}),M$=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},AT=W([Ym],M$);W([R0,AT],Km);var NT=W([z0,OT,CT],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});W([q0,NT],Km);var kT=W([et,Ym,OT,CT,ai,ii],(e,t,r,n,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:u,startAngle:m,endAngle:h}=t;return{cx:Tr(c,i,i/2),cy:Tr(u,s,s/2),innerRadius:r,outerRadius:n,startAngle:m,endAngle:h,clockWise:!1}}}),Rt=(e,t)=>t,ru=(e,t,r)=>r;function L0(e){return e?.id}function DT(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=r,c=new Map;return e.forEach(u=>{var m,h=(m=u.data)!==null&&m!==void 0?m:n;if(!(h==null||h.length===0)){var p=L0(u);h.forEach((g,_)=>{var x=s==null||i?_:String(vt(g,s,null)),w=vt(g,u.dataKey,0),j;c.has(x)?j=c.get(x):j={},Object.assign(j,{[p]:w}),c.set(x,j)})}}),Array.from(c.values())}function Gm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Vm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Wm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function R$(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var mr=e=>{var t=et(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},rl=e=>e.tooltip.settings.axisId;function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(n){q$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q$(e,t,r){return(t=z$(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z$(e){var t=L$(e,"string");return typeof t=="symbol"?t:t+""}function L$(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sb=[0,"auto"],gr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},TT=(e,t)=>e.cartesianAxis.xAxis[t],li=(e,t)=>{var r=TT(e,t);return r??gr},vr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:sb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gc},PT=(e,t)=>e.cartesianAxis.yAxis[t],ci=(e,t)=>{var r=PT(e,t);return r??vr},I$={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},I0=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??I$},Lt=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);case"zAxis":return I0(e,r);case"angleAxis":return R0(e,r);case"radiusAxis":return q0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},U$=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},nu=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);case"angleAxis":return R0(e,r);case"radiusAxis":return q0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},MT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function U0(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Xm=e=>e.graphicalItems.cartesianItems,B$=W([Rt,ru],U0),B0=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),au=W([Xm,Lt,B$],B0,{memoizeOptions:{resultEqualityCheck:Wm}}),RT=W([au],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Gm)),qT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),$$=W([au],qT),$0=e=>e.map(t=>t.data).filter(Boolean).flat(1),H$=W([au],$0,{memoizeOptions:{resultEqualityCheck:Wm}}),H0=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},F0=W([H$,N0],H0),K0=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:vt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:vt(i,n)}))):e.map(n=>({value:n})),Zm=W([F0,Lt,au],K0);function zT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function cf(e){if(va(e)||e instanceof Date){var t=Number(e);if(zt(t))return t}}function fC(e){if(Array.isArray(e)){var t=[cf(e[0]),cf(e[1])];return Yi(t)?t:void 0}var r=cf(e);if(r!=null)return[r,r]}function ei(e){return e.map(cf).filter(i5)}function F$(e,t,r){return!r||typeof t!="number"||ta(t)?[]:r.length?ei(r.flatMap(n=>{var i=vt(e,n.dataKey),s,c;if(Array.isArray(i)?[s,c]=i:s=c=i,!(!zt(s)||!zt(c)))return[t-s,t+c]})):[]}var hr=e=>{var t=mr(e),r=rl(e);return nu(e,t,r)},iu=W([hr],e=>e?.dataKey),K$=W([RT,N0,hr],DT),LT=(e,t,r,n)=>{var i={},s=t.reduce((c,u)=>{if(u.stackId==null)return c;var m=c[u.stackId];return m==null&&(m=[]),m.push(u),c[u.stackId]=m,c},i);return Object.fromEntries(Object.entries(s).map(c=>{var[u,m]=c,h=n?[...m].reverse():m,p=h.map(L0);return[u,{stackedData:SI(e,p,r),graphicalItems:h}]}))},lb=W([K$,RT,tu,ST],LT),IT=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var c=NI(e,i,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},Y$=W([Lt],e=>e.allowDataOverflow),Y0=e=>{var t;if(e==null||!("domain"in e))return sb;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=ei(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:sb},G0=W([Lt],Y0),V0=W([G0,Y$],lT),G$=W([lb,si,Rt,V0],IT,{memoizeOptions:{resultEqualityCheck:Vm}}),Qm=e=>e.errorBars,V$=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>zT(r,n)),Xf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),c=Math.min(...s),u=Math.max(...s);return[c,u]}},W0=(e,t,r,n,i)=>{var s,c;if(r.length>0&&e.forEach(u=>{r.forEach(m=>{var h,p,g=(h=n[m.id])===null||h===void 0?void 0:h.filter(O=>zT(i,O)),_=vt(u,(p=t.dataKey)!==null&&p!==void 0?p:m.dataKey),x=F$(u,_,g);if(x.length>=2){var w=Math.min(...x),j=Math.max(...x);(s==null||w<s)&&(s=w),(c==null||j>c)&&(c=j)}var S=fC(_);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),c=c==null?S[1]:Math.max(c,S[1]))})}),t?.dataKey!=null&&e.forEach(u=>{var m=fC(vt(u,t.dataKey));m!=null&&(s=s==null?m[0]:Math.min(s,m[0]),c=c==null?m[1]:Math.max(c,m[1]))}),zt(s)&&zt(c))return[s,c]},W$=W([F0,Lt,$$,Qm,Rt],W0,{memoizeOptions:{resultEqualityCheck:Vm}});function X$(e){var{value:t}=e;if(va(t)||t instanceof Date)return t}var Z$=(e,t,r)=>{var n=e.map(X$).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&tk(n))?CD(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},UT=e=>e.referenceElements.dots,nl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Q$=W([UT,Rt,ru],nl),BT=e=>e.referenceElements.areas,J$=W([BT,Rt,ru],nl),$T=e=>e.referenceElements.lines,eH=W([$T,Rt,ru],nl),HT=(e,t)=>{if(e!=null){var r=ei(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},tH=W(Q$,Rt,HT),FT=(e,t)=>{if(e!=null){var r=ei(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},rH=W([J$,Rt],FT);function nH(e){var t;if(e.x!=null)return ei([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ei(r)}function aH(e){var t;if(e.y!=null)return ei([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ei(r)}var KT=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?nH(n):aH(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},iH=W([eH,Rt],KT),oH=W(tH,iH,rH,(e,t,r)=>Xf(e,r,t)),X0=(e,t,r,n,i,s,c,u)=>{if(r!=null)return r;var m=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",h=m?Xf(n,s,i):Xf(s,i);return v$(t,h,e.allowDataOverflow)},sH=W([Lt,G0,V0,G$,W$,oH,et,Rt],X0,{memoizeOptions:{resultEqualityCheck:Vm}}),lH=[0,1],Z0=(e,t,r,n,i,s,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:u,type:m}=e,h=Zi(t,s);if(h&&u==null){var p;return CD(0,(p=r?.length)!==null&&p!==void 0?p:0)}return m==="category"?Z$(n,e,h):i==="expand"?lH:c}},Q0=W([Lt,et,F0,Zm,tu,Rt,sH],Z0),YT=(e,t,r,n,i)=>{if(e!=null){var{scale:s,type:c}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Hc(s));return u in yc?u:"point"}}},al=W([Lt,et,MT,T0,Rt],YT);function cH(e){if(e!=null){if(e in yc)return yc[e]();var t="scale".concat(Hc(e));if(t in yc)return yc[t]()}}function J0(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=cH(t);if(i!=null){var s=i.domain(r).range(n);return bI(s),s}}}var e_=(e,t,r)=>{var n=Y0(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Yi(e))return O$(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Yi(e))return C$(e,t.tickCount,t.allowDecimals)}},t_=W([Q0,nu,al],e_),r_=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Yi(t)&&Array.isArray(r)&&r.length>0){var i=t[0],s=r[0],c=t[1],u=r[r.length-1];return[Math.min(i,s),Math.max(c,u)]}return t},uH=W([Lt,Q0,t_,Rt],r_),dH=W(Zm,Lt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ei(e.map(g=>g.value))).sort((g,_)=>g-_),i=n[0],s=n[n.length-1];if(i==null||s==null)return 1/0;var c=s-i;if(c===0)return 1/0;for(var u=0;u<n.length-1;u++){var m=n[u],h=n[u+1];if(!(m==null||h==null)){var p=h-m;r=Math.min(r,p)}}return r/c}}),GT=W(dH,et,jT,dr,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!zt(e))return 0;var s=t==="vertical"?n.height:n.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var c=Tr(r,e*s),u=e*s/2;return u-c-(u-c)/s*c}return 0}),fH=(e,t,r)=>{var n=li(e,t);return n==null||typeof n.padding!="string"?0:GT(e,"xAxis",t,r,n.padding)},mH=(e,t,r)=>{var n=ci(e,t);return n==null||typeof n.padding!="string"?0:GT(e,"yAxis",t,r,n.padding)},hH=W(li,fH,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),pH=W(ci,mH,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),gH=W([dr,hH,Dm,km,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),vH=W([dr,et,pH,Dm,km,(e,t,r)=>r],(e,t,r,n,i,s)=>{var{padding:c}=i;return s?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),ou=(e,t,r,n)=>{var i;switch(t){case"xAxis":return gH(e,r,n);case"yAxis":return vH(e,r,n);case"zAxis":return(i=I0(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return AT(e);case"radiusAxis":return NT(e,r);default:return}},VT=W([Lt,ou],Km),Jm=W([Lt,al,uH,VT],J0);W([au,Qm,Rt],V$);function WT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var eh=(e,t)=>t,th=(e,t,r)=>r,yH=W(Am,eh,th,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(WT)),bH=W(Nm,eh,th,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(WT)),XT=(e,t)=>({width:e.width,height:t.height}),_H=(e,t)=>{var r=typeof t.width=="number"?t.width:Gc;return{width:r,height:e.height}},ZT=W(dr,li,XT),xH=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},wH=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},jH=W(ii,dr,yH,eh,th,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=XT(t,u);c==null&&(c=xH(t,n,e));var h=n==="top"&&!i||n==="bottom"&&i;s[u.id]=c-Number(h)*m.height,c+=(h?-1:1)*m.height}),s}),SH=W(ai,dr,bH,eh,th,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=_H(t,u);c==null&&(c=wH(t,n,e));var h=n==="left"&&!i||n==="right"&&i;s[u.id]=c-Number(h)*m.width,c+=(h?-1:1)*m.width}),s}),EH=(e,t)=>{var r=li(e,t);if(r!=null)return jH(e,r.orientation,r.mirror)},OH=W([dr,li,EH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),CH=(e,t)=>{var r=ci(e,t);if(r!=null)return SH(e,r.orientation,r.mirror)},AH=W([dr,ci,CH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),QT=W(dr,ci,(e,t)=>{var r=typeof t.width=="number"?t.width:Gc;return{width:r,height:e.height}}),mC=(e,t,r)=>{switch(t){case"xAxis":return ZT(e,r).width;case"yAxis":return QT(e,r).height;default:return}},JT=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:c}=r,u=Zi(e,n),m=t.map(h=>h.value);if(c&&u&&s==="category"&&i&&tk(m))return m}},n_=W([et,Zm,Lt,Rt],JT),eP=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,c=Zi(e,n);if(c&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},a_=W([et,Zm,nu,Rt],eP),hC=W([et,U$,al,Jm,n_,a_,ou,t_,Rt],(e,t,r,n,i,s,c,u,m)=>{if(t!=null){var h=Zi(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:c,realScaleType:r,scale:n}}}),NH=(e,t,r,n,i,s,c,u,m)=>{if(!(t==null||n==null)){var h=Zi(e,m),{type:p,ticks:g,tickCount:_}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=p==="category"&&n.bandwidth?n.bandwidth()/x:0;w=m==="angleAxis"&&s!=null&&s.length>=2?br(s[0]-s[1])*2*w:w;var j=g||i;if(j){var S=j.map((O,C)=>{var A=c?c.indexOf(O):O;return{index:C,coordinate:n(A)+w,value:O,offset:w}});return S.filter(O=>zt(O.coordinate))}return h&&u?u.map((O,C)=>({coordinate:n(O)+w,value:O,index:C,offset:w})).filter(O=>zt(O.coordinate)):n.ticks?n.ticks(_).map(O=>({coordinate:n(O)+w,value:O,offset:w})):n.domain().map((O,C)=>({coordinate:n(O)+w,value:c?c[O]:O,index:C,offset:w}))}},tP=W([et,nu,al,Jm,t_,ou,n_,a_,Rt],NH),kH=(e,t,r,n,i,s,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Zi(e,c),{tickCount:m}=t,h=0;return h=c==="angleAxis"&&n?.length>=2?br(n[0]-n[1])*2*h:h,u&&s?s.map((p,g)=>({coordinate:r(p)+h,value:p,index:g,offset:h})):r.ticks?r.ticks(m).map(p=>({coordinate:r(p)+h,value:p,offset:h})):r.domain().map((p,g)=>({coordinate:r(p)+h,value:i?i[p]:p,index:g,offset:h}))}},Gi=W([et,nu,Jm,ou,n_,a_,Rt],kH),Vi=W(Lt,Jm,(e,t)=>{if(!(e==null||t==null))return Wf(Wf({},e),{},{scale:t})}),DH=W([Lt,al,Q0,VT],J0);W((e,t,r)=>I0(e,r),DH,(e,t)=>{if(!(e==null||t==null))return Wf(Wf({},e),{},{scale:t})});var TH=W([et,Am,Nm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),rP=e=>e.options.defaultTooltipEventType,nP=e=>e.options.validateTooltipEventTypes;function aP(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function i_(e,t){var r=rP(e),n=nP(e);return aP(t,r,n)}function PH(e){return De(t=>i_(t,e))}var iP=(e,t)=>{var r,n=Number(t);if(!(ta(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},MH=e=>e.tooltip.settings,Bi={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},RH={itemInteraction:{click:Bi,hover:Bi},axisInteraction:{click:Bi,hover:Bi},keyboardInteraction:Bi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},oP=Qr({name:"tooltip",initialState:RH,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Nt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ea(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Nt()},removeTooltipEntrySettings:{reducer(e,t){var r=ea(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Nt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:qH,replaceTooltipEntrySettings:zH,removeTooltipEntrySettings:LH,setTooltipSettingsState:IH,setActiveMouseOverItemIndex:sP,mouseLeaveItem:UH,mouseLeaveChart:lP,setActiveClickItemIndex:BH,setMouseOverAxisIndex:cP,setMouseClickAxisIndex:$H,setSyncInteraction:cb,setKeyboardInteraction:ub}=oP.actions,HH=oP.reducer;function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(r),!0).forEach(function(n){FH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FH(e,t,r){return(t=KH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KH(e){var t=YH(e,"string");return typeof t=="symbol"?t:t+""}function YH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GH(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function VH(e){return e.index!=null}var uP=(e,t,r,n)=>{if(t==null)return Bi;var i=GH(e,t,r);if(i==null)return Bi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(VH(i)){if(s)return Yd(Yd({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Yd(Yd({},Bi),{},{coordinate:i.coordinate})};function WH(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function XH(e,t){var r=WH(e),n=t[0],i=t[1];if(r===void 0)return!1;var s=Math.min(n,i),c=Math.max(n,i);return r>=s&&r<=c}function ZH(e,t,r){if(r==null||t==null)return!0;var n=vt(e,t);return n==null||!Yi(r)?!0:XH(n,r)}var o_=(e,t,r,n)=>{var i=e?.index;if(i==null)return null;var s=Number(i);if(!zt(s))return i;var c=0,u=1/0;t.length>0&&(u=t.length-1);var m=Math.max(c,Math.min(s,u)),h=t[m];return h==null||ZH(h,r,n)?String(m):null},dP=(e,t,r,n,i,s,c,u)=>{if(!(s==null||u==null)){var m=c[0],h=m==null?void 0:u(m.positions,s);if(h!=null)return h;var p=i?.[Number(s)];if(p)switch(r){case"horizontal":return{x:p.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:p.coordinate}}}},fP=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},su=e=>e.options.tooltipPayloadSearcher,il=e=>e.tooltip;function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(n){QH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QH(e,t,r){return(t=JH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JH(e){var t=e9(e,"string");return typeof t=="symbol"?t:t+""}function e9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function t9(e,t){return e??t}var mP=(e,t,r,n,i,s,c)=>{if(!(t==null||s==null)){var{chartData:u,computedData:m,dataStartIndex:h,dataEndIndex:p}=r,g=[];return e.reduce((_,x)=>{var w,{dataDefinedOnItem:j,settings:S}=x,O=t9(j,u),C=Array.isArray(O)?Vk(O,h,p):O,A=(w=S?.dataKey)!==null&&w!==void 0?w:n,k=S?.nameKey,D;if(n&&Array.isArray(C)&&!Array.isArray(C[0])&&c==="axis"?D=rk(C,n,i):D=s(C,t,m,k),Array.isArray(D))D.forEach(L=>{var V=vC(vC({},S),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});_.push(wE({tooltipEntrySettings:V,dataKey:L.dataKey,payload:L.payload,value:vt(L.payload,L.dataKey),name:L.name}))});else{var M;_.push(wE({tooltipEntrySettings:S,dataKey:A,payload:D,value:vt(D,A),name:(M=vt(D,k))!==null&&M!==void 0?M:S?.name}))}return _},g)}},s_=W([hr,et,MT,T0,mr],YT),r9=W([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),n9=W([mr,rl],U0),ol=W([r9,hr,n9],B0,{memoizeOptions:{resultEqualityCheck:Wm}}),a9=W([ol],e=>e.filter(Gm)),i9=W([ol],$0,{memoizeOptions:{resultEqualityCheck:Wm}}),sl=W([i9,si],H0),o9=W([a9,si,hr],DT),l_=W([sl,hr,ol],K0),hP=W([hr],Y0),s9=W([hr],e=>e.allowDataOverflow),pP=W([hP,s9],lT),l9=W([ol],e=>e.filter(Gm)),c9=W([o9,l9,tu,ST],LT),u9=W([c9,si,mr,pP],IT),d9=W([ol],qT),f9=W([sl,hr,d9,Qm,mr],W0,{memoizeOptions:{resultEqualityCheck:Vm}}),m9=W([UT,mr,rl],nl),h9=W([m9,mr],HT),p9=W([BT,mr,rl],nl),g9=W([p9,mr],FT),v9=W([$T,mr,rl],nl),y9=W([v9,mr],KT),b9=W([h9,y9,g9],Xf),_9=W([hr,hP,pP,u9,f9,b9,et,mr],X0),lu=W([hr,et,sl,l_,tu,mr,_9],Z0),x9=W([lu,hr,s_],e_),w9=W([hr,lu,x9,mr],r_),gP=e=>{var t=mr(e),r=rl(e),n=!1;return ou(e,t,r,n)},vP=W([hr,gP],Km),yP=W([hr,s_,w9,vP],J0),j9=W([et,l_,hr,mr],JT),S9=W([et,l_,hr,mr],eP),E9=(e,t,r,n,i,s,c,u)=>{if(t){var{type:m}=t,h=Zi(e,u);if(n){var p=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,g=m==="category"&&n.bandwidth?n.bandwidth()/p:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?br(i[0]-i[1])*2*g:g,h&&c?c.map((_,x)=>({coordinate:n(_)+g,value:_,index:x,offset:g})):n.domain().map((_,x)=>({coordinate:n(_)+g,value:s?s[_]:_,index:x,offset:g}))}}},ui=W([et,hr,s_,yP,gP,j9,S9,mr],E9),c_=W([rP,nP,MH],(e,t,r)=>aP(r.shared,e,t)),bP=e=>e.tooltip.settings.trigger,u_=e=>e.tooltip.settings.defaultIndex,cu=W([il,c_,bP,u_],uP),Wi=W([cu,sl,iu,lu],o_),_P=W([ui,Wi],iP),d_=W([cu],e=>{if(e)return e.dataKey}),O9=W([cu],e=>{if(e)return e.graphicalItemId}),xP=W([il,c_,bP,u_],fP),C9=W([ai,ii,et,dr,ui,u_,xP,su],dP),A9=W([cu,C9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),N9=W([cu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),k9=W([xP,Wi,si,iu,_P,su,c_],mP),D9=W([k9],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(n){T9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T9(e,t,r){return(t=P9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P9(e){var t=M9(e,"string");return typeof t=="symbol"?t:t+""}function M9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R9=()=>De(hr),q9=()=>{var e=R9(),t=De(ui),r=De(yP);return Fs(!e||!r?void 0:bC(bC({},e),{},{scale:r}),t)};function _C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(r),!0).forEach(function(n){z9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z9(e,t,r){return(t=L9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L9(e){var t=I9(e,"string");return typeof t=="symbol"?t:t+""}function I9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U9=(e,t,r,n)=>{var i=t.find(s=>s&&s.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},B9=(e,t,r,n)=>{var i=t.find(h=>h&&h.index===r);if(i){if(e==="centric"){var s=i.coordinate,{radius:c}=n;return Rs(Rs(Rs({},n),ar(n.cx,n.cy,c,s)),{},{angle:s,radius:c})}var u=i.coordinate,{angle:m}=n;return Rs(Rs(Rs({},n),ar(n.cx,n.cy,u,m)),{},{angle:m,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function $9(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var wP=(e,t,r,n,i)=>{var s,c=(s=t?.length)!==null&&s!==void 0?s:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var m,h,p,g,_,x=u>0?(m=r[u-1])===null||m===void 0?void 0:m.coordinate:(h=r[c-1])===null||h===void 0?void 0:h.coordinate,w=(p=r[u])===null||p===void 0?void 0:p.coordinate,j=u>=c-1?(g=r[0])===null||g===void 0?void 0:g.coordinate:(_=r[u+1])===null||_===void 0?void 0:_.coordinate,S=void 0;if(!(x==null||w==null||j==null))if(br(w-x)!==br(j-w)){var O=[];if(br(j-w)===br(i[1]-i[0])){S=j;var C=w+i[1]-i[0];O[0]=Math.min(C,(C+x)/2),O[1]=Math.max(C,(C+x)/2)}else{S=x;var A=j+i[1]-i[0];O[0]=Math.min(w,(A+w)/2),O[1]=Math.max(w,(A+w)/2)}var k=[Math.min(w,(S+w)/2),Math.max(w,(S+w)/2)];if(e>k[0]&&e<=k[1]||e>=O[0]&&e<=O[1]){var D;return(D=r[u])===null||D===void 0?void 0:D.index}}else{var M=Math.min(x,j),L=Math.max(x,j);if(e>(M+w)/2&&e<=(L+w)/2){var V;return(V=r[u])===null||V===void 0?void 0:V.index}}}else if(t)for(var re=0;re<c;re++){var ie=t[re];if(ie!=null){var X=t[re+1],I=t[re-1];if(re===0&&X!=null&&e<=(ie.coordinate+X.coordinate)/2||re===c-1&&I!=null&&e>(ie.coordinate+I.coordinate)/2||re>0&&re<c-1&&I!=null&&X!=null&&e>(ie.coordinate+I.coordinate)/2&&e<=(ie.coordinate+X.coordinate)/2)return ie.index}}return-1},H9=()=>De(T0),f_=(e,t)=>t,jP=(e,t,r)=>r,m_=(e,t,r,n)=>n,F9=W(ui,e=>ym(e,t=>t.coordinate)),h_=W([il,f_,jP,m_],uP),p_=W([h_,sl,iu,lu],o_),K9=(e,t,r)=>{if(t!=null){var n=il(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},SP=W([il,f_,jP,m_],fP),Zf=W([ai,ii,et,dr,ui,m_,SP,su],dP),Y9=W([h_,Zf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),EP=W([ui,p_],iP),G9=W([SP,p_,si,iu,EP,su,f_],mP),V9=W([h_,p_],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),W9=(e,t,r,n,i,s,c)=>{if(!(!e||!r||!n||!i)&&$9(e,c)){var u=kI(e,t),m=wP(u,s,i,r,n),h=U9(t,i,m,e);return{activeIndex:String(m),activeCoordinate:h}}},X9=(e,t,r,n,i,s,c)=>{if(!(!e||!n||!i||!s||!r)){var u=TU(e,r);if(u){var m=DI(u,t),h=wP(m,c,s,n,i),p=B9(t,s,h,u);return{activeIndex:String(h),activeCoordinate:p}}}},Z9=(e,t,r,n,i,s,c,u)=>{if(!(!e||!t||!n||!i||!s))return t==="horizontal"||t==="vertical"?W9(e,t,n,i,s,c,u):X9(e,t,r,n,i,s,c)},Q9=W(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),J9=W(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ir)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:R$}});function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){e7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e7(e,t,r){return(t=t7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t7(e){var t=r7(e,"string");return typeof t=="symbol"?t:t+""}function r7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var n7={},a7={zIndexMap:Object.values(ir).reduce((e,t)=>wC(wC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),n7)},i7=new Set(Object.values(ir));function o7(e){return i7.has(e)}var OP=Qr({name:"zIndex",initialState:a7,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Nt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!o7(r)&&delete e.zIndexMap[r])},prepare:Nt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Nt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Nt()}}}),{registerZIndexPortal:s7,unregisterZIndexPortal:l7,registerZIndexPortalElement:c7,unregisterZIndexPortalElement:u7}=OP.actions,d7=OP.reducer;function Jr(e){var{zIndex:t,children:r}=e,n=s6(),i=n&&t!==void 0&&t!==0,s=Pr(),c=Mt();y.useLayoutEffect(()=>i?(c(s7({zIndex:t})),()=>{c(l7({zIndex:t}))}):Fc,[c,t,i]);var u=De(m=>Q9(m,t,s));return i?u?wN.createPortal(r,u):null:r}function db(){return db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},db.apply(null,arguments)}function jC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(r),!0).forEach(function(n){f7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f7(e,t,r){return(t=m7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m7(e){var t=h7(e,"string");return typeof t=="symbol"?t:t+""}function h7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p7(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function g7(e){var t,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:c,layout:u,cursor:m,tooltipEventType:h,chartName:p}=e,g=r,_=n,x=i;if(!m||!g||p!=="ScatterChart"&&h!=="axis")return null;var w,j,S;if(p==="ScatterChart")w=g,j=Y6,S=ir.cursorLine;else if(p==="BarChart")w=G6(u,g,s,c),j=wD,S=ir.cursorRectangle;else if(u==="radial"&&ik(g)){var{cx:O,cy:C,radius:A,startAngle:k,endAngle:D}=SD(g);w={cx:O,cy:C,startAngle:k,endAngle:D,innerRadius:A,outerRadius:A},j=OD,S=ir.cursorLine}else w={points:qU(u,g,s)},j=i0,S=ir.cursorLine;var M=typeof m=="object"&&"className"in m?m.className:void 0,L=Gd(Gd(Gd(Gd({stroke:"#ccc",pointerEvents:"none"},s),w),Ro(m)),{},{payload:_,payloadIndex:x,className:st("recharts-tooltip-cursor",M)});return y.createElement(Jr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},y.createElement(p7,{cursor:m,cursorComp:j,cursorProps:L}))}function v7(e){var t=q9(),r=aD(),n=Yo(),i=H9();return t==null||r==null||n==null||i==null?null:y.createElement(g7,db({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var CP=y.createContext(null),y7=()=>y.useContext(CP),Gv={exports:{}},SC;function b7(){return SC||(SC=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(m,h,p){this.fn=m,this.context=h,this.once=p||!1}function s(m,h,p,g,_){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,g||m,_),w=r?r+h:h;return m._events[w]?m._events[w].fn?m._events[w]=[m._events[w],x]:m._events[w].push(x):(m._events[w]=x,m._eventsCount++),m}function c(m,h){--m._eventsCount===0?m._events=new n:delete m._events[h]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)t.call(p,g)&&h.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=r?r+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var _=0,x=g.length,w=new Array(x);_<x;_++)w[_]=g[_].fn;return w},u.prototype.listenerCount=function(h){var p=r?r+h:h,g=this._events[p];return g?g.fn?1:g.length:0},u.prototype.emit=function(h,p,g,_,x,w){var j=r?r+h:h;if(!this._events[j])return!1;var S=this._events[j],O=arguments.length,C,A;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),O){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,_),!0;case 5:return S.fn.call(S.context,p,g,_,x),!0;case 6:return S.fn.call(S.context,p,g,_,x,w),!0}for(A=1,C=new Array(O-1);A<O;A++)C[A-1]=arguments[A];S.fn.apply(S.context,C)}else{var k=S.length,D;for(A=0;A<k;A++)switch(S[A].once&&this.removeListener(h,S[A].fn,void 0,!0),O){case 1:S[A].fn.call(S[A].context);break;case 2:S[A].fn.call(S[A].context,p);break;case 3:S[A].fn.call(S[A].context,p,g);break;case 4:S[A].fn.call(S[A].context,p,g,_);break;default:if(!C)for(D=1,C=new Array(O-1);D<O;D++)C[D-1]=arguments[D];S[A].fn.apply(S[A].context,C)}}return!0},u.prototype.on=function(h,p,g){return s(this,h,p,g,!1)},u.prototype.once=function(h,p,g){return s(this,h,p,g,!0)},u.prototype.removeListener=function(h,p,g,_){var x=r?r+h:h;if(!this._events[x])return this;if(!p)return c(this,x),this;var w=this._events[x];if(w.fn)w.fn===p&&(!_||w.once)&&(!g||w.context===g)&&c(this,x);else{for(var j=0,S=[],O=w.length;j<O;j++)(w[j].fn!==p||_&&!w[j].once||g&&w[j].context!==g)&&S.push(w[j]);S.length?this._events[x]=S.length===1?S[0]:S:c(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&c(this,p)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Gv)),Gv.exports}var _7=b7();const x7=ri(_7);var qc=new x7,fb="recharts.syncEvent.tooltip",EC="recharts.syncEvent.brush";function g_(e,t){if(t){var r=Number.parseInt(t,10);if(!ta(r))return e?.[r]}}var w7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},AP=Qr({name:"options",initialState:w7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),j7=AP.reducer,{createEventEmitter:S7}=AP.actions;function E7(e){return e.tooltip.syncInteraction}var O7={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},NP=Qr({name:"chartData",initialState:O7,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:OC,setDataStartEndIndexes:C7,setComputedData:BZ}=NP.actions,A7=NP.reducer,N7=["x","y"];function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(n){k7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k7(e,t,r){return(t=D7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D7(e){var t=T7(e,"string");return typeof t=="symbol"?t:t+""}function T7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P7(e,t){if(e==null)return{};var r,n,i=M7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function M7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function R7(){var e=De(P0),t=De(M0),r=Mt(),n=De(ET),i=De(ui),s=Yo(),c=Tm(),u=De(m=>m.rootProps.className);y.useEffect(()=>{if(e==null)return Fc;var m=(h,p,g)=>{if(t!==g&&e===h){if(n==="index"){var _;if(c&&p!==null&&p!==void 0&&(_=p.payload)!==null&&_!==void 0&&_.coordinate&&p.payload.sourceViewBox){var x=p.payload.coordinate,{x:w,y:j}=x,S=P7(x,N7),{x:O,y:C,width:A,height:k}=p.payload.sourceViewBox,D=qs(qs({},S),{},{x:c.x+(A?(w-O)/A:0)*c.width,y:c.y+(k?(j-C)/k:0)*c.height});r(qs(qs({},p),{},{payload:qs(qs({},p.payload),{},{coordinate:D})}))}else r(p);return}if(i!=null){var M;if(typeof n=="function"){var L={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},V=n(i,L);M=i[V]}else n==="value"&&(M=i.find(R=>String(R.value)===p.payload.label));var{coordinate:re}=p.payload;if(M==null||p.payload.active===!1||re==null||c==null){r(cb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:ie,y:X}=re,I=Math.min(ie,c.x+c.width),ce=Math.min(X,c.y+c.height),ge={x:s==="horizontal"?M.coordinate:I,y:s==="horizontal"?ce:M.coordinate},q=cb({active:p.payload.active,coordinate:ge,dataKey:p.payload.dataKey,index:String(M.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});r(q)}}};return qc.on(fb,m),()=>{qc.off(fb,m)}},[u,r,t,e,n,i,s,c])}function q7(){var e=De(P0),t=De(M0),r=Mt();y.useEffect(()=>{if(e==null)return Fc;var n=(i,s,c)=>{t!==c&&e===i&&r(C7(s))};return qc.on(EC,n),()=>{qc.off(EC,n)}},[r,t,e])}function z7(){var e=Mt();y.useEffect(()=>{e(S7())},[e]),R7(),q7()}function L7(e,t,r,n,i,s){var c=De(x=>K9(x,e,t)),u=De(M0),m=De(P0),h=De(ET),p=De(E7),g=p?.active,_=Tm();y.useEffect(()=>{if(!g&&m!=null&&u!=null){var x=cb({active:s,coordinate:r,dataKey:c,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:_,graphicalItemId:void 0});qc.emit(fb,m,x,u)}},[g,r,c,i,n,u,m,h,s,_])}function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function NC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(r),!0).forEach(function(n){I7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I7(e,t,r){return(t=U7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U7(e){var t=B7(e,"string");return typeof t=="symbol"?t:t+""}function B7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $7(e){return e.dataKey}function H7(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(E6,t)}var kC=[],F7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Vv(e){var t,r,n=xr(e,F7),{active:i,allowEscapeViewBox:s,animationDuration:c,animationEasing:u,content:m,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:_,position:x,reverseDirection:w,useTranslate3d:j,wrapperStyle:S,cursor:O,shared:C,trigger:A,defaultIndex:k,portal:D,axisId:M}=n,L=Mt(),V=typeof k=="number"?String(k):k;y.useEffect(()=>{L(IH({shared:C,trigger:A,axisId:M,active:i,defaultIndex:V}))},[L,C,A,M,i,V]);var re=Tm(),ie=vD(),X=PH(C),{activeIndex:I,isActive:ce}=(t=De(pe=>V9(pe,X,A,V)))!==null&&t!==void 0?t:{},ge=De(pe=>G9(pe,X,A,V)),q=De(pe=>EP(pe,X,A,V)),R=De(pe=>Y9(pe,X,A,V)),U=ge,Q=y7(),B=(r=i??ce)!==null&&r!==void 0?r:!1,[fe,je]=h4([U,B]),ee=X==="axis"?q:void 0;L7(X,A,R,ee,I,B);var H=D??Q;if(H==null||re==null||X==null)return null;var Ee=U??kC;B||(Ee=kC),h&&Ee.length&&(Ee=U5(Ee.filter(pe=>pe.value!=null&&(pe.hide!==!0||n.includeHidden)),_,$7));var Te=Ee.length>0,Ie=y.createElement(T6,{allowEscapeViewBox:s,animationDuration:c,animationEasing:u,isAnimationActive:p,active:B,coordinate:R,hasPayload:Te,offset:g,position:x,reverseDirection:w,useTranslate3d:j,viewBox:re,wrapperStyle:S,lastBoundingBox:fe,innerRef:je,hasPortalFromProps:!!D},H7(m,NC(NC({},n),{},{payload:Ee,label:ee,active:B,activeIndex:I,coordinate:R,accessibilityLayer:ie})));return y.createElement(y.Fragment,null,wN.createPortal(Ie,H),B&&y.createElement(v7,{cursor:O,tooltipEventType:X,coordinate:R,payload:Ee,index:I}))}var uu=e=>null;uu.displayName="Cell";function K7(e,t,r){return(t=Y7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y7(e){var t=G7(e,"string");return typeof t=="symbol"?t:t+""}function G7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class V7{constructor(t){K7(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function DC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function W7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(r),!0).forEach(function(n){X7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X7(e,t,r){return(t=Z7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z7(e){var t=Q7(e,"string");return typeof t=="symbol"?t:t+""}function Q7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var J7={cacheSize:2e3,enableCache:!0},kP=W7({},J7),TC=new V7(kP.cacheSize),eF={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},PC="recharts_measurement_span";function tF(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",c=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(c,"|").concat(u)}var MC=(e,t)=>{try{var r=document.getElementById(PC);r||(r=document.createElement("span"),r.setAttribute("id",PC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,eF,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},xc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||zm.isSsr)return{width:0,height:0};if(!kP.enableCache)return MC(t,r);var n=tF(t,r),i=TC.get(n);if(i)return i;var s=MC(t,r);return TC.set(n,s),s},DP;function rF(e,t,r){return(t=nF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nF(e){var t=aF(e,"string");return typeof t=="symbol"?t:t+""}function aF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,qC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,oF=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,sF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},lF=["cm","mm","pt","pc","in","Q","px"];function cF(e){return lF.includes(e)}var Is="NaN";function uF(e,t){return e*sF[t]}class Nr{static parse(t){var r,[,n,i]=(r=oF.exec(t))!==null&&r!==void 0?r:[];return n==null?Nr.NaN:new Nr(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ta(t)&&(this.unit=""),r!==""&&!iF.test(r)&&(this.num=NaN,this.unit=""),cF(r)&&(this.num=uF(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ta(this.num)}}DP=Nr;rF(Nr,"NaN",new DP(NaN,""));function TP(e){if(e==null||e.includes(Is))return Is;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,s]=(r=RC.exec(t))!==null&&r!==void 0?r:[],c=Nr.parse(n??""),u=Nr.parse(s??""),m=i==="*"?c.multiply(u):c.divide(u);if(m.isNaN())return Is;t=t.replace(RC,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,g,_]=(h=qC.exec(t))!==null&&h!==void 0?h:[],x=Nr.parse(p??""),w=Nr.parse(_??""),j=g==="+"?x.add(w):x.subtract(w);if(j.isNaN())return Is;t=t.replace(qC,j.toString())}return t}var zC=/\(([^()]*)\)/;function dF(e){for(var t=e,r;(r=zC.exec(t))!=null;){var[,n]=r;t=t.replace(zC,TP(n))}return t}function fF(e){var t=e.replace(/\s+/g,"");return t=dF(t),t=TP(t),t}function mF(e){try{return fF(e)}catch{return Is}}function Wv(e){var t=mF(e.slice(5,-1));return t===Is?"":t}var hF=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],pF=["dx","dy","angle","className","breakAll"];function mb(){return mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mb.apply(null,arguments)}function LC(e,t){if(e==null)return{};var r,n,i=gF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function gF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PP=/[ \f\n\r\t\v\u2028\u2029]+/,MP=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];Pt(t)||(r?i=t.toString().split(""):i=t.toString().split(PP));var s=i.map(u=>({word:u,width:xc(u,n).width})),c=r?0:xc("",n).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function vF(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var RP=(e,t,r,n)=>e.reduce((i,s)=>{var{word:c,width:u}=s,m=i[i.length-1];if(m&&u!=null&&(t==null||n||m.width+u+r<Number(t)))m.words.push(c),m.width+=u+r;else{var h={words:[c],width:u};i.push(h)}return i},[]),qP=e=>e.reduce((t,r)=>t.width>r.width?t:r),yF="",IC=(e,t,r,n,i,s,c,u)=>{var m=e.slice(0,t),h=MP({breakAll:r,style:n,children:m+yF});if(!h)return[!1,[]];var p=RP(h.wordsWithComputedWidth,s,c,u),g=p.length>i||qP(p).width>Number(s);return[g,p]},bF=(e,t,r,n,i)=>{var{maxLines:s,children:c,style:u,breakAll:m}=e,h=ke(s),p=String(c),g=RP(t,n,r,i);if(!h||i)return g;var _=g.length>s||qP(g).width>Number(n);if(!_)return g;for(var x=0,w=p.length-1,j=0,S;x<=w&&j<=p.length-1;){var O=Math.floor((x+w)/2),C=O-1,[A,k]=IC(p,C,m,u,s,n,r,i),[D]=IC(p,O,m,u,s,n,r,i);if(!A&&!D&&(x=O+1),A&&D&&(w=O-1),!A&&D){S=k;break}j++}return S||g},UC=e=>{var t=Pt(e)?[]:e.toString().split(PP);return[{words:t,width:void 0}]},_F=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:c}=e;if((t||r)&&!zm.isSsr){var u,m,h=MP({breakAll:s,children:n,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;u=p,m=g}else return UC(n);return bF({breakAll:s,children:n,maxLines:c,style:i},u,m,t,!!r)}return UC(n)},zP="#808080",xF={angle:0,breakAll:!1,capHeight:"0.71em",fill:zP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},rh=y.forwardRef((e,t)=>{var r=xr(e,xF),{x:n,y:i,lineHeight:s,capHeight:c,fill:u,scaleToFit:m,textAnchor:h,verticalAnchor:p}=r,g=LC(r,hF),_=y.useMemo(()=>_F({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:m,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,m,g.style,g.width]),{dx:x,dy:w,angle:j,className:S,breakAll:O}=g,C=LC(g,pF);if(!va(n)||!va(i)||_.length===0)return null;var A=Number(n)+(ke(x)?x:0),k=Number(i)+(ke(w)?w:0);if(!zt(A)||!zt(k))return null;var D;switch(p){case"start":D=Wv("calc(".concat(c,")"));break;case"middle":D=Wv("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:D=Wv("calc(".concat(_.length-1," * -").concat(s,")"));break}var M=[];if(m){var L=_[0].width,{width:V}=g;M.push("scale(".concat(ke(V)&&ke(L)?V/L:1,")"))}return j&&M.push("rotate(".concat(j,", ").concat(A,", ").concat(k,")")),M.length&&(C.transform=M.join(" ")),y.createElement("text",mb({},Ir(C),{ref:t,x:A,y:k,className:st("recharts-text",S),textAnchor:h,fill:u.includes("url")?zP:u}),_.map((re,ie)=>{var X=re.words.join(O?"":" ");return y.createElement("tspan",{x:A,dy:ie===0?D:s,key:"".concat(X,"-").concat(ie)},X)}))});rh.displayName="Text";var wF=["labelRef"],jF=["content"];function BC(e,t){if(e==null)return{};var r,n,i=SF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function SF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$C(Object(r),!0).forEach(function(n){EF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EF(e,t,r){return(t=OF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OF(e){var t=CF(e,"string");return typeof t=="symbol"?t:t+""}function CF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ha(){return Ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ha.apply(null,arguments)}var LP=y.createContext(null),AF=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c,children:u}=e,m=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c}),[t,r,n,i,s,c]);return y.createElement(LP.Provider,{value:m},u)},IP=()=>{var e=y.useContext(LP),t=Tm();return e||nD(t)},NF=y.createContext(null),kF=()=>{var e=y.useContext(NF),t=De(kT);return e||t},DF=e=>{var{value:t,formatter:r}=e,n=Pt(e.children)?t:e.children;return typeof r=="function"?r(n):n},v_=e=>e!=null&&typeof e=="function",TF=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),360);return r*n},PF=(e,t,r,n,i)=>{var{offset:s,className:c}=e,{cx:u,cy:m,innerRadius:h,outerRadius:p,startAngle:g,endAngle:_,clockWise:x}=i,w=(h+p)/2,j=TF(g,_),S=j>=0?1:-1,O,C;switch(t){case"insideStart":O=g+S*s,C=x;break;case"insideEnd":O=_-S*s,C=!x;break;case"end":O=_+S*s,C=x;break;default:throw new Error("Unsupported position ".concat(t))}C=j<=0?C:!C;var A=ar(u,m,w,O),k=ar(u,m,w,O+(C?1:-1)*359),D="M".concat(A.x,",").concat(A.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),M=Pt(e.id)?jc("recharts-radial-line-"):e.id;return y.createElement("text",Ha({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",c)}),y.createElement("defs",null,y.createElement("path",{id:M,d:D})),y.createElement("textPath",{xlinkHref:"#".concat(M)},r))},MF=(e,t,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:c,startAngle:u,endAngle:m}=e,h=(u+m)/2;if(r==="outside"){var{x:p,y:g}=ar(n,i,c+t,h);return{x:p,y:g,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var _=(s+c)/2,{x,y:w}=ar(n,i,_,h);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},hb=e=>"cx"in e&&ke(e.cx),RF=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,s;r!=null&&!hb(r)&&(s=r);var{x:c,y:u,upperWidth:m,lowerWidth:h,height:p}=t,g=c,_=c+(m-h)/2,x=(g+_)/2,w=(m+h)/2,j=g+m/2,S=p>=0?1:-1,O=S*n,C=S>0?"end":"start",A=S>0?"start":"end",k=m>=0?1:-1,D=k*n,M=k>0?"end":"start",L=k>0?"start":"end";if(i==="top"){var V={x:g+m/2,y:u-O,textAnchor:"middle",verticalAnchor:C};return Xt(Xt({},V),s?{height:Math.max(u-s.y,0),width:m}:{})}if(i==="bottom"){var re={x:_+h/2,y:u+p+O,textAnchor:"middle",verticalAnchor:A};return Xt(Xt({},re),s?{height:Math.max(s.y+s.height-(u+p),0),width:h}:{})}if(i==="left"){var ie={x:x-D,y:u+p/2,textAnchor:M,verticalAnchor:"middle"};return Xt(Xt({},ie),s?{width:Math.max(ie.x-s.x,0),height:p}:{})}if(i==="right"){var X={x:x+w+D,y:u+p/2,textAnchor:L,verticalAnchor:"middle"};return Xt(Xt({},X),s?{width:Math.max(s.x+s.width-X.x,0),height:p}:{})}var I=s?{width:w,height:p}:{};return i==="insideLeft"?Xt({x:x+D,y:u+p/2,textAnchor:L,verticalAnchor:"middle"},I):i==="insideRight"?Xt({x:x+w-D,y:u+p/2,textAnchor:M,verticalAnchor:"middle"},I):i==="insideTop"?Xt({x:g+m/2,y:u+O,textAnchor:"middle",verticalAnchor:A},I):i==="insideBottom"?Xt({x:_+h/2,y:u+p-O,textAnchor:"middle",verticalAnchor:C},I):i==="insideTopLeft"?Xt({x:g+D,y:u+O,textAnchor:L,verticalAnchor:A},I):i==="insideTopRight"?Xt({x:g+m-D,y:u+O,textAnchor:M,verticalAnchor:A},I):i==="insideBottomLeft"?Xt({x:_+D,y:u+p-O,textAnchor:L,verticalAnchor:C},I):i==="insideBottomRight"?Xt({x:_+h-D,y:u+p-O,textAnchor:M,verticalAnchor:C},I):i&&typeof i=="object"&&(ke(i.x)||Wa(i.x))&&(ke(i.y)||Wa(i.y))?Xt({x:c+Tr(i.x,w),y:u+Tr(i.y,p),textAnchor:"end",verticalAnchor:"end"},I):Xt({x:j,y:u+p/2,textAnchor:"middle",verticalAnchor:"middle"},I)},qF={angle:0,offset:5,zIndex:ir.label,position:"middle",textBreakAll:!1};function Ui(e){var t=xr(e,qF),{viewBox:r,position:n,value:i,children:s,content:c,className:u="",textBreakAll:m,labelRef:h}=t,p=kF(),g=IP(),_=n==="center"?g:p??g,x,w,j;if(r==null?x=_:hb(r)?x=r:x=nD(r),!x||Pt(i)&&Pt(s)&&!y.isValidElement(c)&&typeof c!="function")return null;var S=Xt(Xt({},t),{},{viewBox:x});if(y.isValidElement(c)){var{labelRef:O}=S,C=BC(S,wF);return y.cloneElement(c,C)}if(typeof c=="function"){var{content:A}=S,k=BC(S,jF);if(w=y.createElement(c,k),y.isValidElement(w))return w}else w=DF(t);var D=Ir(t);if(hb(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return PF(t,n,w,D,x);j=MF(x,t.offset,t.position)}else j=RF(t,x);return y.createElement(Jr,{zIndex:t.zIndex},y.createElement(rh,Ha({ref:h,className:st("recharts-label",u)},D,j,{textAnchor:vF(D.textAnchor)?D.textAnchor:j.textAnchor,breakAll:m}),w))}Ui.displayName="Label";var zF=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(Ui,Ha({key:"label-implicit"},n)):va(e)?y.createElement(Ui,Ha({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===Ui?y.cloneElement(e,Xt({key:"label-implicit"},n)):y.createElement(Ui,Ha({key:"label-implicit",content:e},n)):v_(e)?y.createElement(Ui,Ha({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(Ui,Ha({},e,{key:"label-implicit"},n)):null};function LF(e){var{label:t,labelRef:r}=e,n=IP();return zF(t,n,r)||null}var Xv={},Zv={},HC;function IF(){return HC||(HC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Zv)),Zv}var Qv={},FC;function UF(){return FC||(FC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Qv)),Qv}var KC;function BF(){return KC||(KC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=IF(),r=UF(),n=Gb();function i(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=i})(Xv)),Xv}var Jv,YC;function $F(){return YC||(YC=1,Jv=BF().last),Jv}var HF=$F();const FF=ri(HF);var KF=["valueAccessor"],YF=["dataKey","clockWise","id","textBreakAll","zIndex"];function Qf(){return Qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qf.apply(null,arguments)}function GC(e,t){if(e==null)return{};var r,n,i=GF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function GF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VF=e=>Array.isArray(e.value)?FF(e.value):e.value,UP=y.createContext(void 0),BP=UP.Provider,$P=y.createContext(void 0),WF=$P.Provider;function XF(){return y.useContext(UP)}function ZF(){return y.useContext($P)}function uf(e){var{valueAccessor:t=VF}=e,r=GC(e,KF),{dataKey:n,clockWise:i,id:s,textBreakAll:c,zIndex:u}=r,m=GC(r,YF),h=XF(),p=ZF(),g=h||p;return!g||!g.length?null:y.createElement(Jr,{zIndex:u??ir.label},y.createElement(_r,{className:"recharts-label-list"},g.map((_,x)=>{var w,j=Pt(n)?t(_,x):vt(_&&_.payload,n),S=Pt(s)?{}:{id:"".concat(s,"-").concat(x)};return y.createElement(Ui,Qf({key:"label-".concat(x)},Ir(_),m,S,{fill:(w=r.fill)!==null&&w!==void 0?w:_.fill,parentViewBox:_.parentViewBox,value:j,textBreakAll:c,viewBox:_.viewBox,index:x,zIndex:0}))})))}uf.displayName="LabelList";function y_(e){var{label:t}=e;return t?t===!0?y.createElement(uf,{key:"labelList-implicit"}):y.isValidElement(t)||v_(t)?y.createElement(uf,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(uf,Qf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pb.apply(null,arguments)}var HP=e=>{var{cx:t,cy:r,r:n,className:i}=e,s=st("recharts-dot",i);return ke(t)&&ke(r)&&ke(n)?y.createElement("circle",pb({},vn(e),Yb(e),{className:s,cx:t,cy:r,r:n})):null},FP=e=>e.graphicalItems.polarItems,QF=W([Rt,ru],U0),nh=W([FP,Lt,QF],B0),JF=W([nh],$0),ah=W([JF,Fm],H0),eK=W([ah,Lt,nh],K0);W([ah,Lt,nh],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var s,c=vt(n,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:vt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var VC=()=>{},tK=W([ah,Lt,nh,Qm,Rt],W0),rK=W([Lt,G0,V0,VC,tK,VC,et,Rt],X0),KP=W([Lt,et,ah,eK,tu,Rt,rK],Z0),nK=W([KP,Lt,al],e_);W([Lt,KP,nK,Rt],r_);var aK={radiusAxis:{},angleAxis:{}},YP=Qr({name:"polarAxis",initialState:aK,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:$Z,removeRadiusAxis:HZ,addAngleAxis:FZ,removeAngleAxis:KZ}=YP.actions,iK=YP.reducer;function WC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WC(Object(r),!0).forEach(function(n){oK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oK(e,t,r){return(t=sK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sK(e){var t=lK(e,"string");return typeof t=="symbol"?t:t+""}function lK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cK=(e,t)=>t,b_=W([FP,cK],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),uK=[],__=(e,t,r)=>r?.length===0?uK:r,GP=W([Fm,b_,__],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(s=>XC(XC({},t.presentationProps),s.props))),i!=null)return i}}),dK=W([GP,b_,__],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var s,c=vt(n,t.nameKey,t.name),u;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?u=n.fill:u=t.fill,{value:Qs(c,t.dataKey),color:u,payload:n,type:t.legendType}})}),fK=W([GP,b_,__,dr],(e,t,r,n)=>{if(!(t==null||e==null))return hY({offset:n,pieSettings:t,displayedData:e,cells:r})}),ey={exports:{}},gt={};var ZC;function mK(){if(ZC)return gt;ZC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case r:case i:case n:case m:case h:case _:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case g:case p:return j;case s:return j;default:return S}}case t:return S}}}return gt.ContextConsumer=s,gt.ContextProvider=c,gt.Element=e,gt.ForwardRef=u,gt.Fragment=r,gt.Lazy=g,gt.Memo=p,gt.Portal=t,gt.Profiler=i,gt.StrictMode=n,gt.Suspense=m,gt.SuspenseList=h,gt.isContextConsumer=function(j){return w(j)===s},gt.isContextProvider=function(j){return w(j)===c},gt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},gt.isForwardRef=function(j){return w(j)===u},gt.isFragment=function(j){return w(j)===r},gt.isLazy=function(j){return w(j)===g},gt.isMemo=function(j){return w(j)===p},gt.isPortal=function(j){return w(j)===t},gt.isProfiler=function(j){return w(j)===i},gt.isStrictMode=function(j){return w(j)===n},gt.isSuspense=function(j){return w(j)===m},gt.isSuspenseList=function(j){return w(j)===h},gt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===i||j===n||j===m||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===p||j.$$typeof===c||j.$$typeof===s||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},gt.typeOf=w,gt}var QC;function hK(){return QC||(QC=1,ey.exports=mK()),ey.exports}var pK=hK(),JC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",eA=null,ty=null,VP=e=>{if(e===eA&&Array.isArray(ty))return ty;var t=[];return y.Children.forEach(e,r=>{Pt(r)||(pK.isFragment(r)?t=t.concat(VP(r.props.children)):t.push(r))}),ty=t,eA=e,t};function x_(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>JC(i)):n=[JC(t)],VP(e).forEach(i=>{var s=zo(i,"type.displayName")||zo(i,"type.name");s&&n.indexOf(s)!==-1&&r.push(i)}),r}var WP=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,ry={},tA;function gK(){return tA||(tA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(ry)),ry}var ny,rA;function vK(){return rA||(rA=1,ny=gK().isPlainObject),ny}var yK=vK();const bK=ri(yK);var nA,aA,iA,oA,sA;function lA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lA(Object(r),!0).forEach(function(n){_K(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _K(e,t,r){return(t=xK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xK(e){var t=wK(e,"string");return typeof t=="symbol"?t:t+""}function wK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jf.apply(null,arguments)}function hc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var uA=(e,t,r,n,i)=>{var s=r-n,c;return c=Ft(nA||(nA=hc(["M ",",",""])),e,t),c+=Ft(aA||(aA=hc(["L ",",",""])),e+r,t),c+=Ft(iA||(iA=hc(["L ",",",""])),e+r-s/2,t+i),c+=Ft(oA||(oA=hc(["L ",",",""])),e+r-s/2-n,t+i),c+=Ft(sA||(sA=hc(["L ",","," Z"])),e,t),c},jK={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},SK=e=>{var t=xr(e,jK),{x:r,y:n,upperWidth:i,lowerWidth:s,height:c,className:u}=t,{animationEasing:m,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t,_=y.useRef(null),[x,w]=y.useState(-1),j=y.useRef(i),S=y.useRef(s),O=y.useRef(c),C=y.useRef(r),A=y.useRef(n),k=Xc(e,"trapezoid-");if(y.useEffect(()=>{if(_.current&&_.current.getTotalLength)try{var ge=_.current.getTotalLength();ge&&w(ge)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||c!==+c||i===0&&s===0||c===0)return null;var D=st("recharts-trapezoid",u);if(!g)return y.createElement("g",null,y.createElement("path",Jf({},Ir(t),{className:D,d:uA(r,n,i,s,c)})));var M=j.current,L=S.current,V=O.current,re=C.current,ie=A.current,X="0px ".concat(x===-1?1:x,"px"),I="".concat(x,"px 0px"),ce=yD(["strokeDasharray"],h,m);return y.createElement(Wc,{animationId:k,key:k,canBegin:x>0,duration:h,easing:m,isActive:g,begin:p},ge=>{var q=kt(M,i,ge),R=kt(L,s,ge),U=kt(V,c,ge),Q=kt(re,r,ge),B=kt(ie,n,ge);_.current&&(j.current=q,S.current=R,O.current=U,C.current=Q,A.current=B);var fe=ge>0?{transition:ce,strokeDasharray:I}:{strokeDasharray:X};return y.createElement("path",Jf({},Ir(t),{className:D,d:uA(Q,B,q,R,U),ref:_,style:cA(cA({},fe),t.style)}))})},EK=["option","shapeType","activeClassName"];function OK(e,t){if(e==null)return{};var r,n,i=CK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function CK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function em(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(r),!0).forEach(function(n){AK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AK(e,t,r){return(t=NK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NK(e){var t=kK(e,"string");return typeof t=="symbol"?t:t+""}function kK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DK(e,t){return em(em({},t),e)}function TK(e,t){return e==="symbols"}function fA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(wD,r);case"trapezoid":return y.createElement(SK,r);case"sector":return y.createElement(OD,r);case"symbols":if(TK(t))return y.createElement(ak,r);break;case"curve":return y.createElement(i0,r);default:return null}}function PK(e){return y.isValidElement(e)?e.props:e}function w_(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=OK(e,EK),s;if(y.isValidElement(t))s=y.cloneElement(t,em(em({},i),PK(t)));else if(typeof t=="function")s=t(i,i.index);else if(bK(t)&&typeof t!="boolean"){var c=DK(t,i);s=y.createElement(fA,{shapeType:r,elementProps:c})}else{var u=i;s=y.createElement(fA,{shapeType:r,elementProps:u})}return i.isActive?y.createElement(_r,{className:n},s):s}var j_=(e,t,r)=>{var n=Mt();return(i,s)=>c=>{e?.(i,s,c),n(sP({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},S_=e=>{var t=Mt();return(r,n)=>i=>{e?.(r,n,i),t(UH())}},E_=(e,t,r)=>{var n=Mt();return(i,s)=>c=>{e?.(i,s,c),n(BH({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function O_(e){var{tooltipEntrySettings:t}=e,r=Mt(),n=Pr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(qH(t)):i.current!==t&&r(zH({prev:i.current,next:t})),i.current=t)},[t,r,n]),y.useLayoutEffect(()=>()=>{i.current&&(r(LH(i.current)),i.current=null)},[r]),null}function XP(e){var{legendPayload:t}=e,r=Mt(),n=Pr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(hD(t)):i.current!==t&&r(pD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(gD(i.current)),i.current=null)},[r]),null}function MK(e){var{legendPayload:t}=e,r=Mt(),n=De(et),i=y.useRef(null);return y.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(hD(t)):i.current!==t&&r(pD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(gD(i.current)),i.current=null)},[r]),null}var ay,RK=()=>{var[e]=y.useState(()=>jc("uid-"));return e},qK=(ay=pq.useId)!==null&&ay!==void 0?ay:RK;function zK(e,t){var r=qK();return t||(e?"".concat(e,"-").concat(r):r)}var LK=y.createContext(void 0),C_=e=>{var{id:t,type:r,children:n}=e,i=zK("recharts-".concat(r),t);return y.createElement(LK.Provider,{value:i},n(i))},IK={cartesianItems:[],polarItems:[]},ZP=Qr({name:"graphicalItems",initialState:IK,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Nt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ea(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Nt()},removeCartesianGraphicalItem:{reducer(e,t){var r=ea(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Nt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Nt()},removePolarGraphicalItem:{reducer(e,t){var r=ea(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Nt()}}}),{addCartesianGraphicalItem:UK,replaceCartesianGraphicalItem:BK,removeCartesianGraphicalItem:$K,addPolarGraphicalItem:HK,removePolarGraphicalItem:FK}=ZP.actions,KK=ZP.reducer,YK=e=>{var t=Mt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(UK(e)):r.current!==e&&t(BK({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t($K(r.current)),r.current=null)},[t]),null},QP=y.memo(YK);function GK(e){var t=Mt();return y.useLayoutEffect(()=>(t(HK(e)),()=>{t(FK(e))}),[t,e]),null}var VK=["key"],WK=["onMouseEnter","onClick","onMouseLeave"],XK=["id"],ZK=["id"];function mA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(r),!0).forEach(function(n){QK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QK(e,t,r){return(t=JK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JK(e){var t=eY(e,"string");return typeof t=="symbol"?t:t+""}function eY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xi.apply(null,arguments)}function ih(e,t){if(e==null)return{};var r,n,i=tY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rY(e){var t=y.useMemo(()=>x_(e.children,uu),[e.children]),r=De(n=>dK(n,e.id,t));return r==null?null:y.createElement(MK,{legendPayload:r})}var nY=y.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:c,name:u,hide:m,tooltipType:h,id:p}=e,g={dataDefinedOnItem:n.map(_=>_.tooltipPayload),positions:n.map(_=>_.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:c,dataKey:t,nameKey:r,name:Qs(u,t),hide:m,type:h,color:c,unit:"",graphicalItemId:p}};return y.createElement(O_,{tooltipEntrySettings:g})}),aY=(e,t)=>e>t?"start":e<t?"end":"middle",iY=(e,t,r)=>Tr(typeof t=="function"?t(e):t,r,r*.8),oY=(e,t,r)=>{var{top:n,left:i,width:s,height:c}=t,u=jD(s,c),m=i+Tr(e.cx,s,s/2),h=n+Tr(e.cy,c,c/2),p=Tr(e.innerRadius,u,0),g=iY(r,e.outerRadius,u),_=e.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:m,cy:h,innerRadius:p,outerRadius:g,maxRadius:_}},sY=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function lY(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var cY=(e,t)=>{if(y.isValidElement(e))return y.cloneElement(e,t);if(typeof e=="function")return e(t);var r=st("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=ih(t,VK);return y.createElement(i0,Xi({},i,{type:"linear",className:r}))},uY=(e,t,r)=>{if(y.isValidElement(e))return y.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),y.isValidElement(n)))return n;var i=st("recharts-pie-label-text",lY(e));return y.createElement(rh,Xi({},t,{alignmentBaseline:"middle",className:i}),n)};function dY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:s,dataKey:c}=r;if(!n||!i||!t)return null;var u=vn(r),m=Ro(i),h=Ro(s),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((_,x)=>{var w=(_.startAngle+_.endAngle)/2,j=ar(_.cx,_.cy,_.outerRadius+p,w),S=Kt(Kt(Kt(Kt({},u),_),{},{stroke:"none"},m),{},{index:x,textAnchor:aY(j.x,_.cx)},j),O=Kt(Kt(Kt(Kt({},u),_),{},{fill:"none",stroke:_.fill},h),{},{index:x,points:[ar(_.cx,_.cy,_.outerRadius,w),j],key:"line"});return y.createElement(Jr,{zIndex:ir.label,key:"label-".concat(_.startAngle,"-").concat(_.endAngle,"-").concat(_.midAngle,"-").concat(x)},y.createElement(_r,null,s&&cY(s,O),uY(i,S,vt(_,c))))});return y.createElement(_r,{className:"recharts-pie-labels"},g)}function fY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?y.createElement(y_,{label:i}):y.createElement(dY,{sectors:t,props:r,showLabels:n})}function mY(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:s,id:c}=e,u=De(Wi),m=De(d_),h=De(O9),{onMouseEnter:p,onClick:g,onMouseLeave:_}=i,x=ih(i,WK),w=j_(p,i.dataKey,c),j=S_(_),S=E_(g,i.dataKey,c);return t==null||t.length===0?null:y.createElement(y.Fragment,null,t.map((O,C)=>{if(O?.startAngle===0&&O?.endAngle===0&&t.length!==1)return null;var A=h==null||h===c,k=String(C)===u&&(m==null||i.dataKey===m)&&A,D=u?n:null,M=r&&k?r:D,L=Kt(Kt({},O),{},{stroke:O.stroke,tabIndex:-1,[Qk]:C,[Jk]:c});return y.createElement(_r,Xi({key:"sector-".concat(O?.startAngle,"-").concat(O?.endAngle,"-").concat(O.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},vm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),y.createElement(w_,Xi({option:s??M,index:C,shapeType:"sector",isActive:k},L)))}))}function hY(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:s}=e,{cornerRadius:c,startAngle:u,endAngle:m,dataKey:h,nameKey:p,tooltipType:g}=r,_=Math.abs(r.minAngle),x=sY(u,m),w=Math.abs(x),j=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,S=n.filter(M=>vt(M,h,0)!==0).length,O=(w>=360?S:S-1)*j,C=w-S*_-O,A=n.reduce((M,L)=>{var V=vt(L,h,0);return M+(ke(V)?V:0)},0),k;if(A>0){var D;k=n.map((M,L)=>{var V=vt(M,h,0),re=vt(M,p,L),ie=oY(r,s,M),X=(ke(V)?V:0)/A,I,ce=Kt(Kt({},M),i&&i[L]&&i[L].props);L?I=D.endAngle+br(x)*j*(V!==0?1:0):I=u;var ge=I+br(x)*((V!==0?_:0)+X*C),q=(I+ge)/2,R=(ie.innerRadius+ie.outerRadius)/2,U=[{name:re,value:V,payload:ce,dataKey:h,type:g,graphicalItemId:r.id}],Q=ar(ie.cx,ie.cy,R,q);return D=Kt(Kt(Kt(Kt({},r.presentationProps),{},{percent:X,cornerRadius:typeof c=="string"?parseFloat(c):c,name:re,tooltipPayload:U,midAngle:q,middleRadius:R,tooltipPosition:Q},ce),ie),{},{value:V,dataKey:h,startAngle:I,endAngle:ge,payload:ce,paddingAngle:br(x)*j}),D})}return k}function pY(e){var{showLabels:t,sectors:r,children:n}=e,i=y.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return y.createElement(WF,{value:t?i:void 0},n)}function gY(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,activeShape:h,inactiveShape:p,onAnimationStart:g,onAnimationEnd:_}=t,x=Xc(t,"recharts-pie-"),w=r.current,[j,S]=y.useState(!1),O=y.useCallback(()=>{typeof _=="function"&&_(),S(!1)},[_]),C=y.useCallback(()=>{typeof g=="function"&&g(),S(!0)},[g]);return y.createElement(pY,{showLabels:!j,sectors:i},y.createElement(Wc,{animationId:x,begin:c,duration:u,isActive:s,easing:m,onAnimationStart:C,onAnimationEnd:O,key:x},A=>{var k=[],D=i&&i[0],M=D?.startAngle;return i?.forEach((L,V)=>{var re=w&&w[V],ie=V>0?zo(L,"paddingAngle",0):0;if(re){var X=kt(re.endAngle-re.startAngle,L.endAngle-L.startAngle,A),I=Kt(Kt({},L),{},{startAngle:M+ie,endAngle:M+X+ie});k.push(I),M=I.endAngle}else{var{endAngle:ce,startAngle:ge}=L,q=kt(0,ce-ge,A),R=Kt(Kt({},L),{},{startAngle:M+ie,endAngle:M+q+ie});k.push(R),M=R.endAngle}}),r.current=k,y.createElement(_r,null,y.createElement(mY,{sectors:k,activeShape:h,inactiveShape:p,allOtherPieProps:t,shape:t.shape,id:n}))}),y.createElement(fY,{showLabels:!j,sectors:i,props:t}),t.children)}var vY={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ir.area};function yY(e){var{id:t}=e,r=ih(e,XK),{hide:n,className:i,rootTabIndex:s}=e,c=y.useMemo(()=>x_(e.children,uu),[e.children]),u=De(p=>fK(p,t,c)),m=y.useRef(null),h=st("recharts-pie",i);return n||u==null?(m.current=null,y.createElement(_r,{tabIndex:s,className:h})):y.createElement(Jr,{zIndex:e.zIndex},y.createElement(nY,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:u,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),y.createElement(_r,{tabIndex:s,className:h},y.createElement(gY,{props:Kt(Kt({},r),{},{sectors:u}),previousSectorsRef:m,id:t})))}function JP(e){var t=xr(e,vY),{id:r}=t,n=ih(t,ZK),i=vn(n);return y.createElement(C_,{id:r,type:"pie"},s=>y.createElement(y.Fragment,null,y.createElement(GK,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),y.createElement(rY,Xi({},n,{id:s})),y.createElement(yY,Xi({},n,{id:s}))))}JP.displayName="Pie";var bY=["points"];function hA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(r),!0).forEach(function(n){_Y(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Y(e,t,r){return(t=xY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xY(e){var t=wY(e,"string");return typeof t=="symbol"?t:t+""}function wY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tm.apply(null,arguments)}function jY(e,t){if(e==null)return{};var r,n,i=SY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function SY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function EY(e){var{option:t,dotProps:r,className:n}=e;if(y.isValidElement(t))return y.cloneElement(t,r);if(typeof t=="function")return t(r);var i=st(n,typeof t!="boolean"?t.className:""),s=r??{},{points:c}=s,u=jY(s,bY);return y.createElement(HP,tm({},u,{className:i}))}function OY(e,t){return e==null?!1:t?!0:e.length===1}function CY(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:s,baseProps:c,needClip:u,clipPathId:m,zIndex:h=ir.scatter}=e;if(!OY(t,r))return null;var p=WP(r),g=m3(r),_=t.map((w,j)=>{var S,O,C=iy(iy(iy({r:3},c),g),{},{index:j,cx:(S=w.x)!==null&&S!==void 0?S:void 0,cy:(O=w.y)!==null&&O!==void 0?O:void 0,dataKey:s,value:w.value,payload:w.payload,points:t});return y.createElement(EY,{key:"dot-".concat(j),option:r,dotProps:C,className:i})}),x={};return u&&m!=null&&(x.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(m,")")),y.createElement(Jr,{zIndex:h},y.createElement(_r,tm({className:n},x),_))}function pA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pA(Object(r),!0).forEach(function(n){AY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AY(e,t,r){return(t=NY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NY(e){var t=kY(e,"string");return typeof t=="symbol"?t:t+""}function kY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eM=0,DY={xAxis:{},yAxis:{},zAxis:{}},tM=Qr({name:"cartesianAxis",initialState:DY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Nt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Nt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Nt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Nt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Nt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Nt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Nt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Nt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Nt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var c=[...s,n].slice(-3);e.yAxis[r]=gA(gA({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:TY,replaceXAxis:PY,removeXAxis:MY,addYAxis:RY,replaceYAxis:qY,removeYAxis:zY,addZAxis:YZ,replaceZAxis:GZ,removeZAxis:VZ,updateYAxisWidth:LY}=tM.actions,IY=tM.reducer,UY=W([dr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),BY=W([UY,ai,ii],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),A_=()=>De(BY),$Y=()=>De(D9);function vA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function oy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(r),!0).forEach(function(n){HY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HY(e,t,r){return(t=FY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FY(e){var t=KY(e,"string");return typeof t=="symbol"?t:t+""}function KY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YY=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:s,clipPath:c}=e;if(i===!1||t.x==null||t.y==null)return null;var u={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=oy(oy(oy({},u),Ro(i)),Yb(i)),h;return y.isValidElement(i)?h=y.cloneElement(i,m):typeof i=="function"?h=i(m):h=y.createElement(HP,m),y.createElement(_r,{className:"recharts-active-dot",clipPath:c},h)};function GY(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:s,zIndex:c=ir.activeDot}=e,u=De(Wi),m=$Y();if(t==null||m==null)return null;var h=t.find(p=>m.includes(p.payload));return Pt(h)?null:y.createElement(Jr,{zIndex:c},y.createElement(YY,{point:h,childIndex:Number(u),mainColor:r,dataKey:i,activeDot:n,clipPath:s}))}var yA=(e,t,r)=>{var n=r??e;if(!Pt(n))return Tr(n,t,0)},VY=(e,t,r)=>{var n={},i=e.filter(Gm),s=e.filter(h=>h.stackId==null),c=i.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),n),u=Object.entries(c).map(h=>{var[p,g]=h,_=g.map(w=>w.dataKey),x=yA(t,r,g[0].barSize);return{stackId:p,dataKeys:_,barSize:x}}),m=s.map(h=>{var p=[h.dataKey].filter(_=>_!=null),g=yA(t,r,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...u,...m]};function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(n){WY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WY(e,t,r){return(t=XY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XY(e){var t=ZY(e,"string");return typeof t=="symbol"?t:t+""}function ZY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QY(e,t,r,n,i){var s=n.length;if(!(s<1)){var c=Tr(e,r,0,!0),u,m=[];if(zt(n[0].barSize)){var h=!1,p=r/s,g=n.reduce((O,C)=>O+(C.barSize||0),0);g+=(s-1)*c,g>=r&&(g-=(s-1)*c,c=0),g>=r&&p>0&&(h=!0,p*=.9,g=s*p);var _=(r-g)/2>>0,x={offset:_-c,size:0};u=n.reduce((O,C)=>{var A,k={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:x.offset+x.size+c,size:h?p:(A=C.barSize)!==null&&A!==void 0?A:0}},D=[...O,k];return x=D[D.length-1].position,D},m)}else{var w=Tr(t,r,0,!0);r-2*w-(s-1)*c<=0&&(c=0);var j=(r-2*w-(s-1)*c)/s;j>1&&(j>>=0);var S=zt(i)?Math.min(j,i):j;u=n.reduce((O,C,A)=>[...O,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:w+(j+c)*A+(j-S)/2,size:S}}],m)}return u}}var JY=(e,t,r,n,i,s,c)=>{var u=Pt(c)?t:c,m=QY(r,n,i!==s?i:s,e,u);return i!==s&&m!=null&&(m=m.map(h=>Vd(Vd({},h),{},{position:Vd(Vd({},h.position),{},{offset:h.position.offset-i/2})}))),m},eG=(e,t)=>{var r=L0(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===r)}}}};function tG(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&zt(e.zIndex)?e.zIndex:t}var rM=e=>{var{chartData:t}=e,r=Mt(),n=Pr();return y.useEffect(()=>n?()=>{}:(r(OC(t)),()=>{r(OC(void 0))}),[t,r,n]),null},_A={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},nM=Qr({name:"brush",initialState:_A,reducers:{setBrushSettings(e,t){return t.payload==null?_A:t.payload}}}),{setBrushSettings:WZ}=nM.actions,rG=nM.reducer;function xA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(r),!0).forEach(function(n){aM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aM(e,t,r){return(t=nG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nG(e){var t=aG(e,"string");return typeof t=="symbol"?t:t+""}function aG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iG=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return{x:Math.min(r,i),y:Math.min(n,s),width:Math.abs(i-r),height:Math.abs(s-n)}},XZ=e=>{var{x1:t,y1:r,x2:n,y2:i}=e;return iG({x:t,y:r},{x:n,y:i})};class oh{static create(t){return new oh(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}aM(oh,"EPS",1e-4);var ZZ=e=>{var t=Object.keys(e).reduce((r,n)=>Wd(Wd({},r),{},{[n]:oh.create(e[n])}),{});return Wd(Wd({},t),{},{apply(r){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(r).map(s=>{var[c,u]=s;return[c,t[c].apply(u,{bandAware:n,position:i})]}))},isInRange(r){return Object.keys(r).every(n=>t[n].isInRange(r[n]))}})};function oG(e){return(e%180+180)%180}var sG=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=oG(i),c=s*Math.PI/180,u=Math.atan(n/r),m=c>u&&c<Math.PI-u?n/Math.sin(c):r/Math.cos(c);return Math.abs(m)},lG={dots:[],areas:[],lines:[]},iM=Qr({name:"referenceElements",initialState:lG,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ea(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ea(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ea(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:QZ,removeDot:JZ,addArea:eQ,removeArea:tQ,addLine:rQ,removeLine:nQ}=iM.actions,cG=iM.reducer,oM=y.createContext(void 0),uG=e=>{var{children:t}=e,[r]=y.useState("".concat(jc("recharts"),"-clip")),n=A_();if(n==null)return null;var{x:i,y:s,width:c,height:u}=n;return y.createElement(oM.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:i,y:s,height:u,width:c}))),t)},aQ=()=>y.useContext(oM);function sM(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function dG(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return sG(n,r)}function fG(e,t,r){var n=r==="width",{x:i,y:s,width:c,height:u}=e;return t===1?{start:n?i:s,end:n?i+c:s+u}:{start:n?i+c:s+u,end:n?i:s}}function zc(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function mG(e,t){return sM(e,t+1)}function hG(e,t,r,n,i){for(var s=(n||[]).slice(),{start:c,end:u}=t,m=0,h=1,p=c,g=function(){var w=n?.[m];if(w===void 0)return{v:sM(n,h)};var j=m,S,O=()=>(S===void 0&&(S=r(w,j)),S),C=w.coordinate,A=m===0||zc(e,C,O,p,u);A||(m=0,p=c,h+=1),A&&(p=C+e*(O()/2+i),m+=h)},_;h<=s.length;)if(_=g(),_)return _.v;return[]}function pG(e,t,r,n,i){var s=(n||[]).slice(),c=s.length;if(c===0)return[];for(var{start:u,end:m}=t,h=1;h<=c;h++){for(var p=(c-1)%h,g=u,_=!0,x=function(){var C=n[w],A=w,k,D=()=>(k===void 0&&(k=r(C,A)),k),M=C.coordinate,L=w===p||zc(e,M,D,g,m);if(!L)return _=!1,1;L&&(g=M+e*(D()/2+i))},w=p;w<c&&!x();w+=h);if(_){for(var j=[],S=p;S<c;S+=h)j.push(n[S]);return j}}return[]}function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){gG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gG(e,t,r){return(t=vG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vG(e){var t=yG(e,"string");return typeof t=="symbol"?t:t+""}function yG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bG(e,t,r,n,i){for(var s=(n||[]).slice(),c=s.length,{start:u}=t,{end:m}=t,h=function(_){var x=s[_],w,j=()=>(w===void 0&&(w=r(x,_)),w);if(_===c-1){var S=e*(x.coordinate+e*j()/2-m);s[_]=x=kr(kr({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else s[_]=x=kr(kr({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var O=zc(e,x.tickCoord,j,u,m);O&&(m=x.tickCoord-e*(j()/2+i),s[_]=kr(kr({},x),{},{isShow:!0}))}},p=c-1;p>=0;p--)h(p);return s}function _G(e,t,r,n,i,s){var c=(n||[]).slice(),u=c.length,{start:m,end:h}=t;if(s){var p=n[u-1],g=r(p,u-1),_=e*(p.coordinate+e*g/2-h);if(c[u-1]=p=kr(kr({},p),{},{tickCoord:_>0?p.coordinate-_*e:p.coordinate}),p.tickCoord!=null){var x=zc(e,p.tickCoord,()=>g,m,h);x&&(h=p.tickCoord-e*(g/2+i),c[u-1]=kr(kr({},p),{},{isShow:!0}))}}for(var w=s?u-1:u,j=function(C){var A=c[C],k,D=()=>(k===void 0&&(k=r(A,C)),k);if(C===0){var M=e*(A.coordinate-e*D()/2-m);c[C]=A=kr(kr({},A),{},{tickCoord:M<0?A.coordinate-M*e:A.coordinate})}else c[C]=A=kr(kr({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var L=zc(e,A.tickCoord,D,m,h);L&&(m=A.tickCoord+e*(D()/2+i),c[C]=kr(kr({},A),{},{isShow:!0}))}},S=0;S<w;S++)j(S);return c}function N_(e,t,r){var{tick:n,ticks:i,viewBox:s,minTickGap:c,orientation:u,interval:m,tickFormatter:h,unit:p,angle:g}=e;if(!i||!i.length||!n)return[];if(ke(m)||zm.isSsr){var _;return(_=mG(i,ke(m)?m:0))!==null&&_!==void 0?_:[]}var x=[],w=u==="top"||u==="bottom"?"width":"height",j=p&&w==="width"?xc(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(A,k)=>{var D=typeof h=="function"?h(A.value,k):A.value;return w==="width"?dG(xc(D,{fontSize:t,letterSpacing:r}),j,g):xc(D,{fontSize:t,letterSpacing:r})[w]},O=i.length>=2?br(i[1].coordinate-i[0].coordinate):1,C=fG(s,O,w);return m==="equidistantPreserveStart"?hG(O,C,S,i,c):m==="equidistantPreserveEnd"?pG(O,C,S,i,c):(m==="preserveStart"||m==="preserveStartEnd"?x=_G(O,C,S,i,c,m==="preserveStartEnd"):x=bG(O,C,S,i,c),x.filter(A=>A.isShow))}var xG=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=e,c=0;if(t){Array.from(t).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>c&&(c=g.width)}});var u=r?r.getBoundingClientRect().width:0,m=i+s,h=c+m+u+(r?n:0);return Math.round(h)}return 0},wG=["axisLine","width","height","className","hide","ticks","axisType"];function jG(e,t){if(e==null)return{};var r,n,i=SG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function SG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$o.apply(null,arguments)}function jA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(r),!0).forEach(function(n){EG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EG(e,t,r){return(t=OG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OG(e){var t=CG(e,"string");return typeof t=="symbol"?t:t+""}function CG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ga={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ir.axis};function AG(e){var{x:t,y:r,width:n,height:i,orientation:s,mirror:c,axisLine:u,otherSvgProps:m}=e;if(!u)return null;var h=nr(nr(nr({},m),vn(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!c||s==="bottom"&&c);h=nr(nr({},h),{},{x1:t,y1:r+p*i,x2:t+n,y2:r+p*i})}else{var g=+(s==="left"&&!c||s==="right"&&c);h=nr(nr({},h),{},{x1:t+g*n,y1:r,x2:t+g*n,y2:r+i})}return y.createElement("line",$o({},h,{className:st("recharts-cartesian-axis-line",zo(u,"className"))}))}function NG(e,t,r,n,i,s,c,u,m){var h,p,g,_,x,w,j=u?-1:1,S=e.tickSize||c,O=ke(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=p=e.coordinate,_=r+ +!u*i,g=_-j*S,w=g-j*m,x=O;break;case"left":g=_=e.coordinate,p=t+ +!u*n,h=p-j*S,x=h-j*m,w=O;break;case"right":g=_=e.coordinate,p=t+ +u*n,h=p+j*S,x=h+j*m,w=O;break;default:h=p=e.coordinate,_=r+ +u*i,g=_+j*S,w=g+j*m,x=O;break}return{line:{x1:h,y1:g,x2:p,y2:_},tick:{x,y:w}}}function kG(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function DG(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function TG(e){var{option:t,tickProps:r,value:n}=e,i,s=st(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))i=y.cloneElement(t,nr(nr({},r),{},{className:s}));else if(typeof t=="function")i=t(nr(nr({},r),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=st(c,t?.className)),i=y.createElement(rh,$o({},r,{className:c}),n)}return i}var PG=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:c,unit:u,padding:m,tickTextProps:h,orientation:p,mirror:g,x:_,y:x,width:w,height:j,tickSize:S,tickMargin:O,fontSize:C,letterSpacing:A,getTicksConfig:k,events:D,axisType:M}=e,L=N_(nr(nr({},k),{},{ticks:r}),C,A),V=kG(p,g),re=DG(p,g),ie=vn(k),X=Ro(n),I={};typeof i=="object"&&(I=i);var ce=nr(nr({},ie),{},{fill:"none"},I),ge=L.map(U=>nr({entry:U},NG(U,_,x,w,j,p,S,g,O))),q=ge.map(U=>{var{entry:Q,line:B}=U;return y.createElement(_r,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(Q.value,"-").concat(Q.coordinate,"-").concat(Q.tickCoord)},i&&y.createElement("line",$o({},ce,B,{className:st("recharts-cartesian-axis-tick-line",zo(i,"className"))})))}),R=ge.map((U,Q)=>{var{entry:B,tick:fe}=U,je=nr(nr(nr(nr({textAnchor:V,verticalAnchor:re},ie),{},{stroke:"none",fill:s},X),fe),{},{index:Q,payload:B,visibleTicksCount:L.length,tickFormatter:c,padding:m},h);return y.createElement(_r,$o({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(B.value,"-").concat(B.coordinate,"-").concat(B.tickCoord)},vm(D,B,Q)),n&&y.createElement(TG,{option:n,tickProps:je,value:"".concat(typeof c=="function"?c(B.value,Q):B.value).concat(u||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},R.length>0&&y.createElement(Jr,{zIndex:ir.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:t},R)),q.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},q))}),MG=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:s,hide:c,ticks:u,axisType:m}=e,h=jG(e,wG),[p,g]=y.useState(""),[_,x]=y.useState(""),w=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return xG({ticks:w.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=y.useCallback(S=>{if(S){var O=S.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=O;var C=O[0];if(C){var A=window.getComputedStyle(C),k=A.fontSize,D=A.letterSpacing;(k!==p||D!==_)&&(g(k),x(D))}}},[p,_]);return c||n!=null&&n<=0||i!=null&&i<=0?null:y.createElement(Jr,{zIndex:e.zIndex},y.createElement(_r,{className:st("recharts-cartesian-axis",s)},y.createElement(AG,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:vn(e)}),y.createElement(PG,{ref:j,axisType:m,events:h,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:_,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(AF,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(LF,{label:e.label,labelRef:e.labelRef}),e.children)))}),k_=y.forwardRef((e,t)=>{var r=xr(e,Ga);return y.createElement(MG,$o({},r,{ref:t}))});k_.displayName="CartesianAxis";var RG=["x1","y1","x2","y2","key"],qG=["offset"],zG=["xAxisId","yAxisId"],LG=["xAxisId","yAxisId"];function SA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(r),!0).forEach(function(n){IG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IG(e,t,r){return(t=UG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UG(e){var t=BG(e,"string");return typeof t=="symbol"?t:t+""}function BG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},No.apply(null,arguments)}function rm(e,t){if(e==null)return{};var r,n,i=$G(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $G(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HG=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:c,ry:u}=e;return y.createElement("rect",{x:n,y:i,ry:u,width:s,height:c,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function lM(e){var{option:t,lineItemProps:r}=e,n;if(y.isValidElement(t))n=y.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:s,y1:c,x2:u,y2:m,key:h}=r,p=rm(r,RG),g=(i=vn(p))!==null&&i!==void 0?i:{},{offset:_}=g,x=rm(g,qG);n=y.createElement("line",No({},x,{x1:s,y1:c,x2:u,y2:m,fill:"none",key:h}))}return n}function FG(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=rm(e,zG),m=i.map((h,p)=>{var g=Dr(Dr({},u),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(p),index:p});return y.createElement(lM,{key:"line-".concat(p),option:n,lineItemProps:g})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function KG(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=rm(e,LG),m=i.map((h,p)=>{var g=Dr(Dr({},u),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(p),index:p});return y.createElement(lM,{option:n,lineItemProps:g,key:"line-".concat(p)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function YG(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:s,height:c,horizontalPoints:u,horizontal:m=!0}=e;if(!m||!t||!t.length||u==null)return null;var h=u.map(g=>Math.round(g+i-i)).sort((g,_)=>g-_);i!==h[0]&&h.unshift(0);var p=h.map((g,_)=>{var x=!h[_+1],w=x?i+c-g:h[_+1]-g;if(w<=0)return null;var j=_%t.length;return y.createElement("rect",{key:"react-".concat(_),y:g,x:n,height:w,width:s,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function GG(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:c,height:u,verticalPoints:m}=e;if(!t||!r||!r.length)return null;var h=m.map(g=>Math.round(g+i-i)).sort((g,_)=>g-_);i!==h[0]&&h.unshift(0);var p=h.map((g,_)=>{var x=!h[_+1],w=x?i+c-g:h[_+1]-g;if(w<=0)return null;var j=_%r.length;return y.createElement("rect",{key:"react-".concat(_),x:g,y:s,width:w,height:u,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var VG=(e,t)=>{var{xAxis:r,width:n,height:i,offset:s}=e;return Wk(N_(Dr(Dr(Dr({},Ga),r),{},{ticks:Xk(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},WG=(e,t)=>{var{yAxis:r,width:n,height:i,offset:s}=e;return Wk(N_(Dr(Dr(Dr({},Ga),r),{},{ticks:Xk(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},XG={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ir.grid};function gb(e){var t=iD(),r=oD(),n=aD(),i=Dr(Dr({},xr(e,XG)),{},{x:ke(e.x)?e.x:n.left,y:ke(e.y)?e.y:n.top,width:ke(e.width)?e.width:n.width,height:ke(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:c,x:u,y:m,width:h,height:p,syncWithTicks:g,horizontalValues:_,verticalValues:x}=i,w=Pr(),j=De(re=>hC(re,"xAxis",s,w)),S=De(re=>hC(re,"yAxis",c,w));if(!ya(h)||!ya(p)||!ke(u)||!ke(m))return null;var O=i.verticalCoordinatesGenerator||VG,C=i.horizontalCoordinatesGenerator||WG,{horizontalPoints:A,verticalPoints:k}=i;if((!A||!A.length)&&typeof C=="function"){var D=_&&_.length,M=C({yAxis:S?Dr(Dr({},S),{},{ticks:D?_:S.ticks}):void 0,width:t??h,height:r??p,offset:n},D?!0:g);kf(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(A=M)}if((!k||!k.length)&&typeof O=="function"){var L=x&&x.length,V=O({xAxis:j?Dr(Dr({},j),{},{ticks:L?x:j.ticks}):void 0,width:t??h,height:r??p,offset:n},L?!0:g);kf(Array.isArray(V),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof V,"]")),Array.isArray(V)&&(k=V)}return y.createElement(Jr,{zIndex:i.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(HG,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),y.createElement(YG,No({},i,{horizontalPoints:A})),y.createElement(GG,No({},i,{verticalPoints:k})),y.createElement(FG,No({},i,{offset:n,horizontalPoints:A,xAxis:j,yAxis:S})),y.createElement(KG,No({},i,{offset:n,verticalPoints:k,xAxis:j,yAxis:S}))))}gb.displayName="CartesianGrid";var ZG={},cM=Qr({name:"errorBars",initialState:ZG,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:iQ,replaceErrorBar:oQ,removeErrorBar:sQ}=cM.actions,QG=cM.reducer,JG=["children"];function eV(e,t){if(e==null)return{};var r,n,i=tV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rV={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},nV=y.createContext(rV);function uM(e){var{children:t}=e,r=eV(e,JG);return y.createElement(nV.Provider,{value:r},t)}function D_(e,t){var r,n,i=De(h=>li(h,e)),s=De(h=>ci(h,t)),c=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:gr.allowDataOverflow,u=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:vr.allowDataOverflow,m=c||u;return{needClip:m,needClipX:c,needClipY:u}}function dM(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=A_(),{needClipX:s,needClipY:c,needClip:u}=D_(t,r);if(!u||!i)return null;var{x:m,y:h,width:p,height:g}=i;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:s?m:m-p/2,y:c?h:h-g/2,width:s?p:p*2,height:c?g:g*2}))}var fM=(e,t,r,n)=>Vi(e,"xAxis",t,n),mM=(e,t,r,n)=>Gi(e,"xAxis",t,n),hM=(e,t,r,n)=>Vi(e,"yAxis",r,n),pM=(e,t,r,n)=>Gi(e,"yAxis",r,n),aV=W([et,fM,hM,mM,pM],(e,t,r,n,i)=>Zi(e,"xAxis")?Fs(t,n,!1):Fs(r,i,!1)),iV=(e,t,r,n,i)=>i;function oV(e){return e.type==="line"}var sV=W([Xm,iV],(e,t)=>e.filter(oV).find(r=>r.id===t)),lV=W([et,fM,hM,mM,pM,sV,aV,N0],(e,t,r,n,i,s,c,u)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=u;if(!(s==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||c==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:g,data:_}=s,x;if(_!=null&&_.length>0?x=_:x=m?.slice(h,p+1),x!=null)return WV({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:g,bandSize:c,displayedData:x})}});function cV(e){var t=Ro(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:s}=t,c=Number(i),u=Number(s);return(Number.isNaN(c)||c<0)&&(c=r),(Number.isNaN(u)||u<0)&&(u=n),{r:c,strokeWidth:u}}return{r,strokeWidth:n}}var sy={exports:{}},ly={};var EA;function uV(){if(EA)return ly;EA=1;var e=cm();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,c=e.useMemo,u=e.useDebugValue;return ly.useSyncExternalStoreWithSelector=function(m,h,p,g,_){var x=i(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=c(function(){function S(D){if(!O){if(O=!0,C=D,D=g(D),_!==void 0&&w.hasValue){var M=w.value;if(_(M,D))return A=M}return A=D}if(M=A,r(C,D))return M;var L=g(D);return _!==void 0&&_(M,L)?(C=D,M):(C=D,A=L)}var O=!1,C,A,k=p===void 0?null:p;return[function(){return S(h())},k===null?void 0:function(){return S(k())}]},[h,p,g,_]);var j=n(m,x[0],x[1]);return s(function(){w.hasValue=!0,w.value=j},[j]),u(j),j},ly}var OA;function dV(){return OA||(OA=1,sy.exports=uV()),sy.exports}dV();function fV(e){e()}function mV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){fV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var CA={notify(){},get:()=>[]};function hV(e,t){let r,n=CA,i=0,s=!1;function c(j){p();const S=n.subscribe(j);let O=!1;return()=>{O||(O=!0,S(),g())}}function u(){n.notify()}function m(){w.onStateChange&&w.onStateChange()}function h(){return s}function p(){i++,r||(r=e.subscribe(m),n=mV())}function g(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=CA)}function _(){s||(s=!0,p())}function x(){s&&(s=!1,g())}const w={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:m,isSubscribed:h,trySubscribe:_,tryUnsubscribe:x,getListeners:()=>n};return w}var pV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gV=pV(),vV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",yV=vV(),bV=()=>gV||yV?y.useLayoutEffect:y.useEffect,_V=bV();function AA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function xV(e,t){if(AA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!AA(e[r[i]],t[r[i]]))return!1;return!0}var wV=Symbol.for("react-redux-context"),jV=typeof globalThis<"u"?globalThis:{};function SV(){if(!y.createContext)return{};const e=jV[wV]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var EV=SV();function OV(e){const{children:t,context:r,serverState:n,store:i}=e,s=y.useMemo(()=>{const m=hV(i);return{store:i,subscription:m,getServerState:n?()=>n:void 0}},[i,n]),c=y.useMemo(()=>i.getState(),[i]);_V(()=>{const{subscription:m}=s;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[s,c]);const u=r||EV;return y.createElement(u.Provider,{value:s},t)}var CV=OV,AV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function NV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function sh(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(AV.has(n)){if(e[n]==null&&t[n]==null)continue;if(!xV(e[n],t[n]))return!1}else if(!NV(e[n],t[n]))return!1;return!0}var kV=["id"],DV=["type","layout","connectNulls","needClip","shape"],TV=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lc.apply(null,arguments)}function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){PV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PV(e,t,r){return(t=MV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MV(e){var t=RV(e,"string");return typeof t=="symbol"?t:t+""}function RV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function T_(e,t){if(e==null)return{};var r,n,i=qV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function qV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zV=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Qs(r,t),payload:e}]},LV=y.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:s,name:c,hide:u,unit:m,tooltipType:h,id:p}=e,g={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:Qs(c,t),hide:u,type:h,color:n,unit:m,graphicalItemId:p}};return y.createElement(O_,{tooltipEntrySettings:g})}),gM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function IV(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var UV=(e,t,r)=>{var n=r.reduce((g,_)=>g+_);if(!n)return gM(t,e);for(var i=Math.floor(e/n),s=e%n,c=t-e,u=[],m=0,h=0;m<r.length;h+=r[m],++m)if(h+r[m]>s){u=[...r.slice(0,m),s-h];break}var p=u.length%2===0?[0,c]:[c];return[...IV(r,i),...u,...p].map(g=>"".concat(g,"px")).join(", ")};function BV(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:s,needClip:c}=n,{id:u}=n,m=T_(n,kV),h=vn(m);return y.createElement(CY,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:c,clipPathId:t})}function $V(e){var{showLabels:t,children:r,points:n}=e,i=y.useMemo(()=>n?.map(s=>{var c,u,m={x:(c=s.x)!==null&&c!==void 0?c:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ma(ma({},m),{},{value:s.value,payload:s.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[n]);return y.createElement(BP,{value:t?i:void 0},r)}function kA(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:s}=e,{type:c,layout:u,connectNulls:m,needClip:h,shape:p}=s,g=T_(s,DV),_=ma(ma({},Ir(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:c,layout:u,connectNulls:m,strokeDasharray:i??s.strokeDasharray});return y.createElement(y.Fragment,null,n?.length>1&&y.createElement(w_,Lc({shapeType:"curve",option:p},_,{pathRef:r})),y.createElement(BV,{points:n,clipPathId:t,props:s}))}function HV(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function FV(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:c,strokeDasharray:u,isAnimationActive:m,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:_,width:x,height:w,onAnimationEnd:j,onAnimationStart:S}=r,O=i.current,C=Xc(c,"recharts-line-"),A=y.useRef(C),[k,D]=y.useState(!1),M=!k,L=y.useCallback(()=>{typeof j=="function"&&j(),D(!1)},[j]),V=y.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),re=HV(n.current),ie=y.useRef(0);A.current!==C&&(ie.current=s.current,A.current=C);var X=ie.current;return y.createElement($V,{points:c,showLabels:M},r.children,y.createElement(Wc,{animationId:C,begin:h,duration:p,isActive:m,easing:g,onAnimationEnd:L,onAnimationStart:V,key:C},I=>{var ce=kt(X,re+X,I),ge=Math.min(ce,re),q;if(m)if(u){var R="".concat(u).split(/[,\s]+/gim).map(B=>parseFloat(B));q=UV(ge,re,R)}else q=gM(re,ge);else q=u==null?void 0:String(u);if(I>0&&re>0&&(i.current=c,s.current=Math.max(s.current,ge)),O){var U=O.length/c.length,Q=I===1?c:c.map((B,fe)=>{var je=Math.floor(fe*U);if(O[je]){var ee=O[je];return ma(ma({},B),{},{x:kt(ee.x,B.x,I),y:kt(ee.y,B.y,I)})}return _?ma(ma({},B),{},{x:kt(x*2,B.x,I),y:kt(w/2,B.y,I)}):ma(ma({},B),{},{x:B.x,y:B.y})});return i.current=Q,y.createElement(kA,{props:r,points:Q,clipPathId:t,pathRef:n,strokeDasharray:q})}return y.createElement(kA,{props:r,points:c,clipPathId:t,pathRef:n,strokeDasharray:q})}),y.createElement(y_,{label:r.label}))}function KV(e){var{clipPathId:t,props:r}=e,n=y.useRef(null),i=y.useRef(0),s=y.useRef(null);return y.createElement(FV,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var YV=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:vt(e.payload,t)}};class GV extends y.Component{render(){var{hide:t,dot:r,points:n,className:i,xAxisId:s,yAxisId:c,top:u,left:m,width:h,height:p,id:g,needClip:_,zIndex:x}=this.props;if(t)return null;var w=st("recharts-line",i),j=g,{r:S,strokeWidth:O}=cV(r),C=WP(r),A=S*2+O,k=_?"url(#clipPath-".concat(C?"":"dots-").concat(j,")"):void 0;return y.createElement(Jr,{zIndex:x},y.createElement(_r,{className:w},_&&y.createElement("defs",null,y.createElement(dM,{clipPathId:j,xAxisId:s,yAxisId:c}),!C&&y.createElement("clipPath",{id:"clipPath-dots-".concat(j)},y.createElement("rect",{x:m-A/2,y:u-A/2,width:h+A,height:p+A}))),y.createElement(uM,{xAxisId:s,yAxisId:c,data:n,dataPointFormatter:YV,errorBarOffset:0},y.createElement(KV,{props:this.props,clipPathId:j}))),y.createElement(GY,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var vM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ir.line,type:"linear"};function VV(e){var t=xr(e,vM),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,connectNulls:u,dot:m,hide:h,isAnimationActive:p,label:g,legendType:_,xAxisId:x,yAxisId:w,id:j}=t,S=T_(t,TV),{needClip:O}=D_(x,w),C=A_(),A=Yo(),k=Pr(),D=De(ie=>lV(ie,x,w,k,j));if(A!=="horizontal"&&A!=="vertical"||D==null||C==null)return null;var{height:M,width:L,x:V,y:re}=C;return y.createElement(GV,Lc({},S,{id:j,connectNulls:u,dot:m,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,isAnimationActive:p,hide:h,label:g,legendType:_,xAxisId:x,yAxisId:w,points:D,layout:A,height:M,width:L,left:V,top:re,needClip:O}))}function WV(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:c,bandSize:u,displayedData:m}=e;return m.map((h,p)=>{var g=vt(h,c);if(t==="horizontal"){var _=yE({axis:r,ticks:i,bandSize:u,entry:h,index:p}),x=Pt(g)?null:n.scale(g);return{x:_,y:x,value:g,payload:h}}var w=Pt(g)?null:r.scale(g),j=yE({axis:n,ticks:s,bandSize:u,entry:h,index:p});return w==null||j==null?null:{x:w,y:j,value:g,payload:h}}).filter(Boolean)}function XV(e){var t=xr(e,vM),r=Pr();return y.createElement(C_,{id:t.id,type:"line"},n=>y.createElement(y.Fragment,null,y.createElement(XP,{legendPayload:zV(t)}),y.createElement(LV,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),y.createElement(QP,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),y.createElement(VV,Lc({},t,{id:n}))))}var yM=y.memo(XV,sh);yM.displayName="Line";function Wo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:eM}function Xo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:eM}var ZV="Invariant failed";function QV(e,t){throw new Error(ZV)}function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vb.apply(null,arguments)}function nm(e){return y.createElement(w_,vb({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var JV=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(ke(t))return t;var s=ke(n)||Pt(n);return s?t(n,i):(s||QV(),r)}},eW=(e,t,r)=>r,tW=(e,t)=>t,du=W([Xm,tW],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),rW=W([du],e=>e?.maxBarSize),nW=(e,t,r,n)=>n,aW=W([et,Xm,Wo,Xo,eW],(e,t,r,n,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),iW=(e,t,r)=>{var n=et(e),i=Wo(e,t),s=Xo(e,t);if(!(i==null||s==null))return n==="horizontal"?lb(e,"yAxis",s,r):lb(e,"xAxis",i,r)},oW=(e,t)=>{var r=et(e),n=Wo(e,t),i=Xo(e,t);if(!(n==null||i==null))return r==="horizontal"?mC(e,"xAxis",n):mC(e,"yAxis",i)},sW=W([aW,N$,oW],VY),lW=(e,t,r)=>{var n,i,s=du(e,t);if(s!=null){var c=Wo(e,t),u=Xo(e,t);if(!(c==null||u==null)){var m=et(e),h=wT(e),{maxBarSize:p}=s,g=Pt(p)?h:p,_,x;return m==="horizontal"?(_=Vi(e,"xAxis",c,r),x=Gi(e,"xAxis",c,r)):(_=Vi(e,"yAxis",u,r),x=Gi(e,"yAxis",u,r)),(n=(i=Fs(_,x,!0))!==null&&i!==void 0?i:g)!==null&&n!==void 0?n:0}}},bM=(e,t,r)=>{var n=et(e),i=Wo(e,t),s=Xo(e,t);if(!(i==null||s==null)){var c,u;return n==="horizontal"?(c=Vi(e,"xAxis",i,r),u=Gi(e,"xAxis",i,r)):(c=Vi(e,"yAxis",s,r),u=Gi(e,"yAxis",s,r)),Fs(c,u)}},cW=W([sW,wT,A$,jT,lW,bM,rW],JY),uW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Vi(e,"xAxis",n,r)},dW=(e,t,r)=>{var n=Xo(e,t);if(n!=null)return Vi(e,"yAxis",n,r)},fW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Gi(e,"xAxis",n,r)},mW=(e,t,r)=>{var n=Xo(e,t);if(n!=null)return Gi(e,"yAxis",n,r)},hW=W([cW,du],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),pW=W([iW,du],eG),gW=W([dr,t0,uW,dW,fW,mW,hW,et,g$,bM,pW,du,nW],(e,t,r,n,i,s,c,u,m,h,p,g,_)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:j}=m;if(!(g==null||c==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||i==null||s==null||h==null)){var{data:S}=g,O;if(S!=null&&S.length>0?O=S:O=x?.slice(w,j+1),O!=null)return KW({layout:u,barSettings:g,pos:c,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:O,offset:e,cells:_,dataStartIndex:w})}}),vW=["index"];function yb(){return yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yb.apply(null,arguments)}function yW(e,t){if(e==null)return{};var r,n,i=bW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _M=y.createContext(void 0),_W=e=>{var t=y.useContext(_M);if(t!=null)return t.stackId;if(e!=null)return EI(e)},xW=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),wW=e=>{var t=y.useContext(_M);if(t!=null){var{stackId:r}=t;return"url(#".concat(xW(r,e),")")}},jW=e=>{var{index:t}=e,r=yW(e,vW),n=wW(t);return y.createElement(_r,yb({className:"recharts-bar-stack-layer",clipPath:n},r))},SW=["onMouseEnter","onMouseLeave","onClick"],EW=["value","background","tooltipPosition"],OW=["id"],CW=["onMouseEnter","onClick","onMouseLeave"];function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ti.apply(null,arguments)}function DA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(r),!0).forEach(function(n){AW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AW(e,t,r){return(t=NW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NW(e){var t=kW(e,"string");return typeof t=="symbol"?t:t+""}function kW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function am(e,t){if(e==null)return{};var r,n,i=DW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function DW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TW=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Qs(r,t),payload:e}]},PW=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:s,hide:c,unit:u,tooltipType:m,id:h}=e,p={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Qs(s,t),hide:c,type:m,color:i,unit:u,graphicalItemId:h}};return y.createElement(O_,{tooltipEntrySettings:p})});function MW(e){var t=De(Wi),{data:r,dataKey:n,background:i,allOtherBarProps:s}=e,{onMouseEnter:c,onMouseLeave:u,onClick:m}=s,h=am(s,SW),p=j_(c,n,s.id),g=S_(u),_=E_(m,n,s.id);if(!i||r==null)return null;var x=Ro(i);return y.createElement(Jr,{zIndex:tG(i,ir.barBackground)},r.map((w,j)=>{var{value:S,background:O,tooltipPosition:C}=w,A=am(w,EW);if(!O)return null;var k=p(w,j),D=g(w,j),M=_(w,j),L=zr(zr(zr(zr(zr({option:i,isActive:String(j)===t},A),{},{fill:"#eee"},O),x),vm(h,w,j)),{},{onMouseEnter:k,onMouseLeave:D,onClick:M,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return y.createElement(nm,ti({key:"background-bar-".concat(j)},L))}))}function RW(e){var{showLabels:t,children:r,rects:n}=e,i=n?.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return zr(zr({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return y.createElement(BP,{value:t?i:void 0},r)}function qW(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:s,dataKey:c}=e,u=De(Wi),m=De(d_),h=r&&String(s)===u&&(m==null||c===m),p=h?r:t;return h?y.createElement(Jr,{zIndex:ir.activeBar},y.createElement(nm,ti({},n,{name:String(n.name)},i,{isActive:h,option:p,index:s,dataKey:c}))):y.createElement(nm,ti({},n,{name:String(n.name)},i,{isActive:h,option:p,index:s,dataKey:c}))}function zW(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:s}=e;return y.createElement(nm,ti({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:s}))}function LW(e){var t,{data:r,props:n}=e,i=(t=vn(n))!==null&&t!==void 0?t:{},{id:s}=i,c=am(i,OW),{shape:u,dataKey:m,activeBar:h}=n,{onMouseEnter:p,onClick:g,onMouseLeave:_}=n,x=am(n,CW),w=j_(p,m,s),j=S_(_),S=E_(g,m,s);return r?y.createElement(y.Fragment,null,r.map((O,C)=>y.createElement(jW,ti({index:C,key:"rectangle-".concat(O?.x,"-").concat(O?.y,"-").concat(O?.value,"-").concat(C),className:"recharts-bar-rectangle"},vm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),h?y.createElement(qW,{shape:u,activeBar:h,baseProps:c,entry:O,index:C,dataKey:m}):y.createElement(zW,{shape:u,baseProps:c,entry:O,index:C,dataKey:m})))):null}function IW(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,onAnimationEnd:h,onAnimationStart:p}=t,g=r.current,_=Xc(t,"recharts-bar-"),[x,w]=y.useState(!1),j=!x,S=y.useCallback(()=>{typeof h=="function"&&h(),w(!1)},[h]),O=y.useCallback(()=>{typeof p=="function"&&p(),w(!0)},[p]);return y.createElement(RW,{showLabels:j,rects:n},y.createElement(Wc,{animationId:_,begin:c,duration:u,isActive:s,easing:m,onAnimationEnd:S,onAnimationStart:O,key:_},C=>{var A=C===1?n:n?.map((k,D)=>{var M=g&&g[D];if(M)return zr(zr({},k),{},{x:kt(M.x,k.x,C),y:kt(M.y,k.y,C),width:kt(M.width,k.width,C),height:kt(M.height,k.height,C)});if(i==="horizontal"){var L=kt(0,k.height,C),V=kt(k.stackedBarStart,k.y,C);return zr(zr({},k),{},{y:V,height:L})}var re=kt(0,k.width,C),ie=kt(k.stackedBarStart,k.x,C);return zr(zr({},k),{},{width:re,x:ie})});return C>0&&(r.current=A??null),A==null?null:y.createElement(_r,null,y.createElement(LW,{props:t,data:A}))}),y.createElement(y_,{label:t.label}),t.children)}function UW(e){var t=y.useRef(null);return y.createElement(IW,{previousRectanglesRef:t,props:e})}var xM=0,BW=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:vt(e,t)}};class $W extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:s,yAxisId:c,needClip:u,background:m,id:h}=this.props;if(t||r==null)return null;var p=st("recharts-bar",i),g=h;return y.createElement(_r,{className:p,id:h},u&&y.createElement("defs",null,y.createElement(dM,{clipPathId:g,xAxisId:s,yAxisId:c})),y.createElement(_r,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},y.createElement(MW,{data:r,dataKey:n,background:m,allOtherBarProps:this.props}),y.createElement(UW,this.props)))}}var HW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:xM,xAxisId:0,yAxisId:0,zIndex:ir.bar};function FW(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:p}=e,{needClip:g}=D_(t,r),_=Yo(),x=Pr(),w=x_(e.children,uu),j=De(C=>gW(C,e.id,x,w));if(_!=="vertical"&&_!=="horizontal")return null;var S,O=j?.[0];return O==null||O.height==null||O.width==null?S=0:S=_==="vertical"?O.height/2:O.width/2,y.createElement(uM,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:BW,errorBarOffset:S},y.createElement($W,ti({},e,{layout:_,needClip:g,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:p})))}function KW(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:c,yAxis:u,xAxisTicks:m,yAxisTicks:h,stackedData:p,displayedData:g,offset:_,cells:x,parentViewBox:w,dataStartIndex:j}=e,S=t==="horizontal"?u:c,O=p?S.scale.domain():null,C=OI({numericAxis:S}),A=S.scale(C);return g.map((k,D)=>{var M,L,V,re,ie,X;if(p){var I=p[D+j];if(I==null)return null;M=_I(I,O)}else M=vt(k,r),Array.isArray(M)||(M=[C,M]);var ce=JV(n,xM)(M[1],D);if(t==="horizontal"){var ge,[q,R]=[u.scale(M[0]),u.scale(M[1])];L=bE({axis:c,ticks:m,bandSize:s,offset:i.offset,entry:k,index:D}),V=(ge=R??q)!==null&&ge!==void 0?ge:void 0,re=i.size;var U=q-R;if(ie=ta(U)?0:U,X={x:L,y:_.top,width:re,height:_.height},Math.abs(ce)>0&&Math.abs(ie)<Math.abs(ce)){var Q=br(ie||ce)*(Math.abs(ce)-Math.abs(ie));V-=Q,ie+=Q}}else{var[B,fe]=[c.scale(M[0]),c.scale(M[1])];if(L=B,V=bE({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:k,index:D}),re=fe-B,ie=i.size,X={x:_.left,y:V,width:_.width,height:ie},Math.abs(ce)>0&&Math.abs(re)<Math.abs(ce)){var je=br(re||ce)*(Math.abs(ce)-Math.abs(re));re+=je}}if(L==null||V==null||re==null||ie==null)return null;var ee=zr(zr({},k),{},{stackedBarStart:A,x:L,y:V,width:re,height:ie,value:p?M:M[1],payload:k,background:X,tooltipPosition:{x:L+re/2,y:V+ie/2},parentViewBox:w},x&&x[D]&&x[D].props);return ee}).filter(Boolean)}function YW(e){var t=xr(e,HW),r=_W(t.stackId),n=Pr();return y.createElement(C_,{id:t.id,type:"bar"},i=>y.createElement(y.Fragment,null,y.createElement(XP,{legendPayload:TW(t)}),y.createElement(PW,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),y.createElement(QP,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),y.createElement(Jr,{zIndex:t.zIndex},y.createElement(FW,ti({},t,{id:i})))))}var wM=y.memo(YW,sh);wM.displayName="Bar";var GW=["domain","range"],VW=["domain","range"];function TA(e,t){if(e==null)return{};var r,n,i=WW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function WW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function PA(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function jM(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=TA(e,GW),{domain:s,range:c}=t,u=TA(t,VW);return!PA(r,s)||!PA(n,c)?!1:sh(i,u)}var XW=["dangerouslySetInnerHTML","ticks","scale"],ZW=["id","scale"];function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bb.apply(null,arguments)}function MA(e,t){if(e==null)return{};var r,n,i=QW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JW(e){var t=Mt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(TY(e)):r.current!==e&&t(PY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(MY(r.current)),r.current=null)},[t]),null}var eX=e=>{var{xAxisId:t,className:r}=e,n=De(t0),i=Pr(),s="xAxis",c=De(O=>tP(O,s,t,i)),u=De(O=>ZT(O,t)),m=De(O=>OH(O,t)),h=De(O=>TT(O,t));if(u==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:_}=e,x=MA(e,XW),{id:w,scale:j}=h,S=MA(h,ZW);return y.createElement(k_,bb({},x,S,{x:m.x,y:m.y,width:u.width,height:u.height,className:st("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:c,axisType:s}))},tX={allowDataOverflow:gr.allowDataOverflow,allowDecimals:gr.allowDecimals,allowDuplicatedCategory:gr.allowDuplicatedCategory,angle:gr.angle,axisLine:Ga.axisLine,height:gr.height,hide:!1,includeHidden:gr.includeHidden,interval:gr.interval,minTickGap:gr.minTickGap,mirror:gr.mirror,orientation:gr.orientation,padding:gr.padding,reversed:gr.reversed,scale:gr.scale,tick:gr.tick,tickCount:gr.tickCount,tickLine:Ga.tickLine,tickSize:Ga.tickSize,type:gr.type,xAxisId:0},rX=e=>{var t=xr(e,tX);return y.createElement(y.Fragment,null,y.createElement(JW,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(eX,t))},_b=y.memo(rX,jM);_b.displayName="XAxis";var nX=["dangerouslySetInnerHTML","ticks","scale"],aX=["id","scale"];function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xb.apply(null,arguments)}function RA(e,t){if(e==null)return{};var r,n,i=iX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function iX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oX(e){var t=Mt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(RY(e)):r.current!==e&&t(qY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(zY(r.current)),r.current=null)},[t]),null}var sX=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,s=y.useRef(null),c=y.useRef(null),u=De(t0),m=Pr(),h=Mt(),p="yAxis",g=De(M=>QT(M,t)),_=De(M=>AH(M,t)),x=De(M=>tP(M,p,t,m)),w=De(M=>PT(M,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!g||v_(i)||y.isValidElement(i)||w==null)){var M=s.current;if(M){var L=M.getCalculatedWidth();Math.round(g.width)!==Math.round(L)&&h(LY({id:t,width:L}))}}},[x,g,h,i,t,n,w]),g==null||_==null||w==null)return null;var{dangerouslySetInnerHTML:j,ticks:S,scale:O}=e,C=RA(e,nX),{id:A,scale:k}=w,D=RA(w,aX);return y.createElement(k_,xb({},C,D,{ref:s,labelRef:c,x:_.x,y:_.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:st("recharts-".concat(p," ").concat(p),r),viewBox:u,ticks:x,axisType:p}))},lX={allowDataOverflow:vr.allowDataOverflow,allowDecimals:vr.allowDecimals,allowDuplicatedCategory:vr.allowDuplicatedCategory,angle:vr.angle,axisLine:Ga.axisLine,hide:!1,includeHidden:vr.includeHidden,interval:vr.interval,minTickGap:vr.minTickGap,mirror:vr.mirror,orientation:vr.orientation,padding:vr.padding,reversed:vr.reversed,scale:vr.scale,tick:vr.tick,tickCount:vr.tickCount,tickLine:Ga.tickLine,tickSize:Ga.tickSize,type:vr.type,width:vr.width,yAxisId:0},cX=e=>{var t=xr(e,lX);return y.createElement(y.Fragment,null,y.createElement(oX,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(sX,t))},wb=y.memo(cX,jM);wb.displayName="YAxis";var uX=(e,t)=>t,P_=W([uX,et,kT,mr,vP,ui,F9,dr],Z9),M_=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},SM=In("mouseClick"),EM=Yc();EM.startListening({actionCreator:SM,effect:(e,t)=>{var r=e.payload,n=P_(t.getState(),M_(r));n?.activeIndex!=null&&t.dispatch($H({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var jb=In("mouseMove"),OM=Yc(),Xd=null;OM.startListening({actionCreator:jb,effect:(e,t)=>{var r=e.payload;Xd!==null&&cancelAnimationFrame(Xd);var n=M_(r);Xd=requestAnimationFrame(()=>{var i=t.getState(),s=i_(i,i.tooltip.settings.shared);if(s==="axis"){var c=P_(i,n);c?.activeIndex!=null?t.dispatch(cP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):t.dispatch(lP())}Xd=null})}});function dX(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var qA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},CM=Qr({name:"rootProps",initialState:qA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:qA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),fX=CM.reducer,{updateOptions:mX}=CM.actions,AM=Qr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:hX}=AM.actions,pX=AM.reducer,NM=In("keyDown"),kM=In("focus"),R_=Yc();R_.startListening({actionCreator:NM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=o_(i,sl(r),iu(r),lu(r)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var m=ui(r);if(s==="Enter"){var h=Zf(r,"axis","hover",String(i.index));t.dispatch(ub({active:!i.active,activeIndex:i.index,activeCoordinate:h}));return}var p=TH(r),g=p==="left-to-right"?1:-1,_=s==="ArrowRight"?1:-1,x=u+_*g;if(!(m==null||x>=m.length||x<0)){var w=Zf(r,"axis","hover",String(x));t.dispatch(ub({active:!0,activeIndex:x.toString(),activeCoordinate:w}))}}}}}});R_.startListening({actionCreator:kM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",c=Zf(r,"axis","hover",String(s));t.dispatch(ub({active:!0,activeIndex:s,activeCoordinate:c}))}}}});var Rn=In("externalEvent"),DM=Yc(),cy=new Map;DM.startListening({actionCreator:Rn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,s=cy.get(i);s!==void 0&&cancelAnimationFrame(s);var c=requestAnimationFrame(()=>{try{var u=t.getState(),m={activeCoordinate:A9(u),activeDataKey:d_(u),activeIndex:Wi(u),activeLabel:_P(u),activeTooltipIndex:Wi(u),isTooltipActive:N9(u)};r(m,n)}finally{cy.delete(i)}});cy.set(i,c)}}});var gX=W([il],e=>e.tooltipItemPayloads),vX=W([gX,su,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(u=>u.settings.graphicalItemId===n);if(i!=null){var{positions:s}=i;if(s!=null){var c=t(s,r);return c}}}),TM=In("touchMove"),PM=Yc();PM.startListening({actionCreator:TM,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=i_(n,n.tooltip.settings.shared);if(i==="axis"){var s=r.touches[0];if(s==null)return;var c=P_(n,M_({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));c?.activeIndex!=null&&t.dispatch(cP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,m=r.touches[0];if(document.elementFromPoint==null||m==null)return;var h=document.elementFromPoint(m.clientX,m.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(Qk),g=(u=h.getAttribute(Jk))!==null&&u!==void 0?u:void 0,_=ol(n).find(j=>j.id===g);if(p==null||_==null||g==null)return;var{dataKey:x}=_,w=vX(n,p,g);t.dispatch(sP({activeDataKey:x,activeIndex:p,activeCoordinate:w,activeGraphicalItemId:g}))}}}});var yX=_k({brush:rG,cartesianAxis:IY,chartData:A7,errorBars:QG,graphicalItems:KK,layout:hI,legend:_6,options:j7,polarAxis:iK,polarOptions:pX,referenceElements:cG,rootProps:fX,tooltip:HH,zIndex:d7}),bX=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return I4({reducer:yX,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([EM.middleware,OM.middleware,R_.middleware,DM.middleware,PM.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(Rk({type:"raf"}))},devTools:{serialize:{replacer:dX},name:"recharts-".concat(r)}})};function MM(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Pr(),s=y.useRef(null);if(i)return r;s.current==null&&(s.current=bX(t,n));var c=Vb;return y.createElement(CV,{context:c,store:s.current},r)}function _X(e){var{layout:t,margin:r}=e,n=Mt(),i=Pr();return y.useEffect(()=>{i||(n(dI(t)),n(uI(r)))},[n,i,t,r]),null}var RM=y.memo(_X,sh);function qM(e){var t=Mt();return y.useEffect(()=>{t(mX(e))},[t,e]),null}function zA(e){var{zIndex:t,isPanorama:r}=e,n=y.useRef(null),i=Mt();return y.useLayoutEffect(()=>(n.current&&i(c7({zIndex:t,element:n.current,isPanorama:r})),()=>{i(u7({zIndex:t,isPanorama:r}))}),[i,t,r]),y.createElement("g",{tabIndex:-1,ref:n})}function LA(e){var{children:t,isPanorama:r}=e,n=De(J9);if(!n||n.length===0)return t;var i=n.filter(c=>c<0),s=n.filter(c=>c>0);return y.createElement(y.Fragment,null,i.map(c=>y.createElement(zA,{key:c,zIndex:c,isPanorama:r})),t,s.map(c=>y.createElement(zA,{key:c,zIndex:c,isPanorama:r})))}var xX=["children"];function wX(e,t){if(e==null)return{};var r,n,i=jX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function jX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},im.apply(null,arguments)}var SX={width:"100%",height:"100%",display:"block"},EX=y.forwardRef((e,t)=>{var r=iD(),n=oD(),i=vD();if(!ya(r)||!ya(n))return null;var{children:s,otherAttributes:c,title:u,desc:m}=e,h,p;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=i?0:void 0,typeof c.role=="string"?p=c.role:p=i?"application":void 0),y.createElement(qN,im({},c,{title:u,desc:m,role:p,tabIndex:h,width:r,height:n,style:SX,ref:t}),s)}),OX=e=>{var{children:t}=e,r=De(Dm);if(!r)return null;var{width:n,height:i,y:s,x:c}=r;return y.createElement(qN,{width:n,height:i,x:c,y:s},t)},IA=y.forwardRef((e,t)=>{var{children:r}=e,n=wX(e,xX),i=Pr();return i?y.createElement(OX,null,y.createElement(LA,{isPanorama:!0},r)):y.createElement(EX,im({ref:t},n),y.createElement(LA,{isPanorama:!1},r))});function CX(){var e=Mt(),[t,r]=y.useState(null),n=De(TI);return y.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;zt(s)&&s!==n&&e(mI(s))}},[t,e,n]),r}function UA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function AX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UA(Object(r),!0).forEach(function(n){NX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NX(e,t,r){return(t=kX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e){var t=DX(e,"string");return typeof t=="symbol"?t:t+""}function DX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ho.apply(null,arguments)}var TX=()=>(z7(),null);function om(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var PX=y.forwardRef((e,t)=>{var r,n,i=y.useRef(null),[s,c]=y.useState({containerWidth:om((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:om((n=e.style)===null||n===void 0?void 0:n.height)}),u=y.useCallback((h,p)=>{c(g=>{var _=Math.round(h),x=Math.round(p);return g.containerWidth===_&&g.containerHeight===x?g:{containerWidth:_,containerHeight:x}})},[]),m=y.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();u(p,g);var _=w=>{var{width:j,height:S}=w[0].contentRect;u(j,S)},x=new ResizeObserver(_);x.observe(h),i.current=x}},[t,u]);return y.useEffect(()=>()=>{var h=i.current;h?.disconnect()},[u]),y.createElement(y.Fragment,null,y.createElement(Pm,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",Ho({ref:m},e)))}),MX=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,s]=y.useState({containerWidth:om(r),containerHeight:om(n)}),c=y.useCallback((m,h)=>{s(p=>{var g=Math.round(m),_=Math.round(h);return p.containerWidth===g&&p.containerHeight===_?p:{containerWidth:g,containerHeight:_}})},[]),u=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:h,height:p}=m.getBoundingClientRect();c(h,p)}},[t,c]);return y.createElement(y.Fragment,null,y.createElement(Pm,{width:i.containerWidth,height:i.containerHeight}),y.createElement("div",Ho({ref:u},e)))}),RX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(Pm,{width:r,height:n}),y.createElement("div",Ho({ref:t},e)))}),qX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return Wa(r)||Wa(n)?y.createElement(MX,Ho({},e,{ref:t})):y.createElement(RX,Ho({},e,{ref:t}))});function zX(e){return e===!0?PX:qX}var LX=y.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:c,onDoubleClick:u,onMouseDown:m,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:_,onTouchEnd:x,onTouchMove:w,onTouchStart:j,style:S,width:O,responsive:C,dispatchTouchEvents:A=!0}=e,k=y.useRef(null),D=Mt(),[M,L]=y.useState(null),[V,re]=y.useState(null),ie=CX(),X=r0(),I=X?.width>0?X.width:O,ce=X?.height>0?X.height:i,ge=y.useCallback(J=>{ie(J),typeof t=="function"&&t(J),L(J),re(J),J!=null&&(k.current=J)},[ie,t,L,re]),q=y.useCallback(J=>{D(SM(J)),D(Rn({handler:s,reactEvent:J}))},[D,s]),R=y.useCallback(J=>{D(jb(J)),D(Rn({handler:h,reactEvent:J}))},[D,h]),U=y.useCallback(J=>{D(lP()),D(Rn({handler:p,reactEvent:J}))},[D,p]),Q=y.useCallback(J=>{D(jb(J)),D(Rn({handler:g,reactEvent:J}))},[D,g]),B=y.useCallback(()=>{D(kM())},[D]),fe=y.useCallback(J=>{D(NM(J.key))},[D]),je=y.useCallback(J=>{D(Rn({handler:c,reactEvent:J}))},[D,c]),ee=y.useCallback(J=>{D(Rn({handler:u,reactEvent:J}))},[D,u]),H=y.useCallback(J=>{D(Rn({handler:m,reactEvent:J}))},[D,m]),Ee=y.useCallback(J=>{D(Rn({handler:_,reactEvent:J}))},[D,_]),Te=y.useCallback(J=>{D(Rn({handler:j,reactEvent:J}))},[D,j]),Ie=y.useCallback(J=>{A&&D(TM(J)),D(Rn({handler:w,reactEvent:J}))},[D,A,w]),pe=y.useCallback(J=>{D(Rn({handler:x,reactEvent:J}))},[D,x]),ze=zX(C);return y.createElement(CP.Provider,{value:M},y.createElement(zN.Provider,{value:V},y.createElement(ze,{width:I??S?.width,height:ce??S?.height,className:st("recharts-wrapper",n),style:AX({position:"relative",cursor:"default",width:I,height:ce},S),onClick:q,onContextMenu:je,onDoubleClick:ee,onFocus:B,onKeyDown:fe,onMouseDown:H,onMouseEnter:R,onMouseLeave:U,onMouseMove:Q,onMouseUp:Ee,onTouchEnd:pe,onTouchMove:Ie,onTouchStart:Te,ref:ge},y.createElement(TX,null),r)))}),IX=["width","height","responsive","children","className","style","compact","title","desc"];function UX(e,t){if(e==null)return{};var r,n,i=BX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function BX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zM=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:s,className:c,style:u,compact:m,title:h,desc:p}=e,g=UX(e,IX),_=vn(g);return m?y.createElement(y.Fragment,null,y.createElement(Pm,{width:r,height:n}),y.createElement(IA,{otherAttributes:_,title:h,desc:p},s)):y.createElement(LX,{className:c,style:u,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(IA,{otherAttributes:_,title:h,desc:p,ref:t},y.createElement(uG,null,s)))});function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb.apply(null,arguments)}var $X={top:5,right:5,bottom:5,left:5},HX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:$X,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},LM=y.forwardRef(function(t,r){var n,i=xr(t.categoricalChartProps,HX),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,p={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(MM,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:s},y.createElement(rM,{chartData:h.data}),y.createElement(RM,{layout:i.layout,margin:i.margin}),y.createElement(qM,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(zM,Sb({},i,{ref:r})))}),FX=["axis"],KX=y.forwardRef((e,t)=>y.createElement(LM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:FX,tooltipPayloadSearcher:g_,categoricalChartProps:e,ref:t})),YX=["axis","item"],GX=y.forwardRef((e,t)=>y.createElement(LM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:YX,tooltipPayloadSearcher:g_,categoricalChartProps:e,ref:t}));function VX(e){var t=Mt();return y.useEffect(()=>{t(hX(e))},[t,e]),null}var WX=["layout"];function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eb.apply(null,arguments)}function XX(e,t){if(e==null)return{};var r,n,i=ZX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ZX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QX={top:5,right:5,bottom:5,left:5},IM={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:QX,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},JX=y.forwardRef(function(t,r){var n,i=xr(t.categoricalChartProps,IM),{layout:s}=i,c=XX(i,WX),{chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p}=t,g={chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return y.createElement(MM,{preloadedState:{options:g},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:u},y.createElement(rM,{chartData:i.data}),y.createElement(RM,{layout:s,margin:i.margin}),y.createElement(qM,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(VX,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),y.createElement(zM,Eb({},c,{ref:r})))});function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $A(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(n){eZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eZ(e,t,r){return(t=tZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tZ(e){var t=rZ(e,"string");return typeof t=="symbol"?t:t+""}function rZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nZ=["item"],aZ=$A($A({},IM),{},{layout:"centric",startAngle:0,endAngle:360}),iZ=y.forwardRef((e,t)=>{var r=xr(e,aZ);return y.createElement(JX,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:nZ,tooltipPayloadSearcher:g_,categoricalChartProps:r,ref:t})});function oZ({project:e,companyId:t,onBack:r}){const[n,i]=y.useState(!0),[s,c]=y.useState("week"),[u,m]=y.useState({areas:[],tickets:[],crewHistory:[],disposalLoads:[],dailyReports:[]});y.useEffect(()=>{e?.id&&h()},[e?.id,s]);const h=async()=>{i(!0);try{const C=new Date,A=new Date;s==="week"?A.setDate(C.getDate()-7):A.setDate(C.getDate()-30);const k=A.toISOString().split("T")[0],D=s==="week"?7:30,[M,L,V,re]=await Promise.all([be.getAreas(e.id),be.getTMTickets?.(e.id)||[],be.getDisposalLoadsHistory?.(e.id,D)||[],be.getDailyReports?.(e.id)||[]]),ie=[],X=new Date(A);for(;X<=C;){const I=X.toISOString().split("T")[0];try{const ce=await be.getCrewCheckin(e.id,I);ie.push({date:I,count:ce?.workers?.length||0,dayName:X.toLocaleDateString("en-US",{weekday:"short"})})}catch{ie.push({date:I,count:0,dayName:X.toLocaleDateString("en-US",{weekday:"short"})})}X.setDate(X.getDate()+1)}m({areas:M,tickets:L.filter(I=>I.work_date>=k),crewHistory:ie,disposalLoads:V,dailyReports:re.filter(I=>I.report_date>=k)})}catch(C){console.error("Error loading metrics:",C)}finally{i(!1)}},p=y.useRef(null),g=y.useCallback(()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{h()},300)},[e?.id,s]);y.useEffect(()=>{if(!e?.id)return;const C=[],A=be.subscribeToAreas?.(e.id,g);A&&C.push(A);const k=be.subscribeToCrewCheckins?.(e.id,g);k&&C.push(k);const D=be.subscribeToTMTickets?.(e.id,g);D&&C.push(D);const M=be.subscribeToHaulOffs?.(e.id,g);M&&C.push(M);const L=be.subscribeToDailyReports?.(e.id,g);return L&&C.push(L),()=>{p.current&&clearTimeout(p.current),C.forEach(V=>be.unsubscribe?.(V))}},[e?.id,g]);const _=y.useMemo(()=>{const{areas:C,tickets:A,crewHistory:k,disposalLoads:D,dailyReports:M}=u,L=C.length,V=C.filter(H=>H.status==="done").length,re=C.filter(H=>H.status==="working").length,ie=C.filter(H=>H.status==="not_started").length,X=L>0?Math.round(V/L*100):0,I=k.reduce((H,Ee)=>H+Ee.count,0),ce=k.length>0&&Math.round(I/k.filter(H=>H.count>0).length*10)/10||0,ge=k.filter(H=>H.count>0).length,q=A.filter(H=>H.status==="pending"||H.status==="draft").length,R=A.filter(H=>H.status==="signed"||H.status==="approved").length,U=A.reduce((H,Ee)=>H+(Ee.total_amount||0),0),Q=D.reduce((H,Ee)=>H+(Ee.load_count||0),0),B=0,fe=M.filter(H=>H.submitted).length,je=s==="week"?7:30,ee=x(M);return{progress:{totalAreas:L,completedAreas:V,inProgressAreas:re,notStartedAreas:ie,progressPercent:X},crew:{totalManDays:I,avgCrewSize:ce,daysWithCrew:ge,history:k},tickets:{total:A.length,pending:q,signed:R,totalValue:U},disposal:{totalLoads:Q,totalTonnage:B},reports:{submitted:fe,due:je,streak:ee}}},[u,s]);function x(C){if(!C.length)return 0;const A=[...new Set(C.filter(L=>L.submitted).map(L=>L.report_date))].sort().reverse();let k=0;const D=new Date().toISOString().split("T")[0];let M=new Date(D);for(let L=0;L<30;L++){const V=M.toISOString().split("T")[0];if(A.includes(V))k++,M.setDate(M.getDate()-1);else break}return k}const w={primary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",muted:"#6b7280",purple:"#8b5cf6"},j=[w.success,w.primary,w.muted],S=[{name:"Completed",value:_.progress.completedAreas},{name:"In Progress",value:_.progress.inProgressAreas},{name:"Not Started",value:_.progress.notStartedAreas}].filter(C=>C.value>0),O=y.useMemo(()=>{const C={};return u.tickets.forEach(A=>{const k=A.work_date;C[k]=(C[k]||0)+1}),_.crew.history.map(A=>({...A,tickets:C[A.date]||0}))},[u.tickets,_.crew.history]);return n?f.jsxs("div",{className:"foreman-metrics loading",children:[f.jsxs("div",{className:"metrics-header",children:[f.jsxs("button",{className:"back-btn",onClick:r,children:[f.jsx(cr,{size:20}),"Back"]}),f.jsx("h2",{children:"Project Metrics"})]}),f.jsxs("div",{className:"loading-state",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:"Loading metrics..."})]})]}):f.jsxs("div",{className:"foreman-metrics",children:[f.jsxs("div",{className:"metrics-header",children:[f.jsxs("button",{className:"back-btn",onClick:r,children:[f.jsx(cr,{size:20}),"Back"]}),f.jsx("h2",{children:"Project Metrics"}),f.jsxs("div",{className:"time-toggle",children:[f.jsx("button",{className:s==="week"?"active":"",onClick:()=>c("week"),children:"7 Days"}),f.jsx("button",{className:s==="month"?"active":"",onClick:()=>c("month"),children:"30 Days"})]})]}),f.jsxs("div",{className:"summary-cards",children:[f.jsxs("div",{className:"summary-card progress-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(QA,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsxs("span",{className:"card-value",children:[_.progress.progressPercent,"%"]}),f.jsx("span",{className:"card-label",children:"Complete"})]}),f.jsxs("div",{className:"card-detail",children:[_.progress.completedAreas,"/",_.progress.totalAreas," areas"]})]}),f.jsxs("div",{className:"summary-card crew-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(JA,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.crew.totalManDays}),f.jsx("span",{className:"card-label",children:"Man-Days"})]}),f.jsxs("div",{className:"card-detail",children:["Avg ",_.crew.avgCrewSize," workers/day"]})]}),f.jsxs("div",{className:"summary-card tickets-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(Fo,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.tickets.total}),f.jsx("span",{className:"card-label",children:"T&M Tickets"})]}),f.jsxs("div",{className:"card-detail",children:[_.tickets.signed," signed, ",_.tickets.pending," pending"]})]}),f.jsxs("div",{className:"summary-card disposal-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(df,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.disposal.totalLoads}),f.jsx("span",{className:"card-label",children:"Disposal Loads"})]}),f.jsxs("div",{className:"card-detail",children:[_.disposal.totalTonnage.toFixed(1)," tons"]})]})]}),f.jsxs("div",{className:"charts-grid",children:[f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"Area Progress"}),S.length>0?f.jsx(kv,{width:"100%",height:200,children:f.jsxs(iZ,{children:[f.jsx(JP,{data:S,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",label:({name:C,value:A})=>`${C}: ${A}`,labelLine:!1,children:S.map((C,A)=>f.jsx(uu,{fill:j[A%j.length]},`cell-${A}`))}),f.jsx(Vv,{})]})}):f.jsx("div",{className:"no-data",children:"No area data"})]}),f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"Daily Crew Size"}),f.jsx(kv,{width:"100%",height:200,children:f.jsxs(GX,{data:_.crew.history,children:[f.jsx(gb,{strokeDasharray:"3 3",opacity:.3}),f.jsx(_b,{dataKey:"dayName",tick:{fontSize:12}}),f.jsx(wb,{tick:{fontSize:12}}),f.jsx(Vv,{formatter:C=>[C,"Workers"],labelFormatter:C=>`Day: ${C}`}),f.jsx(wM,{dataKey:"count",fill:w.primary,radius:[4,4,0,0]})]})})]}),f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"T&M Tickets by Day"}),f.jsx(kv,{width:"100%",height:200,children:f.jsxs(KX,{data:O,children:[f.jsx(gb,{strokeDasharray:"3 3",opacity:.3}),f.jsx(_b,{dataKey:"dayName",tick:{fontSize:12}}),f.jsx(wb,{tick:{fontSize:12}}),f.jsx(Vv,{formatter:C=>[C,"Tickets"]}),f.jsx(yM,{type:"monotone",dataKey:"tickets",stroke:w.success,strokeWidth:2,dot:{fill:w.success,strokeWidth:2}})]})})]}),f.jsxs("div",{className:"chart-card activity-card",children:[f.jsx("h3",{children:"Activity Summary"}),f.jsxs("div",{className:"activity-list",children:[f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.success}20`,color:w.success},children:f.jsx(Jn,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Days with Crew"}),f.jsxs("span",{className:"activity-value",children:[_.crew.daysWithCrew," of ",s==="week"?7:30]})]})]}),f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.primary}20`,color:w.primary},children:f.jsx(gq,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Reports Submitted"}),f.jsx("span",{className:"activity-value",children:_.reports.submitted})]})]}),f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.warning}20`,color:w.warning},children:f.jsx(Mo,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Report Streak"}),f.jsxs("span",{className:"activity-value",children:[_.reports.streak," days"]})]})]}),_.tickets.totalValue>0&&f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.purple}20`,color:w.purple},children:f.jsx(vq,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"T&M Value"}),f.jsxs("span",{className:"activity-value",children:["$",_.tickets.totalValue.toLocaleString()]})]})]})]})]})]}),f.jsx("style",{children:`
        .foreman-metrics {
          padding: 1rem;
          max-width: 100%;
          overflow-x: hidden;
        }

        .foreman-metrics.loading {
          min-height: 400px;
        }

        .loading-state {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 3rem;
          color: var(--text-secondary);
        }

        .metrics-header {
          display: flex;
          align-items: center;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
        }

        .metrics-header h2 {
          flex: 1;
          margin: 0;
          font-size: 1.25rem;
          color: var(--text-primary);
        }

        .back-btn {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: var(--bg-elevated);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          color: var(--text-primary);
          cursor: pointer;
          font-size: 0.875rem;
        }

        .back-btn:hover {
          background: var(--bg-tertiary);
        }

        .time-toggle {
          display: flex;
          background: var(--bg-elevated);
          border-radius: 8px;
          padding: 4px;
          gap: 4px;
        }

        .time-toggle button {
          padding: 0.5rem 1rem;
          border: none;
          background: transparent;
          border-radius: 6px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.875rem;
          transition: all 0.2s;
        }

        .time-toggle button.active {
          background: var(--primary-color, #3b82f6);
          color: white;
        }

        .summary-cards {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        @media (min-width: 640px) {
          .summary-cards {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        .summary-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .card-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .progress-card .card-icon {
          background: #dbeafe;
          color: #3b82f6;
        }

        .crew-card .card-icon {
          background: #dcfce7;
          color: #22c55e;
        }

        .tickets-card .card-icon {
          background: #fef3c7;
          color: #f59e0b;
        }

        .disposal-card .card-icon {
          background: #f3e8ff;
          color: #8b5cf6;
        }

        [data-theme="dark"] .progress-card .card-icon {
          background: #1e3a5f;
        }

        [data-theme="dark"] .crew-card .card-icon {
          background: #14532d;
        }

        [data-theme="dark"] .tickets-card .card-icon {
          background: #451a03;
        }

        [data-theme="dark"] .disposal-card .card-icon {
          background: #3b0764;
        }

        .card-content {
          display: flex;
          flex-direction: column;
        }

        .card-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: var(--text-primary);
          line-height: 1.2;
        }

        .card-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .card-detail {
          font-size: 0.75rem;
          color: var(--text-secondary);
          margin-top: auto;
        }

        .charts-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        @media (min-width: 640px) {
          .charts-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }

        .chart-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
        }

        .chart-card h3 {
          margin: 0 0 1rem 0;
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        .no-data {
          height: 200px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: var(--text-secondary);
          font-size: 0.875rem;
        }

        .activity-card {
          grid-column: 1 / -1;
        }

        @media (min-width: 640px) {
          .activity-card {
            grid-column: auto;
          }
        }

        .activity-list {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
        }

        .activity-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .activity-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .activity-info {
          display: flex;
          flex-direction: column;
          flex: 1;
        }

        .activity-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
        }

        .activity-value {
          font-size: 1rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        /* Recharts customization */
        .recharts-cartesian-grid-horizontal line,
        .recharts-cartesian-grid-vertical line {
          stroke: var(--border-color);
        }

        .recharts-text {
          fill: var(--text-secondary);
        }

        .recharts-tooltip-wrapper {
          outline: none;
        }

        .recharts-default-tooltip {
          background: var(--bg-card) !important;
          border: 1px solid var(--border-color) !important;
          border-radius: 8px !important;
        }

        .recharts-tooltip-label {
          color: var(--text-primary) !important;
        }

        .recharts-tooltip-item {
          color: var(--text-secondary) !important;
        }
      `})]})}const uy={crew:{id:"crew",label:"Crew Check-in",icon:JA,description:"Log who's on site today"},tm:{id:"tm",label:"T&M Ticket",icon:Fo,description:"Create time & materials ticket"},report:{id:"report",label:"Daily Report",icon:ZA,description:"Submit end-of-day report"},progress:{id:"progress",label:"Update Progress",icon:eN,description:"Mark tasks complete"},disposal:{id:"disposal",label:"Disposal Loads",icon:df,description:"Log haul-off loads"},docs:{id:"docs",label:"Documents",icon:_q,description:"View project files"},metrics:{id:"metrics",label:"Project Metrics",icon:bq,description:"View charts & trends"},punchlist:{id:"punchlist",label:"Punch List",icon:yq,description:"View & resolve punch items"},injury:{id:"injury",label:"Report Injury",icon:lm,description:"Log safety incident",isDanger:!0}},HA=["crew","tm","report","progress"],FA=e=>`fm_pinned_${e}`;function sZ({project:e,todayStatus:t,progress:r,areasWorking:n,areasDone:i,areasRemaining:s,punchListOpenCount:c,onNavigate:u,onShowToast:m}){const[h,p]=y.useState(()=>{try{const k=localStorage.getItem(FA(e?.id));return k?JSON.parse(k):HA}catch{return HA}}),[g,_]=y.useState(!1),[x,w]=y.useState(!0);y.useEffect(()=>{if(e?.id)try{localStorage.setItem(FA(e.id),JSON.stringify(h))}catch{}},[h,e?.id]);const j=y.useCallback(k=>{p(D=>D.includes(k)?D.length<=1?(m?.("Keep at least one pinned action","info"),D):D.filter(M=>M!==k):D.length>=5?(m?.("Maximum 5 pinned actions","info"),D):[...D,k])},[m]),S=y.useMemo(()=>Object.keys(uy).filter(k=>!h.includes(k)),[h]),O=y.useCallback(k=>{switch(k){case"crew":return{done:t.crewCheckedIn,badge:t.crewCheckedIn?`${t.crewCount} on site`:null,status:t.crewCheckedIn?"Done today":"Not started"};case"tm":return{done:!1,badge:t.tmTicketsToday>0?`${t.tmTicketsToday} today`:null,status:t.tmTicketsToday>0?`${t.tmTicketsToday} created`:"Create new"};case"report":return{done:t.dailyReportDone,badge:null,status:t.dailyReportDone?"Submitted":"Not submitted"};case"progress":return{done:s===0,badge:s>0?`${s} left`:null,status:`${r}% complete`};case"disposal":return{done:!1,badge:t.disposalLoadsToday>0?`${t.disposalLoadsToday} today`:null,status:t.disposalLoadsToday>0?`${t.disposalLoadsToday} logged`:"Log loads"};case"punchlist":return{done:c===0&&c!==void 0,badge:c>0?`${c} open`:null,status:c>0?`${c} items open`:"All clear"};default:return{done:!1,badge:null,status:null}}},[t,r,s]),C=k=>{const D=uy[k];if(!D)return null;const M=D.icon,L=O(k);return f.jsxs("div",{className:"fm-pinned-card-wrapper",children:[f.jsxs("button",{className:`fm-pinned-card ${L.done?"completed":""} ${D.isDanger?"danger":""}`,onClick:()=>!g&&u(k),disabled:g,children:[f.jsx("div",{className:"fm-pinned-icon",children:f.jsx(M,{size:28})}),f.jsx("span",{className:"fm-pinned-label",children:D.label}),L.badge&&!g&&f.jsx("span",{className:"fm-pinned-badge",children:L.badge}),L.done&&!g&&f.jsx("div",{className:"fm-pinned-check",children:f.jsx(Jn,{size:18})})]}),g&&f.jsx("button",{className:"fm-pin-toggle pinned",onClick:()=>j(k),"aria-label":`Unpin ${D.label}`,children:f.jsx(wq,{size:16})})]},k)},A=k=>{const D=uy[k];if(!D)return null;const M=D.icon,L=O(k);return f.jsxs("div",{className:"fm-action-row-wrapper",children:[f.jsxs("button",{className:`fm-action-row ${D.isDanger?"danger":""}`,onClick:()=>!g&&u(k),disabled:g,children:[f.jsx(M,{size:20}),f.jsx("span",{className:"fm-action-label",children:D.label}),L.badge&&!g&&f.jsx("span",{className:"fm-action-badge",children:L.badge})]}),g&&f.jsx("button",{className:"fm-pin-toggle",onClick:()=>j(k),"aria-label":`Pin ${D.label}`,children:f.jsx(jq,{size:16})})]},k)};return f.jsxs("div",{className:"fm-landing",children:[f.jsxs("button",{className:"fm-metrics-snapshot",onClick:()=>u("metrics"),"aria-label":"View full project metrics",children:[f.jsxs("div",{className:"fm-snapshot-header",children:[f.jsx(QA,{size:18}),f.jsx("span",{children:"Project Overview"}),f.jsx(ff,{size:16,className:"fm-snapshot-arrow"})]}),f.jsxs("div",{className:"fm-snapshot-stats",children:[f.jsxs("div",{className:"fm-snapshot-stat main",children:[f.jsxs("span",{className:"fm-snapshot-value",children:[r,"%"]}),f.jsx("span",{className:"fm-snapshot-label",children:"Complete"})]}),f.jsx("div",{className:"fm-snapshot-divider"}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:n}),f.jsx("span",{className:"fm-snapshot-label",children:"In Progress"})]}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:i}),f.jsx("span",{className:"fm-snapshot-label",children:"Done"})]}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:s}),f.jsx("span",{className:"fm-snapshot-label",children:"Remaining"})]})]}),t.crewCheckedIn&&f.jsxs("div",{className:"fm-snapshot-today",children:[f.jsx(Mo,{size:14}),f.jsxs("span",{children:[t.crewCount," crew on site today"]})]})]}),f.jsxs("div",{className:"fm-section-header",children:[f.jsx("h2",{children:"Quick Actions"}),f.jsx("button",{className:`fm-edit-btn ${g?"active":""}`,onClick:()=>_(!g),"aria-label":g?"Done editing":"Customize actions",children:g?"Done":f.jsx(xq,{size:18})})]}),g&&f.jsx("p",{className:"fm-edit-hint",children:"Tap icons to pin/unpin actions"}),f.jsx("div",{className:"fm-pinned-grid",children:h.map(C)}),S.length>0&&f.jsxs("div",{className:"fm-more-section",children:[f.jsxs("button",{className:"fm-more-header",onClick:()=>w(!x),"aria-expanded":!x,children:[f.jsx("span",{children:"More Actions"}),x?f.jsx(ff,{size:20}):f.jsx(XA,{size:20})]}),!x&&f.jsx("div",{className:"fm-more-content",children:S.map(A)})]}),f.jsx("style",{children:`
        .fm-landing {
          padding: 0 1rem 2rem;
        }

        /* Metrics Snapshot - Premium Hero Card */
        .fm-metrics-snapshot {
          width: 100%;
          background: var(--gradient-blue, linear-gradient(135deg, #3b82f6, #2563eb, #1d4ed8));
          border: none;
          border-radius: 16px;
          padding: 1.25rem;
          color: white;
          text-align: left;
          cursor: pointer;
          margin-bottom: 1.5rem;
          transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s ease;
          box-shadow: 0 4px 15px rgba(59, 130, 246, 0.25), 0 2px 8px rgba(0,0,0,0.15);
          position: relative;
          overflow: hidden;
        }

        .fm-metrics-snapshot::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 50%;
          background: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, transparent 100%);
          pointer-events: none;
          border-radius: 16px 16px 0 0;
        }

        .fm-metrics-snapshot::after {
          content: '';
          position: absolute;
          bottom: -40px;
          right: -40px;
          width: 160px;
          height: 160px;
          background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%);
          pointer-events: none;
        }

        .fm-metrics-snapshot:active {
          transform: scale(0.98);
        }

        .fm-snapshot-header {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          opacity: 0.9;
          margin-bottom: 0.875rem;
          font-weight: 500;
          position: relative;
          z-index: 1;
        }

        .fm-snapshot-arrow {
          margin-left: auto;
          opacity: 0.7;
        }

        .fm-snapshot-stats {
          display: flex;
          align-items: center;
          gap: 0.875rem;
          position: relative;
          z-index: 1;
        }

        .fm-snapshot-stat {
          display: flex;
          flex-direction: column;
          align-items: center;
          flex: 1;
        }

        .fm-snapshot-stat.main {
          flex: 1.5;
          align-items: flex-start;
        }

        .fm-snapshot-value {
          font-size: 1.625rem;
          font-weight: 700;
          line-height: 1.2;
          font-variant-numeric: tabular-nums;
          letter-spacing: -0.02em;
        }

        .fm-snapshot-stat.main .fm-snapshot-value {
          font-size: 2.25rem;
        }

        .fm-snapshot-label {
          font-size: 0.68rem;
          opacity: 0.85;
          text-transform: uppercase;
          letter-spacing: 0.06em;
          font-weight: 600;
          margin-top: 0.1rem;
        }

        .fm-snapshot-divider {
          width: 1px;
          height: 44px;
          background: rgba(255,255,255,0.25);
        }

        .fm-snapshot-today {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-top: 0.875rem;
          padding-top: 0.875rem;
          border-top: 1px solid rgba(255,255,255,0.15);
          font-size: 0.8rem;
          opacity: 0.9;
          font-weight: 500;
          position: relative;
          z-index: 1;
        }

        /* Section Header */
        .fm-section-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.875rem;
        }

        .fm-section-header h2 {
          font-size: 1.05rem;
          font-weight: 700;
          color: var(--text-primary);
          margin: 0;
          letter-spacing: -0.01em;
        }

        .fm-edit-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0.5rem;
          background: var(--gradient-card-dark, var(--bg-elevated));
          border: 1px solid var(--border-color);
          border-radius: 10px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.8rem;
          min-width: 36px;
          min-height: 36px;
          transition: all 0.2s ease;
          box-shadow: var(--shadow-sm, 0 1px 2px rgba(0,0,0,0.1));
        }

        .fm-edit-btn:hover {
          border-color: var(--accent-blue, #3b82f6);
        }

        .fm-edit-btn.active {
          background: var(--gradient-blue, var(--primary-color, #3b82f6));
          border-color: transparent;
          color: white;
          padding: 0.5rem 1rem;
          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .fm-edit-hint {
          font-size: 0.8rem;
          color: var(--text-secondary);
          margin: 0 0 0.75rem;
          text-align: center;
          font-weight: 500;
        }

        /* Pinned Actions Grid */
        .fm-pinned-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 0.875rem;
          margin-bottom: 1.5rem;
        }

        .fm-pinned-card-wrapper {
          position: relative;
        }

        .fm-pinned-card {
          width: 100%;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 1.375rem 1rem;
          background: var(--gradient-card-dark, var(--bg-card));
          border: 1px solid var(--border-color);
          border-radius: 14px;
          cursor: pointer;
          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
          min-height: 114px;
          position: relative;
          box-shadow: var(--shadow-card, 0 1px 3px rgba(0,0,0,0.1));
          overflow: hidden;
        }

        .fm-pinned-card::before {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          height: 2px;
          background: var(--gradient-blue, linear-gradient(90deg, #3b82f6, #2563eb));
          opacity: 0;
          transition: opacity 0.2s ease;
        }

        .fm-pinned-card:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: var(--shadow-card-hover, 0 8px 25px rgba(0,0,0,0.15));
          border-color: rgba(59, 130, 246, 0.3);
        }

        .fm-pinned-card:hover:not(:disabled)::before {
          opacity: 1;
        }

        .fm-pinned-card:active:not(:disabled) {
          transform: scale(0.97);
        }

        .fm-pinned-card:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-pinned-card.completed {
          border-color: rgba(34, 197, 94, 0.4);
          background: linear-gradient(135deg, rgba(34, 197, 94, 0.08) 0%, rgba(34, 197, 94, 0.03) 100%);
        }

        .fm-pinned-card.completed::before {
          background: linear-gradient(90deg, #22c55e, #16a34a);
          opacity: 1;
        }

        .fm-pinned-card.danger {
          border-color: rgba(245, 158, 11, 0.4);
        }

        .fm-pinned-card.danger::before {
          background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .fm-pinned-card.danger .fm-pinned-icon {
          color: #f59e0b;
        }

        .fm-pinned-icon {
          color: var(--primary-color, #3b82f6);
          margin-bottom: 0.625rem;
          transition: transform 0.2s ease;
        }

        .fm-pinned-card:hover:not(:disabled) .fm-pinned-icon {
          transform: scale(1.08);
        }

        .fm-pinned-label {
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
          text-align: center;
          letter-spacing: -0.01em;
        }

        .fm-pinned-badge {
          position: absolute;
          top: 8px;
          right: 8px;
          background: var(--gradient-blue, var(--primary-color, #3b82f6));
          color: white;
          font-size: 0.68rem;
          font-weight: 700;
          padding: 0.2rem 0.55rem;
          border-radius: 10px;
          box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
        }

        .fm-pinned-check {
          position: absolute;
          top: 8px;
          right: 8px;
          color: #22c55e;
          filter: drop-shadow(0 1px 3px rgba(34, 197, 94, 0.3));
        }

        .fm-pin-toggle {
          position: absolute;
          top: -8px;
          right: -8px;
          width: 28px;
          height: 28px;
          border-radius: 50%;
          background: var(--bg-card);
          border: 2px solid var(--border-color);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          color: var(--text-secondary);
          transition: all 0.2s ease;
          z-index: 10;
          box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        }

        .fm-pin-toggle:hover {
          background: var(--bg-elevated);
          transform: scale(1.1);
        }

        .fm-pin-toggle.pinned {
          background: #ef4444;
          border-color: #ef4444;
          color: white;
          box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        /* More Actions Section */
        .fm-more-section {
          background: var(--gradient-card-dark, var(--bg-card));
          border: 1px solid var(--border-color);
          border-radius: 14px;
          overflow: hidden;
          box-shadow: var(--shadow-card, 0 1px 3px rgba(0,0,0,0.1));
        }

        .fm-more-header {
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 1rem 1.125rem;
          background: transparent;
          border: none;
          cursor: pointer;
          font-size: 0.9rem;
          font-weight: 600;
          color: var(--text-primary);
          transition: background 0.15s ease;
        }

        .fm-more-header:hover {
          background: var(--bg-secondary, rgba(255,255,255,0.02));
        }

        .fm-more-header:active {
          background: var(--bg-elevated);
        }

        .fm-more-content {
          border-top: 1px solid var(--border-color);
        }

        .fm-action-row-wrapper {
          position: relative;
          display: flex;
          align-items: center;
        }

        .fm-action-row-wrapper .fm-pin-toggle {
          position: static;
          margin-right: 0.75rem;
          flex-shrink: 0;
        }

        .fm-action-row {
          flex: 1;
          display: flex;
          align-items: center;
          gap: 0.875rem;
          padding: 1.125rem;
          background: transparent;
          border: none;
          border-bottom: 1px solid var(--border-color);
          cursor: pointer;
          text-align: left;
          color: var(--text-primary);
          transition: all 0.2s ease;
        }

        .fm-action-row:last-child {
          border-bottom: none;
        }

        .fm-action-row:hover:not(:disabled) {
          background: var(--bg-secondary, rgba(255,255,255,0.02));
          padding-left: 1.25rem;
        }

        .fm-action-row:active:not(:disabled) {
          background: var(--bg-elevated);
        }

        .fm-action-row:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-action-row.danger {
          color: #f59e0b;
        }

        .fm-action-row svg {
          transition: color 0.15s ease;
        }

        .fm-action-row:hover:not(:disabled) svg {
          color: var(--accent-blue, #3b82f6);
        }

        .fm-action-row.danger:hover:not(:disabled) svg {
          color: #f59e0b;
        }

        .fm-action-label {
          flex: 1;
          font-size: 0.9rem;
          font-weight: 500;
        }

        .fm-action-badge {
          font-size: 0.72rem;
          color: var(--text-secondary);
          background: var(--bg-elevated);
          padding: 0.25rem 0.625rem;
          border-radius: 20px;
          font-weight: 600;
        }

        /* Dark mode adjustments */
        [data-theme="dark"] .fm-metrics-snapshot {
          background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 60%, #172554 100%);
          box-shadow: 0 4px 20px rgba(30, 64, 175, 0.3), 0 2px 8px rgba(0,0,0,0.2);
        }

        [data-theme="dark"] .fm-pinned-card.completed {
          background: linear-gradient(135deg, rgba(34, 197, 94, 0.12) 0%, rgba(34, 197, 94, 0.04) 100%);
        }
      `})]})}const dy=[{value:"high",label:"High",color:"#ef4444"},{value:"medium",label:"Medium",color:"#f59e0b"},{value:"low",label:"Low",color:"#6b7280"}],fy=[{value:"open",label:"Open",icon:Eq,color:"#ef4444"},{value:"in_progress",label:"In Progress",icon:Mo,color:"#f59e0b"},{value:"complete",label:"Complete",icon:Jn,color:"#10b981"}];function UM({projectId:e,areas:t=[],companyId:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState(!0),[m,h]=y.useState(!1),[p,g]=y.useState(null),[_,x]=y.useState("all"),[w,j]=y.useState("all"),[S,O]=y.useState(!1),[C,A]=y.useState({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),k=y.useCallback(async()=>{if(!e||!P){u(!1);return}try{const q=$i(),{data:R,error:U}=await q.from("punch_list_items").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(U)throw U;s(R||[])}catch(q){console.error("Error loading punch list:",q),s([])}finally{u(!1)}},[e]);y.useEffect(()=>{k()},[k]),y.useEffect(()=>{if(!e||!P)return;const q=T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},()=>k()).subscribe();return()=>{T.removeChannel(q)}},[e,k]);const D=y.useMemo(()=>i.filter(q=>!(_!=="all"&&q.status!==_||w!=="all"&&q.area_id!==w)),[i,_,w]),M=y.useMemo(()=>{const q=i.filter(Q=>Q.status==="open").length,R=i.filter(Q=>Q.status==="in_progress").length,U=i.filter(Q=>Q.status==="complete").length;return{open:q,inProgress:R,complete:U,total:i.length}},[i]),L=()=>{A({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),g(null),h(!1)},V=async q=>{if(q.preventDefault(),!C.description.trim()){n?.("Please enter a description","error");return}O(!0);try{const R=$i();if(p){const{error:U}=await R.from("punch_list_items").update({description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,updated_at:new Date().toISOString()}).eq("id",p.id);if(U)throw U;n?.("Punch item updated","success")}else{const{error:U}=await R.from("punch_list_items").insert({project_id:e,company_id:r,description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,status:"open"});if(U)throw U;n?.("Punch item added","success")}L(),k()}catch(R){console.error("Error saving punch item:",R),n?.(R.message||"Error saving item","error")}finally{O(!1)}},re=async(q,R)=>{try{const U={status:R,updated_at:new Date().toISOString()};R==="complete"?U.completed_at=new Date().toISOString():U.completed_at=null;const{error:Q}=await $i().from("punch_list_items").update(U).eq("id",q);if(Q)throw Q;k()}catch(U){console.error("Error updating status:",U),n?.("Error updating status","error")}},ie=async q=>{if(confirm("Delete this punch item?"))try{const{error:R}=await $i().from("punch_list_items").delete().eq("id",q);if(R)throw R;n?.("Item deleted","success"),k()}catch(R){console.error("Error deleting item:",R),n?.("Error deleting item","error")}},X=q=>{A({description:q.description,area_id:q.area_id||"",assigned_to:q.assigned_to||"",priority:q.priority||"medium",notes:q.notes||"",photo_url:q.photo_url||""}),g(q),h(!0)},I=q=>q&&t.find(U=>U.id===q)?.name||null,ce=q=>dy.find(R=>R.value===q)||dy[1],ge=q=>fy.find(R=>R.value===q)||fy[0];return f.jsxs("div",{className:"punch-list-card",children:[f.jsxs("div",{className:"punch-list-header",children:[f.jsxs("div",{className:"punch-list-title",children:[f.jsx(Jn,{size:18}),f.jsx("h3",{children:"Punch List"}),M.total>0&&f.jsxs("span",{className:"punch-stats-inline",children:[f.jsxs("span",{className:"punch-stat-open",children:[M.open," open"]}),M.inProgress>0&&f.jsxs("span",{className:"punch-stat-progress",children:[M.inProgress," in progress"]}),f.jsxs("span",{className:"punch-stat-complete",children:[M.complete,"/",M.total," complete"]})]})]}),f.jsxs("button",{className:"punch-add-btn",onClick:()=>{L(),h(!0)},children:[f.jsx(Zd,{size:16}),"Add Item"]})]}),M.total>0&&f.jsxs("div",{className:"punch-progress-bar",children:[f.jsx("div",{className:"punch-progress-fill",style:{width:`${M.complete/M.total*100}%`}}),f.jsxs("span",{className:"punch-progress-label",children:[Math.round(M.complete/M.total*100),"% complete"]})]}),M.total>0&&f.jsxs("div",{className:"punch-filters",children:[f.jsxs("div",{className:"punch-filter-group",children:[f.jsx(Sq,{size:14}),f.jsxs("select",{value:_,onChange:q=>x(q.target.value),className:"punch-filter-select",children:[f.jsx("option",{value:"all",children:"All Status"}),fy.map(q=>f.jsx("option",{value:q.value,children:q.label},q.value))]})]}),t.length>0&&f.jsxs("div",{className:"punch-filter-group",children:[f.jsx(hy,{size:14}),f.jsxs("select",{value:w,onChange:q=>j(q.target.value),className:"punch-filter-select",children:[f.jsx("option",{value:"all",children:"All Areas"}),t.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]})]}),m&&f.jsxs("form",{className:"punch-form",onSubmit:V,children:[f.jsxs("div",{className:"punch-form-header",children:[f.jsx("h4",{children:p?"Edit Item":"New Punch Item"}),f.jsx("button",{type:"button",className:"punch-form-close",onClick:L,children:f.jsx(Ob,{size:16})})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Description *"}),f.jsx("textarea",{value:C.description,onChange:q=>A(R=>({...R,description:q.target.value})),placeholder:"What needs to be fixed or completed?",rows:2,required:!0})]}),f.jsxs("div",{className:"punch-form-row",children:[f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Area"}),f.jsxs("select",{value:C.area_id,onChange:q=>A(R=>({...R,area_id:q.target.value})),children:[f.jsx("option",{value:"",children:"No area"}),t.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Assigned To"}),f.jsx("input",{type:"text",value:C.assigned_to,onChange:q=>A(R=>({...R,assigned_to:q.target.value})),placeholder:"Name or company"})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Priority"}),f.jsx("select",{value:C.priority,onChange:q=>A(R=>({...R,priority:q.target.value})),children:dy.map(q=>f.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Notes"}),f.jsx("textarea",{value:C.notes,onChange:q=>A(R=>({...R,notes:q.target.value})),placeholder:"Additional details...",rows:2})]}),f.jsxs("div",{className:"punch-form-actions",children:[f.jsx("button",{type:"button",className:"punch-btn-cancel",onClick:L,children:"Cancel"}),f.jsxs("button",{type:"submit",className:"punch-btn-save",disabled:S,children:[f.jsx(Oq,{size:14}),S?"Saving...":p?"Update":"Add Item"]})]})]}),c?f.jsx("div",{className:"punch-loading",children:"Loading punch list..."}):D.length===0?f.jsxs("div",{className:"punch-empty",children:[f.jsx(Jn,{size:32,style:{opacity:.3}}),f.jsx("p",{children:i.length===0?"No punch items yet":"No items match filters"}),i.length===0&&f.jsx("span",{children:"Add items that need attention before project closeout"})]}):f.jsx("div",{className:"punch-items-list",children:D.map(q=>{const R=ge(q.status),U=ce(q.priority),Q=R.icon;return f.jsxs("div",{className:`punch-item punch-item-${q.status}`,children:[f.jsx("button",{className:"punch-item-status-btn",onClick:()=>{const B=q.status==="open"?"in_progress":q.status==="in_progress"?"complete":"open";re(q.id,B)},title:`Click to change status (current: ${R.label})`,children:f.jsx(Q,{size:18,style:{color:R.color}})}),f.jsxs("div",{className:"punch-item-content",children:[f.jsxs("div",{className:"punch-item-top",children:[f.jsx("span",{className:`punch-item-desc ${q.status==="complete"?"completed":""}`,children:q.description}),f.jsx("div",{className:"punch-item-badges",children:f.jsx("span",{className:"punch-priority-badge",style:{color:U.color,borderColor:`${U.color}40`},children:U.label})})]}),f.jsxs("div",{className:"punch-item-meta",children:[I(q.area_id)&&f.jsxs("span",{className:"punch-meta-tag",children:[f.jsx(hy,{size:11}),I(q.area_id)]}),q.assigned_to&&f.jsxs("span",{className:"punch-meta-tag",children:[f.jsx(Cq,{size:11}),q.assigned_to]}),q.completed_at&&f.jsxs("span",{className:"punch-meta-tag completed",children:[f.jsx(Jn,{size:11}),"Done ",new Date(q.completed_at).toLocaleDateString()]})]}),q.notes&&f.jsx("div",{className:"punch-item-notes",children:q.notes})]}),f.jsxs("div",{className:"punch-item-actions",children:[f.jsx("button",{className:"punch-action-btn",onClick:()=>X(q),title:"Edit",children:f.jsx(_c,{size:14})}),f.jsx("button",{className:"punch-action-btn delete",onClick:()=>ie(q.id),title:"Delete",children:f.jsx(Aq,{size:14})})]})]},q.id)})})]})}const lQ=Object.freeze(Object.defineProperty({__proto__:null,default:UM},Symbol.toStringTag,{value:"Module"}));function lZ({project:e,companyId:t,foremanName:r,onShowToast:n,onExit:i}){const[s,c]=y.useState([]),[u,m]=y.useState(!0),[h,p]=y.useState(null),[g,_]=y.useState({}),[x,w]=y.useState("home"),[j,S]=y.useState(!1),[O,C]=y.useState(0),[A,k]=y.useState({crewCheckedIn:!1,crewCount:0,tmTicketsToday:0,dailyReportDone:!1,disposalLoadsToday:0}),[D,M]=y.useState(()=>typeof window<"u"?document.documentElement.getAttribute("data-theme")==="dark":!1);new Date().getHours(),y.useEffect(()=>{e?.id&&(X(),L(),V())},[e?.id]);const L=async()=>{try{const H=new Date().toISOString().split("T")[0],Te=(await be.getCrewCheckin(e.id,H))?.workers||[],Ie=Te.length>0,ze=(await be.getTMTickets?.(e.id)||[]).filter(we=>we.work_date===H),J=await be.getDisposalLoads?.(e.id,H)||[];k({crewCheckedIn:Ie,crewCount:Te.length,tmTicketsToday:ze.length,dailyReportDone:!1,disposalLoadsToday:J.reduce((we,xe)=>we+(xe.load_count||1),0)})}catch(H){console.error("Error loading today status:",H)}},V=async()=>{if(!(!e?.id||!P))try{const{count:H}=await $i().from("punch_list_items").select("*",{count:"exact",head:!0}).eq("project_id",e.id).eq("status","open");C(H||0)}catch{}},re=y.useRef(null),ie=y.useCallback(()=>{re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{X(),L()},300)},[e?.id]);y.useEffect(()=>{if(!e?.id)return;const H=[],Ee=be.subscribeToAreas?.(e.id,ie);Ee&&H.push(Ee);const Te=be.subscribeToCrewCheckins?.(e.id,ie);Te&&H.push(Te);const Ie=be.subscribeToTMTickets?.(e.id,ie);Ie&&H.push(Ie);const pe=be.subscribeToHaulOffs?.(e.id,ie);pe&&H.push(pe);const ze=be.subscribeToDailyReports?.(e.id,ie);ze&&H.push(ze);const J=be.subscribeToCORs?.(e.id,ie);J&&H.push(J);const we=be.subscribeToMaterialRequests?.(e.id,ie);we&&H.push(we);const xe=be.subscribeToProject?.(e.id,ie);xe&&H.push(xe);const ae=be.subscribeToPunchList?.(e.id,()=>{V(),ie()});if(ae&&H.push(ae),t){const He=be.subscribeToMaterialsEquipment?.(t,ie);He&&H.push(He);const ve=be.subscribeToLaborRates?.(t,ie);ve&&H.push(ve)}return()=>{re.current&&clearTimeout(re.current),H.forEach(He=>be.unsubscribe?.(He))}},[e?.id,ie]);const X=async()=>{try{const H=await be.getAreas(e.id);c(H);const Ee=[...new Set(H.map(Ie=>Ie.group_name||"General"))],Te={};Ee.forEach(Ie=>Te[Ie]=!1),_(Te)}catch(H){console.error("Error loading areas:",H),n?.("Error loading areas","error")}finally{m(!1)}},I=async(H,Ee)=>{const Te=s.find(pe=>pe.id===H);if(!Te)return;const Ie=Te.status===Ee?"not_started":Ee;p(H);try{await be.updateAreaStatus(H,Ie),c(pe=>pe.map(ze=>ze.id===H?{...ze,status:Ie}:ze))}catch(pe){console.error("Error updating status:",pe),n?.("Error updating","error")}finally{p(null)}},ce=H=>{_(Ee=>({...Ee,[H]:!Ee[H]}))},ge=()=>{const H=D?"light":"dark";document.documentElement.setAttribute("data-theme",H),localStorage.setItem("theme",H),M(!D)},q=BL(s),R=s.filter(H=>H.status==="done").length,U=s.filter(H=>H.status==="working").length,Q=s.length-R,B=s.reduce((H,Ee)=>{const Te=Ee.group_name||"General";return H[Te]||(H[Te]=[]),H[Te].push(Ee),H},{}),fe=Object.keys(B).length>1||Object.keys(B).length===1&&!B.General,je=H=>`${H.filter(Te=>Te.status==="done").length}/${H.length}`,ee=y.useCallback(H=>{w(H)},[]);return x==="tm"?f.jsx("div",{className:"fm-view",children:f.jsx(t3,{project:e,companyId:t,onSubmit:()=>w("home"),onCancel:()=>w("home"),onShowToast:n})}):x==="report"?f.jsx(n3,{project:e,onShowToast:n,onClose:()=>w("home")}):x==="injury"?f.jsx("div",{className:"fm-view",children:f.jsx(a3,{project:e,companyId:t,onClose:()=>w("home"),onReportCreated:()=>{w("home"),n?.("Injury report submitted","success")}})}):x==="crew"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Crew Check-in"})]}),f.jsx(r3,{project:e,companyId:t,onShowToast:n})]}):x==="disposal"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Disposal Loads"})]}),f.jsx(o3,{project:e,date:new Date().toISOString().split("T")[0],onShowToast:n})]}):x==="docs"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Documents"})]}),f.jsx(c3,{projectId:e.id,onShowToast:n})]}):x==="metrics"?f.jsx(oZ,{project:e,companyId:t,onBack:()=>w("home")}):x==="punchlist"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>{w("home"),V()},children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Punch List"})]}),f.jsx(UM,{projectId:e.id,areas:s,companyId:t,onShowToast:n})]}):x==="progress"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Progress"}),f.jsxs("span",{className:"fm-subheader-badge",children:[q,"%"]})]}),f.jsx("div",{className:"fm-progress-content",children:u?f.jsxs("div",{className:"fm-loading",children:[f.jsx("div",{className:"spinner"}),f.jsx("span",{children:"Loading..."})]}):s.length===0?f.jsxs("div",{className:"fm-empty",children:[f.jsx(eN,{size:48}),f.jsx("h3",{children:"No tasks yet"}),f.jsx("p",{children:"Office will add tasks to this project"})]}):fe?Object.entries(B).map(([H,Ee])=>f.jsxs("div",{className:"fm-group",children:[f.jsxs("button",{className:"fm-group-header",onClick:()=>ce(H),children:[f.jsxs("div",{className:"fm-group-left",children:[g[H]?f.jsx(ff,{size:18}):f.jsx(bc,{size:18}),f.jsx("span",{children:H})]}),f.jsx("span",{className:"fm-group-count",children:je(Ee)})]}),g[H]&&f.jsx("div",{className:"fm-group-items",children:Ee.map(Te=>f.jsxs("div",{className:`fm-task ${Te.status}`,children:[f.jsx("span",{className:"fm-task-name",children:Te.name}),f.jsxs("div",{className:"fm-task-btns",children:[f.jsx("button",{className:`fm-status-btn working ${Te.status==="working"?"active":""}`,onClick:()=>I(Te.id,"working"),disabled:h===Te.id,children:f.jsx(Mo,{size:14})}),f.jsx("button",{className:`fm-status-btn done ${Te.status==="done"?"active":""}`,onClick:()=>I(Te.id,"done"),disabled:h===Te.id,children:f.jsx(Jn,{size:14})})]})]},Te.id))})]},H)):f.jsx("div",{className:"fm-task-list",children:s.map(H=>f.jsxs("div",{className:`fm-task ${H.status}`,children:[f.jsx("span",{className:"fm-task-name",children:H.name}),f.jsxs("div",{className:"fm-task-btns",children:[f.jsx("button",{className:`fm-status-btn working ${H.status==="working"?"active":""}`,onClick:()=>I(H.id,"working"),disabled:h===H.id,children:f.jsx(Mo,{size:14})}),f.jsx("button",{className:`fm-status-btn done ${H.status==="done"?"active":""}`,onClick:()=>I(H.id,"done"),disabled:h===H.id,children:f.jsx(Jn,{size:14})})]})]},H.id))})})]}):f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-header",children:[f.jsx("button",{className:"fm-exit",onClick:i,children:f.jsx(cr,{size:20})}),f.jsxs("div",{className:"fm-header-center",children:[f.jsx("h1",{className:"fm-project-name",children:e.name}),r&&f.jsx("span",{className:"fm-foreman-name",children:r}),f.jsx("button",{className:"fm-info-toggle",onClick:()=>S(!j),children:f.jsx(Nq,{size:16})})]}),f.jsx("button",{className:"fm-theme",onClick:ge,children:D?f.jsx(YA,{size:20}):f.jsx(GA,{size:20})})]}),j&&f.jsxs("div",{className:"fm-project-info",children:[e.job_number&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Job #"}),f.jsx("span",{children:e.job_number})]}),e.address&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Address"}),f.jsx("span",{children:e.address})]}),e.general_contractor&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"GC"}),f.jsx("span",{children:e.general_contractor})]}),e.client_phone&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Phone"}),f.jsx("a",{href:`tel:${e.client_phone}`,children:e.client_phone})]})]}),f.jsx(sZ,{project:e,todayStatus:A,progress:q,areasWorking:U,areasDone:R,areasRemaining:Q,punchListOpenCount:O,onNavigate:ee,onShowToast:n})]})}const cZ=y.lazy(()=>_a(()=>import("./Dashboard-Bmqaf2WO.js").then(e=>e.D),__vite__mapDeps([6,3,1,2,7]))),uZ=y.lazy(()=>_a(()=>import("./Setup-czeclDL7.js"),__vite__mapDeps([8,3,1,2,4]))),dZ=y.lazy(()=>_a(()=>import("./BrandingSettings-BqaQ_EA8.js"),__vite__mapDeps([9,1,2,3,4]))),fZ=y.lazy(()=>_a(()=>import("./PricingManager-8vOve4CM.js"),__vite__mapDeps([10,1,2,3,4]))),mZ=y.lazy(()=>_a(()=>import("./PublicView-LN5dz1tY.js"),__vite__mapDeps([11,1,2,3,4]))),hZ=y.lazy(()=>_a(()=>import("./SignaturePage-Dh2QYwQY.js"),__vite__mapDeps([12,1,2,7,3,13,4]))),pZ=y.lazy(()=>_a(()=>import("./MembershipManager-CmRoEfPm.js"),__vite__mapDeps([14,1,2,3,4]))),gZ=y.lazy(()=>_a(()=>import("./LandingPage-CpE_-QwC.js"),__vite__mapDeps([15,1,2,3,4])));function sm(){return f.jsxs("div",{className:"page-loader",children:[f.jsx(qr,{className:"loading-logo"}),f.jsx("div",{className:"spinner"})]})}function vZ({pendingCompanyName:e,userName:t,onCheckStatus:r,onLogout:n}){const[i,s]=y.useState(!1);y.useEffect(()=>{const u=setInterval(()=>{r()},3e4);return()=>clearInterval(u)},[r]);const c=async()=>{s(!0),await r(),setTimeout(()=>s(!1),1e3)};return f.jsxs("div",{className:"pending-approval-screen",children:[f.jsx(qr,{className:"pending-logo"}),f.jsx("div",{className:"pending-pulse-ring",children:f.jsx("div",{className:"pending-pulse-dot"})}),f.jsx("h2",{children:"Awaiting Approval"}),e&&f.jsx("div",{className:"pending-company-name",children:e}),f.jsxs("p",{className:"pending-message",children:[t?`Hi ${t.split(" ")[0]}, your`:"Your"," membership request has been submitted. A company administrator will review and approve your access."]}),f.jsx("p",{className:"pending-auto-check",children:"We'll automatically check for updates"}),f.jsxs("div",{className:"pending-actions",children:[f.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Sign Out"}),f.jsx("button",{className:"btn btn-primary",onClick:c,disabled:i,children:i?"Checking...":"Check Status"})]})]})}function yZ(){const{token:e}=mN();return f.jsx(y.Suspense,{fallback:f.jsx(sm,{}),children:f.jsx(mZ,{shareToken:e})})}function bZ(){const{token:e}=mN();return f.jsx(y.Suspense,{fallback:f.jsx(sm,{}),children:f.jsx(hZ,{signatureToken:e})})}function _Z(){const e=fm(),t=aa(),[r,n]=y.useState(null),[i,s]=y.useState(null),[c,u]=y.useState([]),[,m]=y.useState([]),[h,p]=y.useState(null),[g,_]=y.useState(""),[x,w]=y.useState(!0),[j,S]=y.useState(null),[O,C]=y.useState(!1),[A,k]=y.useState(!1),[D,M]=y.useState(null),[L,V]=y.useState(0),[re,ie]=y.useState(!1),[X,I]=y.useState(null),[ce,ge]=y.useState(""),[q,R]=y.useState(!1),U=y.useCallback((ve,Ne="")=>{S({message:ve,type:Ne})},[]),Q=y.useCallback(async()=>{try{if(!P){w(!1);return}const{data:{user:ve}}=await T.auth.getUser();if(!ve){w(!1);return}const{data:Ne}=await T.from("users").select("*").eq("id",ve.id).single();if(Ne){n(Ne);let Me=await be.getUserCompanies(ve.id);if(Me.length===0&&Ne.company_id&&await be.repairLegacyUser(ve.id,Ne.company_id,Ne.role||"member")&&(Me=await be.getUserCompanies(ve.id)),u(Me),Me.length===0){if(await be.getUserPendingMemberships(ve.id)>0){try{const{data:yt}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",ve.id).eq("status","pending").limit(1);yt?.[0]?.companies?.name&&ge(yt[0].companies.name)}catch{}e("/pending",{replace:!0});return}S({message:"No company access. Join a company to continue.",type:"error"}),await nf.signOut();return}const jt=localStorage.getItem("selectedCompanyId");let Re=null;if(jt&&Me.find(It=>It.id===jt)?Re=Me.find(It=>It.id===jt):Me.length>0&&(Re=Me[0]),Re){const{data:It}=await T.from("companies").select("*").eq("id",Re.id).single();s(It),R(!0);const yt=t.pathname,Ct=yt.startsWith("/view/")||yt.startsWith("/sign/"),Br=["/dashboard","/projects/new","/pricing","/branding","/team"].includes(yt);!Ct&&!Br&&yt!=="/field"&&e("/dashboard",{replace:!0})}}}catch(ve){console.error("Auth check error:",ve)}finally{w(!1)}},[e,t.pathname]);y.useEffect(()=>{const ve=t.pathname;ve.startsWith("/view/")||ve.startsWith("/sign/")?w(!1):Q()},[]),y.useEffect(()=>{if(!P)return;const{data:{subscription:ve}}=T.auth.onAuthStateChange(async Ne=>{if(Ne==="SIGNED_OUT"||Ne==="USER_DELETED"){const Me=t.pathname;if(Me.startsWith("/sign/")||Me.startsWith("/view/"))return;n(null),s(null),u([]),R(!1),e("/login",{replace:!0})}else if(Ne==="SIGNED_IN"&&!r){const Me=t.pathname;!Me.startsWith("/sign/")&&!Me.startsWith("/view/")&&Q()}});return()=>{ve?.unsubscribe()}},[r,Q,e,t.pathname]);const B=(ve,Ne="")=>{localStorage.setItem("fieldsync-has-visited","true"),p(ve),_(Ne),e("/field")},fe=async(ve,Ne)=>{try{await _y(),localStorage.setItem("fieldsync-has-visited","true");const{data:Me,error:jt}=await T.auth.signInWithPassword({email:ve,password:Ne});if(jt){U(jt.message||"Invalid credentials","error");return}const{data:Re,error:It}=await T.from("users").select("*").eq("id",Me.user.id).single();if(It){console.error("User fetch error:",It),U("Error loading profile","error");return}if(Re){n(Re);let yt=await be.getUserCompanies(Me.user.id);yt.length===0&&Re.company_id&&await be.repairLegacyUser(Me.user.id,Re.company_id,Re.role||"member")&&(yt=await be.getUserCompanies(Me.user.id)),u(yt);const Ct=localStorage.getItem("selectedCompanyId");let Br=null;if(Ct&&yt.find(xt=>xt.id===Ct)?Br=yt.find(xt=>xt.id===Ct):yt.length>0&&(Br=yt[0]),Br){const{data:xt}=await T.from("companies").select("*").eq("id",Br.id).single();s(xt),R(!0);const{data:Ye}=await T.auth.mfa.listFactors(),$r=Ye?.totp?.find(_n=>_n.status==="verified");$r?(I($r.id),ie(!0)):e("/dashboard")}else if(await be.getUserPendingMemberships(Me.user.id)>0){try{const{data:Ye}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",Me.user.id).eq("status","pending").limit(1);Ye?.[0]?.companies?.name&&ge(Ye[0].companies.name)}catch{}e("/pending")}else U("No company access. Please contact admin.","error")}else U("Profile not found. Please contact admin.","error")}catch(Me){console.error("Login error:",Me),U("Login failed","error")}},je=async ve=>{try{const{data:Ne}=await T.from("companies").select("*").eq("id",ve).single();Ne&&(s(Ne),localStorage.setItem("selectedCompanyId",ve),C(!1),e("/dashboard"),U(`Switched to ${Ne.name}`,"success"))}catch(Ne){console.error("Switch company error:",Ne),U("Error switching company","error")}},ee=async()=>{try{await nf.signOut(),n(null),s(null),u([]),R(!1),localStorage.removeItem("selectedCompanyId"),e("/login")}catch(ve){console.error("Logout error:",ve),U("Error signing out","error")}},H=async()=>{await _y(),p(null),_(""),e("/login")},Ee=()=>{e("/dashboard"),i?.id&&Te()},Te=async()=>{if(i?.id)try{const ve=await be.getProjects(i.id);m(ve)}catch(ve){console.error("Error loading projects:",ve)}};y.useEffect(()=>{i?.id&&q&&(Te(),Ie())},[i?.id,q]);const Ie=async()=>{if(i?.id)try{const Ne=(await be.getCompanyMemberships(i.id)).filter(Me=>Me.status==="pending").length;V(Ne)}catch(ve){console.error("Error loading pending count:",ve)}},pe=y.useCallback(()=>{M(null)},[]),we=c.find(ve=>ve.id===i?.id)?.access_level==="administrator"||i?.owner_user_id===r?.id,xe=j&&f.jsx(DN,{message:j.message,type:j.type,onClose:()=>S(null)});if(x)return f.jsx(Og,{children:f.jsx(kd,{companyId:i?.id,children:f.jsxs("div",{className:"loading-screen",children:[f.jsx(qr,{className:"loading-logo"}),f.jsx("div",{className:"spinner"})]})})});if(re)return f.jsx(Og,{children:f.jsxs(kd,{companyId:i?.id,children:[f.jsx(Li,{children:f.jsx(UL,{factorId:X,onVerified:()=>{ie(!1),e("/dashboard")},onCancel:async()=>{ie(!1),I(null),await nf.signOut(),n(null),s(null),u([]),R(!1),e("/login")}})}),xe]})});const ae=ve=>!r||!i||!q?f.jsx(xo,{to:"/login",replace:!0}):ve,He=ve=>f.jsx(qL,{children:f.jsxs("div",{children:[!P&&f.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),f.jsx("nav",{className:"nav",children:f.jsxs("div",{className:"nav-content",children:[f.jsx(qr,{}),f.jsxs("div",{className:"nav-tabs nav-tabs-desktop",children:[f.jsx("button",{className:`nav-tab ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>e("/dashboard"),children:"Dashboard"}),f.jsx("button",{className:`nav-tab ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>e("/projects/new"),children:"+ New Project"}),f.jsx("button",{className:`nav-tab ${t.pathname==="/pricing"?"active":""}`,onClick:()=>e("/pricing"),children:"Pricing"}),we&&f.jsx("button",{className:`nav-tab ${t.pathname==="/branding"?"active":""}`,onClick:()=>e("/branding"),children:"Branding"}),we&&f.jsxs("button",{className:`nav-tab ${t.pathname==="/team"?"active":""}`,onClick:()=>e("/team"),children:["Team",L>0&&f.jsx("span",{className:"nav-tab-badge",children:L})]})]}),f.jsxs("div",{className:"nav-user nav-user-desktop",children:[f.jsx(YS,{compact:!0}),f.jsxs("div",{className:"mobile-menu",children:[f.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!A),"aria-label":"User menu",children:""}),A&&f.jsxs("div",{className:"mobile-menu-dropdown",children:[f.jsxs("div",{className:"mobile-menu-info",children:[f.jsx("div",{className:"mobile-menu-user",children:r?.name||r?.email}),i&&f.jsx("div",{className:"mobile-menu-company",children:i.name})]}),f.jsx("button",{className:"mobile-menu-logout",onClick:()=>{k(!1),ee()},children:"Sign Out"})]})]}),c.length>1&&f.jsxs("div",{className:"company-switcher",children:[f.jsxs("button",{className:"company-switcher-btn",onClick:()=>C(!O),children:[i?.name||"Select Company",f.jsx("span",{className:"switcher-arrow",children:""})]}),O&&f.jsx("div",{className:"company-dropdown",children:c.map(Ne=>f.jsxs("button",{className:`company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>je(Ne.id),children:[Ne.name,Ne.id===i?.id&&f.jsx("span",{className:"check",children:""})]},Ne.id))})]}),c.length<=1&&i&&f.jsx("span",{className:"nav-company-name",children:i.name}),f.jsx("span",{className:"nav-user-name",children:r?.name||r?.email}),f.jsx("button",{className:"nav-logout",onClick:ee,children:"Sign Out"})]}),f.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!0),"aria-label":"Open menu",children:f.jsxs("span",{className:"hamburger-icon",children:[f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{})]})})]})}),A&&f.jsx("div",{className:"mobile-drawer-overlay",onClick:()=>k(!1),children:f.jsxs("div",{className:"mobile-drawer",onClick:Ne=>Ne.stopPropagation(),children:[f.jsxs("div",{className:"mobile-drawer-header",children:[f.jsx(qr,{}),f.jsx("button",{className:"mobile-drawer-close",onClick:()=>k(!1),"aria-label":"Close menu",children:""})]}),f.jsxs("div",{className:"mobile-drawer-user",children:[f.jsx("div",{className:"mobile-user-avatar",children:(r?.name||r?.email||"U")[0].toUpperCase()}),f.jsxs("div",{className:"mobile-user-info",children:[f.jsx("span",{className:"mobile-user-name",children:r?.name||r?.email}),f.jsx("span",{className:"mobile-user-company",children:i?.name})]})]}),c.length>1&&f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Switch Company"}),f.jsx("div",{className:"mobile-company-list",children:c.map(Ne=>f.jsxs("button",{className:`mobile-company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>{je(Ne.id),k(!1)},children:[f.jsx("span",{className:"mobile-company-name",children:Ne.name}),Ne.id===i?.id&&f.jsx("span",{className:"mobile-company-check",children:""})]},Ne.id))})]}),f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Navigation"}),f.jsxs("div",{className:"mobile-nav-list",children:[f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>{e("/dashboard"),k(!1)},children:"Dashboard"}),f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>{e("/projects/new"),k(!1)},children:"+ New Project"}),f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/pricing"?"active":""}`,onClick:()=>{e("/pricing"),k(!1)},children:"Pricing"}),we&&f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/branding"?"active":""}`,onClick:()=>{e("/branding"),k(!1)},children:"Branding"}),we&&f.jsxs("button",{className:`mobile-nav-item ${t.pathname==="/team"?"active":""}`,onClick:()=>{e("/team"),k(!1)},children:["Team",L>0&&f.jsx("span",{className:"mobile-nav-badge",children:L})]})]})]}),f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Appearance"}),f.jsx("div",{className:"mobile-theme-toggle",children:f.jsx(YS,{})})]}),f.jsx("div",{className:"mobile-drawer-footer",children:f.jsx("button",{className:"mobile-logout-btn",onClick:()=>{ee(),k(!1)},children:"Sign Out"})})]})}),f.jsx(Li,{children:f.jsx(y.Suspense,{fallback:f.jsx(sm,{}),children:f.jsx("div",{className:"container",children:ve},i?.id)})}),f.jsx(GS,{}),xe,f.jsx(IL,{})]})});return f.jsx(Og,{children:f.jsx(kd,{companyId:i?.id,children:f.jsxs(Rz,{children:[f.jsx(fn,{path:"/view/:token",element:f.jsxs(Li,{children:[f.jsx(yZ,{}),xe]})}),f.jsx(fn,{path:"/sign/:token",element:f.jsxs(Li,{children:[f.jsx(bZ,{}),xe]})}),f.jsx(fn,{path:"/login",element:r&&i&&q?f.jsx(xo,{to:"/dashboard",replace:!0}):f.jsxs(Li,{children:[f.jsx(LL,{onForemanAccess:B,onOfficeLogin:fe,onShowToast:U}),xe]})}),f.jsx(fn,{path:"/pending",element:f.jsxs(Li,{children:[f.jsx(vZ,{pendingCompanyName:ce,userName:r?.name,onCheckStatus:Q,onLogout:ee}),xe]})}),f.jsx(fn,{path:"/field",element:h?f.jsxs(kd,{companyId:h.company_id,children:[f.jsx(Li,{children:f.jsx(lZ,{project:h,companyId:h.company_id,foremanName:g,onShowToast:U,onExit:H})}),f.jsx(GS,{}),xe]}):f.jsx(xo,{to:"/login",replace:!0})}),f.jsx(fn,{path:"/dashboard",element:ae(He(f.jsx(cZ,{company:i,user:r,isAdmin:we,onShowToast:U,navigateToProjectId:D,onProjectNavigated:pe})))}),f.jsx(fn,{path:"/projects/new",element:ae(He(f.jsx(uZ,{company:i,user:r,onProjectCreated:Ee,onShowToast:U})))}),f.jsx(fn,{path:"/pricing",element:ae(He(f.jsx(fZ,{company:i,onShowToast:U})))}),f.jsx(fn,{path:"/branding",element:ae(He(f.jsx(dZ,{company:i,onShowToast:U})))}),f.jsx(fn,{path:"/team",element:ae(we?He(f.jsx(pZ,{company:i,user:r,onShowToast:U})):f.jsx(xo,{to:"/dashboard",replace:!0}))}),f.jsx(fn,{path:"/",element:r&&i&&q?f.jsx(xo,{to:"/dashboard",replace:!0}):localStorage.getItem("fieldsync-has-visited")?f.jsx(xo,{to:"/login",replace:!0}):f.jsx(Li,{children:f.jsx(y.Suspense,{fallback:f.jsx(sm,{}),children:f.jsx(gZ,{})})})}),f.jsx(fn,{path:"*",element:f.jsx(xo,{to:"/",replace:!0})})]})})})}Lq.createRoot(document.getElementById("root")).render(f.jsx(kq.StrictMode,{children:f.jsx(oL,{children:f.jsx(_Z,{})})}));"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{setInterval(()=>{e.update().catch(t=>console.debug("[SW] Update check failed:",t.message))},3e5)}).catch(e=>{console.debug("[SW] Registration failed:",e.message)})}),navigator.serviceWorker.addEventListener("message",e=>{e.data?.type==="SW_UPDATED"&&(console.log("[App] Service worker updated, reloading for fresh assets..."),window.location.reload()),e.data?.type==="ASSET_NOT_FOUND"&&(console.warn("[App] Asset not found:",e.data.url,"- reloading..."),"caches"in window?caches.keys().then(t=>{t.forEach(r=>caches.delete(r))}).finally(()=>{window.location.reload()}):window.location.reload())}));export{QP as $,Ir as A,LF as B,AF as C,ir as D,zt as E,va as F,ta as G,XZ as H,W as I,et as J,Vi as K,_r as L,Gi as M,g$ as N,UZ as O,Wo as P,Xo as Q,lb as R,qN as S,L0 as T,Zi as U,Fs as V,Xm as W,sh as X,C_ as Y,Jr as Z,XP as _,vm as a,EI as a0,Qs as a1,O_ as a2,Yo as a3,H9 as a4,D_ as a5,A_ as a6,cV as a7,WP as a8,dM as a9,iZ as aA,JP as aB,uu as aC,DL as aD,TL as aE,PL as aF,DZ as aG,HL as aH,a3 as aI,DN as aJ,T as aK,OZ as aL,KX as aM,yM as aN,CZ as aO,kZ as aP,$L as aQ,AZ as aR,NZ as aS,qr as aT,TZ as aU,fm as aV,c3 as aW,P as aX,EZ as aY,lQ as aZ,GY as aa,vt as ab,yE as ac,Xc as ad,zZ as ae,Wc as af,kt as ag,Pt as ah,y_ as ai,BP as aj,vn as ak,i0 as al,CY as am,zm as an,LM as ao,g_ as ap,Ke as aq,be as ar,f as as,kv as at,GX as au,gb as av,_b as aw,wb as ax,Vv as ay,wM as az,ak as b,st as c,PZ as d,qZ as e,h4 as f,iD as g,oD as h,wN as i,ke as j,Mt as k,IZ as l,LZ as m,U5 as n,rQ as o,nQ as p,Pr as q,xr as r,MZ as s,aQ as t,De as u,li as v,ci as w,Jm as x,Tm as y,ZZ as z};
//# sourceMappingURL=index-BU-8a7qH.js.map
