{"version":3,"file":"DailyReportsList-AweE6kbX.js","sources":["../../src/components/DailyReportsList.jsx"],"sourcesContent":["import { useState, useEffect, useMemo, useCallback } from 'react'\nimport { ClipboardList, ChevronDown, ChevronRight, Calendar } from 'lucide-react'\nimport { db } from '../lib/supabase'\nimport { useBranding } from '../lib/BrandingContext'\nimport { hexToRgb, loadImageAsBase64 } from '../lib/imageUtils'\nimport { ErrorState, EmptyState } from './ui'\nimport jsPDF from 'jspdf'\n\nexport default function DailyReportsList({ project, company, onShowToast }) {\n  const { branding } = useBranding()\n  const [reports, setReports] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(null)\n  const [expandedReport, setExpandedReport] = useState(null)\n\n  // Multi-select state\n  const [selectedReports, setSelectedReports] = useState(new Set())\n  const [selectMode, setSelectMode] = useState(false)\n\n  // View mode state\n  const [viewMode, setViewMode] = useState('recent') // 'recent' | 'all'\n  const [expandedMonths, setExpandedMonths] = useState(new Set())\n\n  // Date filter state\n  const [dateFilter, setDateFilter] = useState({ start: '', end: '' })\n\n  useEffect(() => {\n    loadReports()\n\n    // Subscribe to realtime updates\n    const subscription = db.subscribeToDailyReports?.(project.id, () => {\n      loadReports()\n    })\n\n    return () => {\n      if (subscription) db.unsubscribe?.(subscription)\n    }\n  }, [project.id])\n\n  const loadReports = useCallback(async () => {\n    try {\n      setError(null)\n      // Load more reports to support month grouping\n      const data = await db.getDailyReports(project.id, 365)\n      setReports(data || [])\n    } catch (err) {\n      console.error('Error loading daily reports:', err)\n      setError(err)\n      onShowToast?.('Error loading daily reports', 'error')\n    } finally {\n      setLoading(false)\n    }\n  }, [project.id]) // onShowToast is stable (memoized in App.jsx)\n\n  // Filter reports based on view mode and date filter\n  const filteredReports = useMemo(() => {\n    let filtered = [...reports]\n\n    // Apply date filter if set\n    if (dateFilter.start) {\n      const startDate = new Date(dateFilter.start)\n      startDate.setHours(0, 0, 0, 0)\n      filtered = filtered.filter(r => {\n        const reportDate = new Date(r.report_date || r.created_at)\n        return reportDate >= startDate\n      })\n    }\n    if (dateFilter.end) {\n      const endDate = new Date(dateFilter.end)\n      endDate.setHours(23, 59, 59, 999)\n      filtered = filtered.filter(r => {\n        const reportDate = new Date(r.report_date || r.created_at)\n        return reportDate <= endDate\n      })\n    }\n\n    // In recent mode, show only last 7 days\n    if (viewMode === 'recent') {\n      const sevenDaysAgo = new Date()\n      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7)\n      sevenDaysAgo.setHours(0, 0, 0, 0)\n      filtered = filtered.filter(r => {\n        const reportDate = new Date(r.report_date || r.created_at)\n        return reportDate >= sevenDaysAgo\n      })\n    }\n\n    return filtered\n  }, [reports, viewMode, dateFilter])\n\n  // Group reports by month for 'all' view\n  const reportsByMonth = useMemo(() => {\n    if (viewMode !== 'all') return null\n\n    const groups = {}\n    filteredReports.forEach(report => {\n      const date = new Date(report.report_date || report.created_at)\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`\n      const monthLabel = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })\n\n      if (!groups[monthKey]) {\n        groups[monthKey] = { label: monthLabel, reports: [] }\n      }\n      groups[monthKey].reports.push(report)\n    })\n\n    // Sort by month (newest first)\n    return Object.entries(groups).sort((a, b) => b[0].localeCompare(a[0]))\n  }, [filteredReports, viewMode])\n\n  // Auto-expand current month\n  useEffect(() => {\n    if (reportsByMonth && reportsByMonth.length > 0) {\n      const currentMonthKey = reportsByMonth[0][0]\n      setExpandedMonths(new Set([currentMonthKey]))\n    }\n  }, [reportsByMonth])\n\n  // Selection handlers\n  const toggleSelectMode = () => {\n    setSelectMode(!selectMode)\n    if (selectMode) {\n      setSelectedReports(new Set())\n    }\n  }\n\n  const toggleReportSelection = (reportId) => {\n    const newSelection = new Set(selectedReports)\n    if (newSelection.has(reportId)) {\n      newSelection.delete(reportId)\n    } else {\n      newSelection.add(reportId)\n    }\n    setSelectedReports(newSelection)\n  }\n\n  const toggleSelectAll = () => {\n    if (selectedReports.size === filteredReports.length) {\n      setSelectedReports(new Set())\n    } else {\n      setSelectedReports(new Set(filteredReports.map(r => r.id)))\n    }\n  }\n\n  const toggleMonthExpand = (monthKey) => {\n    const newExpanded = new Set(expandedMonths)\n    if (newExpanded.has(monthKey)) {\n      newExpanded.delete(monthKey)\n    } else {\n      newExpanded.add(monthKey)\n    }\n    setExpandedMonths(newExpanded)\n  }\n\n  // Get reports for export (selected or all filtered)\n  const getExportReports = () => {\n    if (selectedReports.size > 0) {\n      return filteredReports.filter(r => selectedReports.has(r.id))\n    }\n    return filteredReports\n  }\n\n  const formatDate = (dateStr) => {\n    const date = new Date(dateStr)\n    return date.toLocaleDateString('en-US', {\n      weekday: 'short',\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    })\n  }\n\n  const formatTime = (dateStr) => {\n    return new Date(dateStr).toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit'\n    })\n  }\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case 'submitted': return '✓'\n      case 'reviewed': return '✓✓'\n      case 'draft': return '○'\n      default: return '○'\n    }\n  }\n\n  const getStatusLabel = (status) => {\n    switch (status) {\n      case 'submitted': return 'Submitted'\n      case 'reviewed': return 'Reviewed'\n      case 'draft': return 'Draft'\n      default: return status\n    }\n  }\n\n  // Export to PDF with company branding\n  const exportToPDF = async () => {\n    const exportReports = getExportReports()\n    if (exportReports.length === 0) {\n      onShowToast?.('No reports to export', 'error')\n      return\n    }\n\n    onShowToast?.('Generating PDF...', 'info')\n\n    const doc = new jsPDF()\n    const pageWidth = doc.internal.pageSize.getWidth()\n    const margin = 20\n    let yPos = margin\n\n    const primaryColor = hexToRgb(branding?.primary_color || '#3B82F6')\n    const secondaryColor = hexToRgb(branding?.secondary_color || '#1E40AF')\n\n    // Header with branding\n    doc.setFillColor(...primaryColor)\n    doc.rect(0, 0, pageWidth, 45, 'F')\n    doc.setFillColor(...secondaryColor)\n    doc.rect(0, 42, pageWidth, 3, 'F')\n\n    // Add logo if available\n    let logoOffset = margin\n    if (branding?.logo_url) {\n      try {\n        const logoBase64 = await loadImageAsBase64(branding.logo_url)\n        if (logoBase64) {\n          doc.addImage(logoBase64, 'PNG', margin, 7, 30, 30)\n          logoOffset = margin + 40\n        }\n      } catch (e) {\n        console.error('Error adding logo:', e)\n      }\n    }\n\n    doc.setTextColor(255, 255, 255)\n    doc.setFontSize(22)\n    doc.setFont('helvetica', 'bold')\n    doc.text(company?.name || 'Company Name', logoOffset, 20)\n    doc.setFontSize(10)\n    doc.setFont('helvetica', 'normal')\n    doc.text('DAILY REPORTS SUMMARY', logoOffset, 30)\n\n    doc.setFontSize(9)\n    doc.text(`Generated: ${new Date().toLocaleDateString()}`, pageWidth - margin, 20, { align: 'right' })\n    if (project.job_number) {\n      doc.text(`Job #: ${project.job_number}`, pageWidth - margin, 28, { align: 'right' })\n    }\n\n    yPos = 55\n\n    // Project info\n    doc.setFillColor(248, 250, 252)\n    doc.rect(margin, yPos - 5, pageWidth - margin * 2, 20, 'F')\n    doc.setTextColor(...primaryColor)\n    doc.setFontSize(14)\n    doc.setFont('helvetica', 'bold')\n    doc.text(`Project: ${project.name}`, margin + 5, yPos + 7)\n    doc.setFontSize(10)\n    doc.setTextColor(100, 100, 100)\n    doc.text(`${exportReports.length} Report${exportReports.length !== 1 ? 's' : ''}`, pageWidth - margin - 5, yPos + 7, { align: 'right' })\n\n    yPos += 25\n\n    // Reports\n    exportReports.forEach((report, index) => {\n      // Check if we need a new page\n      if (yPos > 250) {\n        doc.addPage()\n        yPos = margin\n      }\n\n      // Report header\n      doc.setFillColor(...primaryColor)\n      doc.setTextColor(255, 255, 255)\n      doc.rect(margin, yPos, pageWidth - margin * 2, 10, 'F')\n      doc.setFontSize(11)\n      doc.setFont('helvetica', 'bold')\n      doc.text(formatDate(report.report_date || report.created_at), margin + 5, yPos + 7)\n      doc.text(getStatusLabel(report.status), pageWidth - margin - 5, yPos + 7, { align: 'right' })\n      yPos += 15\n\n      // Stats row\n      doc.setTextColor(50, 50, 50)\n      doc.setFontSize(10)\n      doc.setFont('helvetica', 'normal')\n      const stats = `Crew: ${report.crew_count || 0}  |  Tasks: ${report.tasks_completed || 0}  |  T&M: ${report.tm_tickets_count || 0}  |  Photos: ${report.photos_count || 0}`\n      doc.text(stats, margin + 5, yPos)\n      yPos += 8\n\n      // Crew list\n      if (report.crew_list?.length > 0) {\n        doc.setFont('helvetica', 'bold')\n        doc.text('Crew:', margin + 5, yPos)\n        doc.setFont('helvetica', 'normal')\n        const crewNames = report.crew_list.map(w => `${w.name} (${w.role})`).join(', ')\n        const crewLines = doc.splitTextToSize(crewNames, pageWidth - margin * 2 - 30)\n        doc.text(crewLines, margin + 25, yPos)\n        yPos += crewLines.length * 5 + 3\n      }\n\n      // Field notes\n      if (report.field_notes) {\n        doc.setFont('helvetica', 'bold')\n        doc.text('Notes:', margin + 5, yPos)\n        doc.setFont('helvetica', 'normal')\n        const noteLines = doc.splitTextToSize(report.field_notes, pageWidth - margin * 2 - 30)\n        doc.text(noteLines, margin + 25, yPos)\n        yPos += noteLines.length * 5 + 3\n      }\n\n      // Issues\n      if (report.issues) {\n        doc.setTextColor(180, 50, 50)\n        doc.setFont('helvetica', 'bold')\n        doc.text('Issues:', margin + 5, yPos)\n        doc.setFont('helvetica', 'normal')\n        const issueLines = doc.splitTextToSize(report.issues, pageWidth - margin * 2 - 30)\n        doc.text(issueLines, margin + 25, yPos)\n        doc.setTextColor(50, 50, 50)\n        yPos += issueLines.length * 5 + 3\n      }\n\n      yPos += 10\n    })\n\n    // Footer\n    const pageCount = doc.internal.getNumberOfPages()\n    for (let i = 1; i <= pageCount; i++) {\n      doc.setPage(i)\n      doc.setFontSize(8)\n      doc.setTextColor(150, 150, 150)\n      doc.text(`Page ${i} of ${pageCount}`, pageWidth / 2, doc.internal.pageSize.getHeight() - 10, { align: 'center' })\n    }\n\n    const fileName = `${project.name}_Daily_Reports_${new Date().toISOString().split('T')[0]}.pdf`\n    doc.save(fileName)\n    onShowToast?.('PDF exported!', 'success')\n  }\n\n  // Render a single report card\n  const renderReportCard = (report) => (\n    <div\n      key={report.id}\n      className={`daily-report-card ${report.status} ${selectedReports.has(report.id) ? 'selected' : ''}`}\n    >\n      <div\n        className=\"daily-report-header-row\"\n        onClick={() => setExpandedReport(expandedReport === report.id ? null : report.id)}\n      >\n        {selectMode && (\n          <input\n            type=\"checkbox\"\n            className=\"report-checkbox\"\n            checked={selectedReports.has(report.id)}\n            onChange={(e) => {\n              e.stopPropagation()\n              toggleReportSelection(report.id)\n            }}\n            onClick={(e) => e.stopPropagation()}\n          />\n        )}\n        <div className=\"daily-report-info\">\n          <span className=\"report-date\">{formatDate(report.report_date || report.created_at)}</span>\n          <span className={`report-status ${report.status}`}>\n            {getStatusIcon(report.status)} {getStatusLabel(report.status)}\n          </span>\n        </div>\n        <div className=\"daily-report-summary\">\n          <span className=\"report-crew\">{report.crew_count || 0} crew</span>\n          <span className=\"report-tasks\">{report.tasks_completed || 0} tasks</span>\n          <span className=\"report-expand\">{expandedReport === report.id ? '▼' : '▶'}</span>\n        </div>\n      </div>\n\n      {expandedReport === report.id && (\n        <div className=\"daily-report-details\">\n          {/* Summary Stats */}\n          <div className=\"report-stats-grid\">\n            <div className=\"report-stat\">\n              <span className=\"stat-value\">{report.crew_count || 0}</span>\n              <span className=\"stat-label\">Crew on Site</span>\n            </div>\n            <div className=\"report-stat\">\n              <span className=\"stat-value\">{report.tasks_completed || 0}</span>\n              <span className=\"stat-label\">Tasks Done</span>\n            </div>\n            <div className=\"report-stat\">\n              <span className=\"stat-value\">{report.tm_tickets_count || 0}</span>\n              <span className=\"stat-label\">T&M Tickets</span>\n            </div>\n            <div className=\"report-stat\">\n              <span className=\"stat-value\">{report.photos_count || 0}</span>\n              <span className=\"stat-label\">Photos</span>\n            </div>\n          </div>\n\n          {/* Crew List */}\n          {report.crew_list?.length > 0 && (\n            <div className=\"report-section\">\n              <h4>Crew</h4>\n              <div className=\"report-crew-list\">\n                {report.crew_list.map((worker, i) => (\n                  <div key={i} className=\"crew-member\">\n                    <span className=\"crew-name\">{worker.name}</span>\n                    <span className=\"crew-role\">{worker.role}</span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Completed Tasks */}\n          {report.completed_tasks?.length > 0 && (\n            <div className=\"report-section\">\n              <h4>Completed Today</h4>\n              <ul className=\"report-tasks-list\">\n                {report.completed_tasks.map((task, i) => (\n                  <li key={i}>\n                    {task.name}\n                    {task.group && <span className=\"task-group\">{task.group}</span>}\n                  </li>\n                ))}\n              </ul>\n            </div>\n          )}\n\n          {/* Field Notes */}\n          {report.field_notes && (\n            <div className=\"report-section\">\n              <h4>Field Notes</h4>\n              <p className=\"report-notes\">{report.field_notes}</p>\n            </div>\n          )}\n\n          {/* Issues */}\n          {report.issues && (\n            <div className=\"report-section issues\">\n              <h4>Issues / Concerns</h4>\n              <p className=\"report-issues\">{report.issues}</p>\n            </div>\n          )}\n\n          {/* Submitted Info */}\n          {report.submitted_at && (\n            <div className=\"report-meta\">\n              <span>Submitted by {report.submitted_by || 'Field'} at {formatTime(report.submitted_at)}</span>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  )\n\n  if (loading) {\n    return <div className=\"loading\">Loading daily reports...</div>\n  }\n\n  if (error) {\n    return (\n      <div className=\"daily-reports-list card\">\n        <ErrorState\n          title=\"Unable to load reports\"\n          message=\"There was a problem loading daily reports. Please try again.\"\n          error={error}\n          onRetry={loadReports}\n        />\n      </div>\n    )\n  }\n\n  const totalReports = reports.length\n  const recentCount = filteredReports.length\n\n  return (\n    <div className=\"daily-reports-list card\">\n      {/* Header */}\n      <div className=\"daily-reports-header\">\n        <h3>Daily Reports</h3>\n        <div className=\"daily-reports-actions\">\n          {reports.length > 0 && (\n            <>\n              <button\n                className={`btn btn-small ${selectMode ? 'btn-primary' : 'btn-secondary'}`}\n                onClick={toggleSelectMode}\n              >\n                {selectMode ? 'Cancel' : 'Select'}\n              </button>\n              <button className=\"btn btn-secondary btn-small\" onClick={exportToPDF}>\n                PDF{selectedReports.size > 0 ? ` (${selectedReports.size})` : ''}\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* View Mode Toggle */}\n      {reports.length > 0 && (\n        <div className=\"view-mode-bar\">\n          <div className=\"view-mode-tabs\">\n            <button\n              className={`view-mode-tab ${viewMode === 'recent' ? 'active' : ''}`}\n              onClick={() => setViewMode('recent')}\n            >\n              Recent (7 days)\n            </button>\n            <button\n              className={`view-mode-tab ${viewMode === 'all' ? 'active' : ''}`}\n              onClick={() => setViewMode('all')}\n            >\n              All ({totalReports})\n            </button>\n          </div>\n\n          {/* Date Filter (only in 'all' mode) */}\n          {viewMode === 'all' && (\n            <div className=\"date-filter\">\n              <Calendar size={14} className=\"date-filter-icon\" />\n              <input\n                type=\"date\"\n                value={dateFilter.start}\n                onChange={(e) => setDateFilter(prev => ({ ...prev, start: e.target.value }))}\n                className=\"date-input\"\n              />\n              <span className=\"date-separator\">to</span>\n              <input\n                type=\"date\"\n                value={dateFilter.end}\n                onChange={(e) => setDateFilter(prev => ({ ...prev, end: e.target.value }))}\n                className=\"date-input\"\n              />\n              {(dateFilter.start || dateFilter.end) && (\n                <button\n                  className=\"date-clear\"\n                  onClick={() => setDateFilter({ start: '', end: '' })}\n                >\n                  Clear\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Select All (when in select mode) */}\n      {selectMode && filteredReports.length > 0 && (\n        <div className=\"select-all-bar\">\n          <label className=\"select-all-label\">\n            <input\n              type=\"checkbox\"\n              checked={selectedReports.size === filteredReports.length && filteredReports.length > 0}\n              onChange={toggleSelectAll}\n            />\n            Select All ({filteredReports.length})\n          </label>\n          {selectedReports.size > 0 && (\n            <span className=\"selected-count\">{selectedReports.size} selected</span>\n          )}\n        </div>\n      )}\n\n      {/* Reports List */}\n      {reports.length === 0 ? (\n        <EmptyState\n          icon={ClipboardList}\n          title=\"No daily reports yet\"\n          message=\"Reports from the field will appear here\"\n        />\n      ) : filteredReports.length === 0 ? (\n        <EmptyState\n          icon={ClipboardList}\n          title=\"No reports in this time period\"\n          message={viewMode === 'recent' ? 'No reports in the last 7 days' : 'Try adjusting your date filter'}\n        />\n      ) : viewMode === 'recent' ? (\n        // Recent view - flat list\n        <div className=\"daily-reports\">\n          {filteredReports.map(report => renderReportCard(report))}\n          {totalReports > recentCount && (\n            <div className=\"view-all-prompt\">\n              <button\n                className=\"btn btn-secondary\"\n                onClick={() => setViewMode('all')}\n              >\n                View All {totalReports} Reports\n              </button>\n            </div>\n          )}\n        </div>\n      ) : (\n        // All view - grouped by month\n        <div className=\"daily-reports grouped\">\n          {reportsByMonth?.map(([monthKey, { label, reports: monthReports }]) => (\n            <div key={monthKey} className=\"month-group\">\n              <div\n                className=\"month-header\"\n                onClick={() => toggleMonthExpand(monthKey)}\n              >\n                {expandedMonths.has(monthKey) ? (\n                  <ChevronDown size={18} className=\"month-chevron\" />\n                ) : (\n                  <ChevronRight size={18} className=\"month-chevron\" />\n                )}\n                <span className=\"month-label\">{label}</span>\n                <span className=\"month-count\">{monthReports.length} report{monthReports.length !== 1 ? 's' : ''}</span>\n              </div>\n              {expandedMonths.has(monthKey) && (\n                <div className=\"month-reports\">\n                  {monthReports.map(report => renderReportCard(report))}\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["DailyReportsList","project","company","onShowToast","branding","useBranding","reports","setReports","useState","loading","setLoading","error","setError","expandedReport","setExpandedReport","selectedReports","setSelectedReports","selectMode","setSelectMode","viewMode","setViewMode","expandedMonths","setExpandedMonths","dateFilter","setDateFilter","useEffect","loadReports","subscription","db","useCallback","data","err","filteredReports","useMemo","filtered","startDate","r","endDate","sevenDaysAgo","reportsByMonth","groups","report","date","monthKey","monthLabel","a","b","currentMonthKey","toggleSelectMode","toggleReportSelection","reportId","newSelection","toggleSelectAll","toggleMonthExpand","newExpanded","getExportReports","formatDate","dateStr","formatTime","getStatusIcon","status","getStatusLabel","exportToPDF","exportReports","doc","jsPDF","pageWidth","margin","yPos","primaryColor","hexToRgb","secondaryColor","logoOffset","logoBase64","loadImageAsBase64","e","index","stats","crewNames","w","crewLines","noteLines","issueLines","pageCount","i","fileName","renderReportCard","jsxs","jsx","worker","task","ErrorState","totalReports","recentCount","Fragment","Calendar","prev","EmptyState","ClipboardList","label","monthReports","ChevronDown","ChevronRight"],"mappings":"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"}