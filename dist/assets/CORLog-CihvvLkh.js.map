{"version":3,"mappings":"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","names":["usePagination","options","itemsPerPage","initialPage","totalItems","state","setState","useState","totalPages","useMemo","hasNextPage","hasPrevPage","offset","range","start","end","goToPage","useCallback","page","prev","nextPage","prevPage","firstPage","lastPage","setTotalItems","total","setItemsPerPage","perPage","reset","paginate","items","getSupabaseRange","useFilteredPagination","initialPageSize","searchFields","searchTerm","setSearchTermRaw","filteredItems","lower","item","field","value","pagination","paginatedItems","setSearchTerm","term","setPageSize","size","Pagination","currentPage","onPageChange","pageSize","onPageSizeChange","pageSizeOptions","jsxs","jsx","e","opt","ChevronsLeft","ChevronLeft","ChevronRight","ChevronsRight","STATUS_OPTIONS","CORLogRow","entry","isEditing","isSaving","onEdit","onSave","onCancel","statusDisplay","editValues","setEditValues","dateSentRef","useRef","useEffect","handleKeyDown","handleSave","handleCancel","status","formatDateDisplay","dateStr","formatDateInput","ChevronDown","Loader2","Check","X","Edit3","STATUS_DISPLAY","STATUS_CATEGORIES","CORLog","project","company","onShowToast","logEntries","setLogEntries","loading","setLoading","editingId","setEditingId","savingId","setSavingId","refreshing","setRefreshing","loadCORLog","subscription","db","data","error","handleRefresh","entryId","updates","changeOrderId","searchableEntries","paginatedEntries","paginatedTotalItems","groupedEntries","pending","approved","voided","summary","sum","exportToPDF","jsPDF","__vitePreload","n","autoTable","doc","pageWidth","tableData","formatCurrency","finalY","col1X","col2X","fileName","exportToExcel","XLSX","ws","wb","amountCol","row","cellRef","renderSectionTable","entries","showHeader","FileSpreadsheet","RefreshCw","FileText","Search","Clock","CheckCircle","XCircle"],"ignoreList":[],"sources":["../../src/hooks/usePagination.js","../../src/hooks/useFilteredPagination.js","../../src/components/ui/Pagination.jsx","../../src/components/cor/CORLogRow.jsx","../../src/components/cor/CORLog.jsx"],"sourcesContent":["import { useState, useCallback, useMemo } from 'react'\n\n/**\n * usePagination - Manages pagination state for lists\n * Replaces the common pattern of page/hasMore/totalCount state\n *\n * @param {Object} options\n * @param {number} options.itemsPerPage - Items per page (default: 50)\n * @param {number} options.initialPage - Starting page (default: 1)\n * @param {number} options.totalItems - Total number of items (if known)\n * @returns {Object} Pagination state and controls\n */\nexport function usePagination(options = {}) {\n  const {\n    itemsPerPage = 50,\n    initialPage = 1,\n    totalItems = 0\n  } = options\n\n  const [state, setState] = useState({\n    page: initialPage,\n    totalItems,\n    itemsPerPage\n  })\n\n  const totalPages = useMemo(() => {\n    return Math.ceil(state.totalItems / state.itemsPerPage) || 1\n  }, [state.totalItems, state.itemsPerPage])\n\n  const hasNextPage = useMemo(() => {\n    return state.page < totalPages\n  }, [state.page, totalPages])\n\n  const hasPrevPage = useMemo(() => {\n    return state.page > 1\n  }, [state.page])\n\n  const offset = useMemo(() => {\n    return (state.page - 1) * state.itemsPerPage\n  }, [state.page, state.itemsPerPage])\n\n  const range = useMemo(() => {\n    const start = offset\n    const end = offset + state.itemsPerPage - 1\n    return { start, end }\n  }, [offset, state.itemsPerPage])\n\n  const goToPage = useCallback((page) => {\n    setState(prev => ({\n      ...prev,\n      page: Math.max(1, Math.min(page, totalPages || page))\n    }))\n  }, [totalPages])\n\n  const nextPage = useCallback(() => {\n    if (hasNextPage) {\n      setState(prev => ({ ...prev, page: prev.page + 1 }))\n    }\n  }, [hasNextPage])\n\n  const prevPage = useCallback(() => {\n    if (hasPrevPage) {\n      setState(prev => ({ ...prev, page: prev.page - 1 }))\n    }\n  }, [hasPrevPage])\n\n  const firstPage = useCallback(() => {\n    setState(prev => ({ ...prev, page: 1 }))\n  }, [])\n\n  const lastPage = useCallback(() => {\n    setState(prev => ({ ...prev, page: totalPages }))\n  }, [totalPages])\n\n  const setTotalItems = useCallback((total) => {\n    setState(prev => ({ ...prev, totalItems: total }))\n  }, [])\n\n  const setItemsPerPage = useCallback((perPage) => {\n    setState(prev => ({\n      ...prev,\n      itemsPerPage: perPage,\n      page: 1 // Reset to first page when changing page size\n    }))\n  }, [])\n\n  const reset = useCallback(() => {\n    setState({\n      page: initialPage,\n      totalItems: 0,\n      itemsPerPage\n    })\n  }, [initialPage, itemsPerPage])\n\n  /**\n   * Paginate an array of items client-side\n   * @param {Array} items - Full array of items\n   * @returns {Array} Paginated slice of items\n   */\n  const paginate = useCallback((items) => {\n    if (!Array.isArray(items)) return []\n    return items.slice(offset, offset + state.itemsPerPage)\n  }, [offset, state.itemsPerPage])\n\n  /**\n   * Get Supabase range for server-side pagination\n   * @returns {Object} { from, to } for .range() query\n   */\n  const getSupabaseRange = useCallback(() => {\n    return {\n      from: offset,\n      to: offset + state.itemsPerPage - 1\n    }\n  }, [offset, state.itemsPerPage])\n\n  return {\n    // State\n    page: state.page,\n    totalItems: state.totalItems,\n    itemsPerPage: state.itemsPerPage,\n    totalPages,\n    offset,\n    range,\n\n    // Computed\n    hasNextPage,\n    hasPrevPage,\n    isFirstPage: state.page === 1,\n    isLastPage: state.page === totalPages,\n\n    // Actions\n    goToPage,\n    nextPage,\n    prevPage,\n    firstPage,\n    lastPage,\n    setTotalItems,\n    setItemsPerPage,\n    reset,\n\n    // Utilities\n    paginate,\n    getSupabaseRange\n  }\n}\n\nexport default usePagination\n","import { useState, useMemo, useCallback } from 'react'\nimport { usePagination } from './usePagination'\n\n/**\n * useFilteredPagination - Combines search/filter with pagination\n *\n * @param {Array} items - Full array of items to filter and paginate\n * @param {Object} options\n * @param {number} options.pageSize - Items per page (default: 25)\n * @param {string[]} options.searchFields - Object keys to search across\n * @returns {Object} Filtered pagination state and controls\n */\nexport function useFilteredPagination(items = [], options = {}) {\n  const { pageSize: initialPageSize = 25, searchFields = [] } = options\n\n  const [searchTerm, setSearchTermRaw] = useState('')\n\n  const filteredItems = useMemo(() => {\n    if (!searchTerm.trim() || searchFields.length === 0) return items\n    const lower = searchTerm.toLowerCase()\n    return items.filter((item) =>\n      searchFields.some((field) => {\n        const value = item?.[field]\n        if (value == null) return false\n        return String(value).toLowerCase().includes(lower)\n      })\n    )\n  }, [items, searchTerm, searchFields])\n\n  const pagination = usePagination({\n    itemsPerPage: initialPageSize,\n    totalItems: filteredItems.length\n  })\n\n  // Keep totalItems in sync with filtered results\n  useMemo(() => {\n    pagination.setTotalItems(filteredItems.length)\n  }, [filteredItems.length])\n\n  const paginatedItems = useMemo(() => {\n    return pagination.paginate(filteredItems)\n  }, [filteredItems, pagination.paginate])\n\n  const setSearchTerm = useCallback((term) => {\n    setSearchTermRaw(term)\n    pagination.goToPage(1)\n  }, [pagination.goToPage])\n\n  const setPageSize = useCallback((size) => {\n    pagination.setItemsPerPage(size)\n  }, [pagination.setItemsPerPage])\n\n  return {\n    paginatedItems,\n    searchTerm,\n    setSearchTerm,\n    currentPage: pagination.page,\n    totalPages: pagination.totalPages,\n    goToPage: pagination.goToPage,\n    nextPage: pagination.nextPage,\n    prevPage: pagination.prevPage,\n    pageSize: pagination.itemsPerPage,\n    setPageSize,\n    totalItems: filteredItems.length\n  }\n}\n\nexport default useFilteredPagination\n","import { ChevronLeft, ChevronRight, ChevronsLeft, ChevronsRight } from 'lucide-react'\n\nexport default function Pagination({\n  currentPage,\n  totalPages,\n  onPageChange,\n  pageSize,\n  onPageSizeChange,\n  totalItems,\n  pageSizeOptions = [10, 25, 50, 100]\n}) {\n  const start = totalItems === 0 ? 0 : (currentPage - 1) * pageSize + 1\n  const end = Math.min(currentPage * pageSize, totalItems)\n\n  return (\n    <div className=\"pagination\">\n      <div className=\"pagination-info\">\n        Showing {start}â€“{end} of {totalItems} items\n      </div>\n\n      <div className=\"pagination-controls\">\n        {onPageSizeChange && (\n          <select\n            className=\"pagination-size-select\"\n            value={pageSize}\n            onChange={(e) => onPageSizeChange(Number(e.target.value))}\n          >\n            {pageSizeOptions.map((opt) => (\n              <option key={opt} value={opt}>\n                {opt} / page\n              </option>\n            ))}\n          </select>\n        )}\n\n        <button\n          className=\"pagination-btn\"\n          onClick={() => onPageChange(1)}\n          disabled={currentPage <= 1}\n          title=\"First page\"\n        >\n          <ChevronsLeft size={16} />\n        </button>\n        <button\n          className=\"pagination-btn\"\n          onClick={() => onPageChange(currentPage - 1)}\n          disabled={currentPage <= 1}\n          title=\"Previous page\"\n        >\n          <ChevronLeft size={16} />\n        </button>\n\n        <span className=\"pagination-page-info\">\n          Page {currentPage} of {totalPages}\n        </span>\n\n        <button\n          className=\"pagination-btn\"\n          onClick={() => onPageChange(currentPage + 1)}\n          disabled={currentPage >= totalPages}\n          title=\"Next page\"\n        >\n          <ChevronRight size={16} />\n        </button>\n        <button\n          className=\"pagination-btn\"\n          onClick={() => onPageChange(totalPages)}\n          disabled={currentPage >= totalPages}\n          title=\"Last page\"\n        >\n          <ChevronsRight size={16} />\n        </button>\n      </div>\n    </div>\n  )\n}\n","import { useState, useRef, useEffect } from 'react'\nimport { Edit3, Check, X, Loader2, ChevronDown } from 'lucide-react'\nimport { formatCurrency } from '../../lib/corCalculations'\n\n// Available status options for editing\nconst STATUS_OPTIONS = [\n  { value: 'draft', label: 'Draft' },\n  { value: 'pending_approval', label: 'Pending Approval' },\n  { value: 'approved', label: 'Approved' },\n  { value: 'rejected', label: 'Rejected' },\n  { value: 'billed', label: 'Billed' },\n  { value: 'closed', label: 'Closed' }\n]\n\nexport default function CORLogRow({\n  entry,\n  isEditing,\n  isSaving,\n  onEdit,\n  onSave,\n  onCancel,\n  statusDisplay\n}) {\n  const [editValues, setEditValues] = useState({\n    dateSentToClient: entry.dateSentToClient || '',\n    ceNumber: entry.ceNumber || '',\n    comments: entry.comments || '',\n    status: entry.changeOrder?.status || 'draft'\n  })\n\n  const dateSentRef = useRef(null)\n\n  // Focus first editable field when entering edit mode\n  useEffect(() => {\n    if (isEditing && dateSentRef.current) {\n      dateSentRef.current.focus()\n    }\n  }, [isEditing])\n\n  // Reset edit values when entry changes\n  useEffect(() => {\n    setEditValues({\n      dateSentToClient: entry.dateSentToClient || '',\n      ceNumber: entry.ceNumber || '',\n      comments: entry.comments || '',\n      status: entry.changeOrder?.status || 'draft'\n    })\n  }, [entry])\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault()\n      handleSave()\n    } else if (e.key === 'Escape') {\n      handleCancel()\n    }\n  }\n\n  const handleSave = () => {\n    onSave(editValues)\n  }\n\n  const handleCancel = () => {\n    setEditValues({\n      dateSentToClient: entry.dateSentToClient || '',\n      ceNumber: entry.ceNumber || '',\n      comments: entry.comments || '',\n      status: entry.changeOrder?.status || 'draft'\n    })\n    onCancel()\n  }\n\n  const status = statusDisplay[entry.changeOrder.status] || { label: entry.changeOrder.status, className: '' }\n\n  // Format date for display\n  const formatDateDisplay = (dateStr) => {\n    if (!dateStr) return '-'\n    try {\n      return new Date(dateStr).toLocaleDateString('en-US', {\n        month: 'short',\n        day: 'numeric',\n        year: 'numeric'\n      })\n    } catch {\n      return dateStr\n    }\n  }\n\n  // Format date for input\n  const formatDateInput = (dateStr) => {\n    if (!dateStr) return ''\n    try {\n      const date = new Date(dateStr)\n      return date.toISOString().split('T')[0]\n    } catch {\n      return dateStr\n    }\n  }\n\n  if (isEditing) {\n    return (\n      <tr className=\"cor-log-row editing\">\n        <td className=\"col-log-num\">{entry.logNumber}</td>\n        <td className=\"col-date-sent\">\n          <input\n            ref={dateSentRef}\n            type=\"date\"\n            value={formatDateInput(editValues.dateSentToClient)}\n            onChange={(e) => setEditValues(prev => ({ ...prev, dateSentToClient: e.target.value }))}\n            onKeyDown={handleKeyDown}\n            disabled={isSaving}\n            className=\"cor-log-input\"\n          />\n        </td>\n        <td className=\"col-ce-num\">\n          <input\n            type=\"text\"\n            value={editValues.ceNumber}\n            onChange={(e) => setEditValues(prev => ({ ...prev, ceNumber: e.target.value }))}\n            onKeyDown={handleKeyDown}\n            disabled={isSaving}\n            placeholder=\"CE-XXX\"\n            className=\"cor-log-input\"\n            maxLength={50}\n          />\n        </td>\n        <td className=\"col-description\">\n          <span className=\"cor-log-title\">{entry.changeOrder.title || 'Untitled'}</span>\n          <span className=\"cor-log-number\">{entry.changeOrder.corNumber}</span>\n        </td>\n        <td className=\"col-amount\">{formatCurrency(entry.changeOrder.corTotal || 0)}</td>\n        <td className=\"col-status\">\n          <div className=\"cor-log-status-select\">\n            <select\n              value={editValues.status}\n              onChange={(e) => setEditValues(prev => ({ ...prev, status: e.target.value }))}\n              disabled={isSaving}\n              className=\"cor-log-select\"\n            >\n              {STATUS_OPTIONS.map(opt => (\n                <option key={opt.value} value={opt.value}>{opt.label}</option>\n              ))}\n            </select>\n            <ChevronDown size={14} className=\"select-icon\" />\n          </div>\n        </td>\n        <td className=\"col-comments\">\n          <textarea\n            value={editValues.comments}\n            onChange={(e) => setEditValues(prev => ({ ...prev, comments: e.target.value }))}\n            onKeyDown={handleKeyDown}\n            disabled={isSaving}\n            placeholder=\"Add comments...\"\n            className=\"cor-log-textarea\"\n            rows={2}\n          />\n        </td>\n        <td className=\"col-actions\">\n          {isSaving ? (\n            <Loader2 size={16} className=\"spin\" />\n          ) : (\n            <div className=\"cor-log-edit-actions\">\n              <button\n                className=\"btn btn-icon btn-success\"\n                onClick={handleSave}\n                title=\"Save\"\n              >\n                <Check size={14} />\n              </button>\n              <button\n                className=\"btn btn-icon btn-ghost\"\n                onClick={handleCancel}\n                title=\"Cancel\"\n              >\n                <X size={14} />\n              </button>\n            </div>\n          )}\n        </td>\n      </tr>\n    )\n  }\n\n  return (\n    <tr className=\"cor-log-row\">\n      <td className=\"col-log-num\">{entry.logNumber}</td>\n      <td className=\"col-date-sent editable\" onClick={onEdit}>\n        {formatDateDisplay(entry.dateSentToClient)}\n      </td>\n      <td className=\"col-ce-num editable\" onClick={onEdit}>\n        {entry.ceNumber || '-'}\n      </td>\n      <td className=\"col-description\">\n        <span className=\"cor-log-title\">{entry.changeOrder.title || 'Untitled'}</span>\n        <span className=\"cor-log-number\">{entry.changeOrder.corNumber}</span>\n      </td>\n      <td className=\"col-amount\">{formatCurrency(entry.changeOrder.corTotal || 0)}</td>\n      <td className=\"col-status editable\" onClick={onEdit}>\n        <span className={`cor-log-status ${status.className}`}>{status.label}</span>\n      </td>\n      <td className=\"col-comments editable\" onClick={onEdit}>\n        {entry.comments || <span className=\"placeholder\">Click to add...</span>}\n      </td>\n      <td className=\"col-actions\">\n        <button\n          className=\"btn btn-icon btn-ghost\"\n          onClick={onEdit}\n          title=\"Edit\"\n        >\n          <Edit3 size={14} />\n        </button>\n      </td>\n    </tr>\n  )\n}\n","import { useState, useEffect, useMemo } from 'react'\nimport { FileSpreadsheet, FileText, Loader2, RefreshCw, Clock, CheckCircle, XCircle, Search, X } from 'lucide-react'\nimport { db } from '../../lib/supabase'\nimport { formatCurrency } from '../../lib/corCalculations'\nimport { useFilteredPagination } from '../../hooks/useFilteredPagination'\nimport Pagination from '../ui/Pagination'\nimport CORLogRow from './CORLogRow'\n\n// Status display mapping for client presentation\nconst STATUS_DISPLAY = {\n  draft: { label: 'Draft', className: 'draft' },\n  pending_approval: { label: 'Pending', className: 'pending' },\n  approved: { label: 'Approved', className: 'approved' },\n  rejected: { label: 'Rejected', className: 'rejected' },\n  billed: { label: 'Billed', className: 'billed' },\n  closed: { label: 'Closed', className: 'closed' }\n}\n\n// Status categories for grouping\nconst STATUS_CATEGORIES = {\n  pending: ['draft', 'pending_approval'],\n  approved: ['approved', 'billed'],\n  void: ['rejected', 'closed']\n}\n\nexport default function CORLog({ project, company, onShowToast }) {\n  const [logEntries, setLogEntries] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [editingId, setEditingId] = useState(null)\n  const [savingId, setSavingId] = useState(null)\n  const [refreshing, setRefreshing] = useState(false)\n\n  useEffect(() => {\n    loadCORLog()\n\n    // Subscribe to COR log changes\n    const subscription = db.subscribeToCORLog?.(project.id, () => {\n      loadCORLog()\n    })\n\n    return () => {\n      if (subscription) db.unsubscribe?.(subscription)\n    }\n  }, [project.id])\n\n  const loadCORLog = async () => {\n    try {\n      const data = await db.getCORLog(project.id)\n      setLogEntries(data || [])\n    } catch (error) {\n      console.error('Error loading COR log:', error)\n      onShowToast?.('Error loading COR log', 'error')\n    } finally {\n      setLoading(false)\n      setRefreshing(false)\n    }\n  }\n\n  const handleRefresh = () => {\n    setRefreshing(true)\n    loadCORLog()\n  }\n\n  const handleSave = async (entryId, updates, changeOrderId) => {\n    setSavingId(entryId)\n    try {\n      // Update log entry fields\n      await db.updateCORLogEntry(entryId, updates)\n\n      // If status changed, update the change order status too\n      if (updates.status) {\n        await db.updateChangeOrderStatus(changeOrderId, updates.status)\n      }\n\n      // Update local state\n      setLogEntries(prev => prev.map(entry =>\n        entry.id === entryId\n          ? {\n              ...entry,\n              dateSentToClient: updates.dateSentToClient,\n              ceNumber: updates.ceNumber,\n              comments: updates.comments,\n              changeOrder: {\n                ...entry.changeOrder,\n                status: updates.status || entry.changeOrder.status\n              }\n            }\n          : entry\n      ))\n      setEditingId(null)\n      onShowToast?.('Log entry updated', 'success')\n    } catch (error) {\n      console.error('Error updating log entry:', error)\n      onShowToast?.('Error updating log entry', 'error')\n    } finally {\n      setSavingId(null)\n    }\n  }\n\n  // Flatten nested changeOrder fields for search\n  const searchableEntries = useMemo(() =>\n    logEntries.map(entry => ({\n      ...entry,\n      _title: entry.changeOrder?.title || '',\n      _cor_number: entry.changeOrder?.corNumber || '',\n      _status: entry.changeOrder?.status || '',\n      _scope: entry.changeOrder?.scopeOfWork || ''\n    })),\n    [logEntries]\n  )\n\n  // Pagination\n  const {\n    paginatedItems: paginatedEntries,\n    searchTerm,\n    setSearchTerm,\n    currentPage,\n    totalPages,\n    goToPage,\n    pageSize,\n    setPageSize,\n    totalItems: paginatedTotalItems\n  } = useFilteredPagination(searchableEntries, {\n    pageSize: 25,\n    searchFields: ['_title', '_cor_number', '_status', '_scope', 'ceNumber', 'comments']\n  })\n\n  // Group paginated entries by status category\n  const groupedEntries = useMemo(() => {\n    const pending = paginatedEntries.filter(e => STATUS_CATEGORIES.pending.includes(e.changeOrder.status))\n    const approved = paginatedEntries.filter(e => STATUS_CATEGORIES.approved.includes(e.changeOrder.status))\n    const voided = paginatedEntries.filter(e => STATUS_CATEGORIES.void.includes(e.changeOrder.status))\n\n    return { pending, approved, voided }\n  }, [paginatedEntries])\n\n  // Calculate summary statistics\n  const summary = useMemo(() => {\n    const { pending, approved, voided } = groupedEntries\n\n    return {\n      totalCORs: logEntries.length,\n      approvedCount: approved.length,\n      pendingCount: pending.length,\n      voidCount: voided.length,\n      approvedTotal: approved.reduce((sum, e) => sum + (e.changeOrder.corTotal || 0), 0),\n      pendingTotal: pending.reduce((sum, e) => sum + (e.changeOrder.corTotal || 0), 0),\n      voidTotal: voided.reduce((sum, e) => sum + (e.changeOrder.corTotal || 0), 0),\n      grandTotal: logEntries.reduce((sum, e) => sum + (e.changeOrder.corTotal || 0), 0)\n    }\n  }, [logEntries, groupedEntries])\n\n  // Export to PDF\n  const exportToPDF = async () => {\n    try {\n      // Dynamic import for jspdf\n      const { default: jsPDF } = await import('jspdf')\n      const { default: autoTable } = await import('jspdf-autotable')\n\n      const doc = new jsPDF('landscape')\n      const pageWidth = doc.internal.pageSize.width\n\n      // Header\n      doc.setFontSize(18)\n      doc.setFont(undefined, 'bold')\n      doc.text('CHANGE ORDER LOG', pageWidth / 2, 20, { align: 'center' })\n\n      doc.setFontSize(12)\n      doc.setFont(undefined, 'normal')\n      doc.text(`Project: ${project.name}`, pageWidth / 2, 28, { align: 'center' })\n      if (project.job_number) {\n        doc.text(`Job #${project.job_number}`, pageWidth / 2, 35, { align: 'center' })\n      }\n      doc.setFontSize(10)\n      doc.text(`Generated: ${new Date().toLocaleDateString()}`, pageWidth / 2, 42, { align: 'center' })\n\n      // Company info if available\n      if (company?.name) {\n        doc.setFontSize(11)\n        doc.setFont(undefined, 'bold')\n        doc.text(company.name, 14, 20)\n        doc.setFont(undefined, 'normal')\n        if (company.phone) {\n          doc.setFontSize(9)\n          doc.text(company.phone, 14, 25)\n        }\n      }\n\n      // Table data - include all editable columns\n      const tableData = logEntries.map(entry => [\n        entry.logNumber,\n        entry.changeOrder.corNumber || '-',\n        entry.dateSentToClient ? new Date(entry.dateSentToClient).toLocaleDateString() : '-',\n        entry.ceNumber || '-',\n        entry.changeOrder.title || 'Untitled',\n        formatCurrency(entry.changeOrder.corTotal || 0),\n        STATUS_DISPLAY[entry.changeOrder.status]?.label || entry.changeOrder.status,\n        entry.comments || '-'\n      ])\n\n      // Generate table with all columns\n      autoTable(doc, {\n        startY: 50,\n        head: [['Log #', 'COR #', 'Date Sent', 'CE #', 'Description', 'Amount', 'Status', 'Comments']],\n        body: tableData,\n        styles: {\n          fontSize: 8,\n          cellPadding: 3,\n          overflow: 'linebreak',\n          valign: 'top'\n        },\n        headStyles: {\n          fillColor: [51, 51, 51],\n          textColor: 255,\n          fontStyle: 'bold',\n          fontSize: 8\n        },\n        columnStyles: {\n          0: { cellWidth: 12, halign: 'center' },  // Log #\n          1: { cellWidth: 18 },                     // COR #\n          2: { cellWidth: 22 },                     // Date Sent\n          3: { cellWidth: 18 },                     // CE #\n          4: { cellWidth: 55 },                     // Description\n          5: { cellWidth: 22, halign: 'right' },    // Amount\n          6: { cellWidth: 18, halign: 'center' },   // Status\n          7: { cellWidth: 'auto', minCellWidth: 50 } // Comments - flexible width\n        },\n        alternateRowStyles: {\n          fillColor: [248, 248, 248]\n        },\n        didParseCell: (data) => {\n          // Style status cells based on value\n          if (data.column.index === 6 && data.section === 'body') {\n            const status = data.cell.raw?.toLowerCase()\n            if (status === 'approved' || status === 'billed') {\n              data.cell.styles.textColor = [5, 150, 105]\n            } else if (status === 'pending' || status === 'pending approval') {\n              data.cell.styles.textColor = [217, 119, 6]\n            } else if (status === 'rejected' || status === 'void') {\n              data.cell.styles.textColor = [220, 38, 38]\n            }\n          }\n        }\n      })\n\n      // Summary section\n      const finalY = (doc.lastAutoTable?.finalY || 100) + 10\n      doc.setFontSize(10)\n      doc.setFont(undefined, 'bold')\n      doc.text('SUMMARY', 14, finalY)\n\n      doc.setFont(undefined, 'normal')\n      doc.setFontSize(9)\n      const col1X = 14\n      const col2X = 100\n      doc.text(`Total CORs: ${summary.totalCORs}`, col1X, finalY + 7)\n      doc.text(`Approved: ${summary.approvedCount} (${formatCurrency(summary.approvedTotal)})`, col1X, finalY + 14)\n      doc.text(`Pending: ${summary.pendingCount} (${formatCurrency(summary.pendingTotal)})`, col2X, finalY + 7)\n      doc.text(`Void: ${summary.voidCount} (${formatCurrency(summary.voidTotal)})`, col2X, finalY + 14)\n\n      doc.setFont(undefined, 'bold')\n      doc.setFontSize(10)\n      doc.text(`Total Value: ${formatCurrency(summary.grandTotal)}`, col1X, finalY + 24)\n\n      // Save\n      const fileName = `COR_Log_${project.job_number || project.name.replace(/\\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.pdf`\n      doc.save(fileName)\n\n      onShowToast?.('PDF exported successfully', 'success')\n    } catch (error) {\n      console.error('Error exporting PDF:', error)\n      onShowToast?.('Error exporting PDF', 'error')\n    }\n  }\n\n  // Export to Excel\n  const exportToExcel = async () => {\n    try {\n      // Dynamic import for xlsx\n      const XLSX = await import('xlsx')\n\n      // Prepare data\n      const data = logEntries.map(entry => ({\n        'Log #': entry.logNumber,\n        'COR Number': entry.changeOrder.corNumber,\n        'Date Sent to Client': entry.dateSentToClient || '',\n        'CE Number': entry.ceNumber || '',\n        'Description': entry.changeOrder.title || 'Untitled',\n        'Amount': entry.changeOrder.corTotal || 0,\n        'Status': STATUS_DISPLAY[entry.changeOrder.status]?.label || entry.changeOrder.status,\n        'Created Date': entry.changeOrder.createdAt ? new Date(entry.changeOrder.createdAt).toLocaleDateString() : '',\n        'Approved Date': entry.changeOrder.approvedAt ? new Date(entry.changeOrder.approvedAt).toLocaleDateString() : '',\n        'Approved By': entry.changeOrder.approvedBy || '',\n        'Comments': entry.comments || ''\n      }))\n\n      // Add summary row\n      data.push({})\n      data.push({\n        'Log #': 'SUMMARY',\n        'Description': `Total CORs: ${summary.totalCORs}`,\n        'Amount': summary.grandTotal,\n        'Status': `Approved: ${summary.approvedCount}, Pending: ${summary.pendingCount}`\n      })\n\n      // Create workbook\n      const ws = XLSX.utils.json_to_sheet(data)\n      const wb = XLSX.utils.book_new()\n      XLSX.utils.book_append_sheet(wb, ws, 'COR Log')\n\n      // Format amount column\n      const amountCol = 5 // 0-indexed, 'Amount' column\n      const range = XLSX.utils.decode_range(ws['!ref'])\n      for (let row = range.s.r + 1; row <= range.e.r; row++) {\n        const cellRef = XLSX.utils.encode_cell({ r: row, c: amountCol })\n        if (ws[cellRef] && typeof ws[cellRef].v === 'number') {\n          ws[cellRef].z = '$#,##0.00'\n        }\n      }\n\n      // Column widths\n      ws['!cols'] = [\n        { wch: 8 },   // Log #\n        { wch: 12 },  // COR Number\n        { wch: 15 },  // Date Sent\n        { wch: 12 },  // CE Number\n        { wch: 40 },  // Description\n        { wch: 12 },  // Amount\n        { wch: 12 },  // Status\n        { wch: 12 },  // Created Date\n        { wch: 12 },  // Approved Date\n        { wch: 20 },  // Approved By\n        { wch: 30 }   // Comments\n      ]\n\n      // Save\n      const fileName = `COR_Log_${project.job_number || project.name}_${new Date().toISOString().split('T')[0]}.xlsx`\n      XLSX.writeFile(wb, fileName)\n\n      onShowToast?.('Excel exported successfully', 'success')\n    } catch (error) {\n      console.error('Error exporting Excel:', error)\n      onShowToast?.('Error exporting Excel', 'error')\n    }\n  }\n\n  if (loading) {\n    return (\n      <div className=\"cor-log cor-log-loading\">\n        <Loader2 size={24} className=\"spin\" />\n        <span>Loading COR Log...</span>\n      </div>\n    )\n  }\n\n  // Helper to render a section table\n  const renderSectionTable = (entries, showHeader = true) => (\n    <table className=\"cor-log-table\">\n      {showHeader && (\n        <thead>\n          <tr>\n            <th className=\"col-log-num\">Log #</th>\n            <th className=\"col-date-sent\">Date Sent</th>\n            <th className=\"col-ce-num\">CE #</th>\n            <th className=\"col-description\">Description</th>\n            <th className=\"col-amount\">Amount</th>\n            <th className=\"col-status\">Status</th>\n            <th className=\"col-comments\">Comments</th>\n            <th className=\"col-actions\">Actions</th>\n          </tr>\n        </thead>\n      )}\n      <tbody>\n        {entries.map(entry => (\n          <CORLogRow\n            key={entry.id}\n            entry={entry}\n            isEditing={editingId === entry.id}\n            isSaving={savingId === entry.id}\n            onEdit={() => setEditingId(entry.id)}\n            onSave={(updates) => handleSave(entry.id, updates, entry.changeOrder.id)}\n            onCancel={() => setEditingId(null)}\n            statusDisplay={STATUS_DISPLAY}\n          />\n        ))}\n      </tbody>\n    </table>\n  )\n\n  return (\n    <div className=\"cor-log cor-log-expanded\">\n      {/* Header */}\n      <div className=\"cor-log-header\">\n        <div className=\"cor-log-title\">\n          <FileSpreadsheet size={20} />\n          <h3>Change Order Log</h3>\n          <span className=\"cor-log-count\">{logEntries.length} entries</span>\n        </div>\n        <div className=\"cor-log-actions\">\n          <button\n            className=\"btn btn-icon btn-ghost\"\n            onClick={handleRefresh}\n            disabled={refreshing}\n            title=\"Refresh\"\n          >\n            <RefreshCw size={16} className={refreshing ? 'spin' : ''} />\n          </button>\n          <button className=\"btn btn-secondary btn-small\" onClick={exportToExcel}>\n            <FileSpreadsheet size={14} /> Excel\n          </button>\n          <button className=\"btn btn-secondary btn-small\" onClick={exportToPDF}>\n            <FileText size={14} /> PDF\n          </button>\n        </div>\n      </div>\n\n      {/* Search Input */}\n      <div className=\"cor-search\" style={{ margin: '0 0 12px 0' }}>\n        <Search size={14} className=\"cor-search-icon\" />\n        <input\n          type=\"text\"\n          className=\"cor-search-input\"\n          placeholder=\"Search log entries by title, COR #, status, or comments...\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n        />\n        {searchTerm && (\n          <button className=\"cor-search-clear\" onClick={() => setSearchTerm('')}>\n            <X size={14} />\n          </button>\n        )}\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"cor-log-summary-cards\">\n        <div className=\"summary-card pending\">\n          <Clock size={18} />\n          <div className=\"summary-card-content\">\n            <span className=\"summary-card-label\">Pending</span>\n            <span className=\"summary-card-count\">{summary.pendingCount} CORs</span>\n            <span className=\"summary-card-amount\">{formatCurrency(summary.pendingTotal)}</span>\n          </div>\n        </div>\n        <div className=\"summary-card approved\">\n          <CheckCircle size={18} />\n          <div className=\"summary-card-content\">\n            <span className=\"summary-card-label\">Approved</span>\n            <span className=\"summary-card-count\">{summary.approvedCount} CORs</span>\n            <span className=\"summary-card-amount\">{formatCurrency(summary.approvedTotal)}</span>\n          </div>\n        </div>\n        <div className=\"summary-card void\">\n          <XCircle size={18} />\n          <div className=\"summary-card-content\">\n            <span className=\"summary-card-label\">Void</span>\n            <span className=\"summary-card-count\">{summary.voidCount} CORs</span>\n            <span className=\"summary-card-amount\">{formatCurrency(summary.voidTotal)}</span>\n          </div>\n        </div>\n        <div className=\"summary-card total\">\n          <FileSpreadsheet size={18} />\n          <div className=\"summary-card-content\">\n            <span className=\"summary-card-label\">Total</span>\n            <span className=\"summary-card-count\">{summary.totalCORs} CORs</span>\n            <span className=\"summary-card-amount\">{formatCurrency(summary.grandTotal)}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      {logEntries.length === 0 ? (\n        <div className=\"cor-log-empty\">\n          <FileSpreadsheet size={32} />\n          <p>No change orders in log</p>\n          <span>CORs will appear here as they are created</span>\n        </div>\n      ) : (\n        <div className=\"cor-log-sections\">\n          {/* Pending Section */}\n          {groupedEntries.pending.length > 0 && (\n            <div className=\"cor-log-section pending\">\n              <div className=\"cor-log-section-header\">\n                <Clock size={16} />\n                <h4>Pending Change Orders</h4>\n                <span className=\"section-count\">{groupedEntries.pending.length}</span>\n                <span className=\"section-total\">{formatCurrency(summary.pendingTotal)}</span>\n              </div>\n              <div className=\"cor-log-table-wrapper\">\n                {renderSectionTable(groupedEntries.pending)}\n              </div>\n            </div>\n          )}\n\n          {/* Approved Section */}\n          {groupedEntries.approved.length > 0 && (\n            <div className=\"cor-log-section approved\">\n              <div className=\"cor-log-section-header\">\n                <CheckCircle size={16} />\n                <h4>Approved Change Orders</h4>\n                <span className=\"section-count\">{groupedEntries.approved.length}</span>\n                <span className=\"section-total\">{formatCurrency(summary.approvedTotal)}</span>\n              </div>\n              <div className=\"cor-log-table-wrapper\">\n                {renderSectionTable(groupedEntries.approved)}\n              </div>\n            </div>\n          )}\n\n          {/* Void Section */}\n          {groupedEntries.voided.length > 0 && (\n            <div className=\"cor-log-section void\">\n              <div className=\"cor-log-section-header\">\n                <XCircle size={16} />\n                <h4>Void Change Orders</h4>\n                <span className=\"section-count\">{groupedEntries.voided.length}</span>\n                <span className=\"section-total\">{formatCurrency(summary.voidTotal)}</span>\n              </div>\n              <div className=\"cor-log-table-wrapper\">\n                {renderSectionTable(groupedEntries.voided)}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <Pagination\n          currentPage={currentPage}\n          totalPages={totalPages}\n          onPageChange={goToPage}\n          pageSize={pageSize}\n          onPageSizeChange={setPageSize}\n          totalItems={paginatedTotalItems}\n        />\n      )}\n    </div>\n  )\n}\n"],"file":"CORLog-CihvvLkh.js"}