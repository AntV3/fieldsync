const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ForemanView-D6ZjUqVu.js","assets/InjuryReportForm-H3psSi5B.js","assets/x-BYE113yV.js","assets/imageUtils-L9s4Av-1.js","assets/wrench-Bol2319l.js","assets/user-B3dmAqIX.js","assets/chevron-down-CiAJyF4U.js","assets/react-DXGY7bZi.js","assets/pdf-ChZ1zkDw.js","assets/supabase-VuevzHjS.js","assets/Dashboard-D_7YcLBT.js","assets/users-m1YWHwPw.js","assets/pencil-CDhdvu18.js","assets/xlsx-BvJTHLik.js","assets/corCalculations-0Xep-e13.js","assets/chevron-right-Cb9rY2WV.js","assets/user-minus-BllhAFQP.js","assets/Setup-YSzn_HdK.js","assets/BrandingSettings-Bq7rOotX.js","assets/PricingManager-DWMTkgna.js","assets/PublicView-U2QDkm9p.js","assets/SignaturePage-ybelbaG-.js","assets/MembershipManager-B1BNSRll.js"])))=>i.map(i=>d[i]);
import{r as hm,a as pm,b as Ph}from"./react-DXGY7bZi.js";import{_ as Ya}from"./pdf-ChZ1zkDw.js";import{c as gm}from"./supabase-VuevzHjS.js";function Ih(r,i){for(var c=0;c<i.length;c++){const s=i[c];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in r)){const d=Object.getOwnPropertyDescriptor(s,o);d&&Object.defineProperty(r,o,d.get?d:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function c(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(o){if(o.ep)return;o.ep=!0;const d=c(o);fetch(o.href,d)}})();var Ru={exports:{}},Zl={};var tm;function ep(){if(tm)return Zl;tm=1;var r=Symbol.for("react.transitional.element"),i=Symbol.for("react.fragment");function c(s,o,d){var h=null;if(d!==void 0&&(h=""+d),o.key!==void 0&&(h=""+o.key),"key"in o){d={};for(var g in o)g!=="key"&&(d[g]=o[g])}else d=o;return o=d.ref,{$$typeof:r,type:s,key:h,ref:o!==void 0?o:null,props:d}}return Zl.Fragment=i,Zl.jsx=c,Zl.jsxs=c,Zl}var am;function tp(){return am||(am=1,Ru.exports=ep()),Ru.exports}var v=tp(),U=hm();const ym=pm(U),Fp=Ih({__proto__:null,default:ym},[U]);var Uu={exports:{}},Vl={},Bu={exports:{}},Hu={};var nm;function ap(){return nm||(nm=1,(function(r){function i(A,x){var H=A.length;A.push(x);e:for(;0<H;){var oe=H-1>>>1,fe=A[oe];if(0<o(fe,x))A[oe]=x,A[H]=fe,H=oe;else break e}}function c(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var x=A[0],H=A.pop();if(H!==x){A[0]=H;e:for(var oe=0,fe=A.length,Ne=fe>>>1;oe<Ne;){var ye=2*(oe+1)-1,z=A[ye],P=ye+1,He=A[P];if(0>o(z,H))P<fe&&0>o(He,z)?(A[oe]=He,A[P]=H,oe=P):(A[oe]=z,A[ye]=H,oe=ye);else if(P<fe&&0>o(He,H))A[oe]=He,A[P]=H,oe=P;else break e}}return x}function o(A,x){var H=A.sortIndex-x.sortIndex;return H!==0?H:A.id-x.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var h=Date,g=h.now();r.unstable_now=function(){return h.now()-g}}var w=[],M=[],R=1,N=null,G=3,Z=!1,V=!1,B=!1,ie=!1,_e=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function J(A){for(var x=c(M);x!==null;){if(x.callback===null)s(M);else if(x.startTime<=A)s(M),x.sortIndex=x.expirationTime,i(w,x);else break;x=c(M)}}function je(A){if(B=!1,J(A),!V)if(c(w)!==null)V=!0,Ye||(Ye=!0,Ge());else{var x=c(M);x!==null&&dt(je,x.startTime-A)}}var Ye=!1,Pe=-1,Ie=5,ot=-1;function Wt(){return ie?!0:!(r.unstable_now()-ot<Ie)}function ft(){if(ie=!1,Ye){var A=r.unstable_now();ot=A;var x=!0;try{e:{V=!1,B&&(B=!1,he(Pe),Pe=-1),Z=!0;var H=G;try{t:{for(J(A),N=c(w);N!==null&&!(N.expirationTime>A&&Wt());){var oe=N.callback;if(typeof oe=="function"){N.callback=null,G=N.priorityLevel;var fe=oe(N.expirationTime<=A);if(A=r.unstable_now(),typeof fe=="function"){N.callback=fe,J(A),x=!0;break t}N===c(w)&&s(w),J(A)}else s(w);N=c(w)}if(N!==null)x=!0;else{var Ne=c(M);Ne!==null&&dt(je,Ne.startTime-A),x=!1}}break e}finally{N=null,G=H,Z=!1}x=void 0}}finally{x?Ge():Ye=!1}}}var Ge;if(typeof $=="function")Ge=function(){$(ft)};else if(typeof MessageChannel<"u"){var $t=new MessageChannel,Xt=$t.port2;$t.port1.onmessage=ft,Ge=function(){Xt.postMessage(null)}}else Ge=function(){_e(ft,0)};function dt(A,x){Pe=_e(function(){A(r.unstable_now())},x)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(A){A.callback=null},r.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<A?Math.floor(1e3/A):5},r.unstable_getCurrentPriorityLevel=function(){return G},r.unstable_next=function(A){switch(G){case 1:case 2:case 3:var x=3;break;default:x=G}var H=G;G=x;try{return A()}finally{G=H}},r.unstable_requestPaint=function(){ie=!0},r.unstable_runWithPriority=function(A,x){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var H=G;G=A;try{return x()}finally{G=H}},r.unstable_scheduleCallback=function(A,x,H){var oe=r.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?oe+H:oe):H=oe,A){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=H+fe,A={id:R++,callback:x,priorityLevel:A,startTime:H,expirationTime:fe,sortIndex:-1},H>oe?(A.sortIndex=H,i(M,A),c(w)===null&&A===c(M)&&(B?(he(Pe),Pe=-1):B=!0,dt(je,H-oe))):(A.sortIndex=fe,i(w,A),V||Z||(V=!0,Ye||(Ye=!0,Ge()))),A},r.unstable_shouldYield=Wt,r.unstable_wrapCallback=function(A){var x=G;return function(){var H=G;G=x;try{return A.apply(this,arguments)}finally{G=H}}}})(Hu)),Hu}var lm;function np(){return lm||(lm=1,Bu.exports=ap()),Bu.exports}var rm;function lp(){if(rm)return Vl;rm=1;var r=np(),i=hm(),c=Ph();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function w(e){if(d(e)!==e)throw Error(s(188))}function M(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(s(188));return t!==e?null:e}for(var a=e,n=t;;){var l=a.return;if(l===null)break;var u=l.alternate;if(u===null){if(n=l.return,n!==null){a=n;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===a)return w(l),e;if(u===n)return w(l),t;u=u.sibling}throw Error(s(188))}if(a.return!==n.return)a=l,n=u;else{for(var f=!1,m=l.child;m;){if(m===a){f=!0,a=l,n=u;break}if(m===n){f=!0,n=l,a=u;break}m=m.sibling}if(!f){for(m=u.child;m;){if(m===a){f=!0,a=u,n=l;break}if(m===n){f=!0,n=u,a=l;break}m=m.sibling}if(!f)throw Error(s(189))}}if(a.alternate!==n)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:t}function R(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=R(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,G=Symbol.for("react.element"),Z=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),$=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),ot=Symbol.for("react.activity"),Wt=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function Ge(e){return e===null||typeof e!="object"?null:(e=ft&&e[ft]||e["@@iterator"],typeof e=="function"?e:null)}var $t=Symbol.for("react.client.reference");function Xt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$t?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case _e:return"Profiler";case ie:return"StrictMode";case je:return"Suspense";case Ye:return"SuspenseList";case ot:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case $:return e.displayName||"Context";case he:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pe:return t=e.displayName||null,t!==null?t:Xt(e.type)||"Memo";case Ie:t=e._payload,e=e._init;try{return Xt(e(t))}catch{}}return null}var dt=Array.isArray,A=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},oe=[],fe=-1;function Ne(e){return{current:e}}function ye(e){0>fe||(e.current=oe[fe],oe[fe]=null,fe--)}function z(e,t){fe++,oe[fe]=e.current,e.current=t}var P=Ne(null),He=Ne(null),Q=Ne(null),de=Ne(null);function qe(e,t){switch(z(Q,t),z(He,e),z(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ed(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ed(t),e=Td(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ye(P),z(P,e)}function Ae(){ye(P),ye(He),ye(Q)}function Ve(e){e.memoizedState!==null&&z(de,e);var t=P.current,a=Td(t,e.type);t!==a&&(z(He,e),z(P,a))}function et(e){He.current===e&&(ye(P),ye(He)),de.current===e&&(ye(de),Yl._currentValue=H)}var ke,fn;function Tt(e){if(ke===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ke=t&&t[1]||"",fn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+e+fn}var kt=!1;function vi(e,t){if(!e||kt)return"";kt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var O=function(){throw Error()};if(Object.defineProperty(O.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(O,[])}catch(q){var T=q}Reflect.construct(e,[],O)}else{try{O.call()}catch(q){T=q}e.call(O.prototype)}}else{try{throw Error()}catch(q){T=q}(O=e())&&typeof O.catch=="function"&&O.catch(function(){})}}catch(q){if(q&&T&&typeof q.stack=="string")return[q.stack,T.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=n.DetermineComponentFrameRoot(),f=u[0],m=u[1];if(f&&m){var y=f.split(`
`),E=m.split(`
`);for(l=n=0;n<y.length&&!y[n].includes("DetermineComponentFrameRoot");)n++;for(;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;if(n===y.length||l===E.length)for(n=y.length-1,l=E.length-1;1<=n&&0<=l&&y[n]!==E[l];)l--;for(;1<=n&&0<=l;n--,l--)if(y[n]!==E[l]){if(n!==1||l!==1)do if(n--,l--,0>l||y[n]!==E[l]){var D=`
`+y[n].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=n&&0<=l);break}}}finally{kt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Tt(a):""}function Cm(e,t){switch(e.tag){case 26:case 27:case 5:return Tt(e.type);case 16:return Tt("Lazy");case 13:return e.child!==t&&t!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return vi(e.type,!1);case 11:return vi(e.type.render,!1);case 1:return vi(e.type,!0);case 31:return Tt("Activity");default:return""}}function Iu(e){try{var t="",a=null;do t+=Cm(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var bi=Object.prototype.hasOwnProperty,Si=r.unstable_scheduleCallback,wi=r.unstable_cancelCallback,Om=r.unstable_shouldYield,zm=r.unstable_requestPaint,mt=r.unstable_now,Mm=r.unstable_getCurrentPriorityLevel,es=r.unstable_ImmediatePriority,ts=r.unstable_UserBlockingPriority,Fl=r.unstable_NormalPriority,Nm=r.unstable_LowPriority,as=r.unstable_IdlePriority,xm=r.log,Rm=r.unstable_setDisableYieldValue,In=null,_t=null;function pa(e){if(typeof xm=="function"&&Rm(e),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(In,e)}catch{}}var ht=Math.clz32?Math.clz32:Hm,Um=Math.log,Bm=Math.LN2;function Hm(e){return e>>>=0,e===0?32:31-(Um(e)/Bm|0)|0}var Pl=256,Il=262144,er=4194304;function Ga(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function tr(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var l=0,u=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var m=n&134217727;return m!==0?(n=m&~u,n!==0?l=Ga(n):(f&=m,f!==0?l=Ga(f):a||(a=m&~e,a!==0&&(l=Ga(a))))):(m=n&~u,m!==0?l=Ga(m):f!==0?l=Ga(f):a||(a=n&~e,a!==0&&(l=Ga(a)))),l===0?0:t!==0&&t!==l&&(t&u)===0&&(u=l&-l,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:l}function el(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function km(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ns(){var e=er;return er<<=1,(er&62914560)===0&&(er=4194304),e}function ji(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function tl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Lm(e,t,a,n,l,u){var f=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,y=e.expirationTimes,E=e.hiddenUpdates;for(a=f&~a;0<a;){var D=31-ht(a),O=1<<D;m[D]=0,y[D]=-1;var T=E[D];if(T!==null)for(E[D]=null,D=0;D<T.length;D++){var q=T[D];q!==null&&(q.lane&=-536870913)}a&=~O}n!==0&&ls(e,n,0),u!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=u&~(f&~t))}function ls(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-ht(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function rs(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-ht(a),l=1<<n;l&t|e[n]&t&&(e[n]|=t),a&=~l}}function is(e,t){var a=t&-t;return a=(a&42)!==0?1:Ei(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ei(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ti(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function cs(){var e=x.p;return e!==0?e:(e=window.event,e===void 0?32:Jd(e.type))}function us(e,t){var a=x.p;try{return x.p=e,t()}finally{x.p=a}}var ga=Math.random().toString(36).slice(2),Ke="__reactFiber$"+ga,nt="__reactProps$"+ga,dn="__reactContainer$"+ga,qi="__reactEvents$"+ga,Ym="__reactListeners$"+ga,Gm="__reactHandles$"+ga,ss="__reactResources$"+ga,al="__reactMarker$"+ga;function Di(e){delete e[Ke],delete e[nt],delete e[qi],delete e[Ym],delete e[Gm]}function mn(e){var t=e[Ke];if(t)return t;for(var a=e.parentNode;a;){if(t=a[dn]||a[Ke]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Md(e);e!==null;){if(a=e[Ke])return a;e=Md(e)}return t}e=a,a=e.parentNode}return null}function _n(e){if(e=e[Ke]||e[dn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function nl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function hn(e){var t=e[ss];return t||(t=e[ss]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qe(e){e[al]=!0}var os=new Set,fs={};function Qa(e,t){pn(e,t),pn(e+"Capture",t)}function pn(e,t){for(fs[e]=t,e=0;e<t.length;e++)os.add(t[e])}var Qm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ds={},ms={};function Xm(e){return bi.call(ms,e)?!0:bi.call(ds,e)?!1:Qm.test(e)?ms[e]=!0:(ds[e]=!0,!1)}function ar(e,t,a){if(Xm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function nr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Ft(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function qt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _s(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zm(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){a=""+f,u.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ai(e){if(!e._valueTracker){var t=_s(e)?"checked":"value";e._valueTracker=Zm(e,t,""+e[t])}}function hs(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=_s(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function lr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vm=/[\n"\\]/g;function Dt(e){return e.replace(Vm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ci(e,t,a,n,l,u,f,m){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+qt(t)):e.value!==""+qt(t)&&(e.value=""+qt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Oi(e,f,qt(t)):a!=null?Oi(e,f,qt(a)):n!=null&&e.removeAttribute("value"),l==null&&u!=null&&(e.defaultChecked=!!u),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+qt(m):e.removeAttribute("name")}function ps(e,t,a,n,l,u,f,m){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Ai(e);return}a=a!=null?""+qt(a):"",t=t!=null?""+qt(t):a,m||t===e.value||(e.value=t),e.defaultValue=t}n=n??l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=m?e.checked:!!n,e.defaultChecked=!!n,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Ai(e)}function Oi(e,t,a){t==="number"&&lr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function gn(e,t,a,n){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&n&&(e[a].defaultSelected=!0)}else{for(a=""+qt(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function gs(e,t,a){if(t!=null&&(t=""+qt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+qt(a):""}function ys(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(s(92));if(dt(n)){if(1<n.length)throw Error(s(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=qt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),Ai(e)}function yn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Km=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vs(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Km.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function bs(e,t,a){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var l in t)n=t[l],t.hasOwnProperty(l)&&a[l]!==n&&vs(e,l,n)}else for(var u in t)t.hasOwnProperty(u)&&vs(e,u,t[u])}function zi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rr(e){return Wm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var Mi=null;function Ni(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vn=null,bn=null;function Ss(e){var t=_n(e);if(t&&(e=t.stateNode)){var a=e[nt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ci(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Dt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var l=n[nt]||null;if(!l)throw Error(s(90));Ci(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&hs(n)}break e;case"textarea":gs(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&gn(e,!!a.multiple,t,!1)}}}var xi=!1;function ws(e,t,a){if(xi)return e(t,a);xi=!0;try{var n=e(t);return n}finally{if(xi=!1,(vn!==null||bn!==null)&&(Vr(),vn&&(t=vn,e=bn,bn=vn=null,Ss(t),e)))for(t=0;t<e.length;t++)Ss(e[t])}}function ll(e,t){var a=e.stateNode;if(a===null)return null;var n=a[nt]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,t,typeof a));return a}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ri=!1;if(It)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{Ri=!1}var ya=null,Ui=null,ir=null;function js(){if(ir)return ir;var e,t=Ui,a=t.length,n,l="value"in ya?ya.value:ya.textContent,u=l.length;for(e=0;e<a&&t[e]===l[e];e++);var f=a-e;for(n=1;n<=f&&t[a-n]===l[u-n];n++);return ir=l.slice(e,1<n?1-n:void 0)}function cr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ur(){return!0}function Es(){return!1}function lt(e){function t(a,n,l,u,f){this._reactName=a,this._targetInst=l,this.type=n,this.nativeEvent=u,this.target=f,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?ur:Es,this.isPropagationStopped=Es,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),t}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=lt(Xa),il=N({},Xa,{view:0,detail:0}),$m=lt(il),Bi,Hi,cl,or=N({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cl&&(cl&&e.type==="mousemove"?(Bi=e.screenX-cl.screenX,Hi=e.screenY-cl.screenY):Hi=Bi=0,cl=e),Bi)},movementY:function(e){return"movementY"in e?e.movementY:Hi}}),Ts=lt(or),Fm=N({},or,{dataTransfer:0}),Pm=lt(Fm),Im=N({},il,{relatedTarget:0}),ki=lt(Im),e_=N({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),t_=lt(e_),a_=N({},Xa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),n_=lt(a_),l_=N({},Xa,{data:0}),qs=lt(l_),r_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=c_[e])?!!t[e]:!1}function Li(){return u_}var s_=N({},il,{key:function(e){if(e.key){var t=r_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?cr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),o_=lt(s_),f_=N({},or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ds=lt(f_),d_=N({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),m_=lt(d_),__=N({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),h_=lt(__),p_=N({},or,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g_=lt(p_),y_=N({},Xa,{newState:0,oldState:0}),v_=lt(y_),b_=[9,13,27,32],Yi=It&&"CompositionEvent"in window,ul=null;It&&"documentMode"in document&&(ul=document.documentMode);var S_=It&&"TextEvent"in window&&!ul,As=It&&(!Yi||ul&&8<ul&&11>=ul),Cs=" ",Os=!1;function zs(e,t){switch(e){case"keyup":return b_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ms(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sn=!1;function w_(e,t){switch(e){case"compositionend":return Ms(t);case"keypress":return t.which!==32?null:(Os=!0,Cs);case"textInput":return e=t.data,e===Cs&&Os?null:e;default:return null}}function j_(e,t){if(Sn)return e==="compositionend"||!Yi&&zs(e,t)?(e=js(),ir=Ui=ya=null,Sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return As&&t.locale!=="ko"?null:t.data;default:return null}}var E_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ns(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!E_[e.type]:t==="textarea"}function xs(e,t,a,n){vn?bn?bn.push(n):bn=[n]:vn=n,t=Ir(t,"onChange"),0<t.length&&(a=new sr("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var sl=null,ol=null;function T_(e){yd(e,0)}function fr(e){var t=nl(e);if(hs(t))return e}function Rs(e,t){if(e==="change")return t}var Us=!1;if(It){var Gi;if(It){var Qi="oninput"in document;if(!Qi){var Bs=document.createElement("div");Bs.setAttribute("oninput","return;"),Qi=typeof Bs.oninput=="function"}Gi=Qi}else Gi=!1;Us=Gi&&(!document.documentMode||9<document.documentMode)}function Hs(){sl&&(sl.detachEvent("onpropertychange",ks),ol=sl=null)}function ks(e){if(e.propertyName==="value"&&fr(ol)){var t=[];xs(t,ol,e,Ni(e)),ws(T_,t)}}function q_(e,t,a){e==="focusin"?(Hs(),sl=t,ol=a,sl.attachEvent("onpropertychange",ks)):e==="focusout"&&Hs()}function D_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fr(ol)}function A_(e,t){if(e==="click")return fr(t)}function C_(e,t){if(e==="input"||e==="change")return fr(t)}function O_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pt=typeof Object.is=="function"?Object.is:O_;function fl(e,t){if(pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var l=a[n];if(!bi.call(t,l)||!pt(e[l],t[l]))return!1}return!0}function Ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ys(e,t){var a=Ls(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ls(a)}}function Gs(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gs(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qs(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=lr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=lr(e.document)}return t}function Xi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var z_=It&&"documentMode"in document&&11>=document.documentMode,wn=null,Zi=null,dl=null,Vi=!1;function Xs(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vi||wn==null||wn!==lr(n)||(n=wn,"selectionStart"in n&&Xi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dl&&fl(dl,n)||(dl=n,n=Ir(Zi,"onSelect"),0<n.length&&(t=new sr("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=wn)))}function Za(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var jn={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},Ki={},Zs={};It&&(Zs=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);function Va(e){if(Ki[e])return Ki[e];if(!jn[e])return e;var t=jn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Zs)return Ki[e]=t[a];return e}var Vs=Va("animationend"),Ks=Va("animationiteration"),Js=Va("animationstart"),M_=Va("transitionrun"),N_=Va("transitionstart"),x_=Va("transitioncancel"),Ws=Va("transitionend"),$s=new Map,Ji="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ji.push("scrollEnd");function Lt(e,t){$s.set(e,t),Qa(t,[e])}var dr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},At=[],En=0,Wi=0;function mr(){for(var e=En,t=Wi=En=0;t<e;){var a=At[t];At[t++]=null;var n=At[t];At[t++]=null;var l=At[t];At[t++]=null;var u=At[t];if(At[t++]=null,n!==null&&l!==null){var f=n.pending;f===null?l.next=l:(l.next=f.next,f.next=l),n.pending=l}u!==0&&Fs(a,l,u)}}function _r(e,t,a,n){At[En++]=e,At[En++]=t,At[En++]=a,At[En++]=n,Wi|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function $i(e,t,a,n){return _r(e,t,a,n),hr(e)}function Ka(e,t){return _r(e,null,null,t),hr(e)}function Fs(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var l=!1,u=e.return;u!==null;)u.childLanes|=a,n=u.alternate,n!==null&&(n.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(l=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,l&&t!==null&&(l=31-ht(a),e=u.hiddenUpdates,n=e[l],n===null?e[l]=[t]:n.push(t),t.lane=a|536870912),u):null}function hr(e){if(50<xl)throw xl=0,ru=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Tn={};function R_(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,a,n){return new R_(e,t,a,n)}function Fi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ea(e,t){var a=e.alternate;return a===null?(a=gt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Ps(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function pr(e,t,a,n,l,u){var f=0;if(n=e,typeof e=="function")Fi(e)&&(f=1);else if(typeof e=="string")f=Lh(e,a,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ot:return e=gt(31,a,t,l),e.elementType=ot,e.lanes=u,e;case B:return Ja(a.children,l,u,t);case ie:f=8,l|=24;break;case _e:return e=gt(12,a,t,l|2),e.elementType=_e,e.lanes=u,e;case je:return e=gt(13,a,t,l),e.elementType=je,e.lanes=u,e;case Ye:return e=gt(19,a,t,l),e.elementType=Ye,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $:f=10;break e;case he:f=9;break e;case J:f=11;break e;case Pe:f=14;break e;case Ie:f=16,n=null;break e}f=29,a=Error(s(130,e===null?"null":typeof e,"")),n=null}return t=gt(f,a,t,l),t.elementType=e,t.type=n,t.lanes=u,t}function Ja(e,t,a,n){return e=gt(7,e,n,t),e.lanes=a,e}function Pi(e,t,a){return e=gt(6,e,null,t),e.lanes=a,e}function Is(e){var t=gt(18,null,null,0);return t.stateNode=e,t}function Ii(e,t,a){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var eo=new WeakMap;function Ct(e,t){if(typeof e=="object"&&e!==null){var a=eo.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Iu(t)},eo.set(e,t),t)}return{value:e,source:t,stack:Iu(t)}}var qn=[],Dn=0,gr=null,ml=0,Ot=[],zt=0,va=null,Zt=1,Vt="";function ta(e,t){qn[Dn++]=ml,qn[Dn++]=gr,gr=e,ml=t}function to(e,t,a){Ot[zt++]=Zt,Ot[zt++]=Vt,Ot[zt++]=va,va=e;var n=Zt;e=Vt;var l=32-ht(n)-1;n&=~(1<<l),a+=1;var u=32-ht(t)+l;if(30<u){var f=l-l%5;u=(n&(1<<f)-1).toString(32),n>>=f,l-=f,Zt=1<<32-ht(t)+l|a<<l|n,Vt=u+e}else Zt=1<<u|a<<l|n,Vt=e}function ec(e){e.return!==null&&(ta(e,1),to(e,1,0))}function tc(e){for(;e===gr;)gr=qn[--Dn],qn[Dn]=null,ml=qn[--Dn],qn[Dn]=null;for(;e===va;)va=Ot[--zt],Ot[zt]=null,Vt=Ot[--zt],Ot[zt]=null,Zt=Ot[--zt],Ot[zt]=null}function ao(e,t){Ot[zt++]=Zt,Ot[zt++]=Vt,Ot[zt++]=va,Zt=t.id,Vt=t.overflow,va=e}var Je=null,Ee=null,le=!1,ba=null,Mt=!1,ac=Error(s(519));function Sa(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(Ct(t,e)),ac}function no(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[Ke]=e,t[nt]=n,a){case"dialog":te("cancel",t),te("close",t);break;case"iframe":case"object":case"embed":te("load",t);break;case"video":case"audio":for(a=0;a<Ul.length;a++)te(Ul[a],t);break;case"source":te("error",t);break;case"img":case"image":case"link":te("error",t),te("load",t);break;case"details":te("toggle",t);break;case"input":te("invalid",t),ps(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":te("invalid",t);break;case"textarea":te("invalid",t),ys(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||wd(t.textContent,a)?(n.popover!=null&&(te("beforetoggle",t),te("toggle",t)),n.onScroll!=null&&te("scroll",t),n.onScrollEnd!=null&&te("scrollend",t),n.onClick!=null&&(t.onclick=Pt),t=!0):t=!1,t||Sa(e,!0)}function lo(e){for(Je=e.return;Je;)switch(Je.tag){case 5:case 31:case 13:Mt=!1;return;case 27:case 3:Mt=!0;return;default:Je=Je.return}}function An(e){if(e!==Je)return!1;if(!le)return lo(e),le=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||bu(e.type,e.memoizedProps)),a=!a),a&&Ee&&Sa(e),lo(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ee=zd(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ee=zd(e)}else t===27?(t=Ee,Ra(e.type)?(e=Tu,Tu=null,Ee=e):Ee=t):Ee=Je?xt(e.stateNode.nextSibling):null;return!0}function Wa(){Ee=Je=null,le=!1}function nc(){var e=ba;return e!==null&&(ut===null?ut=e:ut.push.apply(ut,e),ba=null),e}function _l(e){ba===null?ba=[e]:ba.push(e)}var lc=Ne(null),$a=null,aa=null;function wa(e,t,a){z(lc,t._currentValue),t._currentValue=a}function na(e){e._currentValue=lc.current,ye(lc)}function rc(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function ic(e,t,a,n){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var u=l.dependencies;if(u!==null){var f=l.child;u=u.firstContext;e:for(;u!==null;){var m=u;u=l;for(var y=0;y<t.length;y++)if(m.context===t[y]){u.lanes|=a,m=u.alternate,m!==null&&(m.lanes|=a),rc(u.return,a,e),n||(f=null);break e}u=m.next}}else if(l.tag===18){if(f=l.return,f===null)throw Error(s(341));f.lanes|=a,u=f.alternate,u!==null&&(u.lanes|=a),rc(f,a,e),f=null}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}}function Cn(e,t,a,n){e=null;for(var l=t,u=!1;l!==null;){if(!u){if((l.flags&524288)!==0)u=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var f=l.alternate;if(f===null)throw Error(s(387));if(f=f.memoizedProps,f!==null){var m=l.type;pt(l.pendingProps.value,f.value)||(e!==null?e.push(m):e=[m])}}else if(l===de.current){if(f=l.alternate,f===null)throw Error(s(387));f.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(Yl):e=[Yl])}l=l.return}e!==null&&ic(t,e,a,n),t.flags|=262144}function yr(e){for(e=e.firstContext;e!==null;){if(!pt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fa(e){$a=e,aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function We(e){return ro($a,e)}function vr(e,t){return $a===null&&Fa(e),ro(e,t)}function ro(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},aa===null){if(e===null)throw Error(s(308));aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else aa=aa.next=t;return a}var U_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},B_=r.unstable_scheduleCallback,H_=r.unstable_NormalPriority,xe={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cc(){return{controller:new U_,data:new Map,refCount:0}}function hl(e){e.refCount--,e.refCount===0&&B_(H_,function(){e.controller.abort()})}var pl=null,uc=0,On=0,zn=null;function k_(e,t){if(pl===null){var a=pl=[];uc=0,On=fu(),zn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return uc++,t.then(io,io),t}function io(){if(--uc===0&&pl!==null){zn!==null&&(zn.status="fulfilled");var e=pl;pl=null,On=0,zn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function L_(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(n.status="rejected",n.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),n}var co=A.S;A.S=function(e,t){Vf=mt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&k_(e,t),co!==null&&co(e,t)};var Pa=Ne(null);function sc(){var e=Pa.current;return e!==null?e:we.pooledCache}function br(e,t){t===null?z(Pa,Pa.current):z(Pa,t.pool)}function uo(){var e=sc();return e===null?null:{parent:xe._currentValue,pool:e}}var Mn=Error(s(460)),oc=Error(s(474)),Sr=Error(s(542)),wr={then:function(){}};function so(e){return e=e.status,e==="fulfilled"||e==="rejected"}function oo(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Pt,Pt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mo(e),e;default:if(typeof t.status=="string")t.then(Pt,Pt);else{if(e=we,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=n}},function(n){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mo(e),e}throw en=t,Mn}}function Ia(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(en=a,Mn):a}}var en=null;function fo(){if(en===null)throw Error(s(459));var e=en;return en=null,e}function mo(e){if(e===Mn||e===Sr)throw Error(s(483))}var Nn=null,gl=0;function jr(e){var t=gl;return gl+=1,Nn===null&&(Nn=[]),oo(Nn,e,t)}function yl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Er(e,t){throw t.$$typeof===G?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _o(e){function t(S,b){if(e){var j=S.deletions;j===null?(S.deletions=[b],S.flags|=16):j.push(b)}}function a(S,b){if(!e)return null;for(;b!==null;)t(S,b),b=b.sibling;return null}function n(S){for(var b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function l(S,b){return S=ea(S,b),S.index=0,S.sibling=null,S}function u(S,b,j){return S.index=j,e?(j=S.alternate,j!==null?(j=j.index,j<b?(S.flags|=67108866,b):j):(S.flags|=67108866,b)):(S.flags|=1048576,b)}function f(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function m(S,b,j,C){return b===null||b.tag!==6?(b=Pi(j,S.mode,C),b.return=S,b):(b=l(b,j),b.return=S,b)}function y(S,b,j,C){var X=j.type;return X===B?D(S,b,j.props.children,C,j.key):b!==null&&(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ie&&Ia(X)===b.type)?(b=l(b,j.props),yl(b,j),b.return=S,b):(b=pr(j.type,j.key,j.props,null,S.mode,C),yl(b,j),b.return=S,b)}function E(S,b,j,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Ii(j,S.mode,C),b.return=S,b):(b=l(b,j.children||[]),b.return=S,b)}function D(S,b,j,C,X){return b===null||b.tag!==7?(b=Ja(j,S.mode,C,X),b.return=S,b):(b=l(b,j),b.return=S,b)}function O(S,b,j){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Pi(""+b,S.mode,j),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Z:return j=pr(b.type,b.key,b.props,null,S.mode,j),yl(j,b),j.return=S,j;case V:return b=Ii(b,S.mode,j),b.return=S,b;case Ie:return b=Ia(b),O(S,b,j)}if(dt(b)||Ge(b))return b=Ja(b,S.mode,j,null),b.return=S,b;if(typeof b.then=="function")return O(S,jr(b),j);if(b.$$typeof===$)return O(S,vr(S,b),j);Er(S,b)}return null}function T(S,b,j,C){var X=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return X!==null?null:m(S,b,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:return j.key===X?y(S,b,j,C):null;case V:return j.key===X?E(S,b,j,C):null;case Ie:return j=Ia(j),T(S,b,j,C)}if(dt(j)||Ge(j))return X!==null?null:D(S,b,j,C,null);if(typeof j.then=="function")return T(S,b,jr(j),C);if(j.$$typeof===$)return T(S,b,vr(S,j),C);Er(S,j)}return null}function q(S,b,j,C,X){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return S=S.get(j)||null,m(b,S,""+C,X);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Z:return S=S.get(C.key===null?j:C.key)||null,y(b,S,C,X);case V:return S=S.get(C.key===null?j:C.key)||null,E(b,S,C,X);case Ie:return C=Ia(C),q(S,b,j,C,X)}if(dt(C)||Ge(C))return S=S.get(j)||null,D(b,S,C,X,null);if(typeof C.then=="function")return q(S,b,j,jr(C),X);if(C.$$typeof===$)return q(S,b,j,vr(b,C),X);Er(b,C)}return null}function k(S,b,j,C){for(var X=null,ce=null,Y=b,F=b=0,ne=null;Y!==null&&F<j.length;F++){Y.index>F?(ne=Y,Y=null):ne=Y.sibling;var ue=T(S,Y,j[F],C);if(ue===null){Y===null&&(Y=ne);break}e&&Y&&ue.alternate===null&&t(S,Y),b=u(ue,b,F),ce===null?X=ue:ce.sibling=ue,ce=ue,Y=ne}if(F===j.length)return a(S,Y),le&&ta(S,F),X;if(Y===null){for(;F<j.length;F++)Y=O(S,j[F],C),Y!==null&&(b=u(Y,b,F),ce===null?X=Y:ce.sibling=Y,ce=Y);return le&&ta(S,F),X}for(Y=n(Y);F<j.length;F++)ne=q(Y,S,F,j[F],C),ne!==null&&(e&&ne.alternate!==null&&Y.delete(ne.key===null?F:ne.key),b=u(ne,b,F),ce===null?X=ne:ce.sibling=ne,ce=ne);return e&&Y.forEach(function(La){return t(S,La)}),le&&ta(S,F),X}function K(S,b,j,C){if(j==null)throw Error(s(151));for(var X=null,ce=null,Y=b,F=b=0,ne=null,ue=j.next();Y!==null&&!ue.done;F++,ue=j.next()){Y.index>F?(ne=Y,Y=null):ne=Y.sibling;var La=T(S,Y,ue.value,C);if(La===null){Y===null&&(Y=ne);break}e&&Y&&La.alternate===null&&t(S,Y),b=u(La,b,F),ce===null?X=La:ce.sibling=La,ce=La,Y=ne}if(ue.done)return a(S,Y),le&&ta(S,F),X;if(Y===null){for(;!ue.done;F++,ue=j.next())ue=O(S,ue.value,C),ue!==null&&(b=u(ue,b,F),ce===null?X=ue:ce.sibling=ue,ce=ue);return le&&ta(S,F),X}for(Y=n(Y);!ue.done;F++,ue=j.next())ue=q(Y,S,F,ue.value,C),ue!==null&&(e&&ue.alternate!==null&&Y.delete(ue.key===null?F:ue.key),b=u(ue,b,F),ce===null?X=ue:ce.sibling=ue,ce=ue);return e&&Y.forEach(function(Fh){return t(S,Fh)}),le&&ta(S,F),X}function Se(S,b,j,C){if(typeof j=="object"&&j!==null&&j.type===B&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:e:{for(var X=j.key;b!==null;){if(b.key===X){if(X=j.type,X===B){if(b.tag===7){a(S,b.sibling),C=l(b,j.props.children),C.return=S,S=C;break e}}else if(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ie&&Ia(X)===b.type){a(S,b.sibling),C=l(b,j.props),yl(C,j),C.return=S,S=C;break e}a(S,b);break}else t(S,b);b=b.sibling}j.type===B?(C=Ja(j.props.children,S.mode,C,j.key),C.return=S,S=C):(C=pr(j.type,j.key,j.props,null,S.mode,C),yl(C,j),C.return=S,S=C)}return f(S);case V:e:{for(X=j.key;b!==null;){if(b.key===X)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){a(S,b.sibling),C=l(b,j.children||[]),C.return=S,S=C;break e}else{a(S,b);break}else t(S,b);b=b.sibling}C=Ii(j,S.mode,C),C.return=S,S=C}return f(S);case Ie:return j=Ia(j),Se(S,b,j,C)}if(dt(j))return k(S,b,j,C);if(Ge(j)){if(X=Ge(j),typeof X!="function")throw Error(s(150));return j=X.call(j),K(S,b,j,C)}if(typeof j.then=="function")return Se(S,b,jr(j),C);if(j.$$typeof===$)return Se(S,b,vr(S,j),C);Er(S,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,b!==null&&b.tag===6?(a(S,b.sibling),C=l(b,j),C.return=S,S=C):(a(S,b),C=Pi(j,S.mode,C),C.return=S,S=C),f(S)):a(S,b)}return function(S,b,j,C){try{gl=0;var X=Se(S,b,j,C);return Nn=null,X}catch(Y){if(Y===Mn||Y===Sr)throw Y;var ce=gt(29,Y,null,S.mode);return ce.lanes=C,ce.return=S,ce}finally{}}}var tn=_o(!0),ho=_o(!1),ja=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ea(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ta(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(me&2)!==0){var l=n.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),n.pending=t,t=hr(e),Fs(e,null,a),t}return _r(e,n,t,a),hr(e)}function vl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,rs(e,a)}}function mc(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var l=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var f={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?l=u=f:u=u.next=f,a=a.next}while(a!==null);u===null?l=u=t:u=u.next=t}else l=u=t;a={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:u,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var _c=!1;function bl(){if(_c){var e=zn;if(e!==null)throw e}}function Sl(e,t,a,n){_c=!1;var l=e.updateQueue;ja=!1;var u=l.firstBaseUpdate,f=l.lastBaseUpdate,m=l.shared.pending;if(m!==null){l.shared.pending=null;var y=m,E=y.next;y.next=null,f===null?u=E:f.next=E,f=y;var D=e.alternate;D!==null&&(D=D.updateQueue,m=D.lastBaseUpdate,m!==f&&(m===null?D.firstBaseUpdate=E:m.next=E,D.lastBaseUpdate=y))}if(u!==null){var O=l.baseState;f=0,D=E=y=null,m=u;do{var T=m.lane&-536870913,q=T!==m.lane;if(q?(ae&T)===T:(n&T)===T){T!==0&&T===On&&(_c=!0),D!==null&&(D=D.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var k=e,K=m;T=t;var Se=a;switch(K.tag){case 1:if(k=K.payload,typeof k=="function"){O=k.call(Se,O,T);break e}O=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=K.payload,T=typeof k=="function"?k.call(Se,O,T):k,T==null)break e;O=N({},O,T);break e;case 2:ja=!0}}T=m.callback,T!==null&&(e.flags|=64,q&&(e.flags|=8192),q=l.callbacks,q===null?l.callbacks=[T]:q.push(T))}else q={lane:T,tag:m.tag,payload:m.payload,callback:m.callback,next:null},D===null?(E=D=q,y=O):D=D.next=q,f|=T;if(m=m.next,m===null){if(m=l.shared.pending,m===null)break;q=m,m=q.next,q.next=null,l.lastBaseUpdate=q,l.shared.pending=null}}while(!0);D===null&&(y=O),l.baseState=y,l.firstBaseUpdate=E,l.lastBaseUpdate=D,u===null&&(l.shared.lanes=0),Oa|=f,e.lanes=f,e.memoizedState=O}}function po(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function go(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)po(a[e],t)}var xn=Ne(null),Tr=Ne(0);function yo(e,t){e=da,z(Tr,e),z(xn,t),da=e|t.baseLanes}function hc(){z(Tr,da),z(xn,xn.current)}function pc(){da=Tr.current,ye(xn),ye(Tr)}var yt=Ne(null),Nt=null;function qa(e){var t=e.alternate;z(ze,ze.current&1),z(yt,e),Nt===null&&(t===null||xn.current!==null||t.memoizedState!==null)&&(Nt=e)}function gc(e){z(ze,ze.current),z(yt,e),Nt===null&&(Nt=e)}function vo(e){e.tag===22?(z(ze,ze.current),z(yt,e),Nt===null&&(Nt=e)):Da()}function Da(){z(ze,ze.current),z(yt,yt.current)}function vt(e){ye(yt),Nt===e&&(Nt=null),ye(ze)}var ze=Ne(0);function qr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ju(a)||Eu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=0,W=null,ve=null,Re=null,Dr=!1,Rn=!1,an=!1,Ar=0,wl=0,Un=null,Y_=0;function Ce(){throw Error(s(321))}function yc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!pt(e[a],t[a]))return!1;return!0}function vc(e,t,a,n,l,u){return la=u,W=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?af:xc,an=!1,u=a(n,l),an=!1,Rn&&(u=So(t,a,n,l)),bo(e),u}function bo(e){A.H=Tl;var t=ve!==null&&ve.next!==null;if(la=0,Re=ve=W=null,Dr=!1,wl=0,Un=null,t)throw Error(s(300));e===null||Ue||(e=e.dependencies,e!==null&&yr(e)&&(Ue=!0))}function So(e,t,a,n){W=e;var l=0;do{if(Rn&&(Un=null),wl=0,Rn=!1,25<=l)throw Error(s(301));if(l+=1,Re=ve=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}A.H=nf,u=t(a,n)}while(Rn);return u}function G_(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?jl(t):t,e=e.useState()[0],(ve!==null?ve.memoizedState:null)!==e&&(W.flags|=1024),t}function bc(){var e=Ar!==0;return Ar=0,e}function Sc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function wc(e){if(Dr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Dr=!1}la=0,Re=ve=W=null,Rn=!1,wl=Ar=0,Un=null}function tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?W.memoizedState=Re=e:Re=Re.next=e,Re}function Me(){if(ve===null){var e=W.alternate;e=e!==null?e.memoizedState:null}else e=ve.next;var t=Re===null?W.memoizedState:Re.next;if(t!==null)Re=t,ve=e;else{if(e===null)throw W.alternate===null?Error(s(467)):Error(s(310));ve=e,e={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},Re===null?W.memoizedState=Re=e:Re=Re.next=e}return Re}function Cr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(e){var t=wl;return wl+=1,Un===null&&(Un=[]),e=oo(Un,e,t),t=W,(Re===null?t.memoizedState:Re.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?af:xc),e}function Or(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return jl(e);if(e.$$typeof===$)return We(e)}throw Error(s(438,String(e)))}function jc(e){var t=null,a=W.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=W.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Cr(),W.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=Wt;return t.index++,a}function ra(e,t){return typeof t=="function"?t(e):t}function zr(e){var t=Me();return Ec(t,ve,e)}function Ec(e,t,a){var n=e.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=a;var l=e.baseQueue,u=n.pending;if(u!==null){if(l!==null){var f=l.next;l.next=u.next,u.next=f}t.baseQueue=l=u,n.pending=null}if(u=e.baseState,l===null)e.memoizedState=u;else{t=l.next;var m=f=null,y=null,E=t,D=!1;do{var O=E.lane&-536870913;if(O!==E.lane?(ae&O)===O:(la&O)===O){var T=E.revertLane;if(T===0)y!==null&&(y=y.next={lane:0,revertLane:0,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),O===On&&(D=!0);else if((la&T)===T){E=E.next,T===On&&(D=!0);continue}else O={lane:0,revertLane:E.revertLane,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},y===null?(m=y=O,f=u):y=y.next=O,W.lanes|=T,Oa|=T;O=E.action,an&&a(u,O),u=E.hasEagerState?E.eagerState:a(u,O)}else T={lane:O,revertLane:E.revertLane,gesture:E.gesture,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},y===null?(m=y=T,f=u):y=y.next=T,W.lanes|=O,Oa|=O;E=E.next}while(E!==null&&E!==t);if(y===null?f=u:y.next=m,!pt(u,e.memoizedState)&&(Ue=!0,D&&(a=zn,a!==null)))throw a;e.memoizedState=u,e.baseState=f,e.baseQueue=y,n.lastRenderedState=u}return l===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Tc(e){var t=Me(),a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var n=a.dispatch,l=a.pending,u=t.memoizedState;if(l!==null){a.pending=null;var f=l=l.next;do u=e(u,f.action),f=f.next;while(f!==l);pt(u,t.memoizedState)||(Ue=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,n]}function wo(e,t,a){var n=W,l=Me(),u=le;if(u){if(a===void 0)throw Error(s(407));a=a()}else a=t();var f=!pt((ve||l).memoizedState,a);if(f&&(l.memoizedState=a,Ue=!0),l=l.queue,Ac(To.bind(null,n,l,e),[e]),l.getSnapshot!==t||f||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,Bn(9,{destroy:void 0},Eo.bind(null,n,l,a,t),null),we===null)throw Error(s(349));u||(la&127)!==0||jo(n,t,a)}return a}function jo(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=W.updateQueue,t===null?(t=Cr(),W.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Eo(e,t,a,n){t.value=a,t.getSnapshot=n,qo(t)&&Do(e)}function To(e,t,a){return a(function(){qo(t)&&Do(e)})}function qo(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!pt(e,a)}catch{return!0}}function Do(e){var t=Ka(e,2);t!==null&&st(t,e,2)}function qc(e){var t=tt();if(typeof e=="function"){var a=e;if(e=a(),an){pa(!0);try{a()}finally{pa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:e},t}function Ao(e,t,a,n){return e.baseState=a,Ec(e,ve,typeof n=="function"?n:ra)}function Q_(e,t,a,n,l){if(xr(e))throw Error(s(485));if(e=t.action,e!==null){var u={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){u.listeners.push(f)}};A.T!==null?a(!0):u.isTransition=!1,n(u),a=t.pending,a===null?(u.next=t.pending=u,Co(t,u)):(u.next=a.next,t.pending=a.next=u)}}function Co(e,t){var a=t.action,n=t.payload,l=e.state;if(t.isTransition){var u=A.T,f={};A.T=f;try{var m=a(l,n),y=A.S;y!==null&&y(f,m),Oo(e,t,m)}catch(E){Dc(e,t,E)}finally{u!==null&&f.types!==null&&(u.types=f.types),A.T=u}}else try{u=a(l,n),Oo(e,t,u)}catch(E){Dc(e,t,E)}}function Oo(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){zo(e,t,n)},function(n){return Dc(e,t,n)}):zo(e,t,a)}function zo(e,t,a){t.status="fulfilled",t.value=a,Mo(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Co(e,a)))}function Dc(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,Mo(t),t=t.next;while(t!==n)}e.action=null}function Mo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function No(e,t){return t}function xo(e,t){if(le){var a=we.formState;if(a!==null){e:{var n=W;if(le){if(Ee){t:{for(var l=Ee,u=Mt;l.nodeType!==8;){if(!u){l=null;break t}if(l=xt(l.nextSibling),l===null){l=null;break t}}u=l.data,l=u==="F!"||u==="F"?l:null}if(l){Ee=xt(l.nextSibling),n=l.data==="F!";break e}}Sa(n)}n=!1}n&&(t=a[0])}}return a=tt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},a.queue=n,a=Io.bind(null,W,n),n.dispatch=a,n=qc(!1),u=Nc.bind(null,W,!1,n.queue),n=tt(),l={state:t,dispatch:null,action:e,pending:null},n.queue=l,a=Q_.bind(null,W,l,u,a),l.dispatch=a,n.memoizedState=e,[t,a,!1]}function Ro(e){var t=Me();return Uo(t,ve,e)}function Uo(e,t,a){if(t=Ec(e,t,No)[0],e=zr(ra)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=jl(t)}catch(f){throw f===Mn?Sr:f}else n=t;t=Me();var l=t.queue,u=l.dispatch;return a!==t.memoizedState&&(W.flags|=2048,Bn(9,{destroy:void 0},X_.bind(null,l,a),null)),[n,u,e]}function X_(e,t){e.action=t}function Bo(e){var t=Me(),a=ve;if(a!==null)return Uo(t,a,e);Me(),t=t.memoizedState,a=Me();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Bn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=W.updateQueue,t===null&&(t=Cr(),W.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Ho(){return Me().memoizedState}function Mr(e,t,a,n){var l=tt();W.flags|=e,l.memoizedState=Bn(1|t,{destroy:void 0},a,n===void 0?null:n)}function Nr(e,t,a,n){var l=Me();n=n===void 0?null:n;var u=l.memoizedState.inst;ve!==null&&n!==null&&yc(n,ve.memoizedState.deps)?l.memoizedState=Bn(t,u,a,n):(W.flags|=e,l.memoizedState=Bn(1|t,u,a,n))}function ko(e,t){Mr(8390656,8,e,t)}function Ac(e,t){Nr(2048,8,e,t)}function Z_(e){W.flags|=4;var t=W.updateQueue;if(t===null)t=Cr(),W.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Lo(e){var t=Me().memoizedState;return Z_({ref:t,nextImpl:e}),function(){if((me&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Yo(e,t){return Nr(4,2,e,t)}function Go(e,t){return Nr(4,4,e,t)}function Qo(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xo(e,t,a){a=a!=null?a.concat([e]):null,Nr(4,4,Qo.bind(null,t,e),a)}function Cc(){}function Zo(e,t){var a=Me();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&yc(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Vo(e,t){var a=Me();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&yc(t,n[1]))return n[0];if(n=e(),an){pa(!0);try{e()}finally{pa(!1)}}return a.memoizedState=[n,t],n}function Oc(e,t,a){return a===void 0||(la&1073741824)!==0&&(ae&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Jf(),W.lanes|=e,Oa|=e,a)}function Ko(e,t,a,n){return pt(a,t)?a:xn.current!==null?(e=Oc(e,a,n),pt(e,t)||(Ue=!0),e):(la&42)===0||(la&1073741824)!==0&&(ae&261930)===0?(Ue=!0,e.memoizedState=a):(e=Jf(),W.lanes|=e,Oa|=e,t)}function Jo(e,t,a,n,l){var u=x.p;x.p=u!==0&&8>u?u:8;var f=A.T,m={};A.T=m,Nc(e,!1,t,a);try{var y=l(),E=A.S;if(E!==null&&E(m,y),y!==null&&typeof y=="object"&&typeof y.then=="function"){var D=L_(y,n);El(e,t,D,wt(e))}else El(e,t,n,wt(e))}catch(O){El(e,t,{then:function(){},status:"rejected",reason:O},wt())}finally{x.p=u,f!==null&&m.types!==null&&(f.types=m.types),A.T=f}}function V_(){}function zc(e,t,a,n){if(e.tag!==5)throw Error(s(476));var l=Wo(e).queue;Jo(e,l,t,H,a===null?V_:function(){return $o(e),a(n)})}function Wo(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:H},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function $o(e){var t=Wo(e);t.next===null&&(t=e.alternate.memoizedState),El(e,t.next.queue,{},wt())}function Mc(){return We(Yl)}function Fo(){return Me().memoizedState}function Po(){return Me().memoizedState}function K_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=wt();e=Ea(a);var n=Ta(t,e,a);n!==null&&(st(n,t,a),vl(n,t,a)),t={cache:cc()},e.payload=t;return}t=t.return}}function J_(e,t,a){var n=wt();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xr(e)?ef(t,a):(a=$i(e,t,a,n),a!==null&&(st(a,e,n),tf(a,t,n)))}function Io(e,t,a){var n=wt();El(e,t,a,n)}function El(e,t,a,n){var l={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xr(e))ef(t,l);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var f=t.lastRenderedState,m=u(f,a);if(l.hasEagerState=!0,l.eagerState=m,pt(m,f))return _r(e,t,l,0),we===null&&mr(),!1}catch{}finally{}if(a=$i(e,t,l,n),a!==null)return st(a,e,n),tf(a,t,n),!0}return!1}function Nc(e,t,a,n){if(n={lane:2,revertLane:fu(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},xr(e)){if(t)throw Error(s(479))}else t=$i(e,a,n,2),t!==null&&st(t,e,2)}function xr(e){var t=e.alternate;return e===W||t!==null&&t===W}function ef(e,t){Rn=Dr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function tf(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,rs(e,a)}}var Tl={readContext:We,use:Or,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useLayoutEffect:Ce,useInsertionEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useSyncExternalStore:Ce,useId:Ce,useHostTransitionStatus:Ce,useFormState:Ce,useActionState:Ce,useOptimistic:Ce,useMemoCache:Ce,useCacheRefresh:Ce};Tl.useEffectEvent=Ce;var af={readContext:We,use:Or,useCallback:function(e,t){return tt().memoizedState=[e,t===void 0?null:t],e},useContext:We,useEffect:ko,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Mr(4194308,4,Qo.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Mr(4194308,4,e,t)},useInsertionEffect:function(e,t){Mr(4,2,e,t)},useMemo:function(e,t){var a=tt();t=t===void 0?null:t;var n=e();if(an){pa(!0);try{e()}finally{pa(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=tt();if(a!==void 0){var l=a(t);if(an){pa(!0);try{a(t)}finally{pa(!1)}}}else l=t;return n.memoizedState=n.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},n.queue=e,e=e.dispatch=J_.bind(null,W,e),[n.memoizedState,e]},useRef:function(e){var t=tt();return e={current:e},t.memoizedState=e},useState:function(e){e=qc(e);var t=e.queue,a=Io.bind(null,W,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Cc,useDeferredValue:function(e,t){var a=tt();return Oc(a,e,t)},useTransition:function(){var e=qc(!1);return e=Jo.bind(null,W,e.queue,!0,!1),tt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=W,l=tt();if(le){if(a===void 0)throw Error(s(407));a=a()}else{if(a=t(),we===null)throw Error(s(349));(ae&127)!==0||jo(n,t,a)}l.memoizedState=a;var u={value:a,getSnapshot:t};return l.queue=u,ko(To.bind(null,n,u,e),[e]),n.flags|=2048,Bn(9,{destroy:void 0},Eo.bind(null,n,u,a,t),null),a},useId:function(){var e=tt(),t=we.identifierPrefix;if(le){var a=Vt,n=Zt;a=(n&~(1<<32-ht(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Ar++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Y_++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mc,useFormState:xo,useActionState:xo,useOptimistic:function(e){var t=tt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Nc.bind(null,W,!0,a),a.dispatch=t,[e,t]},useMemoCache:jc,useCacheRefresh:function(){return tt().memoizedState=K_.bind(null,W)},useEffectEvent:function(e){var t=tt(),a={impl:e};return t.memoizedState=a,function(){if((me&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},xc={readContext:We,use:Or,useCallback:Zo,useContext:We,useEffect:Ac,useImperativeHandle:Xo,useInsertionEffect:Yo,useLayoutEffect:Go,useMemo:Vo,useReducer:zr,useRef:Ho,useState:function(){return zr(ra)},useDebugValue:Cc,useDeferredValue:function(e,t){var a=Me();return Ko(a,ve.memoizedState,e,t)},useTransition:function(){var e=zr(ra)[0],t=Me().memoizedState;return[typeof e=="boolean"?e:jl(e),t]},useSyncExternalStore:wo,useId:Fo,useHostTransitionStatus:Mc,useFormState:Ro,useActionState:Ro,useOptimistic:function(e,t){var a=Me();return Ao(a,ve,e,t)},useMemoCache:jc,useCacheRefresh:Po};xc.useEffectEvent=Lo;var nf={readContext:We,use:Or,useCallback:Zo,useContext:We,useEffect:Ac,useImperativeHandle:Xo,useInsertionEffect:Yo,useLayoutEffect:Go,useMemo:Vo,useReducer:Tc,useRef:Ho,useState:function(){return Tc(ra)},useDebugValue:Cc,useDeferredValue:function(e,t){var a=Me();return ve===null?Oc(a,e,t):Ko(a,ve.memoizedState,e,t)},useTransition:function(){var e=Tc(ra)[0],t=Me().memoizedState;return[typeof e=="boolean"?e:jl(e),t]},useSyncExternalStore:wo,useId:Fo,useHostTransitionStatus:Mc,useFormState:Bo,useActionState:Bo,useOptimistic:function(e,t){var a=Me();return ve!==null?Ao(a,ve,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jc,useCacheRefresh:Po};nf.useEffectEvent=Lo;function Rc(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:N({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Uc={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=wt(),l=Ea(n);l.payload=t,a!=null&&(l.callback=a),t=Ta(e,l,n),t!==null&&(st(t,e,n),vl(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=wt(),l=Ea(n);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=Ta(e,l,n),t!==null&&(st(t,e,n),vl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=wt(),n=Ea(a);n.tag=2,t!=null&&(n.callback=t),t=Ta(e,n,a),t!==null&&(st(t,e,a),vl(t,e,a))}};function lf(e,t,a,n,l,u,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,u,f):t.prototype&&t.prototype.isPureReactComponent?!fl(a,n)||!fl(l,u):!0}function rf(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Uc.enqueueReplaceState(t,t.state,null)}function nn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=N({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}function cf(e){dr(e)}function uf(e){console.error(e)}function sf(e){dr(e)}function Rr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function of(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Bc(e,t,a){return a=Ea(a),a.tag=3,a.payload={element:null},a.callback=function(){Rr(e,t)},a}function ff(e){return e=Ea(e),e.tag=3,e}function df(e,t,a,n){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var u=n.value;e.payload=function(){return l(u)},e.callback=function(){of(t,a,n)}}var f=a.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){of(t,a,n),typeof l!="function"&&(za===null?za=new Set([this]):za.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})})}function W_(e,t,a,n,l){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Cn(t,a,l,!0),a=yt.current,a!==null){switch(a.tag){case 31:case 13:return Nt===null?Kr():a.alternate===null&&Oe===0&&(Oe=3),a.flags&=-257,a.flags|=65536,a.lanes=l,n===wr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),uu(e,n,l)),!1;case 22:return a.flags|=65536,n===wr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),uu(e,n,l)),!1}throw Error(s(435,a.tag))}return uu(e,n,l),Kr(),!1}if(le)return t=yt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,n!==ac&&(e=Error(s(422),{cause:n}),_l(Ct(e,a)))):(n!==ac&&(t=Error(s(423),{cause:n}),_l(Ct(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,n=Ct(n,a),l=Bc(e.stateNode,n,l),mc(e,l),Oe!==4&&(Oe=2)),!1;var u=Error(s(520),{cause:n});if(u=Ct(u,a),Nl===null?Nl=[u]:Nl.push(u),Oe!==4&&(Oe=2),t===null)return!0;n=Ct(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=Bc(a.stateNode,n,e),mc(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(za===null||!za.has(u))))return a.flags|=65536,l&=-l,a.lanes|=l,l=ff(l),df(l,e,a,n),mc(a,l),!1}a=a.return}while(a!==null);return!1}var Hc=Error(s(461)),Ue=!1;function $e(e,t,a,n){t.child=e===null?ho(t,null,a,n):tn(t,e.child,a,n)}function mf(e,t,a,n,l){a=a.render;var u=t.ref;if("ref"in n){var f={};for(var m in n)m!=="ref"&&(f[m]=n[m])}else f=n;return Fa(t),n=vc(e,t,a,f,u,l),m=bc(),e!==null&&!Ue?(Sc(e,t,l),ia(e,t,l)):(le&&m&&ec(t),t.flags|=1,$e(e,t,n,l),t.child)}function _f(e,t,a,n,l){if(e===null){var u=a.type;return typeof u=="function"&&!Fi(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,hf(e,t,u,n,l)):(e=pr(a.type,null,n,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Vc(e,l)){var f=u.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(f,n)&&e.ref===t.ref)return ia(e,t,l)}return t.flags|=1,e=ea(u,n),e.ref=t.ref,e.return=t,t.child=e}function hf(e,t,a,n,l){if(e!==null){var u=e.memoizedProps;if(fl(u,n)&&e.ref===t.ref)if(Ue=!1,t.pendingProps=n=u,Vc(e,l))(e.flags&131072)!==0&&(Ue=!0);else return t.lanes=e.lanes,ia(e,t,l)}return kc(e,t,a,n,l)}function pf(e,t,a,n){var l=n.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(n=t.child=e.child,l=0;n!==null;)l=l|n.lanes|n.childLanes,n=n.sibling;n=l&~u}else n=0,t.child=null;return gf(e,t,u,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&br(t,u!==null?u.cachePool:null),u!==null?yo(t,u):hc(),vo(t);else return n=t.lanes=536870912,gf(e,t,u!==null?u.baseLanes|a:a,a,n)}else u!==null?(br(t,u.cachePool),yo(t,u),Da(),t.memoizedState=null):(e!==null&&br(t,null),hc(),Da());return $e(e,t,l,a),t.child}function ql(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gf(e,t,a,n,l){var u=sc();return u=u===null?null:{parent:xe._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&br(t,null),hc(),vo(t),e!==null&&Cn(e,t,n,!0),t.childLanes=l,null}function Ur(e,t){return t=Hr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function yf(e,t,a){return tn(t,e.child,null,a),e=Ur(t,t.pendingProps),e.flags|=2,vt(t),t.memoizedState=null,e}function $_(e,t,a){var n=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(le){if(n.mode==="hidden")return e=Ur(t,n),t.lanes=536870912,ql(null,e);if(gc(t),(e=Ee)?(e=Od(e,Mt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Zt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},a=Is(e),a.return=t,t.child=a,Je=t,Ee=null)):e=null,e===null)throw Sa(t);return t.lanes=536870912,null}return Ur(t,n)}var u=e.memoizedState;if(u!==null){var f=u.dehydrated;if(gc(t),l)if(t.flags&256)t.flags&=-257,t=yf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Ue||Cn(e,t,a,!1),l=(a&e.childLanes)!==0,Ue||l){if(n=we,n!==null&&(f=is(n,a),f!==0&&f!==u.retryLane))throw u.retryLane=f,Ka(e,f),st(n,e,f),Hc;Kr(),t=yf(e,t,a)}else e=u.treeContext,Ee=xt(f.nextSibling),Je=t,le=!0,ba=null,Mt=!1,e!==null&&ao(t,e),t=Ur(t,n),t.flags|=4096;return t}return e=ea(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Br(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function kc(e,t,a,n,l){return Fa(t),a=vc(e,t,a,n,void 0,l),n=bc(),e!==null&&!Ue?(Sc(e,t,l),ia(e,t,l)):(le&&n&&ec(t),t.flags|=1,$e(e,t,a,l),t.child)}function vf(e,t,a,n,l,u){return Fa(t),t.updateQueue=null,a=So(t,n,a,l),bo(e),n=bc(),e!==null&&!Ue?(Sc(e,t,u),ia(e,t,u)):(le&&n&&ec(t),t.flags|=1,$e(e,t,a,u),t.child)}function bf(e,t,a,n,l){if(Fa(t),t.stateNode===null){var u=Tn,f=a.contextType;typeof f=="object"&&f!==null&&(u=We(f)),u=new a(n,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Uc,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=n,u.state=t.memoizedState,u.refs={},fc(t),f=a.contextType,u.context=typeof f=="object"&&f!==null?We(f):Tn,u.state=t.memoizedState,f=a.getDerivedStateFromProps,typeof f=="function"&&(Rc(t,a,f,n),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(f=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),f!==u.state&&Uc.enqueueReplaceState(u,u.state,null),Sl(t,n,u,l),bl(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){u=t.stateNode;var m=t.memoizedProps,y=nn(a,m);u.props=y;var E=u.context,D=a.contextType;f=Tn,typeof D=="object"&&D!==null&&(f=We(D));var O=a.getDerivedStateFromProps;D=typeof O=="function"||typeof u.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,D||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m||E!==f)&&rf(t,u,n,f),ja=!1;var T=t.memoizedState;u.state=T,Sl(t,n,u,l),bl(),E=t.memoizedState,m||T!==E||ja?(typeof O=="function"&&(Rc(t,a,O,n),E=t.memoizedState),(y=ja||lf(t,a,y,n,T,E,f))?(D||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=E),u.props=n,u.state=E,u.context=f,n=y):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,dc(e,t),f=t.memoizedProps,D=nn(a,f),u.props=D,O=t.pendingProps,T=u.context,E=a.contextType,y=Tn,typeof E=="object"&&E!==null&&(y=We(E)),m=a.getDerivedStateFromProps,(E=typeof m=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==O||T!==y)&&rf(t,u,n,y),ja=!1,T=t.memoizedState,u.state=T,Sl(t,n,u,l),bl();var q=t.memoizedState;f!==O||T!==q||ja||e!==null&&e.dependencies!==null&&yr(e.dependencies)?(typeof m=="function"&&(Rc(t,a,m,n),q=t.memoizedState),(D=ja||lf(t,a,D,n,T,q,y)||e!==null&&e.dependencies!==null&&yr(e.dependencies))?(E||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,q,y),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,q,y)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=q),u.props=n,u.state=q,u.context=y,n=D):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),n=!1)}return u=n,Br(e,t),n=(t.flags&128)!==0,u||n?(u=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&n?(t.child=tn(t,e.child,null,l),t.child=tn(t,null,a,l)):$e(e,t,a,l),t.memoizedState=u.state,e=t.child):e=ia(e,t,l),e}function Sf(e,t,a,n){return Wa(),t.flags|=256,$e(e,t,a,n),t.child}var Lc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yc(e){return{baseLanes:e,cachePool:uo()}}function Gc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=St),e}function wf(e,t,a){var n=t.pendingProps,l=!1,u=(t.flags&128)!==0,f;if((f=u)||(f=e!==null&&e.memoizedState===null?!1:(ze.current&2)!==0),f&&(l=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(le){if(l?qa(t):Da(),(e=Ee)?(e=Od(e,Mt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Zt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},a=Is(e),a.return=t,t.child=a,Je=t,Ee=null)):e=null,e===null)throw Sa(t);return Eu(e)?t.lanes=32:t.lanes=536870912,null}var m=n.children;return n=n.fallback,l?(Da(),l=t.mode,m=Hr({mode:"hidden",children:m},l),n=Ja(n,l,a,null),m.return=t,n.return=t,m.sibling=n,t.child=m,n=t.child,n.memoizedState=Yc(a),n.childLanes=Gc(e,f,a),t.memoizedState=Lc,ql(null,n)):(qa(t),Qc(t,m))}var y=e.memoizedState;if(y!==null&&(m=y.dehydrated,m!==null)){if(u)t.flags&256?(qa(t),t.flags&=-257,t=Xc(e,t,a)):t.memoizedState!==null?(Da(),t.child=e.child,t.flags|=128,t=null):(Da(),m=n.fallback,l=t.mode,n=Hr({mode:"visible",children:n.children},l),m=Ja(m,l,a,null),m.flags|=2,n.return=t,m.return=t,n.sibling=m,t.child=n,tn(t,e.child,null,a),n=t.child,n.memoizedState=Yc(a),n.childLanes=Gc(e,f,a),t.memoizedState=Lc,t=ql(null,n));else if(qa(t),Eu(m)){if(f=m.nextSibling&&m.nextSibling.dataset,f)var E=f.dgst;f=E,n=Error(s(419)),n.stack="",n.digest=f,_l({value:n,source:null,stack:null}),t=Xc(e,t,a)}else if(Ue||Cn(e,t,a,!1),f=(a&e.childLanes)!==0,Ue||f){if(f=we,f!==null&&(n=is(f,a),n!==0&&n!==y.retryLane))throw y.retryLane=n,Ka(e,n),st(f,e,n),Hc;ju(m)||Kr(),t=Xc(e,t,a)}else ju(m)?(t.flags|=192,t.child=e.child,t=null):(e=y.treeContext,Ee=xt(m.nextSibling),Je=t,le=!0,ba=null,Mt=!1,e!==null&&ao(t,e),t=Qc(t,n.children),t.flags|=4096);return t}return l?(Da(),m=n.fallback,l=t.mode,y=e.child,E=y.sibling,n=ea(y,{mode:"hidden",children:n.children}),n.subtreeFlags=y.subtreeFlags&65011712,E!==null?m=ea(E,m):(m=Ja(m,l,a,null),m.flags|=2),m.return=t,n.return=t,n.sibling=m,t.child=n,ql(null,n),n=t.child,m=e.child.memoizedState,m===null?m=Yc(a):(l=m.cachePool,l!==null?(y=xe._currentValue,l=l.parent!==y?{parent:y,pool:y}:l):l=uo(),m={baseLanes:m.baseLanes|a,cachePool:l}),n.memoizedState=m,n.childLanes=Gc(e,f,a),t.memoizedState=Lc,ql(e.child,n)):(qa(t),a=e.child,e=a.sibling,a=ea(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=a,t.memoizedState=null,a)}function Qc(e,t){return t=Hr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Hr(e,t){return e=gt(22,e,null,t),e.lanes=0,e}function Xc(e,t,a){return tn(t,e.child,null,a),e=Qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jf(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rc(e.return,t,a)}function Zc(e,t,a,n,l,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:l,treeForkCount:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=n,f.tail=a,f.tailMode=l,f.treeForkCount=u)}function Ef(e,t,a){var n=t.pendingProps,l=n.revealOrder,u=n.tail;n=n.children;var f=ze.current,m=(f&2)!==0;if(m?(f=f&1|2,t.flags|=128):f&=1,z(ze,f),$e(e,t,n,a),n=le?ml:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jf(e,a,t);else if(e.tag===19)jf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&qr(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),Zc(t,!1,l,a,u,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&qr(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}Zc(t,!0,a,null,u,n);break;case"together":Zc(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function ia(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Oa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Cn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,a=ea(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ea(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Vc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&yr(e)))}function F_(e,t,a){switch(t.tag){case 3:qe(t,t.stateNode.containerInfo),wa(t,xe,e.memoizedState.cache),Wa();break;case 27:case 5:Ve(t);break;case 4:qe(t,t.stateNode.containerInfo);break;case 10:wa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,gc(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(qa(t),t.flags|=128,null):(a&t.child.childLanes)!==0?wf(e,t,a):(qa(t),e=ia(e,t,a),e!==null?e.sibling:null);qa(t);break;case 19:var l=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Cn(e,t,a,!1),n=(a&t.childLanes)!==0),l){if(n)return Ef(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),z(ze,ze.current),n)break;return null;case 22:return t.lanes=0,pf(e,t,a,t.pendingProps);case 24:wa(t,xe,e.memoizedState.cache)}return ia(e,t,a)}function Tf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ue=!0;else{if(!Vc(e,a)&&(t.flags&128)===0)return Ue=!1,F_(e,t,a);Ue=(e.flags&131072)!==0}else Ue=!1,le&&(t.flags&1048576)!==0&&to(t,ml,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=Ia(t.elementType),t.type=e,typeof e=="function")Fi(e)?(n=nn(e,n),t.tag=1,t=bf(null,t,e,n,a)):(t.tag=0,t=kc(null,t,e,n,a));else{if(e!=null){var l=e.$$typeof;if(l===J){t.tag=11,t=mf(null,t,e,n,a);break e}else if(l===Pe){t.tag=14,t=_f(null,t,e,n,a);break e}}throw t=Xt(e)||e,Error(s(306,t,""))}}return t;case 0:return kc(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,l=nn(n,t.pendingProps),bf(e,t,n,l,a);case 3:e:{if(qe(t,t.stateNode.containerInfo),e===null)throw Error(s(387));n=t.pendingProps;var u=t.memoizedState;l=u.element,dc(e,t),Sl(t,n,null,a);var f=t.memoizedState;if(n=f.cache,wa(t,xe,n),n!==u.cache&&ic(t,[xe],a,!0),bl(),n=f.element,u.isDehydrated)if(u={element:n,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Sf(e,t,n,a);break e}else if(n!==l){l=Ct(Error(s(424)),t),_l(l),t=Sf(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ee=xt(e.firstChild),Je=t,le=!0,ba=null,Mt=!0,a=ho(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Wa(),n===l){t=ia(e,t,a);break e}$e(e,t,n,a)}t=t.child}return t;case 26:return Br(e,t),e===null?(a=Ud(t.type,null,t.pendingProps,null))?t.memoizedState=a:le||(a=t.type,e=t.pendingProps,n=ei(Q.current).createElement(a),n[Ke]=t,n[nt]=e,Fe(n,a,e),Qe(n),t.stateNode=n):t.memoizedState=Ud(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ve(t),e===null&&le&&(n=t.stateNode=Nd(t.type,t.pendingProps,Q.current),Je=t,Mt=!0,l=Ee,Ra(t.type)?(Tu=l,Ee=xt(n.firstChild)):Ee=l),$e(e,t,t.pendingProps.children,a),Br(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&le&&((l=n=Ee)&&(n=Dh(n,t.type,t.pendingProps,Mt),n!==null?(t.stateNode=n,Je=t,Ee=xt(n.firstChild),Mt=!1,l=!0):l=!1),l||Sa(t)),Ve(t),l=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,n=u.children,bu(l,u)?n=null:f!==null&&bu(l,f)&&(t.flags|=32),t.memoizedState!==null&&(l=vc(e,t,G_,null,null,a),Yl._currentValue=l),Br(e,t),$e(e,t,n,a),t.child;case 6:return e===null&&le&&((e=a=Ee)&&(a=Ah(a,t.pendingProps,Mt),a!==null?(t.stateNode=a,Je=t,Ee=null,e=!0):e=!1),e||Sa(t)),null;case 13:return wf(e,t,a);case 4:return qe(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=tn(t,null,n,a):$e(e,t,n,a),t.child;case 11:return mf(e,t,t.type,t.pendingProps,a);case 7:return $e(e,t,t.pendingProps,a),t.child;case 8:return $e(e,t,t.pendingProps.children,a),t.child;case 12:return $e(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,wa(t,t.type,n.value),$e(e,t,n.children,a),t.child;case 9:return l=t.type._context,n=t.pendingProps.children,Fa(t),l=We(l),n=n(l),t.flags|=1,$e(e,t,n,a),t.child;case 14:return _f(e,t,t.type,t.pendingProps,a);case 15:return hf(e,t,t.type,t.pendingProps,a);case 19:return Ef(e,t,a);case 31:return $_(e,t,a);case 22:return pf(e,t,a,t.pendingProps);case 24:return Fa(t),n=We(xe),e===null?(l=sc(),l===null&&(l=we,u=cc(),l.pooledCache=u,u.refCount++,u!==null&&(l.pooledCacheLanes|=a),l=u),t.memoizedState={parent:n,cache:l},fc(t),wa(t,xe,l)):((e.lanes&a)!==0&&(dc(e,t),Sl(t,null,null,a),bl()),l=e.memoizedState,u=t.memoizedState,l.parent!==n?(l={parent:n,cache:n},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),wa(t,xe,n)):(n=u.cache,wa(t,xe,n),n!==l.cache&&ic(t,[xe],a,!0))),$e(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function ca(e){e.flags|=4}function Kc(e,t,a,n,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Pf())e.flags|=8192;else throw en=wr,oc}else e.flags&=-16777217}function qf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yd(t))if(Pf())e.flags|=8192;else throw en=wr,oc}function kr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ns():536870912,e.lanes|=t,Yn|=t)}function Dl(e,t){if(!le)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Te(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function P_(e,t,a){var n=t.pendingProps;switch(tc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(t),null;case 1:return Te(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),na(xe),Ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(An(t)?ca(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,nc())),Te(t),null;case 26:var l=t.type,u=t.memoizedState;return e===null?(ca(t),u!==null?(Te(t),qf(t,u)):(Te(t),Kc(t,l,null,n,a))):u?u!==e.memoizedState?(ca(t),Te(t),qf(t,u)):(Te(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&ca(t),Te(t),Kc(t,l,e,n,a)),null;case 27:if(et(t),a=Q.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(!n){if(t.stateNode===null)throw Error(s(166));return Te(t),null}e=P.current,An(t)?no(t):(e=Nd(l,n,a),t.stateNode=e,ca(t))}return Te(t),null;case 5:if(et(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(!n){if(t.stateNode===null)throw Error(s(166));return Te(t),null}if(u=P.current,An(t))no(t);else{var f=ei(Q.current);switch(u){case 1:u=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:u=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":u=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":u=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":u=f.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof n.is=="string"?f.createElement("select",{is:n.is}):f.createElement("select"),n.multiple?u.multiple=!0:n.size&&(u.size=n.size);break;default:u=typeof n.is=="string"?f.createElement(l,{is:n.is}):f.createElement(l)}}u[Ke]=t,u[nt]=n;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)u.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=u;e:switch(Fe(u,l,n),l){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ca(t)}}return Te(t),Kc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(s(166));if(e=Q.current,An(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,l=Je,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}e[Ke]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||wd(e.nodeValue,a)),e||Sa(t,!0)}else e=ei(e).createTextNode(n),e[Ke]=t,t.stateNode=e}return Te(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=An(t),a!==null){if(e===null){if(!n)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ke]=t}else Wa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Te(t),e=!1}else a=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(vt(t),t):(vt(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Te(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=An(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(s(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));l[Ke]=t}else Wa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Te(t),l=!1}else l=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(vt(t),t):(vt(t),null)}return vt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool),u=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),u!==l&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),kr(t,t.updateQueue),Te(t),null);case 4:return Ae(),e===null&&hu(t.stateNode.containerInfo),Te(t),null;case 10:return na(t.type),Te(t),null;case 19:if(ye(ze),n=t.memoizedState,n===null)return Te(t),null;if(l=(t.flags&128)!==0,u=n.rendering,u===null)if(l)Dl(n,!1);else{if(Oe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=qr(e),u!==null){for(t.flags|=128,Dl(n,!1),e=u.updateQueue,t.updateQueue=e,kr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Ps(a,e),a=a.sibling;return z(ze,ze.current&1|2),le&&ta(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&mt()>Xr&&(t.flags|=128,l=!0,Dl(n,!1),t.lanes=4194304)}else{if(!l)if(e=qr(u),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,kr(t,e),Dl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!u.alternate&&!le)return Te(t),null}else 2*mt()-n.renderingStartTime>Xr&&a!==536870912&&(t.flags|=128,l=!0,Dl(n,!1),t.lanes=4194304);n.isBackwards?(u.sibling=t.child,t.child=u):(e=n.last,e!==null?e.sibling=u:t.child=u,n.last=u)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=mt(),e.sibling=null,a=ze.current,z(ze,l?a&1|2:a&1),le&&ta(t,n.treeForkCount),e):(Te(t),null);case 22:case 23:return vt(t),pc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Te(t),t.subtreeFlags&6&&(t.flags|=8192)):Te(t),a=t.updateQueue,a!==null&&kr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&ye(Pa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),na(xe),Te(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function I_(e,t){switch(tc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return na(xe),Ae(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return et(t),null;case 31:if(t.memoizedState!==null){if(vt(t),t.alternate===null)throw Error(s(340));Wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(vt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(ze),null;case 4:return Ae(),null;case 10:return na(t.type),null;case 22:case 23:return vt(t),pc(),e!==null&&ye(Pa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return na(xe),null;case 25:return null;default:return null}}function Df(e,t){switch(tc(t),t.tag){case 3:na(xe),Ae();break;case 26:case 27:case 5:et(t);break;case 4:Ae();break;case 31:t.memoizedState!==null&&vt(t);break;case 13:vt(t);break;case 19:ye(ze);break;case 10:na(t.type);break;case 22:case 23:vt(t),pc(),e!==null&&ye(Pa);break;case 24:na(xe)}}function Al(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var l=n.next;a=l;do{if((a.tag&e)===e){n=void 0;var u=a.create,f=a.inst;n=u(),f.destroy=n}a=a.next}while(a!==l)}}catch(m){ge(t,t.return,m)}}function Aa(e,t,a){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var u=l.next;n=u;do{if((n.tag&e)===e){var f=n.inst,m=f.destroy;if(m!==void 0){f.destroy=void 0,l=t;var y=a,E=m;try{E()}catch(D){ge(l,y,D)}}}n=n.next}while(n!==u)}}catch(D){ge(t,t.return,D)}}function Af(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{go(t,a)}catch(n){ge(e,e.return,n)}}}function Cf(e,t,a){a.props=nn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){ge(e,t,n)}}function Cl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(l){ge(e,t,l)}}function Kt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(l){ge(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){ge(e,t,l)}else a.current=null}function Of(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(l){ge(e,e.return,l)}}function Jc(e,t,a){try{var n=e.stateNode;Sh(n,e.type,a,t),n[nt]=t}catch(l){ge(e,e.return,l)}}function zf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ra(e.type)||e.tag===4}function Wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ra(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $c(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Pt));else if(n!==4&&(n===27&&Ra(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for($c(e,t,a),e=e.sibling;e!==null;)$c(e,t,a),e=e.sibling}function Lr(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Ra(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Lr(e,t,a),e=e.sibling;e!==null;)Lr(e,t,a),e=e.sibling}function Mf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);Fe(t,n,a),t[Ke]=e,t[nt]=a}catch(u){ge(e,e.return,u)}}var ua=!1,Be=!1,Fc=!1,Nf=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function eh(e,t){if(e=e.containerInfo,yu=ci,e=Qs(e),Xi(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var l=n.anchorOffset,u=n.focusNode;n=n.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var f=0,m=-1,y=-1,E=0,D=0,O=e,T=null;t:for(;;){for(var q;O!==a||l!==0&&O.nodeType!==3||(m=f+l),O!==u||n!==0&&O.nodeType!==3||(y=f+n),O.nodeType===3&&(f+=O.nodeValue.length),(q=O.firstChild)!==null;)T=O,O=q;for(;;){if(O===e)break t;if(T===a&&++E===l&&(m=f),T===u&&++D===n&&(y=f),(q=O.nextSibling)!==null)break;O=T,T=O.parentNode}O=q}a=m===-1||y===-1?null:{start:m,end:y}}else a=null}a=a||{start:0,end:0}}else a=null;for(vu={focusedElem:e,selectionRange:a},ci=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){switch(t=Xe,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)l=e[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,l=u.memoizedProps,u=u.memoizedState,n=a.stateNode;try{var k=nn(a.type,l);e=n.getSnapshotBeforeUpdate(k,u),n.__reactInternalSnapshotBeforeUpdate=e}catch(K){ge(a,a.return,K)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)wu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":wu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}}function xf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:oa(e,a),n&4&&Al(5,a);break;case 1:if(oa(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(f){ge(a,a.return,f)}else{var l=nn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){ge(a,a.return,f)}}n&64&&Af(a),n&512&&Cl(a,a.return);break;case 3:if(oa(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{go(e,t)}catch(f){ge(a,a.return,f)}}break;case 27:t===null&&n&4&&Mf(a);case 26:case 5:oa(e,a),t===null&&n&4&&Of(a),n&512&&Cl(a,a.return);break;case 12:oa(e,a);break;case 31:oa(e,a),n&4&&Bf(e,a);break;case 13:oa(e,a),n&4&&Hf(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=sh.bind(null,a),Ch(e,a))));break;case 22:if(n=a.memoizedState!==null||ua,!n){t=t!==null&&t.memoizedState!==null||Be,l=ua;var u=Be;ua=n,(Be=t)&&!u?fa(e,a,(a.subtreeFlags&8772)!==0):oa(e,a),ua=l,Be=u}break;case 30:break;default:oa(e,a)}}function Rf(e){var t=e.alternate;t!==null&&(e.alternate=null,Rf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Di(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var De=null,rt=!1;function sa(e,t,a){for(a=a.child;a!==null;)Uf(e,t,a),a=a.sibling}function Uf(e,t,a){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(In,a)}catch{}switch(a.tag){case 26:Be||Kt(a,t),sa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Be||Kt(a,t);var n=De,l=rt;Ra(a.type)&&(De=a.stateNode,rt=!1),sa(e,t,a),Hl(a.stateNode),De=n,rt=l;break;case 5:Be||Kt(a,t);case 6:if(n=De,l=rt,De=null,sa(e,t,a),De=n,rt=l,De!==null)if(rt)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(a.stateNode)}catch(u){ge(a,t,u)}else try{De.removeChild(a.stateNode)}catch(u){ge(a,t,u)}break;case 18:De!==null&&(rt?(e=De,Ad(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Wn(e)):Ad(De,a.stateNode));break;case 4:n=De,l=rt,De=a.stateNode.containerInfo,rt=!0,sa(e,t,a),De=n,rt=l;break;case 0:case 11:case 14:case 15:Aa(2,a,t),Be||Aa(4,a,t),sa(e,t,a);break;case 1:Be||(Kt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Cf(a,t,n)),sa(e,t,a);break;case 21:sa(e,t,a);break;case 22:Be=(n=Be)||a.memoizedState!==null,sa(e,t,a),Be=n;break;default:sa(e,t,a)}}function Bf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Wn(e)}catch(a){ge(t,t.return,a)}}}function Hf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wn(e)}catch(a){ge(t,t.return,a)}}function th(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Nf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Nf),t;default:throw Error(s(435,e.tag))}}function Yr(e,t){var a=th(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var l=oh.bind(null,e,n);n.then(l,l)}})}function it(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var l=a[n],u=e,f=t,m=f;e:for(;m!==null;){switch(m.tag){case 27:if(Ra(m.type)){De=m.stateNode,rt=!1;break e}break;case 5:De=m.stateNode,rt=!1;break e;case 3:case 4:De=m.stateNode.containerInfo,rt=!0;break e}m=m.return}if(De===null)throw Error(s(160));Uf(u,f,l),De=null,rt=!1,u=l.alternate,u!==null&&(u.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)kf(t,e),t=t.sibling}var Yt=null;function kf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:it(t,e),ct(e),n&4&&(Aa(3,e,e.return),Al(3,e),Aa(5,e,e.return));break;case 1:it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),n&64&&ua&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var l=Yt;if(it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),n&4){var u=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(n){case"title":u=l.getElementsByTagName("title")[0],(!u||u[al]||u[Ke]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=l.createElement(n),l.head.insertBefore(u,l.querySelector("head > title"))),Fe(u,n,a),u[Ke]=e,Qe(u),n=u;break e;case"link":var f=kd("link","href",l).get(n+(a.href||""));if(f){for(var m=0;m<f.length;m++)if(u=f[m],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){f.splice(m,1);break t}}u=l.createElement(n),Fe(u,n,a),l.head.appendChild(u);break;case"meta":if(f=kd("meta","content",l).get(n+(a.content||""))){for(m=0;m<f.length;m++)if(u=f[m],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){f.splice(m,1);break t}}u=l.createElement(n),Fe(u,n,a),l.head.appendChild(u);break;default:throw Error(s(468,n))}u[Ke]=e,Qe(u),n=u}e.stateNode=n}else Ld(l,e.type,e.stateNode);else e.stateNode=Hd(l,n,e.memoizedProps);else u!==n?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,n===null?Ld(l,e.type,e.stateNode):Hd(l,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Jc(e,e.memoizedProps,a.memoizedProps)}break;case 27:it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),a!==null&&n&4&&Jc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),e.flags&32){l=e.stateNode;try{yn(l,"")}catch(k){ge(e,e.return,k)}}n&4&&e.stateNode!=null&&(l=e.memoizedProps,Jc(e,l,a!==null?a.memoizedProps:l)),n&1024&&(Fc=!0);break;case 6:if(it(t,e),ct(e),n&4){if(e.stateNode===null)throw Error(s(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(k){ge(e,e.return,k)}}break;case 3:if(ni=null,l=Yt,Yt=ti(t.containerInfo),it(t,e),Yt=l,ct(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Wn(t.containerInfo)}catch(k){ge(e,e.return,k)}Fc&&(Fc=!1,Lf(e));break;case 4:n=Yt,Yt=ti(e.stateNode.containerInfo),it(t,e),ct(e),Yt=n;break;case 12:it(t,e),ct(e);break;case 31:it(t,e),ct(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Yr(e,n)));break;case 13:it(t,e),ct(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qr=mt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Yr(e,n)));break;case 22:l=e.memoizedState!==null;var y=a!==null&&a.memoizedState!==null,E=ua,D=Be;if(ua=E||l,Be=D||y,it(t,e),Be=D,ua=E,ct(e),n&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||y||ua||Be||ln(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){y=a=t;try{if(u=y.stateNode,l)f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{m=y.stateNode;var O=y.memoizedProps.style,T=O!=null&&O.hasOwnProperty("display")?O.display:null;m.style.display=T==null||typeof T=="boolean"?"":(""+T).trim()}}catch(k){ge(y,y.return,k)}}}else if(t.tag===6){if(a===null){y=t;try{y.stateNode.nodeValue=l?"":y.memoizedProps}catch(k){ge(y,y.return,k)}}}else if(t.tag===18){if(a===null){y=t;try{var q=y.stateNode;l?Cd(q,!0):Cd(y.stateNode,!1)}catch(k){ge(y,y.return,k)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Yr(e,a))));break;case 19:it(t,e),ct(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Yr(e,n)));break;case 30:break;case 21:break;default:it(t,e),ct(e)}}function ct(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(zf(n)){a=n;break}n=n.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var l=a.stateNode,u=Wc(e);Lr(e,u,l);break;case 5:var f=a.stateNode;a.flags&32&&(yn(f,""),a.flags&=-33);var m=Wc(e);Lr(e,m,f);break;case 3:case 4:var y=a.stateNode.containerInfo,E=Wc(e);$c(e,E,y);break;default:throw Error(s(161))}}catch(D){ge(e,e.return,D)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Lf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function oa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xf(e,t.alternate,t),t=t.sibling}function ln(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Aa(4,t,t.return),ln(t);break;case 1:Kt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Cf(t,t.return,a),ln(t);break;case 27:Hl(t.stateNode);case 26:case 5:Kt(t,t.return),ln(t);break;case 22:t.memoizedState===null&&ln(t);break;case 30:ln(t);break;default:ln(t)}e=e.sibling}}function fa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,l=e,u=t,f=u.flags;switch(u.tag){case 0:case 11:case 15:fa(l,u,a),Al(4,u);break;case 1:if(fa(l,u,a),n=u,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(E){ge(n,n.return,E)}if(n=u,l=n.updateQueue,l!==null){var m=n.stateNode;try{var y=l.shared.hiddenCallbacks;if(y!==null)for(l.shared.hiddenCallbacks=null,l=0;l<y.length;l++)po(y[l],m)}catch(E){ge(n,n.return,E)}}a&&f&64&&Af(u),Cl(u,u.return);break;case 27:Mf(u);case 26:case 5:fa(l,u,a),a&&n===null&&f&4&&Of(u),Cl(u,u.return);break;case 12:fa(l,u,a);break;case 31:fa(l,u,a),a&&f&4&&Bf(l,u);break;case 13:fa(l,u,a),a&&f&4&&Hf(l,u);break;case 22:u.memoizedState===null&&fa(l,u,a),Cl(u,u.return);break;case 30:break;default:fa(l,u,a)}t=t.sibling}}function Pc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&hl(a))}function Ic(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hl(e))}function Gt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yf(e,t,a,n),t=t.sibling}function Yf(e,t,a,n){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Gt(e,t,a,n),l&2048&&Al(9,t);break;case 1:Gt(e,t,a,n);break;case 3:Gt(e,t,a,n),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hl(e)));break;case 12:if(l&2048){Gt(e,t,a,n),e=t.stateNode;try{var u=t.memoizedProps,f=u.id,m=u.onPostCommit;typeof m=="function"&&m(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(y){ge(t,t.return,y)}}else Gt(e,t,a,n);break;case 31:Gt(e,t,a,n);break;case 13:Gt(e,t,a,n);break;case 23:break;case 22:u=t.stateNode,f=t.alternate,t.memoizedState!==null?u._visibility&2?Gt(e,t,a,n):Ol(e,t):u._visibility&2?Gt(e,t,a,n):(u._visibility|=2,Hn(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Pc(f,t);break;case 24:Gt(e,t,a,n),l&2048&&Ic(t.alternate,t);break;default:Gt(e,t,a,n)}}function Hn(e,t,a,n,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,f=t,m=a,y=n,E=f.flags;switch(f.tag){case 0:case 11:case 15:Hn(u,f,m,y,l),Al(8,f);break;case 23:break;case 22:var D=f.stateNode;f.memoizedState!==null?D._visibility&2?Hn(u,f,m,y,l):Ol(u,f):(D._visibility|=2,Hn(u,f,m,y,l)),l&&E&2048&&Pc(f.alternate,f);break;case 24:Hn(u,f,m,y,l),l&&E&2048&&Ic(f.alternate,f);break;default:Hn(u,f,m,y,l)}t=t.sibling}}function Ol(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,l=n.flags;switch(n.tag){case 22:Ol(a,n),l&2048&&Pc(n.alternate,n);break;case 24:Ol(a,n),l&2048&&Ic(n.alternate,n);break;default:Ol(a,n)}t=t.sibling}}var zl=8192;function kn(e,t,a){if(e.subtreeFlags&zl)for(e=e.child;e!==null;)Gf(e,t,a),e=e.sibling}function Gf(e,t,a){switch(e.tag){case 26:kn(e,t,a),e.flags&zl&&e.memoizedState!==null&&Yh(a,Yt,e.memoizedState,e.memoizedProps);break;case 5:kn(e,t,a);break;case 3:case 4:var n=Yt;Yt=ti(e.stateNode.containerInfo),kn(e,t,a),Yt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=zl,zl=16777216,kn(e,t,a),zl=n):kn(e,t,a));break;default:kn(e,t,a)}}function Qf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Ml(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Xe=n,Zf(n,e)}Qf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xf(e),e=e.sibling}function Xf(e){switch(e.tag){case 0:case 11:case 15:Ml(e),e.flags&2048&&Aa(9,e,e.return);break;case 3:Ml(e);break;case 12:Ml(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Gr(e)):Ml(e);break;default:Ml(e)}}function Gr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Xe=n,Zf(n,e)}Qf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Aa(8,t,t.return),Gr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Gr(t));break;default:Gr(t)}e=e.sibling}}function Zf(e,t){for(;Xe!==null;){var a=Xe;switch(a.tag){case 0:case 11:case 15:Aa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:hl(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Xe=n;else e:for(a=e;Xe!==null;){n=Xe;var l=n.sibling,u=n.return;if(Rf(n),n===a){Xe=null;break e}if(l!==null){l.return=u,Xe=l;break e}Xe=u}}}var ah={getCacheForType:function(e){var t=We(xe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return We(xe).controller.signal}},nh=typeof WeakMap=="function"?WeakMap:Map,me=0,we=null,ee=null,ae=0,pe=0,bt=null,Ca=!1,Ln=!1,eu=!1,da=0,Oe=0,Oa=0,rn=0,tu=0,St=0,Yn=0,Nl=null,ut=null,au=!1,Qr=0,Vf=0,Xr=1/0,Zr=null,za=null,Le=0,Ma=null,Gn=null,ma=0,nu=0,lu=null,Kf=null,xl=0,ru=null;function wt(){return(me&2)!==0&&ae!==0?ae&-ae:A.T!==null?fu():cs()}function Jf(){if(St===0)if((ae&536870912)===0||le){var e=Il;Il<<=1,(Il&3932160)===0&&(Il=262144),St=e}else St=536870912;return e=yt.current,e!==null&&(e.flags|=32),St}function st(e,t,a){(e===we&&(pe===2||pe===9)||e.cancelPendingCommit!==null)&&(Qn(e,0),Na(e,ae,St,!1)),tl(e,a),((me&2)===0||e!==we)&&(e===we&&((me&2)===0&&(rn|=a),Oe===4&&Na(e,ae,St,!1)),Jt(e))}function Wf(e,t,a){if((me&6)!==0)throw Error(s(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||el(e,t),l=n?ih(e,t):cu(e,t,!0),u=n;do{if(l===0){Ln&&!n&&Na(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!lh(a)){l=cu(e,t,!1),u=!1;continue}if(l===2){if(u=t,e.errorRecoveryDisabledLanes&u)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var m=e;l=Nl;var y=m.current.memoizedState.isDehydrated;if(y&&(Qn(m,f).flags|=256),f=cu(m,f,!1),f!==2){if(eu&&!y){m.errorRecoveryDisabledLanes|=u,rn|=u,l=4;break e}u=ut,ut=l,u!==null&&(ut===null?ut=u:ut.push.apply(ut,u))}l=f}if(u=!1,l!==2)continue}}if(l===1){Qn(e,0),Na(e,t,0,!0);break}e:{switch(n=e,u=l,u){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Na(n,t,St,!Ca);break e;case 2:ut=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(l=Qr+300-mt(),10<l)){if(Na(n,t,St,!Ca),tr(n,0,!0)!==0)break e;ma=t,n.timeoutHandle=qd($f.bind(null,n,a,ut,Zr,au,t,St,rn,Yn,Ca,u,"Throttled",-0,0),l);break e}$f(n,a,ut,Zr,au,t,St,rn,Yn,Ca,u,null,-0,0)}}break}while(!0);Jt(e)}function $f(e,t,a,n,l,u,f,m,y,E,D,O,T,q){if(e.timeoutHandle=-1,O=t.subtreeFlags,O&8192||(O&16785408)===16785408){O={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt},Gf(t,u,O);var k=(u&62914560)===u?Qr-mt():(u&4194048)===u?Vf-mt():0;if(k=Gh(O,k),k!==null){ma=u,e.cancelPendingCommit=k(ld.bind(null,e,t,u,a,n,l,f,m,y,D,O,null,T,q)),Na(e,u,f,!E);return}}ld(e,t,u,a,n,l,f,m,y)}function lh(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var l=a[n],u=l.getSnapshot;l=l.value;try{if(!pt(u(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Na(e,t,a,n){t&=~tu,t&=~rn,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var l=t;0<l;){var u=31-ht(l),f=1<<u;n[u]=-1,l&=~f}a!==0&&ls(e,a,t)}function Vr(){return(me&6)===0?(Rl(0),!1):!0}function iu(){if(ee!==null){if(pe===0)var e=ee.return;else e=ee,aa=$a=null,wc(e),Nn=null,gl=0,e=ee;for(;e!==null;)Df(e.alternate,e),e=e.return;ee=null}}function Qn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Eh(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ma=0,iu(),we=e,ee=a=ea(e.current,null),ae=t,pe=0,bt=null,Ca=!1,Ln=el(e,t),eu=!1,Yn=St=tu=rn=Oa=Oe=0,ut=Nl=null,au=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var l=31-ht(n),u=1<<l;t|=e[l],n&=~u}return da=t,mr(),a}function Ff(e,t){W=null,A.H=Tl,t===Mn||t===Sr?(t=fo(),pe=3):t===oc?(t=fo(),pe=4):pe=t===Hc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,bt=t,ee===null&&(Oe=1,Rr(e,Ct(t,e.current)))}function Pf(){var e=yt.current;return e===null?!0:(ae&4194048)===ae?Nt===null:(ae&62914560)===ae||(ae&536870912)!==0?e===Nt:!1}function If(){var e=A.H;return A.H=Tl,e===null?Tl:e}function ed(){var e=A.A;return A.A=ah,e}function Kr(){Oe=4,Ca||(ae&4194048)!==ae&&yt.current!==null||(Ln=!0),(Oa&134217727)===0&&(rn&134217727)===0||we===null||Na(we,ae,St,!1)}function cu(e,t,a){var n=me;me|=2;var l=If(),u=ed();(we!==e||ae!==t)&&(Zr=null,Qn(e,t)),t=!1;var f=Oe;e:do try{if(pe!==0&&ee!==null){var m=ee,y=bt;switch(pe){case 8:iu(),f=6;break e;case 3:case 2:case 9:case 6:yt.current===null&&(t=!0);var E=pe;if(pe=0,bt=null,Xn(e,m,y,E),a&&Ln){f=0;break e}break;default:E=pe,pe=0,bt=null,Xn(e,m,y,E)}}rh(),f=Oe;break}catch(D){Ff(e,D)}while(!0);return t&&e.shellSuspendCounter++,aa=$a=null,me=n,A.H=l,A.A=u,ee===null&&(we=null,ae=0,mr()),f}function rh(){for(;ee!==null;)td(ee)}function ih(e,t){var a=me;me|=2;var n=If(),l=ed();we!==e||ae!==t?(Zr=null,Xr=mt()+500,Qn(e,t)):Ln=el(e,t);e:do try{if(pe!==0&&ee!==null){t=ee;var u=bt;t:switch(pe){case 1:pe=0,bt=null,Xn(e,t,u,1);break;case 2:case 9:if(so(u)){pe=0,bt=null,ad(t);break}t=function(){pe!==2&&pe!==9||we!==e||(pe=7),Jt(e)},u.then(t,t);break e;case 3:pe=7;break e;case 4:pe=5;break e;case 7:so(u)?(pe=0,bt=null,ad(t)):(pe=0,bt=null,Xn(e,t,u,7));break;case 5:var f=null;switch(ee.tag){case 26:f=ee.memoizedState;case 5:case 27:var m=ee;if(f?Yd(f):m.stateNode.complete){pe=0,bt=null;var y=m.sibling;if(y!==null)ee=y;else{var E=m.return;E!==null?(ee=E,Jr(E)):ee=null}break t}}pe=0,bt=null,Xn(e,t,u,5);break;case 6:pe=0,bt=null,Xn(e,t,u,6);break;case 8:iu(),Oe=6;break e;default:throw Error(s(462))}}ch();break}catch(D){Ff(e,D)}while(!0);return aa=$a=null,A.H=n,A.A=l,me=a,ee!==null?0:(we=null,ae=0,mr(),Oe)}function ch(){for(;ee!==null&&!Om();)td(ee)}function td(e){var t=Tf(e.alternate,e,da);e.memoizedProps=e.pendingProps,t===null?Jr(e):ee=t}function ad(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=vf(a,t,t.pendingProps,t.type,void 0,ae);break;case 11:t=vf(a,t,t.pendingProps,t.type.render,t.ref,ae);break;case 5:wc(t);default:Df(a,t),t=ee=Ps(t,da),t=Tf(a,t,da)}e.memoizedProps=e.pendingProps,t===null?Jr(e):ee=t}function Xn(e,t,a,n){aa=$a=null,wc(t),Nn=null,gl=0;var l=t.return;try{if(W_(e,l,t,a,ae)){Oe=1,Rr(e,Ct(a,e.current)),ee=null;return}}catch(u){if(l!==null)throw ee=l,u;Oe=1,Rr(e,Ct(a,e.current)),ee=null;return}t.flags&32768?(le||n===1?e=!0:Ln||(ae&536870912)!==0?e=!1:(Ca=e=!0,(n===2||n===9||n===3||n===6)&&(n=yt.current,n!==null&&n.tag===13&&(n.flags|=16384))),nd(t,e)):Jr(t)}function Jr(e){var t=e;do{if((t.flags&32768)!==0){nd(t,Ca);return}e=t.return;var a=P_(t.alternate,t,da);if(a!==null){ee=a;return}if(t=t.sibling,t!==null){ee=t;return}ee=t=e}while(t!==null);Oe===0&&(Oe=5)}function nd(e,t){do{var a=I_(e.alternate,e);if(a!==null){a.flags&=32767,ee=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ee=e;return}ee=e=a}while(e!==null);Oe=6,ee=null}function ld(e,t,a,n,l,u,f,m,y){e.cancelPendingCommit=null;do Wr();while(Le!==0);if((me&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(u=t.lanes|t.childLanes,u|=Wi,Lm(e,a,u,f,m,y),e===we&&(ee=we=null,ae=0),Gn=t,Ma=e,ma=a,nu=u,lu=l,Kf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fh(Fl,function(){return sd(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=A.T,A.T=null,l=x.p,x.p=2,f=me,me|=4;try{eh(e,t,a)}finally{me=f,x.p=l,A.T=n}}Le=1,rd(),id(),cd()}}function rd(){if(Le===1){Le=0;var e=Ma,t=Gn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var n=x.p;x.p=2;var l=me;me|=4;try{kf(t,e);var u=vu,f=Qs(e.containerInfo),m=u.focusedElem,y=u.selectionRange;if(f!==m&&m&&m.ownerDocument&&Gs(m.ownerDocument.documentElement,m)){if(y!==null&&Xi(m)){var E=y.start,D=y.end;if(D===void 0&&(D=E),"selectionStart"in m)m.selectionStart=E,m.selectionEnd=Math.min(D,m.value.length);else{var O=m.ownerDocument||document,T=O&&O.defaultView||window;if(T.getSelection){var q=T.getSelection(),k=m.textContent.length,K=Math.min(y.start,k),Se=y.end===void 0?K:Math.min(y.end,k);!q.extend&&K>Se&&(f=Se,Se=K,K=f);var S=Ys(m,K),b=Ys(m,Se);if(S&&b&&(q.rangeCount!==1||q.anchorNode!==S.node||q.anchorOffset!==S.offset||q.focusNode!==b.node||q.focusOffset!==b.offset)){var j=O.createRange();j.setStart(S.node,S.offset),q.removeAllRanges(),K>Se?(q.addRange(j),q.extend(b.node,b.offset)):(j.setEnd(b.node,b.offset),q.addRange(j))}}}}for(O=[],q=m;q=q.parentNode;)q.nodeType===1&&O.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<O.length;m++){var C=O[m];C.element.scrollLeft=C.left,C.element.scrollTop=C.top}}ci=!!yu,vu=yu=null}finally{me=l,x.p=n,A.T=a}}e.current=t,Le=2}}function id(){if(Le===2){Le=0;var e=Ma,t=Gn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var n=x.p;x.p=2;var l=me;me|=4;try{xf(e,t.alternate,t)}finally{me=l,x.p=n,A.T=a}}Le=3}}function cd(){if(Le===4||Le===3){Le=0,zm();var e=Ma,t=Gn,a=ma,n=Kf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Le=5:(Le=0,Gn=Ma=null,ud(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(za=null),Ti(a),t=t.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(In,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=A.T,l=x.p,x.p=2,A.T=null;try{for(var u=e.onRecoverableError,f=0;f<n.length;f++){var m=n[f];u(m.value,{componentStack:m.stack})}}finally{A.T=t,x.p=l}}(ma&3)!==0&&Wr(),Jt(e),l=e.pendingLanes,(a&261930)!==0&&(l&42)!==0?e===ru?xl++:(xl=0,ru=e):xl=0,Rl(0)}}function ud(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,hl(t)))}function Wr(){return rd(),id(),cd(),sd()}function sd(){if(Le!==5)return!1;var e=Ma,t=nu;nu=0;var a=Ti(ma),n=A.T,l=x.p;try{x.p=32>a?32:a,A.T=null,a=lu,lu=null;var u=Ma,f=ma;if(Le=0,Gn=Ma=null,ma=0,(me&6)!==0)throw Error(s(331));var m=me;if(me|=4,Xf(u.current),Yf(u,u.current,f,a),me=m,Rl(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(In,u)}catch{}return!0}finally{x.p=l,A.T=n,ud(e,t)}}function od(e,t,a){t=Ct(a,t),t=Bc(e.stateNode,t,2),e=Ta(e,t,2),e!==null&&(tl(e,2),Jt(e))}function ge(e,t,a){if(e.tag===3)od(e,e,a);else for(;t!==null;){if(t.tag===3){od(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(za===null||!za.has(n))){e=Ct(a,e),a=ff(2),n=Ta(t,a,2),n!==null&&(df(a,n,t,e),tl(n,2),Jt(n));break}}t=t.return}}function uu(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new nh;var l=new Set;n.set(t,l)}else l=n.get(t),l===void 0&&(l=new Set,n.set(t,l));l.has(a)||(eu=!0,l.add(a),e=uh.bind(null,e,t,a),t.then(e,e))}function uh(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,we===e&&(ae&a)===a&&(Oe===4||Oe===3&&(ae&62914560)===ae&&300>mt()-Qr?(me&2)===0&&Qn(e,0):tu|=a,Yn===ae&&(Yn=0)),Jt(e)}function fd(e,t){t===0&&(t=ns()),e=Ka(e,t),e!==null&&(tl(e,t),Jt(e))}function sh(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),fd(e,a)}function oh(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}n!==null&&n.delete(t),fd(e,a)}function fh(e,t){return Si(e,t)}var $r=null,Zn=null,su=!1,Fr=!1,ou=!1,xa=0;function Jt(e){e!==Zn&&e.next===null&&(Zn===null?$r=Zn=e:Zn=Zn.next=e),Fr=!0,su||(su=!0,mh())}function Rl(e,t){if(!ou&&Fr){ou=!0;do for(var a=!1,n=$r;n!==null;){if(e!==0){var l=n.pendingLanes;if(l===0)var u=0;else{var f=n.suspendedLanes,m=n.pingedLanes;u=(1<<31-ht(42|e)+1)-1,u&=l&~(f&~m),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,hd(n,u))}else u=ae,u=tr(n,n===we?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(u&3)===0||el(n,u)||(a=!0,hd(n,u));n=n.next}while(a);ou=!1}}function dh(){dd()}function dd(){Fr=su=!1;var e=0;xa!==0&&jh()&&(e=xa);for(var t=mt(),a=null,n=$r;n!==null;){var l=n.next,u=md(n,t);u===0?(n.next=null,a===null?$r=l:a.next=l,l===null&&(Zn=a)):(a=n,(e!==0||(u&3)!==0)&&(Fr=!0)),n=l}Le!==0&&Le!==5||Rl(e),xa!==0&&(xa=0)}function md(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var f=31-ht(u),m=1<<f,y=l[f];y===-1?((m&a)===0||(m&n)!==0)&&(l[f]=km(m,t)):y<=t&&(e.expiredLanes|=m),u&=~m}if(t=we,a=ae,a=tr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(pe===2||pe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&wi(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||el(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&wi(n),Ti(a)){case 2:case 8:a=ts;break;case 32:a=Fl;break;case 268435456:a=as;break;default:a=Fl}return n=_d.bind(null,e),a=Si(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&wi(n),e.callbackPriority=2,e.callbackNode=null,2}function _d(e,t){if(Le!==0&&Le!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Wr()&&e.callbackNode!==a)return null;var n=ae;return n=tr(e,e===we?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Wf(e,n,t),md(e,mt()),e.callbackNode!=null&&e.callbackNode===a?_d.bind(null,e):null)}function hd(e,t){if(Wr())return null;Wf(e,t,!0)}function mh(){Th(function(){(me&6)!==0?Si(es,dh):dd()})}function fu(){if(xa===0){var e=On;e===0&&(e=Pl,Pl<<=1,(Pl&261888)===0&&(Pl=256)),xa=e}return xa}function pd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:rr(""+e)}function gd(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function _h(e,t,a,n,l){if(t==="submit"&&a&&a.stateNode===l){var u=pd((l[nt]||null).action),f=n.submitter;f&&(t=(t=f[nt]||null)?pd(t.formAction):f.getAttribute("formAction"),t!==null&&(u=t,f=null));var m=new sr("action","action",null,n,l);e.push({event:m,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(xa!==0){var y=f?gd(l,f):new FormData(l);zc(a,{pending:!0,data:y,method:l.method,action:u},null,y)}}else typeof u=="function"&&(m.preventDefault(),y=f?gd(l,f):new FormData(l),zc(a,{pending:!0,data:y,method:l.method,action:u},u,y))},currentTarget:l}]})}}for(var du=0;du<Ji.length;du++){var mu=Ji[du],hh=mu.toLowerCase(),ph=mu[0].toUpperCase()+mu.slice(1);Lt(hh,"on"+ph)}Lt(Vs,"onAnimationEnd"),Lt(Ks,"onAnimationIteration"),Lt(Js,"onAnimationStart"),Lt("dblclick","onDoubleClick"),Lt("focusin","onFocus"),Lt("focusout","onBlur"),Lt(M_,"onTransitionRun"),Lt(N_,"onTransitionStart"),Lt(x_,"onTransitionCancel"),Lt(Ws,"onTransitionEnd"),pn("onMouseEnter",["mouseout","mouseover"]),pn("onMouseLeave",["mouseout","mouseover"]),pn("onPointerEnter",["pointerout","pointerover"]),pn("onPointerLeave",["pointerout","pointerover"]),Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function yd(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],l=n.event;n=n.listeners;e:{var u=void 0;if(t)for(var f=n.length-1;0<=f;f--){var m=n[f],y=m.instance,E=m.currentTarget;if(m=m.listener,y!==u&&l.isPropagationStopped())break e;u=m,l.currentTarget=E;try{u(l)}catch(D){dr(D)}l.currentTarget=null,u=y}else for(f=0;f<n.length;f++){if(m=n[f],y=m.instance,E=m.currentTarget,m=m.listener,y!==u&&l.isPropagationStopped())break e;u=m,l.currentTarget=E;try{u(l)}catch(D){dr(D)}l.currentTarget=null,u=y}}}}function te(e,t){var a=t[qi];a===void 0&&(a=t[qi]=new Set);var n=e+"__bubble";a.has(n)||(vd(t,e,2,!1),a.add(n))}function _u(e,t,a){var n=0;t&&(n|=4),vd(a,e,n,t)}var Pr="_reactListening"+Math.random().toString(36).slice(2);function hu(e){if(!e[Pr]){e[Pr]=!0,os.forEach(function(a){a!=="selectionchange"&&(gh.has(a)||_u(a,!1,e),_u(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pr]||(t[Pr]=!0,_u("selectionchange",!1,t))}}function vd(e,t,a,n){switch(Jd(t)){case 2:var l=Zh;break;case 8:l=Vh;break;default:l=Ou}a=l.bind(null,t,a,e),l=void 0,!Ri||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function pu(e,t,a,n,l){var u=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var f=n.tag;if(f===3||f===4){var m=n.stateNode.containerInfo;if(m===l)break;if(f===4)for(f=n.return;f!==null;){var y=f.tag;if((y===3||y===4)&&f.stateNode.containerInfo===l)return;f=f.return}for(;m!==null;){if(f=mn(m),f===null)return;if(y=f.tag,y===5||y===6||y===26||y===27){n=u=f;continue e}m=m.parentNode}}n=n.return}ws(function(){var E=u,D=Ni(a),O=[];e:{var T=$s.get(e);if(T!==void 0){var q=sr,k=e;switch(e){case"keypress":if(cr(a)===0)break e;case"keydown":case"keyup":q=o_;break;case"focusin":k="focus",q=ki;break;case"focusout":k="blur",q=ki;break;case"beforeblur":case"afterblur":q=ki;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=Ts;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=Pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=m_;break;case Vs:case Ks:case Js:q=t_;break;case Ws:q=h_;break;case"scroll":case"scrollend":q=$m;break;case"wheel":q=g_;break;case"copy":case"cut":case"paste":q=n_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=Ds;break;case"toggle":case"beforetoggle":q=v_}var K=(t&4)!==0,Se=!K&&(e==="scroll"||e==="scrollend"),S=K?T!==null?T+"Capture":null:T;K=[];for(var b=E,j;b!==null;){var C=b;if(j=C.stateNode,C=C.tag,C!==5&&C!==26&&C!==27||j===null||S===null||(C=ll(b,S),C!=null&&K.push(Bl(b,C,j))),Se)break;b=b.return}0<K.length&&(T=new q(T,k,null,a,D),O.push({event:T,listeners:K}))}}if((t&7)===0){e:{if(T=e==="mouseover"||e==="pointerover",q=e==="mouseout"||e==="pointerout",T&&a!==Mi&&(k=a.relatedTarget||a.fromElement)&&(mn(k)||k[dn]))break e;if((q||T)&&(T=D.window===D?D:(T=D.ownerDocument)?T.defaultView||T.parentWindow:window,q?(k=a.relatedTarget||a.toElement,q=E,k=k?mn(k):null,k!==null&&(Se=d(k),K=k.tag,k!==Se||K!==5&&K!==27&&K!==6)&&(k=null)):(q=null,k=E),q!==k)){if(K=Ts,C="onMouseLeave",S="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(K=Ds,C="onPointerLeave",S="onPointerEnter",b="pointer"),Se=q==null?T:nl(q),j=k==null?T:nl(k),T=new K(C,b+"leave",q,a,D),T.target=Se,T.relatedTarget=j,C=null,mn(D)===E&&(K=new K(S,b+"enter",k,a,D),K.target=j,K.relatedTarget=Se,C=K),Se=C,q&&k)t:{for(K=yh,S=q,b=k,j=0,C=S;C;C=K(C))j++;C=0;for(var X=b;X;X=K(X))C++;for(;0<j-C;)S=K(S),j--;for(;0<C-j;)b=K(b),C--;for(;j--;){if(S===b||b!==null&&S===b.alternate){K=S;break t}S=K(S),b=K(b)}K=null}else K=null;q!==null&&bd(O,T,q,K,!1),k!==null&&Se!==null&&bd(O,Se,k,K,!0)}}e:{if(T=E?nl(E):window,q=T.nodeName&&T.nodeName.toLowerCase(),q==="select"||q==="input"&&T.type==="file")var ce=Rs;else if(Ns(T))if(Us)ce=C_;else{ce=D_;var Y=q_}else q=T.nodeName,!q||q.toLowerCase()!=="input"||T.type!=="checkbox"&&T.type!=="radio"?E&&zi(E.elementType)&&(ce=Rs):ce=A_;if(ce&&(ce=ce(e,E))){xs(O,ce,a,D);break e}Y&&Y(e,T,E),e==="focusout"&&E&&T.type==="number"&&E.memoizedProps.value!=null&&Oi(T,"number",T.value)}switch(Y=E?nl(E):window,e){case"focusin":(Ns(Y)||Y.contentEditable==="true")&&(wn=Y,Zi=E,dl=null);break;case"focusout":dl=Zi=wn=null;break;case"mousedown":Vi=!0;break;case"contextmenu":case"mouseup":case"dragend":Vi=!1,Xs(O,a,D);break;case"selectionchange":if(z_)break;case"keydown":case"keyup":Xs(O,a,D)}var F;if(Yi)e:{switch(e){case"compositionstart":var ne="onCompositionStart";break e;case"compositionend":ne="onCompositionEnd";break e;case"compositionupdate":ne="onCompositionUpdate";break e}ne=void 0}else Sn?zs(e,a)&&(ne="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ne="onCompositionStart");ne&&(As&&a.locale!=="ko"&&(Sn||ne!=="onCompositionStart"?ne==="onCompositionEnd"&&Sn&&(F=js()):(ya=D,Ui="value"in ya?ya.value:ya.textContent,Sn=!0)),Y=Ir(E,ne),0<Y.length&&(ne=new qs(ne,e,null,a,D),O.push({event:ne,listeners:Y}),F?ne.data=F:(F=Ms(a),F!==null&&(ne.data=F)))),(F=S_?w_(e,a):j_(e,a))&&(ne=Ir(E,"onBeforeInput"),0<ne.length&&(Y=new qs("onBeforeInput","beforeinput",null,a,D),O.push({event:Y,listeners:ne}),Y.data=F)),_h(O,e,E,a,D)}yd(O,t)})}function Bl(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ir(e,t){for(var a=t+"Capture",n=[];e!==null;){var l=e,u=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||u===null||(l=ll(e,a),l!=null&&n.unshift(Bl(e,l,u)),l=ll(e,t),l!=null&&n.push(Bl(e,l,u))),e.tag===3)return n;e=e.return}return[]}function yh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bd(e,t,a,n,l){for(var u=t._reactName,f=[];a!==null&&a!==n;){var m=a,y=m.alternate,E=m.stateNode;if(m=m.tag,y!==null&&y===n)break;m!==5&&m!==26&&m!==27||E===null||(y=E,l?(E=ll(a,u),E!=null&&f.unshift(Bl(a,E,y))):l||(E=ll(a,u),E!=null&&f.push(Bl(a,E,y)))),a=a.return}f.length!==0&&e.push({event:t,listeners:f})}var vh=/\r\n?/g,bh=/\u0000|\uFFFD/g;function Sd(e){return(typeof e=="string"?e:""+e).replace(vh,`
`).replace(bh,"")}function wd(e,t){return t=Sd(t),Sd(e)===t}function be(e,t,a,n,l,u){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||yn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&yn(e,""+n);break;case"className":nr(e,"class",n);break;case"tabIndex":nr(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":nr(e,a,n);break;case"style":bs(e,n,u);break;case"data":if(t!=="object"){nr(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=rr(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&be(e,t,"name",l.name,l,null),be(e,t,"formEncType",l.formEncType,l,null),be(e,t,"formMethod",l.formMethod,l,null),be(e,t,"formTarget",l.formTarget,l,null)):(be(e,t,"encType",l.encType,l,null),be(e,t,"method",l.method,l,null),be(e,t,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=rr(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=Pt);break;case"onScroll":n!=null&&te("scroll",e);break;case"onScrollEnd":n!=null&&te("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(s(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=rr(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":te("beforetoggle",e),te("toggle",e),ar(e,"popover",n);break;case"xlinkActuate":Ft(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ft(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ft(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ft(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ft(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ft(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ar(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jm.get(a)||a,ar(e,a,n))}}function gu(e,t,a,n,l,u){switch(a){case"style":bs(e,n,u);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(s(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof n=="string"?yn(e,n):(typeof n=="number"||typeof n=="bigint")&&yn(e,""+n);break;case"onScroll":n!=null&&te("scroll",e);break;case"onScrollEnd":n!=null&&te("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),u=e[nt]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,l),typeof n=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,l);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):ar(e,a,n)}}}function Fe(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":te("error",e),te("load",e);var n=!1,l=!1,u;for(u in a)if(a.hasOwnProperty(u)){var f=a[u];if(f!=null)switch(u){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:be(e,t,u,f,a,null)}}l&&be(e,t,"srcSet",a.srcSet,a,null),n&&be(e,t,"src",a.src,a,null);return;case"input":te("invalid",e);var m=u=f=l=null,y=null,E=null;for(n in a)if(a.hasOwnProperty(n)){var D=a[n];if(D!=null)switch(n){case"name":l=D;break;case"type":f=D;break;case"checked":y=D;break;case"defaultChecked":E=D;break;case"value":u=D;break;case"defaultValue":m=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(137,t));break;default:be(e,t,n,D,a,null)}}ps(e,u,m,y,E,f,l,!1);return;case"select":te("invalid",e),n=f=u=null;for(l in a)if(a.hasOwnProperty(l)&&(m=a[l],m!=null))switch(l){case"value":u=m;break;case"defaultValue":f=m;break;case"multiple":n=m;default:be(e,t,l,m,a,null)}t=u,a=f,e.multiple=!!n,t!=null?gn(e,!!n,t,!1):a!=null&&gn(e,!!n,a,!0);return;case"textarea":te("invalid",e),u=l=n=null;for(f in a)if(a.hasOwnProperty(f)&&(m=a[f],m!=null))switch(f){case"value":n=m;break;case"defaultValue":l=m;break;case"children":u=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:be(e,t,f,m,a,null)}ys(e,n,l,u);return;case"option":for(y in a)if(a.hasOwnProperty(y)&&(n=a[y],n!=null))switch(y){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:be(e,t,y,n,a,null)}return;case"dialog":te("beforetoggle",e),te("toggle",e),te("cancel",e),te("close",e);break;case"iframe":case"object":te("load",e);break;case"video":case"audio":for(n=0;n<Ul.length;n++)te(Ul[n],e);break;case"image":te("error",e),te("load",e);break;case"details":te("toggle",e);break;case"embed":case"source":case"link":te("error",e),te("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in a)if(a.hasOwnProperty(E)&&(n=a[E],n!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:be(e,t,E,n,a,null)}return;default:if(zi(t)){for(D in a)a.hasOwnProperty(D)&&(n=a[D],n!==void 0&&gu(e,t,D,n,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(n=a[m],n!=null&&be(e,t,m,n,a,null))}function Sh(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,u=null,f=null,m=null,y=null,E=null,D=null;for(q in a){var O=a[q];if(a.hasOwnProperty(q)&&O!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":y=O;default:n.hasOwnProperty(q)||be(e,t,q,null,n,O)}}for(var T in n){var q=n[T];if(O=a[T],n.hasOwnProperty(T)&&(q!=null||O!=null))switch(T){case"type":u=q;break;case"name":l=q;break;case"checked":E=q;break;case"defaultChecked":D=q;break;case"value":f=q;break;case"defaultValue":m=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,t));break;default:q!==O&&be(e,t,T,q,n,O)}}Ci(e,f,m,y,E,D,u,l);return;case"select":q=f=m=T=null;for(u in a)if(y=a[u],a.hasOwnProperty(u)&&y!=null)switch(u){case"value":break;case"multiple":q=y;default:n.hasOwnProperty(u)||be(e,t,u,null,n,y)}for(l in n)if(u=n[l],y=a[l],n.hasOwnProperty(l)&&(u!=null||y!=null))switch(l){case"value":T=u;break;case"defaultValue":m=u;break;case"multiple":f=u;default:u!==y&&be(e,t,l,u,n,y)}t=m,a=f,n=q,T!=null?gn(e,!!a,T,!1):!!n!=!!a&&(t!=null?gn(e,!!a,t,!0):gn(e,!!a,a?[]:"",!1));return;case"textarea":q=T=null;for(m in a)if(l=a[m],a.hasOwnProperty(m)&&l!=null&&!n.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:be(e,t,m,null,n,l)}for(f in n)if(l=n[f],u=a[f],n.hasOwnProperty(f)&&(l!=null||u!=null))switch(f){case"value":T=l;break;case"defaultValue":q=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(s(91));break;default:l!==u&&be(e,t,f,l,n,u)}gs(e,T,q);return;case"option":for(var k in a)if(T=a[k],a.hasOwnProperty(k)&&T!=null&&!n.hasOwnProperty(k))switch(k){case"selected":e.selected=!1;break;default:be(e,t,k,null,n,T)}for(y in n)if(T=n[y],q=a[y],n.hasOwnProperty(y)&&T!==q&&(T!=null||q!=null))switch(y){case"selected":e.selected=T&&typeof T!="function"&&typeof T!="symbol";break;default:be(e,t,y,T,n,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var K in a)T=a[K],a.hasOwnProperty(K)&&T!=null&&!n.hasOwnProperty(K)&&be(e,t,K,null,n,T);for(E in n)if(T=n[E],q=a[E],n.hasOwnProperty(E)&&T!==q&&(T!=null||q!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(137,t));break;default:be(e,t,E,T,n,q)}return;default:if(zi(t)){for(var Se in a)T=a[Se],a.hasOwnProperty(Se)&&T!==void 0&&!n.hasOwnProperty(Se)&&gu(e,t,Se,void 0,n,T);for(D in n)T=n[D],q=a[D],!n.hasOwnProperty(D)||T===q||T===void 0&&q===void 0||gu(e,t,D,T,n,q);return}}for(var S in a)T=a[S],a.hasOwnProperty(S)&&T!=null&&!n.hasOwnProperty(S)&&be(e,t,S,null,n,T);for(O in n)T=n[O],q=a[O],!n.hasOwnProperty(O)||T===q||T==null&&q==null||be(e,t,O,T,n,q)}function jd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var l=a[n],u=l.transferSize,f=l.initiatorType,m=l.duration;if(u&&m&&jd(f)){for(f=0,m=l.responseEnd,n+=1;n<a.length;n++){var y=a[n],E=y.startTime;if(E>m)break;var D=y.transferSize,O=y.initiatorType;D&&jd(O)&&(y=y.responseEnd,f+=D*(y<m?1:(m-E)/(y-E)))}if(--n,t+=8*(u+f)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yu=null,vu=null;function ei(e){return e.nodeType===9?e:e.ownerDocument}function Ed(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Td(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Su=null;function jh(){var e=window.event;return e&&e.type==="popstate"?e===Su?!1:(Su=e,!0):(Su=null,!1)}var qd=typeof setTimeout=="function"?setTimeout:void 0,Eh=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,Th=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(e){return Dd.resolve(null).then(e).catch(qh)}:qd;function qh(e){setTimeout(function(){throw e})}function Ra(e){return e==="head"}function Ad(e,t){var a=t,n=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(l),Wn(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Hl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Hl(a);for(var u=a.firstChild;u;){var f=u.nextSibling,m=u.nodeName;u[al]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=f}}else a==="body"&&Hl(e.ownerDocument.body);a=l}while(a);Wn(t)}function Cd(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function wu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":wu(a),Di(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Dh(e,t,a,n){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[al])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=xt(e.nextSibling),e===null)break}return null}function Ah(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=xt(e.nextSibling),e===null))return null;return e}function Od(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=xt(e.nextSibling),e===null))return null;return e}function ju(e){return e.data==="$?"||e.data==="$~"}function Eu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ch(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Tu=null;function zd(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return xt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Nd(e,t,a){switch(t=ei(a),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Hl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Di(e)}var Rt=new Map,xd=new Set;function ti(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _a=x.d;x.d={f:Oh,r:zh,D:Mh,C:Nh,L:xh,m:Rh,X:Bh,S:Uh,M:Hh};function Oh(){var e=_a.f(),t=Vr();return e||t}function zh(e){var t=_n(e);t!==null&&t.tag===5&&t.type==="form"?$o(t):_a.r(e)}var Vn=typeof document>"u"?null:document;function Rd(e,t,a){var n=Vn;if(n&&typeof t=="string"&&t){var l=Dt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),xd.has(l)||(xd.add(l),e={rel:e,crossOrigin:a,href:t},n.querySelector(l)===null&&(t=n.createElement("link"),Fe(t,"link",e),Qe(t),n.head.appendChild(t)))}}function Mh(e){_a.D(e),Rd("dns-prefetch",e,null)}function Nh(e,t){_a.C(e,t),Rd("preconnect",e,t)}function xh(e,t,a){_a.L(e,t,a);var n=Vn;if(n&&e&&t){var l='link[rel="preload"][as="'+Dt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Dt(a.imageSizes)+'"]')):l+='[href="'+Dt(e)+'"]';var u=l;switch(t){case"style":u=Kn(e);break;case"script":u=Jn(e)}Rt.has(u)||(e=N({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Rt.set(u,e),n.querySelector(l)!==null||t==="style"&&n.querySelector(kl(u))||t==="script"&&n.querySelector(Ll(u))||(t=n.createElement("link"),Fe(t,"link",e),Qe(t),n.head.appendChild(t)))}}function Rh(e,t){_a.m(e,t);var a=Vn;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Dt(n)+'"][href="'+Dt(e)+'"]',u=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Jn(e)}if(!Rt.has(u)&&(e=N({rel:"modulepreload",href:e},t),Rt.set(u,e),a.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(u)))return}n=a.createElement("link"),Fe(n,"link",e),Qe(n),a.head.appendChild(n)}}}function Uh(e,t,a){_a.S(e,t,a);var n=Vn;if(n&&e){var l=hn(n).hoistableStyles,u=Kn(e);t=t||"default";var f=l.get(u);if(!f){var m={loading:0,preload:null};if(f=n.querySelector(kl(u)))m.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Rt.get(u))&&qu(e,a);var y=f=n.createElement("link");Qe(y),Fe(y,"link",e),y._p=new Promise(function(E,D){y.onload=E,y.onerror=D}),y.addEventListener("load",function(){m.loading|=1}),y.addEventListener("error",function(){m.loading|=2}),m.loading|=4,ai(f,t,n)}f={type:"stylesheet",instance:f,count:1,state:m},l.set(u,f)}}}function Bh(e,t){_a.X(e,t);var a=Vn;if(a&&e){var n=hn(a).hoistableScripts,l=Jn(e),u=n.get(l);u||(u=a.querySelector(Ll(l)),u||(e=N({src:e,async:!0},t),(t=Rt.get(l))&&Du(e,t),u=a.createElement("script"),Qe(u),Fe(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(l,u))}}function Hh(e,t){_a.M(e,t);var a=Vn;if(a&&e){var n=hn(a).hoistableScripts,l=Jn(e),u=n.get(l);u||(u=a.querySelector(Ll(l)),u||(e=N({src:e,async:!0,type:"module"},t),(t=Rt.get(l))&&Du(e,t),u=a.createElement("script"),Qe(u),Fe(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(l,u))}}function Ud(e,t,a,n){var l=(l=Q.current)?ti(l):null;if(!l)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Kn(a.href),a=hn(l).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Kn(a.href);var u=hn(l).hoistableStyles,f=u.get(e);if(f||(l=l.ownerDocument||l,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,f),(u=l.querySelector(kl(e)))&&!u._p&&(f.instance=u,f.state.loading=5),Rt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Rt.set(e,a),u||kh(l,e,a,f.state))),t&&n===null)throw Error(s(528,""));return f}if(t&&n!==null)throw Error(s(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Jn(a),a=hn(l).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Kn(e){return'href="'+Dt(e)+'"'}function kl(e){return'link[rel="stylesheet"]['+e+"]"}function Bd(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function kh(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Fe(t,"link",a),Qe(t),e.head.appendChild(t))}function Jn(e){return'[src="'+Dt(e)+'"]'}function Ll(e){return"script[async]"+e}function Hd(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Dt(a.href)+'"]');if(n)return t.instance=n,Qe(n),n;var l=N({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Qe(n),Fe(n,"style",l),ai(n,a.precedence,e),t.instance=n;case"stylesheet":l=Kn(a.href);var u=e.querySelector(kl(l));if(u)return t.state.loading|=4,t.instance=u,Qe(u),u;n=Bd(a),(l=Rt.get(l))&&qu(n,l),u=(e.ownerDocument||e).createElement("link"),Qe(u);var f=u;return f._p=new Promise(function(m,y){f.onload=m,f.onerror=y}),Fe(u,"link",n),t.state.loading|=4,ai(u,a.precedence,e),t.instance=u;case"script":return u=Jn(a.src),(l=e.querySelector(Ll(u)))?(t.instance=l,Qe(l),l):(n=a,(l=Rt.get(u))&&(n=N({},a),Du(n,l)),e=e.ownerDocument||e,l=e.createElement("script"),Qe(l),Fe(l,"link",n),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ai(n,a.precedence,e));return t.instance}function ai(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,u=l,f=0;f<n.length;f++){var m=n[f];if(m.dataset.precedence===t)u=m;else if(u!==l)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function qu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ni=null;function kd(e,t,a){if(ni===null){var n=new Map,l=ni=new Map;l.set(a,n)}else l=ni,n=l.get(a),n||(n=new Map,l.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var u=a[l];if(!(u[al]||u[Ke]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var f=u.getAttribute(t)||"";f=e+f;var m=n.get(f);m?m.push(u):n.set(f,[u])}}return n}function Ld(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Lh(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Yd(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Yh(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=Kn(n.href),u=t.querySelector(kl(l));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=li.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,Qe(u);return}u=t.ownerDocument||t,n=Bd(n),(l=Rt.get(l))&&qu(n,l),u=u.createElement("link"),Qe(u);var f=u;f._p=new Promise(function(m,y){f.onload=m,f.onerror=y}),Fe(u,"link",n),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=li.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Au=0;function Gh(e,t){return e.stylesheets&&e.count===0&&ii(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&ii(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Au===0&&(Au=62500*wh());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ii(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Au?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(l)}}:null}function li(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ii(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ri=null;function ii(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ri=new Map,t.forEach(Qh,e),ri=null,li.call(e))}function Qh(e,t){if(!(t.state.loading&4)){var a=ri.get(e);if(a)var n=a.get(null);else{a=new Map,ri.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<l.length;u++){var f=l[u];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(a.set(f.dataset.precedence,f),n=f)}n&&a.set(null,n)}l=t.instance,f=l.getAttribute("data-precedence"),u=a.get(f)||n,u===n&&a.set(null,l),a.set(f,l),this.count++,n=li.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),u?u.parentNode.insertBefore(l,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var Yl={$$typeof:$,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Xh(e,t,a,n,l,u,f,m,y){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.hiddenUpdates=ji(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=u,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function Gd(e,t,a,n,l,u,f,m,y,E,D,O){return e=new Xh(e,t,a,f,y,E,D,O,m),t=1,u===!0&&(t|=24),u=gt(3,null,null,t),e.current=u,u.stateNode=e,t=cc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:n,isDehydrated:a,cache:t},fc(u),e}function Qd(e){return e?(e=Tn,e):Tn}function Xd(e,t,a,n,l,u){l=Qd(l),n.context===null?n.context=l:n.pendingContext=l,n=Ea(t),n.payload={element:a},u=u===void 0?null:u,u!==null&&(n.callback=u),a=Ta(e,n,t),a!==null&&(st(a,e,t),vl(a,e,t))}function Zd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Cu(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function Vd(e){if(e.tag===13||e.tag===31){var t=Ka(e,67108864);t!==null&&st(t,e,67108864),Cu(e,67108864)}}function Kd(e){if(e.tag===13||e.tag===31){var t=wt();t=Ei(t);var a=Ka(e,t);a!==null&&st(a,e,t),Cu(e,t)}}var ci=!0;function Zh(e,t,a,n){var l=A.T;A.T=null;var u=x.p;try{x.p=2,Ou(e,t,a,n)}finally{x.p=u,A.T=l}}function Vh(e,t,a,n){var l=A.T;A.T=null;var u=x.p;try{x.p=8,Ou(e,t,a,n)}finally{x.p=u,A.T=l}}function Ou(e,t,a,n){if(ci){var l=zu(n);if(l===null)pu(e,t,n,ui,a),Wd(e,n);else if(Jh(l,e,t,a,n))n.stopPropagation();else if(Wd(e,n),t&4&&-1<Kh.indexOf(e)){for(;l!==null;){var u=_n(l);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var f=Ga(u.pendingLanes);if(f!==0){var m=u;for(m.pendingLanes|=2,m.entangledLanes|=2;f;){var y=1<<31-ht(f);m.entanglements[1]|=y,f&=~y}Jt(u),(me&6)===0&&(Xr=mt()+500,Rl(0))}}break;case 31:case 13:m=Ka(u,2),m!==null&&st(m,u,2),Vr(),Cu(u,2)}if(u=zu(n),u===null&&pu(e,t,n,ui,a),u===l)break;l=u}l!==null&&n.stopPropagation()}else pu(e,t,n,null,a)}}function zu(e){return e=Ni(e),Mu(e)}var ui=null;function Mu(e){if(ui=null,e=mn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ui=e,null}function Jd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mm()){case es:return 2;case ts:return 8;case Fl:case Nm:return 32;case as:return 268435456;default:return 32}default:return 32}}var Nu=!1,Ua=null,Ba=null,Ha=null,Gl=new Map,Ql=new Map,ka=[],Kh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wd(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Gl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(t.pointerId)}}function Xl(e,t,a,n,l,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:u,targetContainers:[l]},t!==null&&(t=_n(t),t!==null&&Vd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Jh(e,t,a,n,l){switch(t){case"focusin":return Ua=Xl(Ua,e,t,a,n,l),!0;case"dragenter":return Ba=Xl(Ba,e,t,a,n,l),!0;case"mouseover":return Ha=Xl(Ha,e,t,a,n,l),!0;case"pointerover":var u=l.pointerId;return Gl.set(u,Xl(Gl.get(u)||null,e,t,a,n,l)),!0;case"gotpointercapture":return u=l.pointerId,Ql.set(u,Xl(Ql.get(u)||null,e,t,a,n,l)),!0}return!1}function $d(e){var t=mn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,us(e.priority,function(){Kd(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,us(e.priority,function(){Kd(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function si(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=zu(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);Mi=n,a.target.dispatchEvent(n),Mi=null}else return t=_n(a),t!==null&&Vd(t),e.blockedOn=a,!1;t.shift()}return!0}function Fd(e,t,a){si(e)&&a.delete(t)}function Wh(){Nu=!1,Ua!==null&&si(Ua)&&(Ua=null),Ba!==null&&si(Ba)&&(Ba=null),Ha!==null&&si(Ha)&&(Ha=null),Gl.forEach(Fd),Ql.forEach(Fd)}function oi(e,t){e.blockedOn===t&&(e.blockedOn=null,Nu||(Nu=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Wh)))}var fi=null;function Pd(e){fi!==e&&(fi=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){fi===e&&(fi=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],l=e[t+2];if(typeof n!="function"){if(Mu(n||a)===null)continue;break}var u=_n(a);u!==null&&(e.splice(t,3),t-=3,zc(u,{pending:!0,data:l,method:a.method,action:n},n,l))}}))}function Wn(e){function t(y){return oi(y,e)}Ua!==null&&oi(Ua,e),Ba!==null&&oi(Ba,e),Ha!==null&&oi(Ha,e),Gl.forEach(t),Ql.forEach(t);for(var a=0;a<ka.length;a++){var n=ka[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ka.length&&(a=ka[0],a.blockedOn===null);)$d(a),a.blockedOn===null&&ka.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var l=a[n],u=a[n+1],f=l[nt]||null;if(typeof u=="function")f||Pd(a);else if(f){var m=null;if(u&&u.hasAttribute("formAction")){if(l=u,f=u[nt]||null)m=f.formAction;else if(Mu(l)!==null)continue}else m=f.action;typeof m=="function"?a[n+1]=m:(a.splice(n,3),n-=3),Pd(a)}}}function Id(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(f){return l=f})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function xu(e){this._internalRoot=e}di.prototype.render=xu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var a=t.current,n=wt();Xd(a,n,e,t,null,null)},di.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xd(e.current,2,null,e,null,null),Vr(),t[dn]=null}};function di(e){this._internalRoot=e}di.prototype.unstable_scheduleHydration=function(e){if(e){var t=cs();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ka.length&&t!==0&&t<ka[a].priority;a++);ka.splice(a,0,e),a===0&&$d(e)}};var em=i.version;if(em!=="19.2.0")throw Error(s(527,em,"19.2.0"));x.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=M(t),e=e!==null?R(e):null,e=e===null?null:e.stateNode,e};var $h={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mi.isDisabled&&mi.supportsFiber)try{In=mi.inject($h),_t=mi}catch{}}return Vl.createRoot=function(e,t){if(!o(e))throw Error(s(299));var a=!1,n="",l=cf,u=uf,f=sf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Gd(e,1,!1,null,null,a,n,null,l,u,f,Id),e[dn]=t.current,hu(e),new xu(t)},Vl.hydrateRoot=function(e,t,a){if(!o(e))throw Error(s(299));var n=!1,l="",u=cf,f=uf,m=sf,y=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.formState!==void 0&&(y=a.formState)),t=Gd(e,1,!0,t,a??null,n,l,y,u,f,m,Id),t.context=Qd(null),a=t.current,n=wt(),n=Ei(n),l=Ea(n),l.callback=null,Ta(a,l,n),a=n,t.current.lanes=a,tl(t,a),Jt(t),e[dn]=t.current,hu(e),new di(t)},Vl.version="19.2.0",Vl}var im;function rp(){if(im)return Uu.exports;im=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(i){console.error(i)}}return r(),Uu.exports=lp(),Uu.exports}var ip=rp();const cp=pm(ip),up="fieldsync-offline",sp=2,se={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let sn=null;const ha=()=>new Promise((r,i)=>{if(sn){r(sn);return}const c=indexedDB.open(up,sp);c.onerror=()=>{console.error("Failed to open offline database"),i(c.error)},c.onsuccess=()=>{sn=c.result,r(sn)},c.onupgradeneeded=s=>{const o=s.target.result;if(o.objectStoreNames.contains(se.PROJECTS)||o.createObjectStore(se.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),o.objectStoreNames.contains(se.AREAS)||o.createObjectStore(se.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),o.objectStoreNames.contains(se.CREW_CHECKINS)||o.createObjectStore(se.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),o.objectStoreNames.contains(se.TM_TICKETS)||o.createObjectStore(se.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),o.objectStoreNames.contains(se.DAILY_REPORTS)||o.createObjectStore(se.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),o.objectStoreNames.contains(se.MESSAGES)||o.createObjectStore(se.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!o.objectStoreNames.contains(se.PENDING_ACTIONS)){const d=o.createObjectStore(se.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});d.createIndex("type","type",{unique:!1}),d.createIndex("created_at","created_at",{unique:!1})}o.objectStoreNames.contains(se.CACHED_DATA)||o.createObjectStore(se.CACHED_DATA,{keyPath:"key"})}}),on=(r,i="readonly")=>{if(!sn)throw new Error("Database not initialized");return sn.transaction(r,i).objectStore(r)},Wl=async(r,i)=>(await ha(),new Promise((c,s)=>{const d=on(r,"readwrite").put(i);d.onsuccess=()=>c(d.result),d.onerror=()=>s(d.error)})),vm=async(r,i)=>(await ha(),new Promise((c,s)=>{const o=sn.transaction(r,"readwrite"),d=o.objectStore(r);i.forEach(h=>d.put(h)),o.oncomplete=()=>c(),o.onerror=()=>s(o.error)})),op=async(r,i)=>(await ha(),new Promise((c,s)=>{const d=on(r).get(i);d.onsuccess=()=>c(d.result),d.onerror=()=>s(d.error)})),bm=async r=>(await ha(),new Promise((i,c)=>{const o=on(r).getAll();o.onsuccess=()=>i(o.result||[]),o.onerror=()=>c(o.error)})),Ju=async(r,i,c)=>(await ha(),new Promise((s,o)=>{const g=on(r).index(i).getAll(c);g.onsuccess=()=>s(g.result||[]),g.onerror=()=>o(g.error)})),fp=async(r,i)=>(await ha(),new Promise((c,s)=>{const d=on(r,"readwrite").delete(i);d.onsuccess=()=>c(),d.onerror=()=>s(d.error)})),Ze={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},Ut=async(r,i,c={})=>{await ha();const s={type:r,payload:i,metadata:c,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((o,d)=>{const g=on(se.PENDING_ACTIONS,"readwrite").add(s);g.onsuccess=()=>{o(g.result)},g.onerror=()=>d(g.error)})},Sm=async()=>bm(se.PENDING_ACTIONS),gi=async()=>(await Sm()).length,dp=async r=>fp(se.PENDING_ACTIONS,r),mp=async(r,i)=>(await ha(),new Promise((c,s)=>{const o=on(se.PENDING_ACTIONS,"readwrite"),d=o.get(r);d.onsuccess=()=>{const h=d.result;if(h){const g={...h,...i},w=o.put(g);w.onsuccess=()=>c(g),w.onerror=()=>s(w.error)}else s(new Error("Action not found"))},d.onerror=()=>s(d.error)})),_p=async r=>vm(se.PROJECTS,r),cm=async r=>r?Ju(se.PROJECTS,"company_id",r):bm(se.PROJECTS),hp=async r=>vm(se.AREAS,r),um=async r=>Ju(se.AREAS,"project_id",r),ku=async(r,i)=>{const c=await op(se.AREAS,r);return c&&(c.status=i,c.updated_at=new Date().toISOString(),await Wl(se.AREAS,c)),c},Lu=async r=>Wl(se.CREW_CHECKINS,r),sm=async r=>Wl(se.TM_TICKETS,r),Bt=()=>{const r=new Uint8Array(6);crypto.getRandomValues(r);const i=Array.from(r,c=>c.toString(36)).join("");return`temp_${Date.now()}_${i}`},$n=async r=>Wl(se.DAILY_REPORTS,r),pp=async(r,i)=>(await Ju(se.DAILY_REPORTS,"project_id",r)).find(s=>s.report_date===i)||null,om=async r=>Wl(se.MESSAGES,r);let Wu=navigator.onLine;const Qu=new Set,$u=r=>(Qu.add(r),()=>Qu.delete(r)),Ht=()=>Wu,fm=r=>{Wu=r,Qu.forEach(i=>i(r))};typeof window<"u"&&(window.addEventListener("online",()=>{fm(!0)}),window.addEventListener("offline",()=>{fm(!1)}));let Yu=!1;const wm=async r=>{if(Yu||!Wu)return{synced:0,failed:0};Yu=!0;const i={synced:0,failed:0};try{const c=await Sm();for(const s of c)try{await gp(s,r),await dp(s.id),i.synced++}catch(o){console.error(`Failed to sync action ${s.type}:`,o),i.failed++,await mp(s.id,{attempts:(s.attempts||0)+1,last_error:o.message,last_attempt:new Date().toISOString()})}}finally{Yu=!1}return i},gp=async(r,i)=>{const{type:c,payload:s}=r;switch(c){case Ze.UPDATE_AREA_STATUS:return i.updateAreaStatus(s.areaId,s.status);case Ze.CREATE_TM_TICKET:const o=await i.createTMTicket(s.ticket);return s.workers?.length>0&&await i.addTMWorkers(o.id,s.workers),s.items?.length>0&&await i.addTMItems(o.id,s.items),o;case Ze.SAVE_CREW_CHECKIN:return i.saveCrewCheckin(s.projectId,s.workers,s.checkInDate);case Ze.SUBMIT_DAILY_REPORT:return await i.saveDailyReport(s.projectId,s.reportData),i.submitDailyReport(s.projectId,s.submittedBy);case Ze.SEND_MESSAGE:return i.sendMessage(s.projectId,s.senderType,s.senderName,s.content);case Ze.CREATE_MATERIAL_REQUEST:return i.createMaterialRequest(s.projectId,s.items,s.requestedBy,s.neededBy,s.priority,s.notes);default:throw new Error(`Unknown action type: ${c}`)}},yp={slowQueryThreshold:200},I={query(r,i){const c={type:"query",operation:r,duration_ms:i.duration,rows_returned:i.rows,company_id:i.company_id||null,project_id:i.project_id||null,user_id:i.user_id||null,timestamp:new Date().toISOString()};i.duration>=yp.slowQueryThreshold&&Gu("query",c)},error(r,i){const c={type:"error",category:r,severity:i.severity||"error",error_code:i.code||null,message:i.message,company_id:i.company_id||null,user_id:i.user_id||null,project_id:i.project_id||null,operation:i.operation||null,context:i.extra||{},timestamp:new Date().toISOString()};Gu("error",c)},storage(r,i){const c={type:"storage",operation:r,company_id:i.company_id||null,project_id:i.project_id||null,file_size_bytes:i.size||0,duration_ms:i.duration||0,success:i.success!==!1,error_message:i.error||null,timestamp:new Date().toISOString()};(!c.success||c.duration_ms>5e3)&&Gu("storage",c)},activity(r,i){}};async function Gu(r,i){try{r==="error"?await _.rpc("log_error",{p_severity:i.severity,p_category:i.category,p_message:i.message,p_company_id:i.company_id,p_user_id:i.user_id,p_project_id:i.project_id,p_operation:i.operation,p_error_code:i.error_code,p_context:i.context||{}}):r==="query"&&await _.rpc("log_query_metric",{p_operation:i.operation,p_duration_ms:i.duration_ms,p_rows_returned:i.rows_returned,p_company_id:i.company_id,p_project_id:i.project_id,p_user_id:i.user_id,p_context:{}})}catch{}}I.wrapQuery=function(r,i){return async function(...c){const s=performance.now();try{const o=await i.apply(this,c),h={duration:Math.round(performance.now()-s),rows:Array.isArray(o)?o.length:void 0};return I.query(r,h),o}catch(o){const d=Math.round(performance.now()-s);throw I.error("database",{message:o.message,operation:r,severity:"error",extra:{duration:d}}),o}}};I.time=async function(r,i){const c=performance.now();try{const s=await i(),o=Math.round(performance.now()-c);return I.query(r,{duration:o}),s}catch(s){throw I.error("general",{message:s.message,operation:r}),s}};const jm="https://cegifnrcwdilromcyouq.supabase.co",Fu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNlZ2lmbnJjd2RpbHJvbWN5b3VxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NTQ5OTAsImV4cCI6MjA4MDIzMDk5MH0.qAiBG5XaB0C1E0U2tQbQkrhpm1iUhM6A2MXngEHhX4A",p=!!Fu;ha().catch(r=>console.error("Failed to init offline DB:",r));const _=p?gm(jm,Fu):null,Xu="fieldsync_field_session";let Jl=null;const Pu=()=>{if(Jl)return Jl;try{const r=sessionStorage.getItem(Xu);if(r)return Jl=JSON.parse(r),Jl}catch{}return null},Zu=r=>{Jl=r,r?sessionStorage.setItem(Xu,JSON.stringify(r)):sessionStorage.removeItem(Xu)},Em=async()=>{const r=Pu();if(r?.token&&p)try{await _.rpc("invalidate_field_session",{p_session_token:r.token})}catch{}Zu(null)};let Kl=null;const Tm=()=>{const r=Pu();return!r?.token||!p?_:((!Kl||Kl._sessionToken!==r.token)&&(Kl=gm(jm,Fu,{global:{headers:{"x-field-session":r.token}}}),Kl._sessionToken=r.token),Kl)},jt=()=>p?Pu()?.token?Tm():_:null,Vu="fieldsync_data",yi="fieldsync_user",vp=()=>{const r="fieldsync_device_id";let i=localStorage.getItem(r);return i||(i=crypto.randomUUID(),localStorage.setItem(r,i)),i},dm={projects:[],areas:[],users:[],assignments:[]},L=()=>{try{const r=localStorage.getItem(Vu);return r?JSON.parse(r):dm}catch{return localStorage.removeItem(Vu),dm}},re=r=>{localStorage.setItem(Vu,JSON.stringify(r))},_i=()=>{try{const r=localStorage.getItem(yi);return r?JSON.parse(r):null}catch{return localStorage.removeItem(yi),null}},hi=r=>{r?localStorage.setItem(yi,JSON.stringify(r)):localStorage.removeItem(yi)},Ku={async signUp(r,i,c,s){if(p){const{data:o,error:d}=await _.auth.signUp({email:r,password:i,options:{data:{name:c,role:s}}});if(d)throw d;return o}else{const o=L(),d={id:crypto.randomUUID(),email:r,name:c,role:s,created_at:new Date().toISOString()};return o.users.push(d),re(o),hi(d),{user:d}}},async signIn(r,i){if(p){const{data:c,error:s}=await _.auth.signInWithPassword({email:r,password:i});if(s)throw s;return c}else{const s=L().users.find(o=>o.email===r);if(!s)throw new Error("User not found");return hi(s),{user:s}}},async signOut(){if(p){const{error:r}=await _.auth.signOut();if(r)throw r}else hi(null)},async getUser(){if(p){const{data:{user:r}}=await _.auth.getUser();return r}else return _i()},async getProfile(){if(p){const{data:{user:r}}=await _.auth.getUser();if(!r)return null;const{data:i,error:c}=await _.from("users").select("*").eq("id",r.id).single();return c?{id:r.id,email:r.email,name:r.user_metadata?.name||"",role:r.user_metadata?.role||"foreman"}:i}else return _i()},async updateRole(r,i){if(p){const{data:c,error:s}=await _.from("users").update({role:i}).eq("id",r).select().single();if(s)throw s;return c}else{const c=L(),s=c.users.find(o=>o.id===r);return s&&(s.role=i,re(c),_i()?.id===r&&hi(s)),s}},onAuthStateChange(r){if(p)return _.auth.onAuthStateChange(r);{const i=_i();return r(i?"SIGNED_IN":"SIGNED_OUT",{user:i}),{data:{subscription:{unsubscribe:()=>{}}}}}}},at={async getProjects(r=null,i=!1){if(p){if(!Ht()){const s=await cm(r);return i?s:s.filter(o=>o.status!=="archived")}const c=performance.now();try{let s=_.from("projects").select("*").order("created_at",{ascending:!1});r&&(s=s.eq("company_id",r)),i||(s=s.eq("status","active"));const{data:o,error:d}=await s,h=Math.round(performance.now()-c);if(I.query("getProjects",{duration:h,rows:o?.length,company_id:r}),d){I.error("database",{message:d.message,operation:"getProjects",company_id:r});const g=await cm(r);if(g.length>0)return g;throw d}return o?.length>0&&_p(o).catch(g=>console.error("Failed to cache projects:",g)),o}catch(s){throw I.error("database",{message:s.message,operation:"getProjects",company_id:r}),s}}else{const c=L().projects;return i?c:c.filter(s=>s.status!=="archived")}},async getProjectsPaginated(r,{page:i=0,limit:c=25,status:s="active"}={}){if(p){const h=performance.now();try{let g=_.from("projects").select("*",{count:"exact"}).eq("company_id",r).order("created_at",{ascending:!1}).range(i*c,(i+1)*c-1);s!=="all"&&(g=g.eq("status",s));const{data:w,error:M,count:R}=await g,N=Math.round(performance.now()-h);if(I.query("getProjectsPaginated",{duration:N,rows:w?.length,page:i,company_id:r}),M)throw M;return{projects:w||[],totalCount:R||0,hasMore:(i+1)*c<(R||0),page:i,limit:c}}catch(g){throw I.error("database",{message:g.message,operation:"getProjectsPaginated",company_id:r}),g}}const o=L().projects.filter(h=>h.company_id===r&&(s==="all"||h.status===s)),d=i*c;return{projects:o.slice(d,d+c),totalCount:o.length,hasMore:d+c<o.length,page:i,limit:c}},async getProjectsWithSummary(r){if(p){const i=performance.now();try{const{data:c,error:s}=await _.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            pending_tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",r).eq("status","active").eq("pending_tickets.status","pending").order("created_at",{ascending:!1}),o=Math.round(performance.now()-i);if(I.query("getProjectsWithSummary",{duration:o,rows:c?.length,company_id:r}),s)throw s;return(c||[]).map(d=>({...d,areaCount:d.areas?.[0]?.count||0,ticketCount:d.tickets?.[0]?.count||0,pendingTicketCount:d.pending_tickets?.[0]?.count||0,reportCount:d.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,pending_tickets:void 0,daily_reports:void 0}))}catch(c){return I.error("database",{message:c.message,operation:"getProjectsWithSummary",company_id:r}),this.getProjects(r)}}return L().projects.filter(i=>i.company_id===r&&i.status==="active")},async getProjectDashboardSummary(r){if(p){const i=performance.now();try{const{data:c,error:s}=await _.rpc("get_project_dashboard_summary",{p_company_id:r}),o=Math.round(performance.now()-i);if(I.query("getProjectDashboardSummary",{duration:o,rows:c?.length,company_id:r}),s){if(s.message?.includes("function")||s.code==="42883")return this.getProjectsWithSummary(r);throw s}return(c||[]).map(d=>({id:d.project_id,name:d.project_name,status:d.project_status,job_number:d.project_number,address:d.project_address,pin:d.project_pin,created_at:d.created_at,start_date:d.start_date,end_date:d.end_date,contract_value:Number(d.contract_value)||0,work_type:d.work_type||"demolition",job_type:d.job_type||"standard",general_contractor:d.general_contractor||"",areaCount:Number(d.total_areas)||0,completedAreas:Number(d.completed_areas)||0,inProgressAreas:Number(d.in_progress_areas)||0,pendingAreas:Number(d.pending_areas)||0,ticketCount:Number(d.total_tickets)||0,pendingTicketCount:Number(d.pending_tickets)||0,submittedTicketCount:Number(d.submitted_tickets)||0,approvedTicketCount:Number(d.approved_tickets)||0,totalLaborHours:Number(d.total_labor_hours)||0,todayLaborHours:Number(d.today_labor_hours)||0,todayWorkerCount:Number(d.today_worker_count)||0,lastActivityAt:d.last_activity_at,dailyReportsThisWeek:Number(d.daily_reports_this_week)||0,corCount:Number(d.cor_count)||0,pendingCorCount:Number(d.pending_cor_count)||0,disposalLoadsToday:Number(d.disposal_loads_today)||0}))}catch(c){return I.error("database",{message:c.message,operation:"getProjectDashboardSummary",company_id:r}),this.getProjectsWithSummary(r)}}return L().projects.filter(i=>i.company_id===r&&i.status==="active")},async getArchivedProjects(r){if(p){const{data:i,error:c}=await _.from("projects").select("*").eq("company_id",r).eq("status","archived").order("archived_at",{ascending:!1});if(c)throw c;return i}else return L().projects.filter(i=>i.status==="archived")},async getProjectCount(r){if(p){const{count:i,error:c}=await _.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",r).in("status",["active","archived"]);if(c)throw c;return i||0}else return L().projects.filter(c=>c.company_id===r&&c.status!=="deleted").length},async archiveProject(r){if(p){const{data:i,error:c}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",r).select().single();if(c)throw c;return i}else{const i=L(),c=i.projects.find(s=>s.id===r);return c&&(c.status="archived",c.archived_at=new Date().toISOString(),re(i)),c}},async getProjectStorageStats(r){if(!p)return{photoCount:0,estimatedMB:0};const{data:i,error:c}=await _.from("t_and_m_tickets").select("photos").eq("project_id",r);if(c)throw c;let s=0;const o=[];i?.forEach(h=>{h.photos&&Array.isArray(h.photos)&&(s+=h.photos.length,o.push(...h.photos))});const d=s*1.5;return{photoCount:s,estimatedMB:d,photoUrls:o}},async archiveProjectDeep(r,i){if(!p)return null;const{photoUrls:c}=await this.getProjectStorageStats(r);if(c.length>0){const d=c.map(h=>{try{const w=new URL(h).pathname.match(/\/tm-photos\/(.+)$/);return w?w[1]:null}catch{return null}}).filter(Boolean);if(d.length>0)for(let h=0;h<d.length;h+=100){const g=d.slice(h,h+100);await _.storage.from("tm-photos").remove(g)}}await _.from("t_and_m_tickets").update({photos:[]}).eq("project_id",r);const{data:s,error:o}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",r).select().single();if(o)throw o;return{...s,photosDeleted:c.length}},async restoreProject(r){if(p){const{data:i,error:c}=await _.from("projects").update({status:"active",archived_at:null}).eq("id",r).select().single();if(c)throw c;return i}else{const i=L(),c=i.projects.find(s=>s.id===r);return c&&(c.status="active",c.archived_at=null,re(i)),c}},async getProject(r){if(p){const{data:i,error:c}=await _.from("projects").select("*").eq("id",r).single();if(c)throw c;return i}else return L().projects.find(i=>i.id===r)},async createProject(r){if(p){const{data:i,error:c}=await _.from("projects").insert({...r,status:"active"}).select().single();if(c)throw console.error("Supabase createProject error:",c.message,c.details,c.hint),c;return i}else{const i=L(),c={...r,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return i.projects.push(c),re(i),c}},async getProjectByPin(r){if(p){const{data:i,error:c}=await _.from("projects").select("*").eq("pin",r).eq("status","active").single();return c?null:i}else return L().projects.find(c=>c.pin===r&&c.status==="active")||null},async getProjectByPinAndCompany(r,i){if(p){const{data:c,error:s}=await _.from("projects").select("*").eq("pin",r).eq("company_id",i).eq("status","active").single();return s?null:c}else return L().projects.find(s=>s.pin===r&&s.company_id===i&&s.status==="active")||null},async getProjectByPinSecure(r,i){if(p){const c=vp(),{data:s,error:o}=await _.rpc("validate_pin_and_create_session",{p_pin:r,p_company_code:i,p_device_id:c,p_ip_address:null});if(o)return{success:!1,rateLimited:!1,project:null,error:o.message};if(!s||s.length===0)return{success:!1,rateLimited:!1,project:null};const d=s[0];if(d.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(d.error_code==="INVALID_COMPANY"||d.error_code==="INVALID_PIN")return{success:!1,rateLimited:!1,project:null};if(!d.success||!d.project_id)return{success:!1,rateLimited:!1,project:null};Zu({token:d.session_token,projectId:d.project_id,companyId:d.company_id,projectName:d.project_name,companyName:d.company_name,createdAt:new Date().toISOString()});const h=Tm(),{data:g}=await h.from("projects").select("*").eq("id",d.project_id).single();return{success:!0,rateLimited:!1,sessionToken:d.session_token,project:g||{id:d.project_id,name:d.project_name,company_id:d.company_id,status:"active"}}}else{const c=L(),o=(c.companies||[]).find(h=>h.code===i);if(!o)return{success:!1,rateLimited:!1,project:null};const d=c.projects.find(h=>h.pin===r&&h.company_id===o.id&&h.status==="active");if(d){const h=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;Zu({token:h,projectId:d.id,companyId:o.id,projectName:d.name,companyName:o.name,createdAt:new Date().toISOString()})}return{success:!!d,rateLimited:!1,project:d||null}}},async isPinAvailable(r,i=null){if(p){let c=_.from("projects").select("id").eq("pin",r);i&&(c=c.neq("id",i));const{data:s,error:o}=await c;if(o)throw o;return s.length===0}else return!L().projects.some(s=>s.pin===r&&s.id!==i)},async updateProjectPin(r,i){if(p){const{data:c,error:s}=await _.from("projects").update({pin:i}).eq("id",r).select().single();if(s)throw s;return c}else{const c=L(),s=c.projects.find(o=>o.id===r);return s&&(s.pin=i,re(c)),s}},async updateProject(r,i){if(p){const{data:c,error:s}=await _.from("projects").update(i).eq("id",r).select().single();if(s)throw console.error("Error updating project:",s),s;return c}else{const c=L(),s=c.projects.find(o=>o.id===r);return s&&(Object.assign(s,i),re(c)),s}},async deleteProject(r){if(p){const{error:i}=await _.from("projects").delete().eq("id",r);if(i)throw i}else{const i=L();i.projects=i.projects.filter(c=>c.id!==r),i.areas=i.areas.filter(c=>c.project_id!==r),re(i)}},async getAreas(r){if(p){if(!Ht())return um(r);const i=jt(),{data:c,error:s}=await i.from("areas").select("*").eq("project_id",r).order("sort_order",{ascending:!0});if(s){const o=await um(r);if(o.length>0)return o;throw s}return c?.length>0&&hp(c).catch(o=>console.error("Failed to cache areas:",o)),c}else return L().areas.filter(i=>i.project_id===r)},async createArea(r){if(p){const i=jt(),{data:c,error:s}=await i.from("areas").insert(r).select().single();if(s)throw s;return c}else{const i=L(),c={...r,id:crypto.randomUUID(),created_at:new Date().toISOString()};return i.areas.push(c),re(i),c}},async updateAreaStatus(r,i){if(p){if(!Ht()){const d=await ku(r,i);return await Ut(Ze.UPDATE_AREA_STATUS,{areaId:r,status:i}),d}const c=jt(),{data:s,error:o}=await c.from("areas").update({status:i}).eq("id",r).select().single();if(o){if(o.message?.includes("fetch")||o.message?.includes("network")){const d=await ku(r,i);return await Ut(Ze.UPDATE_AREA_STATUS,{areaId:r,status:i}),d}throw o}return s&&ku(r,i).catch(d=>console.error("Failed to update cached area:",d)),s}else{const c=L(),s=c.areas.find(o=>o.id===r);return s&&(s.status=i,s.updated_at=new Date().toISOString()),re(c),s}},async updateArea(r,i){if(p){const{data:c,error:s}=await _.from("areas").update(i).eq("id",r).select().single();if(s)throw s;return c}else{const c=L(),s=c.areas.find(o=>o.id===r);return s&&(Object.assign(s,i),s.updated_at=new Date().toISOString()),re(c),s}},async deleteArea(r){if(p){const{error:i}=await _.from("areas").delete().eq("id",r);if(i)throw i}else{const i=L();i.areas=i.areas.filter(c=>c.id!==r),re(i)}},subscribeToAreas(r,i){return p?_.channel(`areas:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${r}`},i).subscribe():null},subscribeToMessages(r,i){return p?_.channel(`messages:${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${r}`},i).subscribe():null},subscribeToMaterialRequests(r,i){return p?_.channel(`material_requests:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${r}`},i).subscribe():null},subscribeToDailyReports(r,i){return p?_.channel(`daily_reports:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${r}`},i).subscribe():null},subscribeToCrewCheckins(r,i){return p?_.channel(`crew_checkins:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${r}`},i).subscribe():null},subscribeToInjuryReports(r,i){return p?_.channel(`injury_reports:${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${r}`},i).subscribe():null},subscribeToTMTickets(r,i){return p?_.channel(`tm_tickets:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${r}`},i).subscribe():null},subscribeToCompanyActivity(r,i,c){if(!p||!i||i.length===0)return null;const s=_.channel(`company_activity:${r}`);return i.forEach(o=>{s.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${o}`},d=>c.onMessage?.(d)),s.on("postgres_changes",{event:"INSERT",schema:"public",table:"material_requests",filter:`project_id=eq.${o}`},d=>c.onMaterialRequest?.(d)),s.on("postgres_changes",{event:"INSERT",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${o}`},d=>c.onTMTicket?.(d)),s.on("postgres_changes",{event:"UPDATE",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${o}`},d=>c.onTMTicket?.(d)),s.on("postgres_changes",{event:"INSERT",schema:"public",table:"crew_checkins",filter:`project_id=eq.${o}`},d=>c.onCrewCheckin?.(d)),s.on("postgres_changes",{event:"UPDATE",schema:"public",table:"crew_checkins",filter:`project_id=eq.${o}`},d=>c.onCrewCheckin?.(d)),s.on("postgres_changes",{event:"UPDATE",schema:"public",table:"areas",filter:`project_id=eq.${o}`},d=>c.onAreaUpdate?.(d)),s.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${o}`},d=>c.onCORChange?.(d))}),s.on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${r}`},o=>c.onInjuryReport?.(o)),s.subscribe()},unsubscribe(r){r&&p&&_.removeChannel(r)},async getAssignedProjects(r){if(p){const{data:i,error:c}=await _.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",r);if(c)throw c;return i.map(s=>s.projects)}else{const i=L();return(i.assignments?.filter(s=>s.user_id===r)||[]).map(s=>i.projects.find(o=>o.id===s.project_id)).filter(Boolean)}},async assignUserToProject(r,i,c){if(p){const{data:s,error:o}=await _.from("project_assignments").insert({project_id:r,user_id:i,assigned_by:c}).select().single();if(o)throw o;return s}else{const s=L();s.assignments||(s.assignments=[]);const o={id:crypto.randomUUID(),project_id:r,user_id:i,assigned_by:c,assigned_at:new Date().toISOString()};return s.assignments.push(o),re(s),o}},async removeUserFromProject(r,i){if(p){const{error:c}=await _.from("project_assignments").delete().eq("project_id",r).eq("user_id",i);if(c)throw c}else{const c=L();c.assignments=c.assignments?.filter(s=>!(s.project_id===r&&s.user_id===i))||[],re(c)}},async getProjectAssignments(r){if(p){const{data:i,error:c}=await _.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",r);if(c)throw c;return i.map(s=>s.users)}else{const i=L();return(i.assignments?.filter(s=>s.project_id===r)||[]).map(s=>i.users.find(o=>o.id===s.user_id)).filter(Boolean)}},async getAllUsers(){if(p){const{data:r,error:i}=await _.from("users").select("*").order("name");if(i)throw i;return r}else return L().users||[]},async getForemen(){if(p){const{data:r,error:i}=await _.from("users").select("*").eq("role","foreman").order("name");if(i)throw i;return r}else return(L().users||[]).filter(r=>r.role==="foreman")},async logActivity(r,i,c,s,o,d){if(p){const{error:h}=await _.from("activity_log").insert({user_id:r,project_id:i,area_id:c,action:s,old_value:o,new_value:d});h&&console.error("Error logging activity:",h)}},async getProjectActivity(r,i=50){if(p){const{data:c,error:s}=await _.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",r).order("created_at",{ascending:!1}).limit(i);if(s)throw s;return c}return[]},async getMaterialsEquipment(r){if(p){const{data:i,error:c}=await _.from("materials_equipment").select("*").eq("company_id",r).eq("active",!0).order("category").order("name");if(c)throw c;return i}return[]},async getMaterialsEquipmentByCategory(r,i){if(p){const{data:c,error:s}=await _.from("materials_equipment").select("*").eq("company_id",r).eq("category",i).eq("active",!0).order("name");if(s)throw s;return c}return[]},async getAllMaterialsEquipment(r){if(p){const{data:i,error:c}=await _.from("materials_equipment").select("*").eq("company_id",r).order("category").order("name");if(c)throw c;return i}return[]},async createMaterialEquipment(r){if(p){const{data:i,error:c}=await _.from("materials_equipment").insert(r).select().single();if(c)throw c;return i}return null},async updateMaterialEquipment(r,i){if(p){const{data:c,error:s}=await _.from("materials_equipment").update(i).eq("id",r).select().single();if(s)throw s;return c}return null},async deleteMaterialEquipment(r){if(p){const{error:i}=await _.from("materials_equipment").update({active:!1}).eq("id",r);if(i)throw i}},async getLaborCategories(r){if(p){const{data:i,error:c}=await _.from("labor_categories").select("*").eq("company_id",r).eq("active",!0).order("sort_order").order("name");if(c)throw c;return i||[]}return[]},async createLaborCategory(r,i,c=0){if(p){const{data:s,error:o}=await _.from("labor_categories").insert({company_id:r,name:i,sort_order:c}).select().single();if(o)throw o;return s}return null},async updateLaborCategory(r,i){if(p){const{data:c,error:s}=await _.from("labor_categories").update(i).eq("id",r).select().single();if(s)throw s;return c}return null},async deleteLaborCategory(r){if(p){const{error:i}=await _.from("labor_categories").update({active:!1}).eq("id",r);if(i)throw i}},async getLaborClasses(r){if(p){const{data:i,error:c}=await _.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",r).eq("active",!0).order("sort_order").order("name");if(c)throw c;return i||[]}return[]},async getLaborClassesWithCategories(r){if(p){const[i,c]=await Promise.all([_.from("labor_categories").select("*").eq("company_id",r).eq("active",!0).order("sort_order").order("name"),_.from("labor_classes").select("*").eq("company_id",r).eq("active",!0).order("sort_order").order("name")]);if(i.error)throw i.error;if(c.error)throw c.error;return{categories:i.data||[],classes:c.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(r){if(p){const{data:i,error:c}=await _.rpc("get_labor_classes_for_field",{p_company_id:r});if(c){console.error("Error loading field labor classes:",c);const[d,h]=await Promise.all([_.from("labor_categories").select("id, name").eq("company_id",r).eq("active",!0).order("name"),_.from("labor_classes").select("id, name, category_id").eq("company_id",r).eq("active",!0).order("name")]);return{categories:d.data||[],classes:h.data||[]}}const s=new Map,o=[];for(const d of i||[])d.category_id&&d.category_name&&!s.has(d.category_id)&&s.set(d.category_id,{id:d.category_id,name:d.category_name}),o.push({id:d.id,name:d.name,category_id:d.category_id});return{categories:Array.from(s.values()),classes:o}}return{categories:[],classes:[]}},async createLaborClass(r,i,c,s=0){if(p){const{data:o,error:d}=await _.from("labor_classes").insert({company_id:r,category_id:i,name:c,sort_order:s}).select().single();if(d)throw d;return o}return null},async updateLaborClass(r,i){if(p){const{data:c,error:s}=await _.from("labor_classes").update(i).eq("id",r).select().single();if(s)throw s;return c}return null},async deleteLaborClass(r){if(p){const{error:i}=await _.from("labor_classes").update({active:!1}).eq("id",r);if(i)throw i}},async getLaborClassRates(r){if(p){const{data:i,error:c}=await _.from("labor_class_rates").select("*").eq("labor_class_id",r);if(c)throw c;return i||[]}return[]},async getAllLaborClassRates(r){if(p){const{data:i,error:c}=await _.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",r).eq("active",!0);if(c)throw c;return i||[]}return[]},async saveLaborClassRates(r,i){if(p){const c=i.map(o=>({...o,labor_class_id:r})),{error:s}=await _.from("labor_class_rates").upsert(c,{onConflict:"labor_class_id,work_type,job_type"});if(s)throw s}},async getLaborClassRate(r,i,c){if(p){const{data:s,error:o}=await _.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",r).eq("work_type",i).eq("job_type",c).single();if(o&&o.code!=="PGRST116")throw o;return s||null}return null},async getTMTickets(r){if(p){const i=performance.now(),c=jt();try{const{data:s,error:o}=await c.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `).eq("project_id",r).order("created_at",{ascending:!1}),d=Math.round(performance.now()-i);if(I.query("getTMTickets",{duration:d,rows:s?.length,project_id:r}),o)throw o;return s}catch(s){throw I.error("database",{message:s.message,operation:"getTMTickets",project_id:r}),s}}return[]},async getTMTicketsPaginated(r,{page:i=0,limit:c=25,status:s=null}={}){if(p){const o=performance.now(),d=jt();try{let h=d.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `,{count:"exact"}).eq("project_id",r).order("created_at",{ascending:!1}).range(i*c,(i+1)*c-1);s&&(h=h.eq("status",s));const{data:g,error:w,count:M}=await h,R=Math.round(performance.now()-o);if(I.query("getTMTicketsPaginated",{duration:R,rows:g?.length,page:i,project_id:r}),w)throw w;return{tickets:g||[],totalCount:M||0,hasMore:(i+1)*c<(M||0),page:i,limit:c}}catch(h){throw I.error("database",{message:h.message,operation:"getTMTicketsPaginated",project_id:r}),h}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(r){if(p){const{data:i,error:c}=await _.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",r).not("ce_pco_number","is",null).neq("ce_pco_number","");if(c)throw c;const s={};let o=0,d=0;return i?.forEach(h=>{const g=h.ce_pco_number;if(s[g]||(s[g]={approved:0,pending:0,count:0}),s[g].count++,h.status==="approved"||h.status==="billed"){const w=parseFloat(h.change_order_value)||0;s[g].approved+=w,o+=w}else h.status==="pending"&&d++}),{changeOrders:s,totalApprovedValue:o,pendingCount:d}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(r,i){if(p){const{data:c,error:s}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",r).eq("status",i).order("created_at",{ascending:!1});if(s)throw s;return c}return[]},async getCORTickets(r){if(p){const{data:i,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",r).order("work_date",{ascending:!0});if(c)throw c;return i||[]}return[]},async createTMTicket(r){if(p){if(!Ht()){const s={id:Bt(),project_id:r.project_id,work_date:r.work_date,ce_pco_number:r.ce_pco_number||null,assigned_cor_id:r.assigned_cor_id||null,notes:r.notes,photos:r.photos||[],status:"pending_sync",created_by_name:r.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await sm(s),await Ut(Ze.CREATE_TM_TICKET,{ticket:s,workers:r._workers||[],items:r._items||[]}),s}const{data:i,error:c}=await _.from("t_and_m_tickets").insert({project_id:r.project_id,work_date:r.work_date,ce_pco_number:r.ce_pco_number||null,assigned_cor_id:r.assigned_cor_id||null,notes:r.notes,photos:r.photos||[],status:"pending",created_by_name:r.created_by_name||"Field User"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const s={id:Bt(),...r,status:"pending_sync",_offline:!0};return await sm(s),await Ut(Ze.CREATE_TM_TICKET,{ticket:s,workers:r._workers||[],items:r._items||[]}),s}throw c}return i}return null},async addTMWorkers(r,i){if(p){const c=i.map(o=>({ticket_id:r,name:o.name,hours:o.hours,overtime_hours:o.overtime_hours||0,time_started:o.time_started||null,time_ended:o.time_ended||null,role:o.role||"Laborer"})),{error:s}=await _.from("t_and_m_workers").insert(c);if(s)throw s}},async addTMItems(r,i){if(p){const c=i.map(o=>({ticket_id:r,material_equipment_id:o.material_equipment_id||null,custom_name:o.custom_name||null,custom_category:o.custom_category||null,quantity:o.quantity})),{error:s}=await _.from("t_and_m_items").insert(c);if(s)throw s}},async getPreviousTicketCrew(r,i){if(!p)return null;const{data:c,error:s}=await _.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",r).lt("work_date",i).order("work_date",{ascending:!1}).limit(1).single();if(s||!c)return null;const o=c.t_and_m_workers||[],d=o.filter(w=>["Foreman","General Foreman","Superintendent"].includes(w.role)).map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||"",role:w.role})),h=o.filter(w=>w.role==="Operator").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""})),g=o.filter(w=>w.role==="Laborer").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""}));return{workDate:c.work_date,supervision:d.length>0?d:null,operators:h.length>0?h:null,laborers:g.length>0?g:null,totalWorkers:o.length}},async updateTMTicketStatus(r,i){if(p){const{data:c,error:s}=await _.from("t_and_m_tickets").update({status:i}).eq("id",r).select().single();if(s)throw s;return c}return null},async approveTMTicket(r,i,c,s=null){if(p){const o={status:"approved",approved_by_user_id:i,approved_by_name:c,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};s!==null&&(o.change_order_value=parseFloat(s)||0);const{data:d,error:h}=await _.from("t_and_m_tickets").update(o).eq("id",r).select().single();if(h)throw h;return d}return null},async rejectTMTicket(r,i,c,s=""){if(p){const{data:o,error:d}=await _.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:i,rejected_by_name:c,rejected_at:new Date().toISOString(),rejection_reason:s,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",r).select().single();if(d)throw d;return o}return null},canApproveTickets(r){return["owner","admin","manager"].includes(r)},async updateTMTicketPhotos(r,i){if(p){const{data:c,error:s}=await _.from("t_and_m_tickets").update({photos:i}).eq("id",r).select().single();if(s)throw s;return c}return null},async saveTMClientSignature(r,i){if(p){const{data:c,error:s}=await _.from("t_and_m_tickets").update({client_signature_data:i.signature,client_signature_name:i.signerName,client_signature_title:i.signerTitle,client_signature_company:i.signerCompany,client_signature_date:i.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",r).select().single();if(s)throw s;return c}return null},async deleteTMTicket(r){if(p){const{error:i}=await _.from("t_and_m_tickets").delete().eq("id",r);if(i)throw i}},async isTicketEditable(r){if(!r?.assigned_cor_id)return{editable:!0};if(p)try{const{data:i,error:c}=await _.from("change_orders").select("id, status, cor_number").eq("id",r.assigned_cor_id).single();if(c||!i)return{editable:!0};const o=["draft","pending_approval"].includes(i.status);return{editable:o,lockedBy:o?null:i,reason:o?null:`This ticket is linked to ${i.cor_number} which has been ${i.status==="approved"?"approved":i.status}`}}catch(i){return console.error("Error checking ticket editability:",i),{editable:!0}}return{editable:!0}},async getCompanyByCode(r){if(p){const{data:i,error:c}=await _.from("companies").select("*").eq("code",r).single();return c?null:i}return null},async getCompany(r){if(p){const{data:i,error:c}=await _.from("companies").select("*").eq("id",r).single();if(c)throw c;return i}return null},async getUserCompanies(r){if(p){const{data:i,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",r).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching user companies:",c),[]):i.map(s=>({id:s.companies.id,name:s.companies.name,code:s.companies.code,access_level:s.access_level}))}return[]},async getUserPendingMemberships(r){if(p){const{count:i,error:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",r).eq("status","pending");return c?(console.error("Error fetching pending memberships:",c),0):i||0}return 0},async getCompanyMemberships(r){if(p){const{data:i,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",r).order("created_at",{ascending:!1});return c?(console.error("Error fetching company memberships:",c),[]):i||[]}return[]},async approveMembership(r,i){if(p){const{error:c}=await _.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:i}).eq("id",r);if(c)throw c}},async approveMembershipWithRole(r,i,c="member"){if(p){const{error:s}=await _.rpc("approve_membership_with_role",{membership_id:r,approved_by_user:i,new_access_level:c});if(s)throw s}},async rejectMembership(r){if(p){const{error:i}=await _.from("user_companies").delete().eq("id",r);if(i)throw i}},async removeMember(r,i){if(p){const{error:c}=await _.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:i}).eq("id",r);if(c)throw c}},async getProjectTeam(r){if(p){const{data:i,error:c}=await _.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",r).order("assigned_at",{ascending:!0});return c?(console.error("Error fetching project team:",c),[]):i||[]}return[]},async getCompanyMembers(r){if(p){const{data:i,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",r).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching company members:",c),[]):i||[]}return[]},async addProjectMember(r,i,c,s){if(p){const{data:o,error:d}=await _.from("project_users").insert({project_id:r,user_id:i,project_role:c,assigned_by:s}).select().single();if(d)throw d;return o}return null},async updateProjectMemberRole(r,i,c){if(p){const{error:s}=await _.from("project_users").update({project_role:c}).eq("project_id",r).eq("user_id",i);if(s)throw s}},async removeProjectMember(r,i){if(p){const{error:c}=await _.from("project_users").delete().eq("project_id",r).eq("user_id",i);if(c)throw c}},async updateMemberAccessLevel(r,i){if(p){const{error:c}=await _.from("user_companies").update({access_level:i}).eq("id",r);if(c)throw c}},async updateMemberCompanyRole(r,i){if(p){const{error:c}=await _.from("user_companies").update({company_role:i}).eq("id",r);if(c)throw c}},async repairLegacyUser(r,i,c="member"){if(!p||!r||!i)return!1;try{const{data:s,error:o}=await _.rpc("repair_legacy_user",{p_user_id:r,p_company_id:i,p_role:c});return o?(console.error("RPC repair_legacy_user failed:",o),!1):s===!0}catch(s){return console.error("Error repairing legacy user:",s),!1}},async isLegacyUser(r){if(!p)return!1;try{const{data:i}=await _.from("users").select("company_id, role").eq("id",r).single();if(!i?.company_id)return!1;const{count:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",r);return c===0}catch(i){return console.error("Error checking legacy user:",i),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(r,i){if(!p)return[];const c=performance.now();try{const{data:s,error:o}=await _.from("disposal_loads").select("*").eq("project_id",r).eq("work_date",i).order("created_at",{ascending:!1}),d=Math.round(performance.now()-c);if(I.query("getDisposalLoads",{duration:d,rows:s?.length,project_id:r}),o)throw o;return s||[]}catch(s){throw I.error("database",{message:s.message,operation:"getDisposalLoads",project_id:r}),s}},async getDisposalLoadsHistory(r,i=14){if(!p)return[];const c=performance.now();try{const s=new Date,o=new Date;o.setDate(o.getDate()-i);const{data:d,error:h}=await _.from("disposal_loads").select("*").eq("project_id",r).gte("work_date",o.toISOString().split("T")[0]).lte("work_date",s.toISOString().split("T")[0]).order("work_date",{ascending:!1}),g=Math.round(performance.now()-c);if(I.query("getDisposalLoadsHistory",{duration:g,rows:d?.length,project_id:r}),h)throw h;return(d||[]).map(w=>({...w,load_date:w.work_date}))}catch(s){throw I.error("database",{message:s.message,operation:"getDisposalLoadsHistory",project_id:r}),s}},async addDisposalLoad(r,i,c,s,o,d=null){if(!p)return null;const{data:h,error:g}=await _.from("disposal_loads").insert({project_id:r,user_id:i,work_date:c,load_type:s,load_count:o,notes:d}).select().single();if(g)throw I.error("database",{message:g.message,operation:"addDisposalLoad",project_id:r}),g;return h},async updateDisposalLoad(r,i,c,s=null){if(!p)return null;const{data:o,error:d}=await _.from("disposal_loads").update({load_type:i,load_count:c,notes:s}).eq("id",r).select().single();if(d)throw I.error("database",{message:d.message,operation:"updateDisposalLoad"}),d;return o},async deleteDisposalLoad(r){if(!p)return!1;const{error:i}=await _.from("disposal_loads").delete().eq("id",r);if(i)throw I.error("database",{message:i.message,operation:"deleteDisposalLoad"}),i;return!0},async getDisposalSummary(r,i=null,c=null){if(!p)return[];const s=performance.now();try{const{data:o,error:d}=await _.rpc("get_disposal_summary",{p_project_id:r,p_start_date:i,p_end_date:c}),h=Math.round(performance.now()-s);if(I.query("getDisposalSummary",{duration:h,rows:o?.length,project_id:r}),d)throw d;return o||[]}catch(o){return I.error("database",{message:o.message,operation:"getDisposalSummary",project_id:r}),this.getDisposalSummaryFallback(r,i,c)}},async getDisposalSummaryFallback(r,i,c){let s=_.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",r);i&&(s=s.gte("work_date",i)),c&&(s=s.lte("work_date",c));const{data:o,error:d}=await s;if(d)throw d;const h={};return o?.forEach(g=>{h[g.load_type]||(h[g.load_type]={load_type:g.load_type,total_loads:0,days:new Set}),h[g.load_type].total_loads+=g.load_count,h[g.load_type].days.add(g.work_date)}),Object.values(h).map(g=>({load_type:g.load_type,total_loads:g.total_loads,days_with_activity:g.days.size}))},async getWeeklyDisposalSummary(r,i=4){if(!p)return[];const c=new Date,s=new Date;s.setDate(s.getDate()-i*7);const{data:o,error:d}=await _.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",r).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",c.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(d)throw d;const h={};return o?.forEach(g=>{const w=new Date(g.work_date),M=new Date(w);M.setDate(w.getDate()-w.getDay());const R=M.toISOString().split("T")[0];h[R]||(h[R]={week:R,concrete:0,trash:0,metals:0,hazardous_waste:0}),h[R][g.load_type]+=g.load_count}),Object.values(h).sort((g,w)=>g.week.localeCompare(w.week))},async uploadPhoto(r,i,c,s){if(!p)return null;const o=performance.now(),d=s.size||0,h=Date.now(),g=new Uint8Array(6);crypto.getRandomValues(g);const w=Array.from(g,G=>G.toString(36)).join(""),M=s.name?.split(".").pop()||"jpg",R=`${h}-${w}.${M}`,N=`${r}/${i}/${c}/${R}`;try{const{data:G,error:Z}=await _.storage.from("tm-photos").upload(N,s,{cacheControl:"3600",upsert:!1}),V=Math.round(performance.now()-o);if(I.storage("upload",{company_id:r,project_id:i,size:d,duration:V,success:!Z}),Z)throw Z;const{data:B}=_.storage.from("tm-photos").getPublicUrl(N);return B.publicUrl}catch(G){throw I.error("storage",{message:G.message,operation:"uploadPhoto",company_id:r,project_id:i}),G}},async uploadPhotoBase64(r,i,c,s,o="photo.jpg"){if(!p)return null;const h=await(await fetch(s)).blob(),g=Date.now(),w=new Uint8Array(6);crypto.getRandomValues(w);const M=Array.from(w,ie=>ie.toString(36)).join(""),R=o.split(".").pop()||"jpg",N=`${g}-${M}.${R}`,G=`${r}/${i}/${c}/${N}`,{data:Z,error:V}=await _.storage.from("tm-photos").upload(G,h,{cacheControl:"3600",upsert:!1,contentType:h.type});if(V)throw V;const{data:B}=_.storage.from("tm-photos").getPublicUrl(G);return B.publicUrl},async deletePhoto(r){if(!p)return;const c=new URL(r).pathname.match(/\/tm-photos\/(.+)$/);if(!c)return;const s=c[1],{error:o}=await _.storage.from("tm-photos").remove([s]);if(o)throw o},async verifyPhotoAccessible(r){if(!p||!r)return{accessible:!1,error:"Invalid URL"};try{const i=await fetch(r,{method:"HEAD"});return{accessible:i.ok,status:i.status,error:i.ok?null:`HTTP ${i.status}`}}catch(i){return{accessible:!1,error:i.message||"Network error"}}},async verifyTicketPhotos(r){if(!p)return{verified:!1,issues:[]};try{const{data:i,error:c}=await _.from("t_and_m_tickets").select("photos").eq("id",r).single();if(c)throw c;if(!i?.photos||i.photos.length===0)return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",r),{verified:!0,status:"empty",issues:[]};const s=[];for(const d of i.photos){const h=await this.verifyPhotoAccessible(d);h.accessible||s.push({url:d,error:h.error})}const o=s.length===0?"verified":"issues";return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:o,photos_issue_count:s.length}).eq("id",r),{verified:s.length===0,status:o,totalPhotos:i.photos.length,issues:s}}catch(i){return console.error("Error verifying ticket photos:",i),{verified:!1,error:i.message,issues:[]}}},async queuePhotoUpload(r,i,c,s){if(!p)return null;const{data:o,error:d}=await _.from("photo_upload_queue").insert({ticket_id:r,temp_id:i,file_name:c,file_size_bytes:s,status:"pending"}).select().single();return d?(console.error("Error queueing photo upload:",d),null):o},async confirmQueuedUpload(r,i,c){if(!p)return!1;const{data:s,error:o}=await _.rpc("confirm_photo_upload",{p_queue_id:r,p_uploaded_url:i,p_storage_path:c});return o?(console.error("Error confirming photo upload:",o),!1):s===!0},async markQueuedUploadFailed(r,i){if(!p)return!1;const{data:c,error:s}=await _.rpc("mark_photo_upload_failed",{p_queue_id:r,p_error:i});return s?(console.error("Error marking photo upload failed:",s),!1):c===!0},async getPendingPhotoUploads(r){if(!p)return[];const{data:i,error:c}=await _.rpc("get_pending_photo_uploads",{p_ticket_id:r});return c?(console.error("Error getting pending photo uploads:",c),[]):i||[]},async logPhotoOperation(r,i,c={}){if(p)try{await _.from("photo_audit_log").insert({ticket_id:r,cor_id:c.corId||null,operation:i,photo_url:c.photoUrl||null,storage_path:c.storagePath||null,details:c.metadata?c.metadata:null,error_message:c.error||null,triggered_by:c.triggeredBy||"system"})}catch(s){console.error("Error logging photo operation:",s)}},async saveExportSnapshot(r,i,c={}){if(!p)return null;const{exportType:s="pdf",exportReason:o=null,clientEmail:d=null,clientName:h=null}=c;try{const{data:g,error:w}=await _.from("cor_export_snapshots").insert({cor_id:r,export_type:s,export_reason:o,cor_data:i.cor_data,tickets_data:i.tickets_data,photos_manifest:i.photos_manifest,totals_snapshot:i.totals_snapshot,checksum:i.checksum,client_email:d,client_name:h}).select().single();if(w)throw w;return g}catch(g){return console.error("Error saving export snapshot:",g),null}},async getExportSnapshots(r){if(!p)return[];const{data:i,error:c}=await _.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",r).order("exported_at",{ascending:!1});return c?(console.error("Error fetching export snapshots:",c),[]):i||[]},async getExportSnapshot(r){if(!p)return null;const{data:i,error:c}=await _.from("cor_export_snapshots").select("*").eq("id",r).single();return c?(console.error("Error fetching export snapshot:",c),null):i},async requestCORExport(r,i,c={}){if(!p)return null;try{const s=await _.auth.getUser(),{data:o,error:d}=await _.rpc("request_cor_export",{p_cor_id:r,p_idempotency_key:i,p_options:c,p_requested_by:s?.data?.user?.id||null});if(d)throw d;return o?.[0]||null}catch(s){throw I.error("database",{message:s.message,operation:"requestCORExport",extra:{corId:r}}),s}},async getExportJob(r){if(!p)return null;const{data:i,error:c}=await _.from("cor_export_jobs").select("*").eq("id",r).single();return c?(console.error("Error fetching export job:",c),null):i},async getExportJobs(r,i=10){if(!p)return[];const{data:c,error:s}=await _.from("cor_export_jobs").select("*").eq("cor_id",r).order("created_at",{ascending:!1}).limit(i);return s?(console.error("Error fetching export jobs:",s),[]):c||[]},async updateExportJobStatus(r,i,c={}){if(!p)return null;try{const{data:s,error:o}=await _.rpc("update_export_job_status",{p_job_id:r,p_status:i,p_snapshot_id:c.snapshotId||null,p_pdf_url:c.pdfUrl||null,p_error:c.error||null,p_error_details:c.errorDetails||null,p_metrics:c.metrics||null});if(o)throw o;return s}catch(s){throw I.error("database",{message:s.message,operation:"updateExportJobStatus",extra:{jobId:r,status:i}}),s}},async getCurrentCORSnapshot(r){if(!p)return null;const{data:i}=await _.from("change_orders").select("version, last_snapshot_version").eq("id",r).single();if(!i||i.version!==i.last_snapshot_version)return null;const{data:c}=await _.from("cor_export_snapshots").select("*").eq("cor_id",r).eq("is_current",!0).single();return c||null},async saveCORSnapshot(r,i){if(!p)return null;try{await _.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",r.corId);const c=await _.auth.getUser(),{data:s,error:o}=await _.from("cor_export_snapshots").insert({id:r.snapshotId,cor_id:r.corId,job_id:i,cor_version:r.corVersion,cor_data:r.corData,tickets_data:r.ticketsData,photos_manifest:r.photoManifest,totals_snapshot:r.totals,checksum:r.checksum,is_current:!0,exported_by:c?.data?.user?.id||null}).select().single();if(o)throw o;return await _.from("change_orders").update({last_snapshot_version:r.corVersion}).eq("id",r.corId),s}catch(c){throw I.error("database",{message:c.message,operation:"saveCORSnapshot",extra:{corId:r.corId}}),c}},async updateCORAggregatedStats(r){if(p)try{await _.rpc("update_cor_aggregated_stats",{p_cor_id:r})}catch(i){console.error("Error updating COR aggregated stats:",i)}},async getCrewCheckin(r,i=null){if(!p)return null;const c=i||new Date().toISOString().split("T")[0],s=jt(),{data:o,error:d}=await s.from("crew_checkins").select("*").eq("project_id",r).eq("check_in_date",c).single();return d&&d.code,o},async saveCrewCheckin(r,i,c=null,s=null){if(!p)return null;const o=s||new Date().toISOString().split("T")[0];if(!Ht()){const w={id:Bt(),project_id:r,check_in_date:o,workers:i,created_by:c,updated_at:new Date().toISOString(),_offline:!0};return await Lu(w),await Ut(Ze.SAVE_CREW_CHECKIN,{projectId:r,workers:i,checkInDate:o}),w}const d=jt(),{data:h,error:g}=await d.from("crew_checkins").upsert({project_id:r,check_in_date:o,workers:i,created_by:c,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(g){if(g.message?.includes("fetch")||g.message?.includes("network")){const w={id:Bt(),project_id:r,check_in_date:o,workers:i,_offline:!0};return await Lu(w),await Ut(Ze.SAVE_CREW_CHECKIN,{projectId:r,workers:i,checkInDate:o}),w}throw console.error("Error saving crew checkin:",g),g}return h&&Lu(h).catch(w=>console.error("Failed to cache checkin:",w)),h},async addCrewMember(r,i,c=null){if(!p)return null;const s=await this.getCrewCheckin(r),o=s?.workers||[];return o.find(d=>d.name.toLowerCase()===i.name.toLowerCase())?s:(o.push(i),await this.saveCrewCheckin(r,o,c))},async removeCrewMember(r,i){if(!p)return null;const c=await this.getCrewCheckin(r);if(!c)return null;const s=c.workers.filter(o=>o.name.toLowerCase()!==i.toLowerCase());return await this.saveCrewCheckin(r,s,c.created_by)},async getCrewCheckinHistory(r,i=30){if(!p)return[];const{data:c,error:s}=await _.from("crew_checkins").select("*").eq("project_id",r).order("check_in_date",{ascending:!1}).limit(i);return s?(console.error("Error fetching crew history:",s),[]):c||[]},async getLaborRates(r,i=null,c=null){if(!p)return[];let s=_.from("labor_rates").select("*").eq("company_id",r);i&&(s=s.eq("work_type",i)),c&&(s=s.eq("job_type",c));const{data:o,error:d}=await s;return d?(console.error("Error fetching labor rates:",d),[]):o||[]},async calculateManDayCosts(r,i,c,s){if(!p)return{totalCost:0,totalManDays:0,breakdown:[]};const o=await this.getCrewCheckinHistory(r,365),d=await this.getLaborRates(i,c,s),h={};d.forEach(N=>{h[N.role.toLowerCase()]=parseFloat(N.regular_rate)||0});let g=0,w=0;const M={},R=[];return o.forEach(N=>{const G=N.workers||[];let Z=0;const V={};G.forEach(B=>{const ie=(B.role||"laborer").toLowerCase(),_e=h[ie]||0;V[ie]||(V[ie]={count:0,cost:0}),V[ie].count++,V[ie].cost+=_e,Z+=_e,M[ie]||(M[ie]={count:0,cost:0,rate:_e}),M[ie].count++,M[ie].cost+=_e}),g+=Z,w+=G.length,R.push({date:N.check_in_date,workers:G.length,cost:Z,breakdown:V})}),{totalCost:g,totalManDays:w,byRole:M,byDate:R,daysWorked:o.length}},async getDailyReport(r,i=null){if(!p)return null;const c=i||new Date().toISOString().split("T")[0],s=jt(),{data:o,error:d}=await s.from("daily_reports").select("*").eq("project_id",r).eq("report_date",c).single();return d&&d.code,o},async compileDailyReport(r,i=null){if(!p)return null;const c=i||new Date().toISOString().split("T")[0],s=jt(),o=await this.getCrewCheckin(r,c),{data:d}=await s.from("areas").select("*").eq("project_id",r),h=d?.filter(M=>M.status==="done"&&M.completed_at?.startsWith(c))||[],{data:g}=await s.from("t_and_m_tickets").select("*").eq("project_id",r).eq("work_date",c),w=g?.reduce((M,R)=>M+(R.photos?.length||0),0)||0;return{crew_count:o?.workers?.length||0,crew_list:o?.workers||[],tasks_completed:h.length,tasks_total:d?.length||0,completed_tasks:h.map(M=>({name:M.name,group:M.group_name})),tm_tickets_count:g?.length||0,photos_count:w}},async saveDailyReport(r,i,c=null){if(!p)return null;const s=c||new Date().toISOString().split("T")[0];if(!Ht()){const g={id:Bt(),project_id:r,report_date:s,...i,updated_at:new Date().toISOString(),_offline:!0};return await $n(g),g}const o=jt(),{data:d,error:h}=await o.from("daily_reports").upsert({project_id:r,report_date:s,...i,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const g={id:Bt(),project_id:r,report_date:s,...i,_offline:!0};return await $n(g),g}throw console.error("Error saving daily report:",h),h}return d&&$n(d).catch(g=>console.error("Failed to cache report:",g)),d},async submitDailyReport(r,i,c=null){if(!p)return null;const s=c||new Date().toISOString().split("T")[0];if(!Ht()){const g=await pp(r,s),w={id:Bt(),project_id:r,report_date:s,...g||{},status:"pending_sync",submitted_by:i,submitted_at:new Date().toISOString(),_offline:!0};return await $n(w),await Ut(Ze.SUBMIT_DAILY_REPORT,{projectId:r,reportData:g||{},submittedBy:i}),w}const o=await this.compileDailyReport(r,s),{data:d,error:h}=await _.from("daily_reports").upsert({project_id:r,report_date:s,...o,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:i,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const g={id:Bt(),project_id:r,report_date:s,...o,status:"pending_sync",submitted_by:i,_offline:!0};return await $n(g),await Ut(Ze.SUBMIT_DAILY_REPORT,{projectId:r,reportData:o,submittedBy:i}),g}throw console.error("Error submitting daily report:",h),h}return d&&$n(d).catch(g=>console.error("Failed to cache report:",g)),d},async getDailyReports(r,i=30){if(!p)return[];const{data:c,error:s}=await _.from("daily_reports").select("*").eq("project_id",r).order("report_date",{ascending:!1}).limit(i);return s?(console.error("Error fetching daily reports:",s),[]):c||[]},async sendMessage(r,i,c,s,o=null,d=null,h="general",g=null){if(!p)return null;if(!Ht()){const R={id:Bt(),project_id:r,sender_type:c,sender_name:s,sender_user_id:o,message:i,photo_url:d,message_type:h,parent_message_id:g,created_at:new Date().toISOString(),_offline:!0};return await om(R),await Ut(Ze.SEND_MESSAGE,{projectId:r,senderType:c,senderName:s,content:i}),R}const{data:w,error:M}=await _.from("messages").insert({project_id:r,sender_type:c,sender_name:s,sender_user_id:o,message:i,photo_url:d,message_type:h,parent_message_id:g}).select().single();if(M){if(M.message?.includes("fetch")||M.message?.includes("network")){const R={id:Bt(),project_id:r,sender_type:c,sender_name:s,message:i,created_at:new Date().toISOString(),_offline:!0};return await om(R),await Ut(Ze.SEND_MESSAGE,{projectId:r,senderType:c,senderName:s,content:i}),R}throw console.error("Error sending message:",M),M}return w},async getMessages(r,i=50){if(!p)return[];const c=jt(),{data:s,error:o}=await c.from("messages").select("*").eq("project_id",r).order("created_at",{ascending:!1}).limit(i);return o?[]:s||[]},async getUnreadCount(r,i){if(!p)return 0;const c=jt(),s=i==="field"?"office":"field",{count:o,error:d}=await c.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",r).eq("sender_type",s).eq("is_read",!1);return d?0:o||0},async markMessagesRead(r,i){if(!p)return;const c=jt(),s=i==="field"?"office":"field";await c.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",r).eq("sender_type",s).eq("is_read",!1)},async createMaterialRequest(r,i,c,s=null,o="normal",d=null){if(!p)return null;if(!Ht()){const w={id:Bt(),project_id:r,items:i,requested_by:c,needed_by:s,priority:o,notes:d,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await Ut(Ze.CREATE_MATERIAL_REQUEST,{projectId:r,items:i,requestedBy:c,neededBy:s,priority:o,notes:d}),w}const{data:h,error:g}=await _.from("material_requests").insert({project_id:r,items:i,requested_by:c,needed_by:s,priority:o,notes:d}).select().single();if(g){if(g.message?.includes("fetch")||g.message?.includes("network")){const w={id:Bt(),project_id:r,items:i,requested_by:c,status:"pending_sync",_offline:!0};return await Ut(Ze.CREATE_MATERIAL_REQUEST,{projectId:r,items:i,requestedBy:c,neededBy:s,priority:o,notes:d}),w}throw console.error("Error creating material request:",g),g}return h},async getMaterialRequests(r,i=null){if(!p)return[];let c=_.from("material_requests").select("*").eq("project_id",r).order("created_at",{ascending:!1});i&&(c=c.eq("status",i));const{data:s,error:o}=await c;return o?(console.error("Error fetching material requests:",o),[]):s||[]},async getPendingRequestsCount(r){if(!p)return 0;const{count:i,error:c}=await _.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",r).eq("status","pending");return c?0:i||0},async updateMaterialRequest(r,i,c,s=null,o=null){if(!p)return null;const d={status:i,responded_by:c,responded_at:new Date().toISOString(),response_notes:s,updated_at:new Date().toISOString()};o&&(d.expected_delivery=o),i==="delivered"&&(d.delivered_at=new Date().toISOString());const{data:h,error:g}=await _.from("material_requests").update(d).eq("id",r).select().single();if(g)throw console.error("Error updating material request:",g),g;return h},generateShareToken(){const r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i=new Uint8Array(12);return crypto.getRandomValues(i),Array.from(i,c=>r[c%r.length]).join("")},async createProjectShare(r,i,c,s=null){if(!p){const w=L();w.projectShares||(w.projectShares=[]);const M={id:crypto.randomUUID(),project_id:r,share_token:this.generateShareToken(),created_by:i,expires_at:s,is_active:!0,permissions:c,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return w.projectShares.push(M),re(w),M}const{data:o,error:d}=await _.rpc("generate_share_token");if(d)throw console.error("Error generating share token:",d),d;const{data:h,error:g}=await _.from("project_shares").insert({project_id:r,share_token:o,created_by:i,expires_at:s,permissions:c}).select().single();if(g)throw console.error("Error creating project share:",g),g;return h},async getShareByToken(r){if(!p){const s=L();if(!s.projectShares)return null;const o=s.projectShares.find(d=>d.share_token===r&&d.is_active&&(!d.expires_at||new Date(d.expires_at)>new Date));return o&&(o.view_count++,o.last_viewed_at=new Date().toISOString(),re(s)),o}const{data:i,error:c}=await _.from("project_shares").select("*, projects(*)").eq("share_token",r).eq("is_active",!0).single();return c?(console.error("Error fetching share by token:",c),null):i.expires_at&&new Date(i.expires_at)<new Date?null:(await _.rpc("increment_share_view_count",{token:r}),i)},async getProjectShares(r){if(!p){const s=L();return s.projectShares?s.projectShares.filter(o=>o.project_id===r):[]}const{data:i,error:c}=await _.from("project_shares").select("*, users(name, email)").eq("project_id",r).order("created_at",{ascending:!1});return c?(console.error("Error fetching project shares:",c),[]):i||[]},async updateProjectShare(r,i){if(!p){const o=L();if(!o.projectShares)return null;const d=o.projectShares.findIndex(h=>h.id===r);return d===-1?null:(o.projectShares[d]={...o.projectShares[d],...i,updated_at:new Date().toISOString()},re(o),o.projectShares[d])}const{data:c,error:s}=await _.from("project_shares").update(i).eq("id",r).select().single();if(s)throw console.error("Error updating project share:",s),s;return c},async revokeProjectShare(r){return this.updateProjectShare(r,{is_active:!1})},async deleteProjectShare(r){if(!p){const c=L();if(!c.projectShares)return;c.projectShares=c.projectShares.filter(s=>s.id!==r),re(c);return}const{error:i}=await _.from("project_shares").delete().eq("id",r);if(i)throw console.error("Error deleting project share:",i),i},async getPublicProjectData(r){const i=await this.getShareByToken(r);if(!i)return null;const c=i.project_id||i.projects?.id;if(!p){const d=L(),h=d.projects.find(N=>N.id===c);if(!h)return null;const g=d.areas.filter(N=>N.project_id===c),w=g.reduce((N,G)=>N+parseFloat(G.weight||0),0),M=g.filter(N=>N.status==="done").reduce((N,G)=>N+parseFloat(G.weight||0),0),R=w>0?Math.round(M/w*100):0;return{share:i,project:h,progress:R,areas:i.permissions.progress?g:[],photos:[],dailyReports:[],tmTickets:[]}}const s=i.projects||await this.getProject(c);if(!s)return null;const o={share:i,project:s,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(i.permissions.progress){o.areas=await this.getAreas(c);const d=o.areas.reduce((g,w)=>g+parseFloat(w.weight||0),0),h=o.areas.filter(g=>g.status==="done").reduce((g,w)=>g+parseFloat(w.weight||0),0);o.progress=d>0?Math.round(h/d*100):0}if(i.permissions.photos){const{data:d}=await _.from("t_and_m_tickets").select("photos, work_date").eq("project_id",c).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);o.photos=d?.flatMap(h=>(h.photos||[]).map(g=>({url:g,date:h.work_date})))||[]}if(i.permissions.daily_reports){const{data:d}=await _.from("daily_reports").select("*").eq("project_id",c).order("report_date",{ascending:!1}).limit(10);o.dailyReports=d||[]}return i.permissions.tm_tickets&&(o.tmTickets=await this.getTMTickets(c)),o},async createInjuryReport(r){if(!p){const s=L();s.injuryReports||(s.injuryReports=[]);const o={id:crypto.randomUUID(),...r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s.injuryReports.push(o),re(s),o}const{data:i,error:c}=await _.from("injury_reports").insert(r).select().single();if(c)throw console.error("Error creating injury report:",c),c;return i},async getInjuryReports(r){if(!p){const s=L();return s.injuryReports?s.injuryReports.filter(o=>o.project_id===r).sort((o,d)=>new Date(d.incident_date)-new Date(o.incident_date)):[]}const{data:i,error:c}=await _.from("injury_reports").select("*").eq("project_id",r).order("incident_date",{ascending:!1});return c?(console.error("Error fetching injury reports:",c),[]):i||[]},async getCompanyInjuryReports(r,i=null){if(!p){const d=L();if(!d.injuryReports)return[];let h=d.injuryReports.filter(g=>g.company_id===r);return i&&(h=h.filter(g=>g.status===i)),h.sort((g,w)=>new Date(w.incident_date)-new Date(g.incident_date))}let c=_.from("injury_reports").select("*, projects(name)").eq("company_id",r).order("incident_date",{ascending:!1});i&&(c=c.eq("status",i));const{data:s,error:o}=await c;return o?(console.error("Error fetching company injury reports:",o),[]):s||[]},async getInjuryReport(r){if(!p){const s=L();return s.injuryReports?s.injuryReports.find(o=>o.id===r):null}const{data:i,error:c}=await _.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",r).single();return c?(console.error("Error fetching injury report:",c),null):i},async updateInjuryReport(r,i){if(!p){const o=L();if(!o.injuryReports)return null;const d=o.injuryReports.findIndex(h=>h.id===r);return d===-1?null:(o.injuryReports[d]={...o.injuryReports[d],...i,updated_at:new Date().toISOString()},re(o),o.injuryReports[d])}const{data:c,error:s}=await _.from("injury_reports").update(i).eq("id",r).select().single();if(s)throw console.error("Error updating injury report:",s),s;return c},async closeInjuryReport(r,i){return this.updateInjuryReport(r,{status:"closed",closed_at:new Date().toISOString(),closed_by:i})},async deleteInjuryReport(r){if(!p){const c=L();if(!c.injuryReports)return;c.injuryReports=c.injuryReports.filter(s=>s.id!==r),re(c);return}const{error:i}=await _.from("injury_reports").delete().eq("id",r);if(i)throw console.error("Error deleting injury report:",i),i},async getInjuryStatistics(r,i=null,c=null){if(!p){const d=L();if(!d.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let h=d.injuryReports.filter(g=>g.company_id===r);return i&&(h=h.filter(g=>new Date(g.incident_date)>=new Date(i))),c&&(h=h.filter(g=>new Date(g.incident_date)<=new Date(c))),{total_incidents:h.length,minor_injuries:h.filter(g=>g.injury_type==="minor").length,serious_injuries:h.filter(g=>g.injury_type==="serious").length,critical_injuries:h.filter(g=>g.injury_type==="critical").length,near_misses:h.filter(g=>g.injury_type==="near_miss").length,osha_recordable:h.filter(g=>g.osha_recordable).length,total_days_away:h.reduce((g,w)=>g+(w.days_away_from_work||0),0),total_restricted_days:h.reduce((g,w)=>g+(w.restricted_work_days||0),0)}}const{data:s,error:o}=await _.rpc("get_injury_statistics",{comp_id:r,start_date:i,end_date:c});return o?(console.error("Error fetching injury statistics:",o),null):s[0]||null},async addWitness(r,i){if(!p){const o=L();if(!o.injuryReports)return null;const d=o.injuryReports.findIndex(w=>w.id===r);if(d===-1)return null;const h=o.injuryReports[d],g=h.witnesses||[];return g.push(i),o.injuryReports[d]={...h,witnesses:g,updated_at:new Date().toISOString()},re(o),o.injuryReports[d]}const c=await this.getInjuryReport(r);if(!c)return null;const s=c.witnesses||[];return s.push(i),this.updateInjuryReport(r,{witnesses:s})},async removeWitness(r,i){if(!p){const o=L();if(!o.injuryReports)return null;const d=o.injuryReports.findIndex(w=>w.id===r);if(d===-1)return null;const h=o.injuryReports[d],g=h.witnesses||[];return g.splice(i,1),o.injuryReports[d]={...h,witnesses:g,updated_at:new Date().toISOString()},re(o),o.injuryReports[d]}const c=await this.getInjuryReport(r);if(!c)return null;const s=c.witnesses||[];return s.splice(i,1),this.updateInjuryReport(r,{witnesses:s})},async getCompanyUsers(r){if(p){const{data:i,error:c}=await _.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",r);return c?(console.error("Error fetching company users:",c),[]):i?.map(s=>({id:s.user_id,name:s.users?.name||s.users?.email,email:s.users?.email,role:s.role}))||[]}return[]},async getProjectNotificationPreferences(r){if(p){const{data:c,error:s}=await _.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",r);return s?(console.error("Error fetching notification preferences:",s),[]):c||[]}const i=L();return i.notificationPreferences?i.notificationPreferences.filter(c=>c.project_id===r):[]},async getUserNotificationPreferences(r){if(p){const{data:c,error:s}=await _.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",r);return s?(console.error("Error fetching user notification preferences:",s),[]):c||[]}const i=L();return i.notificationPreferences?i.notificationPreferences.filter(c=>c.user_id===r):[]},async setNotificationPreference(r,i,c){if(p){const{data:h,error:g}=await _.from("notification_preferences").upsert({project_id:r,user_id:i,notification_types:c,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(g)throw console.error("Error setting notification preference:",g),g;return h}const s=L();s.notificationPreferences||(s.notificationPreferences=[]);const o=s.notificationPreferences.findIndex(h=>h.project_id===r&&h.user_id===i),d={id:o>=0?s.notificationPreferences[o].id:crypto.randomUUID(),project_id:r,user_id:i,notification_types:c,created_at:o>=0?s.notificationPreferences[o].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return o>=0?s.notificationPreferences[o]=d:s.notificationPreferences.push(d),re(s),d},async removeNotificationPreference(r,i){if(p){const{error:s}=await _.from("notification_preferences").delete().eq("project_id",r).eq("user_id",i);if(s)throw console.error("Error removing notification preference:",s),s;return!0}const c=L();return c.notificationPreferences&&(c.notificationPreferences=c.notificationPreferences.filter(s=>!(s.project_id===r&&s.user_id===i)),re(c)),!0},async setProjectNotificationPreferences(r,i){const c=[];for(const s of i)if(s.notificationTypes&&s.notificationTypes.length>0){const o=await this.setNotificationPreference(r,s.userId,s.notificationTypes);c.push(o)}else await this.removeNotificationPreference(r,s.userId);return c},async getNotificationPresets(r){if(p){const{data:c,error:s}=await _.from("notification_presets").select("*").eq("company_id",r).order("name");return s?(console.error("Error fetching notification presets:",s),[]):c||[]}const i=L();return i.notificationPresets?i.notificationPresets.filter(c=>c.company_id===r):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:r},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:r},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:r},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:r}]},async createNotificationPreset(r,i,c){if(p){const{data:d,error:h}=await _.from("notification_presets").insert({company_id:r,name:i,notification_types:c}).select().single();if(h)throw console.error("Error creating notification preset:",h),h;return d}const s=L();s.notificationPresets||(s.notificationPresets=[]);const o={id:crypto.randomUUID(),company_id:r,name:i,notification_types:c,created_at:new Date().toISOString()};return s.notificationPresets.push(o),re(s),o},async updateNotificationPreset(r,i,c){if(p){const{data:d,error:h}=await _.from("notification_presets").update({name:i,notification_types:c,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(h)throw console.error("Error updating notification preset:",h),h;return d}const s=L();if(!s.notificationPresets)return null;const o=s.notificationPresets.findIndex(d=>d.id===r);return o===-1?null:(s.notificationPresets[o]={...s.notificationPresets[o],name:i,notification_types:c,updated_at:new Date().toISOString()},re(s),s.notificationPresets[o])},async deleteNotificationPreset(r){if(p){const{error:c}=await _.from("notification_presets").delete().eq("id",r);if(c)throw console.error("Error deleting notification preset:",c),c;return!0}const i=L();return i.notificationPresets&&(i.notificationPresets=i.notificationPresets.filter(c=>c.id!==r),re(i)),!0},async getDumpSites(r){if(p){const{data:c,error:s}=await _.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",r).eq("active",!0).order("name");return s?(console.error("Error fetching dump sites:",s),[]):c||[]}return(L().dumpSites||[]).filter(c=>c.company_id===r&&c.active)},async createDumpSite(r,i,c="",s=""){if(p){const{data:h,error:g}=await _.from("dump_sites").insert({company_id:r,name:i,address:c,notes:s,active:!0}).select().single();if(g)throw console.error("Error creating dump site:",g),g;return h}const o=L();o.dumpSites||(o.dumpSites=[]);const d={id:crypto.randomUUID(),company_id:r,name:i,address:c,notes:s,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return o.dumpSites.push(d),re(o),d},async updateDumpSite(r,i){if(p){const{data:o,error:d}=await _.from("dump_sites").update({...i,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(d)throw console.error("Error updating dump site:",d),d;return o}const c=L();if(!c.dumpSites)return null;const s=c.dumpSites.findIndex(o=>o.id===r);return s===-1?null:(c.dumpSites[s]={...c.dumpSites[s],...i},re(c),c.dumpSites[s])},async deleteDumpSite(r){return this.updateDumpSite(r,{active:!1})},async setDumpSiteRate(r,i,c,s="load"){if(p){const{data:g}=await _.from("dump_site_rates").select("id").eq("dump_site_id",r).eq("waste_type",i).maybeSingle();if(g){const{data:w,error:M}=await _.from("dump_site_rates").update({estimated_cost_per_load:c,unit:s}).eq("id",g.id).select().single();if(M)throw console.error("Error updating dump site rate:",M),M;return w}else{const{data:w,error:M}=await _.from("dump_site_rates").insert({dump_site_id:r,waste_type:i,estimated_cost_per_load:c,unit:s}).select().single();if(M)throw console.error("Error inserting dump site rate:",M),M;return w}}const o=L();o.dumpSiteRates||(o.dumpSiteRates=[]);const d=o.dumpSiteRates.findIndex(g=>g.dump_site_id===r&&g.waste_type===i),h={id:d>=0?o.dumpSiteRates[d].id:crypto.randomUUID(),dump_site_id:r,waste_type:i,estimated_cost_per_load:c,unit:s,created_at:new Date().toISOString()};return d>=0?o.dumpSiteRates[d]=h:o.dumpSiteRates.push(h),re(o),h},async getDumpSiteRates(r){if(p){const{data:c,error:s}=await _.from("dump_site_rates").select("*").eq("dump_site_id",r);return s?(console.error("Error fetching dump site rates:",s),[]):c||[]}return(L().dumpSiteRates||[]).filter(c=>c.dump_site_id===r)},async getHaulOffs(r){if(p){const{data:c,error:s}=await _.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",r).order("work_date",{ascending:!1});return s?(console.error("Error fetching haul-offs:",s),[]):c||[]}return(L().haulOffs||[]).filter(c=>c.project_id===r).sort((c,s)=>new Date(s.work_date)-new Date(c.work_date))},async createHaulOff(r,i){const c={project_id:r,dump_site_id:i.dumpSiteId,waste_type:i.wasteType,loads:i.loads,hauling_company:i.haulingCompany||"",work_date:i.workDate,notes:i.notes||"",estimated_cost:i.estimatedCost||0,created_by:i.createdBy||""};if(p){const{data:d,error:h}=await _.from("haul_offs").insert(c).select().single();if(h)throw console.error("Error creating haul-off:",h),h;return d}const s=L();s.haulOffs||(s.haulOffs=[]);const o={...c,id:crypto.randomUUID(),created_at:new Date().toISOString()};return s.haulOffs.push(o),re(s),o},async calculateHaulOffCosts(r){const i=await this.getHaulOffs(r);let c=0,s=0;const o={},d=[],h={};i.forEach(w=>{const M=parseFloat(w.estimated_cost)||0,R=parseInt(w.loads)||0;c+=M,s+=R,o[w.waste_type]||(o[w.waste_type]={loads:0,cost:0}),o[w.waste_type].loads+=R,o[w.waste_type].cost+=M,h[w.work_date]||(h[w.work_date]={date:w.work_date,loads:0,cost:0}),h[w.work_date].loads+=R,h[w.work_date].cost+=M}),Object.values(h).sort((w,M)=>new Date(M.date)-new Date(w.date)).forEach(w=>d.push(w));const g=d.length;return{totalCost:c,totalLoads:s,byWasteType:o,byDate:d,daysWithHaulOff:g,avgDailyHaulOffCost:g>0?c/g:0}},subscribeToHaulOffs(r,i){return p?_.channel(`haul_offs:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${r}`},i).subscribe():null},async createCOR(r,i=0){if(p){let c=r.cor_number;i>0&&(c=await this.getNextCORNumber(r.project_id));const{data:s,error:o}=await _.from("change_orders").insert({company_id:r.company_id,project_id:r.project_id,area_id:r.area_id||null,cor_number:c,title:r.title,description:r.description||"",scope_of_work:r.scope_of_work,period_start:r.period_start,period_end:r.period_end,status:"draft",labor_markup_percent:r.labor_markup_percent??1500,materials_markup_percent:r.materials_markup_percent??1500,equipment_markup_percent:r.equipment_markup_percent??1500,subcontractors_markup_percent:r.subcontractors_markup_percent??500,liability_insurance_percent:r.liability_insurance_percent??144,bond_percent:r.bond_percent??100,license_fee_percent:r.license_fee_percent??10,created_by:r.created_by||null}).select().single();if((o?.code==="23505"||o?.code==="PGRST116"||o?.status===409||o?.message?.includes("duplicate")||o?.message?.includes("unique_cor_number"))&&i<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${i+1})`),this.createCOR(r,i+1);if(o)throw o;return s}return null},async updateCOR(r,i){if(p){const{data:c,error:s}=await _.from("change_orders").update({...i,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(s)throw s;return c}return null},async deleteCOR(r){if(p){const{error:i}=await _.from("change_orders").delete().eq("id",r);if(i)throw i}},async bulkUpdateCORGroup(r,i){if(p){const{error:c}=await _.from("change_orders").update({group_name:i,updated_at:new Date().toISOString()}).in("id",r);if(c)throw c.message?.includes("group_name")||c.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):c}},async getCORs(r,i={}){if(p){let c=_.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",r);i.status&&(c=c.eq("status",i.status)),i.area_id&&(c=c.eq("area_id",i.area_id)),i.date_start&&(c=c.gte("period_start",i.date_start)),i.date_end&&(c=c.lte("period_end",i.date_end)),c=c.order("created_at",{ascending:!1});const{data:s,error:o}=await c;if(o)throw o;return s}return[]},async getCORById(r){if(p){const{data:i,error:c}=await _.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",r).single();if(c)throw c;return i}return null},async getCORsByArea(r,i){if(p){const{data:c,error:s}=await _.from("change_orders").select("*").eq("project_id",r).eq("area_id",i).order("created_at",{ascending:!1});if(s)throw s;return c}return[]},async getAssignableCORs(r){if(p){const{data:i,error:c}=await _.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",r).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(c)throw c;return i||[]}return[]},async getNextCORNumber(r){if(p){const{data:i,error:c}=await _.from("change_orders").select("cor_number").eq("project_id",r);if(c)throw c;if(i&&i.length>0){let s=0;for(const o of i){const d=o.cor_number?.match(/COR #(\d+)/);if(d){const h=parseInt(d[1]);h>s&&(s=h)}}return`COR #${s+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(r,i){if(p){const c=Math.round(i.regular_hours*i.regular_rate),s=Math.round(i.overtime_hours*i.overtime_rate),o=c+s,{data:d,error:h}=await _.from("change_order_labor").insert({change_order_id:r,labor_class:i.labor_class,wage_type:i.wage_type||"standard",regular_hours:i.regular_hours||0,overtime_hours:i.overtime_hours||0,regular_rate:i.regular_rate||0,overtime_rate:i.overtime_rate||0,regular_total:c,overtime_total:s,total:o,sort_order:i.sort_order||0,source_ticket_id:i.source_ticket_id||null}).select().single();if(h)throw h;return d}return null},async updateCORLaborItem(r,i){if(p){let c={...i};if(i.regular_hours!==void 0||i.regular_rate!==void 0||i.overtime_hours!==void 0||i.overtime_rate!==void 0){const{data:d}=await _.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",r).single(),h=i.regular_hours??d?.regular_hours??0,g=i.overtime_hours??d?.overtime_hours??0,w=i.regular_rate??d?.regular_rate??0,M=i.overtime_rate??d?.overtime_rate??0;c.regular_total=Math.round(h*w),c.overtime_total=Math.round(g*M),c.total=c.regular_total+c.overtime_total}const{data:s,error:o}=await _.from("change_order_labor").update(c).eq("id",r).select().single();if(o)throw o;return s}return null},async deleteCORLaborItem(r){if(p){const{error:i}=await _.from("change_order_labor").delete().eq("id",r);if(i)throw i}},async addCORMaterialItem(r,i){if(p){const s=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(i.source_type)?i.source_type:"custom",o=Math.round(Number(i.unit_cost)||0),d=Number(i.quantity)||1,h=Math.round(d*o),{data:g,error:w}=await _.from("change_order_materials").insert({change_order_id:r,description:i.description||"",quantity:d,unit:i.unit||"each",unit_cost:o,total:h,source_type:s,source_reference:i.source_reference||null,source_ticket_id:i.source_ticket_id||null,sort_order:i.sort_order||0}).select().single();if(w)throw w;return g}return null},async updateCORMaterialItem(r,i){if(p){let c={...i};if(i.quantity!==void 0||i.unit_cost!==void 0){const{data:d}=await _.from("change_order_materials").select("quantity, unit_cost").eq("id",r).single(),h=i.quantity??d?.quantity??1,g=i.unit_cost??d?.unit_cost??0;c.total=Math.round(h*g)}const{data:s,error:o}=await _.from("change_order_materials").update(c).eq("id",r).select().single();if(o)throw o;return s}return null},async deleteCORMaterialItem(r){if(p){const{error:i}=await _.from("change_order_materials").delete().eq("id",r);if(i)throw i}},async addCOREquipmentItem(r,i){if(p){const s=["backup_sheet","invoice","custom","field_ticket","rental"].includes(i.source_type)?i.source_type:"custom",o=Math.round(Number(i.unit_cost)||0),d=Number(i.quantity)||1,h=Math.round(d*o),{data:g,error:w}=await _.from("change_order_equipment").insert({change_order_id:r,description:i.description||"",quantity:d,unit:i.unit||"day",unit_cost:o,total:h,source_type:s,source_reference:i.source_reference||null,source_ticket_id:i.source_ticket_id||null,sort_order:i.sort_order||0}).select().single();if(w)throw w;return g}return null},async updateCOREquipmentItem(r,i){if(p){let c={...i};if(i.quantity!==void 0||i.unit_cost!==void 0){const{data:d}=await _.from("change_order_equipment").select("quantity, unit_cost").eq("id",r).single(),h=i.quantity??d?.quantity??1,g=i.unit_cost??d?.unit_cost??0;c.total=Math.round(h*g)}const{data:s,error:o}=await _.from("change_order_equipment").update(c).eq("id",r).select().single();if(o)throw o;return s}return null},async deleteCOREquipmentItem(r){if(p){const{error:i}=await _.from("change_order_equipment").delete().eq("id",r);if(i)throw i}},async addCORSubcontractorItem(r,i){if(p){const c=Math.round(i.quantity*i.unit_cost),{data:s,error:o}=await _.from("change_order_subcontractors").insert({change_order_id:r,description:i.description,quantity:i.quantity||1,unit:i.unit||"lump sum",unit_cost:i.unit_cost||0,total:c,source_type:i.source_type||"custom",source_reference:i.source_reference||null,sort_order:i.sort_order||0}).select().single();if(o)throw o;return s}return null},async updateCORSubcontractorItem(r,i){if(p){let c={...i};if(i.quantity!==void 0||i.unit_cost!==void 0){const{data:d}=await _.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",r).single(),h=i.quantity??d?.quantity??1,g=i.unit_cost??d?.unit_cost??0;c.total=Math.round(h*g)}const{data:s,error:o}=await _.from("change_order_subcontractors").update(c).eq("id",r).select().single();if(o)throw o;return s}return null},async deleteCORSubcontractorItem(r){if(p){const{error:i}=await _.from("change_order_subcontractors").delete().eq("id",r);if(i)throw i}},async addBulkLaborItems(r,i){if(p&&i.length>0){const c=i.map((d,h)=>{const g=Math.round(d.regular_hours*d.regular_rate),w=Math.round(d.overtime_hours*d.overtime_rate);return{change_order_id:r,labor_class:d.labor_class,wage_type:d.wage_type||"standard",regular_hours:d.regular_hours||0,overtime_hours:d.overtime_hours||0,regular_rate:d.regular_rate||0,overtime_rate:d.overtime_rate||0,regular_total:g,overtime_total:w,total:g+w,sort_order:d.sort_order??h,source_ticket_id:d.source_ticket_id||null}}),{data:s,error:o}=await _.from("change_order_labor").insert(c).select();if(o)throw o;return s}return[]},async addBulkMaterialItems(r,i){if(p&&i.length>0){const c=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],s=i.map((h,g)=>{const w=c.includes(h.source_type)?h.source_type:"custom",M=Math.round(Number(h.unit_cost)||0),R=Number(h.quantity)||1;return{change_order_id:r,description:h.description||"",quantity:R,unit:h.unit||"each",unit_cost:M,total:Math.round(R*M),source_type:w,source_reference:h.source_reference||null,source_ticket_id:h.source_ticket_id||null,sort_order:h.sort_order??g}}),{data:o,error:d}=await _.from("change_order_materials").insert(s).select();if(d)throw d;return o}return[]},async addBulkEquipmentItems(r,i){if(p&&i.length>0){const c=["backup_sheet","invoice","custom","field_ticket","rental"],s=i.map((h,g)=>{const w=c.includes(h.source_type)?h.source_type:"custom",M=Math.round(Number(h.unit_cost)||0),R=Number(h.quantity)||1;return{change_order_id:r,description:h.description||"",quantity:R,unit:h.unit||"day",unit_cost:M,total:Math.round(R*M),source_type:w,source_reference:h.source_reference||null,source_ticket_id:h.source_ticket_id||null,sort_order:h.sort_order??g}}),{data:o,error:d}=await _.from("change_order_equipment").insert(s).select();if(d)throw d;return o}return[]},async addBulkSubcontractorItems(r,i){if(p&&i.length>0){const c=i.map((d,h)=>({change_order_id:r,company_name:d.company_name||"",description:d.description||"",quantity:d.quantity||1,unit:d.unit||"lump sum",unit_cost:d.unit_cost||d.total||d.amount||0,total:d.total||d.amount||0,source_type:d.source_type||"invoice",source_reference:d.source_reference||null,sort_order:d.sort_order??h})),{data:s,error:o}=await _.from("change_order_subcontractors").insert(c).select();if(o)throw o;return s}return[]},async clearCORLineItems(r){p&&(await _.from("change_order_labor").delete().eq("change_order_id",r),await _.from("change_order_materials").delete().eq("change_order_id",r),await _.from("change_order_equipment").delete().eq("change_order_id",r),await _.from("change_order_subcontractors").delete().eq("change_order_id",r))},async saveCORLineItems(r,{laborItems:i,materialItems:c,equipmentItems:s,subcontractorItems:o}){if(p){await this.clearCORLineItems(r);const d=await Promise.all([i?.length>0?this.addBulkLaborItems(r,i):[],c?.length>0?this.addBulkMaterialItems(r,c):[],s?.length>0?this.addBulkEquipmentItems(r,s):[],o?.length>0?this.addBulkSubcontractorItems(r,o):[]]);return{labor:d[0],materials:d[1],equipment:d[2],subcontractors:d[3]}}return null},async assignTicketToCOR(r,i){if(p){const{error:c}=await _.rpc("assign_ticket_to_cor",{p_ticket_id:r,p_cor_id:i});if(c)throw I.error("database",{message:c.message,operation:"assignTicketToCOR",extra:{ticketId:r,corId:i}}),c;return{ticket_id:r,change_order_id:i}}return null},async unassignTicketFromCOR(r,i){if(p){const{error:c}=await _.rpc("unassign_ticket_from_cor",{p_ticket_id:r,p_cor_id:i});if(c)throw I.error("database",{message:c.message,operation:"unassignTicketFromCOR",extra:{ticketId:r,corId:i}}),c}},async checkTicketCORIntegrity(){if(p){const{data:r,error:i}=await _.rpc("check_ticket_cor_integrity");if(i)throw i;return r||[]}return[]},async fixTicketCORIntegrity(){if(p){const{data:r,error:i}=await _.rpc("fix_ticket_cor_integrity");if(i)throw i;return r}return 0},async getTicketsForCOR(r){if(p){const{data:i,error:c}=await _.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",r);if(c)throw c;return i}return[]},async getUnassignedTickets(r){if(p){const{data:i,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",r).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(c)throw c;return i}return[]},async importTicketDataToCOR(r,i,c,s,o){if(p){const{data:d,error:h}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",r).single();if(h)throw h;const{data:g,error:w}=await _.from("labor_rates").select("*").eq("company_id",c).eq("work_type",s||"demolition").eq("job_type",o||"standard");if(w)throw w;const M={};g?.forEach(B=>{M[B.role.toLowerCase()]=B});const R={};d.t_and_m_workers?.forEach(B=>{const ie=(B.role||"laborer").toLowerCase();R[ie]||(R[ie]={regular_hours:0,overtime_hours:0}),R[ie].regular_hours+=parseFloat(B.hours)||0,R[ie].overtime_hours+=parseFloat(B.overtime_hours)||0});const N=Object.entries(R).map(([B,ie])=>{const _e=M[B]||{regular_rate:0,overtime_rate:0},he=Math.round((parseFloat(_e.regular_rate)||0)*100),$=Math.round((parseFloat(_e.overtime_rate)||0)*100);return{labor_class:B.charAt(0).toUpperCase()+B.slice(1),wage_type:o||"standard",regular_hours:ie.regular_hours,overtime_hours:ie.overtime_hours,regular_rate:he,overtime_rate:$,source_ticket_id:r}});N.length>0&&await this.addBulkLaborItems(i,N);const G=[],Z=[];d.t_and_m_items?.forEach(B=>{const ie=B.custom_name||B.materials_equipment?.name||"Unknown Item",_e=B.custom_category||B.materials_equipment?.category||"Other",he=B.materials_equipment?.unit||"each",$=Math.round((parseFloat(B.materials_equipment?.cost_per_unit)||0)*100),J={description:ie,quantity:B.quantity||1,unit:he,unit_cost:$,source_type:"backup_sheet",source_ticket_id:r};_e==="Equipment"?Z.push(J):G.push(J)}),G.length>0&&await this.addBulkMaterialItems(i,G),Z.length>0&&await this.addBulkEquipmentItems(i,Z);const{error:V}=await _.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",i).eq("ticket_id",r);if(V)throw V;return I.activity("cor_import_success",{ticket_id:r,cor_id:i,labor_count:N.length,material_count:G.length,equipment_count:Z.length}),{laborItems:N,materialItems:G,equipmentItems:Z}}return null},async reimportTicketDataToCOR(r,i,c,s,o){return p?(await _.from("change_order_labor").delete().eq("change_order_id",i).eq("source_ticket_id",r),await _.from("change_order_materials").delete().eq("change_order_id",i).eq("source_ticket_id",r),await _.from("change_order_equipment").delete().eq("change_order_id",i).eq("source_ticket_id",r),this.importTicketDataToCOR(r,i,c,s,o)):null},async markImportFailed(r,i,c="Import failed"){if(p){const{error:s}=await _.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:c}).eq("change_order_id",i).eq("ticket_id",r);if(s)throw I.error("database",{message:s.message,operation:"markImportFailed",extra:{ticketId:r,corId:i}}),s;I.error("cor_import_failed",{ticket_id:r,cor_id:i,error:c})}},async getTicketsNeedingImport(r){if(p){const{data:i,error:c}=await _.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",r).eq("change_order_ticket_associations.import_status","failed");if(c)throw c;return i||[]}return[]},async getTicketImportStatus(r,i){if(p){const{data:c,error:s}=await _.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",r).eq("change_order_id",i).single();if(s&&s.code!=="PGRST116")throw s;return c}return null},async recalculateCOR(r){if(p){const{error:i}=await _.rpc("recalculate_cor_totals",{cor_id:r});if(i)throw i;return this.getCORById(r)}return null},async updateCORMarkupPercentages(r,i){if(p){const c={};i.labor!==void 0&&(c.labor_markup_percent=i.labor),i.materials!==void 0&&(c.materials_markup_percent=i.materials),i.equipment!==void 0&&(c.equipment_markup_percent=i.equipment),i.subcontractors!==void 0&&(c.subcontractors_markup_percent=i.subcontractors);const{data:s,error:o}=await _.from("change_orders").update(c).eq("id",r).select().single();if(o)throw o;return s}return null},async updateCORFeePercentages(r,i){if(p){const c={};i.liabilityInsurance!==void 0&&(c.liability_insurance_percent=i.liabilityInsurance),i.bond!==void 0&&(c.bond_percent=i.bond),i.licenseFee!==void 0&&(c.license_fee_percent=i.licenseFee);const{data:s,error:o}=await _.from("change_orders").update(c).eq("id",r).select().single();if(o)throw o;return s}return null},async submitCORForApproval(r){if(p){const{data:i,error:c}=await _.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",r).select().single();if(c)throw c;return i}return null},async approveCOR(r,i){if(p){const{data:c,error:s}=await _.from("change_orders").update({status:"approved",approved_by:i,approved_at:new Date().toISOString()}).eq("id",r).select().single();if(s)throw s;return c}return null},async rejectCOR(r,i=null){if(p){const{data:c,error:s}=await _.from("change_orders").update({status:"rejected",rejection_reason:i}).eq("id",r).select().single();if(s)throw s;return c}return null},async markCORAsBilled(r){if(p){const{data:i,error:c}=await _.from("change_orders").update({status:"billed"}).eq("id",r).select().single();if(c)throw c;return i}return null},async closeCOR(r){if(p){const{data:i,error:c}=await _.from("change_orders").update({status:"closed"}).eq("id",r).select().single();if(c)throw c;return i}return null},async saveCORSignature(r,i,c){if(p){const{data:s,error:o}=await _.from("change_orders").update({gc_signature_data:i,gc_signature_name:c,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",r).select().single();if(o)throw o;return s}return null},async getCORStats(r){if(p){const{data:i,error:c}=await _.from("change_orders").select("status, cor_total").eq("project_id",r);if(c)throw c;const s={total_cors:i.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return i.forEach(o=>{switch(o.status){case"draft":s.draft_count++;break;case"pending_approval":s.pending_count++,s.total_pending_value+=o.cor_total||0;break;case"approved":s.approved_count++,s.total_approved_value+=o.cor_total||0;break;case"rejected":s.rejected_count++;break;case"billed":case"closed":s.billed_count++,s.total_billed_value+=o.cor_total||0;break}}),s}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(r,i){return p?_.channel(`change_orders:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${r}`},i).subscribe():null},subscribeToCorTickets(r,i){return p?_.channel(`cor-tickets:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${r}`},i).subscribe():null},async getCORLog(r){if(p){const{data:i,error:c}=await _.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",r).order("log_number",{ascending:!0});if(c)throw console.error("Error fetching COR log:",c),c;return(i||[]).map(s=>({id:s.id,logNumber:s.log_number,dateSentToClient:s.date_sent_to_client,ceNumber:s.ce_number,comments:s.comments,createdAt:s.created_at,updatedAt:s.updated_at,changeOrder:{id:s.change_order?.id,corNumber:s.change_order?.cor_number,title:s.change_order?.title,corTotal:s.change_order?.cor_total,status:s.change_order?.status,createdAt:s.change_order?.created_at,approvedAt:s.change_order?.approved_at,approvedBy:s.change_order?.approved_by}}))}return[]},async updateCORLogEntry(r,i){if(p){const c={updated_at:new Date().toISOString()};i.dateSentToClient!==void 0&&(c.date_sent_to_client=i.dateSentToClient||null),i.ceNumber!==void 0&&(c.ce_number=i.ceNumber||null),i.comments!==void 0&&(c.comments=i.comments||null);const{data:s,error:o}=await _.from("cor_log_entries").update(c).eq("id",r).select().single();if(o)throw console.error("Error updating COR log entry:",o),o;return s}return null},async updateChangeOrderStatus(r,i){if(p){const{data:c,error:s}=await _.from("change_orders").update({status:i,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(s)throw console.error("Error updating change order status:",s),s;return c}return null},subscribeToCORLog(r,i){return p?_.channel(`cor-log:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${r}`},i).subscribe():null},async createSignatureRequest(r,i,c,s,o=null,d=null){if(p){const{data:h,error:g}=await _.rpc("generate_signature_token");if(g)throw g;const{data:w,error:M}=await _.from("signature_requests").insert({document_type:r,document_id:i,company_id:c,project_id:s,signature_token:h,expires_at:d,created_by:o}).select().single();if(M)throw M;return w}return null},async getSignatureRequestByToken(r){if(p){await _.rpc("increment_signature_view_count",{token:r});const{data:i,error:c}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",r).single();if(c)throw c;return i}return null},async getSignatureRequestsForDocument(r,i){if(p){const{data:c,error:s}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",r).eq("document_id",i).order("created_at",{ascending:!1});if(s)throw s;return c||[]}return[]},async addSignature(r,i,c){if(p){const{data:s,error:o}=await _.from("signatures").insert({signature_request_id:r,signature_slot:i,signature_image:c.signature,signer_name:c.signerName,signer_title:c.signerTitle||null,signer_company:c.signerCompany||null,signed_at:c.signedAt||new Date().toISOString(),ip_address:c.ipAddress||null,user_agent:c.userAgent||null}).select().single();if(o)throw o;return s}return null},async syncSignatureToDocument(r,i){if(!p)return null;const{document_type:c,document_id:s}=i,o=r.signature_slot,d={};o===1?(d.gc_signature_data=r.signature_image,d.gc_signature_name=r.signer_name,d.gc_signature_title=r.signer_title,d.gc_signature_company=r.signer_company,d.gc_signature_date=r.signed_at,d.gc_signature_ip=r.ip_address):o===2&&(d.client_signature_data=r.signature_image,d.client_signature_name=r.signer_name,d.client_signature_title=r.signer_title,d.client_signature_company=r.signer_company,d.client_signature_date=r.signed_at,d.client_signature_ip=r.ip_address);const h=c==="cor"?"change_orders":"t_and_m_tickets",{data:g,error:w}=await _.from(h).update(d).eq("id",s).select().single();if(w)throw w;return g},async revokeSignatureRequest(r){if(p){const{data:i,error:c}=await _.from("signature_requests").update({status:"revoked"}).eq("id",r).select().single();if(c)throw c;return i}return null},async getDocumentForSigning(r,i){if(!p)return null;if(r==="cor"){const{data:c,error:s}=await _.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",i).single();if(s)throw s;return c}else if(r==="tm_ticket"){const{data:c,error:s}=await _.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (*)
        `).eq("id",i).single();if(s)throw s;return c}return null},async getProjectCosts(r){if(p){const{data:c,error:s}=await _.from("project_costs").select("*").eq("project_id",r).order("cost_date",{ascending:!1});return s?(console.error("Error fetching project costs:",s),[]):c||[]}return(L().projectCosts||[]).filter(c=>c.project_id===r).sort((c,s)=>new Date(s.cost_date)-new Date(c.cost_date))},async addProjectCost(r,i,c){const s={project_id:r,company_id:i,category:c.category,description:c.description,amount:parseFloat(c.amount),cost_date:c.cost_date||new Date().toISOString().split("T")[0],notes:c.notes||null,created_by:c.created_by||null};if(p){const{data:h,error:g}=await _.from("project_costs").insert(s).select().single();if(g)throw console.error("Error adding project cost:",g),g;return h}const o=L();o.projectCosts||(o.projectCosts=[]);const d={...s,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return o.projectCosts.push(d),re(o),d},async updateProjectCost(r,i){const c={category:i.category,description:i.description,amount:parseFloat(i.amount),cost_date:i.cost_date,notes:i.notes||null,updated_at:new Date().toISOString()};if(p){const{data:d,error:h}=await _.from("project_costs").update(c).eq("id",r).select().single();if(h)throw console.error("Error updating project cost:",h),h;return d}const s=L();if(!s.projectCosts)return null;const o=s.projectCosts.findIndex(d=>d.id===r);return o===-1?null:(s.projectCosts[o]={...s.projectCosts[o],...c},re(s),s.projectCosts[o])},async deleteProjectCost(r){if(p){const{error:c}=await _.from("project_costs").delete().eq("id",r);if(c)throw console.error("Error deleting project cost:",c),c;return!0}const i=L();return i.projectCosts&&(i.projectCosts=i.projectCosts.filter(c=>c.id!==r),re(i)),!0},async getProjectCostsSummary(r){const i=await this.getProjectCosts(r),c={};let s=0;return i.forEach(o=>{const d=parseFloat(o.amount)||0;s+=d,c[o.category]||(c[o.category]={category:o.category,total:0,count:0,items:[]}),c[o.category].total+=d,c[o.category].count++,c[o.category].items.push(o)}),Object.values(c).forEach(o=>{o.percentage=s>0?o.total/s*100:0}),{totalCost:s,byCategory:c,itemCount:i.length}}};$u(async r=>{if(r&&p)try{await wm(at)}catch(i){console.error("Error syncing pending actions:",i)}});const Pp=Object.freeze(Object.defineProperty({__proto__:null,auth:Ku,clearFieldSession:Em,db:at,getConnectionStatus:Ht,getPendingActionCount:gi,isSupabaseConfigured:p,onConnectionChange:$u,supabase:_,syncPendingActions:wm},Symbol.toStringTag,{value:"Module"})),qm=U.createContext(),Et={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function cn({children:r,companyId:i}){const[c,s]=U.useState(Et),[o,d]=U.useState(!0);U.useEffect(()=>{i?h(i):g()},[i]),U.useEffect(()=>{R(c)},[c]);const h=async Z=>{try{if(d(!0),!p){s(Et),d(!1);return}const{data:V,error:B}=await _.from("company_branding").select("*").eq("company_id",Z).single();B?(B.code==="PGRST116"?await w(Z):console.error("Error loading branding:",B),s(Et)):s({...Et,...V})}catch(V){console.error("Error in loadBranding:",V),s(Et)}finally{d(!1)}},g=async()=>{try{d(!0);const Z=window.location.hostname;if(Z==="localhost"||Z==="127.0.0.1"){s(Et),d(!1);return}if(!p){s(Et),d(!1);return}const{data:V,error:B}=await _.rpc("get_branding_by_domain",{domain_name:Z});B||!V||V.length===0?s(Et):s({...Et,...V[0]})}catch(Z){console.error("Error loading branding by domain:",Z),s(Et)}finally{d(!1)}},w=async Z=>{try{const{data:V,error:B}=await _.from("company_branding").insert({company_id:Z,...Et}).select().single();B&&console.error("Error creating default branding:",B)}catch(V){console.error("Error in createDefaultBranding:",V)}},M=async Z=>{try{if(!p)return s(J=>({...J,...Z})),{success:!0};if(!i)return{success:!1,error:"No company ID"};const V={},B=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const J of B)Z[J]!==void 0&&(V[J]=Z[J]);const{data:ie,error:_e}=await _.from("company_branding").select("id").eq("company_id",i).single();if(_e&&_e.code==="PGRST116"){const{data:J,error:je}=await _.from("company_branding").insert({company_id:i,...V}).select().single();return je?(console.error("Error creating branding:",je),{success:!1,error:je.message}):(s({...Et,...J}),{success:!0,data:J})}const{data:he,error:$}=await _.from("company_branding").update(V).eq("company_id",i).select().single();return $?(console.error("Error updating branding:",$),{success:!1,error:$.message}):(s({...Et,...he}),{success:!0,data:he})}catch(V){return console.error("Error in updateBranding:",V),{success:!1,error:V.message}}},R=Z=>{const V=document.documentElement;if(V.style.setProperty("--primary-color",Z.primary_color),V.style.setProperty("--secondary-color",Z.secondary_color),Z.favicon_url){let B=document.querySelector("link[rel*='icon']");B||(B=document.createElement("link"),B.rel="icon",document.head.appendChild(B)),B.href=Z.favicon_url}document.title=Z.custom_app_name||"FieldSync"},G={branding:c,loading:o,updateBranding:M,uploadBrandingImage:async(Z,V)=>{try{if(!p)return{success:!0,url:URL.createObjectURL(Z)};const B=Z.name.split(".").pop(),_e=`branding/${`${i}/${V}-${Date.now()}.${B}`}`,{data:he,error:$}=await _.storage.from("public").upload(_e,Z,{cacheControl:"3600",upsert:!0});if($)return console.error("Error uploading image:",$),{success:!1,error:$.message};const{data:{publicUrl:J}}=_.storage.from("public").getPublicUrl(_e);return{success:!0,url:J}}catch(B){return console.error("Error in uploadBrandingImage:",B),{success:!1,error:B.message}}},refreshBranding:()=>i?h(i):g()};return v.jsx(qm.Provider,{value:G,children:r})}function bp(){const r=U.useContext(qm);if(!r)throw new Error("useBranding must be used within a BrandingProvider");return r}const Dm=U.createContext();function un({children:r}){const[i,c]=U.useState(()=>{const o=localStorage.getItem("fieldsync-theme");return o==="light"||o==="dark"?o:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});U.useEffect(()=>{document.documentElement.setAttribute("data-theme",i),localStorage.setItem("fieldsync-theme",i)},[i]),U.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: light)"),d=h=>{localStorage.getItem("fieldsync-theme")||c(h.matches?"light":"dark")};return o.addEventListener("change",d),()=>o.removeEventListener("change",d)},[]);const s=()=>{c(o=>o==="dark"?"light":"dark")};return v.jsx(Dm.Provider,{value:{theme:i,setTheme:c,toggleTheme:s},children:r})}function Sp(){const r=U.useContext(Dm);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r}const wp=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jp=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(i,c,s)=>s?s.toUpperCase():c.toLowerCase()),mm=r=>{const i=jp(r);return i.charAt(0).toUpperCase()+i.slice(1)},Am=(...r)=>r.filter((i,c,s)=>!!i&&i.trim()!==""&&s.indexOf(i)===c).join(" ").trim(),Ep=r=>{for(const i in r)if(i.startsWith("aria-")||i==="role"||i==="title")return!0};var Tp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qp=U.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:s,className:o="",children:d,iconNode:h,...g},w)=>U.createElement("svg",{ref:w,...Tp,width:i,height:i,stroke:r,strokeWidth:s?Number(c)*24/Number(i):c,className:Am("lucide",o),...!d&&!Ep(g)&&{"aria-hidden":"true"},...g},[...h.map(([M,R])=>U.createElement(M,R)),...Array.isArray(d)?d:[d]]));const $l=(r,i)=>{const c=U.forwardRef(({className:s,...o},d)=>U.createElement(qp,{ref:d,iconNode:i,className:Am(`lucide-${wp(mm(r))}`,`lucide-${r}`,s),...o}));return c.displayName=mm(r),c};const Dp=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ap=$l("briefcase",Dp);const Cp=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],Op=$l("hard-hat",Cp);const zp=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Mp=$l("moon",zp);const Np=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],xp=$l("sun",Np);const Rp=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Up=$l("triangle-alert",Rp);function Qt({className:r="",showPoweredBy:i=!1}){const{branding:c}=bp();return v.jsxs("div",{className:`app-logo ${r}`,children:[c.logo_url?v.jsx("img",{src:c.logo_url,alt:c.custom_app_name||"Logo",className:"custom-logo"}):v.jsxs("div",{className:"logo",children:[c.custom_app_name||"Field",v.jsx("span",{children:"Sync"})]}),i&&!c.hide_fieldsync_branding&&v.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function Bp({onForemanAccess:r,onOfficeLogin:i,onShowToast:c}){const[s,o]=U.useState(null),[d,h]=U.useState(""),[g,w]=U.useState(null),[M,R]=U.useState(""),[N,G]=U.useState(!1),[Z,V]=U.useState(""),[B,ie]=U.useState(""),[_e,he]=U.useState(1),[$,J]=U.useState(null),[je,Ye]=U.useState(""),[Pe,Ie]=U.useState(""),[ot,Wt]=U.useState(""),[ft,Ge]=U.useState(""),$t=z=>{const P=z.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);h(P)},Xt=async()=>{if(d.length<2){c("Enter company code","error");return}G(!0);try{const z=await at.getCompanyByCode(d);z?w(z):(c("Invalid company code","error"),h(""))}catch{c("Error checking code","error")}finally{G(!1)}},dt=async z=>{if(z.length===4){G(!0);try{const P=await at.getProjectByPinSecure(z,g.code);if(P.rateLimited){c("Too many attempts. Please wait 15 minutes.","error"),R("");return}P.success&&P.project?r(P.project):(c("Invalid PIN","error"),R(""))}catch{c("Error checking PIN","error")}finally{G(!1)}}},A=z=>{if(M.length<4){const P=M+z;R(P),P.length===4&&setTimeout(()=>dt(P),200)}},x=()=>{R(z=>z.slice(0,-1))},H=()=>{w(null),R("")},oe=()=>{if(!Z.trim()||!B.trim()){c("Enter email and password","error");return}i(Z,B)},fe=async()=>{if(d.length<2){c("Enter company code","error");return}G(!0);try{const z=await at.getCompanyByCode(d);z?(J(z),he(2)):(c("Invalid company code","error"),h(""))}catch{c("Error checking code","error")}finally{G(!1)}},Ne=async()=>{if(!je.trim()){c("Enter office code","error");return}G(!0);try{const{data:z,error:P}=await _.rpc("verify_office_code",{company_id:$.id,code:je.trim()});if(P)throw P;z===!0?he(3):(c("Invalid office code","error"),Ye(""))}catch{c("Error verifying code","error")}finally{G(!1)}},ye=async()=>{if(!Pe.trim()){c("Enter your name","error");return}if(!ot.trim()||!ot.includes("@")){c("Enter valid email","error");return}if(ft.length<6){c("Password must be 6+ characters","error");return}G(!0);try{const z=ot.toLowerCase().trim(),{data:P,error:He}=await _.auth.signUp({email:z,password:ft});let Q;if(He?.message?.includes("already registered")||P?.user&&P.user.identities?.length===0){const{data:qe,error:Ae}=await _.auth.signInWithPassword({email:z,password:ft});if(Ae){c("Account exists with different password. Use your existing password.","error"),G(!1);return}Q=qe.user.id;const{data:Ve}=await _.from("user_companies").select("id, status").eq("user_id",Q).eq("company_id",$.id).maybeSingle();if(Ve){Ve.status==="active"?(c("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):Ve.status==="pending"?(c("Your request is still pending approval.","error"),await _.auth.signOut()):(c("Your membership was removed. Contact the company admin.","error"),await _.auth.signOut());return}const{error:et}=await _.from("user_companies").insert({user_id:Q,company_id:$.id,role:"member",status:"pending"});if(et)throw console.error("Error adding to user_companies:",et),await _.auth.signOut(),new Error("Failed to submit join request");await _.auth.signOut(),c("Request to join submitted! Awaiting admin approval.","success")}else{if(He)throw He;{if(Q=P.user?.id,!Q)throw new Error("Failed to create user");const{error:qe}=await _.from("users").insert({id:Q,email:z,password_hash:"managed_by_supabase_auth",name:Pe.trim(),company_id:$.id,role:"member",is_active:!0});if(qe)throw qe;const{error:Ae}=await _.from("user_companies").insert({user_id:Q,company_id:$.id,role:"member",status:"pending"});if(Ae)throw console.error("Error adding to user_companies:",Ae),new Error("Failed to submit join request");await _.auth.signOut(),c("Account created! Awaiting admin approval.","success")}}}catch(z){console.error("Join error:",z),c(z.message||"Error creating account","error")}finally{G(!1)}};if(s===null)return v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsxs("div",{className:"entry-buttons",children:[v.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>o("foreman"),children:[v.jsx("span",{className:"entry-mode-icon",children:v.jsx(Op,{size:32})}),v.jsx("span",{className:"entry-mode-title",children:"Foreman"}),v.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),v.jsxs("button",{className:"entry-mode-btn office",onClick:()=>o("office"),children:[v.jsx("span",{className:"entry-mode-icon",children:v.jsx(Ap,{size:32})}),v.jsx("span",{className:"entry-mode-title",children:"Office"}),v.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(s==="foreman")return g?v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:H,children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("div",{className:"entry-company-badge",children:g.name}),v.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),v.jsx("div",{className:"pin-display",children:[0,1,2,3].map(z=>v.jsx("div",{className:`pin-dot ${M.length>z?"filled":""}`,children:M.length>z?"":""},z))}),v.jsxs("div",{className:"number-pad",children:[[1,2,3,4,5,6,7,8,9].map(z=>v.jsx("button",{className:"num-btn",onClick:()=>A(z.toString()),disabled:N,children:z},z)),v.jsx("button",{className:"num-btn empty",disabled:!0}),v.jsx("button",{className:"num-btn",onClick:()=>A("0"),disabled:N,children:"0"}),v.jsx("button",{className:"num-btn backspace",onClick:x,disabled:N||M.length===0,children:""})]}),N&&v.jsx("div",{className:"entry-loading",children:v.jsx("div",{className:"spinner"})})]})}):v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>o(null),children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),v.jsxs("div",{className:"entry-input-group",children:[v.jsx("input",{type:"text",value:d,onChange:z=>$t(z.target.value),placeholder:"Company Code",disabled:N,autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&Xt()}}),v.jsx("button",{className:"entry-submit-btn",onClick:Xt,disabled:N||d.length<2,children:N?"...":""})]})]})});if(s==="office")return v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>o(null),children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),v.jsxs("div",{className:"entry-form",children:[v.jsx("input",{type:"email",value:Z,onChange:z=>V(z.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&oe()}}),v.jsx("input",{type:"password",value:B,onChange:z=>ie(z.target.value),placeholder:"Password",onKeyDown:z=>{z.key==="Enter"&&oe()}}),v.jsx("button",{className:"entry-login-btn",onClick:oe,children:"Sign In"})]}),v.jsxs("div",{className:"entry-signup-hint",children:[v.jsx("p",{children:"New employee?"}),v.jsx("button",{className:"entry-join-link",onClick:()=>o("join"),children:"Join your company"})]})]})});if(s==="join")return _e===1?v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>o("office"),children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),v.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),v.jsxs("div",{className:"entry-input-group",children:[v.jsx("input",{type:"text",value:d,onChange:z=>$t(z.target.value),placeholder:"Company Code",disabled:N,autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&fe()}}),v.jsx("button",{className:"entry-submit-btn",onClick:fe,disabled:N||d.length<2,children:N?"...":""})]})]})}):_e===2?v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>{he(1),J(null),Ye("")},children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("div",{className:"entry-company-badge",children:$?.name}),v.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),v.jsx("p",{className:"entry-hint",children:"This code is only for office staff"}),v.jsxs("div",{className:"entry-input-group",children:[v.jsx("input",{type:"password",value:je,onChange:z=>Ye(z.target.value),placeholder:"Office Code",disabled:N,autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&Ne()}}),v.jsx("button",{className:"entry-submit-btn",onClick:Ne,disabled:N||!je.trim(),children:N?"...":""})]})]})}):v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>{he(2),Ye("")},children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("div",{className:"entry-company-badge",children:$?.name}),v.jsx("p",{className:"entry-subtitle",children:"Create your account"}),v.jsxs("div",{className:"entry-form",children:[v.jsx("input",{type:"text",value:Pe,onChange:z=>Ie(z.target.value),placeholder:"Your Name",autoFocus:!0}),v.jsx("input",{type:"email",value:ot,onChange:z=>Wt(z.target.value),placeholder:"Email"}),v.jsx("input",{type:"password",value:ft,onChange:z=>Ge(z.target.value),placeholder:"Password (6+ characters)",onKeyDown:z=>{z.key==="Enter"&&ye()}}),v.jsx("button",{className:"entry-login-btn",onClick:ye,disabled:N,children:N?"Creating...":"Join Company"})]}),v.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})})}function Fn({message:r,type:i="",onClose:c}){return U.useEffect(()=>{const s=setTimeout(c,3e3);return()=>clearTimeout(s)},[c]),v.jsx("div",{className:"toast-container",children:v.jsx("div",{className:`toast ${i}`,children:r})})}function Hp({compact:r=!1}){const{theme:i,toggleTheme:c}=Sp();return v.jsx("button",{className:`theme-toggle ${r?"theme-toggle-compact":""}`,onClick:c,title:`Switch to ${i==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${i==="dark"?"light":"dark"} mode`,children:i==="dark"?v.jsxs(v.Fragment,{children:[v.jsx(xp,{size:r?18:16}),!r&&v.jsx("span",{children:"Light"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Mp,{size:r?18:16}),!r&&v.jsx("span",{children:"Dark"})]})})}class Pn extends U.Component{constructor(i){super(i),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(i){return{hasError:!0}}componentDidCatch(i,c){this.setState({error:i,errorInfo:c}),console.error("ErrorBoundary caught an error:",i,c)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?v.jsx("div",{className:"error-boundary",children:v.jsxs("div",{className:"error-boundary-content",children:[v.jsx("div",{className:"error-icon",children:v.jsx(Up,{size:48})}),v.jsx("h2",{children:"Something went wrong"}),v.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),v.jsxs("div",{className:"error-actions",children:[v.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),v.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function _m(){const[r,i]=U.useState(Ht()),[c,s]=U.useState(0),[o,d]=U.useState(!1),[h,g]=U.useState(!1);return U.useEffect(()=>{const w=$u(async R=>{i(R),R&&h&&(d(!0),setTimeout(()=>d(!1),3e3)),R||g(!0);const N=await gi();s(N)});gi().then(s);const M=setInterval(async()=>{if(!Ht()){const R=await gi();s(R)}},5e3);return()=>{w(),clearInterval(M)}},[h]),r&&c===0&&!o?null:v.jsxs("div",{className:`offline-indicator ${r?"online":"offline"} ${o?"synced":""}`,children:[v.jsx("div",{className:"offline-indicator-content",children:r?o?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"online-icon",children:v.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("polyline",{points:"20 6 9 17 4 12"})})}),v.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):c>0?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"syncing-icon",children:v.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("polyline",{points:"23 4 23 10 17 10"}),v.jsx("polyline",{points:"1 20 1 14 7 14"}),v.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),v.jsxs("span",{className:"offline-text",children:["Syncing ",c,"..."]})]}):null:v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"offline-icon",children:v.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),v.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),v.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),v.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),v.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),v.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),v.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),v.jsxs("span",{className:"offline-text",children:["Offline",c>0&&v.jsxs("span",{className:"pending-badge",children:[c," pending"]})]})]})}),v.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}const kp=U.lazy(()=>Ya(()=>import("./ForemanView-D6ZjUqVu.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Lp=U.lazy(()=>Ya(()=>import("./Dashboard-D_7YcLBT.js"),__vite__mapDeps([10,1,2,3,4,11,12,7,13,8,14,6,15,16,9]))),Yp=U.lazy(()=>Ya(()=>import("./Setup-YSzn_HdK.js"),__vite__mapDeps([17,13,7,8,9]))),Gp=U.lazy(()=>Ya(()=>import("./BrandingSettings-Bq7rOotX.js"),__vite__mapDeps([18,7,8,9]))),Qp=U.lazy(()=>Ya(()=>import("./PricingManager-DWMTkgna.js"),__vite__mapDeps([19,4,2,6,15,12,7,8,9]))),Xp=U.lazy(()=>Ya(()=>import("./PublicView-U2QDkm9p.js"),__vite__mapDeps([20,7,8,9]))),Zp=U.lazy(()=>Ya(()=>import("./SignaturePage-ybelbaG-.js"),__vite__mapDeps([21,14,8,3,2,11,6,15,7,9]))),Vp=U.lazy(()=>Ya(()=>import("./MembershipManager-B1BNSRll.js"),__vite__mapDeps([22,11,5,6,16,7,8,9])));function pi(){return v.jsxs("div",{className:"page-loader",children:[v.jsx(Qt,{className:"loading-logo"}),v.jsx("div",{className:"spinner"})]})}function Kp(){const[r,i]=U.useState("entry"),[c,s]=U.useState(null),[o,d]=U.useState(null),[h,g]=U.useState([]),[w,M]=U.useState([]),[R,N]=U.useState(null),[G,Z]=U.useState(null),[V,B]=U.useState(null),[ie,_e]=U.useState(!0),[he,$]=U.useState("dashboard"),[J,je]=U.useState(null),[Ye,Pe]=U.useState(!1),[Ie,ot]=U.useState(null),[Wt,ft]=U.useState(0);U.useEffect(()=>{const Q=window.location.pathname,de=Q.match(/^\/view\/([a-zA-Z0-9_-]+)$/),qe=Q.match(/^\/sign\/([a-zA-Z0-9_-]+)$/);de?(Z(de[1]),i("public"),_e(!1)):qe?(B(qe[1]),i("signature"),_e(!1)):Ge()},[]),U.useEffect(()=>{if(!p)return;const{data:{subscription:Q}}=_.auth.onAuthStateChange(async(de,qe)=>{de==="SIGNED_OUT"||de==="USER_DELETED"?(s(null),d(null),g([]),i("entry")):de==="TOKEN_REFRESHED"||de==="SIGNED_IN"&&!c&&Ge()});return()=>{Q?.unsubscribe()}},[c]);const Ge=async()=>{try{const{data:{user:Q}}=await _.auth.getUser();if(!Q){_e(!1);return}const{data:de,error:qe}=await _.from("users").select("*").eq("id",Q.id).single();if(de){s(de);let Ae=await at.getUserCompanies(Q.id);if(Ae.length===0&&de.company_id&&await at.repairLegacyUser(Q.id,de.company_id,de.role||"member")&&(Ae=await at.getUserCompanies(Q.id)),g(Ae),Ae.length===0){if(await at.getUserPendingMemberships(Q.id)>0){i("pending");return}H("No company access. Join a company to continue.","error"),await Ku.signOut();return}const Ve=localStorage.getItem("selectedCompanyId");let et=null;if(Ve&&Ae.find(ke=>ke.id===Ve)?et=Ae.find(ke=>ke.id===Ve):Ae.length>0&&(et=Ae[0]),et){const{data:ke}=await _.from("companies").select("*").eq("id",et.id).single();d(ke),i("office")}}}catch(Q){console.error("Auth check error:",Q)}finally{_e(!1)}},$t=Q=>{N(Q),i("foreman")},Xt=async(Q,de)=>{try{const{data:qe,error:Ae}=await _.auth.signInWithPassword({email:Q,password:de});if(Ae){H(Ae.message||"Invalid credentials","error");return}const{data:Ve,error:et}=await _.from("users").select("*").eq("id",qe.user.id).single();if(et){console.error("User fetch error:",et),H("Error loading profile","error");return}if(Ve){s(Ve);let ke=await at.getUserCompanies(qe.user.id);ke.length===0&&Ve.company_id&&await at.repairLegacyUser(qe.user.id,Ve.company_id,Ve.role||"member")&&(ke=await at.getUserCompanies(qe.user.id)),g(ke);const fn=localStorage.getItem("selectedCompanyId");let Tt=null;if(fn&&ke.find(kt=>kt.id===fn)?Tt=ke.find(kt=>kt.id===fn):ke.length>0&&(Tt=ke[0]),Tt){const{data:kt}=await _.from("companies").select("*").eq("id",Tt.id).single();d(kt),i("office")}else await at.getUserPendingMemberships(qe.user.id)>0?i("pending"):H("No company access. Please contact admin.","error")}else H("Profile not found. Please contact admin.","error")}catch(qe){console.error("Login error:",qe),H("Login failed","error")}},dt=async Q=>{try{const{data:de}=await _.from("companies").select("*").eq("id",Q).single();de&&(d(de),localStorage.setItem("selectedCompanyId",Q),Pe(!1),$("dashboard"),H(`Switched to ${de.name}`,"success"))}catch(de){console.error("Switch company error:",de),H("Error switching company","error")}},A=async()=>{try{await Ku.signOut(),s(null),d(null),g([]),i("entry"),$("dashboard"),localStorage.removeItem("selectedCompanyId")}catch(Q){console.error("Logout error:",Q),H("Error signing out","error")}},x=async()=>{await Em(),N(null),i("entry")},H=(Q,de="")=>{je({message:Q,type:de})},oe=()=>{$("dashboard"),o?.id&&fe()},fe=async()=>{if(o?.id)try{const Q=await at.getProjects(o.id);M(Q)}catch(Q){console.error("Error loading projects:",Q)}};U.useEffect(()=>{o?.id&&r==="office"&&(fe(),Ne())},[o?.id,r]);const Ne=async()=>{if(o?.id)try{const de=(await at.getCompanyMemberships(o.id)).filter(qe=>qe.status==="pending").length;ft(de)}catch(Q){console.error("Error loading pending count:",Q)}},ye=()=>{ot(null)};if(ie)return v.jsx(un,{children:v.jsx(cn,{companyId:o?.id,children:v.jsxs("div",{className:"loading-screen",children:[v.jsx(Qt,{className:"loading-logo"}),v.jsx("div",{className:"spinner"})]})})});if(r==="entry")return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsx(Bp,{onForemanAccess:$t,onOfficeLogin:Xt,onShowToast:H})}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(r==="public"&&G)return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsx(U.Suspense,{fallback:v.jsx(pi,{}),children:v.jsx(Xp,{shareToken:G})})}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(r==="signature"&&V)return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsx(U.Suspense,{fallback:v.jsx(pi,{}),children:v.jsx(Zp,{signatureToken:V})})}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(r==="pending")return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsxs("div",{className:"pending-approval-screen",children:[v.jsx(Qt,{className:"pending-logo"}),v.jsx("h2",{children:"Awaiting Approval"}),v.jsx("p",{children:"Your membership request has been submitted."}),v.jsx("p",{children:"A company admin will review your request."}),v.jsxs("div",{className:"pending-actions",children:[v.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Sign Out"}),v.jsx("button",{className:"btn btn-primary",onClick:Ge,children:"Check Status"})]})]})}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(r==="foreman"&&R)return v.jsx(un,{children:v.jsxs(cn,{companyId:R.company_id,children:[v.jsx(Pn,{children:v.jsx(U.Suspense,{fallback:v.jsx(pi,{}),children:v.jsx(kp,{project:R,companyId:R.company_id,onShowToast:H,onExit:x})})}),v.jsx(_m,{}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});const He=h.find(Q=>Q.id===o?.id)?.access_level==="administrator"||o?.owner_user_id===c?.id;return v.jsx(un,{children:v.jsx(cn,{companyId:o?.id,children:v.jsxs("div",{children:[!p&&v.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),v.jsx("nav",{className:"nav",children:v.jsxs("div",{className:"nav-content",children:[v.jsx(Qt,{}),v.jsxs("div",{className:"nav-tabs",children:[v.jsx("button",{className:`nav-tab ${he==="dashboard"?"active":""}`,onClick:()=>$("dashboard"),children:"Dashboard"}),v.jsx("button",{className:`nav-tab ${he==="setup"?"active":""}`,onClick:()=>$("setup"),children:"+ New Project"}),v.jsx("button",{className:`nav-tab ${he==="pricing"?"active":""}`,onClick:()=>$("pricing"),children:"Pricing"}),He&&v.jsx("button",{className:`nav-tab ${he==="branding"?"active":""}`,onClick:()=>$("branding"),children:"Branding"}),He&&v.jsxs("button",{className:`nav-tab ${he==="team"?"active":""}`,onClick:()=>$("team"),children:["Team",Wt>0&&v.jsx("span",{className:"nav-tab-badge",children:Wt})]})]}),v.jsxs("div",{className:"nav-user",children:[v.jsx(Hp,{compact:!0}),h.length>1&&v.jsxs("div",{className:"company-switcher",children:[v.jsxs("button",{className:"company-switcher-btn",onClick:()=>Pe(!Ye),children:[o?.name||"Select Company",v.jsx("span",{className:"switcher-arrow",children:""})]}),Ye&&v.jsx("div",{className:"company-dropdown",children:h.map(Q=>v.jsxs("button",{className:`company-option ${Q.id===o?.id?"active":""}`,onClick:()=>dt(Q.id),children:[Q.name,Q.id===o?.id&&v.jsx("span",{className:"check",children:""})]},Q.id))})]}),h.length<=1&&o&&v.jsx("span",{className:"nav-company-name",children:o.name}),v.jsx("span",{className:"nav-user-name",children:c?.name||c?.email}),v.jsx("button",{className:"nav-logout",onClick:A,children:"Sign Out"})]})]})}),v.jsx(Pn,{children:v.jsx(U.Suspense,{fallback:v.jsx(pi,{}),children:v.jsxs("div",{className:"container",children:[he==="dashboard"&&v.jsx(Lp,{company:o,user:c,isAdmin:He,onShowToast:H,navigateToProjectId:Ie,onProjectNavigated:ye}),he==="setup"&&v.jsx(Yp,{company:o,user:c,onProjectCreated:oe,onShowToast:H}),he==="pricing"&&v.jsx(Qp,{company:o,onShowToast:H}),he==="branding"&&v.jsx(Gp,{company:o,onShowToast:H}),he==="team"&&He&&v.jsx(Vp,{company:o,user:c,onShowToast:H})]},o?.id)})}),v.jsx(_m,{}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})})})}cp.createRoot(document.getElementById("root")).render(v.jsx(ym.StrictMode,{children:v.jsx(Kp,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>{setInterval(()=>{r.update().catch(()=>{})},3e5)}).catch(()=>{})});export{Ap as B,Op as H,Qt as L,Fp as R,Up as T,Hp as a,Fn as b,$l as c,at as d,Pp as e,p as i,v as j,I as o,U as r,_ as s,bp as u};
