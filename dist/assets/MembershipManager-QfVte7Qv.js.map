{"version":3,"file":"MembershipManager-QfVte7Qv.js","sources":["../../src/components/MembershipManager.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { db } from '../lib/supabase'\nimport { AlertTriangle, UserCheck, UserX, UserMinus, Users, ChevronDown, Shield, User, Briefcase } from 'lucide-react'\n\nconst ACCESS_LEVEL_OPTIONS = [\n  { value: 'member', label: 'Member', icon: User, description: 'Standard access to projects' },\n  { value: 'administrator', label: 'Administrator', icon: Shield, description: 'Full control, can manage team' }\n]\n\nconst COMPANY_ROLE_OPTIONS = [\n  { value: 'Project Manager', label: 'Project Manager' },\n  { value: 'Superintendent', label: 'Superintendent' },\n  { value: 'Job Costing', label: 'Job Costing' },\n  { value: 'Accounting', label: 'Accounting' }\n]\n\nexport default function MembershipManager({ company, user, onShowToast }) {\n  const [filter, setFilter] = useState('pending')\n  const [members, setMembers] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [actionLoading, setActionLoading] = useState(null)\n  const [selectedAccessLevels, setSelectedAccessLevels] = useState({})\n  const [selectedCompanyRoles, setSelectedCompanyRoles] = useState({})\n\n  useEffect(() => {\n    if (company?.id) {\n      loadMembers()\n    }\n  }, [company?.id])\n\n  const loadMembers = async () => {\n    try {\n      setLoading(true)\n      const data = await db.getCompanyMemberships(company.id)\n      setMembers(data)\n    } catch (error) {\n      console.error('Error loading members:', error)\n      onShowToast('Error loading team members', 'error')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleApprove = async (membership) => {\n    const companyRole = selectedCompanyRoles[membership.id]\n    if (!companyRole) {\n      onShowToast('Please select a role for this member', 'error')\n      return\n    }\n\n    try {\n      setActionLoading(membership.id)\n      const accessLevel = selectedAccessLevels[membership.id] || 'member'\n      await db.approveMembershipWithRole(membership.id, user.id, accessLevel)\n      // Set the company role after approval\n      await db.updateMemberCompanyRole(membership.id, companyRole)\n      onShowToast(`${membership.users?.name || membership.users?.email} approved as ${companyRole}`, 'success')\n      // Clear selections\n      setSelectedAccessLevels(prev => {\n        const updated = { ...prev }\n        delete updated[membership.id]\n        return updated\n      })\n      setSelectedCompanyRoles(prev => {\n        const updated = { ...prev }\n        delete updated[membership.id]\n        return updated\n      })\n      loadMembers()\n    } catch (error) {\n      console.error('Error approving membership:', error)\n      onShowToast('Error approving request', 'error')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  const handleAccessLevelChange = (membershipId, accessLevel) => {\n    setSelectedAccessLevels(prev => ({ ...prev, [membershipId]: accessLevel }))\n  }\n\n  const handleCompanyRoleChange = (membershipId, companyRole) => {\n    setSelectedCompanyRoles(prev => ({ ...prev, [membershipId]: companyRole }))\n  }\n\n  const handleUpdateCompanyRole = async (membership, newCompanyRole) => {\n    try {\n      setActionLoading(membership.id)\n      await db.updateMemberCompanyRole(membership.id, newCompanyRole)\n      onShowToast(`${membership.users?.name || 'User'} role updated to ${newCompanyRole}`, 'success')\n      loadMembers()\n    } catch (error) {\n      console.error('Error updating company role:', error)\n      onShowToast('Error updating role', 'error')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  const handleUpdateAccessLevel = async (membership, newAccessLevel) => {\n    // Don't allow demoting yourself\n    if (membership.users?.id === user.id && newAccessLevel !== 'administrator') {\n      onShowToast('You cannot demote yourself', 'error')\n      return\n    }\n\n    try {\n      setActionLoading(membership.id)\n      await db.updateMemberAccessLevel(membership.id, newAccessLevel)\n      const levelLabel = ACCESS_LEVEL_OPTIONS.find(o => o.value === newAccessLevel)?.label || newAccessLevel\n      onShowToast(`${membership.users?.name || 'User'} is now ${levelLabel}`, 'success')\n      loadMembers()\n    } catch (error) {\n      console.error('Error updating access level:', error)\n      onShowToast('Error updating access level', 'error')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  const handleReject = async (membership) => {\n    try {\n      setActionLoading(membership.id)\n      await db.rejectMembership(membership.id)\n      onShowToast('Request rejected', 'success')\n      loadMembers()\n    } catch (error) {\n      console.error('Error rejecting membership:', error)\n      onShowToast('Error rejecting request', 'error')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  const handleRemove = async (membership) => {\n    // Don't allow removing yourself\n    if (membership.users?.id === user.id) {\n      onShowToast('You cannot remove yourself', 'error')\n      return\n    }\n\n    try {\n      setActionLoading(membership.id)\n      await db.removeMember(membership.id, user.id)\n      onShowToast(`${membership.users?.name || membership.users?.email} removed`, 'success')\n      loadMembers()\n    } catch (error) {\n      console.error('Error removing member:', error)\n      onShowToast('Error removing member', 'error')\n    } finally {\n      setActionLoading(null)\n    }\n  }\n\n  const filteredMembers = members.filter(m => {\n    if (filter === 'all') return true\n    return m.status === filter\n  })\n\n  const pendingCount = members.filter(m => m.status === 'pending').length\n  const activeCount = members.filter(m => m.status === 'active').length\n  const removedCount = members.filter(m => m.status === 'removed').length\n\n  if (loading) {\n    return (\n      <div className=\"membership-manager\">\n        <div className=\"loading\">\n          <div className=\"spinner\"></div>\n          Loading team members...\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"membership-manager\">\n      <div className=\"membership-header\">\n        <h2><Users size={24} /> Team Members</h2>\n        <p className=\"membership-subtitle\">\n          Manage who has access to {company?.name}\n        </p>\n      </div>\n\n      {/* Pending alert banner */}\n      {pendingCount > 0 && (\n        <div className=\"pending-alert\">\n          <AlertTriangle size={20} />\n          <span>\n            {pendingCount} pending request{pendingCount > 1 ? 's' : ''} awaiting approval\n          </span>\n        </div>\n      )}\n\n      {/* Filter tabs */}\n      <div className=\"tm-filter-tabs\">\n        <button\n          className={`tm-filter-tab ${filter === 'pending' ? 'active' : ''}`}\n          onClick={() => setFilter('pending')}\n        >\n          Pending\n          <span className=\"tm-filter-count\">{pendingCount}</span>\n        </button>\n        <button\n          className={`tm-filter-tab ${filter === 'active' ? 'active' : ''}`}\n          onClick={() => setFilter('active')}\n        >\n          Active\n          <span className=\"tm-filter-count\">{activeCount}</span>\n        </button>\n        <button\n          className={`tm-filter-tab ${filter === 'removed' ? 'active' : ''}`}\n          onClick={() => setFilter('removed')}\n        >\n          Removed\n          <span className=\"tm-filter-count\">{removedCount}</span>\n        </button>\n      </div>\n\n      {/* Member list */}\n      <div className=\"member-list\">\n        {filteredMembers.length === 0 ? (\n          <div className=\"member-empty\">\n            {filter === 'pending' && 'No pending requests'}\n            {filter === 'active' && 'No active members'}\n            {filter === 'removed' && 'No removed members'}\n          </div>\n        ) : (\n          filteredMembers.map(member => (\n            <div key={member.id} className={`member-card ${member.status}`}>\n              <div className=\"member-info\">\n                <div className=\"member-name\">\n                  {member.users?.name || 'Unknown'}\n                  {member.users?.id === user.id && <span className=\"member-you\">(You)</span>}\n                </div>\n                <div className=\"member-email\">{member.users?.email}</div>\n                <div className=\"member-meta\">\n                  {member.status === 'pending' && (\n                    <>Requested {new Date(member.created_at).toLocaleDateString()}</>\n                  )}\n                  {member.status === 'active' && member.approved_at && (\n                    <>Approved {new Date(member.approved_at).toLocaleDateString()}</>\n                  )}\n                  {member.status === 'active' && !member.approved_at && (\n                    <>Member since {new Date(member.created_at).toLocaleDateString()}</>\n                  )}\n                  {member.status === 'removed' && member.removed_at && (\n                    <>Removed {new Date(member.removed_at).toLocaleDateString()}</>\n                  )}\n                </div>\n                {member.status === 'active' && (\n                  <div className=\"member-badges\">\n                    {member.access_level === 'administrator' ? (\n                      <span className=\"access-badge admin\"><Shield size={12} /> Administrator</span>\n                    ) : (\n                      <span className=\"access-badge member\"><User size={12} /> Member</span>\n                    )}\n                    {member.company_role && (\n                      <span className=\"access-badge role\"><Briefcase size={12} /> {member.company_role}</span>\n                    )}\n                  </div>\n                )}\n              </div>\n              <div className=\"member-actions\">\n                {member.status === 'pending' && (\n                  <>\n                    <div className=\"role-selector\">\n                      <select\n                        value={selectedCompanyRoles[member.id] || ''}\n                        onChange={(e) => handleCompanyRoleChange(member.id, e.target.value)}\n                        disabled={actionLoading === member.id}\n                        className=\"role-select\"\n                      >\n                        <option value=\"\">Select Role...</option>\n                        {COMPANY_ROLE_OPTIONS.map(opt => (\n                          <option key={opt.value} value={opt.value}>{opt.label}</option>\n                        ))}\n                      </select>\n                      <ChevronDown size={14} className=\"role-select-icon\" />\n                    </div>\n                    <div className=\"role-selector\">\n                      <select\n                        value={selectedAccessLevels[member.id] || 'member'}\n                        onChange={(e) => handleAccessLevelChange(member.id, e.target.value)}\n                        disabled={actionLoading === member.id}\n                        className=\"role-select\"\n                      >\n                        {ACCESS_LEVEL_OPTIONS.map(opt => (\n                          <option key={opt.value} value={opt.value}>{opt.label}</option>\n                        ))}\n                      </select>\n                      <ChevronDown size={14} className=\"role-select-icon\" />\n                    </div>\n                    <button\n                      className=\"btn btn-success btn-small\"\n                      onClick={() => handleApprove(member)}\n                      disabled={actionLoading === member.id}\n                    >\n                      {actionLoading === member.id ? '...' : (\n                        <><UserCheck size={16} /> Approve</>\n                      )}\n                    </button>\n                    <button\n                      className=\"btn btn-danger btn-small\"\n                      onClick={() => handleReject(member)}\n                      disabled={actionLoading === member.id}\n                    >\n                      {actionLoading === member.id ? '...' : (\n                        <><UserX size={16} /> Reject</>\n                      )}\n                    </button>\n                  </>\n                )}\n                {member.status === 'active' && member.users?.id !== user.id && (\n                  <>\n                    <div className=\"role-selector\">\n                      <select\n                        value={member.company_role || ''}\n                        onChange={(e) => handleUpdateCompanyRole(member, e.target.value)}\n                        disabled={actionLoading === member.id}\n                        className=\"role-select\"\n                      >\n                        <option value=\"\">No Role</option>\n                        {COMPANY_ROLE_OPTIONS.map(opt => (\n                          <option key={opt.value} value={opt.value}>{opt.label}</option>\n                        ))}\n                      </select>\n                      <ChevronDown size={14} className=\"role-select-icon\" />\n                    </div>\n                    <div className=\"role-selector\">\n                      <select\n                        value={member.access_level || 'member'}\n                        onChange={(e) => handleUpdateAccessLevel(member, e.target.value)}\n                        disabled={actionLoading === member.id}\n                        className=\"role-select\"\n                      >\n                        {ACCESS_LEVEL_OPTIONS.map(opt => (\n                          <option key={opt.value} value={opt.value}>{opt.label}</option>\n                        ))}\n                      </select>\n                      <ChevronDown size={14} className=\"role-select-icon\" />\n                    </div>\n                    <button\n                      className=\"btn btn-danger btn-small\"\n                      onClick={() => handleRemove(member)}\n                      disabled={actionLoading === member.id}\n                    >\n                      {actionLoading === member.id ? '...' : (\n                        <><UserMinus size={16} /> Remove</>\n                      )}\n                    </button>\n                  </>\n                )}\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":["ACCESS_LEVEL_OPTIONS","User","Shield","COMPANY_ROLE_OPTIONS","MembershipManager","company","user","onShowToast","filter","setFilter","useState","members","setMembers","loading","setLoading","actionLoading","setActionLoading","selectedAccessLevels","setSelectedAccessLevels","selectedCompanyRoles","setSelectedCompanyRoles","useEffect","loadMembers","data","db","error","handleApprove","membership","companyRole","accessLevel","prev","updated","handleAccessLevelChange","membershipId","handleCompanyRoleChange","handleUpdateCompanyRole","newCompanyRole","handleUpdateAccessLevel","newAccessLevel","levelLabel","o","handleReject","handleRemove","filteredMembers","m","pendingCount","activeCount","removedCount","jsxs","jsx","Users","AlertTriangle","member","Fragment","Briefcase","e","opt","ChevronDown","UserCheck","UserX","UserMinus"],"mappings":"8OAIA,MAAMA,EAAuB,CAC3B,CAAE,MAAO,SAAU,MAAO,SAAU,KAAMC,EAAM,YAAa,6BAAA,EAC7D,CAAE,MAAO,gBAAiB,MAAO,gBAAiB,KAAMC,EAAQ,YAAa,+BAAA,CAC/E,EAEMC,EAAuB,CAC3B,CAAE,MAAO,kBAAmB,MAAO,iBAAA,EACnC,CAAE,MAAO,iBAAkB,MAAO,gBAAA,EAClC,CAAE,MAAO,cAAe,MAAO,aAAA,EAC/B,CAAE,MAAO,aAAc,MAAO,YAAA,CAChC,EAEA,SAAwBC,EAAkB,CAAE,QAAAC,EAAS,KAAAC,EAAM,YAAAC,GAAe,CACxE,KAAM,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAAS,SAAS,EACxC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,CAAA,CAAE,EACnC,CAACG,EAASC,CAAU,EAAIJ,EAAAA,SAAS,EAAI,EACrC,CAACK,EAAeC,CAAgB,EAAIN,EAAAA,SAAS,IAAI,EACjD,CAACO,EAAsBC,CAAuB,EAAIR,EAAAA,SAAS,CAAA,CAAE,EAC7D,CAACS,EAAsBC,CAAuB,EAAIV,EAAAA,SAAS,CAAA,CAAE,EAEnEW,EAAAA,UAAU,IAAM,CACVhB,GAAS,IACXiB,EAAA,CAEJ,EAAG,CAACjB,GAAS,EAAE,CAAC,EAEhB,MAAMiB,EAAc,SAAY,CAC9B,GAAI,CACFR,EAAW,EAAI,EACf,MAAMS,EAAO,MAAMC,EAAG,sBAAsBnB,EAAQ,EAAE,EACtDO,EAAWW,CAAI,CACjB,OAASE,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7ClB,EAAY,6BAA8B,OAAO,CACnD,QAAA,CACEO,EAAW,EAAK,CAClB,CACF,EAEMY,EAAgB,MAAOC,GAAe,CAC1C,MAAMC,EAAcT,EAAqBQ,EAAW,EAAE,EACtD,GAAI,CAACC,EAAa,CAChBrB,EAAY,uCAAwC,OAAO,EAC3D,MACF,CAEA,GAAI,CACFS,EAAiBW,EAAW,EAAE,EAC9B,MAAME,EAAcZ,EAAqBU,EAAW,EAAE,GAAK,SAC3D,MAAMH,EAAG,0BAA0BG,EAAW,GAAIrB,EAAK,GAAIuB,CAAW,EAEtE,MAAML,EAAG,wBAAwBG,EAAW,GAAIC,CAAW,EAC3DrB,EAAY,GAAGoB,EAAW,OAAO,MAAQA,EAAW,OAAO,KAAK,gBAAgBC,CAAW,GAAI,SAAS,EAExGV,EAAwBY,GAAQ,CAC9B,MAAMC,EAAU,CAAE,GAAGD,CAAA,EACrB,cAAOC,EAAQJ,EAAW,EAAE,EACrBI,CACT,CAAC,EACDX,EAAwBU,GAAQ,CAC9B,MAAMC,EAAU,CAAE,GAAGD,CAAA,EACrB,cAAOC,EAAQJ,EAAW,EAAE,EACrBI,CACT,CAAC,EACDT,EAAA,CACF,OAASG,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClDlB,EAAY,0BAA2B,OAAO,CAChD,QAAA,CACES,EAAiB,IAAI,CACvB,CACF,EAEMgB,EAA0B,CAACC,EAAcJ,IAAgB,CAC7DX,EAAwBY,IAAS,CAAE,GAAGA,EAAM,CAACG,CAAY,EAAGJ,GAAc,CAC5E,EAEMK,EAA0B,CAACD,EAAcL,IAAgB,CAC7DR,EAAwBU,IAAS,CAAE,GAAGA,EAAM,CAACG,CAAY,EAAGL,GAAc,CAC5E,EAEMO,EAA0B,MAAOR,EAAYS,IAAmB,CACpE,GAAI,CACFpB,EAAiBW,EAAW,EAAE,EAC9B,MAAMH,EAAG,wBAAwBG,EAAW,GAAIS,CAAc,EAC9D7B,EAAY,GAAGoB,EAAW,OAAO,MAAQ,MAAM,oBAAoBS,CAAc,GAAI,SAAS,EAC9Fd,EAAA,CACF,OAASG,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EACnDlB,EAAY,sBAAuB,OAAO,CAC5C,QAAA,CACES,EAAiB,IAAI,CACvB,CACF,EAEMqB,EAA0B,MAAOV,EAAYW,IAAmB,CAEpE,GAAIX,EAAW,OAAO,KAAOrB,EAAK,IAAMgC,IAAmB,gBAAiB,CAC1E/B,EAAY,6BAA8B,OAAO,EACjD,MACF,CAEA,GAAI,CACFS,EAAiBW,EAAW,EAAE,EAC9B,MAAMH,EAAG,wBAAwBG,EAAW,GAAIW,CAAc,EAC9D,MAAMC,EAAavC,EAAqB,KAAKwC,GAAKA,EAAE,QAAUF,CAAc,GAAG,OAASA,EACxF/B,EAAY,GAAGoB,EAAW,OAAO,MAAQ,MAAM,WAAWY,CAAU,GAAI,SAAS,EACjFjB,EAAA,CACF,OAASG,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,EACnDlB,EAAY,8BAA+B,OAAO,CACpD,QAAA,CACES,EAAiB,IAAI,CACvB,CACF,EAEMyB,EAAe,MAAOd,GAAe,CACzC,GAAI,CACFX,EAAiBW,EAAW,EAAE,EAC9B,MAAMH,EAAG,iBAAiBG,EAAW,EAAE,EACvCpB,EAAY,mBAAoB,SAAS,EACzCe,EAAA,CACF,OAASG,EAAO,CACd,QAAQ,MAAM,8BAA+BA,CAAK,EAClDlB,EAAY,0BAA2B,OAAO,CAChD,QAAA,CACES,EAAiB,IAAI,CACvB,CACF,EAEM0B,EAAe,MAAOf,GAAe,CAEzC,GAAIA,EAAW,OAAO,KAAOrB,EAAK,GAAI,CACpCC,EAAY,6BAA8B,OAAO,EACjD,MACF,CAEA,GAAI,CACFS,EAAiBW,EAAW,EAAE,EAC9B,MAAMH,EAAG,aAAaG,EAAW,GAAIrB,EAAK,EAAE,EAC5CC,EAAY,GAAGoB,EAAW,OAAO,MAAQA,EAAW,OAAO,KAAK,WAAY,SAAS,EACrFL,EAAA,CACF,OAASG,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7ClB,EAAY,wBAAyB,OAAO,CAC9C,QAAA,CACES,EAAiB,IAAI,CACvB,CACF,EAEM2B,EAAkBhC,EAAQ,OAAOiC,GACjCpC,IAAW,MAAc,GACtBoC,EAAE,SAAWpC,CACrB,EAEKqC,EAAelC,EAAQ,UAAYiC,EAAE,SAAW,SAAS,EAAE,OAC3DE,EAAcnC,EAAQ,UAAYiC,EAAE,SAAW,QAAQ,EAAE,OACzDG,EAAepC,EAAQ,UAAYiC,EAAE,SAAW,SAAS,EAAE,OAEjE,OAAI/B,QAEC,MAAA,CAAI,UAAU,qBACb,SAAAmC,EAAAA,KAAC,MAAA,CAAI,UAAU,UACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,SAAA,CAAU,EAAM,yBAAA,CAAA,CAEjC,CAAA,CACF,EAKFD,EAAAA,KAAC,MAAA,CAAI,UAAU,qBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAA,OAAC,KAAA,CAAG,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAM,KAAM,EAAA,CAAI,EAAE,eAAA,EAAa,EACpCF,EAAAA,KAAC,IAAA,CAAE,UAAU,sBAAsB,SAAA,CAAA,4BACP3C,GAAS,IAAA,CAAA,CACrC,CAAA,EACF,EAGCwC,EAAe,GACdG,OAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAACE,EAAA,CAAc,KAAM,EAAA,CAAI,SACxB,OAAA,CACE,SAAA,CAAAN,EAAa,mBAAiBA,EAAe,EAAI,IAAM,GAAG,oBAAA,CAAA,CAC7D,CAAA,EACF,EAIFG,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,UAAW,iBAAiBxC,IAAW,UAAY,SAAW,EAAE,GAChE,QAAS,IAAMC,EAAU,SAAS,EACnC,SAAA,CAAA,UAECwC,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAmB,SAAAJ,CAAA,CAAa,CAAA,CAAA,CAAA,EAElDG,EAAAA,KAAC,SAAA,CACC,UAAW,iBAAiBxC,IAAW,SAAW,SAAW,EAAE,GAC/D,QAAS,IAAMC,EAAU,QAAQ,EAClC,SAAA,CAAA,SAECwC,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAmB,SAAAH,CAAA,CAAY,CAAA,CAAA,CAAA,EAEjDE,EAAAA,KAAC,SAAA,CACC,UAAW,iBAAiBxC,IAAW,UAAY,SAAW,EAAE,GAChE,QAAS,IAAMC,EAAU,SAAS,EACnC,SAAA,CAAA,UAECwC,EAAAA,IAAC,OAAA,CAAK,UAAU,kBAAmB,SAAAF,CAAA,CAAa,CAAA,CAAA,CAAA,CAClD,EACF,EAGAE,EAAAA,IAAC,MAAA,CAAI,UAAU,cACZ,SAAAN,EAAgB,SAAW,EAC1BK,EAAAA,KAAC,MAAA,CAAI,UAAU,eACZ,SAAA,CAAAxC,IAAW,WAAa,sBACxBA,IAAW,UAAY,oBACvBA,IAAW,WAAa,oBAAA,CAAA,CAC3B,EAEAmC,EAAgB,IAAIS,GAClBJ,EAAAA,KAAC,OAAoB,UAAW,eAAeI,EAAO,MAAM,GAC1D,SAAA,CAAAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,cACZ,SAAA,CAAAI,EAAO,OAAO,MAAQ,UACtBA,EAAO,OAAO,KAAO9C,EAAK,IAAM2C,EAAAA,IAAC,OAAA,CAAK,UAAU,aAAa,SAAA,OAAA,CAAK,CAAA,EACrE,QACC,MAAA,CAAI,UAAU,eAAgB,SAAAG,EAAO,OAAO,MAAM,EACnDJ,EAAAA,KAAC,MAAA,CAAI,UAAU,cACZ,SAAA,CAAAI,EAAO,SAAW,WACjBJ,EAAAA,KAAAK,EAAAA,SAAA,CAAE,SAAA,CAAA,aAAW,IAAI,KAAKD,EAAO,UAAU,EAAE,mBAAA,CAAmB,EAAE,EAE/DA,EAAO,SAAW,UAAYA,EAAO,aACpCJ,OAAAK,EAAAA,SAAA,CAAE,SAAA,CAAA,YAAU,IAAI,KAAKD,EAAO,WAAW,EAAE,mBAAA,CAAmB,EAAE,EAE/DA,EAAO,SAAW,UAAY,CAACA,EAAO,aACrCJ,EAAAA,KAAAK,WAAA,CAAE,SAAA,CAAA,gBAAc,IAAI,KAAKD,EAAO,UAAU,EAAE,mBAAA,CAAmB,EAAE,EAElEA,EAAO,SAAW,WAAaA,EAAO,YACrCJ,OAAAK,EAAAA,SAAA,CAAE,SAAA,CAAA,WAAS,IAAI,KAAKD,EAAO,UAAU,EAAE,mBAAA,CAAmB,CAAA,CAAE,CAAA,EAEhE,EACCA,EAAO,SAAW,UACjBJ,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACZ,SAAA,CAAAI,EAAO,eAAiB,gBACvBJ,EAAAA,KAAC,OAAA,CAAK,UAAU,qBAAqB,SAAA,CAAAC,EAAAA,IAAC/C,EAAA,CAAO,KAAM,EAAA,CAAI,EAAE,gBAAA,CAAA,CAAc,EAEvE8C,EAAAA,KAAC,OAAA,CAAK,UAAU,sBAAsB,SAAA,CAAAC,EAAAA,IAAChD,EAAA,CAAK,KAAM,EAAA,CAAI,EAAE,SAAA,EAAO,EAEhEmD,EAAO,cACNJ,OAAC,OAAA,CAAK,UAAU,oBAAoB,SAAA,CAAAC,EAAAA,IAACK,EAAA,CAAU,KAAM,EAAA,CAAI,EAAE,IAAEF,EAAO,YAAA,CAAA,CAAa,CAAA,CAAA,CAErF,CAAA,EAEJ,EACAJ,EAAAA,KAAC,MAAA,CAAI,UAAU,iBACZ,SAAA,CAAAI,EAAO,SAAW,WACjBJ,EAAAA,KAAAK,EAAAA,SAAA,CACE,SAAA,CAAAL,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,MAAO7B,EAAqBiC,EAAO,EAAE,GAAK,GAC1C,SAAWG,GAAMrB,EAAwBkB,EAAO,GAAIG,EAAE,OAAO,KAAK,EAClE,SAAUxC,IAAkBqC,EAAO,GACnC,UAAU,cAEV,SAAA,CAAAH,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,iBAAc,EAC9B9C,EAAqB,IAAIqD,GACxBP,EAAAA,IAAC,SAAA,CAAuB,MAAOO,EAAI,MAAQ,SAAAA,EAAI,KAAA,EAAlCA,EAAI,KAAoC,CACtD,CAAA,CAAA,CAAA,EAEHP,EAAAA,IAACQ,EAAA,CAAY,KAAM,GAAI,UAAU,kBAAA,CAAmB,CAAA,EACtD,EACAT,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,MAAOhC,EAAqBmC,EAAO,EAAE,GAAK,SAC1C,SAAWG,GAAMvB,EAAwBoB,EAAO,GAAIG,EAAE,OAAO,KAAK,EAClE,SAAUxC,IAAkBqC,EAAO,GACnC,UAAU,cAET,SAAApD,EAAqB,IAAIwD,GACxBP,EAAAA,IAAC,SAAA,CAAuB,MAAOO,EAAI,MAAQ,SAAAA,EAAI,KAAA,EAAlCA,EAAI,KAAoC,CACtD,CAAA,CAAA,EAEHP,EAAAA,IAACQ,EAAA,CAAY,KAAM,GAAI,UAAU,kBAAA,CAAmB,CAAA,EACtD,EACAR,EAAAA,IAAC,SAAA,CACC,UAAU,4BACV,QAAS,IAAMvB,EAAc0B,CAAM,EACnC,SAAUrC,IAAkBqC,EAAO,GAElC,SAAArC,IAAkBqC,EAAO,GAAK,MAC7BJ,OAAAK,EAAAA,SAAA,CAAE,SAAA,CAAAJ,EAAAA,IAACS,EAAA,CAAU,KAAM,EAAA,CAAI,EAAE,UAAA,CAAA,CAAQ,CAAA,CAAA,EAGrCT,EAAAA,IAAC,SAAA,CACC,UAAU,2BACV,QAAS,IAAMR,EAAaW,CAAM,EAClC,SAAUrC,IAAkBqC,EAAO,GAElC,SAAArC,IAAkBqC,EAAO,GAAK,MAC7BJ,OAAAK,EAAAA,SAAA,CAAE,SAAA,CAAAJ,EAAAA,IAACU,EAAA,CAAM,KAAM,EAAA,CAAI,EAAE,SAAA,CAAA,CAAO,CAAA,CAAA,CAEhC,EACF,EAEDP,EAAO,SAAW,UAAYA,EAAO,OAAO,KAAO9C,EAAK,IACvD0C,EAAAA,KAAAK,EAAAA,SAAA,CACE,SAAA,CAAAL,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,MAAOI,EAAO,cAAgB,GAC9B,SAAWG,GAAMpB,EAAwBiB,EAAQG,EAAE,OAAO,KAAK,EAC/D,SAAUxC,IAAkBqC,EAAO,GACnC,UAAU,cAEV,SAAA,CAAAH,EAAAA,IAAC,SAAA,CAAO,MAAM,GAAG,SAAA,UAAO,EACvB9C,EAAqB,IAAIqD,GACxBP,EAAAA,IAAC,SAAA,CAAuB,MAAOO,EAAI,MAAQ,SAAAA,EAAI,KAAA,EAAlCA,EAAI,KAAoC,CACtD,CAAA,CAAA,CAAA,EAEHP,EAAAA,IAACQ,EAAA,CAAY,KAAM,GAAI,UAAU,kBAAA,CAAmB,CAAA,EACtD,EACAT,EAAAA,KAAC,MAAA,CAAI,UAAU,gBACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,MAAOG,EAAO,cAAgB,SAC9B,SAAWG,GAAMlB,EAAwBe,EAAQG,EAAE,OAAO,KAAK,EAC/D,SAAUxC,IAAkBqC,EAAO,GACnC,UAAU,cAET,SAAApD,EAAqB,IAAIwD,GACxBP,EAAAA,IAAC,SAAA,CAAuB,MAAOO,EAAI,MAAQ,SAAAA,EAAI,KAAA,EAAlCA,EAAI,KAAoC,CACtD,CAAA,CAAA,EAEHP,EAAAA,IAACQ,EAAA,CAAY,KAAM,GAAI,UAAU,kBAAA,CAAmB,CAAA,EACtD,EACAR,EAAAA,IAAC,SAAA,CACC,UAAU,2BACV,QAAS,IAAMP,EAAaU,CAAM,EAClC,SAAUrC,IAAkBqC,EAAO,GAElC,SAAArC,IAAkBqC,EAAO,GAAK,MAC7BJ,OAAAK,EAAAA,SAAA,CAAE,SAAA,CAAAJ,EAAAA,IAACW,EAAA,CAAU,KAAM,EAAA,CAAI,EAAE,SAAA,CAAA,CAAO,CAAA,CAAA,CAEpC,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,GA5HQR,EAAO,EA6HjB,CACD,CAAA,CAEL,CAAA,EACF,CAEJ"}