{"version":3,"mappings":"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","names":["CORCard","memo","cor","isSelected","selectMode","areas","onToggleSelect","onView","onEdit","onDelete","onSubmitForApproval","statusInfo","getStatusInfo","canEdit","canDelete","canSubmit","getAreaName","areaId","a","handleClick","handleKeyDown","e","jsxs","formatCurrency","jsx","CheckSquare","Square","CheckCircle","formatDate","Send","Edit3","Eye","Trash2","STATUS_DISPLAY","CORList","project","company","refreshKey","onShowToast","onCreateCOR","onViewCOR","onEditCOR","previewMode","previewLimit","onViewAll","onDisplayModeChange","branding","useBranding","cors","setCORs","useState","loading","setLoading","filter","setFilter","areaFilter","setAreaFilter","groupFilter","setGroupFilter","expandedCOR","setExpandedCOR","selectedCORs","setSelectedCORs","setSelectMode","showGroupModal","setShowGroupModal","newGroupName","setNewGroupName","showExportMenu","setShowExportMenu","exportMenuRef","useRef","useEffect","handleClickOutside","displayMode","setDisplayMode","handleDisplayModeChange","mode","viewMode","setViewMode","expandedMonths","setExpandedMonths","dateFilter","setDateFilter","stats","setStats","loadCORs","useCallback","data","db","error","loadStats","subscription","exportToExcel","XLSX","__vitePreload","approved","c","pending","rejected","billed","totalValue","sum","approvedValue","pendingValue","wb","summaryData","s","wsSummary","detailHeaders","detailData","wsDetail","i","cellRef","name","sheetData","ws","fileName","exportToPDF","jsPDF","n","autoTable","doc","pageWidth","pageHeight","margin","primaryColor","hexToRgb","secondaryColor","logoOffset","logoBase64","loadImageAsBase64","yPos","boxWidth","box","boxX","boxColor","lightColor","tableData","status","statusKey","key","footerY","handleDelete","corId","prev","handleSubmitForApproval","toggleCORSelection","next","exitSelectMode","handleGroupSelected","availableGroups","useMemo","groups","filteredCORs","filtered","startDate","endDate","sevenDaysAgo","b","paginatedItems","searchTerm","setSearchTerm","currentPage","totalPages","goToPage","pageSize","setPageSize","paginatedTotalItems","useFilteredPagination","displayCORs","corsByMonth","date","monthKey","monthLabel","currentMonthKey","toggleMonthExpand","newExpanded","counts","renderCORCard","CardSkeleton","Download","ChevronDown","FileText","FileSpreadsheet","List","Table","Plus","Fragment","X","CORLog","FolderPlus","group","Search","Calendar","monthData","ChevronRight","CountBadge","Pagination"],"ignoreList":[],"sources":["../../src/components/cor/CORCard.jsx","../../src/components/cor/CORList.jsx"],"sourcesContent":["import { memo } from 'react'\nimport { Eye, Edit3, Trash2, Send, CheckSquare, Square, CheckCircle } from 'lucide-react'\nimport { formatCurrency, getStatusInfo, formatDate, formatDateRange } from '../../lib/corCalculations'\n\n/**\n * Memoized COR Card component\n * Prevents unnecessary re-renders when parent list updates\n */\nconst CORCard = memo(function CORCard({\n  cor,\n  isSelected,\n  selectMode,\n  areas,\n  onToggleSelect,\n  onView,\n  onEdit,\n  onDelete,\n  onSubmitForApproval\n}) {\n  const statusInfo = getStatusInfo(cor.status)\n  const canEdit = ['draft', 'pending_approval', 'approved'].includes(cor.status)\n  const canDelete = ['draft', 'pending_approval', 'rejected'].includes(cor.status)\n  const canSubmit = cor.status === 'draft'\n\n  const getAreaName = (areaId) => {\n    const area = areas?.find(a => a.id === areaId)\n    return area?.name || 'No Area'\n  }\n\n  const handleClick = () => {\n    if (selectMode) {\n      onToggleSelect(cor.id)\n    } else {\n      onView?.(cor)\n    }\n  }\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault()\n      handleClick()\n    }\n  }\n\n  return (\n    <div\n      className={`cor-card hover-lift animate-fade-in-up ${cor.status} ${isSelected ? 'selected' : ''}`}\n      onClick={handleClick}\n      onKeyDown={handleKeyDown}\n      tabIndex={0}\n      role=\"button\"\n      aria-label={`${selectMode ? (isSelected ? 'Deselect' : 'Select') : 'View'} COR ${cor.cor_number}: ${cor.title || 'Untitled'}, ${statusInfo.label}, ${formatCurrency(cor.cor_total || 0)}`}\n    >\n      <div className=\"cor-card-header\">\n        <div className=\"cor-card-left\">\n          {selectMode && (\n            <button\n              className=\"cor-select-checkbox\"\n              onClick={(e) => { e.stopPropagation(); onToggleSelect(cor.id, e); }}\n              aria-label={isSelected ? 'Deselect' : 'Select'}\n            >\n              {isSelected ? <CheckSquare size={18} /> : <Square size={18} />}\n            </button>\n          )}\n          <span className=\"cor-number\">{cor.cor_number}</span>\n          <span\n            className=\"cor-status-badge\"\n            style={{ backgroundColor: statusInfo.bgColor, color: statusInfo.color }}\n          >\n            {statusInfo.label}\n          </span>\n          {(cor.gc_signature_data || cor.client_signature_data) && (\n            <span className=\"cor-signed-badge\" title={`Signed by ${cor.gc_signature_name || cor.client_signature_name || 'Client'}`}>\n              <CheckCircle size={12} /> Signed\n            </span>\n          )}\n        </div>\n        <div className=\"cor-card-right\">\n          <span className=\"cor-total\">{formatCurrency(cor.cor_total || 0)}</span>\n        </div>\n      </div>\n\n      <div className=\"cor-card-body\">\n        <h4 className=\"cor-title\">{cor.title || 'Untitled COR'}</h4>\n        <div className=\"cor-meta\">\n          {cor.group_name && (\n            <span className=\"cor-group-badge\">{cor.group_name}</span>\n          )}\n          {cor.area_id && (\n            <span className=\"cor-area\">{getAreaName(cor.area_id)}</span>\n          )}\n          <span className=\"cor-period\">{formatDateRange(cor.period_start, cor.period_end)}</span>\n        </div>\n      </div>\n\n      <div className=\"cor-card-footer\">\n        <span className=\"cor-created\">{formatDate(cor.created_at)}</span>\n        <div className=\"cor-actions\" onClick={e => e.stopPropagation()}>\n          {canSubmit && (\n            <button\n              className=\"cor-action-btn submit\"\n              onClick={(e) => onSubmitForApproval(cor.id, e)}\n              title=\"Submit for Approval\"\n              aria-label={`Submit COR ${cor.cor_number} for approval`}\n            >\n              <Send size={14} aria-hidden=\"true\" />\n            </button>\n          )}\n          {canEdit && (\n            <button\n              className=\"cor-action-btn edit\"\n              onClick={(e) => { e.stopPropagation(); onEdit?.(cor); }}\n              title=\"Edit\"\n              aria-label={`Edit COR ${cor.cor_number}`}\n            >\n              <Edit3 size={14} aria-hidden=\"true\" />\n            </button>\n          )}\n          <button\n            className=\"cor-action-btn view\"\n            onClick={(e) => { e.stopPropagation(); onView?.(cor); }}\n            title=\"View Details\"\n            aria-label={`View COR ${cor.cor_number} details`}\n          >\n            <Eye size={14} aria-hidden=\"true\" />\n          </button>\n          {canDelete && (\n            <button\n              className=\"cor-action-btn delete\"\n              onClick={(e) => onDelete(cor.id, e)}\n              title=\"Delete\"\n              aria-label={`Delete COR ${cor.cor_number}`}\n            >\n              <Trash2 size={14} aria-hidden=\"true\" />\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n})\n\nexport default CORCard\n","import { useState, useEffect, useMemo, useRef, useCallback } from 'react'\nimport { FileText, Plus, ChevronDown, ChevronRight, Calendar, Download, FolderPlus, X, List, Table, FileSpreadsheet, CheckSquare, Search } from 'lucide-react'\nimport { db } from '../../lib/supabase'\nimport { formatCurrency } from '../../lib/corCalculations'\nimport { hexToRgb, loadImageAsBase64 } from '../../lib/imageUtils'\nimport { CardSkeleton, CountBadge } from '../ui'\nimport { useBranding } from '../../lib/BrandingContext'\nimport { useFilteredPagination } from '../../hooks/useFilteredPagination'\nimport Pagination from '../ui/Pagination'\nimport CORLog from './CORLog'\nimport CORCard from './CORCard'\n\n// Status display mapping for exports\nconst STATUS_DISPLAY = {\n  draft: { label: 'Draft', color: [107, 114, 128], bgColor: [243, 244, 246] },\n  pending_approval: { label: 'Pending Approval', color: [217, 119, 6], bgColor: [254, 243, 199] },\n  approved: { label: 'Approved', color: [5, 150, 105], bgColor: [209, 250, 229] },\n  rejected: { label: 'Rejected', color: [220, 38, 38], bgColor: [254, 226, 226] },\n  billed: { label: 'Billed', color: [37, 99, 235], bgColor: [219, 234, 254] },\n  closed: { label: 'Closed', color: [75, 85, 99], bgColor: [229, 231, 235] }\n}\n\nexport default function CORList({\n  project,\n  company,\n  areas,\n  refreshKey,\n  onShowToast,\n  onCreateCOR,\n  onViewCOR,\n  onEditCOR,\n  // Preview mode props\n  previewMode = false,  // When true, shows limited items with \"See All\" button\n  previewLimit = 5,     // Number of items to show in preview mode\n  onViewAll,            // Callback when \"See All\" is clicked\n  onDisplayModeChange   // Callback when display mode changes (for parent layout adjustments)\n}) {\n  const { branding } = useBranding()\n  const [cors, setCORs] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [filter, setFilter] = useState('all')\n  const [areaFilter, setAreaFilter] = useState('all')\n  const [groupFilter, setGroupFilter] = useState('all')\n  const [expandedCOR, setExpandedCOR] = useState(null)\n  const [selectedCORs, setSelectedCORs] = useState(new Set())\n  const [selectMode, setSelectMode] = useState(false)\n  const [showGroupModal, setShowGroupModal] = useState(false)\n  const [newGroupName, setNewGroupName] = useState('')\n  const [showExportMenu, setShowExportMenu] = useState(false)\n  const exportMenuRef = useRef(null)\n\n  // Close export menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (e) => {\n      if (exportMenuRef.current && !exportMenuRef.current.contains(e.target)) {\n        setShowExportMenu(false)\n      }\n    }\n    if (showExportMenu) {\n      document.addEventListener('mousedown', handleClickOutside)\n    }\n    return () => document.removeEventListener('mousedown', handleClickOutside)\n  }, [showExportMenu])\n\n  // Display mode state - 'list' (card view) or 'log' (table view for client presentation)\n  const [displayMode, setDisplayMode] = useState('list') // 'list' | 'log'\n\n  // Notify parent when display mode changes\n  const handleDisplayModeChange = (mode) => {\n    setDisplayMode(mode)\n    onDisplayModeChange?.(mode)\n  }\n\n  // View mode state - default to 'all' in preview mode so we can limit by count\n  const [viewMode, setViewMode] = useState(previewMode ? 'all' : 'recent') // 'recent' | 'all'\n  const [expandedMonths, setExpandedMonths] = useState(new Set())\n  const [dateFilter, setDateFilter] = useState({ start: '', end: '' })\n\n  // Stats state\n  const [stats, setStats] = useState(null)\n\n  // Define load functions before useEffect that uses them\n  const loadCORs = useCallback(async () => {\n    try {\n      const data = await db.getCORs(project.id)\n      setCORs(data || [])\n    } catch (error) {\n      console.error('Error loading CORs:', error)\n      onShowToast?.('Error loading change order requests', 'error')\n    } finally {\n      setLoading(false)\n    }\n  }, [project.id]) // onShowToast is stable\n\n  const loadStats = useCallback(async () => {\n    try {\n      const data = await db.getCORStats?.(project.id)\n      setStats(data)\n    } catch (error) {\n      console.error('Error loading COR stats:', error)\n    }\n  }, [project.id])\n\n  useEffect(() => {\n    loadCORs()\n    loadStats()\n\n    // Subscribe to realtime updates\n    const subscription = db.subscribeToCORs?.(project.id, () => {\n      loadCORs()\n      loadStats()\n    })\n\n    return () => {\n      if (subscription) db.unsubscribe?.(subscription)\n    }\n  }, [project.id, refreshKey, loadCORs, loadStats])\n\n  // Professional Excel Export\n  const exportToExcel = async () => {\n    if (cors.length === 0) {\n      onShowToast?.('No CORs to export', 'error')\n      return\n    }\n\n    onShowToast?.('Generating Excel report...', 'info')\n\n    try {\n      const XLSX = await import('xlsx')\n\n      // Calculate statistics\n      const approved = cors.filter(c => c.status === 'approved')\n      const pending = cors.filter(c => ['draft', 'pending_approval'].includes(c.status))\n      const rejected = cors.filter(c => c.status === 'rejected')\n      const billed = cors.filter(c => c.status === 'billed')\n      const totalValue = cors.reduce((sum, c) => sum + (c.cor_total || 0), 0) / 100\n      const approvedValue = approved.reduce((sum, c) => sum + (c.cor_total || 0), 0) / 100\n      const pendingValue = pending.reduce((sum, c) => sum + (c.cor_total || 0), 0) / 100\n\n      // Create workbook\n      const wb = XLSX.utils.book_new()\n\n      // === SUMMARY SHEET ===\n      const summaryData = [\n        ['CHANGE ORDER REQUEST SUMMARY'],\n        [],\n        ['Company:', company?.name || ''],\n        ['Project:', project.name],\n        ['Job Number:', project.job_number || 'N/A'],\n        ['Report Date:', new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })],\n        [],\n        ['FINANCIAL OVERVIEW'],\n        [],\n        ['Category', 'Count', 'Value'],\n        ['Total CORs', cors.length, totalValue],\n        ['Approved', approved.length, approvedValue],\n        ['Pending Approval', pending.length, pendingValue],\n        ['Rejected', rejected.length, rejected.reduce((s, c) => s + (c.cor_total || 0), 0) / 100],\n        ['Billed', billed.length, billed.reduce((s, c) => s + (c.cor_total || 0), 0) / 100],\n        [],\n        ['CONTRACT IMPACT'],\n        [],\n        ['Original Contract Value:', project.contract_value || 0],\n        ['Total Approved CORs:', approvedValue],\n        ['Revised Contract Value:', (project.contract_value || 0) + approvedValue],\n        ['Pending COR Value:', pendingValue],\n        ['Potential Total:', (project.contract_value || 0) + approvedValue + pendingValue]\n      ]\n\n      const wsSummary = XLSX.utils.aoa_to_sheet(summaryData)\n      wsSummary['!cols'] = [{ wch: 25 }, { wch: 15 }, { wch: 18 }]\n      XLSX.utils.book_append_sheet(wb, wsSummary, 'Summary')\n\n      // === DETAIL SHEET ===\n      const detailHeaders = [\n        'COR #', 'Title', 'Description', 'Amount', 'Status',\n        'Created Date', 'Submitted Date', 'Approved Date', 'Approved By',\n        'Work Period Start', 'Work Period End', 'Area'\n      ]\n\n      const detailData = cors.map(cor => [\n        cor.cor_number || '',\n        cor.title || 'Untitled',\n        cor.scope_of_work || '',\n        (cor.cor_total || 0) / 100,\n        STATUS_DISPLAY[cor.status]?.label || cor.status,\n        cor.created_at ? new Date(cor.created_at).toLocaleDateString() : '',\n        cor.submitted_at ? new Date(cor.submitted_at).toLocaleDateString() : '',\n        cor.approved_at ? new Date(cor.approved_at).toLocaleDateString() : '',\n        cor.approved_by_name || '',\n        cor.period_start ? new Date(cor.period_start).toLocaleDateString() : '',\n        cor.period_end ? new Date(cor.period_end).toLocaleDateString() : '',\n        cor.area?.name || ''\n      ])\n\n      const wsDetail = XLSX.utils.aoa_to_sheet([detailHeaders, ...detailData])\n      wsDetail['!cols'] = [\n        { wch: 10 }, { wch: 30 }, { wch: 40 }, { wch: 14 }, { wch: 16 },\n        { wch: 12 }, { wch: 12 }, { wch: 12 }, { wch: 18 },\n        { wch: 12 }, { wch: 12 }, { wch: 15 }\n      ]\n\n      // Format currency column\n      for (let i = 1; i <= detailData.length; i++) {\n        const cellRef = XLSX.utils.encode_cell({ r: i, c: 3 })\n        if (wsDetail[cellRef]) wsDetail[cellRef].z = '$#,##0.00'\n      }\n\n      XLSX.utils.book_append_sheet(wb, wsDetail, 'COR Details')\n\n      // === STATUS BREAKDOWN SHEET ===\n      const statusSheets = [\n        { name: 'Approved CORs', data: approved, status: 'approved' },\n        { name: 'Pending CORs', data: pending, status: 'pending' }\n      ]\n\n      statusSheets.forEach(({ name, data }) => {\n        if (data.length > 0) {\n          const sheetData = [\n            ['COR #', 'Title', 'Amount', 'Date'],\n            ...data.map(cor => [\n              cor.cor_number || '',\n              cor.title || 'Untitled',\n              (cor.cor_total || 0) / 100,\n              cor.created_at ? new Date(cor.created_at).toLocaleDateString() : ''\n            ]),\n            [],\n            ['TOTAL', '', data.reduce((s, c) => s + (c.cor_total || 0), 0) / 100, '']\n          ]\n          const ws = XLSX.utils.aoa_to_sheet(sheetData)\n          ws['!cols'] = [{ wch: 12 }, { wch: 40 }, { wch: 14 }, { wch: 12 }]\n          XLSX.utils.book_append_sheet(wb, ws, name)\n        }\n      })\n\n      // Save file\n      const fileName = `COR_Report_${project.job_number || project.name}_${new Date().toISOString().split('T')[0]}.xlsx`\n      XLSX.writeFile(wb, fileName)\n\n      onShowToast?.('Excel report exported successfully', 'success')\n    } catch (error) {\n      console.error('Export error:', error)\n      onShowToast?.('Export failed', 'error')\n    }\n  }\n\n  // Professional PDF Export with Branding\n  const exportToPDF = async () => {\n    if (cors.length === 0) {\n      onShowToast?.('No CORs to export', 'error')\n      return\n    }\n\n    onShowToast?.('Generating PDF report...', 'info')\n\n    try {\n      const { default: jsPDF } = await import('jspdf')\n      const { default: autoTable } = await import('jspdf-autotable')\n\n      const doc = new jsPDF('landscape')\n      const pageWidth = doc.internal.pageSize.width\n      const pageHeight = doc.internal.pageSize.height\n      const margin = 15\n\n      // Get brand colors\n      const primaryColor = hexToRgb(branding?.primary_color || '#3B82F6')\n      const secondaryColor = hexToRgb(branding?.secondary_color || '#1E40AF')\n\n      // === HEADER WITH BRANDING ===\n      // Primary color header bar\n      doc.setFillColor(...primaryColor)\n      doc.rect(0, 0, pageWidth, 40, 'F')\n\n      // Secondary color accent stripe\n      doc.setFillColor(...secondaryColor)\n      doc.rect(0, 38, pageWidth, 3, 'F')\n\n      // Company logo if available\n      let logoOffset = margin\n      if (branding?.logo_url) {\n        try {\n          const logoBase64 = await loadImageAsBase64(branding.logo_url)\n          if (logoBase64) {\n            doc.addImage(logoBase64, 'PNG', margin, 6, 28, 28)\n            logoOffset = margin + 35\n          }\n        } catch (e) {\n          console.error('Logo load error:', e)\n        }\n      }\n\n      // Company name and document title\n      doc.setTextColor(255, 255, 255)\n      doc.setFontSize(20)\n      doc.setFont('helvetica', 'bold')\n      doc.text(company?.name || 'Company', logoOffset, 18)\n\n      doc.setFontSize(11)\n      doc.setFont('helvetica', 'normal')\n      doc.text('CHANGE ORDER REQUEST REPORT', logoOffset, 28)\n\n      // Right side - date and job info\n      doc.setFontSize(9)\n      doc.text(new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }), pageWidth - margin, 15, { align: 'right' })\n      if (project.job_number) {\n        doc.text(`Job #: ${project.job_number}`, pageWidth - margin, 23, { align: 'right' })\n      }\n      doc.text(`${cors.length} Change Orders`, pageWidth - margin, 31, { align: 'right' })\n\n      // === PROJECT INFO BOX ===\n      let yPos = 50\n\n      doc.setFillColor(248, 250, 252)\n      doc.setDrawColor(...primaryColor)\n      doc.setLineWidth(0.5)\n      doc.roundedRect(margin, yPos, pageWidth - margin * 2, 25, 3, 3, 'FD')\n\n      doc.setTextColor(...primaryColor)\n      doc.setFontSize(14)\n      doc.setFont('helvetica', 'bold')\n      doc.text(project.name, margin + 8, yPos + 10)\n\n      doc.setTextColor(100, 116, 139)\n      doc.setFontSize(9)\n      doc.setFont('helvetica', 'normal')\n      if (project.address) {\n        doc.text(project.address, margin + 8, yPos + 18)\n      }\n\n      // === FINANCIAL SUMMARY BOXES ===\n      yPos += 35\n\n      const approved = cors.filter(c => c.status === 'approved')\n      const pending = cors.filter(c => ['draft', 'pending_approval'].includes(c.status))\n      const totalValue = cors.reduce((sum, c) => sum + (c.cor_total || 0), 0)\n      const approvedValue = approved.reduce((sum, c) => sum + (c.cor_total || 0), 0)\n      const pendingValue = pending.reduce((sum, c) => sum + (c.cor_total || 0), 0)\n\n      const boxWidth = (pageWidth - margin * 2 - 30) / 4\n      const summaryBoxes = [\n        { label: 'Total CORs', value: cors.length.toString(), subValue: formatCurrency(totalValue) },\n        { label: 'Approved', value: approved.length.toString(), subValue: formatCurrency(approvedValue), color: [5, 150, 105] },\n        { label: 'Pending', value: pending.length.toString(), subValue: formatCurrency(pendingValue), color: [217, 119, 6] },\n        { label: 'Revised Contract', value: formatCurrency((project.contract_value || 0) * 100 + approvedValue), subValue: `+${formatCurrency(approvedValue)} from original`, color: primaryColor }\n      ]\n\n      summaryBoxes.forEach((box, i) => {\n        const boxX = margin + (i * (boxWidth + 10))\n        const boxColor = box.color || primaryColor\n        const lightColor = boxColor.map(c => Math.min(255, c + 200))\n\n        doc.setFillColor(...lightColor)\n        doc.setDrawColor(...boxColor)\n        doc.roundedRect(boxX, yPos, boxWidth, 32, 2, 2, 'FD')\n\n        doc.setTextColor(...boxColor)\n        doc.setFontSize(18)\n        doc.setFont('helvetica', 'bold')\n        doc.text(box.value, boxX + boxWidth / 2, yPos + 14, { align: 'center' })\n\n        doc.setTextColor(100, 116, 139)\n        doc.setFontSize(8)\n        doc.setFont('helvetica', 'normal')\n        doc.text(box.label, boxX + boxWidth / 2, yPos + 22, { align: 'center' })\n\n        if (box.subValue) {\n          doc.setFontSize(7)\n          doc.text(box.subValue, boxX + boxWidth / 2, yPos + 28, { align: 'center' })\n        }\n      })\n\n      // === COR TABLE ===\n      yPos += 42\n\n      doc.setTextColor(...primaryColor)\n      doc.setFontSize(11)\n      doc.setFont('helvetica', 'bold')\n      doc.text('CHANGE ORDER DETAILS', margin, yPos)\n      yPos += 5\n\n      const tableData = cors.map((cor, i) => {\n        const status = STATUS_DISPLAY[cor.status] || { label: cor.status, color: [107, 114, 128] }\n        return [\n          (i + 1).toString(),\n          cor.cor_number || '-',\n          cor.title || 'Untitled',\n          formatCurrency(cor.cor_total || 0),\n          status.label,\n          cor.created_at ? new Date(cor.created_at).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: '2-digit' }) : '-'\n        ]\n      })\n\n      autoTable(doc, {\n        startY: yPos,\n        head: [['#', 'COR #', 'Description', 'Amount', 'Status', 'Date']],\n        body: tableData,\n        theme: 'grid',\n        styles: {\n          fontSize: 9,\n          cellPadding: 4,\n          lineColor: [226, 232, 240],\n          lineWidth: 0.1\n        },\n        headStyles: {\n          fillColor: primaryColor,\n          textColor: [255, 255, 255],\n          fontStyle: 'bold',\n          halign: 'center'\n        },\n        columnStyles: {\n          0: { cellWidth: 12, halign: 'center' },\n          1: { cellWidth: 25, halign: 'center' },\n          2: { cellWidth: 'auto' },\n          3: { cellWidth: 30, halign: 'right', fontStyle: 'bold' },\n          4: { cellWidth: 28, halign: 'center' },\n          5: { cellWidth: 28, halign: 'center' }\n        },\n        alternateRowStyles: {\n          fillColor: [248, 250, 252]\n        },\n        didParseCell: (data) => {\n          // Color-code status column\n          if (data.column.index === 4 && data.section === 'body') {\n            const statusKey = Object.keys(STATUS_DISPLAY).find(\n              key => STATUS_DISPLAY[key].label === data.cell.raw\n            )\n            if (statusKey) {\n              data.cell.styles.textColor = STATUS_DISPLAY[statusKey].color\n              data.cell.styles.fontStyle = 'bold'\n            }\n          }\n        }\n      })\n\n      // === FOOTER ===\n      const footerY = pageHeight - 12\n      doc.setDrawColor(226, 232, 240)\n      doc.setLineWidth(0.5)\n      doc.line(margin, footerY - 5, pageWidth - margin, footerY - 5)\n\n      doc.setTextColor(148, 163, 184)\n      doc.setFontSize(8)\n      doc.setFont('helvetica', 'normal')\n      doc.text(`Generated on ${new Date().toLocaleString()}`, margin, footerY)\n      doc.text(`${company?.name || 'FieldSync'} â€¢ Confidential`, pageWidth / 2, footerY, { align: 'center' })\n      doc.text('Page 1 of 1', pageWidth - margin, footerY, { align: 'right' })\n\n      // Save\n      const fileName = `COR_Report_${project.job_number || project.name}_${new Date().toISOString().split('T')[0]}.pdf`\n      doc.save(fileName)\n\n      onShowToast?.('PDF report exported successfully', 'success')\n    } catch (error) {\n      console.error('Export error:', error)\n      onShowToast?.('Export failed', 'error')\n    }\n  }\n\n  const handleDelete = useCallback(async (corId, e) => {\n    e?.stopPropagation()\n    if (!confirm('Are you sure you want to delete this COR? This action cannot be undone.')) return\n\n    try {\n      await db.deleteCOR(corId)\n      setCORs(prev => prev.filter(c => c.id !== corId))\n      onShowToast?.('COR deleted', 'success')\n      loadStats()\n    } catch (error) {\n      console.error('Error deleting COR:', error)\n      onShowToast?.('Error deleting COR', 'error')\n    }\n  }, [loadStats]) // onShowToast is stable (memoized in App.jsx)\n\n  const handleSubmitForApproval = useCallback(async (corId, e) => {\n    e?.stopPropagation()\n    try {\n      await db.submitCORForApproval(corId)\n      await loadCORs()\n      onShowToast?.('COR submitted for approval', 'success')\n      loadStats()\n    } catch (error) {\n      console.error('Error submitting COR:', error?.message || error)\n      onShowToast?.(error?.message || 'Error submitting COR', 'error')\n    }\n  }, [loadCORs, loadStats]) // onShowToast is stable (memoized in App.jsx)\n\n  // Toggle COR selection\n  const toggleCORSelection = useCallback((corId, e) => {\n    e?.stopPropagation()\n    setSelectedCORs(prev => {\n      const next = new Set(prev)\n      if (next.has(corId)) {\n        next.delete(corId)\n      } else {\n        next.add(corId)\n      }\n      return next\n    })\n  }, [])\n\n  // Exit select mode\n  const exitSelectMode = () => {\n    setSelectMode(false)\n    setSelectedCORs(new Set())\n  }\n\n  // Group selected CORs\n  const handleGroupSelected = async () => {\n    if (!newGroupName.trim()) {\n      onShowToast?.('Please enter a group name', 'error')\n      return\n    }\n\n    try {\n      await db.bulkUpdateCORGroup([...selectedCORs], newGroupName.trim())\n      onShowToast?.(`${selectedCORs.size} CORs grouped as \"${newGroupName.trim()}\"`, 'success')\n      setShowGroupModal(false)\n      setNewGroupName('')\n      setSelectedCORs(new Set())\n      setSelectMode(false)\n      loadCORs()\n    } catch (error) {\n      console.error('Error grouping CORs:', error)\n      onShowToast?.('Error grouping CORs', 'error')\n    }\n  }\n\n  // Get unique groups from CORs\n  const availableGroups = useMemo(() => {\n    const groups = cors\n      .map(c => c.group_name)\n      .filter(Boolean)\n    return [...new Set(groups)].sort()\n  }, [cors])\n\n  // Filter CORs by status, area, group, view mode, and date range\n  const filteredCORs = useMemo(() => {\n    let filtered = [...cors]\n\n    // Status filter\n    if (filter !== 'all') {\n      filtered = filtered.filter(c => c.status === filter)\n    }\n\n    // Area filter\n    if (areaFilter !== 'all') {\n      filtered = filtered.filter(c => c.area_id === areaFilter)\n    }\n\n    // Group filter\n    if (groupFilter !== 'all') {\n      filtered = filtered.filter(c => c.group_name === groupFilter)\n    }\n\n    // Apply date filter if set\n    if (dateFilter.start) {\n      const startDate = new Date(dateFilter.start)\n      startDate.setHours(0, 0, 0, 0)\n      filtered = filtered.filter(c => {\n        const corDate = new Date(c.created_at)\n        return corDate >= startDate\n      })\n    }\n    if (dateFilter.end) {\n      const endDate = new Date(dateFilter.end)\n      endDate.setHours(23, 59, 59, 999)\n      filtered = filtered.filter(c => {\n        const corDate = new Date(c.created_at)\n        return corDate <= endDate\n      })\n    }\n\n    // In recent mode (not preview mode), show only last 7 days\n    if (viewMode === 'recent' && !previewMode) {\n      const sevenDaysAgo = new Date()\n      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7)\n      sevenDaysAgo.setHours(0, 0, 0, 0)\n      filtered = filtered.filter(c => {\n        const corDate = new Date(c.created_at)\n        return corDate >= sevenDaysAgo\n      })\n    }\n\n    // Sort by created_at descending\n    filtered.sort((a, b) => new Date(b.created_at) - new Date(a.created_at))\n\n    // In preview mode, limit to previewLimit items\n    if (previewMode) {\n      filtered = filtered.slice(0, previewLimit)\n    }\n\n    return filtered\n  }, [cors, filter, areaFilter, groupFilter, viewMode, dateFilter, previewMode, previewLimit])\n\n  // Pagination for COR list (skipped in preview mode)\n  const {\n    paginatedItems,\n    searchTerm,\n    setSearchTerm,\n    currentPage,\n    totalPages,\n    goToPage,\n    pageSize,\n    setPageSize,\n    totalItems: paginatedTotalItems\n  } = useFilteredPagination(filteredCORs, {\n    pageSize: 25,\n    searchFields: ['title', 'cor_number', 'scope_of_work', 'status']\n  })\n\n  // In preview mode use filteredCORs directly; otherwise use paginated results\n  const displayCORs = previewMode ? filteredCORs : paginatedItems\n\n  // Group CORs by month for 'all' view\n  const corsByMonth = useMemo(() => {\n    if (viewMode !== 'all') return null\n\n    const groups = {}\n    displayCORs.forEach(cor => {\n      const date = new Date(cor.created_at)\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`\n      const monthLabel = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })\n\n      if (!groups[monthKey]) {\n        groups[monthKey] = { label: monthLabel, cors: [], totalAmount: 0 }\n      }\n      groups[monthKey].cors.push(cor)\n      groups[monthKey].totalAmount += cor.cor_total || 0\n    })\n\n    return Object.entries(groups).sort((a, b) => b[0].localeCompare(a[0]))\n  }, [displayCORs, viewMode])\n\n  // Auto-expand current month\n  useEffect(() => {\n    if (corsByMonth && corsByMonth.length > 0) {\n      const currentMonthKey = corsByMonth[0][0]\n      setExpandedMonths(new Set([currentMonthKey]))\n    }\n  }, [corsByMonth])\n\n  const toggleMonthExpand = (monthKey) => {\n    const newExpanded = new Set(expandedMonths)\n    if (newExpanded.has(monthKey)) {\n      newExpanded.delete(monthKey)\n    } else {\n      newExpanded.add(monthKey)\n    }\n    setExpandedMonths(newExpanded)\n  }\n\n  // Count by status\n  const counts = useMemo(() => ({\n    all: cors.length,\n    draft: cors.filter(c => c.status === 'draft').length,\n    pending_approval: cors.filter(c => c.status === 'pending_approval').length,\n    approved: cors.filter(c => c.status === 'approved').length,\n    rejected: cors.filter(c => c.status === 'rejected').length,\n    billed: cors.filter(c => c.status === 'billed').length,\n    closed: cors.filter(c => c.status === 'closed').length\n  }), [cors])\n\n  const totalCORsCount = filter === 'all' ? cors.length : cors.filter(c => c.status === filter).length\n\n  // Render COR card using memoized component\n  const renderCORCard = (cor) => (\n    <CORCard\n      key={cor.id}\n      cor={cor}\n      isSelected={selectedCORs.has(cor.id)}\n      selectMode={selectMode}\n      areas={areas}\n      onToggleSelect={toggleCORSelection}\n      onView={onViewCOR}\n      onEdit={onEditCOR}\n      onDelete={handleDelete}\n      onSubmitForApproval={handleSubmitForApproval}\n    />\n  )\n\n  if (loading) {\n    return (\n      <div className=\"cor-list\">\n        <div className=\"cor-loading-skeletons\">\n          {[1, 2, 3].map(i => (\n            <CardSkeleton key={i} />\n          ))}\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={`cor-list ${previewMode ? 'cor-list-preview' : ''}`}>\n      {/* Clean Header */}\n      <div className=\"cor-list-header\">\n        <div className=\"cor-list-info\">\n          <h3>Change Orders</h3>\n          <div className=\"cor-stats-inline\">\n            <span className=\"cor-stat-item\">{counts.all} total</span>\n            {counts.pending_approval > 0 && (\n              <span className=\"cor-stat-item pending\">{counts.pending_approval} pending</span>\n            )}\n            {stats?.totalApproved > 0 && (\n              <span className=\"cor-stat-item approved\">{formatCurrency(stats.totalApproved)}</span>\n            )}\n          </div>\n        </div>\n        <div className=\"cor-header-actions\">\n          {/* Export buttons - always visible */}\n          {/* Export Dropdown */}\n          <div className=\"cor-export-dropdown\" ref={exportMenuRef}>\n            <button\n              className=\"btn btn-secondary btn-small\"\n              onClick={() => setShowExportMenu(!showExportMenu)}\n              disabled={cors.length === 0}\n            >\n              <Download size={14} /> Export <ChevronDown size={12} />\n            </button>\n            {showExportMenu && (\n              <div className=\"cor-export-menu\">\n                <button onClick={() => { exportToPDF(); setShowExportMenu(false); }}>\n                  <FileText size={14} /> Export as PDF\n                </button>\n                <button onClick={() => { exportToExcel(); setShowExportMenu(false); }}>\n                  <FileSpreadsheet size={14} /> Export as Excel\n                </button>\n              </div>\n            )}\n          </div>\n          {/* Display Mode Toggle - Log button is prominent for business use */}\n          <div className=\"cor-display-toggle\">\n            <button\n              className={`cor-display-btn ${displayMode === 'list' ? 'active' : ''}`}\n              onClick={() => handleDisplayModeChange('list')}\n              title=\"List View\"\n            >\n              <List size={14} />\n              <span>List</span>\n            </button>\n            <button\n              className={`cor-display-btn log-btn ${displayMode === 'log' ? 'active' : ''}`}\n              onClick={() => handleDisplayModeChange('log')}\n              title=\"COR Log - Edit & Export for Clients\"\n            >\n              <Table size={14} />\n              <span>COR Log</span>\n            </button>\n          </div>\n          {previewMode ? (\n            // In preview mode, show \"See All\" button and New COR button\n            <>\n              <button className=\"btn btn-primary btn-small\" onClick={onCreateCOR}>\n                <Plus size={14} /> New COR\n              </button>\n            </>\n          ) : (\n            // Full mode shows select and new buttons\n            <>\n              {displayMode === 'list' && (\n                <button\n                  className={`btn btn-secondary btn-small ${selectMode ? 'active' : ''}`}\n                  onClick={() => selectMode ? exitSelectMode() : setSelectMode(true)}\n                >\n                  {selectMode ? <><X size={14} /> Cancel</> : <><CheckSquare size={14} /> Select</>}\n                </button>\n              )}\n              <button className=\"btn btn-primary btn-small\" onClick={onCreateCOR}>\n                <Plus size={14} /> New COR\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Log View - renders CORLog in a full-screen modal for better editing */}\n      {displayMode === 'log' && (\n        <div className=\"cor-log-modal-overlay\" onClick={() => handleDisplayModeChange('list')}>\n          <div className=\"cor-log-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"cor-log-modal-header\">\n              <h2>Change Order Log</h2>\n              <button\n                className=\"cor-log-modal-close\"\n                onClick={() => handleDisplayModeChange('list')}\n                title=\"Close\"\n              >\n                <X size={24} />\n              </button>\n            </div>\n            <div className=\"cor-log-modal-content\">\n              <CORLog project={project} company={company} onShowToast={onShowToast} />\n            </div>\n          </div>\n        </div>\n      )}\n\n      {displayMode === 'list' && (\n        <>\n          {/* Selection Action Bar */}\n          {selectMode && selectedCORs.size > 0 && (\n            <div className=\"cor-selection-bar\">\n              <span className=\"selection-count\">{selectedCORs.size} selected</span>\n              <button\n                className=\"btn btn-primary btn-small\"\n                onClick={() => setShowGroupModal(true)}\n              >\n                <FolderPlus size={14} /> Group Selected\n              </button>\n            </div>\n          )}\n\n          {/* Minimal Filter Row - hidden in preview mode */}\n          {!previewMode && (\n            <div className=\"cor-controls\">\n              <div className=\"cor-filter-pills\" role=\"tablist\">\n                {[\n                  { id: 'all', label: 'All' },\n                  { id: 'draft', label: 'Draft' },\n                  { id: 'pending_approval', label: 'Pending' },\n                  { id: 'approved', label: 'Approved' }\n                ].map(status => (\n                  <button\n                    key={status.id}\n                    role=\"tab\"\n                    aria-selected={filter === status.id}\n                    className={`cor-pill ${filter === status.id ? 'active' : ''}`}\n                    onClick={() => setFilter(status.id)}\n                  >\n                    {status.label}\n                    {counts[status.id] > 0 && <span className=\"cor-pill-count\">{counts[status.id]}</span>}\n                  </button>\n                ))}\n              </div>\n\n              {/* Group Filter */}\n              {availableGroups.length > 0 && (\n                <select\n                  className=\"cor-group-filter\"\n                  value={groupFilter}\n                  onChange={(e) => setGroupFilter(e.target.value)}\n                >\n                  <option value=\"all\">All Groups</option>\n                  {availableGroups.map(group => (\n                    <option key={group} value={group}>{group}</option>\n                  ))}\n                </select>\n              )}\n\n              {/* View Toggle */}\n              <div className=\"cor-view-toggle\">\n                <button\n                  className={`cor-toggle-btn ${viewMode === 'recent' ? 'active' : ''}`}\n                  onClick={() => { setViewMode('recent'); setDateFilter({ start: '', end: '' }); }}\n                >\n                  Recent\n                </button>\n                <button\n                  className={`cor-toggle-btn ${viewMode === 'all' ? 'active' : ''}`}\n                  onClick={() => setViewMode('all')}\n                >\n                  All\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* Search Input */}\n          {!previewMode && (\n            <div className=\"cor-search\">\n              <Search size={14} className=\"cor-search-icon\" />\n              <input\n                type=\"text\"\n                className=\"cor-search-input\"\n                placeholder=\"Search CORs by title, number, scope, or status...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n              />\n              {searchTerm && (\n                <button className=\"cor-search-clear\" onClick={() => setSearchTerm('')}>\n                  <X size={14} />\n                </button>\n              )}\n            </div>\n          )}\n\n          {/* Date Filter - Only in All mode and not preview mode */}\n          {viewMode === 'all' && !previewMode && (\n            <div className=\"cor-date-filter\">\n              <Calendar size={14} />\n              <input\n                type=\"date\"\n                value={dateFilter.start}\n                onChange={(e) => setDateFilter(prev => ({ ...prev, start: e.target.value }))}\n              />\n              <span className=\"cor-date-sep\">to</span>\n              <input\n                type=\"date\"\n                value={dateFilter.end}\n                onChange={(e) => setDateFilter(prev => ({ ...prev, end: e.target.value }))}\n              />\n              {(dateFilter.start || dateFilter.end) && (\n                <button className=\"cor-clear-btn\" onClick={() => setDateFilter({ start: '', end: '' })}>\n                  Clear\n                </button>\n              )}\n            </div>\n          )}\n\n          {/* COR List */}\n          {displayCORs.length === 0 ? (\n            <div className=\"cor-empty\">\n              <FileText size={24} className=\"cor-empty-icon\" />\n              <p>No change orders {filter !== 'all' ? `(${filter.replace('_', ' ')})` : ''}</p>\n              <button className=\"btn btn-primary btn-small\" onClick={onCreateCOR}>\n                <Plus size={14} /> Create COR\n              </button>\n            </div>\n          ) : (\n            <div className=\"cor-cards stagger-children\">\n              {viewMode === 'all' && corsByMonth ? (\n                corsByMonth.map(([monthKey, monthData]) => (\n                  <div key={monthKey} className=\"cor-month-group animate-fade-in\">\n                    <button\n                      className=\"cor-month-header\"\n                      onClick={() => toggleMonthExpand(monthKey)}\n                    >\n                      <div className=\"cor-month-left\">\n                        {expandedMonths.has(monthKey) ? <ChevronDown size={16} /> : <ChevronRight size={16} />}\n                        <span>{monthData.label}</span>\n                        <CountBadge count={monthData.cors.length} size=\"small\" />\n                      </div>\n                      <span className=\"cor-month-total\">{formatCurrency(monthData.totalAmount)}</span>\n                    </button>\n                    {expandedMonths.has(monthKey) && (\n                      <div className=\"cor-month-items stagger-children\">\n                        {monthData.cors.map(cor => renderCORCard(cor))}\n                      </div>\n                    )}\n                  </div>\n                ))\n              ) : (\n                displayCORs.map(cor => renderCORCard(cor))\n              )}\n            </div>\n          )}\n\n          {/* Pagination - only in full mode */}\n          {!previewMode && totalPages > 1 && (\n            <Pagination\n              currentPage={currentPage}\n              totalPages={totalPages}\n              onPageChange={goToPage}\n              pageSize={pageSize}\n              onPageSizeChange={setPageSize}\n              totalItems={paginatedTotalItems}\n            />\n          )}\n\n          {/* See All Footer - only in preview mode when there are more items */}\n          {previewMode && cors.length > previewLimit && (\n            <button className=\"cor-see-all-btn\" onClick={onViewAll}>\n              See all {cors.length} change orders\n              <ChevronRight size={16} />\n            </button>\n          )}\n        </>\n      )}\n\n      {/* Group Modal */}\n      {showGroupModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowGroupModal(false)}>\n          <div className=\"modal-content cor-group-modal\" onClick={e => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>Group {selectedCORs.size} CORs</h3>\n              <button className=\"close-btn\" onClick={() => setShowGroupModal(false)}>\n                <X size={20} />\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"form-group\">\n                <label>Group Name</label>\n                <input\n                  type=\"text\"\n                  value={newGroupName}\n                  onChange={(e) => setNewGroupName(e.target.value)}\n                  placeholder=\"e.g., Phase 1, Building A, Week 1\"\n                  autoFocus\n                  onKeyDown={(e) => {\n                    if (e.key === 'Enter') handleGroupSelected()\n                    if (e.key === 'Escape') setShowGroupModal(false)\n                  }}\n                />\n              </div>\n              {availableGroups.length > 0 && (\n                <div className=\"existing-groups\">\n                  <label>Or select existing group:</label>\n                  <div className=\"group-chips\">\n                    {availableGroups.map(group => (\n                      <button\n                        key={group}\n                        className=\"group-chip\"\n                        onClick={() => setNewGroupName(group)}\n                      >\n                        {group}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n            <div className=\"modal-footer\">\n              <button className=\"btn btn-secondary\" onClick={() => setShowGroupModal(false)}>\n                Cancel\n              </button>\n              <button className=\"btn btn-primary\" onClick={handleGroupSelected}>\n                Group CORs\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"file":"CORList-BO48SRNR.js"}