const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SignatureLinkGenerator-CV3mNLIS.js","assets/icons-BDU0tZd_.js","assets/react-DXGY7bZi.js","assets/pdf-D2LJUoLv.js","assets/supabase-VuevzHjS.js","assets/TMClientSignature-BKO_it4d.js","assets/Dashboard-BLe6lJW5.js","assets/corCalculations-vdJc_BOT.js","assets/Setup-g80gIPji.js","assets/BrandingSettings-CJQHKq2q.js","assets/PricingManager-CHWphCL4.js","assets/PublicView-U2RB5m3h.js","assets/SignaturePage-C_7j9z70.js","assets/SignatureCanvas-Dhu0f15a.js","assets/MembershipManager-Dmpqz_Lj.js","assets/LandingPage-DGNyAUwm.js"])))=>i.map(i=>d[i]);
import{r as y,H as Po,B as WR,A as cr,C as bc,U as YA,a as XR,b as Ki,E as ZR,c as QR,S as GA,M as VA,T as dm,D as WA,X as Ic,d as XA,L as $s,F as Fo,e as Mo,f as kb,g as JR,h as eq,i as ff,j as vy,k as tq,l as Jn,R as mf,P as _c,m as rq,W as nq,Z as aq,G as iq,n as oq,I as sq,o as lq,p as hf,q as SS,s as Qd,t as cq,u as ZA,v as pf,w as QA,x as uq,y as dq,z as fq,J as mq,K as pc,N as hq,O as pq,Q as gq,V as vq,Y as JA,_ as eN,$ as yq,a0 as bq,a1 as _q,a2 as xq,a3 as wq,a4 as tN,a5 as jq,a6 as Sq,a7 as Eq,a8 as Oq,a9 as Cq,aa as Aq,ab as Nq,ac as kq,ad as Dq,ae as Tq}from"./icons-BDU0tZd_.js";import{r as fm,b as rN,a as ri}from"./react-DXGY7bZi.js";import{_ as _a}from"./pdf-D2LJUoLv.js";import{c as nN}from"./supabase-VuevzHjS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var yg={exports:{}},tc={};var ES;function Pq(){if(ES)return tc;ES=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,s){var c=null;if(s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:n,key:c,ref:i!==void 0?i:null,props:s}}return tc.Fragment=t,tc.jsx=r,tc.jsxs=r,tc}var OS;function Mq(){return OS||(OS=1,yg.exports=Pq()),yg.exports}var d=Mq(),bg={exports:{}},rc={},_g={exports:{}},xg={};var CS;function Rq(){return CS||(CS=1,(function(e){function t(R,U){var te=R.length;R.push(U);e:for(;0<te;){var ne=te-1>>>1,we=R[ne];if(0<i(we,U))R[ne]=U,R[te]=we,te=ne;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var U=R[0],te=R.pop();if(te!==U){R[0]=te;e:for(var ne=0,we=R.length,Pe=we>>>1;ne<Pe;){var F=2*(ne+1)-1,$=R[F],Se=F+1,De=R[Se];if(0>i($,te))Se<we&&0>i(De,$)?(R[ne]=De,R[Se]=te,ne=Se):(R[ne]=$,R[F]=te,ne=F);else if(Se<we&&0>i(De,te))R[ne]=De,R[Se]=te,ne=Se;else break e}}return U}function i(R,U){var te=R.sortIndex-U.sortIndex;return te!==0?te:R.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var m=[],h=[],p=1,g=null,_=3,x=!1,w=!1,j=!1,S=!1,O=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(R){for(var U=r(h);U!==null;){if(U.callback===null)n(h);else if(U.startTime<=R)n(h),U.sortIndex=U.expirationTime,t(m,U);else break;U=r(h)}}function D(R){if(j=!1,k(R),!w)if(r(m)!==null)w=!0,M||(M=!0,I());else{var U=r(h);U!==null&&q(D,U.startTime-R)}}var M=!1,z=-1,W=5,Y=-1;function re(){return S?!0:!(e.unstable_now()-Y<W)}function X(){if(S=!1,M){var R=e.unstable_now();Y=R;var U=!0;try{e:{w=!1,j&&(j=!1,C(z),z=-1),x=!0;var te=_;try{t:{for(k(R),g=r(m);g!==null&&!(g.expirationTime>R&&re());){var ne=g.callback;if(typeof ne=="function"){g.callback=null,_=g.priorityLevel;var we=ne(g.expirationTime<=R);if(R=e.unstable_now(),typeof we=="function"){g.callback=we,k(R),U=!0;break t}g===r(m)&&n(m),k(R)}else n(m);g=r(m)}if(g!==null)U=!0;else{var Pe=r(h);Pe!==null&&q(D,Pe.startTime-R),U=!1}}break e}finally{g=null,_=te,x=!1}U=void 0}}finally{U?I():M=!1}}}var I;if(typeof A=="function")I=function(){A(X)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,pe=se.port2;se.port1.onmessage=X,I=function(){pe.postMessage(null)}}else I=function(){O(X,0)};function q(R,U){z=O(function(){R(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(R){switch(_){case 1:case 2:case 3:var U=3;break;default:U=_}var te=_;_=U;try{return R()}finally{_=te}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var te=_;_=R;try{return U()}finally{_=te}},e.unstable_scheduleCallback=function(R,U,te){var ne=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ne+te:ne):te=ne,R){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=te+we,R={id:p++,callback:U,priorityLevel:R,startTime:te,expirationTime:we,sortIndex:-1},te>ne?(R.sortIndex=te,t(h,R),r(m)===null&&R===r(h)&&(j?(C(z),z=-1):j=!0,q(D,te-ne))):(R.sortIndex=we,t(m,R),w||x||(w=!0,M||(M=!0,I()))),R},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(R){var U=_;return function(){var te=_;_=U;try{return R.apply(this,arguments)}finally{_=te}}}})(xg)),xg}var AS;function qq(){return AS||(AS=1,_g.exports=Rq()),_g.exports}var NS;function zq(){if(NS)return rc;NS=1;var e=qq(),t=fm(),r=rN();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,l=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(l=o.return),a=o.return;while(a)}return o.tag===3?l:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function m(a){if(s(a)!==a)throw Error(n(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(n(188));return o!==a?null:a}for(var l=a,f=o;;){var v=l.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===l)return m(v),a;if(b===f)return m(v),o;b=b.sibling}throw Error(n(188))}if(l.return!==f.return)l=v,f=b;else{for(var E=!1,N=v.child;N;){if(N===l){E=!0,l=v,f=b;break}if(N===f){E=!0,f=v,l=b;break}N=N.sibling}if(!E){for(N=b.child;N;){if(N===l){E=!0,l=b,f=v;break}if(N===f){E=!0,f=b,l=v;break}N=N.sibling}if(!E)throw Error(n(189))}}if(l.alternate!==f)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Y=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function I(a){return a===null||typeof a!="object"?null:(a=X&&a[X]||a["@@iterator"],typeof a=="function"?a:null)}var se=Symbol.for("react.client.reference");function pe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===se?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case j:return"Fragment";case O:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case Y:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case A:return a.displayName||"Context";case C:return(a._context.displayName||"Context")+".Consumer";case k:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return o=a.displayName||null,o!==null?o:pe(a.type)||"Memo";case W:o=a._payload,a=a._init;try{return pe(a(o))}catch{}}return null}var q=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ne=[],we=-1;function Pe(a){return{current:a}}function F(a){0>we||(a.current=ne[we],ne[we]=null,we--)}function $(a,o){we++,ne[we]=a.current,a.current=o}var Se=Pe(null),De=Pe(null),Ie=Pe(null),G=Pe(null);function _e(a,o){switch($(Ie,o),$(De,a),$(Se,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Gj(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Gj(o),a=Vj(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}F(Se),$(Se,a)}function V(){F(Se),F(De),F(Ie)}function xe(a){a.memoizedState!==null&&$(G,a);var o=Se.current,l=Vj(o,a.type);o!==l&&($(De,a),$(Se,l))}function je(a){De.current===a&&(F(Se),F(De)),G.current===a&&(F(G),Zl._currentValue=te)}var oe,He;function ge(a){if(oe===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);oe=o&&o[1]||"",He=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+a+He}var Ne=!1;function Re(a,o){if(!a||Ne)return"";Ne=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(ae){var ee=ae}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(ae){ee=ae}a.call(fe.prototype)}}else{try{throw Error()}catch(ae){ee=ae}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(ae){if(ae&&ee&&typeof ae.stack=="string")return[ae.stack,ee.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),E=b[0],N=b[1];if(E&&N){var L=E.split(`
`),Q=N.split(`
`);for(v=f=0;f<L.length&&!L[f].includes("DetermineComponentFrameRoot");)f++;for(;v<Q.length&&!Q[v].includes("DetermineComponentFrameRoot");)v++;if(f===L.length||v===Q.length)for(f=L.length-1,v=Q.length-1;1<=f&&0<=v&&L[f]!==Q[v];)v--;for(;1<=f&&0<=v;f--,v--)if(L[f]!==Q[v]){if(f!==1||v!==1)do if(f--,v--,0>v||L[f]!==Q[v]){var le=`
`+L[f].replace(" at new "," at ");return a.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",a.displayName)),le}while(1<=f&&0<=v);break}}}finally{Ne=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?ge(l):""}function jt(a,o){switch(a.tag){case 26:case 27:case 5:return ge(a.type);case 16:return ge("Lazy");case 13:return a.child!==o&&o!==null?ge("Suspense Fallback"):ge("Suspense");case 19:return ge("SuspenseList");case 0:case 15:return Re(a.type,!1);case 11:return Re(a.type.render,!1);case 1:return Re(a.type,!0);case 31:return ge("Activity");default:return""}}function qe(a){try{var o="",l=null;do o+=jt(a,l),l=a,a=a.return;while(a);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var It=Object.prototype.hasOwnProperty,yt=e.unstable_scheduleCallback,Ct=e.unstable_cancelCallback,Br=e.unstable_shouldYield,xt=e.unstable_requestPaint,Ye=e.unstable_now,$r=e.unstable_getCurrentPriorityLevel,_n=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,jr=e.unstable_NormalPriority,Yt=e.unstable_LowPriority,he=e.unstable_IdlePriority,it=e.log,xn=e.unstable_setDisableYieldValue,Qt=null,Ut=null;function qt(a){if(typeof it=="function"&&xn(a),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Qt,a)}catch{}}var ft=Math.clz32?Math.clz32:oa,en=Math.log,$n=Math.LN2;function oa(a){return a>>>=0,a===0?32:31-(en(a)/$n|0)|0}var di=256,fi=262144,xa=4194304;function wn(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function mi(a,o,l){var f=a.pendingLanes;if(f===0)return 0;var v=0,b=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var N=f&134217727;return N!==0?(f=N&~b,f!==0?v=wn(f):(E&=N,E!==0?v=wn(E):l||(l=N&~a,l!==0&&(v=wn(l))))):(N=f&~b,N!==0?v=wn(N):E!==0?v=wn(E):l||(l=f&~a,l!==0&&(v=wn(l)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,l=o&-o,b>=l||b===32&&(l&4194048)!==0)?o:v}function wa(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function ll(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ve(){var a=xa;return xa<<=1,(xa&62914560)===0&&(xa=4194304),a}function Hn(a){for(var o=[],l=0;31>l;l++)o.push(a);return o}function ja(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function cl(a,o,l,f,v,b){var E=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var N=a.entanglements,L=a.expirationTimes,Q=a.hiddenUpdates;for(l=E&~l;0<l;){var le=31-ft(l),fe=1<<le;N[le]=0,L[le]=-1;var ee=Q[le];if(ee!==null)for(Q[le]=null,le=0;le<ee.length;le++){var ae=ee[le];ae!==null&&(ae.lane&=-536870913)}l&=~fe}f!==0&&mu(a,f,0),b!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=b&~(E&~o))}function mu(a,o,l){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-ft(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|l&261930}function hu(a,o){var l=a.entangledLanes|=o;for(a=a.entanglements;l;){var f=31-ft(l),v=1<<f;v&o|a[f]&o&&(a[f]|=o),l&=~v}}function Fn(a,o){var l=o&-o;return l=(l&42)!==0?1:ul(l),(l&(a.suspendedLanes|o))!==0?0:l}function ul(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function dl(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function eo(){var a=U.p;return a!==0?a:(a=window.event,a===void 0?32:vS(a.type))}function to(a,o){var l=U.p;try{return U.p=a,o()}finally{U.p=l}}var tn=Math.random().toString(36).slice(2),Bt="__reactFiber$"+tn,sr="__reactProps$"+tn,sa="__reactContainer$"+tn,ro="__reactEvents$"+tn,pu="__reactListeners$"+tn,fl="__reactHandles$"+tn,ml="__reactResources$"+tn,Zo="__reactMarker$"+tn;function Qo(a){delete a[Bt],delete a[sr],delete a[ro],delete a[pu],delete a[fl]}function Kn(a){var o=a[Bt];if(o)return o;for(var l=a.parentNode;l;){if(o=l[sa]||l[Bt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(a=tS(a);a!==null;){if(l=a[Bt])return l;a=tS(a)}return o}a=l,l=a.parentNode}return null}function hi(a){if(a=a[Bt]||a[sa]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function no(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function K(a){var o=a[ml];return o||(o=a[ml]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ue(a){a[Zo]=!0}var me=new Set,ce={};function ie(a,o){Ee(a,o),Ee(a+"Capture",o)}function Ee(a,o){for(ce[a]=o,a=0;a<o.length;a++)me.add(o[a])}var Ue=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fe={},lt={};function Mr(a){return It.call(lt,a)?!0:It.call(Fe,a)?!1:Ue.test(a)?lt[a]=!0:(Fe[a]=!0,!1)}function Je(a,o,l){if(Mr(o))if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+l)}}function Gt(a,o,l){if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+l)}}function Yn(a,o,l,f){if(f===null)a.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(o,l,""+f)}}function jn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function I_(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function $2(a,o,l){var f=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,b=f.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function(E){l=""+E,b.call(this,E)}}),Object.defineProperty(a,o,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function dh(a){if(!a._valueTracker){var o=I_(a)?"checked":"value";a._valueTracker=$2(a,o,""+a[o])}}function U_(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return a&&(f=I_(a)?a.checked?"true":"false":a.value),a=f,a!==l?(o.setValue(a),!0):!1}function gu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var H2=/[\n"\\]/g;function Sn(a){return a.replace(H2,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function fh(a,o,l,f,v,b,E,N){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),o!=null?E==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+jn(o)):a.value!==""+jn(o)&&(a.value=""+jn(o)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),o!=null?mh(a,E,jn(o)):l!=null?mh(a,E,jn(l)):f!=null&&a.removeAttribute("value"),v==null&&b!=null&&(a.defaultChecked=!!b),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+jn(N):a.removeAttribute("name")}function B_(a,o,l,f,v,b,E,N){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){dh(a);return}l=l!=null?""+jn(l):"",o=o!=null?""+jn(o):l,N||o===a.value||(a.value=o),a.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=N?a.checked:!!f,a.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E),dh(a)}function mh(a,o,l){o==="number"&&gu(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function Jo(a,o,l,f){if(a=a.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<a.length;l++)v=o.hasOwnProperty("$"+a[l].value),a[l].selected!==v&&(a[l].selected=v),v&&f&&(a[l].defaultSelected=!0)}else{for(l=""+jn(l),o=null,v=0;v<a.length;v++){if(a[v].value===l){a[v].selected=!0,f&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function $_(a,o,l){if(o!=null&&(o=""+jn(o),o!==a.value&&(a.value=o),l==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=l!=null?""+jn(l):""}function H_(a,o,l,f){if(o==null){if(f!=null){if(l!=null)throw Error(n(92));if(q(f)){if(1<f.length)throw Error(n(93));f=f[0]}l=f}l==null&&(l=""),o=l}l=jn(o),a.defaultValue=l,f=a.textContent,f===l&&f!==""&&f!==null&&(a.value=f),dh(a)}function es(a,o){if(o){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=o;return}}a.textContent=o}var F2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function F_(a,o,l){var f=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,l):typeof l!="number"||l===0||F2.has(o)?o==="float"?a.cssFloat=l:a[o]=(""+l).trim():a[o]=l+"px"}function K_(a,o,l){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&l[v]!==f&&F_(a,v,f)}else for(var b in o)o.hasOwnProperty(b)&&F_(a,b,o[b])}function hh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var K2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Y2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vu(a){return Y2.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Sa(){}var ph=null;function gh(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ts=null,rs=null;function Y_(a){var o=hi(a);if(o&&(a=o.stateNode)){var l=a[sr]||null;e:switch(a=o.stateNode,o.type){case"input":if(fh(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Sn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==a&&f.form===a.form){var v=f[sr]||null;if(!v)throw Error(n(90));fh(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<l.length;o++)f=l[o],f.form===a.form&&U_(f)}break e;case"textarea":$_(a,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Jo(a,!!l.multiple,o,!1)}}}var vh=!1;function G_(a,o,l){if(vh)return a(o,l);vh=!0;try{var f=a(o);return f}finally{if(vh=!1,(ts!==null||rs!==null)&&(ad(),ts&&(o=ts,a=rs,rs=ts=null,Y_(o),a)))for(o=0;o<a.length;o++)Y_(a[o])}}function hl(a,o){var l=a.stateNode;if(l===null)return null;var f=l[sr]||null;if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yh=!1;if(Ea)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){yh=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{yh=!1}var pi=null,bh=null,yu=null;function V_(){if(yu)return yu;var a,o=bh,l=o.length,f,v="value"in pi?pi.value:pi.textContent,b=v.length;for(a=0;a<l&&o[a]===v[a];a++);var E=l-a;for(f=1;f<=E&&o[l-f]===v[b-f];f++);return yu=v.slice(a,1<f?1-f:void 0)}function bu(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function _u(){return!0}function W_(){return!1}function Fr(a){function o(l,f,v,b,E){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(l=a[N],this[N]=l?l(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?_u:W_,this.isPropagationStopped=W_,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=_u)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=_u)},persist:function(){},isPersistent:_u}),o}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xu=Fr(ao),gl=g({},ao,{view:0,detail:0}),G2=Fr(gl),_h,xh,vl,wu=g({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==vl&&(vl&&a.type==="mousemove"?(_h=a.screenX-vl.screenX,xh=a.screenY-vl.screenY):xh=_h=0,vl=a),_h)},movementY:function(a){return"movementY"in a?a.movementY:xh}}),X_=Fr(wu),V2=g({},wu,{dataTransfer:0}),W2=Fr(V2),X2=g({},gl,{relatedTarget:0}),wh=Fr(X2),Z2=g({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),Q2=Fr(Z2),J2=g({},ao,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),eM=Fr(J2),tM=g({},ao,{data:0}),Z_=Fr(tM),rM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iM(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=aM[a])?!!o[a]:!1}function jh(){return iM}var oM=g({},gl,{key:function(a){if(a.key){var o=rM[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=bu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?nM[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jh,charCode:function(a){return a.type==="keypress"?bu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?bu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),sM=Fr(oM),lM=g({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Q_=Fr(lM),cM=g({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jh}),uM=Fr(cM),dM=g({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),fM=Fr(dM),mM=g({},wu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),hM=Fr(mM),pM=g({},ao,{newState:0,oldState:0}),gM=Fr(pM),vM=[9,13,27,32],Sh=Ea&&"CompositionEvent"in window,yl=null;Ea&&"documentMode"in document&&(yl=document.documentMode);var yM=Ea&&"TextEvent"in window&&!yl,J_=Ea&&(!Sh||yl&&8<yl&&11>=yl),ex=" ",tx=!1;function rx(a,o){switch(a){case"keyup":return vM.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nx(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ns=!1;function bM(a,o){switch(a){case"compositionend":return nx(o);case"keypress":return o.which!==32?null:(tx=!0,ex);case"textInput":return a=o.data,a===ex&&tx?null:a;default:return null}}function _M(a,o){if(ns)return a==="compositionend"||!Sh&&rx(a,o)?(a=V_(),yu=bh=pi=null,ns=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return J_&&o.locale!=="ko"?null:o.data;default:return null}}var xM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!xM[a.type]:o==="textarea"}function ix(a,o,l,f){ts?rs?rs.push(f):rs=[f]:ts=f,o=dd(o,"onChange"),0<o.length&&(l=new xu("onChange","change",null,l,f),a.push({event:l,listeners:o}))}var bl=null,_l=null;function wM(a){Bj(a,0)}function ju(a){var o=no(a);if(U_(o))return a}function ox(a,o){if(a==="change")return o}var sx=!1;if(Ea){var Eh;if(Ea){var Oh="oninput"in document;if(!Oh){var lx=document.createElement("div");lx.setAttribute("oninput","return;"),Oh=typeof lx.oninput=="function"}Eh=Oh}else Eh=!1;sx=Eh&&(!document.documentMode||9<document.documentMode)}function cx(){bl&&(bl.detachEvent("onpropertychange",ux),_l=bl=null)}function ux(a){if(a.propertyName==="value"&&ju(_l)){var o=[];ix(o,_l,a,gh(a)),G_(wM,o)}}function jM(a,o,l){a==="focusin"?(cx(),bl=o,_l=l,bl.attachEvent("onpropertychange",ux)):a==="focusout"&&cx()}function SM(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return ju(_l)}function EM(a,o){if(a==="click")return ju(o)}function OM(a,o){if(a==="input"||a==="change")return ju(o)}function CM(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var rn=typeof Object.is=="function"?Object.is:CM;function xl(a,o){if(rn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var l=Object.keys(a),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!It.call(o,v)||!rn(a[v],o[v]))return!1}return!0}function dx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function fx(a,o){var l=dx(a);a=0;for(var f;l;){if(l.nodeType===3){if(f=a+l.textContent.length,a<=o&&f>=o)return{node:l,offset:o-a};a=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=dx(l)}}function mx(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?mx(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function hx(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=gu(a.document);o instanceof a.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)a=o.contentWindow;else break;o=gu(a.document)}return o}function Ch(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var AM=Ea&&"documentMode"in document&&11>=document.documentMode,as=null,Ah=null,wl=null,Nh=!1;function px(a,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Nh||as==null||as!==gu(f)||(f=as,"selectionStart"in f&&Ch(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),wl&&xl(wl,f)||(wl=f,f=dd(Ah,"onSelect"),0<f.length&&(o=new xu("onSelect","select",null,o,l),a.push({event:o,listeners:f}),o.target=as)))}function io(a,o){var l={};return l[a.toLowerCase()]=o.toLowerCase(),l["Webkit"+a]="webkit"+o,l["Moz"+a]="moz"+o,l}var is={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionrun:io("Transition","TransitionRun"),transitionstart:io("Transition","TransitionStart"),transitioncancel:io("Transition","TransitionCancel"),transitionend:io("Transition","TransitionEnd")},kh={},gx={};Ea&&(gx=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function oo(a){if(kh[a])return kh[a];if(!is[a])return a;var o=is[a],l;for(l in o)if(o.hasOwnProperty(l)&&l in gx)return kh[a]=o[l];return a}var vx=oo("animationend"),yx=oo("animationiteration"),bx=oo("animationstart"),NM=oo("transitionrun"),kM=oo("transitionstart"),DM=oo("transitioncancel"),_x=oo("transitionend"),xx=new Map,Dh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dh.push("scrollEnd");function Gn(a,o){xx.set(a,o),ie(o,[a])}var Su=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},En=[],os=0,Th=0;function Eu(){for(var a=os,o=Th=os=0;o<a;){var l=En[o];En[o++]=null;var f=En[o];En[o++]=null;var v=En[o];En[o++]=null;var b=En[o];if(En[o++]=null,f!==null&&v!==null){var E=f.pending;E===null?v.next=v:(v.next=E.next,E.next=v),f.pending=v}b!==0&&wx(l,v,b)}}function Ou(a,o,l,f){En[os++]=a,En[os++]=o,En[os++]=l,En[os++]=f,Th|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function Ph(a,o,l,f){return Ou(a,o,l,f),Cu(a)}function so(a,o){return Ou(a,null,null,o),Cu(a)}function wx(a,o,l){a.lanes|=l;var f=a.alternate;f!==null&&(f.lanes|=l);for(var v=!1,b=a.return;b!==null;)b.childLanes|=l,f=b.alternate,f!==null&&(f.childLanes|=l),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(v=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,v&&o!==null&&(v=31-ft(l),a=b.hiddenUpdates,f=a[v],f===null?a[v]=[o]:f.push(o),o.lane=l|536870912),b):null}function Cu(a){if(50<Fl)throw Fl=0,$p=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ss={};function TM(a,o,l,f){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(a,o,l,f){return new TM(a,o,l,f)}function Mh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Oa(a,o){var l=a.alternate;return l===null?(l=nn(a.tag,o,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=o,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,o=a.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function jx(a,o){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,o=l.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Au(a,o,l,f,v,b){var E=0;if(f=a,typeof a=="function")Mh(a)&&(E=1);else if(typeof a=="string")E=zR(a,l,Se.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Y:return a=nn(31,l,o,v),a.elementType=Y,a.lanes=b,a;case j:return lo(l.children,v,b,o);case S:E=8,v|=24;break;case O:return a=nn(12,l,o,v|2),a.elementType=O,a.lanes=b,a;case D:return a=nn(13,l,o,v),a.elementType=D,a.lanes=b,a;case M:return a=nn(19,l,o,v),a.elementType=M,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:E=10;break e;case C:E=9;break e;case k:E=11;break e;case z:E=14;break e;case W:E=16,f=null;break e}E=29,l=Error(n(130,a===null?"null":typeof a,"")),f=null}return o=nn(E,l,o,v),o.elementType=a,o.type=f,o.lanes=b,o}function lo(a,o,l,f){return a=nn(7,a,f,o),a.lanes=l,a}function Rh(a,o,l){return a=nn(6,a,null,o),a.lanes=l,a}function Sx(a){var o=nn(18,null,null,0);return o.stateNode=a,o}function qh(a,o,l){return o=nn(4,a.children!==null?a.children:[],a.key,o),o.lanes=l,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Ex=new WeakMap;function On(a,o){if(typeof a=="object"&&a!==null){var l=Ex.get(a);return l!==void 0?l:(o={value:a,source:o,stack:qe(o)},Ex.set(a,o),o)}return{value:a,source:o,stack:qe(o)}}var ls=[],cs=0,Nu=null,jl=0,Cn=[],An=0,gi=null,la=1,ca="";function Ca(a,o){ls[cs++]=jl,ls[cs++]=Nu,Nu=a,jl=o}function Ox(a,o,l){Cn[An++]=la,Cn[An++]=ca,Cn[An++]=gi,gi=a;var f=la;a=ca;var v=32-ft(f)-1;f&=~(1<<v),l+=1;var b=32-ft(o)+v;if(30<b){var E=v-v%5;b=(f&(1<<E)-1).toString(32),f>>=E,v-=E,la=1<<32-ft(o)+v|l<<v|f,ca=b+a}else la=1<<b|l<<v|f,ca=a}function zh(a){a.return!==null&&(Ca(a,1),Ox(a,1,0))}function Lh(a){for(;a===Nu;)Nu=ls[--cs],ls[cs]=null,jl=ls[--cs],ls[cs]=null;for(;a===gi;)gi=Cn[--An],Cn[An]=null,ca=Cn[--An],Cn[An]=null,la=Cn[--An],Cn[An]=null}function Cx(a,o){Cn[An++]=la,Cn[An++]=ca,Cn[An++]=gi,la=o.id,ca=o.overflow,gi=a}var Sr=null,St=null,Qe=!1,vi=null,Nn=!1,Ih=Error(n(519));function yi(a){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(On(o,a)),Ih}function Ax(a){var o=a.stateNode,l=a.type,f=a.memoizedProps;switch(o[Bt]=a,o[sr]=f,l){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(l=0;l<Yl.length;l++)We(Yl[l],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),B_(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),H_(o,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||f.suppressHydrationWarning===!0||Kj(o.textContent,l)?(f.popover!=null&&(We("beforetoggle",o),We("toggle",o)),f.onScroll!=null&&We("scroll",o),f.onScrollEnd!=null&&We("scrollend",o),f.onClick!=null&&(o.onclick=Sa),o=!0):o=!1,o||yi(a,!0)}function Nx(a){for(Sr=a.return;Sr;)switch(Sr.tag){case 5:case 31:case 13:Nn=!1;return;case 27:case 3:Nn=!0;return;default:Sr=Sr.return}}function us(a){if(a!==Sr)return!1;if(!Qe)return Nx(a),Qe=!0,!1;var o=a.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||ng(a.type,a.memoizedProps)),l=!l),l&&St&&yi(a),Nx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=eS(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=eS(a)}else o===27?(o=St,Ti(a.type)?(a=lg,lg=null,St=a):St=o):St=Sr?Dn(a.stateNode.nextSibling):null;return!0}function co(){St=Sr=null,Qe=!1}function Uh(){var a=vi;return a!==null&&(Vr===null?Vr=a:Vr.push.apply(Vr,a),vi=null),a}function Sl(a){vi===null?vi=[a]:vi.push(a)}var Bh=Pe(null),uo=null,Aa=null;function bi(a,o,l){$(Bh,o._currentValue),o._currentValue=l}function Na(a){a._currentValue=Bh.current,F(Bh)}function $h(a,o,l){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===l)break;a=a.return}}function Hh(a,o,l,f){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var b=v.dependencies;if(b!==null){var E=v.child;b=b.firstContext;e:for(;b!==null;){var N=b;b=v;for(var L=0;L<o.length;L++)if(N.context===o[L]){b.lanes|=l,N=b.alternate,N!==null&&(N.lanes|=l),$h(b.return,l,a),f||(E=null);break e}b=N.next}}else if(v.tag===18){if(E=v.return,E===null)throw Error(n(341));E.lanes|=l,b=E.alternate,b!==null&&(b.lanes|=l),$h(E,l,a),E=null}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===a){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}}function ds(a,o,l,f){a=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var E=v.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var N=v.type;rn(v.pendingProps.value,E.value)||(a!==null?a.push(N):a=[N])}}else if(v===G.current){if(E=v.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Zl):a=[Zl])}v=v.return}a!==null&&Hh(o,a,l,f),o.flags|=262144}function ku(a){for(a=a.firstContext;a!==null;){if(!rn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function fo(a){uo=a,Aa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Er(a){return kx(uo,a)}function Du(a,o){return uo===null&&fo(a),kx(a,o)}function kx(a,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Aa===null){if(a===null)throw Error(n(308));Aa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Aa=Aa.next=o;return l}var PM=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(l,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(l){return l()})}},MM=e.unstable_scheduleCallback,RM=e.unstable_NormalPriority,Jt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fh(){return{controller:new PM,data:new Map,refCount:0}}function El(a){a.refCount--,a.refCount===0&&MM(RM,function(){a.controller.abort()})}var Ol=null,Kh=0,fs=0,ms=null;function qM(a,o){if(Ol===null){var l=Ol=[];Kh=0,fs=Vp(),ms={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Kh++,o.then(Dx,Dx),o}function Dx(){if(--Kh===0&&Ol!==null){ms!==null&&(ms.status="fulfilled");var a=Ol;Ol=null,fs=0,ms=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function zM(a,o){var l=[],f={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<l.length;v++)(0,l[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),f}var Tx=R.S;R.S=function(a,o){pj=Ye(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&qM(a,o),Tx!==null&&Tx(a,o)};var mo=Pe(null);function Yh(){var a=mo.current;return a!==null?a:bt.pooledCache}function Tu(a,o){o===null?$(mo,mo.current):$(mo,o.pool)}function Px(){var a=Yh();return a===null?null:{parent:Jt._currentValue,pool:a}}var hs=Error(n(460)),Gh=Error(n(474)),Pu=Error(n(542)),Mu={then:function(){}};function Mx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Rx(a,o,l){switch(l=a[l],l===void 0?a.push(o):l!==o&&(o.then(Sa,Sa),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,zx(a),a;default:if(typeof o.status=="string")o.then(Sa,Sa);else{if(a=bt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,zx(a),a}throw po=o,hs}}function ho(a){try{var o=a._init;return o(a._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(po=l,hs):l}}var po=null;function qx(){if(po===null)throw Error(n(459));var a=po;return po=null,a}function zx(a){if(a===hs||a===Pu)throw Error(n(483))}var ps=null,Cl=0;function Ru(a){var o=Cl;return Cl+=1,ps===null&&(ps=[]),Rx(ps,a,o)}function Al(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function qu(a,o){throw o.$$typeof===_?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Lx(a){function o(H,B){if(a){var Z=H.deletions;Z===null?(H.deletions=[B],H.flags|=16):Z.push(B)}}function l(H,B){if(!a)return null;for(;B!==null;)o(H,B),B=B.sibling;return null}function f(H){for(var B=new Map;H!==null;)H.key!==null?B.set(H.key,H):B.set(H.index,H),H=H.sibling;return B}function v(H,B){return H=Oa(H,B),H.index=0,H.sibling=null,H}function b(H,B,Z){return H.index=Z,a?(Z=H.alternate,Z!==null?(Z=Z.index,Z<B?(H.flags|=67108866,B):Z):(H.flags|=67108866,B)):(H.flags|=1048576,B)}function E(H){return a&&H.alternate===null&&(H.flags|=67108866),H}function N(H,B,Z,de){return B===null||B.tag!==6?(B=Rh(Z,H.mode,de),B.return=H,B):(B=v(B,Z),B.return=H,B)}function L(H,B,Z,de){var ze=Z.type;return ze===j?le(H,B,Z.props.children,de,Z.key):B!==null&&(B.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===W&&ho(ze)===B.type)?(B=v(B,Z.props),Al(B,Z),B.return=H,B):(B=Au(Z.type,Z.key,Z.props,null,H.mode,de),Al(B,Z),B.return=H,B)}function Q(H,B,Z,de){return B===null||B.tag!==4||B.stateNode.containerInfo!==Z.containerInfo||B.stateNode.implementation!==Z.implementation?(B=qh(Z,H.mode,de),B.return=H,B):(B=v(B,Z.children||[]),B.return=H,B)}function le(H,B,Z,de,ze){return B===null||B.tag!==7?(B=lo(Z,H.mode,de,ze),B.return=H,B):(B=v(B,Z),B.return=H,B)}function fe(H,B,Z){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Rh(""+B,H.mode,Z),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case x:return Z=Au(B.type,B.key,B.props,null,H.mode,Z),Al(Z,B),Z.return=H,Z;case w:return B=qh(B,H.mode,Z),B.return=H,B;case W:return B=ho(B),fe(H,B,Z)}if(q(B)||I(B))return B=lo(B,H.mode,Z,null),B.return=H,B;if(typeof B.then=="function")return fe(H,Ru(B),Z);if(B.$$typeof===A)return fe(H,Du(H,B),Z);qu(H,B)}return null}function ee(H,B,Z,de){var ze=B!==null?B.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return ze!==null?null:N(H,B,""+Z,de);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:return Z.key===ze?L(H,B,Z,de):null;case w:return Z.key===ze?Q(H,B,Z,de):null;case W:return Z=ho(Z),ee(H,B,Z,de)}if(q(Z)||I(Z))return ze!==null?null:le(H,B,Z,de,null);if(typeof Z.then=="function")return ee(H,B,Ru(Z),de);if(Z.$$typeof===A)return ee(H,B,Du(H,Z),de);qu(H,Z)}return null}function ae(H,B,Z,de,ze){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return H=H.get(Z)||null,N(B,H,""+de,ze);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case x:return H=H.get(de.key===null?Z:de.key)||null,L(B,H,de,ze);case w:return H=H.get(de.key===null?Z:de.key)||null,Q(B,H,de,ze);case W:return de=ho(de),ae(H,B,Z,de,ze)}if(q(de)||I(de))return H=H.get(Z)||null,le(B,H,de,ze,null);if(typeof de.then=="function")return ae(H,B,Z,Ru(de),ze);if(de.$$typeof===A)return ae(H,B,Z,Du(B,de),ze);qu(B,de)}return null}function Ae(H,B,Z,de){for(var ze=null,rt=null,Me=B,$e=B=0,Ze=null;Me!==null&&$e<Z.length;$e++){Me.index>$e?(Ze=Me,Me=null):Ze=Me.sibling;var nt=ee(H,Me,Z[$e],de);if(nt===null){Me===null&&(Me=Ze);break}a&&Me&&nt.alternate===null&&o(H,Me),B=b(nt,B,$e),rt===null?ze=nt:rt.sibling=nt,rt=nt,Me=Ze}if($e===Z.length)return l(H,Me),Qe&&Ca(H,$e),ze;if(Me===null){for(;$e<Z.length;$e++)Me=fe(H,Z[$e],de),Me!==null&&(B=b(Me,B,$e),rt===null?ze=Me:rt.sibling=Me,rt=Me);return Qe&&Ca(H,$e),ze}for(Me=f(Me);$e<Z.length;$e++)Ze=ae(Me,H,$e,Z[$e],de),Ze!==null&&(a&&Ze.alternate!==null&&Me.delete(Ze.key===null?$e:Ze.key),B=b(Ze,B,$e),rt===null?ze=Ze:rt.sibling=Ze,rt=Ze);return a&&Me.forEach(function(zi){return o(H,zi)}),Qe&&Ca(H,$e),ze}function Le(H,B,Z,de){if(Z==null)throw Error(n(151));for(var ze=null,rt=null,Me=B,$e=B=0,Ze=null,nt=Z.next();Me!==null&&!nt.done;$e++,nt=Z.next()){Me.index>$e?(Ze=Me,Me=null):Ze=Me.sibling;var zi=ee(H,Me,nt.value,de);if(zi===null){Me===null&&(Me=Ze);break}a&&Me&&zi.alternate===null&&o(H,Me),B=b(zi,B,$e),rt===null?ze=zi:rt.sibling=zi,rt=zi,Me=Ze}if(nt.done)return l(H,Me),Qe&&Ca(H,$e),ze;if(Me===null){for(;!nt.done;$e++,nt=Z.next())nt=fe(H,nt.value,de),nt!==null&&(B=b(nt,B,$e),rt===null?ze=nt:rt.sibling=nt,rt=nt);return Qe&&Ca(H,$e),ze}for(Me=f(Me);!nt.done;$e++,nt=Z.next())nt=ae(Me,H,$e,nt.value,de),nt!==null&&(a&&nt.alternate!==null&&Me.delete(nt.key===null?$e:nt.key),B=b(nt,B,$e),rt===null?ze=nt:rt.sibling=nt,rt=nt);return a&&Me.forEach(function(VR){return o(H,VR)}),Qe&&Ca(H,$e),ze}function pt(H,B,Z,de){if(typeof Z=="object"&&Z!==null&&Z.type===j&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case x:e:{for(var ze=Z.key;B!==null;){if(B.key===ze){if(ze=Z.type,ze===j){if(B.tag===7){l(H,B.sibling),de=v(B,Z.props.children),de.return=H,H=de;break e}}else if(B.elementType===ze||typeof ze=="object"&&ze!==null&&ze.$$typeof===W&&ho(ze)===B.type){l(H,B.sibling),de=v(B,Z.props),Al(de,Z),de.return=H,H=de;break e}l(H,B);break}else o(H,B);B=B.sibling}Z.type===j?(de=lo(Z.props.children,H.mode,de,Z.key),de.return=H,H=de):(de=Au(Z.type,Z.key,Z.props,null,H.mode,de),Al(de,Z),de.return=H,H=de)}return E(H);case w:e:{for(ze=Z.key;B!==null;){if(B.key===ze)if(B.tag===4&&B.stateNode.containerInfo===Z.containerInfo&&B.stateNode.implementation===Z.implementation){l(H,B.sibling),de=v(B,Z.children||[]),de.return=H,H=de;break e}else{l(H,B);break}else o(H,B);B=B.sibling}de=qh(Z,H.mode,de),de.return=H,H=de}return E(H);case W:return Z=ho(Z),pt(H,B,Z,de)}if(q(Z))return Ae(H,B,Z,de);if(I(Z)){if(ze=I(Z),typeof ze!="function")throw Error(n(150));return Z=ze.call(Z),Le(H,B,Z,de)}if(typeof Z.then=="function")return pt(H,B,Ru(Z),de);if(Z.$$typeof===A)return pt(H,B,Du(H,Z),de);qu(H,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,B!==null&&B.tag===6?(l(H,B.sibling),de=v(B,Z),de.return=H,H=de):(l(H,B),de=Rh(Z,H.mode,de),de.return=H,H=de),E(H)):l(H,B)}return function(H,B,Z,de){try{Cl=0;var ze=pt(H,B,Z,de);return ps=null,ze}catch(Me){if(Me===hs||Me===Pu)throw Me;var rt=nn(29,Me,null,H.mode);return rt.lanes=de,rt.return=H,rt}finally{}}}var go=Lx(!0),Ix=Lx(!1),_i=!1;function Vh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function xi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function wi(a,o,l){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(ot&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=Cu(a),wx(a,null,l),o}return Ou(a,f,o,l),Cu(a)}function Nl(a,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,l|=f,o.lanes=l,hu(a,l)}}function Xh(a,o){var l=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?v=b=E:b=b.next=E,l=l.next}while(l!==null);b===null?v=b=o:b=b.next=o}else v=b=o;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=o:a.next=o,l.lastBaseUpdate=o}var Zh=!1;function kl(){if(Zh){var a=ms;if(a!==null)throw a}}function Dl(a,o,l,f){Zh=!1;var v=a.updateQueue;_i=!1;var b=v.firstBaseUpdate,E=v.lastBaseUpdate,N=v.shared.pending;if(N!==null){v.shared.pending=null;var L=N,Q=L.next;L.next=null,E===null?b=Q:E.next=Q,E=L;var le=a.alternate;le!==null&&(le=le.updateQueue,N=le.lastBaseUpdate,N!==E&&(N===null?le.firstBaseUpdate=Q:N.next=Q,le.lastBaseUpdate=L))}if(b!==null){var fe=v.baseState;E=0,le=Q=L=null,N=b;do{var ee=N.lane&-536870913,ae=ee!==N.lane;if(ae?(Xe&ee)===ee:(f&ee)===ee){ee!==0&&ee===fs&&(Zh=!0),le!==null&&(le=le.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ae=a,Le=N;ee=o;var pt=l;switch(Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){fe=Ae.call(pt,fe,ee);break e}fe=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,ee=typeof Ae=="function"?Ae.call(pt,fe,ee):Ae,ee==null)break e;fe=g({},fe,ee);break e;case 2:_i=!0}}ee=N.callback,ee!==null&&(a.flags|=64,ae&&(a.flags|=8192),ae=v.callbacks,ae===null?v.callbacks=[ee]:ae.push(ee))}else ae={lane:ee,tag:N.tag,payload:N.payload,callback:N.callback,next:null},le===null?(Q=le=ae,L=fe):le=le.next=ae,E|=ee;if(N=N.next,N===null){if(N=v.shared.pending,N===null)break;ae=N,N=ae.next,ae.next=null,v.lastBaseUpdate=ae,v.shared.pending=null}}while(!0);le===null&&(L=fe),v.baseState=L,v.firstBaseUpdate=Q,v.lastBaseUpdate=le,b===null&&(v.shared.lanes=0),Ci|=E,a.lanes=E,a.memoizedState=fe}}function Ux(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function Bx(a,o){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)Ux(l[a],o)}var gs=Pe(null),zu=Pe(0);function $x(a,o){a=La,$(zu,a),$(gs,o),La=a|o.baseLanes}function Qh(){$(zu,La),$(gs,gs.current)}function Jh(){La=zu.current,F(gs),F(zu)}var an=Pe(null),kn=null;function ji(a){var o=a.alternate;$(Vt,Vt.current&1),$(an,a),kn===null&&(o===null||gs.current!==null||o.memoizedState!==null)&&(kn=a)}function ep(a){$(Vt,Vt.current),$(an,a),kn===null&&(kn=a)}function Hx(a){a.tag===22?($(Vt,Vt.current),$(an,a),kn===null&&(kn=a)):Si()}function Si(){$(Vt,Vt.current),$(an,an.current)}function on(a){F(an),kn===a&&(kn=null),F(Vt)}var Vt=Pe(0);function Lu(a){for(var o=a;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||og(l)||sg(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ka=0,Be=null,mt=null,er=null,Iu=!1,vs=!1,vo=!1,Uu=0,Tl=0,ys=null,LM=0;function $t(){throw Error(n(321))}function tp(a,o){if(o===null)return!1;for(var l=0;l<o.length&&l<a.length;l++)if(!rn(a[l],o[l]))return!1;return!0}function rp(a,o,l,f,v,b){return ka=b,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=a===null||a.memoizedState===null?Ow:vp,vo=!1,b=l(f,v),vo=!1,vs&&(b=Kx(o,l,f,v)),Fx(a),b}function Fx(a){R.H=Rl;var o=mt!==null&&mt.next!==null;if(ka=0,er=mt=Be=null,Iu=!1,Tl=0,ys=null,o)throw Error(n(300));a===null||tr||(a=a.dependencies,a!==null&&ku(a)&&(tr=!0))}function Kx(a,o,l,f){Be=a;var v=0;do{if(vs&&(ys=null),Tl=0,vs=!1,25<=v)throw Error(n(301));if(v+=1,er=mt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}R.H=Cw,b=o(l,f)}while(vs);return b}function IM(){var a=R.H,o=a.useState()[0];return o=typeof o.then=="function"?Pl(o):o,a=a.useState()[0],(mt!==null?mt.memoizedState:null)!==a&&(Be.flags|=1024),o}function np(){var a=Uu!==0;return Uu=0,a}function ap(a,o,l){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~l}function ip(a){if(Iu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Iu=!1}ka=0,er=mt=Be=null,vs=!1,Tl=Uu=0,ys=null}function Rr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?Be.memoizedState=er=a:er=er.next=a,er}function Wt(){if(mt===null){var a=Be.alternate;a=a!==null?a.memoizedState:null}else a=mt.next;var o=er===null?Be.memoizedState:er.next;if(o!==null)er=o,mt=a;else{if(a===null)throw Be.alternate===null?Error(n(467)):Error(n(310));mt=a,a={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},er===null?Be.memoizedState=er=a:er=er.next=a}return er}function Bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pl(a){var o=Tl;return Tl+=1,ys===null&&(ys=[]),a=Rx(ys,a,o),o=Be,(er===null?o.memoizedState:er.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?Ow:vp),a}function $u(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Pl(a);if(a.$$typeof===A)return Er(a)}throw Error(n(438,String(a)))}function op(a){var o=null,l=Be.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var f=Be.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Bu(),Be.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(a),f=0;f<a;f++)l[f]=re;return o.index++,l}function Da(a,o){return typeof o=="function"?o(a):o}function Hu(a){var o=Wt();return sp(o,mt,a)}function sp(a,o,l){var f=a.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var v=a.baseQueue,b=f.pending;if(b!==null){if(v!==null){var E=v.next;v.next=b.next,b.next=E}o.baseQueue=v=b,f.pending=null}if(b=a.baseState,v===null)a.memoizedState=b;else{o=v.next;var N=E=null,L=null,Q=o,le=!1;do{var fe=Q.lane&-536870913;if(fe!==Q.lane?(Xe&fe)===fe:(ka&fe)===fe){var ee=Q.revertLane;if(ee===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),fe===fs&&(le=!0);else if((ka&ee)===ee){Q=Q.next,ee===fs&&(le=!0);continue}else fe={lane:0,revertLane:Q.revertLane,gesture:null,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(N=L=fe,E=b):L=L.next=fe,Be.lanes|=ee,Ci|=ee;fe=Q.action,vo&&l(b,fe),b=Q.hasEagerState?Q.eagerState:l(b,fe)}else ee={lane:fe,revertLane:Q.revertLane,gesture:Q.gesture,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null},L===null?(N=L=ee,E=b):L=L.next=ee,Be.lanes|=fe,Ci|=fe;Q=Q.next}while(Q!==null&&Q!==o);if(L===null?E=b:L.next=N,!rn(b,a.memoizedState)&&(tr=!0,le&&(l=ms,l!==null)))throw l;a.memoizedState=b,a.baseState=E,a.baseQueue=L,f.lastRenderedState=b}return v===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function lp(a){var o=Wt(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var f=l.dispatch,v=l.pending,b=o.memoizedState;if(v!==null){l.pending=null;var E=v=v.next;do b=a(b,E.action),E=E.next;while(E!==v);rn(b,o.memoizedState)||(tr=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),l.lastRenderedState=b}return[b,f]}function Yx(a,o,l){var f=Be,v=Wt(),b=Qe;if(b){if(l===void 0)throw Error(n(407));l=l()}else l=o();var E=!rn((mt||v).memoizedState,l);if(E&&(v.memoizedState=l,tr=!0),v=v.queue,dp(Wx.bind(null,f,v,a),[a]),v.getSnapshot!==o||E||er!==null&&er.memoizedState.tag&1){if(f.flags|=2048,bs(9,{destroy:void 0},Vx.bind(null,f,v,l,o),null),bt===null)throw Error(n(349));b||(ka&127)!==0||Gx(f,o,l)}return l}function Gx(a,o,l){a.flags|=16384,a={getSnapshot:o,value:l},o=Be.updateQueue,o===null?(o=Bu(),Be.updateQueue=o,o.stores=[a]):(l=o.stores,l===null?o.stores=[a]:l.push(a))}function Vx(a,o,l,f){o.value=l,o.getSnapshot=f,Xx(o)&&Zx(a)}function Wx(a,o,l){return l(function(){Xx(o)&&Zx(a)})}function Xx(a){var o=a.getSnapshot;a=a.value;try{var l=o();return!rn(a,l)}catch{return!0}}function Zx(a){var o=so(a,2);o!==null&&Wr(o,a,2)}function cp(a){var o=Rr();if(typeof a=="function"){var l=a;if(a=l(),vo){qt(!0);try{l()}finally{qt(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:a},o}function Qx(a,o,l,f){return a.baseState=l,sp(a,mt,typeof f=="function"?f:Da)}function UM(a,o,l,f,v){if(Yu(a))throw Error(n(485));if(a=o.action,a!==null){var b={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};R.T!==null?l(!0):b.isTransition=!1,f(b),l=o.pending,l===null?(b.next=o.pending=b,Jx(o,b)):(b.next=l.next,o.pending=l.next=b)}}function Jx(a,o){var l=o.action,f=o.payload,v=a.state;if(o.isTransition){var b=R.T,E={};R.T=E;try{var N=l(v,f),L=R.S;L!==null&&L(E,N),ew(a,o,N)}catch(Q){up(a,o,Q)}finally{b!==null&&E.types!==null&&(b.types=E.types),R.T=b}}else try{b=l(v,f),ew(a,o,b)}catch(Q){up(a,o,Q)}}function ew(a,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){tw(a,o,f)},function(f){return up(a,o,f)}):tw(a,o,l)}function tw(a,o,l){o.status="fulfilled",o.value=l,rw(o),a.state=l,o=a.pending,o!==null&&(l=o.next,l===o?a.pending=null:(l=l.next,o.next=l,Jx(a,l)))}function up(a,o,l){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=l,rw(o),o=o.next;while(o!==f)}a.action=null}function rw(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function nw(a,o){return o}function aw(a,o){if(Qe){var l=bt.formState;if(l!==null){e:{var f=Be;if(Qe){if(St){t:{for(var v=St,b=Nn;v.nodeType!==8;){if(!b){v=null;break t}if(v=Dn(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){St=Dn(v.nextSibling),f=v.data==="F!";break e}}yi(f)}f=!1}f&&(o=l[0])}}return l=Rr(),l.memoizedState=l.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nw,lastRenderedState:o},l.queue=f,l=jw.bind(null,Be,f),f.dispatch=l,f=cp(!1),b=gp.bind(null,Be,!1,f.queue),f=Rr(),v={state:o,dispatch:null,action:a,pending:null},f.queue=v,l=UM.bind(null,Be,v,b,l),v.dispatch=l,f.memoizedState=a,[o,l,!1]}function iw(a){var o=Wt();return ow(o,mt,a)}function ow(a,o,l){if(o=sp(a,o,nw)[0],a=Hu(Da)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Pl(o)}catch(E){throw E===hs?Pu:E}else f=o;o=Wt();var v=o.queue,b=v.dispatch;return l!==o.memoizedState&&(Be.flags|=2048,bs(9,{destroy:void 0},BM.bind(null,v,l),null)),[f,b,a]}function BM(a,o){a.action=o}function sw(a){var o=Wt(),l=mt;if(l!==null)return ow(o,l,a);Wt(),o=o.memoizedState,l=Wt();var f=l.queue.dispatch;return l.memoizedState=a,[o,f,!1]}function bs(a,o,l,f){return a={tag:a,create:l,deps:f,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Bu(),Be.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=a.next=a:(f=l.next,l.next=a,a.next=f,o.lastEffect=a),a}function lw(){return Wt().memoizedState}function Fu(a,o,l,f){var v=Rr();Be.flags|=a,v.memoizedState=bs(1|o,{destroy:void 0},l,f===void 0?null:f)}function Ku(a,o,l,f){var v=Wt();f=f===void 0?null:f;var b=v.memoizedState.inst;mt!==null&&f!==null&&tp(f,mt.memoizedState.deps)?v.memoizedState=bs(o,b,l,f):(Be.flags|=a,v.memoizedState=bs(1|o,b,l,f))}function cw(a,o){Fu(8390656,8,a,o)}function dp(a,o){Ku(2048,8,a,o)}function $M(a){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=Bu(),Be.updateQueue=o,o.events=[a];else{var l=o.events;l===null?o.events=[a]:l.push(a)}}function uw(a){var o=Wt().memoizedState;return $M({ref:o,nextImpl:a}),function(){if((ot&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function dw(a,o){return Ku(4,2,a,o)}function fw(a,o){return Ku(4,4,a,o)}function mw(a,o){if(typeof o=="function"){a=a();var l=o(a);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function hw(a,o,l){l=l!=null?l.concat([a]):null,Ku(4,4,mw.bind(null,o,a),l)}function fp(){}function pw(a,o){var l=Wt();o=o===void 0?null:o;var f=l.memoizedState;return o!==null&&tp(o,f[1])?f[0]:(l.memoizedState=[a,o],a)}function gw(a,o){var l=Wt();o=o===void 0?null:o;var f=l.memoizedState;if(o!==null&&tp(o,f[1]))return f[0];if(f=a(),vo){qt(!0);try{a()}finally{qt(!1)}}return l.memoizedState=[f,o],f}function mp(a,o,l){return l===void 0||(ka&1073741824)!==0&&(Xe&261930)===0?a.memoizedState=o:(a.memoizedState=l,a=vj(),Be.lanes|=a,Ci|=a,l)}function vw(a,o,l,f){return rn(l,o)?l:gs.current!==null?(a=mp(a,l,f),rn(a,o)||(tr=!0),a):(ka&42)===0||(ka&1073741824)!==0&&(Xe&261930)===0?(tr=!0,a.memoizedState=l):(a=vj(),Be.lanes|=a,Ci|=a,o)}function yw(a,o,l,f,v){var b=U.p;U.p=b!==0&&8>b?b:8;var E=R.T,N={};R.T=N,gp(a,!1,o,l);try{var L=v(),Q=R.S;if(Q!==null&&Q(N,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var le=zM(L,f);Ml(a,o,le,cn(a))}else Ml(a,o,f,cn(a))}catch(fe){Ml(a,o,{then:function(){},status:"rejected",reason:fe},cn())}finally{U.p=b,E!==null&&N.types!==null&&(E.types=N.types),R.T=E}}function HM(){}function hp(a,o,l,f){if(a.tag!==5)throw Error(n(476));var v=bw(a).queue;yw(a,v,o,te,l===null?HM:function(){return _w(a),l(f)})}function bw(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:te},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:l},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function _w(a){var o=bw(a);o.next===null&&(o=a.alternate.memoizedState),Ml(a,o.next.queue,{},cn())}function pp(){return Er(Zl)}function xw(){return Wt().memoizedState}function ww(){return Wt().memoizedState}function FM(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var l=cn();a=xi(l);var f=wi(o,a,l);f!==null&&(Wr(f,o,l),Nl(f,o,l)),o={cache:Fh()},a.payload=o;return}o=o.return}}function KM(a,o,l){var f=cn();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Yu(a)?Sw(o,l):(l=Ph(a,o,l,f),l!==null&&(Wr(l,a,f),Ew(l,o,f)))}function jw(a,o,l){var f=cn();Ml(a,o,l,f)}function Ml(a,o,l,f){var v={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Yu(a))Sw(o,v);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var E=o.lastRenderedState,N=b(E,l);if(v.hasEagerState=!0,v.eagerState=N,rn(N,E))return Ou(a,o,v,0),bt===null&&Eu(),!1}catch{}finally{}if(l=Ph(a,o,v,f),l!==null)return Wr(l,a,f),Ew(l,o,f),!0}return!1}function gp(a,o,l,f){if(f={lane:2,revertLane:Vp(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Yu(a)){if(o)throw Error(n(479))}else o=Ph(a,l,f,2),o!==null&&Wr(o,a,2)}function Yu(a){var o=a.alternate;return a===Be||o!==null&&o===Be}function Sw(a,o){vs=Iu=!0;var l=a.pending;l===null?o.next=o:(o.next=l.next,l.next=o),a.pending=o}function Ew(a,o,l){if((l&4194048)!==0){var f=o.lanes;f&=a.pendingLanes,l|=f,o.lanes=l,hu(a,l)}}var Rl={readContext:Er,use:$u,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};Rl.useEffectEvent=$t;var Ow={readContext:Er,use:$u,useCallback:function(a,o){return Rr().memoizedState=[a,o===void 0?null:o],a},useContext:Er,useEffect:cw,useImperativeHandle:function(a,o,l){l=l!=null?l.concat([a]):null,Fu(4194308,4,mw.bind(null,o,a),l)},useLayoutEffect:function(a,o){return Fu(4194308,4,a,o)},useInsertionEffect:function(a,o){Fu(4,2,a,o)},useMemo:function(a,o){var l=Rr();o=o===void 0?null:o;var f=a();if(vo){qt(!0);try{a()}finally{qt(!1)}}return l.memoizedState=[f,o],f},useReducer:function(a,o,l){var f=Rr();if(l!==void 0){var v=l(o);if(vo){qt(!0);try{l(o)}finally{qt(!1)}}}else v=o;return f.memoizedState=f.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},f.queue=a,a=a.dispatch=KM.bind(null,Be,a),[f.memoizedState,a]},useRef:function(a){var o=Rr();return a={current:a},o.memoizedState=a},useState:function(a){a=cp(a);var o=a.queue,l=jw.bind(null,Be,o);return o.dispatch=l,[a.memoizedState,l]},useDebugValue:fp,useDeferredValue:function(a,o){var l=Rr();return mp(l,a,o)},useTransition:function(){var a=cp(!1);return a=yw.bind(null,Be,a.queue,!0,!1),Rr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,l){var f=Be,v=Rr();if(Qe){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),bt===null)throw Error(n(349));(Xe&127)!==0||Gx(f,o,l)}v.memoizedState=l;var b={value:l,getSnapshot:o};return v.queue=b,cw(Wx.bind(null,f,b,a),[a]),f.flags|=2048,bs(9,{destroy:void 0},Vx.bind(null,f,b,l,o),null),l},useId:function(){var a=Rr(),o=bt.identifierPrefix;if(Qe){var l=ca,f=la;l=(f&~(1<<32-ft(f)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Uu++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=LM++,o="_"+o+"r_"+l.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:pp,useFormState:aw,useActionState:aw,useOptimistic:function(a){var o=Rr();o.memoizedState=o.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=gp.bind(null,Be,!0,l),l.dispatch=o,[a,o]},useMemoCache:op,useCacheRefresh:function(){return Rr().memoizedState=FM.bind(null,Be)},useEffectEvent:function(a){var o=Rr(),l={impl:a};return o.memoizedState=l,function(){if((ot&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},vp={readContext:Er,use:$u,useCallback:pw,useContext:Er,useEffect:dp,useImperativeHandle:hw,useInsertionEffect:dw,useLayoutEffect:fw,useMemo:gw,useReducer:Hu,useRef:lw,useState:function(){return Hu(Da)},useDebugValue:fp,useDeferredValue:function(a,o){var l=Wt();return vw(l,mt.memoizedState,a,o)},useTransition:function(){var a=Hu(Da)[0],o=Wt().memoizedState;return[typeof a=="boolean"?a:Pl(a),o]},useSyncExternalStore:Yx,useId:xw,useHostTransitionStatus:pp,useFormState:iw,useActionState:iw,useOptimistic:function(a,o){var l=Wt();return Qx(l,mt,a,o)},useMemoCache:op,useCacheRefresh:ww};vp.useEffectEvent=uw;var Cw={readContext:Er,use:$u,useCallback:pw,useContext:Er,useEffect:dp,useImperativeHandle:hw,useInsertionEffect:dw,useLayoutEffect:fw,useMemo:gw,useReducer:lp,useRef:lw,useState:function(){return lp(Da)},useDebugValue:fp,useDeferredValue:function(a,o){var l=Wt();return mt===null?mp(l,a,o):vw(l,mt.memoizedState,a,o)},useTransition:function(){var a=lp(Da)[0],o=Wt().memoizedState;return[typeof a=="boolean"?a:Pl(a),o]},useSyncExternalStore:Yx,useId:xw,useHostTransitionStatus:pp,useFormState:sw,useActionState:sw,useOptimistic:function(a,o){var l=Wt();return mt!==null?Qx(l,mt,a,o):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:op,useCacheRefresh:ww};Cw.useEffectEvent=uw;function yp(a,o,l,f){o=a.memoizedState,l=l(f,o),l=l==null?o:g({},o,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var bp={enqueueSetState:function(a,o,l){a=a._reactInternals;var f=cn(),v=xi(f);v.payload=o,l!=null&&(v.callback=l),o=wi(a,v,f),o!==null&&(Wr(o,a,f),Nl(o,a,f))},enqueueReplaceState:function(a,o,l){a=a._reactInternals;var f=cn(),v=xi(f);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=wi(a,v,f),o!==null&&(Wr(o,a,f),Nl(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var l=cn(),f=xi(l);f.tag=2,o!=null&&(f.callback=o),o=wi(a,f,l),o!==null&&(Wr(o,a,l),Nl(o,a,l))}};function Aw(a,o,l,f,v,b,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,b,E):o.prototype&&o.prototype.isPureReactComponent?!xl(l,f)||!xl(v,b):!0}function Nw(a,o,l,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==a&&bp.enqueueReplaceState(o,o.state,null)}function yo(a,o){var l=o;if("ref"in o){l={};for(var f in o)f!=="ref"&&(l[f]=o[f])}if(a=a.defaultProps){l===o&&(l=g({},l));for(var v in a)l[v]===void 0&&(l[v]=a[v])}return l}function kw(a){Su(a)}function Dw(a){console.error(a)}function Tw(a){Su(a)}function Gu(a,o){try{var l=a.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function Pw(a,o,l){try{var f=a.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function _p(a,o,l){return l=xi(l),l.tag=3,l.payload={element:null},l.callback=function(){Gu(a,o)},l}function Mw(a){return a=xi(a),a.tag=3,a}function Rw(a,o,l,f){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var b=f.value;a.payload=function(){return v(b)},a.callback=function(){Pw(o,l,f)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){Pw(o,l,f),typeof v!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var N=f.stack;this.componentDidCatch(f.value,{componentStack:N!==null?N:""})})}function YM(a,o,l,f,v){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=l.alternate,o!==null&&ds(o,l,v,!0),l=an.current,l!==null){switch(l.tag){case 31:case 13:return kn===null?id():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=v,f===Mu?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([f]):o.add(f),Kp(a,f,v)),!1;case 22:return l.flags|=65536,f===Mu?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([f]):l.add(f)),Kp(a,f,v)),!1}throw Error(n(435,l.tag))}return Kp(a,f,v),id(),!1}if(Qe)return o=an.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==Ih&&(a=Error(n(422),{cause:f}),Sl(On(a,l)))):(f!==Ih&&(o=Error(n(423),{cause:f}),Sl(On(o,l))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,f=On(f,l),v=_p(a.stateNode,f,v),Xh(a,v),Ht!==4&&(Ht=2)),!1;var b=Error(n(520),{cause:f});if(b=On(b,l),Hl===null?Hl=[b]:Hl.push(b),Ht!==4&&(Ht=2),o===null)return!0;f=On(f,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,a=v&-v,l.lanes|=a,a=_p(l.stateNode,f,a),Xh(l,a),!1;case 1:if(o=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ai===null||!Ai.has(b))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Mw(v),Rw(v,a,l,f),Xh(l,v),!1}l=l.return}while(l!==null);return!1}var xp=Error(n(461)),tr=!1;function Or(a,o,l,f){o.child=a===null?Ix(o,null,l,f):go(o,a.child,l,f)}function qw(a,o,l,f,v){l=l.render;var b=o.ref;if("ref"in f){var E={};for(var N in f)N!=="ref"&&(E[N]=f[N])}else E=f;return fo(o),f=rp(a,o,l,E,b,v),N=np(),a!==null&&!tr?(ap(a,o,v),Ta(a,o,v)):(Qe&&N&&zh(o),o.flags|=1,Or(a,o,f,v),o.child)}function zw(a,o,l,f,v){if(a===null){var b=l.type;return typeof b=="function"&&!Mh(b)&&b.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=b,Lw(a,o,b,f,v)):(a=Au(l.type,null,f,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!Np(a,v)){var E=b.memoizedProps;if(l=l.compare,l=l!==null?l:xl,l(E,f)&&a.ref===o.ref)return Ta(a,o,v)}return o.flags|=1,a=Oa(b,f),a.ref=o.ref,a.return=o,o.child=a}function Lw(a,o,l,f,v){if(a!==null){var b=a.memoizedProps;if(xl(b,f)&&a.ref===o.ref)if(tr=!1,o.pendingProps=f=b,Np(a,v))(a.flags&131072)!==0&&(tr=!0);else return o.lanes=a.lanes,Ta(a,o,v)}return wp(a,o,l,f,v)}function Iw(a,o,l,f){var v=f.children,b=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,a!==null){for(f=o.child=a.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~b}else f=0,o.child=null;return Uw(a,o,b,l,f)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Tu(o,b!==null?b.cachePool:null),b!==null?$x(o,b):Qh(),Hx(o);else return f=o.lanes=536870912,Uw(a,o,b!==null?b.baseLanes|l:l,l,f)}else b!==null?(Tu(o,b.cachePool),$x(o,b),Si(),o.memoizedState=null):(a!==null&&Tu(o,null),Qh(),Si());return Or(a,o,v,l),o.child}function ql(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Uw(a,o,l,f,v){var b=Yh();return b=b===null?null:{parent:Jt._currentValue,pool:b},o.memoizedState={baseLanes:l,cachePool:b},a!==null&&Tu(o,null),Qh(),Hx(o),a!==null&&ds(a,o,f,!0),o.childLanes=v,null}function Vu(a,o){return o=Xu({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function Bw(a,o,l){return go(o,a.child,null,l),a=Vu(o,o.pendingProps),a.flags|=2,on(o),o.memoizedState=null,a}function GM(a,o,l){var f=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Qe){if(f.mode==="hidden")return a=Vu(o,f),o.lanes=536870912,ql(null,a);if(ep(o),(a=St)?(a=Jj(a,Nn),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:gi!==null?{id:la,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},l=Sx(a),l.return=o,o.child=l,Sr=o,St=null)):a=null,a===null)throw yi(o);return o.lanes=536870912,null}return Vu(o,f)}var b=a.memoizedState;if(b!==null){var E=b.dehydrated;if(ep(o),v)if(o.flags&256)o.flags&=-257,o=Bw(a,o,l);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(n(558));else if(tr||ds(a,o,l,!1),v=(l&a.childLanes)!==0,tr||v){if(f=bt,f!==null&&(E=Fn(f,l),E!==0&&E!==b.retryLane))throw b.retryLane=E,so(a,E),Wr(f,a,E),xp;id(),o=Bw(a,o,l)}else a=b.treeContext,St=Dn(E.nextSibling),Sr=o,Qe=!0,vi=null,Nn=!1,a!==null&&Cx(o,a),o=Vu(o,f),o.flags|=4096;return o}return a=Oa(a.child,{mode:f.mode,children:f.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Wu(a,o){var l=o.ref;if(l===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(a===null||a.ref!==l)&&(o.flags|=4194816)}}function wp(a,o,l,f,v){return fo(o),l=rp(a,o,l,f,void 0,v),f=np(),a!==null&&!tr?(ap(a,o,v),Ta(a,o,v)):(Qe&&f&&zh(o),o.flags|=1,Or(a,o,l,v),o.child)}function $w(a,o,l,f,v,b){return fo(o),o.updateQueue=null,l=Kx(o,f,l,v),Fx(a),f=np(),a!==null&&!tr?(ap(a,o,b),Ta(a,o,b)):(Qe&&f&&zh(o),o.flags|=1,Or(a,o,l,b),o.child)}function Hw(a,o,l,f,v){if(fo(o),o.stateNode===null){var b=ss,E=l.contextType;typeof E=="object"&&E!==null&&(b=Er(E)),b=new l(f,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=bp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=f,b.state=o.memoizedState,b.refs={},Vh(o),E=l.contextType,b.context=typeof E=="object"&&E!==null?Er(E):ss,b.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(yp(o,l,E,f),b.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&bp.enqueueReplaceState(b,b.state,null),Dl(o,f,b,v),kl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){b=o.stateNode;var N=o.memoizedProps,L=yo(l,N);b.props=L;var Q=b.context,le=l.contextType;E=ss,typeof le=="object"&&le!==null&&(E=Er(le));var fe=l.getDerivedStateFromProps;le=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N||Q!==E)&&Nw(o,b,f,E),_i=!1;var ee=o.memoizedState;b.state=ee,Dl(o,f,b,v),kl(),Q=o.memoizedState,N||ee!==Q||_i?(typeof fe=="function"&&(yp(o,l,fe,f),Q=o.memoizedState),(L=_i||Aw(o,l,L,f,ee,Q,E))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=Q),b.props=f,b.state=Q,b.context=E,f=L):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,Wh(a,o),E=o.memoizedProps,le=yo(l,E),b.props=le,fe=o.pendingProps,ee=b.context,Q=l.contextType,L=ss,typeof Q=="object"&&Q!==null&&(L=Er(Q)),N=l.getDerivedStateFromProps,(Q=typeof N=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==fe||ee!==L)&&Nw(o,b,f,L),_i=!1,ee=o.memoizedState,b.state=ee,Dl(o,f,b,v),kl();var ae=o.memoizedState;E!==fe||ee!==ae||_i||a!==null&&a.dependencies!==null&&ku(a.dependencies)?(typeof N=="function"&&(yp(o,l,N,f),ae=o.memoizedState),(le=_i||Aw(o,l,le,f,ee,ae,L)||a!==null&&a.dependencies!==null&&ku(a.dependencies))?(Q||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,ae,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,ae,L)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&ee===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&ee===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ae),b.props=f,b.state=ae,b.context=L,f=le):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&ee===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&ee===a.memoizedState||(o.flags|=1024),f=!1)}return b=f,Wu(a,o),f=(o.flags&128)!==0,b||f?(b=o.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&f?(o.child=go(o,a.child,null,v),o.child=go(o,null,l,v)):Or(a,o,l,v),o.memoizedState=b.state,a=o.child):a=Ta(a,o,v),a}function Fw(a,o,l,f){return co(),o.flags|=256,Or(a,o,l,f),o.child}var jp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sp(a){return{baseLanes:a,cachePool:Px()}}function Ep(a,o,l){return a=a!==null?a.childLanes&~l:0,o&&(a|=ln),a}function Kw(a,o,l){var f=o.pendingProps,v=!1,b=(o.flags&128)!==0,E;if((E=b)||(E=a!==null&&a.memoizedState===null?!1:(Vt.current&2)!==0),E&&(v=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,a===null){if(Qe){if(v?ji(o):Si(),(a=St)?(a=Jj(a,Nn),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:gi!==null?{id:la,overflow:ca}:null,retryLane:536870912,hydrationErrors:null},l=Sx(a),l.return=o,o.child=l,Sr=o,St=null)):a=null,a===null)throw yi(o);return sg(a)?o.lanes=32:o.lanes=536870912,null}var N=f.children;return f=f.fallback,v?(Si(),v=o.mode,N=Xu({mode:"hidden",children:N},v),f=lo(f,v,l,null),N.return=o,f.return=o,N.sibling=f,o.child=N,f=o.child,f.memoizedState=Sp(l),f.childLanes=Ep(a,E,l),o.memoizedState=jp,ql(null,f)):(ji(o),Op(o,N))}var L=a.memoizedState;if(L!==null&&(N=L.dehydrated,N!==null)){if(b)o.flags&256?(ji(o),o.flags&=-257,o=Cp(a,o,l)):o.memoizedState!==null?(Si(),o.child=a.child,o.flags|=128,o=null):(Si(),N=f.fallback,v=o.mode,f=Xu({mode:"visible",children:f.children},v),N=lo(N,v,l,null),N.flags|=2,f.return=o,N.return=o,f.sibling=N,o.child=f,go(o,a.child,null,l),f=o.child,f.memoizedState=Sp(l),f.childLanes=Ep(a,E,l),o.memoizedState=jp,o=ql(null,f));else if(ji(o),sg(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var Q=E.dgst;E=Q,f=Error(n(419)),f.stack="",f.digest=E,Sl({value:f,source:null,stack:null}),o=Cp(a,o,l)}else if(tr||ds(a,o,l,!1),E=(l&a.childLanes)!==0,tr||E){if(E=bt,E!==null&&(f=Fn(E,l),f!==0&&f!==L.retryLane))throw L.retryLane=f,so(a,f),Wr(E,a,f),xp;og(N)||id(),o=Cp(a,o,l)}else og(N)?(o.flags|=192,o.child=a.child,o=null):(a=L.treeContext,St=Dn(N.nextSibling),Sr=o,Qe=!0,vi=null,Nn=!1,a!==null&&Cx(o,a),o=Op(o,f.children),o.flags|=4096);return o}return v?(Si(),N=f.fallback,v=o.mode,L=a.child,Q=L.sibling,f=Oa(L,{mode:"hidden",children:f.children}),f.subtreeFlags=L.subtreeFlags&65011712,Q!==null?N=Oa(Q,N):(N=lo(N,v,l,null),N.flags|=2),N.return=o,f.return=o,f.sibling=N,o.child=f,ql(null,f),f=o.child,N=a.child.memoizedState,N===null?N=Sp(l):(v=N.cachePool,v!==null?(L=Jt._currentValue,v=v.parent!==L?{parent:L,pool:L}:v):v=Px(),N={baseLanes:N.baseLanes|l,cachePool:v}),f.memoizedState=N,f.childLanes=Ep(a,E,l),o.memoizedState=jp,ql(a.child,f)):(ji(o),l=a.child,a=l.sibling,l=Oa(l,{mode:"visible",children:f.children}),l.return=o,l.sibling=null,a!==null&&(E=o.deletions,E===null?(o.deletions=[a],o.flags|=16):E.push(a)),o.child=l,o.memoizedState=null,l)}function Op(a,o){return o=Xu({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Xu(a,o){return a=nn(22,a,null,o),a.lanes=0,a}function Cp(a,o,l){return go(o,a.child,null,l),a=Op(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Yw(a,o,l){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),$h(a.return,o,l)}function Ap(a,o,l,f,v,b){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v,treeForkCount:b}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=l,E.tailMode=v,E.treeForkCount=b)}function Gw(a,o,l){var f=o.pendingProps,v=f.revealOrder,b=f.tail;f=f.children;var E=Vt.current,N=(E&2)!==0;if(N?(E=E&1|2,o.flags|=128):E&=1,$(Vt,E),Or(a,o,f,l),f=Qe?jl:0,!N&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Yw(a,l,o);else if(a.tag===19)Yw(a,l,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(l=o.child,v=null;l!==null;)a=l.alternate,a!==null&&Lu(a)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),Ap(o,!1,v,l,b,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&Lu(a)===null){o.child=v;break}a=v.sibling,v.sibling=l,l=v,v=a}Ap(o,!0,l,null,b,f);break;case"together":Ap(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function Ta(a,o,l){if(a!==null&&(o.dependencies=a.dependencies),Ci|=o.lanes,(l&o.childLanes)===0)if(a!==null){if(ds(a,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,l=Oa(a,a.pendingProps),o.child=l,l.return=o;a.sibling!==null;)a=a.sibling,l=l.sibling=Oa(a,a.pendingProps),l.return=o;l.sibling=null}return o.child}function Np(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&ku(a)))}function VM(a,o,l){switch(o.tag){case 3:_e(o,o.stateNode.containerInfo),bi(o,Jt,a.memoizedState.cache),co();break;case 27:case 5:xe(o);break;case 4:_e(o,o.stateNode.containerInfo);break;case 10:bi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,ep(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(ji(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Kw(a,o,l):(ji(o),a=Ta(a,o,l),a!==null?a.sibling:null);ji(o);break;case 19:var v=(a.flags&128)!==0;if(f=(l&o.childLanes)!==0,f||(ds(a,o,l,!1),f=(l&o.childLanes)!==0),v){if(f)return Gw(a,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),$(Vt,Vt.current),f)break;return null;case 22:return o.lanes=0,Iw(a,o,l,o.pendingProps);case 24:bi(o,Jt,a.memoizedState.cache)}return Ta(a,o,l)}function Vw(a,o,l){if(a!==null)if(a.memoizedProps!==o.pendingProps)tr=!0;else{if(!Np(a,l)&&(o.flags&128)===0)return tr=!1,VM(a,o,l);tr=(a.flags&131072)!==0}else tr=!1,Qe&&(o.flags&1048576)!==0&&Ox(o,jl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(a=ho(o.elementType),o.type=a,typeof a=="function")Mh(a)?(f=yo(a,f),o.tag=1,o=Hw(null,o,a,f,l)):(o.tag=0,o=wp(null,o,a,f,l));else{if(a!=null){var v=a.$$typeof;if(v===k){o.tag=11,o=qw(null,o,a,f,l);break e}else if(v===z){o.tag=14,o=zw(null,o,a,f,l);break e}}throw o=pe(a)||a,Error(n(306,o,""))}}return o;case 0:return wp(a,o,o.type,o.pendingProps,l);case 1:return f=o.type,v=yo(f,o.pendingProps),Hw(a,o,f,v,l);case 3:e:{if(_e(o,o.stateNode.containerInfo),a===null)throw Error(n(387));f=o.pendingProps;var b=o.memoizedState;v=b.element,Wh(a,o),Dl(o,f,null,l);var E=o.memoizedState;if(f=E.cache,bi(o,Jt,f),f!==b.cache&&Hh(o,[Jt],l,!0),kl(),f=E.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Fw(a,o,f,l);break e}else if(f!==v){v=On(Error(n(424)),o),Sl(v),o=Fw(a,o,f,l);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(St=Dn(a.firstChild),Sr=o,Qe=!0,vi=null,Nn=!0,l=Ix(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(co(),f===v){o=Ta(a,o,l);break e}Or(a,o,f,l)}o=o.child}return o;case 26:return Wu(a,o),a===null?(l=iS(o.type,null,o.pendingProps,null))?o.memoizedState=l:Qe||(l=o.type,a=o.pendingProps,f=fd(Ie.current).createElement(l),f[Bt]=o,f[sr]=a,Cr(f,l,a),ue(f),o.stateNode=f):o.memoizedState=iS(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return xe(o),a===null&&Qe&&(f=o.stateNode=rS(o.type,o.pendingProps,Ie.current),Sr=o,Nn=!0,v=St,Ti(o.type)?(lg=v,St=Dn(f.firstChild)):St=v),Or(a,o,o.pendingProps.children,l),Wu(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Qe&&((v=f=St)&&(f=SR(f,o.type,o.pendingProps,Nn),f!==null?(o.stateNode=f,Sr=o,St=Dn(f.firstChild),Nn=!1,v=!0):v=!1),v||yi(o)),xe(o),v=o.type,b=o.pendingProps,E=a!==null?a.memoizedProps:null,f=b.children,ng(v,b)?f=null:E!==null&&ng(v,E)&&(o.flags|=32),o.memoizedState!==null&&(v=rp(a,o,IM,null,null,l),Zl._currentValue=v),Wu(a,o),Or(a,o,f,l),o.child;case 6:return a===null&&Qe&&((a=l=St)&&(l=ER(l,o.pendingProps,Nn),l!==null?(o.stateNode=l,Sr=o,St=null,a=!0):a=!1),a||yi(o)),null;case 13:return Kw(a,o,l);case 4:return _e(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=go(o,null,f,l):Or(a,o,f,l),o.child;case 11:return qw(a,o,o.type,o.pendingProps,l);case 7:return Or(a,o,o.pendingProps,l),o.child;case 8:return Or(a,o,o.pendingProps.children,l),o.child;case 12:return Or(a,o,o.pendingProps.children,l),o.child;case 10:return f=o.pendingProps,bi(o,o.type,f.value),Or(a,o,f.children,l),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,fo(o),v=Er(v),f=f(v),o.flags|=1,Or(a,o,f,l),o.child;case 14:return zw(a,o,o.type,o.pendingProps,l);case 15:return Lw(a,o,o.type,o.pendingProps,l);case 19:return Gw(a,o,l);case 31:return GM(a,o,l);case 22:return Iw(a,o,l,o.pendingProps);case 24:return fo(o),f=Er(Jt),a===null?(v=Yh(),v===null&&(v=bt,b=Fh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=l),v=b),o.memoizedState={parent:f,cache:v},Vh(o),bi(o,Jt,v)):((a.lanes&l)!==0&&(Wh(a,o),Dl(o,null,null,l),kl()),v=a.memoizedState,b=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),bi(o,Jt,f)):(f=b.cache,bi(o,Jt,f),f!==v.cache&&Hh(o,[Jt],l,!0))),Or(a,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Pa(a){a.flags|=4}function kp(a,o,l,f,v){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(xj())a.flags|=8192;else throw po=Mu,Gh}else a.flags&=-16777217}function Ww(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!uS(o))if(xj())a.flags|=8192;else throw po=Mu,Gh}function Zu(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ve():536870912,a.lanes|=o,js|=o)}function zl(a,o){if(!Qe)switch(a.tailMode){case"hidden":o=a.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Et(a){var o=a.alternate!==null&&a.alternate.child===a.child,l=0,f=0;if(o)for(var v=a.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=f,a.childLanes=l,o}function WM(a,o,l){var f=o.pendingProps;switch(Lh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return l=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Na(Jt),V(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(us(o)?Pa(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Uh())),Et(o),null;case 26:var v=o.type,b=o.memoizedState;return a===null?(Pa(o),b!==null?(Et(o),Ww(o,b)):(Et(o),kp(o,v,null,f,l))):b?b!==a.memoizedState?(Pa(o),Et(o),Ww(o,b)):(Et(o),o.flags&=-16777217):(a=a.memoizedProps,a!==f&&Pa(o),Et(o),kp(o,v,a,f,l)),null;case 27:if(je(o),l=Ie.current,v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&Pa(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Et(o),null}a=Se.current,us(o)?Ax(o):(a=rS(v,f,l),o.stateNode=a,Pa(o))}return Et(o),null;case 5:if(je(o),v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&Pa(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Et(o),null}if(b=Se.current,us(o))Ax(o);else{var E=fd(Ie.current);switch(b){case 1:b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=E.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?E.createElement("select",{is:f.is}):E.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?E.createElement(v,{is:f.is}):E.createElement(v)}}b[Bt]=o,b[sr]=f;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)b.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=b;e:switch(Cr(b,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Pa(o)}}return Et(o),kp(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,l),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&Pa(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(a=Ie.current,us(o)){if(a=o.stateNode,l=o.memoizedProps,f=null,v=Sr,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}a[Bt]=o,a=!!(a.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||Kj(a.nodeValue,l)),a||yi(o,!0)}else a=fd(a).createTextNode(f),a[Bt]=o,o.stateNode=a}return Et(o),null;case 31:if(l=o.memoizedState,a===null||a.memoizedState!==null){if(f=us(o),l!==null){if(a===null){if(!f)throw Error(n(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Bt]=o}else co(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),a=!1}else l=Uh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=l),a=!0;if(!a)return o.flags&256?(on(o),o):(on(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Et(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=us(o),f!==null&&f.dehydrated!==null){if(a===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Bt]=o}else co(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),v=!1}else v=Uh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(on(o),o):(on(o),null)}return on(o),(o.flags&128)!==0?(o.lanes=l,o):(l=f!==null,a=a!==null&&a.memoizedState!==null,l&&(f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048)),l!==a&&l&&(o.child.flags|=8192),Zu(o,o.updateQueue),Et(o),null);case 4:return V(),a===null&&Qp(o.stateNode.containerInfo),Et(o),null;case 10:return Na(o.type),Et(o),null;case 19:if(F(Vt),f=o.memoizedState,f===null)return Et(o),null;if(v=(o.flags&128)!==0,b=f.rendering,b===null)if(v)zl(f,!1);else{if(Ht!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=Lu(a),b!==null){for(o.flags|=128,zl(f,!1),a=b.updateQueue,o.updateQueue=a,Zu(o,a),o.subtreeFlags=0,a=l,l=o.child;l!==null;)jx(l,a),l=l.sibling;return $(Vt,Vt.current&1|2),Qe&&Ca(o,f.treeForkCount),o.child}a=a.sibling}f.tail!==null&&Ye()>rd&&(o.flags|=128,v=!0,zl(f,!1),o.lanes=4194304)}else{if(!v)if(a=Lu(b),a!==null){if(o.flags|=128,v=!0,a=a.updateQueue,o.updateQueue=a,Zu(o,a),zl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!Qe)return Et(o),null}else 2*Ye()-f.renderingStartTime>rd&&l!==536870912&&(o.flags|=128,v=!0,zl(f,!1),o.lanes=4194304);f.isBackwards?(b.sibling=o.child,o.child=b):(a=f.last,a!==null?a.sibling=b:o.child=b,f.last=b)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=Ye(),a.sibling=null,l=Vt.current,$(Vt,v?l&1|2:l&1),Qe&&Ca(o,f.treeForkCount),a):(Et(o),null);case 22:case 23:return on(o),Jh(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(l&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),l=o.updateQueue,l!==null&&Zu(o,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==l&&(o.flags|=2048),a!==null&&F(mo),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Na(Jt),Et(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function XM(a,o){switch(Lh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Na(Jt),V(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return je(o),null;case 31:if(o.memoizedState!==null){if(on(o),o.alternate===null)throw Error(n(340));co()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(on(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));co()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return F(Vt),null;case 4:return V(),null;case 10:return Na(o.type),null;case 22:case 23:return on(o),Jh(),a!==null&&F(mo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Na(Jt),null;case 25:return null;default:return null}}function Xw(a,o){switch(Lh(o),o.tag){case 3:Na(Jt),V();break;case 26:case 27:case 5:je(o);break;case 4:V();break;case 31:o.memoizedState!==null&&on(o);break;case 13:on(o);break;case 19:F(Vt);break;case 10:Na(o.type);break;case 22:case 23:on(o),Jh(),a!==null&&F(mo);break;case 24:Na(Jt)}}function Ll(a,o){try{var l=o.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var v=f.next;l=v;do{if((l.tag&a)===a){f=void 0;var b=l.create,E=l.inst;f=b(),E.destroy=f}l=l.next}while(l!==v)}}catch(N){ut(o,o.return,N)}}function Ei(a,o,l){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var b=v.next;f=b;do{if((f.tag&a)===a){var E=f.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,v=o;var L=l,Q=N;try{Q()}catch(le){ut(v,L,le)}}}f=f.next}while(f!==b)}}catch(le){ut(o,o.return,le)}}function Zw(a){var o=a.updateQueue;if(o!==null){var l=a.stateNode;try{Bx(o,l)}catch(f){ut(a,a.return,f)}}}function Qw(a,o,l){l.props=yo(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(f){ut(a,o,f)}}function Il(a,o){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof l=="function"?a.refCleanup=l(f):l.current=f}}catch(v){ut(a,o,v)}}function ua(a,o){var l=a.ref,f=a.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(v){ut(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){ut(a,o,v)}else l.current=null}function Jw(a){var o=a.type,l=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(v){ut(a,a.return,v)}}function Dp(a,o,l){try{var f=a.stateNode;yR(f,a.type,l,o),f[sr]=o}catch(v){ut(a,a.return,v)}}function ej(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ti(a.type)||a.tag===4}function Tp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||ej(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ti(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Pp(a,o,l){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(a),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Sa));else if(f!==4&&(f===27&&Ti(a.type)&&(l=a.stateNode,o=null),a=a.child,a!==null))for(Pp(a,o,l),a=a.sibling;a!==null;)Pp(a,o,l),a=a.sibling}function Qu(a,o,l){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?l.insertBefore(a,o):l.appendChild(a);else if(f!==4&&(f===27&&Ti(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Qu(a,o,l),a=a.sibling;a!==null;)Qu(a,o,l),a=a.sibling}function tj(a){var o=a.stateNode,l=a.memoizedProps;try{for(var f=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Cr(o,f,l),o[Bt]=a,o[sr]=l}catch(b){ut(a,a.return,b)}}var Ma=!1,rr=!1,Mp=!1,rj=typeof WeakSet=="function"?WeakSet:Set,pr=null;function ZM(a,o){if(a=a.containerInfo,tg=bd,a=hx(a),Ch(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var E=0,N=-1,L=-1,Q=0,le=0,fe=a,ee=null;t:for(;;){for(var ae;fe!==l||v!==0&&fe.nodeType!==3||(N=E+v),fe!==b||f!==0&&fe.nodeType!==3||(L=E+f),fe.nodeType===3&&(E+=fe.nodeValue.length),(ae=fe.firstChild)!==null;)ee=fe,fe=ae;for(;;){if(fe===a)break t;if(ee===l&&++Q===v&&(N=E),ee===b&&++le===f&&(L=E),(ae=fe.nextSibling)!==null)break;fe=ee,ee=fe.parentNode}fe=ae}l=N===-1||L===-1?null:{start:N,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(rg={focusedElem:a,selectionRange:l},bd=!1,pr=o;pr!==null;)if(o=pr,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,pr=a;else for(;pr!==null;){switch(o=pr,b=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(l=0;l<a.length;l++)v=a[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,l=o,v=b.memoizedProps,b=b.memoizedState,f=l.stateNode;try{var Ae=yo(l.type,v);a=f.getSnapshotBeforeUpdate(Ae,b),f.__reactInternalSnapshotBeforeUpdate=a}catch(Le){ut(l,l.return,Le)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,l=a.nodeType,l===9)ig(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":ig(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,pr=a;break}pr=o.return}}function nj(a,o,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:qa(a,l),f&4&&Ll(5,l);break;case 1:if(qa(a,l),f&4)if(a=l.stateNode,o===null)try{a.componentDidMount()}catch(E){ut(l,l.return,E)}else{var v=yo(l.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(l,l.return,E)}}f&64&&Zw(l),f&512&&Il(l,l.return);break;case 3:if(qa(a,l),f&64&&(a=l.updateQueue,a!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Bx(a,o)}catch(E){ut(l,l.return,E)}}break;case 27:o===null&&f&4&&tj(l);case 26:case 5:qa(a,l),o===null&&f&4&&Jw(l),f&512&&Il(l,l.return);break;case 12:qa(a,l);break;case 31:qa(a,l),f&4&&oj(a,l);break;case 13:qa(a,l),f&4&&sj(a,l),f&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=oR.bind(null,l),OR(a,l))));break;case 22:if(f=l.memoizedState!==null||Ma,!f){o=o!==null&&o.memoizedState!==null||rr,v=Ma;var b=rr;Ma=f,(rr=o)&&!b?za(a,l,(l.subtreeFlags&8772)!==0):qa(a,l),Ma=v,rr=b}break;case 30:break;default:qa(a,l)}}function aj(a){var o=a.alternate;o!==null&&(a.alternate=null,aj(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Qo(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var At=null,Kr=!1;function Ra(a,o,l){for(l=l.child;l!==null;)ij(a,o,l),l=l.sibling}function ij(a,o,l){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Qt,l)}catch{}switch(l.tag){case 26:rr||ua(l,o),Ra(a,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:rr||ua(l,o);var f=At,v=Kr;Ti(l.type)&&(At=l.stateNode,Kr=!1),Ra(a,o,l),Vl(l.stateNode),At=f,Kr=v;break;case 5:rr||ua(l,o);case 6:if(f=At,v=Kr,At=null,Ra(a,o,l),At=f,Kr=v,At!==null)if(Kr)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(l.stateNode)}catch(b){ut(l,o,b)}else try{At.removeChild(l.stateNode)}catch(b){ut(l,o,b)}break;case 18:At!==null&&(Kr?(a=At,Zj(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),Ds(a)):Zj(At,l.stateNode));break;case 4:f=At,v=Kr,At=l.stateNode.containerInfo,Kr=!0,Ra(a,o,l),At=f,Kr=v;break;case 0:case 11:case 14:case 15:Ei(2,l,o),rr||Ei(4,l,o),Ra(a,o,l);break;case 1:rr||(ua(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"&&Qw(l,o,f)),Ra(a,o,l);break;case 21:Ra(a,o,l);break;case 22:rr=(f=rr)||l.memoizedState!==null,Ra(a,o,l),rr=f;break;default:Ra(a,o,l)}}function oj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Ds(a)}catch(l){ut(o,o.return,l)}}}function sj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Ds(a)}catch(l){ut(o,o.return,l)}}function QM(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new rj),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new rj),o;default:throw Error(n(435,a.tag))}}function Ju(a,o){var l=QM(a);o.forEach(function(f){if(!l.has(f)){l.add(f);var v=sR.bind(null,a,f);f.then(v,v)}})}function Yr(a,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f],b=a,E=o,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(Ti(N.type)){At=N.stateNode,Kr=!1;break e}break;case 5:At=N.stateNode,Kr=!1;break e;case 3:case 4:At=N.stateNode.containerInfo,Kr=!0;break e}N=N.return}if(At===null)throw Error(n(160));ij(b,E,v),At=null,Kr=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)lj(o,a),o=o.sibling}var Vn=null;function lj(a,o){var l=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Yr(o,a),Gr(a),f&4&&(Ei(3,a,a.return),Ll(3,a),Ei(5,a,a.return));break;case 1:Yr(o,a),Gr(a),f&512&&(rr||l===null||ua(l,l.return)),f&64&&Ma&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var v=Vn;if(Yr(o,a),Gr(a),f&512&&(rr||l===null||ua(l,l.return)),f&4){var b=l!==null?l.memoizedState:null;if(f=a.memoizedState,l===null)if(f===null)if(a.stateNode===null){e:{f=a.type,l=a.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Zo]||b[Bt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(f),v.head.insertBefore(b,v.querySelector("head > title"))),Cr(b,f,l),b[Bt]=a,ue(b),f=b;break e;case"link":var E=lS("link","href",v).get(f+(l.href||""));if(E){for(var N=0;N<E.length;N++)if(b=E[N],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(N,1);break t}}b=v.createElement(f),Cr(b,f,l),v.head.appendChild(b);break;case"meta":if(E=lS("meta","content",v).get(f+(l.content||""))){for(N=0;N<E.length;N++)if(b=E[N],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(N,1);break t}}b=v.createElement(f),Cr(b,f,l),v.head.appendChild(b);break;default:throw Error(n(468,f))}b[Bt]=a,ue(b),f=b}a.stateNode=f}else cS(v,a.type,a.stateNode);else a.stateNode=sS(v,f,a.memoizedProps);else b!==f?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,f===null?cS(v,a.type,a.stateNode):sS(v,f,a.memoizedProps)):f===null&&a.stateNode!==null&&Dp(a,a.memoizedProps,l.memoizedProps)}break;case 27:Yr(o,a),Gr(a),f&512&&(rr||l===null||ua(l,l.return)),l!==null&&f&4&&Dp(a,a.memoizedProps,l.memoizedProps);break;case 5:if(Yr(o,a),Gr(a),f&512&&(rr||l===null||ua(l,l.return)),a.flags&32){v=a.stateNode;try{es(v,"")}catch(Ae){ut(a,a.return,Ae)}}f&4&&a.stateNode!=null&&(v=a.memoizedProps,Dp(a,v,l!==null?l.memoizedProps:v)),f&1024&&(Mp=!0);break;case 6:if(Yr(o,a),Gr(a),f&4){if(a.stateNode===null)throw Error(n(162));f=a.memoizedProps,l=a.stateNode;try{l.nodeValue=f}catch(Ae){ut(a,a.return,Ae)}}break;case 3:if(pd=null,v=Vn,Vn=md(o.containerInfo),Yr(o,a),Vn=v,Gr(a),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Ds(o.containerInfo)}catch(Ae){ut(a,a.return,Ae)}Mp&&(Mp=!1,cj(a));break;case 4:f=Vn,Vn=md(a.stateNode.containerInfo),Yr(o,a),Gr(a),Vn=f;break;case 12:Yr(o,a),Gr(a);break;case 31:Yr(o,a),Gr(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Ju(a,f)));break;case 13:Yr(o,a),Gr(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(td=Ye()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Ju(a,f)));break;case 22:v=a.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,Q=Ma,le=rr;if(Ma=Q||v,rr=le||L,Yr(o,a),rr=le,Ma=Q,Gr(a),f&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(l===null||L||Ma||rr||bo(a)),l=null,o=a;;){if(o.tag===5||o.tag===26){if(l===null){L=l=o;try{if(b=L.stateNode,v)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=L.stateNode;var fe=L.memoizedProps.style,ee=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;N.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(Ae){ut(L,L.return,Ae)}}}else if(o.tag===6){if(l===null){L=o;try{L.stateNode.nodeValue=v?"":L.memoizedProps}catch(Ae){ut(L,L.return,Ae)}}}else if(o.tag===18){if(l===null){L=o;try{var ae=L.stateNode;v?Qj(ae,!0):Qj(L.stateNode,!1)}catch(Ae){ut(L,L.return,Ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,Ju(a,l))));break;case 19:Yr(o,a),Gr(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,Ju(a,f)));break;case 30:break;case 21:break;default:Yr(o,a),Gr(a)}}function Gr(a){var o=a.flags;if(o&2){try{for(var l,f=a.return;f!==null;){if(ej(f)){l=f;break}f=f.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var v=l.stateNode,b=Tp(a);Qu(a,b,v);break;case 5:var E=l.stateNode;l.flags&32&&(es(E,""),l.flags&=-33);var N=Tp(a);Qu(a,N,E);break;case 3:case 4:var L=l.stateNode.containerInfo,Q=Tp(a);Pp(a,Q,L);break;default:throw Error(n(161))}}catch(le){ut(a,a.return,le)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function cj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;cj(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function qa(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)nj(a,o.alternate,o),o=o.sibling}function bo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Ei(4,o,o.return),bo(o);break;case 1:ua(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Qw(o,o.return,l),bo(o);break;case 27:Vl(o.stateNode);case 26:case 5:ua(o,o.return),bo(o);break;case 22:o.memoizedState===null&&bo(o);break;case 30:bo(o);break;default:bo(o)}a=a.sibling}}function za(a,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=a,b=o,E=b.flags;switch(b.tag){case 0:case 11:case 15:za(v,b,l),Ll(4,b);break;case 1:if(za(v,b,l),f=b,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(Q){ut(f,f.return,Q)}if(f=b,v=f.updateQueue,v!==null){var N=f.stateNode;try{var L=v.shared.hiddenCallbacks;if(L!==null)for(v.shared.hiddenCallbacks=null,v=0;v<L.length;v++)Ux(L[v],N)}catch(Q){ut(f,f.return,Q)}}l&&E&64&&Zw(b),Il(b,b.return);break;case 27:tj(b);case 26:case 5:za(v,b,l),l&&f===null&&E&4&&Jw(b),Il(b,b.return);break;case 12:za(v,b,l);break;case 31:za(v,b,l),l&&E&4&&oj(v,b);break;case 13:za(v,b,l),l&&E&4&&sj(v,b);break;case 22:b.memoizedState===null&&za(v,b,l),Il(b,b.return);break;case 30:break;default:za(v,b,l)}o=o.sibling}}function Rp(a,o){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&El(l))}function qp(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&El(a))}function Wn(a,o,l,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)uj(a,o,l,f),o=o.sibling}function uj(a,o,l,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Wn(a,o,l,f),v&2048&&Ll(9,o);break;case 1:Wn(a,o,l,f);break;case 3:Wn(a,o,l,f),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&El(a)));break;case 12:if(v&2048){Wn(a,o,l,f),a=o.stateNode;try{var b=o.memoizedProps,E=b.id,N=b.onPostCommit;typeof N=="function"&&N(E,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(L){ut(o,o.return,L)}}else Wn(a,o,l,f);break;case 31:Wn(a,o,l,f);break;case 13:Wn(a,o,l,f);break;case 23:break;case 22:b=o.stateNode,E=o.alternate,o.memoizedState!==null?b._visibility&2?Wn(a,o,l,f):Ul(a,o):b._visibility&2?Wn(a,o,l,f):(b._visibility|=2,_s(a,o,l,f,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Rp(E,o);break;case 24:Wn(a,o,l,f),v&2048&&qp(o.alternate,o);break;default:Wn(a,o,l,f)}}function _s(a,o,l,f,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=a,E=o,N=l,L=f,Q=E.flags;switch(E.tag){case 0:case 11:case 15:_s(b,E,N,L,v),Ll(8,E);break;case 23:break;case 22:var le=E.stateNode;E.memoizedState!==null?le._visibility&2?_s(b,E,N,L,v):Ul(b,E):(le._visibility|=2,_s(b,E,N,L,v)),v&&Q&2048&&Rp(E.alternate,E);break;case 24:_s(b,E,N,L,v),v&&Q&2048&&qp(E.alternate,E);break;default:_s(b,E,N,L,v)}o=o.sibling}}function Ul(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=a,f=o,v=f.flags;switch(f.tag){case 22:Ul(l,f),v&2048&&Rp(f.alternate,f);break;case 24:Ul(l,f),v&2048&&qp(f.alternate,f);break;default:Ul(l,f)}o=o.sibling}}var Bl=8192;function xs(a,o,l){if(a.subtreeFlags&Bl)for(a=a.child;a!==null;)dj(a,o,l),a=a.sibling}function dj(a,o,l){switch(a.tag){case 26:xs(a,o,l),a.flags&Bl&&a.memoizedState!==null&&LR(l,Vn,a.memoizedState,a.memoizedProps);break;case 5:xs(a,o,l);break;case 3:case 4:var f=Vn;Vn=md(a.stateNode.containerInfo),xs(a,o,l),Vn=f;break;case 22:a.memoizedState===null&&(f=a.alternate,f!==null&&f.memoizedState!==null?(f=Bl,Bl=16777216,xs(a,o,l),Bl=f):xs(a,o,l));break;default:xs(a,o,l)}}function fj(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function $l(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];pr=f,hj(f,a)}fj(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)mj(a),a=a.sibling}function mj(a){switch(a.tag){case 0:case 11:case 15:$l(a),a.flags&2048&&Ei(9,a,a.return);break;case 3:$l(a);break;case 12:$l(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,ed(a)):$l(a);break;default:$l(a)}}function ed(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];pr=f,hj(f,a)}fj(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Ei(8,o,o.return),ed(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,ed(o));break;default:ed(o)}a=a.sibling}}function hj(a,o){for(;pr!==null;){var l=pr;switch(l.tag){case 0:case 11:case 15:Ei(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:El(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,pr=f;else e:for(l=a;pr!==null;){f=pr;var v=f.sibling,b=f.return;if(aj(f),f===l){pr=null;break e}if(v!==null){v.return=b,pr=v;break e}pr=b}}}var JM={getCacheForType:function(a){var o=Er(Jt),l=o.data.get(a);return l===void 0&&(l=a(),o.data.set(a,l)),l},cacheSignal:function(){return Er(Jt).controller.signal}},eR=typeof WeakMap=="function"?WeakMap:Map,ot=0,bt=null,Ve=null,Xe=0,ct=0,sn=null,Oi=!1,ws=!1,zp=!1,La=0,Ht=0,Ci=0,_o=0,Lp=0,ln=0,js=0,Hl=null,Vr=null,Ip=!1,td=0,pj=0,rd=1/0,nd=null,Ai=null,lr=0,Ni=null,Ss=null,Ia=0,Up=0,Bp=null,gj=null,Fl=0,$p=null;function cn(){return(ot&2)!==0&&Xe!==0?Xe&-Xe:R.T!==null?Vp():eo()}function vj(){if(ln===0)if((Xe&536870912)===0||Qe){var a=fi;fi<<=1,(fi&3932160)===0&&(fi=262144),ln=a}else ln=536870912;return a=an.current,a!==null&&(a.flags|=32),ln}function Wr(a,o,l){(a===bt&&(ct===2||ct===9)||a.cancelPendingCommit!==null)&&(Es(a,0),ki(a,Xe,ln,!1)),ja(a,l),((ot&2)===0||a!==bt)&&(a===bt&&((ot&2)===0&&(_o|=l),Ht===4&&ki(a,Xe,ln,!1)),da(a))}function yj(a,o,l){if((ot&6)!==0)throw Error(n(327));var f=!l&&(o&127)===0&&(o&a.expiredLanes)===0||wa(a,o),v=f?nR(a,o):Fp(a,o,!0),b=f;do{if(v===0){ws&&!f&&ki(a,o,0,!1);break}else{if(l=a.current.alternate,b&&!tR(l)){v=Fp(a,o,!1),b=!1;continue}if(v===2){if(b=o,a.errorRecoveryDisabledLanes&b)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var N=a;v=Hl;var L=N.current.memoizedState.isDehydrated;if(L&&(Es(N,E).flags|=256),E=Fp(N,E,!1),E!==2){if(zp&&!L){N.errorRecoveryDisabledLanes|=b,_o|=b,v=4;break e}b=Vr,Vr=v,b!==null&&(Vr===null?Vr=b:Vr.push.apply(Vr,b))}v=E}if(b=!1,v!==2)continue}}if(v===1){Es(a,0),ki(a,o,0,!0);break}e:{switch(f=a,b=v,b){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:ki(f,o,ln,!Oi);break e;case 2:Vr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(v=td+300-Ye(),10<v)){if(ki(f,o,ln,!Oi),mi(f,0,!0)!==0)break e;Ia=o,f.timeoutHandle=Wj(bj.bind(null,f,l,Vr,nd,Ip,o,ln,_o,js,Oi,b,"Throttled",-0,0),v);break e}bj(f,l,Vr,nd,Ip,o,ln,_o,js,Oi,b,null,-0,0)}}break}while(!0);da(a)}function bj(a,o,l,f,v,b,E,N,L,Q,le,fe,ee,ae){if(a.timeoutHandle=-1,fe=o.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sa},dj(o,b,fe);var Ae=(b&62914560)===b?td-Ye():(b&4194048)===b?pj-Ye():0;if(Ae=IR(fe,Ae),Ae!==null){Ia=b,a.cancelPendingCommit=Ae(Cj.bind(null,a,o,b,l,f,v,E,N,L,le,fe,null,ee,ae)),ki(a,b,E,!Q);return}}Cj(a,o,b,l,f,v,E,N,L)}function tR(a){for(var o=a;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var v=l[f],b=v.getSnapshot;v=v.value;try{if(!rn(b(),v))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ki(a,o,l,f){o&=~Lp,o&=~_o,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var v=o;0<v;){var b=31-ft(v),E=1<<b;f[b]=-1,v&=~E}l!==0&&mu(a,l,o)}function ad(){return(ot&6)===0?(Kl(0),!1):!0}function Hp(){if(Ve!==null){if(ct===0)var a=Ve.return;else a=Ve,Aa=uo=null,ip(a),ps=null,Cl=0,a=Ve;for(;a!==null;)Xw(a.alternate,a),a=a.return;Ve=null}}function Es(a,o){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,xR(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Ia=0,Hp(),bt=a,Ve=l=Oa(a.current,null),Xe=o,ct=0,sn=null,Oi=!1,ws=wa(a,o),zp=!1,js=ln=Lp=_o=Ci=Ht=0,Vr=Hl=null,Ip=!1,(o&8)!==0&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var v=31-ft(f),b=1<<v;o|=a[v],f&=~b}return La=o,Eu(),l}function _j(a,o){Be=null,R.H=Rl,o===hs||o===Pu?(o=qx(),ct=3):o===Gh?(o=qx(),ct=4):ct=o===xp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,sn=o,Ve===null&&(Ht=1,Gu(a,On(o,a.current)))}function xj(){var a=an.current;return a===null?!0:(Xe&4194048)===Xe?kn===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?a===kn:!1}function wj(){var a=R.H;return R.H=Rl,a===null?Rl:a}function jj(){var a=R.A;return R.A=JM,a}function id(){Ht=4,Oi||(Xe&4194048)!==Xe&&an.current!==null||(ws=!0),(Ci&134217727)===0&&(_o&134217727)===0||bt===null||ki(bt,Xe,ln,!1)}function Fp(a,o,l){var f=ot;ot|=2;var v=wj(),b=jj();(bt!==a||Xe!==o)&&(nd=null,Es(a,o)),o=!1;var E=Ht;e:do try{if(ct!==0&&Ve!==null){var N=Ve,L=sn;switch(ct){case 8:Hp(),E=6;break e;case 3:case 2:case 9:case 6:an.current===null&&(o=!0);var Q=ct;if(ct=0,sn=null,Os(a,N,L,Q),l&&ws){E=0;break e}break;default:Q=ct,ct=0,sn=null,Os(a,N,L,Q)}}rR(),E=Ht;break}catch(le){_j(a,le)}while(!0);return o&&a.shellSuspendCounter++,Aa=uo=null,ot=f,R.H=v,R.A=b,Ve===null&&(bt=null,Xe=0,Eu()),E}function rR(){for(;Ve!==null;)Sj(Ve)}function nR(a,o){var l=ot;ot|=2;var f=wj(),v=jj();bt!==a||Xe!==o?(nd=null,rd=Ye()+500,Es(a,o)):ws=wa(a,o);e:do try{if(ct!==0&&Ve!==null){o=Ve;var b=sn;t:switch(ct){case 1:ct=0,sn=null,Os(a,o,b,1);break;case 2:case 9:if(Mx(b)){ct=0,sn=null,Ej(o);break}o=function(){ct!==2&&ct!==9||bt!==a||(ct=7),da(a)},b.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Mx(b)?(ct=0,sn=null,Ej(o)):(ct=0,sn=null,Os(a,o,b,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var N=Ve;if(E?uS(E):N.stateNode.complete){ct=0,sn=null;var L=N.sibling;if(L!==null)Ve=L;else{var Q=N.return;Q!==null?(Ve=Q,od(Q)):Ve=null}break t}}ct=0,sn=null,Os(a,o,b,5);break;case 6:ct=0,sn=null,Os(a,o,b,6);break;case 8:Hp(),Ht=6;break e;default:throw Error(n(462))}}aR();break}catch(le){_j(a,le)}while(!0);return Aa=uo=null,R.H=f,R.A=v,ot=l,Ve!==null?0:(bt=null,Xe=0,Eu(),Ht)}function aR(){for(;Ve!==null&&!Br();)Sj(Ve)}function Sj(a){var o=Vw(a.alternate,a,La);a.memoizedProps=a.pendingProps,o===null?od(a):Ve=o}function Ej(a){var o=a,l=o.alternate;switch(o.tag){case 15:case 0:o=$w(l,o,o.pendingProps,o.type,void 0,Xe);break;case 11:o=$w(l,o,o.pendingProps,o.type.render,o.ref,Xe);break;case 5:ip(o);default:Xw(l,o),o=Ve=jx(o,La),o=Vw(l,o,La)}a.memoizedProps=a.pendingProps,o===null?od(a):Ve=o}function Os(a,o,l,f){Aa=uo=null,ip(o),ps=null,Cl=0;var v=o.return;try{if(YM(a,v,o,l,Xe)){Ht=1,Gu(a,On(l,a.current)),Ve=null;return}}catch(b){if(v!==null)throw Ve=v,b;Ht=1,Gu(a,On(l,a.current)),Ve=null;return}o.flags&32768?(Qe||f===1?a=!0:ws||(Xe&536870912)!==0?a=!1:(Oi=a=!0,(f===2||f===9||f===3||f===6)&&(f=an.current,f!==null&&f.tag===13&&(f.flags|=16384))),Oj(o,a)):od(o)}function od(a){var o=a;do{if((o.flags&32768)!==0){Oj(o,Oi);return}a=o.return;var l=WM(o.alternate,o,La);if(l!==null){Ve=l;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=a}while(o!==null);Ht===0&&(Ht=5)}function Oj(a,o){do{var l=XM(a.alternate,a);if(l!==null){l.flags&=32767,Ve=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(a=a.sibling,a!==null)){Ve=a;return}Ve=a=l}while(a!==null);Ht=6,Ve=null}function Cj(a,o,l,f,v,b,E,N,L){a.cancelPendingCommit=null;do sd();while(lr!==0);if((ot&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(b=o.lanes|o.childLanes,b|=Th,cl(a,l,b,E,N,L),a===bt&&(Ve=bt=null,Xe=0),Ss=o,Ni=a,Ia=l,Up=b,Bp=v,gj=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,lR(jr,function(){return Tj(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=R.T,R.T=null,v=U.p,U.p=2,E=ot,ot|=4;try{ZM(a,o,l)}finally{ot=E,U.p=v,R.T=f}}lr=1,Aj(),Nj(),kj()}}function Aj(){if(lr===1){lr=0;var a=Ni,o=Ss,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var f=U.p;U.p=2;var v=ot;ot|=4;try{lj(o,a);var b=rg,E=hx(a.containerInfo),N=b.focusedElem,L=b.selectionRange;if(E!==N&&N&&N.ownerDocument&&mx(N.ownerDocument.documentElement,N)){if(L!==null&&Ch(N)){var Q=L.start,le=L.end;if(le===void 0&&(le=Q),"selectionStart"in N)N.selectionStart=Q,N.selectionEnd=Math.min(le,N.value.length);else{var fe=N.ownerDocument||document,ee=fe&&fe.defaultView||window;if(ee.getSelection){var ae=ee.getSelection(),Ae=N.textContent.length,Le=Math.min(L.start,Ae),pt=L.end===void 0?Le:Math.min(L.end,Ae);!ae.extend&&Le>pt&&(E=pt,pt=Le,Le=E);var H=fx(N,Le),B=fx(N,pt);if(H&&B&&(ae.rangeCount!==1||ae.anchorNode!==H.node||ae.anchorOffset!==H.offset||ae.focusNode!==B.node||ae.focusOffset!==B.offset)){var Z=fe.createRange();Z.setStart(H.node,H.offset),ae.removeAllRanges(),Le>pt?(ae.addRange(Z),ae.extend(B.node,B.offset)):(Z.setEnd(B.node,B.offset),ae.addRange(Z))}}}}for(fe=[],ae=N;ae=ae.parentNode;)ae.nodeType===1&&fe.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<fe.length;N++){var de=fe[N];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}bd=!!tg,rg=tg=null}finally{ot=v,U.p=f,R.T=l}}a.current=o,lr=2}}function Nj(){if(lr===2){lr=0;var a=Ni,o=Ss,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var f=U.p;U.p=2;var v=ot;ot|=4;try{nj(a,o.alternate,o)}finally{ot=v,U.p=f,R.T=l}}lr=3}}function kj(){if(lr===4||lr===3){lr=0,xt();var a=Ni,o=Ss,l=Ia,f=gj;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?lr=5:(lr=0,Ss=Ni=null,Dj(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Ai=null),dl(l),o=o.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Qt,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=R.T,v=U.p,U.p=2,R.T=null;try{for(var b=a.onRecoverableError,E=0;E<f.length;E++){var N=f[E];b(N.value,{componentStack:N.stack})}}finally{R.T=o,U.p=v}}(Ia&3)!==0&&sd(),da(a),v=a.pendingLanes,(l&261930)!==0&&(v&42)!==0?a===$p?Fl++:(Fl=0,$p=a):Fl=0,Kl(0)}}function Dj(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,El(o)))}function sd(){return Aj(),Nj(),kj(),Tj()}function Tj(){if(lr!==5)return!1;var a=Ni,o=Up;Up=0;var l=dl(Ia),f=R.T,v=U.p;try{U.p=32>l?32:l,R.T=null,l=Bp,Bp=null;var b=Ni,E=Ia;if(lr=0,Ss=Ni=null,Ia=0,(ot&6)!==0)throw Error(n(331));var N=ot;if(ot|=4,mj(b.current),uj(b,b.current,E,l),ot=N,Kl(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Qt,b)}catch{}return!0}finally{U.p=v,R.T=f,Dj(a,o)}}function Pj(a,o,l){o=On(l,o),o=_p(a.stateNode,o,2),a=wi(a,o,2),a!==null&&(ja(a,2),da(a))}function ut(a,o,l){if(a.tag===3)Pj(a,a,l);else for(;o!==null;){if(o.tag===3){Pj(o,a,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ai===null||!Ai.has(f))){a=On(l,a),l=Mw(2),f=wi(o,l,2),f!==null&&(Rw(l,f,o,a),ja(f,2),da(f));break}}o=o.return}}function Kp(a,o,l){var f=a.pingCache;if(f===null){f=a.pingCache=new eR;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(l)||(zp=!0,v.add(l),a=iR.bind(null,a,o,l),o.then(a,a))}function iR(a,o,l){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,bt===a&&(Xe&l)===l&&(Ht===4||Ht===3&&(Xe&62914560)===Xe&&300>Ye()-td?(ot&2)===0&&Es(a,0):Lp|=l,js===Xe&&(js=0)),da(a)}function Mj(a,o){o===0&&(o=ve()),a=so(a,o),a!==null&&(ja(a,o),da(a))}function oR(a){var o=a.memoizedState,l=0;o!==null&&(l=o.retryLane),Mj(a,l)}function sR(a,o){var l=0;switch(a.tag){case 31:case 13:var f=a.stateNode,v=a.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(o),Mj(a,l)}function lR(a,o){return yt(a,o)}var ld=null,Cs=null,Yp=!1,cd=!1,Gp=!1,Di=0;function da(a){a!==Cs&&a.next===null&&(Cs===null?ld=Cs=a:Cs=Cs.next=a),cd=!0,Yp||(Yp=!0,uR())}function Kl(a,o){if(!Gp&&cd){Gp=!0;do for(var l=!1,f=ld;f!==null;){if(a!==0){var v=f.pendingLanes;if(v===0)var b=0;else{var E=f.suspendedLanes,N=f.pingedLanes;b=(1<<31-ft(42|a)+1)-1,b&=v&~(E&~N),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,Lj(f,b))}else b=Xe,b=mi(f,f===bt?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||wa(f,b)||(l=!0,Lj(f,b));f=f.next}while(l);Gp=!1}}function cR(){Rj()}function Rj(){cd=Yp=!1;var a=0;Di!==0&&_R()&&(a=Di);for(var o=Ye(),l=null,f=ld;f!==null;){var v=f.next,b=qj(f,o);b===0?(f.next=null,l===null?ld=v:l.next=v,v===null&&(Cs=l)):(l=f,(a!==0||(b&3)!==0)&&(cd=!0)),f=v}lr!==0&&lr!==5||Kl(a),Di!==0&&(Di=0)}function qj(a,o){for(var l=a.suspendedLanes,f=a.pingedLanes,v=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var E=31-ft(b),N=1<<E,L=v[E];L===-1?((N&l)===0||(N&f)!==0)&&(v[E]=ll(N,o)):L<=o&&(a.expiredLanes|=N),b&=~N}if(o=bt,l=Xe,l=mi(a,a===o?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,l===0||a===o&&(ct===2||ct===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&Ct(f),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||wa(a,l)){if(o=l&-l,o===a.callbackPriority)return o;switch(f!==null&&Ct(f),dl(l)){case 2:case 8:l=Hr;break;case 32:l=jr;break;case 268435456:l=he;break;default:l=jr}return f=zj.bind(null,a),l=yt(l,f),a.callbackPriority=o,a.callbackNode=l,o}return f!==null&&f!==null&&Ct(f),a.callbackPriority=2,a.callbackNode=null,2}function zj(a,o){if(lr!==0&&lr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(sd()&&a.callbackNode!==l)return null;var f=Xe;return f=mi(a,a===bt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(yj(a,f,o),qj(a,Ye()),a.callbackNode!=null&&a.callbackNode===l?zj.bind(null,a):null)}function Lj(a,o){if(sd())return null;yj(a,o,!0)}function uR(){wR(function(){(ot&6)!==0?yt(_n,cR):Rj()})}function Vp(){if(Di===0){var a=fs;a===0&&(a=di,di<<=1,(di&261888)===0&&(di=256)),Di=a}return Di}function Ij(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:vu(""+a)}function Uj(a,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,a.id&&l.setAttribute("form",a.id),o.parentNode.insertBefore(l,o),a=new FormData(a),l.parentNode.removeChild(l),a}function dR(a,o,l,f,v){if(o==="submit"&&l&&l.stateNode===v){var b=Ij((v[sr]||null).action),E=f.submitter;E&&(o=(o=E[sr]||null)?Ij(o.formAction):E.getAttribute("formAction"),o!==null&&(b=o,E=null));var N=new xu("action","action",null,f,v);a.push({event:N,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Di!==0){var L=E?Uj(v,E):new FormData(v);hp(l,{pending:!0,data:L,method:v.method,action:b},null,L)}}else typeof b=="function"&&(N.preventDefault(),L=E?Uj(v,E):new FormData(v),hp(l,{pending:!0,data:L,method:v.method,action:b},b,L))},currentTarget:v}]})}}for(var Wp=0;Wp<Dh.length;Wp++){var Xp=Dh[Wp],fR=Xp.toLowerCase(),mR=Xp[0].toUpperCase()+Xp.slice(1);Gn(fR,"on"+mR)}Gn(vx,"onAnimationEnd"),Gn(yx,"onAnimationIteration"),Gn(bx,"onAnimationStart"),Gn("dblclick","onDoubleClick"),Gn("focusin","onFocus"),Gn("focusout","onBlur"),Gn(NM,"onTransitionRun"),Gn(kM,"onTransitionStart"),Gn(DM,"onTransitionCancel"),Gn(_x,"onTransitionEnd"),Ee("onMouseEnter",["mouseout","mouseover"]),Ee("onMouseLeave",["mouseout","mouseover"]),Ee("onPointerEnter",["pointerout","pointerover"]),Ee("onPointerLeave",["pointerout","pointerover"]),ie("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ie("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ie("onBeforeInput",["compositionend","keypress","textInput","paste"]),ie("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ie("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ie("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yl));function Bj(a,o){o=(o&4)!==0;for(var l=0;l<a.length;l++){var f=a[l],v=f.event;f=f.listeners;e:{var b=void 0;if(o)for(var E=f.length-1;0<=E;E--){var N=f[E],L=N.instance,Q=N.currentTarget;if(N=N.listener,L!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=Q;try{b(v)}catch(le){Su(le)}v.currentTarget=null,b=L}else for(E=0;E<f.length;E++){if(N=f[E],L=N.instance,Q=N.currentTarget,N=N.listener,L!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=Q;try{b(v)}catch(le){Su(le)}v.currentTarget=null,b=L}}}}function We(a,o){var l=o[ro];l===void 0&&(l=o[ro]=new Set);var f=a+"__bubble";l.has(f)||($j(o,a,2,!1),l.add(f))}function Zp(a,o,l){var f=0;o&&(f|=4),$j(l,a,f,o)}var ud="_reactListening"+Math.random().toString(36).slice(2);function Qp(a){if(!a[ud]){a[ud]=!0,me.forEach(function(l){l!=="selectionchange"&&(hR.has(l)||Zp(l,!1,a),Zp(l,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[ud]||(o[ud]=!0,Zp("selectionchange",!1,o))}}function $j(a,o,l,f){switch(vS(o)){case 2:var v=$R;break;case 8:v=HR;break;default:v=mg}l=v.bind(null,o,l,a),v=void 0,!yh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?a.addEventListener(o,l,{capture:!0,passive:v}):a.addEventListener(o,l,!0):v!==void 0?a.addEventListener(o,l,{passive:v}):a.addEventListener(o,l,!1)}function Jp(a,o,l,f,v){var b=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var N=f.stateNode.containerInfo;if(N===v)break;if(E===4)for(E=f.return;E!==null;){var L=E.tag;if((L===3||L===4)&&E.stateNode.containerInfo===v)return;E=E.return}for(;N!==null;){if(E=Kn(N),E===null)return;if(L=E.tag,L===5||L===6||L===26||L===27){f=b=E;continue e}N=N.parentNode}}f=f.return}G_(function(){var Q=b,le=gh(l),fe=[];e:{var ee=xx.get(a);if(ee!==void 0){var ae=xu,Ae=a;switch(a){case"keypress":if(bu(l)===0)break e;case"keydown":case"keyup":ae=sM;break;case"focusin":Ae="focus",ae=wh;break;case"focusout":Ae="blur",ae=wh;break;case"beforeblur":case"afterblur":ae=wh;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=X_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=W2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=uM;break;case vx:case yx:case bx:ae=Q2;break;case _x:ae=fM;break;case"scroll":case"scrollend":ae=G2;break;case"wheel":ae=hM;break;case"copy":case"cut":case"paste":ae=eM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=Q_;break;case"toggle":case"beforetoggle":ae=gM}var Le=(o&4)!==0,pt=!Le&&(a==="scroll"||a==="scrollend"),H=Le?ee!==null?ee+"Capture":null:ee;Le=[];for(var B=Q,Z;B!==null;){var de=B;if(Z=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||Z===null||H===null||(de=hl(B,H),de!=null&&Le.push(Gl(B,de,Z))),pt)break;B=B.return}0<Le.length&&(ee=new ae(ee,Ae,null,l,le),fe.push({event:ee,listeners:Le}))}}if((o&7)===0){e:{if(ee=a==="mouseover"||a==="pointerover",ae=a==="mouseout"||a==="pointerout",ee&&l!==ph&&(Ae=l.relatedTarget||l.fromElement)&&(Kn(Ae)||Ae[sa]))break e;if((ae||ee)&&(ee=le.window===le?le:(ee=le.ownerDocument)?ee.defaultView||ee.parentWindow:window,ae?(Ae=l.relatedTarget||l.toElement,ae=Q,Ae=Ae?Kn(Ae):null,Ae!==null&&(pt=s(Ae),Le=Ae.tag,Ae!==pt||Le!==5&&Le!==27&&Le!==6)&&(Ae=null)):(ae=null,Ae=Q),ae!==Ae)){if(Le=X_,de="onMouseLeave",H="onMouseEnter",B="mouse",(a==="pointerout"||a==="pointerover")&&(Le=Q_,de="onPointerLeave",H="onPointerEnter",B="pointer"),pt=ae==null?ee:no(ae),Z=Ae==null?ee:no(Ae),ee=new Le(de,B+"leave",ae,l,le),ee.target=pt,ee.relatedTarget=Z,de=null,Kn(le)===Q&&(Le=new Le(H,B+"enter",Ae,l,le),Le.target=Z,Le.relatedTarget=pt,de=Le),pt=de,ae&&Ae)t:{for(Le=pR,H=ae,B=Ae,Z=0,de=H;de;de=Le(de))Z++;de=0;for(var ze=B;ze;ze=Le(ze))de++;for(;0<Z-de;)H=Le(H),Z--;for(;0<de-Z;)B=Le(B),de--;for(;Z--;){if(H===B||B!==null&&H===B.alternate){Le=H;break t}H=Le(H),B=Le(B)}Le=null}else Le=null;ae!==null&&Hj(fe,ee,ae,Le,!1),Ae!==null&&pt!==null&&Hj(fe,pt,Ae,Le,!0)}}e:{if(ee=Q?no(Q):window,ae=ee.nodeName&&ee.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ee.type==="file")var rt=ox;else if(ax(ee))if(sx)rt=OM;else{rt=SM;var Me=jM}else ae=ee.nodeName,!ae||ae.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Q&&hh(Q.elementType)&&(rt=ox):rt=EM;if(rt&&(rt=rt(a,Q))){ix(fe,rt,l,le);break e}Me&&Me(a,ee,Q),a==="focusout"&&Q&&ee.type==="number"&&Q.memoizedProps.value!=null&&mh(ee,"number",ee.value)}switch(Me=Q?no(Q):window,a){case"focusin":(ax(Me)||Me.contentEditable==="true")&&(as=Me,Ah=Q,wl=null);break;case"focusout":wl=Ah=as=null;break;case"mousedown":Nh=!0;break;case"contextmenu":case"mouseup":case"dragend":Nh=!1,px(fe,l,le);break;case"selectionchange":if(AM)break;case"keydown":case"keyup":px(fe,l,le)}var $e;if(Sh)e:{switch(a){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else ns?rx(a,l)&&(Ze="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(J_&&l.locale!=="ko"&&(ns||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&ns&&($e=V_()):(pi=le,bh="value"in pi?pi.value:pi.textContent,ns=!0)),Me=dd(Q,Ze),0<Me.length&&(Ze=new Z_(Ze,a,null,l,le),fe.push({event:Ze,listeners:Me}),$e?Ze.data=$e:($e=nx(l),$e!==null&&(Ze.data=$e)))),($e=yM?bM(a,l):_M(a,l))&&(Ze=dd(Q,"onBeforeInput"),0<Ze.length&&(Me=new Z_("onBeforeInput","beforeinput",null,l,le),fe.push({event:Me,listeners:Ze}),Me.data=$e)),dR(fe,a,Q,l,le)}Bj(fe,o)})}function Gl(a,o,l){return{instance:a,listener:o,currentTarget:l}}function dd(a,o){for(var l=o+"Capture",f=[];a!==null;){var v=a,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=hl(a,l),v!=null&&f.unshift(Gl(a,v,b)),v=hl(a,o),v!=null&&f.push(Gl(a,v,b))),a.tag===3)return f;a=a.return}return[]}function pR(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Hj(a,o,l,f,v){for(var b=o._reactName,E=[];l!==null&&l!==f;){var N=l,L=N.alternate,Q=N.stateNode;if(N=N.tag,L!==null&&L===f)break;N!==5&&N!==26&&N!==27||Q===null||(L=Q,v?(Q=hl(l,b),Q!=null&&E.unshift(Gl(l,Q,L))):v||(Q=hl(l,b),Q!=null&&E.push(Gl(l,Q,L)))),l=l.return}E.length!==0&&a.push({event:o,listeners:E})}var gR=/\r\n?/g,vR=/\u0000|\uFFFD/g;function Fj(a){return(typeof a=="string"?a:""+a).replace(gR,`
`).replace(vR,"")}function Kj(a,o){return o=Fj(o),Fj(a)===o}function ht(a,o,l,f,v,b){switch(l){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||es(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&es(a,""+f);break;case"className":Gt(a,"class",f);break;case"tabIndex":Gt(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Gt(a,l,f);break;case"style":K_(a,f,b);break;case"data":if(o!=="object"){Gt(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||l!=="href")){a.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(l);break}f=vu(""+f),a.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(o!=="input"&&ht(a,o,"name",v.name,v,null),ht(a,o,"formEncType",v.formEncType,v,null),ht(a,o,"formMethod",v.formMethod,v,null),ht(a,o,"formTarget",v.formTarget,v,null)):(ht(a,o,"encType",v.encType,v,null),ht(a,o,"method",v.method,v,null),ht(a,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(l);break}f=vu(""+f),a.setAttribute(l,f);break;case"onClick":f!=null&&(a.onclick=Sa);break;case"onScroll":f!=null&&We("scroll",a);break;case"onScrollEnd":f!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}l=vu(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,""+f):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":f===!0?a.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,f):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(l,f):a.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(l):a.setAttribute(l,f);break;case"popover":We("beforetoggle",a),We("toggle",a),Je(a,"popover",f);break;case"xlinkActuate":Yn(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Yn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Yn(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Yn(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Yn(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Yn(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Yn(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Yn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Yn(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Je(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=K2.get(l)||l,Je(a,l,f))}}function eg(a,o,l,f,v,b){switch(l){case"style":K_(a,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"children":typeof f=="string"?es(a,f):(typeof f=="number"||typeof f=="bigint")&&es(a,""+f);break;case"onScroll":f!=null&&We("scroll",a);break;case"onScrollEnd":f!=null&&We("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Sa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ce.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),o=l.slice(2,v?l.length-7:void 0),b=a[sr]||null,b=b!=null?b[l]:null,typeof b=="function"&&a.removeEventListener(o,b,v),typeof f=="function")){typeof b!="function"&&b!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(o,f,v);break e}l in a?a[l]=f:f===!0?a.setAttribute(l,""):Je(a,l,f)}}}function Cr(a,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var f=!1,v=!1,b;for(b in l)if(l.hasOwnProperty(b)){var E=l[b];if(E!=null)switch(b){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ht(a,o,b,E,l,null)}}v&&ht(a,o,"srcSet",l.srcSet,l,null),f&&ht(a,o,"src",l.src,l,null);return;case"input":We("invalid",a);var N=b=E=v=null,L=null,Q=null;for(f in l)if(l.hasOwnProperty(f)){var le=l[f];if(le!=null)switch(f){case"name":v=le;break;case"type":E=le;break;case"checked":L=le;break;case"defaultChecked":Q=le;break;case"value":b=le;break;case"defaultValue":N=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(n(137,o));break;default:ht(a,o,f,le,l,null)}}B_(a,b,N,L,Q,E,v,!1);return;case"select":We("invalid",a),f=E=b=null;for(v in l)if(l.hasOwnProperty(v)&&(N=l[v],N!=null))switch(v){case"value":b=N;break;case"defaultValue":E=N;break;case"multiple":f=N;default:ht(a,o,v,N,l,null)}o=b,l=E,a.multiple=!!f,o!=null?Jo(a,!!f,o,!1):l!=null&&Jo(a,!!f,l,!0);return;case"textarea":We("invalid",a),b=v=f=null;for(E in l)if(l.hasOwnProperty(E)&&(N=l[E],N!=null))switch(E){case"value":f=N;break;case"defaultValue":v=N;break;case"children":b=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:ht(a,o,E,N,l,null)}H_(a,f,v,b);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(f=l[L],f!=null))switch(L){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ht(a,o,L,f,l,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(f=0;f<Yl.length;f++)We(Yl[f],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Q in l)if(l.hasOwnProperty(Q)&&(f=l[Q],f!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ht(a,o,Q,f,l,null)}return;default:if(hh(o)){for(le in l)l.hasOwnProperty(le)&&(f=l[le],f!==void 0&&eg(a,o,le,f,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(f=l[N],f!=null&&ht(a,o,N,f,l,null))}function yR(a,o,l,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,E=null,N=null,L=null,Q=null,le=null;for(ae in l){var fe=l[ae];if(l.hasOwnProperty(ae)&&fe!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":L=fe;default:f.hasOwnProperty(ae)||ht(a,o,ae,null,f,fe)}}for(var ee in f){var ae=f[ee];if(fe=l[ee],f.hasOwnProperty(ee)&&(ae!=null||fe!=null))switch(ee){case"type":b=ae;break;case"name":v=ae;break;case"checked":Q=ae;break;case"defaultChecked":le=ae;break;case"value":E=ae;break;case"defaultValue":N=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(137,o));break;default:ae!==fe&&ht(a,o,ee,ae,f,fe)}}fh(a,E,N,L,Q,le,b,v);return;case"select":ae=E=N=ee=null;for(b in l)if(L=l[b],l.hasOwnProperty(b)&&L!=null)switch(b){case"value":break;case"multiple":ae=L;default:f.hasOwnProperty(b)||ht(a,o,b,null,f,L)}for(v in f)if(b=f[v],L=l[v],f.hasOwnProperty(v)&&(b!=null||L!=null))switch(v){case"value":ee=b;break;case"defaultValue":N=b;break;case"multiple":E=b;default:b!==L&&ht(a,o,v,b,f,L)}o=N,l=E,f=ae,ee!=null?Jo(a,!!l,ee,!1):!!f!=!!l&&(o!=null?Jo(a,!!l,o,!0):Jo(a,!!l,l?[]:"",!1));return;case"textarea":ae=ee=null;for(N in l)if(v=l[N],l.hasOwnProperty(N)&&v!=null&&!f.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ht(a,o,N,null,f,v)}for(E in f)if(v=f[E],b=l[E],f.hasOwnProperty(E)&&(v!=null||b!=null))switch(E){case"value":ee=v;break;case"defaultValue":ae=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==b&&ht(a,o,E,v,f,b)}$_(a,ee,ae);return;case"option":for(var Ae in l)if(ee=l[Ae],l.hasOwnProperty(Ae)&&ee!=null&&!f.hasOwnProperty(Ae))switch(Ae){case"selected":a.selected=!1;break;default:ht(a,o,Ae,null,f,ee)}for(L in f)if(ee=f[L],ae=l[L],f.hasOwnProperty(L)&&ee!==ae&&(ee!=null||ae!=null))switch(L){case"selected":a.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:ht(a,o,L,ee,f,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in l)ee=l[Le],l.hasOwnProperty(Le)&&ee!=null&&!f.hasOwnProperty(Le)&&ht(a,o,Le,null,f,ee);for(Q in f)if(ee=f[Q],ae=l[Q],f.hasOwnProperty(Q)&&ee!==ae&&(ee!=null||ae!=null))switch(Q){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(n(137,o));break;default:ht(a,o,Q,ee,f,ae)}return;default:if(hh(o)){for(var pt in l)ee=l[pt],l.hasOwnProperty(pt)&&ee!==void 0&&!f.hasOwnProperty(pt)&&eg(a,o,pt,void 0,f,ee);for(le in f)ee=f[le],ae=l[le],!f.hasOwnProperty(le)||ee===ae||ee===void 0&&ae===void 0||eg(a,o,le,ee,f,ae);return}}for(var H in l)ee=l[H],l.hasOwnProperty(H)&&ee!=null&&!f.hasOwnProperty(H)&&ht(a,o,H,null,f,ee);for(fe in f)ee=f[fe],ae=l[fe],!f.hasOwnProperty(fe)||ee===ae||ee==null&&ae==null||ht(a,o,fe,ee,f,ae)}function Yj(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var v=l[f],b=v.transferSize,E=v.initiatorType,N=v.duration;if(b&&N&&Yj(E)){for(E=0,N=v.responseEnd,f+=1;f<l.length;f++){var L=l[f],Q=L.startTime;if(Q>N)break;var le=L.transferSize,fe=L.initiatorType;le&&Yj(fe)&&(L=L.responseEnd,E+=le*(L<N?1:(N-Q)/(L-Q)))}if(--f,o+=8*(b+E)/(v.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var tg=null,rg=null;function fd(a){return a.nodeType===9?a:a.ownerDocument}function Gj(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vj(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function ng(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ag=null;function _R(){var a=window.event;return a&&a.type==="popstate"?a===ag?!1:(ag=a,!0):(ag=null,!1)}var Wj=typeof setTimeout=="function"?setTimeout:void 0,xR=typeof clearTimeout=="function"?clearTimeout:void 0,Xj=typeof Promise=="function"?Promise:void 0,wR=typeof queueMicrotask=="function"?queueMicrotask:typeof Xj<"u"?function(a){return Xj.resolve(null).then(a).catch(jR)}:Wj;function jR(a){setTimeout(function(){throw a})}function Ti(a){return a==="head"}function Zj(a,o){var l=o,f=0;do{var v=l.nextSibling;if(a.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(f===0){a.removeChild(v),Ds(o);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")Vl(a.ownerDocument.documentElement);else if(l==="head"){l=a.ownerDocument.head,Vl(l);for(var b=l.firstChild;b;){var E=b.nextSibling,N=b.nodeName;b[Zo]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=E}}else l==="body"&&Vl(a.ownerDocument.body);l=v}while(l);Ds(o)}function Qj(a,o){var l=a;a=0;do{var f=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(a===0)break;a--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||a++;l=f}while(l)}function ig(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ig(l),Qo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function SR(a,o,l,f){for(;a.nodeType===1;){var v=l;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[Zo])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Dn(a.nextSibling),a===null)break}return null}function ER(a,o,l){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Dn(a.nextSibling),a===null))return null;return a}function Jj(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Dn(a.nextSibling),a===null))return null;return a}function og(a){return a.data==="$?"||a.data==="$~"}function sg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function OR(a,o){var l=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||l.readyState!=="loading")o();else{var f=function(){o(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Dn(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var lg=null;function eS(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="/$"||l==="/&"){if(o===0)return Dn(a.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}a=a.nextSibling}return null}function tS(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return a;o--}else l!=="/$"&&l!=="/&"||o++}a=a.previousSibling}return null}function rS(a,o,l){switch(o=fd(l),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Vl(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Qo(a)}var Tn=new Map,nS=new Set;function md(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ua=U.d;U.d={f:CR,r:AR,D:NR,C:kR,L:DR,m:TR,X:MR,S:PR,M:RR};function CR(){var a=Ua.f(),o=ad();return a||o}function AR(a){var o=hi(a);o!==null&&o.tag===5&&o.type==="form"?_w(o):Ua.r(a)}var As=typeof document>"u"?null:document;function aS(a,o,l){var f=As;if(f&&typeof o=="string"&&o){var v=Sn(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),nS.has(v)||(nS.add(v),a={rel:a,crossOrigin:l,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),Cr(o,"link",a),ue(o),f.head.appendChild(o)))}}function NR(a){Ua.D(a),aS("dns-prefetch",a,null)}function kR(a,o){Ua.C(a,o),aS("preconnect",a,o)}function DR(a,o,l){Ua.L(a,o,l);var f=As;if(f&&a&&o){var v='link[rel="preload"][as="'+Sn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+Sn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+Sn(l.imageSizes)+'"]')):v+='[href="'+Sn(a)+'"]';var b=v;switch(o){case"style":b=Ns(a);break;case"script":b=ks(a)}Tn.has(b)||(a=g({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:a,as:o},l),Tn.set(b,a),f.querySelector(v)!==null||o==="style"&&f.querySelector(Wl(b))||o==="script"&&f.querySelector(Xl(b))||(o=f.createElement("link"),Cr(o,"link",a),ue(o),f.head.appendChild(o)))}}function TR(a,o){Ua.m(a,o);var l=As;if(l&&a){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Sn(f)+'"][href="'+Sn(a)+'"]',b=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ks(a)}if(!Tn.has(b)&&(a=g({rel:"modulepreload",href:a},o),Tn.set(b,a),l.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Xl(b)))return}f=l.createElement("link"),Cr(f,"link",a),ue(f),l.head.appendChild(f)}}}function PR(a,o,l){Ua.S(a,o,l);var f=As;if(f&&a){var v=K(f).hoistableStyles,b=Ns(a);o=o||"default";var E=v.get(b);if(!E){var N={loading:0,preload:null};if(E=f.querySelector(Wl(b)))N.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},l),(l=Tn.get(b))&&cg(a,l);var L=E=f.createElement("link");ue(L),Cr(L,"link",a),L._p=new Promise(function(Q,le){L.onload=Q,L.onerror=le}),L.addEventListener("load",function(){N.loading|=1}),L.addEventListener("error",function(){N.loading|=2}),N.loading|=4,hd(E,o,f)}E={type:"stylesheet",instance:E,count:1,state:N},v.set(b,E)}}}function MR(a,o){Ua.X(a,o);var l=As;if(l&&a){var f=K(l).hoistableScripts,v=ks(a),b=f.get(v);b||(b=l.querySelector(Xl(v)),b||(a=g({src:a,async:!0},o),(o=Tn.get(v))&&ug(a,o),b=l.createElement("script"),ue(b),Cr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function RR(a,o){Ua.M(a,o);var l=As;if(l&&a){var f=K(l).hoistableScripts,v=ks(a),b=f.get(v);b||(b=l.querySelector(Xl(v)),b||(a=g({src:a,async:!0,type:"module"},o),(o=Tn.get(v))&&ug(a,o),b=l.createElement("script"),ue(b),Cr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function iS(a,o,l,f){var v=(v=Ie.current)?md(v):null;if(!v)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ns(l.href),l=K(v).hoistableStyles,f=l.get(o),f||(f={type:"style",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=Ns(l.href);var b=K(v).hoistableStyles,E=b.get(a);if(E||(v=v.ownerDocument||v,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,E),(b=v.querySelector(Wl(a)))&&!b._p&&(E.instance=b,E.state.loading=5),Tn.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Tn.set(a,l),b||qR(v,a,l,E.state))),o&&f===null)throw Error(n(528,""));return E}if(o&&f!==null)throw Error(n(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ks(l),l=K(v).hoistableScripts,f=l.get(o),f||(f={type:"script",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Ns(a){return'href="'+Sn(a)+'"'}function Wl(a){return'link[rel="stylesheet"]['+a+"]"}function oS(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function qR(a,o,l,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),Cr(o,"link",l),ue(o),a.head.appendChild(o))}function ks(a){return'[src="'+Sn(a)+'"]'}function Xl(a){return"script[async]"+a}function sS(a,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+Sn(l.href)+'"]');if(f)return o.instance=f,ue(f),f;var v=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),ue(f),Cr(f,"style",v),hd(f,l.precedence,a),o.instance=f;case"stylesheet":v=Ns(l.href);var b=a.querySelector(Wl(v));if(b)return o.state.loading|=4,o.instance=b,ue(b),b;f=oS(l),(v=Tn.get(v))&&cg(f,v),b=(a.ownerDocument||a).createElement("link"),ue(b);var E=b;return E._p=new Promise(function(N,L){E.onload=N,E.onerror=L}),Cr(b,"link",f),o.state.loading|=4,hd(b,l.precedence,a),o.instance=b;case"script":return b=ks(l.src),(v=a.querySelector(Xl(b)))?(o.instance=v,ue(v),v):(f=l,(v=Tn.get(b))&&(f=g({},l),ug(f,v)),a=a.ownerDocument||a,v=a.createElement("script"),ue(v),Cr(v,"link",f),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,hd(f,l.precedence,a));return o.instance}function hd(a,o,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,b=v,E=0;E<f.length;E++){var N=f[E];if(N.dataset.precedence===o)b=N;else if(b!==v)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(a,o.firstChild))}function cg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function ug(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var pd=null;function lS(a,o,l){if(pd===null){var f=new Map,v=pd=new Map;v.set(l,f)}else v=pd,f=v.get(l),f||(f=new Map,v.set(l,f));if(f.has(a))return f;for(f.set(a,null),l=l.getElementsByTagName(a),v=0;v<l.length;v++){var b=l[v];if(!(b[Zo]||b[Bt]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(o)||"";E=a+E;var N=f.get(E);N?N.push(b):f.set(E,[b])}}return f}function cS(a,o,l){a=a.ownerDocument||a,a.head.insertBefore(l,o==="title"?a.querySelector("head > title"):null)}function zR(a,o,l){if(l===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function uS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function LR(a,o,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Ns(f.href),b=o.querySelector(Wl(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=gd.bind(a),o.then(a,a)),l.state.loading|=4,l.instance=b,ue(b);return}b=o.ownerDocument||o,f=oS(f),(v=Tn.get(v))&&cg(f,v),b=b.createElement("link"),ue(b);var E=b;E._p=new Promise(function(N,L){E.onload=N,E.onerror=L}),Cr(b,"link",f),l.instance=b}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=gd.bind(a),o.addEventListener("load",l),o.addEventListener("error",l))}}var dg=0;function IR(a,o){return a.stylesheets&&a.count===0&&yd(a,a.stylesheets),0<a.count||0<a.imgCount?function(l){var f=setTimeout(function(){if(a.stylesheets&&yd(a,a.stylesheets),a.unsuspend){var b=a.unsuspend;a.unsuspend=null,b()}},6e4+o);0<a.imgBytes&&dg===0&&(dg=62500*bR());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&yd(a,a.stylesheets),a.unsuspend)){var b=a.unsuspend;a.unsuspend=null,b()}},(a.imgBytes>dg?50:800)+o);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function gd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)yd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var vd=null;function yd(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,vd=new Map,o.forEach(UR,a),vd=null,gd.call(a))}function UR(a,o){if(!(o.state.loading&4)){var l=vd.get(a);if(l)var f=l.get(null);else{l=new Map,vd.set(a,l);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var E=v[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),f=E)}f&&l.set(null,f)}v=o.instance,E=v.getAttribute("data-precedence"),b=l.get(E)||f,b===f&&l.set(null,v),l.set(E,v),this.count++,f=gd.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),b?b.parentNode.insertBefore(v,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var Zl={$$typeof:A,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function BR(a,o,l,f,v,b,E,N,L){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.hiddenUpdates=Hn(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function dS(a,o,l,f,v,b,E,N,L,Q,le,fe){return a=new BR(a,o,l,E,L,Q,le,fe,N),o=1,b===!0&&(o|=24),b=nn(3,null,null,o),a.current=b,b.stateNode=a,o=Fh(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:f,isDehydrated:l,cache:o},Vh(b),a}function fS(a){return a?(a=ss,a):ss}function mS(a,o,l,f,v,b){v=fS(v),f.context===null?f.context=v:f.pendingContext=v,f=xi(o),f.payload={element:l},b=b===void 0?null:b,b!==null&&(f.callback=b),l=wi(a,f,o),l!==null&&(Wr(l,a,o),Nl(l,a,o))}function hS(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<o?l:o}}function fg(a,o){hS(a,o),(a=a.alternate)&&hS(a,o)}function pS(a){if(a.tag===13||a.tag===31){var o=so(a,67108864);o!==null&&Wr(o,a,67108864),fg(a,67108864)}}function gS(a){if(a.tag===13||a.tag===31){var o=cn();o=ul(o);var l=so(a,o);l!==null&&Wr(l,a,o),fg(a,o)}}var bd=!0;function $R(a,o,l,f){var v=R.T;R.T=null;var b=U.p;try{U.p=2,mg(a,o,l,f)}finally{U.p=b,R.T=v}}function HR(a,o,l,f){var v=R.T;R.T=null;var b=U.p;try{U.p=8,mg(a,o,l,f)}finally{U.p=b,R.T=v}}function mg(a,o,l,f){if(bd){var v=hg(f);if(v===null)Jp(a,o,f,_d,l),yS(a,f);else if(KR(v,a,o,l,f))f.stopPropagation();else if(yS(a,f),o&4&&-1<FR.indexOf(a)){for(;v!==null;){var b=hi(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=wn(b.pendingLanes);if(E!==0){var N=b;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var L=1<<31-ft(E);N.entanglements[1]|=L,E&=~L}da(b),(ot&6)===0&&(rd=Ye()+500,Kl(0))}}break;case 31:case 13:N=so(b,2),N!==null&&Wr(N,b,2),ad(),fg(b,2)}if(b=hg(f),b===null&&Jp(a,o,f,_d,l),b===v)break;v=b}v!==null&&f.stopPropagation()}else Jp(a,o,f,null,l)}}function hg(a){return a=gh(a),pg(a)}var _d=null;function pg(a){if(_d=null,a=Kn(a),a!==null){var o=s(a);if(o===null)a=null;else{var l=o.tag;if(l===13){if(a=c(o),a!==null)return a;a=null}else if(l===31){if(a=u(o),a!==null)return a;a=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return _d=a,null}function vS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($r()){case _n:return 2;case Hr:return 8;case jr:case Yt:return 32;case he:return 268435456;default:return 32}default:return 32}}var gg=!1,Pi=null,Mi=null,Ri=null,Ql=new Map,Jl=new Map,qi=[],FR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yS(a,o){switch(a){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Ql.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jl.delete(o.pointerId)}}function ec(a,o,l,f,v,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},o!==null&&(o=hi(o),o!==null&&pS(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function KR(a,o,l,f,v){switch(o){case"focusin":return Pi=ec(Pi,a,o,l,f,v),!0;case"dragenter":return Mi=ec(Mi,a,o,l,f,v),!0;case"mouseover":return Ri=ec(Ri,a,o,l,f,v),!0;case"pointerover":var b=v.pointerId;return Ql.set(b,ec(Ql.get(b)||null,a,o,l,f,v)),!0;case"gotpointercapture":return b=v.pointerId,Jl.set(b,ec(Jl.get(b)||null,a,o,l,f,v)),!0}return!1}function bS(a){var o=Kn(a.target);if(o!==null){var l=s(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){a.blockedOn=o,to(a.priority,function(){gS(l)});return}}else if(o===31){if(o=u(l),o!==null){a.blockedOn=o,to(a.priority,function(){gS(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function xd(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var l=hg(a.nativeEvent);if(l===null){l=a.nativeEvent;var f=new l.constructor(l.type,l);ph=f,l.target.dispatchEvent(f),ph=null}else return o=hi(l),o!==null&&pS(o),a.blockedOn=l,!1;o.shift()}return!0}function _S(a,o,l){xd(a)&&l.delete(o)}function YR(){gg=!1,Pi!==null&&xd(Pi)&&(Pi=null),Mi!==null&&xd(Mi)&&(Mi=null),Ri!==null&&xd(Ri)&&(Ri=null),Ql.forEach(_S),Jl.forEach(_S)}function wd(a,o){a.blockedOn===o&&(a.blockedOn=null,gg||(gg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,YR)))}var jd=null;function xS(a){jd!==a&&(jd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){jd===a&&(jd=null);for(var o=0;o<a.length;o+=3){var l=a[o],f=a[o+1],v=a[o+2];if(typeof f!="function"){if(pg(f||l)===null)continue;break}var b=hi(l);b!==null&&(a.splice(o,3),o-=3,hp(b,{pending:!0,data:v,method:l.method,action:f},f,v))}}))}function Ds(a){function o(L){return wd(L,a)}Pi!==null&&wd(Pi,a),Mi!==null&&wd(Mi,a),Ri!==null&&wd(Ri,a),Ql.forEach(o),Jl.forEach(o);for(var l=0;l<qi.length;l++){var f=qi[l];f.blockedOn===a&&(f.blockedOn=null)}for(;0<qi.length&&(l=qi[0],l.blockedOn===null);)bS(l),l.blockedOn===null&&qi.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var v=l[f],b=l[f+1],E=v[sr]||null;if(typeof b=="function")E||xS(l);else if(E){var N=null;if(b&&b.hasAttribute("formAction")){if(v=b,E=b[sr]||null)N=E.formAction;else if(pg(v)!==null)continue}else N=E.action;typeof N=="function"?l[f+1]=N:(l.splice(f,3),f-=3),xS(l)}}}function wS(){function a(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(E){return v=E})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function vg(a){this._internalRoot=a}Sd.prototype.render=vg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var l=o.current,f=cn();mS(l,f,a,o,null,null)},Sd.prototype.unmount=vg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;mS(a.current,2,null,a,null,null),ad(),o[sa]=null}};function Sd(a){this._internalRoot=a}Sd.prototype.unstable_scheduleHydration=function(a){if(a){var o=eo();a={blockedOn:null,target:a,priority:o};for(var l=0;l<qi.length&&o!==0&&o<qi[l].priority;l++);qi.splice(l,0,a),l===0&&bS(a)}};var jS=t.version;if(jS!=="19.2.0")throw Error(n(527,jS,"19.2.0"));U.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var GR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{Qt=Ed.inject(GR),Ut=Ed}catch{}}return rc.createRoot=function(a,o){if(!i(a))throw Error(n(299));var l=!1,f="",v=kw,b=Dw,E=Tw;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=dS(a,1,!1,null,null,l,f,null,v,b,E,wS),a[sa]=o.current,Qp(a),new vg(o)},rc.hydrateRoot=function(a,o,l){if(!i(a))throw Error(n(299));var f=!1,v="",b=kw,E=Dw,N=Tw,L=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),o=dS(a,1,!0,o,l??null,f,v,L,b,E,N,wS),o.context=fS(null),l=o.current,f=cn(),f=ul(f),v=xi(f),v.callback=null,wi(l,v,f),l=f,o.current.lanes=l,ja(o,l),da(o),a[sa]=o.current,Qp(a),new Sd(o)},rc.version="19.2.0",rc}var kS;function Lq(){if(kS)return bg.exports;kS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bg.exports=zq(),bg.exports}var Iq=Lq();const Uq=ri(Iq);var DS="popstate";function TS(e){return typeof e=="object"&&e!=null&&"pathname"in e&&"search"in e&&"hash"in e&&"state"in e&&"key"in e}function Bq(e={}){function t(n,i){let s=i.state?.masked,{pathname:c,search:u,hash:m}=s||n.location;return yy("",{pathname:c,search:u,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default",s?{pathname:n.location.pathname,search:n.location.search,hash:n.location.hash}:void 0)}function r(n,i){return typeof i=="string"?i:wc(i)}return Hq(t,r,null,e)}function Tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ln(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $q(){return Math.random().toString(36).substring(2,10)}function PS(e,t){return{usr:e.state,key:e.key,idx:t,masked:e.unstable_mask?{pathname:e.pathname,search:e.search,hash:e.hash}:void 0}}function yy(e,t,r=null,n,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ws(t):t,state:r,key:t&&t.key||n||$q(),unstable_mask:i}}function wc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ws(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Hq(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,c=i.history,u="POP",m=null,h=p();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function p(){return(c.state||{idx:null}).idx}function g(){u="POP";let S=p(),O=S==null?null:S-h;h=S,m&&m({action:u,location:j.location,delta:O})}function _(S,O){u="PUSH";let C=TS(S)?S:yy(j.location,S,O);h=p()+1;let A=PS(C,h),k=j.createHref(C.unstable_mask||C);try{c.pushState(A,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(k)}s&&m&&m({action:u,location:j.location,delta:1})}function x(S,O){u="REPLACE";let C=TS(S)?S:yy(j.location,S,O);h=p();let A=PS(C,h),k=j.createHref(C.unstable_mask||C);c.replaceState(A,"",k),s&&m&&m({action:u,location:j.location,delta:0})}function w(S){return Fq(S)}let j={get action(){return u},get location(){return e(i,c)},listen(S){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(DS,g),m=S,()=>{i.removeEventListener(DS,g),m=null}},createHref(S){return t(i,S)},createURL:w,encodeLocation(S){let O=w(S);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:x,go(S){return c.go(S)}};return j}function Fq(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:wc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function aN(e,t,r="/"){return Kq(e,t,r,!1)}function Kq(e,t,r,n){let i=typeof t=="string"?Ws(t):t,s=Va(i.pathname||"/",r);if(s==null)return null;let c=iN(e);Yq(c);let u=null;for(let m=0;u==null&&m<c.length;++m){let h=nz(s);u=tz(c[m],h,n)}return u}function iN(e,t=[],r=[],n="",i=!1){let s=(c,u,m=i,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&m)return;Tt(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=pa([n,p.relativePath]),_=r.concat(p);c.children&&c.children.length>0&&(Tt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),iN(c.children,t,_,g,m)),!(c.path==null&&!c.index)&&t.push({path:g,score:Jq(g,c.index),routesMeta:_})};return e.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))s(c,u);else for(let m of oN(c.path))s(c,u,!0,m)}),t}function oN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let c=oN(n.join("/")),u=[];return u.push(...c.map(m=>m===""?s:[s,m].join("/"))),i&&u.push(...c),u.map(m=>e.startsWith("/")&&m===""?"/":m)}function Yq(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ez(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Gq=/^:[\w-]+$/,Vq=3,Wq=2,Xq=1,Zq=10,Qq=-2,MS=e=>e==="*";function Jq(e,t){let r=e.split("/"),n=r.length;return r.some(MS)&&(n+=Qq),t&&(n+=Wq),r.filter(i=>!MS(i)).reduce((i,s)=>i+(Gq.test(s)?Vq:s===""?Xq:Zq),n)}function ez(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function tz(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",c=[];for(let u=0;u<n.length;++u){let m=n[u],h=u===n.length-1,p=s==="/"?t:t.slice(s.length)||"/",g=gf({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},p),_=m.route;if(!g&&h&&r&&!n[n.length-1].route.index&&(g=gf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:pa([s,g.pathname]),pathnameBase:sz(pa([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=pa([s,g.pathnameBase]))}return c}function gf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=rz(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],c=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:g},_)=>{if(p==="*"){let w=u[_]||"";c=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[_];return g&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:c,pattern:e}}function rz(e,t=!1,r=!0){Ln(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,m,h,p)=>{if(n.push({paramName:u,isOptional:m!=null}),m){let g=p.charAt(h+c.length);return g&&g!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function nz(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ln(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Va(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var az=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function iz(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Ws(e):e,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=RS(r.substring(1),"/"):s=RS(r,t)):s=t,{pathname:s,search:lz(n),hash:cz(i)}}function RS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function wg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function oz(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Db(e){let t=oz(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function mm(e,t,r,n=!1){let i;typeof e=="string"?i=Ws(e):(i={...e},Tt(!i.pathname||!i.pathname.includes("?"),wg("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),wg("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),wg("#","search","hash",i)));let s=e===""||i.pathname==="",c=s?"/":i.pathname,u;if(c==null)u=r;else{let g=t.length-1;if(!n&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}u=g>=0?t[g]:"/"}let m=iz(i,u),h=c&&c!=="/"&&c.endsWith("/"),p=(s||c===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(h||p)&&(m.pathname+="/"),m}var pa=e=>e.join("/").replace(/\/\/+/g,"/"),sz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,uz=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function dz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function fz(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var sN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function lN(e,t){let r=e;if(typeof r!="string"||!az.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(sN)try{let s=new URL(window.location.href),c=r.startsWith("//")?new URL(s.protocol+r):new URL(r),u=Va(c.pathname,t);c.origin===s.origin&&u!=null?r=u+c.search+c.hash:i=!0}catch{Ln(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cN=["POST","PUT","PATCH","DELETE"];new Set(cN);var mz=["GET",...cN];new Set(mz);var Xs=y.createContext(null);Xs.displayName="DataRouter";var hm=y.createContext(null);hm.displayName="DataRouterState";var hz=y.createContext(!1),uN=y.createContext({isTransitioning:!1});uN.displayName="ViewTransition";var pz=y.createContext(new Map);pz.displayName="Fetchers";var gz=y.createContext(null);gz.displayName="Await";var bn=y.createContext(null);bn.displayName="Navigation";var Uc=y.createContext(null);Uc.displayName="Location";var na=y.createContext({outlet:null,matches:[],isDataRoute:!1});na.displayName="Route";var Tb=y.createContext(null);Tb.displayName="RouteError";var dN="REACT_ROUTER_ERROR",vz="REDIRECT",yz="ROUTE_ERROR_RESPONSE";function bz(e){if(e.startsWith(`${dN}:${vz}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function _z(e){if(e.startsWith(`${dN}:${yz}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new uz(t.status,t.statusText,t.data)}catch{}}function xz(e,{relative:t}={}){Tt(Zs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(bn),{hash:i,pathname:s,search:c}=Bc(e,{relative:t}),u=s;return r!=="/"&&(u=s==="/"?r:pa([r,s])),n.createHref({pathname:u,search:c,hash:i})}function Zs(){return y.useContext(Uc)!=null}function aa(){return Tt(Zs(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Uc).location}var fN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mN(e){y.useContext(bn).static||y.useLayoutEffect(e)}function pm(){let{isDataRoute:e}=y.useContext(na);return e?Mz():wz()}function wz(){Tt(Zs(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(Xs),{basename:t,navigator:r}=y.useContext(bn),{matches:n}=y.useContext(na),{pathname:i}=aa(),s=JSON.stringify(Db(n)),c=y.useRef(!1);return mN(()=>{c.current=!0}),y.useCallback((m,h={})=>{if(Ln(c.current,fN),!c.current)return;if(typeof m=="number"){r.go(m);return}let p=mm(m,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:pa([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,s,i,e])}y.createContext(null);function hN(){let{matches:e}=y.useContext(na),t=e[e.length-1];return t?t.params:{}}function Bc(e,{relative:t}={}){let{matches:r}=y.useContext(na),{pathname:n}=aa(),i=JSON.stringify(Db(r));return y.useMemo(()=>mm(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function jz(e,t){return pN(e,t)}function pN(e,t,r){Tt(Zs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=y.useContext(bn),{matches:i}=y.useContext(na),s=i[i.length-1],c=s?s.params:{},u=s?s.pathname:"/",m=s?s.pathnameBase:"/",h=s&&s.route;{let S=h&&h.path||"";vN(u,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=aa(),g;if(t){let S=typeof t=="string"?Ws(t):t;Tt(m==="/"||S.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=p;let _=g.pathname||"/",x=_;if(m!=="/"){let S=m.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=aN(e,{pathname:x});Ln(h||w!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Ln(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Az(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:pa([m,n.encodeLocation?n.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:pa([m,n.encodeLocation?n.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),i,r);return t&&j?y.createElement(Uc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0,...g},navigationType:"POP"}},j):j}function Sz(){let e=Pz(),t=dz(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:i},r):null,c)}var Ez=y.createElement(Sz,null),gN=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=_z(e.digest);r&&(e=r)}let t=e!==void 0?y.createElement(na.Provider,{value:this.props.routeContext},y.createElement(Tb.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?y.createElement(Oz,{error:e},t):t}};gN.contextType=hz;var jg=new WeakMap;function Oz({children:e,error:t}){let{basename:r}=y.useContext(bn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=bz(t.digest);if(n){let i=jg.get(t);if(i)throw i;let s=lN(n.location,r);if(sN&&!jg.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw jg.set(t,c),c}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function Cz({routeContext:e,match:t,children:r}){let n=y.useContext(Xs);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(na.Provider,{value:e},r)}function Az(e,t=[],r){let n=r?.state;if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n?.errors;if(s!=null){let p=i.findIndex(g=>g.route.id&&s?.[g.route.id]!==void 0);Tt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,u=-1;if(r&&n){c=n.renderFallback;for(let p=0;p<i.length;p++){let g=i[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=p),g.route.id){let{loaderData:_,errors:x}=n,w=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!x||x[g.route.id]===void 0);if(g.route.lazy||w){r.isStatic&&(c=!0),u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}}let m=r?.onError,h=n&&m?(p,g)=>{m(p,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:fz(n.matches),errorInfo:g})}:void 0;return i.reduceRight((p,g,_)=>{let x,w=!1,j=null,S=null;n&&(x=s&&g.route.id?s[g.route.id]:void 0,j=g.route.errorElement||Ez,c&&(u<0&&_===0?(vN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===_&&(w=!0,S=g.route.hydrateFallbackElement||null)));let O=t.concat(i.slice(0,_+1)),C=()=>{let A;return x?A=j:w?A=S:g.route.Component?A=y.createElement(g.route.Component,null):g.route.element?A=g.route.element:A=p,y.createElement(Cz,{match:g,routeContext:{outlet:p,matches:O,isDataRoute:n!=null},children:A})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?y.createElement(gN,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:C(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:h}):C()},null)}function Pb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nz(e){let t=y.useContext(Xs);return Tt(t,Pb(e)),t}function kz(e){let t=y.useContext(hm);return Tt(t,Pb(e)),t}function Dz(e){let t=y.useContext(na);return Tt(t,Pb(e)),t}function Mb(e){let t=Dz(e),r=t.matches[t.matches.length-1];return Tt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Tz(){return Mb("useRouteId")}function Pz(){let e=y.useContext(Tb),t=kz("useRouteError"),r=Mb("useRouteError");return e!==void 0?e:t.errors?.[r]}function Mz(){let{router:e}=Nz("useNavigate"),t=Mb("useNavigate"),r=y.useRef(!1);return mN(()=>{r.current=!0}),y.useCallback(async(i,s={})=>{Ln(r.current,fN),r.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var qS={};function vN(e,t,r){!t&&!qS[e]&&(qS[e]=!0,Ln(!1,r))}y.memo(Rz);function Rz({routes:e,future:t,state:r,isStatic:n,onError:i}){return pN(e,void 0,{state:r,isStatic:n,onError:i})}function xo({to:e,replace:t,state:r,relative:n}){Tt(Zs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(bn);Ln(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=y.useContext(na),{pathname:c}=aa(),u=pm(),m=mm(e,Db(s),c,n==="path"),h=JSON.stringify(m);return y.useEffect(()=>{u(JSON.parse(h),{replace:t,state:r,relative:n})},[u,h,n,t,r]),null}function fn(e){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qz({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:c}){Tt(!Zs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),m=y.useMemo(()=>({basename:u,navigator:i,static:s,unstable_useTransitions:c,future:{}}),[u,i,s,c]);typeof r=="string"&&(r=Ws(r));let{pathname:h="/",search:p="",hash:g="",state:_=null,key:x="default",unstable_mask:w}=r,j=y.useMemo(()=>{let S=Va(h,u);return S==null?null:{location:{pathname:S,search:p,hash:g,state:_,key:x,unstable_mask:w},navigationType:n}},[u,h,p,g,_,x,n,w]);return Ln(j!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:y.createElement(bn.Provider,{value:m},y.createElement(Uc.Provider,{children:t,value:j}))}function zz({children:e,location:t}){return jz(by(e),t)}function by(e,t=[]){let r=[];return y.Children.forEach(e,(n,i)=>{if(!y.isValidElement(n))return;let s=[...t,i];if(n.type===y.Fragment){r.push.apply(r,by(n.props.children,s));return}Tt(n.type===fn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=by(n.props.children,s)),r.push(c)}),r}var Jd="get",ef="application/x-www-form-urlencoded";function gm(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Lz(e){return gm(e)&&e.tagName.toLowerCase()==="button"}function Iz(e){return gm(e)&&e.tagName.toLowerCase()==="form"}function Uz(e){return gm(e)&&e.tagName.toLowerCase()==="input"}function Bz(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function $z(e,t){return e.button===0&&(!t||t==="_self")&&!Bz(e)}function _y(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function Hz(e,t){let r=_y(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(s=>{r.append(i,s)})}),r}var Od=null;function Fz(){if(Od===null)try{new FormData(document.createElement("form"),0),Od=!1}catch{Od=!0}return Od}var Kz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sg(e){return e!=null&&!Kz.has(e)?(Ln(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ef}"`),null):e}function Yz(e,t){let r,n,i,s,c;if(Iz(e)){let u=e.getAttribute("action");n=u?Va(u,t):null,r=e.getAttribute("method")||Jd,i=Sg(e.getAttribute("enctype"))||ef,s=new FormData(e)}else if(Lz(e)||Uz(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||u.getAttribute("action");if(n=m?Va(m,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Jd,i=Sg(e.getAttribute("formenctype"))||Sg(u.getAttribute("enctype"))||ef,s=new FormData(u,e),!Fz()){let{name:h,type:p,value:g}=e;if(p==="image"){let _=h?`${h}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else h&&s.append(h,g)}}else{if(gm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Jd,n=null,i=ef,c=e}return s&&i==="text/plain"&&(c=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Gz(e,t,r,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:t&&Va(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Vz(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Wz(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Xz(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let c=await Vz(s,r);return c.links?c.links():[]}return[]}));return eL(n.flat(1).filter(Wz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function zS(e,t,r,n,i,s){let c=(m,h)=>r[h]?m.route.id!==r[h].route.id:!0,u=(m,h)=>r[h].pathname!==m.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==m.params["*"];return s==="assets"?t.filter((m,h)=>c(m,h)||u(m,h)):s==="data"?t.filter((m,h)=>{let p=n.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(c(m,h)||u(m,h))return!0;if(m.route.shouldRevalidate){let g=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function Zz(e,t,{includeHydrateFallback:r}={}){return Qz(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Qz(e){return[...new Set(e)]}function Jz(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function eL(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(Jz(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function yN(){let e=y.useContext(Xs);return Rb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function tL(){let e=y.useContext(hm);return Rb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var qb=y.createContext(void 0);qb.displayName="FrameworkContext";function bN(){let e=y.useContext(qb);return Rb(e,"You must render this element inside a <HydratedRouter> element"),e}function rL(e,t){let r=y.useContext(qb),[n,i]=y.useState(!1),[s,c]=y.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=t,_=y.useRef(null);y.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let j=O=>{O.forEach(C=>{c(C.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[e]),y.useEffect(()=>{if(n){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{i(!0)},w=()=>{i(!1),c(!1)};return r?e!=="intent"?[s,_,{}]:[s,_,{onFocus:nc(u,x),onBlur:nc(m,w),onMouseEnter:nc(h,x),onMouseLeave:nc(p,w),onTouchStart:nc(g,x)}]:[!1,_,{}]}function nc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function nL({page:e,...t}){let{router:r}=yN(),n=y.useMemo(()=>aN(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(iL,{page:e,matches:n,...t}):null}function aL(e){let{manifest:t,routeModules:r}=bN(),[n,i]=y.useState([]);return y.useEffect(()=>{let s=!1;return Xz(e,t,r).then(c=>{s||i(c)}),()=>{s=!0}},[e,t,r]),n}function iL({page:e,matches:t,...r}){let n=aa(),{future:i,manifest:s,routeModules:c}=bN(),{basename:u}=yN(),{loaderData:m,matches:h}=tL(),p=y.useMemo(()=>zS(e,t,h,s,n,"data"),[e,t,h,s,n]),g=y.useMemo(()=>zS(e,t,h,s,n,"assets"),[e,t,h,s,n]),_=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,S=!1;if(t.forEach(C=>{let A=s.routes[C.route.id];!A||!A.hasLoader||(!p.some(k=>k.route.id===C.route.id)&&C.route.id in m&&c[C.route.id]?.shouldRevalidate||A.hasClientLoader?S=!0:j.add(C.route.id))}),j.size===0)return[];let O=Gz(e,u,i.unstable_trailingSlashAwareDataRequests,"data");return S&&j.size>0&&O.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[O.pathname+O.search]},[u,i.unstable_trailingSlashAwareDataRequests,m,n,s,p,t,e,c]),x=y.useMemo(()=>Zz(g,s),[g,s]),w=aL(g);return y.createElement(y.Fragment,null,_.map(j=>y.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>y.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),w.map(({key:j,link:S})=>y.createElement("link",{key:j,nonce:r.nonce,...S,crossOrigin:S.crossOrigin??r.crossOrigin})))}function oL(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var sL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sL&&(window.__reactRouterVersion="7.13.1")}catch{}function lL({basename:e,children:t,unstable_useTransitions:r,window:n}){let i=y.useRef();i.current==null&&(i.current=Bq({window:n,v5Compat:!0}));let s=i.current,[c,u]=y.useState({action:s.action,location:s.location}),m=y.useCallback(h=>{r===!1?u(h):y.startTransition(()=>u(h))},[r]);return y.useLayoutEffect(()=>s.listen(m),[s,m]),y.createElement(qz,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:s,unstable_useTransitions:r})}var _N=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xN=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:c,unstable_mask:u,state:m,target:h,to:p,preventScrollReset:g,viewTransition:_,unstable_defaultShouldRevalidate:x,...w},j){let{basename:S,navigator:O,unstable_useTransitions:C}=y.useContext(bn),A=typeof p=="string"&&_N.test(p),k=lN(p,S);p=k.to;let D=xz(p,{relative:i}),M=aa(),z=null;if(u){let q=mm(u,[],M.unstable_mask?M.unstable_mask.pathname:"/",!0);S!=="/"&&(q.pathname=q.pathname==="/"?S:pa([S,q.pathname])),z=O.createHref(q)}let[W,Y,re]=rL(n,w),X=fL(p,{replace:c,unstable_mask:u,state:m,target:h,preventScrollReset:g,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:x,unstable_useTransitions:C});function I(q){t&&t(q),q.defaultPrevented||X(q)}let se=!(k.isExternal||s),pe=y.createElement("a",{...w,...re,href:(se?z:void 0)||k.absoluteURL||D,onClick:se?I:t,ref:oL(j,Y),target:h,"data-discover":!A&&r==="render"?"true":void 0});return W&&!A?y.createElement(y.Fragment,null,pe,y.createElement(nL,{page:D})):pe});xN.displayName="Link";var cL=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:c,viewTransition:u,children:m,...h},p){let g=Bc(c,{relative:h.relative}),_=aa(),x=y.useContext(hm),{navigator:w,basename:j}=y.useContext(bn),S=x!=null&&yL(g)&&u===!0,O=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,C=_.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),A=A?A.toLowerCase():null,O=O.toLowerCase()),A&&j&&(A=Va(A,j)||A);const k=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let D=C===O||!i&&C.startsWith(O)&&C.charAt(k)==="/",M=A!=null&&(A===O||!i&&A.startsWith(O)&&A.charAt(O.length)==="/"),z={isActive:D,isPending:M,isTransitioning:S},W=D?t:void 0,Y;typeof n=="function"?Y=n(z):Y=[n,D?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let re=typeof s=="function"?s(z):s;return y.createElement(xN,{...h,"aria-current":W,className:Y,ref:p,style:re,to:c,viewTransition:u},typeof m=="function"?m(z):m)});cL.displayName="NavLink";var uL=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:c=Jd,action:u,onSubmit:m,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:_,...x},w)=>{let{unstable_useTransitions:j}=y.useContext(bn),S=gL(),O=vL(u,{relative:h}),C=c.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&_N.test(u),k=D=>{if(m&&m(D),D.defaultPrevented)return;D.preventDefault();let M=D.nativeEvent.submitter,z=M?.getAttribute("formmethod")||c,W=()=>S(M||D.currentTarget,{fetcherKey:t,method:z,navigate:r,replace:i,state:s,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:_});j&&r!==!1?y.startTransition(()=>W()):W()};return y.createElement("form",{ref:w,method:C,action:O,onSubmit:n?m:k,...x,"data-discover":!A&&e==="render"?"true":void 0})});uL.displayName="Form";function dL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wN(e){let t=y.useContext(Xs);return Tt(t,dL(e)),t}function fL(e,{target:t,replace:r,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m,unstable_useTransitions:h}={}){let p=pm(),g=aa(),_=Bc(e,{relative:c});return y.useCallback(x=>{if($z(x,t)){x.preventDefault();let w=r!==void 0?r:wc(g)===wc(_),j=()=>p(e,{replace:w,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m});h?y.startTransition(()=>j()):j()}},[g,p,_,r,n,i,t,e,s,c,u,m,h])}function mL(e){Ln(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=y.useRef(_y(e)),r=y.useRef(!1),n=aa(),i=y.useMemo(()=>Hz(n.search,r.current?null:t.current),[n.search]),s=pm(),c=y.useCallback((u,m)=>{const h=_y(typeof u=="function"?u(new URLSearchParams(i)):u);r.current=!0,s("?"+h,m)},[s,i]);return[i,c]}var hL=0,pL=()=>`__${String(++hL)}__`;function gL(){let{router:e}=wN("useSubmit"),{basename:t}=y.useContext(bn),r=Tz(),n=e.fetch,i=e.navigate;return y.useCallback(async(s,c={})=>{let{action:u,method:m,encType:h,formData:p,body:g}=Yz(s,t);if(c.navigate===!1){let _=c.fetcherKey||pL();await n(_,r,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||m,formEncType:c.encType||h,flushSync:c.flushSync})}else await i(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||m,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,i,t,r])}function vL(e,{relative:t}={}){let{basename:r}=y.useContext(bn),n=y.useContext(na);Tt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Bc(e||".",{relative:t})},c=aa();if(e==null){s.search=c.search;let u=new URLSearchParams(s.search),m=u.getAll("index");if(m.some(p=>p==="")){u.delete("index"),m.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();s.search=p?`?${p}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:pa([r,s.pathname])),wc(s)}function yL(e,{relative:t}={}){let r=y.useContext(uN);Tt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=wN("useViewTransitionState"),i=Bc(e,{relative:t});if(!r.isTransitioning)return!1;let s=Va(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=Va(r.nextLocation.pathname,n)||r.nextLocation.pathname;return gf(i.pathname,c)!=null||gf(i.pathname,s)!=null}var jN=rN();function bL(e,t,r=[]){if(!e||!t)return{hasConflict:!1,conflicts:[]};const n=new Date(e._offlineModifiedAt||e.updated_at||0),i=new Date(t.updated_at||0),s=new Date(e._cachedAt||0);if(i<=s)return{hasConflict:!1,conflicts:[]};const c=[],u=r.length>0?r:Object.keys(e).filter(m=>!m.startsWith("_")&&m!=="id"&&m!=="created_at");for(const m of u){const h=e[m],p=t[m];if(h!==void 0&&p!==void 0&&!tf(h,p)){const g=e._cachedValues?.[m],_=g!==void 0?!tf(h,g):!0,x=g!==void 0?!tf(p,g):!0;_&&x&&c.push({field:m,localValue:h,serverValue:p,cachedValue:g})}}return{hasConflict:c.length>0,conflicts:c,localModifiedAt:n,serverUpdatedAt:i}}function tf(e,t){if(e===t)return!0;if(e==null||t==null)return e===t;if(typeof e!=typeof t)return!1;if(typeof e!="object")return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;const r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(i=>tf(e[i],t[i]))}const _L={KEEP_LOCAL:"keep_local",KEEP_SERVER:"keep_server",MERGE:"merge"};function xL(e,t=[]){const r={...e,_cachedAt:new Date().toISOString()};if(t.length>0){r._cachedValues={};for(const n of t)e[n]!==void 0&&(r._cachedValues[n]=JSON.parse(JSON.stringify(e[n])))}return r}function wL(e,t="record"){if(!e.hasConflict)return null;if(e.deletedOnServer)return{title:`${LS(t)} was deleted`,description:`This ${t} was deleted by another user while you were offline.`,severity:"warning",conflictCount:1};const r=e.conflicts.map(n=>n.field).join(", ");return{title:`${LS(t)} was modified`,description:`The following fields were changed by another user: ${r}`,severity:e.conflicts.length>2?"warning":"info",conflictCount:e.conflicts.length,fields:e.conflicts}}function LS(e){return e.charAt(0).toUpperCase()+e.slice(1)}const jL="fieldsync-offline",SL=2,tt={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let Eo=null;const ni=()=>new Promise((e,t)=>{if(Eo){e(Eo);return}const r=indexedDB.open(jL,SL);r.onerror=()=>{console.error("Failed to open offline database"),t(r.error)},r.onsuccess=()=>{Eo=r.result,e(Eo)},r.onupgradeneeded=n=>{const i=n.target.result;if(i.objectStoreNames.contains(tt.PROJECTS)||i.createObjectStore(tt.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),i.objectStoreNames.contains(tt.AREAS)||i.createObjectStore(tt.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.CREW_CHECKINS)||i.createObjectStore(tt.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.TM_TICKETS)||i.createObjectStore(tt.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.DAILY_REPORTS)||i.createObjectStore(tt.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.MESSAGES)||i.createObjectStore(tt.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!i.objectStoreNames.contains(tt.PENDING_ACTIONS)){const s=i.createObjectStore(tt.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});s.createIndex("type","type",{unique:!1}),s.createIndex("created_at","created_at",{unique:!1})}i.objectStoreNames.contains(tt.CACHED_DATA)||i.createObjectStore(tt.CACHED_DATA,{keyPath:"key"})}}),Ko=(e,t="readonly")=>{if(!Eo)throw new Error("Database not initialized");return Eo.transaction(e,t).objectStore(e)},$c=async(e,t)=>(await ni(),new Promise((r,n)=>{const s=Ko(e,"readwrite").put(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),SN=async(e,t)=>(await ni(),new Promise((r,n)=>{const i=Eo.transaction(e,"readwrite"),s=i.objectStore(e);t.forEach(c=>s.put(c)),i.oncomplete=()=>r(),i.onerror=()=>n(i.error)})),EN=async(e,t)=>(await ni(),new Promise((r,n)=>{const s=Ko(e).get(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),ON=async e=>(await ni(),new Promise((t,r)=>{const i=Ko(e).getAll();i.onsuccess=()=>t(i.result||[]),i.onerror=()=>r(i.error)})),zb=async(e,t,r)=>(await ni(),new Promise((n,i)=>{const u=Ko(e).index(t).getAll(r);u.onsuccess=()=>n(u.result||[]),u.onerror=()=>i(u.error)})),EL=async(e,t)=>(await ni(),new Promise((r,n)=>{const s=Ko(e,"readwrite").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})),Zt={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},un=async(e,t,r={})=>{await ni();const n={type:e,payload:t,metadata:r,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((i,s)=>{const u=Ko(tt.PENDING_ACTIONS,"readwrite").add(n);u.onsuccess=()=>{i(u.result)},u.onerror=()=>s(u.error)})},CN=async()=>ON(tt.PENDING_ACTIONS),rf=async()=>(await CN()).length,IS=async e=>EL(tt.PENDING_ACTIONS,e),OL=async(e,t)=>(await ni(),new Promise((r,n)=>{const i=Ko(tt.PENDING_ACTIONS,"readwrite"),s=i.get(e);s.onsuccess=()=>{const c=s.result;if(c){const u={...c,...t},m=i.put(u);m.onsuccess=()=>r(u),m.onerror=()=>n(m.error)}else n(new Error("Action not found"))},s.onerror=()=>n(s.error)})),CL=async e=>SN(tt.PROJECTS,e),US=async e=>e?zb(tt.PROJECTS,"company_id",e):ON(tt.PROJECTS),AL=async e=>{const t=e.map(r=>xL(r,["status","weight","name"]));return SN(tt.AREAS,t)},BS=async e=>zb(tt.AREAS,"project_id",e),Eg=async(e,t)=>{const r=await EN(tt.AREAS,e);return r&&(r.status=t,r.updated_at=new Date().toISOString(),r._offlineModifiedAt=new Date().toISOString(),await $c(tt.AREAS,r)),r},Cd=async e=>$c(tt.CREW_CHECKINS,e),$S=async e=>$c(tt.TM_TICKETS,e),Xr=()=>{const e=new Uint8Array(6);crypto.getRandomValues(e);const t=Array.from(e,r=>r.toString(36)).join("");return`temp_${Date.now()}_${t}`},Ts=async e=>$c(tt.DAILY_REPORTS,e),NL=async(e,t)=>(await zb(tt.DAILY_REPORTS,"project_id",e)).find(n=>n.report_date===t)||null,HS=async e=>$c(tt.MESSAGES,e);let Lb=typeof navigator<"u"?navigator.onLine:!0;const xy=new Set,Ib=e=>(xy.add(e),()=>xy.delete(e)),qn=()=>Lb,FS=e=>{Lb=e,xy.forEach(t=>t(e))};typeof window<"u"&&(window.addEventListener("online",()=>{FS(!0)}),window.addEventListener("offline",()=>{FS(!1)}));let Og=!1;const AN=async(e,t={})=>{if(Og||!Lb)return{synced:0,failed:0,conflicts:[]};const{onConflict:r}=t;Og=!0;const n={synced:0,failed:0,conflicts:[]};try{const i=await CN();for(const s of i)try{if(s.payload?.id&&s.type===Zt.UPDATE_AREA_STATUS){const c=await kL(e,s.type,s.payload);if(c){const u=await EN(tt.AREAS,s.payload.areaId||s.payload.id);if(u){const m=bL(u,c,["status"]);if(m.hasConflict){const h=wL(m,"area");if(n.conflicts.push({action:s,conflict:m,summary:h}),r&&await r({action:s,conflict:m,summary:h})===_L.KEEP_SERVER){await IS(s.id);continue}}}}}await DL(s,e),await IS(s.id),n.synced++}catch(c){n.failed++,await OL(s.id,{attempts:(s.attempts||0)+1,last_error:c.message,last_attempt:new Date().toISOString()})}}finally{Og=!1}return n},kL=async(e,t,r)=>{try{switch(t){case Zt.UPDATE_AREA_STATUS:return e.getArea?await e.getArea(r.areaId):null;default:return null}}catch{return null}},DL=async(e,t)=>{const{type:r,payload:n}=e;switch(r){case Zt.UPDATE_AREA_STATUS:return t.updateAreaStatus(n.areaId,n.status);case Zt.CREATE_TM_TICKET:{const i=await t.createTMTicket(n.ticket);return n.workers?.length>0&&await t.addTMWorkers(i.id,n.workers),n.items?.length>0&&await t.addTMItems(i.id,n.items),i}case Zt.SAVE_CREW_CHECKIN:return t.saveCrewCheckin(n.projectId,n.workers,n.checkInDate);case Zt.SUBMIT_DAILY_REPORT:return await t.saveDailyReport(n.projectId,n.reportData),t.submitDailyReport(n.projectId,n.submittedBy);case Zt.SEND_MESSAGE:return t.sendMessage(n.projectId,n.senderType,n.senderName,n.content);case Zt.CREATE_MATERIAL_REQUEST:return t.createMaterialRequest(n.projectId,n.items,n.requestedBy,n.neededBy,n.priority,n.notes);default:throw new Error(`Unknown action type: ${r}`)}},Ub="",NN="",P=!!Ub,T=P?nN(Ub,NN):null,Ad={slowQueryThreshold:200,enableSupabase:P},Ke={query(e,t){const r={type:"query",operation:e,duration_ms:t.duration,rows_returned:t.rows,company_id:t.company_id||null,project_id:t.project_id||null,user_id:t.user_id||null,timestamp:new Date().toISOString()};Ad.enableSupabase&&t.duration>=Ad.slowQueryThreshold&&Cg("query",r)},error(e,t){const r={type:"error",category:e,severity:t.severity||"error",error_code:t.code||null,message:t.message,company_id:t.company_id||null,user_id:t.user_id||null,project_id:t.project_id||null,operation:t.operation||null,context:t.extra||{},timestamp:new Date().toISOString()};Ad.enableSupabase&&Cg("error",r)},storage(e,t){const r={type:"storage",operation:e,company_id:t.company_id||null,project_id:t.project_id||null,file_size_bytes:t.size||0,duration_ms:t.duration||0,success:t.success!==!1,error_message:t.error||null,timestamp:new Date().toISOString()};Ad.enableSupabase&&(!r.success||r.duration_ms>5e3)&&Cg("storage",r)},activity(e,t){}};async function Cg(e,t){if(T)try{e==="error"?await T.rpc("log_error",{p_severity:t.severity,p_category:t.category,p_message:t.message,p_company_id:t.company_id,p_user_id:t.user_id,p_project_id:t.project_id,p_operation:t.operation,p_error_code:t.error_code,p_context:t.context||{}}):e==="query"&&await T.rpc("log_query_metric",{p_operation:t.operation,p_duration_ms:t.duration_ms,p_rows_returned:t.rows_returned,p_company_id:t.company_id,p_project_id:t.project_id,p_user_id:t.user_id,p_context:{}})}catch{}}Ke.wrapQuery=function(e,t){return async function(...r){const n=performance.now();try{const i=await t.apply(this,r),c={duration:Math.round(performance.now()-n),rows:Array.isArray(i)?i.length:void 0};return Ke.query(e,c),i}catch(i){const s=Math.round(performance.now()-n);throw Ke.error("database",{message:i.message,operation:e,severity:"error",extra:{duration:s}}),i}}};Ke.time=async function(e,t){const r=performance.now();try{const n=await t(),i=Math.round(performance.now()-r);return Ke.query(e,{duration:i}),n}catch(n){throw Ke.error("general",{message:n.message,operation:e}),n}};const wy="fieldsync_field_session";let gc=null;const Hc=()=>{if(gc)return gc;try{const e=sessionStorage.getItem(wy);if(e)return gc=JSON.parse(e),gc}catch{}return null},nf=e=>{gc=e,e?sessionStorage.setItem(wy,JSON.stringify(e)):sessionStorage.removeItem(wy)},jy=async()=>{const e=Hc();if(e?.token&&P)try{await T.rpc("invalidate_field_session",{p_session_token:e.token})}catch{}nf(null)};let ac=null;const Bb=()=>{const e=Hc();return!e?.token||!P?T:((!ac||ac._sessionToken!==e.token)&&(ac=nN(Ub,NN,{global:{headers:{"x-field-session":e.token}}}),ac._sessionToken=e.token),ac)},$i=()=>Hc()?.token?Bb():T,be=()=>P?Hc()?.token?Bb():T:null,Sy=()=>{const e=Hc();return!!(e?.token&&e?.projectId)},Ey="fieldsync_data",vf="fieldsync_user",KS={projects:[],areas:[],users:[],assignments:[]},Oe=()=>{try{const e=localStorage.getItem(Ey);return e?JSON.parse(e):KS}catch{return localStorage.removeItem(Ey),KS}},Ge=e=>{localStorage.setItem(Ey,JSON.stringify(e))},Nd=()=>{try{const e=localStorage.getItem(vf);return e?JSON.parse(e):null}catch{return localStorage.removeItem(vf),null}},kd=e=>{e?localStorage.setItem(vf,JSON.stringify(e)):localStorage.removeItem(vf)},TL={async createCOR(e,t=0){if(P){let r=e.cor_number;t>0&&(r=await this.getNextCORNumber(e.project_id));const{data:n,error:i}=await T.from("change_orders").insert({company_id:e.company_id,project_id:e.project_id,area_id:e.area_id||null,cor_number:r,title:e.title,description:e.description||"",scope_of_work:e.scope_of_work,period_start:e.period_start,period_end:e.period_end,status:"draft",labor_markup_percent:e.labor_markup_percent??1500,materials_markup_percent:e.materials_markup_percent??1500,equipment_markup_percent:e.equipment_markup_percent??1500,subcontractors_markup_percent:e.subcontractors_markup_percent??500,liability_insurance_percent:e.liability_insurance_percent??144,bond_percent:e.bond_percent??100,license_fee_percent:e.license_fee_percent??10,created_by:e.created_by||null}).select().single();if((i?.code==="23505"||i?.code==="PGRST116"||i?.status===409||i?.message?.includes("duplicate")||i?.message?.includes("unique_cor_number"))&&t<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${t+1})`),this.createCOR(e,t+1);if(i)throw i;return n}return null},async updateCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteCOR(e){if(P){const{error:t}=await T.from("change_orders").delete().eq("id",e);if(t)throw t}},async bulkUpdateCORGroup(e,t){if(P){const{error:r}=await T.from("change_orders").update({group_name:t,updated_at:new Date().toISOString()}).in("id",e);if(r)throw r.message?.includes("group_name")||r.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):r}},async getCORs(e,t={}){if(P){let r=T.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",e);t.status&&(r=r.eq("status",t.status)),t.area_id&&(r=r.eq("area_id",t.area_id)),t.date_start&&(r=r.gte("period_start",t.date_start)),t.date_end&&(r=r.lte("period_end",t.date_end)),r=r.order("created_at",{ascending:!1});const{data:n,error:i}=await r;if(i)throw i;return n}return[]},async getCORById(e){if(P){const{data:t,error:r}=await T.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",e).single();if(r)throw r;return t}return null},async getCORsByArea(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").select("*").eq("project_id",e).eq("area_id",t).order("created_at",{ascending:!1});if(n)throw n;return r}return[]},async getAssignableCORs(e){if(P){const t=be();if(!t)return[];const{data:r,error:n}=await t.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",e).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(n)throw n;return r||[]}return[]},async getNextCORNumber(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("cor_number").eq("project_id",e);if(r)throw r;if(t&&t.length>0){let n=0;for(const i of t){const s=i.cor_number?.match(/COR #(\d+)/);if(s){const c=parseInt(s[1]);c>n&&(n=c)}}return`COR #${n+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(e,t){if(P){const r=Math.round(t.regular_hours*t.regular_rate),n=Math.round(t.overtime_hours*t.overtime_rate),i=r+n,{data:s,error:c}=await T.from("change_order_labor").insert({change_order_id:e,labor_class:t.labor_class,wage_type:t.wage_type||"standard",regular_hours:t.regular_hours||0,overtime_hours:t.overtime_hours||0,regular_rate:t.regular_rate||0,overtime_rate:t.overtime_rate||0,regular_total:r,overtime_total:n,total:i,sort_order:t.sort_order||0,source_ticket_id:t.source_ticket_id||null}).select().single();if(c)throw c;return s}return null},async updateCORLaborItem(e,t){if(P){let r={...t};if(t.regular_hours!==void 0||t.regular_rate!==void 0||t.overtime_hours!==void 0||t.overtime_rate!==void 0){const{data:s}=await T.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",e).single(),c=t.regular_hours??s?.regular_hours??0,u=t.overtime_hours??s?.overtime_hours??0,m=t.regular_rate??s?.regular_rate??0,h=t.overtime_rate??s?.overtime_rate??0;r.regular_total=Math.round(c*m),r.overtime_total=Math.round(u*h),r.total=r.regular_total+r.overtime_total}const{data:n,error:i}=await T.from("change_order_labor").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORLaborItem(e){if(P){const{error:t}=await T.from("change_order_labor").delete().eq("id",e);if(t)throw t}},async addCORMaterialItem(e,t){if(P){const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_materials").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"each",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCORMaterialItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_materials").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_materials").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORMaterialItem(e){if(P){const{error:t}=await T.from("change_order_materials").delete().eq("id",e);if(t)throw t}},async addCOREquipmentItem(e,t){if(P){const n=["backup_sheet","invoice","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_equipment").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"day",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCOREquipmentItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_equipment").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_equipment").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCOREquipmentItem(e){if(P){const{error:t}=await T.from("change_order_equipment").delete().eq("id",e);if(t)throw t}},async addCORSubcontractorItem(e,t){if(P){const r=Math.round(t.quantity*t.unit_cost),{data:n,error:i}=await T.from("change_order_subcontractors").insert({change_order_id:e,description:t.description,quantity:t.quantity||1,unit:t.unit||"lump sum",unit_cost:t.unit_cost||0,total:r,source_type:t.source_type||"custom",source_reference:t.source_reference||null,sort_order:t.sort_order||0}).select().single();if(i)throw i;return n}return null},async updateCORSubcontractorItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_subcontractors").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORSubcontractorItem(e){if(P){const{error:t}=await T.from("change_order_subcontractors").delete().eq("id",e);if(t)throw t}},async addBulkLaborItems(e,t){if(P&&t.length>0){const r=be();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>{const m=Math.round(c.regular_hours*c.regular_rate),h=Math.round(c.overtime_hours*c.overtime_rate);return{change_order_id:e,labor_class:c.labor_class,wage_type:c.wage_type||"standard",regular_hours:c.regular_hours||0,overtime_hours:c.overtime_hours||0,regular_rate:c.regular_rate||0,overtime_rate:c.overtime_rate||0,regular_total:m,overtime_total:h,total:m+h,sort_order:c.sort_order??u,source_ticket_id:c.source_ticket_id||null}}),{data:i,error:s}=await r.from("change_order_labor").insert(n).select();if(s)throw s;return i}return[]},async addBulkMaterialItems(e,t){if(P&&t.length>0){const r=be();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",p=Math.round(Number(u.unit_cost)||0),g=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:g,unit:u.unit||"each",unit_cost:p,total:Math.round(g*p),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_materials").insert(i).select();if(c)throw c;return s}return[]},async addBulkEquipmentItems(e,t){if(P&&t.length>0){const r=be();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",p=Math.round(Number(u.unit_cost)||0),g=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:g,unit:u.unit||"day",unit_cost:p,total:Math.round(g*p),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_equipment").insert(i).select();if(c)throw c;return s}return[]},async addBulkSubcontractorItems(e,t){if(P&&t.length>0){const r=be();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>({change_order_id:e,company_name:c.company_name||"",description:c.description||"",quantity:c.quantity||1,unit:c.unit||"lump sum",unit_cost:c.unit_cost||c.total||c.amount||0,total:c.total||c.amount||0,source_type:c.source_type||"invoice",source_reference:c.source_reference||null,sort_order:c.sort_order??u})),{data:i,error:s}=await r.from("change_order_subcontractors").insert(n).select();if(s)throw s;return i}return[]},async clearCORLineItems(e){if(!P)return;const t=be();if(!t)throw new Error("Database client not available");try{const r=await Promise.all([t.from("change_order_labor").delete().eq("change_order_id",e),t.from("change_order_materials").delete().eq("change_order_id",e),t.from("change_order_equipment").delete().eq("change_order_id",e),t.from("change_order_subcontractors").delete().eq("change_order_id",e)]);for(const n of r)if(n.error)throw n.error}catch(r){throw console.error("Error clearing COR line items:",r),r}},async saveCORLineItems(e,{laborItems:t,materialItems:r,equipmentItems:n,subcontractorItems:i}){if(P){await this.clearCORLineItems(e);const s=await Promise.all([t?.length>0?this.addBulkLaborItems(e,t):[],r?.length>0?this.addBulkMaterialItems(e,r):[],n?.length>0?this.addBulkEquipmentItems(e,n):[],i?.length>0?this.addBulkSubcontractorItems(e,i):[]]);return{labor:s[0],materials:s[1],equipment:s[2],subcontractors:s[3]}}return null},async assignTicketToCOR(e,t){if(P){const{error:r}=await T.rpc("assign_ticket_to_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"assignTicketToCOR",extra:{ticketId:e,corId:t}}),r;return{ticket_id:e,change_order_id:t}}return null},async unassignTicketFromCOR(e,t){if(P){const{error:r}=await T.rpc("unassign_ticket_from_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"unassignTicketFromCOR",extra:{ticketId:e,corId:t}}),r}},async checkTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("check_ticket_cor_integrity");if(t)throw t;return e||[]}return[]},async fixTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("fix_ticket_cor_integrity");if(t)throw t;return e}return 0},async getTicketsForCOR(e){if(P){const{data:t,error:r}=await T.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",e);if(r)throw r;return t}return[]},async getUnassignedTickets(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(r)throw r;return t}return[]},async importTicketDataToCOR(e,t,r,n,i){if(P){const s=be();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",e).single();if(u)throw u;const{data:m,error:h}=await s.from("labor_rates").select("*").eq("company_id",r).eq("work_type",n||"demolition").eq("job_type",i||"standard");if(h)throw h;const p={};m?.forEach(S=>{p[S.role.toLowerCase()]=S});const g={};c.t_and_m_workers?.forEach(S=>{const O=(S.role||"laborer").toLowerCase();g[O]||(g[O]={regular_hours:0,overtime_hours:0}),g[O].regular_hours+=parseFloat(S.hours)||0,g[O].overtime_hours+=parseFloat(S.overtime_hours)||0});const _=Object.entries(g).map(([S,O])=>{const C=p[S]||{regular_rate:0,overtime_rate:0},A=Math.round((parseFloat(C.regular_rate)||0)*100),k=Math.round((parseFloat(C.overtime_rate)||0)*100);return{labor_class:S.charAt(0).toUpperCase()+S.slice(1),wage_type:i||"standard",regular_hours:O.regular_hours,overtime_hours:O.overtime_hours,regular_rate:A,overtime_rate:k,source_ticket_id:e}});_.length>0&&await this.addBulkLaborItems(t,_);const x=[],w=[];c.t_and_m_items?.forEach(S=>{const O=S.custom_name||S.materials_equipment?.name||"Unknown Item",C=S.custom_category||S.materials_equipment?.category||"Other",A=S.materials_equipment?.unit||"each",k=Math.round((parseFloat(S.materials_equipment?.cost_per_unit)||0)*100),D={description:O,quantity:S.quantity||1,unit:A,unit_cost:k,source_type:"backup_sheet",source_ticket_id:e};C==="Equipment"?w.push(D):x.push(D)}),x.length>0&&await this.addBulkMaterialItems(t,x),w.length>0&&await this.addBulkEquipmentItems(t,w);const{error:j}=await s.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",t).eq("ticket_id",e);if(j)throw j;return Ke.activity("cor_import_success",{ticket_id:e,cor_id:t,labor_count:_.length,material_count:x.length,equipment_count:w.length}),{laborItems:_,materialItems:x,equipmentItems:w}}return null},async reimportTicketDataToCOR(e,t,r,n,i){if(P){const s=be();if(!s)throw new Error("Database client not available");return await s.from("change_order_labor").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_materials").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_equipment").delete().eq("change_order_id",t).eq("source_ticket_id",e),this.importTicketDataToCOR(e,t,r,n,i)}return null},async markImportFailed(e,t,r="Import failed"){if(P){const n=be();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:r}).eq("change_order_id",t).eq("ticket_id",e);if(i)throw Ke.error("database",{message:i.message,operation:"markImportFailed",extra:{ticketId:e,corId:t}}),i;Ke.error("cor_import_failed",{ticket_id:e,cor_id:t,error:r})}},async getTicketsNeedingImport(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",e).eq("change_order_ticket_associations.import_status","failed");if(r)throw r;return t||[]}return[]},async getTicketImportStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",e).eq("change_order_id",t).single();if(n&&n.code!=="PGRST116")throw n;return r}return null},async recalculateCOR(e){if(P){const{error:t}=await T.rpc("recalculate_cor_totals",{cor_id:e});if(t)throw t;return this.getCORById(e)}return null},async updateCORMarkupPercentages(e,t){if(P){const r={};t.labor!==void 0&&(r.labor_markup_percent=t.labor),t.materials!==void 0&&(r.materials_markup_percent=t.materials),t.equipment!==void 0&&(r.equipment_markup_percent=t.equipment),t.subcontractors!==void 0&&(r.subcontractors_markup_percent=t.subcontractors);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async updateCORFeePercentages(e,t){if(P){const r={};t.liabilityInsurance!==void 0&&(r.liability_insurance_percent=t.liabilityInsurance),t.bond!==void 0&&(r.bond_percent=t.bond),t.licenseFee!==void 0&&(r.license_fee_percent=t.licenseFee);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async submitCORForApproval(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}return null},async approveCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"approved",approved_by:t,approved_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async rejectCOR(e,t=null){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"rejected",rejection_reason:t}).eq("id",e).select().single();if(n)throw n;return r}return null},async markCORAsBilled(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"billed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async closeCOR(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"closed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async saveCORSignature(e,t,r){if(P){const{data:n,error:i}=await T.from("change_orders").update({gc_signature_data:t,gc_signature_name:r,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",e).select().single();if(i)throw i;return n}return null},async getCORStats(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("status, cor_total").eq("project_id",e);if(r)throw r;const n={total_cors:t.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return t.forEach(i=>{switch(i.status){case"draft":n.draft_count++;break;case"pending_approval":n.pending_count++,n.total_pending_value+=i.cor_total||0;break;case"approved":n.approved_count++,n.total_approved_value+=i.cor_total||0;break;case"rejected":n.rejected_count++;break;case"billed":case"closed":n.billed_count++,n.total_billed_value+=i.cor_total||0;break}}),n}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(e,t){return P?T.channel(`change_orders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCorTickets(e,t){return P?T.channel(`cor-tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${e}`},t).subscribe():null},async getCORLog(e){if(P){const{data:t,error:r}=await T.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",e).order("log_number",{ascending:!0});if(r)throw console.error("Error fetching COR log:",r),r;return(t||[]).map(n=>({id:n.id,logNumber:n.log_number,dateSentToClient:n.date_sent_to_client,ceNumber:n.ce_number,comments:n.comments,createdAt:n.created_at,updatedAt:n.updated_at,changeOrder:{id:n.change_order?.id,corNumber:n.change_order?.cor_number,title:n.change_order?.title,corTotal:n.change_order?.cor_total,status:n.change_order?.status,createdAt:n.change_order?.created_at,approvedAt:n.change_order?.approved_at,approvedBy:n.change_order?.approved_by}}))}return[]},async updateCORLogEntry(e,t){if(P){const r={updated_at:new Date().toISOString()};t.dateSentToClient!==void 0&&(r.date_sent_to_client=t.dateSentToClient||null),t.ceNumber!==void 0&&(r.ce_number=t.ceNumber||null),t.comments!==void 0&&(r.comments=t.comments||null);const{data:n,error:i}=await T.from("cor_log_entries").update(r).eq("id",e).select().single();if(i)throw console.error("Error updating COR log entry:",i),i;return n}return null},async updateChangeOrderStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw console.error("Error updating change order status:",n),n;return r}return null},subscribeToCORLog(e,t){return P?T.channel(`cor-log:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocuments(e,t){return P?T.channel(`documents:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"documents",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocumentFolders(e,t){return P?T.channel(`document_folders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"document_folders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialsEquipment(e,t){return P?T.channel(`materials_equipment:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToLaborRates(e,t){return P?T.channel(`labor_rates:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToProject(e,t){return P?T.channel(`project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${e}`},t).subscribe():null},subscribeToPunchList(e,t){return P?T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},t).subscribe():null},async createSignatureRequest(e,t,r,n,i=null,s=null){if(P){const c=be();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.rpc("generate_signature_token");if(m)throw m;const{data:h,error:p}=await c.from("signature_requests").insert({document_type:e,document_id:t,company_id:r,project_id:n,signature_token:u,expires_at:s,created_by:i}).select().single();if(p)throw p;return h}return null},async getSignatureRequestByToken(e){if(P){const t=be();if(!t)throw new Error("Database client not available");await t.rpc("increment_signature_view_count",{token:e});const{data:r,error:n}=await t.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",e).single();if(n)throw n;return r}return null},async getSignatureRequestsForDocument(e,t){if(P){const r=be();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",e).eq("document_id",t).order("created_at",{ascending:!1});if(i)throw i;return n||[]}return[]},async addSignature(e,t,r){if(P){const n=be();if(!n)throw new Error("Database client not available");const{data:i,error:s}=await n.from("signatures").insert({signature_request_id:e,signature_slot:t,signature_image:r.signature,signer_name:r.signerName,signer_title:r.signerTitle||null,signer_company:r.signerCompany||null,signed_at:r.signedAt||new Date().toISOString(),ip_address:r.ipAddress||null,user_agent:r.userAgent||null}).select().single();if(s)throw s;return i}return null},async syncSignatureToDocument(e,t){if(!P)return null;const r=be();if(!r)throw new Error("Database client not available");const{document_type:n,document_id:i}=t,s=e.signature_slot,c={};s===1?(c.gc_signature_data=e.signature_image,c.gc_signature_name=e.signer_name,c.gc_signature_title=e.signer_title,c.gc_signature_company=e.signer_company,c.gc_signature_date=e.signed_at,c.gc_signature_ip=e.ip_address):s===2&&(c.client_signature_data=e.signature_image,c.client_signature_name=e.signer_name,c.client_signature_title=e.signer_title,c.client_signature_company=e.signer_company,c.client_signature_date=e.signed_at,c.client_signature_ip=e.ip_address);const u=n==="cor"?"change_orders":"t_and_m_tickets",{data:m,error:h}=await r.from(u).update(c).eq("id",i).select().single();if(h)throw h;return m},async revokeSignatureRequest(e){if(P){const t=be();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("signature_requests").update({status:"revoked"}).eq("id",e).select().single();if(n)throw n;return r}return null},async getDocumentForSigning(e,t){if(!P)return null;const r=be();if(!r)throw new Error("Database client not available");if(e==="cor"){const{data:n,error:i}=await r.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",t).single();if(i)throw i;return n}else if(e==="tm_ticket"){const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (
              id,
              name,
              unit,
              cost_per_unit,
              category
            )
          )
        `).eq("id",t).single();if(i)throw i;return n}return null},async getProjectCosts(e){if(P){const{data:r,error:n}=await T.from("project_costs").select("*").eq("project_id",e).order("cost_date",{ascending:!1});return n?(console.error("Error fetching project costs:",n),[]):r||[]}return(Oe().projectCosts||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.cost_date)-new Date(r.cost_date))},async addProjectCost(e,t,r){const n={project_id:e,company_id:t,category:r.category,description:r.description,amount:parseFloat(r.amount),cost_date:r.cost_date||new Date().toISOString().split("T")[0],notes:r.notes||null,created_by:r.created_by||null};if(P){const{data:c,error:u}=await T.from("project_costs").insert(n).select().single();if(u)throw console.error("Error adding project cost:",u),u;return c}const i=Oe();i.projectCosts||(i.projectCosts=[]);const s={...n,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i.projectCosts.push(s),Ge(i),s},async updateProjectCost(e,t){const r={category:t.category,description:t.description,amount:parseFloat(t.amount),cost_date:t.cost_date,notes:t.notes||null,updated_at:new Date().toISOString()};if(P){const{data:s,error:c}=await T.from("project_costs").update(r).eq("id",e).select().single();if(c)throw console.error("Error updating project cost:",c),c;return s}const n=Oe();if(!n.projectCosts)return null;const i=n.projectCosts.findIndex(s=>s.id===e);return i===-1?null:(n.projectCosts[i]={...n.projectCosts[i],...r},Ge(n),n.projectCosts[i])},async deleteProjectCost(e){if(P){const{error:r}=await T.from("project_costs").delete().eq("id",e);if(r)throw console.error("Error deleting project cost:",r),r;return!0}const t=Oe();return t.projectCosts&&(t.projectCosts=t.projectCosts.filter(r=>r.id!==e),Ge(t)),!0},async getProjectCostsSummary(e){const t=await this.getProjectCosts(e),r={};let n=0;return t.forEach(i=>{const s=parseFloat(i.amount)||0;n+=s,r[i.category]||(r[i.category]={category:i.category,total:0,count:0,items:[]}),r[i.category].total+=s,r[i.category].count++,r[i.category].items.push(i)}),Object.values(r).forEach(i=>{i.percentage=n>0?i.total/n*100:0}),{totalCost:n,byCategory:r,itemCount:t.length}},async getNextInvoiceNumber(e){if(P){const{data:t,error:r}=await T.rpc("get_next_invoice_number",{p_company_id:e});return r?(console.error("Error getting next invoice number:",r),this._generateLocalInvoiceNumber(e)):t}return this._generateLocalInvoiceNumber(e)},async _generateLocalInvoiceNumber(e){const r=(await this.getCompanyInvoices(e)).reduce((n,i)=>{const s=i.invoice_number?.match(/^INV-(\d+)$/);if(s){const c=parseInt(s[1],10);return c>n?c:n}return n},0);return`INV-${String(r+1).padStart(4,"0")}`},async getBillableItems(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("id, cor_number, title, cor_total, status, approved_at").eq("project_id",e).eq("status","approved").order("cor_number",{ascending:!0});r&&console.error("Error fetching billable CORs:",r);const{data:n,error:i}=await T.from("t_and_m_tickets").select("id, work_date, ce_pco_number, change_order_value, status, client_signature_date").eq("project_id",e).eq("status","approved").not("client_signature_data","is",null).order("work_date",{ascending:!0});return i&&console.error("Error fetching billable T&M tickets:",i),{cors:t||[],tickets:n||[]}}return{cors:[],tickets:[]}},async getProjectInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("project_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching project invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.project_id===e)},async getCompanyInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select("*").eq("company_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching company invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.company_id===e)},async createInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").insert({project_id:e.project_id,company_id:e.company_id,invoice_number:e.invoice_number,invoice_date:e.invoice_date,due_date:e.due_date,status:e.status||"draft",retention_percent:e.retention_percent||0,bill_to_name:e.bill_to_name,bill_to_address:e.bill_to_address,bill_to_contact:e.bill_to_contact,notes:e.notes,terms:e.terms||"Net 30",created_by:e.created_by}).select().single();if(s)throw console.error("Error creating invoice:",s),s;if(t&&t.length>0){const c=t.map((m,h)=>({invoice_id:i.id,item_type:m.item_type,reference_id:m.reference_id,reference_number:m.reference_number,description:m.description,amount:m.amount,sort_order:h})),{error:u}=await T.from("invoice_items").insert(c);if(u)throw console.error("Error creating invoice items:",u),await T.from("invoices").delete().eq("id",i.id),u}return this.getInvoice(i.id)}const r=Oe();r.invoices||(r.invoices=[]);const n={...e,id:Xr(),created_at:new Date().toISOString(),invoice_items:t||[]};return r.invoices.push(n),Ge(r),n},async getInvoice(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",e).single();if(n)throw console.error("Error fetching invoice:",n),n;return r}return(Oe().invoices||[]).find(r=>r.id===e)},async updateInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").update(t).eq("id",e).select().single();if(s)throw console.error("Error updating invoice:",s),s;return i}const r=Oe(),n=(r.invoices||[]).findIndex(i=>i.id===e);return n>=0?(r.invoices[n]={...r.invoices[n],...t},Ge(r),r.invoices[n]):null},async markInvoiceSent(e){return this.updateInvoice(e,{status:"sent",sent_at:new Date().toISOString()})},async recordInvoicePayment(e,t){const r=await this.getInvoice(e);if(!r)throw new Error("Invoice not found");const n=(r.amount_paid||0)+t,i=n>=r.total;return this.updateInvoice(e,{amount_paid:n,status:i?"paid":"partial",paid_at:i?new Date().toISOString():null})},async deleteInvoice(e){if(P){const{error:r}=await T.from("invoices").delete().eq("id",e).eq("status","draft");if(r)throw console.error("Error deleting invoice:",r),r;return!0}const t=Oe();return t.invoices=(t.invoices||[]).filter(r=>r.id!==e),Ge(t),!0},async markItemsBilled(e=[],t=[]){if(P){if(e.length>0){const{error:r}=await T.from("change_orders").update({status:"billed"}).in("id",e);r&&console.error("Error marking CORs as billed:",r)}if(t.length>0){const{error:r}=await T.from("t_and_m_tickets").update({status:"billed"}).in("id",t);r&&console.error("Error marking T&M tickets as billed:",r)}}}},PL={async getCompanyEquipment(e,t=!0){if(!P)return console.warn("Supabase not configured"),[];let r=T.from("equipment").select("*").eq("company_id",e).order("name");t&&(r=r.eq("is_active",!0));const{data:n,error:i}=await r;return i?(console.error("Error fetching company equipment:",i),[]):n||[]},async createEquipment(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("equipment").insert(e).select().single();if(r)throw console.error("Error creating equipment:",r),r;return t},async updateEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("equipment").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating equipment:",n),n;return r},async deactivateEquipment(e){return this.updateEquipment(e,{is_active:!1})},async getProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).order("start_date",{ascending:!1});return r?(console.error("Error fetching project equipment:",r),[]):t||[]},async getActiveProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).is("end_date",null).order("start_date",{ascending:!1});return r?(console.error("Error fetching active project equipment:",r),[]):t||[]},async addEquipmentToProject(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("project_equipment").insert(e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(r)throw console.error("Error adding equipment to project:",r),r;return t},async updateProjectEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("project_equipment").update(t).eq("id",e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(n)throw console.error("Error updating project equipment:",n),n;return r},async markEquipmentReturned(e,t=null){return this.updateProjectEquipment(e,{end_date:t||new Date().toISOString().split("T")[0]})},async removeEquipmentFromProject(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("project_equipment").delete().eq("id",e);if(t)throw console.error("Error removing project equipment:",t),t;return!0},calculateProjectEquipmentCost(e){const t=new Date;return t.setHours(0,0,0,0),e.reduce((r,n)=>{const i=new Date(n.start_date);i.setHours(0,0,0,0);let s;n.end_date?(s=new Date(n.end_date),s.setHours(0,0,0,0)):s=t;const c=Math.max(1,Math.floor((s-i)/(1e3*60*60*24))+1);return r+n.daily_rate*c},0)},calculateDaysOnSite(e,t=null){const r=new Date(e);r.setHours(0,0,0,0);let n;return t?n=new Date(t):n=new Date,n.setHours(0,0,0,0),Math.max(1,Math.floor((n-r)/(1e3*60*60*24))+1)}},ML={async getNextDrawNumber(e){if(!P)return console.warn("Supabase not configured"),1;const{data:t,error:r}=await T.from("draw_requests").select("draw_number").eq("project_id",e).order("draw_number",{ascending:!1}).limit(1).single();return r&&r.code!=="PGRST116"&&console.error("Error getting next draw number:",r),(t?.draw_number||0)+1},async getPreviousBillingTotals(e){if(!P)return console.warn("Supabase not configured"),{totalBilled:0,totalRetention:0};const{data:t,error:r}=await T.from("draw_requests").select("current_billing, retention_held").eq("project_id",e).in("status",["submitted","approved","paid"]);if(r)return console.error("Error getting previous billing totals:",r),{totalBilled:0,totalRetention:0};const n=(t||[]).reduce((s,c)=>s+(c.current_billing||0),0),i=t?.length>0?Math.max(...t.map(s=>s.retention_held||0)):0;return{totalBilled:n,totalRetention:i}},async getProjectDrawRequests(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("draw_requests").select("*").eq("project_id",e).order("draw_number",{ascending:!1});return r?(console.error("Error fetching draw requests:",r),[]):t||[]},async getDrawRequest(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("draw_requests").select(`
        *,
        draw_request_items (
          *
        )
      `).eq("id",e).single();return r?(console.error("Error fetching draw request:",r),null):t},async createDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").insert(e).select().single();if(n)throw console.error("Error creating draw request:",n),n;if(t&&t.length>0){const i=t.map((c,u)=>({...c,draw_request_id:r.id,sort_order:u})),{error:s}=await T.from("draw_request_items").insert(i);s&&console.error("Error creating draw request items:",s)}return this.getDrawRequest(r.id)},async updateDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating draw request:",n),n;return r},async updateDrawRequestStatus(e,t){const r={status:t};return t==="submitted"?r.submitted_at=new Date().toISOString():t==="approved"?r.approved_at=new Date().toISOString():t==="paid"&&(r.paid_at=new Date().toISOString()),this.updateDrawRequest(e,r)},async updateDrawRequestItems(e,t){if(!P)return console.warn("Supabase not configured"),!1;const{error:r}=await T.from("draw_request_items").delete().eq("draw_request_id",e);if(r)throw console.error("Error deleting old draw request items:",r),r;if(t&&t.length>0){const n=t.map((s,c)=>({...s,draw_request_id:e,sort_order:c})),{error:i}=await T.from("draw_request_items").insert(n);if(i)throw console.error("Error inserting draw request items:",i),i}return!0},async deleteDrawRequest(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("draw_requests").delete().eq("id",e);if(t)throw console.error("Error deleting draw request:",t),t;return!0},async getScheduleOfValues(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("areas").select("id, name, square_footage, price_per_sqft").eq("project_id",e).order("created_at");return r?(console.error("Error fetching schedule of values:",r),[]):(t||[]).map((n,i)=>({area_id:n.id,item_number:String(i+1),description:n.name,scheduled_value:Math.round((n.square_footage||0)*(n.price_per_sqft||0)*100)}))},async getPreviousDrawItems(e){if(!P)return console.warn("Supabase not configured"),{};const{data:t,error:r}=await T.from("draw_requests").select("id").eq("project_id",e).in("status",["submitted","approved","paid"]).order("draw_number",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")return console.error("Error fetching latest draw:",r),{};if(!t)return{};const{data:n,error:i}=await T.from("draw_request_items").select("area_id, total_percent, total_amount").eq("draw_request_id",t.id);return i?(console.error("Error fetching previous draw items:",i),{}):(n||[]).reduce((s,c)=>(c.area_id&&(s[c.area_id]={previous_percent:c.total_percent||0,previous_amount:c.total_amount||0}),s),{})},calculatePercentFromAmount(e,t){return!t||t===0?0:Math.round(e/t*1e4)},calculateAmountFromPercent(e,t){return Math.round(e/1e4*t)}};typeof window<"u"&&ni().catch(e=>console.error("Failed to init offline DB:",e));const Ag=()=>{const e="fieldsync_device_id";let t=localStorage.getItem(e);return t||(t=crypto.randomUUID(),localStorage.setItem(e,t)),t},af={async signUp(e,t,r,n){if(P){const{data:i,error:s}=await T.auth.signUp({email:e,password:t,options:{data:{name:r,role:n}}});if(s)throw s;return i}else{const i=Oe(),s={id:crypto.randomUUID(),email:e,name:r,role:n,created_at:new Date().toISOString()};return i.users.push(s),Ge(i),kd(s),{user:s}}},async signIn(e,t){if(P){const{data:r,error:n}=await T.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r}else{const n=Oe().users.find(i=>i.email===e);if(!n)throw new Error("User not found");return kd(n),{user:n}}},async signOut(){if(P){const{error:e}=await T.auth.signOut();if(e)throw e}else kd(null)},async getUser(){if(P){const{data:{user:e}}=await T.auth.getUser();return e}else return Nd()},async getProfile(){if(P){const{data:{user:e}}=await T.auth.getUser();if(!e)return null;const{data:t,error:r}=await T.from("users").select("*").eq("id",e.id).single();return r?{id:e.id,email:e.email,name:e.user_metadata?.name||"",role:e.user_metadata?.role||"foreman"}:t}else return Nd()},async updateRole(e,t){if(P){const{data:r,error:n}=await T.from("users").update({role:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.users.find(i=>i.id===e);return n&&(n.role=t,Ge(r),Nd()?.id===e&&kd(n)),n}},onAuthStateChange(e){if(P)return T.auth.onAuthStateChange(e);{const t=Nd();return e(t?"SIGNED_IN":"SIGNED_OUT",{user:t}),{data:{subscription:{unsubscribe:()=>{}}}}}}},ye={async getProjects(e=null,t=!1){if(P){if(!qn()){const n=await US(e);return t?n:n.filter(i=>i.status!=="archived")}const r=performance.now();try{let n=T.from("projects").select("*").order("created_at",{ascending:!1});e&&(n=n.eq("company_id",e)),t||(n=n.eq("status","active"));const{data:i,error:s}=await n,c=Math.round(performance.now()-r);if(Ke.query("getProjects",{duration:c,rows:i?.length,company_id:e}),s){Ke.error("database",{message:s.message,operation:"getProjects",company_id:e});const u=await US(e);if(u.length>0)return u;throw s}return i?.length>0&&CL(i).catch(u=>console.error("Failed to cache projects:",u)),i}catch(n){throw Ke.error("database",{message:n.message,operation:"getProjects",company_id:e}),n}}else{const r=Oe().projects;return t?r:r.filter(n=>n.status!=="archived")}},async getProjectsPaginated(e,{page:t=0,limit:r=25,status:n="active"}={}){if(P){const c=performance.now();try{let u=T.from("projects").select("*",{count:"exact"}).eq("company_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n!=="all"&&(u=u.eq("status",n));const{data:m,error:h,count:p}=await u,g=Math.round(performance.now()-c);if(Ke.query("getProjectsPaginated",{duration:g,rows:m?.length,page:t,company_id:e}),h)throw h;return{projects:m||[],totalCount:p||0,hasMore:(t+1)*r<(p||0),page:t,limit:r}}catch(u){throw Ke.error("database",{message:u.message,operation:"getProjectsPaginated",company_id:e}),u}}const i=Oe().projects.filter(c=>c.company_id===e&&(n==="all"||c.status===n)),s=t*r;return{projects:i.slice(s,s+r),totalCount:i.length,hasMore:s+r<i.length,page:t,limit:r}},async getProjectsWithSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!1}),i=Math.round(performance.now()-t);if(Ke.query("getProjectsWithSummary",{duration:i,rows:r?.length,company_id:e}),n)throw n;return(r||[]).map(s=>({...s,areaCount:s.areas?.[0]?.count||0,ticketCount:s.tickets?.[0]?.count||0,pendingTicketCount:0,reportCount:s.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,daily_reports:void 0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectsWithSummary",company_id:e}),this.getProjects(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getProjectDashboardSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.rpc("get_project_dashboard_summary",{p_company_id:e}),i=Math.round(performance.now()-t);if(Ke.query("getProjectDashboardSummary",{duration:i,rows:r?.length,company_id:e}),n){if(n.message?.includes("function")||n.code==="42883")return this.getProjectsWithSummary(e);throw n}return(r||[]).map(s=>({id:s.project_id,name:s.project_name,status:s.project_status,job_number:s.project_number,address:s.project_address,pin:s.project_pin,created_at:s.created_at,start_date:s.start_date,end_date:s.end_date,contract_value:Number(s.contract_value)||0,work_type:s.work_type||"demolition",job_type:s.job_type||"standard",general_contractor:s.general_contractor||"",areaCount:Number(s.total_areas)||0,completedAreas:Number(s.completed_areas)||0,inProgressAreas:Number(s.in_progress_areas)||0,pendingAreas:Number(s.pending_areas)||0,ticketCount:Number(s.total_tickets)||0,pendingTicketCount:Number(s.pending_tickets)||0,submittedTicketCount:Number(s.submitted_tickets)||0,approvedTicketCount:Number(s.approved_tickets)||0,totalLaborHours:Number(s.total_labor_hours)||0,todayLaborHours:Number(s.today_labor_hours)||0,todayWorkerCount:Number(s.today_worker_count)||0,lastActivityAt:s.last_activity_at,dailyReportsThisWeek:Number(s.daily_reports_this_week)||0,corCount:Number(s.cor_count)||0,pendingCorCount:Number(s.pending_cor_count)||0,disposalLoadsToday:Number(s.disposal_loads_today)||0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectDashboardSummary",company_id:e}),this.getProjectsWithSummary(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getArchivedProjects(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("company_id",e).eq("status","archived").order("archived_at",{ascending:!1});if(r)throw r;return t}else return Oe().projects.filter(t=>t.status==="archived")},async getProjectCount(e){if(P){const{count:t,error:r}=await T.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",e).in("status",["active","archived"]);if(r)throw r;return t||0}else return Oe().projects.filter(r=>r.company_id===e&&r.status!=="deleted").length},async universalSearch(e,t,r=10){if(!P||!t?.trim())return{projects:[],tickets:[],cors:[],workers:[]};const n=t.trim().toLowerCase(),i={projects:[],tickets:[],cors:[],workers:[]};try{const{data:s}=await T.from("projects").select("id, name, job_number, address, status").eq("company_id",e).eq("status","active").or(`name.ilike.%${n}%,job_number.ilike.%${n}%,address.ilike.%${n}%`).limit(r);i.projects=s||[];const{data:c}=await T.from("t_and_m_tickets").select(`
          id, notes, work_date, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).ilike("notes",`%${n}%`).order("work_date",{ascending:!1}).limit(r);i.tickets=(c||[]).map(p=>({...p,projectName:p.projects?.name||"Unknown Project"}));const{data:u}=await T.from("change_orders").select(`
          id, cor_number, title, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).or(`title.ilike.%${n}%,cor_number.ilike.%${n}%`).order("created_at",{ascending:!1}).limit(r);i.cors=(u||[]).map(p=>({...p,projectName:p.projects?.name||"Unknown Project"}));const{data:m}=await T.from("crew_checkins").select(`
          workers,
          project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).order("check_in_date",{ascending:!1}).limit(50),h=new Map;return(m||[]).forEach(p=>{(p.workers||[]).forEach(g=>{if(g.name.toLowerCase().includes(n)){const _=g.name.toLowerCase();h.has(_)||h.set(_,{name:g.name,role:g.role,projectName:p.projects?.name,lastProject:p.projects})}})}),i.workers=Array.from(h.values()).slice(0,r),i}catch(s){return console.error("Universal search error:",s),i}},async archiveProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="archived",r.archived_at=new Date().toISOString(),Ge(t)),r}},async getProjectStorageStats(e){if(!P)return{photoCount:0,estimatedMB:0};const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);if(r)throw r;let n=0;const i=[];t?.forEach(c=>{c.photos&&Array.isArray(c.photos)&&(n+=c.photos.length,i.push(...c.photos))});const s=n*1.5;return{photoCount:n,estimatedMB:s,photoUrls:i}},async archiveProjectDeep(e,t){if(!P)return null;const{photoUrls:r}=await this.getProjectStorageStats(e);if(r.length>0){const s=r.map(c=>{if(!c)return null;if(c.startsWith("http"))try{const m=new URL(c).pathname.match(/\/tm-photos\/(.+)$/);return m?m[1]:null}catch{return null}return c}).filter(Boolean);if(s.length>0)for(let c=0;c<s.length;c+=100){const u=s.slice(c,c+100);await T.storage.from("tm-photos").remove(u)}}await T.from("t_and_m_tickets").update({photos:[]}).eq("project_id",e);const{data:n,error:i}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",e).select().single();if(i)throw i;return{...n,photosDeleted:r.length}},async restoreProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"active",archived_at:null}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="active",r.archived_at=null,Ge(t)),r}},async getProject(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("id",e).single();if(r)throw r;return t}else return Oe().projects.find(t=>t.id===e)},async createProject(e){if(P){const{data:t,error:r}=await T.from("projects").insert({...e,status:"active"}).select().single();if(r)throw console.error("Supabase createProject error:",r.message,r.details,r.hint),r;return t}else{const t=Oe(),r={...e,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return t.projects.push(r),Ge(t),r}},async getProjectByPin(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("pin",e).eq("status","active").single();return r?null:t}else return Oe().projects.find(r=>r.pin===e&&r.status==="active")||null},async getProjectByPinAndCompany(e,t){if(P){const{data:r,error:n}=await T.from("projects").select("*").eq("pin",e).eq("company_id",t).eq("status","active").single();return n?null:r}else return Oe().projects.find(n=>n.pin===e&&n.company_id===t&&n.status==="active")||null},async getProjectByPinSecure(e,t){if(P){const r=`pin_attempts_${t}`,n=`pin_lockout_${t}`,i=5,s=300*1e3,c=localStorage.getItem(n);if(c&&Date.now()<parseInt(c)){const w=parseInt(c)-Date.now(),j=Math.ceil(w/6e4);return{success:!1,rateLimited:!0,project:null,error:`Too many attempts. Please try again in ${j} minute${j>1?"s":""}.`}}const u=Ag(),{data:m,error:h}=await T.rpc("validate_pin_and_create_session",{p_pin:e,p_company_code:t,p_device_id:u,p_ip_address:null});if(h)return console.warn("[PIN Auth] RPC unavailable, using direct PIN lookup:",h.message),await this._pinFallbackDirectQuery(e,t,r,n,i,s);if(!m||m.length===0)return{success:!1,rateLimited:!1,project:null};const p=m[0];if(p.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(p.error_code==="INVALID_COMPANY"||p.error_code==="INVALID_PIN"){let w=parseInt(localStorage.getItem(r)||"0");return w++,localStorage.setItem(r,w.toString()),w>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}if(!p.success||!p.project_id)return{success:!1,rateLimited:!1,project:null};localStorage.removeItem(`pin_attempts_${t}`),localStorage.removeItem(`pin_lockout_${t}`),nf({token:p.session_token,projectId:p.project_id,companyId:p.company_id,projectName:p.project_name,companyName:p.company_name,createdAt:new Date().toISOString()});const g=Bb(),{data:_,error:x}=await g.from("projects").select("*").eq("id",p.project_id).single();return{success:!0,rateLimited:!1,sessionToken:p.session_token,project:_||{id:p.project_id,name:p.project_name,company_id:p.company_id,status:"active"}}}else{const r=Oe(),i=(r.companies||[]).find(c=>c.code===t);if(!i)return{success:!1,rateLimited:!1,project:null};const s=r.projects.find(c=>c.pin===e&&c.company_id===i.id&&c.status==="active");if(s){const c=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;nf({token:c,projectId:s.id,companyId:i.id,projectName:s.name,companyName:i.name,createdAt:new Date().toISOString()})}return{success:!!s,rateLimited:!1,project:s||null}}},async _pinFallbackDirectQuery(e,t,r,n,i,s){try{const{data:c,error:u}=await T.from("companies").select("*").ilike("code",t.trim()).single();if(u||!c)return{success:!1,rateLimited:!1,project:null};const{data:m,error:h}=await T.from("projects").select("*").eq("pin",e.trim()).eq("company_id",c.id).eq("status","active").single();if(h||!m){let g=parseInt(localStorage.getItem(r)||"0");return g++,localStorage.setItem(r,g.toString()),g>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}localStorage.removeItem(r),localStorage.removeItem(n);let p=null;try{const g=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(x=>x.toString(16).padStart(2,"0")).join(""),{error:_}=await T.from("field_sessions").insert({project_id:m.id,company_id:c.id,session_token:g,device_id:typeof Ag=="function"?Ag():null});_||(p=g)}catch{}return p&&nf({token:p,projectId:m.id,companyId:c.id,projectName:m.name,companyName:c.name,createdAt:new Date().toISOString()}),{success:!0,rateLimited:!1,project:m}}catch(c){return console.error("[PIN Auth] Fallback query failed:",c),{success:!1,rateLimited:!1,project:null,error:"Connection error. Please try again."}}},async isPinAvailable(e,t=null){if(P){let r=T.from("projects").select("id").eq("pin",e);t&&(r=r.neq("id",t));const{data:n,error:i}=await r;if(i)throw i;return n.length===0}else return!Oe().projects.some(n=>n.pin===e&&n.id!==t)},async updateProjectPin(e,t){if(P){const{data:r,error:n}=await T.from("projects").update({pin:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.projects.find(i=>i.id===e);return n&&(n.pin=t,Ge(r)),n}},async updateProject(e,t,r=null){if(P){if(!r)throw console.error("[Security] updateProject called without companyId - this is a security risk"),new Error("Company ID is required for security verification");const{data:n,error:i}=await T.from("projects").update(t).eq("id",e).eq("company_id",r).select().single();if(i)throw console.error("Error updating project"),i;return n}else{const n=Oe(),i=n.projects.find(s=>s.id===e);return i&&(Object.assign(i,t),Ge(n)),i}},async deleteProject(e,t=null){if(P){let r=[];try{const{data:c}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);c?.forEach(u=>{Array.isArray(u.photos)&&u.photos.forEach(m=>{if(m)if(m.startsWith("http"))try{const h=new URL(m).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);h&&r.push(decodeURIComponent(h[1]))}catch{}else r.push(m)})})}catch{}if(r.length>0)try{for(let c=0;c<r.length;c+=100)await T.storage.from("tm-photos").remove(r.slice(c,c+100))}catch{}await T.from("t_and_m_tickets").delete().eq("project_id",e),await T.from("daily_reports").delete().eq("project_id",e);let n=T.from("projects").delete({count:"exact"}).eq("id",e);t&&(n=n.eq("company_id",t));const{error:i,count:s}=await n;if(i)throw i;if(s===0)throw new Error("Project could not be deleted. You may not have permission (admin or owner role required).")}else{const r=Oe();r.projects=r.projects.filter(n=>n.id!==e),r.areas=r.areas.filter(n=>n.project_id!==e),Ge(r)}},async getAreas(e){if(P){if(!qn())return BS(e);const t=be(),{data:r,error:n}=await t.from("areas").select("*").eq("project_id",e).order("sort_order",{ascending:!0});if(n){const i=await BS(e);if(i.length>0)return i;throw n}return r?.length>0&&AL(r).catch(i=>console.error("Failed to cache areas:",i)),r}else return Oe().areas.filter(t=>t.project_id===e)},async createArea(e){if(P){const t=be(),{data:r,error:n}=await t.from("areas").insert(e).select().single();if(n)throw n;return r}else{const t=Oe(),r={...e,id:crypto.randomUUID(),created_at:new Date().toISOString()};return t.areas.push(r),Ge(t),r}},async updateAreaStatus(e,t,r=null){if(P){if(!qn()){const u=await Eg(e,t);return await un(Zt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}let i=be().from("areas").update({status:t}).eq("id",e);r&&(i=i.eq("project_id",r));const{data:s,error:c}=await i.select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u=await Eg(e,t);return await un(Zt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}throw c}return s&&Eg(e,t).catch(u=>console.error("Failed to update cached area status:",u)),s}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(i.status=t,i.updated_at=new Date().toISOString()),Ge(n),i}},async updateArea(e,t,r=null){if(P){let n=T.from("areas").update(t).eq("id",e);r&&(n=n.eq("project_id",r));const{data:i,error:s}=await n.select().single();if(s)throw s;return i}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(Object.assign(i,t),i.updated_at=new Date().toISOString()),Ge(n),i}},async deleteArea(e,t=null){if(P){let r=T.from("areas").delete().eq("id",e);t&&(r=r.eq("project_id",t));const{error:n}=await r;if(n)throw n}else{const r=Oe();r.areas=r.areas.filter(n=>n.id!==e),Ge(r)}},subscribeToAreas(e,t){return P?T.channel(`areas:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMessages(e,t){return P?T.channel(`messages:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialRequests(e,t){return P?T.channel(`material_requests:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDailyReports(e,t){return P?T.channel(`daily_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCrewCheckins(e,t){return P?T.channel(`crew_checkins:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToInjuryReports(e,t){return P?T.channel(`injury_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToTMTickets(e,t){return P?T.channel(`tm_tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCompanyActivity(e,t,r){if(!P||!t||t.length===0)return null;const n=T.channel(`company_activity:${e}`);return t.forEach(i=>{n.on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${i}`},s=>r.onMessage?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${i}`},s=>r.onMaterialRequest?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${i}`},s=>r.onTMTicket?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${i}`},s=>r.onCrewCheckin?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${i}`},s=>r.onAreaUpdate?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${i}`},s=>r.onCORChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${i}`},s=>r.onProjectChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${i}`},s=>r.onPunchListChange?.(s))}),n.on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},i=>r.onInjuryReport?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},i=>r.onMaterialsEquipmentChange?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},i=>r.onLaborRateChange?.(i)),n.subscribe()},unsubscribe(e){e&&P&&T.removeChannel(e)},async getAssignedProjects(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",e);if(r)throw r;return t.map(n=>n.projects)}else{const t=Oe();return(t.assignments?.filter(n=>n.user_id===e)||[]).map(n=>t.projects.find(i=>i.id===n.project_id)).filter(Boolean)}},async assignUserToProject(e,t,r){if(P){const{data:n,error:i}=await T.from("project_assignments").insert({project_id:e,user_id:t,assigned_by:r}).select().single();if(i)throw i;return n}else{const n=Oe();n.assignments||(n.assignments=[]);const i={id:crypto.randomUUID(),project_id:e,user_id:t,assigned_by:r,assigned_at:new Date().toISOString()};return n.assignments.push(i),Ge(n),i}},async removeUserFromProject(e,t){if(P){const{error:r}=await T.from("project_assignments").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}else{const r=Oe();r.assignments=r.assignments?.filter(n=>!(n.project_id===e&&n.user_id===t))||[],Ge(r)}},async getProjectAssignments(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",e);if(r)throw r;return t.map(n=>n.users)}else{const t=Oe();return(t.assignments?.filter(n=>n.project_id===e)||[]).map(n=>t.users.find(i=>i.id===n.user_id)).filter(Boolean)}},async getAllUsers(){if(P){const{data:e,error:t}=await T.from("users").select("*").order("name");if(t)throw t;return e}else return Oe().users||[]},async getForemen(){if(P){const{data:e,error:t}=await T.from("users").select("*").eq("role","foreman").order("name");if(t)throw t;return e}else return(Oe().users||[]).filter(e=>e.role==="foreman")},async logActivity(e,t,r,n,i,s){if(P){const{error:c}=await T.from("activity_log").insert({user_id:e,project_id:t,area_id:r,action:n,old_value:i,new_value:s});c&&console.error("Error logging activity:",c)}},async getProjectActivity(e,t=50){if(P){const{data:r,error:n}=await T.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r}return[]},async getMaterialsEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").select("*").eq("company_id",e).eq("active",!0).order("category").order("name");if(r)throw r;return t}return[]},async getMaterialsEquipmentByCategory(e,t){if(P){const r=be();if(!r)return[];const{data:n,error:i}=await r.from("materials_equipment").select("*").eq("company_id",e).eq("category",t).eq("active",!0).order("name");if(i)throw i;return n}return[]},async getAllMaterialsEquipment(e){if(P){const t=be();if(!t)return[];const{data:r,error:n}=await t.from("materials_equipment").select("*").eq("company_id",e).order("category").order("name");if(n)throw n;return r}return[]},async createMaterialEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").insert(e).select().single();if(r)throw r;return t}return null},async updateMaterialEquipment(e,t){if(P){const{data:r,error:n}=await T.from("materials_equipment").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteMaterialEquipment(e){if(P){const{error:t}=await T.from("materials_equipment").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborCategories(e){if(P){const{data:t,error:r}=await T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async createLaborCategory(e,t,r=0){if(P){const{data:n,error:i}=await T.from("labor_categories").insert({company_id:e,name:t,sort_order:r}).select().single();if(i)throw i;return n}return null},async updateLaborCategory(e,t){if(P){const{data:r,error:n}=await T.from("labor_categories").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborCategory(e){if(P){const{error:t}=await T.from("labor_categories").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClasses(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async getLaborClassesWithCategories(e){if(P){const[t,r]=await Promise.all([T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name"),T.from("labor_classes").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;return{categories:t.data||[],classes:r.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(e){if(P){const t=be();if(!t)return{categories:[],classes:[]};const{data:r,error:n}=await t.rpc("get_labor_classes_for_field",{p_company_id:e});if(n){console.error("Error loading field labor classes:",n);const[c,u]=await Promise.all([t.from("labor_categories").select("id, name").eq("company_id",e).eq("active",!0).order("name"),t.from("labor_classes").select("id, name, category_id").eq("company_id",e).eq("active",!0).order("name")]);return{categories:c.data||[],classes:u.data||[]}}const i=new Map,s=[];for(const c of r||[])c.category_id&&c.category_name&&!i.has(c.category_id)&&i.set(c.category_id,{id:c.category_id,name:c.category_name}),s.push({id:c.id,name:c.name,category_id:c.category_id});return{categories:Array.from(i.values()),classes:s}}return{categories:[],classes:[]}},async createLaborClass(e,t,r,n=0){if(P){const{data:i,error:s}=await T.from("labor_classes").insert({company_id:e,category_id:t,name:r,sort_order:n}).select().single();if(s)throw s;return i}return null},async updateLaborClass(e,t){if(P){const{data:r,error:n}=await T.from("labor_classes").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborClass(e){if(P){const{error:t}=await T.from("labor_classes").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_class_rates").select("*").eq("labor_class_id",e);if(r)throw r;return t||[]}return[]},async getAllLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",e).eq("active",!0);if(r)throw r;return t||[]}return[]},async saveLaborClassRates(e,t){if(P){const r=t.map(i=>({...i,labor_class_id:e})),{error:n}=await T.from("labor_class_rates").upsert(r,{onConflict:"labor_class_id,work_type,job_type"});if(n)throw n}},async getLaborClassRate(e,t,r){if(P){const{data:n,error:i}=await T.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",e).eq("work_type",t).eq("job_type",r).single();if(i&&i.code!=="PGRST116")throw i;return n||null}return null},async getTMTickets(e){if(P){const t=performance.now(),r=be(),i=Sy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{const{data:s,error:c}=await r.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${i}
            )
          `).eq("project_id",e).order("created_at",{ascending:!1}),u=Math.round(performance.now()-t);if(Ke.query("getTMTickets",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s}catch(s){throw Ke.error("database",{message:s.message,operation:"getTMTickets",project_id:e}),s}}return[]},async getTMTicketsPaginated(e,{page:t=0,limit:r=25,status:n=null}={}){if(P){const i=performance.now(),s=be(),u=Sy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{let m=s.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${u}
            )
          `,{count:"exact"}).eq("project_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n&&(m=m.eq("status",n));const{data:h,error:p,count:g}=await m,_=Math.round(performance.now()-i);if(Ke.query("getTMTicketsPaginated",{duration:_,rows:h?.length,page:t,project_id:e}),p)throw p;return{tickets:h||[],totalCount:g||0,hasMore:(t+1)*r<(g||0),page:t,limit:r}}catch(m){throw Ke.error("database",{message:m.message,operation:"getTMTicketsPaginated",project_id:e}),m}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",e).not("ce_pco_number","is",null).neq("ce_pco_number","");if(r)throw r;const n={};let i=0,s=0;return t?.forEach(c=>{const u=c.ce_pco_number;if(n[u]||(n[u]={approved:0,pending:0,count:0}),n[u].count++,c.status==="approved"||c.status==="billed"){const m=parseFloat(c.change_order_value)||0;n[u].approved+=m,i+=m}else c.status==="pending"&&s++}),{changeOrders:n,totalApprovedValue:i,pendingCount:s}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(e,t){if(P){const r=be();if(!r)return[];const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).eq("status",t).order("created_at",{ascending:!1});if(i)throw i;return n}return[]},async getCORTickets(e){if(P){const t=be();if(!t)return[];const{data:r,error:n}=await t.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",e).order("work_date",{ascending:!0});if(n)throw n;return r||[]}return[]},async createTMTicket(e){if(P){if(!qn()){const i={id:Xr(),project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending_sync",created_by_name:e.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await $S(i),await un(Zt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}const t=be();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("t_and_m_tickets").insert({project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending",created_by_name:e.created_by_name||"Field User"}).select().single();if(n){if(n.message?.includes("fetch")||n.message?.includes("network")){const i={id:Xr(),...e,status:"pending_sync",_offline:!0};return await $S(i),await un(Zt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}throw n}return r}return null},async addTMWorkers(e,t){if(P){const r=t.map(s=>({ticket_id:e,name:s.name,hours:s.hours,overtime_hours:s.overtime_hours||0,time_started:s.time_started||null,time_ended:s.time_ended||null,role:s.role||"Laborer"})),n=be();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_workers").insert(r);if(i)throw i}},async addTMItems(e,t){if(P){const r=t.map(s=>({ticket_id:e,material_equipment_id:s.material_equipment_id||null,custom_name:s.custom_name||null,custom_category:s.custom_category||null,quantity:s.quantity})),n=be();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_items").insert(r);if(i)throw i}},async getPreviousTicketCrew(e,t){if(!P)return null;const r=be();if(!r)return null;const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",e).lt("work_date",t).order("work_date",{ascending:!1}).limit(1).maybeSingle();if(i||!n)return null;const s=n.t_and_m_workers||[],c=s.some(g=>g.labor_class_id),u={};c&&s.forEach(g=>{g.labor_class_id&&(u[g.labor_class_id]||(u[g.labor_class_id]=[]),u[g.labor_class_id].push({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||""}))});const m=s.filter(g=>["Foreman","General Foreman","Superintendent"].includes(g.role)).map(g=>({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||"",role:g.role})),h=s.filter(g=>g.role==="Operator").map(g=>({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||""})),p=s.filter(g=>g.role==="Laborer").map(g=>({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||""}));return{workDate:n.work_date,supervision:m.length>0?m:null,operators:h.length>0?h:null,laborers:p.length>0?p:null,dynamicWorkers:Object.keys(u).length>0?u:null,totalWorkers:s.length}},async updateTMTicketStatus(e,t){if(P){const r=be();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({status:t}).eq("id",e).select().single();if(i)throw i;return n}return null},async approveTMTicket(e,t,r,n=null){if(P){const i={status:"approved",approved_by_user_id:t,approved_by_name:r,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};n!==null&&(i.change_order_value=parseFloat(n)||0);const s=be();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(u)throw u;return c}return null},async rejectTMTicket(e,t,r,n=""){if(P){const i=be();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:t,rejected_by_name:r,rejected_at:new Date().toISOString(),rejection_reason:n,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",e).select().single();if(c)throw c;return s}return null},canApproveTickets(e){return["owner","admin","manager"].includes(e)},async updateTMTicketPhotos(e,t,r=null){if(P){const n=be();if(!n)throw new Error("Database client not available");const i={photos:t};r&&(i.photo_locations=r);const{data:s,error:c}=await n.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(c)throw c;return s}return null},async saveTMClientSignature(e,t){if(P){const r=be();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({client_signature_data:t.signature,client_signature_name:t.signerName,client_signature_title:t.signerTitle,client_signature_company:t.signerCompany,client_signature_date:t.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteTMTicket(e){if(P){const t=be();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("t_and_m_tickets").delete().eq("id",e);if(r)throw r}},async isTicketEditable(e){if(!e?.assigned_cor_id)return{editable:!0};if(P)try{const{data:t,error:r}=await T.from("change_orders").select("id, status, cor_number").eq("id",e.assigned_cor_id).single();if(r||!t)return{editable:!0};const i=["draft","pending_approval"].includes(t.status);return{editable:i,lockedBy:i?null:t,reason:i?null:`This ticket is linked to ${t.cor_number} which has been ${t.status==="approved"?"approved":t.status}`}}catch(t){return console.error("Error checking ticket editability:",t),{editable:!0}}return{editable:!0}},async getCompanyByCode(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").ilike("code",e.trim()).single();return r?(console.error("[Company Lookup] Error:",{message:r.message,code:r.code,details:r.details,hint:r.hint}),null):t}return null},async getCompany(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").eq("id",e).single();if(r)throw r;return t}return null},async getUserCompanies(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching user companies:",r),[]):t.map(n=>({id:n.companies.id,name:n.companies.name,code:n.companies.code,access_level:n.access_level}))}return[]},async getUserPendingMemberships(e){if(P){const{count:t,error:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("status","pending");return r?(console.error("Error fetching pending memberships:",r),0):t||0}return 0},async getCompanyMemberships(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching company memberships:",r),[]):t||[]}return[]},async approveMembership(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:t}).eq("id",e);if(r)throw r}},async approveMembershipWithRole(e,t,r="member"){if(P){const{error:n}=await T.rpc("approve_membership_with_role",{membership_id:e,approved_by_user:t,new_access_level:r});if(n)throw n}},async rejectMembership(e){if(P){const{error:t}=await T.from("user_companies").delete().eq("id",e);if(t)throw t}},async removeMember(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:t}).eq("id",e);if(r)throw r}},async getProjectTeam(e){if(P){const{data:t,error:r}=await T.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",e).order("assigned_at",{ascending:!0});return r?(console.error("Error fetching project team:",r),[]):t||[]}return[]},async getCompanyMembers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching company members:",r),[]):t||[]}return[]},async addProjectMember(e,t,r,n){if(P){const{data:i,error:s}=await T.from("project_users").insert({project_id:e,user_id:t,project_role:r,assigned_by:n}).select().single();if(s)throw s;return i}return null},async updateProjectMemberRole(e,t,r){if(P){const{error:n}=await T.from("project_users").update({project_role:r}).eq("project_id",e).eq("user_id",t);if(n)throw n}},async removeProjectMember(e,t){if(P){const{error:r}=await T.from("project_users").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}},async updateMemberAccessLevel(e,t){if(P){const{error:r}=await T.from("user_companies").update({access_level:t}).eq("id",e);if(r)throw r}},async updateMemberCompanyRole(e,t){if(P){const{error:r}=await T.from("user_companies").update({company_role:t}).eq("id",e);if(r)throw r}},async repairLegacyUser(e,t,r="member"){if(!P||!e||!t)return!1;try{const{data:n,error:i}=await T.rpc("repair_legacy_user",{p_user_id:e,p_company_id:t,p_role:r});return i?(console.error("RPC repair_legacy_user failed:",i),!1):n===!0}catch(n){return console.error("Error repairing legacy user:",n),!1}},async isLegacyUser(e){if(!P)return!1;try{const{data:t}=await T.from("users").select("company_id, role").eq("id",e).single();if(!t?.company_id)return!1;const{count:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e);return r===0}catch(t){return console.error("Error checking legacy user:",t),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(e,t){if(!P)return[];const r=be();if(!r)return[];const n=performance.now();try{const{data:i,error:s}=await r.from("disposal_loads").select("*").eq("project_id",e).eq("work_date",t).order("created_at",{ascending:!1}),c=Math.round(performance.now()-n);if(Ke.query("getDisposalLoads",{duration:c,rows:i?.length,project_id:e}),s)throw s;return i||[]}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoads",project_id:e}),i}},async getDisposalLoadsHistory(e,t=14){if(!P)return[];const r=be();if(!r)return[];const n=performance.now();try{const i=new Date,s=new Date;s.setDate(s.getDate()-t);const{data:c,error:u}=await r.from("disposal_loads").select("*").eq("project_id",e).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",i.toISOString().split("T")[0]).order("work_date",{ascending:!1}),m=Math.round(performance.now()-n);if(Ke.query("getDisposalLoadsHistory",{duration:m,rows:c?.length,project_id:e}),u)throw u;return(c||[]).map(h=>({...h,load_date:h.work_date}))}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoadsHistory",project_id:e}),i}},async addDisposalLoad(e,t,r,n,i,s=null){if(!P)return null;const c=be();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.from("disposal_loads").insert({project_id:e,user_id:t,work_date:r,load_type:n,load_count:i,notes:s}).select().single();if(m)throw Ke.error("database",{message:m.message,operation:"addDisposalLoad",project_id:e}),m;return u},async updateDisposalLoad(e,t,r,n=null){if(!P)return null;const i=be();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("disposal_loads").update({load_type:t,load_count:r,notes:n}).eq("id",e).select().single();if(c)throw Ke.error("database",{message:c.message,operation:"updateDisposalLoad"}),c;return s},async deleteDisposalLoad(e){if(!P)return!1;const t=be();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("disposal_loads").delete().eq("id",e);if(r)throw Ke.error("database",{message:r.message,operation:"deleteDisposalLoad"}),r;return!0},async getDisposalSummary(e,t=null,r=null){if(!P)return[];const n=be();if(!n)return[];const i=performance.now();try{const{data:s,error:c}=await n.rpc("get_disposal_summary",{p_project_id:e,p_start_date:t,p_end_date:r}),u=Math.round(performance.now()-i);if(Ke.query("getDisposalSummary",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s||[]}catch(s){return Ke.error("database",{message:s.message,operation:"getDisposalSummary",project_id:e}),this.getDisposalSummaryFallback(e,t,r)}},async getDisposalSummaryFallback(e,t,r){let i=(be()||T).from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e);t&&(i=i.gte("work_date",t)),r&&(i=i.lte("work_date",r));const{data:s,error:c}=await i;if(c)throw c;const u={};return s?.forEach(m=>{u[m.load_type]||(u[m.load_type]={load_type:m.load_type,total_loads:0,days:new Set}),u[m.load_type].total_loads+=m.load_count,u[m.load_type].days.add(m.work_date)}),Object.values(u).map(m=>({load_type:m.load_type,total_loads:m.total_loads,days_with_activity:m.days.size}))},async getWeeklyDisposalSummary(e,t=4){if(!P)return[];const r=be();if(!r)return[];const n=new Date,i=new Date;i.setDate(i.getDate()-t*7);const{data:s,error:c}=await r.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e).gte("work_date",i.toISOString().split("T")[0]).lte("work_date",n.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(c)throw c;const u={};return s?.forEach(m=>{const h=new Date(m.work_date),p=new Date(h);p.setDate(h.getDate()-h.getDay());const g=p.toISOString().split("T")[0];u[g]||(u[g]={week:g,concrete:0,trash:0,metals:0,hazardous_waste:0}),u[g][m.load_type]+=m.load_count}),Object.values(u).sort((m,h)=>m.week.localeCompare(h.week))},async uploadPhoto(e,t,r,n){if(!P)return null;const i=be();if(!i)throw new Error("Database client not available");const s=performance.now(),c=n.size||0,u=Date.now(),m=new Uint8Array(6);crypto.getRandomValues(m);const h=Array.from(m,x=>x.toString(36)).join(""),p=n.name?.split(".").pop()||"jpg",g=`${u}-${h}.${p}`,_=`${e}/${t}/${r}/${g}`;try{const{data:x,error:w}=await i.storage.from("tm-photos").upload(_,n,{cacheControl:"3600",upsert:!1}),j=Math.round(performance.now()-s);if(Ke.storage("upload",{company_id:e,project_id:t,size:c,duration:j,success:!w}),w)throw w;return _}catch(x){throw Ke.error("storage",{message:x.message,operation:"uploadPhoto",company_id:e,project_id:t}),x}},async uploadPhotoBase64(e,t,r,n,i="photo.jpg"){if(!P)return null;const s=be();if(!s)throw new Error("Database client not available");const u=await(await fetch(n)).blob(),m=Date.now(),h=new Uint8Array(6);crypto.getRandomValues(h);const p=Array.from(h,S=>S.toString(36)).join(""),g=i.split(".").pop()||"jpg",_=`${m}-${p}.${g}`,x=`${e}/${t}/${r}/${_}`,{data:w,error:j}=await s.storage.from("tm-photos").upload(x,u,{cacheControl:"3600",upsert:!1,contentType:u.type});if(j)throw j;return x},async resolvePhotoUrl(e){if(!e||!P)return e;let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return e;t=decodeURIComponent(n[1])}catch{return e}else t=e;try{const r=$i(),{data:n,error:i}=await r.storage.from("tm-photos").createSignedUrl(t,3600);return i||!n?.signedUrl?null:n.signedUrl}catch{return null}},async resolvePhotoUrls(e){if(!P||!e?.length)return e||[];const t=[],r=[];for(let n=0;n<e.length;n++){const i=e[n];if(!i)continue;let s;if(i.startsWith("http"))try{const u=new URL(i).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);u&&(s=decodeURIComponent(u[1]))}catch{}else s=i;s&&(t.push(s),r.push(n))}if(!t.length)return e;try{const n=$i(),{data:i,error:s}=await n.storage.from("tm-photos").createSignedUrls(t,3600);if(s||!i)return e;const c=[...e];return i.forEach((u,m)=>{c[r[m]]=u.signedUrl||null}),c}catch{return e}},async deletePhoto(e){if(!P||!e)return;let t;if(e.startsWith("http"))try{const i=new URL(e).pathname.match(/\/tm-photos\/(.+)$/);if(!i)return;t=i[1]}catch{return}else t=e;const{error:r}=await T.storage.from("tm-photos").remove([t]);if(r)throw r},async verifyPhotoAccessible(e){if(!P||!e)return{accessible:!1,error:"Invalid input"};let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return{accessible:!1,error:"Not a tm-photos URL"};t=decodeURIComponent(n[1])}catch{return{accessible:!1,error:"Invalid URL"}}else t=e;try{const{data:r,error:n}=await T.storage.from("tm-photos").createSignedUrl(t,60);return n?{accessible:!1,error:n.message}:{accessible:!!r?.signedUrl,status:200}}catch(r){return{accessible:!1,error:r.message||"Verification failed"}}},async verifyTicketPhotos(e){if(!P)return{verified:!1,issues:[]};try{const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("id",e).single();if(r)throw r;if(!t?.photos||t.photos.length===0)return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",e),{verified:!0,status:"empty",issues:[]};const n=[];for(const s of t.photos){const c=await this.verifyPhotoAccessible(s);c.accessible||n.push({url:s,error:c.error})}const i=n.length===0?"verified":"issues";return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:i,photos_issue_count:n.length}).eq("id",e),{verified:n.length===0,status:i,totalPhotos:t.photos.length,issues:n}}catch(t){return console.error("Error verifying ticket photos:",t),{verified:!1,error:t.message,issues:[]}}},async queuePhotoUpload(e,t,r,n){if(!P)return null;const{data:i,error:s}=await T.from("photo_upload_queue").insert({ticket_id:e,temp_id:t,file_name:r,file_size_bytes:n,status:"pending"}).select().single();return s?(console.error("Error queueing photo upload:",s),null):i},async confirmQueuedUpload(e,t,r){if(!P)return!1;const{data:n,error:i}=await T.rpc("confirm_photo_upload",{p_queue_id:e,p_uploaded_url:t,p_storage_path:r});return i?(console.error("Error confirming photo upload:",i),!1):n===!0},async markQueuedUploadFailed(e,t){if(!P)return!1;const{data:r,error:n}=await T.rpc("mark_photo_upload_failed",{p_queue_id:e,p_error:t});return n?(console.error("Error marking photo upload failed:",n),!1):r===!0},async getPendingPhotoUploads(e){if(!P)return[];const{data:t,error:r}=await T.rpc("get_pending_photo_uploads",{p_ticket_id:e});return r?(console.error("Error getting pending photo uploads:",r),[]):t||[]},async logPhotoOperation(e,t,r={}){if(P)try{await T.from("photo_audit_log").insert({ticket_id:e,cor_id:r.corId||null,operation:t,photo_url:r.photoUrl||null,storage_path:r.storagePath||null,details:r.metadata?r.metadata:null,error_message:r.error||null,triggered_by:r.triggeredBy||"system"})}catch(n){console.error("Error logging photo operation:",n)}},async saveExportSnapshot(e,t,r={}){if(!P)return null;const{exportType:n="pdf",exportReason:i=null,clientEmail:s=null,clientName:c=null}=r;try{const{data:u,error:m}=await T.from("cor_export_snapshots").insert({cor_id:e,export_type:n,export_reason:i,cor_data:t.cor_data,tickets_data:t.tickets_data,photos_manifest:t.photos_manifest,totals_snapshot:t.totals_snapshot,checksum:t.checksum,client_email:s,client_name:c}).select().single();if(m)throw m;return u}catch(u){return console.error("Error saving export snapshot:",u),null}},async getExportSnapshots(e){if(!P)return[];const{data:t,error:r}=await T.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",e).order("exported_at",{ascending:!1});return r?(console.error("Error fetching export snapshots:",r),[]):t||[]},async getExportSnapshot(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_snapshots").select("*").eq("id",e).single();return r?(console.error("Error fetching export snapshot:",r),null):t},async requestCORExport(e,t,r={}){if(!P)return null;try{const n=await T.auth.getUser(),{data:i,error:s}=await T.rpc("request_cor_export",{p_cor_id:e,p_idempotency_key:t,p_options:r,p_requested_by:n?.data?.user?.id||null});if(s)throw s;return i?.[0]||null}catch(n){throw Ke.error("database",{message:n.message,operation:"requestCORExport",extra:{corId:e}}),n}},async getExportJob(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_jobs").select("*").eq("id",e).single();return r?(console.error("Error fetching export job:",r),null):t},async getExportJobs(e,t=10){if(!P)return[];const{data:r,error:n}=await T.from("cor_export_jobs").select("*").eq("cor_id",e).order("created_at",{ascending:!1}).limit(t);return n?(console.error("Error fetching export jobs:",n),[]):r||[]},async updateExportJobStatus(e,t,r={}){if(!P)return null;try{const{data:n,error:i}=await T.rpc("update_export_job_status",{p_job_id:e,p_status:t,p_snapshot_id:r.snapshotId||null,p_pdf_url:r.pdfUrl||null,p_error:r.error||null,p_error_details:r.errorDetails||null,p_metrics:r.metrics||null});if(i)throw i;return n}catch(n){throw Ke.error("database",{message:n.message,operation:"updateExportJobStatus",extra:{jobId:e,status:t}}),n}},async getCurrentCORSnapshot(e){if(!P)return null;const{data:t}=await T.from("change_orders").select("version, last_snapshot_version").eq("id",e).single();if(!t||t.version!==t.last_snapshot_version)return null;const{data:r}=await T.from("cor_export_snapshots").select("*").eq("cor_id",e).eq("is_current",!0).single();return r||null},async saveCORSnapshot(e,t){if(!P)return null;try{await T.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",e.corId);const r=await T.auth.getUser(),{data:n,error:i}=await T.from("cor_export_snapshots").insert({id:e.snapshotId,cor_id:e.corId,job_id:t,cor_version:e.corVersion,cor_data:e.corData,tickets_data:e.ticketsData,photos_manifest:e.photoManifest,totals_snapshot:e.totals,checksum:e.checksum,is_current:!0,exported_by:r?.data?.user?.id||null}).select().single();if(i)throw i;return await T.from("change_orders").update({last_snapshot_version:e.corVersion}).eq("id",e.corId),n}catch(r){throw Ke.error("database",{message:r.message,operation:"saveCORSnapshot",extra:{corId:e.corId}}),r}},async updateCORAggregatedStats(e){if(P)try{await T.rpc("update_cor_aggregated_stats",{p_cor_id:e})}catch(t){console.error("Error updating COR aggregated stats:",t)}},async getCrewCheckin(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=be(),{data:i,error:s}=await n.from("crew_checkins").select("*").eq("project_id",e).eq("check_in_date",r).maybeSingle();return s&&console.error("Error fetching crew checkin:",s),i},async saveCrewCheckin(e,t,r=null,n=null){if(!P)return null;const i=n||new Date().toISOString().split("T")[0];if(!qn()){const m={id:Xr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Cd(m),await un(Zt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const s=be();if(!s){const m={id:Xr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Cd(m),await un(Zt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const{data:c,error:u}=await s.from("crew_checkins").upsert({project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Xr(),project_id:e,check_in_date:i,workers:t,_offline:!0};return await Cd(m),await un(Zt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}throw console.error("Error saving crew checkin:",u),u}return c&&Cd(c).catch(m=>console.error("Failed to cache checkin:",m)),c},async addCrewMember(e,t,r=null){if(!P)return null;const n=await this.getCrewCheckin(e),i=n?.workers||[];return i.find(s=>s.name.toLowerCase()===t.name.toLowerCase())?n:(i.push(t),await this.saveCrewCheckin(e,i,r))},async removeCrewMember(e,t){if(!P)return null;const r=await this.getCrewCheckin(e);if(!r)return null;const n=r.workers.filter(i=>i.name.toLowerCase()!==t.toLowerCase());return await this.saveCrewCheckin(e,n,r.created_by)},async getCrewCheckinHistory(e,t=30){if(!P)return[];const r=be();if(!r)return[];const{data:n,error:i}=await r.from("crew_checkins").select("*").eq("project_id",e).order("check_in_date",{ascending:!1}).limit(t);return i?(console.error("Error fetching crew history:",i),[]):n||[]},async getRecentWorkers(e,t=30){if(!P)return[];const r=await this.getCrewCheckinHistory(e,t),n=new Map;return r.forEach(i=>{(i.workers||[]).forEach(s=>{const c=s.name.toLowerCase();n.has(c)||n.set(c,{name:s.name,role:s.role,labor_class_id:s.labor_class_id||null,lastSeen:i.check_in_date})})}),Array.from(n.values()).sort((i,s)=>i.name.localeCompare(s.name))},async getLaborRates(e,t=null,r=null){if(!P)return[];let n=T.from("labor_rates").select("*").eq("company_id",e);t&&(n=n.eq("work_type",t)),r&&(n=n.eq("job_type",r));const{data:i,error:s}=await n;return s?(console.error("Error fetching labor rates:",s),[]):i||[]},async calculateManDayCosts(e,t,r,n){if(!P)return{totalCost:0,totalManDays:0,breakdown:[]};const i=await this.getCrewCheckinHistory(e,365),s=await this.getLaborRates(t,r,n),c={};s.forEach(g=>{c[g.role.toLowerCase()]=parseFloat(g.regular_rate)||0});let u=0,m=0;const h={},p=[];return i.forEach(g=>{const _=g.workers||[];let x=0;const w={};_.forEach(j=>{const S=(j.role||"laborer").toLowerCase(),O=c[S]||0;w[S]||(w[S]={count:0,cost:0}),w[S].count++,w[S].cost+=O,x+=O,h[S]||(h[S]={count:0,cost:0,rate:O}),h[S].count++,h[S].cost+=O}),u+=x,m+=_.length,p.push({date:g.check_in_date,workers:_.length,cost:x,breakdown:w})}),{totalCost:u,totalManDays:m,byRole:h,byDate:p,daysWorked:i.length}},async getDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=be(),{data:i,error:s}=await n.from("daily_reports").select("*").eq("project_id",e).eq("report_date",r).maybeSingle();return s&&console.error("Error fetching daily report:",s),i},async compileDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=be(),[i,s,c]=await Promise.all([this.getCrewCheckin(e,r),n.from("areas").select("*").eq("project_id",e),n.from("t_and_m_tickets").select("*").eq("project_id",e).eq("work_date",r)]),u=s?.data||[],m=c?.data||[],h=u.filter(g=>g.status==="done"&&g.completed_at?.startsWith(r)),p=m.reduce((g,_)=>g+(_.photos?.length||0),0);return{crew_count:i?.workers?.length||0,crew_list:i?.workers||[],tasks_completed:h.length,tasks_total:u.length,completed_tasks:h.map(g=>({name:g.name,group:g.group_name})),tm_tickets_count:m.length,photos_count:p}},async saveDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!qn()){const u={id:Xr(),project_id:e,report_date:n,...t,updated_at:new Date().toISOString(),_offline:!0};return await Ts(u),u}const i=be(),{data:s,error:c}=await i.from("daily_reports").upsert({project_id:e,report_date:n,...t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u={id:Xr(),project_id:e,report_date:n,...t,_offline:!0};return await Ts(u),u}throw console.error("Error saving daily report:",c),c}return s&&Ts(s).catch(u=>console.error("Failed to cache report:",u)),s},async submitDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!qn()){const m=await NL(e,n),h={id:Xr(),project_id:e,report_date:n,...m||{},status:"pending_sync",submitted_by:t,submitted_at:new Date().toISOString(),_offline:!0};return await Ts(h),await un(Zt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:m||{},submittedBy:t}),h}const i=await this.compileDailyReport(e,n),s=be();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("daily_reports").upsert({project_id:e,report_date:n,...i,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Xr(),project_id:e,report_date:n,...i,status:"pending_sync",submitted_by:t,_offline:!0};return await Ts(m),await un(Zt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:i,submittedBy:t}),m}throw console.error("Error submitting daily report:",u),u}return c&&Ts(c).catch(m=>console.error("Failed to cache report:",m)),c},async getDailyReports(e,t=30){if(!P)return[];const r=be();if(!r)return[];const{data:n,error:i}=await r.from("daily_reports").select("*").eq("project_id",e).order("report_date",{ascending:!1}).limit(t);return i?(console.error("Error fetching daily reports:",i),[]):n||[]},async sendMessage(e,t,r,n,i=null,s=null,c="general",u=null){if(!P)return null;if(!qn()){const p={id:Xr(),project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u,created_at:new Date().toISOString(),_offline:!0};return await HS(p),await un(Zt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),p}const{data:m,error:h}=await T.from("messages").insert({project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const p={id:Xr(),project_id:e,sender_type:r,sender_name:n,message:t,created_at:new Date().toISOString(),_offline:!0};return await HS(p),await un(Zt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),p}throw console.error("Error sending message:",h),h}return m},async getMessages(e,t=50){if(!P)return[];const r=be(),{data:n,error:i}=await r.from("messages").select("*").eq("project_id",e).order("created_at",{ascending:!1}).limit(t);return i?[]:n||[]},async getUnreadCount(e,t){if(!P)return 0;const r=be(),n=t==="field"?"office":"field",{count:i,error:s}=await r.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1);return s?0:i||0},async markMessagesRead(e,t){if(!P)return;const r=be(),n=t==="field"?"office":"field";await r.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1)},async createMaterialRequest(e,t,r,n=null,i="normal",s=null){if(!P)return null;if(!qn()){const m={id:Xr(),project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await un(Zt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}const{data:c,error:u}=await T.from("material_requests").insert({project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Xr(),project_id:e,items:t,requested_by:r,status:"pending_sync",_offline:!0};return await un(Zt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}throw console.error("Error creating material request:",u),u}return c},async getMaterialRequests(e,t=null){if(!P)return[];let r=T.from("material_requests").select("*").eq("project_id",e).order("created_at",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching material requests:",i),[]):n||[]},async getPendingRequestsCount(e){if(!P)return 0;const{count:t,error:r}=await T.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("status","pending");return r?0:t||0},async updateMaterialRequest(e,t,r,n=null,i=null){if(!P)return null;const s={status:t,responded_by:r,responded_at:new Date().toISOString(),response_notes:n,updated_at:new Date().toISOString()};i&&(s.expected_delivery=i),t==="delivered"&&(s.delivered_at=new Date().toISOString());const{data:c,error:u}=await T.from("material_requests").update(s).eq("id",e).select().single();if(u)throw console.error("Error updating material request:",u),u;return c},generateShareToken(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=new Uint8Array(12);return crypto.getRandomValues(t),Array.from(t,r=>e[r%e.length]).join("")},async createProjectShare(e,t,r,n=null){if(!P){const m=Oe();m.projectShares||(m.projectShares=[]);const h={id:crypto.randomUUID(),project_id:e,share_token:this.generateShareToken(),created_by:t,expires_at:n,is_active:!0,permissions:r,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return m.projectShares.push(h),Ge(m),h}const{data:i,error:s}=await T.rpc("generate_share_token");if(s)throw console.error("Error generating share token:",s),s;const{data:c,error:u}=await T.from("project_shares").insert({project_id:e,share_token:i,created_by:t,expires_at:n,permissions:r}).select().single();if(u)throw console.error("Error creating project share:",u),u;return c},async getShareByToken(e){if(!P){const n=Oe();if(!n.projectShares)return null;const i=n.projectShares.find(s=>s.share_token===e&&s.is_active&&(!s.expires_at||new Date(s.expires_at)>new Date));return i&&(i.view_count++,i.last_viewed_at=new Date().toISOString(),Ge(n)),i}const{data:t,error:r}=await T.from("project_shares").select("*, projects(*)").eq("share_token",e).eq("is_active",!0).single();return r?(console.error("Error fetching share by token:",r),null):t.expires_at&&new Date(t.expires_at)<new Date?null:(await T.rpc("increment_share_view_count",{token:e}),t)},async getProjectShares(e){if(!P){const n=Oe();return n.projectShares?n.projectShares.filter(i=>i.project_id===e):[]}const{data:t,error:r}=await T.from("project_shares").select("*, users(name, email)").eq("project_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching project shares:",r),[]):t||[]},async updateProjectShare(e,t){if(!P){const i=Oe();if(!i.projectShares)return null;const s=i.projectShares.findIndex(c=>c.id===e);return s===-1?null:(i.projectShares[s]={...i.projectShares[s],...t,updated_at:new Date().toISOString()},Ge(i),i.projectShares[s])}const{data:r,error:n}=await T.from("project_shares").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating project share:",n),n;return r},async revokeProjectShare(e){return this.updateProjectShare(e,{is_active:!1})},async deleteProjectShare(e){if(!P){const r=Oe();if(!r.projectShares)return;r.projectShares=r.projectShares.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("project_shares").delete().eq("id",e);if(t)throw console.error("Error deleting project share:",t),t},async getPublicProjectData(e){const t=await this.getShareByToken(e);if(!t)return null;const r=t.project_id||t.projects?.id;if(!P){const s=Oe(),c=s.projects.find(g=>g.id===r);if(!c)return null;const u=s.areas.filter(g=>g.project_id===r),m=u.reduce((g,_)=>g+parseFloat(_.weight||0),0),h=u.filter(g=>g.status==="done").reduce((g,_)=>g+parseFloat(_.weight||0),0),p=m>0?Math.round(h/m*100):0;return{share:t,project:c,progress:p,areas:t.permissions.progress?u:[],photos:[],dailyReports:[],tmTickets:[]}}const n=t.projects||await this.getProject(r);if(!n)return null;const i={share:t,project:n,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(t.permissions.progress){i.areas=await this.getAreas(r);const s=i.areas.reduce((u,m)=>u+parseFloat(m.weight||0),0),c=i.areas.filter(u=>u.status==="done").reduce((u,m)=>u+parseFloat(m.weight||0),0);i.progress=s>0?Math.round(c/s*100):0}if(t.permissions.photos){const{data:s}=await T.from("t_and_m_tickets").select("photos, work_date").eq("project_id",r).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);i.photos=s?.flatMap(c=>(c.photos||[]).map(u=>({url:u,date:c.work_date})))||[]}if(t.permissions.daily_reports){const{data:s}=await T.from("daily_reports").select("*").eq("project_id",r).order("report_date",{ascending:!1}).limit(10);i.dailyReports=s||[]}return t.permissions.tm_tickets&&(i.tmTickets=await this.getTMTickets(r)),i},async createInjuryReport(e){if(!P){const n=Oe();n.injuryReports||(n.injuryReports=[]);const i={id:crypto.randomUUID(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return n.injuryReports.push(i),Ge(n),i}const{data:t,error:r}=await T.from("injury_reports").insert(e).select().single();if(r)throw console.error("Error creating injury report:",r),r;return t},async getInjuryReports(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.filter(i=>i.project_id===e).sort((i,s)=>new Date(s.incident_date)-new Date(i.incident_date)):[]}const{data:t,error:r}=await T.from("injury_reports").select("*").eq("project_id",e).order("incident_date",{ascending:!1});return r?(console.error("Error fetching injury reports:",r),[]):t||[]},async getCompanyInjuryReports(e,t=null){if(!P){const s=Oe();if(!s.injuryReports)return[];let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>u.status===t)),c.sort((u,m)=>new Date(m.incident_date)-new Date(u.incident_date))}let r=T.from("injury_reports").select("*, projects(name)").eq("company_id",e).order("incident_date",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching company injury reports:",i),[]):n||[]},async getInjuryReport(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.find(i=>i.id===e):null}const{data:t,error:r}=await T.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",e).single();return r?(console.error("Error fetching injury report:",r),null):t},async updateInjuryReport(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(c=>c.id===e);return s===-1?null:(i.injuryReports[s]={...i.injuryReports[s],...t,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s])}const{data:r,error:n}=await T.from("injury_reports").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating injury report:",n),n;return r},async closeInjuryReport(e,t){return this.updateInjuryReport(e,{status:"closed",closed_at:new Date().toISOString(),closed_by:t})},async deleteInjuryReport(e){if(!P){const r=Oe();if(!r.injuryReports)return;r.injuryReports=r.injuryReports.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("injury_reports").delete().eq("id",e);if(t)throw console.error("Error deleting injury report:",t),t},async getInjuryStatistics(e,t=null,r=null){if(!P){const s=Oe();if(!s.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>new Date(u.incident_date)>=new Date(t))),r&&(c=c.filter(u=>new Date(u.incident_date)<=new Date(r))),{total_incidents:c.length,minor_injuries:c.filter(u=>u.injury_type==="minor").length,serious_injuries:c.filter(u=>u.injury_type==="serious").length,critical_injuries:c.filter(u=>u.injury_type==="critical").length,near_misses:c.filter(u=>u.injury_type==="near_miss").length,osha_recordable:c.filter(u=>u.osha_recordable).length,total_days_away:c.reduce((u,m)=>u+(m.days_away_from_work||0),0),total_restricted_days:c.reduce((u,m)=>u+(m.restricted_work_days||0),0)}}const{data:n,error:i}=await T.rpc("get_injury_statistics",{comp_id:e,start_date:t,end_date:r});return i?(console.error("Error fetching injury statistics:",i),null):n[0]||null},async addWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.push(t),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.push(t),this.updateInjuryReport(e,{witnesses:n})},async removeWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.splice(t,1),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.splice(t,1),this.updateInjuryReport(e,{witnesses:n})},async getCompanyUsers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",e);return r?(console.error("Error fetching company users:",r),[]):t?.map(n=>({id:n.user_id,name:n.users?.name||n.users?.email,email:n.users?.email,role:n.role}))||[]}return[]},async getProjectNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",e);return n?(console.error("Error fetching notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.project_id===e):[]},async getUserNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",e);return n?(console.error("Error fetching user notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.user_id===e):[]},async setNotificationPreference(e,t,r){if(P){const{data:c,error:u}=await T.from("notification_preferences").upsert({project_id:e,user_id:t,notification_types:r,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(u)throw console.error("Error setting notification preference:",u),u;return c}const n=Oe();n.notificationPreferences||(n.notificationPreferences=[]);const i=n.notificationPreferences.findIndex(c=>c.project_id===e&&c.user_id===t),s={id:i>=0?n.notificationPreferences[i].id:crypto.randomUUID(),project_id:e,user_id:t,notification_types:r,created_at:i>=0?n.notificationPreferences[i].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i>=0?n.notificationPreferences[i]=s:n.notificationPreferences.push(s),Ge(n),s},async removeNotificationPreference(e,t){if(P){const{error:n}=await T.from("notification_preferences").delete().eq("project_id",e).eq("user_id",t);if(n)throw console.error("Error removing notification preference:",n),n;return!0}const r=Oe();return r.notificationPreferences&&(r.notificationPreferences=r.notificationPreferences.filter(n=>!(n.project_id===e&&n.user_id===t)),Ge(r)),!0},async setProjectNotificationPreferences(e,t){const r=[];for(const n of t)if(n.notificationTypes&&n.notificationTypes.length>0){const i=await this.setNotificationPreference(e,n.userId,n.notificationTypes);r.push(i)}else await this.removeNotificationPreference(e,n.userId);return r},async getNotificationPresets(e){if(P){const{data:r,error:n}=await T.from("notification_presets").select("*").eq("company_id",e).order("name");return n?(console.error("Error fetching notification presets:",n),[]):r||[]}const t=Oe();return t.notificationPresets?t.notificationPresets.filter(r=>r.company_id===e):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:e},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:e},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:e},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:e}]},async createNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").insert({company_id:e,name:t,notification_types:r}).select().single();if(c)throw console.error("Error creating notification preset:",c),c;return s}const n=Oe();n.notificationPresets||(n.notificationPresets=[]);const i={id:crypto.randomUUID(),company_id:e,name:t,notification_types:r,created_at:new Date().toISOString()};return n.notificationPresets.push(i),Ge(n),i},async updateNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").update({name:t,notification_types:r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(c)throw console.error("Error updating notification preset:",c),c;return s}const n=Oe();if(!n.notificationPresets)return null;const i=n.notificationPresets.findIndex(s=>s.id===e);return i===-1?null:(n.notificationPresets[i]={...n.notificationPresets[i],name:t,notification_types:r,updated_at:new Date().toISOString()},Ge(n),n.notificationPresets[i])},async deleteNotificationPreset(e){if(P){const{error:r}=await T.from("notification_presets").delete().eq("id",e);if(r)throw console.error("Error deleting notification preset:",r),r;return!0}const t=Oe();return t.notificationPresets&&(t.notificationPresets=t.notificationPresets.filter(r=>r.id!==e),Ge(t)),!0},async getDumpSites(e){if(P){const{data:r,error:n}=await T.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",e).eq("active",!0).order("name");return n?(console.error("Error fetching dump sites:",n),[]):r||[]}return(Oe().dumpSites||[]).filter(r=>r.company_id===e&&r.active)},async createDumpSite(e,t,r="",n=""){if(P){const{data:c,error:u}=await T.from("dump_sites").insert({company_id:e,name:t,address:r,notes:n,active:!0}).select().single();if(u)throw console.error("Error creating dump site:",u),u;return c}const i=Oe();i.dumpSites||(i.dumpSites=[]);const s={id:crypto.randomUUID(),company_id:e,name:t,address:r,notes:n,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return i.dumpSites.push(s),Ge(i),s},async updateDumpSite(e,t){if(P){const{data:i,error:s}=await T.from("dump_sites").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error updating dump site:",s),s;return i}const r=Oe();if(!r.dumpSites)return null;const n=r.dumpSites.findIndex(i=>i.id===e);return n===-1?null:(r.dumpSites[n]={...r.dumpSites[n],...t},Ge(r),r.dumpSites[n])},async deleteDumpSite(e){return this.updateDumpSite(e,{active:!1})},async setDumpSiteRate(e,t,r,n="load"){if(P){const{data:u}=await T.from("dump_site_rates").select("id").eq("dump_site_id",e).eq("waste_type",t).maybeSingle();if(u){const{data:m,error:h}=await T.from("dump_site_rates").update({estimated_cost_per_load:r,unit:n}).eq("id",u.id).select().single();if(h)throw console.error("Error updating dump site rate:",h),h;return m}else{const{data:m,error:h}=await T.from("dump_site_rates").insert({dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n}).select().single();if(h)throw console.error("Error inserting dump site rate:",h),h;return m}}const i=Oe();i.dumpSiteRates||(i.dumpSiteRates=[]);const s=i.dumpSiteRates.findIndex(u=>u.dump_site_id===e&&u.waste_type===t),c={id:s>=0?i.dumpSiteRates[s].id:crypto.randomUUID(),dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n,created_at:new Date().toISOString()};return s>=0?i.dumpSiteRates[s]=c:i.dumpSiteRates.push(c),Ge(i),c},async getDumpSiteRates(e){if(P){const{data:r,error:n}=await T.from("dump_site_rates").select("*").eq("dump_site_id",e);return n?(console.error("Error fetching dump site rates:",n),[]):r||[]}return(Oe().dumpSiteRates||[]).filter(r=>r.dump_site_id===e)},async getHaulOffs(e){if(P){const{data:r,error:n}=await T.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",e).order("work_date",{ascending:!1});return n?(console.error("Error fetching haul-offs:",n),[]):r||[]}return(Oe().haulOffs||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.work_date)-new Date(r.work_date))},async createHaulOff(e,t){const r={project_id:e,dump_site_id:t.dumpSiteId,waste_type:t.wasteType,loads:t.loads,hauling_company:t.haulingCompany||"",work_date:t.workDate,notes:t.notes||"",estimated_cost:t.estimatedCost||0,created_by:t.createdBy||""};if(P){const{data:s,error:c}=await T.from("haul_offs").insert(r).select().single();if(c)throw console.error("Error creating haul-off:",c),c;return s}const n=Oe();n.haulOffs||(n.haulOffs=[]);const i={...r,id:crypto.randomUUID(),created_at:new Date().toISOString()};return n.haulOffs.push(i),Ge(n),i},async calculateHaulOffCosts(e){const t=await this.getHaulOffs(e);let r=0,n=0;const i={},s=[],c={};t.forEach(m=>{const h=parseFloat(m.estimated_cost)||0,p=parseInt(m.loads)||0;r+=h,n+=p,i[m.waste_type]||(i[m.waste_type]={loads:0,cost:0}),i[m.waste_type].loads+=p,i[m.waste_type].cost+=h,c[m.work_date]||(c[m.work_date]={date:m.work_date,loads:0,cost:0}),c[m.work_date].loads+=p,c[m.work_date].cost+=h}),Object.values(c).sort((m,h)=>new Date(h.date)-new Date(m.date)).forEach(m=>s.push(m));const u=s.length;return{totalCost:r,totalLoads:n,byWasteType:i,byDate:s,daysWithHaulOff:u,avgDailyHaulOffCost:u>0?r/u:0}},subscribeToHaulOffs(e,t){return P?T.channel(`haul_offs:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${e}`},t).subscribe():null},...TL,async createFolder(e,t,r){const n=be(),{data:i,error:s}=await n.from("document_folders").insert({company_id:e,project_id:t,name:r.name,description:r.description||null,icon:r.icon||"folder",color:r.color||"blue",sort_order:r.sort_order||0,created_by:(await n.auth.getUser()).data.user?.id}).select().single();if(s)throw s;return i},async getProjectFolders(e){const t=be(),{data:r,error:n}=await t.from("document_folders").select("*").eq("project_id",e).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(n)throw n;const i=r.map(s=>s.id);if(i.length>0){const{data:s,error:c}=await t.from("documents").select("folder_id").in("folder_id",i).is("archived_at",null).eq("is_current",!0);if(!c&&s){const u={};s.forEach(m=>{u[m.folder_id]=(u[m.folder_id]||0)+1}),r.forEach(m=>{m.document_count=u[m.id]||0})}}return r},async updateFolder(e,t){const r=be(),{data:n,error:i}=await r.from("document_folders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n},async deleteFolder(e){const t=be();await t.from("documents").update({folder_id:null}).eq("folder_id",e);const{error:r}=await t.from("document_folders").delete().eq("id",e);if(r)throw r;return!0},async reorderFolders(e,t){const r=be(),n=t.map(({id:i,sort_order:s})=>r.from("document_folders").update({sort_order:s,updated_at:new Date().toISOString()}).eq("id",i).eq("project_id",e));return await Promise.all(n),!0},async getFolderDocuments(e,t={}){const r=be(),{page:n=0,limit:i=25}=t;let s=r.from("documents").select("*",{count:"exact"}).eq("folder_id",e).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);const{data:c,error:u,count:m}=await s;if(u)throw u;return{documents:c||[],totalCount:m||0,hasMore:(m||0)>(n+1)*i}},async moveDocumentToFolder(e,t){const r=be(),{data:n,error:i}=await r.from("documents").update({folder_id:t}).eq("id",e).select().single();if(i)throw i;return n},async getUnfiledDocuments(e,t={}){const r=be(),{page:n=0,limit:i=25}=t,{data:s,error:c,count:u}=await r.from("documents").select("*",{count:"exact"}).eq("project_id",e).is("folder_id",null).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);if(c)throw c;return{documents:s||[],totalCount:u||0,hasMore:(u||0)>(n+1)*i}},async uploadDocument(e,t,r,n={}){const i=be(),s=Date.now(),c=250*1024*1024,{data:u}=await i.from("documents").select("file_size_bytes").eq("project_id",t).is("archived_at",null),m=u?.reduce((j,S)=>j+(S.file_size_bytes||0),0)||0;if(m+r.size>c){const j=Math.round(m/1024/1024),S=Math.round(c/1024/1024);throw new Error(`Project storage limit reached (${j}/${S} MB). Contact support to upgrade.`)}const h=Date.now(),p=new Uint8Array(6);crypto.getRandomValues(p);const g=Array.from(p,j=>j.toString(36)).join(""),_=r.name.split(".").pop()?.toLowerCase()||"bin",x=`${h}-${g}.${_}`,w=`${e}/${t}/documents/${x}`;try{const{data:j,error:S}=await i.storage.from("project-documents").upload(w,r,{cacheControl:"3600",upsert:!1});if(S)throw S;const{data:O}=i.storage.from("project-documents").getPublicUrl(w),C=O.publicUrl,A=n.category==="contracts"?"pending":"approved",{data:k,error:D}=await i.from("documents").insert({company_id:e,project_id:t,name:n.name||r.name.replace(/\.[^/.]+$/,""),description:n.description||null,file_name:r.name,file_size_bytes:r.size,mime_type:r.type,storage_path:w,folder_id:n.folderId||null,category:n.category||"general",tags:n.tags||[],visibility:n.visibility||"all",approval_status:A,resource_type:n.resourceType||null,resource_id:n.resourceId||null,uploaded_by:(await i.auth.getUser()).data?.user?.id}).select().single();if(D)throw D;const M=Date.now()-s;return Ke.storage("document_upload",{company_id:e,project_id:t,file_size:r.size,mime_type:r.type,duration:M,success:!0}),{...k,url:C}}catch(j){throw Ke.error("storage",{message:j.message,operation:"uploadDocument",company_id:e,project_id:t}),j}},async getProjectDocuments(e,{category:t=null,page:r=0,limit:n=25,includeArchived:i=!1}={}){let c=be().from("documents").select("*",{count:"exact"}).eq("project_id",e).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(r*n,(r+1)*n-1);i||(c=c.is("archived_at",null)),t&&t!=="all"&&(c=c.eq("category",t));const{data:u,error:m,count:h}=await c;if(m)throw m;return{documents:u||[],totalCount:h||0,hasMore:(r+1)*n<(h||0),page:r,limit:n}},async getDocument(e){const t=be(),{data:r,error:n}=await t.from("documents").select("*").eq("id",e).single();if(n)throw n;return r},async getDocumentVersions(e){const t=be(),{data:r,error:n}=await t.from("documents").select("id, parent_document_id").eq("id",e).single();if(n)throw n;const i=r.parent_document_id||e,{data:s,error:c}=await t.from("documents").select("*").or(`id.eq.${i},parent_document_id.eq.${i}`).order("version",{ascending:!1});if(c)throw c;return s||[]},async uploadDocumentVersion(e,t,r,n,i={}){const s=be(),{data:c,error:u}=await s.from("documents").select("*").eq("id",e).single();if(u)throw u;const{data:m}=await s.from("documents").select("version").or(`id.eq.${e},parent_document_id.eq.${e}`).order("version",{ascending:!1}).limit(1),h=(m?.[0]?.version||1)+1;await s.from("documents").update({is_current:!1}).or(`id.eq.${e},parent_document_id.eq.${e}`);const p=await this.uploadDocument(t,r,n,{name:i.name||c.name,description:i.description||c.description,category:c.category,visibility:c.visibility,tags:c.tags,resourceType:c.resource_type,resourceId:c.resource_id}),{data:g,error:_}=await s.from("documents").update({version:h,is_current:!0,parent_document_id:e}).eq("id",p.id).select().single();if(_)throw _;return await s.from("document_audit_log").insert({document_id:p.id,project_id:r,company_id:t,operation:"version_created",details:{version:h,parent_id:e},triggered_by:"user",user_id:(await s.auth.getUser()).data?.user?.id}),{...p,...g}},async updateDocument(e,t){const r=be(),{data:n,error:i}=await r.from("documents").update({name:t.name,description:t.description,category:t.category,visibility:t.visibility,tags:t.tags}).eq("id",e).select().single();if(i)throw i;return n},async archiveDocument(e){const t=be(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:new Date().toISOString(),archived_by:r}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"deleted",triggered_by:"user",user_id:r}),n},async restoreDocument(e){const t=be(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:null,archived_by:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"restored",triggered_by:"user",user_id:r}),n},async deleteDocumentPermanently(e){const t=be(),{data:r,error:n}=await t.from("documents").select("storage_path, company_id, project_id").eq("id",e).single();if(n)throw n;r.storage_path&&await t.storage.from("project-documents").remove([r.storage_path]);const{error:i}=await t.from("documents").delete().eq("id",e);if(i)throw i;return!0},async linkDocumentToResource(e,t,r){const n=be(),{data:i,error:s}=await n.from("documents").update({resource_type:t,resource_id:r}).eq("id",e).select().single();if(s)throw s;return await n.from("document_audit_log").insert({document_id:e,project_id:i.project_id,company_id:i.company_id,operation:"linked",details:{resource_type:t,resource_id:r},triggered_by:"user",user_id:(await n.auth.getUser()).data?.user?.id}),i},async unlinkDocumentFromResource(e){const t=be(),{data:r}=await t.from("documents").select("resource_type, resource_id, project_id, company_id").eq("id",e).single(),{data:n,error:i}=await t.from("documents").update({resource_type:null,resource_id:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:r.project_id,company_id:r.company_id,operation:"unlinked",details:{resource_type:r.resource_type,resource_id:r.resource_id},triggered_by:"user",user_id:(await t.auth.getUser()).data?.user?.id}),n},async getResourceDocuments(e,t){const r=be(),{data:n,error:i}=await r.from("documents").select("*").eq("resource_type",e).eq("resource_id",t).is("archived_at",null).order("uploaded_at",{ascending:!1});if(i)throw i;return n||[]},async approveDocument(e){const t=be(),{data:r,error:n}=await t.rpc("approve_document",{p_document_id:e});if(n)throw n;return r},async rejectDocument(e,t){const r=be(),{data:n,error:i}=await r.rpc("reject_document",{p_document_id:e,p_reason:t});if(i)throw i;return n},async getPendingDocuments(e){const t=be(),{data:r,error:n}=await t.from("documents").select("*, project:projects(name)").eq("company_id",e).eq("approval_status","pending").is("archived_at",null).order("uploaded_at",{ascending:!1});if(n)throw n;return r||[]},async searchDocuments(e,t){const r=be(),{data:n,error:i}=await r.from("documents").select("*").eq("project_id",e).eq("is_current",!0).is("archived_at",null).or(`name.ilike.%${t}%,description.ilike.%${t}%`).order("uploaded_at",{ascending:!1}).limit(20);if(i)throw i;return n||[]},async logDocumentAccess(e,t="downloaded"){const r=be(),{data:n}=await r.from("documents").select("project_id, company_id").eq("id",e).single();n&&await r.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:t,triggered_by:"user",user_id:(await r.auth.getUser()).data?.user?.id})}};Ib(async e=>{if(e&&P)try{await AN(ye)}catch(t){console.error("Error syncing pending actions:",t)}});const AZ=Object.freeze(Object.defineProperty({__proto__:null,auth:af,clearFieldSession:jy,db:ye,drawRequestOps:ML,equipmentOps:PL,getConnectionStatus:qn,getPendingActionCount:rf,getSupabaseClient:$i,isFieldMode:Sy,isSupabaseConfigured:P,onConnectionChange:Ib,supabase:T,syncPendingActions:AN},Symbol.toStringTag,{value:"Module"})),kN=y.createContext(),dn={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function Dd({children:e,companyId:t}){const[r,n]=y.useState(dn),[i,s]=y.useState(!0);y.useEffect(()=>{t?c(t):u()},[t]),y.useEffect(()=>{p(r)},[r]);const c=async w=>{try{if(s(!0),!P){n(dn),s(!1);return}const{data:j,error:S}=await T.from("company_branding").select("*").eq("company_id",w).single();S?(S.code==="PGRST116"?await m(w):console.error("Error loading branding:",S),n(dn)):n({...dn,...j})}catch(j){console.error("Error in loadBranding:",j),n(dn)}finally{s(!1)}},u=async()=>{try{s(!0);const w=window.location.hostname;if(w==="localhost"||w==="127.0.0.1"){n(dn),s(!1);return}if(!P){n(dn),s(!1);return}const{data:j,error:S}=await T.rpc("get_branding_by_domain",{domain_name:w});S||!j||j.length===0?n(dn):n({...dn,...j[0]})}catch(w){console.error("Error loading branding by domain:",w),n(dn)}finally{s(!1)}},m=async w=>{try{const{data:j,error:S}=await T.from("company_branding").insert({company_id:w,...dn}).select().single();S&&console.error("Error creating default branding:",S)}catch(j){console.error("Error in createDefaultBranding:",j)}},h=y.useCallback(async w=>{try{if(!P)return n(D=>({...D,...w})),{success:!0};if(!t)return{success:!1,error:"No company ID"};const j={},S=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const D of S)w[D]!==void 0&&(j[D]=w[D]);const{data:O,error:C}=await T.from("company_branding").select("id").eq("company_id",t).single();if(C&&C.code==="PGRST116"){const{data:D,error:M}=await T.from("company_branding").insert({company_id:t,...j}).select().single();return M?(console.error("Error creating branding:",M),{success:!1,error:M.message}):(n({...dn,...D}),{success:!0,data:D})}const{data:A,error:k}=await T.from("company_branding").update(j).eq("company_id",t).select().single();return k?(console.error("Error updating branding:",k),{success:!1,error:k.message}):(n({...dn,...A}),{success:!0,data:A})}catch(j){return console.error("Error in updateBranding:",j),{success:!1,error:j.message}}},[t]),p=w=>{const j=document.documentElement;if(j.style.setProperty("--primary-color",w.primary_color),j.style.setProperty("--secondary-color",w.secondary_color),w.favicon_url){let S=document.querySelector("link[rel*='icon']");S||(S=document.createElement("link"),S.rel="icon",document.head.appendChild(S)),S.href=w.favicon_url}document.title=w.custom_app_name||"FieldSync"},g=y.useCallback(async(w,j)=>{try{if(!P)return{success:!0,url:URL.createObjectURL(w)};const S=w.name.split(".").pop(),C=`branding/${`${t}/${j}-${Date.now()}.${S}`}`,{data:A,error:k}=await T.storage.from("public").upload(C,w,{cacheControl:"3600",upsert:!0});if(k)return console.error("Error uploading image:",k),{success:!1,error:k.message};const{data:{publicUrl:D}}=T.storage.from("public").getPublicUrl(C);return{success:!0,url:D}}catch(S){return console.error("Error in uploadBrandingImage:",S),{success:!1,error:S.message}}},[t]),_=y.useCallback(()=>{t?c(t):u()},[t]),x=y.useMemo(()=>({branding:r,loading:i,updateBranding:h,uploadBrandingImage:g,refreshBranding:_}),[r,i,h,g,_]);return d.jsx(kN.Provider,{value:x,children:e})}function RL(){const e=y.useContext(kN);if(!e)throw new Error("useBranding must be used within a BrandingProvider");return e}const DN=y.createContext();function Ng({children:e}){const[t,r]=y.useState(()=>{const s=localStorage.getItem("fieldsync-theme");return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});y.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("fieldsync-theme",t)},[t]),y.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: light)"),c=u=>{localStorage.getItem("fieldsync-theme")||r(u.matches?"light":"dark")};return s.addEventListener("change",c),()=>s.removeEventListener("change",c)},[]);const n=y.useCallback(()=>{r(s=>s==="dark"?"light":"dark")},[]),i=y.useMemo(()=>({theme:t,setTheme:r,toggleTheme:n}),[t,n]);return d.jsx(DN.Provider,{value:i,children:e})}function qL(){const e=y.useContext(DN);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}const zL=y.createContext(null);function LL({children:e}){const[t,r]=y.useState(null),[n,i]=y.useState([]),s=y.useCallback(()=>{r(null)},[]),c=y.useCallback((w,j="info",S=3e3)=>{if(t){i(O=>[...O,{message:w,type:j,duration:S}]);return}r({message:w,type:j,duration:S}),S>0&&setTimeout(()=>{r(null)},S)},[t]),u=y.useCallback(()=>{if(n.length>0){const[w,...j]=n;i(j),setTimeout(()=>{c(w.message,w.type,w.duration)},300)}},[n,c]),m=y.useCallback(()=>{s(),u()},[s,u]),h=y.useCallback((w,j)=>{c(w,"success",j)},[c]),p=y.useCallback((w,j)=>{c(w,"error",j)},[c]),g=y.useCallback((w,j)=>{c(w,"warning",j)},[c]),_=y.useCallback((w,j)=>{c(w,"info",j)},[c]),x=y.useMemo(()=>({toast:t,showToast:c,hideToast:m,success:h,error:p,warning:g,info:_}),[t,c,m,h,p,g,_]);return d.jsxs(zL.Provider,{value:x,children:[e,t&&d.jsx("div",{className:"toast-container",children:d.jsx("div",{className:`toast ${t.type}`,onClick:m,children:t.message})})]})}function qr({className:e="",showPoweredBy:t=!1}){const{branding:r}=RL();return d.jsxs("div",{className:`app-logo ${e}`,children:[r.logo_url?d.jsx("img",{src:r.logo_url,alt:r.custom_app_name||"Logo",className:"custom-logo"}):d.jsxs("div",{className:"logo",children:[r.custom_app_name||"Field",d.jsx("span",{children:"Sync"})]}),t&&!r.hide_fieldsync_branding&&d.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function IL(e){if(!e)return{score:0,label:"",color:""};let t=0;return e.length>=6&&t++,e.length>=8&&t++,/[A-Z]/.test(e)&&/[a-z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t<=1?{score:1,label:"Weak",color:"var(--accent-red)"}:t<=2?{score:2,label:"Fair",color:"var(--accent-orange)"}:t<=3?{score:3,label:"Good",color:"var(--accent-amber)"}:t<=4?{score:4,label:"Strong",color:"var(--accent-green)"}:{score:5,label:"Very strong",color:"var(--accent-green)"}}function YS(e=6){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",r=new Uint32Array(e);return crypto.getRandomValues(r),Array.from(r,n=>t[n%t.length]).join("")}function Ps(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function ic({steps:e,currentStep:t}){return d.jsx("div",{className:"onboarding-step-indicator",children:e.map((r,n)=>{const i=n+1,s=i===t,c=i<t;return d.jsxs("div",{className:"onboarding-step-wrapper",children:[n>0&&d.jsx("div",{className:`onboarding-step-line ${c?"completed":""}`}),d.jsx("div",{className:`onboarding-step-circle ${s?"active":""} ${c?"completed":""}`,children:c?d.jsx(Ki,{size:14}):i}),d.jsx("span",{className:`onboarding-step-label ${s?"active":""} ${c?"completed":""}`,children:r})]},n)})})}function GS({value:e,onChange:t,placeholder:r,onKeyDown:n,autoFocus:i,showStrength:s}){const[c,u]=y.useState(!1),m=IL(e);return d.jsxs("div",{className:"password-field",children:[d.jsxs("div",{className:"password-input-wrapper",children:[d.jsx("input",{type:c?"text":"password",value:e,onChange:t,placeholder:r||"Password",onKeyDown:n,autoFocus:i}),d.jsx("button",{type:"button",className:"password-toggle",onClick:()=>u(!c),tabIndex:-1,"aria-label":c?"Hide password":"Show password",children:c?d.jsx(ZR,{size:18}):d.jsx(QR,{size:18})})]}),s&&e&&d.jsxs("div",{className:"password-strength",children:[d.jsx("div",{className:"password-strength-bar",children:d.jsx("div",{className:"password-strength-fill",style:{width:`${m.score/5*100}%`,background:m.color}})}),d.jsx("span",{className:"password-strength-label",style:{color:m.color},children:m.label})]})]})}function UL({onForemanAccess:e,onOfficeLogin:t,onShowToast:r}){const[n]=mL(),[i,s]=y.useState(()=>{const he=n.get("mode");return he==="foreman"||he==="office"?he:null}),[c,u]=y.useState(""),[m,h]=y.useState(null),[p,g]=y.useState(""),[_,x]=y.useState(!1),[w,j]=y.useState(""),[S,O]=y.useState(null),[C,A]=y.useState(()=>{try{return localStorage.getItem("fieldsync_foreman_name")||""}catch{return""}}),k=y.useRef(null),D=y.useRef(null);y.useEffect(()=>()=>{k.current&&clearTimeout(k.current),D.current&&clearTimeout(D.current)},[]);const[M,z]=y.useState(""),[W,Y]=y.useState(""),[re,X]=y.useState(1),[I,se]=y.useState(null),[pe,q]=y.useState(""),[R,U]=y.useState(""),[te,ne]=y.useState(""),[we,Pe]=y.useState(""),[F,$]=y.useState(!1),[Se,De]=y.useState(1),[Ie,G]=y.useState(""),[_e,V]=y.useState(""),[xe,je]=y.useState(""),[oe,He]=y.useState(""),[ge,Ne]=y.useState(null),Re=he=>{const it=he.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);u(it)},jt=async()=>{if(c.length<2){r("Enter company code","error");return}x(!0);try{const he=await ye.getCompanyByCode(c);he?h(he):(r("Invalid company code","error"),u(""))}catch{r("Error checking code","error")}finally{x(!1)}},qe=async he=>{if(he.length===4){x(!0),j("");try{const it=await ye.getProjectByPinSecure(he,m.code);if(it.rateLimited){j("error"),r("Too many attempts. Please wait 15 minutes.","error"),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{g(""),j("")},800);return}if(it.success&&it.project){O(it.project);return}if(it.error){console.error("[Foreman Auth] PIN validation failed:",it.error),r(it.error,"error"),g("");return}r("Invalid PIN","error"),g("")}catch{r("Error checking PIN. Please check your connection.","error"),g("")}finally{x(!1)}}},It=()=>{if(!C.trim()){r("Enter your name to continue","error");return}try{localStorage.setItem("fieldsync_foreman_name",C.trim())}catch{}e(S,C.trim())},yt=he=>{if(p.length<4&&!_){const it=p+he;g(it),j(""),it.length===4&&(D.current&&clearTimeout(D.current),D.current=setTimeout(()=>qe(it),150))}},Ct=()=>{_||(g(he=>he.slice(0,-1)),j(""))},Br=()=>{h(null),g(""),j("")},xt=()=>{if(!M.trim()||!W.trim()){r("Enter email and password","error");return}t(M,W)},Ye=async()=>{if(c.length<2){r("Enter company code","error");return}x(!0);try{const he=await ye.getCompanyByCode(c);he?(se(he),X(2)):(r("Invalid company code","error"),u(""))}catch{r("Error checking code","error")}finally{x(!1)}},$r=async()=>{if(!pe.trim()){r("Enter office code","error");return}x(!0);try{const{data:he,error:it}=await T.rpc("verify_office_code",{company_id:I.id,code:pe.trim()});if(it)throw it;he===!0?X(3):(r("Invalid office code","error"),q(""))}catch{r("Error verifying code","error")}finally{x(!1)}},_n=async()=>{if(!_){if(!R.trim()){r("Enter your name","error");return}if(!te.trim()||!Ps(te)){r("Enter a valid email address","error");return}if(we.length<6){r("Password must be 6+ characters","error");return}x(!0);try{const he=te.toLowerCase().trim(),{data:it,error:xn}=await T.auth.signUp({email:he,password:we});let Qt;if(xn?.message?.includes("already registered")||it?.user&&it.user.identities?.length===0){const{data:qt,error:ft}=await T.auth.signInWithPassword({email:he,password:we});if(ft){r("Account exists with different password. Use your existing password.","error"),x(!1);return}Qt=qt.user.id;const{data:en}=await T.from("user_companies").select("id, status").eq("user_id",Qt).eq("company_id",I.id).maybeSingle();if(en){en.status==="active"?(r("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):en.status==="pending"?(r("Your request is still pending approval.","error"),await T.auth.signOut()):(r("Your membership was removed. Contact the company admin.","error"),await T.auth.signOut());return}const{error:$n}=await T.from("user_companies").insert({user_id:Qt,company_id:I.id,role:"member",status:"pending"});if($n)throw console.error("Error adding to user_companies:",$n),await T.auth.signOut(),new Error("Failed to submit join request");await T.auth.signOut(),$(!0)}else{if(xn)throw xn;{if(Qt=it.user?.id,!Qt)throw new Error("Failed to create user");const{error:qt}=await T.from("users").insert({id:Qt,email:he,password_hash:"managed_by_supabase_auth",name:R.trim(),company_id:I.id,role:"member",is_active:!0});if(qt)throw qt;const{error:ft}=await T.from("user_companies").insert({user_id:Qt,company_id:I.id,role:"member",status:"pending"});if(ft)throw console.error("Error adding to user_companies:",ft),new Error("Failed to submit join request");await T.auth.signOut(),$(!0)}}}catch(he){console.error("Join error:",he),r(he.message||"Error creating account","error")}finally{x(!1)}}},Hr=async()=>{if(!_){if(!_e.trim()){r("Enter your name","error");return}if(!xe.trim()||!Ps(xe)){r("Enter a valid email address","error");return}if(oe.length<6){r("Password must be 6+ characters","error");return}x(!0);try{const he=xe.toLowerCase().trim(),it=YS(6),xn=YS(6),{data:Qt,error:Ut}=await T.auth.signUp({email:he,password:oe});if(Ut){if(Ut.message?.includes("already registered"))r("An account with this email already exists. Sign in instead.","error");else throw Ut;return}const qt=Qt.user?.id;if(!qt)throw new Error("Failed to create account");const{data:ft,error:en}=await T.from("companies").insert({name:Ie.trim(),code:it,office_code:xn,subscription_tier:"free",owner_user_id:qt}).select().single();if(en)throw console.error("Company creation error:",en),new Error("Failed to create company. Please try again.");const{error:$n}=await T.from("users").insert({id:qt,email:he,password_hash:"managed_by_supabase_auth",name:_e.trim(),company_id:ft.id,role:"admin",is_active:!0});if($n)throw console.error("User record error:",$n),new Error("Failed to set up user profile");const{error:oa}=await T.from("user_companies").insert({user_id:qt,company_id:ft.id,role:"admin",access_level:"administrator",status:"active"});if(oa)throw console.error("User-company link error:",oa),new Error("Failed to link account to company");Ne({name:ft.name,code:it,officeCode:xn}),De(3)}catch(he){console.error("Registration error:",he),r(he.message||"Error creating company","error")}finally{x(!1)}}},jr=()=>{X(1),se(null),q(""),U(""),ne(""),Pe(""),$(!1),u("")},Yt=()=>{De(1),G(""),V(""),je(""),He(""),Ne(null)};if(i===null)return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in-up",children:[d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsxs("div",{className:"entry-buttons stagger-children",children:[d.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>s("foreman"),children:[d.jsx("span",{className:"entry-mode-icon",children:d.jsx(Po,{size:32})}),d.jsx("span",{className:"entry-mode-title",children:"Foreman"}),d.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),d.jsxs("button",{className:"entry-mode-btn office",onClick:()=>s("office"),children:[d.jsx("span",{className:"entry-mode-icon",children:d.jsx(WR,{size:32})}),d.jsx("span",{className:"entry-mode-title",children:"Office"}),d.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(i==="foreman")return S?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsx("div",{className:"entry-company-badge",children:S.name}),d.jsx("p",{className:"entry-subtitle",children:"Who's checking in?"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"text",value:C,onChange:he=>A(he.target.value),placeholder:"Your name",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&It()},style:{fontSize:"1.1rem",textAlign:"center"}}),d.jsx("button",{className:"entry-login-btn",onClick:It,disabled:!C.trim(),children:"Enter Site"})]}),d.jsx("p",{className:"entry-hint",style:{marginTop:"0.75rem"},children:"Your name will appear on reports and submissions"}),d.jsxs("button",{className:"entry-join-link",style:{marginTop:"0.5rem",display:"flex",alignSelf:"center"},onClick:()=>{O(null),g(""),j("")},children:[d.jsx(cr,{size:16}),d.jsx("span",{children:"Back"})]})]})}):m?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:Br,children:d.jsx(cr,{size:20})}),d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsx("div",{className:"entry-company-badge",children:m.name}),d.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),d.jsx("div",{className:`pin-display ${w==="error"?"shake":""}`,children:[0,1,2,3].map(he=>d.jsx("div",{className:`pin-dot ${p.length>he?"filled":""} ${w}`,children:p.length>he?"":""},he))}),d.jsxs("div",{className:"number-pad",role:"group","aria-label":"PIN entry keypad",children:[[1,2,3,4,5,6,7,8,9].map(he=>d.jsx("button",{className:"num-btn",onClick:()=>yt(he.toString()),disabled:_,"aria-label":String(he),children:he},he)),d.jsx("button",{className:"num-btn empty",disabled:!0,"aria-hidden":"true"}),d.jsx("button",{className:"num-btn",onClick:()=>yt("0"),disabled:_,"aria-label":"0",children:"0"}),d.jsx("button",{className:"num-btn backspace",onClick:Ct,disabled:_||p.length===0,"aria-label":"Delete last digit",children:d.jsx(cr,{size:18})})]}),_&&d.jsx("div",{className:"entry-loading",children:d.jsx("div",{className:"spinner"})})]})}):d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>s(null),children:d.jsx(cr,{size:20})}),d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),d.jsxs("div",{className:"entry-input-group",children:[d.jsx("input",{type:"text",value:c,onChange:he=>Re(he.target.value),placeholder:"Company Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&jt()}}),d.jsx("button",{className:"entry-submit-btn",onClick:jt,disabled:_||c.length<2,children:_?d.jsx("div",{className:"spinner-small"}):d.jsx(bc,{size:20})})]})]})});if(i==="office")return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>s(null),children:d.jsx(cr,{size:20})}),d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"email",value:M,onChange:he=>z(he.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&xt()}}),d.jsx("input",{type:"password",value:W,onChange:he=>Y(he.target.value),placeholder:"Password",onKeyDown:he=>{he.key==="Enter"&&xt()}}),d.jsx("button",{className:"entry-login-btn",onClick:xt,children:"Sign In"})]}),d.jsx("div",{className:"entry-signup-hint",children:d.jsxs("div",{className:"entry-signup-options",children:[d.jsxs("button",{className:"entry-join-link",onClick:()=>{jr(),s("join")},children:[d.jsx(YA,{size:16}),d.jsx("span",{children:"Join your company"})]}),d.jsxs("button",{className:"entry-join-link",onClick:()=>{Yt(),s("register")},children:[d.jsx(XR,{size:16}),d.jsx("span",{children:"Register a new company"})]})]})})]})});if(i==="join")return F?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-scale-in",children:[d.jsx("div",{className:"entry-success-icon",children:d.jsx(Ki,{size:32})}),d.jsx("h2",{className:"entry-success-title",children:"Request Submitted"}),d.jsxs("p",{className:"entry-success-message",children:["Your request to join ",d.jsx("strong",{children:I?.name})," has been submitted. A company admin will review and approve your access."]}),d.jsx("p",{className:"entry-success-detail",children:"You'll be able to sign in once approved."}),d.jsx("button",{className:"entry-login-btn",onClick:()=>{jr(),s("office")},style:{marginTop:"1.5rem"},children:"Back to Sign In"})]})}):re===1?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>{jr(),s("office")},children:d.jsx(cr,{size:20})}),d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsx(ic,{steps:["Company","Verify","Account"],currentStep:1}),d.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),d.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),d.jsxs("div",{className:"entry-input-group",children:[d.jsx("input",{type:"text",value:c,onChange:he=>Re(he.target.value),placeholder:"Company Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Ye()}}),d.jsx("button",{className:"entry-submit-btn",onClick:Ye,disabled:_||c.length<2,children:_?d.jsx("div",{className:"spinner-small"}):d.jsx(bc,{size:20})})]})]})}):re===2?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>{X(1),se(null),q("")},children:d.jsx(cr,{size:20})}),d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsx(ic,{steps:["Company","Verify","Account"],currentStep:2}),d.jsx("div",{className:"entry-company-badge",children:I?.name}),d.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),d.jsx("p",{className:"entry-hint",children:"This verifies your office access"}),d.jsxs("div",{className:"entry-input-group",children:[d.jsx("input",{type:"password",value:pe,onChange:he=>q(he.target.value),placeholder:"Office Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&$r()}}),d.jsx("button",{className:"entry-submit-btn",onClick:$r,disabled:_||!pe.trim(),children:_?d.jsx("div",{className:"spinner-small"}):d.jsx(bc,{size:20})})]})]})}):d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>{X(2),q("")},children:d.jsx(cr,{size:20})}),d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsx(ic,{steps:["Company","Verify","Account"],currentStep:3}),d.jsx("div",{className:"entry-company-badge",children:I?.name}),d.jsx("p",{className:"entry-subtitle",children:"Create your account"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"text",value:R,onChange:he=>U(he.target.value),placeholder:"Your Name",autoFocus:!0}),d.jsx("input",{type:"email",value:te,onChange:he=>ne(he.target.value),placeholder:"Email",className:te&&!Ps(te)?"input-error":""}),d.jsx(GS,{value:we,onChange:he=>Pe(he.target.value),placeholder:"Password (6+ characters)",onKeyDown:he=>{he.key==="Enter"&&_n()},showStrength:!0}),d.jsx("button",{className:"entry-login-btn",onClick:_n,disabled:_||!R.trim()||!Ps(te)||we.length<6,children:_?d.jsxs("span",{className:"btn-loading",children:[d.jsx("div",{className:"spinner-small"}),"Creating account..."]}):"Join Company"})]}),d.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})});if(i==="register"){if(Se===3&&ge)return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card entry-card-wide animate-scale-in",children:[d.jsx("div",{className:"entry-success-icon",children:d.jsx(Ki,{size:32})}),d.jsx("h2",{className:"entry-success-title",children:"Company Created"}),d.jsxs("p",{className:"entry-success-message",children:[d.jsx("strong",{children:ge.name})," is ready to go. Save these codes to share with your team."]}),d.jsxs("div",{className:"entry-codes-grid",children:[d.jsxs("div",{className:"entry-code-card",children:[d.jsx("span",{className:"entry-code-label",children:"Company Code"}),d.jsx("span",{className:"entry-code-value",children:ge.code}),d.jsx("span",{className:"entry-code-hint",children:"Share with all employees"})]}),d.jsxs("div",{className:"entry-code-card",children:[d.jsx("span",{className:"entry-code-label",children:"Office Code"}),d.jsx("span",{className:"entry-code-value",children:ge.officeCode}),d.jsx("span",{className:"entry-code-hint",children:"Office staff only"})]})]}),d.jsx("p",{className:"entry-codes-warning",children:"Save these codes now. You can also find them in your company settings later."}),d.jsx("button",{className:"entry-login-btn",onClick:()=>{window.location.reload()},style:{marginTop:"0.5rem"},children:"Go to Dashboard"})]})});if(Se===1)return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>{Yt(),s("office")},children:d.jsx(cr,{size:20})}),d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsx(ic,{steps:["Company","Your Account"],currentStep:1}),d.jsx("p",{className:"entry-subtitle",children:"Register your company"}),d.jsx("p",{className:"entry-hint",children:"Set up your company on FieldSync"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"text",value:Ie,onChange:he=>G(he.target.value),placeholder:"Company Name",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Ie.trim()&&De(2)}}),d.jsx("button",{className:"entry-login-btn",onClick:()=>De(2),disabled:!Ie.trim(),children:"Continue"})]})]})});if(Se===2)return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>De(1),children:d.jsx(cr,{size:20})}),d.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),d.jsx(ic,{steps:["Company","Your Account"],currentStep:2}),d.jsx("div",{className:"entry-company-badge",children:Ie}),d.jsx("p",{className:"entry-subtitle",children:"Create your admin account"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"text",value:_e,onChange:he=>V(he.target.value),placeholder:"Your Name",autoFocus:!0}),d.jsx("input",{type:"email",value:xe,onChange:he=>je(he.target.value),placeholder:"Email",className:xe&&!Ps(xe)?"input-error":""}),d.jsx(GS,{value:oe,onChange:he=>He(he.target.value),placeholder:"Password (6+ characters)",onKeyDown:he=>{he.key==="Enter"&&Hr()},showStrength:!0}),d.jsx("button",{className:"entry-login-btn",onClick:Hr,disabled:_||!_e.trim()||!Ps(xe)||oe.length<6,children:_?d.jsxs("span",{className:"btn-loading",children:[d.jsx("div",{className:"spinner-small"}),"Setting up company..."]}):"Create Company"})]}),d.jsx("p",{className:"entry-join-note",children:"You'll be the administrator. Company and office codes will be generated for you."})]})})}}function TN({message:e,type:t="",onClose:r}){return y.useEffect(()=>{const n=setTimeout(r,3e3);return()=>clearTimeout(n)},[r]),d.jsx("div",{className:"toast-container",children:d.jsx("div",{className:`toast ${t}`,children:e})})}function VS({compact:e=!1}){const{theme:t,toggleTheme:r}=qL();return d.jsx("button",{className:`theme-toggle ${e?"theme-toggle-compact":""}`,onClick:r,title:`Switch to ${t==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${t==="dark"?"light":"dark"} mode`,children:t==="dark"?d.jsxs(d.Fragment,{children:[d.jsx(GA,{size:e?18:16}),!e&&d.jsx("span",{children:"Light"})]}):d.jsxs(d.Fragment,{children:[d.jsx(VA,{size:e?18:16}),!e&&d.jsx("span",{children:"Dark"})]})})}class Li extends y.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("ErrorBoundary caught an error:",t,r),(t?.message?.includes("Failed to fetch dynamically imported module")||t?.message?.includes("Loading chunk")||t?.message?.includes("Loading CSS chunk"))&&(console.warn("[ErrorBoundary] Chunk load failure detected, clearing cache and reloading..."),"caches"in window?caches.keys().then(i=>{Promise.all(i.map(s=>caches.delete(s))).then(()=>{window.location.reload()})}).catch(i=>{console.warn("[ErrorBoundary] Cache clear failed, reloading anyway:",i.message),window.location.reload()}):window.location.reload())}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?d.jsx("div",{className:"error-boundary",children:d.jsxs("div",{className:"error-boundary-content",children:[d.jsx("div",{className:"error-icon",children:d.jsx(dm,{size:48})}),d.jsx("h2",{children:"Something went wrong"}),d.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),d.jsxs("div",{className:"error-actions",children:[d.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),d.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function WS(){const[e,t]=y.useState(qn()),[r,n]=y.useState(0),[i,s]=y.useState(!1),c=y.useRef(!1),u=y.useRef(null);return y.useEffect(()=>{const m=Ib(async p=>{t(p),p&&c.current&&(s(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>s(!1),3e3),c.current=!1),p||(c.current=!0);const g=await rf();n(g)});rf().then(n);const h=setInterval(async()=>{if(!qn()){const p=await rf();n(p)}},5e3);return()=>{m(),clearInterval(h),u.current&&clearTimeout(u.current)}},[]),e&&r===0&&!i?null:d.jsxs("div",{className:`offline-indicator ${e?"online":"offline"} ${i?"synced":""}`,children:[d.jsx("div",{className:"offline-indicator-content",children:e?i?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"online-icon",children:d.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("polyline",{points:"20 6 9 17 4 12"})})}),d.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):r>0?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"syncing-icon",children:d.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("polyline",{points:"23 4 23 10 17 10"}),d.jsx("polyline",{points:"1 20 1 14 7 14"}),d.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),d.jsxs("span",{className:"offline-text",children:["Syncing ",r,"..."]})]}):null:d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"offline-icon",children:d.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),d.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),d.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),d.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),d.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),d.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),d.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),d.jsxs("span",{className:"offline-text",children:["Offline",r>0&&d.jsxs("span",{className:"pending-badge",children:[r," pending"]})]})]})}),d.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}function BL(){const[e,t]=y.useState(null),[r,n]=y.useState(!1);y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const c=localStorage.getItem("pwa-install-dismissed");if(c){const m=parseInt(c,10);if(Date.now()-m<10080*60*1e3)return}const u=m=>{m.preventDefault(),t(m),n(!0)};return window.addEventListener("beforeinstallprompt",u),()=>window.removeEventListener("beforeinstallprompt",u)},[]);const i=async()=>{if(!e)return;e.prompt();const{outcome:c}=await e.userChoice;c==="accepted"&&n(!1),t(null)},s=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return r?d.jsxs("div",{className:"install-prompt",children:[d.jsxs("div",{className:"install-prompt-content",children:[d.jsx(WA,{size:20}),d.jsxs("div",{className:"install-prompt-text",children:[d.jsx("strong",{children:"Install FieldSync"}),d.jsx("span",{children:"Add to home screen for quick access"})]})]}),d.jsxs("div",{className:"install-prompt-actions",children:[d.jsx("button",{className:"btn btn-primary btn-small",onClick:i,children:"Install"}),d.jsx("button",{className:"install-prompt-dismiss",onClick:s,"aria-label":"Dismiss",children:d.jsx(Ic,{size:18})})]})]}):null}function $L({factorId:e,onVerified:t,onCancel:r}){const[n,i]=y.useState(""),[s,c]=y.useState(!1),[u,m]=y.useState(null),h=async()=>{if(n.length===6){c(!0),m(null);try{const{data:g,error:_}=await T.auth.mfa.challenge({factorId:e});if(_)throw _;const{error:x}=await T.auth.mfa.verify({factorId:e,challengeId:g.id,code:n});if(x)throw x;t()}catch{m("Invalid code. Please try again."),i("")}finally{c(!1)}}},p=g=>{g.key==="Enter"&&n.length===6&&h()};return d.jsxs("div",{className:"mfa-challenge",children:[d.jsx("div",{className:"mfa-challenge-icon",children:d.jsx(XA,{size:40})}),d.jsx("h2",{children:"Two-Factor Authentication"}),d.jsx("p",{children:"Enter the 6-digit code from your authenticator app"}),d.jsx("div",{className:"mfa-code-input",children:d.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value.replace(/\D/g,"").slice(0,6)),onKeyDown:p,placeholder:"000000",maxLength:6,autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*",className:"mfa-input-large","aria-label":"MFA verification code"})}),u&&d.jsx("p",{className:"mfa-error",children:u}),d.jsxs("div",{className:"mfa-challenge-actions",children:[d.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Cancel"}),d.jsx("button",{className:"btn btn-primary",onClick:h,disabled:n.length!==6||s,children:s?d.jsxs(d.Fragment,{children:[d.jsx($s,{size:14,className:"spinner"})," Verifying..."]}):"Verify"})]})]})}function NZ(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function HL(e){if(!e||e.length===0)return 0;let t=0;return e.forEach(r=>{r.status==="done"&&(t+=r.weight||0)}),Math.round(t)}function kZ(e){if(!e||e.length===0)return{progress:0,earnedValue:0,totalValue:0,isValueBased:!1};if(e.some(n=>n.scheduled_value>0)){const n=e.reduce((c,u)=>c+(u.scheduled_value||0),0),i=e.filter(c=>c.status==="done").reduce((c,u)=>c+(u.scheduled_value||0),0);return{progress:n>0?Math.round(i/n*100):0,earnedValue:i,totalValue:n,isValueBased:!0}}const r=e.filter(n=>n.status==="done").reduce((n,i)=>n+(i.weight||0),0);return{progress:Math.round(r),earnedValue:0,totalValue:0,isValueBased:!1}}function FL(e){if(!e||e.length===0)return"not_started";const t=e.some(i=>i.status==="working"),r=e.some(i=>i.status==="done");return e.every(i=>i.status==="done")?"done":t||r?"working":"not_started"}function DZ(e){const t=FL(e);return t==="done"?"Complete":t==="working"?"In Progress":"Not Started"}function TZ(e,t=0){const r=new Date;r.setHours(0,0,0,0);const n={scheduleStatus:"on_track",scheduleVariance:0,scheduleLabel:"On Track",laborStatus:"on_track",laborVariance:0,laborLabel:null,hasScheduleData:!1,hasLaborData:!1};if(e.start_date&&e.end_date){const i=new Date(e.start_date),s=new Date(e.end_date);i.setHours(0,0,0,0),s.setHours(0,0,0,0);const c=Math.max(1,Math.ceil((s-i)/(1e3*60*60*24))),u=Math.max(0,Math.ceil((r-i)/(1e3*60*60*24))),m=Math.min(100,u/c*100),p=(e.progress||0)-m;n.scheduleVariance=Math.round(p),n.hasScheduleData=!0,p>5?(n.scheduleStatus="ahead",n.scheduleLabel=`Ahead of Schedule (+${n.scheduleVariance}%)`):p<-5?(n.scheduleStatus="behind",n.scheduleLabel=`Behind Schedule (${n.scheduleVariance}%)`):(n.scheduleStatus="on_track",n.scheduleLabel="On Track")}if(e.planned_man_days&&e.planned_man_days>0){const s=(e.progress||0)/100*e.planned_man_days;if(s>0&&t>0){const c=(t-s)/s*100;n.laborVariance=Math.round(c),n.hasLaborData=!0,c>10?(n.laborStatus="over",n.laborLabel=`Over Planned (+${n.laborVariance}% man-days)`):c<-10?(n.laborStatus="under",n.laborLabel=`Under Planned (${n.laborVariance}% man-days)`):(n.laborStatus="on_track",n.laborLabel="Labor On Track")}else t>0&&(n.hasLaborData=!0,n.laborLabel=`${t} man-days used`)}return n}function PZ(e,t=30){if(e.status==="archived"||e.progress<100)return!1;const r=e.areas||[];if(r.length===0||!r.every(c=>c.status==="done"))return!1;const i=r.reduce((c,u)=>{const m=new Date(u.updated_at);return m>c?m:c},new Date(0));return i.getTime()===0?!1:Math.floor((Date.now()-i.getTime())/(1e3*60*60*24))>=t}const MZ=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[59,130,246]},KL=(e,t=5e3,r=.85)=>new Promise(n=>{if(!e){n(null);return}const i=new Image;i.crossOrigin="anonymous";const s=setTimeout(()=>{i.src="",n(null)},t);i.onload=()=>{clearTimeout(s);try{const c=document.createElement("canvas");c.width=i.width,c.height=i.height,c.getContext("2d").drawImage(i,0,0);const m=c.toDataURL("image/jpeg",r);n(m)}catch{n(null)}},i.onerror=()=>{clearTimeout(s),n(null)},i.src=e}),RZ=async(e,t=5e3,r=.85)=>!e||e.length===0?[]:await Promise.all(e.map(i=>KL(i,t,r)));async function Oy(e,t=1920,r=.8){return!e.type.startsWith("image/")||e.size<500*1024?e:new Promise(n=>{const i=document.createElement("canvas"),s=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:m}=c;u>t&&(m=Math.round(m*t/u),u=t);const h=1920;m>h&&(u=Math.round(u*h/m),m=h),i.width=u,i.height=m,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(c,0,0,u,m),i.toBlob(p=>{if(p){const g=e.name.replace(/\.[^/.]+$/,""),_=new File([p],`${g}.jpg`,{type:"image/jpeg",lastModified:Date.now()});n(_)}else console.warn("Image compression failed, using original"),n(e)},"image/jpeg",r),URL.revokeObjectURL(c.src)},c.onerror=()=>{console.warn("Failed to load image for compression, using original"),URL.revokeObjectURL(c.src),n(e)},c.src=URL.createObjectURL(e)})}function YL(e=5e3){return new Promise(t=>{if(!navigator.geolocation){t(null);return}navigator.geolocation.getCurrentPosition(r=>{t({latitude:r.coords.latitude,longitude:r.coords.longitude,accuracy:Math.round(r.coords.accuracy)})},()=>t(null),{enableHighAccuracy:!0,timeout:e,maximumAge:6e4})})}const kg=["Containment","PPE","Disposal","Equipment"],PN={en:{workInfo:"Work Details",crewHours:"Crew & Hours",materialsEquipment:"Materials",evidence:"Evidence",review:"Review",quickActions:"Quick Actions",sameAsYesterday:"Same as Yesterday",setCrewHours:"Set Crew Hours",loading:"Loading...",supervision:"Supervision",operators:"Operators",laborers:"Laborers",addSupervision:"+ Add Supervision",addOperator:"+ Add Operator",addLaborer:"+ Add Laborer",foreman:"Foreman",superintendent:"Superintendent",firstLastName:"First & Last Name",start:"Start",end:"End",regHrs:"Reg Hrs",otHrs:"OT Hrs",selectCategory:"Select a category:",addCustomItem:"+ Add Custom Item",customItem:"Custom Item",itemName:"Item Name",category:"Category",quantity:"Quantity",addItem:"Add Item",cancel:"Cancel",noItemsCategory:"No items in this category yet",workDate:"Work Date",ceNumber:"CE/PCO #",optional:"optional",linkedCOR:"Link to Change Order",selectCOR:"Select COR (optional)",noCORs:"No pending CORs",laborSummary:"Labor Summary",worker:"worker",workers_plural:"workers",totalHours:"Total Hours",regular:"Regular",overtime:"Overtime",materials:"Materials",item:"item",items_plural:"items",noMaterials:"No materials added",notes:"Notes",addNotes:"Add notes about the work performed...",photos:"Photos",addPhotos:"Add Photos",maxPhotos:"max",noPhotos:"No photos added",certification:"Certification",certifyStatement:"I certify that this Time & Material ticket accurately reflects the work performed.",foremanSignature:"Foreman's Name (Signature)",yourName:"Your name",describeWork:"Describe the work performed",descriptionRequired:"Description is required",whatWorkPerformed:"What work was performed today?",searchMaterials:"Search materials & equipment...",noSearchResults:"No items found",orBrowse:"Or browse by category:",back:"Back",next:"Next",nextCrew:"Next: Crew",nextMaterials:"Next: Materials",reviewItems:"Review",skipNoMaterials:"Skip (no materials)",submitTM:"Submit Ticket",submitting:"Submitting...",applySameHours:"Apply Same Hours",batchDescription:"Set start/end time and hours for all workers with names entered.",timeStarted:"Time Started",timeEnded:"Time Ended",regularHours:"Regular Hours",overtimeHours:"Overtime Hours",willApplyTo:"Will apply to",applyToAll:"Apply to All",preset8hr:"8hr Day",preset10hr:"10hr Day",preset4hr:"4hr Day",loadedWorkers:"Loaded {count} workers from {date}",noPreviousCrew:"No previous crew found for this project",appliedHours:"Applied hours to {count} worker(s)",assignedToCOR:"Assigned to COR",photoEvidence:"Photo Evidence",photosAdded:"photo(s) added",recommendedForBilling:"Recommended for billing",addMorePhotos:"Add More Photos",linkToChangeOrder:"Link to Change Order",linkedTo:"Linked to",optionalLinkCOR:"Optional - Link this ticket to a COR",selectCOROptional:"-- Select a COR (optional) --",noActiveCORs:"No active CORs available for this project",addWorkersFirst:"Add workers first",errorLoadingCrew:"Error loading previous crew",descriptionRecommended:"Description recommended",workersNoHours:"worker(s) have no hours entered",nameRequired:"Name required to submit",submitted:"Submitted",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Review & Submit",enterNameToSubmit:"Enter name to submit",done:"Done",skipSignature:"Skip signature for now",total:"total",needHours:"need hours",customHours:"Custom hours",selectTMWorkers:"Select Workers",tapToAdd:"Tap to add",removeClass:"Remove this labor class",add:"Add",addLaborClass:"Add Labor Class...",other:"Other",noCustomClasses:"No custom labor classes set up for this company. Using default categories.",loadingLaborClasses:"Loading labor classes...",noLaborClassesYet:"No labor classes added yet. Select from crew check-in above or add manually:",tmSubmitted:"Time & Material Ticket Submitted!",ticketSavedReady:"Your ticket has been saved and is ready for client signature.",workersLabel:"Workers",retry:"Retry",retryAllPhotos:"Retry All Failed Photos",getClientSignature:"Get Client Signature",signatureDescription:"Have the client sign this ticket to verify the work performed.",clientSignatureCollected:"Client signature collected!",signNowOnSite:"Sign Now (On-Site)",clientSignsDevice:"Client signs on this device",sendSignatureLink:"Send Signature Link",clientSignsLater:"Client signs later via link",ticketSummary:"Ticket Summary",edit:"Edit",submittedBy:"Submitted By",enterYourName:"Enter your name",certifyAccurate:"By submitting, you certify this Time & Material ticket is accurate."},es:{workInfo:"Info del Trabajo",crewHours:"Cuadrilla y Horas",materialsEquipment:"Materiales",evidence:"Evidencia",review:"Revisar",quickActions:"Acciones Rapidas",sameAsYesterday:"Igual que Ayer",setCrewHours:"Poner Horas",loading:"Cargando...",supervision:"Supervision",operators:"Operadores",laborers:"Trabajadores",addSupervision:"+ Agregar Supervision",addOperator:"+ Agregar Operador",addLaborer:"+ Agregar Trabajador",foreman:"Capataz",superintendent:"Superintendente",firstLastName:"Nombre y Apellido",start:"Inicio",end:"Fin",regHrs:"Hrs Reg",otHrs:"Hrs Extra",selectCategory:"Seleccione una categoria:",addCustomItem:"+ Agregar Articulo",customItem:"Articulo Personalizado",itemName:"Nombre del Articulo",category:"Categoria",quantity:"Cantidad",addItem:"Agregar",cancel:"Cancelar",noItemsCategory:"No hay articulos en esta categoria",workDate:"Fecha de Trabajo",ceNumber:"CE/PCO #",optional:"opcional",linkedCOR:"Vincular a Orden de Cambio",selectCOR:"Seleccionar COR (opcional)",noCORs:"No hay CORs pendientes",laborSummary:"Resumen de Mano de Obra",worker:"trabajador",workers_plural:"trabajadores",totalHours:"Horas Totales",regular:"Regular",overtime:"Extra",materials:"Materiales",item:"articulo",items_plural:"articulos",noMaterials:"No se agregaron materiales",notes:"Notas",addNotes:"Agregar notas sobre el trabajo realizado...",photos:"Fotos",addPhotos:"Agregar Fotos",maxPhotos:"max",noPhotos:"No se agregaron fotos",certification:"Certificacion",certifyStatement:"Certifico que este ticket de Tiempo y Material refleja con precision el trabajo realizado.",foremanSignature:"Nombre del Capataz (Firma)",yourName:"Su nombre",describeWork:"Describir el trabajo realizado",descriptionRequired:"Descripcion es requerida",whatWorkPerformed:"Que trabajo se realizo hoy?",searchMaterials:"Buscar materiales y equipo...",noSearchResults:"No se encontraron articulos",orBrowse:"O navegar por categoria:",back:"Atras",next:"Siguiente",nextCrew:"Siguiente: Cuadrilla",nextMaterials:"Siguiente: Materiales",reviewItems:"Revisar",skipNoMaterials:"Saltar (sin materiales)",submitTM:"Enviar Ticket",submitting:"Enviando...",applySameHours:"Aplicar Mismas Horas",batchDescription:"Establezca hora de inicio/fin y horas para todos los trabajadores.",timeStarted:"Hora de Inicio",timeEnded:"Hora de Fin",regularHours:"Horas Regulares",overtimeHours:"Horas Extra",willApplyTo:"Se aplicara a",applyToAll:"Aplicar a Todos",preset8hr:"Dia 8hr",preset10hr:"Dia 10hr",preset4hr:"Dia 4hr",loadedWorkers:"Se cargaron {count} trabajadores del {date}",noPreviousCrew:"No se encontro equipo anterior para este proyecto",appliedHours:"Horas aplicadas a {count} trabajador(es)",assignedToCOR:"Asignado a COR",photoEvidence:"Evidencia Fotogrfica",photosAdded:"foto(s) agregada(s)",recommendedForBilling:"Recomendado para facturacin",addMorePhotos:"Agregar Ms Fotos",linkToChangeOrder:"Vincular a Orden de Cambio",linkedTo:"Vinculado a",optionalLinkCOR:"Opcional - Vincular este ticket a un COR",selectCOROptional:"-- Seleccionar COR (opcional) --",noActiveCORs:"No hay CORs activos para este proyecto",addWorkersFirst:"Agregue trabajadores primero",errorLoadingCrew:"Error cargando equipo anterior",descriptionRecommended:"Descripcion recomendada",workersNoHours:"trabajador(es) sin horas",nameRequired:"Nombre requerido",submitted:"Enviado",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Revisar y Enviar",enterNameToSubmit:"Ingrese nombre",done:"Listo",skipSignature:"Saltar firma por ahora",total:"total",needHours:"sin horas",customHours:"Horas personalizadas",selectTMWorkers:"Seleccionar Trabajadores",tapToAdd:"Toca para agregar",removeClass:"Eliminar esta clase",add:"Agregar",addLaborClass:"Agregar Clase de Trabajo...",other:"Otros",noCustomClasses:"No hay clases de trabajo personalizadas. Usando categorias predeterminadas.",loadingLaborClasses:"Cargando clases de trabajo...",noLaborClassesYet:"No hay clases de trabajo agregadas. Seleccione del check-in o agregue manualmente:",tmSubmitted:"Ticket de Tiempo y Material Enviado!",ticketSavedReady:"Su ticket ha sido guardado y est listo para la firma del cliente.",workersLabel:"Trabajadores",retry:"Reintentar",retryAllPhotos:"Reintentar Todas las Fotos",getClientSignature:"Obtener Firma del Cliente",signatureDescription:"Haga que el cliente firme este ticket para verificar el trabajo realizado.",clientSignatureCollected:"Firma del cliente recopilada!",signNowOnSite:"Firmar Ahora",clientSignsDevice:"Cliente firma en este dispositivo",sendSignatureLink:"Enviar Enlace",clientSignsLater:"Cliente firma despus va enlace",ticketSummary:"Resumen del Ticket",edit:"Editar",submittedBy:"Enviado Por",enterYourName:"Ingrese su nombre",certifyAccurate:"Al enviar, certifica que este ticket de Tiempo y Material es preciso."}},GL=e=>t=>PN[e]?.[t]||t;function VL({project:e,workDate:t,setWorkDate:r,cePcoNumber:n,setCePcoNumber:i,notes:s,setNotes:c,t:u,lang:m}){return d.jsxs("div",{className:"tm-step-content",children:[d.jsxs("div",{className:"tm-project-info",children:[e.job_number&&d.jsxs("div",{className:"tm-project-detail",children:[d.jsx("span",{className:"tm-project-label",children:"Job #"}),d.jsx("span",{className:"tm-project-value",children:e.job_number})]}),d.jsxs("div",{className:"tm-project-detail",children:[d.jsx("span",{className:"tm-project-label",children:"Project"}),d.jsx("span",{className:"tm-project-value",children:e.name})]}),e.address&&d.jsxs("div",{className:"tm-project-detail",children:[d.jsx("span",{className:"tm-project-label",children:"Address"}),d.jsx("span",{className:"tm-project-value",children:e.address})]}),e.general_contractor&&d.jsxs("div",{className:"tm-project-detail",children:[d.jsx("span",{className:"tm-project-label",children:"GC"}),d.jsx("span",{className:"tm-project-value",children:e.general_contractor})]})]}),d.jsxs("div",{className:"tm-field-row",children:[d.jsxs("div",{className:"tm-field tm-field-half",children:[d.jsx("label",{children:"Date"}),d.jsx("input",{type:"date",value:t,onChange:h=>r(h.target.value),className:"tm-date"})]}),d.jsxs("div",{className:"tm-field tm-field-half",children:[d.jsx("label",{children:"CE / PCO #"}),d.jsx("input",{type:"text",placeholder:"Change Event / PCO",value:n,onChange:h=>i(h.target.value),className:"tm-input"})]})]}),d.jsxs("div",{className:"tm-field tm-description-field",children:[d.jsxs("label",{children:[d.jsx(Fo,{size:16,className:"inline-icon"}),u("describeWork")," ",d.jsx("span",{className:"tm-required",children:"*"})]}),d.jsx("textarea",{placeholder:u("whatWorkPerformed"),value:s,onChange:h=>c(h.target.value),rows:4,className:`tm-description ${s.trim()?"":"tm-field-required"}`})]})]})}const WL=e=>{if(!e)return"empty";const t=e.name&&e.name.trim()!=="",r=parseFloat(e.hours)>0||parseFloat(e.overtimeHours)>0;return t?r?"complete":"incomplete":"empty"},XS=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function oc({worker:e,index:t,onUpdate:r,onRemove:n,t:i,roleSelect:s}){const c=WL(e);return d.jsxs("div",{className:`tm-worker-card-expanded ${c!=="empty"?`worker-${c}`:""}`,children:[d.jsxs("div",{className:"tm-worker-row-top",children:[c==="complete"&&d.jsx("span",{className:"tm-worker-check",children:d.jsx(Ki,{size:14})}),s,d.jsx("input",{type:"text",placeholder:i("firstLastName"),value:e.name,onChange:u=>r(t,"name",u.target.value),className:"tm-worker-input"}),d.jsx("button",{className:"tm-remove",onClick:()=>n(t),children:""})]}),d.jsxs("div",{className:"tm-worker-row-bottom",children:[d.jsxs("div",{className:"tm-time-group",children:[d.jsx("label",{children:i("start")}),d.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>r(t,"timeStarted",u.target.value)})]}),d.jsxs("div",{className:"tm-time-group",children:[d.jsx("label",{children:i("end")}),d.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>r(t,"timeEnded",u.target.value)})]}),d.jsxs("div",{className:"tm-time-group",children:[d.jsx("label",{children:i("regHrs")}),d.jsx("input",{type:"number",placeholder:"0",value:e.hours,onChange:u=>r(t,"hours",u.target.value)})]}),d.jsxs("div",{className:"tm-time-group",children:[d.jsx("label",{children:i("otHrs")}),d.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>r(t,"overtimeHours",u.target.value)})]})]})]})}function XL({batchHours:e,setBatchHours:t,namedWorkerCount:r,onApply:n,onClose:i,t:s}){const c=u=>{let m,h,p,g;switch(u){case"full":m="07:00",h="15:30",p="8",g="";break;case"10hr":m="06:00",h="16:30",p="8",g="2";break;case"half":m="07:00",h="11:00",p="4",g="";break;default:return}t({timeStarted:m,timeEnded:h,hours:p,overtimeHours:g})};return d.jsx("div",{className:"tm-modal-overlay",onClick:i,children:d.jsxs("div",{className:"tm-batch-modal",onClick:u=>u.stopPropagation(),children:[d.jsxs("h3",{children:[d.jsx(Mo,{size:18})," ",s("applySameHours")]}),d.jsx("p",{className:"tm-batch-description",children:s("batchDescription")}),d.jsxs("div",{className:"tm-time-presets",children:[d.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("full"),children:s("preset8hr")}),d.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("10hr"),children:s("preset10hr")}),d.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("half"),children:s("preset4hr")})]}),d.jsxs("div",{className:"tm-batch-form",children:[d.jsxs("div",{className:"tm-batch-row",children:[d.jsxs("div",{className:"tm-batch-field",children:[d.jsx("label",{children:s("timeStarted")}),d.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>{const m=u.target.value,h=XS(m,e.timeEnded);t({...e,timeStarted:m,...h||{}})}})]}),d.jsxs("div",{className:"tm-batch-field",children:[d.jsx("label",{children:s("timeEnded")}),d.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>{const m=u.target.value,h=XS(e.timeStarted,m);t({...e,timeEnded:m,...h||{}})}})]})]}),d.jsxs("div",{className:"tm-batch-row",children:[d.jsxs("div",{className:"tm-batch-field",children:[d.jsx("label",{children:s("regularHours")}),d.jsx("input",{type:"number",placeholder:"8",value:e.hours,onChange:u=>t({...e,hours:u.target.value})})]}),d.jsxs("div",{className:"tm-batch-field",children:[d.jsx("label",{children:s("overtimeHours")}),d.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>t({...e,overtimeHours:u.target.value})})]})]})]}),d.jsxs("div",{className:"tm-batch-preview",children:[d.jsxs("strong",{children:[s("willApplyTo"),":"]}),d.jsxs("span",{children:[r," ",s("workers_plural")]})]}),d.jsxs("div",{className:"tm-batch-actions",children:[d.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:s("cancel")}),d.jsx("button",{type:"button",className:"btn btn-primary",onClick:n,disabled:!e.hours&&!e.overtimeHours,children:s("applyToAll")})]})]})})}function ZL({supervision:e,operators:t,laborers:r,dynamicWorkers:n,activeLaborClassIds:i,setActiveLaborClassIds:s,laborCategories:c,laborClasses:u,hasCustomLaborClasses:m,loadingLaborClasses:h,todaysCrew:p,showBatchHoursModal:g,setShowBatchHoursModal:_,batchHours:x,setBatchHours:w,loadingPreviousCrew:j,namedWorkers:S,workersNeedingHours:O,totalRegHours:C,totalOTHours:A,onLoadPreviousCrew:k,onApplyBatchHours:D,onApplyInlinePreset:M,onAddCrewWorker:z,onActivateLaborClass:W,onDeactivateLaborClass:Y,addSupervision:re,updateSupervision:X,removeSupervision:I,addOperator:se,updateOperator:pe,removeOperator:q,addLaborer:R,updateLaborer:U,removeLaborer:te,addDynamicWorker:ne,updateDynamicWorker:we,removeDynamicWorker:Pe,getInactiveLaborClasses:F,t:$,lang:Se,onShowToast:De}){const Ie=S.length;return d.jsxs("div",{className:"tm-step-content",children:[d.jsxs("div",{className:"tm-crew-summary-bar",children:[d.jsxs("div",{className:"tm-summary-left",children:[d.jsx("span",{className:"tm-summary-count",children:S.length}),d.jsx("span",{className:"tm-summary-label",children:S.length===1?$("worker"):$("workers_plural")})]}),d.jsxs("div",{className:"tm-summary-middle",children:[d.jsxs("span",{className:"tm-summary-hours",children:[C+A,"h"]}),d.jsx("span",{className:"tm-summary-label",children:$("total")})]}),O>0&&d.jsxs("div",{className:"tm-summary-warning",children:[d.jsx(kb,{size:14}),d.jsxs("span",{children:[O," ",$("needHours")]})]})]}),d.jsxs("div",{className:"tm-quick-actions-row",children:[d.jsxs("button",{className:"tm-quick-action",onClick:k,disabled:j,children:[d.jsx(JR,{size:16}),d.jsx("span",{children:$(j?"loading":"sameAsYesterday")})]}),S.length>0&&d.jsxs("div",{className:"tm-time-presets-inline",children:[d.jsx("button",{className:"tm-preset-chip",onClick:()=>M("8hr"),children:"8h"}),d.jsx("button",{className:"tm-preset-chip",onClick:()=>M("10hr"),children:"10h"}),d.jsx("button",{className:"tm-preset-chip",onClick:()=>M("4hr"),children:"4h"}),d.jsx("button",{className:"tm-preset-chip more",onClick:()=>_(!0),title:$("customHours"),children:d.jsx(Mo,{size:14})})]})]}),p.length>0&&d.jsxs("div",{className:"tm-crew-select-section",children:[d.jsxs("div",{className:"tm-section-header",children:[d.jsxs("h4",{children:[d.jsx(Po,{size:16})," ",$("selectTMWorkers")]}),d.jsx("span",{className:"tm-section-hint",children:$("tapToAdd")})]}),d.jsx("div",{className:"tm-crew-grid",children:p.map((G,_e)=>{const V=e.some(oe=>oe.name.toLowerCase()===G.name.toLowerCase())||t.some(oe=>oe.name.toLowerCase()===G.name.toLowerCase())||r.some(oe=>oe.name.toLowerCase()===G.name.toLowerCase()),xe=Object.values(n).some(oe=>oe.some(He=>He.name.toLowerCase()===G.name.toLowerCase())),je=V||xe;return d.jsxs("button",{className:`tm-crew-item ${je?"added":""}`,onClick:()=>{je||z(G)},disabled:je,children:[d.jsx("span",{className:"tm-crew-item-name",children:G.name}),d.jsx("span",{className:`tm-crew-item-role ${(G.role||"laborer").toLowerCase()}`,children:G.role||"Laborer"}),je&&d.jsx("span",{className:"tm-crew-item-check",children:""})]},_e)})})]}),m&&!h&&d.jsxs(d.Fragment,{children:[c.map(G=>{const _e=u.filter(V=>V.category_id===G.id&&i.has(V.id));return _e.length===0?null:d.jsxs("div",{className:"tm-labor-category-section",children:[d.jsx("div",{className:"tm-category-header",children:G.name}),_e.map(V=>d.jsxs("div",{className:"tm-field",children:[d.jsxs("div",{className:"tm-field-header",children:[d.jsx("label",{children:V.name}),d.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>Y(V.id),title:$("removeClass"),children:""})]}),d.jsx("div",{className:"tm-workers-list",children:(n[V.id]||[]).map((xe,je)=>d.jsx(oc,{worker:xe,index:je,onUpdate:(oe,He,ge)=>we(V.id,oe,He,ge),onRemove:oe=>Pe(V.id,oe),t:$},je))}),d.jsxs("button",{className:"tm-add-btn",onClick:()=>ne(V.id),children:["+ ",$("add")," ",V.name]})]},V.id))]},G.id)}),u.filter(G=>!G.category_id&&i.has(G.id)).map(G=>d.jsxs("div",{className:"tm-field",children:[d.jsxs("div",{className:"tm-field-header",children:[d.jsx("label",{children:G.name}),d.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>Y(G.id),title:$("removeClass"),children:""})]}),d.jsx("div",{className:"tm-workers-list",children:(n[G.id]||[]).map((_e,V)=>d.jsx(oc,{worker:_e,index:V,onUpdate:(xe,je,oe)=>we(G.id,xe,je,oe),onRemove:xe=>Pe(G.id,xe),t:$},V))}),d.jsxs("button",{className:"tm-add-btn",onClick:()=>ne(G.id),children:["+ ",$("add")," ",G.name]})]},G.id)),F().length>0&&d.jsx("div",{className:"tm-add-labor-class-section",children:d.jsxs("select",{className:"tm-add-labor-class-select",value:"",onChange:G=>{G.target.value&&W(G.target.value)},children:[d.jsxs("option",{value:"",children:["+ ",$("addLaborClass")]}),c.map(G=>{const _e=F().filter(V=>V.category_id===G.id);return _e.length===0?null:d.jsx("optgroup",{label:G.name,children:_e.map(V=>d.jsx("option",{value:V.id,children:V.name},V.id))},G.id)}),F().filter(G=>!G.category_id).length>0&&d.jsx("optgroup",{label:$("other"),children:F().filter(G=>!G.category_id).map(G=>d.jsx("option",{value:G.id,children:G.name},G.id))})]})}),i.size===0&&d.jsx("div",{className:"tm-no-labor-classes",children:d.jsx("p",{children:$("noLaborClassesYet")})})]}),h&&d.jsxs("div",{className:"tm-loading-labor-classes",children:[d.jsx($s,{size:20,className:"tm-spinner"}),d.jsx("span",{children:$("loadingLaborClasses")})]}),!m&&!h&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:$("supervision")}),d.jsx("div",{className:"tm-workers-list",children:e.map((G,_e)=>d.jsx(oc,{worker:G,index:_e,onUpdate:X,onRemove:I,t:$,roleSelect:d.jsx("div",{className:"tm-role-select",children:d.jsxs("select",{value:G.role,onChange:V=>X(_e,"role",V.target.value),children:[d.jsx("option",{value:"Foreman",children:$("foreman")}),d.jsx("option",{value:"Superintendent",children:$("superintendent")})]})})},_e))}),d.jsx("button",{className:"tm-add-btn",onClick:re,children:$("addSupervision")})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:$("operators")}),d.jsx("div",{className:"tm-workers-list",children:t.map((G,_e)=>d.jsx(oc,{worker:G,index:_e,onUpdate:pe,onRemove:q,t:$},_e))}),d.jsx("button",{className:"tm-add-btn",onClick:se,children:$("addOperator")})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:$("laborers")}),d.jsx("div",{className:"tm-workers-list",children:r.map((G,_e)=>d.jsx(oc,{worker:G,index:_e,onUpdate:U,onRemove:te,t:$},_e))}),d.jsx("button",{className:"tm-add-btn",onClick:R,children:$("addLaborer")})]})]}),g&&d.jsx(XL,{batchHours:x,setBatchHours:w,namedWorkerCount:Ie,onApply:D,onClose:()=>_(!1),t:$})]})}function QL({companyId:e,items:t,setItems:r,t:n,lang:i,onShowToast:s}){const[c,u]=y.useState(null),[m,h]=y.useState([]),[p,g]=y.useState(!1),[_,x]=y.useState(""),[w,j]=y.useState([]),[S,O]=y.useState([]),[C,A]=y.useState(!1),[k,D]=y.useState({name:"",category:"",quantity:""}),M=y.useRef(null),z=y.useRef(null);y.useEffect(()=>{c&&e&&W(c)},[c,e]),y.useEffect(()=>(!c&&M.current&&(z.current=setTimeout(()=>{M.current?.focus()},100)),()=>{z.current&&clearTimeout(z.current)}),[c]);const W=async q=>{g(!0);try{const R=await ye.getMaterialsEquipmentByCategory(e,q);h(R)}catch(R){console.error("Error loading items:",R),s("Error loading items","error")}finally{g(!1)}},Y=async()=>{if(!(S.length>0))try{const q=[];for(const R of kg){const U=await ye.getMaterialsEquipmentByCategory(e,R);q.push(...U.map(te=>({...te,category:R})))}O(q)}catch(q){console.error("Error loading all materials:",q)}},re=q=>{if(x(q),!q.trim()){j([]);return}const R=q.toLowerCase(),U=S.filter(te=>te.name.toLowerCase().includes(R)||te.category.toLowerCase().includes(R));j(U.slice(0,10))},X=q=>{const R=t.findIndex(U=>U.material_equipment_id===q.id);R>=0?r(t.map((U,te)=>te===R?{...U,quantity:U.quantity+1}:U)):r([...t,{material_equipment_id:q.id,name:q.name,unit:q.unit,category:q.category,quantity:1,isCustom:!1}]),s(`Added ${q.name}`,"success")},I=()=>{if(!k.name||!k.category||!k.quantity){s("Fill in all fields","error");return}r([...t,{material_equipment_id:null,custom_name:k.name,custom_category:k.category,name:k.name,category:k.category,quantity:parseFloat(k.quantity),unit:"each",isCustom:!0}]),D({name:"",category:"",quantity:""}),A(!1),u(null),s("Custom item added","success")},se=(q,R)=>{const U=parseFloat(R)||0;U<=0?r(t.filter((te,ne)=>ne!==q)):r(t.map((te,ne)=>ne===q?{...te,quantity:U}:te))},pe=()=>{C?A(!1):c&&(u(null),A(!1))};return c||C?d.jsxs("div",{className:"tm-step-content",children:[d.jsxs("div",{className:"tm-wizard-header",style:{margin:"-1rem -1rem 1rem -1rem",padding:"0.75rem 1rem"},children:[d.jsx("button",{className:"tm-back-btn",onClick:pe,children:""}),d.jsx("h2",{children:C?"Add Custom Item":c}),d.jsxs("div",{className:"tm-item-count",children:[t.length," items"]})]}),C?d.jsxs("div",{className:"tm-custom-form",children:[d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:"Item Name"}),d.jsx("input",{type:"text",placeholder:"What did you use?",value:k.name,onChange:q=>D({...k,name:q.target.value}),autoFocus:!0})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:"Category"}),d.jsx("div",{className:"tm-category-select",children:kg.map(q=>d.jsx("button",{className:`tm-cat-chip ${k.category===q?"active":""}`,onClick:()=>D({...k,category:q}),children:q},q))})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:"Quantity"}),d.jsx("input",{type:"number",placeholder:"How many?",value:k.quantity,onChange:q=>D({...k,quantity:q.target.value})})]}),d.jsx("button",{className:"tm-big-btn primary",onClick:I,children:"Add Custom Item"})]}):d.jsx("div",{className:"tm-item-grid",children:p?d.jsx("div",{className:"tm-loading",children:"Loading..."}):d.jsxs(d.Fragment,{children:[m.map(q=>{const R=t.find(U=>U.material_equipment_id===q.id);return d.jsxs("button",{className:`tm-item-card ${R?"added":""}`,onClick:()=>X(q),children:[d.jsx("span",{className:"tm-item-name",children:q.name}),d.jsx("span",{className:"tm-item-unit",children:q.unit}),R&&d.jsx("span",{className:"tm-item-badge",children:R.quantity})]},q.id)}),d.jsxs("button",{className:"tm-item-card custom",onClick:()=>A(!0),children:[d.jsx("span",{className:"tm-item-name",children:"+ Add Other"}),d.jsx("span",{className:"tm-item-unit",children:"Not on list"})]})]})}),!C&&t.length>0&&d.jsx("div",{className:"tm-wizard-footer",children:d.jsxs("button",{className:"tm-big-btn primary",onClick:()=>u(null),children:["Done Adding (",t.length," items)"]})})]}):d.jsxs("div",{className:"tm-step-content",children:[d.jsxs("div",{className:"tm-field tm-search-field",children:[d.jsxs("div",{className:"tm-search-input-wrapper",children:[d.jsx(eq,{size:18,className:"tm-search-icon"}),d.jsx("input",{ref:M,type:"text",placeholder:n("searchMaterials"),value:_,onChange:q=>re(q.target.value),onFocus:()=>Y(),className:"tm-search-input"}),_&&d.jsx("button",{className:"tm-search-clear",onClick:()=>{x(""),j([])},children:""})]}),_&&w.length>0&&d.jsx("div",{className:"tm-search-results",children:w.map((q,R)=>{const U=t.find(te=>te.id===q.id);return d.jsxs("button",{className:`tm-search-result-item ${U?"added":""}`,onClick:()=>{U?se(t.indexOf(U),U.quantity+1):r([...t,{...q,quantity:1,isCustom:!1}]),x(""),j([])},children:[d.jsx("span",{className:"tm-search-result-name",children:q.name}),d.jsx("span",{className:"tm-search-result-category",children:q.category}),U&&d.jsxs("span",{className:"tm-search-result-qty",children:["",U.quantity]})]},R)})}),_&&w.length===0&&d.jsx("div",{className:"tm-search-no-results",children:n("noSearchResults")})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:n("orBrowse")}),d.jsx("div",{className:"tm-category-grid",children:kg.map(q=>{const R=t.filter(U=>U.category===q);return d.jsxs("button",{className:"tm-category-card",onClick:()=>u(q),children:[d.jsx("span",{className:"tm-cat-name",children:q}),R.length>0&&d.jsx("span",{className:"tm-cat-count",children:R.length})]},q)})})]}),t.length>0&&d.jsxs("div",{className:"tm-field",children:[d.jsxs("label",{children:["Added Items (",t.length,")"]}),d.jsx("div",{className:"tm-added-list",children:t.map((q,R)=>d.jsxs("div",{className:"tm-added-item",children:[d.jsxs("div",{className:"tm-added-info",children:[q.isCustom&&d.jsx("span",{className:"tm-custom-badge",children:"Custom"}),d.jsx("span",{className:"tm-added-name",children:q.name})]}),d.jsxs("div",{className:"tm-added-qty",children:[d.jsx("button",{onClick:()=>se(R,q.quantity-1),children:""}),d.jsx("span",{children:q.quantity}),d.jsx("button",{onClick:()=>se(R,q.quantity+1),children:"+"})]})]},R))})]})]})}function JL({photos:e,onPhotoAdd:t,onRemovePhoto:r,maxPhotos:n,selectedCorId:i,setSelectedCorId:s,assignableCORs:c,lang:u}){const m=GL(u);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`tm-action-card-prominent ${e.length>0?"has-content":"needs-action"}`,children:[d.jsxs("div",{className:"tm-action-card-header",children:[d.jsx("div",{className:"tm-action-card-icon",children:d.jsx(ff,{size:24})}),d.jsxs("div",{className:"tm-action-card-title",children:[d.jsx("h4",{children:m("photoEvidence")}),d.jsx("span",{className:"tm-action-card-status",children:e.length>0?`${e.length} ${m("photosAdded")}`:m("recommendedForBilling")})]})]}),e.length>0&&d.jsx("div",{className:"tm-photo-preview-row",children:e.map(h=>d.jsxs("div",{className:"tm-photo-preview-thumb",children:[d.jsx("img",{src:h.previewUrl,alt:h.name}),h.latitude&&d.jsx("span",{className:"tm-photo-gps-badge",title:`${h.latitude.toFixed(4)}, ${h.longitude.toFixed(4)}`,children:d.jsx(vy,{size:10})}),d.jsx("button",{className:"tm-photo-remove-x",onClick:()=>r(h.id),children:""})]},h.id))}),d.jsxs("label",{className:`tm-action-card-btn ${e.length===0?"primary":""}`,children:[d.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t,style:{display:"none"}}),d.jsx(ff,{size:18}),d.jsx("span",{children:e.length>0?m("addMorePhotos"):m("addPhotos")})]})]}),d.jsxs("div",{className:`tm-action-card-prominent ${i?"has-content":""}`,children:[d.jsxs("div",{className:"tm-action-card-header",children:[d.jsx("div",{className:"tm-action-card-icon cor",children:d.jsx(tq,{size:24})}),d.jsxs("div",{className:"tm-action-card-title",children:[d.jsx("h4",{children:m("linkToChangeOrder")}),d.jsx("span",{className:"tm-action-card-status",children:i?`${m("linkedTo")}: ${c.find(h=>h.id===i)?.cor_number||""}`:m("optionalLinkCOR")})]})]}),d.jsxs("select",{value:i,onChange:h=>s(h.target.value),className:"tm-cor-select-prominent",children:[d.jsx("option",{value:"",children:m("selectCOROptional")}),c.map(h=>d.jsxs("option",{value:h.id,children:[h.cor_number,": ",h.title||"Untitled"," (",h.status,")"]},h.id))]}),c.length===0&&d.jsx("p",{className:"tm-cor-hint",children:m("noActiveCORs")})]})]})}const e3=y.lazy(()=>_a(()=>import("./SignatureLinkGenerator-CV3mNLIS.js"),__vite__mapDeps([0,1,2,3,4]))),t3=y.lazy(()=>_a(()=>import("./TMClientSignature-BKO_it4d.js"),__vite__mapDeps([5,1,2,3,4])));function r3({step:e,setStep:t,project:r,companyId:n,workDate:i,cePcoNumber:s,notes:c,photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:p,selectedCorId:g,setSelectedCorId:_,assignableCORs:x,items:w,hasCustomLaborClasses:j,validDynamicWorkersList:S,validSupervision:O,validOperators:C,validLaborers:A,totalWorkers:k,totalRegHours:D,totalOTHours:M,submittedByName:z,setSubmittedByName:W,submittedTicket:Y,submitting:re,submitProgress:X,clientSigned:I,setClientSigned:se,showSignatureLinkModal:pe,setShowSignatureLinkModal:q,showOnSiteSignature:R,setShowOnSiteSignature:U,onRetryPhotoUpload:te,t:ne,lang:we,onShowToast:Pe}){return e===5&&Y?d.jsxs("div",{className:"tm-step-content tm-success-step",children:[d.jsxs("div",{className:"tm-success-header",children:[d.jsx("div",{className:"tm-success-icon",children:d.jsx(Jn,{size:48})}),d.jsx("h2",{children:ne("tmSubmitted")}),d.jsx("p",{className:"tm-success-subtitle",children:ne("ticketSavedReady")})]}),d.jsxs("div",{className:"tm-success-summary",children:[d.jsxs("div",{className:"tm-success-stat",children:[d.jsx("span",{className:"tm-success-stat-value",children:k}),d.jsx("span",{className:"tm-success-stat-label",children:ne("workersLabel")})]}),d.jsxs("div",{className:"tm-success-stat",children:[d.jsx("span",{className:"tm-success-stat-value",children:D+M}),d.jsx("span",{className:"tm-success-stat-label",children:ne("totalHours")})]}),d.jsxs("div",{className:"tm-success-stat",children:[d.jsx("span",{className:"tm-success-stat-value",children:new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),d.jsx("span",{className:"tm-success-stat-label",children:ne("workDate")})]})]}),u.some(F=>F.status==="failed")&&d.jsxs("div",{className:"tm-failed-photos-section",children:[d.jsxs("div",{className:"tm-failed-photos-header",children:[d.jsx(kb,{size:18}),d.jsx("span",{children:we==="en"?`${u.filter(F=>F.status==="failed").length} photo(s) failed to upload`:`${u.filter(F=>F.status==="failed").length} foto(s) no se subieron`})]}),d.jsx("div",{className:"tm-failed-photos-grid",children:u.filter(F=>F.status==="failed").map(F=>d.jsxs("div",{className:"tm-failed-photo-item",children:[d.jsx("img",{src:F.previewUrl,alt:F.name}),d.jsx("div",{className:"tm-failed-photo-overlay",children:d.jsx("button",{className:"tm-retry-photo-btn",onClick:()=>te(F.id,Y.id),disabled:F.status==="uploading"||F.status==="compressing",children:F.status==="uploading"||F.status==="compressing"?d.jsx($s,{size:16,className:"tm-spinner"}):d.jsxs(d.Fragment,{children:[d.jsx(mf,{size:16}),d.jsx("span",{children:ne("retry")})]})})}),F.error&&d.jsxs("div",{className:"tm-failed-photo-error",title:F.error,children:[F.error.substring(0,20),F.error.length>20?"...":""]})]},F.id))}),d.jsxs("button",{className:"tm-retry-all-btn",onClick:async()=>{const F=u.filter($=>$.status==="failed");for(const $ of F)await te($.id,Y.id)},children:[d.jsx(mf,{size:16}),ne("retryAllPhotos")]})]}),u.length>0&&u.every(F=>F.status==="confirmed")&&d.jsxs("div",{className:"tm-photos-success",children:[d.jsx(Ki,{size:16}),d.jsx("span",{children:we==="en"?`All ${u.length} photo(s) uploaded successfully`:`${u.length} foto(s) subidas exitosamente`})]}),d.jsxs("div",{className:"tm-signature-options",children:[d.jsx("h3",{children:ne("getClientSignature")}),d.jsx("p",{className:"tm-signature-description",children:ne("signatureDescription")}),I?d.jsxs("div",{className:"tm-signed-confirmation",children:[d.jsx(Jn,{size:32,className:"tm-signed-icon"}),d.jsx("span",{children:ne("clientSignatureCollected")})]}):d.jsxs("div",{className:"tm-signature-buttons",children:[d.jsxs("button",{className:"tm-signature-option-btn primary",onClick:()=>U(!0),children:[d.jsx("div",{className:"tm-signature-option-icon",children:d.jsx(_c,{size:24})}),d.jsxs("div",{className:"tm-signature-option-text",children:[d.jsx("span",{className:"tm-signature-option-title",children:ne("signNowOnSite")}),d.jsx("span",{className:"tm-signature-option-desc",children:ne("clientSignsDevice")})]})]}),d.jsxs("button",{className:"tm-signature-option-btn",onClick:()=>q(!0),children:[d.jsx("div",{className:"tm-signature-option-icon",children:d.jsx(_c,{size:24})}),d.jsxs("div",{className:"tm-signature-option-text",children:[d.jsx("span",{className:"tm-signature-option-title",children:ne("sendSignatureLink")}),d.jsx("span",{className:"tm-signature-option-desc",children:ne("clientSignsLater")})]})]})]})]}),pe&&d.jsx(y.Suspense,{fallback:d.jsx("div",{className:"loading",children:"Loading..."}),children:d.jsx(e3,{documentType:"tm_ticket",documentId:Y.id,companyId:n,projectId:r.id,project:r,documentTitle:`Time & Material Ticket - ${new Date(i).toLocaleDateString()}`,onClose:()=>q(!1),onShowToast:Pe})}),R&&d.jsx(y.Suspense,{fallback:d.jsx("div",{className:"loading",children:"Loading..."}),children:d.jsx(t3,{ticketId:Y.id,ticketSummary:{workDate:i,workerCount:k,totalHours:D+M},ticketDetails:{projectName:r?.name,cePcoNumber:s,notes:c,workers:j?S.map(F=>({name:F.name,role:F.role,hours:F.hours||0,overtime_hours:F.overtime_hours||0,time_started:F.time_started,time_ended:F.time_ended})):[...O.map(F=>({name:F.name,role:F.role||"Supervision",hours:F.hours||0,overtime_hours:F.overtimeHours||0,time_started:F.timeStarted,time_ended:F.timeEnded})),...C.map(F=>({name:F.name,role:"Operator",hours:F.hours||0,overtime_hours:F.overtimeHours||0,time_started:F.timeStarted,time_ended:F.timeEnded})),...A.map(F=>({name:F.name,role:"Laborer",hours:F.hours||0,overtime_hours:F.overtimeHours||0,time_started:F.timeStarted,time_ended:F.timeEnded}))],items:w.map(F=>({name:F.name,quantity:F.quantity,unit:F.unit})),photos:u.filter(F=>F.status==="confirmed"||F.previewUrl)},lang:we,onSave:()=>{U(!1),se(!0)},onClose:()=>U(!1),onShowToast:Pe})})]}):d.jsxs("div",{className:"tm-step-content",children:[d.jsx(JL,{photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:p,selectedCorId:g,setSelectedCorId:_,assignableCORs:x,lang:we}),d.jsx("div",{className:"tm-review-divider",children:d.jsx("span",{children:ne("ticketSummary")})}),d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[""," ",ne("workDate")]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:ne("edit")})]}),d.jsxs("div",{className:"tm-review-row",children:[d.jsx("span",{children:new Date(i).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),s&&d.jsxs("span",{children:["CE/PCO: ",s]})]})]}),c&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(Fo,{size:16,className:"inline-icon"})," ",ne("notes")]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:ne("edit")})]}),d.jsx("div",{className:"tm-review-notes",children:c})]}),j&&S.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(Po,{size:16,className:"inline-icon"})," ",ne("workersLabel")," (",D+M," hrs)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:ne("edit")})]}),d.jsx("div",{className:"tm-review-list",children:S.map((F,$)=>d.jsxs("div",{className:"tm-review-row-detailed",children:[d.jsxs("div",{className:"tm-review-worker-name",children:[d.jsx("span",{className:"tm-role-badge",children:F.role})," ",F.name]}),d.jsxs("div",{className:"tm-review-worker-details",children:[F.time_started&&F.time_ended&&d.jsxs("span",{className:"tm-review-time",children:[F.time_started," - ",F.time_ended]}),d.jsxs("span",{className:"tm-review-hours",children:[F.hours||0," reg",F.overtime_hours>0?` + ${F.overtime_hours} OT`:""]})]})]},$))})]}),!j&&O.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(rq,{size:16,className:"inline-icon"})," Supervision (",O.reduce((F,$)=>F+parseFloat($.hours||0)+parseFloat($.overtimeHours||0),0)," hrs)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:ne("edit")})]}),d.jsx("div",{className:"tm-review-list",children:O.map((F,$)=>d.jsxs("div",{className:"tm-review-row-detailed",children:[d.jsxs("div",{className:"tm-review-worker-name",children:[d.jsx("span",{className:"tm-role-badge",children:F.role})," ",F.name]}),d.jsxs("div",{className:"tm-review-worker-details",children:[F.timeStarted&&F.timeEnded&&d.jsxs("span",{className:"tm-review-time",children:[F.timeStarted," - ",F.timeEnded]}),d.jsxs("span",{className:"tm-review-hours",children:[F.hours||0," reg",parseFloat(F.overtimeHours)>0?` + ${F.overtimeHours} OT`:""]})]})]},$))})]}),!j&&C.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[""," Operators (",C.reduce((F,$)=>F+parseFloat($.hours||0)+parseFloat($.overtimeHours||0),0)," hrs)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:ne("edit")})]}),d.jsx("div",{className:"tm-review-list",children:C.map((F,$)=>d.jsxs("div",{className:"tm-review-row-detailed",children:[d.jsx("div",{className:"tm-review-worker-name",children:F.name}),d.jsxs("div",{className:"tm-review-worker-details",children:[F.timeStarted&&F.timeEnded&&d.jsxs("span",{className:"tm-review-time",children:[F.timeStarted," - ",F.timeEnded]}),d.jsxs("span",{className:"tm-review-hours",children:[F.hours||0," reg",parseFloat(F.overtimeHours)>0?` + ${F.overtimeHours} OT`:""]})]})]},$))})]}),!j&&A.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(Po,{size:16,className:"inline-icon"})," Laborers (",A.reduce((F,$)=>F+parseFloat($.hours||0)+parseFloat($.overtimeHours||0),0)," hrs)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:ne("edit")})]}),d.jsx("div",{className:"tm-review-list",children:A.map((F,$)=>d.jsxs("div",{className:"tm-review-row-detailed",children:[d.jsx("div",{className:"tm-review-worker-name",children:F.name}),d.jsxs("div",{className:"tm-review-worker-details",children:[F.timeStarted&&F.timeEnded&&d.jsxs("span",{className:"tm-review-time",children:[F.timeStarted," - ",F.timeEnded]}),d.jsxs("span",{className:"tm-review-hours",children:[F.hours||0," reg",parseFloat(F.overtimeHours)>0?` + ${F.overtimeHours} OT`:""]})]})]},$))})]}),w.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(nq,{size:16,className:"inline-icon"})," Materials & Equipment (",w.length," items)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(3),children:ne("edit")})]}),d.jsx("div",{className:"tm-review-list",children:w.map((F,$)=>d.jsxs("div",{className:"tm-review-row",children:[d.jsxs("span",{children:[F.isCustom&&d.jsxs(d.Fragment,{children:[d.jsx(aq,{size:14,className:"inline-icon"})," "]}),F.name]}),d.jsxs("span",{children:[F.quantity," ",F.unit]})]},$))})]}),d.jsxs("div",{className:"tm-review-section tm-certification",children:[d.jsx("div",{className:"tm-review-header",children:d.jsxs("span",{children:[d.jsx(_c,{size:16,className:"inline-icon"})," ",ne("submittedBy")]})}),d.jsx("input",{type:"text",className:"tm-certification-input",placeholder:ne("enterYourName"),value:z,onChange:F=>W(F.target.value)}),d.jsx("p",{className:"tm-certification-note",children:ne("certifyAccurate")})]})]})}const ZS=()=>{const e=new Uint8Array(6);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(36)).join("")},Td=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function n3({project:e,companyId:t,maxPhotos:r=10,onSubmit:n,onCancel:i,onShowToast:s}){const[c,u]=y.useState(1),[m,h]=y.useState(new Date().toISOString().split("T")[0]),[p,g]=y.useState(null),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState(!1),[C,A]=y.useState(""),[k,D]=y.useState(""),[M,z]=y.useState(""),[W,Y]=y.useState([]),[re,X]=y.useState(!1),[I,se]=y.useState(!1),[pe,q]=y.useState({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),[R,U]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}]),[te,ne]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[we,Pe]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[F,$]=y.useState([]),[Se,De]=y.useState(""),[Ie,G]=y.useState([]),[_e,V]=y.useState(!1),[xe,je]=y.useState(""),[oe,He]=y.useState([]),[ge,Ne]=y.useState(!1),[Re,jt]=y.useState("en"),qe=K=>PN[Re][K]||K,[It,yt]=y.useState([]),[Ct,Br]=y.useState([]),[xt,Ye]=y.useState({}),[$r,_n]=y.useState(!0),[Hr,jr]=y.useState(new Set),Yt=Ct.length>0;y.useEffect(()=>{Qt(),he();const K=ye.subscribeToCORs?.(e.id,()=>{he()});return()=>{K?.unsubscribe?.()}},[e.id]),y.useEffect(()=>{(async()=>{if(!t){_n(!1);return}try{const ue=await ye.getLaborClassesForField(t);yt(ue.categories||[]),Br(ue.classes||[])}catch(ue){console.error("Error loading labor classes:",ue)}finally{_n(!1)}})()},[t]),y.useEffect(()=>{if($r||Ct.length===0)return;const K=new Set;oe.forEach(ce=>{ce.labor_class_id&&K.add(ce.labor_class_id)});const ue={},me=new Set;K.forEach(ce=>{Ct.some(ie=>ie.id===ce)&&(ue[ce]=[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}],me.add(ce))}),Ye(ce=>Object.keys(ce).length===0?ue:ce),jr(ce=>ce.size===0?me:ce)},[Ct,oe,$r]);const he=async()=>{X(!0);try{const K=await ye.getAssignableCORs(e.id);Y(K||[])}catch(K){console.error("Error loading assignable CORs:",K)}finally{X(!1)}},it=()=>{const{timeStarted:K,timeEnded:ue,hours:me,overtimeHours:ce}=pe;let ie=0;if(Yt){const Ee={};Object.entries(xt).forEach(([Ue,Fe])=>{Ee[Ue]=Fe.map(lt=>lt&&lt.name&&lt.name.trim()?(ie++,{...lt,timeStarted:K,timeEnded:ue,hours:me,overtimeHours:ce}):lt)}),Ye(Ee)}else U(R.map(Ee=>Ee&&Ee.name&&Ee.name.trim()?(ie++,{...Ee,timeStarted:K,timeEnded:ue,hours:me,overtimeHours:ce}):Ee)),ne(te.map(Ee=>Ee&&Ee.name&&Ee.name.trim()?(ie++,{...Ee,timeStarted:K,timeEnded:ue,hours:me,overtimeHours:ce}):Ee)),Pe(we.map(Ee=>Ee&&Ee.name&&Ee.name.trim()?(ie++,{...Ee,timeStarted:K,timeEnded:ue,hours:me,overtimeHours:ce}):Ee));se(!1),q({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),ie>0?s(qe("appliedHours").replace("{count}",ie),"success"):s(qe("addWorkersFirst"),"info")},xn=K=>{let ue,me,ce,ie;switch(K){case"8hr":ue="07:00",me="15:30",ce="8",ie="";break;case"10hr":ue="06:00",me="16:30",ce="8",ie="2";break;case"4hr":ue="07:00",me="11:00",ce="4",ie="";break;default:return}let Ee=0;if(Yt){const Ue={};Object.entries(xt).forEach(([Fe,lt])=>{Ue[Fe]=lt.map(Mr=>Mr&&Mr.name&&Mr.name.trim()?(Ee++,{...Mr,timeStarted:ue,timeEnded:me,hours:ce,overtimeHours:ie}):Mr)}),Ye(Ue)}else U(Ue=>Ue.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(Ee++,{...Fe,timeStarted:ue,timeEnded:me,hours:ce,overtimeHours:ie}):Fe)),ne(Ue=>Ue.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(Ee++,{...Fe,timeStarted:ue,timeEnded:me,hours:ce,overtimeHours:ie}):Fe)),Pe(Ue=>Ue.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(Ee++,{...Fe,timeStarted:ue,timeEnded:me,hours:ce,overtimeHours:ie}):Fe));Ee>0?s(qe("appliedHours").replace("{count}",Ee),"success"):s(qe("addWorkersFirst"),"info")},Qt=async()=>{try{const K=await ye.getCrewCheckin(e.id);K?.workers&&He(K.workers)}catch(K){console.error("Error loading crew:",K)}},Ut=async()=>{Ne(!0);try{const K=await ye.getPreviousTicketCrew(e.id,m);if(!K||K.totalWorkers===0){s(qe("noPreviousCrew"),"info");return}Yt&&K.dynamicWorkers?Ye(K.dynamicWorkers):(K.supervision&&U(K.supervision),K.operators&&ne(K.operators),K.laborers&&Pe(K.laborers));const ue=new Date(K.workDate).toLocaleDateString();s(qe("loadedWorkers").replace("{count}",K.totalWorkers).replace("{date}",ue),"success")}catch(K){console.error("Error loading previous crew:",K),s(qe("errorLoadingCrew"),"error")}finally{Ne(!1)}},qt=()=>{U([...R,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},ft=(K,ue,me)=>{U(R.map((ce,ie)=>{if(ie!==K)return ce;const Ee={...ce,[ue]:me};if(ue==="timeStarted"||ue==="timeEnded"){const Ue=ue==="timeStarted"?me:ce.timeStarted,Fe=ue==="timeEnded"?me:ce.timeEnded,lt=Td(Ue,Fe);lt&&(Ee.hours=lt.hours,Ee.overtimeHours=lt.overtimeHours)}return Ee}))},en=K=>{R.length>1?U(R.filter((ue,me)=>me!==K)):U([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},$n=()=>{Pe([...we,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},oa=(K,ue,me)=>{Pe(we.map((ce,ie)=>{if(ie!==K)return ce;const Ee={...ce,[ue]:me};if(ue==="timeStarted"||ue==="timeEnded"){const Ue=ue==="timeStarted"?me:ce.timeStarted,Fe=ue==="timeEnded"?me:ce.timeEnded,lt=Td(Ue,Fe);lt&&(Ee.hours=lt.hours,Ee.overtimeHours=lt.overtimeHours)}return Ee}))},di=K=>{we.length>1?Pe(we.filter((ue,me)=>me!==K)):Pe([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},fi=()=>{ne([...te,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},xa=(K,ue,me)=>{ne(te.map((ce,ie)=>{if(ie!==K)return ce;const Ee={...ce,[ue]:me};if(ue==="timeStarted"||ue==="timeEnded"){const Ue=ue==="timeStarted"?me:ce.timeStarted,Fe=ue==="timeEnded"?me:ce.timeEnded,lt=Td(Ue,Fe);lt&&(Ee.hours=lt.hours,Ee.overtimeHours=lt.overtimeHours)}return Ee}))},wn=K=>{te.length>1?ne(te.filter((ue,me)=>me!==K)):ne([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},mi=K=>{Ye(ue=>({...ue,[K]:[...ue[K]||[],{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))},wa=(K,ue,me,ce)=>{Ye(ie=>({...ie,[K]:(ie[K]||[]).map((Ee,Ue)=>{if(Ue!==ue)return Ee;const Fe={...Ee,[me]:ce};if(me==="timeStarted"||me==="timeEnded"){const lt=me==="timeStarted"?ce:Ee.timeStarted,Mr=me==="timeEnded"?ce:Ee.timeEnded,Je=Td(lt,Mr);Je&&(Fe.hours=Je.hours,Fe.overtimeHours=Je.overtimeHours)}return Fe})}))},ll=(K,ue)=>{Ye(me=>{const ce=me[K]||[];return ce.length>1?{...me,[K]:ce.filter((ie,Ee)=>Ee!==ue)}:{...me,[K]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}})},ve=K=>{K&&(jr(ue=>new Set([...ue,K])),Ye(ue=>!ue[K]||ue[K].length===0?{...ue,[K]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}:ue))},Hn=K=>{jr(ue=>{const me=new Set(ue);return me.delete(K),me}),Ye(ue=>{const me={...ue};return delete me[K],me})},ja=()=>Ct.filter(K=>!Hr.has(K.id)),cl=()=>{if(!xt||typeof xt!="object")return[];const K=[];return Object.entries(xt).forEach(([ue,me])=>{if(!Array.isArray(me))return;const ce=Ct.find(ie=>ie.id===ue);me.forEach(ie=>{ie&&ie.name&&ie.name.trim()&&(parseFloat(ie.hours)>0||parseFloat(ie.overtimeHours)>0)&&K.push({name:ie.name.trim(),hours:parseFloat(ie.hours)||0,overtime_hours:parseFloat(ie.overtimeHours)||0,time_started:ie.timeStarted||null,time_ended:ie.timeEnded||null,role:ce?.name||"Worker",labor_class_id:ue})})}),K},mu=K=>{if(K.labor_class_id&&Yt&&Ct.some(me=>me.id===K.labor_class_id)){Hr.has(K.labor_class_id)||jr(ie=>new Set([...ie,K.labor_class_id]));const me=xt[K.labor_class_id]||[],ce=me.findIndex(ie=>!ie||!ie.name||!ie.name.trim());if(ce>=0){const ie=[...me];ie[ce]={...ie[ce],name:K.name},Ye(Ee=>({...Ee,[K.labor_class_id]:ie}))}else Ye(ie=>({...ie,[K.labor_class_id]:[...ie[K.labor_class_id]||[],{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}else if(Yt){const ce=[...Hr][0]||Ct[0]?.id;if(ce){Hr.has(ce)||jr(Ue=>new Set([...Ue,ce]));const ie=xt[ce]||[],Ee=ie.findIndex(Ue=>!Ue||!Ue.name||!Ue.name.trim());if(Ee>=0){const Ue=[...ie];Ue[Ee]={...Ue[Ee],name:K.name},Ye(Fe=>({...Fe,[ce]:Ue}))}else Ye(Ue=>({...Ue,[ce]:[...Ue[ce]||[],{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}}else{const me=(K.role||"").toLowerCase();if(me.includes("foreman")||me.includes("supervisor")||me.includes("superintendent")){const ce=R.findIndex(ie=>!ie||!ie.name||!ie.name.trim());ce>=0?(ft(ce,"name",K.name),ft(ce,"role",me.includes("superintendent")?"Superintendent":"Foreman")):U([...R,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:me.includes("superintendent")?"Superintendent":"Foreman"}])}else if(me.includes("operator")){const ce=te.findIndex(ie=>!ie||!ie.name||!ie.name.trim());ce>=0?xa(ce,"name",K.name):ne([...te,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}else{const ce=we.findIndex(ie=>!ie||!ie.name||!ie.name.trim());ce>=0?oa(ce,"name",K.name):Pe([...we,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}}s(`Added ${K.name}`,"success")},hu=async K=>{const ue=Array.from(K.target.files);if(ue.length===0)return;const me=r===-1?1/0:r-Ie.length;if(me<=0){s(`Photo limit reached (${r} max)`,"error"),K.target.value="";return}const ce=ue.slice(0,me);ce.length<ue.length&&s(`Only ${ce.length} photo(s) added (${r} max)`,"error");const ie=await YL(),Ee=10*1024*1024;ce.forEach(Ue=>{if(!Ue.type.startsWith("image/")){s("Please select an image file","error");return}if(Ue.size>Ee){s(`Photo too large: ${Ue.name} (max 10MB)`,"error");return}const Fe=URL.createObjectURL(Ue),lt=`photo-${Date.now()}-${ZS()}`;G(Mr=>[...Mr,{id:`${Date.now()}-${ZS()}`,tempId:lt,file:Ue,previewUrl:Fe,name:Ue.name,status:"pending",attempts:0,error:null,uploadedUrl:null,latitude:ie?.latitude||null,longitude:ie?.longitude||null,gpsAccuracy:ie?.accuracy||null}])}),K.target.value=""},Fn=(K,ue)=>{G(me=>me.map(ce=>ce.id===K?{...ce,...ue}:ce))},ul=async(K,ue)=>{const me=Ie.find(ce=>ce.id===K);if(!(!me||me.status!=="failed")){Fn(K,{status:"compressing",error:null});try{let ce=me.file;try{ce=await Oy(me.file)}catch(Ee){console.warn("Compression failed, using original:",Ee)}Fn(K,{status:"uploading"});const ie=await ye.uploadPhoto(t,e.id,ue,ce);Fn(K,{status:"confirmed",uploadedUrl:ie,attempts:me.attempts+1}),await ye.updateTMTicketPhotos(ue,[...Ie.filter(Ee=>Ee.uploadedUrl).map(Ee=>Ee.uploadedUrl),ie]),s("Photo uploaded successfully","success")}catch(ce){console.error("Retry failed:",ce),Fn(K,{status:"failed",error:ce.message||"Upload failed",attempts:me.attempts+1}),s("Photo retry failed","error")}}},dl=K=>{const ue=Ie.find(me=>me.id===K);ue?.previewUrl&&URL.revokeObjectURL(ue.previewUrl),G(Ie.filter(me=>me.id!==K))},eo=R.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),to=te.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),tn=we.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),Bt=cl(),sr=Yt?Bt.length:eo.length+to.length+tn.length,sa=Yt?Bt.reduce((K,ue)=>K+(ue.hours||0),0):[...eo,...to,...tn].reduce((K,ue)=>K+parseFloat(ue.hours||0),0),ro=Yt?Bt.reduce((K,ue)=>K+(ue.overtime_hours||0),0):[...eo,...to,...tn].reduce((K,ue)=>K+parseFloat(ue.overtimeHours||0),0),pu=Yt?Object.values(xt||{}).flat().filter(K=>K&&K.name&&K.name.trim()):[...R.filter(K=>K&&K.name&&K.name.trim()),...te.filter(K=>K&&K.name&&K.name.trim()),...we.filter(K=>K&&K.name&&K.name.trim())],fl=pu.length-sr,ml=()=>{if(c===1)return Se.trim().length>0;if(c===2){if(Yt)return cl().length>0;const K=R.some(ce=>ce&&ce.name&&ce.name.trim()&&(parseFloat(ce.hours)>0||parseFloat(ce.overtimeHours)>0)),ue=te.some(ce=>ce&&ce.name&&ce.name.trim()&&(parseFloat(ce.hours)>0||parseFloat(ce.overtimeHours)>0)),me=we.some(ce=>ce&&ce.name&&ce.name.trim()&&(parseFloat(ce.hours)>0||parseFloat(ce.overtimeHours)>0));return K||ue||me}return!0},Qo=(()=>{const K=[];return c===1&&!Se.trim()&&K.push(qe("descriptionRecommended")),c===2&&fl>0&&K.push(`${fl} ${qe("workersNoHours")}`),c===4&&!k.trim()&&K.push(qe("nameRequired")),K})(),Kn=()=>{c<4&&u(c+1)},hi=()=>{c>1?u(c-1):i()},no=async()=>{if(!k.trim()){s("Enter your name to submit","error");return}let K=[];if(Yt){if(K=cl(),K.length===0){s("Add at least one worker","error");return}}else{const ue=R.filter(ie=>ie&&ie.name&&ie.name.trim()&&(parseFloat(ie.hours)>0||parseFloat(ie.overtimeHours)>0)),me=te.filter(ie=>ie&&ie.name&&ie.name.trim()&&(parseFloat(ie.hours)>0||parseFloat(ie.overtimeHours)>0)),ce=we.filter(ie=>ie&&ie.name&&ie.name.trim()&&(parseFloat(ie.hours)>0||parseFloat(ie.overtimeHours)>0));if(ue.length===0&&me.length===0&&ce.length===0){s("Add at least one worker","error");return}K=[...ue.map(ie=>({name:ie.name.trim(),hours:parseFloat(ie.hours)||0,overtime_hours:parseFloat(ie.overtimeHours)||0,time_started:ie.timeStarted||null,time_ended:ie.timeEnded||null,role:ie.role})),...me.map(ie=>({name:ie.name.trim(),hours:parseFloat(ie.hours)||0,overtime_hours:parseFloat(ie.overtimeHours)||0,time_started:ie.timeStarted||null,time_ended:ie.timeEnded||null,role:"Operator"})),...ce.map(ie=>({name:ie.name.trim(),hours:parseFloat(ie.hours)||0,overtime_hours:parseFloat(ie.overtimeHours)||0,time_started:ie.timeStarted||null,time_ended:ie.timeEnded||null,role:"Laborer"}))]}V(!0),je("Creating ticket...");try{const ue=await ye.createTMTicket({project_id:e.id,work_date:m,ce_pco_number:C.trim()||null,assigned_cor_id:M||null,notes:Se.trim()||null,photos:[],created_by_name:k.trim()});if(!ue||!ue.id)throw new Error("Failed to create ticket - no ticket ID returned");let me=[];const ce=Ie.filter(ie=>ie.status==="pending");if(ce.length>0){je(`Compressing ${ce.length} photo${ce.length>1?"s":""}...`),ce.forEach(Je=>Fn(Je.id,{status:"compressing"}));const ie=await Promise.all(ce.map(async Je=>{try{const Gt=await Oy(Je.file);return{...Je,file:Gt}}catch(Gt){return console.warn(`Failed to compress photo ${Je.name}, using original:`,Gt),Je}}));je(`Uploading ${ce.length} photo${ce.length>1?"s":""}...`),ce.forEach(Je=>Fn(Je.id,{status:"uploading"}));let Ee=0,Ue=0;const Fe=ie.map(async Je=>{try{const Gt=await ye.uploadPhoto(t,e.id,ue.id,Je.file);return Ee++,je(`Uploading ${Ee}/${ce.length} photos...`),Fn(Je.id,{status:"confirmed",uploadedUrl:Gt,attempts:(Je.attempts||0)+1}),{id:Je.id,url:Gt}}catch(Gt){return console.error(`Photo ${Je.name} upload failed:`,Gt),Ue++,Fn(Je.id,{status:"failed",error:Gt.message||"Upload failed",attempts:(Je.attempts||0)+1}),{id:Je.id,url:null,error:Gt.message}}}),lt=await Promise.all(Fe);me=lt.filter(Je=>Je.url!==null).map(Je=>Je.url);const Mr={};for(const Je of lt)if(Je.url){const Gt=ce.find(Yn=>Yn.id===Je.id);Gt?.latitude&&Gt?.longitude&&(Mr[Je.url]={lat:Gt.latitude,lng:Gt.longitude,accuracy:Gt.gpsAccuracy})}Ue>0&&me.length>0?s(`${me.length}/${ce.length} photos uploaded. ${Ue} failed - can retry later.`,"warning"):Ue>0&&me.length===0&&s(`All ${Ue} photos failed to upload - can retry after submission.`,"error"),me.length>0&&(je("Saving photos..."),await ye.updateTMTicketPhotos(ue.id,me,Object.keys(Mr).length>0?Mr:null))}else me.length>0&&(je("Saving photos..."),await ye.updateTMTicketPhotos(ue.id,me));if(je("Saving workers..."),await ye.addTMWorkers(ue.id,K),F.length>0&&(je("Saving materials..."),await ye.addTMItems(ue.id,F.map(ie=>({material_equipment_id:ie.material_equipment_id,custom_name:ie.custom_name||null,custom_category:ie.custom_category||null,quantity:ie.quantity})))),M){je("Importing to COR...");try{await ye.importTicketDataToCOR(ue.id,M,t,e.work_type||"demolition",e.job_type||"standard")}catch(ie){console.error("Error importing to COR:",ie);try{await ye.markImportFailed(ue.id,M,ie?.message||"Import failed")}catch(Ee){console.error("Error marking import failed:",Ee)}s("Ticket saved. COR data sync failed - retry from ticket list.","warning")}}Ie.forEach(ie=>{ie.previewUrl&&URL.revokeObjectURL(ie.previewUrl)}),g(ue),s("Time & Material ticket submitted!","success"),u(5)}catch(ue){console.error("Error submitting T&M:",ue),s("Error submitting T&M","error")}finally{V(!1),je("")}};return d.jsxs("div",{className:"tm-wizard",children:[d.jsxs("div",{className:"tm-wizard-header",children:[c<5?d.jsx("button",{className:"tm-back-btn",onClick:hi,children:""}):d.jsx("div",{className:"tm-success-check",children:d.jsx(Jn,{size:24})}),d.jsxs("h2",{children:[c===1&&qe("workInfo"),c===2&&qe("crewHours"),c===3&&qe("materialsEquipment"),c===4&&qe("review"),c===5&&qe("submitted")]}),d.jsxs("div",{className:"tm-header-right",children:[c<4&&d.jsxs("button",{className:"tm-lang-toggle",onClick:()=>jt(Re==="en"?"es":"en"),title:qe(Re==="en"?"switchToSpanish":"switchToEnglish"),children:[d.jsx(iq,{size:16}),Re==="en"?"ES":"EN"]}),c<5&&d.jsxs("div",{className:"tm-step-dots",children:[d.jsx("span",{className:`tm-dot ${c>=1?"active":""}`}),d.jsx("span",{className:`tm-dot ${c>=2?"active":""}`}),d.jsx("span",{className:`tm-dot ${c>=3?"active":""}`}),d.jsx("span",{className:`tm-dot ${c>=4?"active":""}`})]})]})]}),c===1&&d.jsx(VL,{project:e,workDate:m,setWorkDate:h,cePcoNumber:C,setCePcoNumber:A,notes:Se,setNotes:De,t:qe,lang:Re}),c===2&&d.jsx(ZL,{supervision:R,operators:te,laborers:we,dynamicWorkers:xt,activeLaborClassIds:Hr,setActiveLaborClassIds:jr,laborCategories:It,laborClasses:Ct,hasCustomLaborClasses:Yt,loadingLaborClasses:$r,todaysCrew:oe,showBatchHoursModal:I,setShowBatchHoursModal:se,batchHours:pe,setBatchHours:q,loadingPreviousCrew:ge,namedWorkers:pu,workersNeedingHours:fl,totalRegHours:sa,totalOTHours:ro,onLoadPreviousCrew:Ut,onApplyBatchHours:it,onApplyInlinePreset:xn,onAddCrewWorker:mu,onActivateLaborClass:ve,onDeactivateLaborClass:Hn,addSupervision:qt,updateSupervision:ft,removeSupervision:en,addOperator:fi,updateOperator:xa,removeOperator:wn,addLaborer:$n,updateLaborer:oa,removeLaborer:di,addDynamicWorker:mi,updateDynamicWorker:wa,removeDynamicWorker:ll,getInactiveLaborClasses:ja,t:qe,lang:Re,onShowToast:s}),c===3&&d.jsx(QL,{companyId:t,items:F,setItems:$,t:qe,lang:Re,onShowToast:s}),(c===4||c===5)&&d.jsx(r3,{step:c,setStep:u,project:e,companyId:t,workDate:m,cePcoNumber:C,notes:Se,photos:Ie,onPhotoAdd:hu,onRemovePhoto:dl,maxPhotos:r,selectedCorId:M,setSelectedCorId:z,assignableCORs:W,items:F,hasCustomLaborClasses:Yt,validDynamicWorkersList:Bt,validSupervision:eo,validOperators:to,validLaborers:tn,totalWorkers:sr,totalRegHours:sa,totalOTHours:ro,submittedByName:k,setSubmittedByName:D,submittedTicket:p,submitting:_e,submitProgress:xe,clientSigned:S,setClientSigned:O,showSignatureLinkModal:_,setShowSignatureLinkModal:x,showOnSiteSignature:w,setShowOnSiteSignature:j,onRetryPhotoUpload:ul,t:qe,lang:Re,onShowToast:s}),c<5&&d.jsxs("div",{className:"tm-wizard-footer",children:[Qo.length>0&&d.jsxs("div",{className:"tm-validation-summary",children:[d.jsx(kb,{size:16}),d.jsx("span",{children:Qo[0]})]}),c===1&&d.jsx("button",{className:"tm-big-btn primary",onClick:Kn,disabled:!ml(),children:qe("nextCrew")}),c===2&&d.jsxs("button",{className:"tm-big-btn primary",onClick:Kn,disabled:!ml(),children:[qe("nextMaterials")," (",sr," ",qe(sr===1?"worker":"workers_plural"),", ",sa+ro," hrs)"]}),c===3&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"tm-big-btn primary",onClick:Kn,children:[qe("reviewAndSubmit")," (",F.length," ",F.length===1?qe("item"):qe("items_plural"),")"]}),d.jsx("button",{className:"tm-skip-btn",onClick:Kn,children:qe("skipNoMaterials")})]}),c===4&&d.jsx("button",{className:`tm-big-btn submit ${_e?"submitting":""} ${k.trim()?"ready":"needs-name"}`,onClick:no,disabled:_e||!k.trim(),children:_e?d.jsxs(d.Fragment,{children:[d.jsx($s,{size:20,className:"tm-spinner"}),d.jsx("span",{className:"tm-submit-text",children:xe||qe("submitting")})]}):k.trim()?d.jsxs(d.Fragment,{children:[d.jsx(Ki,{size:20}),d.jsx("span",{children:qe("submitTM")})]}):d.jsxs(d.Fragment,{children:[d.jsx(_c,{size:18}),d.jsx("span",{children:qe("enterNameToSubmit")})]})})]}),c===5&&d.jsxs("div",{className:"tm-wizard-footer",children:[d.jsxs("button",{className:"tm-big-btn primary",onClick:n,children:[d.jsx(Ki,{size:20}),d.jsx("span",{children:qe("done")})]}),d.jsx("button",{className:"tm-skip-btn",onClick:n,children:qe("skipSignature")})]})]})}const a3=e=>{try{const t=`fieldsync_dismissed_workers_${e}`,r=localStorage.getItem(t);return r?JSON.parse(r):[]}catch{return[]}},Dg=(e,t)=>{try{const r=`fieldsync_dismissed_workers_${e}`;localStorage.setItem(r,JSON.stringify(t))}catch{}};function i3({project:e,companyId:t,onShowToast:r}){const[n,i]=y.useState([]),[s,c]=y.useState(!0),[u,m]=y.useState(!1),[h,p]=y.useState(!1),[g,_]=y.useState({name:"",role:"",labor_class_id:null}),[x,w]=y.useState([]),[j,S]=y.useState(!0),[O,C]=y.useState([]),[A,k]=y.useState(!1),[D,M]=y.useState([]),[z,W]=y.useState([]),[Y,re]=y.useState(!0),X=["Foreman","Laborer","Supervisor","Operator"],I=y.useCallback(async()=>{try{const G=await ye.getCrewCheckin(e.id);G?.workers&&i(G.workers)}catch(G){console.error("Error loading crew:",G),r?.("Error loading today's crew","error")}finally{c(!1)}},[e?.id,r]),se=y.useCallback(async()=>{try{const G=await ye.getRecentWorkers(e.id,30);w(G)}catch(G){console.error("Error loading recent workers:",G)}finally{S(!1)}},[e?.id]),pe=y.useCallback(async()=>{try{const G=await ye.getLaborClassesForField(t);M(G.categories||[]),W(G.classes||[]),G.classes&&G.classes.length>0&&_(_e=>({..._e,role:G.classes[0].name,labor_class_id:G.classes[0].id}))}catch(G){console.error("Error loading labor classes:",G),r?.("Using default roles - custom labor classes unavailable","info")}finally{re(!1)}},[t,r]);y.useEffect(()=>{e?.id&&(I(),se(),C(a3(e.id)),t?pe():re(!1))},[e?.id,t,I,se,pe]);const q=G=>{const _e=z.find(V=>V.id===G);_(_e?{...g,role:_e.name,labor_class_id:_e.id}:{...g,role:G,labor_class_id:null})},R=async()=>{if(!g.name.trim()){r("Enter worker name","error");return}if(!g.role){r("Select a role","error");return}if(n.find(G=>G.name.toLowerCase()===g.name.trim().toLowerCase())){r("Worker already added","error");return}m(!0);try{const G=[...n,{name:g.name.trim(),role:g.role,labor_class_id:g.labor_class_id}];await ye.saveCrewCheckin(e.id,G),i(G),_({...g,name:""}),p(!1),r("Crew member added","success")}catch(G){console.error("Error adding worker:",G),r("Error adding crew member","error")}finally{m(!1)}},U=async G=>{m(!0);try{const _e=n.filter(V=>V.name.toLowerCase()!==G.toLowerCase());await ye.saveCrewCheckin(e.id,_e),i(_e),r("Crew member removed","success")}catch(_e){console.error("Error removing worker:",_e),r("Error removing crew member","error")}finally{m(!1)}},te=async G=>{if(n.find(_e=>_e.name.toLowerCase()===G.name.toLowerCase())){r("Already checked in","info");return}m(!0);try{const _e=[...n,{name:G.name,role:G.role,labor_class_id:G.labor_class_id}];await ye.saveCrewCheckin(e.id,_e),i(_e),r(`${G.name} checked in`,"success")}catch(_e){console.error("Error adding worker:",_e),r("Error adding crew member","error")}finally{m(!1)}},ne=G=>{const _e=G.toLowerCase(),V=[...O,_e];C(V),Dg(e.id,V),r?.(`${G} removed from quick-add`,"success")},we=G=>{const _e=G.toLowerCase(),V=O.filter(xe=>xe!==_e);C(V),Dg(e.id,V),r?.(`${G} restored to quick-add`,"success")},Pe=()=>{C([]),Dg(e.id,[]),k(!1),r?.("All workers restored to quick-add","success")},F=x.filter(G=>O.includes(G.name.toLowerCase())),$=x.filter(G=>!n.find(_e=>_e.name.toLowerCase()===G.name.toLowerCase())&&!O.includes(G.name.toLowerCase())),Se=new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),De=()=>{const G={};D.forEach(V=>{G[V.id]={name:V.name,classes:z.filter(xe=>xe.category_id===V.id)}});const _e=z.filter(V=>!V.category_id);return _e.length>0&&(G.uncategorized={name:"Other",classes:_e}),G},Ie=z.length>0;return s||Y?d.jsxs("div",{className:"crew-checkin",children:[d.jsxs("div",{className:"crew-header",children:[d.jsxs("h3",{children:[d.jsx(Po,{size:18,className:"inline-icon"})," Today's Crew"]}),d.jsx("span",{className:"crew-date",children:Se})]}),d.jsx("div",{className:"crew-loading",children:"Loading..."})]}):d.jsxs("div",{className:"crew-checkin",children:[d.jsxs("div",{className:"crew-header",children:[d.jsxs("h3",{children:[d.jsx(Po,{size:18,className:"inline-icon"})," Today's Crew"]}),d.jsx("span",{className:"crew-date",children:Se})]}),n.length===0?d.jsxs("div",{className:"crew-empty",children:[d.jsx("p",{children:"No crew checked in yet"}),d.jsx("p",{className:"crew-empty-hint",children:"Add your crew for the day"})]}):d.jsx("div",{className:"crew-list",children:n.map(G=>d.jsxs("div",{className:"crew-member",children:[d.jsxs("div",{className:"crew-member-info",children:[d.jsx("span",{className:"crew-member-name",children:G.name}),d.jsx("span",{className:`crew-member-role ${(G.role||"laborer").toLowerCase().replace(/\s+/g,"-")}`,children:G.role})]}),d.jsx("button",{className:"crew-remove-btn",onClick:()=>U(G.name),disabled:u,children:""})]},G.name))}),!j&&($.length>0||A)&&d.jsxs("div",{className:"crew-quick-add",children:[d.jsxs("div",{className:"crew-quick-add-header",children:[d.jsx("span",{children:A?"Manage quick-add list":"Tap to add"}),d.jsx("button",{className:"crew-quick-add-edit-btn",onClick:()=>k(!A),children:A?"Done":"Edit"})]}),d.jsx("div",{className:"crew-quick-add-grid",children:$.map(G=>d.jsxs("div",{className:`crew-quick-add-item ${A?"editing":""}`,children:[d.jsxs("button",{className:"crew-quick-add-btn",onClick:()=>!A&&te(G),disabled:u||A,children:[d.jsx("span",{className:"crew-quick-add-name",children:G.name}),d.jsx("span",{className:"crew-quick-add-role",children:G.role})]}),A&&d.jsx("button",{className:"crew-quick-add-dismiss",onClick:()=>ne(G.name),title:`Remove ${G.name} from quick-add`,children:d.jsx(Ic,{size:14})})]},G.name))}),A&&F.length>0&&d.jsxs("div",{className:"crew-dismissed-section",children:[d.jsxs("div",{className:"crew-dismissed-header",children:[d.jsx("span",{children:"Removed workers"}),d.jsxs("button",{className:"crew-restore-all-btn",onClick:Pe,children:[d.jsx(mf,{size:12}),d.jsx("span",{children:"Restore all"})]})]}),d.jsx("div",{className:"crew-dismissed-list",children:F.map(G=>d.jsxs("button",{className:"crew-dismissed-item",onClick:()=>we(G.name),children:[d.jsx("span",{className:"crew-dismissed-name",children:G.name}),d.jsx(mf,{size:12})]},G.name))})]})]}),h?d.jsxs("div",{className:"crew-add-form",children:[d.jsx("input",{type:"text",value:g.name,onChange:G=>_({...g,name:G.target.value}),placeholder:"Name",autoFocus:!0}),d.jsx("select",{value:g.labor_class_id||g.role,onChange:G=>q(G.target.value),children:Ie?Object.entries(De()).map(([G,_e])=>d.jsx("optgroup",{label:_e.name,children:_e.classes.map(V=>d.jsx("option",{value:V.id,children:V.name},V.id))},G)):X.map(G=>d.jsx("option",{value:G,children:G},G))}),d.jsxs("div",{className:"crew-add-buttons",children:[d.jsx("button",{className:"crew-add-confirm",onClick:R,disabled:u,children:u?"...":"Add"}),d.jsx("button",{className:"crew-add-cancel",onClick:()=>{p(!1),_({name:"",role:z[0]?.name||"Laborer",labor_class_id:z[0]?.id||null})},children:"Cancel"})]})]}):d.jsxs("button",{className:"crew-add-btn",onClick:()=>p(!0),children:[d.jsx(YA,{size:18}),d.jsx("span",{children:"Add New Person"})]}),d.jsxs("div",{className:"crew-count",children:[n.length," ",n.length===1?"person":"people"," on site"]})]})}function o3({project:e,onShowToast:t,onClose:r}){const[n,i]=y.useState(!0),[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(""),[g,_]=y.useState(""),[x,w]=y.useState([]),[j,S]=y.useState(!1),[O,C]=y.useState("");y.useEffect(()=>{e?.id&&A()},[e?.id]);const A=async()=>{try{const Y=await ye.getDailyReport(e.id);if(Y)m(Y),p(Y.field_notes||""),_(Y.issues||"");else{const re=await ye.compileDailyReport(e.id);m({...re,status:"draft"})}}catch(Y){console.error("Error loading report:",Y),t("Error loading report","error")}finally{i(!1)}},k=async Y=>{const re=Array.from(Y.target.files);if(re.length!==0){S(!0);try{const X=[];for(const I of re){if(!I.type.startsWith("image/"))continue;const se=await Oy(I),pe=URL.createObjectURL(se);X.push({id:`photo-${Date.now()}-${Math.random().toString(36).slice(2,8)}`,file:se,previewUrl:pe,name:I.name})}w(I=>[...I,...X])}catch(X){console.error("Error adding photos:",X),t("Error adding photos","error")}finally{S(!1),Y.target.value=""}}},D=Y=>{w(re=>{const X=re.find(I=>I.id===Y);return X?.previewUrl&&URL.revokeObjectURL(X.previewUrl),re.filter(I=>I.id!==Y)})},M=async()=>{if(!P){t("Demo Mode: Report saved locally only - won't reach office","info"),r();return}c(!0);try{const Y=[];if(x.length>0&&e.company_id){C("Uploading photos...");for(const I of x)if(I.file)try{const se=await ye.uploadPhoto(e.company_id,e.id,`dr-${Date.now()}`,I.file);se&&Y.push(se)}catch(se){console.error("Photo upload failed:",se)}}const re={field_notes:h,issues:g};Y.length>0&&(re.photos=Y),await ye.saveDailyReport(e.id,re),await ye.submitDailyReport(e.id,"Field")?(t("Daily report submitted!","success"),r()):t("Report not sent - check connection","error")}catch(Y){console.error("Error submitting report:",Y),t("Error submitting report","error")}finally{c(!1),C("")}},z=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});if(n)return d.jsxs("div",{className:"daily-report",children:[d.jsxs("div",{className:"daily-report-header",children:[d.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),d.jsx("h2",{children:"Daily Report"})]}),d.jsx("div",{className:"daily-report-loading",children:"Compiling report..."})]});if(!u)return d.jsxs("div",{className:"daily-report",children:[d.jsxs("div",{className:"daily-report-header",children:[d.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),d.jsx("h2",{children:"Daily Report"})]}),d.jsxs("div",{className:"daily-report-error",children:[d.jsx("p",{children:"Unable to load report data."}),d.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Retry"})]})]});const W=u.status==="submitted";return d.jsxs("div",{className:"daily-report",children:[d.jsxs("div",{className:"daily-report-header",children:[d.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),d.jsxs("div",{children:[d.jsx("h2",{children:"Daily Report"}),d.jsx("p",{className:"daily-report-date",children:z})]})]}),W&&d.jsxs("div",{className:"daily-report-submitted-banner",children:[" Submitted ",new Date(u.submitted_at).toLocaleTimeString()]}),d.jsxs("div",{className:"daily-report-content",children:[d.jsxs("div",{className:"daily-report-summary",children:[d.jsxs("div",{className:"daily-report-card",children:[d.jsx("div",{className:"daily-report-card-value",children:u.crew_count||0}),d.jsx("div",{className:"daily-report-card-label",children:"Crew on Site"})]}),d.jsxs("div",{className:"daily-report-card",children:[d.jsx("div",{className:"daily-report-card-value",children:u.tasks_completed||0}),d.jsx("div",{className:"daily-report-card-label",children:"Tasks Done"})]}),d.jsxs("div",{className:"daily-report-card",children:[d.jsx("div",{className:"daily-report-card-value",children:u.tm_tickets_count||0}),d.jsx("div",{className:"daily-report-card-label",children:"Time & Material"})]}),d.jsxs("div",{className:"daily-report-card",children:[d.jsx("div",{className:"daily-report-card-value",children:(u.photos_count||0)+x.length}),d.jsx("div",{className:"daily-report-card-label",children:"Photos"})]})]}),u.crew_list?.length>0&&d.jsxs("div",{className:"daily-report-section",children:[d.jsxs("h3",{children:[d.jsx(Po,{size:18,className:"inline-icon"})," Crew"]}),d.jsx("div",{className:"daily-report-crew",children:u.crew_list.map((Y,re)=>d.jsxs("div",{className:"daily-report-crew-item",children:[d.jsx("span",{children:Y.name}),d.jsx("span",{className:"daily-report-crew-role",children:Y.role})]},re))})]}),u.completed_tasks?.length>0&&d.jsxs("div",{className:"daily-report-section",children:[d.jsxs("h3",{children:[d.jsx(oq,{size:18,className:"inline-icon"})," Completed Today"]}),d.jsx("ul",{className:"daily-report-tasks",children:u.completed_tasks.map((Y,re)=>d.jsxs("li",{children:[Y.name,Y.group&&d.jsx("span",{className:"daily-report-task-group",children:Y.group})]},re))})]}),d.jsxs("div",{className:"daily-report-section",children:[d.jsxs("h3",{children:[d.jsx(ff,{size:18,className:"inline-icon"})," Site Photos"]}),x.length>0&&d.jsx("div",{className:"dr-photo-grid",children:x.map(Y=>d.jsxs("div",{className:"dr-photo-thumb",children:[d.jsx("img",{src:Y.previewUrl,alt:Y.name}),!W&&d.jsx("button",{className:"dr-photo-remove",onClick:()=>D(Y.id),"aria-label":"Remove photo",children:d.jsx(Ic,{size:14})})]},Y.id))}),!W&&d.jsxs("label",{className:"dr-photo-add-btn",children:[d.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:k,style:{display:"none"},disabled:j}),j?d.jsx("span",{className:"dr-photo-add-label",children:"Processing..."}):d.jsxs(d.Fragment,{children:[d.jsx(sq,{size:20}),d.jsx("span",{className:"dr-photo-add-label",children:x.length>0?"Add More Photos":"Tap to Add Photos"}),d.jsx("span",{className:"dr-photo-add-hint",children:"Progress, work completed, issues"})]})]}),W&&x.length===0&&(u.photos_count||0)===0&&d.jsx("p",{className:"dr-photo-empty",children:"No photos attached"})]}),d.jsxs("div",{className:"daily-report-section",children:[d.jsxs("h3",{children:[d.jsx(Fo,{size:18,className:"inline-icon"})," Notes"]}),d.jsx("textarea",{value:h,onChange:Y=>p(Y.target.value),placeholder:"Any notes about today's work...",rows:3,disabled:W})]}),d.jsxs("div",{className:"daily-report-section",children:[d.jsxs("h3",{children:[d.jsx(dm,{size:18,className:"inline-icon"})," Issues / Concerns"]}),d.jsx("textarea",{value:g,onChange:Y=>_(Y.target.value),placeholder:"Any problems, delays, or concerns...",rows:3,disabled:W})]})]}),!W&&d.jsxs("div",{className:"daily-report-footer",children:[d.jsx("button",{className:"btn btn-primary daily-report-submit",onClick:M,disabled:s,children:s?O||"Submitting...":d.jsxs(d.Fragment,{children:[d.jsx(lq,{size:16,className:"inline-icon"})," Submit Report"]})}),d.jsx("p",{className:"daily-report-hint",children:"This will be sent to the office"})]})]})}function s3({project:e,companyId:t,user:r,onClose:n,onReportCreated:i}){const[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(1),[g,_]=y.useState(new Date().toISOString().split("T")[0]),[x,w]=y.useState(new Date().toTimeString().split(" ")[0].substring(0,5)),[j,S]=y.useState(""),[O,C]=y.useState(""),[A,k]=y.useState("minor"),[D,M]=y.useState(""),[z,W]=y.useState(""),[Y,re]=y.useState(""),[X,I]=y.useState(""),[se,pe]=y.useState(""),[q,R]=y.useState(""),[U,te]=y.useState(""),[ne,we]=y.useState(r?.name||""),[Pe,F]=y.useState(""),[$,Se]=y.useState(""),[De,Ie]=y.useState(r?.email||""),[G,_e]=y.useState([]),[V,xe]=y.useState(""),[je,oe]=y.useState(""),[He,ge]=y.useState(""),[Ne,Re]=y.useState(""),[jt,qe]=y.useState(!1),[It,yt]=y.useState(""),[Ct,Br]=y.useState(""),[xt,Ye]=y.useState(!1),[$r,_n]=y.useState(""),[Hr,jr]=y.useState(""),[Yt,he]=y.useState(""),[it,xn]=y.useState(""),[Qt,Ut]=y.useState(!1),[qt,ft]=y.useState(!1),[en,$n]=y.useState(0),[oa,di]=y.useState(0),fi=()=>{if(!V.trim()){m({type:"error",message:"Please enter witness name"});return}const ve={name:V,phone:je,email:He,testimony:Ne};_e([...G,ve]),xe(""),oe(""),ge(""),Re(""),m({type:"success",message:"Witness added"})},xa=ve=>{_e(G.filter((Hn,ja)=>ja!==ve))},wn=ve=>{switch(ve){case 1:if(!j.trim()||!O.trim())return m({type:"error",message:"Please fill in all incident details"}),!1;break;case 2:if(!z.trim()||!q.trim())return m({type:"error",message:"Please fill in employee name and job title"}),!1;break;case 3:if(!ne.trim()||!Pe.trim())return m({type:"error",message:"Please fill in supervisor name and title"}),!1;break}return!0},mi=()=>{wn(h)&&p(h+1)},wa=()=>{p(h-1)},ll=async()=>{if(wn(h)){if(!P){m({type:"info",message:"Demo Mode: Report saved locally only - won't reach office"}),setTimeout(()=>{n()},1500);return}c(!0);try{const ve={project_id:e.id,company_id:t,incident_date:g,incident_time:x,incident_location:j,incident_description:O,injury_type:A,body_part_affected:D||null,employee_name:z,employee_phone:Y||null,employee_email:X||null,employee_address:se||null,employee_job_title:q,employee_hire_date:U||null,medical_treatment_required:jt,medical_facility_name:It||null,medical_facility_address:Ct||null,hospitalized:xt,reported_by_name:ne,reported_by_title:Pe,reported_by_phone:$||null,reported_by_email:De||null,witnesses:G,immediate_actions_taken:$r||null,corrective_actions_planned:Hr||null,safety_equipment_used:Yt||null,safety_equipment_failed:it||null,osha_recordable:Qt,workers_comp_claim:qt,days_away_from_work:parseInt(en)||0,restricted_work_days:parseInt(oa)||0,status:"reported",created_by:r?.id},Hn=await ye.createInjuryReport(ve);m({type:"success",message:"Injury report submitted successfully"}),i&&i(Hn),setTimeout(()=>{n()},1500)}catch(ve){console.error("Error submitting injury report:",ve),m({type:"error",message:"Failed to submit injury report"})}finally{c(!1)}}};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"modal-overlay",onClick:n,children:d.jsxs("div",{className:"modal-content injury-report-modal",onClick:ve=>ve.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Workplace Injury/Incident Report"}),d.jsx("button",{className:"close-btn",onClick:n,children:""})]}),d.jsxs("div",{className:"progress-steps",children:[d.jsx("div",{className:`step ${h>=1?"active":""}`,children:"1. Incident"}),d.jsx("div",{className:`step ${h>=2?"active":""}`,children:"2. Employee"}),d.jsx("div",{className:`step ${h>=3?"active":""}`,children:"3. Supervisor"}),d.jsx("div",{className:`step ${h>=4?"active":""}`,children:"4. Witnesses"}),d.jsx("div",{className:`step ${h>=5?"active":""}`,children:"5. Medical & Safety"})]}),d.jsxs("div",{className:"modal-body",children:[h===1&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Incident Details"}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Date of Incident *"}),d.jsx("input",{type:"date",value:g,onChange:ve=>_(ve.target.value),max:new Date().toISOString().split("T")[0]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Time of Incident *"}),d.jsx("input",{type:"time",value:x,onChange:ve=>w(ve.target.value)})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Location on Site *"}),d.jsx("input",{type:"text",value:j,onChange:ve=>S(ve.target.value),placeholder:"e.g., Floor 2, near elevator shaft"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Incident Description *"}),d.jsx("textarea",{value:O,onChange:ve=>C(ve.target.value),rows:4,placeholder:"Describe what happened in detail..."})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Injury Type *"}),d.jsxs("select",{value:A,onChange:ve=>k(ve.target.value),children:[d.jsx("option",{value:"minor",children:"Minor Injury"}),d.jsx("option",{value:"serious",children:"Serious Injury"}),d.jsx("option",{value:"critical",children:"Critical Injury"}),d.jsx("option",{value:"near_miss",children:"Near Miss (No Injury)"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Body Part Affected"}),d.jsx("input",{type:"text",value:D,onChange:ve=>M(ve.target.value),placeholder:"e.g., Left hand, lower back"})]})]})]}),h===2&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Injured Employee Information"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Full Name *"}),d.jsx("input",{type:"text",value:z,onChange:ve=>W(ve.target.value),placeholder:"First and last name"})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Phone Number"}),d.jsx("input",{type:"tel",value:Y,onChange:ve=>re(ve.target.value),placeholder:"(555) 123-4567"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email Address"}),d.jsx("input",{type:"email",value:X,onChange:ve=>I(ve.target.value),placeholder:"email@example.com"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Home Address"}),d.jsx("input",{type:"text",value:se,onChange:ve=>pe(ve.target.value),placeholder:"Street address, city, state, zip"})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Job Title *"}),d.jsx("input",{type:"text",value:q,onChange:ve=>R(ve.target.value),placeholder:"e.g., Carpenter, Electrician"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Hire Date"}),d.jsx("input",{type:"date",value:U,onChange:ve=>te(ve.target.value)})]})]})]}),h===3&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Foreman/Supervisor Making Report"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Your Name *"}),d.jsx("input",{type:"text",value:ne,onChange:ve=>we(ve.target.value),placeholder:"Full name"})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Your Title *"}),d.jsx("input",{type:"text",value:Pe,onChange:ve=>F(ve.target.value),placeholder:"e.g., Site Foreman, Project Manager"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Your Phone Number"}),d.jsx("input",{type:"tel",value:$,onChange:ve=>Se(ve.target.value),placeholder:"(555) 123-4567"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Your Email Address"}),d.jsx("input",{type:"email",value:De,onChange:ve=>Ie(ve.target.value),placeholder:"email@example.com"})]})]}),h===4&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Witness Testimonies (Optional)"}),G.length>0&&d.jsx("div",{className:"witnesses-list",children:G.map((ve,Hn)=>d.jsxs("div",{className:"witness-item",children:[d.jsxs("div",{className:"witness-info",children:[d.jsx("strong",{children:ve.name}),ve.phone&&d.jsxs("span",{children:["  ",ve.phone]}),ve.testimony&&d.jsxs("p",{className:"witness-testimony",children:['"',ve.testimony,'"']})]}),d.jsx("button",{className:"btn-danger btn-small",onClick:()=>xa(Hn),children:"Remove"})]},Hn))}),d.jsxs("div",{className:"add-witness-form",children:[d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Witness Name"}),d.jsx("input",{type:"text",value:V,onChange:ve=>xe(ve.target.value),placeholder:"Full name"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Phone Number"}),d.jsx("input",{type:"tel",value:je,onChange:ve=>oe(ve.target.value),placeholder:"(555) 123-4567"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email Address"}),d.jsx("input",{type:"email",value:He,onChange:ve=>ge(ve.target.value),placeholder:"email@example.com"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Witness Testimony"}),d.jsx("textarea",{value:Ne,onChange:ve=>Re(ve.target.value),rows:3,placeholder:"What did the witness see or hear?"})]}),d.jsx("button",{className:"btn-secondary",onClick:fi,children:"+ Add Witness"})]})]}),h===5&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Medical Treatment & Safety"}),d.jsx("div",{className:"form-group checkbox-group",children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:jt,onChange:ve=>qe(ve.target.checked)}),"Medical treatment required"]})}),jt&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Medical Facility Name"}),d.jsx("input",{type:"text",value:It,onChange:ve=>yt(ve.target.value),placeholder:"Hospital or clinic name"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Medical Facility Address"}),d.jsx("input",{type:"text",value:Ct,onChange:ve=>Br(ve.target.value),placeholder:"Street address"})]}),d.jsx("div",{className:"form-group checkbox-group",children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:xt,onChange:ve=>Ye(ve.target.checked)}),"Employee was hospitalized"]})})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Immediate Actions Taken"}),d.jsx("textarea",{value:$r,onChange:ve=>_n(ve.target.value),rows:2,placeholder:"What was done immediately after the incident?"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Corrective Actions Planned"}),d.jsx("textarea",{value:Hr,onChange:ve=>jr(ve.target.value),rows:2,placeholder:"What will be done to prevent this in the future?"})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Safety Equipment Used"}),d.jsx("input",{type:"text",value:Yt,onChange:ve=>he(ve.target.value),placeholder:"e.g., Hard hat, gloves, harness"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Safety Equipment Failed"}),d.jsx("input",{type:"text",value:it,onChange:ve=>xn(ve.target.value),placeholder:"Equipment that failed, if any"})]})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Days Away From Work"}),d.jsx("input",{type:"number",min:"0",value:en,onChange:ve=>$n(ve.target.value)})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Restricted Work Days"}),d.jsx("input",{type:"number",min:"0",value:oa,onChange:ve=>di(ve.target.value)})]})]}),d.jsx("div",{className:"form-group checkbox-group",children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:Qt,onChange:ve=>Ut(ve.target.checked)}),"OSHA Recordable Incident"]})}),d.jsx("div",{className:"form-group checkbox-group",children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:qt,onChange:ve=>ft(ve.target.checked)}),"Workers' Compensation Claim Filed"]})})]})]}),d.jsx("div",{className:"modal-footer",children:d.jsxs("div",{className:"form-actions",children:[h>1&&d.jsx("button",{className:"btn-secondary",onClick:wa,children:" Back"}),d.jsx("button",{className:"btn-secondary",onClick:n,children:"Cancel"}),h<5?d.jsx("button",{className:"btn-primary",onClick:mi,children:"Next "}):d.jsx("button",{className:"btn-primary",onClick:ll,disabled:s,children:s?"Submitting...":"Submit Report"})]})})]})}),u&&d.jsx(TN,{message:u.message,type:u.type,onClose:()=>m(null)}),d.jsx("style",{children:`
        .injury-report-modal {
          max-width: 800px;
          max-height: 90vh;
          overflow-y: auto;
        }

        .progress-steps {
          display: flex;
          justify-content: space-between;
          padding: 1rem 1.5rem;
          border-bottom: 1px solid var(--border-color);
          background-color: var(--bg-elevated);
          overflow-x: auto;
        }

        .progress-steps .step {
          font-size: 0.875rem;
          color: var(--text-muted);
          font-weight: 500;
          white-space: nowrap;
          padding: 0.5rem;
        }

        .progress-steps .step.active {
          color: var(--accent-primary);
          font-weight: 600;
        }

        .form-step h3 {
          margin-top: 0;
          margin-bottom: 1.5rem;
          color: var(--text-primary);
          font-size: 1.25rem;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1rem;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: block;
          margin-bottom: 0.5rem;
          font-weight: 500;
          color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          width: 100%;
          padding: 0.5rem;
          border: 1px solid var(--border-color);
          border-radius: 4px;
          font-size: 1rem;
          background: var(--bg-card);
          color: var(--text-primary);
        }

        .form-group textarea {
          resize: vertical;
        }

        .checkbox-group label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-weight: normal;
          cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
          width: auto;
          margin: 0;
        }

        .witnesses-list {
          margin-bottom: 1.5rem;
        }

        .witness-item {
          border: 1px solid var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          margin-bottom: 0.5rem;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .witness-info {
          flex: 1;
          color: var(--text-primary);
        }

        .witness-testimony {
          margin-top: 0.5rem;
          color: var(--text-secondary);
          font-style: italic;
          font-size: 0.875rem;
        }

        .add-witness-form {
          border: 2px dashed var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          background-color: var(--bg-elevated);
        }

        .modal-footer {
          border-top: 1px solid var(--border-color);
          padding: 1rem 1.5rem;
        }

        .form-actions {
          display: flex;
          justify-content: space-between;
          gap: 0.5rem;
        }

        .btn-primary,
        .btn-secondary,
        .btn-danger {
          padding: 0.5rem 1rem;
          border-radius: 6px;
          font-weight: 500;
          cursor: pointer;
          border: none;
        }

        .btn-primary {
          background-color: var(--primary-color, #3b82f6);
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          opacity: 0.9;
        }

        .btn-primary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .btn-secondary {
          background-color: var(--bg-elevated);
          color: var(--text-primary);
          border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
          background-color: var(--bg-tertiary);
        }

        .btn-danger {
          background-color: #ef4444;
          color: white;
        }

        .btn-danger:hover {
          background-color: #dc2626;
        }

        .btn-small {
          padding: 0.25rem 0.75rem;
          font-size: 0.875rem;
        }

        @media (max-width: 768px) {
          .injury-report-modal {
            max-width: 100%;
            height: 100vh;
            max-height: 100vh;
            border-radius: 0;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .progress-steps .step {
            font-size: 0.75rem;
            padding: 0.25rem;
          }
        }
      `})]})}const of=[{value:"concrete",label:"Concrete",icon:""},{value:"trash",label:"Trash",icon:""},{value:"metals",label:"Metals",icon:""},{value:"hazardous_waste",label:"Hazardous",icon:""}],l3=e=>of.find(t=>t.value===e)||{label:e,icon:""};function c3({project:e,user:t=null,date:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState([]),[m,h]=y.useState(!0),[p,g]=y.useState(!1),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState({type:"concrete",count:1}),C=new Date(r).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});y.useEffect(()=>{A(),k()},[e.id,r]);const A=async()=>{try{h(!0);const I=await ye.getDisposalLoads(e.id,r);s(I||[])}catch(I){console.error("Error loading disposal loads:",I)}finally{h(!1)}},k=async()=>{try{const se=(await ye.getDisposalLoadsHistory(e.id,14)||[]).filter(q=>q.load_date!==r).reduce((q,R)=>(q[R.load_date]||(q[R.load_date]=[]),q[R.load_date].push(R),q),{}),pe=Object.entries(se).map(([q,R])=>({date:q,loads:R,totalLoads:R.reduce((U,te)=>U+te.load_count,0)})).sort((q,R)=>new Date(R.date)-new Date(q.date));u(pe)}catch(I){console.error("Error loading disposal history:",I)}},D=async()=>{if(!(S.count<1)){g(!0);try{await ye.addDisposalLoad(e.id,t?.id||null,r,S.type,S.count),await A(),O({type:"concrete",count:1}),x(!1),n?.("Disposal load added","success")}catch(I){console.error("Error adding disposal load:",I),n?.("Error adding load","error")}finally{g(!1)}}},M=async I=>{g(!0);try{await ye.deleteDisposalLoad(I),await A(),n?.("Load removed","success")}catch(se){console.error("Error deleting disposal load:",se),n?.("Error removing load","error")}finally{g(!1)}},z=async I=>{g(!0);try{await ye.addDisposalLoad(e.id,t?.id||null,r,I,1),await A(),n?.("Load added","success")}catch(se){console.error("Error adding disposal load:",se),n?.("Error adding load","error")}finally{g(!1)}},W=async I=>{g(!0);try{await ye.updateDisposalLoad(I.id,I.load_type,I.load_count+1),await A()}catch(se){console.error("Error updating load:",se),n?.("Error updating load","error")}finally{g(!1)}},Y=async I=>{if(I.load_count<=1){await M(I.id);return}g(!0);try{await ye.updateDisposalLoad(I.id,I.load_type,I.load_count-1),await A()}catch(se){console.error("Error updating load:",se),n?.("Error updating load","error")}finally{g(!1)}},re=i.reduce((I,se)=>(I[se.load_type]||(I[se.load_type]={items:[],total:0}),I[se.load_type].items.push(se),I[se.load_type].total+=se.load_count,I),{}),X=i.reduce((I,se)=>I+se.load_count,0);return m?d.jsxs("div",{className:"disposal-load-input",children:[d.jsxs("div",{className:"disposal-header",children:[d.jsx(hf,{size:20}),d.jsx("span",{children:"Disposal Loads"})]}),d.jsx("div",{className:"disposal-loading",children:"Loading..."})]}):d.jsxs("div",{className:"disposal-load-input",children:[d.jsxs("div",{className:"disposal-header",children:[d.jsxs("div",{className:"disposal-title",children:[d.jsx(hf,{size:20}),d.jsx("span",{children:"Disposal Loads"}),X>0&&d.jsx("span",{className:"disposal-badge",children:X})]}),d.jsx("span",{className:"disposal-date",children:C})]}),d.jsx("div",{className:"disposal-quick-add",children:of.map(I=>d.jsxs("button",{className:"quick-add-btn",onClick:()=>z(I.value),disabled:p,children:[d.jsx("span",{className:"quick-add-icon",children:I.icon}),d.jsxs("span",{className:"quick-add-label",children:["+ ",I.label]})]},I.value))}),Object.keys(re).length>0?d.jsx("div",{className:"disposal-loads-list",children:of.map(I=>{const se=re[I.value];return se?d.jsxs("div",{className:"disposal-load-row",children:[d.jsxs("div",{className:"load-info",children:[d.jsx("span",{className:"load-icon",children:I.icon}),d.jsx("span",{className:"load-label",children:I.label})]}),d.jsxs("div",{className:"load-controls",children:[d.jsx("button",{className:"load-btn decrement",onClick:()=>Y(se.items[0]),disabled:p,children:d.jsx(SS,{size:16})}),d.jsx("span",{className:"load-count",children:se.total}),d.jsx("button",{className:"load-btn increment",onClick:()=>W(se.items[0]),disabled:p,children:d.jsx(Qd,{size:16})})]})]},I.value):null})}):d.jsxs("div",{className:"disposal-empty",children:[d.jsxs("p",{children:["No disposal loads recorded for ",C]}),d.jsx("p",{className:"disposal-hint",children:"Tap a button above to add loads"})]}),_&&d.jsxs("div",{className:"disposal-add-form",children:[d.jsxs("div",{className:"add-form-row",children:[d.jsx("select",{value:S.type,onChange:I=>O({...S,type:I.target.value}),className:"load-type-select",children:of.map(I=>d.jsxs("option",{value:I.value,children:[I.icon," ",I.label]},I.value))}),d.jsxs("div",{className:"count-input-group",children:[d.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:Math.max(1,S.count-1)}),children:d.jsx(SS,{size:16})}),d.jsx("input",{type:"number",min:"1",value:S.count,onChange:I=>O({...S,count:parseInt(I.target.value)||1}),className:"count-input"}),d.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:S.count+1}),children:d.jsx(Qd,{size:16})})]})]}),d.jsxs("div",{className:"add-form-actions",children:[d.jsxs("button",{className:"btn btn-secondary btn-small",onClick:()=>x(!1),children:[d.jsx(Ic,{size:16})," Cancel"]}),d.jsxs("button",{className:"btn btn-primary btn-small",onClick:D,disabled:p,children:[d.jsx(Ki,{size:16})," Add"]})]})]}),!_&&d.jsxs("button",{className:"disposal-add-custom",onClick:()=>x(!0),children:[d.jsx(Qd,{size:16}),"Add multiple loads"]}),X>0&&d.jsxs("div",{className:"disposal-summary",children:[d.jsx("strong",{children:X})," total load",X!==1?"s":""," today"]}),c.length>0&&d.jsxs("div",{className:"disposal-history-section",children:[d.jsxs("button",{className:"disposal-history-toggle",onClick:()=>j(!w),children:[d.jsx(cq,{size:16}),d.jsxs("span",{children:["View History (",c.length," days)"]}),w?d.jsx(ZA,{size:16}):d.jsx(pf,{size:16})]}),w&&d.jsx("div",{className:"disposal-history-list",children:c.map(I=>{const se=new Date(I.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),pe=I.loads.reduce((q,R)=>(q[R.load_type]||(q[R.load_type]=0),q[R.load_type]+=R.load_count,q),{});return d.jsxs("div",{className:"disposal-history-day",children:[d.jsxs("div",{className:"disposal-history-header",children:[d.jsx("span",{className:"disposal-history-date",children:se}),d.jsxs("span",{className:"disposal-history-total",children:[I.totalLoads," load",I.totalLoads!==1?"s":""]})]}),d.jsx("div",{className:"disposal-history-types",children:Object.entries(pe).map(([q,R])=>{const U=l3(q);return d.jsxs("span",{className:"disposal-history-type",children:[U.icon," ",R," ",U.label]},q)})})]},I.date)})})]})]})}const QS={folder:pc,plans:mq,specs:Fo,permits:XA,contracts:fq,submittals:dq,rfis:uq,photos:ff,reports:QA,safety:dm},Pd={blue:"#3b82f6",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",purple:"#8b5cf6",pink:"#ec4899",gray:"#6b7280",orange:"#f97316"},u3=e=>e?.startsWith("image/")?hq:e?.includes("spreadsheet")||e?.includes("excel")?pq:e?.includes("pdf")?Fo:gq,d3=e=>{if(!e)return"0 B";const t=["B","KB","MB","GB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(r<10?1:0)} ${t[n]}`};function f3({projectId:e,onShowToast:t}){const[r,n]=y.useState([]),[i,s]=y.useState(!0),[c,u]=y.useState(null),[m,h]=y.useState([]),[p,g]=y.useState(!1),_=y.useRef(null),x=y.useCallback(async()=>{s(!0);try{const C=await ye.getProjectFolders(e);n(C)}catch(C){console.error("Error loading folders:",C),t?.("Failed to load folders","error")}finally{s(!1)}},[e,t]),w=y.useCallback(async C=>{if(C){g(!0);try{const A=await ye.getFolderDocuments(C);h(A.documents)}catch(A){console.error("Error loading documents:",A),t?.("Failed to load documents","error")}finally{g(!1)}}},[t]);y.useEffect(()=>{x();const C=ye.subscribeToDocumentFolders?.(e,()=>{x()}),A=ye.subscribeToDocuments?.(e,()=>{x(),_.current&&w(_.current.id)});return()=>{C?.unsubscribe?.(),A?.unsubscribe?.()}},[e,x,w]);const j=async C=>{u(C),_.current=C,await w(C.id)},S=async C=>{try{await ye.logDocumentAccess(C.id,"downloaded");const A=C.url||`/storage/v1/object/public/project-documents/${C.storage_path}`;window.open(A,"_blank")}catch(A){console.error("Download error:",A)}},O=()=>{u(null),_.current=null,h([])};if(i)return d.jsx("div",{className:"field-docs",children:d.jsxs("div",{className:"field-docs-loading",children:[d.jsx($s,{size:24,className:"spinner"}),d.jsx("span",{children:"Loading..."})]})});if(c){const C=QS[c.icon]||pc,A=Pd[c.color]||Pd.blue;return d.jsxs("div",{className:"field-docs",children:[d.jsxs("div",{className:"field-docs-header",children:[d.jsx("button",{className:"field-docs-back",onClick:O,children:d.jsx(cr,{size:20})}),d.jsxs("div",{className:"field-docs-title",children:[d.jsx("div",{className:"field-docs-title-icon",style:{backgroundColor:`${A}15`},children:d.jsx(C,{size:20,style:{color:A}})}),d.jsxs("div",{className:"field-docs-title-text",children:[d.jsx("h2",{children:c.name}),d.jsxs("span",{children:[m.length," files"]})]})]})]}),d.jsx("div",{className:"field-docs-list",children:p?d.jsxs("div",{className:"field-docs-loading",children:[d.jsx($s,{size:24,className:"spinner"}),d.jsx("span",{children:"Loading..."})]}):m.length===0?d.jsxs("div",{className:"field-docs-empty",children:[d.jsx(pc,{size:48,style:{color:A,opacity:.3}}),d.jsx("p",{children:"No documents yet"})]}):m.map(k=>{const D=u3(k.mime_type);return d.jsxs("button",{className:"field-doc-item",onClick:()=>S(k),children:[d.jsx("div",{className:"field-doc-icon",children:d.jsx(D,{size:22})}),d.jsxs("div",{className:"field-doc-info",children:[d.jsx("span",{className:"field-doc-name",children:k.name}),d.jsx("span",{className:"field-doc-size",children:d3(k.file_size_bytes)})]}),d.jsx(WA,{size:20,className:"field-doc-download"})]},k.id)})})]})}return d.jsx("div",{className:"field-docs",children:d.jsx("div",{className:"field-docs-grid",children:r.length===0?d.jsxs("div",{className:"field-docs-empty",children:[d.jsx(pc,{size:56}),d.jsx("h3",{children:"No documents"}),d.jsx("p",{children:"Documents will appear here when added"})]}):r.map(C=>{const A=QS[C.icon]||pc,k=Pd[C.color]||Pd.blue,D=C.document_count||0;return d.jsxs("button",{className:"field-folder-card",onClick:()=>j(C),children:[d.jsx("div",{className:"field-folder-icon",style:{backgroundColor:`${k}12`},children:d.jsx(A,{size:28,style:{color:k}})}),d.jsxs("div",{className:"field-folder-info",children:[d.jsx("span",{className:"field-folder-name",children:C.name}),d.jsxs("span",{className:"field-folder-count",children:[D," ",D===1?"file":"files"]})]}),d.jsx(bc,{size:20,className:"field-folder-arrow"})]},C.id)})})})}function MN(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=MN(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function st(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=MN(e))&&(n&&(n+=" "),n+=t);return n}var m3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $b(e){if(typeof e!="string")return!1;var t=m3;return t.includes(e)}var h3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],p3=new Set(h3);function RN(e){return typeof e!="string"?!1:p3.has(e)}function qN(e){return typeof e=="string"&&e.startsWith("data-")}function vn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(RN(r)||qN(r))&&(t[r]=e[r]);return t}function Ro(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return vn(t)}return typeof e=="object"&&!Array.isArray(e)?vn(e):null}function Ir(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(RN(r)||qN(r)||$b(r))&&(t[r]=e[r]);return t}function g3(e){return e==null?null:y.isValidElement(e)?Ir(e.props):typeof e=="object"&&!Array.isArray(e)?Ir(e):null}var v3=["children","width","height","viewBox","className","style","title","desc"];function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cy.apply(null,arguments)}function y3(e,t){if(e==null)return{};var r,n,i=b3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function b3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zN=y.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:s,className:c,style:u,title:m,desc:h}=e,p=y3(e,v3),g=s||{width:n,height:i,x:0,y:0},_=st("recharts-surface",c);return y.createElement("svg",Cy({},Ir(p),{className:_,width:n,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),y.createElement("title",null,m),y.createElement("desc",null,h),r)}),_3=["children","className"];function Ay(){return Ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ay.apply(null,arguments)}function x3(e,t){if(e==null)return{};var r,n,i=w3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function w3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _r=y.forwardRef((e,t)=>{var{children:r,className:n}=e,i=x3(e,_3),s=st("recharts-layer",n);return y.createElement("g",Ay({className:s},Ir(i),{ref:t}),r)}),LN=y.createContext(null),qZ=()=>y.useContext(LN);function wt(e){return function(){return e}}const IN=Math.cos,yf=Math.sin,ia=Math.sqrt,bf=Math.PI,vm=2*bf,Ny=Math.PI,ky=2*Ny,wo=1e-6,j3=ky-wo;function UN(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function S3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return UN;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class E3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?UN:S3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,c){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,u=this._y1,m=n-t,h=i-r,p=c-t,g=u-r,_=p*p+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(_>wo)if(!(Math.abs(g*m-h*p)>wo)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-c,w=i-u,j=m*m+h*h,S=x*x+w*w,O=Math.sqrt(j),C=Math.sqrt(_),A=s*Math.tan((Ny-Math.acos((j+_-S)/(2*O*C)))/2),k=A/C,D=A/O;Math.abs(k-1)>wo&&this._append`L${t+k*p},${r+k*g}`,this._append`A${s},${s},0,0,${+(g*x>p*w)},${this._x1=t+D*m},${this._y1=r+D*h}`}}arc(t,r,n,i,s,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(i),m=n*Math.sin(i),h=t+u,p=r+m,g=1^c,_=c?i-s:s-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>wo||Math.abs(this._y1-p)>wo)&&this._append`L${h},${p}`,n&&(_<0&&(_=_%ky+ky),_>j3?this._append`A${n},${n},0,1,${g},${t-u},${r-m}A${n},${n},0,1,${g},${this._x1=h},${this._y1=p}`:_>wo&&this._append`A${n},${n},0,${+(_>=Ny)},${g},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Hb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new E3(t)}function Fb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function BN(e){this._context=e}BN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ym(e){return new BN(e)}function $N(e){return e[0]}function HN(e){return e[1]}function FN(e,t){var r=wt(!0),n=null,i=ym,s=null,c=Hb(u);e=typeof e=="function"?e:e===void 0?$N:wt(e),t=typeof t=="function"?t:t===void 0?HN:wt(t);function u(m){var h,p=(m=Fb(m)).length,g,_=!1,x;for(n==null&&(s=i(x=c())),h=0;h<=p;++h)!(h<p&&r(g=m[h],h,m))===_&&((_=!_)?s.lineStart():s.lineEnd()),_&&s.point(+e(g,h,m),+t(g,h,m));if(x)return s=null,x+""||null}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:wt(+m),u):e},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:wt(+m),u):t},u.defined=function(m){return arguments.length?(r=typeof m=="function"?m:wt(!!m),u):r},u.curve=function(m){return arguments.length?(i=m,n!=null&&(s=i(n)),u):i},u.context=function(m){return arguments.length?(m==null?n=s=null:s=i(n=m),u):n},u}function Md(e,t,r){var n=null,i=wt(!0),s=null,c=ym,u=null,m=Hb(h);e=typeof e=="function"?e:e===void 0?$N:wt(+e),t=typeof t=="function"?t:wt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?HN:wt(+r);function h(g){var _,x,w,j=(g=Fb(g)).length,S,O=!1,C,A=new Array(j),k=new Array(j);for(s==null&&(u=c(C=m())),_=0;_<=j;++_){if(!(_<j&&i(S=g[_],_,g))===O)if(O=!O)x=_,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=_-1;w>=x;--w)u.point(A[w],k[w]);u.lineEnd(),u.areaEnd()}O&&(A[_]=+e(S,_,g),k[_]=+t(S,_,g),u.point(n?+n(S,_,g):A[_],r?+r(S,_,g):k[_]))}if(C)return u=null,C+""||null}function p(){return FN().defined(i).curve(c).context(s)}return h.x=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),n=null,h):e},h.x0=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),h):e},h.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:wt(+g),h):n},h.y=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),r=null,h):t},h.y0=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),h):t},h.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:wt(+g),h):r},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(r)},h.lineX1=function(){return p().x(n).y(t)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:wt(!!g),h):i},h.curve=function(g){return arguments.length?(c=g,s!=null&&(u=c(s)),h):c},h.context=function(g){return arguments.length?(g==null?s=u=null:u=c(s=g),h):s},h}class KN{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function O3(e){return new KN(e,!0)}function C3(e){return new KN(e,!1)}const Kb={draw(e,t){const r=ia(t/bf);e.moveTo(r,0),e.arc(0,0,r,0,vm)}},A3={draw(e,t){const r=ia(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},YN=ia(1/3),N3=YN*2,k3={draw(e,t){const r=ia(t/N3),n=r*YN;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},D3={draw(e,t){const r=ia(t),n=-r/2;e.rect(n,n,r,r)}},T3=.8908130915292852,GN=yf(bf/10)/yf(7*bf/10),P3=yf(vm/10)*GN,M3=-IN(vm/10)*GN,R3={draw(e,t){const r=ia(t*T3),n=P3*r,i=M3*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const c=vm*s/5,u=IN(c),m=yf(c);e.lineTo(m*r,-u*r),e.lineTo(u*n-m*i,m*n+u*i)}e.closePath()}},Tg=ia(3),q3={draw(e,t){const r=-ia(t/(Tg*3));e.moveTo(0,r*2),e.lineTo(-Tg*r,-r),e.lineTo(Tg*r,-r),e.closePath()}},Pn=-.5,Mn=ia(3)/2,Dy=1/ia(12),z3=(Dy/2+1)*3,L3={draw(e,t){const r=ia(t/z3),n=r/2,i=r*Dy,s=n,c=r*Dy+r,u=-s,m=c;e.moveTo(n,i),e.lineTo(s,c),e.lineTo(u,m),e.lineTo(Pn*n-Mn*i,Mn*n+Pn*i),e.lineTo(Pn*s-Mn*c,Mn*s+Pn*c),e.lineTo(Pn*u-Mn*m,Mn*u+Pn*m),e.lineTo(Pn*n+Mn*i,Pn*i-Mn*n),e.lineTo(Pn*s+Mn*c,Pn*c-Mn*s),e.lineTo(Pn*u+Mn*m,Pn*m-Mn*u),e.closePath()}};function I3(e,t){let r=null,n=Hb(i);e=typeof e=="function"?e:wt(e||Kb),t=typeof t=="function"?t:wt(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:wt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:wt(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function _f(){}function xf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function VN(e){this._context=e}VN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function U3(e){return new VN(e)}function WN(e){this._context=e}WN.prototype={areaStart:_f,areaEnd:_f,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function B3(e){return new WN(e)}function XN(e){this._context=e}XN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:xf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $3(e){return new XN(e)}function ZN(e){this._context=e}ZN.prototype={areaStart:_f,areaEnd:_f,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function H3(e){return new ZN(e)}function JS(e){return e<0?-1:1}function e1(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),c=(r-e._y1)/(i||n<0&&-0),u=(s*i+c*n)/(n+i);return(JS(s)+JS(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(u))||0}function t1(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Pg(e,t,r){var n=e._x0,i=e._y0,s=e._x1,c=e._y1,u=(s-n)/3;e._context.bezierCurveTo(n+u,i+u*t,s-u,c-u*r,s,c)}function wf(e){this._context=e}wf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pg(this,this._t0,t1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Pg(this,t1(this,r=e1(this,e,t)),r);break;default:Pg(this,this._t0,r=e1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function QN(e){this._context=new JN(e)}(QN.prototype=Object.create(wf.prototype)).point=function(e,t){wf.prototype.point.call(this,t,e)};function JN(e){this._context=e}JN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function F3(e){return new wf(e)}function K3(e){return new QN(e)}function ek(e){this._context=e}ek.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=r1(e),i=r1(t),s=0,c=1;c<r;++s,++c)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function r1(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),c=new Array(r);for(i[0]=0,s[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,c[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,c[t]-=n*c[t-1];for(i[r-1]=c[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(c[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Y3(e){return new ek(e)}function bm(e,t){this._context=e,this._t=t}bm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function G3(e){return new bm(e,.5)}function V3(e){return new bm(e,0)}function W3(e){return new bm(e,1)}function qo(e,t){if((c=e.length)>1)for(var r=1,n,i,s=e[t[0]],c,u=s.length;r<c;++r)for(i=s,s=e[t[r]],n=0;n<u;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Ty(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function X3(e,t){return e[t]}function Z3(e){const t=[];return t.key=e,t}function Q3(){var e=wt([]),t=Ty,r=qo,n=X3;function i(s){var c=Array.from(e.apply(this,arguments),Z3),u,m=c.length,h=-1,p;for(const g of s)for(u=0,++h;u<m;++u)(c[u][h]=[0,+n(g,c[u].key,h,s)]).data=g;for(u=0,p=Fb(t(c));u<m;++u)c[p[u]].index=u;return r(c,p),c}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:wt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:wt(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?Ty:typeof s=="function"?s:wt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??qo,i):r},i}function J3(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,c;i<s;++i){for(c=r=0;r<n;++r)c+=e[r][i][1]||0;if(c)for(r=0;r<n;++r)e[r][i][1]/=c}qo(e,t)}}function e5(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var c=0,u=0;c<i;++c)u+=e[c][r][1]||0;n[r][1]+=n[r][0]=-u/2}qo(e,t)}}function t5(e,t){if(!(!((c=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,c;n<s;++n){for(var u=0,m=0,h=0;u<c;++u){for(var p=e[t[u]],g=p[n][1]||0,_=p[n-1][1]||0,x=(g-_)/2,w=0;w<u;++w){var j=e[t[w]],S=j[n][1]||0,O=j[n-1][1]||0;x+=S-O}m+=g,h+=x*g}i[n-1][1]+=i[n-1][0]=r,m&&(r-=h/m)}i[n-1][1]+=i[n-1][0]=r,qo(e,t)}}var Mg={},Rg={},n1;function r5(){return n1||(n1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Rg)),Rg}var qg={},a1;function tk(){return a1||(a1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(qg)),qg}var zg={},i1;function Yb(){return i1||(i1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(zg)),zg}var Lg={},Ig={},o1;function n5(){return o1||(o1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Ig)),Ig}var s1;function Gb(){return s1||(s1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n5(),r=Yb();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],c=i.length;if(c===0)return s;let u=0,m="",h="",p=!1;for(i.charCodeAt(0)===46&&(s.push(""),u++);u<c;){const g=i[u];h?g==="\\"&&u+1<c?(u++,m+=i[u]):g===h?h="":m+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,s.push(m),m=""):m+=g:g==="["?(p=!0,m&&(s.push(m),m="")):g==="."?m&&(s.push(m),m=""):m+=g,u++}return m&&s.push(m),s}e.toPath=n})(Lg)),Lg}var l1;function Vb(){return l1||(l1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r5(),r=tk(),n=Yb(),i=Gb();function s(u,m,h){if(u==null)return h;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return h;const p=u[m];return p===void 0?r.isDeepKey(m)?s(u,i.toPath(m),h):h:p}case"number":case"symbol":{typeof m=="number"&&(m=n.toKey(m));const p=u[m];return p===void 0?h:p}default:{if(Array.isArray(m))return c(u,m,h);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return h;const p=u[m];return p===void 0?h:p}}}function c(u,m,h){if(m.length===0)return h;let p=u;for(let g=0;g<m.length;g++){if(p==null||t.isUnsafeProperty(m[g]))return h;p=p[m[g]]}return p===void 0?h:p}e.get=s})(Mg)),Mg}var Ug,c1;function a5(){return c1||(c1=1,Ug=Vb().get),Ug}var i5=a5();const zo=ri(i5);var o5=4;function Hi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o5,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Ft(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,s,c)=>{var u=r[c-1];return typeof u=="string"?i+u+s:u!==void 0?i+Hi(u)+s:i+s},"")}var br=e=>e===0?0:e>0?1:-1,ta=e=>typeof e=="number"&&e!=+e,Wa=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ke=e=>(typeof e=="number"||e instanceof Number)&&!ta(e),va=e=>ke(e)||typeof e=="string",s5=0,jc=e=>{var t=++s5;return"".concat(e||"").concat(t)},Tr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(t)&&typeof t!="string")return n;var s;if(Wa(t)){if(r==null)return n;var c=t.indexOf("%");s=r*parseFloat(t.slice(0,c))/100}else s=+t;return ta(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},rk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function kt(e,t,r){return ke(e)&&ke(t)?Hi(e+r*(t-e)):t}function nk(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):zo(n,t))===r)}var Pt=e=>e===null||typeof e>"u",Fc=e=>Pt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function l5(e){return e!=null}function Kc(){}var c5=["type","size","sizeType"];function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Py.apply(null,arguments)}function u1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function d1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u1(Object(r),!0).forEach(function(n){u5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u5(e,t,r){return(t=d5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d5(e){var t=f5(e,"string");return typeof t=="symbol"?t:t+""}function f5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m5(e,t){if(e==null)return{};var r,n,i=h5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function h5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ak={symbolCircle:Kb,symbolCross:A3,symbolDiamond:k3,symbolSquare:D3,symbolStar:R3,symbolTriangle:q3,symbolWye:L3},p5=Math.PI/180,g5=e=>{var t="symbol".concat(Fc(e));return ak[t]||Kb},v5=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*p5;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},y5=(e,t)=>{ak["symbol".concat(Fc(e))]=t},ik=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=m5(e,c5),s=d1(d1({},i),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var u=()=>{var _=g5(c),x=I3().type(_).size(v5(r,n,c)),w=x();if(w!==null)return w},{className:m,cx:h,cy:p}=s,g=Ir(s);return ke(h)&&ke(p)&&ke(r)?y.createElement("path",Py({},g,{className:st("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};ik.registerSymbol=y5;var ok=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Wb=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{$b(i)&&(n[i]=(s=>r[i](r,s)))}),n},b5=(e,t,r)=>n=>(e(t,r,n),null),_m=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var s=e[i];$b(i)&&typeof s=="function"&&(n||(n={}),n[i]=b5(s,t,r))}),n};function f1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f1(Object(r),!0).forEach(function(n){x5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x5(e,t,r){return(t=w5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w5(e){var t=j5(e,"string");return typeof t=="symbol"?t:t+""}function j5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xr(e,t){var r=_5({},e),n=t,i=Object.keys(t),s=i.reduce((c,u)=>(c[u]===void 0&&n[u]!==void 0&&(c[u]=n[u]),c),r);return s}var Bg={},$g={},m1;function S5(){return m1||(m1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let s=0;s<r.length;s++){const c=r[s],u=n(c);i.has(u)||i.set(u,c)}return Array.from(i.values())}e.uniqBy=t})($g)),$g}var Hg={},h1;function sk(){return h1||(h1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Hg)),Hg}var Fg={},Kg={},Yg={},p1;function E5(){return p1||(p1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Yg)),Yg}var g1;function Xb(){return g1||(g1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=E5();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Kg)),Kg}var Gg={},v1;function O5(){return v1||(v1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Gg)),Gg}var y1;function C5(){return y1||(y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xb(),r=O5();function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(Fg)),Fg}var Vg={},Wg={},b1;function A5(){return b1||(b1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vb();function r(n){return function(i){return t.get(i,n)}}e.property=r})(Wg)),Wg}var Xg={},Zg={},Qg={},Jg={},_1;function lk(){return _1||(_1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Jg)),Jg}var ev={},x1;function ck(){return x1||(x1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(ev)),ev}var tv={},w1;function uk(){return w1||(w1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(tv)),tv}var j1;function N5(){return j1||(j1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lk(),r=ck(),n=uk();function i(p,g,_){return typeof _!="function"?i(p,g,()=>{}):s(p,g,function x(w,j,S,O,C,A){const k=_(w,j,S,O,C,A);return k!==void 0?!!k:s(w,j,x,A)},new Map)}function s(p,g,_,x){if(g===p)return!0;switch(typeof g){case"object":return c(p,g,_,x);case"function":return Object.keys(g).length>0?s(p,{...g},_,x):n.eq(p,g);default:return t.isObject(p)?typeof g=="string"?g==="":!0:n.eq(p,g)}}function c(p,g,_,x){if(g==null)return!0;if(Array.isArray(g))return m(p,g,_,x);if(g instanceof Map)return u(p,g,_,x);if(g instanceof Set)return h(p,g,_,x);const w=Object.keys(g);if(p==null||r.isPrimitive(p))return w.length===0;if(w.length===0)return!0;if(x?.has(g))return x.get(g)===p;x?.set(g,p);try{for(let j=0;j<w.length;j++){const S=w[j];if(!r.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!_(p[S],g[S],S,p,g,x))return!1}return!0}finally{x?.delete(g)}}function u(p,g,_,x){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[w,j]of g.entries()){const S=p.get(w);if(_(S,j,w,p,g,x)===!1)return!1}return!0}function m(p,g,_,x){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const w=new Set;for(let j=0;j<g.length;j++){const S=g[j];let O=!1;for(let C=0;C<p.length;C++){if(w.has(C))continue;const A=p[C];let k=!1;if(_(A,S,j,p,g,x)&&(k=!0),k){w.add(C),O=!0;break}}if(!O)return!1}return!0}function h(p,g,_,x){return g.size===0?!0:p instanceof Set?m([...p],[...g],_,x):!1}e.isMatchWith=i,e.isSetMatch=h})(Qg)),Qg}var S1;function dk(){return S1||(S1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N5();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(Zg)),Zg}var rv={},nv={},av={},E1;function k5(){return E1||(E1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(av)),av}var iv={},O1;function fk(){return O1||(O1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(iv)),iv}var ov={},C1;function mk(){return C1||(C1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",c="[object Symbol]",u="[object Date]",m="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",_="[object ArrayBuffer]",x="[object Object]",w="[object Error]",j="[object DataView]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",k="[object BigUint64Array]",D="[object Int8Array]",M="[object Int16Array]",z="[object Int32Array]",W="[object BigInt64Array]",Y="[object Float32Array]",re="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=_,e.arrayTag=p,e.bigInt64ArrayTag=W,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=j,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=Y,e.float64ArrayTag=re,e.functionTag=g,e.int16ArrayTag=M,e.int32ArrayTag=z,e.int8ArrayTag=D,e.mapTag=m,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=C,e.uint32ArrayTag=A,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=O})(ov)),ov}var sv={},A1;function D5(){return A1||(A1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(sv)),sv}var N1;function hk(){return N1||(N1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=k5(),r=fk(),n=mk(),i=ck(),s=D5();function c(p,g){return u(p,void 0,p,new Map,g)}function u(p,g,_,x=new Map,w=void 0){const j=w?.(p,g,_,x);if(j!==void 0)return j;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const S=new Array(p.length);x.set(p,S);for(let O=0;O<p.length;O++)S[O]=u(p[O],O,_,x,w);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;x.set(p,S);for(const[O,C]of p)S.set(O,u(C,O,_,x,w));return S}if(p instanceof Set){const S=new Set;x.set(p,S);for(const O of p)S.add(u(O,void 0,_,x,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,S);for(let O=0;O<p.length;O++)S[O]=u(p[O],O,_,x,w);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,S),m(S,p,_,x,w),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return x.set(p,S),m(S,p,_,x,w),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof Error){const S=new p.constructor;return x.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,m(S,p,_,x,w),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof Number){const S=new Number(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof String){const S=new String(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(typeof p=="object"&&h(p)){const S=Object.create(Object.getPrototypeOf(p));return x.set(p,S),m(S,p,_,x,w),S}return p}function m(p,g,_=p,x,w){const j=[...Object.keys(g),...t.getSymbols(g)];for(let S=0;S<j.length;S++){const O=j[S],C=Object.getOwnPropertyDescriptor(p,O);(C==null||C.writable)&&(p[O]=u(g[O],O,_,x,w))}}function h(p){switch(r.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=u,e.copyProperties=m})(nv)),nv}var k1;function T5(){return k1||(k1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hk();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(rv)),rv}var D1;function P5(){return D1||(D1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dk(),r=T5();function n(i){return i=r.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=n})(Xg)),Xg}var lv={},cv={},uv={},T1;function M5(){return T1||(T1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hk(),r=mk();function n(i,s){return t.cloneDeepWith(i,(c,u,m,h)=>{const p=s?.(c,u,m,h);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new i.constructor(i?.valueOf());return t.copyProperties(g,i),g}case r.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=n})(uv)),uv}var P1;function R5(){return P1||(P1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M5();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(cv)),cv}var dv={},fv={},M1;function pk(){return M1||(M1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(fv)),fv}var mv={},R1;function q5(){return R1||(R1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fk();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(mv)),mv}var q1;function z5(){return q1||(q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tk(),r=pk(),n=q5(),i=Gb();function s(c,u){let m;if(Array.isArray(u)?m=u:typeof u=="string"&&t.isDeepKey(u)&&c?.[u]==null?m=i.toPath(u):m=[u],m.length===0)return!1;let h=c;for(let p=0;p<m.length;p++){const g=m[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}e.has=s})(dv)),dv}var z1;function L5(){return z1||(z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dk(),r=Yb(),n=R5(),i=Vb(),s=z5();function c(u,m){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return m=n.cloneDeep(m),function(h){const p=i.get(h,u);return p===void 0?s.has(h,u):m===void 0?p===void 0:t.isMatch(p,m)}}e.matchesProperty=c})(lv)),lv}var L1;function I5(){return L1||(L1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sk(),r=A5(),n=P5(),i=L5();function s(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=s})(Vg)),Vg}var I1;function U5(){return I1||(I1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S5(),r=sk(),n=C5(),i=I5();function s(c,u=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.iteratee(u)):[]}e.uniqBy=s})(Bg)),Bg}var hv,U1;function B5(){return U1||(U1=1,hv=U5().uniqBy),hv}var $5=B5();const B1=ri($5);function H5(e,t,r){return t===!0?B1(e,r):typeof t=="function"?B1(e,t):e}var pv={exports:{}},gv={},vv={exports:{}},yv={};var $1;function F5(){if($1)return yv;$1=1;var e=fm();function t(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,s=e.useLayoutEffect,c=e.useDebugValue;function u(g,_){var x=_(),w=n({inst:{value:x,getSnapshot:_}}),j=w[0].inst,S=w[1];return s(function(){j.value=x,j.getSnapshot=_,m(j)&&S({inst:j})},[g,x,_]),i(function(){return m(j)&&S({inst:j}),g(function(){m(j)&&S({inst:j})})},[g]),c(x),x}function m(g){var _=g.getSnapshot;g=g.value;try{var x=_();return!r(g,x)}catch{return!0}}function h(g,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return yv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,yv}var H1;function K5(){return H1||(H1=1,vv.exports=F5()),vv.exports}var F1;function Y5(){if(F1)return gv;F1=1;var e=fm(),t=K5();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,s=e.useRef,c=e.useEffect,u=e.useMemo,m=e.useDebugValue;return gv.useSyncExternalStoreWithSelector=function(h,p,g,_,x){var w=s(null);if(w.current===null){var j={hasValue:!1,value:null};w.current=j}else j=w.current;w=u(function(){function O(M){if(!C){if(C=!0,A=M,M=_(M),x!==void 0&&j.hasValue){var z=j.value;if(x(z,M))return k=z}return k=M}if(z=k,n(A,M))return z;var W=_(M);return x!==void 0&&x(z,W)?(A=M,z):(A=M,k=W)}var C=!1,A,k,D=g===void 0?null:g;return[function(){return O(p())},D===null?void 0:function(){return O(D())}]},[p,g,_,x]);var S=i(h,w[0],w[1]);return c(function(){j.hasValue=!0,j.value=S},[S]),m(S),S},gv}var K1;function G5(){return K1||(K1=1,pv.exports=Y5()),pv.exports}var V5=G5(),Zb=y.createContext(null),W5=e=>e,Mt=()=>{var e=y.useContext(Zb);return e?e.store.dispatch:W5},sf=()=>{},X5=()=>sf,Z5=(e,t)=>e===t;function Te(e){var t=y.useContext(Zb);return V5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:X5,t?t.store.getState:sf,t?t.store.getState:sf,t?e:sf,Z5)}function Q5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function J5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function e4(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var Y1=e=>Array.isArray(e)?e:[e];function t4(e){const t=Array.isArray(e[0])?e[0]:e;return e4(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function r4(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var n4=class{constructor(e){this.value=e}deref(){return this.value}},a4=typeof WeakRef<"u"?WeakRef:n4,i4=0,G1=1;function Rd(){return{s:i4,v:void 0,o:null,p:null}}function gk(e,t={}){let r=Rd();const{resultEqualityCheck:n}=t;let i,s=0;function c(){let u=r;const{length:m}=arguments;for(let g=0,_=m;g<_;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const j=w.get(x);j===void 0?(u=Rd(),w.set(x,u)):u=j}else{let w=u.p;w===null&&(u.p=w=new Map);const j=w.get(x);j===void 0?(u=Rd(),w.set(x,u)):u=j}}const h=u;let p;if(u.s===G1)p=u.v;else if(p=e.apply(null,arguments),s++,n){const g=i?.deref?.()??i;g!=null&&n(g,p)&&(p=g,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new a4(p):p}return h.s=G1,h.v=p,p}return c.clearCache=()=>{r=Rd(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function o4(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let s=0,c=0,u,m={},h=i.pop();typeof h=="object"&&(m=h,h=i.pop()),Q5(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...r,...m},{memoize:g,memoizeOptions:_=[],argsMemoize:x=gk,argsMemoizeOptions:w=[]}=p,j=Y1(_),S=Y1(w),O=t4(i),C=g(function(){return s++,h.apply(null,arguments)},...j),A=x(function(){c++;const D=r4(O,arguments);return u=C.apply(null,D),u},...S);return Object.assign(A,{resultFunc:h,memoizedResultFunc:C,dependencies:O,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var J=o4(gk),s4=Object.assign((e,t=J)=>{J5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((c,u,m)=>(c[r[m]]=u,c),{}))},{withTypes:()=>s4}),bv={},_v={},xv={},V1;function l4(){return V1||(V1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const c=t(n),u=t(i);if(c===u&&c===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?u-c:c-u}return 0};e.compareValues=r})(xv)),xv}var wv={},jv={},W1;function vk(){return W1||(W1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(jv)),jv}var X1;function c4(){return X1||(X1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vk(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||c!=null&&Object.hasOwn(c,s)}e.isKey=i})(wv)),wv}var Z1;function u4(){return Z1||(Z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=l4(),r=c4(),n=Gb();function i(s,c,u,m){if(s==null)return[];u=m?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,w)=>{let j=x;for(let S=0;S<w.length&&j!=null;++S)j=j[w[S]];return j},p=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:h(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?h(w,x):typeof w=="object"?w[x]:w,g=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return s.map(x=>({original:x,criteria:g.map(w=>p(w,x))})).slice().sort((x,w)=>{for(let j=0;j<g.length;j++){const S=t.compareValues(x.criteria[j],w.criteria[j],u[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(_v)),_v}var Sv={},Q1;function d4(){return Q1||(Q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],s=Math.floor(n),c=(u,m)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&m<s?c(p,m+1):i.push(p)}};return c(r,0),i}e.flatten=t})(Sv)),Sv}var Ev={},J1;function yk(){return J1||(J1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pk(),r=Xb(),n=lk(),i=uk();function s(c,u,m){return n.isObject(m)&&(typeof u=="number"&&r.isArrayLike(m)&&t.isIndex(u)&&u<m.length||typeof u=="string"&&u in m)?i.eq(m[u],c):!1}e.isIterateeCall=s})(Ev)),Ev}var eE;function f4(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u4(),r=d4(),n=yk();function i(s,...c){const u=c.length;return u>1&&n.isIterateeCall(s,c[0],c[1])?c=[]:u>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(s,r.flatten(c),["asc"])}e.sortBy=i})(bv)),bv}var Ov,tE;function m4(){return tE||(tE=1,Ov=f4().sortBy),Ov}var h4=m4();const xm=ri(h4);var bk=e=>e.legend.settings,p4=e=>e.legend.size,g4=e=>e.legend.payload,zZ=J([g4,bk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?xm(n,r):n}),qd=1;function v4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-t.height)>qd||Math.abs(c.left-t.left)>qd||Math.abs(c.top-t.top)>qd||Math.abs(c.width-t.width)>qd)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ar(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var y4=typeof Symbol=="function"&&Symbol.observable||"@@observable",rE=y4,Cv=()=>Math.random().toString(36).substring(7).split("").join("."),b4={INIT:`@@redux/INIT${Cv()}`,REPLACE:`@@redux/REPLACE${Cv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Cv()}`},jf=b4;function Qb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function _k(e,t,r){if(typeof e!="function")throw new Error(Ar(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ar(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ar(1));return r(_k)(e,t)}let n=e,i=t,s=new Map,c=s,u=0,m=!1;function h(){c===s&&(c=new Map,s.forEach((S,O)=>{c.set(O,S)}))}function p(){if(m)throw new Error(Ar(3));return i}function g(S){if(typeof S!="function")throw new Error(Ar(4));if(m)throw new Error(Ar(5));let O=!0;h();const C=u++;return c.set(C,S),function(){if(O){if(m)throw new Error(Ar(6));O=!1,h(),c.delete(C),s=null}}}function _(S){if(!Qb(S))throw new Error(Ar(7));if(typeof S.type>"u")throw new Error(Ar(8));if(typeof S.type!="string")throw new Error(Ar(17));if(m)throw new Error(Ar(9));try{m=!0,i=n(i,S)}finally{m=!1}return(s=c).forEach(C=>{C()}),S}function x(S){if(typeof S!="function")throw new Error(Ar(10));n=S,_({type:jf.REPLACE})}function w(){const S=g;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(Ar(11));function C(){const k=O;k.next&&k.next(p())}return C(),{unsubscribe:S(C)}},[rE](){return this}}}return _({type:jf.INIT}),{dispatch:_,subscribe:g,getState:p,replaceReducer:x,[rE]:w}}function _4(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:jf.INIT})>"u")throw new Error(Ar(12));if(typeof r(void 0,{type:jf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ar(13))})}function xk(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const c=t[s];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let i;try{_4(r)}catch(s){i=s}return function(c={},u){if(i)throw i;let m=!1;const h={};for(let p=0;p<n.length;p++){const g=n[p],_=r[g],x=c[g],w=_(x,u);if(typeof w>"u")throw u&&u.type,new Error(Ar(14));h[g]=w,m=m||w!==x}return m=m||n.length!==Object.keys(c).length,m?h:c}}function Sf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function x4(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(Ar(15))};const c={getState:i.getState,dispatch:(m,...h)=>s(m,...h)},u=e.map(m=>m(c));return s=Sf(...u)(i.dispatch),{...i,dispatch:s}}}function wk(e){return Qb(e)&&"type"in e&&typeof e.type=="string"}var jk=Symbol.for("immer-nothing"),nE=Symbol.for("immer-draftable"),Ur=Symbol.for("immer-state");function Xn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var pn=Object,Hs=pn.getPrototypeOf,Ef="constructor",wm="prototype",My="configurable",Of="enumerable",lf="writable",Sc="value",Xa=e=>!!e&&!!e[Ur];function ra(e){return e?Sk(e)||Sm(e)||!!e[nE]||!!e[Ef]?.[nE]||Em(e)||Om(e):!1}var w4=pn[wm][Ef].toString(),aE=new WeakMap;function Sk(e){if(!e||!Jb(e))return!1;const t=Hs(e);if(t===null||t===pn[wm])return!0;const r=pn.hasOwnProperty.call(t,Ef)&&t[Ef];if(r===Object)return!0;if(!zs(r))return!1;let n=aE.get(r);return n===void 0&&(n=Function.toString.call(r),aE.set(r,n)),n===w4}function jm(e,t,r=!0){Yc(e)===0?(r?Reflect.ownKeys(e):pn.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Yc(e){const t=e[Ur];return t?t.type_:Sm(e)?1:Em(e)?2:Om(e)?3:0}var iE=(e,t,r=Yc(e))=>r===2?e.has(t):pn[wm].hasOwnProperty.call(e,t),Ry=(e,t,r=Yc(e))=>r===2?e.get(t):e[t],Cf=(e,t,r,n=Yc(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function j4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Sm=Array.isArray,Em=e=>e instanceof Map,Om=e=>e instanceof Set,Jb=e=>typeof e=="object",zs=e=>typeof e=="function",Av=e=>typeof e=="boolean";function S4(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Ba=e=>e.copy_||e.base_,e0=e=>e.modified_?e.copy_:e.base_;function qy(e,t){if(Em(e))return new Map(e);if(Om(e))return new Set(e);if(Sm(e))return Array[wm].slice.call(e);const r=Sk(e);if(t===!0||t==="class_only"&&!r){const n=pn.getOwnPropertyDescriptors(e);delete n[Ur];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u[lf]===!1&&(u[lf]=!0,u[My]=!0),(u.get||u.set)&&(n[c]={[My]:!0,[lf]:!0,[Of]:u[Of],[Sc]:e[c]})}return pn.create(Hs(e),n)}else{const n=Hs(e);if(n!==null&&r)return{...e};const i=pn.create(n);return pn.assign(i,e)}}function t0(e,t=!1){return Cm(e)||Xa(e)||!ra(e)||(Yc(e)>1&&pn.defineProperties(e,{set:zd,add:zd,clear:zd,delete:zd}),pn.freeze(e),t&&jm(e,(r,n)=>{t0(n,!0)},!1)),e}function E4(){Xn(2)}var zd={[Sc]:E4};function Cm(e){return e===null||!Jb(e)?!0:pn.isFrozen(e)}var Af="MapSet",zy="Patches",oE="ArrayMethods",Ek={};function Lo(e){const t=Ek[e];return t||Xn(0,e),t}var sE=e=>!!Ek[e],Ec,Ok=()=>Ec,O4=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:sE(Af)?Lo(Af):void 0,arrayMethodsPlugin_:sE(oE)?Lo(oE):void 0});function lE(e,t){t&&(e.patchPlugin_=Lo(zy),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ly(e){Iy(e),e.drafts_.forEach(C4),e.drafts_=null}function Iy(e){e===Ec&&(Ec=e.parent_)}var cE=e=>Ec=O4(Ec,e);function C4(e){const t=e[Ur];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function uE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Ur].modified_&&(Ly(t),Xn(4)),ra(e)&&(e=dE(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[Ur].base_,e,t)}else e=dE(t,r);return A4(t,e,!0),Ly(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jk?e:void 0}function dE(e,t){if(Cm(t))return t;const r=t[Ur];if(!r)return Nf(t,e.handledSet_,e);if(!Am(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);Nk(r,e)}return r.copy_}function A4(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&t0(t,r)}function Ck(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Am=(e,t)=>e.scope_===t,N4=[];function Ak(e,t,r,n){const i=Ba(e),s=e.type_;if(n!==void 0&&Ry(i,n,s)===t){Cf(i,n,r,s);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;jm(i,(m,h)=>{if(Xa(h)){const p=u.get(h)||[];p.push(m),u.set(h,p)}})}const c=e.draftLocations_.get(t)??N4;for(const u of c)Cf(i,u,r,s)}function k4(e,t,r){e.callbacks_.push(function(i){const s=t;if(!s||!Am(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const c=e0(s);Ak(e,s.draft_??s,c,r),Nk(s,i)})}function Nk(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}Ck(e)}}function D4(e,t,r){const{scope_:n}=e;if(Xa(r)){const i=r[Ur];Am(i,n)&&i.callbacks_.push(function(){cf(e);const c=e0(i);Ak(e,r,c,t)})}else ra(r)&&e.callbacks_.push(function(){const s=Ba(e);e.type_===3?s.has(r)&&Nf(r,n.handledSet_,n):Ry(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Nf(Ry(e.copy_,t,e.type_),n.handledSet_,n)})}function Nf(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Xa(e)||t.has(e)||!ra(e)||Cm(e)||(t.add(e),jm(e,(n,i)=>{if(Xa(i)){const s=i[Ur];if(Am(s,r)){const c=e0(s);Cf(e,n,c,e.type_),Ck(s)}}else ra(i)&&Nf(i,t,r)})),e}function T4(e,t){const r=Sm(e),n={type_:r?1:0,scope_:t?t.scope_:Ok(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=kf;r&&(i=[n],s=Oc);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,[u,n]}var kf={get(e,t){if(t===Ur)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=Ba(e);if(!iE(i,t,e.type_))return P4(e,i,t);const s=i[t];if(e.finalized_||!ra(s)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&S4(t))return s;if(s===Nv(e.base_,t)){cf(e);const c=e.type_===1?+t:t,u=By(e.scope_,s,e,c);return e.copy_[c]=u}return s},has(e,t){return t in Ba(e)},ownKeys(e){return Reflect.ownKeys(Ba(e))},set(e,t,r){const n=kk(Ba(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Nv(Ba(e),t),s=i?.[Ur];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(j4(r,i)&&(r!==void 0||iE(e.base_,t,e.type_)))return!0;cf(e),Uy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),D4(e,t,r)),!0},deleteProperty(e,t){return cf(e),Nv(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Uy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ba(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[lf]:!0,[My]:e.type_!==1||t!=="length",[Of]:n[Of],[Sc]:r[t]}},defineProperty(){Xn(11)},getPrototypeOf(e){return Hs(e.base_)},setPrototypeOf(){Xn(12)}},Oc={};for(let e in kf){let t=kf[e];Oc[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Oc.deleteProperty=function(e,t){return Oc.set.call(this,e,t,void 0)};Oc.set=function(e,t,r){return kf.set.call(this,e[0],t,r,e[0])};function Nv(e,t){const r=e[Ur];return(r?Ba(r):e)[t]}function P4(e,t,r){const n=kk(t,r);return n?Sc in n?n[Sc]:n.get?.call(e.draft_):void 0}function kk(e,t){if(!(t in e))return;let r=Hs(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Hs(r)}}function Uy(e){e.modified_||(e.modified_=!0,e.parent_&&Uy(e.parent_))}function cf(e){e.copy_||(e.assigned_=new Map,e.copy_=qy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var M4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(zs(r)&&!zs(n)){const c=n;n=r;const u=this;return function(h=c,...p){return u.produce(h,g=>n.call(this,g,...p))}}zs(n)||Xn(6),i!==void 0&&!zs(i)&&Xn(7);let s;if(ra(r)){const c=cE(this),u=By(c,r,void 0);let m=!0;try{s=n(u),m=!1}finally{m?Ly(c):Iy(c)}return lE(c,i),uE(s,c)}else if(!r||!Jb(r)){if(s=n(r),s===void 0&&(s=r),s===jk&&(s=void 0),this.autoFreeze_&&t0(s,!0),i){const c=[],u=[];Lo(zy).generateReplacementPatches_(r,s,{patches_:c,inversePatches_:u}),i(c,u)}return s}else Xn(1,r)},this.produceWithPatches=(r,n)=>{if(zs(r))return(u,...m)=>this.produceWithPatches(u,h=>r(h,...m));let i,s;return[this.produce(r,n,(u,m)=>{i=u,s=m}),i,s]},Av(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Av(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Av(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ra(t)||Xn(8),Xa(t)&&(t=ea(t));const r=cE(this),n=By(r,t,void 0);return n[Ur].isManual_=!0,Iy(r),n}finishDraft(t,r){const n=t&&t[Ur];(!n||!n.isManual_)&&Xn(9);const{scope_:i}=n;return lE(i,r),uE(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const i=Lo(zy).applyPatches_;return Xa(t)?i(t,r):this.produce(t,s=>i(s,r))}};function By(e,t,r,n){const[i,s]=Em(t)?Lo(Af).proxyMap_(t,r):Om(t)?Lo(Af).proxySet_(t,r):T4(t,r);return(r?.scope_??Ok()).drafts_.push(i),s.callbacks_=r?.callbacks_??[],s.key_=n,r&&n!==void 0?k4(r,s,n):s.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:h}=m;s.modified_&&h&&h.generatePatches_(s,[],m)}),i}function ea(e){return Xa(e)||Xn(10,e),Dk(e)}function Dk(e){if(!ra(e)||Cm(e))return e;const t=e[Ur];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=qy(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=qy(e,!0);return jm(r,(i,s)=>{Cf(r,i,Dk(s))},n),t&&(t.finalized_=!1),r}var R4=new M4,Tk=R4.produce;function Pk(e){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,e):i(s)}var q4=Pk(),z4=Pk,L4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Sf:Sf.apply(null,arguments)};function In(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(gn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>wk(n)&&n.type===e,r}var Mk=class vc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,vc.prototype)}static get[Symbol.species](){return vc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new vc(...t[0].concat(this)):new vc(...t.concat(this))}};function fE(e){return ra(e)?Tk(e,()=>{}):e}function Ld(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function I4(e){return typeof e=="boolean"}var U4=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let c=new Mk;return r&&(I4(r)?c.push(q4):c.push(z4(r.extraArgument))),c},Rk="RTK_autoBatch",Nt=()=>e=>({payload:e,meta:{[Rk]:!0}}),mE=e=>t=>{setTimeout(t,e)},qk=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,c=!1;const u=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mE(10):e.type==="callback"?e.queueNotification:mE(e.timeout),h=()=>{c=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const g=()=>i&&p(),_=n.subscribe(g);return u.add(p),()=>{_(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[Rk],s=!i,s&&(c||(c=!0,m(h))),n.dispatch(p)}finally{i=!0}}})},B4=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new Mk(e);return n&&i.push(qk(typeof n=="object"?n:void 0)),i};function $4(e){const t=U4(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:c=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(Qb(r))u=xk(r);else throw new Error(gn(1));let m;typeof n=="function"?m=n(t):m=t();let h=Sf;i&&(h=L4({trace:!1,...typeof i=="object"&&i}));const p=x4(...m),g=B4(p);let _=typeof c=="function"?c(g):g();const x=h(..._);return _k(u,s,x)}function zk(e){const t={},r=[];let n;const i={addCase(s,c){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(gn(28));if(u in t)throw new Error(gn(29));return t[u]=c,i},addAsyncThunk(s,c){return c.pending&&(t[s.pending.type]=c.pending),c.rejected&&(t[s.rejected.type]=c.rejected),c.fulfilled&&(t[s.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:s.settled,reducer:c.settled}),i},addMatcher(s,c){return r.push({matcher:s,reducer:c}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function H4(e){return typeof e=="function"}function F4(e,t){let[r,n,i]=zk(t),s;if(H4(e))s=()=>fE(e());else{const u=fE(e);s=()=>u}function c(u=s(),m){let h=[r[m.type],...n.filter(({matcher:p})=>p(m)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,g)=>{if(g)if(Xa(p)){const x=g(p,m);return x===void 0?p:x}else{if(ra(p))return Tk(p,_=>g(_,m));{const _=g(p,m);if(_===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return p},u)}return c.getInitialState=s,c}var K4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Y4=(e=21)=>{let t="",r=e;for(;r--;)t+=K4[Math.random()*64|0];return t},G4=Symbol.for("rtk-slice-createasyncthunk");function V4(e,t){return`${e}/${t}`}function W4({creators:e}={}){const t=e?.asyncThunk?.[G4];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(gn(11));const c=(typeof n.reducers=="function"?n.reducers(Z4()):n.reducers)||{},u=Object.keys(c),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(A,k){const D=typeof A=="string"?A:A.type;if(!D)throw new Error(gn(12));if(D in m.sliceCaseReducersByType)throw new Error(gn(13));return m.sliceCaseReducersByType[D]=k,h},addMatcher(A,k){return m.sliceMatchers.push({matcher:A,reducer:k}),h},exposeAction(A,k){return m.actionCreators[A]=k,h},exposeCaseReducer(A,k){return m.sliceCaseReducersByName[A]=k,h}};u.forEach(A=>{const k=c[A],D={reducerName:A,type:V4(i,A),createNotation:typeof n.reducers=="function"};J4(k)?tI(D,k,h,t):Q4(D,k,h)});function p(){const[A={},k=[],D=void 0]=typeof n.extraReducers=="function"?zk(n.extraReducers):[n.extraReducers],M={...A,...m.sliceCaseReducersByType};return F4(n.initialState,z=>{for(let W in M)z.addCase(W,M[W]);for(let W of m.sliceMatchers)z.addMatcher(W.matcher,W.reducer);for(let W of k)z.addMatcher(W.matcher,W.reducer);D&&z.addDefaultCase(D)})}const g=A=>A,_=new Map,x=new WeakMap;let w;function j(A,k){return w||(w=p()),w(A,k)}function S(){return w||(w=p()),w.getInitialState()}function O(A,k=!1){function D(z){let W=z[A];return typeof W>"u"&&k&&(W=Ld(x,D,S)),W}function M(z=g){const W=Ld(_,k,()=>new WeakMap);return Ld(W,z,()=>{const Y={};for(const[re,X]of Object.entries(n.selectors??{}))Y[re]=X4(X,z,()=>Ld(x,z,S),k);return Y})}return{reducerPath:A,getSelectors:M,get selectors(){return M(D)},selectSlice:D}}const C={name:i,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...O(s),injectInto(A,{reducerPath:k,...D}={}){const M=k??s;return A.inject({reducerPath:M,reducer:j},D),{...C,...O(M,!0)}}};return C}}function X4(e,t,r,n){function i(s,...c){let u=t(s);return typeof u>"u"&&n&&(u=r()),e(u,...c)}return i.unwrapped=e,i}var Qr=W4();function Z4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Q4({type:e,reducerName:t,createNotation:r},n,i){let s,c;if("reducer"in n){if(r&&!eI(n))throw new Error(gn(17));s=n.reducer,c=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,c?In(e,c):In(e))}function J4(e){return e._reducerDefinitionType==="asyncThunk"}function eI(e){return e._reducerDefinitionType==="reducerWithPrepare"}function tI({type:e,reducerName:t},r,n,i){if(!i)throw new Error(gn(18));const{payloadCreator:s,fulfilled:c,pending:u,rejected:m,settled:h,options:p}=r,g=i(e,s,p);n.exposeAction(t,g),c&&n.addCase(g.fulfilled,c),u&&n.addCase(g.pending,u),m&&n.addCase(g.rejected,m),h&&n.addMatcher(g.settled,h),n.exposeCaseReducer(t,{fulfilled:c||Id,pending:u||Id,rejected:m||Id,settled:h||Id})}function Id(){}var rI="task",Lk="listener",Ik="completed",r0="cancelled",nI=`task-${r0}`,aI=`task-${Ik}`,$y=`${Lk}-${r0}`,iI=`${Lk}-${Ik}`,Nm=class{constructor(e){this.code=e,this.message=`${rI} ${r0} (reason: ${e})`}name="TaskAbortError";message},n0=(e,t)=>{if(typeof e!="function")throw new TypeError(gn(32))},Df=()=>{},Uk=(e,t=Df)=>(e.catch(t),e),Bk=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ko=e=>{if(e.aborted)throw new Nm(e.reason)};function $k(e,t){let r=Df;return new Promise((n,i)=>{const s=()=>i(new Nm(e.reason));if(e.aborted){s();return}r=Bk(e,s),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Df})}var oI=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Nm?"cancelled":"rejected",error:r}}finally{t?.()}},Tf=e=>t=>Uk($k(e,t).then(r=>(ko(e),r))),Hk=e=>{const t=Tf(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Us}=Object,hE={},km="listenerMiddleware",sI=(e,t)=>{const r=n=>Bk(e,()=>n.abort(e.reason));return(n,i)=>{n0(n);const s=new AbortController;r(s);const c=oI(async()=>{ko(e),ko(s.signal);const u=await n({pause:Tf(s.signal),delay:Hk(s.signal),signal:s.signal});return ko(s.signal),u},()=>s.abort(aI));return i?.autoJoin&&t.push(c.catch(Df)),{result:Tf(e)(c),cancel(){s.abort(nI)}}}},lI=(e,t)=>{const r=async(n,i)=>{ko(t);let s=()=>{};const u=[new Promise((m,h)=>{let p=e({predicate:n,effect:(g,_)=>{_.unsubscribe(),m([g,_.getState(),_.getOriginalState()])}});s=()=>{p(),h()}})];i!=null&&u.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await $k(t,Promise.race(u));return ko(t),m}finally{s()}};return(n,i)=>Uk(r(n,i))},Fk=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=In(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(gn(21));return n0(s),{predicate:i,type:t,effect:s}},Kk=Us(e=>{const{type:t,predicate:r,effect:n}=Fk(e);return{id:Y4(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(gn(22))}}},{withTypes:()=>Kk}),pE=(e,t)=>{const{type:r,effect:n,predicate:i}=Fk(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},Hy=e=>{e.pending.forEach(t=>{t.abort($y)})},cI=(e,t)=>()=>{for(const r of t.keys())Hy(r);e.clear()},gE=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Yk=Us(In(`${km}/add`),{withTypes:()=>Yk}),uI=In(`${km}/removeAll`),Gk=Us(In(`${km}/remove`),{withTypes:()=>Gk}),dI=(...e)=>{console.error(`${km}/error`,...e)},Gc=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},i=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:s,onError:c=dI}=e;n0(c);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w?.cancelActive&&Hy(x)}),m=x=>{const w=pE(t,x)??Kk(x);return u(w)};Us(m,{withTypes:()=>m});const h=x=>{const w=pE(t,x);return w&&(w.unsubscribe(),x.cancelActive&&Hy(w)),!!w};Us(h,{withTypes:()=>h});const p=async(x,w,j,S)=>{const O=new AbortController,C=lI(m,O.signal),A=[];try{x.pending.add(O),n(x),await Promise.resolve(x.effect(w,Us({},j,{getOriginalState:S,condition:(k,D)=>C(k,D).then(Boolean),take:C,delay:Hk(O.signal),pause:Tf(O.signal),extra:s,signal:O.signal,fork:sI(O.signal,A),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((k,D,M)=>{k!==O&&(k.abort($y),M.delete(k))})},cancel:()=>{O.abort($y),x.pending.delete(O)},throwIfCancelled:()=>{ko(O.signal)}})))}catch(k){k instanceof Nm||gE(c,k,{raisedBy:"effect"})}finally{await Promise.all(A),O.abort(iI),i(x),x.pending.delete(O)}},g=cI(t,r);return{middleware:x=>w=>j=>{if(!wk(j))return w(j);if(Yk.match(j))return m(j.payload);if(uI.match(j)){g();return}if(Gk.match(j))return h(j.payload);let S=x.getState();const O=()=>{if(S===hE)throw new Error(gn(23));return S};let C;try{if(C=w(j),t.size>0){const A=x.getState(),k=Array.from(t.values());for(const D of k){let M=!1;try{M=D.predicate(j,A,S)}catch(z){M=!1,gE(c,z,{raisedBy:"predicate"})}M&&p(D,j,x,O)}}}finally{S=hE}return C},startListening:m,stopListening:h,clearListeners:g}};function gn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fI={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Vk=Qr({name:"chartLayout",initialState:fI,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:mI,setLayout:hI,setChartSize:pI,setScale:gI}=Vk.actions,vI=Vk.reducer;function Wk(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function zt(e){return Number.isFinite(e)}function ya(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function vE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vE(Object(r),!0).forEach(function(n){yI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yI(e,t,r){return(t=bI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bI(e){var t=_I(e,"string");return typeof t=="symbol"?t:t+""}function _I(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vt(e,t,r){return Pt(e)||Pt(t)?r:va(t)?zo(e,t,r):typeof t=="function"?t(e):r}var xI=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:s,verticalAlign:c,layout:u}=t;if((u==="vertical"||u==="horizontal"&&c==="middle")&&s!=="center"&&ke(e[s]))return Ls(Ls({},e),{},{[s]:e[s]+(n||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&c!=="middle"&&ke(e[c]))return Ls(Ls({},e),{},{[c]:e[c]+(i||0)})}return e},Zi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Xk=(e,t,r,n)=>{if(n)return e.map(u=>u.coordinate);var i,s,c=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===r&&(s=!0),u.coordinate));return i||c.push(t),s||c.push(r),c},Zk=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:s,scale:c,realScaleType:u,isCategorical:m,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:_,axisType:x}=e;if(!c)return null;var w=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=i==="category"&&c.bandwidth?c.bandwidth()/w:0;if(j=x==="angleAxis"&&s&&s.length>=2?br(s[0]-s[1])*2*j:j,g||_){var S=(g||_||[]).map((O,C)=>{var A=n?n.indexOf(O):O;return{coordinate:c(A)+j,value:O,offset:j,index:C}});return S.filter(O=>!ta(O.coordinate))}return m&&h?h.map((O,C)=>({coordinate:c(O)+j,value:O,index:C,offset:j})):c.ticks&&p!=null?c.ticks(p).map((O,C)=>({coordinate:c(O)+j,value:O,offset:j,index:C})):c.domain().map((O,C)=>({coordinate:c(O)+j,value:n?n[O]:O,index:C,offset:j}))},yE=1e-4,wI=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-yE,s=Math.max(n[0],n[1])+yE,c=e(t[0]),u=e(t[r-1]);(c<i||c>s||u<i||u>s)&&e.domain([t[0],t[r-1]])}},jI=(e,t)=>{if(!t||t.length!==2||!ke(t[0])||!ke(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ke(e[0])||e[0]<r)&&(i[0]=r),(!ke(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},SI=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0,u=0;u<r;++u){var m=e[u],h=m?.[i];if(h!=null){var p=h[1],g=h[0],_=ta(p)?g:p;_>=0?(h[0]=s,h[1]=s+_,s=p):(h[0]=c,h[1]=c+_,c=p)}}}},EI=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0;c<r;++c){var u=e[c],m=u?.[i];if(m!=null){var h=ta(m[1])?m[0]:m[1];h>=0?(m[0]=s,m[1]=s+h,s=m[1]):(m[0]=0,m[1]=0)}}}},OI={sign:SI,expand:J3,none:qo,silhouette:e5,wiggle:t5,positive:EI},CI=(e,t,r)=>{var n,i=(n=OI[r])!==null&&n!==void 0?n:qo,s=Q3().keys(t).value((u,m)=>Number(vt(u,m,0))).order(Ty).offset(i),c=s(e);return c.forEach((u,m)=>{u.forEach((h,p)=>{var g=vt(e[p],t[m],0);Array.isArray(g)&&g.length===2&&ke(g[0])&&ke(g[1])&&(h[0]=g[0],h[1]=g[1])})}),c};function AI(e){return e==null?void 0:String(e)}function bE(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:s,dataKey:c}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Pt(i[t.dataKey])){var u=nk(r,"value",i[t.dataKey]);if(u)return u.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var m=vt(i,Pt(c)?t.dataKey:c);return Pt(m)?null:t.scale(m)}var _E=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:s,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var u=vt(s,t.dataKey,t.scale.domain()[c]);return Pt(u)?null:t.scale(u)-i/2+n},NI=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},kI=e=>{var t=e.flat(2).filter(ke);return[Math.min(...t),Math.max(...t)]},DI=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],TI=(e,t,r)=>{if(e!=null)return DI(Object.keys(e).reduce((n,i)=>{var s=e[i];if(!s)return n;var{stackedData:c}=s,u=c.reduce((m,h)=>{var p=Wk(h,t,r),g=kI(p);return!zt(g[0])||!zt(g[1])?m:[Math.min(m[0],g[0]),Math.max(m[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},xE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,wE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fs=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=xm(t,p=>p.coordinate),s=1/0,c=1,u=i.length;c<u;c++){var m=i[c],h=i[c-1];s=Math.min((m?.coordinate||0)-(h?.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function jE(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:s}=e;return Ls(Ls({},t),{},{dataKey:r,payload:n,value:i,name:s})}function Qs(e,t){if(e)return String(e);if(typeof t=="string")return t}var PI=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},MI=(e,t)=>t==="centric"?e.angle:e.radius,ai=e=>e.layout.width,ii=e=>e.layout.height,RI=e=>e.layout.scale,Qk=e=>e.layout.margin,Dm=J(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Tm=J(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Jk="data-recharts-item-index",eD="data-recharts-item-id",Vc=60;function SE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ud(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SE(Object(r),!0).forEach(function(n){qI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qI(e,t,r){return(t=zI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zI(e){var t=LI(e,"string");return typeof t=="symbol"?t:t+""}function LI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var II=e=>e.brush.height;function UI(e){var t=Tm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Vc;return r+i}return r},0)}function BI(e){var t=Tm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Vc;return r+i}return r},0)}function $I(e){var t=Dm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function HI(e){var t=Dm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var dr=J([ai,ii,Qk,II,UI,BI,$I,HI,bk,p4],(e,t,r,n,i,s,c,u,m,h)=>{var p={left:(r.left||0)+i,right:(r.right||0)+s},g={top:(r.top||0)+c,bottom:(r.bottom||0)+u},_=Ud(Ud({},g),p),x=_.bottom;_.bottom+=n,_=xI(_,m,h);var w=e-_.left-_.right,j=t-_.top-_.bottom;return Ud(Ud({brushBottom:x},_),{},{width:Math.max(w,0),height:Math.max(j,0)})}),FI=J(dr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),a0=J(ai,ii,(e,t)=>({x:0,y:0,width:e,height:t})),KI=y.createContext(null),Pr=()=>y.useContext(KI)!=null,Pm=e=>e.brush,Mm=J([Pm,dr,Qk],(e,t,r)=>({height:e.height,x:ke(e.x)?e.x:t.left,y:ke(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:ke(e.width)?e.width:t.width})),kv={},Dv={},Tv={},EE;function YI(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:s}={}){let c,u=null;const m=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{u!==null&&(r.apply(c,u),c=void 0,u=null)},g=()=>{h&&p(),j()};let _=null;const x=()=>{_!=null&&clearTimeout(_),_=setTimeout(()=>{_=null,g()},n)},w=()=>{_!==null&&(clearTimeout(_),_=null)},j=()=>{w(),c=void 0,u=null},S=()=>{p()},O=function(...C){if(i?.aborted)return;c=this,u=C;const A=_==null;x(),m&&A&&p()};return O.schedule=x,O.cancel=j,O.flush=S,i?.addEventListener("abort",j,{once:!0}),O}e.debounce=t})(Tv)),Tv}var OE;function GI(){return OE||(OE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YI();function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:u=!0,maxWait:m}=s,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let p,g=null;const _=t.debounce(function(...j){p=n.apply(this,j),g=null},i,{edges:h}),x=function(...j){return m!=null&&(g===null&&(g=Date.now()),Date.now()-g>=m)?(p=n.apply(this,j),g=Date.now(),_.cancel(),_.schedule(),p):(_.apply(this,j),p)},w=()=>(_.flush(),p);return x.cancel=_.cancel,x.flush=w,x}e.debounce=r})(Dv)),Dv}var CE;function VI(){return CE||(CE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=GI();function r(n,i=0,s={}){const{leading:c=!0,trailing:u=!0}=s;return t.debounce(n,i,{leading:c,maxWait:i,trailing:u})}e.throttle=r})(kv)),kv}var Pv,AE;function WI(){return AE||(AE=1,Pv=VI().throttle),Pv}var XI=WI();const ZI=ri(XI);var Pf=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(r.replace(/%s/g,()=>i[c++]))}},tD=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:c}=r,u=Wa(n)?e:Number(n),m=Wa(i)?t:Number(i);return s&&s>0&&(u?m=u/s:m&&(u=m*s),c&&m!=null&&m>c&&(m=c)),{calculatedWidth:u,calculatedHeight:m}},QI={width:0,height:0,overflow:"visible"},JI={width:0,overflowX:"visible"},e6={height:0,overflowY:"visible"},t6={},r6=e=>{var{width:t,height:r}=e,n=Wa(t),i=Wa(r);return n&&i?QI:n?JI:i?e6:t6};function n6(e){var{width:t,height:r,aspect:n}=e,i=t,s=r;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fy.apply(null,arguments)}function NE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NE(Object(r),!0).forEach(function(n){a6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a6(e,t,r){return(t=i6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i6(e){var t=o6(e,"string");return typeof t=="symbol"?t:t+""}function o6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rD=y.createContext({width:-1,height:-1});function s6(e){return ya(e.width)&&ya(e.height)}function nD(e){var{children:t,width:r,height:n}=e,i=y.useMemo(()=>({width:r,height:n}),[r,n]);return s6(i)?y.createElement(rD.Provider,{value:i},t):null}var i0=()=>y.useContext(rD),l6=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:c=0,minHeight:u,maxHeight:m,children:h,debounce:p=0,id:g,className:_,onResize:x,style:w={}}=e,j=y.useRef(null),S=y.useRef();S.current=x,y.useImperativeHandle(t,()=>j.current);var[O,C]=y.useState({containerWidth:n.width,containerHeight:n.height}),A=y.useCallback((W,Y)=>{C(re=>{var X=Math.round(W),I=Math.round(Y);return re.containerWidth===X&&re.containerHeight===I?re:{containerWidth:X,containerHeight:I}})},[]);y.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Kc;var W=I=>{var se,{width:pe,height:q}=I[0].contentRect;A(pe,q),(se=S.current)===null||se===void 0||se.call(S,pe,q)};p>0&&(W=ZI(W,p,{trailing:!0,leading:!1}));var Y=new ResizeObserver(W),{width:re,height:X}=j.current.getBoundingClientRect();return A(re,X),Y.observe(j.current),()=>{Y.disconnect()}},[A,p]);var{containerWidth:k,containerHeight:D}=O;Pf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:M,calculatedHeight:z}=tD(k,D,{width:i,height:s,aspect:r,maxHeight:m});return Pf(M!=null&&M>0||z!=null&&z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,z,i,s,c,u,r),y.createElement("div",{id:g?"".concat(g):void 0,className:st("recharts-responsive-container",_),style:kE(kE({},w),{},{width:i,height:s,minWidth:c,minHeight:u,maxHeight:m}),ref:j},y.createElement("div",{style:r6({width:i,height:s})},y.createElement(nD,{width:M,height:z},h)))}),Mv=y.forwardRef((e,t)=>{var r=i0();if(ya(r.width)&&ya(r.height))return e.children;var{width:n,height:i}=n6({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:c}=tD(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ke(s)&&ke(c)?y.createElement(nD,{width:s,height:c},e.children):y.createElement(l6,Fy({},e,{width:n,height:i,ref:t}))});function aD(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Rm=()=>{var e,t=Pr(),r=Te(FI),n=Te(Mm),i=(e=Te(Pm))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},c6={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iD=()=>{var e;return(e=Te(dr))!==null&&e!==void 0?e:c6},oD=()=>Te(ai),sD=()=>Te(ii),IZ=()=>Te(e=>e.layout.margin),et=e=>e.layout.layoutType,Yo=()=>Te(et),UZ=()=>{var e=Yo();if(e==="horizontal"||e==="vertical")return e},u6=()=>{var e=Yo();return e!==void 0},qm=e=>{var t=Mt(),r=Pr(),{width:n,height:i}=e,s=i0(),c=n,u=i;return s&&(c=s.width>0?s.width:n,u=s.height>0?s.height:i),y.useEffect(()=>{!r&&ya(c)&&ya(u)&&t(pI({width:c,height:u}))},[t,r,c,u]),null},lD=Symbol.for("immer-nothing"),DE=Symbol.for("immer-draftable"),yn=Symbol.for("immer-state");function Zn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Cc=Object.getPrototypeOf;function Ks(e){return!!e&&!!e[yn]}function Io(e){return e?cD(e)||Array.isArray(e)||!!e[DE]||!!e.constructor?.[DE]||Wc(e)||Lm(e):!1}var d6=Object.prototype.constructor.toString(),TE=new WeakMap;function cD(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=TE.get(r);return n===void 0&&(n=Function.toString.call(r),TE.set(r,n)),n===d6}function Mf(e,t,r=!0){zm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function zm(e){const t=e[yn];return t?t.type_:Array.isArray(e)?1:Wc(e)?2:Lm(e)?3:0}function Ky(e,t){return zm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uD(e,t,r){const n=zm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function f6(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Wc(e){return e instanceof Map}function Lm(e){return e instanceof Set}function jo(e){return e.copy_||e.base_}function Yy(e,t){if(Wc(e))return new Map(e);if(Lm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=cD(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[yn];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[c]})}return Object.create(Cc(e),n)}else{const n=Cc(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function o0(e,t=!1){return Im(e)||Ks(e)||!Io(e)||(zm(e)>1&&Object.defineProperties(e,{set:Bd,add:Bd,clear:Bd,delete:Bd}),Object.freeze(e),t&&Object.values(e).forEach(r=>o0(r,!0))),e}function m6(){Zn(2)}var Bd={value:m6};function Im(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var h6={};function Uo(e){const t=h6[e];return t||Zn(0,e),t}var Ac;function dD(){return Ac}function p6(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function PE(e,t){t&&(Uo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Gy(e){Vy(e),e.drafts_.forEach(g6),e.drafts_=null}function Vy(e){e===Ac&&(Ac=e.parent_)}function ME(e){return Ac=p6(Ac,e)}function g6(e){const t=e[yn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function RE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[yn].modified_&&(Gy(t),Zn(4)),Io(e)&&(e=Rf(t,e),t.parent_||qf(t,e)),t.patches_&&Uo("Patches").generateReplacementPatches_(r[yn].base_,e,t.patches_,t.inversePatches_)):e=Rf(t,r,[]),Gy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==lD?e:void 0}function Rf(e,t,r){if(Im(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[yn];if(!i)return Mf(t,(s,c)=>qE(e,i,t,s,c,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return qf(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let c=s,u=!1;i.type_===3&&(c=new Set(s),s.clear(),u=!0),Mf(c,(m,h)=>qE(e,i,s,m,h,r,u),n),qf(e,s,!1),r&&e.patches_&&Uo("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function qE(e,t,r,n,i,s,c){if(i==null||typeof i!="object"&&!c)return;const u=Im(i);if(!(u&&!c)){if(Ks(i)){const m=s&&t&&t.type_!==3&&!Ky(t.assigned_,n)?s.concat(n):void 0,h=Rf(e,i,m);if(uD(r,n,h),Ks(h))e.canAutoFreeze_=!1;else return}else c&&r.add(i);if(Io(i)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&u)return;Rf(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Wc(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&qf(e,i)}}}function qf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&o0(t,r)}function v6(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:dD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=s0;r&&(i=[n],s=Nc);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,u}var s0={get(e,t){if(t===yn)return e;const r=jo(e);if(!Ky(r,t))return y6(e,r,t);const n=r[t];return e.finalized_||!Io(n)?n:n===Rv(e.base_,t)?(qv(e),e.copy_[t]=Xy(n,e)):n},has(e,t){return t in jo(e)},ownKeys(e){return Reflect.ownKeys(jo(e))},set(e,t,r){const n=fD(jo(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Rv(jo(e),t),s=i?.[yn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(f6(r,i)&&(r!==void 0||Ky(e.base_,t)))return!0;qv(e),Wy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Rv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,qv(e),Wy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=jo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Zn(11)},getPrototypeOf(e){return Cc(e.base_)},setPrototypeOf(){Zn(12)}},Nc={};Mf(s0,(e,t)=>{Nc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Nc.deleteProperty=function(e,t){return Nc.set.call(this,e,t,void 0)};Nc.set=function(e,t,r){return s0.set.call(this,e[0],t,r,e[0])};function Rv(e,t){const r=e[yn];return(r?jo(r):e)[t]}function y6(e,t,r){const n=fD(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function fD(e,t){if(!(t in e))return;let r=Cc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Cc(r)}}function Wy(e){e.modified_||(e.modified_=!0,e.parent_&&Wy(e.parent_))}function qv(e){e.copy_||(e.copy_=Yy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var b6=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const c=this;return function(m=s,...h){return c.produce(m,p=>r.call(this,p,...h))}}typeof r!="function"&&Zn(6),n!==void 0&&typeof n!="function"&&Zn(7);let i;if(Io(t)){const s=ME(this),c=Xy(t,void 0);let u=!0;try{i=r(c),u=!1}finally{u?Gy(s):Vy(s)}return PE(s,n),RE(i,s)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===lD&&(i=void 0),this.autoFreeze_&&o0(i,!0),n){const s=[],c=[];Uo("Patches").generateReplacementPatches_(t,i,s,c),n(s,c)}return i}else Zn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...u)=>this.produceWithPatches(c,m=>t(m,...u));let n,i;return[this.produce(t,r,(c,u)=>{n=c,i=u}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Io(e)||Zn(8),Ks(e)&&(e=_6(e));const t=ME(this),r=Xy(e,void 0);return r[yn].isManual_=!0,Vy(t),r}finishDraft(e,t){const r=e&&e[yn];(!r||!r.isManual_)&&Zn(9);const{scope_:n}=r;return PE(n,t),RE(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Uo("Patches").applyPatches_;return Ks(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Xy(e,t){const r=Wc(e)?Uo("MapSet").proxyMap_(e,t):Lm(e)?Uo("MapSet").proxySet_(e,t):v6(e,t);return(t?t.scope_:dD()).drafts_.push(r),r}function _6(e){return Ks(e)||Zn(10,e),mD(e)}function mD(e){if(!Io(e)||Im(e))return e;const t=e[yn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Yy(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Yy(e,!0);return Mf(r,(i,s)=>{uD(r,i,mD(s))},n),t&&(t.finalized_=!1),r}var x6=new b6;x6.produce;var w6={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},hD=Qr({name:"legend",initialState:w6,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Nt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ea(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Nt()},removeLegendPayload:{reducer(e,t){var r=ea(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Nt()}}}),{setLegendSize:BZ,setLegendSettings:$Z,addLegendPayload:pD,replaceLegendPayload:gD,removeLegendPayload:vD}=hD.actions,j6=hD.reducer;function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zy.apply(null,arguments)}function zE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(r),!0).forEach(function(n){S6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S6(e,t,r){return(t=E6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E6(e){var t=O6(e,"string");return typeof t=="symbol"?t:t+""}function O6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C6(e){return Array.isArray(e)&&va(e[0])&&va(e[1])?e.join(" ~ "):e}var A6=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:s,formatter:c,itemSorter:u,wrapperClassName:m,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:_=!1}=e,x=()=>{if(s&&s.length){var D={padding:0,margin:0},M=(u?xm(s,u):s).map((z,W)=>{if(z.type==="none")return null;var Y=z.formatter||c||C6,{value:re,name:X}=z,I=re,se=X;if(Y){var pe=Y(re,X,z,W,s);if(Array.isArray(pe))[I,se]=pe;else if(pe!=null)I=pe;else return null}var q=zv({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(W),style:q},va(se)?y.createElement("span",{className:"recharts-tooltip-item-name"},se):null,va(se)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},I),y.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:D},M)}return null},w=zv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=zv({margin:0},i),S=!Pt(p),O=S?p:"",C=st("recharts-default-tooltip",m),A=st("recharts-tooltip-label",h);S&&g&&s!==void 0&&s!==null&&(O=g(p,s));var k=_?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Zy({className:C,style:w},k),y.createElement("p",{className:A,style:j},y.isValidElement(O)?O:"".concat(O)),x())},sc="recharts-tooltip-wrapper",N6={visibility:"hidden"};function k6(e){var{coordinate:t,translateX:r,translateY:n}=e;return st(sc,{["".concat(sc,"-right")]:ke(r)&&t&&ke(t.x)&&r>=t.x,["".concat(sc,"-left")]:ke(r)&&t&&ke(t.x)&&r<t.x,["".concat(sc,"-bottom")]:ke(n)&&t&&ke(t.y)&&n>=t.y,["".concat(sc,"-top")]:ke(n)&&t&&ke(t.y)&&n<t.y})}function LE(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:s,reverseDirection:c,tooltipDimension:u,viewBox:m,viewBoxDimension:h}=e;if(s&&ke(s[n]))return s[n];var p=r[n]-u-(i>0?i:0),g=r[n]+i;if(t[n])return c[n]?p:g;var _=m[n];if(_==null)return 0;if(c[n]){var x=p,w=_;return x<w?Math.max(g,_):Math.max(p,_)}if(h==null)return 0;var j=g+u,S=_+h;return j>S?Math.max(p,_):Math.max(g,_)}function D6(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function T6(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:c,useTranslate3d:u,viewBox:m}=e,h,p,g;return c.height>0&&c.width>0&&r?(p=LE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.width,viewBox:m,viewBoxDimension:m.width}),g=LE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.height,viewBox:m,viewBoxDimension:m.height}),h=D6({translateX:p,translateY:g,useTranslate3d:u})):h=N6,{cssProperties:h,cssClasses:k6({translateX:p,translateY:g,coordinate:r})}}function IE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $d(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IE(Object(r),!0).forEach(function(n){Qy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qy(e,t,r){return(t=P6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P6(e){var t=M6(e,"string");return typeof t=="symbol"?t:t+""}function M6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class R6 extends y.PureComponent{constructor(){super(...arguments),Qy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Qy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:c,hasPayload:u,isAnimationActive:m,offset:h,position:p,reverseDirection:g,useTranslate3d:_,viewBox:x,wrapperStyle:w,lastBoundingBox:j,innerRef:S,hasPortalFromProps:O}=this.props,{cssClasses:C,cssProperties:A}=T6({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:h,position:p,reverseDirection:g,tooltipBox:{height:j.height,width:j.width},useTranslate3d:_,viewBox:x}),k=O?{}:$d($d({transition:m&&t?"transform ".concat(n,"ms ").concat(i):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=$d($d({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:D,ref:S},s)}}var yD=()=>{var e;return(e=Te(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jy.apply(null,arguments)}function UE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(r),!0).forEach(function(n){q6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q6(e,t,r){return(t=z6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z6(e){var t=L6(e,"string");return typeof t=="symbol"?t:t+""}function L6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $E={curveBasisClosed:B3,curveBasisOpen:$3,curveBasis:U3,curveBumpX:O3,curveBumpY:C3,curveLinearClosed:H3,curveLinear:ym,curveMonotoneX:F3,curveMonotoneY:K3,curveNatural:Y3,curveStep:G3,curveStepAfter:W3,curveStepBefore:V3},zf=e=>zt(e.x)&&zt(e.y),HE=e=>e.base!=null&&zf(e.base)&&zf(e),lc=e=>e.x,cc=e=>e.y,I6=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Fc(e));return(r==="curveMonotone"||r==="curveBump")&&t?$E["".concat(r).concat(t==="vertical"?"Y":"X")]:$E[r]||ym},U6=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:s=!1}=e,c=I6(t,i),u=s?r.filter(zf):r,m;if(Array.isArray(n)){var h=r.map((x,w)=>BE(BE({},x),{},{base:n[w]}));i==="vertical"?m=Md().y(cc).x1(lc).x0(x=>x.base.x):m=Md().x(lc).y1(cc).y0(x=>x.base.y);var p=m.defined(HE).curve(c),g=s?h.filter(HE):h;return p(g)}i==="vertical"&&ke(n)?m=Md().y(cc).x1(lc).x0(n):ke(n)?m=Md().x(lc).y1(cc).y0(n):m=FN().x(lc).y(cc);var _=m.defined(zf).curve(c);return _(u)},l0=e=>{var{className:t,points:r,path:n,pathRef:i}=e,s=Yo();if((!r||!r.length)&&!n)return null;var c={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},u=r&&r.length?U6(c):n;return y.createElement("path",Jy({},vn(e),Wb(e),{className:st("recharts-curve",t),d:u===null?void 0:u,ref:i}))},B6=["x","y","top","left","width","height","className"];function eb(){return eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eb.apply(null,arguments)}function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(n){H6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H6(e,t,r){return(t=F6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F6(e){var t=K6(e,"string");return typeof t=="symbol"?t:t+""}function K6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Y6(e,t){if(e==null)return{};var r,n,i=G6(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function G6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var V6=(e,t,r,n,i,s)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),W6=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:s=0,height:c=0,className:u}=e,m=Y6(e,B6),h=$6({x:t,y:r,top:n,left:i,width:s,height:c},m);return!ke(t)||!ke(r)||!ke(s)||!ke(c)||!ke(n)||!ke(i)?null:y.createElement("path",eb({},Ir(h),{className:st("recharts-cross",u),d:V6(t,r,s,c,n,i)}))};function X6(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function KE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function YE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(r),!0).forEach(function(n){Z6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z6(e,t,r){return(t=Q6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q6(e){var t=J6(e,"string");return typeof t=="symbol"?t:t+""}function J6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eU=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),bD=(e,t,r)=>e.map(n=>"".concat(eU(n)," ").concat(t,"ms ").concat(r)).join(","),tU=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),kc=(e,t)=>Object.keys(t).reduce((r,n)=>YE(YE({},r),{},{[n]:e(n,t[n])}),{});function GE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GE(Object(r),!0).forEach(function(n){rU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rU(e,t,r){return(t=nU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nU(e){var t=aU(e,"string");return typeof t=="symbol"?t:t+""}function aU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lf=(e,t,r)=>e+(t-e)*r,tb=e=>{var{from:t,to:r}=e;return t!==r},_D=(e,t,r)=>{var n=kc((i,s)=>{if(tb(s)){var[c,u]=e(s.from,s.to,s.velocity);return ur(ur({},s),{},{from:c,velocity:u})}return s},t);return r<1?kc((i,s)=>tb(s)&&n[i]!=null?ur(ur({},s),{},{velocity:Lf(s.velocity,n[i].velocity,r),from:Lf(s.from,n[i].from,r)}):s,t):_D(e,n,r-1)};function iU(e,t,r,n,i,s){var c,u=n.reduce((_,x)=>ur(ur({},_),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),m=()=>kc((_,x)=>x.from,u),h=()=>!Object.values(u).filter(tb).length,p=null,g=_=>{c||(c=_);var x=_-c,w=x/r.dt;u=_D(r,u,w),i(ur(ur(ur({},e),t),m())),c=_,h()||(p=s.setTimeout(g))};return()=>(p=s.setTimeout(g),()=>{var _;(_=p)===null||_===void 0||_()})}function oU(e,t,r,n,i,s,c){var u=null,m=i.reduce((g,_)=>{var x=e[_],w=t[_];return x==null||w==null?g:ur(ur({},g),{},{[_]:[x,w]})},{}),h,p=g=>{h||(h=g);var _=(g-h)/n,x=kc((j,S)=>Lf(...S,r(_)),m);if(s(ur(ur(ur({},e),t),x)),_<1)u=c.setTimeout(p);else{var w=kc((j,S)=>Lf(...S,r(1)),m);s(ur(ur(ur({},e),t),w))}};return()=>(u=c.setTimeout(p),()=>{var g;(g=u)===null||g===void 0||g()})}const sU=(e,t,r,n,i,s)=>{var c=tU(e,t);return r==null?()=>(i(ur(ur({},e),t)),()=>{}):r.isStepper===!0?iU(e,t,r,c,i,s):oU(e,t,r,n,c,i,s)};var If=1e-4,xD=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],wD=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),VE=(e,t)=>r=>{var n=xD(e,t);return wD(n,r)},lU=(e,t)=>r=>{var n=xD(e,t),i=[...n.map((s,c)=>s*c).slice(1),0];return wD(i,r)},cU=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},uU=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=cU(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},dU=(e,t,r,n)=>{var i=VE(e,r),s=VE(t,n),c=lU(e,r),u=h=>h>1?1:h<0?0:h,m=h=>{for(var p=h>1?1:h,g=p,_=0;_<8;++_){var x=i(g)-p,w=c(g);if(Math.abs(x-p)<If||w<If)return s(g);g=u(g-x/w)}return s(g)};return m.isStepper=!1,m},WE=function(){return dU(...uU(...arguments))},fU=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,s=(c,u,m)=>{var h=-(c-u)*r,p=m*n,g=m+(h-p)*i/1e3,_=m*i/1e3+c;return Math.abs(_-u)<If&&Math.abs(g)<If?[u,0]:[_,g]};return s.isStepper=!0,s.dt=i,s},mU=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return WE(e);case"spring":return fU();default:if(e.split("(")[0]==="cubic-bezier")return WE(e)}return typeof e=="function"?e:null};function hU(e){var t,r=()=>null,n=!1,i=null,s=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var u=c,[m,...h]=u;if(typeof m=="number"){i=e.setTimeout(s.bind(null,h),m);return}s(m),i=e.setTimeout(s.bind(null,h));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,i&&(i(),i=null),s(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class pU{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function gU(){return hU(new pU)}var vU=y.createContext(gU);function yU(e,t){var r=y.useContext(vU);return y.useMemo(()=>t??r(e),[e,t,r])}var bU=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Um={isSsr:bU()},_U={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},XE={t:0},Lv={t:1};function Xc(e){var t=xr(e,_U),{isActive:r,canBegin:n,duration:i,easing:s,begin:c,onAnimationEnd:u,onAnimationStart:m,children:h}=t,p=r==="auto"?!Um.isSsr:r,g=yU(t.animationId,t.animationManager),[_,x]=y.useState(p?XE:Lv),w=y.useRef(null);return y.useEffect(()=>{p||x(Lv)},[p]),y.useEffect(()=>{if(!p||!n)return Kc;var j=sU(XE,Lv,mU(s),i,x,g.getTimeoutController()),S=()=>{w.current=j()};return g.start([m,c,S,i,u]),()=>{g.stop(),w.current&&w.current(),u()}},[p,n,i,s,c,m,u,g]),h(_.t)}function Zc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(jc(t)),n=y.useRef(e);return n.current!==e&&(r.current=jc(t),n.current=e),r.current}var xU=["radius"],wU=["radius"],ZE,QE,JE,eO,tO,rO,nO,aO,iO,oO;function sO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(r),!0).forEach(function(n){jU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jU(e,t,r){return(t=SU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SU(e){var t=EU(e,"string");return typeof t=="symbol"?t:t+""}function EU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uf(){return Uf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uf.apply(null,arguments)}function cO(e,t){if(e==null)return{};var r,n,i=OU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var uO=(e,t,r,n,i)=>{var s=Hi(r),c=Hi(n),u=Math.min(Math.abs(s)/2,Math.abs(c)/2),m=c>=0?1:-1,h=s>=0?1:-1,p=c>=0&&s>=0||c<0&&s<0?1:0,g;if(u>0&&i instanceof Array){for(var _=[0,0,0,0],x=0,w=4;x<w;x++)_[x]=i[x]>u?u:i[x];g=Ft(ZE||(ZE=fa(["M",",",""])),e,t+m*_[0]),_[0]>0&&(g+=Ft(QE||(QE=fa(["A ",",",",0,0,",",",",",""])),_[0],_[0],p,e+h*_[0],t)),g+=Ft(JE||(JE=fa(["L ",",",""])),e+r-h*_[1],t),_[1]>0&&(g+=Ft(eO||(eO=fa(["A ",",",",0,0,",`,
        `,",",""])),_[1],_[1],p,e+r,t+m*_[1])),g+=Ft(tO||(tO=fa(["L ",",",""])),e+r,t+n-m*_[2]),_[2]>0&&(g+=Ft(rO||(rO=fa(["A ",",",",0,0,",`,
        `,",",""])),_[2],_[2],p,e+r-h*_[2],t+n)),g+=Ft(nO||(nO=fa(["L ",",",""])),e+h*_[3],t+n),_[3]>0&&(g+=Ft(aO||(aO=fa(["A ",",",",0,0,",`,
        `,",",""])),_[3],_[3],p,e,t+n-m*_[3])),g+="Z"}else if(u>0&&i===+i&&i>0){var j=Math.min(u,i);g=Ft(iO||(iO=fa(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*j,j,j,p,e+h*j,t,e+r-h*j,t,j,j,p,e+r,t+m*j,e+r,t+n-m*j,j,j,p,e+r-h*j,t+n,e+h*j,t+n,j,j,p,e,t+n-m*j)}else g=Ft(oO||(oO=fa(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return g},dO={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},jD=e=>{var t=xr(e,dO),r=y.useRef(null),[n,i]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var U=r.current.getTotalLength();U&&i(U)}catch{}},[]);var{x:s,y:c,width:u,height:m,radius:h,className:p}=t,{animationEasing:g,animationDuration:_,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:j}=t,S=y.useRef(u),O=y.useRef(m),C=y.useRef(s),A=y.useRef(c),k=y.useMemo(()=>({x:s,y:c,width:u,height:m,radius:h}),[s,c,u,m,h]),D=Zc(k,"rectangle-");if(s!==+s||c!==+c||u!==+u||m!==+m||u===0||m===0)return null;var M=st("recharts-rectangle",p);if(!j){var z=Ir(t),{radius:W}=z,Y=cO(z,xU);return y.createElement("path",Uf({},Y,{x:Hi(s),y:Hi(c),width:Hi(u),height:Hi(m),radius:typeof h=="number"?h:void 0,className:M,d:uO(s,c,u,m,h)}))}var re=S.current,X=O.current,I=C.current,se=A.current,pe="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),R=bD(["strokeDasharray"],_,typeof g=="string"?g:dO.animationEasing);return y.createElement(Xc,{animationId:D,key:D,canBegin:n>0,duration:_,easing:g,isActive:j,begin:x},U=>{var te=kt(re,u,U),ne=kt(X,m,U),we=kt(I,s,U),Pe=kt(se,c,U);r.current&&(S.current=te,O.current=ne,C.current=we,A.current=Pe);var F;w?U>0?F={transition:R,strokeDasharray:q}:F={strokeDasharray:pe}:F={strokeDasharray:q};var $=Ir(t),{radius:Se}=$,De=cO($,wU);return y.createElement("path",Uf({},De,{radius:typeof h=="number"?h:void 0,className:M,d:uO(we,Pe,te,ne,h),ref:r,style:lO(lO({},F),t.style)}))})};function fO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function mO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fO(Object(r),!0).forEach(function(n){CU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CU(e,t,r){return(t=AU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AU(e){var t=NU(e,"string");return typeof t=="symbol"?t:t+""}function NU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bf=Math.PI/180,kU=e=>e*180/Math.PI,ar=(e,t,r,n)=>({x:e+Math.cos(-Bf*n)*r,y:t+Math.sin(-Bf*n)*r}),SD=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},DU=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return Math.sqrt((r-i)**2+(n-s)**2)},TU=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:s}=t,c=DU({x:r,y:n},{x:i,y:s});if(c<=0)return{radius:c,angle:0};var u=(r-i)/c,m=Math.acos(u);return n>s&&(m=2*Math.PI-m),{radius:c,angle:kU(m),angleInRadian:m}},PU=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:t-s*360,endAngle:r-s*360}},MU=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),s=Math.floor(n/360),c=Math.min(i,s);return e+c*360},RU=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:s}=TU({x:r,y:n},t),{innerRadius:c,outerRadius:u}=t;if(i<c||i>u||i===0)return null;var{startAngle:m,endAngle:h}=PU(t),p=s,g;if(m<=h){for(;p>h;)p-=360;for(;p<m;)p+=360;g=p>=m&&p<=h}else{for(;p>m;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=m}return g?mO(mO({},t),{},{radius:i,angle:MU(p,t)}):null};function ED(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:s}=e,c=ar(t,r,n,i),u=ar(t,r,n,s);return{points:[c,u],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}var hO,pO,gO,vO,yO,bO,_O;function rb(){return rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rb.apply(null,arguments)}function Oo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var qU=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Hd=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:s,isExternal:c,cornerRadius:u,cornerIsExternal:m}=e,h=u*(c?1:-1)+n,p=Math.asin(u/h)/Bf,g=m?i:i+s*p,_=ar(t,r,h,g),x=ar(t,r,n,g),w=m?i-s*p:i,j=ar(t,r,h*Math.cos(p*Bf),w);return{center:_,circleTangency:x,lineTangency:j,theta:p}},OD=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:c}=e,u=qU(s,c),m=s+u,h=ar(t,r,i,s),p=ar(t,r,i,m),g=Ft(hO||(hO=Oo(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,i,i,+(Math.abs(u)>180),+(s>m),p.x,p.y);if(n>0){var _=ar(t,r,n,s),x=ar(t,r,n,m);g+=Ft(pO||(pO=Oo(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,n,n,+(Math.abs(u)>180),+(s<=m),_.x,_.y)}else g+=Ft(gO||(gO=Oo(["L ",","," Z"])),t,r);return g},zU=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:h}=e,p=br(h-m),{circleTangency:g,lineTangency:_,theta:x}=Hd({cx:t,cy:r,radius:i,angle:m,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:w,lineTangency:j,theta:S}=Hd({cx:t,cy:r,radius:i,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:u}),O=u?Math.abs(m-h):Math.abs(m-h)-x-S;if(O<0)return c?Ft(vO||(vO=Oo(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),_.x,_.y,s,s,s*2,s,s,-s*2):OD({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:m,endAngle:h});var C=Ft(yO||(yO=Oo(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),_.x,_.y,s,s,+(p<0),g.x,g.y,i,i,+(O>180),+(p<0),w.x,w.y,s,s,+(p<0),j.x,j.y);if(n>0){var{circleTangency:A,lineTangency:k,theta:D}=Hd({cx:t,cy:r,radius:n,angle:m,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:M,lineTangency:z,theta:W}=Hd({cx:t,cy:r,radius:n,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),Y=u?Math.abs(m-h):Math.abs(m-h)-D-W;if(Y<0&&s===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+=Ft(bO||(bO=Oo(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),z.x,z.y,s,s,+(p<0),M.x,M.y,n,n,+(Y>180),+(p>0),A.x,A.y,s,s,+(p<0),k.x,k.y)}else C+=Ft(_O||(_O=Oo(["L",",","Z"])),t,r);return C},LU={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},CD=e=>{var t=xr(e,LU),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:p,className:g}=t;if(s<i||h===p)return null;var _=st("recharts-sector",g),x=s-i,w=Tr(c,x,0,!0),j;return w>0&&Math.abs(h-p)<360?j=zU({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(w,x/2),forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:p}):j=OD({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:h,endAngle:p}),y.createElement("path",rb({},Ir(t),{className:_,d:j}))};function IU(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(ok(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:c,angle:u}=t,m=ar(n,i,s,u),h=ar(n,i,c,u);return[{x:m.x,y:m.y},{x:h.x,y:h.y}]}return ED(t)}}var Iv={},Uv={},Bv={},xO;function UU(){return xO||(xO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vk();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Bv)),Bv}var wO;function BU(){return wO||(wO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UU();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Uv)),Uv}var jO;function $U(){return jO||(jO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yk(),r=BU();function n(i,s,c){c&&typeof c!="number"&&t.isIterateeCall(i,s,c)&&(s=c=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),c=c===void 0?i<s?1:-1:r.toFinite(c);const u=Math.max(Math.ceil((s-i)/(c||1)),0),m=new Array(u);for(let h=0;h<u;h++)m[h]=i,i+=c;return m}e.range=n})(Iv)),Iv}var $v,SO;function HU(){return SO||(SO=1,$v=$U().range),$v}var FU=HU();const AD=ri(FU);function Fi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function KU(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function c0(e){let t,r,n;e.length!==2?(t=Fi,r=(u,m)=>Fi(e(u),m),n=(u,m)=>e(u)-m):(t=e===Fi||e===KU?e:YU,r=e,n=e);function i(u,m,h=0,p=u.length){if(h<p){if(t(m,m)!==0)return p;do{const g=h+p>>>1;r(u[g],m)<0?h=g+1:p=g}while(h<p)}return h}function s(u,m,h=0,p=u.length){if(h<p){if(t(m,m)!==0)return p;do{const g=h+p>>>1;r(u[g],m)<=0?h=g+1:p=g}while(h<p)}return h}function c(u,m,h=0,p=u.length){const g=i(u,m,h,p-1);return g>h&&n(u[g-1],m)>-n(u[g],m)?g-1:g}return{left:i,center:c,right:s}}function YU(){return 0}function ND(e){return e===null?NaN:+e}function*GU(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const VU=c0(Fi),Qc=VU.right;c0(ND).center;class EO extends Map{constructor(t,r=ZU){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(OO(this,t))}has(t){return super.has(OO(this,t))}set(t,r){return super.set(WU(this,t),r)}delete(t){return super.delete(XU(this,t))}}function OO({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function WU({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function XU({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function ZU(e){return e!==null&&typeof e=="object"?e.valueOf():e}function QU(e=Fi){if(e===Fi)return kD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function kD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const JU=Math.sqrt(50),eB=Math.sqrt(10),tB=Math.sqrt(2);function $f(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),c=s>=JU?10:s>=eB?5:s>=tB?2:1;let u,m,h;return i<0?(h=Math.pow(10,-i)/c,u=Math.round(e*h),m=Math.round(t*h),u/h<e&&++u,m/h>t&&--m,h=-h):(h=Math.pow(10,i)*c,u=Math.round(e/h),m=Math.round(t/h),u*h<e&&++u,m*h>t&&--m),m<u&&.5<=r&&r<2?$f(e,t,r*2):[u,m,h]}function nb(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,c]=n?$f(t,e,r):$f(e,t,r);if(!(s>=i))return[];const u=s-i+1,m=new Array(u);if(n)if(c<0)for(let h=0;h<u;++h)m[h]=(s-h)/-c;else for(let h=0;h<u;++h)m[h]=(s-h)*c;else if(c<0)for(let h=0;h<u;++h)m[h]=(i+h)/-c;else for(let h=0;h<u;++h)m[h]=(i+h)*c;return m}function ab(e,t,r){return t=+t,e=+e,r=+r,$f(e,t,r)[2]}function ib(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?ab(t,e,r):ab(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function CO(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function AO(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function DD(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?kD:QU(i);n>r;){if(n-r>600){const m=n-r+1,h=t-r+1,p=Math.log(m),g=.5*Math.exp(2*p/3),_=.5*Math.sqrt(p*g*(m-g)/m)*(h-m/2<0?-1:1),x=Math.max(r,Math.floor(t-h*g/m+_)),w=Math.min(n,Math.floor(t+(m-h)*g/m+_));DD(e,t,x,w,i)}const s=e[t];let c=r,u=n;for(uc(e,r,t),i(e[n],s)>0&&uc(e,r,n);c<u;){for(uc(e,c,u),++c,--u;i(e[c],s)<0;)++c;for(;i(e[u],s)>0;)--u}i(e[r],s)===0?uc(e,r,u):(++u,uc(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function uc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function rB(e,t,r){if(e=Float64Array.from(GU(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return AO(e);if(t>=1)return CO(e);var n,i=(n-1)*t,s=Math.floor(i),c=CO(DD(e,s).subarray(0,s+1)),u=AO(e.subarray(s+1));return c+(u-c)*(i-s)}}function nB(e,t,r=ND){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),c=+r(e[s],s,e),u=+r(e[s+1],s+1,e);return c+(u-c)*(i-s)}}function aB(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function Bn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function oi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ob=Symbol("implicit");function u0(){var e=new EO,t=[],r=[],n=ob;function i(s){let c=e.get(s);if(c===void 0){if(n!==ob)return n;e.set(s,c=t.push(s)-1)}return r[c%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new EO;for(const c of s)e.has(c)||e.set(c,t.push(c)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return u0(t,r).unknown(n)},Bn.apply(i,arguments),i}function d0(){var e=u0().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,c,u=!1,m=0,h=0,p=.5;delete e.unknown;function g(){var _=t().length,x=i<n,w=x?i:n,j=x?n:i;s=(j-w)/Math.max(1,_-m+h*2),u&&(s=Math.floor(s)),w+=(j-w-s*(_-m))*p,c=s*(1-m),u&&(w=Math.round(w),c=Math.round(c));var S=aB(_).map(function(O){return w+s*O});return r(x?S.reverse():S)}return e.domain=function(_){return arguments.length?(t(_),g()):t()},e.range=function(_){return arguments.length?([n,i]=_,n=+n,i=+i,g()):[n,i]},e.rangeRound=function(_){return[n,i]=_,n=+n,i=+i,u=!0,g()},e.bandwidth=function(){return c},e.step=function(){return s},e.round=function(_){return arguments.length?(u=!!_,g()):u},e.padding=function(_){return arguments.length?(m=Math.min(1,h=+_),g()):m},e.paddingInner=function(_){return arguments.length?(m=Math.min(1,_),g()):m},e.paddingOuter=function(_){return arguments.length?(h=+_,g()):h},e.align=function(_){return arguments.length?(p=Math.max(0,Math.min(1,_)),g()):p},e.copy=function(){return d0(t(),[n,i]).round(u).paddingInner(m).paddingOuter(h).align(p)},Bn.apply(g(),arguments)}function TD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return TD(t())},e}function iB(){return TD(d0.apply(null,arguments).paddingInner(1))}function f0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function PD(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Jc(){}var Dc=.7,Hf=1/Dc,Bs="\\s*([+-]?\\d+)\\s*",Tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ga="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oB=/^#([0-9a-f]{3,8})$/,sB=new RegExp(`^rgb\\(${Bs},${Bs},${Bs}\\)$`),lB=new RegExp(`^rgb\\(${ga},${ga},${ga}\\)$`),cB=new RegExp(`^rgba\\(${Bs},${Bs},${Bs},${Tc}\\)$`),uB=new RegExp(`^rgba\\(${ga},${ga},${ga},${Tc}\\)$`),dB=new RegExp(`^hsl\\(${Tc},${ga},${ga}\\)$`),fB=new RegExp(`^hsla\\(${Tc},${ga},${ga},${Tc}\\)$`),NO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f0(Jc,Pc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:kO,formatHex:kO,formatHex8:mB,formatHsl:hB,formatRgb:DO,toString:DO});function kO(){return this.rgb().formatHex()}function mB(){return this.rgb().formatHex8()}function hB(){return MD(this).formatHsl()}function DO(){return this.rgb().formatRgb()}function Pc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=oB.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?TO(t):r===3?new Zr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Fd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Fd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sB.exec(e))?new Zr(t[1],t[2],t[3],1):(t=lB.exec(e))?new Zr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cB.exec(e))?Fd(t[1],t[2],t[3],t[4]):(t=uB.exec(e))?Fd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=dB.exec(e))?RO(t[1],t[2]/100,t[3]/100,1):(t=fB.exec(e))?RO(t[1],t[2]/100,t[3]/100,t[4]):NO.hasOwnProperty(e)?TO(NO[e]):e==="transparent"?new Zr(NaN,NaN,NaN,0):null}function TO(e){return new Zr(e>>16&255,e>>8&255,e&255,1)}function Fd(e,t,r,n){return n<=0&&(e=t=r=NaN),new Zr(e,t,r,n)}function pB(e){return e instanceof Jc||(e=Pc(e)),e?(e=e.rgb(),new Zr(e.r,e.g,e.b,e.opacity)):new Zr}function sb(e,t,r,n){return arguments.length===1?pB(e):new Zr(e,t,r,n??1)}function Zr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}f0(Zr,sb,PD(Jc,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Dc:Math.pow(Dc,e),new Zr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Zr(Do(this.r),Do(this.g),Do(this.b),Ff(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:PO,formatHex:PO,formatHex8:gB,formatRgb:MO,toString:MO}));function PO(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function gB(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function MO(){const e=Ff(this.opacity);return`${e===1?"rgb(":"rgba("}${Do(this.r)}, ${Do(this.g)}, ${Do(this.b)}${e===1?")":`, ${e})`}`}function Ff(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Do(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=Do(e),(e<16?"0":"")+e.toString(16)}function RO(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Qn(e,t,r,n)}function MD(e){if(e instanceof Qn)return new Qn(e.h,e.s,e.l,e.opacity);if(e instanceof Jc||(e=Pc(e)),!e)return new Qn;if(e instanceof Qn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),c=NaN,u=s-i,m=(s+i)/2;return u?(t===s?c=(r-n)/u+(r<n)*6:r===s?c=(n-t)/u+2:c=(t-r)/u+4,u/=m<.5?s+i:2-s-i,c*=60):u=m>0&&m<1?0:c,new Qn(c,u,m,e.opacity)}function vB(e,t,r,n){return arguments.length===1?MD(e):new Qn(e,t,r,n??1)}function Qn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}f0(Qn,vB,PD(Jc,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Qn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Dc:Math.pow(Dc,e),new Qn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Zr(Hv(e>=240?e-240:e+120,i,n),Hv(e,i,n),Hv(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Qn(qO(this.h),Kd(this.s),Kd(this.l),Ff(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ff(this.opacity);return`${e===1?"hsl(":"hsla("}${qO(this.h)}, ${Kd(this.s)*100}%, ${Kd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function qO(e){return e=(e||0)%360,e<0?e+360:e}function Kd(e){return Math.max(0,Math.min(1,e||0))}function Hv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const m0=e=>()=>e;function yB(e,t){return function(r){return e+r*t}}function bB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function _B(e){return(e=+e)==1?RD:function(t,r){return r-t?bB(t,r,e):m0(isNaN(t)?r:t)}}function RD(e,t){var r=t-e;return r?yB(e,r):m0(isNaN(e)?t:e)}const zO=(function e(t){var r=_B(t);function n(i,s){var c=r((i=sb(i)).r,(s=sb(s)).r),u=r(i.g,s.g),m=r(i.b,s.b),h=RD(i.opacity,s.opacity);return function(p){return i.r=c(p),i.g=u(p),i.b=m(p),i.opacity=h(p),i+""}}return n.gamma=e,n})(1);function xB(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function wB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jB(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),c;for(c=0;c<n;++c)i[c]=Js(e[c],t[c]);for(;c<r;++c)s[c]=t[c];return function(u){for(c=0;c<n;++c)s[c]=i[c](u);return s}}function SB(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Kf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function EB(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Js(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var lb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fv=new RegExp(lb.source,"g");function OB(e){return function(){return e}}function CB(e){return function(t){return e(t)+""}}function AB(e,t){var r=lb.lastIndex=Fv.lastIndex=0,n,i,s,c=-1,u=[],m=[];for(e=e+"",t=t+"";(n=lb.exec(e))&&(i=Fv.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,m.push({i:c,x:Kf(n,i)})),r=Fv.lastIndex;return r<t.length&&(s=t.slice(r),u[c]?u[c]+=s:u[++c]=s),u.length<2?m[0]?CB(m[0].x):OB(t):(t=m.length,function(h){for(var p=0,g;p<t;++p)u[(g=m[p]).i]=g.x(h);return u.join("")})}function Js(e,t){var r=typeof t,n;return t==null||r==="boolean"?m0(t):(r==="number"?Kf:r==="string"?(n=Pc(t))?(t=n,zO):AB:t instanceof Pc?zO:t instanceof Date?SB:wB(t)?xB:Array.isArray(t)?jB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?EB:Kf)(e,t)}function h0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function NB(e,t){t===void 0&&(t=e,e=Js);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(c){var u=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return s[u](c-u)}}function kB(e){return function(){return e}}function Yf(e){return+e}var LO=[0,1];function Lr(e){return e}function cb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:kB(isNaN(t)?NaN:.5)}function DB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function TB(e,t,r){var n=e[0],i=e[1],s=t[0],c=t[1];return i<n?(n=cb(i,n),s=r(c,s)):(n=cb(n,i),s=r(s,c)),function(u){return s(n(u))}}function PB(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)i[c]=cb(e[c],e[c+1]),s[c]=r(t[c],t[c+1]);return function(u){var m=Qc(e,u,1,n)-1;return s[m](i[m](u))}}function eu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Bm(){var e=LO,t=LO,r=Js,n,i,s,c=Lr,u,m,h;function p(){var _=Math.min(e.length,t.length);return c!==Lr&&(c=DB(e[0],e[_-1])),u=_>2?PB:TB,m=h=null,g}function g(_){return _==null||isNaN(_=+_)?s:(m||(m=u(e.map(n),t,r)))(n(c(_)))}return g.invert=function(_){return c(i((h||(h=u(t,e.map(n),Kf)))(_)))},g.domain=function(_){return arguments.length?(e=Array.from(_,Yf),p()):e.slice()},g.range=function(_){return arguments.length?(t=Array.from(_),p()):t.slice()},g.rangeRound=function(_){return t=Array.from(_),r=h0,p()},g.clamp=function(_){return arguments.length?(c=_?!0:Lr,p()):c!==Lr},g.interpolate=function(_){return arguments.length?(r=_,p()):r},g.unknown=function(_){return arguments.length?(s=_,g):s},function(_,x){return n=_,i=x,p()}}function p0(){return Bm()(Lr,Lr)}function MB(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Gf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ys(e){return e=Gf(Math.abs(e)),e?e[1]:NaN}function RB(e,t){return function(r,n){for(var i=r.length,s=[],c=0,u=e[0],m=0;i>0&&u>0&&(m+u+1>n&&(u=Math.max(1,n-m)),s.push(r.substring(i-=u,i+u)),!((m+=u+1)>n));)u=e[c=(c+1)%e.length];return s.reverse().join(t)}}function qB(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var zB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Mc(e){if(!(t=zB.exec(e)))throw new Error("invalid format: "+e);var t;return new g0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Mc.prototype=g0.prototype;function g0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}g0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function LB(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var qD;function IB(e,t){var r=Gf(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(qD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=n.length;return s===c?n:s>c?n+new Array(s-c+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Gf(e,Math.max(0,t+s-1))[0]}function IO(e,t){var r=Gf(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const UO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:MB,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>IO(e*100,t),r:IO,s:IB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function BO(e){return e}var $O=Array.prototype.map,HO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function UB(e){var t=e.grouping===void 0||e.thousands===void 0?BO:RB($O.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?BO:qB($O.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function h(g){g=Mc(g);var _=g.fill,x=g.align,w=g.sign,j=g.symbol,S=g.zero,O=g.width,C=g.comma,A=g.precision,k=g.trim,D=g.type;D==="n"?(C=!0,D="g"):UO[D]||(A===void 0&&(A=12),k=!0,D="g"),(S||_==="0"&&x==="=")&&(S=!0,_="0",x="=");var M=j==="$"?r:j==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",z=j==="$"?n:/[%p]/.test(D)?c:"",W=UO[D],Y=/[defgprs%]/.test(D);A=A===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function re(X){var I=M,se=z,pe,q,R;if(D==="c")se=W(X)+se,X="";else{X=+X;var U=X<0||1/X<0;if(X=isNaN(X)?m:W(Math.abs(X),A),k&&(X=LB(X)),U&&+X==0&&w!=="+"&&(U=!1),I=(U?w==="("?w:u:w==="-"||w==="("?"":w)+I,se=(D==="s"?HO[8+qD/3]:"")+se+(U&&w==="("?")":""),Y){for(pe=-1,q=X.length;++pe<q;)if(R=X.charCodeAt(pe),48>R||R>57){se=(R===46?i+X.slice(pe+1):X.slice(pe))+se,X=X.slice(0,pe);break}}}C&&!S&&(X=t(X,1/0));var te=I.length+X.length+se.length,ne=te<O?new Array(O-te+1).join(_):"";switch(C&&S&&(X=t(ne+X,ne.length?O-se.length:1/0),ne=""),x){case"<":X=I+X+se+ne;break;case"=":X=I+ne+X+se;break;case"^":X=ne.slice(0,te=ne.length>>1)+I+X+se+ne.slice(te);break;default:X=ne+I+X+se;break}return s(X)}return re.toString=function(){return g+""},re}function p(g,_){var x=h((g=Mc(g),g.type="f",g)),w=Math.max(-8,Math.min(8,Math.floor(Ys(_)/3)))*3,j=Math.pow(10,-w),S=HO[8+w/3];return function(O){return x(j*O)+S}}return{format:h,formatPrefix:p}}var Yd,v0,zD;BB({thousands:",",grouping:[3],currency:["$",""]});function BB(e){return Yd=UB(e),v0=Yd.format,zD=Yd.formatPrefix,Yd}function $B(e){return Math.max(0,-Ys(Math.abs(e)))}function HB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ys(t)/3)))*3-Ys(Math.abs(e)))}function FB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ys(t)-Ys(e))+1}function LD(e,t,r,n){var i=ib(e,t,r),s;switch(n=Mc(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=HB(i,c))&&(n.precision=s),zD(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=FB(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=$B(i))&&(n.precision=s-(n.type==="%")*2);break}}return v0(n)}function Qi(e){var t=e.domain;return e.ticks=function(r){var n=t();return nb(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return LD(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,c=n[i],u=n[s],m,h,p=10;for(u<c&&(h=c,c=u,u=h,h=i,i=s,s=h);p-- >0;){if(h=ab(c,u,r),h===m)return n[i]=c,n[s]=u,t(n);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;m=h}return e},e}function ID(){var e=p0();return e.copy=function(){return eu(e,ID())},Bn.apply(e,arguments),Qi(e)}function UD(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Yf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return UD(e).unknown(t)},e=arguments.length?Array.from(e,Yf):[0,1],Qi(r)}function BD(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],c;return s<i&&(c=r,r=n,n=c,c=i,i=s,s=c),e[r]=t.floor(i),e[n]=t.ceil(s),e}function FO(e){return Math.log(e)}function KO(e){return Math.exp(e)}function KB(e){return-Math.log(-e)}function YB(e){return-Math.exp(-e)}function GB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function VB(e){return e===10?GB:e===Math.E?Math.exp:t=>Math.pow(e,t)}function WB(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function YO(e){return(t,r)=>-e(-t,r)}function y0(e){const t=e(FO,KO),r=t.domain;let n=10,i,s;function c(){return i=WB(n),s=VB(n),r()[0]<0?(i=YO(i),s=YO(s),e(KB,YB)):e(FO,KO),t}return t.base=function(u){return arguments.length?(n=+u,c()):n},t.domain=function(u){return arguments.length?(r(u),c()):r()},t.ticks=u=>{const m=r();let h=m[0],p=m[m.length-1];const g=p<h;g&&([h,p]=[p,h]);let _=i(h),x=i(p),w,j;const S=u==null?10:+u;let O=[];if(!(n%1)&&x-_<S){if(_=Math.floor(_),x=Math.ceil(x),h>0){for(;_<=x;++_)for(w=1;w<n;++w)if(j=_<0?w/s(-_):w*s(_),!(j<h)){if(j>p)break;O.push(j)}}else for(;_<=x;++_)for(w=n-1;w>=1;--w)if(j=_>0?w/s(-_):w*s(_),!(j<h)){if(j>p)break;O.push(j)}O.length*2<S&&(O=nb(h,p,S))}else O=nb(_,x,Math.min(x-_,S)).map(s);return g?O.reverse():O},t.tickFormat=(u,m)=>{if(u==null&&(u=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Mc(m)).precision==null&&(m.trim=!0),m=v0(m)),u===1/0)return m;const h=Math.max(1,n*u/t.ticks().length);return p=>{let g=p/s(Math.round(i(p)));return g*n<n-.5&&(g*=n),g<=h?m(p):""}},t.nice=()=>r(BD(r(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function $D(){const e=y0(Bm()).domain([1,10]);return e.copy=()=>eu(e,$D()).base(e.base()),Bn.apply(e,arguments),e}function GO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function VO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function b0(e){var t=1,r=e(GO(t),VO(t));return r.constant=function(n){return arguments.length?e(GO(t=+n),VO(t)):t},Qi(r)}function HD(){var e=b0(Bm());return e.copy=function(){return eu(e,HD()).constant(e.constant())},Bn.apply(e,arguments)}function WO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function XB(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ZB(e){return e<0?-e*e:e*e}function _0(e){var t=e(Lr,Lr),r=1;function n(){return r===1?e(Lr,Lr):r===.5?e(XB,ZB):e(WO(r),WO(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Qi(t)}function x0(){var e=_0(Bm());return e.copy=function(){return eu(e,x0()).exponent(e.exponent())},Bn.apply(e,arguments),e}function QB(){return x0.apply(null,arguments).exponent(.5)}function XO(e){return Math.sign(e)*e*e}function JB(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function FD(){var e=p0(),t=[0,1],r=!1,n;function i(s){var c=JB(e(s));return isNaN(c)?n:r?Math.round(c):c}return i.invert=function(s){return e.invert(XO(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Yf)).map(XO)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return FD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Bn.apply(i,arguments),Qi(i)}function KD(){var e=[],t=[],r=[],n;function i(){var c=0,u=Math.max(1,t.length);for(r=new Array(u-1);++c<u;)r[c-1]=nB(e,c/u);return s}function s(c){return c==null||isNaN(c=+c)?n:t[Qc(r,c)]}return s.invertExtent=function(c){var u=t.indexOf(c);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},s.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let u of c)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Fi),i()},s.range=function(c){return arguments.length?(t=Array.from(c),i()):t.slice()},s.unknown=function(c){return arguments.length?(n=c,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return KD().domain(e).range(t).unknown(n)},Bn.apply(s,arguments)}function YD(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function c(m){return m!=null&&m<=m?i[Qc(n,m,0,r)]:s}function u(){var m=-1;for(n=new Array(r);++m<r;)n[m]=((m+1)*t-(m-r)*e)/(r+1);return c}return c.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,u()):[e,t]},c.range=function(m){return arguments.length?(r=(i=Array.from(m)).length-1,u()):i.slice()},c.invertExtent=function(m){var h=i.indexOf(m);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},c.unknown=function(m){return arguments.length&&(s=m),c},c.thresholds=function(){return n.slice()},c.copy=function(){return YD().domain([e,t]).range(i).unknown(s)},Bn.apply(Qi(c),arguments)}function GD(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[Qc(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var c=t.indexOf(s);return[e[c-1],e[c]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return GD().domain(e).range(t).unknown(r)},Bn.apply(i,arguments)}const Kv=new Date,Yv=new Date;function fr(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const c=i(s),u=i.ceil(s);return s-c<u-s?c:u},i.offset=(s,c)=>(t(s=new Date(+s),c==null?1:Math.floor(c)),s),i.range=(s,c,u)=>{const m=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<c)||!(u>0))return m;let h;do m.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<c);return m},i.filter=s=>fr(c=>{if(c>=c)for(;e(c),!s(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;t(c,-1),!s(c););else for(;--u>=0;)for(;t(c,1),!s(c););}),r&&(i.count=(s,c)=>(Kv.setTime(+s),Yv.setTime(+c),e(Kv),e(Yv),Math.floor(r(Kv,Yv))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?c=>n(c)%s===0:c=>i.count(0,c)%s===0):i)),i}const Vf=fr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Vf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Vf);Vf.range;const Fa=1e3,zn=Fa*60,Ka=zn*60,Za=Ka*24,w0=Za*7,ZO=Za*30,Gv=Za*365,Ao=fr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Fa)},(e,t)=>(t-e)/Fa,e=>e.getUTCSeconds());Ao.range;const j0=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fa)},(e,t)=>{e.setTime(+e+t*zn)},(e,t)=>(t-e)/zn,e=>e.getMinutes());j0.range;const S0=fr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zn)},(e,t)=>(t-e)/zn,e=>e.getUTCMinutes());S0.range;const E0=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fa-e.getMinutes()*zn)},(e,t)=>{e.setTime(+e+t*Ka)},(e,t)=>(t-e)/Ka,e=>e.getHours());E0.range;const O0=fr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ka)},(e,t)=>(t-e)/Ka,e=>e.getUTCHours());O0.range;const tu=fr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zn)/Za,e=>e.getDate()-1);tu.range;const $m=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Za,e=>e.getUTCDate()-1);$m.range;const VD=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Za,e=>Math.floor(e/Za));VD.range;function Go(e){return fr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*zn)/w0)}const Hm=Go(0),Wf=Go(1),e$=Go(2),t$=Go(3),Gs=Go(4),r$=Go(5),n$=Go(6);Hm.range;Wf.range;e$.range;t$.range;Gs.range;r$.range;n$.range;function Vo(e){return fr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/w0)}const Fm=Vo(0),Xf=Vo(1),a$=Vo(2),i$=Vo(3),Vs=Vo(4),o$=Vo(5),s$=Vo(6);Fm.range;Xf.range;a$.range;i$.range;Vs.range;o$.range;s$.range;const C0=fr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());C0.range;const A0=fr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());A0.range;const Qa=fr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Qa.range;const Ja=fr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ja.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ja.range;function WD(e,t,r,n,i,s){const c=[[Ao,1,Fa],[Ao,5,5*Fa],[Ao,15,15*Fa],[Ao,30,30*Fa],[s,1,zn],[s,5,5*zn],[s,15,15*zn],[s,30,30*zn],[i,1,Ka],[i,3,3*Ka],[i,6,6*Ka],[i,12,12*Ka],[n,1,Za],[n,2,2*Za],[r,1,w0],[t,1,ZO],[t,3,3*ZO],[e,1,Gv]];function u(h,p,g){const _=p<h;_&&([h,p]=[p,h]);const x=g&&typeof g.range=="function"?g:m(h,p,g),w=x?x.range(h,+p+1):[];return _?w.reverse():w}function m(h,p,g){const _=Math.abs(p-h)/g,x=c0(([,,S])=>S).right(c,_);if(x===c.length)return e.every(ib(h/Gv,p/Gv,g));if(x===0)return Vf.every(Math.max(ib(h,p,g),1));const[w,j]=c[_/c[x-1][2]<c[x][2]/_?x-1:x];return w.every(j)}return[u,m]}const[l$,c$]=WD(Ja,A0,Fm,VD,O0,S0),[u$,d$]=WD(Qa,C0,Hm,tu,E0,j0);function Vv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Wv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function dc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function f$(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,c=e.shortDays,u=e.months,m=e.shortMonths,h=fc(i),p=mc(i),g=fc(s),_=mc(s),x=fc(c),w=mc(c),j=fc(u),S=mc(u),O=fc(m),C=mc(m),A={a:U,A:te,b:ne,B:we,c:null,d:nC,e:nC,f:R$,g:K$,G:G$,H:T$,I:P$,j:M$,L:XD,m:q$,M:z$,p:Pe,q:F,Q:oC,s:sC,S:L$,u:I$,U:U$,V:B$,w:$$,W:H$,x:null,X:null,y:F$,Y:Y$,Z:V$,"%":iC},k={a:$,A:Se,b:De,B:Ie,c:null,d:aC,e:aC,f:Q$,g:l8,G:u8,H:W$,I:X$,j:Z$,L:QD,m:J$,M:e8,p:G,q:_e,Q:oC,s:sC,S:t8,u:r8,U:n8,V:a8,w:i8,W:o8,x:null,X:null,y:s8,Y:c8,Z:d8,"%":iC},D={a:re,A:X,b:I,B:se,c:pe,d:tC,e:tC,f:A$,g:eC,G:JO,H:rC,I:rC,j:S$,L:C$,m:j$,M:E$,p:Y,q:w$,Q:k$,s:D$,S:O$,u:v$,U:y$,V:b$,w:g$,W:_$,x:q,X:R,y:eC,Y:JO,Z:x$,"%":N$};A.x=M(r,A),A.X=M(n,A),A.c=M(t,A),k.x=M(r,k),k.X=M(n,k),k.c=M(t,k);function M(V,xe){return function(je){var oe=[],He=-1,ge=0,Ne=V.length,Re,jt,qe;for(je instanceof Date||(je=new Date(+je));++He<Ne;)V.charCodeAt(He)===37&&(oe.push(V.slice(ge,He)),(jt=QO[Re=V.charAt(++He)])!=null?Re=V.charAt(++He):jt=Re==="e"?" ":"0",(qe=xe[Re])&&(Re=qe(je,jt)),oe.push(Re),ge=He+1);return oe.push(V.slice(ge,He)),oe.join("")}}function z(V,xe){return function(je){var oe=dc(1900,void 0,1),He=W(oe,V,je+="",0),ge,Ne;if(He!=je.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(xe&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(ge=Wv(dc(oe.y,0,1)),Ne=ge.getUTCDay(),ge=Ne>4||Ne===0?Xf.ceil(ge):Xf(ge),ge=$m.offset(ge,(oe.V-1)*7),oe.y=ge.getUTCFullYear(),oe.m=ge.getUTCMonth(),oe.d=ge.getUTCDate()+(oe.w+6)%7):(ge=Vv(dc(oe.y,0,1)),Ne=ge.getDay(),ge=Ne>4||Ne===0?Wf.ceil(ge):Wf(ge),ge=tu.offset(ge,(oe.V-1)*7),oe.y=ge.getFullYear(),oe.m=ge.getMonth(),oe.d=ge.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),Ne="Z"in oe?Wv(dc(oe.y,0,1)).getUTCDay():Vv(dc(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(Ne+5)%7:oe.w+oe.U*7-(Ne+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,Wv(oe)):Vv(oe)}}function W(V,xe,je,oe){for(var He=0,ge=xe.length,Ne=je.length,Re,jt;He<ge;){if(oe>=Ne)return-1;if(Re=xe.charCodeAt(He++),Re===37){if(Re=xe.charAt(He++),jt=D[Re in QO?xe.charAt(He++):Re],!jt||(oe=jt(V,je,oe))<0)return-1}else if(Re!=je.charCodeAt(oe++))return-1}return oe}function Y(V,xe,je){var oe=h.exec(xe.slice(je));return oe?(V.p=p.get(oe[0].toLowerCase()),je+oe[0].length):-1}function re(V,xe,je){var oe=x.exec(xe.slice(je));return oe?(V.w=w.get(oe[0].toLowerCase()),je+oe[0].length):-1}function X(V,xe,je){var oe=g.exec(xe.slice(je));return oe?(V.w=_.get(oe[0].toLowerCase()),je+oe[0].length):-1}function I(V,xe,je){var oe=O.exec(xe.slice(je));return oe?(V.m=C.get(oe[0].toLowerCase()),je+oe[0].length):-1}function se(V,xe,je){var oe=j.exec(xe.slice(je));return oe?(V.m=S.get(oe[0].toLowerCase()),je+oe[0].length):-1}function pe(V,xe,je){return W(V,t,xe,je)}function q(V,xe,je){return W(V,r,xe,je)}function R(V,xe,je){return W(V,n,xe,je)}function U(V){return c[V.getDay()]}function te(V){return s[V.getDay()]}function ne(V){return m[V.getMonth()]}function we(V){return u[V.getMonth()]}function Pe(V){return i[+(V.getHours()>=12)]}function F(V){return 1+~~(V.getMonth()/3)}function $(V){return c[V.getUTCDay()]}function Se(V){return s[V.getUTCDay()]}function De(V){return m[V.getUTCMonth()]}function Ie(V){return u[V.getUTCMonth()]}function G(V){return i[+(V.getUTCHours()>=12)]}function _e(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var xe=M(V+="",A);return xe.toString=function(){return V},xe},parse:function(V){var xe=z(V+="",!1);return xe.toString=function(){return V},xe},utcFormat:function(V){var xe=M(V+="",k);return xe.toString=function(){return V},xe},utcParse:function(V){var xe=z(V+="",!0);return xe.toString=function(){return V},xe}}}var QO={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,m$=/^%/,h$=/[\\^$*+?|[\]().{}]/g;function at(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function p$(e){return e.replace(h$,"\\$&")}function fc(e){return new RegExp("^(?:"+e.map(p$).join("|")+")","i")}function mc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function g$(e,t,r){var n=wr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function v$(e,t,r){var n=wr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function y$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function b$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function _$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function JO(e,t,r){var n=wr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function eC(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function x$(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function w$(e,t,r){var n=wr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function j$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function tC(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function S$(e,t,r){var n=wr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function rC(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function E$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function O$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function C$(e,t,r){var n=wr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function A$(e,t,r){var n=wr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function N$(e,t,r){var n=m$.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function k$(e,t,r){var n=wr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function D$(e,t,r){var n=wr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function nC(e,t){return at(e.getDate(),t,2)}function T$(e,t){return at(e.getHours(),t,2)}function P$(e,t){return at(e.getHours()%12||12,t,2)}function M$(e,t){return at(1+tu.count(Qa(e),e),t,3)}function XD(e,t){return at(e.getMilliseconds(),t,3)}function R$(e,t){return XD(e,t)+"000"}function q$(e,t){return at(e.getMonth()+1,t,2)}function z$(e,t){return at(e.getMinutes(),t,2)}function L$(e,t){return at(e.getSeconds(),t,2)}function I$(e){var t=e.getDay();return t===0?7:t}function U$(e,t){return at(Hm.count(Qa(e)-1,e),t,2)}function ZD(e){var t=e.getDay();return t>=4||t===0?Gs(e):Gs.ceil(e)}function B$(e,t){return e=ZD(e),at(Gs.count(Qa(e),e)+(Qa(e).getDay()===4),t,2)}function $$(e){return e.getDay()}function H$(e,t){return at(Wf.count(Qa(e)-1,e),t,2)}function F$(e,t){return at(e.getFullYear()%100,t,2)}function K$(e,t){return e=ZD(e),at(e.getFullYear()%100,t,2)}function Y$(e,t){return at(e.getFullYear()%1e4,t,4)}function G$(e,t){var r=e.getDay();return e=r>=4||r===0?Gs(e):Gs.ceil(e),at(e.getFullYear()%1e4,t,4)}function V$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function aC(e,t){return at(e.getUTCDate(),t,2)}function W$(e,t){return at(e.getUTCHours(),t,2)}function X$(e,t){return at(e.getUTCHours()%12||12,t,2)}function Z$(e,t){return at(1+$m.count(Ja(e),e),t,3)}function QD(e,t){return at(e.getUTCMilliseconds(),t,3)}function Q$(e,t){return QD(e,t)+"000"}function J$(e,t){return at(e.getUTCMonth()+1,t,2)}function e8(e,t){return at(e.getUTCMinutes(),t,2)}function t8(e,t){return at(e.getUTCSeconds(),t,2)}function r8(e){var t=e.getUTCDay();return t===0?7:t}function n8(e,t){return at(Fm.count(Ja(e)-1,e),t,2)}function JD(e){var t=e.getUTCDay();return t>=4||t===0?Vs(e):Vs.ceil(e)}function a8(e,t){return e=JD(e),at(Vs.count(Ja(e),e)+(Ja(e).getUTCDay()===4),t,2)}function i8(e){return e.getUTCDay()}function o8(e,t){return at(Xf.count(Ja(e)-1,e),t,2)}function s8(e,t){return at(e.getUTCFullYear()%100,t,2)}function l8(e,t){return e=JD(e),at(e.getUTCFullYear()%100,t,2)}function c8(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function u8(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Vs(e):Vs.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function d8(){return"+0000"}function iC(){return"%"}function oC(e){return+e}function sC(e){return Math.floor(+e/1e3)}var Ms,eT,tT;f8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function f8(e){return Ms=f$(e),eT=Ms.format,Ms.parse,tT=Ms.utcFormat,Ms.utcParse,Ms}function m8(e){return new Date(e)}function h8(e){return e instanceof Date?+e:+new Date(+e)}function N0(e,t,r,n,i,s,c,u,m,h){var p=p0(),g=p.invert,_=p.domain,x=h(".%L"),w=h(":%S"),j=h("%I:%M"),S=h("%I %p"),O=h("%a %d"),C=h("%b %d"),A=h("%B"),k=h("%Y");function D(M){return(m(M)<M?x:u(M)<M?w:c(M)<M?j:s(M)<M?S:n(M)<M?i(M)<M?O:C:r(M)<M?A:k)(M)}return p.invert=function(M){return new Date(g(M))},p.domain=function(M){return arguments.length?_(Array.from(M,h8)):_().map(m8)},p.ticks=function(M){var z=_();return e(z[0],z[z.length-1],M??10)},p.tickFormat=function(M,z){return z==null?D:h(z)},p.nice=function(M){var z=_();return(!M||typeof M.range!="function")&&(M=t(z[0],z[z.length-1],M??10)),M?_(BD(z,M)):p},p.copy=function(){return eu(p,N0(e,t,r,n,i,s,c,u,m,h))},p}function p8(){return Bn.apply(N0(u$,d$,Qa,C0,Hm,tu,E0,j0,Ao,eT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function g8(){return Bn.apply(N0(l$,c$,Ja,A0,Fm,$m,O0,S0,Ao,tT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Km(){var e=0,t=1,r,n,i,s,c=Lr,u=!1,m;function h(g){return g==null||isNaN(g=+g)?m:c(i===0?.5:(g=(s(g)-r)*i,u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(_){var x,w;return arguments.length?([x,w]=_,c=g(x,w),h):[c(0),c(1)]}}return h.range=p(Js),h.rangeRound=p(h0),h.unknown=function(g){return arguments.length?(m=g,h):m},function(g){return s=g,r=g(e),n=g(t),i=r===n?0:1/(n-r),h}}function Ji(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function rT(){var e=Qi(Km()(Lr));return e.copy=function(){return Ji(e,rT())},oi.apply(e,arguments)}function nT(){var e=y0(Km()).domain([1,10]);return e.copy=function(){return Ji(e,nT()).base(e.base())},oi.apply(e,arguments)}function aT(){var e=b0(Km());return e.copy=function(){return Ji(e,aT()).constant(e.constant())},oi.apply(e,arguments)}function k0(){var e=_0(Km());return e.copy=function(){return Ji(e,k0()).exponent(e.exponent())},oi.apply(e,arguments)}function v8(){return k0.apply(null,arguments).exponent(.5)}function iT(){var e=[],t=Lr;function r(n){if(n!=null&&!isNaN(n=+n))return t((Qc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Fi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>rB(e,s/n))},r.copy=function(){return iT(t).domain(e)},oi.apply(r,arguments)}function Ym(){var e=0,t=.5,r=1,n=1,i,s,c,u,m,h=Lr,p,g=!1,_;function x(j){return isNaN(j=+j)?_:(j=.5+((j=+p(j))-s)*(n*j<n*s?u:m),h(g?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,i=p(e=+e),s=p(t=+t),c=p(r=+r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(g=!!j,x):g},x.interpolator=function(j){return arguments.length?(h=j,x):h};function w(j){return function(S){var O,C,A;return arguments.length?([O,C,A]=S,h=NB(j,[O,C,A]),x):[h(0),h(.5),h(1)]}}return x.range=w(Js),x.rangeRound=w(h0),x.unknown=function(j){return arguments.length?(_=j,x):_},function(j){return p=j,i=j(e),s=j(t),c=j(r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x}}function oT(){var e=Qi(Ym()(Lr));return e.copy=function(){return Ji(e,oT())},oi.apply(e,arguments)}function sT(){var e=y0(Ym()).domain([.1,1,10]);return e.copy=function(){return Ji(e,sT()).base(e.base())},oi.apply(e,arguments)}function lT(){var e=b0(Ym());return e.copy=function(){return Ji(e,lT()).constant(e.constant())},oi.apply(e,arguments)}function D0(){var e=_0(Ym());return e.copy=function(){return Ji(e,D0()).exponent(e.exponent())},oi.apply(e,arguments)}function y8(){return D0.apply(null,arguments).exponent(.5)}const yc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:d0,scaleDiverging:oT,scaleDivergingLog:sT,scaleDivergingPow:D0,scaleDivergingSqrt:y8,scaleDivergingSymlog:lT,scaleIdentity:UD,scaleImplicit:ob,scaleLinear:ID,scaleLog:$D,scaleOrdinal:u0,scalePoint:iB,scalePow:x0,scaleQuantile:KD,scaleQuantize:YD,scaleRadial:FD,scaleSequential:rT,scaleSequentialLog:nT,scaleSequentialPow:k0,scaleSequentialQuantile:iT,scaleSequentialSqrt:v8,scaleSequentialSymlog:aT,scaleSqrt:QB,scaleSymlog:HD,scaleThreshold:GD,scaleTime:p8,scaleUtc:g8,tickFormat:LD},Symbol.toStringTag,{value:"Module"}));var si=e=>e.chartData,Gm=J([si],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),T0=(e,t,r,n)=>n?Gm(e):si(e),b8=(e,t,r)=>r?Gm(e):si(e);function Yi(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zt(t)&&zt(r))return!0}return!1}function lC(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function cT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,s;if(zt(r))i=r;else if(typeof r=="function")return;if(zt(n))s=n;else if(typeof n=="function")return;var c=[i,s];if(Yi(c))return c}}function _8(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Yi(n))return lC(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,c,u;if(i==="auto")t!=null&&(c=Math.min(...t));else if(ke(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[0]))}catch{}else if(typeof i=="string"&&xE.test(i)){var m=xE.exec(i);if(m==null||m[1]==null||t==null)c=void 0;else{var h=+m[1];c=t[0]-h}}else c=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(ke(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&wE.test(s)){var p=wE.exec(s);if(p==null||p[1]==null||t==null)u=void 0;else{var g=+p[1];u=t[1]+g}}else u=t?.[1];var _=[c,u];if(Yi(_))return t==null?_:lC(_,t,r)}}}var el=1e9,x8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},M0,Dt=!0,Un="[DecimalError] ",To=Un+"Invalid argument: ",P0=Un+"Exponent out of range: ",tl=Math.floor,So=Math.pow,w8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hn,yr=1e7,Ot=7,uT=9007199254740991,Zf=tl(uT/Ot),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ot;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(e){return Ya(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,r=t.constructor;return _t(Ya(t,new r(e),0,1),r.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return or(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(hn))throw Error(Un+"NaN");if(r.s<1)throw Error(Un+(r.s?"NaN":"-Infinity"));return r.eq(hn)?new n(0):(Dt=!1,t=Ya(Rc(r,s),Rc(e,s),s),Dt=!0,_t(t,i))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?mT(t,e):dT(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Un+"NaN");return r.s?(Dt=!1,t=Ya(r,e,0,1).times(e),Dt=!0,r.minus(t)):_t(new n(r),i)};Ce.naturalExponential=Ce.exp=function(){return fT(this)};Ce.naturalLogarithm=Ce.ln=function(){return Rc(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?dT(t,e):mT(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(To+e);if(t=or(i)+1,n=i.d.length-1,r=n*Ot+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ce.squareRoot=Ce.sqrt=function(){var e,t,r,n,i,s,c,u=this,m=u.constructor;if(u.s<1){if(!u.s)return new m(0);throw Error(Un+"NaN")}for(e=or(u),Dt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ha(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=tl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(i.toString()),r=m.precision,i=c=r+3;;)if(s=n,n=s.plus(Ya(u,s,c+2)).times(.5),ha(s.d).slice(0,c)===(t=ha(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),i==c&&t=="4999"){if(_t(s,r+1,0),s.times(s).eq(u)){n=s;break}}else if(t!="9999")break;c+=4}return Dt=!0,_t(n,r)};Ce.times=Ce.mul=function(e){var t,r,n,i,s,c,u,m,h,p=this,g=p.constructor,_=p.d,x=(e=new g(e)).d;if(!p.s||!e.s)return new g(0);for(e.s*=p.s,r=p.e+e.e,m=_.length,h=x.length,m<h&&(s=_,_=x,x=s,c=m,m=h,h=c),s=[],c=m+h,n=c;n--;)s.push(0);for(n=h;--n>=0;){for(t=0,i=m+n;i>n;)u=s[i]+x[n]*_[i-n-1]+t,s[i--]=u%yr|0,t=u/yr|0;s[i]=(s[i]+t)%yr|0}for(;!s[--c];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Dt?_t(e,g.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ba(e,0,el),t===void 0?t=n.rounding:ba(t,0,8),_t(r,e+or(r)+1,t))};Ce.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Bo(n,!0):(ba(e,0,el),t===void 0?t=i.rounding:ba(t,0,8),n=_t(new i(n),e+1,t),r=Bo(n,!0,e+1)),r};Ce.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?Bo(i):(ba(e,0,el),t===void 0?t=s.rounding:ba(t,0,8),n=_t(new s(i),e+or(i)+1,t),r=Bo(n.abs(),!1,e+or(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return _t(new t(e),or(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,r,n,i,s,c,u=this,m=u.constructor,h=12,p=+(e=new m(e));if(!e.s)return new m(hn);if(u=new m(u),!u.s){if(e.s<1)throw Error(Un+"Infinity");return u}if(u.eq(hn))return u;if(n=m.precision,e.eq(hn))return _t(u,n);if(t=e.e,r=e.d.length-1,c=t>=r,s=u.s,c){if((r=p<0?-p:p)<=uT){for(i=new m(hn),t=Math.ceil(n/Ot+4),Dt=!1;r%2&&(i=i.times(u),uC(i.d,t)),r=tl(r/2),r!==0;)u=u.times(u),uC(u.d,t);return Dt=!0,e.s<0?new m(hn).div(i):_t(i,n)}}else if(s<0)throw Error(Un+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Dt=!1,i=e.times(Rc(u,n+h)),Dt=!0,i=fT(i),i.s=s,i};Ce.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=or(i),n=Bo(i,r<=s.toExpNeg||r>=s.toExpPos)):(ba(e,1,el),t===void 0?t=s.rounding:ba(t,0,8),i=_t(new s(i),e,t),r=or(i),n=Bo(i,e<=r||r<=s.toExpNeg,e)),n};Ce.toSignificantDigits=Ce.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ba(e,1,el),t===void 0?t=n.rounding:ba(t,0,8)),_t(new n(r),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=or(e),r=e.constructor;return Bo(e,t<=r.toExpNeg||t>=r.toExpPos)};function dT(e,t){var r,n,i,s,c,u,m,h,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),Dt?_t(t,g):t;if(m=e.d,h=t.d,c=e.e,i=t.e,m=m.slice(),s=c-i,s){for(s<0?(n=m,s=-s,u=h.length):(n=h,i=c,u=m.length),c=Math.ceil(g/Ot),u=c>u?c+1:u+1,s>u&&(s=u,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(u=m.length,s=h.length,u-s<0&&(s=u,n=h,h=m,m=n),r=0;s;)r=(m[--s]=m[s]+h[s]+r)/yr|0,m[s]%=yr;for(r&&(m.unshift(r),++i),u=m.length;m[--u]==0;)m.pop();return t.d=m,t.e=i,Dt?_t(t,g):t}function ba(e,t,r){if(e!==~~e||e<t||e>r)throw Error(To+e)}function ha(e){var t,r,n,i=e.length-1,s="",c=e[0];if(i>0){for(s+=c,t=1;t<i;t++)n=e[t]+"",r=Ot-n.length,r&&(s+=Ii(r)),s+=n;c=e[t],n=c+"",r=Ot-n.length,r&&(s+=Ii(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var Ya=(function(){function e(n,i){var s,c=0,u=n.length;for(n=n.slice();u--;)s=n[u]*i+c,n[u]=s%yr|0,c=s/yr|0;return c&&n.unshift(c),n}function t(n,i,s,c){var u,m;if(s!=c)m=s>c?1:-1;else for(u=m=0;u<s;u++)if(n[u]!=i[u]){m=n[u]>i[u]?1:-1;break}return m}function r(n,i,s){for(var c=0;s--;)n[s]-=c,c=n[s]<i[s]?1:0,n[s]=c*yr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,c){var u,m,h,p,g,_,x,w,j,S,O,C,A,k,D,M,z,W,Y=n.constructor,re=n.s==i.s?1:-1,X=n.d,I=i.d;if(!n.s)return new Y(n);if(!i.s)throw Error(Un+"Division by zero");for(m=n.e-i.e,z=I.length,D=X.length,x=new Y(re),w=x.d=[],h=0;I[h]==(X[h]||0);)++h;if(I[h]>(X[h]||0)&&--m,s==null?C=s=Y.precision:c?C=s+(or(n)-or(i))+1:C=s,C<0)return new Y(0);if(C=C/Ot+2|0,h=0,z==1)for(p=0,I=I[0],C++;(h<D||p)&&C--;h++)A=p*yr+(X[h]||0),w[h]=A/I|0,p=A%I|0;else{for(p=yr/(I[0]+1)|0,p>1&&(I=e(I,p),X=e(X,p),z=I.length,D=X.length),k=z,j=X.slice(0,z),S=j.length;S<z;)j[S++]=0;W=I.slice(),W.unshift(0),M=I[0],I[1]>=yr/2&&++M;do p=0,u=t(I,j,z,S),u<0?(O=j[0],z!=S&&(O=O*yr+(j[1]||0)),p=O/M|0,p>1?(p>=yr&&(p=yr-1),g=e(I,p),_=g.length,S=j.length,u=t(g,j,_,S),u==1&&(p--,r(g,z<_?W:I,_))):(p==0&&(u=p=1),g=I.slice()),_=g.length,_<S&&g.unshift(0),r(j,g,S),u==-1&&(S=j.length,u=t(I,j,z,S),u<1&&(p++,r(j,z<S?W:I,S))),S=j.length):u===0&&(p++,j=[0]),w[h++]=p,u&&j[0]?j[S++]=X[k]||0:(j=[X[k]],S=1);while((k++<D||j[0]!==void 0)&&C--)}return w[0]||w.shift(),x.e=m,_t(x,c?s+or(x)+1:s)}})();function fT(e,t){var r,n,i,s,c,u,m=0,h=0,p=e.constructor,g=p.precision;if(or(e)>16)throw Error(P0+or(e));if(!e.s)return new p(hn);for(Dt=!1,u=g,c=new p(.03125);e.abs().gte(.1);)e=e.times(c),h+=5;for(n=Math.log(So(2,h))/Math.LN10*2+5|0,u+=n,r=i=s=new p(hn),p.precision=u;;){if(i=_t(i.times(e),u),r=r.times(++m),c=s.plus(Ya(i,r,u)),ha(c.d).slice(0,u)===ha(s.d).slice(0,u)){for(;h--;)s=_t(s.times(s),u);return p.precision=g,t==null?(Dt=!0,_t(s,g)):s}s=c}}function or(e){for(var t=e.e*Ot,r=e.d[0];r>=10;r/=10)t++;return t}function Xv(e,t,r){if(t>e.LN10.sd())throw Dt=!0,r&&(e.precision=r),Error(Un+"LN10 precision limit exceeded");return _t(new e(e.LN10),t)}function Ii(e){for(var t="";e--;)t+="0";return t}function Rc(e,t){var r,n,i,s,c,u,m,h,p,g=1,_=10,x=e,w=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(Un+(x.s?"NaN":"-Infinity"));if(x.eq(hn))return new j(0);if(t==null?(Dt=!1,h=S):h=t,x.eq(10))return t==null&&(Dt=!0),Xv(j,h);if(h+=_,j.precision=h,r=ha(w),n=r.charAt(0),s=or(x),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=ha(x.d),n=r.charAt(0),g++;s=or(x),n>1?(x=new j("0."+r),s++):x=new j(n+"."+r.slice(1))}else return m=Xv(j,h+2,S).times(s+""),x=Rc(new j(n+"."+r.slice(1)),h-_).plus(m),j.precision=S,t==null?(Dt=!0,_t(x,S)):x;for(u=c=x=Ya(x.minus(hn),x.plus(hn),h),p=_t(x.times(x),h),i=3;;){if(c=_t(c.times(p),h),m=u.plus(Ya(c,new j(i),h)),ha(m.d).slice(0,h)===ha(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(Xv(j,h+2,S).times(s+""))),u=Ya(u,new j(g),h),j.precision=S,t==null?(Dt=!0,_t(u,S)):u;u=m,i+=2}}function cC(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=tl(r/Ot),e.d=[],n=(r+1)%Ot,r<0&&(n+=Ot),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ot;n<i;)e.d.push(+t.slice(n,n+=Ot));t=t.slice(n),n=Ot-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Dt&&(e.e>Zf||e.e<-Zf))throw Error(P0+r)}else e.s=0,e.e=0,e.d=[0];return e}function _t(e,t,r){var n,i,s,c,u,m,h,p,g=e.d;for(c=1,s=g[0];s>=10;s/=10)c++;if(n=t-c,n<0)n+=Ot,i=t,h=g[p=0];else{if(p=Math.ceil((n+1)/Ot),s=g.length,p>=s)return e;for(h=s=g[p],c=1;s>=10;s/=10)c++;n%=Ot,i=n-Ot+c}if(r!==void 0&&(s=So(10,c-i-1),u=h/s%10|0,m=t<0||g[p+1]!==void 0||h%s,m=r<4?(u||m)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||m||r==6&&(n>0?i>0?h/So(10,c-i):0:g[p-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return m?(s=or(e),g.length=1,t=t-s-1,g[0]=So(10,(Ot-t%Ot)%Ot),e.e=tl(-t/Ot)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(n==0?(g.length=p,s=1,p--):(g.length=p+1,s=So(10,Ot-n),g[p]=i>0?(h/So(10,c-i)%So(10,i)|0)*s:0),m)for(;;)if(p==0){(g[0]+=s)==yr&&(g[0]=1,++e.e);break}else{if(g[p]+=s,g[p]!=yr)break;g[p--]=0,s=1}for(n=g.length;g[--n]===0;)g.pop();if(Dt&&(e.e>Zf||e.e<-Zf))throw Error(P0+or(e));return e}function mT(e,t){var r,n,i,s,c,u,m,h,p,g,_=e.constructor,x=_.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new _(e),Dt?_t(t,x):t;if(m=e.d,g=t.d,n=t.e,h=e.e,m=m.slice(),c=h-n,c){for(p=c<0,p?(r=m,c=-c,u=g.length):(r=g,n=h,u=m.length),i=Math.max(Math.ceil(x/Ot),u)+2,c>i&&(c=i,r.length=1),r.reverse(),i=c;i--;)r.push(0);r.reverse()}else{for(i=m.length,u=g.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(m[i]!=g[i]){p=m[i]<g[i];break}c=0}for(p&&(r=m,m=g,g=r,t.s=-t.s),u=m.length,i=g.length-u;i>0;--i)m[u++]=0;for(i=g.length;i>c;){if(m[--i]<g[i]){for(s=i;s&&m[--s]===0;)m[s]=yr-1;--m[s],m[i]+=yr}m[i]-=g[i]}for(;m[--u]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,Dt?_t(t,x):t):new _(0)}function Bo(e,t,r){var n,i=or(e),s=ha(e.d),c=s.length;return t?(r&&(n=r-c)>0?s=s.charAt(0)+"."+s.slice(1)+Ii(n):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ii(-i-1)+s,r&&(n=r-c)>0&&(s+=Ii(n))):i>=c?(s+=Ii(i+1-c),r&&(n=r-i-1)>0&&(s=s+"."+Ii(n))):((n=i+1)<c&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-c)>0&&(i+1===c&&(s+="."),s+=Ii(n))),e.s<0?"-"+s:s}function uC(e,t){if(e.length>t)return e.length=t,!0}function hT(e){var t,r,n;function i(s){var c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,s instanceof i){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(To+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return cC(c,s.toString())}else if(typeof s!="string")throw Error(To+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,w8.test(s))cC(c,s);else throw Error(To+s)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=hT,i.config=i.set=j8,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function j8(e){if(!e||typeof e!="object")throw Error(Un+"Object expected");var t,r,n,i=["precision",1,el,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(tl(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(To+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(To+r+": "+n);return this}var M0=hT(x8);hn=new M0(1);const dt=M0;var S8=e=>e,pT={},gT=e=>e===pT,dC=e=>function t(){return arguments.length===0||arguments.length===1&&gT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},vT=(e,t)=>e===1?t:dC(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.filter(c=>c!==pT).length;return s>=e?t(...n):vT(e-s,dC(function(){for(var c=arguments.length,u=new Array(c),m=0;m<c;m++)u[m]=arguments[m];var h=n.map(p=>gT(p)?u.shift():p);return t(...h,...u)}))}),E8=e=>vT(e.length,e),ub=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},O8=E8((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),C8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return S8;var i=r.reverse(),s=i[0],c=i.slice(1);return function(){return c.reduce((u,m)=>m(u),s(...arguments))}};function yT(e){var t;return e===0?t=1:t=Math.floor(new dt(e).abs().log(10).toNumber())+1,t}function bT(e,t,r){for(var n=new dt(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var _T=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},xT=(e,t,r)=>{if(e.lte(0))return new dt(0);var n=yT(e.toNumber()),i=new dt(10).pow(n),s=e.div(i),c=n!==1?.05:.1,u=new dt(Math.ceil(s.div(c).toNumber())).add(r).mul(c),m=u.mul(i);return t?new dt(m.toNumber()):new dt(Math.ceil(m.toNumber()))},A8=(e,t,r)=>{var n=new dt(1),i=new dt(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new dt(10).pow(yT(e)-1),i=new dt(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new dt(Math.floor(e)))}else e===0?i=new dt(Math.floor((t-1)/2)):r||(i=new dt(Math.floor(e)));var c=Math.floor((t-1)/2),u=C8(O8(m=>i.add(new dt(m-c).mul(n)).toNumber()),ub);return u(0,t)},wT=function(t,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var c=xT(new dt(r).sub(t).div(n-1),i,s),u;t<=0&&r>=0?u=new dt(0):(u=new dt(t).add(r).div(2),u=u.sub(new dt(u).mod(c)));var m=Math.ceil(u.sub(t).div(c).toNumber()),h=Math.ceil(new dt(r).sub(u).div(c).toNumber()),p=m+h+1;return p>n?wT(t,r,n,i,s+1):(p<n&&(h=r>0?h+(n-p):h,m=r>0?m:m+(n-p)),{step:c,tickMin:u.sub(new dt(m).mul(c)),tickMax:u.add(new dt(h).mul(c))})},N8=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,m]=_T([r,n]);if(u===-1/0||m===1/0){var h=m===1/0?[u,...ub(0,i-1).map(()=>1/0)]:[...ub(0,i-1).map(()=>-1/0),m];return r>n?h.reverse():h}if(u===m)return A8(u,i,s);var{step:p,tickMin:g,tickMax:_}=wT(u,m,c,s,0),x=bT(g,_.add(new dt(.1).mul(p)),p);return r>n?x.reverse():x},k8=function(t,r){var[n,i]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=_T([n,i]);if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var m=Math.max(r,2),h=xT(new dt(u).sub(c).div(m-1),s,0),p=[...bT(new dt(c),new dt(u),h),u];return s===!1&&(p=p.map(g=>Math.round(g))),n>i?p.reverse():p},jT=e=>e.rootProps.maxBarSize,D8=e=>e.rootProps.barGap,ST=e=>e.rootProps.barCategoryGap,T8=e=>e.rootProps.barSize,ru=e=>e.rootProps.stackOffset,ET=e=>e.rootProps.reverseStackOrder,R0=e=>e.options.chartName,q0=e=>e.rootProps.syncId,OT=e=>e.rootProps.syncMethod,z0=e=>e.options.eventEmitter,HZ=e=>e.rootProps.baseValue,ir={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},$a={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},mn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Vm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},P8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:$a.reversed,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:$a.type,unit:void 0},M8={allowDataOverflow:mn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mn.scale,tick:mn.tick,tickCount:mn.tickCount,ticks:void 0,type:mn.type,unit:void 0},R8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$a.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},q8={allowDataOverflow:mn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:mn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:mn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:mn.scale,tick:mn.tick,tickCount:mn.tickCount,ticks:void 0,type:"category",unit:void 0},L0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?R8:P8,I0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?q8:M8,Wm=e=>e.polarOptions,U0=J([ai,ii,dr],SD),CT=J([Wm,U0],(e,t)=>{if(e!=null)return Tr(e.innerRadius,t,0)}),AT=J([Wm,U0],(e,t)=>{if(e!=null)return Tr(e.outerRadius,t,t*.8)}),z8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},NT=J([Wm],z8);J([L0,NT],Vm);var kT=J([U0,CT,AT],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});J([I0,kT],Vm);var DT=J([et,Wm,CT,AT,ai,ii],(e,t,r,n,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:u,startAngle:m,endAngle:h}=t;return{cx:Tr(c,i,i/2),cy:Tr(u,s,s/2),innerRadius:r,outerRadius:n,startAngle:m,endAngle:h,clockWise:!1}}}),Rt=(e,t)=>t,nu=(e,t,r)=>r;function B0(e){return e?.id}function TT(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=r,c=new Map;return e.forEach(u=>{var m,h=(m=u.data)!==null&&m!==void 0?m:n;if(!(h==null||h.length===0)){var p=B0(u);h.forEach((g,_)=>{var x=s==null||i?_:String(vt(g,s,null)),w=vt(g,u.dataKey,0),j;c.has(x)?j=c.get(x):j={},Object.assign(j,{[p]:w}),c.set(x,j)})}}),Array.from(c.values())}function Xm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Zm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Qm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function L8(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var mr=e=>{var t=et(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},rl=e=>e.tooltip.settings.axisId;function fC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(r),!0).forEach(function(n){I8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I8(e,t,r){return(t=U8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U8(e){var t=B8(e,"string");return typeof t=="symbol"?t:t+""}function B8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var db=[0,"auto"],gr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},PT=(e,t)=>e.cartesianAxis.xAxis[t],li=(e,t)=>{var r=PT(e,t);return r??gr},vr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:db,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Vc},MT=(e,t)=>e.cartesianAxis.yAxis[t],ci=(e,t)=>{var r=MT(e,t);return r??vr},$8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},$0=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??$8},Lt=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);case"zAxis":return $0(e,r);case"angleAxis":return L0(e,r);case"radiusAxis":return I0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},H8=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},au=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);case"angleAxis":return L0(e,r);case"radiusAxis":return I0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},RT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function H0(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Jm=e=>e.graphicalItems.cartesianItems,F8=J([Rt,nu],H0),F0=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),iu=J([Jm,Lt,F8],F0,{memoizeOptions:{resultEqualityCheck:Qm}}),qT=J([iu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Xm)),zT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),K8=J([iu],zT),K0=e=>e.map(t=>t.data).filter(Boolean).flat(1),Y8=J([iu],K0,{memoizeOptions:{resultEqualityCheck:Qm}}),Y0=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},G0=J([Y8,T0],Y0),V0=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:vt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:vt(i,n)}))):e.map(n=>({value:n})),eh=J([G0,Lt,iu],V0);function LT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function uf(e){if(va(e)||e instanceof Date){var t=Number(e);if(zt(t))return t}}function mC(e){if(Array.isArray(e)){var t=[uf(e[0]),uf(e[1])];return Yi(t)?t:void 0}var r=uf(e);if(r!=null)return[r,r]}function ei(e){return e.map(uf).filter(l5)}function G8(e,t,r){return!r||typeof t!="number"||ta(t)?[]:r.length?ei(r.flatMap(n=>{var i=vt(e,n.dataKey),s,c;if(Array.isArray(i)?[s,c]=i:s=c=i,!(!zt(s)||!zt(c)))return[t-s,t+c]})):[]}var hr=e=>{var t=mr(e),r=rl(e);return au(e,t,r)},ou=J([hr],e=>e?.dataKey),V8=J([qT,T0,hr],TT),IT=(e,t,r,n)=>{var i={},s=t.reduce((c,u)=>{if(u.stackId==null)return c;var m=c[u.stackId];return m==null&&(m=[]),m.push(u),c[u.stackId]=m,c},i);return Object.fromEntries(Object.entries(s).map(c=>{var[u,m]=c,h=n?[...m].reverse():m,p=h.map(B0);return[u,{stackedData:CI(e,p,r),graphicalItems:h}]}))},fb=J([V8,qT,ru,ET],IT),UT=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var c=TI(e,i,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},W8=J([Lt],e=>e.allowDataOverflow),W0=e=>{var t;if(e==null||!("domain"in e))return db;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=ei(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:db},X0=J([Lt],W0),Z0=J([X0,W8],cT),X8=J([fb,si,Rt,Z0],UT,{memoizeOptions:{resultEqualityCheck:Zm}}),th=e=>e.errorBars,Z8=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>LT(r,n)),Jf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),c=Math.min(...s),u=Math.max(...s);return[c,u]}},Q0=(e,t,r,n,i)=>{var s,c;if(r.length>0&&e.forEach(u=>{r.forEach(m=>{var h,p,g=(h=n[m.id])===null||h===void 0?void 0:h.filter(O=>LT(i,O)),_=vt(u,(p=t.dataKey)!==null&&p!==void 0?p:m.dataKey),x=G8(u,_,g);if(x.length>=2){var w=Math.min(...x),j=Math.max(...x);(s==null||w<s)&&(s=w),(c==null||j>c)&&(c=j)}var S=mC(_);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),c=c==null?S[1]:Math.max(c,S[1]))})}),t?.dataKey!=null&&e.forEach(u=>{var m=mC(vt(u,t.dataKey));m!=null&&(s=s==null?m[0]:Math.min(s,m[0]),c=c==null?m[1]:Math.max(c,m[1]))}),zt(s)&&zt(c))return[s,c]},Q8=J([G0,Lt,K8,th,Rt],Q0,{memoizeOptions:{resultEqualityCheck:Zm}});function J8(e){var{value:t}=e;if(va(t)||t instanceof Date)return t}var eH=(e,t,r)=>{var n=e.map(J8).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&rk(n))?AD(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},BT=e=>e.referenceElements.dots,nl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),tH=J([BT,Rt,nu],nl),$T=e=>e.referenceElements.areas,rH=J([$T,Rt,nu],nl),HT=e=>e.referenceElements.lines,nH=J([HT,Rt,nu],nl),FT=(e,t)=>{if(e!=null){var r=ei(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},aH=J(tH,Rt,FT),KT=(e,t)=>{if(e!=null){var r=ei(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},iH=J([rH,Rt],KT);function oH(e){var t;if(e.x!=null)return ei([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ei(r)}function sH(e){var t;if(e.y!=null)return ei([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ei(r)}var YT=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?oH(n):sH(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},lH=J([nH,Rt],YT),cH=J(aH,lH,iH,(e,t,r)=>Jf(e,r,t)),J0=(e,t,r,n,i,s,c,u)=>{if(r!=null)return r;var m=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",h=m?Jf(n,s,i):Jf(s,i);return _8(t,h,e.allowDataOverflow)},uH=J([Lt,X0,Z0,X8,Q8,cH,et,Rt],J0,{memoizeOptions:{resultEqualityCheck:Zm}}),dH=[0,1],e_=(e,t,r,n,i,s,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:u,type:m}=e,h=Zi(t,s);if(h&&u==null){var p;return AD(0,(p=r?.length)!==null&&p!==void 0?p:0)}return m==="category"?eH(n,e,h):i==="expand"?dH:c}},t_=J([Lt,et,G0,eh,ru,Rt,uH],e_),GT=(e,t,r,n,i)=>{if(e!=null){var{scale:s,type:c}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Fc(s));return u in yc?u:"point"}}},al=J([Lt,et,RT,R0,Rt],GT);function fH(e){if(e!=null){if(e in yc)return yc[e]();var t="scale".concat(Fc(e));if(t in yc)return yc[t]()}}function r_(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=fH(t);if(i!=null){var s=i.domain(r).range(n);return wI(s),s}}}var n_=(e,t,r)=>{var n=W0(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Yi(e))return N8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Yi(e))return k8(e,t.tickCount,t.allowDecimals)}},a_=J([t_,au,al],n_),i_=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Yi(t)&&Array.isArray(r)&&r.length>0){var i=t[0],s=r[0],c=t[1],u=r[r.length-1];return[Math.min(i,s),Math.max(c,u)]}return t},mH=J([Lt,t_,a_,Rt],i_),hH=J(eh,Lt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ei(e.map(g=>g.value))).sort((g,_)=>g-_),i=n[0],s=n[n.length-1];if(i==null||s==null)return 1/0;var c=s-i;if(c===0)return 1/0;for(var u=0;u<n.length-1;u++){var m=n[u],h=n[u+1];if(!(m==null||h==null)){var p=h-m;r=Math.min(r,p)}}return r/c}}),VT=J(hH,et,ST,dr,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!zt(e))return 0;var s=t==="vertical"?n.height:n.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var c=Tr(r,e*s),u=e*s/2;return u-c-(u-c)/s*c}return 0}),pH=(e,t,r)=>{var n=li(e,t);return n==null||typeof n.padding!="string"?0:VT(e,"xAxis",t,r,n.padding)},gH=(e,t,r)=>{var n=ci(e,t);return n==null||typeof n.padding!="string"?0:VT(e,"yAxis",t,r,n.padding)},vH=J(li,pH,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),yH=J(ci,gH,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),bH=J([dr,vH,Mm,Pm,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),_H=J([dr,et,yH,Mm,Pm,(e,t,r)=>r],(e,t,r,n,i,s)=>{var{padding:c}=i;return s?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),su=(e,t,r,n)=>{var i;switch(t){case"xAxis":return bH(e,r,n);case"yAxis":return _H(e,r,n);case"zAxis":return(i=$0(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return NT(e);case"radiusAxis":return kT(e,r);default:return}},WT=J([Lt,su],Vm),rh=J([Lt,al,mH,WT],r_);J([iu,th,Rt],Z8);function XT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var nh=(e,t)=>t,ah=(e,t,r)=>r,xH=J(Dm,nh,ah,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(XT)),wH=J(Tm,nh,ah,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(XT)),ZT=(e,t)=>({width:e.width,height:t.height}),jH=(e,t)=>{var r=typeof t.width=="number"?t.width:Vc;return{width:r,height:e.height}},QT=J(dr,li,ZT),SH=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},EH=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},OH=J(ii,dr,xH,nh,ah,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=ZT(t,u);c==null&&(c=SH(t,n,e));var h=n==="top"&&!i||n==="bottom"&&i;s[u.id]=c-Number(h)*m.height,c+=(h?-1:1)*m.height}),s}),CH=J(ai,dr,wH,nh,ah,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=jH(t,u);c==null&&(c=EH(t,n,e));var h=n==="left"&&!i||n==="right"&&i;s[u.id]=c-Number(h)*m.width,c+=(h?-1:1)*m.width}),s}),AH=(e,t)=>{var r=li(e,t);if(r!=null)return OH(e,r.orientation,r.mirror)},NH=J([dr,li,AH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),kH=(e,t)=>{var r=ci(e,t);if(r!=null)return CH(e,r.orientation,r.mirror)},DH=J([dr,ci,kH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),JT=J(dr,ci,(e,t)=>{var r=typeof t.width=="number"?t.width:Vc;return{width:r,height:e.height}}),hC=(e,t,r)=>{switch(t){case"xAxis":return QT(e,r).width;case"yAxis":return JT(e,r).height;default:return}},eP=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:c}=r,u=Zi(e,n),m=t.map(h=>h.value);if(c&&u&&s==="category"&&i&&rk(m))return m}},o_=J([et,eh,Lt,Rt],eP),tP=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,c=Zi(e,n);if(c&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},s_=J([et,eh,au,Rt],tP),pC=J([et,H8,al,rh,o_,s_,su,a_,Rt],(e,t,r,n,i,s,c,u,m)=>{if(t!=null){var h=Zi(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:c,realScaleType:r,scale:n}}}),TH=(e,t,r,n,i,s,c,u,m)=>{if(!(t==null||n==null)){var h=Zi(e,m),{type:p,ticks:g,tickCount:_}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=p==="category"&&n.bandwidth?n.bandwidth()/x:0;w=m==="angleAxis"&&s!=null&&s.length>=2?br(s[0]-s[1])*2*w:w;var j=g||i;if(j){var S=j.map((O,C)=>{var A=c?c.indexOf(O):O;return{index:C,coordinate:n(A)+w,value:O,offset:w}});return S.filter(O=>zt(O.coordinate))}return h&&u?u.map((O,C)=>({coordinate:n(O)+w,value:O,index:C,offset:w})).filter(O=>zt(O.coordinate)):n.ticks?n.ticks(_).map(O=>({coordinate:n(O)+w,value:O,offset:w})):n.domain().map((O,C)=>({coordinate:n(O)+w,value:c?c[O]:O,index:C,offset:w}))}},rP=J([et,au,al,rh,a_,su,o_,s_,Rt],TH),PH=(e,t,r,n,i,s,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Zi(e,c),{tickCount:m}=t,h=0;return h=c==="angleAxis"&&n?.length>=2?br(n[0]-n[1])*2*h:h,u&&s?s.map((p,g)=>({coordinate:r(p)+h,value:p,index:g,offset:h})):r.ticks?r.ticks(m).map(p=>({coordinate:r(p)+h,value:p,offset:h})):r.domain().map((p,g)=>({coordinate:r(p)+h,value:i?i[p]:p,index:g,offset:h}))}},Gi=J([et,au,rh,su,o_,s_,Rt],PH),Vi=J(Lt,rh,(e,t)=>{if(!(e==null||t==null))return Qf(Qf({},e),{},{scale:t})}),MH=J([Lt,al,t_,WT],r_);J((e,t,r)=>$0(e,r),MH,(e,t)=>{if(!(e==null||t==null))return Qf(Qf({},e),{},{scale:t})});var RH=J([et,Dm,Tm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),nP=e=>e.options.defaultTooltipEventType,aP=e=>e.options.validateTooltipEventTypes;function iP(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function l_(e,t){var r=nP(e),n=aP(e);return iP(t,r,n)}function qH(e){return Te(t=>l_(t,e))}var oP=(e,t)=>{var r,n=Number(t);if(!(ta(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},zH=e=>e.tooltip.settings,Bi={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},LH={itemInteraction:{click:Bi,hover:Bi},axisInteraction:{click:Bi,hover:Bi},keyboardInteraction:Bi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},sP=Qr({name:"tooltip",initialState:LH,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Nt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ea(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Nt()},removeTooltipEntrySettings:{reducer(e,t){var r=ea(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Nt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:IH,replaceTooltipEntrySettings:UH,removeTooltipEntrySettings:BH,setTooltipSettingsState:$H,setActiveMouseOverItemIndex:lP,mouseLeaveItem:HH,mouseLeaveChart:cP,setActiveClickItemIndex:FH,setMouseOverAxisIndex:uP,setMouseClickAxisIndex:KH,setSyncInteraction:mb,setKeyboardInteraction:hb}=sP.actions,YH=sP.reducer;function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(n){GH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GH(e,t,r){return(t=VH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XH(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function ZH(e){return e.index!=null}var dP=(e,t,r,n)=>{if(t==null)return Bi;var i=XH(e,t,r);if(i==null)return Bi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(ZH(i)){if(s)return Gd(Gd({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Gd(Gd({},Bi),{},{coordinate:i.coordinate})};function QH(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function JH(e,t){var r=QH(e),n=t[0],i=t[1];if(r===void 0)return!1;var s=Math.min(n,i),c=Math.max(n,i);return r>=s&&r<=c}function e9(e,t,r){if(r==null||t==null)return!0;var n=vt(e,t);return n==null||!Yi(r)?!0:JH(n,r)}var c_=(e,t,r,n)=>{var i=e?.index;if(i==null)return null;var s=Number(i);if(!zt(s))return i;var c=0,u=1/0;t.length>0&&(u=t.length-1);var m=Math.max(c,Math.min(s,u)),h=t[m];return h==null||e9(h,r,n)?String(m):null},fP=(e,t,r,n,i,s,c,u)=>{if(!(s==null||u==null)){var m=c[0],h=m==null?void 0:u(m.positions,s);if(h!=null)return h;var p=i?.[Number(s)];if(p)switch(r){case"horizontal":return{x:p.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:p.coordinate}}}},mP=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},lu=e=>e.options.tooltipPayloadSearcher,il=e=>e.tooltip;function vC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(r),!0).forEach(function(n){t9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t9(e,t,r){return(t=r9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r9(e){var t=n9(e,"string");return typeof t=="symbol"?t:t+""}function n9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a9(e,t){return e??t}var hP=(e,t,r,n,i,s,c)=>{if(!(t==null||s==null)){var{chartData:u,computedData:m,dataStartIndex:h,dataEndIndex:p}=r,g=[];return e.reduce((_,x)=>{var w,{dataDefinedOnItem:j,settings:S}=x,O=a9(j,u),C=Array.isArray(O)?Wk(O,h,p):O,A=(w=S?.dataKey)!==null&&w!==void 0?w:n,k=S?.nameKey,D;if(n&&Array.isArray(C)&&!Array.isArray(C[0])&&c==="axis"?D=nk(C,n,i):D=s(C,t,m,k),Array.isArray(D))D.forEach(z=>{var W=yC(yC({},S),{},{name:z.name,unit:z.unit,color:void 0,fill:void 0});_.push(jE({tooltipEntrySettings:W,dataKey:z.dataKey,payload:z.payload,value:vt(z.payload,z.dataKey),name:z.name}))});else{var M;_.push(jE({tooltipEntrySettings:S,dataKey:A,payload:D,value:vt(D,A),name:(M=vt(D,k))!==null&&M!==void 0?M:S?.name}))}return _},g)}},u_=J([hr,et,RT,R0,mr],GT),i9=J([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),o9=J([mr,rl],H0),ol=J([i9,hr,o9],F0,{memoizeOptions:{resultEqualityCheck:Qm}}),s9=J([ol],e=>e.filter(Xm)),l9=J([ol],K0,{memoizeOptions:{resultEqualityCheck:Qm}}),sl=J([l9,si],Y0),c9=J([s9,si,hr],TT),d_=J([sl,hr,ol],V0),pP=J([hr],W0),u9=J([hr],e=>e.allowDataOverflow),gP=J([pP,u9],cT),d9=J([ol],e=>e.filter(Xm)),f9=J([c9,d9,ru,ET],IT),m9=J([f9,si,mr,gP],UT),h9=J([ol],zT),p9=J([sl,hr,h9,th,mr],Q0,{memoizeOptions:{resultEqualityCheck:Zm}}),g9=J([BT,mr,rl],nl),v9=J([g9,mr],FT),y9=J([$T,mr,rl],nl),b9=J([y9,mr],KT),_9=J([HT,mr,rl],nl),x9=J([_9,mr],YT),w9=J([v9,x9,b9],Jf),j9=J([hr,pP,gP,m9,p9,w9,et,mr],J0),cu=J([hr,et,sl,d_,ru,mr,j9],e_),S9=J([cu,hr,u_],n_),E9=J([hr,cu,S9,mr],i_),vP=e=>{var t=mr(e),r=rl(e),n=!1;return su(e,t,r,n)},yP=J([hr,vP],Vm),bP=J([hr,u_,E9,yP],r_),O9=J([et,d_,hr,mr],eP),C9=J([et,d_,hr,mr],tP),A9=(e,t,r,n,i,s,c,u)=>{if(t){var{type:m}=t,h=Zi(e,u);if(n){var p=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,g=m==="category"&&n.bandwidth?n.bandwidth()/p:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?br(i[0]-i[1])*2*g:g,h&&c?c.map((_,x)=>({coordinate:n(_)+g,value:_,index:x,offset:g})):n.domain().map((_,x)=>({coordinate:n(_)+g,value:s?s[_]:_,index:x,offset:g}))}}},ui=J([et,hr,u_,bP,vP,O9,C9,mr],A9),f_=J([nP,aP,zH],(e,t,r)=>iP(r.shared,e,t)),_P=e=>e.tooltip.settings.trigger,m_=e=>e.tooltip.settings.defaultIndex,uu=J([il,f_,_P,m_],dP),Wi=J([uu,sl,ou,cu],c_),xP=J([ui,Wi],oP),h_=J([uu],e=>{if(e)return e.dataKey}),N9=J([uu],e=>{if(e)return e.graphicalItemId}),wP=J([il,f_,_P,m_],mP),k9=J([ai,ii,et,dr,ui,m_,wP,lu],fP),D9=J([uu,k9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),T9=J([uu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),P9=J([wP,Wi,si,ou,xP,lu,f_],hP),M9=J([P9],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function bC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(r),!0).forEach(function(n){R9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R9(e,t,r){return(t=q9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q9(e){var t=z9(e,"string");return typeof t=="symbol"?t:t+""}function z9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L9=()=>Te(hr),I9=()=>{var e=L9(),t=Te(ui),r=Te(bP);return Fs(!e||!r?void 0:_C(_C({},e),{},{scale:r}),t)};function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){U9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function U9(e,t,r){return(t=B9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B9(e){var t=$9(e,"string");return typeof t=="symbol"?t:t+""}function $9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var H9=(e,t,r,n)=>{var i=t.find(s=>s&&s.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},F9=(e,t,r,n)=>{var i=t.find(h=>h&&h.index===r);if(i){if(e==="centric"){var s=i.coordinate,{radius:c}=n;return Rs(Rs(Rs({},n),ar(n.cx,n.cy,c,s)),{},{angle:s,radius:c})}var u=i.coordinate,{angle:m}=n;return Rs(Rs(Rs({},n),ar(n.cx,n.cy,u,m)),{},{angle:m,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function K9(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var jP=(e,t,r,n,i)=>{var s,c=(s=t?.length)!==null&&s!==void 0?s:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var m,h,p,g,_,x=u>0?(m=r[u-1])===null||m===void 0?void 0:m.coordinate:(h=r[c-1])===null||h===void 0?void 0:h.coordinate,w=(p=r[u])===null||p===void 0?void 0:p.coordinate,j=u>=c-1?(g=r[0])===null||g===void 0?void 0:g.coordinate:(_=r[u+1])===null||_===void 0?void 0:_.coordinate,S=void 0;if(!(x==null||w==null||j==null))if(br(w-x)!==br(j-w)){var O=[];if(br(j-w)===br(i[1]-i[0])){S=j;var C=w+i[1]-i[0];O[0]=Math.min(C,(C+x)/2),O[1]=Math.max(C,(C+x)/2)}else{S=x;var A=j+i[1]-i[0];O[0]=Math.min(w,(A+w)/2),O[1]=Math.max(w,(A+w)/2)}var k=[Math.min(w,(S+w)/2),Math.max(w,(S+w)/2)];if(e>k[0]&&e<=k[1]||e>=O[0]&&e<=O[1]){var D;return(D=r[u])===null||D===void 0?void 0:D.index}}else{var M=Math.min(x,j),z=Math.max(x,j);if(e>(M+w)/2&&e<=(z+w)/2){var W;return(W=r[u])===null||W===void 0?void 0:W.index}}}else if(t)for(var Y=0;Y<c;Y++){var re=t[Y];if(re!=null){var X=t[Y+1],I=t[Y-1];if(Y===0&&X!=null&&e<=(re.coordinate+X.coordinate)/2||Y===c-1&&I!=null&&e>(re.coordinate+I.coordinate)/2||Y>0&&Y<c-1&&I!=null&&X!=null&&e>(re.coordinate+I.coordinate)/2&&e<=(re.coordinate+X.coordinate)/2)return re.index}}return-1},Y9=()=>Te(R0),p_=(e,t)=>t,SP=(e,t,r)=>r,g_=(e,t,r,n)=>n,G9=J(ui,e=>xm(e,t=>t.coordinate)),v_=J([il,p_,SP,g_],dP),y_=J([v_,sl,ou,cu],c_),V9=(e,t,r)=>{if(t!=null){var n=il(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},EP=J([il,p_,SP,g_],mP),em=J([ai,ii,et,dr,ui,g_,EP,lu],fP),W9=J([v_,em],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),OP=J([ui,y_],oP),X9=J([EP,y_,si,ou,OP,lu,p_],hP),Z9=J([v_,y_],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Q9=(e,t,r,n,i,s,c)=>{if(!(!e||!r||!n||!i)&&K9(e,c)){var u=PI(e,t),m=jP(u,s,i,r,n),h=H9(t,i,m,e);return{activeIndex:String(m),activeCoordinate:h}}},J9=(e,t,r,n,i,s,c)=>{if(!(!e||!n||!i||!s||!r)){var u=RU(e,r);if(u){var m=MI(u,t),h=jP(m,c,s,n,i),p=F9(t,s,h,u);return{activeIndex:String(h),activeCoordinate:p}}}},e7=(e,t,r,n,i,s,c,u)=>{if(!(!e||!t||!n||!i||!s))return t==="horizontal"||t==="vertical"?Q9(e,t,n,i,s,c,u):J9(e,t,r,n,i,s,c)},t7=J(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),r7=J(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ir)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:L8}});function wC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wC(Object(r),!0).forEach(function(n){n7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n7(e,t,r){return(t=a7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a7(e){var t=i7(e,"string");return typeof t=="symbol"?t:t+""}function i7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var o7={},s7={zIndexMap:Object.values(ir).reduce((e,t)=>jC(jC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),o7)},l7=new Set(Object.values(ir));function c7(e){return l7.has(e)}var CP=Qr({name:"zIndex",initialState:s7,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Nt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!c7(r)&&delete e.zIndexMap[r])},prepare:Nt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Nt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Nt()}}}),{registerZIndexPortal:u7,unregisterZIndexPortal:d7,registerZIndexPortalElement:f7,unregisterZIndexPortalElement:m7}=CP.actions,h7=CP.reducer;function Jr(e){var{zIndex:t,children:r}=e,n=u6(),i=n&&t!==void 0&&t!==0,s=Pr(),c=Mt();y.useLayoutEffect(()=>i?(c(u7({zIndex:t})),()=>{c(d7({zIndex:t}))}):Kc,[c,t,i]);var u=Te(m=>t7(m,t,s));return i?u?jN.createPortal(r,u):null:r}function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pb.apply(null,arguments)}function SC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SC(Object(r),!0).forEach(function(n){p7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p7(e,t,r){return(t=g7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g7(e){var t=v7(e,"string");return typeof t=="symbol"?t:t+""}function v7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function y7(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function b7(e){var t,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:c,layout:u,cursor:m,tooltipEventType:h,chartName:p}=e,g=r,_=n,x=i;if(!m||!g||p!=="ScatterChart"&&h!=="axis")return null;var w,j,S;if(p==="ScatterChart")w=g,j=W6,S=ir.cursorLine;else if(p==="BarChart")w=X6(u,g,s,c),j=jD,S=ir.cursorRectangle;else if(u==="radial"&&ok(g)){var{cx:O,cy:C,radius:A,startAngle:k,endAngle:D}=ED(g);w={cx:O,cy:C,startAngle:k,endAngle:D,innerRadius:A,outerRadius:A},j=CD,S=ir.cursorLine}else w={points:IU(u,g,s)},j=l0,S=ir.cursorLine;var M=typeof m=="object"&&"className"in m?m.className:void 0,z=Vd(Vd(Vd(Vd({stroke:"#ccc",pointerEvents:"none"},s),w),Ro(m)),{},{payload:_,payloadIndex:x,className:st("recharts-tooltip-cursor",M)});return y.createElement(Jr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},y.createElement(y7,{cursor:m,cursorComp:j,cursorProps:z}))}function _7(e){var t=I9(),r=iD(),n=Yo(),i=Y9();return t==null||r==null||n==null||i==null?null:y.createElement(b7,pb({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var AP=y.createContext(null),x7=()=>y.useContext(AP),Zv={exports:{}},EC;function w7(){return EC||(EC=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(m,h,p){this.fn=m,this.context=h,this.once=p||!1}function s(m,h,p,g,_){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,g||m,_),w=r?r+h:h;return m._events[w]?m._events[w].fn?m._events[w]=[m._events[w],x]:m._events[w].push(x):(m._events[w]=x,m._eventsCount++),m}function c(m,h){--m._eventsCount===0?m._events=new n:delete m._events[h]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)t.call(p,g)&&h.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=r?r+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var _=0,x=g.length,w=new Array(x);_<x;_++)w[_]=g[_].fn;return w},u.prototype.listenerCount=function(h){var p=r?r+h:h,g=this._events[p];return g?g.fn?1:g.length:0},u.prototype.emit=function(h,p,g,_,x,w){var j=r?r+h:h;if(!this._events[j])return!1;var S=this._events[j],O=arguments.length,C,A;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),O){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,_),!0;case 5:return S.fn.call(S.context,p,g,_,x),!0;case 6:return S.fn.call(S.context,p,g,_,x,w),!0}for(A=1,C=new Array(O-1);A<O;A++)C[A-1]=arguments[A];S.fn.apply(S.context,C)}else{var k=S.length,D;for(A=0;A<k;A++)switch(S[A].once&&this.removeListener(h,S[A].fn,void 0,!0),O){case 1:S[A].fn.call(S[A].context);break;case 2:S[A].fn.call(S[A].context,p);break;case 3:S[A].fn.call(S[A].context,p,g);break;case 4:S[A].fn.call(S[A].context,p,g,_);break;default:if(!C)for(D=1,C=new Array(O-1);D<O;D++)C[D-1]=arguments[D];S[A].fn.apply(S[A].context,C)}}return!0},u.prototype.on=function(h,p,g){return s(this,h,p,g,!1)},u.prototype.once=function(h,p,g){return s(this,h,p,g,!0)},u.prototype.removeListener=function(h,p,g,_){var x=r?r+h:h;if(!this._events[x])return this;if(!p)return c(this,x),this;var w=this._events[x];if(w.fn)w.fn===p&&(!_||w.once)&&(!g||w.context===g)&&c(this,x);else{for(var j=0,S=[],O=w.length;j<O;j++)(w[j].fn!==p||_&&!w[j].once||g&&w[j].context!==g)&&S.push(w[j]);S.length?this._events[x]=S.length===1?S[0]:S:c(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&c(this,p)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Zv)),Zv.exports}var j7=w7();const S7=ri(j7);var qc=new S7,gb="recharts.syncEvent.tooltip",OC="recharts.syncEvent.brush";function b_(e,t){if(t){var r=Number.parseInt(t,10);if(!ta(r))return e?.[r]}}var E7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},NP=Qr({name:"options",initialState:E7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),O7=NP.reducer,{createEventEmitter:C7}=NP.actions;function A7(e){return e.tooltip.syncInteraction}var N7={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},kP=Qr({name:"chartData",initialState:N7,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:CC,setDataStartEndIndexes:k7,setComputedData:FZ}=kP.actions,D7=kP.reducer,T7=["x","y"];function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(r),!0).forEach(function(n){P7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P7(e,t,r){return(t=M7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M7(e){var t=R7(e,"string");return typeof t=="symbol"?t:t+""}function R7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function q7(e,t){if(e==null)return{};var r,n,i=z7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function z7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function L7(){var e=Te(q0),t=Te(z0),r=Mt(),n=Te(OT),i=Te(ui),s=Yo(),c=Rm(),u=Te(m=>m.rootProps.className);y.useEffect(()=>{if(e==null)return Kc;var m=(h,p,g)=>{if(t!==g&&e===h){if(n==="index"){var _;if(c&&p!==null&&p!==void 0&&(_=p.payload)!==null&&_!==void 0&&_.coordinate&&p.payload.sourceViewBox){var x=p.payload.coordinate,{x:w,y:j}=x,S=q7(x,T7),{x:O,y:C,width:A,height:k}=p.payload.sourceViewBox,D=qs(qs({},S),{},{x:c.x+(A?(w-O)/A:0)*c.width,y:c.y+(k?(j-C)/k:0)*c.height});r(qs(qs({},p),{},{payload:qs(qs({},p.payload),{},{coordinate:D})}))}else r(p);return}if(i!=null){var M;if(typeof n=="function"){var z={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},W=n(i,z);M=i[W]}else n==="value"&&(M=i.find(R=>String(R.value)===p.payload.label));var{coordinate:Y}=p.payload;if(M==null||p.payload.active===!1||Y==null||c==null){r(mb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:re,y:X}=Y,I=Math.min(re,c.x+c.width),se=Math.min(X,c.y+c.height),pe={x:s==="horizontal"?M.coordinate:I,y:s==="horizontal"?se:M.coordinate},q=mb({active:p.payload.active,coordinate:pe,dataKey:p.payload.dataKey,index:String(M.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});r(q)}}};return qc.on(gb,m),()=>{qc.off(gb,m)}},[u,r,t,e,n,i,s,c])}function I7(){var e=Te(q0),t=Te(z0),r=Mt();y.useEffect(()=>{if(e==null)return Kc;var n=(i,s,c)=>{t!==c&&e===i&&r(k7(s))};return qc.on(OC,n),()=>{qc.off(OC,n)}},[r,t,e])}function U7(){var e=Mt();y.useEffect(()=>{e(C7())},[e]),L7(),I7()}function B7(e,t,r,n,i,s){var c=Te(x=>V9(x,e,t)),u=Te(z0),m=Te(q0),h=Te(OT),p=Te(A7),g=p?.active,_=Rm();y.useEffect(()=>{if(!g&&m!=null&&u!=null){var x=mb({active:s,coordinate:r,dataKey:c,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:_,graphicalItemId:void 0});qc.emit(gb,m,x,u)}},[g,r,c,i,n,u,m,h,s,_])}function NC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(r),!0).forEach(function(n){$7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $7(e,t,r){return(t=H7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H7(e){var t=F7(e,"string");return typeof t=="symbol"?t:t+""}function F7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K7(e){return e.dataKey}function Y7(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(A6,t)}var DC=[],G7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Qv(e){var t,r,n=xr(e,G7),{active:i,allowEscapeViewBox:s,animationDuration:c,animationEasing:u,content:m,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:_,position:x,reverseDirection:w,useTranslate3d:j,wrapperStyle:S,cursor:O,shared:C,trigger:A,defaultIndex:k,portal:D,axisId:M}=n,z=Mt(),W=typeof k=="number"?String(k):k;y.useEffect(()=>{z($H({shared:C,trigger:A,axisId:M,active:i,defaultIndex:W}))},[z,C,A,M,i,W]);var Y=Rm(),re=yD(),X=qH(C),{activeIndex:I,isActive:se}=(t=Te(G=>Z9(G,X,A,W)))!==null&&t!==void 0?t:{},pe=Te(G=>X9(G,X,A,W)),q=Te(G=>OP(G,X,A,W)),R=Te(G=>W9(G,X,A,W)),U=pe,te=x7(),ne=(r=i??se)!==null&&r!==void 0?r:!1,[we,Pe]=v4([U,ne]),F=X==="axis"?q:void 0;B7(X,A,R,F,I,ne);var $=D??te;if($==null||Y==null||X==null)return null;var Se=U??DC;ne||(Se=DC),h&&Se.length&&(Se=H5(Se.filter(G=>G.value!=null&&(G.hide!==!0||n.includeHidden)),_,K7));var De=Se.length>0,Ie=y.createElement(R6,{allowEscapeViewBox:s,animationDuration:c,animationEasing:u,isAnimationActive:p,active:ne,coordinate:R,hasPayload:De,offset:g,position:x,reverseDirection:w,useTranslate3d:j,viewBox:Y,wrapperStyle:S,lastBoundingBox:we,innerRef:Pe,hasPortalFromProps:!!D},Y7(m,kC(kC({},n),{},{payload:Se,label:F,active:ne,activeIndex:I,coordinate:R,accessibilityLayer:re})));return y.createElement(y.Fragment,null,jN.createPortal(Ie,$),ne&&y.createElement(_7,{cursor:O,tooltipEventType:X,coordinate:R,payload:Se,index:I}))}var du=e=>null;du.displayName="Cell";function V7(e,t,r){return(t=W7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W7(e){var t=X7(e,"string");return typeof t=="symbol"?t:t+""}function X7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Z7{constructor(t){V7(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function TC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Q7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(r),!0).forEach(function(n){J7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function J7(e,t,r){return(t=eF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eF(e){var t=tF(e,"string");return typeof t=="symbol"?t:t+""}function tF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rF={cacheSize:2e3,enableCache:!0},DP=Q7({},rF),PC=new Z7(DP.cacheSize),nF={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MC="recharts_measurement_span";function aF(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",c=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(c,"|").concat(u)}var RC=(e,t)=>{try{var r=document.getElementById(MC);r||(r=document.createElement("span"),r.setAttribute("id",MC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,nF,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},xc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Um.isSsr)return{width:0,height:0};if(!DP.enableCache)return RC(t,r);var n=aF(t,r),i=PC.get(n);if(i)return i;var s=RC(t,r);return PC.set(n,s),s},TP;function iF(e,t,r){return(t=oF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oF(e){var t=sF(e,"string");return typeof t=="symbol"?t:t+""}function sF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,zC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cF=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,uF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},dF=["cm","mm","pt","pc","in","Q","px"];function fF(e){return dF.includes(e)}var Is="NaN";function mF(e,t){return e*uF[t]}class Nr{static parse(t){var r,[,n,i]=(r=cF.exec(t))!==null&&r!==void 0?r:[];return n==null?Nr.NaN:new Nr(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ta(t)&&(this.unit=""),r!==""&&!lF.test(r)&&(this.num=NaN,this.unit=""),fF(r)&&(this.num=mF(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ta(this.num)}}TP=Nr;iF(Nr,"NaN",new TP(NaN,""));function PP(e){if(e==null||e.includes(Is))return Is;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,s]=(r=qC.exec(t))!==null&&r!==void 0?r:[],c=Nr.parse(n??""),u=Nr.parse(s??""),m=i==="*"?c.multiply(u):c.divide(u);if(m.isNaN())return Is;t=t.replace(qC,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,g,_]=(h=zC.exec(t))!==null&&h!==void 0?h:[],x=Nr.parse(p??""),w=Nr.parse(_??""),j=g==="+"?x.add(w):x.subtract(w);if(j.isNaN())return Is;t=t.replace(zC,j.toString())}return t}var LC=/\(([^()]*)\)/;function hF(e){for(var t=e,r;(r=LC.exec(t))!=null;){var[,n]=r;t=t.replace(LC,PP(n))}return t}function pF(e){var t=e.replace(/\s+/g,"");return t=hF(t),t=PP(t),t}function gF(e){try{return pF(e)}catch{return Is}}function Jv(e){var t=gF(e.slice(5,-1));return t===Is?"":t}var vF=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],yF=["dx","dy","angle","className","breakAll"];function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vb.apply(null,arguments)}function IC(e,t){if(e==null)return{};var r,n,i=bF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MP=/[ \f\n\r\t\v\u2028\u2029]+/,RP=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];Pt(t)||(r?i=t.toString().split(""):i=t.toString().split(MP));var s=i.map(u=>({word:u,width:xc(u,n).width})),c=r?0:xc("",n).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function _F(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var qP=(e,t,r,n)=>e.reduce((i,s)=>{var{word:c,width:u}=s,m=i[i.length-1];if(m&&u!=null&&(t==null||n||m.width+u+r<Number(t)))m.words.push(c),m.width+=u+r;else{var h={words:[c],width:u};i.push(h)}return i},[]),zP=e=>e.reduce((t,r)=>t.width>r.width?t:r),xF="",UC=(e,t,r,n,i,s,c,u)=>{var m=e.slice(0,t),h=RP({breakAll:r,style:n,children:m+xF});if(!h)return[!1,[]];var p=qP(h.wordsWithComputedWidth,s,c,u),g=p.length>i||zP(p).width>Number(s);return[g,p]},wF=(e,t,r,n,i)=>{var{maxLines:s,children:c,style:u,breakAll:m}=e,h=ke(s),p=String(c),g=qP(t,n,r,i);if(!h||i)return g;var _=g.length>s||zP(g).width>Number(n);if(!_)return g;for(var x=0,w=p.length-1,j=0,S;x<=w&&j<=p.length-1;){var O=Math.floor((x+w)/2),C=O-1,[A,k]=UC(p,C,m,u,s,n,r,i),[D]=UC(p,O,m,u,s,n,r,i);if(!A&&!D&&(x=O+1),A&&D&&(w=O-1),!A&&D){S=k;break}j++}return S||g},BC=e=>{var t=Pt(e)?[]:e.toString().split(MP);return[{words:t,width:void 0}]},jF=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:c}=e;if((t||r)&&!Um.isSsr){var u,m,h=RP({breakAll:s,children:n,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;u=p,m=g}else return BC(n);return wF({breakAll:s,children:n,maxLines:c,style:i},u,m,t,!!r)}return BC(n)},LP="#808080",SF={angle:0,breakAll:!1,capHeight:"0.71em",fill:LP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ih=y.forwardRef((e,t)=>{var r=xr(e,SF),{x:n,y:i,lineHeight:s,capHeight:c,fill:u,scaleToFit:m,textAnchor:h,verticalAnchor:p}=r,g=IC(r,vF),_=y.useMemo(()=>jF({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:m,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,m,g.style,g.width]),{dx:x,dy:w,angle:j,className:S,breakAll:O}=g,C=IC(g,yF);if(!va(n)||!va(i)||_.length===0)return null;var A=Number(n)+(ke(x)?x:0),k=Number(i)+(ke(w)?w:0);if(!zt(A)||!zt(k))return null;var D;switch(p){case"start":D=Jv("calc(".concat(c,")"));break;case"middle":D=Jv("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:D=Jv("calc(".concat(_.length-1," * -").concat(s,")"));break}var M=[];if(m){var z=_[0].width,{width:W}=g;M.push("scale(".concat(ke(W)&&ke(z)?W/z:1,")"))}return j&&M.push("rotate(".concat(j,", ").concat(A,", ").concat(k,")")),M.length&&(C.transform=M.join(" ")),y.createElement("text",vb({},Ir(C),{ref:t,x:A,y:k,className:st("recharts-text",S),textAnchor:h,fill:u.includes("url")?LP:u}),_.map((Y,re)=>{var X=Y.words.join(O?"":" ");return y.createElement("tspan",{x:A,dy:re===0?D:s,key:"".concat(X,"-").concat(re)},X)}))});ih.displayName="Text";var EF=["labelRef"],OF=["content"];function $C(e,t){if(e==null)return{};var r,n,i=CF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function CF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(n){AF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AF(e,t,r){return(t=NF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NF(e){var t=kF(e,"string");return typeof t=="symbol"?t:t+""}function kF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ha(){return Ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ha.apply(null,arguments)}var IP=y.createContext(null),DF=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c,children:u}=e,m=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c}),[t,r,n,i,s,c]);return y.createElement(IP.Provider,{value:m},u)},UP=()=>{var e=y.useContext(IP),t=Rm();return e||aD(t)},TF=y.createContext(null),PF=()=>{var e=y.useContext(TF),t=Te(DT);return e||t},MF=e=>{var{value:t,formatter:r}=e,n=Pt(e.children)?t:e.children;return typeof r=="function"?r(n):n},__=e=>e!=null&&typeof e=="function",RF=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),360);return r*n},qF=(e,t,r,n,i)=>{var{offset:s,className:c}=e,{cx:u,cy:m,innerRadius:h,outerRadius:p,startAngle:g,endAngle:_,clockWise:x}=i,w=(h+p)/2,j=RF(g,_),S=j>=0?1:-1,O,C;switch(t){case"insideStart":O=g+S*s,C=x;break;case"insideEnd":O=_-S*s,C=!x;break;case"end":O=_+S*s,C=x;break;default:throw new Error("Unsupported position ".concat(t))}C=j<=0?C:!C;var A=ar(u,m,w,O),k=ar(u,m,w,O+(C?1:-1)*359),D="M".concat(A.x,",").concat(A.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),M=Pt(e.id)?jc("recharts-radial-line-"):e.id;return y.createElement("text",Ha({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",c)}),y.createElement("defs",null,y.createElement("path",{id:M,d:D})),y.createElement("textPath",{xlinkHref:"#".concat(M)},r))},zF=(e,t,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:c,startAngle:u,endAngle:m}=e,h=(u+m)/2;if(r==="outside"){var{x:p,y:g}=ar(n,i,c+t,h);return{x:p,y:g,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var _=(s+c)/2,{x,y:w}=ar(n,i,_,h);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},yb=e=>"cx"in e&&ke(e.cx),LF=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,s;r!=null&&!yb(r)&&(s=r);var{x:c,y:u,upperWidth:m,lowerWidth:h,height:p}=t,g=c,_=c+(m-h)/2,x=(g+_)/2,w=(m+h)/2,j=g+m/2,S=p>=0?1:-1,O=S*n,C=S>0?"end":"start",A=S>0?"start":"end",k=m>=0?1:-1,D=k*n,M=k>0?"end":"start",z=k>0?"start":"end";if(i==="top"){var W={x:g+m/2,y:u-O,textAnchor:"middle",verticalAnchor:C};return Xt(Xt({},W),s?{height:Math.max(u-s.y,0),width:m}:{})}if(i==="bottom"){var Y={x:_+h/2,y:u+p+O,textAnchor:"middle",verticalAnchor:A};return Xt(Xt({},Y),s?{height:Math.max(s.y+s.height-(u+p),0),width:h}:{})}if(i==="left"){var re={x:x-D,y:u+p/2,textAnchor:M,verticalAnchor:"middle"};return Xt(Xt({},re),s?{width:Math.max(re.x-s.x,0),height:p}:{})}if(i==="right"){var X={x:x+w+D,y:u+p/2,textAnchor:z,verticalAnchor:"middle"};return Xt(Xt({},X),s?{width:Math.max(s.x+s.width-X.x,0),height:p}:{})}var I=s?{width:w,height:p}:{};return i==="insideLeft"?Xt({x:x+D,y:u+p/2,textAnchor:z,verticalAnchor:"middle"},I):i==="insideRight"?Xt({x:x+w-D,y:u+p/2,textAnchor:M,verticalAnchor:"middle"},I):i==="insideTop"?Xt({x:g+m/2,y:u+O,textAnchor:"middle",verticalAnchor:A},I):i==="insideBottom"?Xt({x:_+h/2,y:u+p-O,textAnchor:"middle",verticalAnchor:C},I):i==="insideTopLeft"?Xt({x:g+D,y:u+O,textAnchor:z,verticalAnchor:A},I):i==="insideTopRight"?Xt({x:g+m-D,y:u+O,textAnchor:M,verticalAnchor:A},I):i==="insideBottomLeft"?Xt({x:_+D,y:u+p-O,textAnchor:z,verticalAnchor:C},I):i==="insideBottomRight"?Xt({x:_+h-D,y:u+p-O,textAnchor:M,verticalAnchor:C},I):i&&typeof i=="object"&&(ke(i.x)||Wa(i.x))&&(ke(i.y)||Wa(i.y))?Xt({x:c+Tr(i.x,w),y:u+Tr(i.y,p),textAnchor:"end",verticalAnchor:"end"},I):Xt({x:j,y:u+p/2,textAnchor:"middle",verticalAnchor:"middle"},I)},IF={angle:0,offset:5,zIndex:ir.label,position:"middle",textBreakAll:!1};function Ui(e){var t=xr(e,IF),{viewBox:r,position:n,value:i,children:s,content:c,className:u="",textBreakAll:m,labelRef:h}=t,p=PF(),g=UP(),_=n==="center"?g:p??g,x,w,j;if(r==null?x=_:yb(r)?x=r:x=aD(r),!x||Pt(i)&&Pt(s)&&!y.isValidElement(c)&&typeof c!="function")return null;var S=Xt(Xt({},t),{},{viewBox:x});if(y.isValidElement(c)){var{labelRef:O}=S,C=$C(S,EF);return y.cloneElement(c,C)}if(typeof c=="function"){var{content:A}=S,k=$C(S,OF);if(w=y.createElement(c,k),y.isValidElement(w))return w}else w=MF(t);var D=Ir(t);if(yb(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return qF(t,n,w,D,x);j=zF(x,t.offset,t.position)}else j=LF(t,x);return y.createElement(Jr,{zIndex:t.zIndex},y.createElement(ih,Ha({ref:h,className:st("recharts-label",u)},D,j,{textAnchor:_F(D.textAnchor)?D.textAnchor:j.textAnchor,breakAll:m}),w))}Ui.displayName="Label";var UF=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(Ui,Ha({key:"label-implicit"},n)):va(e)?y.createElement(Ui,Ha({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===Ui?y.cloneElement(e,Xt({key:"label-implicit"},n)):y.createElement(Ui,Ha({key:"label-implicit",content:e},n)):__(e)?y.createElement(Ui,Ha({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(Ui,Ha({},e,{key:"label-implicit"},n)):null};function BF(e){var{label:t,labelRef:r}=e,n=UP();return UF(t,n,r)||null}var ey={},ty={},FC;function $F(){return FC||(FC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(ty)),ty}var ry={},KC;function HF(){return KC||(KC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(ry)),ry}var YC;function FF(){return YC||(YC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$F(),r=HF(),n=Xb();function i(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=i})(ey)),ey}var ny,GC;function KF(){return GC||(GC=1,ny=FF().last),ny}var YF=KF();const GF=ri(YF);var VF=["valueAccessor"],WF=["dataKey","clockWise","id","textBreakAll","zIndex"];function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tm.apply(null,arguments)}function VC(e,t){if(e==null)return{};var r,n,i=XF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function XF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZF=e=>Array.isArray(e.value)?GF(e.value):e.value,BP=y.createContext(void 0),$P=BP.Provider,HP=y.createContext(void 0),QF=HP.Provider;function JF(){return y.useContext(BP)}function eK(){return y.useContext(HP)}function df(e){var{valueAccessor:t=ZF}=e,r=VC(e,VF),{dataKey:n,clockWise:i,id:s,textBreakAll:c,zIndex:u}=r,m=VC(r,WF),h=JF(),p=eK(),g=h||p;return!g||!g.length?null:y.createElement(Jr,{zIndex:u??ir.label},y.createElement(_r,{className:"recharts-label-list"},g.map((_,x)=>{var w,j=Pt(n)?t(_,x):vt(_&&_.payload,n),S=Pt(s)?{}:{id:"".concat(s,"-").concat(x)};return y.createElement(Ui,tm({key:"label-".concat(x)},Ir(_),m,S,{fill:(w=r.fill)!==null&&w!==void 0?w:_.fill,parentViewBox:_.parentViewBox,value:j,textBreakAll:c,viewBox:_.viewBox,index:x,zIndex:0}))})))}df.displayName="LabelList";function x_(e){var{label:t}=e;return t?t===!0?y.createElement(df,{key:"labelList-implicit"}):y.isValidElement(t)||__(t)?y.createElement(df,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(df,tm({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bb.apply(null,arguments)}var FP=e=>{var{cx:t,cy:r,r:n,className:i}=e,s=st("recharts-dot",i);return ke(t)&&ke(r)&&ke(n)?y.createElement("circle",bb({},vn(e),Wb(e),{className:s,cx:t,cy:r,r:n})):null},KP=e=>e.graphicalItems.polarItems,tK=J([Rt,nu],H0),oh=J([KP,Lt,tK],F0),rK=J([oh],K0),sh=J([rK,Gm],Y0),nK=J([sh,Lt,oh],V0);J([sh,Lt,oh],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var s,c=vt(n,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:vt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var WC=()=>{},aK=J([sh,Lt,oh,th,Rt],Q0),iK=J([Lt,X0,Z0,WC,aK,WC,et,Rt],J0),YP=J([Lt,et,sh,nK,ru,Rt,iK],e_),oK=J([YP,Lt,al],n_);J([Lt,YP,oK,Rt],i_);var sK={radiusAxis:{},angleAxis:{}},GP=Qr({name:"polarAxis",initialState:sK,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:KZ,removeRadiusAxis:YZ,addAngleAxis:GZ,removeAngleAxis:VZ}=GP.actions,lK=GP.reducer;function XC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ZC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XC(Object(r),!0).forEach(function(n){cK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cK(e,t,r){return(t=uK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uK(e){var t=dK(e,"string");return typeof t=="symbol"?t:t+""}function dK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fK=(e,t)=>t,w_=J([KP,fK],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),mK=[],j_=(e,t,r)=>r?.length===0?mK:r,VP=J([Gm,w_,j_],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(s=>ZC(ZC({},t.presentationProps),s.props))),i!=null)return i}}),hK=J([VP,w_,j_],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var s,c=vt(n,t.nameKey,t.name),u;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?u=n.fill:u=t.fill,{value:Qs(c,t.dataKey),color:u,payload:n,type:t.legendType}})}),pK=J([VP,w_,j_,dr],(e,t,r,n)=>{if(!(t==null||e==null))return vY({offset:n,pieSettings:t,displayedData:e,cells:r})}),ay={exports:{}},gt={};var QC;function gK(){if(QC)return gt;QC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case r:case i:case n:case m:case h:case _:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case g:case p:return j;case s:return j;default:return S}}case t:return S}}}return gt.ContextConsumer=s,gt.ContextProvider=c,gt.Element=e,gt.ForwardRef=u,gt.Fragment=r,gt.Lazy=g,gt.Memo=p,gt.Portal=t,gt.Profiler=i,gt.StrictMode=n,gt.Suspense=m,gt.SuspenseList=h,gt.isContextConsumer=function(j){return w(j)===s},gt.isContextProvider=function(j){return w(j)===c},gt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},gt.isForwardRef=function(j){return w(j)===u},gt.isFragment=function(j){return w(j)===r},gt.isLazy=function(j){return w(j)===g},gt.isMemo=function(j){return w(j)===p},gt.isPortal=function(j){return w(j)===t},gt.isProfiler=function(j){return w(j)===i},gt.isStrictMode=function(j){return w(j)===n},gt.isSuspense=function(j){return w(j)===m},gt.isSuspenseList=function(j){return w(j)===h},gt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===i||j===n||j===m||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===p||j.$$typeof===c||j.$$typeof===s||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},gt.typeOf=w,gt}var JC;function vK(){return JC||(JC=1,ay.exports=gK()),ay.exports}var yK=vK(),eA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",tA=null,iy=null,WP=e=>{if(e===tA&&Array.isArray(iy))return iy;var t=[];return y.Children.forEach(e,r=>{Pt(r)||(yK.isFragment(r)?t=t.concat(WP(r.props.children)):t.push(r))}),iy=t,tA=e,t};function S_(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>eA(i)):n=[eA(t)],WP(e).forEach(i=>{var s=zo(i,"type.displayName")||zo(i,"type.name");s&&n.indexOf(s)!==-1&&r.push(i)}),r}var XP=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,oy={},rA;function bK(){return rA||(rA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(oy)),oy}var sy,nA;function _K(){return nA||(nA=1,sy=bK().isPlainObject),sy}var xK=_K();const wK=ri(xK);var aA,iA,oA,sA,lA;function cA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(r),!0).forEach(function(n){jK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jK(e,t,r){return(t=SK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SK(e){var t=EK(e,"string");return typeof t=="symbol"?t:t+""}function EK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rm(){return rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rm.apply(null,arguments)}function hc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var dA=(e,t,r,n,i)=>{var s=r-n,c;return c=Ft(aA||(aA=hc(["M ",",",""])),e,t),c+=Ft(iA||(iA=hc(["L ",",",""])),e+r,t),c+=Ft(oA||(oA=hc(["L ",",",""])),e+r-s/2,t+i),c+=Ft(sA||(sA=hc(["L ",",",""])),e+r-s/2-n,t+i),c+=Ft(lA||(lA=hc(["L ",","," Z"])),e,t),c},OK={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CK=e=>{var t=xr(e,OK),{x:r,y:n,upperWidth:i,lowerWidth:s,height:c,className:u}=t,{animationEasing:m,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t,_=y.useRef(null),[x,w]=y.useState(-1),j=y.useRef(i),S=y.useRef(s),O=y.useRef(c),C=y.useRef(r),A=y.useRef(n),k=Zc(e,"trapezoid-");if(y.useEffect(()=>{if(_.current&&_.current.getTotalLength)try{var pe=_.current.getTotalLength();pe&&w(pe)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||c!==+c||i===0&&s===0||c===0)return null;var D=st("recharts-trapezoid",u);if(!g)return y.createElement("g",null,y.createElement("path",rm({},Ir(t),{className:D,d:dA(r,n,i,s,c)})));var M=j.current,z=S.current,W=O.current,Y=C.current,re=A.current,X="0px ".concat(x===-1?1:x,"px"),I="".concat(x,"px 0px"),se=bD(["strokeDasharray"],h,m);return y.createElement(Xc,{animationId:k,key:k,canBegin:x>0,duration:h,easing:m,isActive:g,begin:p},pe=>{var q=kt(M,i,pe),R=kt(z,s,pe),U=kt(W,c,pe),te=kt(Y,r,pe),ne=kt(re,n,pe);_.current&&(j.current=q,S.current=R,O.current=U,C.current=te,A.current=ne);var we=pe>0?{transition:se,strokeDasharray:I}:{strokeDasharray:X};return y.createElement("path",rm({},Ir(t),{className:D,d:dA(te,ne,q,R,U),ref:_,style:uA(uA({},we),t.style)}))})},AK=["option","shapeType","activeClassName"];function NK(e,t){if(e==null)return{};var r,n,i=kK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function kK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(r),!0).forEach(function(n){DK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DK(e,t,r){return(t=TK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TK(e){var t=PK(e,"string");return typeof t=="symbol"?t:t+""}function PK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MK(e,t){return nm(nm({},t),e)}function RK(e,t){return e==="symbols"}function mA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(jD,r);case"trapezoid":return y.createElement(CK,r);case"sector":return y.createElement(CD,r);case"symbols":if(RK(t))return y.createElement(ik,r);break;case"curve":return y.createElement(l0,r);default:return null}}function qK(e){return y.isValidElement(e)?e.props:e}function E_(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=NK(e,AK),s;if(y.isValidElement(t))s=y.cloneElement(t,nm(nm({},i),qK(t)));else if(typeof t=="function")s=t(i,i.index);else if(wK(t)&&typeof t!="boolean"){var c=MK(t,i);s=y.createElement(mA,{shapeType:r,elementProps:c})}else{var u=i;s=y.createElement(mA,{shapeType:r,elementProps:u})}return i.isActive?y.createElement(_r,{className:n},s):s}var O_=(e,t,r)=>{var n=Mt();return(i,s)=>c=>{e?.(i,s,c),n(lP({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},C_=e=>{var t=Mt();return(r,n)=>i=>{e?.(r,n,i),t(HH())}},A_=(e,t,r)=>{var n=Mt();return(i,s)=>c=>{e?.(i,s,c),n(FH({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function N_(e){var{tooltipEntrySettings:t}=e,r=Mt(),n=Pr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(IH(t)):i.current!==t&&r(UH({prev:i.current,next:t})),i.current=t)},[t,r,n]),y.useLayoutEffect(()=>()=>{i.current&&(r(BH(i.current)),i.current=null)},[r]),null}function ZP(e){var{legendPayload:t}=e,r=Mt(),n=Pr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(pD(t)):i.current!==t&&r(gD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(vD(i.current)),i.current=null)},[r]),null}function zK(e){var{legendPayload:t}=e,r=Mt(),n=Te(et),i=y.useRef(null);return y.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(pD(t)):i.current!==t&&r(gD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(vD(i.current)),i.current=null)},[r]),null}var ly,LK=()=>{var[e]=y.useState(()=>jc("uid-"));return e},IK=(ly=vq.useId)!==null&&ly!==void 0?ly:LK;function UK(e,t){var r=IK();return t||(e?"".concat(e,"-").concat(r):r)}var BK=y.createContext(void 0),k_=e=>{var{id:t,type:r,children:n}=e,i=UK("recharts-".concat(r),t);return y.createElement(BK.Provider,{value:i},n(i))},$K={cartesianItems:[],polarItems:[]},QP=Qr({name:"graphicalItems",initialState:$K,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Nt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ea(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Nt()},removeCartesianGraphicalItem:{reducer(e,t){var r=ea(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Nt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Nt()},removePolarGraphicalItem:{reducer(e,t){var r=ea(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Nt()}}}),{addCartesianGraphicalItem:HK,replaceCartesianGraphicalItem:FK,removeCartesianGraphicalItem:KK,addPolarGraphicalItem:YK,removePolarGraphicalItem:GK}=QP.actions,VK=QP.reducer,WK=e=>{var t=Mt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(HK(e)):r.current!==e&&t(FK({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(KK(r.current)),r.current=null)},[t]),null},JP=y.memo(WK);function XK(e){var t=Mt();return y.useLayoutEffect(()=>(t(YK(e)),()=>{t(GK(e))}),[t,e]),null}var ZK=["key"],QK=["onMouseEnter","onClick","onMouseLeave"],JK=["id"],eY=["id"];function hA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(r),!0).forEach(function(n){tY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tY(e,t,r){return(t=rY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rY(e){var t=nY(e,"string");return typeof t=="symbol"?t:t+""}function nY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xi.apply(null,arguments)}function lh(e,t){if(e==null)return{};var r,n,i=aY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function aY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iY(e){var t=y.useMemo(()=>S_(e.children,du),[e.children]),r=Te(n=>hK(n,e.id,t));return r==null?null:y.createElement(zK,{legendPayload:r})}var oY=y.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:c,name:u,hide:m,tooltipType:h,id:p}=e,g={dataDefinedOnItem:n.map(_=>_.tooltipPayload),positions:n.map(_=>_.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:c,dataKey:t,nameKey:r,name:Qs(u,t),hide:m,type:h,color:c,unit:"",graphicalItemId:p}};return y.createElement(N_,{tooltipEntrySettings:g})}),sY=(e,t)=>e>t?"start":e<t?"end":"middle",lY=(e,t,r)=>Tr(typeof t=="function"?t(e):t,r,r*.8),cY=(e,t,r)=>{var{top:n,left:i,width:s,height:c}=t,u=SD(s,c),m=i+Tr(e.cx,s,s/2),h=n+Tr(e.cy,c,c/2),p=Tr(e.innerRadius,u,0),g=lY(r,e.outerRadius,u),_=e.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:m,cy:h,innerRadius:p,outerRadius:g,maxRadius:_}},uY=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function dY(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var fY=(e,t)=>{if(y.isValidElement(e))return y.cloneElement(e,t);if(typeof e=="function")return e(t);var r=st("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=lh(t,ZK);return y.createElement(l0,Xi({},i,{type:"linear",className:r}))},mY=(e,t,r)=>{if(y.isValidElement(e))return y.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),y.isValidElement(n)))return n;var i=st("recharts-pie-label-text",dY(e));return y.createElement(ih,Xi({},t,{alignmentBaseline:"middle",className:i}),n)};function hY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:s,dataKey:c}=r;if(!n||!i||!t)return null;var u=vn(r),m=Ro(i),h=Ro(s),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((_,x)=>{var w=(_.startAngle+_.endAngle)/2,j=ar(_.cx,_.cy,_.outerRadius+p,w),S=Kt(Kt(Kt(Kt({},u),_),{},{stroke:"none"},m),{},{index:x,textAnchor:sY(j.x,_.cx)},j),O=Kt(Kt(Kt(Kt({},u),_),{},{fill:"none",stroke:_.fill},h),{},{index:x,points:[ar(_.cx,_.cy,_.outerRadius,w),j],key:"line"});return y.createElement(Jr,{zIndex:ir.label,key:"label-".concat(_.startAngle,"-").concat(_.endAngle,"-").concat(_.midAngle,"-").concat(x)},y.createElement(_r,null,s&&fY(s,O),mY(i,S,vt(_,c))))});return y.createElement(_r,{className:"recharts-pie-labels"},g)}function pY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?y.createElement(x_,{label:i}):y.createElement(hY,{sectors:t,props:r,showLabels:n})}function gY(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:s,id:c}=e,u=Te(Wi),m=Te(h_),h=Te(N9),{onMouseEnter:p,onClick:g,onMouseLeave:_}=i,x=lh(i,QK),w=O_(p,i.dataKey,c),j=C_(_),S=A_(g,i.dataKey,c);return t==null||t.length===0?null:y.createElement(y.Fragment,null,t.map((O,C)=>{if(O?.startAngle===0&&O?.endAngle===0&&t.length!==1)return null;var A=h==null||h===c,k=String(C)===u&&(m==null||i.dataKey===m)&&A,D=u?n:null,M=r&&k?r:D,z=Kt(Kt({},O),{},{stroke:O.stroke,tabIndex:-1,[Jk]:C,[eD]:c});return y.createElement(_r,Xi({key:"sector-".concat(O?.startAngle,"-").concat(O?.endAngle,"-").concat(O.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},_m(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),y.createElement(E_,Xi({option:s??M,index:C,shapeType:"sector",isActive:k},z)))}))}function vY(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:s}=e,{cornerRadius:c,startAngle:u,endAngle:m,dataKey:h,nameKey:p,tooltipType:g}=r,_=Math.abs(r.minAngle),x=uY(u,m),w=Math.abs(x),j=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,S=n.filter(M=>vt(M,h,0)!==0).length,O=(w>=360?S:S-1)*j,C=w-S*_-O,A=n.reduce((M,z)=>{var W=vt(z,h,0);return M+(ke(W)?W:0)},0),k;if(A>0){var D;k=n.map((M,z)=>{var W=vt(M,h,0),Y=vt(M,p,z),re=cY(r,s,M),X=(ke(W)?W:0)/A,I,se=Kt(Kt({},M),i&&i[z]&&i[z].props);z?I=D.endAngle+br(x)*j*(W!==0?1:0):I=u;var pe=I+br(x)*((W!==0?_:0)+X*C),q=(I+pe)/2,R=(re.innerRadius+re.outerRadius)/2,U=[{name:Y,value:W,payload:se,dataKey:h,type:g,graphicalItemId:r.id}],te=ar(re.cx,re.cy,R,q);return D=Kt(Kt(Kt(Kt({},r.presentationProps),{},{percent:X,cornerRadius:typeof c=="string"?parseFloat(c):c,name:Y,tooltipPayload:U,midAngle:q,middleRadius:R,tooltipPosition:te},se),re),{},{value:W,dataKey:h,startAngle:I,endAngle:pe,payload:se,paddingAngle:br(x)*j}),D})}return k}function yY(e){var{showLabels:t,sectors:r,children:n}=e,i=y.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return y.createElement(QF,{value:t?i:void 0},n)}function bY(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,activeShape:h,inactiveShape:p,onAnimationStart:g,onAnimationEnd:_}=t,x=Zc(t,"recharts-pie-"),w=r.current,[j,S]=y.useState(!1),O=y.useCallback(()=>{typeof _=="function"&&_(),S(!1)},[_]),C=y.useCallback(()=>{typeof g=="function"&&g(),S(!0)},[g]);return y.createElement(yY,{showLabels:!j,sectors:i},y.createElement(Xc,{animationId:x,begin:c,duration:u,isActive:s,easing:m,onAnimationStart:C,onAnimationEnd:O,key:x},A=>{var k=[],D=i&&i[0],M=D?.startAngle;return i?.forEach((z,W)=>{var Y=w&&w[W],re=W>0?zo(z,"paddingAngle",0):0;if(Y){var X=kt(Y.endAngle-Y.startAngle,z.endAngle-z.startAngle,A),I=Kt(Kt({},z),{},{startAngle:M+re,endAngle:M+X+re});k.push(I),M=I.endAngle}else{var{endAngle:se,startAngle:pe}=z,q=kt(0,se-pe,A),R=Kt(Kt({},z),{},{startAngle:M+re,endAngle:M+q+re});k.push(R),M=R.endAngle}}),r.current=k,y.createElement(_r,null,y.createElement(gY,{sectors:k,activeShape:h,inactiveShape:p,allOtherPieProps:t,shape:t.shape,id:n}))}),y.createElement(pY,{showLabels:!j,sectors:i,props:t}),t.children)}var _Y={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ir.area};function xY(e){var{id:t}=e,r=lh(e,JK),{hide:n,className:i,rootTabIndex:s}=e,c=y.useMemo(()=>S_(e.children,du),[e.children]),u=Te(p=>pK(p,t,c)),m=y.useRef(null),h=st("recharts-pie",i);return n||u==null?(m.current=null,y.createElement(_r,{tabIndex:s,className:h})):y.createElement(Jr,{zIndex:e.zIndex},y.createElement(oY,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:u,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),y.createElement(_r,{tabIndex:s,className:h},y.createElement(bY,{props:Kt(Kt({},r),{},{sectors:u}),previousSectorsRef:m,id:t})))}function e2(e){var t=xr(e,_Y),{id:r}=t,n=lh(t,eY),i=vn(n);return y.createElement(k_,{id:r,type:"pie"},s=>y.createElement(y.Fragment,null,y.createElement(XK,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),y.createElement(iY,Xi({},n,{id:s})),y.createElement(xY,Xi({},n,{id:s}))))}e2.displayName="Pie";var wY=["points"];function pA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function cy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pA(Object(r),!0).forEach(function(n){jY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jY(e,t,r){return(t=SY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SY(e){var t=EY(e,"string");return typeof t=="symbol"?t:t+""}function EY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},am.apply(null,arguments)}function OY(e,t){if(e==null)return{};var r,n,i=CY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function CY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function AY(e){var{option:t,dotProps:r,className:n}=e;if(y.isValidElement(t))return y.cloneElement(t,r);if(typeof t=="function")return t(r);var i=st(n,typeof t!="boolean"?t.className:""),s=r??{},{points:c}=s,u=OY(s,wY);return y.createElement(FP,am({},u,{className:i}))}function NY(e,t){return e==null?!1:t?!0:e.length===1}function kY(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:s,baseProps:c,needClip:u,clipPathId:m,zIndex:h=ir.scatter}=e;if(!NY(t,r))return null;var p=XP(r),g=g3(r),_=t.map((w,j)=>{var S,O,C=cy(cy(cy({r:3},c),g),{},{index:j,cx:(S=w.x)!==null&&S!==void 0?S:void 0,cy:(O=w.y)!==null&&O!==void 0?O:void 0,dataKey:s,value:w.value,payload:w.payload,points:t});return y.createElement(AY,{key:"dot-".concat(j),option:r,dotProps:C,className:i})}),x={};return u&&m!=null&&(x.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(m,")")),y.createElement(Jr,{zIndex:h},y.createElement(_r,am({className:n},x),_))}function gA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gA(Object(r),!0).forEach(function(n){DY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DY(e,t,r){return(t=TY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TY(e){var t=PY(e,"string");return typeof t=="symbol"?t:t+""}function PY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t2=0,MY={xAxis:{},yAxis:{},zAxis:{}},r2=Qr({name:"cartesianAxis",initialState:MY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Nt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Nt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Nt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Nt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Nt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Nt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Nt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Nt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Nt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var c=[...s,n].slice(-3);e.yAxis[r]=vA(vA({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:RY,replaceXAxis:qY,removeXAxis:zY,addYAxis:LY,replaceYAxis:IY,removeYAxis:UY,addZAxis:WZ,replaceZAxis:XZ,removeZAxis:ZZ,updateYAxisWidth:BY}=r2.actions,$Y=r2.reducer,HY=J([dr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),FY=J([HY,ai,ii],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),D_=()=>Te(FY),KY=()=>Te(M9);function yA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yA(Object(r),!0).forEach(function(n){YY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YY(e,t,r){return(t=GY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GY(e){var t=VY(e,"string");return typeof t=="symbol"?t:t+""}function VY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WY=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:s,clipPath:c}=e;if(i===!1||t.x==null||t.y==null)return null;var u={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=uy(uy(uy({},u),Ro(i)),Wb(i)),h;return y.isValidElement(i)?h=y.cloneElement(i,m):typeof i=="function"?h=i(m):h=y.createElement(FP,m),y.createElement(_r,{className:"recharts-active-dot",clipPath:c},h)};function XY(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:s,zIndex:c=ir.activeDot}=e,u=Te(Wi),m=KY();if(t==null||m==null)return null;var h=t.find(p=>m.includes(p.payload));return Pt(h)?null:y.createElement(Jr,{zIndex:c},y.createElement(WY,{point:h,childIndex:Number(u),mainColor:r,dataKey:i,activeDot:n,clipPath:s}))}var bA=(e,t,r)=>{var n=r??e;if(!Pt(n))return Tr(n,t,0)},ZY=(e,t,r)=>{var n={},i=e.filter(Xm),s=e.filter(h=>h.stackId==null),c=i.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),n),u=Object.entries(c).map(h=>{var[p,g]=h,_=g.map(w=>w.dataKey),x=bA(t,r,g[0].barSize);return{stackId:p,dataKeys:_,barSize:x}}),m=s.map(h=>{var p=[h.dataKey].filter(_=>_!=null),g=bA(t,r,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...u,...m]};function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(n){QY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QY(e,t,r){return(t=JY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JY(e){var t=eG(e,"string");return typeof t=="symbol"?t:t+""}function eG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tG(e,t,r,n,i){var s=n.length;if(!(s<1)){var c=Tr(e,r,0,!0),u,m=[];if(zt(n[0].barSize)){var h=!1,p=r/s,g=n.reduce((O,C)=>O+(C.barSize||0),0);g+=(s-1)*c,g>=r&&(g-=(s-1)*c,c=0),g>=r&&p>0&&(h=!0,p*=.9,g=s*p);var _=(r-g)/2>>0,x={offset:_-c,size:0};u=n.reduce((O,C)=>{var A,k={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:x.offset+x.size+c,size:h?p:(A=C.barSize)!==null&&A!==void 0?A:0}},D=[...O,k];return x=D[D.length-1].position,D},m)}else{var w=Tr(t,r,0,!0);r-2*w-(s-1)*c<=0&&(c=0);var j=(r-2*w-(s-1)*c)/s;j>1&&(j>>=0);var S=zt(i)?Math.min(j,i):j;u=n.reduce((O,C,A)=>[...O,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:w+(j+c)*A+(j-S)/2,size:S}}],m)}return u}}var rG=(e,t,r,n,i,s,c)=>{var u=Pt(c)?t:c,m=tG(r,n,i!==s?i:s,e,u);return i!==s&&m!=null&&(m=m.map(h=>Wd(Wd({},h),{},{position:Wd(Wd({},h.position),{},{offset:h.position.offset-i/2})}))),m},nG=(e,t)=>{var r=B0(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===r)}}}};function aG(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&zt(e.zIndex)?e.zIndex:t}var n2=e=>{var{chartData:t}=e,r=Mt(),n=Pr();return y.useEffect(()=>n?()=>{}:(r(CC(t)),()=>{r(CC(void 0))}),[t,r,n]),null},xA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},a2=Qr({name:"brush",initialState:xA,reducers:{setBrushSettings(e,t){return t.payload==null?xA:t.payload}}}),{setBrushSettings:QZ}=a2.actions,iG=a2.reducer;function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){i2(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i2(e,t,r){return(t=oG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oG(e){var t=sG(e,"string");return typeof t=="symbol"?t:t+""}function sG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lG=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return{x:Math.min(r,i),y:Math.min(n,s),width:Math.abs(i-r),height:Math.abs(s-n)}},JZ=e=>{var{x1:t,y1:r,x2:n,y2:i}=e;return lG({x:t,y:r},{x:n,y:i})};class ch{static create(t){return new ch(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}i2(ch,"EPS",1e-4);var eQ=e=>{var t=Object.keys(e).reduce((r,n)=>Xd(Xd({},r),{},{[n]:ch.create(e[n])}),{});return Xd(Xd({},t),{},{apply(r){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(r).map(s=>{var[c,u]=s;return[c,t[c].apply(u,{bandAware:n,position:i})]}))},isInRange(r){return Object.keys(r).every(n=>t[n].isInRange(r[n]))}})};function cG(e){return(e%180+180)%180}var uG=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=cG(i),c=s*Math.PI/180,u=Math.atan(n/r),m=c>u&&c<Math.PI-u?n/Math.sin(c):r/Math.cos(c);return Math.abs(m)},dG={dots:[],areas:[],lines:[]},o2=Qr({name:"referenceElements",initialState:dG,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ea(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ea(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ea(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:tQ,removeDot:rQ,addArea:nQ,removeArea:aQ,addLine:iQ,removeLine:oQ}=o2.actions,fG=o2.reducer,s2=y.createContext(void 0),mG=e=>{var{children:t}=e,[r]=y.useState("".concat(jc("recharts"),"-clip")),n=D_();if(n==null)return null;var{x:i,y:s,width:c,height:u}=n;return y.createElement(s2.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:i,y:s,height:u,width:c}))),t)},sQ=()=>y.useContext(s2);function l2(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function hG(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return uG(n,r)}function pG(e,t,r){var n=r==="width",{x:i,y:s,width:c,height:u}=e;return t===1?{start:n?i:s,end:n?i+c:s+u}:{start:n?i+c:s+u,end:n?i:s}}function zc(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function gG(e,t){return l2(e,t+1)}function vG(e,t,r,n,i){for(var s=(n||[]).slice(),{start:c,end:u}=t,m=0,h=1,p=c,g=function(){var w=n?.[m];if(w===void 0)return{v:l2(n,h)};var j=m,S,O=()=>(S===void 0&&(S=r(w,j)),S),C=w.coordinate,A=m===0||zc(e,C,O,p,u);A||(m=0,p=c,h+=1),A&&(p=C+e*(O()/2+i),m+=h)},_;h<=s.length;)if(_=g(),_)return _.v;return[]}function yG(e,t,r,n,i){var s=(n||[]).slice(),c=s.length;if(c===0)return[];for(var{start:u,end:m}=t,h=1;h<=c;h++){for(var p=(c-1)%h,g=u,_=!0,x=function(){var C=n[w],A=w,k,D=()=>(k===void 0&&(k=r(C,A)),k),M=C.coordinate,z=w===p||zc(e,M,D,g,m);if(!z)return _=!1,1;z&&(g=M+e*(D()/2+i))},w=p;w<c&&!x();w+=h);if(_){for(var j=[],S=p;S<c;S+=h)j.push(n[S]);return j}}return[]}function jA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(r),!0).forEach(function(n){bG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bG(e,t,r){return(t=_G(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _G(e){var t=xG(e,"string");return typeof t=="symbol"?t:t+""}function xG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wG(e,t,r,n,i){for(var s=(n||[]).slice(),c=s.length,{start:u}=t,{end:m}=t,h=function(_){var x=s[_],w,j=()=>(w===void 0&&(w=r(x,_)),w);if(_===c-1){var S=e*(x.coordinate+e*j()/2-m);s[_]=x=kr(kr({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else s[_]=x=kr(kr({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var O=zc(e,x.tickCoord,j,u,m);O&&(m=x.tickCoord-e*(j()/2+i),s[_]=kr(kr({},x),{},{isShow:!0}))}},p=c-1;p>=0;p--)h(p);return s}function jG(e,t,r,n,i,s){var c=(n||[]).slice(),u=c.length,{start:m,end:h}=t;if(s){var p=n[u-1],g=r(p,u-1),_=e*(p.coordinate+e*g/2-h);if(c[u-1]=p=kr(kr({},p),{},{tickCoord:_>0?p.coordinate-_*e:p.coordinate}),p.tickCoord!=null){var x=zc(e,p.tickCoord,()=>g,m,h);x&&(h=p.tickCoord-e*(g/2+i),c[u-1]=kr(kr({},p),{},{isShow:!0}))}}for(var w=s?u-1:u,j=function(C){var A=c[C],k,D=()=>(k===void 0&&(k=r(A,C)),k);if(C===0){var M=e*(A.coordinate-e*D()/2-m);c[C]=A=kr(kr({},A),{},{tickCoord:M<0?A.coordinate-M*e:A.coordinate})}else c[C]=A=kr(kr({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var z=zc(e,A.tickCoord,D,m,h);z&&(m=A.tickCoord+e*(D()/2+i),c[C]=kr(kr({},A),{},{isShow:!0}))}},S=0;S<w;S++)j(S);return c}function T_(e,t,r){var{tick:n,ticks:i,viewBox:s,minTickGap:c,orientation:u,interval:m,tickFormatter:h,unit:p,angle:g}=e;if(!i||!i.length||!n)return[];if(ke(m)||Um.isSsr){var _;return(_=gG(i,ke(m)?m:0))!==null&&_!==void 0?_:[]}var x=[],w=u==="top"||u==="bottom"?"width":"height",j=p&&w==="width"?xc(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(A,k)=>{var D=typeof h=="function"?h(A.value,k):A.value;return w==="width"?hG(xc(D,{fontSize:t,letterSpacing:r}),j,g):xc(D,{fontSize:t,letterSpacing:r})[w]},O=i.length>=2?br(i[1].coordinate-i[0].coordinate):1,C=pG(s,O,w);return m==="equidistantPreserveStart"?vG(O,C,S,i,c):m==="equidistantPreserveEnd"?yG(O,C,S,i,c):(m==="preserveStart"||m==="preserveStartEnd"?x=jG(O,C,S,i,c,m==="preserveStartEnd"):x=wG(O,C,S,i,c),x.filter(A=>A.isShow))}var SG=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=e,c=0;if(t){Array.from(t).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>c&&(c=g.width)}});var u=r?r.getBoundingClientRect().width:0,m=i+s,h=c+m+u+(r?n:0);return Math.round(h)}return 0},EG=["axisLine","width","height","className","hide","ticks","axisType"];function OG(e,t){if(e==null)return{};var r,n,i=CG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function CG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$o.apply(null,arguments)}function SA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(r),!0).forEach(function(n){AG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AG(e,t,r){return(t=NG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NG(e){var t=kG(e,"string");return typeof t=="symbol"?t:t+""}function kG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ga={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ir.axis};function DG(e){var{x:t,y:r,width:n,height:i,orientation:s,mirror:c,axisLine:u,otherSvgProps:m}=e;if(!u)return null;var h=nr(nr(nr({},m),vn(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!c||s==="bottom"&&c);h=nr(nr({},h),{},{x1:t,y1:r+p*i,x2:t+n,y2:r+p*i})}else{var g=+(s==="left"&&!c||s==="right"&&c);h=nr(nr({},h),{},{x1:t+g*n,y1:r,x2:t+g*n,y2:r+i})}return y.createElement("line",$o({},h,{className:st("recharts-cartesian-axis-line",zo(u,"className"))}))}function TG(e,t,r,n,i,s,c,u,m){var h,p,g,_,x,w,j=u?-1:1,S=e.tickSize||c,O=ke(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=p=e.coordinate,_=r+ +!u*i,g=_-j*S,w=g-j*m,x=O;break;case"left":g=_=e.coordinate,p=t+ +!u*n,h=p-j*S,x=h-j*m,w=O;break;case"right":g=_=e.coordinate,p=t+ +u*n,h=p+j*S,x=h+j*m,w=O;break;default:h=p=e.coordinate,_=r+ +u*i,g=_+j*S,w=g+j*m,x=O;break}return{line:{x1:h,y1:g,x2:p,y2:_},tick:{x,y:w}}}function PG(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function MG(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function RG(e){var{option:t,tickProps:r,value:n}=e,i,s=st(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))i=y.cloneElement(t,nr(nr({},r),{},{className:s}));else if(typeof t=="function")i=t(nr(nr({},r),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=st(c,t?.className)),i=y.createElement(ih,$o({},r,{className:c}),n)}return i}var qG=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:c,unit:u,padding:m,tickTextProps:h,orientation:p,mirror:g,x:_,y:x,width:w,height:j,tickSize:S,tickMargin:O,fontSize:C,letterSpacing:A,getTicksConfig:k,events:D,axisType:M}=e,z=T_(nr(nr({},k),{},{ticks:r}),C,A),W=PG(p,g),Y=MG(p,g),re=vn(k),X=Ro(n),I={};typeof i=="object"&&(I=i);var se=nr(nr({},re),{},{fill:"none"},I),pe=z.map(U=>nr({entry:U},TG(U,_,x,w,j,p,S,g,O))),q=pe.map(U=>{var{entry:te,line:ne}=U;return y.createElement(_r,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},i&&y.createElement("line",$o({},se,ne,{className:st("recharts-cartesian-axis-tick-line",zo(i,"className"))})))}),R=pe.map((U,te)=>{var{entry:ne,tick:we}=U,Pe=nr(nr(nr(nr({textAnchor:W,verticalAnchor:Y},re),{},{stroke:"none",fill:s},X),we),{},{index:te,payload:ne,visibleTicksCount:z.length,tickFormatter:c,padding:m},h);return y.createElement(_r,$o({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},_m(D,ne,te)),n&&y.createElement(RG,{option:n,tickProps:Pe,value:"".concat(typeof c=="function"?c(ne.value,te):ne.value).concat(u||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},R.length>0&&y.createElement(Jr,{zIndex:ir.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:t},R)),q.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},q))}),zG=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:s,hide:c,ticks:u,axisType:m}=e,h=OG(e,EG),[p,g]=y.useState(""),[_,x]=y.useState(""),w=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return SG({ticks:w.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=y.useCallback(S=>{if(S){var O=S.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=O;var C=O[0];if(C){var A=window.getComputedStyle(C),k=A.fontSize,D=A.letterSpacing;(k!==p||D!==_)&&(g(k),x(D))}}},[p,_]);return c||n!=null&&n<=0||i!=null&&i<=0?null:y.createElement(Jr,{zIndex:e.zIndex},y.createElement(_r,{className:st("recharts-cartesian-axis",s)},y.createElement(DG,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:vn(e)}),y.createElement(qG,{ref:j,axisType:m,events:h,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:_,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(DF,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(BF,{label:e.label,labelRef:e.labelRef}),e.children)))}),P_=y.forwardRef((e,t)=>{var r=xr(e,Ga);return y.createElement(zG,$o({},r,{ref:t}))});P_.displayName="CartesianAxis";var LG=["x1","y1","x2","y2","key"],IG=["offset"],UG=["xAxisId","yAxisId"],BG=["xAxisId","yAxisId"];function EA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(r),!0).forEach(function(n){$G(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $G(e,t,r){return(t=HG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HG(e){var t=FG(e,"string");return typeof t=="symbol"?t:t+""}function FG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},No.apply(null,arguments)}function im(e,t){if(e==null)return{};var r,n,i=KG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function KG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var YG=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:c,ry:u}=e;return y.createElement("rect",{x:n,y:i,ry:u,width:s,height:c,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function c2(e){var{option:t,lineItemProps:r}=e,n;if(y.isValidElement(t))n=y.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:s,y1:c,x2:u,y2:m,key:h}=r,p=im(r,LG),g=(i=vn(p))!==null&&i!==void 0?i:{},{offset:_}=g,x=im(g,IG);n=y.createElement("line",No({},x,{x1:s,y1:c,x2:u,y2:m,fill:"none",key:h}))}return n}function GG(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=im(e,UG),m=i.map((h,p)=>{var g=Dr(Dr({},u),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(p),index:p});return y.createElement(c2,{key:"line-".concat(p),option:n,lineItemProps:g})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function VG(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=im(e,BG),m=i.map((h,p)=>{var g=Dr(Dr({},u),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(p),index:p});return y.createElement(c2,{option:n,lineItemProps:g,key:"line-".concat(p)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function WG(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:s,height:c,horizontalPoints:u,horizontal:m=!0}=e;if(!m||!t||!t.length||u==null)return null;var h=u.map(g=>Math.round(g+i-i)).sort((g,_)=>g-_);i!==h[0]&&h.unshift(0);var p=h.map((g,_)=>{var x=!h[_+1],w=x?i+c-g:h[_+1]-g;if(w<=0)return null;var j=_%t.length;return y.createElement("rect",{key:"react-".concat(_),y:g,x:n,height:w,width:s,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function XG(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:c,height:u,verticalPoints:m}=e;if(!t||!r||!r.length)return null;var h=m.map(g=>Math.round(g+i-i)).sort((g,_)=>g-_);i!==h[0]&&h.unshift(0);var p=h.map((g,_)=>{var x=!h[_+1],w=x?i+c-g:h[_+1]-g;if(w<=0)return null;var j=_%r.length;return y.createElement("rect",{key:"react-".concat(_),x:g,y:s,width:w,height:u,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var ZG=(e,t)=>{var{xAxis:r,width:n,height:i,offset:s}=e;return Xk(T_(Dr(Dr(Dr({},Ga),r),{},{ticks:Zk(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},QG=(e,t)=>{var{yAxis:r,width:n,height:i,offset:s}=e;return Xk(T_(Dr(Dr(Dr({},Ga),r),{},{ticks:Zk(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},JG={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ir.grid};function _b(e){var t=oD(),r=sD(),n=iD(),i=Dr(Dr({},xr(e,JG)),{},{x:ke(e.x)?e.x:n.left,y:ke(e.y)?e.y:n.top,width:ke(e.width)?e.width:n.width,height:ke(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:c,x:u,y:m,width:h,height:p,syncWithTicks:g,horizontalValues:_,verticalValues:x}=i,w=Pr(),j=Te(Y=>pC(Y,"xAxis",s,w)),S=Te(Y=>pC(Y,"yAxis",c,w));if(!ya(h)||!ya(p)||!ke(u)||!ke(m))return null;var O=i.verticalCoordinatesGenerator||ZG,C=i.horizontalCoordinatesGenerator||QG,{horizontalPoints:A,verticalPoints:k}=i;if((!A||!A.length)&&typeof C=="function"){var D=_&&_.length,M=C({yAxis:S?Dr(Dr({},S),{},{ticks:D?_:S.ticks}):void 0,width:t??h,height:r??p,offset:n},D?!0:g);Pf(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(A=M)}if((!k||!k.length)&&typeof O=="function"){var z=x&&x.length,W=O({xAxis:j?Dr(Dr({},j),{},{ticks:z?x:j.ticks}):void 0,width:t??h,height:r??p,offset:n},z?!0:g);Pf(Array.isArray(W),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof W,"]")),Array.isArray(W)&&(k=W)}return y.createElement(Jr,{zIndex:i.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(YG,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),y.createElement(WG,No({},i,{horizontalPoints:A})),y.createElement(XG,No({},i,{verticalPoints:k})),y.createElement(GG,No({},i,{offset:n,horizontalPoints:A,xAxis:j,yAxis:S})),y.createElement(VG,No({},i,{offset:n,verticalPoints:k,xAxis:j,yAxis:S}))))}_b.displayName="CartesianGrid";var eV={},u2=Qr({name:"errorBars",initialState:eV,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:lQ,replaceErrorBar:cQ,removeErrorBar:uQ}=u2.actions,tV=u2.reducer,rV=["children"];function nV(e,t){if(e==null)return{};var r,n,i=aV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function aV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iV={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},oV=y.createContext(iV);function d2(e){var{children:t}=e,r=nV(e,rV);return y.createElement(oV.Provider,{value:r},t)}function M_(e,t){var r,n,i=Te(h=>li(h,e)),s=Te(h=>ci(h,t)),c=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:gr.allowDataOverflow,u=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:vr.allowDataOverflow,m=c||u;return{needClip:m,needClipX:c,needClipY:u}}function f2(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=D_(),{needClipX:s,needClipY:c,needClip:u}=M_(t,r);if(!u||!i)return null;var{x:m,y:h,width:p,height:g}=i;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:s?m:m-p/2,y:c?h:h-g/2,width:s?p:p*2,height:c?g:g*2}))}var m2=(e,t,r,n)=>Vi(e,"xAxis",t,n),h2=(e,t,r,n)=>Gi(e,"xAxis",t,n),p2=(e,t,r,n)=>Vi(e,"yAxis",r,n),g2=(e,t,r,n)=>Gi(e,"yAxis",r,n),sV=J([et,m2,p2,h2,g2],(e,t,r,n,i)=>Zi(e,"xAxis")?Fs(t,n,!1):Fs(r,i,!1)),lV=(e,t,r,n,i)=>i;function cV(e){return e.type==="line"}var uV=J([Jm,lV],(e,t)=>e.filter(cV).find(r=>r.id===t)),dV=J([et,m2,p2,h2,g2,uV,sV,T0],(e,t,r,n,i,s,c,u)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=u;if(!(s==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||c==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:g,data:_}=s,x;if(_!=null&&_.length>0?x=_:x=m?.slice(h,p+1),x!=null)return QV({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:g,bandSize:c,displayedData:x})}});function fV(e){var t=Ro(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:s}=t,c=Number(i),u=Number(s);return(Number.isNaN(c)||c<0)&&(c=r),(Number.isNaN(u)||u<0)&&(u=n),{r:c,strokeWidth:u}}return{r,strokeWidth:n}}var dy={exports:{}},fy={};var OA;function mV(){if(OA)return fy;OA=1;var e=fm();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,c=e.useMemo,u=e.useDebugValue;return fy.useSyncExternalStoreWithSelector=function(m,h,p,g,_){var x=i(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=c(function(){function S(D){if(!O){if(O=!0,C=D,D=g(D),_!==void 0&&w.hasValue){var M=w.value;if(_(M,D))return A=M}return A=D}if(M=A,r(C,D))return M;var z=g(D);return _!==void 0&&_(M,z)?(C=D,M):(C=D,A=z)}var O=!1,C,A,k=p===void 0?null:p;return[function(){return S(h())},k===null?void 0:function(){return S(k())}]},[h,p,g,_]);var j=n(m,x[0],x[1]);return s(function(){w.hasValue=!0,w.value=j},[j]),u(j),j},fy}var CA;function hV(){return CA||(CA=1,dy.exports=mV()),dy.exports}hV();function pV(e){e()}function gV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){pV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var AA={notify(){},get:()=>[]};function vV(e,t){let r,n=AA,i=0,s=!1;function c(j){p();const S=n.subscribe(j);let O=!1;return()=>{O||(O=!0,S(),g())}}function u(){n.notify()}function m(){w.onStateChange&&w.onStateChange()}function h(){return s}function p(){i++,r||(r=e.subscribe(m),n=gV())}function g(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=AA)}function _(){s||(s=!0,p())}function x(){s&&(s=!1,g())}const w={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:m,isSubscribed:h,trySubscribe:_,tryUnsubscribe:x,getListeners:()=>n};return w}var yV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bV=yV(),_V=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xV=_V(),wV=()=>bV||xV?y.useLayoutEffect:y.useEffect,jV=wV();function NA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function SV(e,t){if(NA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!NA(e[r[i]],t[r[i]]))return!1;return!0}var EV=Symbol.for("react-redux-context"),OV=typeof globalThis<"u"?globalThis:{};function CV(){if(!y.createContext)return{};const e=OV[EV]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var AV=CV();function NV(e){const{children:t,context:r,serverState:n,store:i}=e,s=y.useMemo(()=>{const m=vV(i);return{store:i,subscription:m,getServerState:n?()=>n:void 0}},[i,n]),c=y.useMemo(()=>i.getState(),[i]);jV(()=>{const{subscription:m}=s;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[s,c]);const u=r||AV;return y.createElement(u.Provider,{value:s},t)}var kV=NV,DV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function TV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function uh(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(DV.has(n)){if(e[n]==null&&t[n]==null)continue;if(!SV(e[n],t[n]))return!1}else if(!TV(e[n],t[n]))return!1;return!0}var PV=["id"],MV=["type","layout","connectNulls","needClip","shape"],RV=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Lc(){return Lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lc.apply(null,arguments)}function kA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ma(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kA(Object(r),!0).forEach(function(n){qV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qV(e,t,r){return(t=zV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zV(e){var t=LV(e,"string");return typeof t=="symbol"?t:t+""}function LV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R_(e,t){if(e==null)return{};var r,n,i=IV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function IV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var UV=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Qs(r,t),payload:e}]},BV=y.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:s,name:c,hide:u,unit:m,tooltipType:h,id:p}=e,g={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:Qs(c,t),hide:u,type:h,color:n,unit:m,graphicalItemId:p}};return y.createElement(N_,{tooltipEntrySettings:g})}),v2=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function $V(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var HV=(e,t,r)=>{var n=r.reduce((g,_)=>g+_);if(!n)return v2(t,e);for(var i=Math.floor(e/n),s=e%n,c=t-e,u=[],m=0,h=0;m<r.length;h+=r[m],++m)if(h+r[m]>s){u=[...r.slice(0,m),s-h];break}var p=u.length%2===0?[0,c]:[c];return[...$V(r,i),...u,...p].map(g=>"".concat(g,"px")).join(", ")};function FV(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:s,needClip:c}=n,{id:u}=n,m=R_(n,PV),h=vn(m);return y.createElement(kY,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:c,clipPathId:t})}function KV(e){var{showLabels:t,children:r,points:n}=e,i=y.useMemo(()=>n?.map(s=>{var c,u,m={x:(c=s.x)!==null&&c!==void 0?c:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ma(ma({},m),{},{value:s.value,payload:s.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[n]);return y.createElement($P,{value:t?i:void 0},r)}function DA(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:s}=e,{type:c,layout:u,connectNulls:m,needClip:h,shape:p}=s,g=R_(s,MV),_=ma(ma({},Ir(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:c,layout:u,connectNulls:m,strokeDasharray:i??s.strokeDasharray});return y.createElement(y.Fragment,null,n?.length>1&&y.createElement(E_,Lc({shapeType:"curve",option:p},_,{pathRef:r})),y.createElement(FV,{points:n,clipPathId:t,props:s}))}function YV(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function GV(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:c,strokeDasharray:u,isAnimationActive:m,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:_,width:x,height:w,onAnimationEnd:j,onAnimationStart:S}=r,O=i.current,C=Zc(c,"recharts-line-"),A=y.useRef(C),[k,D]=y.useState(!1),M=!k,z=y.useCallback(()=>{typeof j=="function"&&j(),D(!1)},[j]),W=y.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),Y=YV(n.current),re=y.useRef(0);A.current!==C&&(re.current=s.current,A.current=C);var X=re.current;return y.createElement(KV,{points:c,showLabels:M},r.children,y.createElement(Xc,{animationId:C,begin:h,duration:p,isActive:m,easing:g,onAnimationEnd:z,onAnimationStart:W,key:C},I=>{var se=kt(X,Y+X,I),pe=Math.min(se,Y),q;if(m)if(u){var R="".concat(u).split(/[,\s]+/gim).map(ne=>parseFloat(ne));q=HV(pe,Y,R)}else q=v2(Y,pe);else q=u==null?void 0:String(u);if(I>0&&Y>0&&(i.current=c,s.current=Math.max(s.current,pe)),O){var U=O.length/c.length,te=I===1?c:c.map((ne,we)=>{var Pe=Math.floor(we*U);if(O[Pe]){var F=O[Pe];return ma(ma({},ne),{},{x:kt(F.x,ne.x,I),y:kt(F.y,ne.y,I)})}return _?ma(ma({},ne),{},{x:kt(x*2,ne.x,I),y:kt(w/2,ne.y,I)}):ma(ma({},ne),{},{x:ne.x,y:ne.y})});return i.current=te,y.createElement(DA,{props:r,points:te,clipPathId:t,pathRef:n,strokeDasharray:q})}return y.createElement(DA,{props:r,points:c,clipPathId:t,pathRef:n,strokeDasharray:q})}),y.createElement(x_,{label:r.label}))}function VV(e){var{clipPathId:t,props:r}=e,n=y.useRef(null),i=y.useRef(0),s=y.useRef(null);return y.createElement(GV,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var WV=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:vt(e.payload,t)}};class XV extends y.Component{render(){var{hide:t,dot:r,points:n,className:i,xAxisId:s,yAxisId:c,top:u,left:m,width:h,height:p,id:g,needClip:_,zIndex:x}=this.props;if(t)return null;var w=st("recharts-line",i),j=g,{r:S,strokeWidth:O}=fV(r),C=XP(r),A=S*2+O,k=_?"url(#clipPath-".concat(C?"":"dots-").concat(j,")"):void 0;return y.createElement(Jr,{zIndex:x},y.createElement(_r,{className:w},_&&y.createElement("defs",null,y.createElement(f2,{clipPathId:j,xAxisId:s,yAxisId:c}),!C&&y.createElement("clipPath",{id:"clipPath-dots-".concat(j)},y.createElement("rect",{x:m-A/2,y:u-A/2,width:h+A,height:p+A}))),y.createElement(d2,{xAxisId:s,yAxisId:c,data:n,dataPointFormatter:WV,errorBarOffset:0},y.createElement(VV,{props:this.props,clipPathId:j}))),y.createElement(XY,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var y2={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ir.line,type:"linear"};function ZV(e){var t=xr(e,y2),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,connectNulls:u,dot:m,hide:h,isAnimationActive:p,label:g,legendType:_,xAxisId:x,yAxisId:w,id:j}=t,S=R_(t,RV),{needClip:O}=M_(x,w),C=D_(),A=Yo(),k=Pr(),D=Te(re=>dV(re,x,w,k,j));if(A!=="horizontal"&&A!=="vertical"||D==null||C==null)return null;var{height:M,width:z,x:W,y:Y}=C;return y.createElement(XV,Lc({},S,{id:j,connectNulls:u,dot:m,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,isAnimationActive:p,hide:h,label:g,legendType:_,xAxisId:x,yAxisId:w,points:D,layout:A,height:M,width:z,left:W,top:Y,needClip:O}))}function QV(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:c,bandSize:u,displayedData:m}=e;return m.map((h,p)=>{var g=vt(h,c);if(t==="horizontal"){var _=bE({axis:r,ticks:i,bandSize:u,entry:h,index:p}),x=Pt(g)?null:n.scale(g);return{x:_,y:x,value:g,payload:h}}var w=Pt(g)?null:r.scale(g),j=bE({axis:n,ticks:s,bandSize:u,entry:h,index:p});return w==null||j==null?null:{x:w,y:j,value:g,payload:h}}).filter(Boolean)}function JV(e){var t=xr(e,y2),r=Pr();return y.createElement(k_,{id:t.id,type:"line"},n=>y.createElement(y.Fragment,null,y.createElement(ZP,{legendPayload:UV(t)}),y.createElement(BV,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),y.createElement(JP,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),y.createElement(ZV,Lc({},t,{id:n}))))}var b2=y.memo(JV,uh);b2.displayName="Line";function Wo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:t2}function Xo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:t2}var eW="Invariant failed";function tW(e,t){throw new Error(eW)}function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xb.apply(null,arguments)}function om(e){return y.createElement(E_,xb({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var rW=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(ke(t))return t;var s=ke(n)||Pt(n);return s?t(n,i):(s||tW(),r)}},nW=(e,t,r)=>r,aW=(e,t)=>t,fu=J([Jm,aW],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),iW=J([fu],e=>e?.maxBarSize),oW=(e,t,r,n)=>n,sW=J([et,Jm,Wo,Xo,nW],(e,t,r,n,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),lW=(e,t,r)=>{var n=et(e),i=Wo(e,t),s=Xo(e,t);if(!(i==null||s==null))return n==="horizontal"?fb(e,"yAxis",s,r):fb(e,"xAxis",i,r)},cW=(e,t)=>{var r=et(e),n=Wo(e,t),i=Xo(e,t);if(!(n==null||i==null))return r==="horizontal"?hC(e,"xAxis",n):hC(e,"yAxis",i)},uW=J([sW,T8,cW],ZY),dW=(e,t,r)=>{var n,i,s=fu(e,t);if(s!=null){var c=Wo(e,t),u=Xo(e,t);if(!(c==null||u==null)){var m=et(e),h=jT(e),{maxBarSize:p}=s,g=Pt(p)?h:p,_,x;return m==="horizontal"?(_=Vi(e,"xAxis",c,r),x=Gi(e,"xAxis",c,r)):(_=Vi(e,"yAxis",u,r),x=Gi(e,"yAxis",u,r)),(n=(i=Fs(_,x,!0))!==null&&i!==void 0?i:g)!==null&&n!==void 0?n:0}}},_2=(e,t,r)=>{var n=et(e),i=Wo(e,t),s=Xo(e,t);if(!(i==null||s==null)){var c,u;return n==="horizontal"?(c=Vi(e,"xAxis",i,r),u=Gi(e,"xAxis",i,r)):(c=Vi(e,"yAxis",s,r),u=Gi(e,"yAxis",s,r)),Fs(c,u)}},fW=J([uW,jT,D8,ST,dW,_2,iW],rG),mW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Vi(e,"xAxis",n,r)},hW=(e,t,r)=>{var n=Xo(e,t);if(n!=null)return Vi(e,"yAxis",n,r)},pW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Gi(e,"xAxis",n,r)},gW=(e,t,r)=>{var n=Xo(e,t);if(n!=null)return Gi(e,"yAxis",n,r)},vW=J([fW,fu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),yW=J([lW,fu],nG),bW=J([dr,a0,mW,hW,pW,gW,vW,et,b8,_2,yW,fu,oW],(e,t,r,n,i,s,c,u,m,h,p,g,_)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:j}=m;if(!(g==null||c==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||i==null||s==null||h==null)){var{data:S}=g,O;if(S!=null&&S.length>0?O=S:O=x?.slice(w,j+1),O!=null)return VW({layout:u,barSettings:g,pos:c,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:O,offset:e,cells:_,dataStartIndex:w})}}),_W=["index"];function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wb.apply(null,arguments)}function xW(e,t){if(e==null)return{};var r,n,i=wW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var x2=y.createContext(void 0),jW=e=>{var t=y.useContext(x2);if(t!=null)return t.stackId;if(e!=null)return AI(e)},SW=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),EW=e=>{var t=y.useContext(x2);if(t!=null){var{stackId:r}=t;return"url(#".concat(SW(r,e),")")}},OW=e=>{var{index:t}=e,r=xW(e,_W),n=EW(t);return y.createElement(_r,wb({className:"recharts-bar-stack-layer",clipPath:n},r))},CW=["onMouseEnter","onMouseLeave","onClick"],AW=["value","background","tooltipPosition"],NW=["id"],kW=["onMouseEnter","onClick","onMouseLeave"];function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ti.apply(null,arguments)}function TA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TA(Object(r),!0).forEach(function(n){DW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DW(e,t,r){return(t=TW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TW(e){var t=PW(e,"string");return typeof t=="symbol"?t:t+""}function PW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sm(e,t){if(e==null)return{};var r,n,i=MW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function MW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RW=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Qs(r,t),payload:e}]},qW=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:s,hide:c,unit:u,tooltipType:m,id:h}=e,p={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Qs(s,t),hide:c,type:m,color:i,unit:u,graphicalItemId:h}};return y.createElement(N_,{tooltipEntrySettings:p})});function zW(e){var t=Te(Wi),{data:r,dataKey:n,background:i,allOtherBarProps:s}=e,{onMouseEnter:c,onMouseLeave:u,onClick:m}=s,h=sm(s,CW),p=O_(c,n,s.id),g=C_(u),_=A_(m,n,s.id);if(!i||r==null)return null;var x=Ro(i);return y.createElement(Jr,{zIndex:aG(i,ir.barBackground)},r.map((w,j)=>{var{value:S,background:O,tooltipPosition:C}=w,A=sm(w,AW);if(!O)return null;var k=p(w,j),D=g(w,j),M=_(w,j),z=zr(zr(zr(zr(zr({option:i,isActive:String(j)===t},A),{},{fill:"#eee"},O),x),_m(h,w,j)),{},{onMouseEnter:k,onMouseLeave:D,onClick:M,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return y.createElement(om,ti({key:"background-bar-".concat(j)},z))}))}function LW(e){var{showLabels:t,children:r,rects:n}=e,i=n?.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return zr(zr({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return y.createElement($P,{value:t?i:void 0},r)}function IW(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:s,dataKey:c}=e,u=Te(Wi),m=Te(h_),h=r&&String(s)===u&&(m==null||c===m),p=h?r:t;return h?y.createElement(Jr,{zIndex:ir.activeBar},y.createElement(om,ti({},n,{name:String(n.name)},i,{isActive:h,option:p,index:s,dataKey:c}))):y.createElement(om,ti({},n,{name:String(n.name)},i,{isActive:h,option:p,index:s,dataKey:c}))}function UW(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:s}=e;return y.createElement(om,ti({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:s}))}function BW(e){var t,{data:r,props:n}=e,i=(t=vn(n))!==null&&t!==void 0?t:{},{id:s}=i,c=sm(i,NW),{shape:u,dataKey:m,activeBar:h}=n,{onMouseEnter:p,onClick:g,onMouseLeave:_}=n,x=sm(n,kW),w=O_(p,m,s),j=C_(_),S=A_(g,m,s);return r?y.createElement(y.Fragment,null,r.map((O,C)=>y.createElement(OW,ti({index:C,key:"rectangle-".concat(O?.x,"-").concat(O?.y,"-").concat(O?.value,"-").concat(C),className:"recharts-bar-rectangle"},_m(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),h?y.createElement(IW,{shape:u,activeBar:h,baseProps:c,entry:O,index:C,dataKey:m}):y.createElement(UW,{shape:u,baseProps:c,entry:O,index:C,dataKey:m})))):null}function $W(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,onAnimationEnd:h,onAnimationStart:p}=t,g=r.current,_=Zc(t,"recharts-bar-"),[x,w]=y.useState(!1),j=!x,S=y.useCallback(()=>{typeof h=="function"&&h(),w(!1)},[h]),O=y.useCallback(()=>{typeof p=="function"&&p(),w(!0)},[p]);return y.createElement(LW,{showLabels:j,rects:n},y.createElement(Xc,{animationId:_,begin:c,duration:u,isActive:s,easing:m,onAnimationEnd:S,onAnimationStart:O,key:_},C=>{var A=C===1?n:n?.map((k,D)=>{var M=g&&g[D];if(M)return zr(zr({},k),{},{x:kt(M.x,k.x,C),y:kt(M.y,k.y,C),width:kt(M.width,k.width,C),height:kt(M.height,k.height,C)});if(i==="horizontal"){var z=kt(0,k.height,C),W=kt(k.stackedBarStart,k.y,C);return zr(zr({},k),{},{y:W,height:z})}var Y=kt(0,k.width,C),re=kt(k.stackedBarStart,k.x,C);return zr(zr({},k),{},{width:Y,x:re})});return C>0&&(r.current=A??null),A==null?null:y.createElement(_r,null,y.createElement(BW,{props:t,data:A}))}),y.createElement(x_,{label:t.label}),t.children)}function HW(e){var t=y.useRef(null);return y.createElement($W,{previousRectanglesRef:t,props:e})}var w2=0,FW=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:vt(e,t)}};class KW extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:s,yAxisId:c,needClip:u,background:m,id:h}=this.props;if(t||r==null)return null;var p=st("recharts-bar",i),g=h;return y.createElement(_r,{className:p,id:h},u&&y.createElement("defs",null,y.createElement(f2,{clipPathId:g,xAxisId:s,yAxisId:c})),y.createElement(_r,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},y.createElement(zW,{data:r,dataKey:n,background:m,allOtherBarProps:this.props}),y.createElement(HW,this.props)))}}var YW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:w2,xAxisId:0,yAxisId:0,zIndex:ir.bar};function GW(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:p}=e,{needClip:g}=M_(t,r),_=Yo(),x=Pr(),w=S_(e.children,du),j=Te(C=>bW(C,e.id,x,w));if(_!=="vertical"&&_!=="horizontal")return null;var S,O=j?.[0];return O==null||O.height==null||O.width==null?S=0:S=_==="vertical"?O.height/2:O.width/2,y.createElement(d2,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:FW,errorBarOffset:S},y.createElement(KW,ti({},e,{layout:_,needClip:g,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:p})))}function VW(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:c,yAxis:u,xAxisTicks:m,yAxisTicks:h,stackedData:p,displayedData:g,offset:_,cells:x,parentViewBox:w,dataStartIndex:j}=e,S=t==="horizontal"?u:c,O=p?S.scale.domain():null,C=NI({numericAxis:S}),A=S.scale(C);return g.map((k,D)=>{var M,z,W,Y,re,X;if(p){var I=p[D+j];if(I==null)return null;M=jI(I,O)}else M=vt(k,r),Array.isArray(M)||(M=[C,M]);var se=rW(n,w2)(M[1],D);if(t==="horizontal"){var pe,[q,R]=[u.scale(M[0]),u.scale(M[1])];z=_E({axis:c,ticks:m,bandSize:s,offset:i.offset,entry:k,index:D}),W=(pe=R??q)!==null&&pe!==void 0?pe:void 0,Y=i.size;var U=q-R;if(re=ta(U)?0:U,X={x:z,y:_.top,width:Y,height:_.height},Math.abs(se)>0&&Math.abs(re)<Math.abs(se)){var te=br(re||se)*(Math.abs(se)-Math.abs(re));W-=te,re+=te}}else{var[ne,we]=[c.scale(M[0]),c.scale(M[1])];if(z=ne,W=_E({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:k,index:D}),Y=we-ne,re=i.size,X={x:_.left,y:W,width:_.width,height:re},Math.abs(se)>0&&Math.abs(Y)<Math.abs(se)){var Pe=br(Y||se)*(Math.abs(se)-Math.abs(Y));Y+=Pe}}if(z==null||W==null||Y==null||re==null)return null;var F=zr(zr({},k),{},{stackedBarStart:A,x:z,y:W,width:Y,height:re,value:p?M:M[1],payload:k,background:X,tooltipPosition:{x:z+Y/2,y:W+re/2},parentViewBox:w},x&&x[D]&&x[D].props);return F}).filter(Boolean)}function WW(e){var t=xr(e,YW),r=jW(t.stackId),n=Pr();return y.createElement(k_,{id:t.id,type:"bar"},i=>y.createElement(y.Fragment,null,y.createElement(ZP,{legendPayload:RW(t)}),y.createElement(qW,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),y.createElement(JP,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),y.createElement(Jr,{zIndex:t.zIndex},y.createElement(GW,ti({},t,{id:i})))))}var j2=y.memo(WW,uh);j2.displayName="Bar";var XW=["domain","range"],ZW=["domain","range"];function PA(e,t){if(e==null)return{};var r,n,i=QW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function MA(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function S2(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=PA(e,XW),{domain:s,range:c}=t,u=PA(t,ZW);return!MA(r,s)||!MA(n,c)?!1:uh(i,u)}var JW=["dangerouslySetInnerHTML","ticks","scale"],eX=["id","scale"];function jb(){return jb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jb.apply(null,arguments)}function RA(e,t){if(e==null)return{};var r,n,i=tX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function rX(e){var t=Mt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(RY(e)):r.current!==e&&t(qY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(zY(r.current)),r.current=null)},[t]),null}var nX=e=>{var{xAxisId:t,className:r}=e,n=Te(a0),i=Pr(),s="xAxis",c=Te(O=>rP(O,s,t,i)),u=Te(O=>QT(O,t)),m=Te(O=>NH(O,t)),h=Te(O=>PT(O,t));if(u==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:_}=e,x=RA(e,JW),{id:w,scale:j}=h,S=RA(h,eX);return y.createElement(P_,jb({},x,S,{x:m.x,y:m.y,width:u.width,height:u.height,className:st("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:c,axisType:s}))},aX={allowDataOverflow:gr.allowDataOverflow,allowDecimals:gr.allowDecimals,allowDuplicatedCategory:gr.allowDuplicatedCategory,angle:gr.angle,axisLine:Ga.axisLine,height:gr.height,hide:!1,includeHidden:gr.includeHidden,interval:gr.interval,minTickGap:gr.minTickGap,mirror:gr.mirror,orientation:gr.orientation,padding:gr.padding,reversed:gr.reversed,scale:gr.scale,tick:gr.tick,tickCount:gr.tickCount,tickLine:Ga.tickLine,tickSize:Ga.tickSize,type:gr.type,xAxisId:0},iX=e=>{var t=xr(e,aX);return y.createElement(y.Fragment,null,y.createElement(rX,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(nX,t))},Sb=y.memo(iX,S2);Sb.displayName="XAxis";var oX=["dangerouslySetInnerHTML","ticks","scale"],sX=["id","scale"];function Eb(){return Eb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eb.apply(null,arguments)}function qA(e,t){if(e==null)return{};var r,n,i=lX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cX(e){var t=Mt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(LY(e)):r.current!==e&&t(IY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(UY(r.current)),r.current=null)},[t]),null}var uX=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,s=y.useRef(null),c=y.useRef(null),u=Te(a0),m=Pr(),h=Mt(),p="yAxis",g=Te(M=>JT(M,t)),_=Te(M=>DH(M,t)),x=Te(M=>rP(M,p,t,m)),w=Te(M=>MT(M,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!g||__(i)||y.isValidElement(i)||w==null)){var M=s.current;if(M){var z=M.getCalculatedWidth();Math.round(g.width)!==Math.round(z)&&h(BY({id:t,width:z}))}}},[x,g,h,i,t,n,w]),g==null||_==null||w==null)return null;var{dangerouslySetInnerHTML:j,ticks:S,scale:O}=e,C=qA(e,oX),{id:A,scale:k}=w,D=qA(w,sX);return y.createElement(P_,Eb({},C,D,{ref:s,labelRef:c,x:_.x,y:_.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:st("recharts-".concat(p," ").concat(p),r),viewBox:u,ticks:x,axisType:p}))},dX={allowDataOverflow:vr.allowDataOverflow,allowDecimals:vr.allowDecimals,allowDuplicatedCategory:vr.allowDuplicatedCategory,angle:vr.angle,axisLine:Ga.axisLine,hide:!1,includeHidden:vr.includeHidden,interval:vr.interval,minTickGap:vr.minTickGap,mirror:vr.mirror,orientation:vr.orientation,padding:vr.padding,reversed:vr.reversed,scale:vr.scale,tick:vr.tick,tickCount:vr.tickCount,tickLine:Ga.tickLine,tickSize:Ga.tickSize,type:vr.type,width:vr.width,yAxisId:0},fX=e=>{var t=xr(e,dX);return y.createElement(y.Fragment,null,y.createElement(cX,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(uX,t))},Ob=y.memo(fX,S2);Ob.displayName="YAxis";var mX=(e,t)=>t,q_=J([mX,et,DT,mr,yP,ui,G9,dr],e7),z_=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},E2=In("mouseClick"),O2=Gc();O2.startListening({actionCreator:E2,effect:(e,t)=>{var r=e.payload,n=q_(t.getState(),z_(r));n?.activeIndex!=null&&t.dispatch(KH({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Cb=In("mouseMove"),C2=Gc(),Zd=null;C2.startListening({actionCreator:Cb,effect:(e,t)=>{var r=e.payload;Zd!==null&&cancelAnimationFrame(Zd);var n=z_(r);Zd=requestAnimationFrame(()=>{var i=t.getState(),s=l_(i,i.tooltip.settings.shared);if(s==="axis"){var c=q_(i,n);c?.activeIndex!=null?t.dispatch(uP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):t.dispatch(cP())}Zd=null})}});function hX(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var zA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},A2=Qr({name:"rootProps",initialState:zA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:zA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),pX=A2.reducer,{updateOptions:gX}=A2.actions,N2=Qr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:vX}=N2.actions,yX=N2.reducer,k2=In("keyDown"),D2=In("focus"),L_=Gc();L_.startListening({actionCreator:k2,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=c_(i,sl(r),ou(r),cu(r)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var m=ui(r);if(s==="Enter"){var h=em(r,"axis","hover",String(i.index));t.dispatch(hb({active:!i.active,activeIndex:i.index,activeCoordinate:h}));return}var p=RH(r),g=p==="left-to-right"?1:-1,_=s==="ArrowRight"?1:-1,x=u+_*g;if(!(m==null||x>=m.length||x<0)){var w=em(r,"axis","hover",String(x));t.dispatch(hb({active:!0,activeIndex:x.toString(),activeCoordinate:w}))}}}}}});L_.startListening({actionCreator:D2,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",c=em(r,"axis","hover",String(s));t.dispatch(hb({active:!0,activeIndex:s,activeCoordinate:c}))}}}});var Rn=In("externalEvent"),T2=Gc(),my=new Map;T2.startListening({actionCreator:Rn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,s=my.get(i);s!==void 0&&cancelAnimationFrame(s);var c=requestAnimationFrame(()=>{try{var u=t.getState(),m={activeCoordinate:D9(u),activeDataKey:h_(u),activeIndex:Wi(u),activeLabel:xP(u),activeTooltipIndex:Wi(u),isTooltipActive:T9(u)};r(m,n)}finally{my.delete(i)}});my.set(i,c)}}});var bX=J([il],e=>e.tooltipItemPayloads),_X=J([bX,lu,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(u=>u.settings.graphicalItemId===n);if(i!=null){var{positions:s}=i;if(s!=null){var c=t(s,r);return c}}}),P2=In("touchMove"),M2=Gc();M2.startListening({actionCreator:P2,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=l_(n,n.tooltip.settings.shared);if(i==="axis"){var s=r.touches[0];if(s==null)return;var c=q_(n,z_({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));c?.activeIndex!=null&&t.dispatch(uP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,m=r.touches[0];if(document.elementFromPoint==null||m==null)return;var h=document.elementFromPoint(m.clientX,m.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(Jk),g=(u=h.getAttribute(eD))!==null&&u!==void 0?u:void 0,_=ol(n).find(j=>j.id===g);if(p==null||_==null||g==null)return;var{dataKey:x}=_,w=_X(n,p,g);t.dispatch(lP({activeDataKey:x,activeIndex:p,activeCoordinate:w,activeGraphicalItemId:g}))}}}});var xX=xk({brush:iG,cartesianAxis:$Y,chartData:D7,errorBars:tV,graphicalItems:VK,layout:vI,legend:j6,options:O7,polarAxis:lK,polarOptions:yX,referenceElements:fG,rootProps:pX,tooltip:YH,zIndex:h7}),wX=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return $4({reducer:xX,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([O2.middleware,C2.middleware,L_.middleware,T2.middleware,M2.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(qk({type:"raf"}))},devTools:{serialize:{replacer:hX},name:"recharts-".concat(r)}})};function R2(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Pr(),s=y.useRef(null);if(i)return r;s.current==null&&(s.current=wX(t,n));var c=Zb;return y.createElement(kV,{context:c,store:s.current},r)}function jX(e){var{layout:t,margin:r}=e,n=Mt(),i=Pr();return y.useEffect(()=>{i||(n(hI(t)),n(mI(r)))},[n,i,t,r]),null}var q2=y.memo(jX,uh);function z2(e){var t=Mt();return y.useEffect(()=>{t(gX(e))},[t,e]),null}function LA(e){var{zIndex:t,isPanorama:r}=e,n=y.useRef(null),i=Mt();return y.useLayoutEffect(()=>(n.current&&i(f7({zIndex:t,element:n.current,isPanorama:r})),()=>{i(m7({zIndex:t,isPanorama:r}))}),[i,t,r]),y.createElement("g",{tabIndex:-1,ref:n})}function IA(e){var{children:t,isPanorama:r}=e,n=Te(r7);if(!n||n.length===0)return t;var i=n.filter(c=>c<0),s=n.filter(c=>c>0);return y.createElement(y.Fragment,null,i.map(c=>y.createElement(LA,{key:c,zIndex:c,isPanorama:r})),t,s.map(c=>y.createElement(LA,{key:c,zIndex:c,isPanorama:r})))}var SX=["children"];function EX(e,t){if(e==null)return{};var r,n,i=OX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lm.apply(null,arguments)}var CX={width:"100%",height:"100%",display:"block"},AX=y.forwardRef((e,t)=>{var r=oD(),n=sD(),i=yD();if(!ya(r)||!ya(n))return null;var{children:s,otherAttributes:c,title:u,desc:m}=e,h,p;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=i?0:void 0,typeof c.role=="string"?p=c.role:p=i?"application":void 0),y.createElement(zN,lm({},c,{title:u,desc:m,role:p,tabIndex:h,width:r,height:n,style:CX,ref:t}),s)}),NX=e=>{var{children:t}=e,r=Te(Mm);if(!r)return null;var{width:n,height:i,y:s,x:c}=r;return y.createElement(zN,{width:n,height:i,x:c,y:s},t)},UA=y.forwardRef((e,t)=>{var{children:r}=e,n=EX(e,SX),i=Pr();return i?y.createElement(NX,null,y.createElement(IA,{isPanorama:!0},r)):y.createElement(AX,lm({ref:t},n),y.createElement(IA,{isPanorama:!1},r))});function kX(){var e=Mt(),[t,r]=y.useState(null),n=Te(RI);return y.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;zt(s)&&s!==n&&e(gI(s))}},[t,e,n]),r}function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function DX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(n){TX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TX(e,t,r){return(t=PX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PX(e){var t=MX(e,"string");return typeof t=="symbol"?t:t+""}function MX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ho.apply(null,arguments)}var RX=()=>(U7(),null);function cm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var qX=y.forwardRef((e,t)=>{var r,n,i=y.useRef(null),[s,c]=y.useState({containerWidth:cm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:cm((n=e.style)===null||n===void 0?void 0:n.height)}),u=y.useCallback((h,p)=>{c(g=>{var _=Math.round(h),x=Math.round(p);return g.containerWidth===_&&g.containerHeight===x?g:{containerWidth:_,containerHeight:x}})},[]),m=y.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();u(p,g);var _=w=>{var{width:j,height:S}=w[0].contentRect;u(j,S)},x=new ResizeObserver(_);x.observe(h),i.current=x}},[t,u]);return y.useEffect(()=>()=>{var h=i.current;h?.disconnect()},[u]),y.createElement(y.Fragment,null,y.createElement(qm,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",Ho({ref:m},e)))}),zX=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,s]=y.useState({containerWidth:cm(r),containerHeight:cm(n)}),c=y.useCallback((m,h)=>{s(p=>{var g=Math.round(m),_=Math.round(h);return p.containerWidth===g&&p.containerHeight===_?p:{containerWidth:g,containerHeight:_}})},[]),u=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:h,height:p}=m.getBoundingClientRect();c(h,p)}},[t,c]);return y.createElement(y.Fragment,null,y.createElement(qm,{width:i.containerWidth,height:i.containerHeight}),y.createElement("div",Ho({ref:u},e)))}),LX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(qm,{width:r,height:n}),y.createElement("div",Ho({ref:t},e)))}),IX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return Wa(r)||Wa(n)?y.createElement(zX,Ho({},e,{ref:t})):y.createElement(LX,Ho({},e,{ref:t}))});function UX(e){return e===!0?qX:IX}var BX=y.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:c,onDoubleClick:u,onMouseDown:m,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:_,onTouchEnd:x,onTouchMove:w,onTouchStart:j,style:S,width:O,responsive:C,dispatchTouchEvents:A=!0}=e,k=y.useRef(null),D=Mt(),[M,z]=y.useState(null),[W,Y]=y.useState(null),re=kX(),X=i0(),I=X?.width>0?X.width:O,se=X?.height>0?X.height:i,pe=y.useCallback(V=>{re(V),typeof t=="function"&&t(V),z(V),Y(V),V!=null&&(k.current=V)},[re,t,z,Y]),q=y.useCallback(V=>{D(E2(V)),D(Rn({handler:s,reactEvent:V}))},[D,s]),R=y.useCallback(V=>{D(Cb(V)),D(Rn({handler:h,reactEvent:V}))},[D,h]),U=y.useCallback(V=>{D(cP()),D(Rn({handler:p,reactEvent:V}))},[D,p]),te=y.useCallback(V=>{D(Cb(V)),D(Rn({handler:g,reactEvent:V}))},[D,g]),ne=y.useCallback(()=>{D(D2())},[D]),we=y.useCallback(V=>{D(k2(V.key))},[D]),Pe=y.useCallback(V=>{D(Rn({handler:c,reactEvent:V}))},[D,c]),F=y.useCallback(V=>{D(Rn({handler:u,reactEvent:V}))},[D,u]),$=y.useCallback(V=>{D(Rn({handler:m,reactEvent:V}))},[D,m]),Se=y.useCallback(V=>{D(Rn({handler:_,reactEvent:V}))},[D,_]),De=y.useCallback(V=>{D(Rn({handler:j,reactEvent:V}))},[D,j]),Ie=y.useCallback(V=>{A&&D(P2(V)),D(Rn({handler:w,reactEvent:V}))},[D,A,w]),G=y.useCallback(V=>{D(Rn({handler:x,reactEvent:V}))},[D,x]),_e=UX(C);return y.createElement(AP.Provider,{value:M},y.createElement(LN.Provider,{value:W},y.createElement(_e,{width:I??S?.width,height:se??S?.height,className:st("recharts-wrapper",n),style:DX({position:"relative",cursor:"default",width:I,height:se},S),onClick:q,onContextMenu:Pe,onDoubleClick:F,onFocus:ne,onKeyDown:we,onMouseDown:$,onMouseEnter:R,onMouseLeave:U,onMouseMove:te,onMouseUp:Se,onTouchEnd:G,onTouchMove:Ie,onTouchStart:De,ref:pe},y.createElement(RX,null),r)))}),$X=["width","height","responsive","children","className","style","compact","title","desc"];function HX(e,t){if(e==null)return{};var r,n,i=FX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function FX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var L2=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:s,className:c,style:u,compact:m,title:h,desc:p}=e,g=HX(e,$X),_=vn(g);return m?y.createElement(y.Fragment,null,y.createElement(qm,{width:r,height:n}),y.createElement(UA,{otherAttributes:_,title:h,desc:p},s)):y.createElement(BX,{className:c,style:u,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(UA,{otherAttributes:_,title:h,desc:p,ref:t},y.createElement(mG,null,s)))});function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ab.apply(null,arguments)}var KX={top:5,right:5,bottom:5,left:5},YX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:KX,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},I2=y.forwardRef(function(t,r){var n,i=xr(t.categoricalChartProps,YX),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,p={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(R2,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:s},y.createElement(n2,{chartData:h.data}),y.createElement(q2,{layout:i.layout,margin:i.margin}),y.createElement(z2,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(L2,Ab({},i,{ref:r})))}),GX=["axis"],VX=y.forwardRef((e,t)=>y.createElement(I2,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:GX,tooltipPayloadSearcher:b_,categoricalChartProps:e,ref:t})),WX=["axis","item"],XX=y.forwardRef((e,t)=>y.createElement(I2,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:WX,tooltipPayloadSearcher:b_,categoricalChartProps:e,ref:t}));function ZX(e){var t=Mt();return y.useEffect(()=>{t(vX(e))},[t,e]),null}var QX=["layout"];function Nb(){return Nb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nb.apply(null,arguments)}function JX(e,t){if(e==null)return{};var r,n,i=eZ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tZ={top:5,right:5,bottom:5,left:5},U2={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:tZ,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},rZ=y.forwardRef(function(t,r){var n,i=xr(t.categoricalChartProps,U2),{layout:s}=i,c=JX(i,QX),{chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p}=t,g={chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return y.createElement(R2,{preloadedState:{options:g},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:u},y.createElement(n2,{chartData:i.data}),y.createElement(q2,{layout:s,margin:i.margin}),y.createElement(z2,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(ZX,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),y.createElement(L2,Nb({},c,{ref:r})))});function $A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function HA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(r),!0).forEach(function(n){nZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nZ(e,t,r){return(t=aZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aZ(e){var t=iZ(e,"string");return typeof t=="symbol"?t:t+""}function iZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oZ=["item"],sZ=HA(HA({},U2),{},{layout:"centric",startAngle:0,endAngle:360}),lZ=y.forwardRef((e,t)=>{var r=xr(e,sZ);return y.createElement(rZ,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:oZ,tooltipPayloadSearcher:b_,categoricalChartProps:r,ref:t})});function cZ({project:e,companyId:t,onBack:r}){const[n,i]=y.useState(!0),[s,c]=y.useState("week"),[u,m]=y.useState({areas:[],tickets:[],crewHistory:[],disposalLoads:[],dailyReports:[]});y.useEffect(()=>{e?.id&&h()},[e?.id,s]);const h=async()=>{i(!0);try{const C=new Date,A=new Date;s==="week"?A.setDate(C.getDate()-7):A.setDate(C.getDate()-30);const k=A.toISOString().split("T")[0],D=s==="week"?7:30,[M,z,W,Y]=await Promise.all([ye.getAreas(e.id),ye.getTMTickets?.(e.id)||[],ye.getDisposalLoadsHistory?.(e.id,D)||[],ye.getDailyReports?.(e.id)||[]]),re=[],X=new Date(A);for(;X<=C;){const I=X.toISOString().split("T")[0];try{const se=await ye.getCrewCheckin(e.id,I);re.push({date:I,count:se?.workers?.length||0,dayName:X.toLocaleDateString("en-US",{weekday:"short"})})}catch{re.push({date:I,count:0,dayName:X.toLocaleDateString("en-US",{weekday:"short"})})}X.setDate(X.getDate()+1)}m({areas:M,tickets:z.filter(I=>I.work_date>=k),crewHistory:re,disposalLoads:W,dailyReports:Y.filter(I=>I.report_date>=k)})}catch(C){console.error("Error loading metrics:",C)}finally{i(!1)}},p=y.useRef(null),g=y.useCallback(()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{h()},300)},[e?.id,s]);y.useEffect(()=>{if(!e?.id)return;const C=[],A=ye.subscribeToAreas?.(e.id,g);A&&C.push(A);const k=ye.subscribeToCrewCheckins?.(e.id,g);k&&C.push(k);const D=ye.subscribeToTMTickets?.(e.id,g);D&&C.push(D);const M=ye.subscribeToHaulOffs?.(e.id,g);M&&C.push(M);const z=ye.subscribeToDailyReports?.(e.id,g);return z&&C.push(z),()=>{p.current&&clearTimeout(p.current),C.forEach(W=>ye.unsubscribe?.(W))}},[e?.id,g]);const _=y.useMemo(()=>{const{areas:C,tickets:A,crewHistory:k,disposalLoads:D,dailyReports:M}=u,z=C.length,W=C.filter($=>$.status==="done").length,Y=C.filter($=>$.status==="working").length,re=C.filter($=>$.status==="not_started").length,X=z>0?Math.round(W/z*100):0,I=k.reduce(($,Se)=>$+Se.count,0),se=k.length>0&&Math.round(I/k.filter($=>$.count>0).length*10)/10||0,pe=k.filter($=>$.count>0).length,q=A.filter($=>$.status==="pending"||$.status==="draft").length,R=A.filter($=>$.status==="signed"||$.status==="approved").length,U=A.reduce(($,Se)=>$+(Se.total_amount||0),0),te=D.reduce(($,Se)=>$+(Se.load_count||0),0),ne=0,we=M.filter($=>$.submitted).length,Pe=s==="week"?7:30,F=x(M);return{progress:{totalAreas:z,completedAreas:W,inProgressAreas:Y,notStartedAreas:re,progressPercent:X},crew:{totalManDays:I,avgCrewSize:se,daysWithCrew:pe,history:k},tickets:{total:A.length,pending:q,signed:R,totalValue:U},disposal:{totalLoads:te,totalTonnage:ne},reports:{submitted:we,due:Pe,streak:F}}},[u,s]);function x(C){if(!C.length)return 0;const A=[...new Set(C.filter(z=>z.submitted).map(z=>z.report_date))].sort().reverse();let k=0;const D=new Date().toISOString().split("T")[0];let M=new Date(D);for(let z=0;z<30;z++){const W=M.toISOString().split("T")[0];if(A.includes(W))k++,M.setDate(M.getDate()-1);else break}return k}const w={primary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",muted:"#6b7280",purple:"#8b5cf6"},j=[w.success,w.primary,w.muted],S=[{name:"Completed",value:_.progress.completedAreas},{name:"In Progress",value:_.progress.inProgressAreas},{name:"Not Started",value:_.progress.notStartedAreas}].filter(C=>C.value>0),O=y.useMemo(()=>{const C={};return u.tickets.forEach(A=>{const k=A.work_date;C[k]=(C[k]||0)+1}),_.crew.history.map(A=>({...A,tickets:C[A.date]||0}))},[u.tickets,_.crew.history]);return n?d.jsxs("div",{className:"foreman-metrics loading",children:[d.jsxs("div",{className:"metrics-header",children:[d.jsxs("button",{className:"back-btn",onClick:r,children:[d.jsx(cr,{size:20}),"Back"]}),d.jsx("h2",{children:"Project Metrics"})]}),d.jsxs("div",{className:"loading-state",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{children:"Loading metrics..."})]})]}):d.jsxs("div",{className:"foreman-metrics",children:[d.jsxs("div",{className:"metrics-header",children:[d.jsxs("button",{className:"back-btn",onClick:r,children:[d.jsx(cr,{size:20}),"Back"]}),d.jsx("h2",{children:"Project Metrics"}),d.jsxs("div",{className:"time-toggle",children:[d.jsx("button",{className:s==="week"?"active":"",onClick:()=>c("week"),children:"7 Days"}),d.jsx("button",{className:s==="month"?"active":"",onClick:()=>c("month"),children:"30 Days"})]})]}),d.jsxs("div",{className:"summary-cards",children:[d.jsxs("div",{className:"summary-card progress-card",children:[d.jsx("div",{className:"card-icon",children:d.jsx(JA,{size:24})}),d.jsxs("div",{className:"card-content",children:[d.jsxs("span",{className:"card-value",children:[_.progress.progressPercent,"%"]}),d.jsx("span",{className:"card-label",children:"Complete"})]}),d.jsxs("div",{className:"card-detail",children:[_.progress.completedAreas,"/",_.progress.totalAreas," areas"]})]}),d.jsxs("div",{className:"summary-card crew-card",children:[d.jsx("div",{className:"card-icon",children:d.jsx(eN,{size:24})}),d.jsxs("div",{className:"card-content",children:[d.jsx("span",{className:"card-value",children:_.crew.totalManDays}),d.jsx("span",{className:"card-label",children:"Man-Days"})]}),d.jsxs("div",{className:"card-detail",children:["Avg ",_.crew.avgCrewSize," workers/day"]})]}),d.jsxs("div",{className:"summary-card tickets-card",children:[d.jsx("div",{className:"card-icon",children:d.jsx(Fo,{size:24})}),d.jsxs("div",{className:"card-content",children:[d.jsx("span",{className:"card-value",children:_.tickets.total}),d.jsx("span",{className:"card-label",children:"Time & Material"})]}),d.jsxs("div",{className:"card-detail",children:[_.tickets.signed," signed, ",_.tickets.pending," pending"]})]}),d.jsxs("div",{className:"summary-card disposal-card",children:[d.jsx("div",{className:"card-icon",children:d.jsx(hf,{size:24})}),d.jsxs("div",{className:"card-content",children:[d.jsx("span",{className:"card-value",children:_.disposal.totalLoads}),d.jsx("span",{className:"card-label",children:"Disposal Loads"})]}),d.jsxs("div",{className:"card-detail",children:[_.disposal.totalTonnage.toFixed(1)," tons"]})]})]}),d.jsxs("div",{className:"charts-grid",children:[d.jsxs("div",{className:"chart-card",children:[d.jsx("h3",{children:"Area Progress"}),S.length>0?d.jsx(Mv,{width:"100%",height:200,children:d.jsxs(lZ,{children:[d.jsx(e2,{data:S,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",label:({name:C,value:A})=>`${C}: ${A}`,labelLine:!1,children:S.map((C,A)=>d.jsx(du,{fill:j[A%j.length]},`cell-${A}`))}),d.jsx(Qv,{})]})}):d.jsx("div",{className:"no-data",children:"No area data"})]}),d.jsxs("div",{className:"chart-card",children:[d.jsx("h3",{children:"Daily Crew Size"}),d.jsx(Mv,{width:"100%",height:200,children:d.jsxs(XX,{data:_.crew.history,children:[d.jsx(_b,{strokeDasharray:"3 3",opacity:.3}),d.jsx(Sb,{dataKey:"dayName",tick:{fontSize:12}}),d.jsx(Ob,{tick:{fontSize:12}}),d.jsx(Qv,{formatter:C=>[C,"Workers"],labelFormatter:C=>`Day: ${C}`}),d.jsx(j2,{dataKey:"count",fill:w.primary,radius:[4,4,0,0]})]})})]}),d.jsxs("div",{className:"chart-card",children:[d.jsx("h3",{children:"Time & Material Tickets by Day"}),d.jsx(Mv,{width:"100%",height:200,children:d.jsxs(VX,{data:O,children:[d.jsx(_b,{strokeDasharray:"3 3",opacity:.3}),d.jsx(Sb,{dataKey:"dayName",tick:{fontSize:12}}),d.jsx(Ob,{tick:{fontSize:12}}),d.jsx(Qv,{formatter:C=>[C,"Tickets"]}),d.jsx(b2,{type:"monotone",dataKey:"tickets",stroke:w.success,strokeWidth:2,dot:{fill:w.success,strokeWidth:2}})]})})]}),d.jsxs("div",{className:"chart-card activity-card",children:[d.jsx("h3",{children:"Activity Summary"}),d.jsxs("div",{className:"activity-list",children:[d.jsxs("div",{className:"activity-item",children:[d.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.success}20`,color:w.success},children:d.jsx(Jn,{size:20})}),d.jsxs("div",{className:"activity-info",children:[d.jsx("span",{className:"activity-label",children:"Days with Crew"}),d.jsxs("span",{className:"activity-value",children:[_.crew.daysWithCrew," of ",s==="week"?7:30]})]})]}),d.jsxs("div",{className:"activity-item",children:[d.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.primary}20`,color:w.primary},children:d.jsx(yq,{size:20})}),d.jsxs("div",{className:"activity-info",children:[d.jsx("span",{className:"activity-label",children:"Reports Submitted"}),d.jsx("span",{className:"activity-value",children:_.reports.submitted})]})]}),d.jsxs("div",{className:"activity-item",children:[d.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.warning}20`,color:w.warning},children:d.jsx(Mo,{size:20})}),d.jsxs("div",{className:"activity-info",children:[d.jsx("span",{className:"activity-label",children:"Report Streak"}),d.jsxs("span",{className:"activity-value",children:[_.reports.streak," days"]})]})]}),_.tickets.totalValue>0&&d.jsxs("div",{className:"activity-item",children:[d.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.purple}20`,color:w.purple},children:d.jsx(bq,{size:20})}),d.jsxs("div",{className:"activity-info",children:[d.jsx("span",{className:"activity-label",children:"Time & Material Value"}),d.jsxs("span",{className:"activity-value",children:["$",_.tickets.totalValue.toLocaleString()]})]})]})]})]})]}),d.jsx("style",{children:`
        .foreman-metrics {
          padding: 1rem;
          max-width: 100%;
          overflow-x: hidden;
        }

        .foreman-metrics.loading {
          min-height: 400px;
        }

        .loading-state {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 3rem;
          color: var(--text-secondary);
        }

        .metrics-header {
          display: flex;
          align-items: center;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
        }

        .metrics-header h2 {
          flex: 1;
          margin: 0;
          font-size: 1.25rem;
          color: var(--text-primary);
        }

        .back-btn {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: var(--bg-elevated);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          color: var(--text-primary);
          cursor: pointer;
          font-size: 0.875rem;
        }

        .back-btn:hover {
          background: var(--bg-tertiary);
        }

        .time-toggle {
          display: flex;
          background: var(--bg-elevated);
          border-radius: 8px;
          padding: 4px;
          gap: 4px;
        }

        .time-toggle button {
          padding: 0.5rem 1rem;
          border: none;
          background: transparent;
          border-radius: 6px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.875rem;
          transition: all 0.2s;
        }

        .time-toggle button.active {
          background: var(--primary-color, #3b82f6);
          color: white;
        }

        .summary-cards {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        @media (min-width: 640px) {
          .summary-cards {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        .summary-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .card-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .progress-card .card-icon {
          background: #dbeafe;
          color: #3b82f6;
        }

        .crew-card .card-icon {
          background: #dcfce7;
          color: #22c55e;
        }

        .tickets-card .card-icon {
          background: #fef3c7;
          color: #f59e0b;
        }

        .disposal-card .card-icon {
          background: #f3e8ff;
          color: #8b5cf6;
        }

        [data-theme="dark"] .progress-card .card-icon {
          background: #1e3a5f;
        }

        [data-theme="dark"] .crew-card .card-icon {
          background: #14532d;
        }

        [data-theme="dark"] .tickets-card .card-icon {
          background: #451a03;
        }

        [data-theme="dark"] .disposal-card .card-icon {
          background: #3b0764;
        }

        .card-content {
          display: flex;
          flex-direction: column;
        }

        .card-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: var(--text-primary);
          line-height: 1.2;
        }

        .card-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .card-detail {
          font-size: 0.75rem;
          color: var(--text-secondary);
          margin-top: auto;
        }

        .charts-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        @media (min-width: 640px) {
          .charts-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }

        .chart-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
        }

        .chart-card h3 {
          margin: 0 0 1rem 0;
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        .no-data {
          height: 200px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: var(--text-secondary);
          font-size: 0.875rem;
        }

        .activity-card {
          grid-column: 1 / -1;
        }

        @media (min-width: 640px) {
          .activity-card {
            grid-column: auto;
          }
        }

        .activity-list {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
        }

        .activity-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .activity-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .activity-info {
          display: flex;
          flex-direction: column;
          flex: 1;
        }

        .activity-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
        }

        .activity-value {
          font-size: 1rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        /* Recharts customization */
        .recharts-cartesian-grid-horizontal line,
        .recharts-cartesian-grid-vertical line {
          stroke: var(--border-color);
        }

        .recharts-text {
          fill: var(--text-secondary);
        }

        .recharts-tooltip-wrapper {
          outline: none;
        }

        .recharts-default-tooltip {
          background: var(--bg-card) !important;
          border: 1px solid var(--border-color) !important;
          border-radius: 8px !important;
        }

        .recharts-tooltip-label {
          color: var(--text-primary) !important;
        }

        .recharts-tooltip-item {
          color: var(--text-secondary) !important;
        }
      `})]})}const hy={crew:{id:"crew",label:"Crew Check-in",icon:eN,description:"Log who's on site today"},tm:{id:"tm",label:"Time & Material",icon:Fo,description:"Create time & material ticket"},report:{id:"report",label:"Daily Report",icon:QA,description:"Submit end-of-day report"},progress:{id:"progress",label:"Update Progress",icon:tN,description:"Mark tasks complete"},disposal:{id:"disposal",label:"Disposal Loads",icon:hf,description:"Log haul-off loads"},docs:{id:"docs",label:"Documents",icon:wq,description:"View project files"},metrics:{id:"metrics",label:"Project Metrics",icon:xq,description:"View charts & trends"},punchlist:{id:"punchlist",label:"Punch List",icon:_q,description:"View & resolve punch items"},injury:{id:"injury",label:"Report Injury",icon:dm,description:"Log safety incident",isDanger:!0}},FA=["crew","tm","report","progress"],KA=e=>`fm_pinned_${e}`;function uZ({project:e,todayStatus:t,progress:r,areasWorking:n,areasDone:i,areasRemaining:s,punchListOpenCount:c,onNavigate:u,onShowToast:m}){const[h,p]=y.useState(()=>{try{const k=localStorage.getItem(KA(e?.id));return k?JSON.parse(k):FA}catch{return FA}}),[g,_]=y.useState(!1),[x,w]=y.useState(!0);y.useEffect(()=>{if(e?.id)try{localStorage.setItem(KA(e.id),JSON.stringify(h))}catch{}},[h,e?.id]);const j=y.useCallback(k=>{p(D=>D.includes(k)?D.length<=1?(m?.("Keep at least one pinned action","info"),D):D.filter(M=>M!==k):D.length>=5?(m?.("Maximum 5 pinned actions","info"),D):[...D,k])},[m]),S=y.useMemo(()=>Object.keys(hy).filter(k=>!h.includes(k)),[h]),O=y.useCallback(k=>{switch(k){case"crew":return{done:t.crewCheckedIn,badge:t.crewCheckedIn?`${t.crewCount} on site`:null,status:t.crewCheckedIn?"Done today":"Not started"};case"tm":return{done:!1,badge:t.tmTicketsToday>0?`${t.tmTicketsToday} today`:null,status:t.tmTicketsToday>0?`${t.tmTicketsToday} created`:"Create new"};case"report":return{done:t.dailyReportDone,badge:null,status:t.dailyReportDone?"Submitted":"Not submitted"};case"progress":return{done:s===0,badge:s>0?`${s} left`:null,status:`${r}% complete`};case"disposal":return{done:!1,badge:t.disposalLoadsToday>0?`${t.disposalLoadsToday} today`:null,status:t.disposalLoadsToday>0?`${t.disposalLoadsToday} logged`:"Log loads"};case"punchlist":return{done:c===0&&c!==void 0,badge:c>0?`${c} open`:null,status:c>0?`${c} items open`:"All clear"};default:return{done:!1,badge:null,status:null}}},[t,r,s]),C=k=>{const D=hy[k];if(!D)return null;const M=D.icon,z=O(k);return d.jsxs("div",{className:"fm-pinned-card-wrapper",children:[d.jsxs("button",{className:`fm-pinned-card ${z.done?"completed":""} ${D.isDanger?"danger":""}`,onClick:()=>!g&&u(k),disabled:g,children:[d.jsx("div",{className:"fm-pinned-icon",children:d.jsx(M,{size:28})}),d.jsx("span",{className:"fm-pinned-label",children:D.label}),z.badge&&!g&&d.jsx("span",{className:"fm-pinned-badge",children:z.badge}),z.done&&!g&&d.jsx("div",{className:"fm-pinned-check",children:d.jsx(Jn,{size:18})})]}),g&&d.jsx("button",{className:"fm-pin-toggle pinned",onClick:()=>j(k),"aria-label":`Unpin ${D.label}`,children:d.jsx(Sq,{size:16})})]},k)},A=k=>{const D=hy[k];if(!D)return null;const M=D.icon,z=O(k);return d.jsxs("div",{className:"fm-action-row-wrapper",children:[d.jsxs("button",{className:`fm-action-row ${D.isDanger?"danger":""}`,onClick:()=>!g&&u(k),disabled:g,children:[d.jsx(M,{size:20}),d.jsx("span",{className:"fm-action-label",children:D.label}),z.badge&&!g&&d.jsx("span",{className:"fm-action-badge",children:z.badge})]}),g&&d.jsx("button",{className:"fm-pin-toggle",onClick:()=>j(k),"aria-label":`Pin ${D.label}`,children:d.jsx(Eq,{size:16})})]},k)};return d.jsxs("div",{className:"fm-landing",children:[d.jsxs("button",{className:"fm-metrics-snapshot",onClick:()=>u("metrics"),"aria-label":"View full project metrics",children:[d.jsxs("div",{className:"fm-snapshot-header",children:[d.jsx(JA,{size:18}),d.jsx("span",{children:"Project Overview"}),d.jsx(pf,{size:16,className:"fm-snapshot-arrow"})]}),d.jsxs("div",{className:"fm-snapshot-stats",children:[d.jsxs("div",{className:"fm-snapshot-stat main",children:[d.jsxs("span",{className:"fm-snapshot-value",children:[r,"%"]}),d.jsx("span",{className:"fm-snapshot-label",children:"Complete"})]}),d.jsx("div",{className:"fm-snapshot-divider"}),d.jsxs("div",{className:"fm-snapshot-stat",children:[d.jsx("span",{className:"fm-snapshot-value",children:n}),d.jsx("span",{className:"fm-snapshot-label",children:"In Progress"})]}),d.jsxs("div",{className:"fm-snapshot-stat",children:[d.jsx("span",{className:"fm-snapshot-value",children:i}),d.jsx("span",{className:"fm-snapshot-label",children:"Done"})]}),d.jsxs("div",{className:"fm-snapshot-stat",children:[d.jsx("span",{className:"fm-snapshot-value",children:s}),d.jsx("span",{className:"fm-snapshot-label",children:"Remaining"})]})]}),t.crewCheckedIn&&d.jsxs("div",{className:"fm-snapshot-today",children:[d.jsx(Mo,{size:14}),d.jsxs("span",{children:[t.crewCount," crew on site today"]})]})]}),d.jsxs("div",{className:"fm-section-header",children:[d.jsx("h2",{children:"Quick Actions"}),d.jsx("button",{className:`fm-edit-btn ${g?"active":""}`,onClick:()=>_(!g),"aria-label":g?"Done editing":"Customize actions",children:g?"Done":d.jsx(jq,{size:18})})]}),g&&d.jsx("p",{className:"fm-edit-hint",children:"Tap icons to pin/unpin actions"}),d.jsx("div",{className:"fm-pinned-grid",children:h.map(C)}),S.length>0&&d.jsxs("div",{className:"fm-more-section",children:[d.jsxs("button",{className:"fm-more-header",onClick:()=>w(!x),"aria-expanded":!x,children:[d.jsx("span",{children:"More Actions"}),x?d.jsx(pf,{size:20}):d.jsx(ZA,{size:20})]}),!x&&d.jsx("div",{className:"fm-more-content",children:S.map(A)})]}),d.jsx("style",{children:`
        .fm-landing {
          padding: 0 1rem 2rem;
        }

        /* Metrics Snapshot - Premium Hero Card */
        .fm-metrics-snapshot {
          width: 100%;
          background: var(--gradient-blue, linear-gradient(135deg, #3b82f6, #2563eb, #1d4ed8));
          border: none;
          border-radius: 16px;
          padding: 1.25rem;
          color: white;
          text-align: left;
          cursor: pointer;
          margin-bottom: 1.5rem;
          transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s ease;
          box-shadow: 0 4px 15px rgba(59, 130, 246, 0.25), 0 2px 8px rgba(0,0,0,0.15);
          position: relative;
          overflow: hidden;
        }

        .fm-metrics-snapshot::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 50%;
          background: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, transparent 100%);
          pointer-events: none;
          border-radius: 16px 16px 0 0;
        }

        .fm-metrics-snapshot::after {
          content: '';
          position: absolute;
          bottom: -40px;
          right: -40px;
          width: 160px;
          height: 160px;
          background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%);
          pointer-events: none;
        }

        .fm-metrics-snapshot:active {
          transform: scale(0.98);
        }

        .fm-snapshot-header {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          opacity: 0.9;
          margin-bottom: 0.875rem;
          font-weight: 500;
          position: relative;
          z-index: 1;
        }

        .fm-snapshot-arrow {
          margin-left: auto;
          opacity: 0.7;
        }

        .fm-snapshot-stats {
          display: flex;
          align-items: center;
          gap: 0.875rem;
          position: relative;
          z-index: 1;
        }

        .fm-snapshot-stat {
          display: flex;
          flex-direction: column;
          align-items: center;
          flex: 1;
        }

        .fm-snapshot-stat.main {
          flex: 1.5;
          align-items: flex-start;
        }

        .fm-snapshot-value {
          font-size: 1.625rem;
          font-weight: 700;
          line-height: 1.2;
          font-variant-numeric: tabular-nums;
          letter-spacing: -0.02em;
        }

        .fm-snapshot-stat.main .fm-snapshot-value {
          font-size: 2.25rem;
        }

        .fm-snapshot-label {
          font-size: 0.68rem;
          opacity: 0.85;
          text-transform: uppercase;
          letter-spacing: 0.06em;
          font-weight: 600;
          margin-top: 0.1rem;
        }

        .fm-snapshot-divider {
          width: 1px;
          height: 44px;
          background: rgba(255,255,255,0.25);
        }

        .fm-snapshot-today {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-top: 0.875rem;
          padding-top: 0.875rem;
          border-top: 1px solid rgba(255,255,255,0.15);
          font-size: 0.8rem;
          opacity: 0.9;
          font-weight: 500;
          position: relative;
          z-index: 1;
        }

        /* Section Header */
        .fm-section-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.875rem;
        }

        .fm-section-header h2 {
          font-size: 1.05rem;
          font-weight: 700;
          color: var(--text-primary);
          margin: 0;
          letter-spacing: -0.01em;
        }

        .fm-edit-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0.5rem;
          background: var(--gradient-card-dark, var(--bg-elevated));
          border: 1px solid var(--border-color);
          border-radius: 10px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.8rem;
          min-width: 36px;
          min-height: 36px;
          transition: all 0.2s ease;
          box-shadow: var(--shadow-sm, 0 1px 2px rgba(0,0,0,0.1));
        }

        .fm-edit-btn:hover {
          border-color: var(--accent-blue, #3b82f6);
        }

        .fm-edit-btn.active {
          background: var(--gradient-blue, var(--primary-color, #3b82f6));
          border-color: transparent;
          color: white;
          padding: 0.5rem 1rem;
          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .fm-edit-hint {
          font-size: 0.8rem;
          color: var(--text-secondary);
          margin: 0 0 0.75rem;
          text-align: center;
          font-weight: 500;
        }

        /* Pinned Actions Grid */
        .fm-pinned-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 0.875rem;
          margin-bottom: 1.5rem;
        }

        .fm-pinned-card-wrapper {
          position: relative;
        }

        .fm-pinned-card {
          width: 100%;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 1.375rem 1rem;
          background: var(--gradient-card-dark, var(--bg-card));
          border: 1px solid var(--border-color);
          border-radius: 14px;
          cursor: pointer;
          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
          min-height: 114px;
          position: relative;
          box-shadow: var(--shadow-card, 0 1px 3px rgba(0,0,0,0.1));
          overflow: hidden;
        }

        .fm-pinned-card::before {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          height: 2px;
          background: var(--gradient-blue, linear-gradient(90deg, #3b82f6, #2563eb));
          opacity: 0;
          transition: opacity 0.2s ease;
        }

        .fm-pinned-card:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: var(--shadow-card-hover, 0 8px 25px rgba(0,0,0,0.15));
          border-color: rgba(59, 130, 246, 0.3);
        }

        .fm-pinned-card:hover:not(:disabled)::before {
          opacity: 1;
        }

        .fm-pinned-card:active:not(:disabled) {
          transform: scale(0.97);
        }

        .fm-pinned-card:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-pinned-card.completed {
          border-color: rgba(34, 197, 94, 0.4);
          background: linear-gradient(135deg, rgba(34, 197, 94, 0.08) 0%, rgba(34, 197, 94, 0.03) 100%);
        }

        .fm-pinned-card.completed::before {
          background: linear-gradient(90deg, #22c55e, #16a34a);
          opacity: 1;
        }

        .fm-pinned-card.danger {
          border-color: rgba(245, 158, 11, 0.4);
        }

        .fm-pinned-card.danger::before {
          background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .fm-pinned-card.danger .fm-pinned-icon {
          color: #f59e0b;
        }

        .fm-pinned-icon {
          color: var(--primary-color, #3b82f6);
          margin-bottom: 0.625rem;
          transition: transform 0.2s ease;
        }

        .fm-pinned-card:hover:not(:disabled) .fm-pinned-icon {
          transform: scale(1.08);
        }

        .fm-pinned-label {
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
          text-align: center;
          letter-spacing: -0.01em;
        }

        .fm-pinned-badge {
          position: absolute;
          top: 8px;
          right: 8px;
          background: var(--gradient-blue, var(--primary-color, #3b82f6));
          color: white;
          font-size: 0.68rem;
          font-weight: 700;
          padding: 0.2rem 0.55rem;
          border-radius: 10px;
          box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
        }

        .fm-pinned-check {
          position: absolute;
          top: 8px;
          right: 8px;
          color: #22c55e;
          filter: drop-shadow(0 1px 3px rgba(34, 197, 94, 0.3));
        }

        .fm-pin-toggle {
          position: absolute;
          top: -8px;
          right: -8px;
          width: 28px;
          height: 28px;
          border-radius: 50%;
          background: var(--bg-card);
          border: 2px solid var(--border-color);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          color: var(--text-secondary);
          transition: all 0.2s ease;
          z-index: 10;
          box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        }

        .fm-pin-toggle:hover {
          background: var(--bg-elevated);
          transform: scale(1.1);
        }

        .fm-pin-toggle.pinned {
          background: #ef4444;
          border-color: #ef4444;
          color: white;
          box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        /* More Actions Section */
        .fm-more-section {
          background: var(--gradient-card-dark, var(--bg-card));
          border: 1px solid var(--border-color);
          border-radius: 14px;
          overflow: hidden;
          box-shadow: var(--shadow-card, 0 1px 3px rgba(0,0,0,0.1));
        }

        .fm-more-header {
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 1rem 1.125rem;
          background: transparent;
          border: none;
          cursor: pointer;
          font-size: 0.9rem;
          font-weight: 600;
          color: var(--text-primary);
          transition: background 0.15s ease;
        }

        .fm-more-header:hover {
          background: var(--bg-secondary, rgba(255,255,255,0.02));
        }

        .fm-more-header:active {
          background: var(--bg-elevated);
        }

        .fm-more-content {
          border-top: 1px solid var(--border-color);
        }

        .fm-action-row-wrapper {
          position: relative;
          display: flex;
          align-items: center;
        }

        .fm-action-row-wrapper .fm-pin-toggle {
          position: static;
          margin-right: 0.75rem;
          flex-shrink: 0;
        }

        .fm-action-row {
          flex: 1;
          display: flex;
          align-items: center;
          gap: 0.875rem;
          padding: 1.125rem;
          background: transparent;
          border: none;
          border-bottom: 1px solid var(--border-color);
          cursor: pointer;
          text-align: left;
          color: var(--text-primary);
          transition: all 0.2s ease;
        }

        .fm-action-row:last-child {
          border-bottom: none;
        }

        .fm-action-row:hover:not(:disabled) {
          background: var(--bg-secondary, rgba(255,255,255,0.02));
          padding-left: 1.25rem;
        }

        .fm-action-row:active:not(:disabled) {
          background: var(--bg-elevated);
        }

        .fm-action-row:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-action-row.danger {
          color: #f59e0b;
        }

        .fm-action-row svg {
          transition: color 0.15s ease;
        }

        .fm-action-row:hover:not(:disabled) svg {
          color: var(--accent-blue, #3b82f6);
        }

        .fm-action-row.danger:hover:not(:disabled) svg {
          color: #f59e0b;
        }

        .fm-action-label {
          flex: 1;
          font-size: 0.9rem;
          font-weight: 500;
        }

        .fm-action-badge {
          font-size: 0.72rem;
          color: var(--text-secondary);
          background: var(--bg-elevated);
          padding: 0.25rem 0.625rem;
          border-radius: 20px;
          font-weight: 600;
        }

        /* Dark mode adjustments */
        [data-theme="dark"] .fm-metrics-snapshot {
          background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 60%, #172554 100%);
          box-shadow: 0 4px 20px rgba(30, 64, 175, 0.3), 0 2px 8px rgba(0,0,0,0.2);
        }

        [data-theme="dark"] .fm-pinned-card.completed {
          background: linear-gradient(135deg, rgba(34, 197, 94, 0.12) 0%, rgba(34, 197, 94, 0.04) 100%);
        }
      `})]})}const py=[{value:"high",label:"High",color:"#ef4444"},{value:"medium",label:"Medium",color:"#f59e0b"},{value:"low",label:"Low",color:"#6b7280"}],gy=[{value:"open",label:"Open",icon:Cq,color:"#ef4444"},{value:"in_progress",label:"In Progress",icon:Mo,color:"#f59e0b"},{value:"complete",label:"Complete",icon:Jn,color:"#10b981"}];function B2({projectId:e,areas:t=[],companyId:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState(!0),[m,h]=y.useState(!1),[p,g]=y.useState(null),[_,x]=y.useState("all"),[w,j]=y.useState("all"),[S,O]=y.useState(!1),[C,A]=y.useState({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),k=y.useCallback(async()=>{if(!e||!P){u(!1);return}try{const q=$i(),{data:R,error:U}=await q.from("punch_list_items").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(U)throw U;s(R||[])}catch(q){console.error("Error loading punch list:",q),s([])}finally{u(!1)}},[e]);y.useEffect(()=>{k()},[k]),y.useEffect(()=>{if(!e||!P)return;const q=T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},()=>k()).subscribe();return()=>{T.removeChannel(q)}},[e,k]);const D=y.useMemo(()=>i.filter(q=>!(_!=="all"&&q.status!==_||w!=="all"&&q.area_id!==w)),[i,_,w]),M=y.useMemo(()=>{const q=i.filter(te=>te.status==="open").length,R=i.filter(te=>te.status==="in_progress").length,U=i.filter(te=>te.status==="complete").length;return{open:q,inProgress:R,complete:U,total:i.length}},[i]),z=()=>{A({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),g(null),h(!1)},W=async q=>{if(q.preventDefault(),!C.description.trim()){n?.("Please enter a description","error");return}O(!0);try{const R=$i();if(p){const{error:U}=await R.from("punch_list_items").update({description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,updated_at:new Date().toISOString()}).eq("id",p.id);if(U)throw U;n?.("Punch item updated","success")}else{const{error:U}=await R.from("punch_list_items").insert({project_id:e,company_id:r,description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,status:"open"});if(U)throw U;n?.("Punch item added","success")}z(),k()}catch(R){console.error("Error saving punch item:",R),n?.(R.message||"Error saving item","error")}finally{O(!1)}},Y=async(q,R)=>{try{const U={status:R,updated_at:new Date().toISOString()};R==="complete"?U.completed_at=new Date().toISOString():U.completed_at=null;const{error:te}=await $i().from("punch_list_items").update(U).eq("id",q);if(te)throw te;k()}catch(U){console.error("Error updating status:",U),n?.("Error updating status","error")}},re=async q=>{if(confirm("Delete this punch item?"))try{const{error:R}=await $i().from("punch_list_items").delete().eq("id",q);if(R)throw R;n?.("Item deleted","success"),k()}catch(R){console.error("Error deleting item:",R),n?.("Error deleting item","error")}},X=q=>{A({description:q.description,area_id:q.area_id||"",assigned_to:q.assigned_to||"",priority:q.priority||"medium",notes:q.notes||"",photo_url:q.photo_url||""}),g(q),h(!0)},I=q=>q&&t.find(U=>U.id===q)?.name||null,se=q=>py.find(R=>R.value===q)||py[1],pe=q=>gy.find(R=>R.value===q)||gy[0];return d.jsxs("div",{className:"punch-list-card",children:[d.jsxs("div",{className:"punch-list-header",children:[d.jsxs("div",{className:"punch-list-title",children:[d.jsx(Jn,{size:18}),d.jsx("h3",{children:"Punch List"}),M.total>0&&d.jsxs("span",{className:"punch-stats-inline",children:[d.jsxs("span",{className:"punch-stat-open",children:[M.open," open"]}),M.inProgress>0&&d.jsxs("span",{className:"punch-stat-progress",children:[M.inProgress," in progress"]}),d.jsxs("span",{className:"punch-stat-complete",children:[M.complete,"/",M.total," complete"]})]})]}),d.jsxs("button",{className:"punch-add-btn",onClick:()=>{z(),h(!0)},children:[d.jsx(Qd,{size:16}),"Add Item"]})]}),M.total>0&&d.jsxs("div",{className:"punch-progress-bar",children:[d.jsx("div",{className:"punch-progress-fill",style:{width:`${M.complete/M.total*100}%`}}),d.jsxs("span",{className:"punch-progress-label",children:[Math.round(M.complete/M.total*100),"% complete"]})]}),M.total>0&&d.jsxs("div",{className:"punch-filters",children:[d.jsxs("div",{className:"punch-filter-group",children:[d.jsx(Oq,{size:14}),d.jsxs("select",{value:_,onChange:q=>x(q.target.value),className:"punch-filter-select",children:[d.jsx("option",{value:"all",children:"All Status"}),gy.map(q=>d.jsx("option",{value:q.value,children:q.label},q.value))]})]}),t.length>0&&d.jsxs("div",{className:"punch-filter-group",children:[d.jsx(vy,{size:14}),d.jsxs("select",{value:w,onChange:q=>j(q.target.value),className:"punch-filter-select",children:[d.jsx("option",{value:"all",children:"All Areas"}),t.map(q=>d.jsx("option",{value:q.id,children:q.name},q.id))]})]})]}),m&&d.jsxs("form",{className:"punch-form",onSubmit:W,children:[d.jsxs("div",{className:"punch-form-header",children:[d.jsx("h4",{children:p?"Edit Item":"New Punch Item"}),d.jsx("button",{type:"button",className:"punch-form-close",onClick:z,children:d.jsx(Ic,{size:16})})]}),d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Description *"}),d.jsx("textarea",{value:C.description,onChange:q=>A(R=>({...R,description:q.target.value})),placeholder:"What needs to be fixed or completed?",rows:2,required:!0})]}),d.jsxs("div",{className:"punch-form-row",children:[d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Area"}),d.jsxs("select",{value:C.area_id,onChange:q=>A(R=>({...R,area_id:q.target.value})),children:[d.jsx("option",{value:"",children:"No area"}),t.map(q=>d.jsx("option",{value:q.id,children:q.name},q.id))]})]}),d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Assigned To"}),d.jsx("input",{type:"text",value:C.assigned_to,onChange:q=>A(R=>({...R,assigned_to:q.target.value})),placeholder:"Name or company"})]}),d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Priority"}),d.jsx("select",{value:C.priority,onChange:q=>A(R=>({...R,priority:q.target.value})),children:py.map(q=>d.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Notes"}),d.jsx("textarea",{value:C.notes,onChange:q=>A(R=>({...R,notes:q.target.value})),placeholder:"Additional details...",rows:2})]}),d.jsxs("div",{className:"punch-form-actions",children:[d.jsx("button",{type:"button",className:"punch-btn-cancel",onClick:z,children:"Cancel"}),d.jsxs("button",{type:"submit",className:"punch-btn-save",disabled:S,children:[d.jsx(Aq,{size:14}),S?"Saving...":p?"Update":"Add Item"]})]})]}),c?d.jsx("div",{className:"punch-loading",children:"Loading punch list..."}):D.length===0?d.jsxs("div",{className:"punch-empty",children:[d.jsx(Jn,{size:32,style:{opacity:.3}}),d.jsx("p",{children:i.length===0?"No punch items yet":"No items match filters"}),i.length===0&&d.jsx("span",{children:"Add items that need attention before project closeout"})]}):d.jsx("div",{className:"punch-items-list",children:D.map(q=>{const R=pe(q.status),U=se(q.priority),te=R.icon;return d.jsxs("div",{className:`punch-item punch-item-${q.status}`,children:[d.jsx("button",{className:"punch-item-status-btn",onClick:()=>{const ne=q.status==="open"?"in_progress":q.status==="in_progress"?"complete":"open";Y(q.id,ne)},title:`Click to change status (current: ${R.label})`,children:d.jsx(te,{size:18,style:{color:R.color}})}),d.jsxs("div",{className:"punch-item-content",children:[d.jsxs("div",{className:"punch-item-top",children:[d.jsx("span",{className:`punch-item-desc ${q.status==="complete"?"completed":""}`,children:q.description}),d.jsx("div",{className:"punch-item-badges",children:d.jsx("span",{className:"punch-priority-badge",style:{color:U.color,borderColor:`${U.color}40`},children:U.label})})]}),d.jsxs("div",{className:"punch-item-meta",children:[I(q.area_id)&&d.jsxs("span",{className:"punch-meta-tag",children:[d.jsx(vy,{size:11}),I(q.area_id)]}),q.assigned_to&&d.jsxs("span",{className:"punch-meta-tag",children:[d.jsx(Nq,{size:11}),q.assigned_to]}),q.completed_at&&d.jsxs("span",{className:"punch-meta-tag completed",children:[d.jsx(Jn,{size:11}),"Done ",new Date(q.completed_at).toLocaleDateString()]})]}),q.notes&&d.jsx("div",{className:"punch-item-notes",children:q.notes})]}),d.jsxs("div",{className:"punch-item-actions",children:[d.jsx("button",{className:"punch-action-btn",onClick:()=>X(q),title:"Edit",children:d.jsx(_c,{size:14})}),d.jsx("button",{className:"punch-action-btn delete",onClick:()=>re(q.id),title:"Delete",children:d.jsx(kq,{size:14})})]})]},q.id)})})]})}const dQ=Object.freeze(Object.defineProperty({__proto__:null,default:B2},Symbol.toStringTag,{value:"Module"}));function dZ({project:e,companyId:t,foremanName:r,onShowToast:n,onExit:i}){const[s,c]=y.useState([]),[u,m]=y.useState(!0),[h,p]=y.useState(null),[g,_]=y.useState({}),[x,w]=y.useState("home"),[j,S]=y.useState(!1),[O,C]=y.useState(0),[A,k]=y.useState({crewCheckedIn:!1,crewCount:0,tmTicketsToday:0,dailyReportDone:!1,disposalLoadsToday:0}),[D,M]=y.useState(()=>typeof window<"u"?document.documentElement.getAttribute("data-theme")==="dark":!1);new Date().getHours(),y.useEffect(()=>{e?.id&&(X(),z(),W())},[e?.id]);const z=async()=>{try{const $=new Date().toISOString().split("T")[0],De=(await ye.getCrewCheckin(e.id,$))?.workers||[],Ie=De.length>0,_e=(await ye.getTMTickets?.(e.id)||[]).filter(xe=>xe.work_date===$),V=await ye.getDisposalLoads?.(e.id,$)||[];k({crewCheckedIn:Ie,crewCount:De.length,tmTicketsToday:_e.length,dailyReportDone:!1,disposalLoadsToday:V.reduce((xe,je)=>xe+(je.load_count||1),0)})}catch($){console.error("Error loading today status:",$)}},W=async()=>{if(!(!e?.id||!P))try{const{count:$}=await $i().from("punch_list_items").select("*",{count:"exact",head:!0}).eq("project_id",e.id).eq("status","open");C($||0)}catch{}},Y=y.useRef(null),re=y.useCallback(()=>{Y.current&&clearTimeout(Y.current),Y.current=setTimeout(()=>{X(),z()},300)},[e?.id]);y.useEffect(()=>{if(!e?.id)return;const $=[],Se=ye.subscribeToAreas?.(e.id,re);Se&&$.push(Se);const De=ye.subscribeToCrewCheckins?.(e.id,re);De&&$.push(De);const Ie=ye.subscribeToTMTickets?.(e.id,re);Ie&&$.push(Ie);const G=ye.subscribeToHaulOffs?.(e.id,re);G&&$.push(G);const _e=ye.subscribeToDailyReports?.(e.id,re);_e&&$.push(_e);const V=ye.subscribeToCORs?.(e.id,re);V&&$.push(V);const xe=ye.subscribeToMaterialRequests?.(e.id,re);xe&&$.push(xe);const je=ye.subscribeToProject?.(e.id,re);je&&$.push(je);const oe=ye.subscribeToPunchList?.(e.id,()=>{W(),re()});if(oe&&$.push(oe),t){const He=ye.subscribeToMaterialsEquipment?.(t,re);He&&$.push(He);const ge=ye.subscribeToLaborRates?.(t,re);ge&&$.push(ge)}return()=>{Y.current&&clearTimeout(Y.current),$.forEach(He=>ye.unsubscribe?.(He))}},[e?.id,re]);const X=async()=>{try{const $=await ye.getAreas(e.id);c($);const Se=[...new Set($.map(Ie=>Ie.group_name||"General"))],De={};Se.forEach(Ie=>De[Ie]=!1),_(De)}catch($){console.error("Error loading areas:",$),n?.("Error loading areas","error")}finally{m(!1)}},I=async($,Se)=>{const De=s.find(G=>G.id===$);if(!De)return;const Ie=De.status===Se?"not_started":Se;p($);try{await ye.updateAreaStatus($,Ie),c(G=>G.map(_e=>_e.id===$?{..._e,status:Ie}:_e))}catch(G){console.error("Error updating status:",G),n?.("Error updating","error")}finally{p(null)}},se=$=>{_(Se=>({...Se,[$]:!Se[$]}))},pe=()=>{const $=D?"light":"dark";document.documentElement.setAttribute("data-theme",$),localStorage.setItem("theme",$),M(!D)},q=HL(s),R=s.filter($=>$.status==="done").length,U=s.filter($=>$.status==="working").length,te=s.length-R,ne=s.reduce(($,Se)=>{const De=Se.group_name||"General";return $[De]||($[De]=[]),$[De].push(Se),$},{}),we=Object.keys(ne).length>1||Object.keys(ne).length===1&&!ne.General,Pe=$=>`${$.filter(De=>De.status==="done").length}/${$.length}`,F=y.useCallback($=>{w($)},[]);return x==="tm"?d.jsx("div",{className:"fm-view",children:d.jsx(n3,{project:e,companyId:t,onSubmit:()=>w("home"),onCancel:()=>w("home"),onShowToast:n})}):x==="report"?d.jsx(o3,{project:e,onShowToast:n,onClose:()=>w("home")}):x==="injury"?d.jsx("div",{className:"fm-view",children:d.jsx(s3,{project:e,companyId:t,onClose:()=>w("home"),onReportCreated:()=>{w("home"),n?.("Injury report submitted","success")}})}):x==="crew"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:d.jsx(cr,{size:20})}),d.jsx("h2",{children:"Crew Check-in"})]}),d.jsx(i3,{project:e,companyId:t,onShowToast:n})]}):x==="disposal"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:d.jsx(cr,{size:20})}),d.jsx("h2",{children:"Disposal Loads"})]}),d.jsx(c3,{project:e,date:new Date().toISOString().split("T")[0],onShowToast:n})]}):x==="docs"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:d.jsx(cr,{size:20})}),d.jsx("h2",{children:"Documents"})]}),d.jsx(f3,{projectId:e.id,onShowToast:n})]}):x==="metrics"?d.jsx(cZ,{project:e,companyId:t,onBack:()=>w("home")}):x==="punchlist"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>{w("home"),W()},children:d.jsx(cr,{size:20})}),d.jsx("h2",{children:"Punch List"})]}),d.jsx(B2,{projectId:e.id,areas:s,companyId:t,onShowToast:n})]}):x==="progress"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:d.jsx(cr,{size:20})}),d.jsx("h2",{children:"Progress"}),d.jsxs("span",{className:"fm-subheader-badge",children:[q,"%"]})]}),d.jsx("div",{className:"fm-progress-content",children:u?d.jsxs("div",{className:"fm-loading",children:[d.jsx("div",{className:"spinner"}),d.jsx("span",{children:"Loading..."})]}):s.length===0?d.jsxs("div",{className:"fm-empty",children:[d.jsx(tN,{size:48}),d.jsx("h3",{children:"No tasks yet"}),d.jsx("p",{children:"Office will add tasks to this project"})]}):we?Object.entries(ne).map(([$,Se])=>d.jsxs("div",{className:"fm-group",children:[d.jsxs("button",{className:"fm-group-header",onClick:()=>se($),children:[d.jsxs("div",{className:"fm-group-left",children:[g[$]?d.jsx(pf,{size:18}):d.jsx(bc,{size:18}),d.jsx("span",{children:$})]}),d.jsx("span",{className:"fm-group-count",children:Pe(Se)})]}),g[$]&&d.jsx("div",{className:"fm-group-items",children:Se.map(De=>d.jsxs("div",{className:`fm-task ${De.status}`,children:[d.jsx("span",{className:"fm-task-name",children:De.name}),d.jsxs("div",{className:"fm-task-btns",children:[d.jsx("button",{className:`fm-status-btn working ${De.status==="working"?"active":""}`,onClick:()=>I(De.id,"working"),disabled:h===De.id,children:d.jsx(Mo,{size:14})}),d.jsx("button",{className:`fm-status-btn done ${De.status==="done"?"active":""}`,onClick:()=>I(De.id,"done"),disabled:h===De.id,children:d.jsx(Jn,{size:14})})]})]},De.id))})]},$)):d.jsx("div",{className:"fm-task-list",children:s.map($=>d.jsxs("div",{className:`fm-task ${$.status}`,children:[d.jsx("span",{className:"fm-task-name",children:$.name}),d.jsxs("div",{className:"fm-task-btns",children:[d.jsx("button",{className:`fm-status-btn working ${$.status==="working"?"active":""}`,onClick:()=>I($.id,"working"),disabled:h===$.id,children:d.jsx(Mo,{size:14})}),d.jsx("button",{className:`fm-status-btn done ${$.status==="done"?"active":""}`,onClick:()=>I($.id,"done"),disabled:h===$.id,children:d.jsx(Jn,{size:14})})]})]},$.id))})})]}):d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-header",children:[d.jsx("button",{className:"fm-exit",onClick:i,children:d.jsx(cr,{size:20})}),d.jsxs("div",{className:"fm-header-center",children:[d.jsx("h1",{className:"fm-project-name",children:e.name}),r&&d.jsx("span",{className:"fm-foreman-name",children:r}),d.jsx("button",{className:"fm-info-toggle",onClick:()=>S(!j),children:d.jsx(Dq,{size:16})})]}),d.jsx("button",{className:"fm-theme",onClick:pe,children:D?d.jsx(GA,{size:20}):d.jsx(VA,{size:20})})]}),j&&d.jsxs("div",{className:"fm-project-info",children:[e.job_number&&d.jsxs("div",{className:"fm-info-item",children:[d.jsx("span",{children:"Job #"}),d.jsx("span",{children:e.job_number})]}),e.address&&d.jsxs("div",{className:"fm-info-item",children:[d.jsx("span",{children:"Address"}),d.jsx("span",{children:e.address})]}),e.general_contractor&&d.jsxs("div",{className:"fm-info-item",children:[d.jsx("span",{children:"GC"}),d.jsx("span",{children:e.general_contractor})]}),e.client_phone&&d.jsxs("div",{className:"fm-info-item",children:[d.jsx("span",{children:"Phone"}),d.jsx("a",{href:`tel:${e.client_phone}`,children:e.client_phone})]})]}),d.jsx(uZ,{project:e,todayStatus:A,progress:q,areasWorking:U,areasDone:R,areasRemaining:te,punchListOpenCount:O,onNavigate:F,onShowToast:n})]})}const fZ=y.lazy(()=>_a(()=>import("./Dashboard-BLe6lJW5.js").then(e=>e.D),__vite__mapDeps([6,3,1,2,7]))),mZ=y.lazy(()=>_a(()=>import("./Setup-g80gIPji.js"),__vite__mapDeps([8,3,1,2,4]))),hZ=y.lazy(()=>_a(()=>import("./BrandingSettings-CJQHKq2q.js"),__vite__mapDeps([9,1,2,3,4]))),pZ=y.lazy(()=>_a(()=>import("./PricingManager-CHWphCL4.js"),__vite__mapDeps([10,1,2,3,4]))),gZ=y.lazy(()=>_a(()=>import("./PublicView-U2RB5m3h.js"),__vite__mapDeps([11,1,2,3,4]))),vZ=y.lazy(()=>_a(()=>import("./SignaturePage-C_7j9z70.js"),__vite__mapDeps([12,1,2,7,3,13,4]))),yZ=y.lazy(()=>_a(()=>import("./MembershipManager-Dmpqz_Lj.js"),__vite__mapDeps([14,1,2,3,4]))),bZ=y.lazy(()=>_a(()=>import("./LandingPage-DGNyAUwm.js"),__vite__mapDeps([15,1,2,3,4])));function um(){return d.jsxs("div",{className:"page-loader",children:[d.jsx(qr,{className:"loading-logo"}),d.jsx("div",{className:"spinner"})]})}function _Z({pendingCompanyName:e,userName:t,onCheckStatus:r,onLogout:n}){const[i,s]=y.useState(!1);y.useEffect(()=>{const u=setInterval(()=>{r()},3e4);return()=>clearInterval(u)},[r]);const c=async()=>{s(!0),await r(),setTimeout(()=>s(!1),1e3)};return d.jsxs("div",{className:"pending-approval-screen",children:[d.jsx(qr,{className:"pending-logo"}),d.jsx("div",{className:"pending-pulse-ring",children:d.jsx("div",{className:"pending-pulse-dot"})}),d.jsx("h2",{children:"Awaiting Approval"}),e&&d.jsx("div",{className:"pending-company-name",children:e}),d.jsxs("p",{className:"pending-message",children:[t?`Hi ${t.split(" ")[0]}, your`:"Your"," membership request has been submitted. A company administrator will review and approve your access."]}),d.jsx("p",{className:"pending-auto-check",children:"We'll automatically check for updates"}),d.jsxs("div",{className:"pending-actions",children:[d.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Sign Out"}),d.jsx("button",{className:"btn btn-primary",onClick:c,disabled:i,children:i?"Checking...":"Check Status"})]})]})}function xZ(){const{token:e}=hN();return d.jsx(y.Suspense,{fallback:d.jsx(um,{}),children:d.jsx(gZ,{shareToken:e})})}function wZ(){const{token:e}=hN();return d.jsx(y.Suspense,{fallback:d.jsx(um,{}),children:d.jsx(vZ,{signatureToken:e})})}function jZ(){const e=pm(),t=aa(),[r,n]=y.useState(null),[i,s]=y.useState(null),[c,u]=y.useState([]),[,m]=y.useState([]),[h,p]=y.useState(null),[g,_]=y.useState(""),[x,w]=y.useState(!0),[j,S]=y.useState(null),[O,C]=y.useState(!1),[A,k]=y.useState(!1),[D,M]=y.useState(null),[z,W]=y.useState(0),[Y,re]=y.useState(!1),[X,I]=y.useState(null),[se,pe]=y.useState(""),[q,R]=y.useState(!1),U=y.useCallback((ge,Ne="")=>{S({message:ge,type:Ne})},[]),te=y.useCallback(async()=>{try{if(!P){w(!1);return}const{data:{user:ge}}=await T.auth.getUser();if(!ge){w(!1);return}const{data:Ne}=await T.from("users").select("*").eq("id",ge.id).single();if(Ne){n(Ne);let Re=await ye.getUserCompanies(ge.id);if(Re.length===0&&Ne.company_id&&await ye.repairLegacyUser(ge.id,Ne.company_id,Ne.role||"member")&&(Re=await ye.getUserCompanies(ge.id)),u(Re),Re.length===0){if(await ye.getUserPendingMemberships(ge.id)>0){try{const{data:yt}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",ge.id).eq("status","pending").limit(1);yt?.[0]?.companies?.name&&pe(yt[0].companies.name)}catch{}e("/pending",{replace:!0});return}S({message:"No company access. Join a company to continue.",type:"error"}),await af.signOut();return}const jt=localStorage.getItem("selectedCompanyId");let qe=null;if(jt&&Re.find(It=>It.id===jt)?qe=Re.find(It=>It.id===jt):Re.length>0&&(qe=Re[0]),qe){const{data:It}=await T.from("companies").select("*").eq("id",qe.id).single();s(It),R(!0);const yt=t.pathname,Ct=yt.startsWith("/view/")||yt.startsWith("/sign/"),Br=["/dashboard","/projects/new","/pricing","/branding","/team"].includes(yt);!Ct&&!Br&&yt!=="/field"&&e("/dashboard",{replace:!0})}}}catch(ge){console.error("Auth check error:",ge)}finally{w(!1)}},[e,t.pathname]);y.useEffect(()=>{const ge=t.pathname;ge.startsWith("/view/")||ge.startsWith("/sign/")?w(!1):te()},[]),y.useEffect(()=>{if(!P)return;const{data:{subscription:ge}}=T.auth.onAuthStateChange(async Ne=>{if(Ne==="SIGNED_OUT"||Ne==="USER_DELETED"){const Re=t.pathname;if(Re.startsWith("/sign/")||Re.startsWith("/view/"))return;n(null),s(null),u([]),R(!1),e("/login",{replace:!0})}else if(Ne==="SIGNED_IN"&&!r){const Re=t.pathname;!Re.startsWith("/sign/")&&!Re.startsWith("/view/")&&te()}});return()=>{ge?.unsubscribe()}},[r,te,e,t.pathname]);const ne=(ge,Ne="")=>{localStorage.setItem("fieldsync-has-visited","true"),p(ge),_(Ne),e("/field")},we=async(ge,Ne)=>{try{await jy(),localStorage.setItem("fieldsync-has-visited","true");const{data:Re,error:jt}=await T.auth.signInWithPassword({email:ge,password:Ne});if(jt){U(jt.message||"Invalid credentials","error");return}const{data:qe,error:It}=await T.from("users").select("*").eq("id",Re.user.id).single();if(It){console.error("User fetch error:",It),U("Error loading profile","error");return}if(qe){n(qe);let yt=await ye.getUserCompanies(Re.user.id);yt.length===0&&qe.company_id&&await ye.repairLegacyUser(Re.user.id,qe.company_id,qe.role||"member")&&(yt=await ye.getUserCompanies(Re.user.id)),u(yt);const Ct=localStorage.getItem("selectedCompanyId");let Br=null;if(Ct&&yt.find(xt=>xt.id===Ct)?Br=yt.find(xt=>xt.id===Ct):yt.length>0&&(Br=yt[0]),Br){const{data:xt}=await T.from("companies").select("*").eq("id",Br.id).single();s(xt),R(!0);const{data:Ye}=await T.auth.mfa.listFactors(),$r=Ye?.totp?.find(_n=>_n.status==="verified");$r?(I($r.id),re(!0)):e("/dashboard")}else if(await ye.getUserPendingMemberships(Re.user.id)>0){try{const{data:Ye}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",Re.user.id).eq("status","pending").limit(1);Ye?.[0]?.companies?.name&&pe(Ye[0].companies.name)}catch{}e("/pending")}else U("No company access. Please contact admin.","error")}else U("Profile not found. Please contact admin.","error")}catch(Re){console.error("Login error:",Re),U("Login failed","error")}},Pe=async ge=>{try{const{data:Ne}=await T.from("companies").select("*").eq("id",ge).single();Ne&&(s(Ne),localStorage.setItem("selectedCompanyId",ge),C(!1),e("/dashboard"),U(`Switched to ${Ne.name}`,"success"))}catch(Ne){console.error("Switch company error:",Ne),U("Error switching company","error")}},F=async()=>{try{await af.signOut(),n(null),s(null),u([]),R(!1),localStorage.removeItem("selectedCompanyId"),e("/login")}catch(ge){console.error("Logout error:",ge),U("Error signing out","error")}},$=async()=>{await jy(),p(null),_(""),e("/login")},Se=()=>{e("/dashboard"),i?.id&&De()},De=async()=>{if(i?.id)try{const ge=await ye.getProjects(i.id);m(ge)}catch(ge){console.error("Error loading projects:",ge)}};y.useEffect(()=>{i?.id&&q&&(De(),Ie())},[i?.id,q]);const Ie=async()=>{if(i?.id)try{const Ne=(await ye.getCompanyMemberships(i.id)).filter(Re=>Re.status==="pending").length;W(Ne)}catch(ge){console.error("Error loading pending count:",ge)}},G=y.useCallback(()=>{M(null)},[]),xe=c.find(ge=>ge.id===i?.id)?.access_level==="administrator"||i?.owner_user_id===r?.id,je=j&&d.jsx(TN,{message:j.message,type:j.type,onClose:()=>S(null)});if(x)return d.jsx(Ng,{children:d.jsx(Dd,{companyId:i?.id,children:d.jsxs("div",{className:"loading-screen",children:[d.jsx(qr,{className:"loading-logo"}),d.jsx("div",{className:"spinner"})]})})});if(Y)return d.jsx(Ng,{children:d.jsxs(Dd,{companyId:i?.id,children:[d.jsx(Li,{children:d.jsx($L,{factorId:X,onVerified:()=>{re(!1),e("/dashboard")},onCancel:async()=>{re(!1),I(null),await af.signOut(),n(null),s(null),u([]),R(!1),e("/login")}})}),je]})});const oe=ge=>!r||!i||!q?d.jsx(xo,{to:"/login",replace:!0}):ge,He=ge=>d.jsx(LL,{children:d.jsxs("div",{children:[!P&&d.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),d.jsx("nav",{className:"nav",children:d.jsxs("div",{className:"nav-content",children:[d.jsx(qr,{}),d.jsxs("div",{className:"nav-tabs nav-tabs-desktop",children:[d.jsx("button",{className:`nav-tab ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>e("/dashboard"),children:"Dashboard"}),d.jsx("button",{className:`nav-tab ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>e("/projects/new"),children:"+ New Project"}),d.jsx("button",{className:`nav-tab ${t.pathname==="/pricing"?"active":""}`,onClick:()=>e("/pricing"),children:"Pricing"}),xe&&d.jsx("button",{className:`nav-tab ${t.pathname==="/branding"?"active":""}`,onClick:()=>e("/branding"),children:"Branding"}),xe&&d.jsxs("button",{className:`nav-tab ${t.pathname==="/team"?"active":""}`,onClick:()=>e("/team"),children:["Team",z>0&&d.jsx("span",{className:"nav-tab-badge",children:z})]})]}),d.jsxs("div",{className:"nav-user nav-user-desktop",children:[d.jsx(VS,{compact:!0}),d.jsxs("div",{className:"mobile-menu",children:[d.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!A),"aria-label":"User menu",children:""}),A&&d.jsxs("div",{className:"mobile-menu-dropdown",children:[d.jsxs("div",{className:"mobile-menu-info",children:[d.jsx("div",{className:"mobile-menu-user",children:r?.name||r?.email}),i&&d.jsx("div",{className:"mobile-menu-company",children:i.name})]}),d.jsx("button",{className:"mobile-menu-logout",onClick:()=>{k(!1),F()},children:"Sign Out"})]})]}),c.length>1&&d.jsxs("div",{className:"company-switcher",children:[d.jsxs("button",{className:"company-switcher-btn",onClick:()=>C(!O),children:[i?.name||"Select Company",d.jsx("span",{className:"switcher-arrow",children:""})]}),O&&d.jsx("div",{className:"company-dropdown",children:c.map(Ne=>d.jsxs("button",{className:`company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>Pe(Ne.id),children:[Ne.name,Ne.id===i?.id&&d.jsx("span",{className:"check",children:""})]},Ne.id))})]}),c.length<=1&&i&&d.jsx("span",{className:"nav-company-name",children:i.name}),d.jsx("span",{className:"nav-user-name",children:r?.name||r?.email}),d.jsx("button",{className:"nav-logout",onClick:F,children:"Sign Out"})]}),d.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!0),"aria-label":"Open menu",children:d.jsxs("span",{className:"hamburger-icon",children:[d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{})]})})]})}),A&&d.jsx("div",{className:"mobile-drawer-overlay",onClick:()=>k(!1),children:d.jsxs("div",{className:"mobile-drawer",onClick:Ne=>Ne.stopPropagation(),children:[d.jsxs("div",{className:"mobile-drawer-header",children:[d.jsx(qr,{}),d.jsx("button",{className:"mobile-drawer-close",onClick:()=>k(!1),"aria-label":"Close menu",children:""})]}),d.jsxs("div",{className:"mobile-drawer-user",children:[d.jsx("div",{className:"mobile-user-avatar",children:(r?.name||r?.email||"U")[0].toUpperCase()}),d.jsxs("div",{className:"mobile-user-info",children:[d.jsx("span",{className:"mobile-user-name",children:r?.name||r?.email}),d.jsx("span",{className:"mobile-user-company",children:i?.name})]})]}),c.length>1&&d.jsxs("div",{className:"mobile-drawer-section",children:[d.jsx("div",{className:"mobile-section-title",children:"Switch Company"}),d.jsx("div",{className:"mobile-company-list",children:c.map(Ne=>d.jsxs("button",{className:`mobile-company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>{Pe(Ne.id),k(!1)},children:[d.jsx("span",{className:"mobile-company-name",children:Ne.name}),Ne.id===i?.id&&d.jsx("span",{className:"mobile-company-check",children:""})]},Ne.id))})]}),d.jsxs("div",{className:"mobile-drawer-section",children:[d.jsx("div",{className:"mobile-section-title",children:"Navigation"}),d.jsxs("div",{className:"mobile-nav-list",children:[d.jsx("button",{className:`mobile-nav-item ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>{e("/dashboard"),k(!1)},children:"Dashboard"}),d.jsx("button",{className:`mobile-nav-item ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>{e("/projects/new"),k(!1)},children:"+ New Project"}),d.jsx("button",{className:`mobile-nav-item ${t.pathname==="/pricing"?"active":""}`,onClick:()=>{e("/pricing"),k(!1)},children:"Pricing"}),xe&&d.jsx("button",{className:`mobile-nav-item ${t.pathname==="/branding"?"active":""}`,onClick:()=>{e("/branding"),k(!1)},children:"Branding"}),xe&&d.jsxs("button",{className:`mobile-nav-item ${t.pathname==="/team"?"active":""}`,onClick:()=>{e("/team"),k(!1)},children:["Team",z>0&&d.jsx("span",{className:"mobile-nav-badge",children:z})]})]})]}),d.jsxs("div",{className:"mobile-drawer-section",children:[d.jsx("div",{className:"mobile-section-title",children:"Appearance"}),d.jsx("div",{className:"mobile-theme-toggle",children:d.jsx(VS,{})})]}),d.jsx("div",{className:"mobile-drawer-footer",children:d.jsx("button",{className:"mobile-logout-btn",onClick:()=>{F(),k(!1)},children:"Sign Out"})})]})}),d.jsx(Li,{children:d.jsx(y.Suspense,{fallback:d.jsx(um,{}),children:d.jsx("div",{className:"container",children:ge},i?.id)})}),d.jsx(WS,{}),je,d.jsx(BL,{})]})});return d.jsx(Ng,{children:d.jsx(Dd,{companyId:i?.id,children:d.jsxs(zz,{children:[d.jsx(fn,{path:"/view/:token",element:d.jsxs(Li,{children:[d.jsx(xZ,{}),je]})}),d.jsx(fn,{path:"/sign/:token",element:d.jsxs(Li,{children:[d.jsx(wZ,{}),je]})}),d.jsx(fn,{path:"/login",element:r&&i&&q?d.jsx(xo,{to:"/dashboard",replace:!0}):d.jsxs(Li,{children:[d.jsx(UL,{onForemanAccess:ne,onOfficeLogin:we,onShowToast:U}),je]})}),d.jsx(fn,{path:"/pending",element:d.jsxs(Li,{children:[d.jsx(_Z,{pendingCompanyName:se,userName:r?.name,onCheckStatus:te,onLogout:F}),je]})}),d.jsx(fn,{path:"/field",element:h?d.jsxs(Dd,{companyId:h.company_id,children:[d.jsx(Li,{children:d.jsx(dZ,{project:h,companyId:h.company_id,foremanName:g,onShowToast:U,onExit:$})}),d.jsx(WS,{}),je]}):d.jsx(xo,{to:"/login",replace:!0})}),d.jsx(fn,{path:"/dashboard",element:oe(He(d.jsx(fZ,{company:i,user:r,isAdmin:xe,onShowToast:U,navigateToProjectId:D,onProjectNavigated:G})))}),d.jsx(fn,{path:"/projects/new",element:oe(He(d.jsx(mZ,{company:i,user:r,onProjectCreated:Se,onShowToast:U})))}),d.jsx(fn,{path:"/pricing",element:oe(He(d.jsx(pZ,{company:i,onShowToast:U})))}),d.jsx(fn,{path:"/branding",element:oe(He(d.jsx(hZ,{company:i,onShowToast:U})))}),d.jsx(fn,{path:"/team",element:oe(xe?He(d.jsx(yZ,{company:i,user:r,onShowToast:U})):d.jsx(xo,{to:"/dashboard",replace:!0}))}),d.jsx(fn,{path:"/",element:r&&i&&q?d.jsx(xo,{to:"/dashboard",replace:!0}):localStorage.getItem("fieldsync-has-visited")?d.jsx(xo,{to:"/login",replace:!0}):d.jsx(Li,{children:d.jsx(y.Suspense,{fallback:d.jsx(um,{}),children:d.jsx(bZ,{})})})}),d.jsx(fn,{path:"*",element:d.jsx(xo,{to:"/",replace:!0})})]})})})}Uq.createRoot(document.getElementById("root")).render(d.jsx(Tq.StrictMode,{children:d.jsx(lL,{children:d.jsx(jZ,{})})}));"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{setInterval(()=>{e.update().catch(t=>console.debug("[SW] Update check failed:",t.message))},3e5)}).catch(e=>{console.debug("[SW] Registration failed:",e.message)})}),navigator.serviceWorker.addEventListener("message",e=>{e.data?.type==="SW_UPDATED"&&(console.log("[App] Service worker updated, reloading for fresh assets..."),window.location.reload()),e.data?.type==="ASSET_NOT_FOUND"&&(console.warn("[App] Asset not found:",e.data.url,"- reloading..."),"caches"in window?caches.keys().then(t=>{t.forEach(r=>caches.delete(r))}).finally(()=>{window.location.reload()}):window.location.reload())}));export{JP as $,Ir as A,BF as B,DF as C,ir as D,zt as E,va as F,ta as G,JZ as H,J as I,et as J,Vi as K,_r as L,Gi as M,b8 as N,HZ as O,Wo as P,Xo as Q,fb as R,zN as S,B0 as T,Zi as U,Fs as V,Jm as W,uh as X,k_ as Y,Jr as Z,ZP as _,_m as a,AI as a0,Qs as a1,N_ as a2,Yo as a3,Y9 as a4,M_ as a5,D_ as a6,fV as a7,XP as a8,f2 as a9,lZ as aA,e2 as aB,du as aC,PL as aD,ML as aE,RL as aF,MZ as aG,KL as aH,s3 as aI,TN as aJ,T as aK,NZ as aL,VX as aM,b2 as aN,kZ as aO,PZ as aP,FL as aQ,DZ as aR,TZ as aS,qr as aT,RZ as aU,pm as aV,f3 as aW,P as aX,AZ as aY,dQ as aZ,XY as aa,vt as ab,bE as ac,Zc as ad,UZ as ae,Xc as af,kt as ag,Pt as ah,x_ as ai,$P as aj,vn as ak,l0 as al,kY as am,Um as an,I2 as ao,b_ as ap,Ke as aq,ye as ar,d as as,Mv as at,XX as au,_b as av,Sb as aw,Ob as ax,Qv as ay,j2 as az,ik as b,st as c,qZ as d,IZ as e,v4 as f,oD as g,sD as h,jN as i,ke as j,Mt as k,$Z as l,BZ as m,H5 as n,iQ as o,oQ as p,Pr as q,xr as r,zZ as s,sQ as t,Te as u,li as v,ci as w,rh as x,Rm as y,eQ as z};
//# sourceMappingURL=index-Dlu2hcxn.js.map
