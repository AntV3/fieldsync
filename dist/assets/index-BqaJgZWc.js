const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ForemanView-BaynRy8T.js","assets/InjuryReportForm-Dg1LQ0Ht.js","assets/x-DFpqJIi-.js","assets/imageUtils-ZisjP09f.js","assets/wrench-DYIT4dnR.js","assets/user--VXRqYQv.js","assets/chevron-down-BguxgKmE.js","assets/react-DXGY7bZi.js","assets/pdf-ChZ1zkDw.js","assets/supabase-VuevzHjS.js","assets/Dashboard-CzyrLA5p.js","assets/users-3AbznTiT.js","assets/pencil-De82uHfc.js","assets/xlsx-BvJTHLik.js","assets/corCalculations-D3yQyDMA.js","assets/chevron-right-DyiEyia5.js","assets/user-minus-BVItitD-.js","assets/Setup-DpO2p-KO.js","assets/BrandingSettings-DOOKPyEp.js","assets/PricingManager-Ca2sOpnC.js","assets/PublicView-TedB-l03.js","assets/SignaturePage-NNPEmuTd.js","assets/MembershipManager-BJPTwaoK.js"])))=>i.map(i=>d[i]);
import{r as pm,a as hm,b as Pp}from"./react-DXGY7bZi.js";import{_ as Ya}from"./pdf-ChZ1zkDw.js";import{c as gm}from"./supabase-VuevzHjS.js";function Ip(r,l){for(var c=0;c<l.length;c++){const u=l[c];if(typeof u!="string"&&!Array.isArray(u)){for(const s in u)if(s!=="default"&&!(s in r)){const f=Object.getOwnPropertyDescriptor(u,s);f&&Object.defineProperty(r,s,f.get?f:{enumerable:!0,get:()=>u[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&u(p)}).observe(document,{childList:!0,subtree:!0});function c(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(s){if(s.ep)return;s.ep=!0;const f=c(s);fetch(s.href,f)}})();var xu={exports:{}},Zr={};var tm;function eh(){if(tm)return Zr;tm=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function c(u,s,f){var p=null;if(f!==void 0&&(p=""+f),s.key!==void 0&&(p=""+s.key),"key"in s){f={};for(var g in s)g!=="key"&&(f[g]=s[g])}else f=s;return s=f.ref,{$$typeof:r,type:u,key:p,ref:s!==void 0?s:null,props:f}}return Zr.Fragment=l,Zr.jsx=c,Zr.jsxs=c,Zr}var am;function th(){return am||(am=1,xu.exports=eh()),xu.exports}var v=th(),B=pm();const ym=hm(B),Ih=Ip({__proto__:null,default:ym},[B]);var Uu={exports:{}},Vr={},Bu={exports:{}},Hu={};var nm;function ah(){return nm||(nm=1,(function(r){function l(A,R){var k=A.length;A.push(R);e:for(;0<k;){var se=k-1>>>1,fe=A[se];if(0<s(fe,R))A[se]=R,A[k]=fe,k=se;else break e}}function c(A){return A.length===0?null:A[0]}function u(A){if(A.length===0)return null;var R=A[0],k=A.pop();if(k!==R){A[0]=k;e:for(var se=0,fe=A.length,Ne=fe>>>1;se<Ne;){var ye=2*(se+1)-1,M=A[ye],P=ye+1,He=A[P];if(0>s(M,k))P<fe&&0>s(He,M)?(A[se]=He,A[P]=k,se=P):(A[se]=M,A[ye]=k,se=ye);else if(P<fe&&0>s(He,k))A[se]=He,A[P]=k,se=P;else break e}}return R}function s(A,R){var k=A.sortIndex-R.sortIndex;return k!==0?k:A.id-R.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var p=Date,g=p.now();r.unstable_now=function(){return p.now()-g}}var w=[],z=[],U=1,N=null,G=3,Z=!1,V=!1,H=!1,ie=!1,_e=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function J(A){for(var R=c(z);R!==null;){if(R.callback===null)u(z);else if(R.startTime<=A)u(z),R.sortIndex=R.expirationTime,l(w,R);else break;R=c(z)}}function je(A){if(H=!1,J(A),!V)if(c(w)!==null)V=!0,Ye||(Ye=!0,Ge());else{var R=c(z);R!==null&&dt(je,R.startTime-A)}}var Ye=!1,Pe=-1,Ie=5,st=-1;function Wt(){return ie?!0:!(r.unstable_now()-st<Ie)}function ft(){if(ie=!1,Ye){var A=r.unstable_now();st=A;var R=!0;try{e:{V=!1,H&&(H=!1,pe(Pe),Pe=-1),Z=!0;var k=G;try{t:{for(J(A),N=c(w);N!==null&&!(N.expirationTime>A&&Wt());){var se=N.callback;if(typeof se=="function"){N.callback=null,G=N.priorityLevel;var fe=se(N.expirationTime<=A);if(A=r.unstable_now(),typeof fe=="function"){N.callback=fe,J(A),R=!0;break t}N===c(w)&&u(w),J(A)}else u(w);N=c(w)}if(N!==null)R=!0;else{var Ne=c(z);Ne!==null&&dt(je,Ne.startTime-A),R=!1}}break e}finally{N=null,G=k,Z=!1}R=void 0}}finally{R?Ge():Ye=!1}}}var Ge;if(typeof F=="function")Ge=function(){F(ft)};else if(typeof MessageChannel<"u"){var Ft=new MessageChannel,Xt=Ft.port2;Ft.port1.onmessage=ft,Ge=function(){Xt.postMessage(null)}}else Ge=function(){_e(ft,0)};function dt(A,R){Pe=_e(function(){A(r.unstable_now())},R)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(A){A.callback=null},r.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<A?Math.floor(1e3/A):5},r.unstable_getCurrentPriorityLevel=function(){return G},r.unstable_next=function(A){switch(G){case 1:case 2:case 3:var R=3;break;default:R=G}var k=G;G=R;try{return A()}finally{G=k}},r.unstable_requestPaint=function(){ie=!0},r.unstable_runWithPriority=function(A,R){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var k=G;G=A;try{return R()}finally{G=k}},r.unstable_scheduleCallback=function(A,R,k){var se=r.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?se+k:se):k=se,A){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=k+fe,A={id:U++,callback:R,priorityLevel:A,startTime:k,expirationTime:fe,sortIndex:-1},k>se?(A.sortIndex=k,l(z,A),c(w)===null&&A===c(z)&&(H?(pe(Pe),Pe=-1):H=!0,dt(je,k-se))):(A.sortIndex=fe,l(w,A),V||Z||(V=!0,Ye||(Ye=!0,Ge()))),A},r.unstable_shouldYield=Wt,r.unstable_wrapCallback=function(A){var R=G;return function(){var k=G;G=R;try{return A.apply(this,arguments)}finally{G=k}}}})(Hu)),Hu}var rm;function nh(){return rm||(rm=1,Bu.exports=ah()),Bu.exports}var lm;function rh(){if(lm)return Vr;lm=1;var r=nh(),l=pm(),c=Pp();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function w(e){if(f(e)!==e)throw Error(u(188))}function z(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(u(188));return t!==e?null:e}for(var a=e,n=t;;){var i=a.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===a)return w(i),e;if(o===n)return w(i),t;o=o.sibling}throw Error(u(188))}if(a.return!==n.return)a=i,n=o;else{for(var d=!1,m=i.child;m;){if(m===a){d=!0,a=i,n=o;break}if(m===n){d=!0,n=i,a=o;break}m=m.sibling}if(!d){for(m=o.child;m;){if(m===a){d=!0,a=o,n=i;break}if(m===n){d=!0,n=o,a=i;break}m=m.sibling}if(!d)throw Error(u(189))}}if(a.alternate!==n)throw Error(u(190))}if(a.tag!==3)throw Error(u(188));return a.stateNode.current===a?e:t}function U(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=U(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,G=Symbol.for("react.element"),Z=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),pe=Symbol.for("react.consumer"),F=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),st=Symbol.for("react.activity"),Wt=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function Ge(e){return e===null||typeof e!="object"?null:(e=ft&&e[ft]||e["@@iterator"],typeof e=="function"?e:null)}var Ft=Symbol.for("react.client.reference");function Xt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ft?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case _e:return"Profiler";case ie:return"StrictMode";case je:return"Suspense";case Ye:return"SuspenseList";case st:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case F:return e.displayName||"Context";case pe:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pe:return t=e.displayName||null,t!==null?t:Xt(e.type)||"Memo";case Ie:t=e._payload,e=e._init;try{return Xt(e(t))}catch{}}return null}var dt=Array.isArray,A=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},se=[],fe=-1;function Ne(e){return{current:e}}function ye(e){0>fe||(e.current=se[fe],se[fe]=null,fe--)}function M(e,t){fe++,se[fe]=e.current,e.current=t}var P=Ne(null),He=Ne(null),Q=Ne(null),de=Ne(null);function Te(e,t){switch(M(Q,t),M(He,e),M(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ed(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ed(t),e=qd(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ye(P),M(P,e)}function Ae(){ye(P),ye(He),ye(Q)}function Ve(e){e.memoizedState!==null&&M(de,e);var t=P.current,a=qd(t,e.type);t!==a&&(M(He,e),M(P,a))}function et(e){He.current===e&&(ye(P),ye(He)),de.current===e&&(ye(de),Yr._currentValue=k)}var ke,fn;function Tt(e){if(ke===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ke=t&&t[1]||"",fn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+e+fn}var kt=!1;function vi(e,t){if(!e||kt)return"";kt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var O=function(){throw Error()};if(Object.defineProperty(O.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(O,[])}catch(T){var q=T}Reflect.construct(e,[],O)}else{try{O.call()}catch(T){q=T}e.call(O.prototype)}}else{try{throw Error()}catch(T){q=T}(O=e())&&typeof O.catch=="function"&&O.catch(function(){})}}catch(T){if(T&&q&&typeof T.stack=="string")return[T.stack,q.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=n.DetermineComponentFrameRoot(),d=o[0],m=o[1];if(d&&m){var y=d.split(`
`),E=m.split(`
`);for(i=n=0;n<y.length&&!y[n].includes("DetermineComponentFrameRoot");)n++;for(;i<E.length&&!E[i].includes("DetermineComponentFrameRoot");)i++;if(n===y.length||i===E.length)for(n=y.length-1,i=E.length-1;1<=n&&0<=i&&y[n]!==E[i];)i--;for(;1<=n&&0<=i;n--,i--)if(y[n]!==E[i]){if(n!==1||i!==1)do if(n--,i--,0>i||y[n]!==E[i]){var D=`
`+y[n].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=n&&0<=i);break}}}finally{kt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Tt(a):""}function Cm(e,t){switch(e.tag){case 26:case 27:case 5:return Tt(e.type);case 16:return Tt("Lazy");case 13:return e.child!==t&&t!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return vi(e.type,!1);case 11:return vi(e.type.render,!1);case 1:return vi(e.type,!0);case 31:return Tt("Activity");default:return""}}function Iu(e){try{var t="",a=null;do t+=Cm(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var bi=Object.prototype.hasOwnProperty,Si=r.unstable_scheduleCallback,wi=r.unstable_cancelCallback,Om=r.unstable_shouldYield,Mm=r.unstable_requestPaint,mt=r.unstable_now,zm=r.unstable_getCurrentPriorityLevel,eo=r.unstable_ImmediatePriority,to=r.unstable_UserBlockingPriority,$r=r.unstable_NormalPriority,Nm=r.unstable_LowPriority,ao=r.unstable_IdlePriority,Rm=r.log,xm=r.unstable_setDisableYieldValue,In=null,_t=null;function ha(e){if(typeof Rm=="function"&&xm(e),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(In,e)}catch{}}var pt=Math.clz32?Math.clz32:Hm,Um=Math.log,Bm=Math.LN2;function Hm(e){return e>>>=0,e===0?32:31-(Um(e)/Bm|0)|0}var Pr=256,Ir=262144,el=4194304;function Ga(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function tl(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var i=0,o=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var m=n&134217727;return m!==0?(n=m&~o,n!==0?i=Ga(n):(d&=m,d!==0?i=Ga(d):a||(a=m&~e,a!==0&&(i=Ga(a))))):(m=n&~o,m!==0?i=Ga(m):d!==0?i=Ga(d):a||(a=n&~e,a!==0&&(i=Ga(a)))),i===0?0:t!==0&&t!==i&&(t&o)===0&&(o=i&-i,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:i}function er(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function km(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function no(){var e=el;return el<<=1,(el&62914560)===0&&(el=4194304),e}function ji(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function tr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Lm(e,t,a,n,i,o){var d=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,y=e.expirationTimes,E=e.hiddenUpdates;for(a=d&~a;0<a;){var D=31-pt(a),O=1<<D;m[D]=0,y[D]=-1;var q=E[D];if(q!==null)for(E[D]=null,D=0;D<q.length;D++){var T=q[D];T!==null&&(T.lane&=-536870913)}a&=~O}n!==0&&ro(e,n,0),o!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=o&~(d&~t))}function ro(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-pt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function lo(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-pt(a),i=1<<n;i&t|e[n]&t&&(e[n]|=t),a&=~i}}function io(e,t){var a=t&-t;return a=(a&42)!==0?1:Ei(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ei(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function qi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function co(){var e=R.p;return e!==0?e:(e=window.event,e===void 0?32:Jd(e.type))}function uo(e,t){var a=R.p;try{return R.p=e,t()}finally{R.p=a}}var ga=Math.random().toString(36).slice(2),Ke="__reactFiber$"+ga,nt="__reactProps$"+ga,dn="__reactContainer$"+ga,Ti="__reactEvents$"+ga,Ym="__reactListeners$"+ga,Gm="__reactHandles$"+ga,oo="__reactResources$"+ga,ar="__reactMarker$"+ga;function Di(e){delete e[Ke],delete e[nt],delete e[Ti],delete e[Ym],delete e[Gm]}function mn(e){var t=e[Ke];if(t)return t;for(var a=e.parentNode;a;){if(t=a[dn]||a[Ke]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=zd(e);e!==null;){if(a=e[Ke])return a;e=zd(e)}return t}e=a,a=e.parentNode}return null}function _n(e){if(e=e[Ke]||e[dn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function nr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function pn(e){var t=e[oo];return t||(t=e[oo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qe(e){e[ar]=!0}var so=new Set,fo={};function Qa(e,t){hn(e,t),hn(e+"Capture",t)}function hn(e,t){for(fo[e]=t,e=0;e<t.length;e++)so.add(t[e])}var Qm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mo={},_o={};function Xm(e){return bi.call(_o,e)?!0:bi.call(mo,e)?!1:Qm.test(e)?_o[e]=!0:(mo[e]=!0,!1)}function al(e,t,a){if(Xm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function nl(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function $t(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function Dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function po(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zm(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(d){a=""+d,o.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ai(e){if(!e._valueTracker){var t=po(e)?"checked":"value";e._valueTracker=Zm(e,t,""+e[t])}}function ho(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=po(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function rl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vm=/[\n"\\]/g;function At(e){return e.replace(Vm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ci(e,t,a,n,i,o,d,m){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),t!=null?d==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dt(t)):e.value!==""+Dt(t)&&(e.value=""+Dt(t)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),t!=null?Oi(e,d,Dt(t)):a!=null?Oi(e,d,Dt(a)):n!=null&&e.removeAttribute("value"),i==null&&o!=null&&(e.defaultChecked=!!o),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+Dt(m):e.removeAttribute("name")}function go(e,t,a,n,i,o,d,m){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){Ai(e);return}a=a!=null?""+Dt(a):"",t=t!=null?""+Dt(t):a,m||t===e.value||(e.value=t),e.defaultValue=t}n=n??i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=m?e.checked:!!n,e.defaultChecked=!!n,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),Ai(e)}function Oi(e,t,a){t==="number"&&rl(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function gn(e,t,a,n){if(e=e.options,t){t={};for(var i=0;i<a.length;i++)t["$"+a[i]]=!0;for(a=0;a<e.length;a++)i=t.hasOwnProperty("$"+e[a].value),e[a].selected!==i&&(e[a].selected=i),i&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Dt(a),t=null,i=0;i<e.length;i++){if(e[i].value===a){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function yo(e,t,a){if(t!=null&&(t=""+Dt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Dt(a):""}function vo(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(u(92));if(dt(n)){if(1<n.length)throw Error(u(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Dt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),Ai(e)}function yn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Km=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bo(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Km.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function So(e,t,a){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&a[i]!==n&&bo(e,i,n)}else for(var o in t)t.hasOwnProperty(o)&&bo(e,o,t[o])}function Mi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ll(e){return Wm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var zi=null;function Ni(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vn=null,bn=null;function wo(e){var t=_n(e);if(t&&(e=t.stateNode)){var a=e[nt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ci(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+At(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var i=n[nt]||null;if(!i)throw Error(u(90));Ci(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&ho(n)}break e;case"textarea":yo(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&gn(e,!!a.multiple,t,!1)}}}var Ri=!1;function jo(e,t,a){if(Ri)return e(t,a);Ri=!0;try{var n=e(t);return n}finally{if(Ri=!1,(vn!==null||bn!==null)&&(Vl(),vn&&(t=vn,e=bn,bn=vn=null,wo(t),e)))for(t=0;t<e.length;t++)wo(e[t])}}function rr(e,t){var a=e.stateNode;if(a===null)return null;var n=a[nt]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(u(231,t,typeof a));return a}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xi=!1;if(It)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){xi=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{xi=!1}var ya=null,Ui=null,il=null;function Eo(){if(il)return il;var e,t=Ui,a=t.length,n,i="value"in ya?ya.value:ya.textContent,o=i.length;for(e=0;e<a&&t[e]===i[e];e++);var d=a-e;for(n=1;n<=d&&t[a-n]===i[o-n];n++);return il=i.slice(e,1<n?1-n:void 0)}function cl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ul(){return!0}function qo(){return!1}function rt(e){function t(a,n,i,o,d){this._reactName=a,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=d,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(o):o[m]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ul:qo,this.isPropagationStopped=qo,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),t}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ol=rt(Xa),ir=N({},Xa,{view:0,detail:0}),Fm=rt(ir),Bi,Hi,cr,sl=N({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cr&&(cr&&e.type==="mousemove"?(Bi=e.screenX-cr.screenX,Hi=e.screenY-cr.screenY):Hi=Bi=0,cr=e),Bi)},movementY:function(e){return"movementY"in e?e.movementY:Hi}}),To=rt(sl),$m=N({},sl,{dataTransfer:0}),Pm=rt($m),Im=N({},ir,{relatedTarget:0}),ki=rt(Im),e_=N({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),t_=rt(e_),a_=N({},Xa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),n_=rt(a_),r_=N({},Xa,{data:0}),Do=rt(r_),l_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=c_[e])?!!t[e]:!1}function Li(){return u_}var o_=N({},ir,{key:function(e){if(e.key){var t=l_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?cl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),s_=rt(o_),f_=N({},sl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ao=rt(f_),d_=N({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),m_=rt(d_),__=N({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),p_=rt(__),h_=N({},sl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g_=rt(h_),y_=N({},Xa,{newState:0,oldState:0}),v_=rt(y_),b_=[9,13,27,32],Yi=It&&"CompositionEvent"in window,ur=null;It&&"documentMode"in document&&(ur=document.documentMode);var S_=It&&"TextEvent"in window&&!ur,Co=It&&(!Yi||ur&&8<ur&&11>=ur),Oo=" ",Mo=!1;function zo(e,t){switch(e){case"keyup":return b_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function No(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sn=!1;function w_(e,t){switch(e){case"compositionend":return No(t);case"keypress":return t.which!==32?null:(Mo=!0,Oo);case"textInput":return e=t.data,e===Oo&&Mo?null:e;default:return null}}function j_(e,t){if(Sn)return e==="compositionend"||!Yi&&zo(e,t)?(e=Eo(),il=Ui=ya=null,Sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Co&&t.locale!=="ko"?null:t.data;default:return null}}var E_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ro(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!E_[e.type]:t==="textarea"}function xo(e,t,a,n){vn?bn?bn.push(n):bn=[n]:vn=n,t=Il(t,"onChange"),0<t.length&&(a=new ol("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var or=null,sr=null;function q_(e){yd(e,0)}function fl(e){var t=nr(e);if(ho(t))return e}function Uo(e,t){if(e==="change")return t}var Bo=!1;if(It){var Gi;if(It){var Qi="oninput"in document;if(!Qi){var Ho=document.createElement("div");Ho.setAttribute("oninput","return;"),Qi=typeof Ho.oninput=="function"}Gi=Qi}else Gi=!1;Bo=Gi&&(!document.documentMode||9<document.documentMode)}function ko(){or&&(or.detachEvent("onpropertychange",Lo),sr=or=null)}function Lo(e){if(e.propertyName==="value"&&fl(sr)){var t=[];xo(t,sr,e,Ni(e)),jo(q_,t)}}function T_(e,t,a){e==="focusin"?(ko(),or=t,sr=a,or.attachEvent("onpropertychange",Lo)):e==="focusout"&&ko()}function D_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fl(sr)}function A_(e,t){if(e==="click")return fl(t)}function C_(e,t){if(e==="input"||e==="change")return fl(t)}function O_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ht=typeof Object.is=="function"?Object.is:O_;function fr(e,t){if(ht(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!bi.call(t,i)||!ht(e[i],t[i]))return!1}return!0}function Yo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Go(e,t){var a=Yo(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yo(a)}}function Qo(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qo(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=rl(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=rl(e.document)}return t}function Xi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var M_=It&&"documentMode"in document&&11>=document.documentMode,wn=null,Zi=null,dr=null,Vi=!1;function Zo(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vi||wn==null||wn!==rl(n)||(n=wn,"selectionStart"in n&&Xi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dr&&fr(dr,n)||(dr=n,n=Il(Zi,"onSelect"),0<n.length&&(t=new ol("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=wn)))}function Za(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var jn={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},Ki={},Vo={};It&&(Vo=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);function Va(e){if(Ki[e])return Ki[e];if(!jn[e])return e;var t=jn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Vo)return Ki[e]=t[a];return e}var Ko=Va("animationend"),Jo=Va("animationiteration"),Wo=Va("animationstart"),z_=Va("transitionrun"),N_=Va("transitionstart"),R_=Va("transitioncancel"),Fo=Va("transitionend"),$o=new Map,Ji="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ji.push("scrollEnd");function Lt(e,t){$o.set(e,t),Qa(t,[e])}var dl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ct=[],En=0,Wi=0;function ml(){for(var e=En,t=Wi=En=0;t<e;){var a=Ct[t];Ct[t++]=null;var n=Ct[t];Ct[t++]=null;var i=Ct[t];Ct[t++]=null;var o=Ct[t];if(Ct[t++]=null,n!==null&&i!==null){var d=n.pending;d===null?i.next=i:(i.next=d.next,d.next=i),n.pending=i}o!==0&&Po(a,i,o)}}function _l(e,t,a,n){Ct[En++]=e,Ct[En++]=t,Ct[En++]=a,Ct[En++]=n,Wi|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Fi(e,t,a,n){return _l(e,t,a,n),pl(e)}function Ka(e,t){return _l(e,null,null,t),pl(e)}function Po(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var i=!1,o=e.return;o!==null;)o.childLanes|=a,n=o.alternate,n!==null&&(n.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(i=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,i&&t!==null&&(i=31-pt(a),e=o.hiddenUpdates,n=e[i],n===null?e[i]=[t]:n.push(t),t.lane=a|536870912),o):null}function pl(e){if(50<Rr)throw Rr=0,lu=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var qn={};function x_(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,a,n){return new x_(e,t,a,n)}function $i(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ea(e,t){var a=e.alternate;return a===null?(a=gt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Io(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function hl(e,t,a,n,i,o){var d=0;if(n=e,typeof e=="function")$i(e)&&(d=1);else if(typeof e=="string")d=Lp(e,a,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case st:return e=gt(31,a,t,i),e.elementType=st,e.lanes=o,e;case H:return Ja(a.children,i,o,t);case ie:d=8,i|=24;break;case _e:return e=gt(12,a,t,i|2),e.elementType=_e,e.lanes=o,e;case je:return e=gt(13,a,t,i),e.elementType=je,e.lanes=o,e;case Ye:return e=gt(19,a,t,i),e.elementType=Ye,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F:d=10;break e;case pe:d=9;break e;case J:d=11;break e;case Pe:d=14;break e;case Ie:d=16,n=null;break e}d=29,a=Error(u(130,e===null?"null":typeof e,"")),n=null}return t=gt(d,a,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Ja(e,t,a,n){return e=gt(7,e,n,t),e.lanes=a,e}function Pi(e,t,a){return e=gt(6,e,null,t),e.lanes=a,e}function es(e){var t=gt(18,null,null,0);return t.stateNode=e,t}function Ii(e,t,a){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ts=new WeakMap;function Ot(e,t){if(typeof e=="object"&&e!==null){var a=ts.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Iu(t)},ts.set(e,t),t)}return{value:e,source:t,stack:Iu(t)}}var Tn=[],Dn=0,gl=null,mr=0,Mt=[],zt=0,va=null,Zt=1,Vt="";function ta(e,t){Tn[Dn++]=mr,Tn[Dn++]=gl,gl=e,mr=t}function as(e,t,a){Mt[zt++]=Zt,Mt[zt++]=Vt,Mt[zt++]=va,va=e;var n=Zt;e=Vt;var i=32-pt(n)-1;n&=~(1<<i),a+=1;var o=32-pt(t)+i;if(30<o){var d=i-i%5;o=(n&(1<<d)-1).toString(32),n>>=d,i-=d,Zt=1<<32-pt(t)+i|a<<i|n,Vt=o+e}else Zt=1<<o|a<<i|n,Vt=e}function ec(e){e.return!==null&&(ta(e,1),as(e,1,0))}function tc(e){for(;e===gl;)gl=Tn[--Dn],Tn[Dn]=null,mr=Tn[--Dn],Tn[Dn]=null;for(;e===va;)va=Mt[--zt],Mt[zt]=null,Vt=Mt[--zt],Mt[zt]=null,Zt=Mt[--zt],Mt[zt]=null}function ns(e,t){Mt[zt++]=Zt,Mt[zt++]=Vt,Mt[zt++]=va,Zt=t.id,Vt=t.overflow,va=e}var Je=null,Ee=null,le=!1,ba=null,Nt=!1,ac=Error(u(519));function Sa(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _r(Ot(t,e)),ac}function rs(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[Ke]=e,t[nt]=n,a){case"dialog":ae("cancel",t),ae("close",t);break;case"iframe":case"object":case"embed":ae("load",t);break;case"video":case"audio":for(a=0;a<Ur.length;a++)ae(Ur[a],t);break;case"source":ae("error",t);break;case"img":case"image":case"link":ae("error",t),ae("load",t);break;case"details":ae("toggle",t);break;case"input":ae("invalid",t),go(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":ae("invalid",t);break;case"textarea":ae("invalid",t),vo(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||wd(t.textContent,a)?(n.popover!=null&&(ae("beforetoggle",t),ae("toggle",t)),n.onScroll!=null&&ae("scroll",t),n.onScrollEnd!=null&&ae("scrollend",t),n.onClick!=null&&(t.onclick=Pt),t=!0):t=!1,t||Sa(e,!0)}function ls(e){for(Je=e.return;Je;)switch(Je.tag){case 5:case 31:case 13:Nt=!1;return;case 27:case 3:Nt=!0;return;default:Je=Je.return}}function An(e){if(e!==Je)return!1;if(!le)return ls(e),le=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||bu(e.type,e.memoizedProps)),a=!a),a&&Ee&&Sa(e),ls(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ee=Md(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ee=Md(e)}else t===27?(t=Ee,xa(e.type)?(e=qu,qu=null,Ee=e):Ee=t):Ee=Je?xt(e.stateNode.nextSibling):null;return!0}function Wa(){Ee=Je=null,le=!1}function nc(){var e=ba;return e!==null&&(ut===null?ut=e:ut.push.apply(ut,e),ba=null),e}function _r(e){ba===null?ba=[e]:ba.push(e)}var rc=Ne(null),Fa=null,aa=null;function wa(e,t,a){M(rc,t._currentValue),t._currentValue=a}function na(e){e._currentValue=rc.current,ye(rc)}function lc(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function ic(e,t,a,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){var d=i.child;o=o.firstContext;e:for(;o!==null;){var m=o;o=i;for(var y=0;y<t.length;y++)if(m.context===t[y]){o.lanes|=a,m=o.alternate,m!==null&&(m.lanes|=a),lc(o.return,a,e),n||(d=null);break e}o=m.next}}else if(i.tag===18){if(d=i.return,d===null)throw Error(u(341));d.lanes|=a,o=d.alternate,o!==null&&(o.lanes|=a),lc(d,a,e),d=null}else d=i.child;if(d!==null)d.return=i;else for(d=i;d!==null;){if(d===e){d=null;break}if(i=d.sibling,i!==null){i.return=d.return,d=i;break}d=d.return}i=d}}function Cn(e,t,a,n){e=null;for(var i=t,o=!1;i!==null;){if(!o){if((i.flags&524288)!==0)o=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var d=i.alternate;if(d===null)throw Error(u(387));if(d=d.memoizedProps,d!==null){var m=i.type;ht(i.pendingProps.value,d.value)||(e!==null?e.push(m):e=[m])}}else if(i===de.current){if(d=i.alternate,d===null)throw Error(u(387));d.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Yr):e=[Yr])}i=i.return}e!==null&&ic(t,e,a,n),t.flags|=262144}function yl(e){for(e=e.firstContext;e!==null;){if(!ht(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function $a(e){Fa=e,aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function We(e){return is(Fa,e)}function vl(e,t){return Fa===null&&$a(e),is(e,t)}function is(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},aa===null){if(e===null)throw Error(u(308));aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else aa=aa.next=t;return a}var U_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},B_=r.unstable_scheduleCallback,H_=r.unstable_NormalPriority,Re={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cc(){return{controller:new U_,data:new Map,refCount:0}}function pr(e){e.refCount--,e.refCount===0&&B_(H_,function(){e.controller.abort()})}var hr=null,uc=0,On=0,Mn=null;function k_(e,t){if(hr===null){var a=hr=[];uc=0,On=fu(),Mn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return uc++,t.then(cs,cs),t}function cs(){if(--uc===0&&hr!==null){Mn!==null&&(Mn.status="fulfilled");var e=hr;hr=null,On=0,Mn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function L_(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}var us=A.S;A.S=function(e,t){Vf=mt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&k_(e,t),us!==null&&us(e,t)};var Pa=Ne(null);function oc(){var e=Pa.current;return e!==null?e:we.pooledCache}function bl(e,t){t===null?M(Pa,Pa.current):M(Pa,t.pool)}function os(){var e=oc();return e===null?null:{parent:Re._currentValue,pool:e}}var zn=Error(u(460)),sc=Error(u(474)),Sl=Error(u(542)),wl={then:function(){}};function ss(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fs(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Pt,Pt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ms(e),e;default:if(typeof t.status=="string")t.then(Pt,Pt);else{if(e=we,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=n}},function(n){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ms(e),e}throw en=t,zn}}function Ia(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(en=a,zn):a}}var en=null;function ds(){if(en===null)throw Error(u(459));var e=en;return en=null,e}function ms(e){if(e===zn||e===Sl)throw Error(u(483))}var Nn=null,gr=0;function jl(e){var t=gr;return gr+=1,Nn===null&&(Nn=[]),fs(Nn,e,t)}function yr(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function El(e,t){throw t.$$typeof===G?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _s(e){function t(S,b){if(e){var j=S.deletions;j===null?(S.deletions=[b],S.flags|=16):j.push(b)}}function a(S,b){if(!e)return null;for(;b!==null;)t(S,b),b=b.sibling;return null}function n(S){for(var b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(S,b){return S=ea(S,b),S.index=0,S.sibling=null,S}function o(S,b,j){return S.index=j,e?(j=S.alternate,j!==null?(j=j.index,j<b?(S.flags|=67108866,b):j):(S.flags|=67108866,b)):(S.flags|=1048576,b)}function d(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function m(S,b,j,C){return b===null||b.tag!==6?(b=Pi(j,S.mode,C),b.return=S,b):(b=i(b,j),b.return=S,b)}function y(S,b,j,C){var X=j.type;return X===H?D(S,b,j.props.children,C,j.key):b!==null&&(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ie&&Ia(X)===b.type)?(b=i(b,j.props),yr(b,j),b.return=S,b):(b=hl(j.type,j.key,j.props,null,S.mode,C),yr(b,j),b.return=S,b)}function E(S,b,j,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Ii(j,S.mode,C),b.return=S,b):(b=i(b,j.children||[]),b.return=S,b)}function D(S,b,j,C,X){return b===null||b.tag!==7?(b=Ja(j,S.mode,C,X),b.return=S,b):(b=i(b,j),b.return=S,b)}function O(S,b,j){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Pi(""+b,S.mode,j),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Z:return j=hl(b.type,b.key,b.props,null,S.mode,j),yr(j,b),j.return=S,j;case V:return b=Ii(b,S.mode,j),b.return=S,b;case Ie:return b=Ia(b),O(S,b,j)}if(dt(b)||Ge(b))return b=Ja(b,S.mode,j,null),b.return=S,b;if(typeof b.then=="function")return O(S,jl(b),j);if(b.$$typeof===F)return O(S,vl(S,b),j);El(S,b)}return null}function q(S,b,j,C){var X=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return X!==null?null:m(S,b,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:return j.key===X?y(S,b,j,C):null;case V:return j.key===X?E(S,b,j,C):null;case Ie:return j=Ia(j),q(S,b,j,C)}if(dt(j)||Ge(j))return X!==null?null:D(S,b,j,C,null);if(typeof j.then=="function")return q(S,b,jl(j),C);if(j.$$typeof===F)return q(S,b,vl(S,j),C);El(S,j)}return null}function T(S,b,j,C,X){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return S=S.get(j)||null,m(b,S,""+C,X);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Z:return S=S.get(C.key===null?j:C.key)||null,y(b,S,C,X);case V:return S=S.get(C.key===null?j:C.key)||null,E(b,S,C,X);case Ie:return C=Ia(C),T(S,b,j,C,X)}if(dt(C)||Ge(C))return S=S.get(j)||null,D(b,S,C,X,null);if(typeof C.then=="function")return T(S,b,j,jl(C),X);if(C.$$typeof===F)return T(S,b,j,vl(b,C),X);El(b,C)}return null}function L(S,b,j,C){for(var X=null,ce=null,Y=b,$=b=0,re=null;Y!==null&&$<j.length;$++){Y.index>$?(re=Y,Y=null):re=Y.sibling;var ue=q(S,Y,j[$],C);if(ue===null){Y===null&&(Y=re);break}e&&Y&&ue.alternate===null&&t(S,Y),b=o(ue,b,$),ce===null?X=ue:ce.sibling=ue,ce=ue,Y=re}if($===j.length)return a(S,Y),le&&ta(S,$),X;if(Y===null){for(;$<j.length;$++)Y=O(S,j[$],C),Y!==null&&(b=o(Y,b,$),ce===null?X=Y:ce.sibling=Y,ce=Y);return le&&ta(S,$),X}for(Y=n(Y);$<j.length;$++)re=T(Y,S,$,j[$],C),re!==null&&(e&&re.alternate!==null&&Y.delete(re.key===null?$:re.key),b=o(re,b,$),ce===null?X=re:ce.sibling=re,ce=re);return e&&Y.forEach(function(La){return t(S,La)}),le&&ta(S,$),X}function K(S,b,j,C){if(j==null)throw Error(u(151));for(var X=null,ce=null,Y=b,$=b=0,re=null,ue=j.next();Y!==null&&!ue.done;$++,ue=j.next()){Y.index>$?(re=Y,Y=null):re=Y.sibling;var La=q(S,Y,ue.value,C);if(La===null){Y===null&&(Y=re);break}e&&Y&&La.alternate===null&&t(S,Y),b=o(La,b,$),ce===null?X=La:ce.sibling=La,ce=La,Y=re}if(ue.done)return a(S,Y),le&&ta(S,$),X;if(Y===null){for(;!ue.done;$++,ue=j.next())ue=O(S,ue.value,C),ue!==null&&(b=o(ue,b,$),ce===null?X=ue:ce.sibling=ue,ce=ue);return le&&ta(S,$),X}for(Y=n(Y);!ue.done;$++,ue=j.next())ue=T(Y,S,$,ue.value,C),ue!==null&&(e&&ue.alternate!==null&&Y.delete(ue.key===null?$:ue.key),b=o(ue,b,$),ce===null?X=ue:ce.sibling=ue,ce=ue);return e&&Y.forEach(function($p){return t(S,$p)}),le&&ta(S,$),X}function Se(S,b,j,C){if(typeof j=="object"&&j!==null&&j.type===H&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:e:{for(var X=j.key;b!==null;){if(b.key===X){if(X=j.type,X===H){if(b.tag===7){a(S,b.sibling),C=i(b,j.props.children),C.return=S,S=C;break e}}else if(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ie&&Ia(X)===b.type){a(S,b.sibling),C=i(b,j.props),yr(C,j),C.return=S,S=C;break e}a(S,b);break}else t(S,b);b=b.sibling}j.type===H?(C=Ja(j.props.children,S.mode,C,j.key),C.return=S,S=C):(C=hl(j.type,j.key,j.props,null,S.mode,C),yr(C,j),C.return=S,S=C)}return d(S);case V:e:{for(X=j.key;b!==null;){if(b.key===X)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){a(S,b.sibling),C=i(b,j.children||[]),C.return=S,S=C;break e}else{a(S,b);break}else t(S,b);b=b.sibling}C=Ii(j,S.mode,C),C.return=S,S=C}return d(S);case Ie:return j=Ia(j),Se(S,b,j,C)}if(dt(j))return L(S,b,j,C);if(Ge(j)){if(X=Ge(j),typeof X!="function")throw Error(u(150));return j=X.call(j),K(S,b,j,C)}if(typeof j.then=="function")return Se(S,b,jl(j),C);if(j.$$typeof===F)return Se(S,b,vl(S,j),C);El(S,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,b!==null&&b.tag===6?(a(S,b.sibling),C=i(b,j),C.return=S,S=C):(a(S,b),C=Pi(j,S.mode,C),C.return=S,S=C),d(S)):a(S,b)}return function(S,b,j,C){try{gr=0;var X=Se(S,b,j,C);return Nn=null,X}catch(Y){if(Y===zn||Y===Sl)throw Y;var ce=gt(29,Y,null,S.mode);return ce.lanes=C,ce.return=S,ce}finally{}}}var tn=_s(!0),ps=_s(!1),ja=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ea(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qa(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(me&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=pl(e),Po(e,null,a),t}return _l(e,n,t,a),pl(e)}function vr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,lo(e,a)}}function mc(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var d={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?i=o=d:o=o.next=d,a=a.next}while(a!==null);o===null?i=o=t:o=o.next=t}else i=o=t;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var _c=!1;function br(){if(_c){var e=Mn;if(e!==null)throw e}}function Sr(e,t,a,n){_c=!1;var i=e.updateQueue;ja=!1;var o=i.firstBaseUpdate,d=i.lastBaseUpdate,m=i.shared.pending;if(m!==null){i.shared.pending=null;var y=m,E=y.next;y.next=null,d===null?o=E:d.next=E,d=y;var D=e.alternate;D!==null&&(D=D.updateQueue,m=D.lastBaseUpdate,m!==d&&(m===null?D.firstBaseUpdate=E:m.next=E,D.lastBaseUpdate=y))}if(o!==null){var O=i.baseState;d=0,D=E=y=null,m=o;do{var q=m.lane&-536870913,T=q!==m.lane;if(T?(ne&q)===q:(n&q)===q){q!==0&&q===On&&(_c=!0),D!==null&&(D=D.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var L=e,K=m;q=t;var Se=a;switch(K.tag){case 1:if(L=K.payload,typeof L=="function"){O=L.call(Se,O,q);break e}O=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=K.payload,q=typeof L=="function"?L.call(Se,O,q):L,q==null)break e;O=N({},O,q);break e;case 2:ja=!0}}q=m.callback,q!==null&&(e.flags|=64,T&&(e.flags|=8192),T=i.callbacks,T===null?i.callbacks=[q]:T.push(q))}else T={lane:q,tag:m.tag,payload:m.payload,callback:m.callback,next:null},D===null?(E=D=T,y=O):D=D.next=T,d|=q;if(m=m.next,m===null){if(m=i.shared.pending,m===null)break;T=m,m=T.next,T.next=null,i.lastBaseUpdate=T,i.shared.pending=null}}while(!0);D===null&&(y=O),i.baseState=y,i.firstBaseUpdate=E,i.lastBaseUpdate=D,o===null&&(i.shared.lanes=0),Oa|=d,e.lanes=d,e.memoizedState=O}}function hs(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function gs(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)hs(a[e],t)}var Rn=Ne(null),ql=Ne(0);function ys(e,t){e=da,M(ql,e),M(Rn,t),da=e|t.baseLanes}function pc(){M(ql,da),M(Rn,Rn.current)}function hc(){da=ql.current,ye(Rn),ye(ql)}var yt=Ne(null),Rt=null;function Ta(e){var t=e.alternate;M(Me,Me.current&1),M(yt,e),Rt===null&&(t===null||Rn.current!==null||t.memoizedState!==null)&&(Rt=e)}function gc(e){M(Me,Me.current),M(yt,e),Rt===null&&(Rt=e)}function vs(e){e.tag===22?(M(Me,Me.current),M(yt,e),Rt===null&&(Rt=e)):Da()}function Da(){M(Me,Me.current),M(yt,yt.current)}function vt(e){ye(yt),Rt===e&&(Rt=null),ye(Me)}var Me=Ne(0);function Tl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ju(a)||Eu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=0,W=null,ve=null,xe=null,Dl=!1,xn=!1,an=!1,Al=0,wr=0,Un=null,Y_=0;function Ce(){throw Error(u(321))}function yc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!ht(e[a],t[a]))return!1;return!0}function vc(e,t,a,n,i,o){return ra=o,W=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?af:Rc,an=!1,o=a(n,i),an=!1,xn&&(o=Ss(t,a,n,i)),bs(e),o}function bs(e){A.H=qr;var t=ve!==null&&ve.next!==null;if(ra=0,xe=ve=W=null,Dl=!1,wr=0,Un=null,t)throw Error(u(300));e===null||Ue||(e=e.dependencies,e!==null&&yl(e)&&(Ue=!0))}function Ss(e,t,a,n){W=e;var i=0;do{if(xn&&(Un=null),wr=0,xn=!1,25<=i)throw Error(u(301));if(i+=1,xe=ve=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}A.H=nf,o=t(a,n)}while(xn);return o}function G_(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?jr(t):t,e=e.useState()[0],(ve!==null?ve.memoizedState:null)!==e&&(W.flags|=1024),t}function bc(){var e=Al!==0;return Al=0,e}function Sc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function wc(e){if(Dl){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Dl=!1}ra=0,xe=ve=W=null,xn=!1,wr=Al=0,Un=null}function tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?W.memoizedState=xe=e:xe=xe.next=e,xe}function ze(){if(ve===null){var e=W.alternate;e=e!==null?e.memoizedState:null}else e=ve.next;var t=xe===null?W.memoizedState:xe.next;if(t!==null)xe=t,ve=e;else{if(e===null)throw W.alternate===null?Error(u(467)):Error(u(310));ve=e,e={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},xe===null?W.memoizedState=xe=e:xe=xe.next=e}return xe}function Cl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jr(e){var t=wr;return wr+=1,Un===null&&(Un=[]),e=fs(Un,e,t),t=W,(xe===null?t.memoizedState:xe.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?af:Rc),e}function Ol(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return jr(e);if(e.$$typeof===F)return We(e)}throw Error(u(438,String(e)))}function jc(e){var t=null,a=W.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=W.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Cl(),W.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=Wt;return t.index++,a}function la(e,t){return typeof t=="function"?t(e):t}function Ml(e){var t=ze();return Ec(t,ve,e)}function Ec(e,t,a){var n=e.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=a;var i=e.baseQueue,o=n.pending;if(o!==null){if(i!==null){var d=i.next;i.next=o.next,o.next=d}t.baseQueue=i=o,n.pending=null}if(o=e.baseState,i===null)e.memoizedState=o;else{t=i.next;var m=d=null,y=null,E=t,D=!1;do{var O=E.lane&-536870913;if(O!==E.lane?(ne&O)===O:(ra&O)===O){var q=E.revertLane;if(q===0)y!==null&&(y=y.next={lane:0,revertLane:0,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),O===On&&(D=!0);else if((ra&q)===q){E=E.next,q===On&&(D=!0);continue}else O={lane:0,revertLane:E.revertLane,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},y===null?(m=y=O,d=o):y=y.next=O,W.lanes|=q,Oa|=q;O=E.action,an&&a(o,O),o=E.hasEagerState?E.eagerState:a(o,O)}else q={lane:O,revertLane:E.revertLane,gesture:E.gesture,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},y===null?(m=y=q,d=o):y=y.next=q,W.lanes|=O,Oa|=O;E=E.next}while(E!==null&&E!==t);if(y===null?d=o:y.next=m,!ht(o,e.memoizedState)&&(Ue=!0,D&&(a=Mn,a!==null)))throw a;e.memoizedState=o,e.baseState=d,e.baseQueue=y,n.lastRenderedState=o}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function qc(e){var t=ze(),a=t.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,o=t.memoizedState;if(i!==null){a.pending=null;var d=i=i.next;do o=e(o,d.action),d=d.next;while(d!==i);ht(o,t.memoizedState)||(Ue=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,n]}function ws(e,t,a){var n=W,i=ze(),o=le;if(o){if(a===void 0)throw Error(u(407));a=a()}else a=t();var d=!ht((ve||i).memoizedState,a);if(d&&(i.memoizedState=a,Ue=!0),i=i.queue,Ac(qs.bind(null,n,i,e),[e]),i.getSnapshot!==t||d||xe!==null&&xe.memoizedState.tag&1){if(n.flags|=2048,Bn(9,{destroy:void 0},Es.bind(null,n,i,a,t),null),we===null)throw Error(u(349));o||(ra&127)!==0||js(n,t,a)}return a}function js(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=W.updateQueue,t===null?(t=Cl(),W.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Es(e,t,a,n){t.value=a,t.getSnapshot=n,Ts(t)&&Ds(e)}function qs(e,t,a){return a(function(){Ts(t)&&Ds(e)})}function Ts(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!ht(e,a)}catch{return!0}}function Ds(e){var t=Ka(e,2);t!==null&&ot(t,e,2)}function Tc(e){var t=tt();if(typeof e=="function"){var a=e;if(e=a(),an){ha(!0);try{a()}finally{ha(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:e},t}function As(e,t,a,n){return e.baseState=a,Ec(e,ve,typeof n=="function"?n:la)}function Q_(e,t,a,n,i){if(Rl(e))throw Error(u(485));if(e=t.action,e!==null){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){o.listeners.push(d)}};A.T!==null?a(!0):o.isTransition=!1,n(o),a=t.pending,a===null?(o.next=t.pending=o,Cs(t,o)):(o.next=a.next,t.pending=a.next=o)}}function Cs(e,t){var a=t.action,n=t.payload,i=e.state;if(t.isTransition){var o=A.T,d={};A.T=d;try{var m=a(i,n),y=A.S;y!==null&&y(d,m),Os(e,t,m)}catch(E){Dc(e,t,E)}finally{o!==null&&d.types!==null&&(o.types=d.types),A.T=o}}else try{o=a(i,n),Os(e,t,o)}catch(E){Dc(e,t,E)}}function Os(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Ms(e,t,n)},function(n){return Dc(e,t,n)}):Ms(e,t,a)}function Ms(e,t,a){t.status="fulfilled",t.value=a,zs(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Cs(e,a)))}function Dc(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,zs(t),t=t.next;while(t!==n)}e.action=null}function zs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ns(e,t){return t}function Rs(e,t){if(le){var a=we.formState;if(a!==null){e:{var n=W;if(le){if(Ee){t:{for(var i=Ee,o=Nt;i.nodeType!==8;){if(!o){i=null;break t}if(i=xt(i.nextSibling),i===null){i=null;break t}}o=i.data,i=o==="F!"||o==="F"?i:null}if(i){Ee=xt(i.nextSibling),n=i.data==="F!";break e}}Sa(n)}n=!1}n&&(t=a[0])}}return a=tt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:t},a.queue=n,a=Is.bind(null,W,n),n.dispatch=a,n=Tc(!1),o=Nc.bind(null,W,!1,n.queue),n=tt(),i={state:t,dispatch:null,action:e,pending:null},n.queue=i,a=Q_.bind(null,W,i,o,a),i.dispatch=a,n.memoizedState=e,[t,a,!1]}function xs(e){var t=ze();return Us(t,ve,e)}function Us(e,t,a){if(t=Ec(e,t,Ns)[0],e=Ml(la)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=jr(t)}catch(d){throw d===zn?Sl:d}else n=t;t=ze();var i=t.queue,o=i.dispatch;return a!==t.memoizedState&&(W.flags|=2048,Bn(9,{destroy:void 0},X_.bind(null,i,a),null)),[n,o,e]}function X_(e,t){e.action=t}function Bs(e){var t=ze(),a=ve;if(a!==null)return Us(t,a,e);ze(),t=t.memoizedState,a=ze();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Bn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=W.updateQueue,t===null&&(t=Cl(),W.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Hs(){return ze().memoizedState}function zl(e,t,a,n){var i=tt();W.flags|=e,i.memoizedState=Bn(1|t,{destroy:void 0},a,n===void 0?null:n)}function Nl(e,t,a,n){var i=ze();n=n===void 0?null:n;var o=i.memoizedState.inst;ve!==null&&n!==null&&yc(n,ve.memoizedState.deps)?i.memoizedState=Bn(t,o,a,n):(W.flags|=e,i.memoizedState=Bn(1|t,o,a,n))}function ks(e,t){zl(8390656,8,e,t)}function Ac(e,t){Nl(2048,8,e,t)}function Z_(e){W.flags|=4;var t=W.updateQueue;if(t===null)t=Cl(),W.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Ls(e){var t=ze().memoizedState;return Z_({ref:t,nextImpl:e}),function(){if((me&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function Ys(e,t){return Nl(4,2,e,t)}function Gs(e,t){return Nl(4,4,e,t)}function Qs(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xs(e,t,a){a=a!=null?a.concat([e]):null,Nl(4,4,Qs.bind(null,t,e),a)}function Cc(){}function Zs(e,t){var a=ze();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&yc(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Vs(e,t){var a=ze();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&yc(t,n[1]))return n[0];if(n=e(),an){ha(!0);try{e()}finally{ha(!1)}}return a.memoizedState=[n,t],n}function Oc(e,t,a){return a===void 0||(ra&1073741824)!==0&&(ne&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Jf(),W.lanes|=e,Oa|=e,a)}function Ks(e,t,a,n){return ht(a,t)?a:Rn.current!==null?(e=Oc(e,a,n),ht(e,t)||(Ue=!0),e):(ra&42)===0||(ra&1073741824)!==0&&(ne&261930)===0?(Ue=!0,e.memoizedState=a):(e=Jf(),W.lanes|=e,Oa|=e,t)}function Js(e,t,a,n,i){var o=R.p;R.p=o!==0&&8>o?o:8;var d=A.T,m={};A.T=m,Nc(e,!1,t,a);try{var y=i(),E=A.S;if(E!==null&&E(m,y),y!==null&&typeof y=="object"&&typeof y.then=="function"){var D=L_(y,n);Er(e,t,D,wt(e))}else Er(e,t,n,wt(e))}catch(O){Er(e,t,{then:function(){},status:"rejected",reason:O},wt())}finally{R.p=o,d!==null&&m.types!==null&&(d.types=m.types),A.T=d}}function V_(){}function Mc(e,t,a,n){if(e.tag!==5)throw Error(u(476));var i=Ws(e).queue;Js(e,i,t,k,a===null?V_:function(){return Fs(e),a(n)})}function Ws(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:k},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Fs(e){var t=Ws(e);t.next===null&&(t=e.alternate.memoizedState),Er(e,t.next.queue,{},wt())}function zc(){return We(Yr)}function $s(){return ze().memoizedState}function Ps(){return ze().memoizedState}function K_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=wt();e=Ea(a);var n=qa(t,e,a);n!==null&&(ot(n,t,a),vr(n,t,a)),t={cache:cc()},e.payload=t;return}t=t.return}}function J_(e,t,a){var n=wt();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Rl(e)?ef(t,a):(a=Fi(e,t,a,n),a!==null&&(ot(a,e,n),tf(a,t,n)))}function Is(e,t,a){var n=wt();Er(e,t,a,n)}function Er(e,t,a,n){var i={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rl(e))ef(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var d=t.lastRenderedState,m=o(d,a);if(i.hasEagerState=!0,i.eagerState=m,ht(m,d))return _l(e,t,i,0),we===null&&ml(),!1}catch{}finally{}if(a=Fi(e,t,i,n),a!==null)return ot(a,e,n),tf(a,t,n),!0}return!1}function Nc(e,t,a,n){if(n={lane:2,revertLane:fu(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Rl(e)){if(t)throw Error(u(479))}else t=Fi(e,a,n,2),t!==null&&ot(t,e,2)}function Rl(e){var t=e.alternate;return e===W||t!==null&&t===W}function ef(e,t){xn=Dl=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function tf(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,lo(e,a)}}var qr={readContext:We,use:Ol,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useLayoutEffect:Ce,useInsertionEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useSyncExternalStore:Ce,useId:Ce,useHostTransitionStatus:Ce,useFormState:Ce,useActionState:Ce,useOptimistic:Ce,useMemoCache:Ce,useCacheRefresh:Ce};qr.useEffectEvent=Ce;var af={readContext:We,use:Ol,useCallback:function(e,t){return tt().memoizedState=[e,t===void 0?null:t],e},useContext:We,useEffect:ks,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,zl(4194308,4,Qs.bind(null,t,e),a)},useLayoutEffect:function(e,t){return zl(4194308,4,e,t)},useInsertionEffect:function(e,t){zl(4,2,e,t)},useMemo:function(e,t){var a=tt();t=t===void 0?null:t;var n=e();if(an){ha(!0);try{e()}finally{ha(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=tt();if(a!==void 0){var i=a(t);if(an){ha(!0);try{a(t)}finally{ha(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=J_.bind(null,W,e),[n.memoizedState,e]},useRef:function(e){var t=tt();return e={current:e},t.memoizedState=e},useState:function(e){e=Tc(e);var t=e.queue,a=Is.bind(null,W,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Cc,useDeferredValue:function(e,t){var a=tt();return Oc(a,e,t)},useTransition:function(){var e=Tc(!1);return e=Js.bind(null,W,e.queue,!0,!1),tt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=W,i=tt();if(le){if(a===void 0)throw Error(u(407));a=a()}else{if(a=t(),we===null)throw Error(u(349));(ne&127)!==0||js(n,t,a)}i.memoizedState=a;var o={value:a,getSnapshot:t};return i.queue=o,ks(qs.bind(null,n,o,e),[e]),n.flags|=2048,Bn(9,{destroy:void 0},Es.bind(null,n,o,a,t),null),a},useId:function(){var e=tt(),t=we.identifierPrefix;if(le){var a=Vt,n=Zt;a=(n&~(1<<32-pt(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Al++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Y_++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:zc,useFormState:Rs,useActionState:Rs,useOptimistic:function(e){var t=tt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Nc.bind(null,W,!0,a),a.dispatch=t,[e,t]},useMemoCache:jc,useCacheRefresh:function(){return tt().memoizedState=K_.bind(null,W)},useEffectEvent:function(e){var t=tt(),a={impl:e};return t.memoizedState=a,function(){if((me&2)!==0)throw Error(u(440));return a.impl.apply(void 0,arguments)}}},Rc={readContext:We,use:Ol,useCallback:Zs,useContext:We,useEffect:Ac,useImperativeHandle:Xs,useInsertionEffect:Ys,useLayoutEffect:Gs,useMemo:Vs,useReducer:Ml,useRef:Hs,useState:function(){return Ml(la)},useDebugValue:Cc,useDeferredValue:function(e,t){var a=ze();return Ks(a,ve.memoizedState,e,t)},useTransition:function(){var e=Ml(la)[0],t=ze().memoizedState;return[typeof e=="boolean"?e:jr(e),t]},useSyncExternalStore:ws,useId:$s,useHostTransitionStatus:zc,useFormState:xs,useActionState:xs,useOptimistic:function(e,t){var a=ze();return As(a,ve,e,t)},useMemoCache:jc,useCacheRefresh:Ps};Rc.useEffectEvent=Ls;var nf={readContext:We,use:Ol,useCallback:Zs,useContext:We,useEffect:Ac,useImperativeHandle:Xs,useInsertionEffect:Ys,useLayoutEffect:Gs,useMemo:Vs,useReducer:qc,useRef:Hs,useState:function(){return qc(la)},useDebugValue:Cc,useDeferredValue:function(e,t){var a=ze();return ve===null?Oc(a,e,t):Ks(a,ve.memoizedState,e,t)},useTransition:function(){var e=qc(la)[0],t=ze().memoizedState;return[typeof e=="boolean"?e:jr(e),t]},useSyncExternalStore:ws,useId:$s,useHostTransitionStatus:zc,useFormState:Bs,useActionState:Bs,useOptimistic:function(e,t){var a=ze();return ve!==null?As(a,ve,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jc,useCacheRefresh:Ps};nf.useEffectEvent=Ls;function xc(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:N({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Uc={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=wt(),i=Ea(n);i.payload=t,a!=null&&(i.callback=a),t=qa(e,i,n),t!==null&&(ot(t,e,n),vr(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=wt(),i=Ea(n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=qa(e,i,n),t!==null&&(ot(t,e,n),vr(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=wt(),n=Ea(a);n.tag=2,t!=null&&(n.callback=t),t=qa(e,n,a),t!==null&&(ot(t,e,a),vr(t,e,a))}};function rf(e,t,a,n,i,o,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,d):t.prototype&&t.prototype.isPureReactComponent?!fr(a,n)||!fr(i,o):!0}function lf(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Uc.enqueueReplaceState(t,t.state,null)}function nn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=N({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}function cf(e){dl(e)}function uf(e){console.error(e)}function of(e){dl(e)}function xl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function sf(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Bc(e,t,a){return a=Ea(a),a.tag=3,a.payload={element:null},a.callback=function(){xl(e,t)},a}function ff(e){return e=Ea(e),e.tag=3,e}function df(e,t,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var o=n.value;e.payload=function(){return i(o)},e.callback=function(){sf(t,a,n)}}var d=a.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){sf(t,a,n),typeof i!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})})}function W_(e,t,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Cn(t,a,i,!0),a=yt.current,a!==null){switch(a.tag){case 31:case 13:return Rt===null?Kl():a.alternate===null&&Oe===0&&(Oe=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===wl?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),uu(e,n,i)),!1;case 22:return a.flags|=65536,n===wl?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),uu(e,n,i)),!1}throw Error(u(435,a.tag))}return uu(e,n,i),Kl(),!1}if(le)return t=yt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==ac&&(e=Error(u(422),{cause:n}),_r(Ot(e,a)))):(n!==ac&&(t=Error(u(423),{cause:n}),_r(Ot(t,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=Ot(n,a),i=Bc(e.stateNode,n,i),mc(e,i),Oe!==4&&(Oe=2)),!1;var o=Error(u(520),{cause:n});if(o=Ot(o,a),Nr===null?Nr=[o]:Nr.push(o),Oe!==4&&(Oe=2),t===null)return!0;n=Ot(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=Bc(a.stateNode,n,e),mc(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Ma===null||!Ma.has(o))))return a.flags|=65536,i&=-i,a.lanes|=i,i=ff(i),df(i,e,a,n),mc(a,i),!1}a=a.return}while(a!==null);return!1}var Hc=Error(u(461)),Ue=!1;function Fe(e,t,a,n){t.child=e===null?ps(t,null,a,n):tn(t,e.child,a,n)}function mf(e,t,a,n,i){a=a.render;var o=t.ref;if("ref"in n){var d={};for(var m in n)m!=="ref"&&(d[m]=n[m])}else d=n;return $a(t),n=vc(e,t,a,d,o,i),m=bc(),e!==null&&!Ue?(Sc(e,t,i),ia(e,t,i)):(le&&m&&ec(t),t.flags|=1,Fe(e,t,n,i),t.child)}function _f(e,t,a,n,i){if(e===null){var o=a.type;return typeof o=="function"&&!$i(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,pf(e,t,o,n,i)):(e=hl(a.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Vc(e,i)){var d=o.memoizedProps;if(a=a.compare,a=a!==null?a:fr,a(d,n)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,e=ea(o,n),e.ref=t.ref,e.return=t,t.child=e}function pf(e,t,a,n,i){if(e!==null){var o=e.memoizedProps;if(fr(o,n)&&e.ref===t.ref)if(Ue=!1,t.pendingProps=n=o,Vc(e,i))(e.flags&131072)!==0&&(Ue=!0);else return t.lanes=e.lanes,ia(e,t,i)}return kc(e,t,a,n,i)}function hf(e,t,a,n){var i=n.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,e!==null){for(n=t.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;n=i&~o}else n=0,t.child=null;return gf(e,t,o,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&bl(t,o!==null?o.cachePool:null),o!==null?ys(t,o):pc(),vs(t);else return n=t.lanes=536870912,gf(e,t,o!==null?o.baseLanes|a:a,a,n)}else o!==null?(bl(t,o.cachePool),ys(t,o),Da(),t.memoizedState=null):(e!==null&&bl(t,null),pc(),Da());return Fe(e,t,i,a),t.child}function Tr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gf(e,t,a,n,i){var o=oc();return o=o===null?null:{parent:Re._currentValue,pool:o},t.memoizedState={baseLanes:a,cachePool:o},e!==null&&bl(t,null),pc(),vs(t),e!==null&&Cn(e,t,n,!0),t.childLanes=i,null}function Ul(e,t){return t=Hl({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function yf(e,t,a){return tn(t,e.child,null,a),e=Ul(t,t.pendingProps),e.flags|=2,vt(t),t.memoizedState=null,e}function F_(e,t,a){var n=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(le){if(n.mode==="hidden")return e=Ul(t,n),t.lanes=536870912,Tr(null,e);if(gc(t),(e=Ee)?(e=Od(e,Nt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Zt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},a=es(e),a.return=t,t.child=a,Je=t,Ee=null)):e=null,e===null)throw Sa(t);return t.lanes=536870912,null}return Ul(t,n)}var o=e.memoizedState;if(o!==null){var d=o.dehydrated;if(gc(t),i)if(t.flags&256)t.flags&=-257,t=yf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(Ue||Cn(e,t,a,!1),i=(a&e.childLanes)!==0,Ue||i){if(n=we,n!==null&&(d=io(n,a),d!==0&&d!==o.retryLane))throw o.retryLane=d,Ka(e,d),ot(n,e,d),Hc;Kl(),t=yf(e,t,a)}else e=o.treeContext,Ee=xt(d.nextSibling),Je=t,le=!0,ba=null,Nt=!1,e!==null&&ns(t,e),t=Ul(t,n),t.flags|=4096;return t}return e=ea(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Bl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(u(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function kc(e,t,a,n,i){return $a(t),a=vc(e,t,a,n,void 0,i),n=bc(),e!==null&&!Ue?(Sc(e,t,i),ia(e,t,i)):(le&&n&&ec(t),t.flags|=1,Fe(e,t,a,i),t.child)}function vf(e,t,a,n,i,o){return $a(t),t.updateQueue=null,a=Ss(t,n,a,i),bs(e),n=bc(),e!==null&&!Ue?(Sc(e,t,o),ia(e,t,o)):(le&&n&&ec(t),t.flags|=1,Fe(e,t,a,o),t.child)}function bf(e,t,a,n,i){if($a(t),t.stateNode===null){var o=qn,d=a.contextType;typeof d=="object"&&d!==null&&(o=We(d)),o=new a(n,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Uc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=n,o.state=t.memoizedState,o.refs={},fc(t),d=a.contextType,o.context=typeof d=="object"&&d!==null?We(d):qn,o.state=t.memoizedState,d=a.getDerivedStateFromProps,typeof d=="function"&&(xc(t,a,d,n),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(d=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),d!==o.state&&Uc.enqueueReplaceState(o,o.state,null),Sr(t,n,o,i),br(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){o=t.stateNode;var m=t.memoizedProps,y=nn(a,m);o.props=y;var E=o.context,D=a.contextType;d=qn,typeof D=="object"&&D!==null&&(d=We(D));var O=a.getDerivedStateFromProps;D=typeof O=="function"||typeof o.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,D||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(m||E!==d)&&lf(t,o,n,d),ja=!1;var q=t.memoizedState;o.state=q,Sr(t,n,o,i),br(),E=t.memoizedState,m||q!==E||ja?(typeof O=="function"&&(xc(t,a,O,n),E=t.memoizedState),(y=ja||rf(t,a,y,n,q,E,d))?(D||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=E),o.props=n,o.state=E,o.context=d,n=y):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,dc(e,t),d=t.memoizedProps,D=nn(a,d),o.props=D,O=t.pendingProps,q=o.context,E=a.contextType,y=qn,typeof E=="object"&&E!==null&&(y=We(E)),m=a.getDerivedStateFromProps,(E=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(d!==O||q!==y)&&lf(t,o,n,y),ja=!1,q=t.memoizedState,o.state=q,Sr(t,n,o,i),br();var T=t.memoizedState;d!==O||q!==T||ja||e!==null&&e.dependencies!==null&&yl(e.dependencies)?(typeof m=="function"&&(xc(t,a,m,n),T=t.memoizedState),(D=ja||rf(t,a,D,n,q,T,y)||e!==null&&e.dependencies!==null&&yl(e.dependencies))?(E||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,T,y),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,T,y)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=T),o.props=n,o.state=T,o.context=y,n=D):(typeof o.componentDidUpdate!="function"||d===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),n=!1)}return o=n,Bl(e,t),n=(t.flags&128)!==0,o||n?(o=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&n?(t.child=tn(t,e.child,null,i),t.child=tn(t,null,a,i)):Fe(e,t,a,i),t.memoizedState=o.state,e=t.child):e=ia(e,t,i),e}function Sf(e,t,a,n){return Wa(),t.flags|=256,Fe(e,t,a,n),t.child}var Lc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yc(e){return{baseLanes:e,cachePool:os()}}function Gc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=St),e}function wf(e,t,a){var n=t.pendingProps,i=!1,o=(t.flags&128)!==0,d;if((d=o)||(d=e!==null&&e.memoizedState===null?!1:(Me.current&2)!==0),d&&(i=!0,t.flags&=-129),d=(t.flags&32)!==0,t.flags&=-33,e===null){if(le){if(i?Ta(t):Da(),(e=Ee)?(e=Od(e,Nt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Zt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},a=es(e),a.return=t,t.child=a,Je=t,Ee=null)):e=null,e===null)throw Sa(t);return Eu(e)?t.lanes=32:t.lanes=536870912,null}var m=n.children;return n=n.fallback,i?(Da(),i=t.mode,m=Hl({mode:"hidden",children:m},i),n=Ja(n,i,a,null),m.return=t,n.return=t,m.sibling=n,t.child=m,n=t.child,n.memoizedState=Yc(a),n.childLanes=Gc(e,d,a),t.memoizedState=Lc,Tr(null,n)):(Ta(t),Qc(t,m))}var y=e.memoizedState;if(y!==null&&(m=y.dehydrated,m!==null)){if(o)t.flags&256?(Ta(t),t.flags&=-257,t=Xc(e,t,a)):t.memoizedState!==null?(Da(),t.child=e.child,t.flags|=128,t=null):(Da(),m=n.fallback,i=t.mode,n=Hl({mode:"visible",children:n.children},i),m=Ja(m,i,a,null),m.flags|=2,n.return=t,m.return=t,n.sibling=m,t.child=n,tn(t,e.child,null,a),n=t.child,n.memoizedState=Yc(a),n.childLanes=Gc(e,d,a),t.memoizedState=Lc,t=Tr(null,n));else if(Ta(t),Eu(m)){if(d=m.nextSibling&&m.nextSibling.dataset,d)var E=d.dgst;d=E,n=Error(u(419)),n.stack="",n.digest=d,_r({value:n,source:null,stack:null}),t=Xc(e,t,a)}else if(Ue||Cn(e,t,a,!1),d=(a&e.childLanes)!==0,Ue||d){if(d=we,d!==null&&(n=io(d,a),n!==0&&n!==y.retryLane))throw y.retryLane=n,Ka(e,n),ot(d,e,n),Hc;ju(m)||Kl(),t=Xc(e,t,a)}else ju(m)?(t.flags|=192,t.child=e.child,t=null):(e=y.treeContext,Ee=xt(m.nextSibling),Je=t,le=!0,ba=null,Nt=!1,e!==null&&ns(t,e),t=Qc(t,n.children),t.flags|=4096);return t}return i?(Da(),m=n.fallback,i=t.mode,y=e.child,E=y.sibling,n=ea(y,{mode:"hidden",children:n.children}),n.subtreeFlags=y.subtreeFlags&65011712,E!==null?m=ea(E,m):(m=Ja(m,i,a,null),m.flags|=2),m.return=t,n.return=t,n.sibling=m,t.child=n,Tr(null,n),n=t.child,m=e.child.memoizedState,m===null?m=Yc(a):(i=m.cachePool,i!==null?(y=Re._currentValue,i=i.parent!==y?{parent:y,pool:y}:i):i=os(),m={baseLanes:m.baseLanes|a,cachePool:i}),n.memoizedState=m,n.childLanes=Gc(e,d,a),t.memoizedState=Lc,Tr(e.child,n)):(Ta(t),a=e.child,e=a.sibling,a=ea(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(d=t.deletions,d===null?(t.deletions=[e],t.flags|=16):d.push(e)),t.child=a,t.memoizedState=null,a)}function Qc(e,t){return t=Hl({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Hl(e,t){return e=gt(22,e,null,t),e.lanes=0,e}function Xc(e,t,a){return tn(t,e.child,null,a),e=Qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jf(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),lc(e.return,t,a)}function Zc(e,t,a,n,i,o){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i,treeForkCount:o}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=n,d.tail=a,d.tailMode=i,d.treeForkCount=o)}function Ef(e,t,a){var n=t.pendingProps,i=n.revealOrder,o=n.tail;n=n.children;var d=Me.current,m=(d&2)!==0;if(m?(d=d&1|2,t.flags|=128):d&=1,M(Me,d),Fe(e,t,n,a),n=le?mr:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jf(e,a,t);else if(e.tag===19)jf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(a=t.child,i=null;a!==null;)e=a.alternate,e!==null&&Tl(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),Zc(t,!1,i,a,o,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Tl(e)===null){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}Zc(t,!0,a,null,o,n);break;case"together":Zc(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function ia(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Oa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Cn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,a=ea(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ea(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Vc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&yl(e)))}function $_(e,t,a){switch(t.tag){case 3:Te(t,t.stateNode.containerInfo),wa(t,Re,e.memoizedState.cache),Wa();break;case 27:case 5:Ve(t);break;case 4:Te(t,t.stateNode.containerInfo);break;case 10:wa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,gc(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ta(t),t.flags|=128,null):(a&t.child.childLanes)!==0?wf(e,t,a):(Ta(t),e=ia(e,t,a),e!==null?e.sibling:null);Ta(t);break;case 19:var i=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Cn(e,t,a,!1),n=(a&t.childLanes)!==0),i){if(n)return Ef(e,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),M(Me,Me.current),n)break;return null;case 22:return t.lanes=0,hf(e,t,a,t.pendingProps);case 24:wa(t,Re,e.memoizedState.cache)}return ia(e,t,a)}function qf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ue=!0;else{if(!Vc(e,a)&&(t.flags&128)===0)return Ue=!1,$_(e,t,a);Ue=(e.flags&131072)!==0}else Ue=!1,le&&(t.flags&1048576)!==0&&as(t,mr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=Ia(t.elementType),t.type=e,typeof e=="function")$i(e)?(n=nn(e,n),t.tag=1,t=bf(null,t,e,n,a)):(t.tag=0,t=kc(null,t,e,n,a));else{if(e!=null){var i=e.$$typeof;if(i===J){t.tag=11,t=mf(null,t,e,n,a);break e}else if(i===Pe){t.tag=14,t=_f(null,t,e,n,a);break e}}throw t=Xt(e)||e,Error(u(306,t,""))}}return t;case 0:return kc(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,i=nn(n,t.pendingProps),bf(e,t,n,i,a);case 3:e:{if(Te(t,t.stateNode.containerInfo),e===null)throw Error(u(387));n=t.pendingProps;var o=t.memoizedState;i=o.element,dc(e,t),Sr(t,n,null,a);var d=t.memoizedState;if(n=d.cache,wa(t,Re,n),n!==o.cache&&ic(t,[Re],a,!0),br(),n=d.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:d.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Sf(e,t,n,a);break e}else if(n!==i){i=Ot(Error(u(424)),t),_r(i),t=Sf(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ee=xt(e.firstChild),Je=t,le=!0,ba=null,Nt=!0,a=ps(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Wa(),n===i){t=ia(e,t,a);break e}Fe(e,t,n,a)}t=t.child}return t;case 26:return Bl(e,t),e===null?(a=Ud(t.type,null,t.pendingProps,null))?t.memoizedState=a:le||(a=t.type,e=t.pendingProps,n=ei(Q.current).createElement(a),n[Ke]=t,n[nt]=e,$e(n,a,e),Qe(n),t.stateNode=n):t.memoizedState=Ud(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ve(t),e===null&&le&&(n=t.stateNode=Nd(t.type,t.pendingProps,Q.current),Je=t,Nt=!0,i=Ee,xa(t.type)?(qu=i,Ee=xt(n.firstChild)):Ee=i),Fe(e,t,t.pendingProps.children,a),Bl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&le&&((i=n=Ee)&&(n=Dp(n,t.type,t.pendingProps,Nt),n!==null?(t.stateNode=n,Je=t,Ee=xt(n.firstChild),Nt=!1,i=!0):i=!1),i||Sa(t)),Ve(t),i=t.type,o=t.pendingProps,d=e!==null?e.memoizedProps:null,n=o.children,bu(i,o)?n=null:d!==null&&bu(i,d)&&(t.flags|=32),t.memoizedState!==null&&(i=vc(e,t,G_,null,null,a),Yr._currentValue=i),Bl(e,t),Fe(e,t,n,a),t.child;case 6:return e===null&&le&&((e=a=Ee)&&(a=Ap(a,t.pendingProps,Nt),a!==null?(t.stateNode=a,Je=t,Ee=null,e=!0):e=!1),e||Sa(t)),null;case 13:return wf(e,t,a);case 4:return Te(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=tn(t,null,n,a):Fe(e,t,n,a),t.child;case 11:return mf(e,t,t.type,t.pendingProps,a);case 7:return Fe(e,t,t.pendingProps,a),t.child;case 8:return Fe(e,t,t.pendingProps.children,a),t.child;case 12:return Fe(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,wa(t,t.type,n.value),Fe(e,t,n.children,a),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,$a(t),i=We(i),n=n(i),t.flags|=1,Fe(e,t,n,a),t.child;case 14:return _f(e,t,t.type,t.pendingProps,a);case 15:return pf(e,t,t.type,t.pendingProps,a);case 19:return Ef(e,t,a);case 31:return F_(e,t,a);case 22:return hf(e,t,a,t.pendingProps);case 24:return $a(t),n=We(Re),e===null?(i=oc(),i===null&&(i=we,o=cc(),i.pooledCache=o,o.refCount++,o!==null&&(i.pooledCacheLanes|=a),i=o),t.memoizedState={parent:n,cache:i},fc(t),wa(t,Re,i)):((e.lanes&a)!==0&&(dc(e,t),Sr(t,null,null,a),br()),i=e.memoizedState,o=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),wa(t,Re,n)):(n=o.cache,wa(t,Re,n),n!==i.cache&&ic(t,[Re],a,!0))),Fe(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function ca(e){e.flags|=4}function Kc(e,t,a,n,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Pf())e.flags|=8192;else throw en=wl,sc}else e.flags&=-16777217}function Tf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yd(t))if(Pf())e.flags|=8192;else throw en=wl,sc}function kl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?no():536870912,e.lanes|=t,Yn|=t)}function Dr(e,t){if(!le)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function P_(e,t,a){var n=t.pendingProps;switch(tc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),na(Re),Ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(An(t)?ca(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,nc())),qe(t),null;case 26:var i=t.type,o=t.memoizedState;return e===null?(ca(t),o!==null?(qe(t),Tf(t,o)):(qe(t),Kc(t,i,null,n,a))):o?o!==e.memoizedState?(ca(t),qe(t),Tf(t,o)):(qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&ca(t),qe(t),Kc(t,i,e,n,a)),null;case 27:if(et(t),a=Q.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return qe(t),null}e=P.current,An(t)?rs(t):(e=Nd(i,n,a),t.stateNode=e,ca(t))}return qe(t),null;case 5:if(et(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return qe(t),null}if(o=P.current,An(t))rs(t);else{var d=ei(Q.current);switch(o){case 1:o=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:o=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":o=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":o=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":o=d.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof n.is=="string"?d.createElement("select",{is:n.is}):d.createElement("select"),n.multiple?o.multiple=!0:n.size&&(o.size=n.size);break;default:o=typeof n.is=="string"?d.createElement(i,{is:n.is}):d.createElement(i)}}o[Ke]=t,o[nt]=n;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)o.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=o;e:switch($e(o,i,n),i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ca(t)}}return qe(t),Kc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(u(166));if(e=Q.current,An(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,i=Je,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}e[Ke]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||wd(e.nodeValue,a)),e||Sa(t,!0)}else e=ei(e).createTextNode(n),e[Ke]=t,t.stateNode=e}return qe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=An(t),a!==null){if(e===null){if(!n)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[Ke]=t}else Wa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),e=!1}else a=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(vt(t),t):(vt(t),null);if((t.flags&128)!==0)throw Error(u(558))}return qe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=An(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(u(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(u(317));i[Ke]=t}else Wa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),i=!1}else i=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(vt(t),t):(vt(t),null)}return vt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),kl(t,t.updateQueue),qe(t),null);case 4:return Ae(),e===null&&pu(t.stateNode.containerInfo),qe(t),null;case 10:return na(t.type),qe(t),null;case 19:if(ye(Me),n=t.memoizedState,n===null)return qe(t),null;if(i=(t.flags&128)!==0,o=n.rendering,o===null)if(i)Dr(n,!1);else{if(Oe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Tl(e),o!==null){for(t.flags|=128,Dr(n,!1),e=o.updateQueue,t.updateQueue=e,kl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Io(a,e),a=a.sibling;return M(Me,Me.current&1|2),le&&ta(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&mt()>Xl&&(t.flags|=128,i=!0,Dr(n,!1),t.lanes=4194304)}else{if(!i)if(e=Tl(o),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,kl(t,e),Dr(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!le)return qe(t),null}else 2*mt()-n.renderingStartTime>Xl&&a!==536870912&&(t.flags|=128,i=!0,Dr(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(e=n.last,e!==null?e.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=mt(),e.sibling=null,a=Me.current,M(Me,i?a&1|2:a&1),le&&ta(t,n.treeForkCount),e):(qe(t),null);case 22:case 23:return vt(t),hc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),a=t.updateQueue,a!==null&&kl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&ye(Pa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),na(Re),qe(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function I_(e,t){switch(tc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return na(Re),Ae(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return et(t),null;case 31:if(t.memoizedState!==null){if(vt(t),t.alternate===null)throw Error(u(340));Wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(vt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(Me),null;case 4:return Ae(),null;case 10:return na(t.type),null;case 22:case 23:return vt(t),hc(),e!==null&&ye(Pa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return na(Re),null;case 25:return null;default:return null}}function Df(e,t){switch(tc(t),t.tag){case 3:na(Re),Ae();break;case 26:case 27:case 5:et(t);break;case 4:Ae();break;case 31:t.memoizedState!==null&&vt(t);break;case 13:vt(t);break;case 19:ye(Me);break;case 10:na(t.type);break;case 22:case 23:vt(t),hc(),e!==null&&ye(Pa);break;case 24:na(Re)}}function Ar(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&e)===e){n=void 0;var o=a.create,d=a.inst;n=o(),d.destroy=n}a=a.next}while(a!==i)}}catch(m){ge(t,t.return,m)}}function Aa(e,t,a){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){var d=n.inst,m=d.destroy;if(m!==void 0){d.destroy=void 0,i=t;var y=a,E=m;try{E()}catch(D){ge(i,y,D)}}}n=n.next}while(n!==o)}}catch(D){ge(t,t.return,D)}}function Af(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{gs(t,a)}catch(n){ge(e,e.return,n)}}}function Cf(e,t,a){a.props=nn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){ge(e,t,n)}}function Cr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(i){ge(e,t,i)}}function Kt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){ge(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){ge(e,t,i)}else a.current=null}function Of(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(i){ge(e,e.return,i)}}function Jc(e,t,a){try{var n=e.stateNode;Sp(n,e.type,a,t),n[nt]=t}catch(i){ge(e,e.return,i)}}function Mf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xa(e.type)||e.tag===4}function Wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fc(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Pt));else if(n!==4&&(n===27&&xa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Fc(e,t,a),e=e.sibling;e!==null;)Fc(e,t,a),e=e.sibling}function Ll(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&xa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Ll(e,t,a),e=e.sibling;e!==null;)Ll(e,t,a),e=e.sibling}function zf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);$e(t,n,a),t[Ke]=e,t[nt]=a}catch(o){ge(e,e.return,o)}}var ua=!1,Be=!1,$c=!1,Nf=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function ep(e,t){if(e=e.containerInfo,yu=ci,e=Xo(e),Xi(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var d=0,m=-1,y=-1,E=0,D=0,O=e,q=null;t:for(;;){for(var T;O!==a||i!==0&&O.nodeType!==3||(m=d+i),O!==o||n!==0&&O.nodeType!==3||(y=d+n),O.nodeType===3&&(d+=O.nodeValue.length),(T=O.firstChild)!==null;)q=O,O=T;for(;;){if(O===e)break t;if(q===a&&++E===i&&(m=d),q===o&&++D===n&&(y=d),(T=O.nextSibling)!==null)break;O=q,q=O.parentNode}O=T}a=m===-1||y===-1?null:{start:m,end:y}}else a=null}a=a||{start:0,end:0}}else a=null;for(vu={focusedElem:e,selectionRange:a},ci=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){switch(t=Xe,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)i=e[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,a=t,i=o.memoizedProps,o=o.memoizedState,n=a.stateNode;try{var L=nn(a.type,i);e=n.getSnapshotBeforeUpdate(L,o),n.__reactInternalSnapshotBeforeUpdate=e}catch(K){ge(a,a.return,K)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)wu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":wu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}}function Rf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:sa(e,a),n&4&&Ar(5,a);break;case 1:if(sa(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(d){ge(a,a.return,d)}else{var i=nn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(d){ge(a,a.return,d)}}n&64&&Af(a),n&512&&Cr(a,a.return);break;case 3:if(sa(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{gs(e,t)}catch(d){ge(a,a.return,d)}}break;case 27:t===null&&n&4&&zf(a);case 26:case 5:sa(e,a),t===null&&n&4&&Of(a),n&512&&Cr(a,a.return);break;case 12:sa(e,a);break;case 31:sa(e,a),n&4&&Bf(e,a);break;case 13:sa(e,a),n&4&&Hf(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=op.bind(null,a),Cp(e,a))));break;case 22:if(n=a.memoizedState!==null||ua,!n){t=t!==null&&t.memoizedState!==null||Be,i=ua;var o=Be;ua=n,(Be=t)&&!o?fa(e,a,(a.subtreeFlags&8772)!==0):sa(e,a),ua=i,Be=o}break;case 30:break;default:sa(e,a)}}function xf(e){var t=e.alternate;t!==null&&(e.alternate=null,xf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Di(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var De=null,lt=!1;function oa(e,t,a){for(a=a.child;a!==null;)Uf(e,t,a),a=a.sibling}function Uf(e,t,a){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(In,a)}catch{}switch(a.tag){case 26:Be||Kt(a,t),oa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Be||Kt(a,t);var n=De,i=lt;xa(a.type)&&(De=a.stateNode,lt=!1),oa(e,t,a),Hr(a.stateNode),De=n,lt=i;break;case 5:Be||Kt(a,t);case 6:if(n=De,i=lt,De=null,oa(e,t,a),De=n,lt=i,De!==null)if(lt)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(a.stateNode)}catch(o){ge(a,t,o)}else try{De.removeChild(a.stateNode)}catch(o){ge(a,t,o)}break;case 18:De!==null&&(lt?(e=De,Ad(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Wn(e)):Ad(De,a.stateNode));break;case 4:n=De,i=lt,De=a.stateNode.containerInfo,lt=!0,oa(e,t,a),De=n,lt=i;break;case 0:case 11:case 14:case 15:Aa(2,a,t),Be||Aa(4,a,t),oa(e,t,a);break;case 1:Be||(Kt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Cf(a,t,n)),oa(e,t,a);break;case 21:oa(e,t,a);break;case 22:Be=(n=Be)||a.memoizedState!==null,oa(e,t,a),Be=n;break;default:oa(e,t,a)}}function Bf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Wn(e)}catch(a){ge(t,t.return,a)}}}function Hf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wn(e)}catch(a){ge(t,t.return,a)}}function tp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Nf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Nf),t;default:throw Error(u(435,e.tag))}}function Yl(e,t){var a=tp(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var i=sp.bind(null,e,n);n.then(i,i)}})}function it(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],o=e,d=t,m=d;e:for(;m!==null;){switch(m.tag){case 27:if(xa(m.type)){De=m.stateNode,lt=!1;break e}break;case 5:De=m.stateNode,lt=!1;break e;case 3:case 4:De=m.stateNode.containerInfo,lt=!0;break e}m=m.return}if(De===null)throw Error(u(160));Uf(o,d,i),De=null,lt=!1,o=i.alternate,o!==null&&(o.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)kf(t,e),t=t.sibling}var Yt=null;function kf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:it(t,e),ct(e),n&4&&(Aa(3,e,e.return),Ar(3,e),Aa(5,e,e.return));break;case 1:it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),n&64&&ua&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var i=Yt;if(it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),n&4){var o=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":o=i.getElementsByTagName("title")[0],(!o||o[ar]||o[Ke]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=i.createElement(n),i.head.insertBefore(o,i.querySelector("head > title"))),$e(o,n,a),o[Ke]=e,Qe(o),n=o;break e;case"link":var d=kd("link","href",i).get(n+(a.href||""));if(d){for(var m=0;m<d.length;m++)if(o=d[m],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){d.splice(m,1);break t}}o=i.createElement(n),$e(o,n,a),i.head.appendChild(o);break;case"meta":if(d=kd("meta","content",i).get(n+(a.content||""))){for(m=0;m<d.length;m++)if(o=d[m],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){d.splice(m,1);break t}}o=i.createElement(n),$e(o,n,a),i.head.appendChild(o);break;default:throw Error(u(468,n))}o[Ke]=e,Qe(o),n=o}e.stateNode=n}else Ld(i,e.type,e.stateNode);else e.stateNode=Hd(i,n,e.memoizedProps);else o!==n?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,n===null?Ld(i,e.type,e.stateNode):Hd(i,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Jc(e,e.memoizedProps,a.memoizedProps)}break;case 27:it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),a!==null&&n&4&&Jc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),e.flags&32){i=e.stateNode;try{yn(i,"")}catch(L){ge(e,e.return,L)}}n&4&&e.stateNode!=null&&(i=e.memoizedProps,Jc(e,i,a!==null?a.memoizedProps:i)),n&1024&&($c=!0);break;case 6:if(it(t,e),ct(e),n&4){if(e.stateNode===null)throw Error(u(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(L){ge(e,e.return,L)}}break;case 3:if(ni=null,i=Yt,Yt=ti(t.containerInfo),it(t,e),Yt=i,ct(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Wn(t.containerInfo)}catch(L){ge(e,e.return,L)}$c&&($c=!1,Lf(e));break;case 4:n=Yt,Yt=ti(e.stateNode.containerInfo),it(t,e),ct(e),Yt=n;break;case 12:it(t,e),ct(e);break;case 31:it(t,e),ct(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Yl(e,n)));break;case 13:it(t,e),ct(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ql=mt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Yl(e,n)));break;case 22:i=e.memoizedState!==null;var y=a!==null&&a.memoizedState!==null,E=ua,D=Be;if(ua=E||i,Be=D||y,it(t,e),Be=D,ua=E,ct(e),n&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(a===null||y||ua||Be||rn(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){y=a=t;try{if(o=y.stateNode,i)d=o.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{m=y.stateNode;var O=y.memoizedProps.style,q=O!=null&&O.hasOwnProperty("display")?O.display:null;m.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(L){ge(y,y.return,L)}}}else if(t.tag===6){if(a===null){y=t;try{y.stateNode.nodeValue=i?"":y.memoizedProps}catch(L){ge(y,y.return,L)}}}else if(t.tag===18){if(a===null){y=t;try{var T=y.stateNode;i?Cd(T,!0):Cd(y.stateNode,!1)}catch(L){ge(y,y.return,L)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Yl(e,a))));break;case 19:it(t,e),ct(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Yl(e,n)));break;case 30:break;case 21:break;default:it(t,e),ct(e)}}function ct(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Mf(n)){a=n;break}n=n.return}if(a==null)throw Error(u(160));switch(a.tag){case 27:var i=a.stateNode,o=Wc(e);Ll(e,o,i);break;case 5:var d=a.stateNode;a.flags&32&&(yn(d,""),a.flags&=-33);var m=Wc(e);Ll(e,m,d);break;case 3:case 4:var y=a.stateNode.containerInfo,E=Wc(e);Fc(e,E,y);break;default:throw Error(u(161))}}catch(D){ge(e,e.return,D)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Lf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function sa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Rf(e,t.alternate,t),t=t.sibling}function rn(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Aa(4,t,t.return),rn(t);break;case 1:Kt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Cf(t,t.return,a),rn(t);break;case 27:Hr(t.stateNode);case 26:case 5:Kt(t,t.return),rn(t);break;case 22:t.memoizedState===null&&rn(t);break;case 30:rn(t);break;default:rn(t)}e=e.sibling}}function fa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,i=e,o=t,d=o.flags;switch(o.tag){case 0:case 11:case 15:fa(i,o,a),Ar(4,o);break;case 1:if(fa(i,o,a),n=o,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(E){ge(n,n.return,E)}if(n=o,i=n.updateQueue,i!==null){var m=n.stateNode;try{var y=i.shared.hiddenCallbacks;if(y!==null)for(i.shared.hiddenCallbacks=null,i=0;i<y.length;i++)hs(y[i],m)}catch(E){ge(n,n.return,E)}}a&&d&64&&Af(o),Cr(o,o.return);break;case 27:zf(o);case 26:case 5:fa(i,o,a),a&&n===null&&d&4&&Of(o),Cr(o,o.return);break;case 12:fa(i,o,a);break;case 31:fa(i,o,a),a&&d&4&&Bf(i,o);break;case 13:fa(i,o,a),a&&d&4&&Hf(i,o);break;case 22:o.memoizedState===null&&fa(i,o,a),Cr(o,o.return);break;case 30:break;default:fa(i,o,a)}t=t.sibling}}function Pc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&pr(a))}function Ic(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&pr(e))}function Gt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yf(e,t,a,n),t=t.sibling}function Yf(e,t,a,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Gt(e,t,a,n),i&2048&&Ar(9,t);break;case 1:Gt(e,t,a,n);break;case 3:Gt(e,t,a,n),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&pr(e)));break;case 12:if(i&2048){Gt(e,t,a,n),e=t.stateNode;try{var o=t.memoizedProps,d=o.id,m=o.onPostCommit;typeof m=="function"&&m(d,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(y){ge(t,t.return,y)}}else Gt(e,t,a,n);break;case 31:Gt(e,t,a,n);break;case 13:Gt(e,t,a,n);break;case 23:break;case 22:o=t.stateNode,d=t.alternate,t.memoizedState!==null?o._visibility&2?Gt(e,t,a,n):Or(e,t):o._visibility&2?Gt(e,t,a,n):(o._visibility|=2,Hn(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Pc(d,t);break;case 24:Gt(e,t,a,n),i&2048&&Ic(t.alternate,t);break;default:Gt(e,t,a,n)}}function Hn(e,t,a,n,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,d=t,m=a,y=n,E=d.flags;switch(d.tag){case 0:case 11:case 15:Hn(o,d,m,y,i),Ar(8,d);break;case 23:break;case 22:var D=d.stateNode;d.memoizedState!==null?D._visibility&2?Hn(o,d,m,y,i):Or(o,d):(D._visibility|=2,Hn(o,d,m,y,i)),i&&E&2048&&Pc(d.alternate,d);break;case 24:Hn(o,d,m,y,i),i&&E&2048&&Ic(d.alternate,d);break;default:Hn(o,d,m,y,i)}t=t.sibling}}function Or(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,i=n.flags;switch(n.tag){case 22:Or(a,n),i&2048&&Pc(n.alternate,n);break;case 24:Or(a,n),i&2048&&Ic(n.alternate,n);break;default:Or(a,n)}t=t.sibling}}var Mr=8192;function kn(e,t,a){if(e.subtreeFlags&Mr)for(e=e.child;e!==null;)Gf(e,t,a),e=e.sibling}function Gf(e,t,a){switch(e.tag){case 26:kn(e,t,a),e.flags&Mr&&e.memoizedState!==null&&Yp(a,Yt,e.memoizedState,e.memoizedProps);break;case 5:kn(e,t,a);break;case 3:case 4:var n=Yt;Yt=ti(e.stateNode.containerInfo),kn(e,t,a),Yt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Mr,Mr=16777216,kn(e,t,a),Mr=n):kn(e,t,a));break;default:kn(e,t,a)}}function Qf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function zr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Xe=n,Zf(n,e)}Qf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xf(e),e=e.sibling}function Xf(e){switch(e.tag){case 0:case 11:case 15:zr(e),e.flags&2048&&Aa(9,e,e.return);break;case 3:zr(e);break;case 12:zr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Gl(e)):zr(e);break;default:zr(e)}}function Gl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Xe=n,Zf(n,e)}Qf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Aa(8,t,t.return),Gl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Gl(t));break;default:Gl(t)}e=e.sibling}}function Zf(e,t){for(;Xe!==null;){var a=Xe;switch(a.tag){case 0:case 11:case 15:Aa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:pr(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Xe=n;else e:for(a=e;Xe!==null;){n=Xe;var i=n.sibling,o=n.return;if(xf(n),n===a){Xe=null;break e}if(i!==null){i.return=o,Xe=i;break e}Xe=o}}}var ap={getCacheForType:function(e){var t=We(Re),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return We(Re).controller.signal}},np=typeof WeakMap=="function"?WeakMap:Map,me=0,we=null,te=null,ne=0,he=0,bt=null,Ca=!1,Ln=!1,eu=!1,da=0,Oe=0,Oa=0,ln=0,tu=0,St=0,Yn=0,Nr=null,ut=null,au=!1,Ql=0,Vf=0,Xl=1/0,Zl=null,Ma=null,Le=0,za=null,Gn=null,ma=0,nu=0,ru=null,Kf=null,Rr=0,lu=null;function wt(){return(me&2)!==0&&ne!==0?ne&-ne:A.T!==null?fu():co()}function Jf(){if(St===0)if((ne&536870912)===0||le){var e=Ir;Ir<<=1,(Ir&3932160)===0&&(Ir=262144),St=e}else St=536870912;return e=yt.current,e!==null&&(e.flags|=32),St}function ot(e,t,a){(e===we&&(he===2||he===9)||e.cancelPendingCommit!==null)&&(Qn(e,0),Na(e,ne,St,!1)),tr(e,a),((me&2)===0||e!==we)&&(e===we&&((me&2)===0&&(ln|=a),Oe===4&&Na(e,ne,St,!1)),Jt(e))}function Wf(e,t,a){if((me&6)!==0)throw Error(u(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||er(e,t),i=n?ip(e,t):cu(e,t,!0),o=n;do{if(i===0){Ln&&!n&&Na(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!rp(a)){i=cu(e,t,!1),o=!1;continue}if(i===2){if(o=t,e.errorRecoveryDisabledLanes&o)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){t=d;e:{var m=e;i=Nr;var y=m.current.memoizedState.isDehydrated;if(y&&(Qn(m,d).flags|=256),d=cu(m,d,!1),d!==2){if(eu&&!y){m.errorRecoveryDisabledLanes|=o,ln|=o,i=4;break e}o=ut,ut=i,o!==null&&(ut===null?ut=o:ut.push.apply(ut,o))}i=d}if(o=!1,i!==2)continue}}if(i===1){Qn(e,0),Na(e,t,0,!0);break}e:{switch(n=e,o=i,o){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:Na(n,t,St,!Ca);break e;case 2:ut=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(i=Ql+300-mt(),10<i)){if(Na(n,t,St,!Ca),tl(n,0,!0)!==0)break e;ma=t,n.timeoutHandle=Td(Ff.bind(null,n,a,ut,Zl,au,t,St,ln,Yn,Ca,o,"Throttled",-0,0),i);break e}Ff(n,a,ut,Zl,au,t,St,ln,Yn,Ca,o,null,-0,0)}}break}while(!0);Jt(e)}function Ff(e,t,a,n,i,o,d,m,y,E,D,O,q,T){if(e.timeoutHandle=-1,O=t.subtreeFlags,O&8192||(O&16785408)===16785408){O={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt},Gf(t,o,O);var L=(o&62914560)===o?Ql-mt():(o&4194048)===o?Vf-mt():0;if(L=Gp(O,L),L!==null){ma=o,e.cancelPendingCommit=L(rd.bind(null,e,t,o,a,n,i,d,m,y,D,O,null,q,T)),Na(e,o,d,!E);return}}rd(e,t,o,a,n,i,d,m,y)}function rp(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],o=i.getSnapshot;i=i.value;try{if(!ht(o(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Na(e,t,a,n){t&=~tu,t&=~ln,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var o=31-pt(i),d=1<<o;n[o]=-1,i&=~d}a!==0&&ro(e,a,t)}function Vl(){return(me&6)===0?(xr(0),!1):!0}function iu(){if(te!==null){if(he===0)var e=te.return;else e=te,aa=Fa=null,wc(e),Nn=null,gr=0,e=te;for(;e!==null;)Df(e.alternate,e),e=e.return;te=null}}function Qn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Ep(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ma=0,iu(),we=e,te=a=ea(e.current,null),ne=t,he=0,bt=null,Ca=!1,Ln=er(e,t),eu=!1,Yn=St=tu=ln=Oa=Oe=0,ut=Nr=null,au=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var i=31-pt(n),o=1<<i;t|=e[i],n&=~o}return da=t,ml(),a}function $f(e,t){W=null,A.H=qr,t===zn||t===Sl?(t=ds(),he=3):t===sc?(t=ds(),he=4):he=t===Hc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,bt=t,te===null&&(Oe=1,xl(e,Ot(t,e.current)))}function Pf(){var e=yt.current;return e===null?!0:(ne&4194048)===ne?Rt===null:(ne&62914560)===ne||(ne&536870912)!==0?e===Rt:!1}function If(){var e=A.H;return A.H=qr,e===null?qr:e}function ed(){var e=A.A;return A.A=ap,e}function Kl(){Oe=4,Ca||(ne&4194048)!==ne&&yt.current!==null||(Ln=!0),(Oa&134217727)===0&&(ln&134217727)===0||we===null||Na(we,ne,St,!1)}function cu(e,t,a){var n=me;me|=2;var i=If(),o=ed();(we!==e||ne!==t)&&(Zl=null,Qn(e,t)),t=!1;var d=Oe;e:do try{if(he!==0&&te!==null){var m=te,y=bt;switch(he){case 8:iu(),d=6;break e;case 3:case 2:case 9:case 6:yt.current===null&&(t=!0);var E=he;if(he=0,bt=null,Xn(e,m,y,E),a&&Ln){d=0;break e}break;default:E=he,he=0,bt=null,Xn(e,m,y,E)}}lp(),d=Oe;break}catch(D){$f(e,D)}while(!0);return t&&e.shellSuspendCounter++,aa=Fa=null,me=n,A.H=i,A.A=o,te===null&&(we=null,ne=0,ml()),d}function lp(){for(;te!==null;)td(te)}function ip(e,t){var a=me;me|=2;var n=If(),i=ed();we!==e||ne!==t?(Zl=null,Xl=mt()+500,Qn(e,t)):Ln=er(e,t);e:do try{if(he!==0&&te!==null){t=te;var o=bt;t:switch(he){case 1:he=0,bt=null,Xn(e,t,o,1);break;case 2:case 9:if(ss(o)){he=0,bt=null,ad(t);break}t=function(){he!==2&&he!==9||we!==e||(he=7),Jt(e)},o.then(t,t);break e;case 3:he=7;break e;case 4:he=5;break e;case 7:ss(o)?(he=0,bt=null,ad(t)):(he=0,bt=null,Xn(e,t,o,7));break;case 5:var d=null;switch(te.tag){case 26:d=te.memoizedState;case 5:case 27:var m=te;if(d?Yd(d):m.stateNode.complete){he=0,bt=null;var y=m.sibling;if(y!==null)te=y;else{var E=m.return;E!==null?(te=E,Jl(E)):te=null}break t}}he=0,bt=null,Xn(e,t,o,5);break;case 6:he=0,bt=null,Xn(e,t,o,6);break;case 8:iu(),Oe=6;break e;default:throw Error(u(462))}}cp();break}catch(D){$f(e,D)}while(!0);return aa=Fa=null,A.H=n,A.A=i,me=a,te!==null?0:(we=null,ne=0,ml(),Oe)}function cp(){for(;te!==null&&!Om();)td(te)}function td(e){var t=qf(e.alternate,e,da);e.memoizedProps=e.pendingProps,t===null?Jl(e):te=t}function ad(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=vf(a,t,t.pendingProps,t.type,void 0,ne);break;case 11:t=vf(a,t,t.pendingProps,t.type.render,t.ref,ne);break;case 5:wc(t);default:Df(a,t),t=te=Io(t,da),t=qf(a,t,da)}e.memoizedProps=e.pendingProps,t===null?Jl(e):te=t}function Xn(e,t,a,n){aa=Fa=null,wc(t),Nn=null,gr=0;var i=t.return;try{if(W_(e,i,t,a,ne)){Oe=1,xl(e,Ot(a,e.current)),te=null;return}}catch(o){if(i!==null)throw te=i,o;Oe=1,xl(e,Ot(a,e.current)),te=null;return}t.flags&32768?(le||n===1?e=!0:Ln||(ne&536870912)!==0?e=!1:(Ca=e=!0,(n===2||n===9||n===3||n===6)&&(n=yt.current,n!==null&&n.tag===13&&(n.flags|=16384))),nd(t,e)):Jl(t)}function Jl(e){var t=e;do{if((t.flags&32768)!==0){nd(t,Ca);return}e=t.return;var a=P_(t.alternate,t,da);if(a!==null){te=a;return}if(t=t.sibling,t!==null){te=t;return}te=t=e}while(t!==null);Oe===0&&(Oe=5)}function nd(e,t){do{var a=I_(e.alternate,e);if(a!==null){a.flags&=32767,te=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){te=e;return}te=e=a}while(e!==null);Oe=6,te=null}function rd(e,t,a,n,i,o,d,m,y){e.cancelPendingCommit=null;do Wl();while(Le!==0);if((me&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(o=t.lanes|t.childLanes,o|=Wi,Lm(e,a,o,d,m,y),e===we&&(te=we=null,ne=0),Gn=t,za=e,ma=a,nu=o,ru=i,Kf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fp($r,function(){return od(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=A.T,A.T=null,i=R.p,R.p=2,d=me,me|=4;try{ep(e,t,a)}finally{me=d,R.p=i,A.T=n}}Le=1,ld(),id(),cd()}}function ld(){if(Le===1){Le=0;var e=za,t=Gn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var n=R.p;R.p=2;var i=me;me|=4;try{kf(t,e);var o=vu,d=Xo(e.containerInfo),m=o.focusedElem,y=o.selectionRange;if(d!==m&&m&&m.ownerDocument&&Qo(m.ownerDocument.documentElement,m)){if(y!==null&&Xi(m)){var E=y.start,D=y.end;if(D===void 0&&(D=E),"selectionStart"in m)m.selectionStart=E,m.selectionEnd=Math.min(D,m.value.length);else{var O=m.ownerDocument||document,q=O&&O.defaultView||window;if(q.getSelection){var T=q.getSelection(),L=m.textContent.length,K=Math.min(y.start,L),Se=y.end===void 0?K:Math.min(y.end,L);!T.extend&&K>Se&&(d=Se,Se=K,K=d);var S=Go(m,K),b=Go(m,Se);if(S&&b&&(T.rangeCount!==1||T.anchorNode!==S.node||T.anchorOffset!==S.offset||T.focusNode!==b.node||T.focusOffset!==b.offset)){var j=O.createRange();j.setStart(S.node,S.offset),T.removeAllRanges(),K>Se?(T.addRange(j),T.extend(b.node,b.offset)):(j.setEnd(b.node,b.offset),T.addRange(j))}}}}for(O=[],T=m;T=T.parentNode;)T.nodeType===1&&O.push({element:T,left:T.scrollLeft,top:T.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<O.length;m++){var C=O[m];C.element.scrollLeft=C.left,C.element.scrollTop=C.top}}ci=!!yu,vu=yu=null}finally{me=i,R.p=n,A.T=a}}e.current=t,Le=2}}function id(){if(Le===2){Le=0;var e=za,t=Gn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var n=R.p;R.p=2;var i=me;me|=4;try{Rf(e,t.alternate,t)}finally{me=i,R.p=n,A.T=a}}Le=3}}function cd(){if(Le===4||Le===3){Le=0,Mm();var e=za,t=Gn,a=ma,n=Kf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Le=5:(Le=0,Gn=za=null,ud(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Ma=null),qi(a),t=t.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(In,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=A.T,i=R.p,R.p=2,A.T=null;try{for(var o=e.onRecoverableError,d=0;d<n.length;d++){var m=n[d];o(m.value,{componentStack:m.stack})}}finally{A.T=t,R.p=i}}(ma&3)!==0&&Wl(),Jt(e),i=e.pendingLanes,(a&261930)!==0&&(i&42)!==0?e===lu?Rr++:(Rr=0,lu=e):Rr=0,xr(0)}}function ud(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,pr(t)))}function Wl(){return ld(),id(),cd(),od()}function od(){if(Le!==5)return!1;var e=za,t=nu;nu=0;var a=qi(ma),n=A.T,i=R.p;try{R.p=32>a?32:a,A.T=null,a=ru,ru=null;var o=za,d=ma;if(Le=0,Gn=za=null,ma=0,(me&6)!==0)throw Error(u(331));var m=me;if(me|=4,Xf(o.current),Yf(o,o.current,d,a),me=m,xr(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(In,o)}catch{}return!0}finally{R.p=i,A.T=n,ud(e,t)}}function sd(e,t,a){t=Ot(a,t),t=Bc(e.stateNode,t,2),e=qa(e,t,2),e!==null&&(tr(e,2),Jt(e))}function ge(e,t,a){if(e.tag===3)sd(e,e,a);else for(;t!==null;){if(t.tag===3){sd(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ma===null||!Ma.has(n))){e=Ot(a,e),a=ff(2),n=qa(t,a,2),n!==null&&(df(a,n,t,e),tr(n,2),Jt(n));break}}t=t.return}}function uu(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new np;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(a)||(eu=!0,i.add(a),e=up.bind(null,e,t,a),t.then(e,e))}function up(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,we===e&&(ne&a)===a&&(Oe===4||Oe===3&&(ne&62914560)===ne&&300>mt()-Ql?(me&2)===0&&Qn(e,0):tu|=a,Yn===ne&&(Yn=0)),Jt(e)}function fd(e,t){t===0&&(t=no()),e=Ka(e,t),e!==null&&(tr(e,t),Jt(e))}function op(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),fd(e,a)}function sp(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(u(314))}n!==null&&n.delete(t),fd(e,a)}function fp(e,t){return Si(e,t)}var Fl=null,Zn=null,ou=!1,$l=!1,su=!1,Ra=0;function Jt(e){e!==Zn&&e.next===null&&(Zn===null?Fl=Zn=e:Zn=Zn.next=e),$l=!0,ou||(ou=!0,mp())}function xr(e,t){if(!su&&$l){su=!0;do for(var a=!1,n=Fl;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var o=0;else{var d=n.suspendedLanes,m=n.pingedLanes;o=(1<<31-pt(42|e)+1)-1,o&=i&~(d&~m),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,pd(n,o))}else o=ne,o=tl(n,n===we?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(o&3)===0||er(n,o)||(a=!0,pd(n,o));n=n.next}while(a);su=!1}}function dp(){dd()}function dd(){$l=ou=!1;var e=0;Ra!==0&&jp()&&(e=Ra);for(var t=mt(),a=null,n=Fl;n!==null;){var i=n.next,o=md(n,t);o===0?(n.next=null,a===null?Fl=i:a.next=i,i===null&&(Zn=a)):(a=n,(e!==0||(o&3)!==0)&&($l=!0)),n=i}Le!==0&&Le!==5||xr(e),Ra!==0&&(Ra=0)}function md(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var d=31-pt(o),m=1<<d,y=i[d];y===-1?((m&a)===0||(m&n)!==0)&&(i[d]=km(m,t)):y<=t&&(e.expiredLanes|=m),o&=~m}if(t=we,a=ne,a=tl(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(he===2||he===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&wi(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||er(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&wi(n),qi(a)){case 2:case 8:a=to;break;case 32:a=$r;break;case 268435456:a=ao;break;default:a=$r}return n=_d.bind(null,e),a=Si(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&wi(n),e.callbackPriority=2,e.callbackNode=null,2}function _d(e,t){if(Le!==0&&Le!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Wl()&&e.callbackNode!==a)return null;var n=ne;return n=tl(e,e===we?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Wf(e,n,t),md(e,mt()),e.callbackNode!=null&&e.callbackNode===a?_d.bind(null,e):null)}function pd(e,t){if(Wl())return null;Wf(e,t,!0)}function mp(){qp(function(){(me&6)!==0?Si(eo,dp):dd()})}function fu(){if(Ra===0){var e=On;e===0&&(e=Pr,Pr<<=1,(Pr&261888)===0&&(Pr=256)),Ra=e}return Ra}function hd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ll(""+e)}function gd(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function _p(e,t,a,n,i){if(t==="submit"&&a&&a.stateNode===i){var o=hd((i[nt]||null).action),d=n.submitter;d&&(t=(t=d[nt]||null)?hd(t.formAction):d.getAttribute("formAction"),t!==null&&(o=t,d=null));var m=new ol("action","action",null,n,i);e.push({event:m,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ra!==0){var y=d?gd(i,d):new FormData(i);Mc(a,{pending:!0,data:y,method:i.method,action:o},null,y)}}else typeof o=="function"&&(m.preventDefault(),y=d?gd(i,d):new FormData(i),Mc(a,{pending:!0,data:y,method:i.method,action:o},o,y))},currentTarget:i}]})}}for(var du=0;du<Ji.length;du++){var mu=Ji[du],pp=mu.toLowerCase(),hp=mu[0].toUpperCase()+mu.slice(1);Lt(pp,"on"+hp)}Lt(Ko,"onAnimationEnd"),Lt(Jo,"onAnimationIteration"),Lt(Wo,"onAnimationStart"),Lt("dblclick","onDoubleClick"),Lt("focusin","onFocus"),Lt("focusout","onBlur"),Lt(z_,"onTransitionRun"),Lt(N_,"onTransitionStart"),Lt(R_,"onTransitionCancel"),Lt(Fo,"onTransitionEnd"),hn("onMouseEnter",["mouseout","mouseover"]),hn("onMouseLeave",["mouseout","mouseover"]),hn("onPointerEnter",["pointerout","pointerover"]),hn("onPointerLeave",["pointerout","pointerover"]),Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ur));function yd(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var d=n.length-1;0<=d;d--){var m=n[d],y=m.instance,E=m.currentTarget;if(m=m.listener,y!==o&&i.isPropagationStopped())break e;o=m,i.currentTarget=E;try{o(i)}catch(D){dl(D)}i.currentTarget=null,o=y}else for(d=0;d<n.length;d++){if(m=n[d],y=m.instance,E=m.currentTarget,m=m.listener,y!==o&&i.isPropagationStopped())break e;o=m,i.currentTarget=E;try{o(i)}catch(D){dl(D)}i.currentTarget=null,o=y}}}}function ae(e,t){var a=t[Ti];a===void 0&&(a=t[Ti]=new Set);var n=e+"__bubble";a.has(n)||(vd(t,e,2,!1),a.add(n))}function _u(e,t,a){var n=0;t&&(n|=4),vd(a,e,n,t)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function pu(e){if(!e[Pl]){e[Pl]=!0,so.forEach(function(a){a!=="selectionchange"&&(gp.has(a)||_u(a,!1,e),_u(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pl]||(t[Pl]=!0,_u("selectionchange",!1,t))}}function vd(e,t,a,n){switch(Jd(t)){case 2:var i=Zp;break;case 8:i=Vp;break;default:i=Ou}a=i.bind(null,t,a,e),i=void 0,!xi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,a,{capture:!0,passive:i}):e.addEventListener(t,a,!0):i!==void 0?e.addEventListener(t,a,{passive:i}):e.addEventListener(t,a,!1)}function hu(e,t,a,n,i){var o=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var m=n.stateNode.containerInfo;if(m===i)break;if(d===4)for(d=n.return;d!==null;){var y=d.tag;if((y===3||y===4)&&d.stateNode.containerInfo===i)return;d=d.return}for(;m!==null;){if(d=mn(m),d===null)return;if(y=d.tag,y===5||y===6||y===26||y===27){n=o=d;continue e}m=m.parentNode}}n=n.return}jo(function(){var E=o,D=Ni(a),O=[];e:{var q=$o.get(e);if(q!==void 0){var T=ol,L=e;switch(e){case"keypress":if(cl(a)===0)break e;case"keydown":case"keyup":T=s_;break;case"focusin":L="focus",T=ki;break;case"focusout":L="blur",T=ki;break;case"beforeblur":case"afterblur":T=ki;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=To;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=m_;break;case Ko:case Jo:case Wo:T=t_;break;case Fo:T=p_;break;case"scroll":case"scrollend":T=Fm;break;case"wheel":T=g_;break;case"copy":case"cut":case"paste":T=n_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Ao;break;case"toggle":case"beforetoggle":T=v_}var K=(t&4)!==0,Se=!K&&(e==="scroll"||e==="scrollend"),S=K?q!==null?q+"Capture":null:q;K=[];for(var b=E,j;b!==null;){var C=b;if(j=C.stateNode,C=C.tag,C!==5&&C!==26&&C!==27||j===null||S===null||(C=rr(b,S),C!=null&&K.push(Br(b,C,j))),Se)break;b=b.return}0<K.length&&(q=new T(q,L,null,a,D),O.push({event:q,listeners:K}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",q&&a!==zi&&(L=a.relatedTarget||a.fromElement)&&(mn(L)||L[dn]))break e;if((T||q)&&(q=D.window===D?D:(q=D.ownerDocument)?q.defaultView||q.parentWindow:window,T?(L=a.relatedTarget||a.toElement,T=E,L=L?mn(L):null,L!==null&&(Se=f(L),K=L.tag,L!==Se||K!==5&&K!==27&&K!==6)&&(L=null)):(T=null,L=E),T!==L)){if(K=To,C="onMouseLeave",S="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(K=Ao,C="onPointerLeave",S="onPointerEnter",b="pointer"),Se=T==null?q:nr(T),j=L==null?q:nr(L),q=new K(C,b+"leave",T,a,D),q.target=Se,q.relatedTarget=j,C=null,mn(D)===E&&(K=new K(S,b+"enter",L,a,D),K.target=j,K.relatedTarget=Se,C=K),Se=C,T&&L)t:{for(K=yp,S=T,b=L,j=0,C=S;C;C=K(C))j++;C=0;for(var X=b;X;X=K(X))C++;for(;0<j-C;)S=K(S),j--;for(;0<C-j;)b=K(b),C--;for(;j--;){if(S===b||b!==null&&S===b.alternate){K=S;break t}S=K(S),b=K(b)}K=null}else K=null;T!==null&&bd(O,q,T,K,!1),L!==null&&Se!==null&&bd(O,Se,L,K,!0)}}e:{if(q=E?nr(E):window,T=q.nodeName&&q.nodeName.toLowerCase(),T==="select"||T==="input"&&q.type==="file")var ce=Uo;else if(Ro(q))if(Bo)ce=C_;else{ce=D_;var Y=T_}else T=q.nodeName,!T||T.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?E&&Mi(E.elementType)&&(ce=Uo):ce=A_;if(ce&&(ce=ce(e,E))){xo(O,ce,a,D);break e}Y&&Y(e,q,E),e==="focusout"&&E&&q.type==="number"&&E.memoizedProps.value!=null&&Oi(q,"number",q.value)}switch(Y=E?nr(E):window,e){case"focusin":(Ro(Y)||Y.contentEditable==="true")&&(wn=Y,Zi=E,dr=null);break;case"focusout":dr=Zi=wn=null;break;case"mousedown":Vi=!0;break;case"contextmenu":case"mouseup":case"dragend":Vi=!1,Zo(O,a,D);break;case"selectionchange":if(M_)break;case"keydown":case"keyup":Zo(O,a,D)}var $;if(Yi)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else Sn?zo(e,a)&&(re="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(re="onCompositionStart");re&&(Co&&a.locale!=="ko"&&(Sn||re!=="onCompositionStart"?re==="onCompositionEnd"&&Sn&&($=Eo()):(ya=D,Ui="value"in ya?ya.value:ya.textContent,Sn=!0)),Y=Il(E,re),0<Y.length&&(re=new Do(re,e,null,a,D),O.push({event:re,listeners:Y}),$?re.data=$:($=No(a),$!==null&&(re.data=$)))),($=S_?w_(e,a):j_(e,a))&&(re=Il(E,"onBeforeInput"),0<re.length&&(Y=new Do("onBeforeInput","beforeinput",null,a,D),O.push({event:Y,listeners:re}),Y.data=$)),_p(O,e,E,a,D)}yd(O,t)})}function Br(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Il(e,t){for(var a=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||o===null||(i=rr(e,a),i!=null&&n.unshift(Br(e,i,o)),i=rr(e,t),i!=null&&n.push(Br(e,i,o))),e.tag===3)return n;e=e.return}return[]}function yp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bd(e,t,a,n,i){for(var o=t._reactName,d=[];a!==null&&a!==n;){var m=a,y=m.alternate,E=m.stateNode;if(m=m.tag,y!==null&&y===n)break;m!==5&&m!==26&&m!==27||E===null||(y=E,i?(E=rr(a,o),E!=null&&d.unshift(Br(a,E,y))):i||(E=rr(a,o),E!=null&&d.push(Br(a,E,y)))),a=a.return}d.length!==0&&e.push({event:t,listeners:d})}var vp=/\r\n?/g,bp=/\u0000|\uFFFD/g;function Sd(e){return(typeof e=="string"?e:""+e).replace(vp,`
`).replace(bp,"")}function wd(e,t){return t=Sd(t),Sd(e)===t}function be(e,t,a,n,i,o){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||yn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&yn(e,""+n);break;case"className":nl(e,"class",n);break;case"tabIndex":nl(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":nl(e,a,n);break;case"style":So(e,n,o);break;case"data":if(t!=="object"){nl(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=ll(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&be(e,t,"name",i.name,i,null),be(e,t,"formEncType",i.formEncType,i,null),be(e,t,"formMethod",i.formMethod,i,null),be(e,t,"formTarget",i.formTarget,i,null)):(be(e,t,"encType",i.encType,i,null),be(e,t,"method",i.method,i,null),be(e,t,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=ll(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=Pt);break;case"onScroll":n!=null&&ae("scroll",e);break;case"onScrollEnd":n!=null&&ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=ll(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":ae("beforetoggle",e),ae("toggle",e),al(e,"popover",n);break;case"xlinkActuate":$t(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":$t(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":$t(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":$t(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":$t(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":$t(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":$t(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":$t(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":$t(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":al(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jm.get(a)||a,al(e,a,n))}}function gu(e,t,a,n,i,o){switch(a){case"style":So(e,n,o);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"children":typeof n=="string"?yn(e,n):(typeof n=="number"||typeof n=="bigint")&&yn(e,""+n);break;case"onScroll":n!=null&&ae("scroll",e);break;case"onScrollEnd":n!=null&&ae("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),t=a.slice(2,i?a.length-7:void 0),o=e[nt]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,i),typeof n=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,i);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):al(e,a,n)}}}function $e(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ae("error",e),ae("load",e);var n=!1,i=!1,o;for(o in a)if(a.hasOwnProperty(o)){var d=a[o];if(d!=null)switch(o){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:be(e,t,o,d,a,null)}}i&&be(e,t,"srcSet",a.srcSet,a,null),n&&be(e,t,"src",a.src,a,null);return;case"input":ae("invalid",e);var m=o=d=i=null,y=null,E=null;for(n in a)if(a.hasOwnProperty(n)){var D=a[n];if(D!=null)switch(n){case"name":i=D;break;case"type":d=D;break;case"checked":y=D;break;case"defaultChecked":E=D;break;case"value":o=D;break;case"defaultValue":m=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(u(137,t));break;default:be(e,t,n,D,a,null)}}go(e,o,m,y,E,d,i,!1);return;case"select":ae("invalid",e),n=d=o=null;for(i in a)if(a.hasOwnProperty(i)&&(m=a[i],m!=null))switch(i){case"value":o=m;break;case"defaultValue":d=m;break;case"multiple":n=m;default:be(e,t,i,m,a,null)}t=o,a=d,e.multiple=!!n,t!=null?gn(e,!!n,t,!1):a!=null&&gn(e,!!n,a,!0);return;case"textarea":ae("invalid",e),o=i=n=null;for(d in a)if(a.hasOwnProperty(d)&&(m=a[d],m!=null))switch(d){case"value":n=m;break;case"defaultValue":i=m;break;case"children":o=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(u(91));break;default:be(e,t,d,m,a,null)}vo(e,n,i,o);return;case"option":for(y in a)if(a.hasOwnProperty(y)&&(n=a[y],n!=null))switch(y){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:be(e,t,y,n,a,null)}return;case"dialog":ae("beforetoggle",e),ae("toggle",e),ae("cancel",e),ae("close",e);break;case"iframe":case"object":ae("load",e);break;case"video":case"audio":for(n=0;n<Ur.length;n++)ae(Ur[n],e);break;case"image":ae("error",e),ae("load",e);break;case"details":ae("toggle",e);break;case"embed":case"source":case"link":ae("error",e),ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in a)if(a.hasOwnProperty(E)&&(n=a[E],n!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:be(e,t,E,n,a,null)}return;default:if(Mi(t)){for(D in a)a.hasOwnProperty(D)&&(n=a[D],n!==void 0&&gu(e,t,D,n,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(n=a[m],n!=null&&be(e,t,m,n,a,null))}function Sp(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,d=null,m=null,y=null,E=null,D=null;for(T in a){var O=a[T];if(a.hasOwnProperty(T)&&O!=null)switch(T){case"checked":break;case"value":break;case"defaultValue":y=O;default:n.hasOwnProperty(T)||be(e,t,T,null,n,O)}}for(var q in n){var T=n[q];if(O=a[q],n.hasOwnProperty(q)&&(T!=null||O!=null))switch(q){case"type":o=T;break;case"name":i=T;break;case"checked":E=T;break;case"defaultChecked":D=T;break;case"value":d=T;break;case"defaultValue":m=T;break;case"children":case"dangerouslySetInnerHTML":if(T!=null)throw Error(u(137,t));break;default:T!==O&&be(e,t,q,T,n,O)}}Ci(e,d,m,y,E,D,o,i);return;case"select":T=d=m=q=null;for(o in a)if(y=a[o],a.hasOwnProperty(o)&&y!=null)switch(o){case"value":break;case"multiple":T=y;default:n.hasOwnProperty(o)||be(e,t,o,null,n,y)}for(i in n)if(o=n[i],y=a[i],n.hasOwnProperty(i)&&(o!=null||y!=null))switch(i){case"value":q=o;break;case"defaultValue":m=o;break;case"multiple":d=o;default:o!==y&&be(e,t,i,o,n,y)}t=m,a=d,n=T,q!=null?gn(e,!!a,q,!1):!!n!=!!a&&(t!=null?gn(e,!!a,t,!0):gn(e,!!a,a?[]:"",!1));return;case"textarea":T=q=null;for(m in a)if(i=a[m],a.hasOwnProperty(m)&&i!=null&&!n.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:be(e,t,m,null,n,i)}for(d in n)if(i=n[d],o=a[d],n.hasOwnProperty(d)&&(i!=null||o!=null))switch(d){case"value":q=i;break;case"defaultValue":T=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(u(91));break;default:i!==o&&be(e,t,d,i,n,o)}yo(e,q,T);return;case"option":for(var L in a)if(q=a[L],a.hasOwnProperty(L)&&q!=null&&!n.hasOwnProperty(L))switch(L){case"selected":e.selected=!1;break;default:be(e,t,L,null,n,q)}for(y in n)if(q=n[y],T=a[y],n.hasOwnProperty(y)&&q!==T&&(q!=null||T!=null))switch(y){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:be(e,t,y,q,n,T)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var K in a)q=a[K],a.hasOwnProperty(K)&&q!=null&&!n.hasOwnProperty(K)&&be(e,t,K,null,n,q);for(E in n)if(q=n[E],T=a[E],n.hasOwnProperty(E)&&q!==T&&(q!=null||T!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(u(137,t));break;default:be(e,t,E,q,n,T)}return;default:if(Mi(t)){for(var Se in a)q=a[Se],a.hasOwnProperty(Se)&&q!==void 0&&!n.hasOwnProperty(Se)&&gu(e,t,Se,void 0,n,q);for(D in n)q=n[D],T=a[D],!n.hasOwnProperty(D)||q===T||q===void 0&&T===void 0||gu(e,t,D,q,n,T);return}}for(var S in a)q=a[S],a.hasOwnProperty(S)&&q!=null&&!n.hasOwnProperty(S)&&be(e,t,S,null,n,q);for(O in n)q=n[O],T=a[O],!n.hasOwnProperty(O)||q===T||q==null&&T==null||be(e,t,O,q,n,T)}function jd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wp(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var i=a[n],o=i.transferSize,d=i.initiatorType,m=i.duration;if(o&&m&&jd(d)){for(d=0,m=i.responseEnd,n+=1;n<a.length;n++){var y=a[n],E=y.startTime;if(E>m)break;var D=y.transferSize,O=y.initiatorType;D&&jd(O)&&(y=y.responseEnd,d+=D*(y<m?1:(m-E)/(y-E)))}if(--n,t+=8*(o+d)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yu=null,vu=null;function ei(e){return e.nodeType===9?e:e.ownerDocument}function Ed(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qd(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Su=null;function jp(){var e=window.event;return e&&e.type==="popstate"?e===Su?!1:(Su=e,!0):(Su=null,!1)}var Td=typeof setTimeout=="function"?setTimeout:void 0,Ep=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,qp=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(e){return Dd.resolve(null).then(e).catch(Tp)}:Td;function Tp(e){setTimeout(function(){throw e})}function xa(e){return e==="head"}function Ad(e,t){var a=t,n=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(i),Wn(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Hr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Hr(a);for(var o=a.firstChild;o;){var d=o.nextSibling,m=o.nodeName;o[ar]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=d}}else a==="body"&&Hr(e.ownerDocument.body);a=i}while(a);Wn(t)}function Cd(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function wu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":wu(a),Di(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Dp(e,t,a,n){for(;e.nodeType===1;){var i=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ar])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=xt(e.nextSibling),e===null)break}return null}function Ap(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=xt(e.nextSibling),e===null))return null;return e}function Od(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=xt(e.nextSibling),e===null))return null;return e}function ju(e){return e.data==="$?"||e.data==="$~"}function Eu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Cp(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function xt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var qu=null;function Md(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return xt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function zd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Nd(e,t,a){switch(t=ei(a),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Hr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Di(e)}var Ut=new Map,Rd=new Set;function ti(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _a=R.d;R.d={f:Op,r:Mp,D:zp,C:Np,L:Rp,m:xp,X:Bp,S:Up,M:Hp};function Op(){var e=_a.f(),t=Vl();return e||t}function Mp(e){var t=_n(e);t!==null&&t.tag===5&&t.type==="form"?Fs(t):_a.r(e)}var Vn=typeof document>"u"?null:document;function xd(e,t,a){var n=Vn;if(n&&typeof t=="string"&&t){var i=At(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),Rd.has(i)||(Rd.add(i),e={rel:e,crossOrigin:a,href:t},n.querySelector(i)===null&&(t=n.createElement("link"),$e(t,"link",e),Qe(t),n.head.appendChild(t)))}}function zp(e){_a.D(e),xd("dns-prefetch",e,null)}function Np(e,t){_a.C(e,t),xd("preconnect",e,t)}function Rp(e,t,a){_a.L(e,t,a);var n=Vn;if(n&&e&&t){var i='link[rel="preload"][as="'+At(t)+'"]';t==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+At(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+At(a.imageSizes)+'"]')):i+='[href="'+At(e)+'"]';var o=i;switch(t){case"style":o=Kn(e);break;case"script":o=Jn(e)}Ut.has(o)||(e=N({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ut.set(o,e),n.querySelector(i)!==null||t==="style"&&n.querySelector(kr(o))||t==="script"&&n.querySelector(Lr(o))||(t=n.createElement("link"),$e(t,"link",e),Qe(t),n.head.appendChild(t)))}}function xp(e,t){_a.m(e,t);var a=Vn;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+At(n)+'"][href="'+At(e)+'"]',o=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Jn(e)}if(!Ut.has(o)&&(e=N({rel:"modulepreload",href:e},t),Ut.set(o,e),a.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Lr(o)))return}n=a.createElement("link"),$e(n,"link",e),Qe(n),a.head.appendChild(n)}}}function Up(e,t,a){_a.S(e,t,a);var n=Vn;if(n&&e){var i=pn(n).hoistableStyles,o=Kn(e);t=t||"default";var d=i.get(o);if(!d){var m={loading:0,preload:null};if(d=n.querySelector(kr(o)))m.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ut.get(o))&&Tu(e,a);var y=d=n.createElement("link");Qe(y),$e(y,"link",e),y._p=new Promise(function(E,D){y.onload=E,y.onerror=D}),y.addEventListener("load",function(){m.loading|=1}),y.addEventListener("error",function(){m.loading|=2}),m.loading|=4,ai(d,t,n)}d={type:"stylesheet",instance:d,count:1,state:m},i.set(o,d)}}}function Bp(e,t){_a.X(e,t);var a=Vn;if(a&&e){var n=pn(a).hoistableScripts,i=Jn(e),o=n.get(i);o||(o=a.querySelector(Lr(i)),o||(e=N({src:e,async:!0},t),(t=Ut.get(i))&&Du(e,t),o=a.createElement("script"),Qe(o),$e(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},n.set(i,o))}}function Hp(e,t){_a.M(e,t);var a=Vn;if(a&&e){var n=pn(a).hoistableScripts,i=Jn(e),o=n.get(i);o||(o=a.querySelector(Lr(i)),o||(e=N({src:e,async:!0,type:"module"},t),(t=Ut.get(i))&&Du(e,t),o=a.createElement("script"),Qe(o),$e(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},n.set(i,o))}}function Ud(e,t,a,n){var i=(i=Q.current)?ti(i):null;if(!i)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Kn(a.href),a=pn(i).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Kn(a.href);var o=pn(i).hoistableStyles,d=o.get(e);if(d||(i=i.ownerDocument||i,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,d),(o=i.querySelector(kr(e)))&&!o._p&&(d.instance=o,d.state.loading=5),Ut.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ut.set(e,a),o||kp(i,e,a,d.state))),t&&n===null)throw Error(u(528,""));return d}if(t&&n!==null)throw Error(u(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Jn(a),a=pn(i).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Kn(e){return'href="'+At(e)+'"'}function kr(e){return'link[rel="stylesheet"]['+e+"]"}function Bd(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function kp(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),$e(t,"link",a),Qe(t),e.head.appendChild(t))}function Jn(e){return'[src="'+At(e)+'"]'}function Lr(e){return"script[async]"+e}function Hd(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+At(a.href)+'"]');if(n)return t.instance=n,Qe(n),n;var i=N({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Qe(n),$e(n,"style",i),ai(n,a.precedence,e),t.instance=n;case"stylesheet":i=Kn(a.href);var o=e.querySelector(kr(i));if(o)return t.state.loading|=4,t.instance=o,Qe(o),o;n=Bd(a),(i=Ut.get(i))&&Tu(n,i),o=(e.ownerDocument||e).createElement("link"),Qe(o);var d=o;return d._p=new Promise(function(m,y){d.onload=m,d.onerror=y}),$e(o,"link",n),t.state.loading|=4,ai(o,a.precedence,e),t.instance=o;case"script":return o=Jn(a.src),(i=e.querySelector(Lr(o)))?(t.instance=i,Qe(i),i):(n=a,(i=Ut.get(o))&&(n=N({},a),Du(n,i)),e=e.ownerDocument||e,i=e.createElement("script"),Qe(i),$e(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ai(n,a.precedence,e));return t.instance}function ai(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,o=i,d=0;d<n.length;d++){var m=n[d];if(m.dataset.precedence===t)o=m;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Tu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ni=null;function kd(e,t,a){if(ni===null){var n=new Map,i=ni=new Map;i.set(a,n)}else i=ni,n=i.get(a),n||(n=new Map,i.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),i=0;i<a.length;i++){var o=a[i];if(!(o[ar]||o[Ke]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var d=o.getAttribute(t)||"";d=e+d;var m=n.get(d);m?m.push(o):n.set(d,[o])}}return n}function Ld(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Lp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Yd(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Yp(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=Kn(n.href),o=t.querySelector(kr(i));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ri.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=o,Qe(o);return}o=t.ownerDocument||t,n=Bd(n),(i=Ut.get(i))&&Tu(n,i),o=o.createElement("link"),Qe(o);var d=o;d._p=new Promise(function(m,y){d.onload=m,d.onerror=y}),$e(o,"link",n),a.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ri.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Au=0;function Gp(e,t){return e.stylesheets&&e.count===0&&ii(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&ii(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&Au===0&&(Au=62500*wp());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ii(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Au?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(i)}}:null}function ri(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ii(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var li=null;function ii(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,li=new Map,t.forEach(Qp,e),li=null,ri.call(e))}function Qp(e,t){if(!(t.state.loading&4)){var a=li.get(e);if(a)var n=a.get(null);else{a=new Map,li.set(e,a);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var d=i[o];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(a.set(d.dataset.precedence,d),n=d)}n&&a.set(null,n)}i=t.instance,d=i.getAttribute("data-precedence"),o=a.get(d)||n,o===n&&a.set(null,i),a.set(d,i),this.count++,n=ri.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),o?o.parentNode.insertBefore(i,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Yr={$$typeof:F,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function Xp(e,t,a,n,i,o,d,m,y){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.hiddenUpdates=ji(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function Gd(e,t,a,n,i,o,d,m,y,E,D,O){return e=new Xp(e,t,a,d,y,E,D,O,m),t=1,o===!0&&(t|=24),o=gt(3,null,null,t),e.current=o,o.stateNode=e,t=cc(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:n,isDehydrated:a,cache:t},fc(o),e}function Qd(e){return e?(e=qn,e):qn}function Xd(e,t,a,n,i,o){i=Qd(i),n.context===null?n.context=i:n.pendingContext=i,n=Ea(t),n.payload={element:a},o=o===void 0?null:o,o!==null&&(n.callback=o),a=qa(e,n,t),a!==null&&(ot(a,e,t),vr(a,e,t))}function Zd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Cu(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function Vd(e){if(e.tag===13||e.tag===31){var t=Ka(e,67108864);t!==null&&ot(t,e,67108864),Cu(e,67108864)}}function Kd(e){if(e.tag===13||e.tag===31){var t=wt();t=Ei(t);var a=Ka(e,t);a!==null&&ot(a,e,t),Cu(e,t)}}var ci=!0;function Zp(e,t,a,n){var i=A.T;A.T=null;var o=R.p;try{R.p=2,Ou(e,t,a,n)}finally{R.p=o,A.T=i}}function Vp(e,t,a,n){var i=A.T;A.T=null;var o=R.p;try{R.p=8,Ou(e,t,a,n)}finally{R.p=o,A.T=i}}function Ou(e,t,a,n){if(ci){var i=Mu(n);if(i===null)hu(e,t,n,ui,a),Wd(e,n);else if(Jp(i,e,t,a,n))n.stopPropagation();else if(Wd(e,n),t&4&&-1<Kp.indexOf(e)){for(;i!==null;){var o=_n(i);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var d=Ga(o.pendingLanes);if(d!==0){var m=o;for(m.pendingLanes|=2,m.entangledLanes|=2;d;){var y=1<<31-pt(d);m.entanglements[1]|=y,d&=~y}Jt(o),(me&6)===0&&(Xl=mt()+500,xr(0))}}break;case 31:case 13:m=Ka(o,2),m!==null&&ot(m,o,2),Vl(),Cu(o,2)}if(o=Mu(n),o===null&&hu(e,t,n,ui,a),o===i)break;i=o}i!==null&&n.stopPropagation()}else hu(e,t,n,null,a)}}function Mu(e){return e=Ni(e),zu(e)}var ui=null;function zu(e){if(ui=null,e=mn(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=p(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ui=e,null}function Jd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zm()){case eo:return 2;case to:return 8;case $r:case Nm:return 32;case ao:return 268435456;default:return 32}default:return 32}}var Nu=!1,Ua=null,Ba=null,Ha=null,Gr=new Map,Qr=new Map,ka=[],Kp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wd(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Gr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qr.delete(t.pointerId)}}function Xr(e,t,a,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=_n(t),t!==null&&Vd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Jp(e,t,a,n,i){switch(t){case"focusin":return Ua=Xr(Ua,e,t,a,n,i),!0;case"dragenter":return Ba=Xr(Ba,e,t,a,n,i),!0;case"mouseover":return Ha=Xr(Ha,e,t,a,n,i),!0;case"pointerover":var o=i.pointerId;return Gr.set(o,Xr(Gr.get(o)||null,e,t,a,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Qr.set(o,Xr(Qr.get(o)||null,e,t,a,n,i)),!0}return!1}function Fd(e){var t=mn(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=p(a),t!==null){e.blockedOn=t,uo(e.priority,function(){Kd(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,uo(e.priority,function(){Kd(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Mu(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);zi=n,a.target.dispatchEvent(n),zi=null}else return t=_n(a),t!==null&&Vd(t),e.blockedOn=a,!1;t.shift()}return!0}function $d(e,t,a){oi(e)&&a.delete(t)}function Wp(){Nu=!1,Ua!==null&&oi(Ua)&&(Ua=null),Ba!==null&&oi(Ba)&&(Ba=null),Ha!==null&&oi(Ha)&&(Ha=null),Gr.forEach($d),Qr.forEach($d)}function si(e,t){e.blockedOn===t&&(e.blockedOn=null,Nu||(Nu=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Wp)))}var fi=null;function Pd(e){fi!==e&&(fi=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){fi===e&&(fi=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],i=e[t+2];if(typeof n!="function"){if(zu(n||a)===null)continue;break}var o=_n(a);o!==null&&(e.splice(t,3),t-=3,Mc(o,{pending:!0,data:i,method:a.method,action:n},n,i))}}))}function Wn(e){function t(y){return si(y,e)}Ua!==null&&si(Ua,e),Ba!==null&&si(Ba,e),Ha!==null&&si(Ha,e),Gr.forEach(t),Qr.forEach(t);for(var a=0;a<ka.length;a++){var n=ka[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ka.length&&(a=ka[0],a.blockedOn===null);)Fd(a),a.blockedOn===null&&ka.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var i=a[n],o=a[n+1],d=i[nt]||null;if(typeof o=="function")d||Pd(a);else if(d){var m=null;if(o&&o.hasAttribute("formAction")){if(i=o,d=o[nt]||null)m=d.formAction;else if(zu(i)!==null)continue}else m=d.action;typeof m=="function"?a[n+1]=m:(a.splice(n,3),n-=3),Pd(a)}}}function Id(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(d){return i=d})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function Ru(e){this._internalRoot=e}di.prototype.render=Ru.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var a=t.current,n=wt();Xd(a,n,e,t,null,null)},di.prototype.unmount=Ru.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xd(e.current,2,null,e,null,null),Vl(),t[dn]=null}};function di(e){this._internalRoot=e}di.prototype.unstable_scheduleHydration=function(e){if(e){var t=co();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ka.length&&t!==0&&t<ka[a].priority;a++);ka.splice(a,0,e),a===0&&Fd(e)}};var em=l.version;if(em!=="19.2.0")throw Error(u(527,em,"19.2.0"));R.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=z(t),e=e!==null?U(e):null,e=e===null?null:e.stateNode,e};var Fp={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mi.isDisabled&&mi.supportsFiber)try{In=mi.inject(Fp),_t=mi}catch{}}return Vr.createRoot=function(e,t){if(!s(e))throw Error(u(299));var a=!1,n="",i=cf,o=uf,d=of;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Gd(e,1,!1,null,null,a,n,null,i,o,d,Id),e[dn]=t.current,pu(e),new Ru(t)},Vr.hydrateRoot=function(e,t,a){if(!s(e))throw Error(u(299));var n=!1,i="",o=cf,d=uf,m=of,y=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.formState!==void 0&&(y=a.formState)),t=Gd(e,1,!0,t,a??null,n,i,y,o,d,m,Id),t.context=Qd(null),a=t.current,n=wt(),n=Ei(n),i=Ea(n),i.callback=null,qa(a,i,n),a=n,t.current.lanes=a,tr(t,a),Jt(t),e[dn]=t.current,pu(e),new di(t)},Vr.version="19.2.0",Vr}var im;function lh(){if(im)return Uu.exports;im=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),Uu.exports=rh(),Uu.exports}var ih=lh();const ch=hm(ih),uh="fieldsync-offline",oh=2,oe={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let on=null;const pa=()=>new Promise((r,l)=>{if(on){r(on);return}const c=indexedDB.open(uh,oh);c.onerror=()=>{console.error("Failed to open offline database"),l(c.error)},c.onsuccess=()=>{on=c.result,r(on)},c.onupgradeneeded=u=>{const s=u.target.result;if(s.objectStoreNames.contains(oe.PROJECTS)||s.createObjectStore(oe.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),s.objectStoreNames.contains(oe.AREAS)||s.createObjectStore(oe.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(oe.CREW_CHECKINS)||s.createObjectStore(oe.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(oe.TM_TICKETS)||s.createObjectStore(oe.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(oe.DAILY_REPORTS)||s.createObjectStore(oe.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(oe.MESSAGES)||s.createObjectStore(oe.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!s.objectStoreNames.contains(oe.PENDING_ACTIONS)){const f=s.createObjectStore(oe.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});f.createIndex("type","type",{unique:!1}),f.createIndex("created_at","created_at",{unique:!1})}s.objectStoreNames.contains(oe.CACHED_DATA)||s.createObjectStore(oe.CACHED_DATA,{keyPath:"key"})}}),sn=(r,l="readonly")=>{if(!on)throw new Error("Database not initialized");return on.transaction(r,l).objectStore(r)},Wr=async(r,l)=>(await pa(),new Promise((c,u)=>{const f=sn(r,"readwrite").put(l);f.onsuccess=()=>c(f.result),f.onerror=()=>u(f.error)})),vm=async(r,l)=>(await pa(),new Promise((c,u)=>{const s=on.transaction(r,"readwrite"),f=s.objectStore(r);l.forEach(p=>f.put(p)),s.oncomplete=()=>c(),s.onerror=()=>u(s.error)})),sh=async(r,l)=>(await pa(),new Promise((c,u)=>{const f=sn(r).get(l);f.onsuccess=()=>c(f.result),f.onerror=()=>u(f.error)})),bm=async r=>(await pa(),new Promise((l,c)=>{const s=sn(r).getAll();s.onsuccess=()=>l(s.result||[]),s.onerror=()=>c(s.error)})),Ju=async(r,l,c)=>(await pa(),new Promise((u,s)=>{const g=sn(r).index(l).getAll(c);g.onsuccess=()=>u(g.result||[]),g.onerror=()=>s(g.error)})),fh=async(r,l)=>(await pa(),new Promise((c,u)=>{const f=sn(r,"readwrite").delete(l);f.onsuccess=()=>c(),f.onerror=()=>u(f.error)})),Ze={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},Bt=async(r,l,c={})=>{await pa();const u={type:r,payload:l,metadata:c,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((s,f)=>{const g=sn(oe.PENDING_ACTIONS,"readwrite").add(u);g.onsuccess=()=>{s(g.result)},g.onerror=()=>f(g.error)})},Sm=async()=>bm(oe.PENDING_ACTIONS),gi=async()=>(await Sm()).length,dh=async r=>fh(oe.PENDING_ACTIONS,r),mh=async(r,l)=>(await pa(),new Promise((c,u)=>{const s=sn(oe.PENDING_ACTIONS,"readwrite"),f=s.get(r);f.onsuccess=()=>{const p=f.result;if(p){const g={...p,...l},w=s.put(g);w.onsuccess=()=>c(g),w.onerror=()=>u(w.error)}else u(new Error("Action not found"))},f.onerror=()=>u(f.error)})),_h=async r=>vm(oe.PROJECTS,r),cm=async r=>r?Ju(oe.PROJECTS,"company_id",r):bm(oe.PROJECTS),ph=async r=>vm(oe.AREAS,r),um=async r=>Ju(oe.AREAS,"project_id",r),ku=async(r,l)=>{const c=await sh(oe.AREAS,r);return c&&(c.status=l,c.updated_at=new Date().toISOString(),await Wr(oe.AREAS,c)),c},Lu=async r=>Wr(oe.CREW_CHECKINS,r),om=async r=>Wr(oe.TM_TICKETS,r),jt=()=>{const r=new Uint8Array(6);crypto.getRandomValues(r);const l=Array.from(r,c=>c.toString(36)).join("");return`temp_${Date.now()}_${l}`},Fn=async r=>Wr(oe.DAILY_REPORTS,r),hh=async(r,l)=>(await Ju(oe.DAILY_REPORTS,"project_id",r)).find(u=>u.report_date===l)||null,sm=async r=>Wr(oe.MESSAGES,r);let Wu=navigator.onLine;const Qu=new Set,Fu=r=>(Qu.add(r),()=>Qu.delete(r)),Ht=()=>Wu,fm=r=>{Wu=r,Qu.forEach(l=>l(r))};typeof window<"u"&&(window.addEventListener("online",()=>{fm(!0)}),window.addEventListener("offline",()=>{fm(!1)}));let Yu=!1;const wm=async r=>{if(Yu||!Wu)return{synced:0,failed:0};Yu=!0;const l={synced:0,failed:0};try{const c=await Sm();for(const u of c)try{await gh(u,r),await dh(u.id),l.synced++}catch(s){console.error(`Failed to sync action ${u.type}:`,s),l.failed++,await mh(u.id,{attempts:(u.attempts||0)+1,last_error:s.message,last_attempt:new Date().toISOString()})}}finally{Yu=!1}return l},gh=async(r,l)=>{const{type:c,payload:u}=r;switch(c){case Ze.UPDATE_AREA_STATUS:return l.updateAreaStatus(u.areaId,u.status);case Ze.CREATE_TM_TICKET:const s=await l.createTMTicket(u.ticket);return u.workers?.length>0&&await l.addTMWorkers(s.id,u.workers),u.items?.length>0&&await l.addTMItems(s.id,u.items),s;case Ze.SAVE_CREW_CHECKIN:return l.saveCrewCheckin(u.projectId,u.workers,u.checkInDate);case Ze.SUBMIT_DAILY_REPORT:return await l.saveDailyReport(u.projectId,u.reportData),l.submitDailyReport(u.projectId,u.submittedBy);case Ze.SEND_MESSAGE:return l.sendMessage(u.projectId,u.senderType,u.senderName,u.content);case Ze.CREATE_MATERIAL_REQUEST:return l.createMaterialRequest(u.projectId,u.items,u.requestedBy,u.neededBy,u.priority,u.notes);default:throw new Error(`Unknown action type: ${c}`)}},yh={slowQueryThreshold:200},ee={query(r,l){const c={type:"query",operation:r,duration_ms:l.duration,rows_returned:l.rows,company_id:l.company_id||null,project_id:l.project_id||null,user_id:l.user_id||null,timestamp:new Date().toISOString()};l.duration>=yh.slowQueryThreshold&&Gu("query",c)},error(r,l){const c={type:"error",category:r,severity:l.severity||"error",error_code:l.code||null,message:l.message,company_id:l.company_id||null,user_id:l.user_id||null,project_id:l.project_id||null,operation:l.operation||null,context:l.extra||{},timestamp:new Date().toISOString()};Gu("error",c)},storage(r,l){const c={type:"storage",operation:r,company_id:l.company_id||null,project_id:l.project_id||null,file_size_bytes:l.size||0,duration_ms:l.duration||0,success:l.success!==!1,error_message:l.error||null,timestamp:new Date().toISOString()};(!c.success||c.duration_ms>5e3)&&Gu("storage",c)},activity(r,l){}};async function Gu(r,l){try{r==="error"?await _.rpc("log_error",{p_severity:l.severity,p_category:l.category,p_message:l.message,p_company_id:l.company_id,p_user_id:l.user_id,p_project_id:l.project_id,p_operation:l.operation,p_error_code:l.error_code,p_context:l.context||{}}):r==="query"&&await _.rpc("log_query_metric",{p_operation:l.operation,p_duration_ms:l.duration_ms,p_rows_returned:l.rows_returned,p_company_id:l.company_id,p_project_id:l.project_id,p_user_id:l.user_id,p_context:{}})}catch{}}ee.wrapQuery=function(r,l){return async function(...c){const u=performance.now();try{const s=await l.apply(this,c),p={duration:Math.round(performance.now()-u),rows:Array.isArray(s)?s.length:void 0};return ee.query(r,p),s}catch(s){const f=Math.round(performance.now()-u);throw ee.error("database",{message:s.message,operation:r,severity:"error",extra:{duration:f}}),s}}};ee.time=async function(r,l){const c=performance.now();try{const u=await l(),s=Math.round(performance.now()-c);return ee.query(r,{duration:s}),u}catch(u){throw ee.error("general",{message:u.message,operation:r}),u}};const jm="https://cegifnrcwdilromcyouq.supabase.co",$u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNlZ2lmbnJjd2RpbHJvbWN5b3VxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NTQ5OTAsImV4cCI6MjA4MDIzMDk5MH0.qAiBG5XaB0C1E0U2tQbQkrhpm1iUhM6A2MXngEHhX4A",h=!!$u;pa().catch(r=>console.error("Failed to init offline DB:",r));const _=h?gm(jm,$u):null,Xu="fieldsync_field_session";let Jr=null;const Pu=()=>{if(Jr)return Jr;try{const r=sessionStorage.getItem(Xu);if(r)return Jr=JSON.parse(r),Jr}catch{}return null},Zu=r=>{Jr=r,r?sessionStorage.setItem(Xu,JSON.stringify(r)):sessionStorage.removeItem(Xu)},Em=async()=>{const r=Pu();if(r?.token&&h)try{await _.rpc("invalidate_field_session",{p_session_token:r.token})}catch{}Zu(null)};let Kr=null;const qm=()=>{const r=Pu();return!r?.token||!h?_:((!Kr||Kr._sessionToken!==r.token)&&(Kr=gm(jm,$u,{global:{headers:{"x-field-session":r.token}}}),Kr._sessionToken=r.token),Kr)},Et=()=>h?Pu()?.token?qm():_:null,Vu="fieldsync_data",yi="fieldsync_user",vh=()=>{const r="fieldsync_device_id";let l=localStorage.getItem(r);return l||(l=crypto.randomUUID(),localStorage.setItem(r,l)),l},dm={projects:[],areas:[],users:[],assignments:[]},x=()=>{try{const r=localStorage.getItem(Vu);return r?JSON.parse(r):dm}catch{return localStorage.removeItem(Vu),dm}},I=r=>{localStorage.setItem(Vu,JSON.stringify(r))},_i=()=>{try{const r=localStorage.getItem(yi);return r?JSON.parse(r):null}catch{return localStorage.removeItem(yi),null}},pi=r=>{r?localStorage.setItem(yi,JSON.stringify(r)):localStorage.removeItem(yi)},Ku={async signUp(r,l,c,u){if(h){const{data:s,error:f}=await _.auth.signUp({email:r,password:l,options:{data:{name:c,role:u}}});if(f)throw f;return s}else{const s=x(),f={id:crypto.randomUUID(),email:r,name:c,role:u,created_at:new Date().toISOString()};return s.users.push(f),I(s),pi(f),{user:f}}},async signIn(r,l){if(h){const{data:c,error:u}=await _.auth.signInWithPassword({email:r,password:l});if(u)throw u;return c}else{const u=x().users.find(s=>s.email===r);if(!u)throw new Error("User not found");return pi(u),{user:u}}},async signOut(){if(h){const{error:r}=await _.auth.signOut();if(r)throw r}else pi(null)},async getUser(){if(h){const{data:{user:r}}=await _.auth.getUser();return r}else return _i()},async getProfile(){if(h){const{data:{user:r}}=await _.auth.getUser();if(!r)return null;const{data:l,error:c}=await _.from("users").select("*").eq("id",r.id).single();return c?{id:r.id,email:r.email,name:r.user_metadata?.name||"",role:r.user_metadata?.role||"foreman"}:l}else return _i()},async updateRole(r,l){if(h){const{data:c,error:u}=await _.from("users").update({role:l}).eq("id",r).select().single();if(u)throw u;return c}else{const c=x(),u=c.users.find(s=>s.id===r);return u&&(u.role=l,I(c),_i()?.id===r&&pi(u)),u}},onAuthStateChange(r){if(h)return _.auth.onAuthStateChange(r);{const l=_i();return r(l?"SIGNED_IN":"SIGNED_OUT",{user:l}),{data:{subscription:{unsubscribe:()=>{}}}}}}},at={async getProjects(r=null,l=!1){if(h){if(!Ht()){const u=await cm(r);return l?u:u.filter(s=>s.status!=="archived")}const c=performance.now();try{let u=_.from("projects").select("*").order("created_at",{ascending:!1});r&&(u=u.eq("company_id",r)),l||(u=u.eq("status","active"));const{data:s,error:f}=await u,p=Math.round(performance.now()-c);if(ee.query("getProjects",{duration:p,rows:s?.length,company_id:r}),f){ee.error("database",{message:f.message,operation:"getProjects",company_id:r});const g=await cm(r);if(g.length>0)return g;throw f}return s?.length>0&&_h(s).catch(g=>console.error("Failed to cache projects:",g)),s}catch(u){throw ee.error("database",{message:u.message,operation:"getProjects",company_id:r}),u}}else{const c=x().projects;return l?c:c.filter(u=>u.status!=="archived")}},async getProjectsPaginated(r,{page:l=0,limit:c=25,status:u="active"}={}){if(h){const p=performance.now();try{let g=_.from("projects").select("*",{count:"exact"}).eq("company_id",r).order("created_at",{ascending:!1}).range(l*c,(l+1)*c-1);u!=="all"&&(g=g.eq("status",u));const{data:w,error:z,count:U}=await g,N=Math.round(performance.now()-p);if(ee.query("getProjectsPaginated",{duration:N,rows:w?.length,page:l,company_id:r}),z)throw z;return{projects:w||[],totalCount:U||0,hasMore:(l+1)*c<(U||0),page:l,limit:c}}catch(g){throw ee.error("database",{message:g.message,operation:"getProjectsPaginated",company_id:r}),g}}const s=x().projects.filter(p=>p.company_id===r&&(u==="all"||p.status===u)),f=l*c;return{projects:s.slice(f,f+c),totalCount:s.length,hasMore:f+c<s.length,page:l,limit:c}},async getProjectsWithSummary(r){if(h){const l=performance.now();try{const{data:c,error:u}=await _.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            pending_tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",r).eq("status","active").eq("pending_tickets.status","pending").order("created_at",{ascending:!1}),s=Math.round(performance.now()-l);if(ee.query("getProjectsWithSummary",{duration:s,rows:c?.length,company_id:r}),u)throw u;return(c||[]).map(f=>({...f,areaCount:f.areas?.[0]?.count||0,ticketCount:f.tickets?.[0]?.count||0,pendingTicketCount:f.pending_tickets?.[0]?.count||0,reportCount:f.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,pending_tickets:void 0,daily_reports:void 0}))}catch(c){return ee.error("database",{message:c.message,operation:"getProjectsWithSummary",company_id:r}),this.getProjects(r)}}return x().projects.filter(l=>l.company_id===r&&l.status==="active")},async getProjectDashboardSummary(r){if(h){const l=performance.now();try{const{data:c,error:u}=await _.rpc("get_project_dashboard_summary",{p_company_id:r}),s=Math.round(performance.now()-l);if(ee.query("getProjectDashboardSummary",{duration:s,rows:c?.length,company_id:r}),u){if(u.message?.includes("function")||u.code==="42883")return this.getProjectsWithSummary(r);throw u}return(c||[]).map(f=>({id:f.project_id,name:f.project_name,status:f.project_status,job_number:f.project_number,address:f.project_address,pin:f.project_pin,created_at:f.created_at,start_date:f.start_date,end_date:f.end_date,contract_value:Number(f.contract_value)||0,work_type:f.work_type||"demolition",job_type:f.job_type||"standard",general_contractor:f.general_contractor||"",areaCount:Number(f.total_areas)||0,completedAreas:Number(f.completed_areas)||0,inProgressAreas:Number(f.in_progress_areas)||0,pendingAreas:Number(f.pending_areas)||0,ticketCount:Number(f.total_tickets)||0,pendingTicketCount:Number(f.pending_tickets)||0,submittedTicketCount:Number(f.submitted_tickets)||0,approvedTicketCount:Number(f.approved_tickets)||0,totalLaborHours:Number(f.total_labor_hours)||0,todayLaborHours:Number(f.today_labor_hours)||0,todayWorkerCount:Number(f.today_worker_count)||0,lastActivityAt:f.last_activity_at,dailyReportsThisWeek:Number(f.daily_reports_this_week)||0,corCount:Number(f.cor_count)||0,pendingCorCount:Number(f.pending_cor_count)||0,disposalLoadsToday:Number(f.disposal_loads_today)||0}))}catch(c){return ee.error("database",{message:c.message,operation:"getProjectDashboardSummary",company_id:r}),this.getProjectsWithSummary(r)}}return x().projects.filter(l=>l.company_id===r&&l.status==="active")},async getArchivedProjects(r){if(h){const{data:l,error:c}=await _.from("projects").select("*").eq("company_id",r).eq("status","archived").order("archived_at",{ascending:!1});if(c)throw c;return l}else return x().projects.filter(l=>l.status==="archived")},async getProjectCount(r){if(h){const{count:l,error:c}=await _.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",r).in("status",["active","archived"]);if(c)throw c;return l||0}else return x().projects.filter(c=>c.company_id===r&&c.status!=="deleted").length},async archiveProject(r){if(h){const{data:l,error:c}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",r).select().single();if(c)throw c;return l}else{const l=x(),c=l.projects.find(u=>u.id===r);return c&&(c.status="archived",c.archived_at=new Date().toISOString(),I(l)),c}},async getProjectStorageStats(r){if(!h)return{photoCount:0,estimatedMB:0};const{data:l,error:c}=await _.from("t_and_m_tickets").select("photos").eq("project_id",r);if(c)throw c;let u=0;const s=[];l?.forEach(p=>{p.photos&&Array.isArray(p.photos)&&(u+=p.photos.length,s.push(...p.photos))});const f=u*1.5;return{photoCount:u,estimatedMB:f,photoUrls:s}},async archiveProjectDeep(r,l){if(!h)return null;const{photoUrls:c}=await this.getProjectStorageStats(r);if(c.length>0){const f=c.map(p=>{try{const w=new URL(p).pathname.match(/\/tm-photos\/(.+)$/);return w?w[1]:null}catch{return null}}).filter(Boolean);if(f.length>0)for(let p=0;p<f.length;p+=100){const g=f.slice(p,p+100);await _.storage.from("tm-photos").remove(g)}}await _.from("t_and_m_tickets").update({photos:[]}).eq("project_id",r);const{data:u,error:s}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",r).select().single();if(s)throw s;return{...u,photosDeleted:c.length}},async restoreProject(r){if(h){const{data:l,error:c}=await _.from("projects").update({status:"active",archived_at:null}).eq("id",r).select().single();if(c)throw c;return l}else{const l=x(),c=l.projects.find(u=>u.id===r);return c&&(c.status="active",c.archived_at=null,I(l)),c}},async getProject(r){if(h){const{data:l,error:c}=await _.from("projects").select("*").eq("id",r).single();if(c)throw c;return l}else return x().projects.find(l=>l.id===r)},async createProject(r){if(h){const{data:l,error:c}=await _.from("projects").insert({...r,status:"active"}).select().single();if(c)throw console.error("Supabase createProject error:",c.message,c.details,c.hint),c;return l}else{const l=x(),c={...r,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return l.projects.push(c),I(l),c}},async getProjectByPin(r){if(h){const{data:l,error:c}=await _.from("projects").select("*").eq("pin",r).eq("status","active").single();return c?null:l}else return x().projects.find(c=>c.pin===r&&c.status==="active")||null},async getProjectByPinAndCompany(r,l){if(h){const{data:c,error:u}=await _.from("projects").select("*").eq("pin",r).eq("company_id",l).eq("status","active").single();return u?null:c}else return x().projects.find(u=>u.pin===r&&u.company_id===l&&u.status==="active")||null},async getProjectByPinSecure(r,l){if(h){const c=vh(),{data:u,error:s}=await _.rpc("validate_pin_and_create_session",{p_pin:r,p_company_code:l,p_device_id:c,p_ip_address:null});if(s)return{success:!1,rateLimited:!1,project:null,error:s.message};if(!u||u.length===0)return{success:!1,rateLimited:!1,project:null};const f=u[0];if(f.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(f.error_code==="INVALID_COMPANY"||f.error_code==="INVALID_PIN")return{success:!1,rateLimited:!1,project:null};if(!f.success||!f.project_id)return{success:!1,rateLimited:!1,project:null};Zu({token:f.session_token,projectId:f.project_id,companyId:f.company_id,projectName:f.project_name,companyName:f.company_name,createdAt:new Date().toISOString()});const p=qm(),{data:g}=await p.from("projects").select("*").eq("id",f.project_id).single();return{success:!0,rateLimited:!1,sessionToken:f.session_token,project:g||{id:f.project_id,name:f.project_name,company_id:f.company_id,status:"active"}}}else{const c=x(),s=(c.companies||[]).find(p=>p.code===l);if(!s)return{success:!1,rateLimited:!1,project:null};const f=c.projects.find(p=>p.pin===r&&p.company_id===s.id&&p.status==="active");if(f){const p=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;Zu({token:p,projectId:f.id,companyId:s.id,projectName:f.name,companyName:s.name,createdAt:new Date().toISOString()})}return{success:!!f,rateLimited:!1,project:f||null}}},async isPinAvailable(r,l=null){if(h){let c=_.from("projects").select("id").eq("pin",r);l&&(c=c.neq("id",l));const{data:u,error:s}=await c;if(s)throw s;return u.length===0}else return!x().projects.some(u=>u.pin===r&&u.id!==l)},async updateProjectPin(r,l){if(h){const{data:c,error:u}=await _.from("projects").update({pin:l}).eq("id",r).select().single();if(u)throw u;return c}else{const c=x(),u=c.projects.find(s=>s.id===r);return u&&(u.pin=l,I(c)),u}},async updateProject(r,l){if(h){const{data:c,error:u}=await _.from("projects").update(l).eq("id",r).select().single();if(u)throw console.error("Error updating project:",u),u;return c}else{const c=x(),u=c.projects.find(s=>s.id===r);return u&&(Object.assign(u,l),I(c)),u}},async deleteProject(r){if(h){const{error:l}=await _.from("projects").delete().eq("id",r);if(l)throw l}else{const l=x();l.projects=l.projects.filter(c=>c.id!==r),l.areas=l.areas.filter(c=>c.project_id!==r),I(l)}},async getAreas(r){if(h){if(!Ht())return um(r);const l=Et(),{data:c,error:u}=await l.from("areas").select("*").eq("project_id",r).order("sort_order",{ascending:!0});if(u){const s=await um(r);if(s.length>0)return s;throw u}return c?.length>0&&ph(c).catch(s=>console.error("Failed to cache areas:",s)),c}else return x().areas.filter(l=>l.project_id===r)},async createArea(r){if(h){const l=Et(),{data:c,error:u}=await l.from("areas").insert(r).select().single();if(u)throw u;return c}else{const l=x(),c={...r,id:crypto.randomUUID(),created_at:new Date().toISOString()};return l.areas.push(c),I(l),c}},async updateAreaStatus(r,l){if(h){if(!Ht()){const f=await ku(r,l);return await Bt(Ze.UPDATE_AREA_STATUS,{areaId:r,status:l}),f}const c=Et(),{data:u,error:s}=await c.from("areas").update({status:l}).eq("id",r).select().single();if(s){if(s.message?.includes("fetch")||s.message?.includes("network")){const f=await ku(r,l);return await Bt(Ze.UPDATE_AREA_STATUS,{areaId:r,status:l}),f}throw s}return u&&ku(r,l).catch(f=>console.error("Failed to update cached area:",f)),u}else{const c=x(),u=c.areas.find(s=>s.id===r);return u&&(u.status=l,u.updated_at=new Date().toISOString()),I(c),u}},async updateArea(r,l){if(h){const{data:c,error:u}=await _.from("areas").update(l).eq("id",r).select().single();if(u)throw u;return c}else{const c=x(),u=c.areas.find(s=>s.id===r);return u&&(Object.assign(u,l),u.updated_at=new Date().toISOString()),I(c),u}},async deleteArea(r){if(h){const{error:l}=await _.from("areas").delete().eq("id",r);if(l)throw l}else{const l=x();l.areas=l.areas.filter(c=>c.id!==r),I(l)}},subscribeToAreas(r,l){return h?_.channel(`areas:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToMessages(r,l){return h?_.channel(`messages:${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToMaterialRequests(r,l){return h?_.channel(`material_requests:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToDailyReports(r,l){return h?_.channel(`daily_reports:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToCrewCheckins(r,l){return h?_.channel(`crew_checkins:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToInjuryReports(r,l){return h?_.channel(`injury_reports:${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${r}`},l).subscribe():null},subscribeToTMTickets(r,l){return h?_.channel(`tm_tickets:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToCompanyActivity(r,l,c){if(!h||!l||l.length===0)return null;const u=_.channel(`company_activity:${r}`);return l.forEach(s=>{u.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${s}`},f=>c.onMessage?.(f)),u.on("postgres_changes",{event:"INSERT",schema:"public",table:"material_requests",filter:`project_id=eq.${s}`},f=>c.onMaterialRequest?.(f)),u.on("postgres_changes",{event:"INSERT",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${s}`},f=>c.onTMTicket?.(f)),u.on("postgres_changes",{event:"UPDATE",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${s}`},f=>c.onTMTicket?.(f)),u.on("postgres_changes",{event:"INSERT",schema:"public",table:"crew_checkins",filter:`project_id=eq.${s}`},f=>c.onCrewCheckin?.(f)),u.on("postgres_changes",{event:"UPDATE",schema:"public",table:"crew_checkins",filter:`project_id=eq.${s}`},f=>c.onCrewCheckin?.(f)),u.on("postgres_changes",{event:"UPDATE",schema:"public",table:"areas",filter:`project_id=eq.${s}`},f=>c.onAreaUpdate?.(f)),u.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${s}`},f=>c.onCORChange?.(f))}),u.on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${r}`},s=>c.onInjuryReport?.(s)),u.subscribe()},unsubscribe(r){r&&h&&_.removeChannel(r)},async getAssignedProjects(r){if(h){const{data:l,error:c}=await _.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",r);if(c)throw c;return l.map(u=>u.projects)}else{const l=x();return(l.assignments?.filter(u=>u.user_id===r)||[]).map(u=>l.projects.find(s=>s.id===u.project_id)).filter(Boolean)}},async assignUserToProject(r,l,c){if(h){const{data:u,error:s}=await _.from("project_assignments").insert({project_id:r,user_id:l,assigned_by:c}).select().single();if(s)throw s;return u}else{const u=x();u.assignments||(u.assignments=[]);const s={id:crypto.randomUUID(),project_id:r,user_id:l,assigned_by:c,assigned_at:new Date().toISOString()};return u.assignments.push(s),I(u),s}},async removeUserFromProject(r,l){if(h){const{error:c}=await _.from("project_assignments").delete().eq("project_id",r).eq("user_id",l);if(c)throw c}else{const c=x();c.assignments=c.assignments?.filter(u=>!(u.project_id===r&&u.user_id===l))||[],I(c)}},async getProjectAssignments(r){if(h){const{data:l,error:c}=await _.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",r);if(c)throw c;return l.map(u=>u.users)}else{const l=x();return(l.assignments?.filter(u=>u.project_id===r)||[]).map(u=>l.users.find(s=>s.id===u.user_id)).filter(Boolean)}},async getAllUsers(){if(h){const{data:r,error:l}=await _.from("users").select("*").order("name");if(l)throw l;return r}else return x().users||[]},async getForemen(){if(h){const{data:r,error:l}=await _.from("users").select("*").eq("role","foreman").order("name");if(l)throw l;return r}else return(x().users||[]).filter(r=>r.role==="foreman")},async logActivity(r,l,c,u,s,f){if(h){const{error:p}=await _.from("activity_log").insert({user_id:r,project_id:l,area_id:c,action:u,old_value:s,new_value:f});p&&console.error("Error logging activity:",p)}},async getProjectActivity(r,l=50){if(h){const{data:c,error:u}=await _.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",r).order("created_at",{ascending:!1}).limit(l);if(u)throw u;return c}return[]},async getMaterialsEquipment(r){if(h){const{data:l,error:c}=await _.from("materials_equipment").select("*").eq("company_id",r).eq("active",!0).order("category").order("name");if(c)throw c;return l}return[]},async getMaterialsEquipmentByCategory(r,l){if(h){const{data:c,error:u}=await _.from("materials_equipment").select("*").eq("company_id",r).eq("category",l).eq("active",!0).order("name");if(u)throw u;return c}return[]},async getAllMaterialsEquipment(r){if(h){const{data:l,error:c}=await _.from("materials_equipment").select("*").eq("company_id",r).order("category").order("name");if(c)throw c;return l}return[]},async createMaterialEquipment(r){if(h){const{data:l,error:c}=await _.from("materials_equipment").insert(r).select().single();if(c)throw c;return l}return null},async updateMaterialEquipment(r,l){if(h){const{data:c,error:u}=await _.from("materials_equipment").update(l).eq("id",r).select().single();if(u)throw u;return c}return null},async deleteMaterialEquipment(r){if(h){const{error:l}=await _.from("materials_equipment").update({active:!1}).eq("id",r);if(l)throw l}},async getLaborCategories(r){if(h){const{data:l,error:c}=await _.from("labor_categories").select("*").eq("company_id",r).eq("active",!0).order("sort_order").order("name");if(c)throw c;return l||[]}return[]},async createLaborCategory(r,l,c=0){if(h){const{data:u,error:s}=await _.from("labor_categories").insert({company_id:r,name:l,sort_order:c}).select().single();if(s)throw s;return u}return null},async updateLaborCategory(r,l){if(h){const{data:c,error:u}=await _.from("labor_categories").update(l).eq("id",r).select().single();if(u)throw u;return c}return null},async deleteLaborCategory(r){if(h){const{error:l}=await _.from("labor_categories").update({active:!1}).eq("id",r);if(l)throw l}},async getLaborClasses(r){if(h){const{data:l,error:c}=await _.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",r).eq("active",!0).order("sort_order").order("name");if(c)throw c;return l||[]}return[]},async getLaborClassesWithCategories(r){if(h){const[l,c]=await Promise.all([_.from("labor_categories").select("*").eq("company_id",r).eq("active",!0).order("sort_order").order("name"),_.from("labor_classes").select("*").eq("company_id",r).eq("active",!0).order("sort_order").order("name")]);if(l.error)throw l.error;if(c.error)throw c.error;return{categories:l.data||[],classes:c.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(r){if(h){const{data:l,error:c}=await _.rpc("get_labor_classes_for_field",{p_company_id:r});if(c){console.error("Error loading field labor classes:",c);const[f,p]=await Promise.all([_.from("labor_categories").select("id, name").eq("company_id",r).eq("active",!0).order("name"),_.from("labor_classes").select("id, name, category_id").eq("company_id",r).eq("active",!0).order("name")]);return{categories:f.data||[],classes:p.data||[]}}const u=new Map,s=[];for(const f of l||[])f.category_id&&f.category_name&&!u.has(f.category_id)&&u.set(f.category_id,{id:f.category_id,name:f.category_name}),s.push({id:f.id,name:f.name,category_id:f.category_id});return{categories:Array.from(u.values()),classes:s}}return{categories:[],classes:[]}},async createLaborClass(r,l,c,u=0){if(h){const{data:s,error:f}=await _.from("labor_classes").insert({company_id:r,category_id:l,name:c,sort_order:u}).select().single();if(f)throw f;return s}return null},async updateLaborClass(r,l){if(h){const{data:c,error:u}=await _.from("labor_classes").update(l).eq("id",r).select().single();if(u)throw u;return c}return null},async deleteLaborClass(r){if(h){const{error:l}=await _.from("labor_classes").update({active:!1}).eq("id",r);if(l)throw l}},async getLaborClassRates(r){if(h){const{data:l,error:c}=await _.from("labor_class_rates").select("*").eq("labor_class_id",r);if(c)throw c;return l||[]}return[]},async getAllLaborClassRates(r){if(h){const{data:l,error:c}=await _.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",r).eq("active",!0);if(c)throw c;return l||[]}return[]},async saveLaborClassRates(r,l){if(h){const c=l.map(s=>({...s,labor_class_id:r})),{error:u}=await _.from("labor_class_rates").upsert(c,{onConflict:"labor_class_id,work_type,job_type"});if(u)throw u}},async getLaborClassRate(r,l,c){if(h){const{data:u,error:s}=await _.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",r).eq("work_type",l).eq("job_type",c).single();if(s&&s.code!=="PGRST116")throw s;return u||null}return null},async getTMTickets(r){if(h){const l=performance.now(),c=Et();try{const{data:u,error:s}=await c.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `).eq("project_id",r).order("created_at",{ascending:!1}),f=Math.round(performance.now()-l);if(ee.query("getTMTickets",{duration:f,rows:u?.length,project_id:r}),s)throw s;return u}catch(u){throw ee.error("database",{message:u.message,operation:"getTMTickets",project_id:r}),u}}return[]},async getTMTicketsPaginated(r,{page:l=0,limit:c=25,status:u=null}={}){if(h){const s=performance.now(),f=Et();try{let p=f.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `,{count:"exact"}).eq("project_id",r).order("created_at",{ascending:!1}).range(l*c,(l+1)*c-1);u&&(p=p.eq("status",u));const{data:g,error:w,count:z}=await p,U=Math.round(performance.now()-s);if(ee.query("getTMTicketsPaginated",{duration:U,rows:g?.length,page:l,project_id:r}),w)throw w;return{tickets:g||[],totalCount:z||0,hasMore:(l+1)*c<(z||0),page:l,limit:c}}catch(p){throw ee.error("database",{message:p.message,operation:"getTMTicketsPaginated",project_id:r}),p}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(r){if(h){const{data:l,error:c}=await _.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",r).not("ce_pco_number","is",null).neq("ce_pco_number","");if(c)throw c;const u={};let s=0,f=0;return l?.forEach(p=>{const g=p.ce_pco_number;if(u[g]||(u[g]={approved:0,pending:0,count:0}),u[g].count++,p.status==="approved"||p.status==="billed"){const w=parseFloat(p.change_order_value)||0;u[g].approved+=w,s+=w}else p.status==="pending"&&f++}),{changeOrders:u,totalApprovedValue:s,pendingCount:f}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(r,l){if(h){const{data:c,error:u}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",r).eq("status",l).order("created_at",{ascending:!1});if(u)throw u;return c}return[]},async getCORTickets(r){if(h){const{data:l,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",r).order("work_date",{ascending:!0});if(c)throw c;return l||[]}return[]},async createTMTicket(r){if(h){if(!Ht()){const u={id:jt(),project_id:r.project_id,work_date:r.work_date,ce_pco_number:r.ce_pco_number||null,assigned_cor_id:r.assigned_cor_id||null,notes:r.notes,photos:r.photos||[],status:"pending_sync",created_by_name:r.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await om(u),await Bt(Ze.CREATE_TM_TICKET,{ticket:u,workers:r._workers||[],items:r._items||[]}),u}const{data:l,error:c}=await _.from("t_and_m_tickets").insert({project_id:r.project_id,work_date:r.work_date,ce_pco_number:r.ce_pco_number||null,assigned_cor_id:r.assigned_cor_id||null,notes:r.notes,photos:r.photos||[],status:"pending",created_by_name:r.created_by_name||"Field User"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u={id:jt(),...r,status:"pending_sync",_offline:!0};return await om(u),await Bt(Ze.CREATE_TM_TICKET,{ticket:u,workers:r._workers||[],items:r._items||[]}),u}throw c}return l}return null},async addTMWorkers(r,l){if(h){const c=l.map(s=>({ticket_id:r,name:s.name,hours:s.hours,overtime_hours:s.overtime_hours||0,time_started:s.time_started||null,time_ended:s.time_ended||null,role:s.role||"Laborer"})),{error:u}=await _.from("t_and_m_workers").insert(c);if(u)throw u}},async addTMItems(r,l){if(h){const c=l.map(s=>({ticket_id:r,material_equipment_id:s.material_equipment_id||null,custom_name:s.custom_name||null,custom_category:s.custom_category||null,quantity:s.quantity})),{error:u}=await _.from("t_and_m_items").insert(c);if(u)throw u}},async getPreviousTicketCrew(r,l){if(!h)return null;const{data:c,error:u}=await _.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",r).lt("work_date",l).order("work_date",{ascending:!1}).limit(1).single();if(u||!c)return null;const s=c.t_and_m_workers||[],f=s.filter(w=>["Foreman","General Foreman","Superintendent"].includes(w.role)).map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||"",role:w.role})),p=s.filter(w=>w.role==="Operator").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""})),g=s.filter(w=>w.role==="Laborer").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""}));return{workDate:c.work_date,supervision:f.length>0?f:null,operators:p.length>0?p:null,laborers:g.length>0?g:null,totalWorkers:s.length}},async updateTMTicketStatus(r,l){if(h){const{data:c,error:u}=await _.from("t_and_m_tickets").update({status:l}).eq("id",r).select().single();if(u)throw u;return c}return null},async approveTMTicket(r,l,c,u=null){if(h){const s={status:"approved",approved_by_user_id:l,approved_by_name:c,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};u!==null&&(s.change_order_value=parseFloat(u)||0);const{data:f,error:p}=await _.from("t_and_m_tickets").update(s).eq("id",r).select().single();if(p)throw p;return f}return null},async rejectTMTicket(r,l,c,u=""){if(h){const{data:s,error:f}=await _.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:l,rejected_by_name:c,rejected_at:new Date().toISOString(),rejection_reason:u,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",r).select().single();if(f)throw f;return s}return null},canApproveTickets(r){return["owner","admin","manager"].includes(r)},async updateTMTicketPhotos(r,l){if(h){const{data:c,error:u}=await _.from("t_and_m_tickets").update({photos:l}).eq("id",r).select().single();if(u)throw u;return c}return null},async saveTMClientSignature(r,l){if(h){const{data:c,error:u}=await _.from("t_and_m_tickets").update({client_signature_data:l.signature,client_signature_name:l.signerName,client_signature_title:l.signerTitle,client_signature_company:l.signerCompany,client_signature_date:l.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",r).select().single();if(u)throw u;return c}return null},async deleteTMTicket(r){if(h){const{error:l}=await _.from("t_and_m_tickets").delete().eq("id",r);if(l)throw l}},async isTicketEditable(r){if(!r?.assigned_cor_id)return{editable:!0};if(h)try{const{data:l,error:c}=await _.from("change_orders").select("id, status, cor_number").eq("id",r.assigned_cor_id).single();if(c||!l)return{editable:!0};const s=["draft","pending_approval"].includes(l.status);return{editable:s,lockedBy:s?null:l,reason:s?null:`This ticket is linked to ${l.cor_number} which has been ${l.status==="approved"?"approved":l.status}`}}catch(l){return console.error("Error checking ticket editability:",l),{editable:!0}}return{editable:!0}},async getCompanyByCode(r){if(h){const{data:l,error:c}=await _.from("companies").select("*").eq("code",r).single();return c?null:l}return null},async getCompany(r){if(h){const{data:l,error:c}=await _.from("companies").select("*").eq("id",r).single();if(c)throw c;return l}return null},async getUserCompanies(r){if(h){const{data:l,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",r).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching user companies:",c),[]):l.map(u=>({id:u.companies.id,name:u.companies.name,code:u.companies.code,access_level:u.access_level}))}return[]},async getUserPendingMemberships(r){if(h){const{count:l,error:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",r).eq("status","pending");return c?(console.error("Error fetching pending memberships:",c),0):l||0}return 0},async getCompanyMemberships(r){if(h){const{data:l,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",r).order("created_at",{ascending:!1});return c?(console.error("Error fetching company memberships:",c),[]):l||[]}return[]},async approveMembership(r,l){if(h){const{error:c}=await _.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:l}).eq("id",r);if(c)throw c}},async approveMembershipWithRole(r,l,c="member"){if(h){const{error:u}=await _.rpc("approve_membership_with_role",{membership_id:r,approved_by_user:l,new_access_level:c});if(u)throw u}},async rejectMembership(r){if(h){const{error:l}=await _.from("user_companies").delete().eq("id",r);if(l)throw l}},async removeMember(r,l){if(h){const{error:c}=await _.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:l}).eq("id",r);if(c)throw c}},async getProjectTeam(r){if(h){const{data:l,error:c}=await _.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",r).order("assigned_at",{ascending:!0});return c?(console.error("Error fetching project team:",c),[]):l||[]}return[]},async getCompanyMembers(r){if(h){const{data:l,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",r).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching company members:",c),[]):l||[]}return[]},async addProjectMember(r,l,c,u){if(h){const{data:s,error:f}=await _.from("project_users").insert({project_id:r,user_id:l,project_role:c,assigned_by:u}).select().single();if(f)throw f;return s}return null},async updateProjectMemberRole(r,l,c){if(h){const{error:u}=await _.from("project_users").update({project_role:c}).eq("project_id",r).eq("user_id",l);if(u)throw u}},async removeProjectMember(r,l){if(h){const{error:c}=await _.from("project_users").delete().eq("project_id",r).eq("user_id",l);if(c)throw c}},async updateMemberAccessLevel(r,l){if(h){const{error:c}=await _.from("user_companies").update({access_level:l}).eq("id",r);if(c)throw c}},async updateMemberCompanyRole(r,l){if(h){const{error:c}=await _.from("user_companies").update({company_role:l}).eq("id",r);if(c)throw c}},async repairLegacyUser(r,l,c="member"){if(!h||!r||!l)return!1;try{const{data:u,error:s}=await _.rpc("repair_legacy_user",{p_user_id:r,p_company_id:l,p_role:c});return s?(console.error("RPC repair_legacy_user failed:",s),!1):u===!0}catch(u){return console.error("Error repairing legacy user:",u),!1}},async isLegacyUser(r){if(!h)return!1;try{const{data:l}=await _.from("users").select("company_id, role").eq("id",r).single();if(!l?.company_id)return!1;const{count:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",r);return c===0}catch(l){return console.error("Error checking legacy user:",l),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(r,l){if(!h)return[];const c=performance.now();try{const{data:u,error:s}=await _.from("disposal_loads").select("*").eq("project_id",r).eq("work_date",l).order("created_at",{ascending:!1}),f=Math.round(performance.now()-c);if(ee.query("getDisposalLoads",{duration:f,rows:u?.length,project_id:r}),s)throw s;return u||[]}catch(u){throw ee.error("database",{message:u.message,operation:"getDisposalLoads",project_id:r}),u}},async getDisposalLoadsHistory(r,l=14){if(!h)return[];const c=performance.now();try{const u=new Date,s=new Date;s.setDate(s.getDate()-l);const{data:f,error:p}=await _.from("disposal_loads").select("*").eq("project_id",r).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",u.toISOString().split("T")[0]).order("work_date",{ascending:!1}),g=Math.round(performance.now()-c);if(ee.query("getDisposalLoadsHistory",{duration:g,rows:f?.length,project_id:r}),p)throw p;return(f||[]).map(w=>({...w,load_date:w.work_date}))}catch(u){throw ee.error("database",{message:u.message,operation:"getDisposalLoadsHistory",project_id:r}),u}},async addDisposalLoad(r,l,c,u,s,f=null){if(!h)return null;const{data:p,error:g}=await _.from("disposal_loads").insert({project_id:r,user_id:l,work_date:c,load_type:u,load_count:s,notes:f}).select().single();if(g)throw ee.error("database",{message:g.message,operation:"addDisposalLoad",project_id:r}),g;return p},async updateDisposalLoad(r,l,c,u=null){if(!h)return null;const{data:s,error:f}=await _.from("disposal_loads").update({load_type:l,load_count:c,notes:u}).eq("id",r).select().single();if(f)throw ee.error("database",{message:f.message,operation:"updateDisposalLoad"}),f;return s},async deleteDisposalLoad(r){if(!h)return!1;const{error:l}=await _.from("disposal_loads").delete().eq("id",r);if(l)throw ee.error("database",{message:l.message,operation:"deleteDisposalLoad"}),l;return!0},async getDisposalSummary(r,l=null,c=null){if(!h)return[];const u=performance.now();try{const{data:s,error:f}=await _.rpc("get_disposal_summary",{p_project_id:r,p_start_date:l,p_end_date:c}),p=Math.round(performance.now()-u);if(ee.query("getDisposalSummary",{duration:p,rows:s?.length,project_id:r}),f)throw f;return s||[]}catch(s){return ee.error("database",{message:s.message,operation:"getDisposalSummary",project_id:r}),this.getDisposalSummaryFallback(r,l,c)}},async getDisposalSummaryFallback(r,l,c){let u=_.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",r);l&&(u=u.gte("work_date",l)),c&&(u=u.lte("work_date",c));const{data:s,error:f}=await u;if(f)throw f;const p={};return s?.forEach(g=>{p[g.load_type]||(p[g.load_type]={load_type:g.load_type,total_loads:0,days:new Set}),p[g.load_type].total_loads+=g.load_count,p[g.load_type].days.add(g.work_date)}),Object.values(p).map(g=>({load_type:g.load_type,total_loads:g.total_loads,days_with_activity:g.days.size}))},async getWeeklyDisposalSummary(r,l=4){if(!h)return[];const c=new Date,u=new Date;u.setDate(u.getDate()-l*7);const{data:s,error:f}=await _.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",r).gte("work_date",u.toISOString().split("T")[0]).lte("work_date",c.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(f)throw f;const p={};return s?.forEach(g=>{const w=new Date(g.work_date),z=new Date(w);z.setDate(w.getDate()-w.getDay());const U=z.toISOString().split("T")[0];p[U]||(p[U]={week:U,concrete:0,trash:0,metals:0,hazardous_waste:0}),p[U][g.load_type]+=g.load_count}),Object.values(p).sort((g,w)=>g.week.localeCompare(w.week))},async uploadPhoto(r,l,c,u){if(!h)return null;const s=performance.now(),f=u.size||0,p=Date.now(),g=new Uint8Array(6);crypto.getRandomValues(g);const w=Array.from(g,G=>G.toString(36)).join(""),z=u.name?.split(".").pop()||"jpg",U=`${p}-${w}.${z}`,N=`${r}/${l}/${c}/${U}`;try{const{data:G,error:Z}=await _.storage.from("tm-photos").upload(N,u,{cacheControl:"3600",upsert:!1}),V=Math.round(performance.now()-s);if(ee.storage("upload",{company_id:r,project_id:l,size:f,duration:V,success:!Z}),Z)throw Z;const{data:H}=_.storage.from("tm-photos").getPublicUrl(N);return H.publicUrl}catch(G){throw ee.error("storage",{message:G.message,operation:"uploadPhoto",company_id:r,project_id:l}),G}},async uploadPhotoBase64(r,l,c,u,s="photo.jpg"){if(!h)return null;const p=await(await fetch(u)).blob(),g=Date.now(),w=new Uint8Array(6);crypto.getRandomValues(w);const z=Array.from(w,ie=>ie.toString(36)).join(""),U=s.split(".").pop()||"jpg",N=`${g}-${z}.${U}`,G=`${r}/${l}/${c}/${N}`,{data:Z,error:V}=await _.storage.from("tm-photos").upload(G,p,{cacheControl:"3600",upsert:!1,contentType:p.type});if(V)throw V;const{data:H}=_.storage.from("tm-photos").getPublicUrl(G);return H.publicUrl},async deletePhoto(r){if(!h)return;const c=new URL(r).pathname.match(/\/tm-photos\/(.+)$/);if(!c)return;const u=c[1],{error:s}=await _.storage.from("tm-photos").remove([u]);if(s)throw s},async verifyPhotoAccessible(r){if(!h||!r)return{accessible:!1,error:"Invalid URL"};try{const l=await fetch(r,{method:"HEAD"});return{accessible:l.ok,status:l.status,error:l.ok?null:`HTTP ${l.status}`}}catch(l){return{accessible:!1,error:l.message||"Network error"}}},async verifyTicketPhotos(r){if(!h)return{verified:!1,issues:[]};try{const{data:l,error:c}=await _.from("t_and_m_tickets").select("photos").eq("id",r).single();if(c)throw c;if(!l?.photos||l.photos.length===0)return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",r),{verified:!0,status:"empty",issues:[]};const u=[];for(const f of l.photos){const p=await this.verifyPhotoAccessible(f);p.accessible||u.push({url:f,error:p.error})}const s=u.length===0?"verified":"issues";return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:s,photos_issue_count:u.length}).eq("id",r),{verified:u.length===0,status:s,totalPhotos:l.photos.length,issues:u}}catch(l){return console.error("Error verifying ticket photos:",l),{verified:!1,error:l.message,issues:[]}}},async queuePhotoUpload(r,l,c,u){if(!h)return null;const{data:s,error:f}=await _.from("photo_upload_queue").insert({ticket_id:r,temp_id:l,file_name:c,file_size_bytes:u,status:"pending"}).select().single();return f?(console.error("Error queueing photo upload:",f),null):s},async confirmQueuedUpload(r,l,c){if(!h)return!1;const{data:u,error:s}=await _.rpc("confirm_photo_upload",{p_queue_id:r,p_uploaded_url:l,p_storage_path:c});return s?(console.error("Error confirming photo upload:",s),!1):u===!0},async markQueuedUploadFailed(r,l){if(!h)return!1;const{data:c,error:u}=await _.rpc("mark_photo_upload_failed",{p_queue_id:r,p_error:l});return u?(console.error("Error marking photo upload failed:",u),!1):c===!0},async getPendingPhotoUploads(r){if(!h)return[];const{data:l,error:c}=await _.rpc("get_pending_photo_uploads",{p_ticket_id:r});return c?(console.error("Error getting pending photo uploads:",c),[]):l||[]},async logPhotoOperation(r,l,c={}){if(h)try{await _.from("photo_audit_log").insert({ticket_id:r,cor_id:c.corId||null,operation:l,photo_url:c.photoUrl||null,storage_path:c.storagePath||null,details:c.metadata?c.metadata:null,error_message:c.error||null,triggered_by:c.triggeredBy||"system"})}catch(u){console.error("Error logging photo operation:",u)}},async saveExportSnapshot(r,l,c={}){if(!h)return null;const{exportType:u="pdf",exportReason:s=null,clientEmail:f=null,clientName:p=null}=c;try{const{data:g,error:w}=await _.from("cor_export_snapshots").insert({cor_id:r,export_type:u,export_reason:s,cor_data:l.cor_data,tickets_data:l.tickets_data,photos_manifest:l.photos_manifest,totals_snapshot:l.totals_snapshot,checksum:l.checksum,client_email:f,client_name:p}).select().single();if(w)throw w;return g}catch(g){return console.error("Error saving export snapshot:",g),null}},async getExportSnapshots(r){if(!h)return[];const{data:l,error:c}=await _.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",r).order("exported_at",{ascending:!1});return c?(console.error("Error fetching export snapshots:",c),[]):l||[]},async getExportSnapshot(r){if(!h)return null;const{data:l,error:c}=await _.from("cor_export_snapshots").select("*").eq("id",r).single();return c?(console.error("Error fetching export snapshot:",c),null):l},async requestCORExport(r,l,c={}){if(!h)return null;try{const u=await _.auth.getUser(),{data:s,error:f}=await _.rpc("request_cor_export",{p_cor_id:r,p_idempotency_key:l,p_options:c,p_requested_by:u?.data?.user?.id||null});if(f)throw f;return s?.[0]||null}catch(u){throw ee.error("database",{message:u.message,operation:"requestCORExport",extra:{corId:r}}),u}},async getExportJob(r){if(!h)return null;const{data:l,error:c}=await _.from("cor_export_jobs").select("*").eq("id",r).single();return c?(console.error("Error fetching export job:",c),null):l},async getExportJobs(r,l=10){if(!h)return[];const{data:c,error:u}=await _.from("cor_export_jobs").select("*").eq("cor_id",r).order("created_at",{ascending:!1}).limit(l);return u?(console.error("Error fetching export jobs:",u),[]):c||[]},async updateExportJobStatus(r,l,c={}){if(!h)return null;try{const{data:u,error:s}=await _.rpc("update_export_job_status",{p_job_id:r,p_status:l,p_snapshot_id:c.snapshotId||null,p_pdf_url:c.pdfUrl||null,p_error:c.error||null,p_error_details:c.errorDetails||null,p_metrics:c.metrics||null});if(s)throw s;return u}catch(u){throw ee.error("database",{message:u.message,operation:"updateExportJobStatus",extra:{jobId:r,status:l}}),u}},async getCurrentCORSnapshot(r){if(!h)return null;const{data:l}=await _.from("change_orders").select("version, last_snapshot_version").eq("id",r).single();if(!l||l.version!==l.last_snapshot_version)return null;const{data:c}=await _.from("cor_export_snapshots").select("*").eq("cor_id",r).eq("is_current",!0).single();return c||null},async saveCORSnapshot(r,l){if(!h)return null;try{await _.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",r.corId);const c=await _.auth.getUser(),{data:u,error:s}=await _.from("cor_export_snapshots").insert({id:r.snapshotId,cor_id:r.corId,job_id:l,cor_version:r.corVersion,cor_data:r.corData,tickets_data:r.ticketsData,photos_manifest:r.photoManifest,totals_snapshot:r.totals,checksum:r.checksum,is_current:!0,exported_by:c?.data?.user?.id||null}).select().single();if(s)throw s;return await _.from("change_orders").update({last_snapshot_version:r.corVersion}).eq("id",r.corId),u}catch(c){throw ee.error("database",{message:c.message,operation:"saveCORSnapshot",extra:{corId:r.corId}}),c}},async updateCORAggregatedStats(r){if(h)try{await _.rpc("update_cor_aggregated_stats",{p_cor_id:r})}catch(l){console.error("Error updating COR aggregated stats:",l)}},async getCrewCheckin(r,l=null){if(!h)return null;const c=l||new Date().toISOString().split("T")[0],u=Et(),{data:s,error:f}=await u.from("crew_checkins").select("*").eq("project_id",r).eq("check_in_date",c).single();return f&&f.code,s},async saveCrewCheckin(r,l,c=null,u=null){if(!h)return null;const s=u||new Date().toISOString().split("T")[0];if(!Ht()){const w={id:jt(),project_id:r,check_in_date:s,workers:l,created_by:c,updated_at:new Date().toISOString(),_offline:!0};return await Lu(w),await Bt(Ze.SAVE_CREW_CHECKIN,{projectId:r,workers:l,checkInDate:s}),w}const f=Et(),{data:p,error:g}=await f.from("crew_checkins").upsert({project_id:r,check_in_date:s,workers:l,created_by:c,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(g){if(g.message?.includes("fetch")||g.message?.includes("network")){const w={id:jt(),project_id:r,check_in_date:s,workers:l,_offline:!0};return await Lu(w),await Bt(Ze.SAVE_CREW_CHECKIN,{projectId:r,workers:l,checkInDate:s}),w}throw console.error("Error saving crew checkin:",g),g}return p&&Lu(p).catch(w=>console.error("Failed to cache checkin:",w)),p},async addCrewMember(r,l,c=null){if(!h)return null;const u=await this.getCrewCheckin(r),s=u?.workers||[];return s.find(f=>f.name.toLowerCase()===l.name.toLowerCase())?u:(s.push(l),await this.saveCrewCheckin(r,s,c))},async removeCrewMember(r,l){if(!h)return null;const c=await this.getCrewCheckin(r);if(!c)return null;const u=c.workers.filter(s=>s.name.toLowerCase()!==l.toLowerCase());return await this.saveCrewCheckin(r,u,c.created_by)},async getCrewCheckinHistory(r,l=30){if(!h)return[];const{data:c,error:u}=await _.from("crew_checkins").select("*").eq("project_id",r).order("check_in_date",{ascending:!1}).limit(l);return u?(console.error("Error fetching crew history:",u),[]):c||[]},async getLaborRates(r,l=null,c=null){if(!h)return[];let u=_.from("labor_rates").select("*").eq("company_id",r);l&&(u=u.eq("work_type",l)),c&&(u=u.eq("job_type",c));const{data:s,error:f}=await u;return f?(console.error("Error fetching labor rates:",f),[]):s||[]},async calculateManDayCosts(r,l,c,u){if(!h)return{totalCost:0,totalManDays:0,breakdown:[]};const s=await this.getCrewCheckinHistory(r,365),f=await this.getLaborRates(l,c,u),p={};f.forEach(N=>{p[N.role.toLowerCase()]=parseFloat(N.regular_rate)||0});let g=0,w=0;const z={},U=[];return s.forEach(N=>{const G=N.workers||[];let Z=0;const V={};G.forEach(H=>{const ie=(H.role||"laborer").toLowerCase(),_e=p[ie]||0;V[ie]||(V[ie]={count:0,cost:0}),V[ie].count++,V[ie].cost+=_e,Z+=_e,z[ie]||(z[ie]={count:0,cost:0,rate:_e}),z[ie].count++,z[ie].cost+=_e}),g+=Z,w+=G.length,U.push({date:N.check_in_date,workers:G.length,cost:Z,breakdown:V})}),{totalCost:g,totalManDays:w,byRole:z,byDate:U,daysWorked:s.length}},async getDailyReport(r,l=null){if(!h)return null;const c=l||new Date().toISOString().split("T")[0],u=Et(),{data:s,error:f}=await u.from("daily_reports").select("*").eq("project_id",r).eq("report_date",c).single();return f&&f.code,s},async compileDailyReport(r,l=null){if(!h)return null;const c=l||new Date().toISOString().split("T")[0],u=Et(),s=await this.getCrewCheckin(r,c),{data:f}=await u.from("areas").select("*").eq("project_id",r),p=f?.filter(z=>z.status==="done"&&z.completed_at?.startsWith(c))||[],{data:g}=await u.from("t_and_m_tickets").select("*").eq("project_id",r).eq("work_date",c),w=g?.reduce((z,U)=>z+(U.photos?.length||0),0)||0;return{crew_count:s?.workers?.length||0,crew_list:s?.workers||[],tasks_completed:p.length,tasks_total:f?.length||0,completed_tasks:p.map(z=>({name:z.name,group:z.group_name})),tm_tickets_count:g?.length||0,photos_count:w}},async saveDailyReport(r,l,c=null){if(!h)return null;const u=c||new Date().toISOString().split("T")[0];if(!Ht()){const g={id:jt(),project_id:r,report_date:u,...l,updated_at:new Date().toISOString(),_offline:!0};return await Fn(g),g}const s=Et(),{data:f,error:p}=await s.from("daily_reports").upsert({project_id:r,report_date:u,...l,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(p){if(p.message?.includes("fetch")||p.message?.includes("network")){const g={id:jt(),project_id:r,report_date:u,...l,_offline:!0};return await Fn(g),g}throw console.error("Error saving daily report:",p),p}return f&&Fn(f).catch(g=>console.error("Failed to cache report:",g)),f},async submitDailyReport(r,l,c=null){if(!h)return null;const u=c||new Date().toISOString().split("T")[0];if(!Ht()){const g=await hh(r,u),w={id:jt(),project_id:r,report_date:u,...g||{},status:"pending_sync",submitted_by:l,submitted_at:new Date().toISOString(),_offline:!0};return await Fn(w),await Bt(Ze.SUBMIT_DAILY_REPORT,{projectId:r,reportData:g||{},submittedBy:l}),w}const s=await this.compileDailyReport(r,u),{data:f,error:p}=await _.from("daily_reports").upsert({project_id:r,report_date:u,...s,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:l,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(p){if(p.message?.includes("fetch")||p.message?.includes("network")){const g={id:jt(),project_id:r,report_date:u,...s,status:"pending_sync",submitted_by:l,_offline:!0};return await Fn(g),await Bt(Ze.SUBMIT_DAILY_REPORT,{projectId:r,reportData:s,submittedBy:l}),g}throw console.error("Error submitting daily report:",p),p}return f&&Fn(f).catch(g=>console.error("Failed to cache report:",g)),f},async getDailyReports(r,l=30){if(!h)return[];const{data:c,error:u}=await _.from("daily_reports").select("*").eq("project_id",r).order("report_date",{ascending:!1}).limit(l);return u?(console.error("Error fetching daily reports:",u),[]):c||[]},async sendMessage(r,l,c,u,s=null,f=null,p="general",g=null){if(!h)return null;if(!Ht()){const U={id:jt(),project_id:r,sender_type:c,sender_name:u,sender_user_id:s,message:l,photo_url:f,message_type:p,parent_message_id:g,created_at:new Date().toISOString(),_offline:!0};return await sm(U),await Bt(Ze.SEND_MESSAGE,{projectId:r,senderType:c,senderName:u,content:l}),U}const{data:w,error:z}=await _.from("messages").insert({project_id:r,sender_type:c,sender_name:u,sender_user_id:s,message:l,photo_url:f,message_type:p,parent_message_id:g}).select().single();if(z){if(z.message?.includes("fetch")||z.message?.includes("network")){const U={id:jt(),project_id:r,sender_type:c,sender_name:u,message:l,created_at:new Date().toISOString(),_offline:!0};return await sm(U),await Bt(Ze.SEND_MESSAGE,{projectId:r,senderType:c,senderName:u,content:l}),U}throw console.error("Error sending message:",z),z}return w},async getMessages(r,l=50){if(!h)return[];const c=Et(),{data:u,error:s}=await c.from("messages").select("*").eq("project_id",r).order("created_at",{ascending:!1}).limit(l);return s?[]:u||[]},async getUnreadCount(r,l){if(!h)return 0;const c=Et(),u=l==="field"?"office":"field",{count:s,error:f}=await c.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",r).eq("sender_type",u).eq("is_read",!1);return f?0:s||0},async markMessagesRead(r,l){if(!h)return;const c=Et(),u=l==="field"?"office":"field";await c.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",r).eq("sender_type",u).eq("is_read",!1)},async createMaterialRequest(r,l,c,u=null,s="normal",f=null){if(!h)return null;if(!Ht()){const w={id:jt(),project_id:r,items:l,requested_by:c,needed_by:u,priority:s,notes:f,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await Bt(Ze.CREATE_MATERIAL_REQUEST,{projectId:r,items:l,requestedBy:c,neededBy:u,priority:s,notes:f}),w}const{data:p,error:g}=await _.from("material_requests").insert({project_id:r,items:l,requested_by:c,needed_by:u,priority:s,notes:f}).select().single();if(g){if(g.message?.includes("fetch")||g.message?.includes("network")){const w={id:jt(),project_id:r,items:l,requested_by:c,status:"pending_sync",_offline:!0};return await Bt(Ze.CREATE_MATERIAL_REQUEST,{projectId:r,items:l,requestedBy:c,neededBy:u,priority:s,notes:f}),w}throw console.error("Error creating material request:",g),g}return p},async getMaterialRequests(r,l=null){if(!h)return[];let c=_.from("material_requests").select("*").eq("project_id",r).order("created_at",{ascending:!1});l&&(c=c.eq("status",l));const{data:u,error:s}=await c;return s?(console.error("Error fetching material requests:",s),[]):u||[]},async getPendingRequestsCount(r){if(!h)return 0;const{count:l,error:c}=await _.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",r).eq("status","pending");return c?0:l||0},async updateMaterialRequest(r,l,c,u=null,s=null){if(!h)return null;const f={status:l,responded_by:c,responded_at:new Date().toISOString(),response_notes:u,updated_at:new Date().toISOString()};s&&(f.expected_delivery=s),l==="delivered"&&(f.delivered_at=new Date().toISOString());const{data:p,error:g}=await _.from("material_requests").update(f).eq("id",r).select().single();if(g)throw console.error("Error updating material request:",g),g;return p},generateShareToken(){const r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l=new Uint8Array(12);return crypto.getRandomValues(l),Array.from(l,c=>r[c%r.length]).join("")},async createProjectShare(r,l,c,u=null){if(!h){const w=x();w.projectShares||(w.projectShares=[]);const z={id:crypto.randomUUID(),project_id:r,share_token:this.generateShareToken(),created_by:l,expires_at:u,is_active:!0,permissions:c,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return w.projectShares.push(z),I(w),z}const{data:s,error:f}=await _.rpc("generate_share_token");if(f)throw console.error("Error generating share token:",f),f;const{data:p,error:g}=await _.from("project_shares").insert({project_id:r,share_token:s,created_by:l,expires_at:u,permissions:c}).select().single();if(g)throw console.error("Error creating project share:",g),g;return p},async getShareByToken(r){if(!h){const u=x();if(!u.projectShares)return null;const s=u.projectShares.find(f=>f.share_token===r&&f.is_active&&(!f.expires_at||new Date(f.expires_at)>new Date));return s&&(s.view_count++,s.last_viewed_at=new Date().toISOString(),I(u)),s}const{data:l,error:c}=await _.from("project_shares").select("*, projects(*)").eq("share_token",r).eq("is_active",!0).single();return c?(console.error("Error fetching share by token:",c),null):l.expires_at&&new Date(l.expires_at)<new Date?null:(await _.rpc("increment_share_view_count",{token:r}),l)},async getProjectShares(r){if(!h){const u=x();return u.projectShares?u.projectShares.filter(s=>s.project_id===r):[]}const{data:l,error:c}=await _.from("project_shares").select("*, users(name, email)").eq("project_id",r).order("created_at",{ascending:!1});return c?(console.error("Error fetching project shares:",c),[]):l||[]},async updateProjectShare(r,l){if(!h){const s=x();if(!s.projectShares)return null;const f=s.projectShares.findIndex(p=>p.id===r);return f===-1?null:(s.projectShares[f]={...s.projectShares[f],...l,updated_at:new Date().toISOString()},I(s),s.projectShares[f])}const{data:c,error:u}=await _.from("project_shares").update(l).eq("id",r).select().single();if(u)throw console.error("Error updating project share:",u),u;return c},async revokeProjectShare(r){return this.updateProjectShare(r,{is_active:!1})},async deleteProjectShare(r){if(!h){const c=x();if(!c.projectShares)return;c.projectShares=c.projectShares.filter(u=>u.id!==r),I(c);return}const{error:l}=await _.from("project_shares").delete().eq("id",r);if(l)throw console.error("Error deleting project share:",l),l},async getPublicProjectData(r){const l=await this.getShareByToken(r);if(!l)return null;const c=l.project_id||l.projects?.id;if(!h){const f=x(),p=f.projects.find(N=>N.id===c);if(!p)return null;const g=f.areas.filter(N=>N.project_id===c),w=g.reduce((N,G)=>N+parseFloat(G.weight||0),0),z=g.filter(N=>N.status==="done").reduce((N,G)=>N+parseFloat(G.weight||0),0),U=w>0?Math.round(z/w*100):0;return{share:l,project:p,progress:U,areas:l.permissions.progress?g:[],photos:[],dailyReports:[],tmTickets:[]}}const u=l.projects||await this.getProject(c);if(!u)return null;const s={share:l,project:u,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(l.permissions.progress){s.areas=await this.getAreas(c);const f=s.areas.reduce((g,w)=>g+parseFloat(w.weight||0),0),p=s.areas.filter(g=>g.status==="done").reduce((g,w)=>g+parseFloat(w.weight||0),0);s.progress=f>0?Math.round(p/f*100):0}if(l.permissions.photos){const{data:f}=await _.from("t_and_m_tickets").select("photos, work_date").eq("project_id",c).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);s.photos=f?.flatMap(p=>(p.photos||[]).map(g=>({url:g,date:p.work_date})))||[]}if(l.permissions.daily_reports){const{data:f}=await _.from("daily_reports").select("*").eq("project_id",c).order("report_date",{ascending:!1}).limit(10);s.dailyReports=f||[]}return l.permissions.tm_tickets&&(s.tmTickets=await this.getTMTickets(c)),s},async createInjuryReport(r){if(!h){const u=x();u.injuryReports||(u.injuryReports=[]);const s={id:crypto.randomUUID(),...r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return u.injuryReports.push(s),I(u),s}const{data:l,error:c}=await _.from("injury_reports").insert(r).select().single();if(c)throw console.error("Error creating injury report:",c),c;return l},async getInjuryReports(r){if(!h){const u=x();return u.injuryReports?u.injuryReports.filter(s=>s.project_id===r).sort((s,f)=>new Date(f.incident_date)-new Date(s.incident_date)):[]}const{data:l,error:c}=await _.from("injury_reports").select("*").eq("project_id",r).order("incident_date",{ascending:!1});return c?(console.error("Error fetching injury reports:",c),[]):l||[]},async getCompanyInjuryReports(r,l=null){if(!h){const f=x();if(!f.injuryReports)return[];let p=f.injuryReports.filter(g=>g.company_id===r);return l&&(p=p.filter(g=>g.status===l)),p.sort((g,w)=>new Date(w.incident_date)-new Date(g.incident_date))}let c=_.from("injury_reports").select("*, projects(name)").eq("company_id",r).order("incident_date",{ascending:!1});l&&(c=c.eq("status",l));const{data:u,error:s}=await c;return s?(console.error("Error fetching company injury reports:",s),[]):u||[]},async getInjuryReport(r){if(!h){const u=x();return u.injuryReports?u.injuryReports.find(s=>s.id===r):null}const{data:l,error:c}=await _.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",r).single();return c?(console.error("Error fetching injury report:",c),null):l},async updateInjuryReport(r,l){if(!h){const s=x();if(!s.injuryReports)return null;const f=s.injuryReports.findIndex(p=>p.id===r);return f===-1?null:(s.injuryReports[f]={...s.injuryReports[f],...l,updated_at:new Date().toISOString()},I(s),s.injuryReports[f])}const{data:c,error:u}=await _.from("injury_reports").update(l).eq("id",r).select().single();if(u)throw console.error("Error updating injury report:",u),u;return c},async closeInjuryReport(r,l){return this.updateInjuryReport(r,{status:"closed",closed_at:new Date().toISOString(),closed_by:l})},async deleteInjuryReport(r){if(!h){const c=x();if(!c.injuryReports)return;c.injuryReports=c.injuryReports.filter(u=>u.id!==r),I(c);return}const{error:l}=await _.from("injury_reports").delete().eq("id",r);if(l)throw console.error("Error deleting injury report:",l),l},async getInjuryStatistics(r,l=null,c=null){if(!h){const f=x();if(!f.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let p=f.injuryReports.filter(g=>g.company_id===r);return l&&(p=p.filter(g=>new Date(g.incident_date)>=new Date(l))),c&&(p=p.filter(g=>new Date(g.incident_date)<=new Date(c))),{total_incidents:p.length,minor_injuries:p.filter(g=>g.injury_type==="minor").length,serious_injuries:p.filter(g=>g.injury_type==="serious").length,critical_injuries:p.filter(g=>g.injury_type==="critical").length,near_misses:p.filter(g=>g.injury_type==="near_miss").length,osha_recordable:p.filter(g=>g.osha_recordable).length,total_days_away:p.reduce((g,w)=>g+(w.days_away_from_work||0),0),total_restricted_days:p.reduce((g,w)=>g+(w.restricted_work_days||0),0)}}const{data:u,error:s}=await _.rpc("get_injury_statistics",{comp_id:r,start_date:l,end_date:c});return s?(console.error("Error fetching injury statistics:",s),null):u[0]||null},async addWitness(r,l){if(!h){const s=x();if(!s.injuryReports)return null;const f=s.injuryReports.findIndex(w=>w.id===r);if(f===-1)return null;const p=s.injuryReports[f],g=p.witnesses||[];return g.push(l),s.injuryReports[f]={...p,witnesses:g,updated_at:new Date().toISOString()},I(s),s.injuryReports[f]}const c=await this.getInjuryReport(r);if(!c)return null;const u=c.witnesses||[];return u.push(l),this.updateInjuryReport(r,{witnesses:u})},async removeWitness(r,l){if(!h){const s=x();if(!s.injuryReports)return null;const f=s.injuryReports.findIndex(w=>w.id===r);if(f===-1)return null;const p=s.injuryReports[f],g=p.witnesses||[];return g.splice(l,1),s.injuryReports[f]={...p,witnesses:g,updated_at:new Date().toISOString()},I(s),s.injuryReports[f]}const c=await this.getInjuryReport(r);if(!c)return null;const u=c.witnesses||[];return u.splice(l,1),this.updateInjuryReport(r,{witnesses:u})},async getCompanyUsers(r){if(h){const{data:l,error:c}=await _.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",r);return c?(console.error("Error fetching company users:",c),[]):l?.map(u=>({id:u.user_id,name:u.users?.name||u.users?.email,email:u.users?.email,role:u.role}))||[]}return[]},async getProjectNotificationPreferences(r){if(h){const{data:c,error:u}=await _.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",r);return u?(console.error("Error fetching notification preferences:",u),[]):c||[]}const l=x();return l.notificationPreferences?l.notificationPreferences.filter(c=>c.project_id===r):[]},async getUserNotificationPreferences(r){if(h){const{data:c,error:u}=await _.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",r);return u?(console.error("Error fetching user notification preferences:",u),[]):c||[]}const l=x();return l.notificationPreferences?l.notificationPreferences.filter(c=>c.user_id===r):[]},async setNotificationPreference(r,l,c){if(h){const{data:p,error:g}=await _.from("notification_preferences").upsert({project_id:r,user_id:l,notification_types:c,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(g)throw console.error("Error setting notification preference:",g),g;return p}const u=x();u.notificationPreferences||(u.notificationPreferences=[]);const s=u.notificationPreferences.findIndex(p=>p.project_id===r&&p.user_id===l),f={id:s>=0?u.notificationPreferences[s].id:crypto.randomUUID(),project_id:r,user_id:l,notification_types:c,created_at:s>=0?u.notificationPreferences[s].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s>=0?u.notificationPreferences[s]=f:u.notificationPreferences.push(f),I(u),f},async removeNotificationPreference(r,l){if(h){const{error:u}=await _.from("notification_preferences").delete().eq("project_id",r).eq("user_id",l);if(u)throw console.error("Error removing notification preference:",u),u;return!0}const c=x();return c.notificationPreferences&&(c.notificationPreferences=c.notificationPreferences.filter(u=>!(u.project_id===r&&u.user_id===l)),I(c)),!0},async setProjectNotificationPreferences(r,l){const c=[];for(const u of l)if(u.notificationTypes&&u.notificationTypes.length>0){const s=await this.setNotificationPreference(r,u.userId,u.notificationTypes);c.push(s)}else await this.removeNotificationPreference(r,u.userId);return c},async getNotificationPresets(r){if(h){const{data:c,error:u}=await _.from("notification_presets").select("*").eq("company_id",r).order("name");return u?(console.error("Error fetching notification presets:",u),[]):c||[]}const l=x();return l.notificationPresets?l.notificationPresets.filter(c=>c.company_id===r):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:r},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:r},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:r},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:r}]},async createNotificationPreset(r,l,c){if(h){const{data:f,error:p}=await _.from("notification_presets").insert({company_id:r,name:l,notification_types:c}).select().single();if(p)throw console.error("Error creating notification preset:",p),p;return f}const u=x();u.notificationPresets||(u.notificationPresets=[]);const s={id:crypto.randomUUID(),company_id:r,name:l,notification_types:c,created_at:new Date().toISOString()};return u.notificationPresets.push(s),I(u),s},async updateNotificationPreset(r,l,c){if(h){const{data:f,error:p}=await _.from("notification_presets").update({name:l,notification_types:c,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(p)throw console.error("Error updating notification preset:",p),p;return f}const u=x();if(!u.notificationPresets)return null;const s=u.notificationPresets.findIndex(f=>f.id===r);return s===-1?null:(u.notificationPresets[s]={...u.notificationPresets[s],name:l,notification_types:c,updated_at:new Date().toISOString()},I(u),u.notificationPresets[s])},async deleteNotificationPreset(r){if(h){const{error:c}=await _.from("notification_presets").delete().eq("id",r);if(c)throw console.error("Error deleting notification preset:",c),c;return!0}const l=x();return l.notificationPresets&&(l.notificationPresets=l.notificationPresets.filter(c=>c.id!==r),I(l)),!0},async getDumpSites(r){if(h){const{data:c,error:u}=await _.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",r).eq("active",!0).order("name");return u?(console.error("Error fetching dump sites:",u),[]):c||[]}return(x().dumpSites||[]).filter(c=>c.company_id===r&&c.active)},async createDumpSite(r,l,c="",u=""){if(h){const{data:p,error:g}=await _.from("dump_sites").insert({company_id:r,name:l,address:c,notes:u,active:!0}).select().single();if(g)throw console.error("Error creating dump site:",g),g;return p}const s=x();s.dumpSites||(s.dumpSites=[]);const f={id:crypto.randomUUID(),company_id:r,name:l,address:c,notes:u,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return s.dumpSites.push(f),I(s),f},async updateDumpSite(r,l){if(h){const{data:s,error:f}=await _.from("dump_sites").update({...l,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(f)throw console.error("Error updating dump site:",f),f;return s}const c=x();if(!c.dumpSites)return null;const u=c.dumpSites.findIndex(s=>s.id===r);return u===-1?null:(c.dumpSites[u]={...c.dumpSites[u],...l},I(c),c.dumpSites[u])},async deleteDumpSite(r){return this.updateDumpSite(r,{active:!1})},async setDumpSiteRate(r,l,c,u="load"){if(h){const{data:g}=await _.from("dump_site_rates").select("id").eq("dump_site_id",r).eq("waste_type",l).maybeSingle();if(g){const{data:w,error:z}=await _.from("dump_site_rates").update({estimated_cost_per_load:c,unit:u}).eq("id",g.id).select().single();if(z)throw console.error("Error updating dump site rate:",z),z;return w}else{const{data:w,error:z}=await _.from("dump_site_rates").insert({dump_site_id:r,waste_type:l,estimated_cost_per_load:c,unit:u}).select().single();if(z)throw console.error("Error inserting dump site rate:",z),z;return w}}const s=x();s.dumpSiteRates||(s.dumpSiteRates=[]);const f=s.dumpSiteRates.findIndex(g=>g.dump_site_id===r&&g.waste_type===l),p={id:f>=0?s.dumpSiteRates[f].id:crypto.randomUUID(),dump_site_id:r,waste_type:l,estimated_cost_per_load:c,unit:u,created_at:new Date().toISOString()};return f>=0?s.dumpSiteRates[f]=p:s.dumpSiteRates.push(p),I(s),p},async getDumpSiteRates(r){if(h){const{data:c,error:u}=await _.from("dump_site_rates").select("*").eq("dump_site_id",r);return u?(console.error("Error fetching dump site rates:",u),[]):c||[]}return(x().dumpSiteRates||[]).filter(c=>c.dump_site_id===r)},async getHaulOffs(r){if(h){const{data:c,error:u}=await _.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",r).order("work_date",{ascending:!1});return u?(console.error("Error fetching haul-offs:",u),[]):c||[]}return(x().haulOffs||[]).filter(c=>c.project_id===r).sort((c,u)=>new Date(u.work_date)-new Date(c.work_date))},async createHaulOff(r,l){const c={project_id:r,dump_site_id:l.dumpSiteId,waste_type:l.wasteType,loads:l.loads,hauling_company:l.haulingCompany||"",work_date:l.workDate,notes:l.notes||"",estimated_cost:l.estimatedCost||0,created_by:l.createdBy||""};if(h){const{data:f,error:p}=await _.from("haul_offs").insert(c).select().single();if(p)throw console.error("Error creating haul-off:",p),p;return f}const u=x();u.haulOffs||(u.haulOffs=[]);const s={...c,id:crypto.randomUUID(),created_at:new Date().toISOString()};return u.haulOffs.push(s),I(u),s},async calculateHaulOffCosts(r){const l=await this.getHaulOffs(r);let c=0,u=0;const s={},f=[],p={};l.forEach(w=>{const z=parseFloat(w.estimated_cost)||0,U=parseInt(w.loads)||0;c+=z,u+=U,s[w.waste_type]||(s[w.waste_type]={loads:0,cost:0}),s[w.waste_type].loads+=U,s[w.waste_type].cost+=z,p[w.work_date]||(p[w.work_date]={date:w.work_date,loads:0,cost:0}),p[w.work_date].loads+=U,p[w.work_date].cost+=z}),Object.values(p).sort((w,z)=>new Date(z.date)-new Date(w.date)).forEach(w=>f.push(w));const g=f.length;return{totalCost:c,totalLoads:u,byWasteType:s,byDate:f,daysWithHaulOff:g,avgDailyHaulOffCost:g>0?c/g:0}},subscribeToHaulOffs(r,l){return h?_.channel(`haul_offs:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${r}`},l).subscribe():null},async createCOR(r,l=0){if(h){let c=r.cor_number;l>0&&(c=await this.getNextCORNumber(r.project_id));const{data:u,error:s}=await _.from("change_orders").insert({company_id:r.company_id,project_id:r.project_id,area_id:r.area_id||null,cor_number:c,title:r.title,description:r.description||"",scope_of_work:r.scope_of_work,period_start:r.period_start,period_end:r.period_end,status:"draft",labor_markup_percent:r.labor_markup_percent??1500,materials_markup_percent:r.materials_markup_percent??1500,equipment_markup_percent:r.equipment_markup_percent??1500,subcontractors_markup_percent:r.subcontractors_markup_percent??500,liability_insurance_percent:r.liability_insurance_percent??144,bond_percent:r.bond_percent??100,license_fee_percent:r.license_fee_percent??10,created_by:r.created_by||null}).select().single();if((s?.code==="23505"||s?.code==="PGRST116"||s?.status===409||s?.message?.includes("duplicate")||s?.message?.includes("unique_cor_number"))&&l<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${l+1})`),this.createCOR(r,l+1);if(s)throw s;return u}return null},async updateCOR(r,l){if(h){const{data:c,error:u}=await _.from("change_orders").update({...l,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(u)throw u;return c}return null},async deleteCOR(r){if(h){const{error:l}=await _.from("change_orders").delete().eq("id",r);if(l)throw l}},async bulkUpdateCORGroup(r,l){if(h){const{error:c}=await _.from("change_orders").update({group_name:l,updated_at:new Date().toISOString()}).in("id",r);if(c)throw c.message?.includes("group_name")||c.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):c}},async getCORs(r,l={}){if(h){let c=_.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",r);l.status&&(c=c.eq("status",l.status)),l.area_id&&(c=c.eq("area_id",l.area_id)),l.date_start&&(c=c.gte("period_start",l.date_start)),l.date_end&&(c=c.lte("period_end",l.date_end)),c=c.order("created_at",{ascending:!1});const{data:u,error:s}=await c;if(s)throw s;return u}return[]},async getCORById(r){if(h){const{data:l,error:c}=await _.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",r).single();if(c)throw c;return l}return null},async getCORsByArea(r,l){if(h){const{data:c,error:u}=await _.from("change_orders").select("*").eq("project_id",r).eq("area_id",l).order("created_at",{ascending:!1});if(u)throw u;return c}return[]},async getAssignableCORs(r){if(h){const{data:l,error:c}=await _.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",r).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(c)throw c;return l||[]}return[]},async getNextCORNumber(r){if(h){const{data:l,error:c}=await _.from("change_orders").select("cor_number").eq("project_id",r);if(c)throw c;if(l&&l.length>0){let u=0;for(const s of l){const f=s.cor_number?.match(/COR #(\d+)/);if(f){const p=parseInt(f[1]);p>u&&(u=p)}}return`COR #${u+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(r,l){if(h){const c=Math.round(l.regular_hours*l.regular_rate),u=Math.round(l.overtime_hours*l.overtime_rate),s=c+u,{data:f,error:p}=await _.from("change_order_labor").insert({change_order_id:r,labor_class:l.labor_class,wage_type:l.wage_type||"standard",regular_hours:l.regular_hours||0,overtime_hours:l.overtime_hours||0,regular_rate:l.regular_rate||0,overtime_rate:l.overtime_rate||0,regular_total:c,overtime_total:u,total:s,sort_order:l.sort_order||0,source_ticket_id:l.source_ticket_id||null}).select().single();if(p)throw p;return f}return null},async updateCORLaborItem(r,l){if(h){let c={...l};if(l.regular_hours!==void 0||l.regular_rate!==void 0||l.overtime_hours!==void 0||l.overtime_rate!==void 0){const{data:f}=await _.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",r).single(),p=l.regular_hours??f?.regular_hours??0,g=l.overtime_hours??f?.overtime_hours??0,w=l.regular_rate??f?.regular_rate??0,z=l.overtime_rate??f?.overtime_rate??0;c.regular_total=Math.round(p*w),c.overtime_total=Math.round(g*z),c.total=c.regular_total+c.overtime_total}const{data:u,error:s}=await _.from("change_order_labor").update(c).eq("id",r).select().single();if(s)throw s;return u}return null},async deleteCORLaborItem(r){if(h){const{error:l}=await _.from("change_order_labor").delete().eq("id",r);if(l)throw l}},async addCORMaterialItem(r,l){if(h){const u=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(l.source_type)?l.source_type:"custom",s=Math.round(Number(l.unit_cost)||0),f=Number(l.quantity)||1,p=Math.round(f*s),{data:g,error:w}=await _.from("change_order_materials").insert({change_order_id:r,description:l.description||"",quantity:f,unit:l.unit||"each",unit_cost:s,total:p,source_type:u,source_reference:l.source_reference||null,source_ticket_id:l.source_ticket_id||null,sort_order:l.sort_order||0}).select().single();if(w)throw w;return g}return null},async updateCORMaterialItem(r,l){if(h){let c={...l};if(l.quantity!==void 0||l.unit_cost!==void 0){const{data:f}=await _.from("change_order_materials").select("quantity, unit_cost").eq("id",r).single(),p=l.quantity??f?.quantity??1,g=l.unit_cost??f?.unit_cost??0;c.total=Math.round(p*g)}const{data:u,error:s}=await _.from("change_order_materials").update(c).eq("id",r).select().single();if(s)throw s;return u}return null},async deleteCORMaterialItem(r){if(h){const{error:l}=await _.from("change_order_materials").delete().eq("id",r);if(l)throw l}},async addCOREquipmentItem(r,l){if(h){const u=["backup_sheet","invoice","custom","field_ticket","rental"].includes(l.source_type)?l.source_type:"custom",s=Math.round(Number(l.unit_cost)||0),f=Number(l.quantity)||1,p=Math.round(f*s),{data:g,error:w}=await _.from("change_order_equipment").insert({change_order_id:r,description:l.description||"",quantity:f,unit:l.unit||"day",unit_cost:s,total:p,source_type:u,source_reference:l.source_reference||null,source_ticket_id:l.source_ticket_id||null,sort_order:l.sort_order||0}).select().single();if(w)throw w;return g}return null},async updateCOREquipmentItem(r,l){if(h){let c={...l};if(l.quantity!==void 0||l.unit_cost!==void 0){const{data:f}=await _.from("change_order_equipment").select("quantity, unit_cost").eq("id",r).single(),p=l.quantity??f?.quantity??1,g=l.unit_cost??f?.unit_cost??0;c.total=Math.round(p*g)}const{data:u,error:s}=await _.from("change_order_equipment").update(c).eq("id",r).select().single();if(s)throw s;return u}return null},async deleteCOREquipmentItem(r){if(h){const{error:l}=await _.from("change_order_equipment").delete().eq("id",r);if(l)throw l}},async addCORSubcontractorItem(r,l){if(h){const c=Math.round(l.quantity*l.unit_cost),{data:u,error:s}=await _.from("change_order_subcontractors").insert({change_order_id:r,description:l.description,quantity:l.quantity||1,unit:l.unit||"lump sum",unit_cost:l.unit_cost||0,total:c,source_type:l.source_type||"custom",source_reference:l.source_reference||null,sort_order:l.sort_order||0}).select().single();if(s)throw s;return u}return null},async updateCORSubcontractorItem(r,l){if(h){let c={...l};if(l.quantity!==void 0||l.unit_cost!==void 0){const{data:f}=await _.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",r).single(),p=l.quantity??f?.quantity??1,g=l.unit_cost??f?.unit_cost??0;c.total=Math.round(p*g)}const{data:u,error:s}=await _.from("change_order_subcontractors").update(c).eq("id",r).select().single();if(s)throw s;return u}return null},async deleteCORSubcontractorItem(r){if(h){const{error:l}=await _.from("change_order_subcontractors").delete().eq("id",r);if(l)throw l}},async addBulkLaborItems(r,l){if(h&&l.length>0){const c=l.map((f,p)=>{const g=Math.round(f.regular_hours*f.regular_rate),w=Math.round(f.overtime_hours*f.overtime_rate);return{change_order_id:r,labor_class:f.labor_class,wage_type:f.wage_type||"standard",regular_hours:f.regular_hours||0,overtime_hours:f.overtime_hours||0,regular_rate:f.regular_rate||0,overtime_rate:f.overtime_rate||0,regular_total:g,overtime_total:w,total:g+w,sort_order:f.sort_order??p,source_ticket_id:f.source_ticket_id||null}}),{data:u,error:s}=await _.from("change_order_labor").insert(c).select();if(s)throw s;return u}return[]},async addBulkMaterialItems(r,l){if(h&&l.length>0){const c=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],u=l.map((p,g)=>{const w=c.includes(p.source_type)?p.source_type:"custom",z=Math.round(Number(p.unit_cost)||0),U=Number(p.quantity)||1;return{change_order_id:r,description:p.description||"",quantity:U,unit:p.unit||"each",unit_cost:z,total:Math.round(U*z),source_type:w,source_reference:p.source_reference||null,source_ticket_id:p.source_ticket_id||null,sort_order:p.sort_order??g}}),{data:s,error:f}=await _.from("change_order_materials").insert(u).select();if(f)throw f;return s}return[]},async addBulkEquipmentItems(r,l){if(h&&l.length>0){const c=["backup_sheet","invoice","custom","field_ticket","rental"],u=l.map((p,g)=>{const w=c.includes(p.source_type)?p.source_type:"custom",z=Math.round(Number(p.unit_cost)||0),U=Number(p.quantity)||1;return{change_order_id:r,description:p.description||"",quantity:U,unit:p.unit||"day",unit_cost:z,total:Math.round(U*z),source_type:w,source_reference:p.source_reference||null,source_ticket_id:p.source_ticket_id||null,sort_order:p.sort_order??g}}),{data:s,error:f}=await _.from("change_order_equipment").insert(u).select();if(f)throw f;return s}return[]},async addBulkSubcontractorItems(r,l){if(h&&l.length>0){const c=l.map((f,p)=>({change_order_id:r,company_name:f.company_name||"",description:f.description||"",quantity:f.quantity||1,unit:f.unit||"lump sum",unit_cost:f.unit_cost||f.total||f.amount||0,total:f.total||f.amount||0,source_type:f.source_type||"invoice",source_reference:f.source_reference||null,sort_order:f.sort_order??p})),{data:u,error:s}=await _.from("change_order_subcontractors").insert(c).select();if(s)throw s;return u}return[]},async clearCORLineItems(r){h&&(await _.from("change_order_labor").delete().eq("change_order_id",r),await _.from("change_order_materials").delete().eq("change_order_id",r),await _.from("change_order_equipment").delete().eq("change_order_id",r),await _.from("change_order_subcontractors").delete().eq("change_order_id",r))},async saveCORLineItems(r,{laborItems:l,materialItems:c,equipmentItems:u,subcontractorItems:s}){if(h){await this.clearCORLineItems(r);const f=await Promise.all([l?.length>0?this.addBulkLaborItems(r,l):[],c?.length>0?this.addBulkMaterialItems(r,c):[],u?.length>0?this.addBulkEquipmentItems(r,u):[],s?.length>0?this.addBulkSubcontractorItems(r,s):[]]);return{labor:f[0],materials:f[1],equipment:f[2],subcontractors:f[3]}}return null},async assignTicketToCOR(r,l){if(h){const{error:c}=await _.rpc("assign_ticket_to_cor",{p_ticket_id:r,p_cor_id:l});if(c)throw ee.error("database",{message:c.message,operation:"assignTicketToCOR",extra:{ticketId:r,corId:l}}),c;return{ticket_id:r,change_order_id:l}}return null},async unassignTicketFromCOR(r,l){if(h){const{error:c}=await _.rpc("unassign_ticket_from_cor",{p_ticket_id:r,p_cor_id:l});if(c)throw ee.error("database",{message:c.message,operation:"unassignTicketFromCOR",extra:{ticketId:r,corId:l}}),c}},async checkTicketCORIntegrity(){if(h){const{data:r,error:l}=await _.rpc("check_ticket_cor_integrity");if(l)throw l;return r||[]}return[]},async fixTicketCORIntegrity(){if(h){const{data:r,error:l}=await _.rpc("fix_ticket_cor_integrity");if(l)throw l;return r}return 0},async getTicketsForCOR(r){if(h){const{data:l,error:c}=await _.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",r);if(c)throw c;return l}return[]},async getUnassignedTickets(r){if(h){const{data:l,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",r).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(c)throw c;return l}return[]},async importTicketDataToCOR(r,l,c,u,s){if(h){const{data:f,error:p}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",r).single();if(p)throw p;const{data:g,error:w}=await _.from("labor_rates").select("*").eq("company_id",c).eq("work_type",u||"demolition").eq("job_type",s||"standard");if(w)throw w;const z={};g?.forEach(H=>{z[H.role.toLowerCase()]=H});const U={};f.t_and_m_workers?.forEach(H=>{const ie=(H.role||"laborer").toLowerCase();U[ie]||(U[ie]={regular_hours:0,overtime_hours:0}),U[ie].regular_hours+=parseFloat(H.hours)||0,U[ie].overtime_hours+=parseFloat(H.overtime_hours)||0});const N=Object.entries(U).map(([H,ie])=>{const _e=z[H]||{regular_rate:0,overtime_rate:0},pe=Math.round((parseFloat(_e.regular_rate)||0)*100),F=Math.round((parseFloat(_e.overtime_rate)||0)*100);return{labor_class:H.charAt(0).toUpperCase()+H.slice(1),wage_type:s||"standard",regular_hours:ie.regular_hours,overtime_hours:ie.overtime_hours,regular_rate:pe,overtime_rate:F,source_ticket_id:r}});N.length>0&&await this.addBulkLaborItems(l,N);const G=[],Z=[];f.t_and_m_items?.forEach(H=>{const ie=H.custom_name||H.materials_equipment?.name||"Unknown Item",_e=H.custom_category||H.materials_equipment?.category||"Other",pe=H.materials_equipment?.unit||"each",F=Math.round((parseFloat(H.materials_equipment?.cost_per_unit)||0)*100),J={description:ie,quantity:H.quantity||1,unit:pe,unit_cost:F,source_type:"backup_sheet",source_ticket_id:r};_e==="Equipment"?Z.push(J):G.push(J)}),G.length>0&&await this.addBulkMaterialItems(l,G),Z.length>0&&await this.addBulkEquipmentItems(l,Z);const{error:V}=await _.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",l).eq("ticket_id",r);if(V)throw V;return ee.activity("cor_import_success",{ticket_id:r,cor_id:l,labor_count:N.length,material_count:G.length,equipment_count:Z.length}),{laborItems:N,materialItems:G,equipmentItems:Z}}return null},async reimportTicketDataToCOR(r,l,c,u,s){return h?(await _.from("change_order_labor").delete().eq("change_order_id",l).eq("source_ticket_id",r),await _.from("change_order_materials").delete().eq("change_order_id",l).eq("source_ticket_id",r),await _.from("change_order_equipment").delete().eq("change_order_id",l).eq("source_ticket_id",r),this.importTicketDataToCOR(r,l,c,u,s)):null},async markImportFailed(r,l,c="Import failed"){if(h){const{error:u}=await _.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:c}).eq("change_order_id",l).eq("ticket_id",r);if(u)throw ee.error("database",{message:u.message,operation:"markImportFailed",extra:{ticketId:r,corId:l}}),u;ee.error("cor_import_failed",{ticket_id:r,cor_id:l,error:c})}},async getTicketsNeedingImport(r){if(h){const{data:l,error:c}=await _.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",r).eq("change_order_ticket_associations.import_status","failed");if(c)throw c;return l||[]}return[]},async getTicketImportStatus(r,l){if(h){const{data:c,error:u}=await _.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",r).eq("change_order_id",l).single();if(u&&u.code!=="PGRST116")throw u;return c}return null},async recalculateCOR(r){if(h){const{error:l}=await _.rpc("recalculate_cor_totals",{cor_id:r});if(l)throw l;return this.getCORById(r)}return null},async updateCORMarkupPercentages(r,l){if(h){const c={};l.labor!==void 0&&(c.labor_markup_percent=l.labor),l.materials!==void 0&&(c.materials_markup_percent=l.materials),l.equipment!==void 0&&(c.equipment_markup_percent=l.equipment),l.subcontractors!==void 0&&(c.subcontractors_markup_percent=l.subcontractors);const{data:u,error:s}=await _.from("change_orders").update(c).eq("id",r).select().single();if(s)throw s;return u}return null},async updateCORFeePercentages(r,l){if(h){const c={};l.liabilityInsurance!==void 0&&(c.liability_insurance_percent=l.liabilityInsurance),l.bond!==void 0&&(c.bond_percent=l.bond),l.licenseFee!==void 0&&(c.license_fee_percent=l.licenseFee);const{data:u,error:s}=await _.from("change_orders").update(c).eq("id",r).select().single();if(s)throw s;return u}return null},async submitCORForApproval(r){if(h){const{data:l,error:c}=await _.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",r).select().single();if(c)throw c;return l}return null},async approveCOR(r,l){if(h){const{data:c,error:u}=await _.from("change_orders").update({status:"approved",approved_by:l,approved_at:new Date().toISOString()}).eq("id",r).select().single();if(u)throw u;return c}return null},async rejectCOR(r,l=null){if(h){const{data:c,error:u}=await _.from("change_orders").update({status:"rejected",rejection_reason:l}).eq("id",r).select().single();if(u)throw u;return c}return null},async markCORAsBilled(r){if(h){const{data:l,error:c}=await _.from("change_orders").update({status:"billed"}).eq("id",r).select().single();if(c)throw c;return l}return null},async closeCOR(r){if(h){const{data:l,error:c}=await _.from("change_orders").update({status:"closed"}).eq("id",r).select().single();if(c)throw c;return l}return null},async saveCORSignature(r,l,c){if(h){const{data:u,error:s}=await _.from("change_orders").update({gc_signature_data:l,gc_signature_name:c,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",r).select().single();if(s)throw s;return u}return null},async getCORStats(r){if(h){const{data:l,error:c}=await _.from("change_orders").select("status, cor_total").eq("project_id",r);if(c)throw c;const u={total_cors:l.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return l.forEach(s=>{switch(s.status){case"draft":u.draft_count++;break;case"pending_approval":u.pending_count++,u.total_pending_value+=s.cor_total||0;break;case"approved":u.approved_count++,u.total_approved_value+=s.cor_total||0;break;case"rejected":u.rejected_count++;break;case"billed":case"closed":u.billed_count++,u.total_billed_value+=s.cor_total||0;break}}),u}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(r,l){return h?_.channel(`change_orders:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToCorTickets(r,l){return h?_.channel(`cor-tickets:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${r}`},l).subscribe():null},async getCORLog(r){if(h){const{data:l,error:c}=await _.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",r).order("log_number",{ascending:!0});if(c)throw console.error("Error fetching COR log:",c),c;return(l||[]).map(u=>({id:u.id,logNumber:u.log_number,dateSentToClient:u.date_sent_to_client,ceNumber:u.ce_number,comments:u.comments,createdAt:u.created_at,updatedAt:u.updated_at,changeOrder:{id:u.change_order?.id,corNumber:u.change_order?.cor_number,title:u.change_order?.title,corTotal:u.change_order?.cor_total,status:u.change_order?.status,createdAt:u.change_order?.created_at,approvedAt:u.change_order?.approved_at,approvedBy:u.change_order?.approved_by}}))}return[]},async updateCORLogEntry(r,l){if(h){const c={updated_at:new Date().toISOString()};l.dateSentToClient!==void 0&&(c.date_sent_to_client=l.dateSentToClient||null),l.ceNumber!==void 0&&(c.ce_number=l.ceNumber||null),l.comments!==void 0&&(c.comments=l.comments||null);const{data:u,error:s}=await _.from("cor_log_entries").update(c).eq("id",r).select().single();if(s)throw console.error("Error updating COR log entry:",s),s;return u}return null},async updateChangeOrderStatus(r,l){if(h){const{data:c,error:u}=await _.from("change_orders").update({status:l,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(u)throw console.error("Error updating change order status:",u),u;return c}return null},subscribeToCORLog(r,l){return h?_.channel(`cor-log:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${r}`},l).subscribe():null},async createSignatureRequest(r,l,c,u,s=null,f=null){if(h){const{data:p,error:g}=await _.rpc("generate_signature_token");if(g)throw g;const{data:w,error:z}=await _.from("signature_requests").insert({document_type:r,document_id:l,company_id:c,project_id:u,signature_token:p,expires_at:f,created_by:s}).select().single();if(z)throw z;return w}return null},async getSignatureRequestByToken(r){if(h){await _.rpc("increment_signature_view_count",{token:r});const{data:l,error:c}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",r).single();if(c)throw c;return l}return null},async getSignatureRequestsForDocument(r,l){if(h){const{data:c,error:u}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",r).eq("document_id",l).order("created_at",{ascending:!1});if(u)throw u;return c||[]}return[]},async addSignature(r,l,c){if(h){const{data:u,error:s}=await _.from("signatures").insert({signature_request_id:r,signature_slot:l,signature_image:c.signature,signer_name:c.signerName,signer_title:c.signerTitle||null,signer_company:c.signerCompany||null,signed_at:c.signedAt||new Date().toISOString(),ip_address:c.ipAddress||null,user_agent:c.userAgent||null}).select().single();if(s)throw s;return u}return null},async syncSignatureToDocument(r,l){if(!h)return null;const{document_type:c,document_id:u}=l,s=r.signature_slot,f={};s===1?(f.gc_signature_data=r.signature_image,f.gc_signature_name=r.signer_name,f.gc_signature_title=r.signer_title,f.gc_signature_company=r.signer_company,f.gc_signature_date=r.signed_at,f.gc_signature_ip=r.ip_address):s===2&&(f.client_signature_data=r.signature_image,f.client_signature_name=r.signer_name,f.client_signature_title=r.signer_title,f.client_signature_company=r.signer_company,f.client_signature_date=r.signed_at,f.client_signature_ip=r.ip_address);const p=c==="cor"?"change_orders":"t_and_m_tickets",{data:g,error:w}=await _.from(p).update(f).eq("id",u).select().single();if(w)throw w;return g},async revokeSignatureRequest(r){if(h){const{data:l,error:c}=await _.from("signature_requests").update({status:"revoked"}).eq("id",r).select().single();if(c)throw c;return l}return null},async getDocumentForSigning(r,l){if(!h)return null;if(r==="cor"){const{data:c,error:u}=await _.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",l).single();if(u)throw u;return c}else if(r==="tm_ticket"){const{data:c,error:u}=await _.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (*)
        `).eq("id",l).single();if(u)throw u;return c}return null},async getProjectCosts(r){if(h){const{data:c,error:u}=await _.from("project_costs").select("*").eq("project_id",r).order("cost_date",{ascending:!1});return u?(console.error("Error fetching project costs:",u),[]):c||[]}return(x().projectCosts||[]).filter(c=>c.project_id===r).sort((c,u)=>new Date(u.cost_date)-new Date(c.cost_date))},async addProjectCost(r,l,c){const u={project_id:r,company_id:l,category:c.category,description:c.description,amount:parseFloat(c.amount),cost_date:c.cost_date||new Date().toISOString().split("T")[0],notes:c.notes||null,created_by:c.created_by||null};if(h){const{data:p,error:g}=await _.from("project_costs").insert(u).select().single();if(g)throw console.error("Error adding project cost:",g),g;return p}const s=x();s.projectCosts||(s.projectCosts=[]);const f={...u,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s.projectCosts.push(f),I(s),f},async updateProjectCost(r,l){const c={category:l.category,description:l.description,amount:parseFloat(l.amount),cost_date:l.cost_date,notes:l.notes||null,updated_at:new Date().toISOString()};if(h){const{data:f,error:p}=await _.from("project_costs").update(c).eq("id",r).select().single();if(p)throw console.error("Error updating project cost:",p),p;return f}const u=x();if(!u.projectCosts)return null;const s=u.projectCosts.findIndex(f=>f.id===r);return s===-1?null:(u.projectCosts[s]={...u.projectCosts[s],...c},I(u),u.projectCosts[s])},async deleteProjectCost(r){if(h){const{error:c}=await _.from("project_costs").delete().eq("id",r);if(c)throw console.error("Error deleting project cost:",c),c;return!0}const l=x();return l.projectCosts&&(l.projectCosts=l.projectCosts.filter(c=>c.id!==r),I(l)),!0},async getProjectCostsSummary(r){const l=await this.getProjectCosts(r),c={};let u=0;return l.forEach(s=>{const f=parseFloat(s.amount)||0;u+=f,c[s.category]||(c[s.category]={category:s.category,total:0,count:0,items:[]}),c[s.category].total+=f,c[s.category].count++,c[s.category].items.push(s)}),Object.values(c).forEach(s=>{s.percentage=u>0?s.total/u*100:0}),{totalCost:u,byCategory:c,itemCount:l.length}},async getNextInvoiceNumber(r){if(h){const{data:l,error:c}=await _.rpc("get_next_invoice_number",{p_company_id:r});return c?(console.error("Error getting next invoice number:",c),this._generateLocalInvoiceNumber(r)):l}return this._generateLocalInvoiceNumber(r)},async _generateLocalInvoiceNumber(r){const c=(await this.getCompanyInvoices(r)).reduce((u,s)=>{const f=s.invoice_number?.match(/^INV-(\d+)$/);if(f){const p=parseInt(f[1],10);return p>u?p:u}return u},0);return`INV-${String(c+1).padStart(4,"0")}`},async getBillableItems(r){if(h){const{data:l,error:c}=await _.from("change_orders").select("id, cor_number, title, cor_total, status, approved_at").eq("project_id",r).eq("status","approved").order("cor_number",{ascending:!0});c&&console.error("Error fetching billable CORs:",c);const{data:u,error:s}=await _.from("t_and_m_tickets").select("id, work_date, ce_pco_number, change_order_value, status, client_signature_date").eq("project_id",r).eq("status","approved").not("client_signature_data","is",null).order("work_date",{ascending:!0});return s&&console.error("Error fetching billable T&M tickets:",s),{cors:l||[],tickets:u||[]}}return{cors:[],tickets:[]}},async getProjectInvoices(r){if(h){const{data:c,error:u}=await _.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("project_id",r).order("invoice_date",{ascending:!1});if(u)throw console.error("Error fetching project invoices:",u),u;return c||[]}return(x().invoices||[]).filter(c=>c.project_id===r)},async getCompanyInvoices(r){if(h){const{data:c,error:u}=await _.from("invoices").select("*").eq("company_id",r).order("invoice_date",{ascending:!1});if(u)throw console.error("Error fetching company invoices:",u),u;return c||[]}return(x().invoices||[]).filter(c=>c.company_id===r)},async createInvoice(r,l){if(h){const{data:s,error:f}=await _.from("invoices").insert({project_id:r.project_id,company_id:r.company_id,invoice_number:r.invoice_number,invoice_date:r.invoice_date,due_date:r.due_date,status:r.status||"draft",retention_percent:r.retention_percent||0,bill_to_name:r.bill_to_name,bill_to_address:r.bill_to_address,bill_to_contact:r.bill_to_contact,notes:r.notes,terms:r.terms||"Net 30",created_by:r.created_by}).select().single();if(f)throw console.error("Error creating invoice:",f),f;if(l&&l.length>0){const p=l.map((w,z)=>({invoice_id:s.id,item_type:w.item_type,reference_id:w.reference_id,reference_number:w.reference_number,description:w.description,amount:w.amount,sort_order:z})),{error:g}=await _.from("invoice_items").insert(p);if(g)throw console.error("Error creating invoice items:",g),await _.from("invoices").delete().eq("id",s.id),g}return this.getInvoice(s.id)}const c=x();c.invoices||(c.invoices=[]);const u={...r,id:jt(),created_at:new Date().toISOString(),invoice_items:l||[]};return c.invoices.push(u),I(c),u},async getInvoice(r){if(h){const{data:c,error:u}=await _.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",r).single();if(u)throw console.error("Error fetching invoice:",u),u;return c}return(x().invoices||[]).find(c=>c.id===r)},async updateInvoice(r,l){if(h){const{data:s,error:f}=await _.from("invoices").update(l).eq("id",r).select().single();if(f)throw console.error("Error updating invoice:",f),f;return s}const c=x(),u=(c.invoices||[]).findIndex(s=>s.id===r);return u>=0?(c.invoices[u]={...c.invoices[u],...l},I(c),c.invoices[u]):null},async markInvoiceSent(r){return this.updateInvoice(r,{status:"sent",sent_at:new Date().toISOString()})},async recordInvoicePayment(r,l){const c=await this.getInvoice(r);if(!c)throw new Error("Invoice not found");const u=(c.amount_paid||0)+l,s=u>=c.total;return this.updateInvoice(r,{amount_paid:u,status:s?"paid":"partial",paid_at:s?new Date().toISOString():null})},async deleteInvoice(r){if(h){const{error:c}=await _.from("invoices").delete().eq("id",r).eq("status","draft");if(c)throw console.error("Error deleting invoice:",c),c;return!0}const l=x();return l.invoices=(l.invoices||[]).filter(c=>c.id!==r),I(l),!0},async markItemsBilled(r=[],l=[]){if(h){if(r.length>0){const{error:c}=await _.from("change_orders").update({status:"billed"}).in("id",r);c&&console.error("Error marking CORs as billed:",c)}if(l.length>0){const{error:c}=await _.from("t_and_m_tickets").update({status:"billed"}).in("id",l);c&&console.error("Error marking T&M tickets as billed:",c)}}}},bh={async getCompanyEquipment(r,l=!0){if(!h)return console.warn("Supabase not configured"),[];let c=_.from("equipment").select("*").eq("company_id",r).order("name");l&&(c=c.eq("is_active",!0));const{data:u,error:s}=await c;return s?(console.error("Error fetching company equipment:",s),[]):u||[]},async createEquipment(r){if(!h)return console.warn("Supabase not configured"),null;const{data:l,error:c}=await _.from("equipment").insert(r).select().single();if(c)throw console.error("Error creating equipment:",c),c;return l},async updateEquipment(r,l){if(!h)return console.warn("Supabase not configured"),null;const{data:c,error:u}=await _.from("equipment").update(l).eq("id",r).select().single();if(u)throw console.error("Error updating equipment:",u),u;return c},async deactivateEquipment(r){return this.updateEquipment(r,{is_active:!1})},async getProjectEquipment(r){if(!h)return console.warn("Supabase not configured"),[];const{data:l,error:c}=await _.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",r).order("start_date",{ascending:!1});return c?(console.error("Error fetching project equipment:",c),[]):l||[]},async getActiveProjectEquipment(r){if(!h)return console.warn("Supabase not configured"),[];const{data:l,error:c}=await _.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",r).is("end_date",null).order("start_date",{ascending:!1});return c?(console.error("Error fetching active project equipment:",c),[]):l||[]},async addEquipmentToProject(r){if(!h)return console.warn("Supabase not configured"),null;const{data:l,error:c}=await _.from("project_equipment").insert(r).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(c)throw console.error("Error adding equipment to project:",c),c;return l},async updateProjectEquipment(r,l){if(!h)return console.warn("Supabase not configured"),null;const{data:c,error:u}=await _.from("project_equipment").update(l).eq("id",r).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(u)throw console.error("Error updating project equipment:",u),u;return c},async markEquipmentReturned(r,l=null){return this.updateProjectEquipment(r,{end_date:l||new Date().toISOString().split("T")[0]})},async removeEquipmentFromProject(r){if(!h)return console.warn("Supabase not configured"),!1;const{error:l}=await _.from("project_equipment").delete().eq("id",r);if(l)throw console.error("Error removing project equipment:",l),l;return!0},calculateProjectEquipmentCost(r){const l=new Date;return l.setHours(0,0,0,0),r.reduce((c,u)=>{const s=new Date(u.start_date);s.setHours(0,0,0,0);let f;u.end_date?(f=new Date(u.end_date),f.setHours(0,0,0,0)):f=l;const p=Math.max(1,Math.floor((f-s)/(1e3*60*60*24))+1);return c+u.daily_rate*p},0)},calculateDaysOnSite(r,l=null){const c=new Date(r);c.setHours(0,0,0,0);let u;return l?u=new Date(l):u=new Date,u.setHours(0,0,0,0),Math.max(1,Math.floor((u-c)/(1e3*60*60*24))+1)}},Sh={async getNextDrawNumber(r){if(!h)return console.warn("Supabase not configured"),1;const{data:l,error:c}=await _.from("draw_requests").select("draw_number").eq("project_id",r).order("draw_number",{ascending:!1}).limit(1).single();return c&&c.code!=="PGRST116"&&console.error("Error getting next draw number:",c),(l?.draw_number||0)+1},async getPreviousBillingTotals(r){if(!h)return console.warn("Supabase not configured"),{totalBilled:0,totalRetention:0};const{data:l,error:c}=await _.from("draw_requests").select("current_billing, retention_held").eq("project_id",r).in("status",["submitted","approved","paid"]);if(c)return console.error("Error getting previous billing totals:",c),{totalBilled:0,totalRetention:0};const u=(l||[]).reduce((f,p)=>f+(p.current_billing||0),0),s=l?.length>0?Math.max(...l.map(f=>f.retention_held||0)):0;return{totalBilled:u,totalRetention:s}},async getProjectDrawRequests(r){if(!h)return console.warn("Supabase not configured"),[];const{data:l,error:c}=await _.from("draw_requests").select("*").eq("project_id",r).order("draw_number",{ascending:!1});return c?(console.error("Error fetching draw requests:",c),[]):l||[]},async getDrawRequest(r){if(!h)return console.warn("Supabase not configured"),null;const{data:l,error:c}=await _.from("draw_requests").select(`
        *,
        draw_request_items (
          *
        )
      `).eq("id",r).single();return c?(console.error("Error fetching draw request:",c),null):l},async createDrawRequest(r,l){if(!h)return console.warn("Supabase not configured"),null;const{data:c,error:u}=await _.from("draw_requests").insert(r).select().single();if(u)throw console.error("Error creating draw request:",u),u;if(l&&l.length>0){const s=l.map((p,g)=>({...p,draw_request_id:c.id,sort_order:g})),{error:f}=await _.from("draw_request_items").insert(s);f&&console.error("Error creating draw request items:",f)}return this.getDrawRequest(c.id)},async updateDrawRequest(r,l){if(!h)return console.warn("Supabase not configured"),null;const{data:c,error:u}=await _.from("draw_requests").update(l).eq("id",r).select().single();if(u)throw console.error("Error updating draw request:",u),u;return c},async updateDrawRequestStatus(r,l){const c={status:l};return l==="submitted"?c.submitted_at=new Date().toISOString():l==="approved"?c.approved_at=new Date().toISOString():l==="paid"&&(c.paid_at=new Date().toISOString()),this.updateDrawRequest(r,c)},async updateDrawRequestItems(r,l){if(!h)return console.warn("Supabase not configured"),!1;const{error:c}=await _.from("draw_request_items").delete().eq("draw_request_id",r);if(c)throw console.error("Error deleting old draw request items:",c),c;if(l&&l.length>0){const u=l.map((f,p)=>({...f,draw_request_id:r,sort_order:p})),{error:s}=await _.from("draw_request_items").insert(u);if(s)throw console.error("Error inserting draw request items:",s),s}return!0},async deleteDrawRequest(r){if(!h)return console.warn("Supabase not configured"),!1;const{error:l}=await _.from("draw_requests").delete().eq("id",r);if(l)throw console.error("Error deleting draw request:",l),l;return!0},async getScheduleOfValues(r){if(!h)return console.warn("Supabase not configured"),[];const{data:l,error:c}=await _.from("areas").select("id, name, square_footage, price_per_sqft").eq("project_id",r).order("created_at");return c?(console.error("Error fetching schedule of values:",c),[]):(l||[]).map((u,s)=>({area_id:u.id,item_number:String(s+1),description:u.name,scheduled_value:Math.round((u.square_footage||0)*(u.price_per_sqft||0)*100)}))},async getPreviousDrawItems(r){if(!h)return console.warn("Supabase not configured"),{};const{data:l,error:c}=await _.from("draw_requests").select("id").eq("project_id",r).in("status",["submitted","approved","paid"]).order("draw_number",{ascending:!1}).limit(1).single();if(c&&c.code!=="PGRST116")return console.error("Error fetching latest draw:",c),{};if(!l)return{};const{data:u,error:s}=await _.from("draw_request_items").select("area_id, total_percent, total_amount").eq("draw_request_id",l.id);return s?(console.error("Error fetching previous draw items:",s),{}):(u||[]).reduce((f,p)=>(p.area_id&&(f[p.area_id]={previous_percent:p.total_percent||0,previous_amount:p.total_amount||0}),f),{})},calculatePercentFromAmount(r,l){return!l||l===0?0:Math.round(r/l*1e4)},calculateAmountFromPercent(r,l){return Math.round(r/1e4*l)}};Fu(async r=>{if(r&&h)try{await wm(at)}catch(l){console.error("Error syncing pending actions:",l)}});const eg=Object.freeze(Object.defineProperty({__proto__:null,auth:Ku,clearFieldSession:Em,db:at,drawRequestOps:Sh,equipmentOps:bh,getConnectionStatus:Ht,getPendingActionCount:gi,isSupabaseConfigured:h,onConnectionChange:Fu,supabase:_,syncPendingActions:wm},Symbol.toStringTag,{value:"Module"})),Tm=B.createContext(),qt={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function cn({children:r,companyId:l}){const[c,u]=B.useState(qt),[s,f]=B.useState(!0);B.useEffect(()=>{l?p(l):g()},[l]),B.useEffect(()=>{U(c)},[c]);const p=async Z=>{try{if(f(!0),!h){u(qt),f(!1);return}const{data:V,error:H}=await _.from("company_branding").select("*").eq("company_id",Z).single();H?(H.code==="PGRST116"?await w(Z):console.error("Error loading branding:",H),u(qt)):u({...qt,...V})}catch(V){console.error("Error in loadBranding:",V),u(qt)}finally{f(!1)}},g=async()=>{try{f(!0);const Z=window.location.hostname;if(Z==="localhost"||Z==="127.0.0.1"){u(qt),f(!1);return}if(!h){u(qt),f(!1);return}const{data:V,error:H}=await _.rpc("get_branding_by_domain",{domain_name:Z});H||!V||V.length===0?u(qt):u({...qt,...V[0]})}catch(Z){console.error("Error loading branding by domain:",Z),u(qt)}finally{f(!1)}},w=async Z=>{try{const{data:V,error:H}=await _.from("company_branding").insert({company_id:Z,...qt}).select().single();H&&console.error("Error creating default branding:",H)}catch(V){console.error("Error in createDefaultBranding:",V)}},z=async Z=>{try{if(!h)return u(J=>({...J,...Z})),{success:!0};if(!l)return{success:!1,error:"No company ID"};const V={},H=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const J of H)Z[J]!==void 0&&(V[J]=Z[J]);const{data:ie,error:_e}=await _.from("company_branding").select("id").eq("company_id",l).single();if(_e&&_e.code==="PGRST116"){const{data:J,error:je}=await _.from("company_branding").insert({company_id:l,...V}).select().single();return je?(console.error("Error creating branding:",je),{success:!1,error:je.message}):(u({...qt,...J}),{success:!0,data:J})}const{data:pe,error:F}=await _.from("company_branding").update(V).eq("company_id",l).select().single();return F?(console.error("Error updating branding:",F),{success:!1,error:F.message}):(u({...qt,...pe}),{success:!0,data:pe})}catch(V){return console.error("Error in updateBranding:",V),{success:!1,error:V.message}}},U=Z=>{const V=document.documentElement;if(V.style.setProperty("--primary-color",Z.primary_color),V.style.setProperty("--secondary-color",Z.secondary_color),Z.favicon_url){let H=document.querySelector("link[rel*='icon']");H||(H=document.createElement("link"),H.rel="icon",document.head.appendChild(H)),H.href=Z.favicon_url}document.title=Z.custom_app_name||"FieldSync"},G={branding:c,loading:s,updateBranding:z,uploadBrandingImage:async(Z,V)=>{try{if(!h)return{success:!0,url:URL.createObjectURL(Z)};const H=Z.name.split(".").pop(),_e=`branding/${`${l}/${V}-${Date.now()}.${H}`}`,{data:pe,error:F}=await _.storage.from("public").upload(_e,Z,{cacheControl:"3600",upsert:!0});if(F)return console.error("Error uploading image:",F),{success:!1,error:F.message};const{data:{publicUrl:J}}=_.storage.from("public").getPublicUrl(_e);return{success:!0,url:J}}catch(H){return console.error("Error in uploadBrandingImage:",H),{success:!1,error:H.message}}},refreshBranding:()=>l?p(l):g()};return v.jsx(Tm.Provider,{value:G,children:r})}function wh(){const r=B.useContext(Tm);if(!r)throw new Error("useBranding must be used within a BrandingProvider");return r}const Dm=B.createContext();function un({children:r}){const[l,c]=B.useState(()=>{const s=localStorage.getItem("fieldsync-theme");return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});B.useEffect(()=>{document.documentElement.setAttribute("data-theme",l),localStorage.setItem("fieldsync-theme",l)},[l]),B.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: light)"),f=p=>{localStorage.getItem("fieldsync-theme")||c(p.matches?"light":"dark")};return s.addEventListener("change",f),()=>s.removeEventListener("change",f)},[]);const u=()=>{c(s=>s==="dark"?"light":"dark")};return v.jsx(Dm.Provider,{value:{theme:l,setTheme:c,toggleTheme:u},children:r})}function jh(){const r=B.useContext(Dm);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r}const Eh=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qh=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(l,c,u)=>u?u.toUpperCase():c.toLowerCase()),mm=r=>{const l=qh(r);return l.charAt(0).toUpperCase()+l.slice(1)},Am=(...r)=>r.filter((l,c,u)=>!!l&&l.trim()!==""&&u.indexOf(l)===c).join(" ").trim(),Th=r=>{for(const l in r)if(l.startsWith("aria-")||l==="role"||l==="title")return!0};var Dh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ah=B.forwardRef(({color:r="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:s="",children:f,iconNode:p,...g},w)=>B.createElement("svg",{ref:w,...Dh,width:l,height:l,stroke:r,strokeWidth:u?Number(c)*24/Number(l):c,className:Am("lucide",s),...!f&&!Th(g)&&{"aria-hidden":"true"},...g},[...p.map(([z,U])=>B.createElement(z,U)),...Array.isArray(f)?f:[f]]));const Fr=(r,l)=>{const c=B.forwardRef(({className:u,...s},f)=>B.createElement(Ah,{ref:f,iconNode:l,className:Am(`lucide-${Eh(mm(r))}`,`lucide-${r}`,u),...s}));return c.displayName=mm(r),c};const Ch=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Oh=Fr("briefcase",Ch);const Mh=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],zh=Fr("hard-hat",Mh);const Nh=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Rh=Fr("moon",Nh);const xh=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Uh=Fr("sun",xh);const Bh=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Hh=Fr("triangle-alert",Bh);function Qt({className:r="",showPoweredBy:l=!1}){const{branding:c}=wh();return v.jsxs("div",{className:`app-logo ${r}`,children:[c.logo_url?v.jsx("img",{src:c.logo_url,alt:c.custom_app_name||"Logo",className:"custom-logo"}):v.jsxs("div",{className:"logo",children:[c.custom_app_name||"Field",v.jsx("span",{children:"Sync"})]}),l&&!c.hide_fieldsync_branding&&v.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function kh({onForemanAccess:r,onOfficeLogin:l,onShowToast:c}){const[u,s]=B.useState(null),[f,p]=B.useState(""),[g,w]=B.useState(null),[z,U]=B.useState(""),[N,G]=B.useState(!1),[Z,V]=B.useState(""),[H,ie]=B.useState(""),[_e,pe]=B.useState(1),[F,J]=B.useState(null),[je,Ye]=B.useState(""),[Pe,Ie]=B.useState(""),[st,Wt]=B.useState(""),[ft,Ge]=B.useState(""),Ft=M=>{const P=M.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);p(P)},Xt=async()=>{if(f.length<2){c("Enter company code","error");return}G(!0);try{const M=await at.getCompanyByCode(f);M?w(M):(c("Invalid company code","error"),p(""))}catch{c("Error checking code","error")}finally{G(!1)}},dt=async M=>{if(M.length===4){G(!0);try{const P=await at.getProjectByPinSecure(M,g.code);if(P.rateLimited){c("Too many attempts. Please wait 15 minutes.","error"),U("");return}P.success&&P.project?r(P.project):(c("Invalid PIN","error"),U(""))}catch{c("Error checking PIN","error")}finally{G(!1)}}},A=M=>{if(z.length<4){const P=z+M;U(P),P.length===4&&setTimeout(()=>dt(P),200)}},R=()=>{U(M=>M.slice(0,-1))},k=()=>{w(null),U("")},se=()=>{if(!Z.trim()||!H.trim()){c("Enter email and password","error");return}l(Z,H)},fe=async()=>{if(f.length<2){c("Enter company code","error");return}G(!0);try{const M=await at.getCompanyByCode(f);M?(J(M),pe(2)):(c("Invalid company code","error"),p(""))}catch{c("Error checking code","error")}finally{G(!1)}},Ne=async()=>{if(!je.trim()){c("Enter office code","error");return}G(!0);try{const{data:M,error:P}=await _.rpc("verify_office_code",{company_id:F.id,code:je.trim()});if(P)throw P;M===!0?pe(3):(c("Invalid office code","error"),Ye(""))}catch{c("Error verifying code","error")}finally{G(!1)}},ye=async()=>{if(!Pe.trim()){c("Enter your name","error");return}if(!st.trim()||!st.includes("@")){c("Enter valid email","error");return}if(ft.length<6){c("Password must be 6+ characters","error");return}G(!0);try{const M=st.toLowerCase().trim(),{data:P,error:He}=await _.auth.signUp({email:M,password:ft});let Q;if(He?.message?.includes("already registered")||P?.user&&P.user.identities?.length===0){const{data:Te,error:Ae}=await _.auth.signInWithPassword({email:M,password:ft});if(Ae){c("Account exists with different password. Use your existing password.","error"),G(!1);return}Q=Te.user.id;const{data:Ve}=await _.from("user_companies").select("id, status").eq("user_id",Q).eq("company_id",F.id).maybeSingle();if(Ve){Ve.status==="active"?(c("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):Ve.status==="pending"?(c("Your request is still pending approval.","error"),await _.auth.signOut()):(c("Your membership was removed. Contact the company admin.","error"),await _.auth.signOut());return}const{error:et}=await _.from("user_companies").insert({user_id:Q,company_id:F.id,role:"member",status:"pending"});if(et)throw console.error("Error adding to user_companies:",et),await _.auth.signOut(),new Error("Failed to submit join request");await _.auth.signOut(),c("Request to join submitted! Awaiting admin approval.","success")}else{if(He)throw He;{if(Q=P.user?.id,!Q)throw new Error("Failed to create user");const{error:Te}=await _.from("users").insert({id:Q,email:M,password_hash:"managed_by_supabase_auth",name:Pe.trim(),company_id:F.id,role:"member",is_active:!0});if(Te)throw Te;const{error:Ae}=await _.from("user_companies").insert({user_id:Q,company_id:F.id,role:"member",status:"pending"});if(Ae)throw console.error("Error adding to user_companies:",Ae),new Error("Failed to submit join request");await _.auth.signOut(),c("Account created! Awaiting admin approval.","success")}}}catch(M){console.error("Join error:",M),c(M.message||"Error creating account","error")}finally{G(!1)}};if(u===null)return v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsxs("div",{className:"entry-buttons",children:[v.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>s("foreman"),children:[v.jsx("span",{className:"entry-mode-icon",children:v.jsx(zh,{size:32})}),v.jsx("span",{className:"entry-mode-title",children:"Foreman"}),v.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),v.jsxs("button",{className:"entry-mode-btn office",onClick:()=>s("office"),children:[v.jsx("span",{className:"entry-mode-icon",children:v.jsx(Oh,{size:32})}),v.jsx("span",{className:"entry-mode-title",children:"Office"}),v.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(u==="foreman")return g?v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:k,children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("div",{className:"entry-company-badge",children:g.name}),v.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),v.jsx("div",{className:"pin-display",children:[0,1,2,3].map(M=>v.jsx("div",{className:`pin-dot ${z.length>M?"filled":""}`,children:z.length>M?"":""},M))}),v.jsxs("div",{className:"number-pad",children:[[1,2,3,4,5,6,7,8,9].map(M=>v.jsx("button",{className:"num-btn",onClick:()=>A(M.toString()),disabled:N,children:M},M)),v.jsx("button",{className:"num-btn empty",disabled:!0}),v.jsx("button",{className:"num-btn",onClick:()=>A("0"),disabled:N,children:"0"}),v.jsx("button",{className:"num-btn backspace",onClick:R,disabled:N||z.length===0,children:""})]}),N&&v.jsx("div",{className:"entry-loading",children:v.jsx("div",{className:"spinner"})})]})}):v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>s(null),children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),v.jsxs("div",{className:"entry-input-group",children:[v.jsx("input",{type:"text",value:f,onChange:M=>Ft(M.target.value),placeholder:"Company Code",disabled:N,autoFocus:!0,onKeyDown:M=>{M.key==="Enter"&&Xt()}}),v.jsx("button",{className:"entry-submit-btn",onClick:Xt,disabled:N||f.length<2,children:N?"...":""})]})]})});if(u==="office")return v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>s(null),children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),v.jsxs("div",{className:"entry-form",children:[v.jsx("input",{type:"email",value:Z,onChange:M=>V(M.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:M=>{M.key==="Enter"&&se()}}),v.jsx("input",{type:"password",value:H,onChange:M=>ie(M.target.value),placeholder:"Password",onKeyDown:M=>{M.key==="Enter"&&se()}}),v.jsx("button",{className:"entry-login-btn",onClick:se,children:"Sign In"})]}),v.jsxs("div",{className:"entry-signup-hint",children:[v.jsx("p",{children:"New employee?"}),v.jsx("button",{className:"entry-join-link",onClick:()=>s("join"),children:"Join your company"})]})]})});if(u==="join")return _e===1?v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>s("office"),children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),v.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),v.jsxs("div",{className:"entry-input-group",children:[v.jsx("input",{type:"text",value:f,onChange:M=>Ft(M.target.value),placeholder:"Company Code",disabled:N,autoFocus:!0,onKeyDown:M=>{M.key==="Enter"&&fe()}}),v.jsx("button",{className:"entry-submit-btn",onClick:fe,disabled:N||f.length<2,children:N?"...":""})]})]})}):_e===2?v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>{pe(1),J(null),Ye("")},children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("div",{className:"entry-company-badge",children:F?.name}),v.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),v.jsx("p",{className:"entry-hint",children:"This code is only for office staff"}),v.jsxs("div",{className:"entry-input-group",children:[v.jsx("input",{type:"password",value:je,onChange:M=>Ye(M.target.value),placeholder:"Office Code",disabled:N,autoFocus:!0,onKeyDown:M=>{M.key==="Enter"&&Ne()}}),v.jsx("button",{className:"entry-submit-btn",onClick:Ne,disabled:N||!je.trim(),children:N?"...":""})]})]})}):v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>{pe(2),Ye("")},children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("div",{className:"entry-company-badge",children:F?.name}),v.jsx("p",{className:"entry-subtitle",children:"Create your account"}),v.jsxs("div",{className:"entry-form",children:[v.jsx("input",{type:"text",value:Pe,onChange:M=>Ie(M.target.value),placeholder:"Your Name",autoFocus:!0}),v.jsx("input",{type:"email",value:st,onChange:M=>Wt(M.target.value),placeholder:"Email"}),v.jsx("input",{type:"password",value:ft,onChange:M=>Ge(M.target.value),placeholder:"Password (6+ characters)",onKeyDown:M=>{M.key==="Enter"&&ye()}}),v.jsx("button",{className:"entry-login-btn",onClick:ye,disabled:N,children:N?"Creating...":"Join Company"})]}),v.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})})}function $n({message:r,type:l="",onClose:c}){return B.useEffect(()=>{const u=setTimeout(c,3e3);return()=>clearTimeout(u)},[c]),v.jsx("div",{className:"toast-container",children:v.jsx("div",{className:`toast ${l}`,children:r})})}function Lh({compact:r=!1}){const{theme:l,toggleTheme:c}=jh();return v.jsx("button",{className:`theme-toggle ${r?"theme-toggle-compact":""}`,onClick:c,title:`Switch to ${l==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${l==="dark"?"light":"dark"} mode`,children:l==="dark"?v.jsxs(v.Fragment,{children:[v.jsx(Uh,{size:r?18:16}),!r&&v.jsx("span",{children:"Light"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Rh,{size:r?18:16}),!r&&v.jsx("span",{children:"Dark"})]})})}class Pn extends B.Component{constructor(l){super(l),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(l){return{hasError:!0}}componentDidCatch(l,c){this.setState({error:l,errorInfo:c}),console.error("ErrorBoundary caught an error:",l,c)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?v.jsx("div",{className:"error-boundary",children:v.jsxs("div",{className:"error-boundary-content",children:[v.jsx("div",{className:"error-icon",children:v.jsx(Hh,{size:48})}),v.jsx("h2",{children:"Something went wrong"}),v.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),v.jsxs("div",{className:"error-actions",children:[v.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),v.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function _m(){const[r,l]=B.useState(Ht()),[c,u]=B.useState(0),[s,f]=B.useState(!1),[p,g]=B.useState(!1);return B.useEffect(()=>{const w=Fu(async U=>{l(U),U&&p&&(f(!0),setTimeout(()=>f(!1),3e3)),U||g(!0);const N=await gi();u(N)});gi().then(u);const z=setInterval(async()=>{if(!Ht()){const U=await gi();u(U)}},5e3);return()=>{w(),clearInterval(z)}},[p]),r&&c===0&&!s?null:v.jsxs("div",{className:`offline-indicator ${r?"online":"offline"} ${s?"synced":""}`,children:[v.jsx("div",{className:"offline-indicator-content",children:r?s?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"online-icon",children:v.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("polyline",{points:"20 6 9 17 4 12"})})}),v.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):c>0?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"syncing-icon",children:v.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("polyline",{points:"23 4 23 10 17 10"}),v.jsx("polyline",{points:"1 20 1 14 7 14"}),v.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),v.jsxs("span",{className:"offline-text",children:["Syncing ",c,"..."]})]}):null:v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"offline-icon",children:v.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),v.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),v.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),v.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),v.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),v.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),v.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),v.jsxs("span",{className:"offline-text",children:["Offline",c>0&&v.jsxs("span",{className:"pending-badge",children:[c," pending"]})]})]})}),v.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}const Yh=B.lazy(()=>Ya(()=>import("./ForemanView-BaynRy8T.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Gh=B.lazy(()=>Ya(()=>import("./Dashboard-CzyrLA5p.js"),__vite__mapDeps([10,1,2,3,4,11,12,7,13,8,14,6,15,16,9]))),Qh=B.lazy(()=>Ya(()=>import("./Setup-DpO2p-KO.js"),__vite__mapDeps([17,13,7,8,9]))),Xh=B.lazy(()=>Ya(()=>import("./BrandingSettings-DOOKPyEp.js"),__vite__mapDeps([18,7,8,9]))),Zh=B.lazy(()=>Ya(()=>import("./PricingManager-Ca2sOpnC.js"),__vite__mapDeps([19,4,2,6,15,12,7,8,9]))),Vh=B.lazy(()=>Ya(()=>import("./PublicView-TedB-l03.js"),__vite__mapDeps([20,7,8,9]))),Kh=B.lazy(()=>Ya(()=>import("./SignaturePage-NNPEmuTd.js"),__vite__mapDeps([21,14,8,3,2,11,6,15,7,9]))),Jh=B.lazy(()=>Ya(()=>import("./MembershipManager-BJPTwaoK.js"),__vite__mapDeps([22,11,5,6,16,7,8,9])));function hi(){return v.jsxs("div",{className:"page-loader",children:[v.jsx(Qt,{className:"loading-logo"}),v.jsx("div",{className:"spinner"})]})}function Wh(){const[r,l]=B.useState("entry"),[c,u]=B.useState(null),[s,f]=B.useState(null),[p,g]=B.useState([]),[w,z]=B.useState([]),[U,N]=B.useState(null),[G,Z]=B.useState(null),[V,H]=B.useState(null),[ie,_e]=B.useState(!0),[pe,F]=B.useState("dashboard"),[J,je]=B.useState(null),[Ye,Pe]=B.useState(!1),[Ie,st]=B.useState(null),[Wt,ft]=B.useState(0);B.useEffect(()=>{const Q=window.location.pathname,de=Q.match(/^\/view\/([a-zA-Z0-9_-]+)$/),Te=Q.match(/^\/sign\/([a-zA-Z0-9_-]+)$/);de?(Z(de[1]),l("public"),_e(!1)):Te?(H(Te[1]),l("signature"),_e(!1)):Ge()},[]),B.useEffect(()=>{if(!h)return;const{data:{subscription:Q}}=_.auth.onAuthStateChange(async(de,Te)=>{de==="SIGNED_OUT"||de==="USER_DELETED"?(u(null),f(null),g([]),l("entry")):de==="TOKEN_REFRESHED"||de==="SIGNED_IN"&&!c&&Ge()});return()=>{Q?.unsubscribe()}},[c]);const Ge=async()=>{try{const{data:{user:Q}}=await _.auth.getUser();if(!Q){_e(!1);return}const{data:de,error:Te}=await _.from("users").select("*").eq("id",Q.id).single();if(de){u(de);let Ae=await at.getUserCompanies(Q.id);if(Ae.length===0&&de.company_id&&await at.repairLegacyUser(Q.id,de.company_id,de.role||"member")&&(Ae=await at.getUserCompanies(Q.id)),g(Ae),Ae.length===0){if(await at.getUserPendingMemberships(Q.id)>0){l("pending");return}k("No company access. Join a company to continue.","error"),await Ku.signOut();return}const Ve=localStorage.getItem("selectedCompanyId");let et=null;if(Ve&&Ae.find(ke=>ke.id===Ve)?et=Ae.find(ke=>ke.id===Ve):Ae.length>0&&(et=Ae[0]),et){const{data:ke}=await _.from("companies").select("*").eq("id",et.id).single();f(ke),l("office")}}}catch(Q){console.error("Auth check error:",Q)}finally{_e(!1)}},Ft=Q=>{N(Q),l("foreman")},Xt=async(Q,de)=>{try{const{data:Te,error:Ae}=await _.auth.signInWithPassword({email:Q,password:de});if(Ae){k(Ae.message||"Invalid credentials","error");return}const{data:Ve,error:et}=await _.from("users").select("*").eq("id",Te.user.id).single();if(et){console.error("User fetch error:",et),k("Error loading profile","error");return}if(Ve){u(Ve);let ke=await at.getUserCompanies(Te.user.id);ke.length===0&&Ve.company_id&&await at.repairLegacyUser(Te.user.id,Ve.company_id,Ve.role||"member")&&(ke=await at.getUserCompanies(Te.user.id)),g(ke);const fn=localStorage.getItem("selectedCompanyId");let Tt=null;if(fn&&ke.find(kt=>kt.id===fn)?Tt=ke.find(kt=>kt.id===fn):ke.length>0&&(Tt=ke[0]),Tt){const{data:kt}=await _.from("companies").select("*").eq("id",Tt.id).single();f(kt),l("office")}else await at.getUserPendingMemberships(Te.user.id)>0?l("pending"):k("No company access. Please contact admin.","error")}else k("Profile not found. Please contact admin.","error")}catch(Te){console.error("Login error:",Te),k("Login failed","error")}},dt=async Q=>{try{const{data:de}=await _.from("companies").select("*").eq("id",Q).single();de&&(f(de),localStorage.setItem("selectedCompanyId",Q),Pe(!1),F("dashboard"),k(`Switched to ${de.name}`,"success"))}catch(de){console.error("Switch company error:",de),k("Error switching company","error")}},A=async()=>{try{await Ku.signOut(),u(null),f(null),g([]),l("entry"),F("dashboard"),localStorage.removeItem("selectedCompanyId")}catch(Q){console.error("Logout error:",Q),k("Error signing out","error")}},R=async()=>{await Em(),N(null),l("entry")},k=B.useCallback((Q,de="")=>{je({message:Q,type:de})},[]),se=()=>{F("dashboard"),s?.id&&fe()},fe=async()=>{if(s?.id)try{const Q=await at.getProjects(s.id);z(Q)}catch(Q){console.error("Error loading projects:",Q)}};B.useEffect(()=>{s?.id&&r==="office"&&(fe(),Ne())},[s?.id,r]);const Ne=async()=>{if(s?.id)try{const de=(await at.getCompanyMemberships(s.id)).filter(Te=>Te.status==="pending").length;ft(de)}catch(Q){console.error("Error loading pending count:",Q)}},ye=()=>{st(null)};if(ie)return v.jsx(un,{children:v.jsx(cn,{companyId:s?.id,children:v.jsxs("div",{className:"loading-screen",children:[v.jsx(Qt,{className:"loading-logo"}),v.jsx("div",{className:"spinner"})]})})});if(r==="entry")return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsx(kh,{onForemanAccess:Ft,onOfficeLogin:Xt,onShowToast:k})}),J&&v.jsx($n,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(r==="public"&&G)return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsx(B.Suspense,{fallback:v.jsx(hi,{}),children:v.jsx(Vh,{shareToken:G})})}),J&&v.jsx($n,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(r==="signature"&&V)return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsx(B.Suspense,{fallback:v.jsx(hi,{}),children:v.jsx(Kh,{signatureToken:V})})}),J&&v.jsx($n,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(r==="pending")return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsxs("div",{className:"pending-approval-screen",children:[v.jsx(Qt,{className:"pending-logo"}),v.jsx("h2",{children:"Awaiting Approval"}),v.jsx("p",{children:"Your membership request has been submitted."}),v.jsx("p",{children:"A company admin will review your request."}),v.jsxs("div",{className:"pending-actions",children:[v.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Sign Out"}),v.jsx("button",{className:"btn btn-primary",onClick:Ge,children:"Check Status"})]})]})}),J&&v.jsx($n,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(r==="foreman"&&U)return v.jsx(un,{children:v.jsxs(cn,{companyId:U.company_id,children:[v.jsx(Pn,{children:v.jsx(B.Suspense,{fallback:v.jsx(hi,{}),children:v.jsx(Yh,{project:U,companyId:U.company_id,onShowToast:k,onExit:R})})}),v.jsx(_m,{}),J&&v.jsx($n,{message:J.message,type:J.type,onClose:()=>je(null)})]})});const He=p.find(Q=>Q.id===s?.id)?.access_level==="administrator"||s?.owner_user_id===c?.id;return v.jsx(un,{children:v.jsx(cn,{companyId:s?.id,children:v.jsxs("div",{children:[!h&&v.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),v.jsx("nav",{className:"nav",children:v.jsxs("div",{className:"nav-content",children:[v.jsx(Qt,{}),v.jsxs("div",{className:"nav-tabs",children:[v.jsx("button",{className:`nav-tab ${pe==="dashboard"?"active":""}`,onClick:()=>F("dashboard"),children:"Dashboard"}),v.jsx("button",{className:`nav-tab ${pe==="setup"?"active":""}`,onClick:()=>F("setup"),children:"+ New Project"}),v.jsx("button",{className:`nav-tab ${pe==="pricing"?"active":""}`,onClick:()=>F("pricing"),children:"Pricing"}),He&&v.jsx("button",{className:`nav-tab ${pe==="branding"?"active":""}`,onClick:()=>F("branding"),children:"Branding"}),He&&v.jsxs("button",{className:`nav-tab ${pe==="team"?"active":""}`,onClick:()=>F("team"),children:["Team",Wt>0&&v.jsx("span",{className:"nav-tab-badge",children:Wt})]})]}),v.jsxs("div",{className:"nav-user",children:[v.jsx(Lh,{compact:!0}),p.length>1&&v.jsxs("div",{className:"company-switcher",children:[v.jsxs("button",{className:"company-switcher-btn",onClick:()=>Pe(!Ye),children:[s?.name||"Select Company",v.jsx("span",{className:"switcher-arrow",children:""})]}),Ye&&v.jsx("div",{className:"company-dropdown",children:p.map(Q=>v.jsxs("button",{className:`company-option ${Q.id===s?.id?"active":""}`,onClick:()=>dt(Q.id),children:[Q.name,Q.id===s?.id&&v.jsx("span",{className:"check",children:""})]},Q.id))})]}),p.length<=1&&s&&v.jsx("span",{className:"nav-company-name",children:s.name}),v.jsx("span",{className:"nav-user-name",children:c?.name||c?.email}),v.jsx("button",{className:"nav-logout",onClick:A,children:"Sign Out"})]})]})}),v.jsx(Pn,{children:v.jsx(B.Suspense,{fallback:v.jsx(hi,{}),children:v.jsxs("div",{className:"container",children:[pe==="dashboard"&&v.jsx(Gh,{company:s,user:c,isAdmin:He,onShowToast:k,navigateToProjectId:Ie,onProjectNavigated:ye}),pe==="setup"&&v.jsx(Qh,{company:s,user:c,onProjectCreated:se,onShowToast:k}),pe==="pricing"&&v.jsx(Zh,{company:s,onShowToast:k}),pe==="branding"&&v.jsx(Xh,{company:s,onShowToast:k}),pe==="team"&&He&&v.jsx(Jh,{company:s,user:c,onShowToast:k})]},s?.id)})}),v.jsx(_m,{}),J&&v.jsx($n,{message:J.message,type:J.type,onClose:()=>je(null)})]})})})}ch.createRoot(document.getElementById("root")).render(v.jsx(ym.StrictMode,{children:v.jsx(Wh,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>{setInterval(()=>{r.update().catch(()=>{})},3e5)}).catch(()=>{})});export{Oh as B,zh as H,Qt as L,Ih as R,Hh as T,Lh as a,$n as b,Fr as c,at as d,Sh as e,bh as f,eg as g,h as i,v as j,ee as o,B as r,_ as s,wh as u};
