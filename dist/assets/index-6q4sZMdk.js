const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SignatureLinkGenerator-BorMNDtA.js","assets/icons-CRvlVhdL.js","assets/supabase-CgbGISss.js","assets/react-CVG0RKXH.js","assets/pdf-Dbfz8bwd.js","assets/TMClientSignature-DXs1iw9B.js","assets/Dashboard-Q9HM0WBN.js","assets/corCalculations-vdJc_BOT.js","assets/Setup-BMKaQUvd.js","assets/BrandingSettings-DgfhTeY8.js","assets/PricingManager-CefQYPsc.js","assets/PublicView-DHn_7yKh.js","assets/SignaturePage-BZdLHu6C.js","assets/SignatureCanvas-0sBkqzWv.js","assets/MembershipManager-C_26fPlT.js","assets/LandingPage-Cop6Tj4M.js","assets/PrivacyPolicy-DxXO0N7B.js","assets/TermsOfService-Dzxef8Sh.js","assets/index-sSYsjcJV.js","assets/index-Boe0Uq3g.js","assets/index-DmCARBTz.js","assets/index-Ci3GJRKs.js"])))=>i.map(i=>d[i]);
import{r as mm,a as y,H as qo,B as dq,A as dr,C as Ec,U as lN,b as fq,c as Vi,E as mq,d as hq,S as cN,M as uN,T as hm,D as dN,X as Rb,e as fN,L as Gs,F as Go,f as Lo,g as qb,h as pq,i as gq,j as _y,k as xy,l as vq,m as na,R as PS,P as Oc,n as yq,W as bq,Z as _q,G as xq,o as wq,p as jq,q as vf,s as MS,t as nf,u as Sq,v as mN,w as yf,x as hN,y as Eq,z as Oq,I as Cq,J as Aq,K as xc,N as Nq,O as kq,Q as Dq,V as Tq,Y as pN,_ as gN,$ as Pq,a0 as Mq,a1 as Rq,a2 as qq,a3 as Lq,a4 as vN,a5 as zq,a6 as Iq,a7 as Uq,a8 as Bq,a9 as $q,aa as Hq,ab as Fq,ac as Kq,ad as Yq,ae as Gq}from"./icons-CRvlVhdL.js";import{g as oi,c as yN}from"./supabase-CgbGISss.js";import{r as bN}from"./react-CVG0RKXH.js";import{_ as Mr}from"./pdf-Dbfz8bwd.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var _g={exports:{}},sc={};var RS;function Vq(){if(RS)return sc;RS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,s){var c=null;if(s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:n,key:c,ref:i!==void 0?i:null,props:s}}return sc.Fragment=t,sc.jsx=r,sc.jsxs=r,sc}var qS;function Wq(){return qS||(qS=1,_g.exports=Vq()),_g.exports}var d=Wq(),xg={exports:{}},lc={},wg={exports:{}},jg={};var LS;function Xq(){return LS||(LS=1,(function(e){function t(R,U){var J=R.length;R.push(U);e:for(;0<J;){var B=J-1>>>1,fe=R[B];if(0<i(fe,U))R[B]=U,R[J]=fe,J=B;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var U=R[0],J=R.pop();if(J!==U){R[0]=J;e:for(var B=0,fe=R.length,je=fe>>>1;B<je;){var te=2*(B+1)-1,H=R[te],Ee=te+1,Te=R[Ee];if(0>i(H,J))Ee<fe&&0>i(Te,H)?(R[B]=Te,R[Ee]=J,B=Ee):(R[B]=H,R[te]=J,B=te);else if(Ee<fe&&0>i(Te,J))R[B]=Te,R[Ee]=J,B=Ee;else break e}}return U}function i(R,U){var J=R.sortIndex-U.sortIndex;return J!==0?J:R.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var m=[],h=[],g=1,p=null,_=3,x=!1,w=!1,j=!1,S=!1,O=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(R){for(var U=r(h);U!==null;){if(U.callback===null)n(h);else if(U.startTime<=R)n(h),U.sortIndex=U.expirationTime,t(m,U);else break;U=r(h)}}function D(R){if(j=!1,k(R),!w)if(r(m)!==null)w=!0,M||(M=!0,I());else{var U=r(h);U!==null&&q(D,U.startTime-R)}}var M=!1,z=-1,K=5,Q=-1;function ne(){return S?!0:!(e.unstable_now()-Q<K)}function G(){if(S=!1,M){var R=e.unstable_now();Q=R;var U=!0;try{e:{w=!1,j&&(j=!1,C(z),z=-1),x=!0;var J=_;try{t:{for(k(R),p=r(m);p!==null&&!(p.expirationTime>R&&ne());){var B=p.callback;if(typeof B=="function"){p.callback=null,_=p.priorityLevel;var fe=B(p.expirationTime<=R);if(R=e.unstable_now(),typeof fe=="function"){p.callback=fe,k(R),U=!0;break t}p===r(m)&&n(m),k(R)}else n(m);p=r(m)}if(p!==null)U=!0;else{var je=r(h);je!==null&&q(D,je.startTime-R),U=!1}}break e}finally{p=null,_=J,x=!1}U=void 0}}finally{U?I():M=!1}}}var I;if(typeof A=="function")I=function(){A(G)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,pe=ie.port2;ie.port1.onmessage=G,I=function(){pe.postMessage(null)}}else I=function(){O(G,0)};function q(R,U){z=O(function(){R(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(R){switch(_){case 1:case 2:case 3:var U=3;break;default:U=_}var J=_;_=U;try{return R()}finally{_=J}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var J=_;_=R;try{return U()}finally{_=J}},e.unstable_scheduleCallback=function(R,U,J){var B=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?B+J:B):J=B,R){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=J+fe,R={id:g++,callback:U,priorityLevel:R,startTime:J,expirationTime:fe,sortIndex:-1},J>B?(R.sortIndex=J,t(h,R),r(m)===null&&R===r(h)&&(j?(C(z),z=-1):j=!0,q(D,J-B))):(R.sortIndex=fe,t(m,R),w||x||(w=!0,M||(M=!0,I()))),R},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function(R){var U=_;return function(){var J=_;_=U;try{return R.apply(this,arguments)}finally{_=J}}}})(jg)),jg}var zS;function Zq(){return zS||(zS=1,wg.exports=Xq()),wg.exports}var IS;function Qq(){if(IS)return lc;IS=1;var e=Zq(),t=mm(),r=bN();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,l=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(l=o.return),a=o.return;while(a)}return o.tag===3?l:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function m(a){if(s(a)!==a)throw Error(n(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(n(188));return o!==a?null:a}for(var l=a,f=o;;){var v=l.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){l=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===l)return m(v),a;if(b===f)return m(v),o;b=b.sibling}throw Error(n(188))}if(l.return!==f.return)l=v,f=b;else{for(var E=!1,N=v.child;N;){if(N===l){E=!0,l=v,f=b;break}if(N===f){E=!0,f=v,l=b;break}N=N.sibling}if(!E){for(N=b.child;N;){if(N===l){E=!0,l=b,f=v;break}if(N===f){E=!0,f=b,l=v;break}N=N.sibling}if(!E)throw Error(n(189))}}if(l.alternate!==f)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?a:o}function g(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=g(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function I(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var ie=Symbol.for("react.client.reference");function pe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ie?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case j:return"Fragment";case O:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case Q:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case A:return a.displayName||"Context";case C:return(a._context.displayName||"Context")+".Consumer";case k:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return o=a.displayName||null,o!==null?o:pe(a.type)||"Memo";case K:o=a._payload,a=a._init;try{return pe(a(o))}catch{}}return null}var q=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},B=[],fe=-1;function je(a){return{current:a}}function te(a){0>fe||(a.current=B[fe],B[fe]=null,fe--)}function H(a,o){fe++,B[fe]=a.current,a.current=o}var Ee=je(null),Te=je(null),Ie=je(null),ge=je(null);function Le(a,o){switch(H(Ie,o),H(Te,a),H(Ee,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?rS(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=rS(o),a=nS(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}te(Ee),H(Ee,a)}function ee(){te(Ee),te(Te),te(Ie)}function we(a){a.memoizedState!==null&&H(ge,a);var o=Ee.current,l=nS(o,a.type);o!==l&&(H(Te,a),H(Ee,l))}function xe(a){Te.current===a&&(te(Ee),te(Te)),ge.current===a&&(te(ge),nc._currentValue=J)}var oe,Fe;function ve(a){if(oe===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);oe=o&&o[1]||"",Fe=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+a+Fe}var Ne=!1;function Me(a,o){if(!a||Ne)return"";Ne=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(re){var Z=re}Reflect.construct(a,[],de)}else{try{de.call()}catch(re){Z=re}a.call(de.prototype)}}else{try{throw Error()}catch(re){Z=re}(de=a())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(re){if(re&&Z&&typeof re.stack=="string")return[re.stack,Z.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),E=b[0],N=b[1];if(E&&N){var L=E.split(`
`),W=N.split(`
`);for(v=f=0;f<L.length&&!L[f].includes("DetermineComponentFrameRoot");)f++;for(;v<W.length&&!W[v].includes("DetermineComponentFrameRoot");)v++;if(f===L.length||v===W.length)for(f=L.length-1,v=W.length-1;1<=f&&0<=v&&L[f]!==W[v];)v--;for(;1<=f&&0<=v;f--,v--)if(L[f]!==W[v]){if(f!==1||v!==1)do if(f--,v--,0>v||L[f]!==W[v]){var se=`
`+L[f].replace(" at new "," at ");return a.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",a.displayName)),se}while(1<=f&&0<=v);break}}}finally{Ne=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?ve(l):""}function Et(a,o){switch(a.tag){case 26:case 27:case 5:return ve(a.type);case 16:return ve("Lazy");case 13:return a.child!==o&&o!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return Me(a.type,!1);case 11:return Me(a.type.render,!1);case 1:return Me(a.type,!0);case 31:return ve("Activity");default:return""}}function Re(a){try{var o="",l=null;do o+=Et(a,l),l=a,a=a.return;while(a);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Bt=Object.prototype.hasOwnProperty,_t=e.unstable_scheduleCallback,Nt=e.unstable_cancelCallback,Kr=e.unstable_shouldYield,jt=e.unstable_requestPaint,Ge=e.unstable_now,Yr=e.unstable_getCurrentPriorityLevel,Sn=e.unstable_ImmediatePriority,Gr=e.unstable_UserBlockingPriority,Er=e.unstable_NormalPriority,Vt=e.unstable_LowPriority,he=e.unstable_IdlePriority,st=e.log,En=e.unstable_setDisableYieldValue,er=null,$t=null;function zt(a){if(typeof st=="function"&&En(a),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(er,a)}catch{}}var ht=Math.clz32?Math.clz32:ua,an=Math.log,Yn=Math.LN2;function ua(a){return a>>>=0,a===0?32:31-(an(a)/Yn|0)|0}var pi=256,gi=262144,Ea=4194304;function On(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function vi(a,o,l){var f=a.pendingLanes;if(f===0)return 0;var v=0,b=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var N=f&134217727;return N!==0?(f=N&~b,f!==0?v=On(f):(E&=N,E!==0?v=On(E):l||(l=N&~a,l!==0&&(v=On(l))))):(N=f&~b,N!==0?v=On(N):E!==0?v=On(E):l||(l=f&~a,l!==0&&(v=On(l)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,l=o&-o,b>=l||b===32&&(l&4194048)!==0)?o:v}function Oa(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function hl(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var a=Ea;return Ea<<=1,(Ea&62914560)===0&&(Ea=4194304),a}function Gn(a){for(var o=[],l=0;31>l;l++)o.push(a);return o}function Ca(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function pl(a,o,l,f,v,b){var E=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var N=a.entanglements,L=a.expirationTimes,W=a.hiddenUpdates;for(l=E&~l;0<l;){var se=31-ht(l),de=1<<se;N[se]=0,L[se]=-1;var Z=W[se];if(Z!==null)for(W[se]=null,se=0;se<Z.length;se++){var re=Z[se];re!==null&&(re.lane&=-536870913)}l&=~de}f!==0&&yu(a,f,0),b!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=b&~(E&~o))}function yu(a,o,l){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-ht(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|l&261930}function bu(a,o){var l=a.entangledLanes|=o;for(a=a.entanglements;l;){var f=31-ht(l),v=1<<f;v&o|a[f]&o&&(a[f]|=o),l&=~v}}function Vn(a,o){var l=o&-o;return l=(l&42)!==0?1:gl(l),(l&(a.suspendedLanes|o))!==0?0:l}function gl(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function vl(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function no(){var a=U.p;return a!==0?a:(a=window.event,a===void 0?32:OS(a.type))}function ao(a,o){var l=U.p;try{return U.p=a,o()}finally{U.p=l}}var on=Math.random().toString(36).slice(2),Ht="__reactFiber$"+on,cr="__reactProps$"+on,da="__reactContainer$"+on,io="__reactEvents$"+on,_u="__reactListeners$"+on,yl="__reactHandles$"+on,bl="__reactResources$"+on,ts="__reactMarker$"+on;function rs(a){delete a[Ht],delete a[cr],delete a[io],delete a[_u],delete a[yl]}function Wn(a){var o=a[Ht];if(o)return o;for(var l=a.parentNode;l;){if(o=l[da]||l[Ht]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(a=uS(a);a!==null;){if(l=a[Ht])return l;a=uS(a)}return o}a=l,l=a.parentNode}return null}function yi(a){if(a=a[Ht]||a[da]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function oo(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function Y(a){var o=a[bl];return o||(o=a[bl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ce(a){a[ts]=!0}var me=new Set,le={};function ae(a,o){Se(a,o),Se(a+"Capture",o)}function Se(a,o){for(le[a]=o,a=0;a<o.length;a++)me.add(o[a])}var Ue=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ke={},ut={};function Lr(a){return Bt.call(ut,a)?!0:Bt.call(Ke,a)?!1:Ue.test(a)?ut[a]=!0:(Ke[a]=!0,!1)}function et(a,o,l){if(Lr(o))if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+l)}}function Wt(a,o,l){if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+l)}}function Xn(a,o,l,f){if(f===null)a.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(o,l,""+f)}}function Cn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function V_(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function a2(a,o,l){var f=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,b=f.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function(E){l=""+E,b.call(this,E)}}),Object.defineProperty(a,o,{enumerable:f.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function mh(a){if(!a._valueTracker){var o=V_(a)?"checked":"value";a._valueTracker=a2(a,o,""+a[o])}}function W_(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var l=o.getValue(),f="";return a&&(f=V_(a)?a.checked?"true":"false":a.value),a=f,a!==l?(o.setValue(a),!0):!1}function xu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var i2=/[\n"\\]/g;function An(a){return a.replace(i2,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function hh(a,o,l,f,v,b,E,N){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),o!=null?E==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Cn(o)):a.value!==""+Cn(o)&&(a.value=""+Cn(o)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),o!=null?ph(a,E,Cn(o)):l!=null?ph(a,E,Cn(l)):f!=null&&a.removeAttribute("value"),v==null&&b!=null&&(a.defaultChecked=!!b),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+Cn(N):a.removeAttribute("name")}function X_(a,o,l,f,v,b,E,N){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){mh(a);return}l=l!=null?""+Cn(l):"",o=o!=null?""+Cn(o):l,N||o===a.value||(a.value=o),a.defaultValue=o}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=N?a.checked:!!f,a.defaultChecked=!!f,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E),mh(a)}function ph(a,o,l){o==="number"&&xu(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function ns(a,o,l,f){if(a=a.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<a.length;l++)v=o.hasOwnProperty("$"+a[l].value),a[l].selected!==v&&(a[l].selected=v),v&&f&&(a[l].defaultSelected=!0)}else{for(l=""+Cn(l),o=null,v=0;v<a.length;v++){if(a[v].value===l){a[v].selected=!0,f&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function Z_(a,o,l){if(o!=null&&(o=""+Cn(o),o!==a.value&&(a.value=o),l==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=l!=null?""+Cn(l):""}function Q_(a,o,l,f){if(o==null){if(f!=null){if(l!=null)throw Error(n(92));if(q(f)){if(1<f.length)throw Error(n(93));f=f[0]}l=f}l==null&&(l=""),o=l}l=Cn(o),a.defaultValue=l,f=a.textContent,f===l&&f!==""&&f!==null&&(a.value=f),mh(a)}function as(a,o){if(o){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=o;return}}a.textContent=o}var o2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function J_(a,o,l){var f=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,l):typeof l!="number"||l===0||o2.has(o)?o==="float"?a.cssFloat=l:a[o]=(""+l).trim():a[o]=l+"px"}function ex(a,o,l){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,l!=null){for(var f in l)!l.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var v in o)f=o[v],o.hasOwnProperty(v)&&l[v]!==f&&J_(a,v,f)}else for(var b in o)o.hasOwnProperty(b)&&J_(a,b,o[b])}function gh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var s2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),l2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wu(a){return l2.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Aa(){}var vh=null;function yh(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var is=null,os=null;function tx(a){var o=yi(a);if(o&&(a=o.stateNode)){var l=a[cr]||null;e:switch(a=o.stateNode,o.type){case"input":if(hh(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+An(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var f=l[o];if(f!==a&&f.form===a.form){var v=f[cr]||null;if(!v)throw Error(n(90));hh(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<l.length;o++)f=l[o],f.form===a.form&&W_(f)}break e;case"textarea":Z_(a,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&ns(a,!!l.multiple,o,!1)}}}var bh=!1;function rx(a,o,l){if(bh)return a(o,l);bh=!0;try{var f=a(o);return f}finally{if(bh=!1,(is!==null||os!==null)&&(cd(),is&&(o=is,a=os,os=is=null,tx(o),a)))for(o=0;o<a.length;o++)tx(a[o])}}function _l(a,o){var l=a.stateNode;if(l===null)return null;var f=l[cr]||null;if(f===null)return null;l=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_h=!1;if(Na)try{var xl={};Object.defineProperty(xl,"passive",{get:function(){_h=!0}}),window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{_h=!1}var bi=null,xh=null,ju=null;function nx(){if(ju)return ju;var a,o=xh,l=o.length,f,v="value"in bi?bi.value:bi.textContent,b=v.length;for(a=0;a<l&&o[a]===v[a];a++);var E=l-a;for(f=1;f<=E&&o[l-f]===v[b-f];f++);return ju=v.slice(a,1<f?1-f:void 0)}function Su(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Eu(){return!0}function ax(){return!1}function Vr(a){function o(l,f,v,b,E){this._reactName=l,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(l=a[N],this[N]=l?l(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Eu:ax,this.isPropagationStopped=ax,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Eu)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Eu)},persist:function(){},isPersistent:Eu}),o}var so={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=Vr(so),wl=p({},so,{view:0,detail:0}),c2=Vr(wl),wh,jh,jl,Cu=p({},wl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Eh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==jl&&(jl&&a.type==="mousemove"?(wh=a.screenX-jl.screenX,jh=a.screenY-jl.screenY):jh=wh=0,jl=a),wh)},movementY:function(a){return"movementY"in a?a.movementY:jh}}),ix=Vr(Cu),u2=p({},Cu,{dataTransfer:0}),d2=Vr(u2),f2=p({},wl,{relatedTarget:0}),Sh=Vr(f2),m2=p({},so,{animationName:0,elapsedTime:0,pseudoElement:0}),h2=Vr(m2),p2=p({},so,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),g2=Vr(p2),v2=p({},so,{data:0}),ox=Vr(v2),y2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x2(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=_2[a])?!!o[a]:!1}function Eh(){return x2}var w2=p({},wl,{key:function(a){if(a.key){var o=y2[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=Su(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?b2[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Eh,charCode:function(a){return a.type==="keypress"?Su(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Su(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),j2=Vr(w2),S2=p({},Cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sx=Vr(S2),E2=p({},wl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Eh}),O2=Vr(E2),C2=p({},so,{propertyName:0,elapsedTime:0,pseudoElement:0}),A2=Vr(C2),N2=p({},Cu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),k2=Vr(N2),D2=p({},so,{newState:0,oldState:0}),T2=Vr(D2),P2=[9,13,27,32],Oh=Na&&"CompositionEvent"in window,Sl=null;Na&&"documentMode"in document&&(Sl=document.documentMode);var M2=Na&&"TextEvent"in window&&!Sl,lx=Na&&(!Oh||Sl&&8<Sl&&11>=Sl),cx=" ",ux=!1;function dx(a,o){switch(a){case"keyup":return P2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fx(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ss=!1;function R2(a,o){switch(a){case"compositionend":return fx(o);case"keypress":return o.which!==32?null:(ux=!0,cx);case"textInput":return a=o.data,a===cx&&ux?null:a;default:return null}}function q2(a,o){if(ss)return a==="compositionend"||!Oh&&dx(a,o)?(a=nx(),ju=xh=bi=null,ss=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return lx&&o.locale!=="ko"?null:o.data;default:return null}}var L2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mx(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!L2[a.type]:o==="textarea"}function hx(a,o,l,f){is?os?os.push(f):os=[f]:is=f,o=gd(o,"onChange"),0<o.length&&(l=new Ou("onChange","change",null,l,f),a.push({event:l,listeners:o}))}var El=null,Ol=null;function z2(a){Xj(a,0)}function Au(a){var o=oo(a);if(W_(o))return a}function px(a,o){if(a==="change")return o}var gx=!1;if(Na){var Ch;if(Na){var Ah="oninput"in document;if(!Ah){var vx=document.createElement("div");vx.setAttribute("oninput","return;"),Ah=typeof vx.oninput=="function"}Ch=Ah}else Ch=!1;gx=Ch&&(!document.documentMode||9<document.documentMode)}function yx(){El&&(El.detachEvent("onpropertychange",bx),Ol=El=null)}function bx(a){if(a.propertyName==="value"&&Au(Ol)){var o=[];hx(o,Ol,a,yh(a)),rx(z2,o)}}function I2(a,o,l){a==="focusin"?(yx(),El=o,Ol=l,El.attachEvent("onpropertychange",bx)):a==="focusout"&&yx()}function U2(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Au(Ol)}function B2(a,o){if(a==="click")return Au(o)}function $2(a,o){if(a==="input"||a==="change")return Au(o)}function H2(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var sn=typeof Object.is=="function"?Object.is:H2;function Cl(a,o){if(sn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var l=Object.keys(a),f=Object.keys(o);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var v=l[f];if(!Bt.call(o,v)||!sn(a[v],o[v]))return!1}return!0}function _x(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function xx(a,o){var l=_x(a);a=0;for(var f;l;){if(l.nodeType===3){if(f=a+l.textContent.length,a<=o&&f>=o)return{node:l,offset:o-a};a=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=_x(l)}}function wx(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?wx(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function jx(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=xu(a.document);o instanceof a.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)a=o.contentWindow;else break;o=xu(a.document)}return o}function Nh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var F2=Na&&"documentMode"in document&&11>=document.documentMode,ls=null,kh=null,Al=null,Dh=!1;function Sx(a,o,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Dh||ls==null||ls!==xu(f)||(f=ls,"selectionStart"in f&&Nh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Al&&Cl(Al,f)||(Al=f,f=gd(kh,"onSelect"),0<f.length&&(o=new Ou("onSelect","select",null,o,l),a.push({event:o,listeners:f}),o.target=ls)))}function lo(a,o){var l={};return l[a.toLowerCase()]=o.toLowerCase(),l["Webkit"+a]="webkit"+o,l["Moz"+a]="moz"+o,l}var cs={animationend:lo("Animation","AnimationEnd"),animationiteration:lo("Animation","AnimationIteration"),animationstart:lo("Animation","AnimationStart"),transitionrun:lo("Transition","TransitionRun"),transitionstart:lo("Transition","TransitionStart"),transitioncancel:lo("Transition","TransitionCancel"),transitionend:lo("Transition","TransitionEnd")},Th={},Ex={};Na&&(Ex=document.createElement("div").style,"AnimationEvent"in window||(delete cs.animationend.animation,delete cs.animationiteration.animation,delete cs.animationstart.animation),"TransitionEvent"in window||delete cs.transitionend.transition);function co(a){if(Th[a])return Th[a];if(!cs[a])return a;var o=cs[a],l;for(l in o)if(o.hasOwnProperty(l)&&l in Ex)return Th[a]=o[l];return a}var Ox=co("animationend"),Cx=co("animationiteration"),Ax=co("animationstart"),K2=co("transitionrun"),Y2=co("transitionstart"),G2=co("transitioncancel"),Nx=co("transitionend"),kx=new Map,Ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ph.push("scrollEnd");function Zn(a,o){kx.set(a,o),ae(o,[a])}var Nu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Nn=[],us=0,Mh=0;function ku(){for(var a=us,o=Mh=us=0;o<a;){var l=Nn[o];Nn[o++]=null;var f=Nn[o];Nn[o++]=null;var v=Nn[o];Nn[o++]=null;var b=Nn[o];if(Nn[o++]=null,f!==null&&v!==null){var E=f.pending;E===null?v.next=v:(v.next=E.next,E.next=v),f.pending=v}b!==0&&Dx(l,v,b)}}function Du(a,o,l,f){Nn[us++]=a,Nn[us++]=o,Nn[us++]=l,Nn[us++]=f,Mh|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function Rh(a,o,l,f){return Du(a,o,l,f),Tu(a)}function uo(a,o){return Du(a,null,null,o),Tu(a)}function Dx(a,o,l){a.lanes|=l;var f=a.alternate;f!==null&&(f.lanes|=l);for(var v=!1,b=a.return;b!==null;)b.childLanes|=l,f=b.alternate,f!==null&&(f.childLanes|=l),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(v=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,v&&o!==null&&(v=31-ht(l),a=b.hiddenUpdates,f=a[v],f===null?a[v]=[o]:f.push(o),o.lane=l|536870912),b):null}function Tu(a){if(50<Xl)throw Xl=0,Fp=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ds={};function V2(a,o,l,f){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(a,o,l,f){return new V2(a,o,l,f)}function qh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ka(a,o){var l=a.alternate;return l===null?(l=ln(a.tag,o,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=o,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,o=a.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function Tx(a,o){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,o=l.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Pu(a,o,l,f,v,b){var E=0;if(f=a,typeof a=="function")qh(a)&&(E=1);else if(typeof a=="string")E=JR(a,l,Ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Q:return a=ln(31,l,o,v),a.elementType=Q,a.lanes=b,a;case j:return fo(l.children,v,b,o);case S:E=8,v|=24;break;case O:return a=ln(12,l,o,v|2),a.elementType=O,a.lanes=b,a;case D:return a=ln(13,l,o,v),a.elementType=D,a.lanes=b,a;case M:return a=ln(19,l,o,v),a.elementType=M,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:E=10;break e;case C:E=9;break e;case k:E=11;break e;case z:E=14;break e;case K:E=16,f=null;break e}E=29,l=Error(n(130,a===null?"null":typeof a,"")),f=null}return o=ln(E,l,o,v),o.elementType=a,o.type=f,o.lanes=b,o}function fo(a,o,l,f){return a=ln(7,a,f,o),a.lanes=l,a}function Lh(a,o,l){return a=ln(6,a,null,o),a.lanes=l,a}function Px(a){var o=ln(18,null,null,0);return o.stateNode=a,o}function zh(a,o,l){return o=ln(4,a.children!==null?a.children:[],a.key,o),o.lanes=l,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Mx=new WeakMap;function kn(a,o){if(typeof a=="object"&&a!==null){var l=Mx.get(a);return l!==void 0?l:(o={value:a,source:o,stack:Re(o)},Mx.set(a,o),o)}return{value:a,source:o,stack:Re(o)}}var fs=[],ms=0,Mu=null,Nl=0,Dn=[],Tn=0,_i=null,fa=1,ma="";function Da(a,o){fs[ms++]=Nl,fs[ms++]=Mu,Mu=a,Nl=o}function Rx(a,o,l){Dn[Tn++]=fa,Dn[Tn++]=ma,Dn[Tn++]=_i,_i=a;var f=fa;a=ma;var v=32-ht(f)-1;f&=~(1<<v),l+=1;var b=32-ht(o)+v;if(30<b){var E=v-v%5;b=(f&(1<<E)-1).toString(32),f>>=E,v-=E,fa=1<<32-ht(o)+v|l<<v|f,ma=b+a}else fa=1<<b|l<<v|f,ma=a}function Ih(a){a.return!==null&&(Da(a,1),Rx(a,1,0))}function Uh(a){for(;a===Mu;)Mu=fs[--ms],fs[ms]=null,Nl=fs[--ms],fs[ms]=null;for(;a===_i;)_i=Dn[--Tn],Dn[Tn]=null,ma=Dn[--Tn],Dn[Tn]=null,fa=Dn[--Tn],Dn[Tn]=null}function qx(a,o){Dn[Tn++]=fa,Dn[Tn++]=ma,Dn[Tn++]=_i,fa=o.id,ma=o.overflow,_i=a}var Or=null,Ot=null,Je=!1,xi=null,Pn=!1,Bh=Error(n(519));function wi(a){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(kn(o,a)),Bh}function Lx(a){var o=a.stateNode,l=a.type,f=a.memoizedProps;switch(o[Ht]=a,o[cr]=f,l){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(l=0;l<Ql.length;l++)Xe(Ql[l],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),X_(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Q_(o,f.value,f.defaultValue,f.children)}l=f.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||f.suppressHydrationWarning===!0||eS(o.textContent,l)?(f.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),f.onScroll!=null&&Xe("scroll",o),f.onScrollEnd!=null&&Xe("scrollend",o),f.onClick!=null&&(o.onclick=Aa),o=!0):o=!1,o||wi(a,!0)}function zx(a){for(Or=a.return;Or;)switch(Or.tag){case 5:case 31:case 13:Pn=!1;return;case 27:case 3:Pn=!0;return;default:Or=Or.return}}function hs(a){if(a!==Or)return!1;if(!Je)return zx(a),Je=!0,!1;var o=a.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||ig(a.type,a.memoizedProps)),l=!l),l&&Ot&&wi(a),zx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Ot=cS(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));Ot=cS(a)}else o===27?(o=Ot,qi(a.type)?(a=ug,ug=null,Ot=a):Ot=o):Ot=Or?Rn(a.stateNode.nextSibling):null;return!0}function mo(){Ot=Or=null,Je=!1}function $h(){var a=xi;return a!==null&&(Qr===null?Qr=a:Qr.push.apply(Qr,a),xi=null),a}function kl(a){xi===null?xi=[a]:xi.push(a)}var Hh=je(null),ho=null,Ta=null;function ji(a,o,l){H(Hh,o._currentValue),o._currentValue=l}function Pa(a){a._currentValue=Hh.current,te(Hh)}function Fh(a,o,l){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===l)break;a=a.return}}function Kh(a,o,l,f){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var b=v.dependencies;if(b!==null){var E=v.child;b=b.firstContext;e:for(;b!==null;){var N=b;b=v;for(var L=0;L<o.length;L++)if(N.context===o[L]){b.lanes|=l,N=b.alternate,N!==null&&(N.lanes|=l),Fh(b.return,l,a),f||(E=null);break e}b=N.next}}else if(v.tag===18){if(E=v.return,E===null)throw Error(n(341));E.lanes|=l,b=E.alternate,b!==null&&(b.lanes|=l),Fh(E,l,a),E=null}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===a){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}}function ps(a,o,l,f){a=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var E=v.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var N=v.type;sn(v.pendingProps.value,E.value)||(a!==null?a.push(N):a=[N])}}else if(v===ge.current){if(E=v.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(nc):a=[nc])}v=v.return}a!==null&&Kh(o,a,l,f),o.flags|=262144}function Ru(a){for(a=a.firstContext;a!==null;){if(!sn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function po(a){ho=a,Ta=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Cr(a){return Ix(ho,a)}function qu(a,o){return ho===null&&po(a),Ix(a,o)}function Ix(a,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Ta===null){if(a===null)throw Error(n(308));Ta=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Ta=Ta.next=o;return l}var W2=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(l,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(l){return l()})}},X2=e.unstable_scheduleCallback,Z2=e.unstable_NormalPriority,tr={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new W2,data:new Map,refCount:0}}function Dl(a){a.refCount--,a.refCount===0&&X2(Z2,function(){a.controller.abort()})}var Tl=null,Gh=0,gs=0,vs=null;function Q2(a,o){if(Tl===null){var l=Tl=[];Gh=0,gs=Xp(),vs={status:"pending",value:void 0,then:function(f){l.push(f)}}}return Gh++,o.then(Ux,Ux),o}function Ux(){if(--Gh===0&&Tl!==null){vs!==null&&(vs.status="fulfilled");var a=Tl;Tl=null,gs=0,vs=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function J2(a,o){var l=[],f={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var v=0;v<l.length;v++)(0,l[v])(o)},function(v){for(f.status="rejected",f.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),f}var Bx=R.S;R.S=function(a,o){Sj=Ge(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Q2(a,o),Bx!==null&&Bx(a,o)};var go=je(null);function Vh(){var a=go.current;return a!==null?a:xt.pooledCache}function Lu(a,o){o===null?H(go,go.current):H(go,o.pool)}function $x(){var a=Vh();return a===null?null:{parent:tr._currentValue,pool:a}}var ys=Error(n(460)),Wh=Error(n(474)),zu=Error(n(542)),Iu={then:function(){}};function Hx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Fx(a,o,l){switch(l=a[l],l===void 0?a.push(o):l!==o&&(o.then(Aa,Aa),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Yx(a),a;default:if(typeof o.status=="string")o.then(Aa,Aa);else{if(a=xt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=f}},function(f){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Yx(a),a}throw yo=o,ys}}function vo(a){try{var o=a._init;return o(a._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(yo=l,ys):l}}var yo=null;function Kx(){if(yo===null)throw Error(n(459));var a=yo;return yo=null,a}function Yx(a){if(a===ys||a===zu)throw Error(n(483))}var bs=null,Pl=0;function Uu(a){var o=Pl;return Pl+=1,bs===null&&(bs=[]),Fx(bs,a,o)}function Ml(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Bu(a,o){throw o.$$typeof===_?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Gx(a){function o(F,$){if(a){var V=F.deletions;V===null?(F.deletions=[$],F.flags|=16):V.push($)}}function l(F,$){if(!a)return null;for(;$!==null;)o(F,$),$=$.sibling;return null}function f(F){for(var $=new Map;F!==null;)F.key!==null?$.set(F.key,F):$.set(F.index,F),F=F.sibling;return $}function v(F,$){return F=ka(F,$),F.index=0,F.sibling=null,F}function b(F,$,V){return F.index=V,a?(V=F.alternate,V!==null?(V=V.index,V<$?(F.flags|=67108866,$):V):(F.flags|=67108866,$)):(F.flags|=1048576,$)}function E(F){return a&&F.alternate===null&&(F.flags|=67108866),F}function N(F,$,V,ue){return $===null||$.tag!==6?($=Lh(V,F.mode,ue),$.return=F,$):($=v($,V),$.return=F,$)}function L(F,$,V,ue){var qe=V.type;return qe===j?se(F,$,V.props.children,ue,V.key):$!==null&&($.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===K&&vo(qe)===$.type)?($=v($,V.props),Ml($,V),$.return=F,$):($=Pu(V.type,V.key,V.props,null,F.mode,ue),Ml($,V),$.return=F,$)}function W(F,$,V,ue){return $===null||$.tag!==4||$.stateNode.containerInfo!==V.containerInfo||$.stateNode.implementation!==V.implementation?($=zh(V,F.mode,ue),$.return=F,$):($=v($,V.children||[]),$.return=F,$)}function se(F,$,V,ue,qe){return $===null||$.tag!==7?($=fo(V,F.mode,ue,qe),$.return=F,$):($=v($,V),$.return=F,$)}function de(F,$,V){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Lh(""+$,F.mode,V),$.return=F,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case x:return V=Pu($.type,$.key,$.props,null,F.mode,V),Ml(V,$),V.return=F,V;case w:return $=zh($,F.mode,V),$.return=F,$;case K:return $=vo($),de(F,$,V)}if(q($)||I($))return $=fo($,F.mode,V,null),$.return=F,$;if(typeof $.then=="function")return de(F,Uu($),V);if($.$$typeof===A)return de(F,qu(F,$),V);Bu(F,$)}return null}function Z(F,$,V,ue){var qe=$!==null?$.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return qe!==null?null:N(F,$,""+V,ue);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return V.key===qe?L(F,$,V,ue):null;case w:return V.key===qe?W(F,$,V,ue):null;case K:return V=vo(V),Z(F,$,V,ue)}if(q(V)||I(V))return qe!==null?null:se(F,$,V,ue,null);if(typeof V.then=="function")return Z(F,$,Uu(V),ue);if(V.$$typeof===A)return Z(F,$,qu(F,V),ue);Bu(F,V)}return null}function re(F,$,V,ue,qe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return F=F.get(V)||null,N($,F,""+ue,qe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:return F=F.get(ue.key===null?V:ue.key)||null,L($,F,ue,qe);case w:return F=F.get(ue.key===null?V:ue.key)||null,W($,F,ue,qe);case K:return ue=vo(ue),re(F,$,V,ue,qe)}if(q(ue)||I(ue))return F=F.get(V)||null,se($,F,ue,qe,null);if(typeof ue.then=="function")return re(F,$,V,Uu(ue),qe);if(ue.$$typeof===A)return re(F,$,V,qu($,ue),qe);Bu($,ue)}return null}function Ae(F,$,V,ue){for(var qe=null,nt=null,Pe=$,$e=$=0,Qe=null;Pe!==null&&$e<V.length;$e++){Pe.index>$e?(Qe=Pe,Pe=null):Qe=Pe.sibling;var at=Z(F,Pe,V[$e],ue);if(at===null){Pe===null&&(Pe=Qe);break}a&&Pe&&at.alternate===null&&o(F,Pe),$=b(at,$,$e),nt===null?qe=at:nt.sibling=at,nt=at,Pe=Qe}if($e===V.length)return l(F,Pe),Je&&Da(F,$e),qe;if(Pe===null){for(;$e<V.length;$e++)Pe=de(F,V[$e],ue),Pe!==null&&($=b(Pe,$,$e),nt===null?qe=Pe:nt.sibling=Pe,nt=Pe);return Je&&Da(F,$e),qe}for(Pe=f(Pe);$e<V.length;$e++)Qe=re(Pe,F,$e,V[$e],ue),Qe!==null&&(a&&Qe.alternate!==null&&Pe.delete(Qe.key===null?$e:Qe.key),$=b(Qe,$,$e),nt===null?qe=Qe:nt.sibling=Qe,nt=Qe);return a&&Pe.forEach(function(Bi){return o(F,Bi)}),Je&&Da(F,$e),qe}function ze(F,$,V,ue){if(V==null)throw Error(n(151));for(var qe=null,nt=null,Pe=$,$e=$=0,Qe=null,at=V.next();Pe!==null&&!at.done;$e++,at=V.next()){Pe.index>$e?(Qe=Pe,Pe=null):Qe=Pe.sibling;var Bi=Z(F,Pe,at.value,ue);if(Bi===null){Pe===null&&(Pe=Qe);break}a&&Pe&&Bi.alternate===null&&o(F,Pe),$=b(Bi,$,$e),nt===null?qe=Bi:nt.sibling=Bi,nt=Bi,Pe=Qe}if(at.done)return l(F,Pe),Je&&Da(F,$e),qe;if(Pe===null){for(;!at.done;$e++,at=V.next())at=de(F,at.value,ue),at!==null&&($=b(at,$,$e),nt===null?qe=at:nt.sibling=at,nt=at);return Je&&Da(F,$e),qe}for(Pe=f(Pe);!at.done;$e++,at=V.next())at=re(Pe,F,$e,at.value,ue),at!==null&&(a&&at.alternate!==null&&Pe.delete(at.key===null?$e:at.key),$=b(at,$,$e),nt===null?qe=at:nt.sibling=at,nt=at);return a&&Pe.forEach(function(uq){return o(F,uq)}),Je&&Da(F,$e),qe}function vt(F,$,V,ue){if(typeof V=="object"&&V!==null&&V.type===j&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case x:e:{for(var qe=V.key;$!==null;){if($.key===qe){if(qe=V.type,qe===j){if($.tag===7){l(F,$.sibling),ue=v($,V.props.children),ue.return=F,F=ue;break e}}else if($.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===K&&vo(qe)===$.type){l(F,$.sibling),ue=v($,V.props),Ml(ue,V),ue.return=F,F=ue;break e}l(F,$);break}else o(F,$);$=$.sibling}V.type===j?(ue=fo(V.props.children,F.mode,ue,V.key),ue.return=F,F=ue):(ue=Pu(V.type,V.key,V.props,null,F.mode,ue),Ml(ue,V),ue.return=F,F=ue)}return E(F);case w:e:{for(qe=V.key;$!==null;){if($.key===qe)if($.tag===4&&$.stateNode.containerInfo===V.containerInfo&&$.stateNode.implementation===V.implementation){l(F,$.sibling),ue=v($,V.children||[]),ue.return=F,F=ue;break e}else{l(F,$);break}else o(F,$);$=$.sibling}ue=zh(V,F.mode,ue),ue.return=F,F=ue}return E(F);case K:return V=vo(V),vt(F,$,V,ue)}if(q(V))return Ae(F,$,V,ue);if(I(V)){if(qe=I(V),typeof qe!="function")throw Error(n(150));return V=qe.call(V),ze(F,$,V,ue)}if(typeof V.then=="function")return vt(F,$,Uu(V),ue);if(V.$$typeof===A)return vt(F,$,qu(F,V),ue);Bu(F,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,$!==null&&$.tag===6?(l(F,$.sibling),ue=v($,V),ue.return=F,F=ue):(l(F,$),ue=Lh(V,F.mode,ue),ue.return=F,F=ue),E(F)):l(F,$)}return function(F,$,V,ue){try{Pl=0;var qe=vt(F,$,V,ue);return bs=null,qe}catch(Pe){if(Pe===ys||Pe===zu)throw Pe;var nt=ln(29,Pe,null,F.mode);return nt.lanes=ue,nt.return=F,nt}finally{}}}var bo=Gx(!0),Vx=Gx(!1),Si=!1;function Xh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ei(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Oi(a,o,l){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(lt&2)!==0){var v=f.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),f.pending=o,o=Tu(a),Dx(a,null,l),o}return Du(a,f,o,l),Tu(a)}function Rl(a,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,l|=f,o.lanes=l,bu(a,l)}}function Qh(a,o){var l=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var v=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?v=b=E:b=b.next=E,l=l.next}while(l!==null);b===null?v=b=o:b=b.next=o}else v=b=o;l={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=o:a.next=o,l.lastBaseUpdate=o}var Jh=!1;function ql(){if(Jh){var a=vs;if(a!==null)throw a}}function Ll(a,o,l,f){Jh=!1;var v=a.updateQueue;Si=!1;var b=v.firstBaseUpdate,E=v.lastBaseUpdate,N=v.shared.pending;if(N!==null){v.shared.pending=null;var L=N,W=L.next;L.next=null,E===null?b=W:E.next=W,E=L;var se=a.alternate;se!==null&&(se=se.updateQueue,N=se.lastBaseUpdate,N!==E&&(N===null?se.firstBaseUpdate=W:N.next=W,se.lastBaseUpdate=L))}if(b!==null){var de=v.baseState;E=0,se=W=L=null,N=b;do{var Z=N.lane&-536870913,re=Z!==N.lane;if(re?(Ze&Z)===Z:(f&Z)===Z){Z!==0&&Z===gs&&(Jh=!0),se!==null&&(se=se.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ae=a,ze=N;Z=o;var vt=l;switch(ze.tag){case 1:if(Ae=ze.payload,typeof Ae=="function"){de=Ae.call(vt,de,Z);break e}de=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=ze.payload,Z=typeof Ae=="function"?Ae.call(vt,de,Z):Ae,Z==null)break e;de=p({},de,Z);break e;case 2:Si=!0}}Z=N.callback,Z!==null&&(a.flags|=64,re&&(a.flags|=8192),re=v.callbacks,re===null?v.callbacks=[Z]:re.push(Z))}else re={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},se===null?(W=se=re,L=de):se=se.next=re,E|=Z;if(N=N.next,N===null){if(N=v.shared.pending,N===null)break;re=N,N=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);se===null&&(L=de),v.baseState=L,v.firstBaseUpdate=W,v.lastBaseUpdate=se,b===null&&(v.shared.lanes=0),Di|=E,a.lanes=E,a.memoizedState=de}}function Wx(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function Xx(a,o){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)Wx(l[a],o)}var _s=je(null),$u=je(0);function Zx(a,o){a=$a,H($u,a),H(_s,o),$a=a|o.baseLanes}function ep(){H($u,$a),H(_s,_s.current)}function tp(){$a=$u.current,te(_s),te($u)}var cn=je(null),Mn=null;function Ci(a){var o=a.alternate;H(Xt,Xt.current&1),H(cn,a),Mn===null&&(o===null||_s.current!==null||o.memoizedState!==null)&&(Mn=a)}function rp(a){H(Xt,Xt.current),H(cn,a),Mn===null&&(Mn=a)}function Qx(a){a.tag===22?(H(Xt,Xt.current),H(cn,a),Mn===null&&(Mn=a)):Ai()}function Ai(){H(Xt,Xt.current),H(cn,cn.current)}function un(a){te(cn),Mn===a&&(Mn=null),te(Xt)}var Xt=je(0);function Hu(a){for(var o=a;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||lg(l)||cg(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ma=0,Be=null,pt=null,rr=null,Fu=!1,xs=!1,_o=!1,Ku=0,zl=0,ws=null,eR=0;function Ft(){throw Error(n(321))}function np(a,o){if(o===null)return!1;for(var l=0;l<o.length&&l<a.length;l++)if(!sn(a[l],o[l]))return!1;return!0}function ap(a,o,l,f,v,b){return Ma=b,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=a===null||a.memoizedState===null?Rw:bp,_o=!1,b=l(f,v),_o=!1,xs&&(b=ew(o,l,f,v)),Jx(a),b}function Jx(a){R.H=Bl;var o=pt!==null&&pt.next!==null;if(Ma=0,rr=pt=Be=null,Fu=!1,zl=0,ws=null,o)throw Error(n(300));a===null||nr||(a=a.dependencies,a!==null&&Ru(a)&&(nr=!0))}function ew(a,o,l,f){Be=a;var v=0;do{if(xs&&(ws=null),zl=0,xs=!1,25<=v)throw Error(n(301));if(v+=1,rr=pt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}R.H=qw,b=o(l,f)}while(xs);return b}function tR(){var a=R.H,o=a.useState()[0];return o=typeof o.then=="function"?Il(o):o,a=a.useState()[0],(pt!==null?pt.memoizedState:null)!==a&&(Be.flags|=1024),o}function ip(){var a=Ku!==0;return Ku=0,a}function op(a,o,l){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~l}function sp(a){if(Fu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Fu=!1}Ma=0,rr=pt=Be=null,xs=!1,zl=Ku=0,ws=null}function zr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rr===null?Be.memoizedState=rr=a:rr=rr.next=a,rr}function Zt(){if(pt===null){var a=Be.alternate;a=a!==null?a.memoizedState:null}else a=pt.next;var o=rr===null?Be.memoizedState:rr.next;if(o!==null)rr=o,pt=a;else{if(a===null)throw Be.alternate===null?Error(n(467)):Error(n(310));pt=a,a={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},rr===null?Be.memoizedState=rr=a:rr=rr.next=a}return rr}function Yu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(a){var o=zl;return zl+=1,ws===null&&(ws=[]),a=Fx(ws,a,o),o=Be,(rr===null?o.memoizedState:rr.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?Rw:bp),a}function Gu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Il(a);if(a.$$typeof===A)return Cr(a)}throw Error(n(438,String(a)))}function lp(a){var o=null,l=Be.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var f=Be.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Yu(),Be.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(a),f=0;f<a;f++)l[f]=ne;return o.index++,l}function Ra(a,o){return typeof o=="function"?o(a):o}function Vu(a){var o=Zt();return cp(o,pt,a)}function cp(a,o,l){var f=a.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=l;var v=a.baseQueue,b=f.pending;if(b!==null){if(v!==null){var E=v.next;v.next=b.next,b.next=E}o.baseQueue=v=b,f.pending=null}if(b=a.baseState,v===null)a.memoizedState=b;else{o=v.next;var N=E=null,L=null,W=o,se=!1;do{var de=W.lane&-536870913;if(de!==W.lane?(Ze&de)===de:(Ma&de)===de){var Z=W.revertLane;if(Z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),de===gs&&(se=!0);else if((Ma&Z)===Z){W=W.next,Z===gs&&(se=!0);continue}else de={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(N=L=de,E=b):L=L.next=de,Be.lanes|=Z,Di|=Z;de=W.action,_o&&l(b,de),b=W.hasEagerState?W.eagerState:l(b,de)}else Z={lane:de,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(N=L=Z,E=b):L=L.next=Z,Be.lanes|=de,Di|=de;W=W.next}while(W!==null&&W!==o);if(L===null?E=b:L.next=N,!sn(b,a.memoizedState)&&(nr=!0,se&&(l=vs,l!==null)))throw l;a.memoizedState=b,a.baseState=E,a.baseQueue=L,f.lastRenderedState=b}return v===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function up(a){var o=Zt(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var f=l.dispatch,v=l.pending,b=o.memoizedState;if(v!==null){l.pending=null;var E=v=v.next;do b=a(b,E.action),E=E.next;while(E!==v);sn(b,o.memoizedState)||(nr=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),l.lastRenderedState=b}return[b,f]}function tw(a,o,l){var f=Be,v=Zt(),b=Je;if(b){if(l===void 0)throw Error(n(407));l=l()}else l=o();var E=!sn((pt||v).memoizedState,l);if(E&&(v.memoizedState=l,nr=!0),v=v.queue,mp(aw.bind(null,f,v,a),[a]),v.getSnapshot!==o||E||rr!==null&&rr.memoizedState.tag&1){if(f.flags|=2048,js(9,{destroy:void 0},nw.bind(null,f,v,l,o),null),xt===null)throw Error(n(349));b||(Ma&127)!==0||rw(f,o,l)}return l}function rw(a,o,l){a.flags|=16384,a={getSnapshot:o,value:l},o=Be.updateQueue,o===null?(o=Yu(),Be.updateQueue=o,o.stores=[a]):(l=o.stores,l===null?o.stores=[a]:l.push(a))}function nw(a,o,l,f){o.value=l,o.getSnapshot=f,iw(o)&&ow(a)}function aw(a,o,l){return l(function(){iw(o)&&ow(a)})}function iw(a){var o=a.getSnapshot;a=a.value;try{var l=o();return!sn(a,l)}catch{return!0}}function ow(a){var o=uo(a,2);o!==null&&Jr(o,a,2)}function dp(a){var o=zr();if(typeof a=="function"){var l=a;if(a=l(),_o){zt(!0);try{l()}finally{zt(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:a},o}function sw(a,o,l,f){return a.baseState=l,cp(a,pt,typeof f=="function"?f:Ra)}function rR(a,o,l,f,v){if(Zu(a))throw Error(n(485));if(a=o.action,a!==null){var b={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};R.T!==null?l(!0):b.isTransition=!1,f(b),l=o.pending,l===null?(b.next=o.pending=b,lw(o,b)):(b.next=l.next,o.pending=l.next=b)}}function lw(a,o){var l=o.action,f=o.payload,v=a.state;if(o.isTransition){var b=R.T,E={};R.T=E;try{var N=l(v,f),L=R.S;L!==null&&L(E,N),cw(a,o,N)}catch(W){fp(a,o,W)}finally{b!==null&&E.types!==null&&(b.types=E.types),R.T=b}}else try{b=l(v,f),cw(a,o,b)}catch(W){fp(a,o,W)}}function cw(a,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(f){uw(a,o,f)},function(f){return fp(a,o,f)}):uw(a,o,l)}function uw(a,o,l){o.status="fulfilled",o.value=l,dw(o),a.state=l,o=a.pending,o!==null&&(l=o.next,l===o?a.pending=null:(l=l.next,o.next=l,lw(a,l)))}function fp(a,o,l){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=l,dw(o),o=o.next;while(o!==f)}a.action=null}function dw(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function fw(a,o){return o}function mw(a,o){if(Je){var l=xt.formState;if(l!==null){e:{var f=Be;if(Je){if(Ot){t:{for(var v=Ot,b=Pn;v.nodeType!==8;){if(!b){v=null;break t}if(v=Rn(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){Ot=Rn(v.nextSibling),f=v.data==="F!";break e}}wi(f)}f=!1}f&&(o=l[0])}}return l=zr(),l.memoizedState=l.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fw,lastRenderedState:o},l.queue=f,l=Tw.bind(null,Be,f),f.dispatch=l,f=dp(!1),b=yp.bind(null,Be,!1,f.queue),f=zr(),v={state:o,dispatch:null,action:a,pending:null},f.queue=v,l=rR.bind(null,Be,v,b,l),v.dispatch=l,f.memoizedState=a,[o,l,!1]}function hw(a){var o=Zt();return pw(o,pt,a)}function pw(a,o,l){if(o=cp(a,o,fw)[0],a=Vu(Ra)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Il(o)}catch(E){throw E===ys?zu:E}else f=o;o=Zt();var v=o.queue,b=v.dispatch;return l!==o.memoizedState&&(Be.flags|=2048,js(9,{destroy:void 0},nR.bind(null,v,l),null)),[f,b,a]}function nR(a,o){a.action=o}function gw(a){var o=Zt(),l=pt;if(l!==null)return pw(o,l,a);Zt(),o=o.memoizedState,l=Zt();var f=l.queue.dispatch;return l.memoizedState=a,[o,f,!1]}function js(a,o,l,f){return a={tag:a,create:l,deps:f,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Yu(),Be.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=a.next=a:(f=l.next,l.next=a,a.next=f,o.lastEffect=a),a}function vw(){return Zt().memoizedState}function Wu(a,o,l,f){var v=zr();Be.flags|=a,v.memoizedState=js(1|o,{destroy:void 0},l,f===void 0?null:f)}function Xu(a,o,l,f){var v=Zt();f=f===void 0?null:f;var b=v.memoizedState.inst;pt!==null&&f!==null&&np(f,pt.memoizedState.deps)?v.memoizedState=js(o,b,l,f):(Be.flags|=a,v.memoizedState=js(1|o,b,l,f))}function yw(a,o){Wu(8390656,8,a,o)}function mp(a,o){Xu(2048,8,a,o)}function aR(a){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=Yu(),Be.updateQueue=o,o.events=[a];else{var l=o.events;l===null?o.events=[a]:l.push(a)}}function bw(a){var o=Zt().memoizedState;return aR({ref:o,nextImpl:a}),function(){if((lt&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function _w(a,o){return Xu(4,2,a,o)}function xw(a,o){return Xu(4,4,a,o)}function ww(a,o){if(typeof o=="function"){a=a();var l=o(a);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function jw(a,o,l){l=l!=null?l.concat([a]):null,Xu(4,4,ww.bind(null,o,a),l)}function hp(){}function Sw(a,o){var l=Zt();o=o===void 0?null:o;var f=l.memoizedState;return o!==null&&np(o,f[1])?f[0]:(l.memoizedState=[a,o],a)}function Ew(a,o){var l=Zt();o=o===void 0?null:o;var f=l.memoizedState;if(o!==null&&np(o,f[1]))return f[0];if(f=a(),_o){zt(!0);try{a()}finally{zt(!1)}}return l.memoizedState=[f,o],f}function pp(a,o,l){return l===void 0||(Ma&1073741824)!==0&&(Ze&261930)===0?a.memoizedState=o:(a.memoizedState=l,a=Oj(),Be.lanes|=a,Di|=a,l)}function Ow(a,o,l,f){return sn(l,o)?l:_s.current!==null?(a=pp(a,l,f),sn(a,o)||(nr=!0),a):(Ma&42)===0||(Ma&1073741824)!==0&&(Ze&261930)===0?(nr=!0,a.memoizedState=l):(a=Oj(),Be.lanes|=a,Di|=a,o)}function Cw(a,o,l,f,v){var b=U.p;U.p=b!==0&&8>b?b:8;var E=R.T,N={};R.T=N,yp(a,!1,o,l);try{var L=v(),W=R.S;if(W!==null&&W(N,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var se=J2(L,f);Ul(a,o,se,mn(a))}else Ul(a,o,f,mn(a))}catch(de){Ul(a,o,{then:function(){},status:"rejected",reason:de},mn())}finally{U.p=b,E!==null&&N.types!==null&&(E.types=N.types),R.T=E}}function iR(){}function gp(a,o,l,f){if(a.tag!==5)throw Error(n(476));var v=Aw(a).queue;Cw(a,v,o,J,l===null?iR:function(){return Nw(a),l(f)})}function Aw(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:J},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:l},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function Nw(a){var o=Aw(a);o.next===null&&(o=a.alternate.memoizedState),Ul(a,o.next.queue,{},mn())}function vp(){return Cr(nc)}function kw(){return Zt().memoizedState}function Dw(){return Zt().memoizedState}function oR(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var l=mn();a=Ei(l);var f=Oi(o,a,l);f!==null&&(Jr(f,o,l),Rl(f,o,l)),o={cache:Yh()},a.payload=o;return}o=o.return}}function sR(a,o,l){var f=mn();l={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Zu(a)?Pw(o,l):(l=Rh(a,o,l,f),l!==null&&(Jr(l,a,f),Mw(l,o,f)))}function Tw(a,o,l){var f=mn();Ul(a,o,l,f)}function Ul(a,o,l,f){var v={lane:f,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Zu(a))Pw(o,v);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var E=o.lastRenderedState,N=b(E,l);if(v.hasEagerState=!0,v.eagerState=N,sn(N,E))return Du(a,o,v,0),xt===null&&ku(),!1}catch{}finally{}if(l=Rh(a,o,v,f),l!==null)return Jr(l,a,f),Mw(l,o,f),!0}return!1}function yp(a,o,l,f){if(f={lane:2,revertLane:Xp(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Zu(a)){if(o)throw Error(n(479))}else o=Rh(a,l,f,2),o!==null&&Jr(o,a,2)}function Zu(a){var o=a.alternate;return a===Be||o!==null&&o===Be}function Pw(a,o){xs=Fu=!0;var l=a.pending;l===null?o.next=o:(o.next=l.next,l.next=o),a.pending=o}function Mw(a,o,l){if((l&4194048)!==0){var f=o.lanes;f&=a.pendingLanes,l|=f,o.lanes=l,bu(a,l)}}var Bl={readContext:Cr,use:Gu,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useLayoutEffect:Ft,useInsertionEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useSyncExternalStore:Ft,useId:Ft,useHostTransitionStatus:Ft,useFormState:Ft,useActionState:Ft,useOptimistic:Ft,useMemoCache:Ft,useCacheRefresh:Ft};Bl.useEffectEvent=Ft;var Rw={readContext:Cr,use:Gu,useCallback:function(a,o){return zr().memoizedState=[a,o===void 0?null:o],a},useContext:Cr,useEffect:yw,useImperativeHandle:function(a,o,l){l=l!=null?l.concat([a]):null,Wu(4194308,4,ww.bind(null,o,a),l)},useLayoutEffect:function(a,o){return Wu(4194308,4,a,o)},useInsertionEffect:function(a,o){Wu(4,2,a,o)},useMemo:function(a,o){var l=zr();o=o===void 0?null:o;var f=a();if(_o){zt(!0);try{a()}finally{zt(!1)}}return l.memoizedState=[f,o],f},useReducer:function(a,o,l){var f=zr();if(l!==void 0){var v=l(o);if(_o){zt(!0);try{l(o)}finally{zt(!1)}}}else v=o;return f.memoizedState=f.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},f.queue=a,a=a.dispatch=sR.bind(null,Be,a),[f.memoizedState,a]},useRef:function(a){var o=zr();return a={current:a},o.memoizedState=a},useState:function(a){a=dp(a);var o=a.queue,l=Tw.bind(null,Be,o);return o.dispatch=l,[a.memoizedState,l]},useDebugValue:hp,useDeferredValue:function(a,o){var l=zr();return pp(l,a,o)},useTransition:function(){var a=dp(!1);return a=Cw.bind(null,Be,a.queue,!0,!1),zr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,l){var f=Be,v=zr();if(Je){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),xt===null)throw Error(n(349));(Ze&127)!==0||rw(f,o,l)}v.memoizedState=l;var b={value:l,getSnapshot:o};return v.queue=b,yw(aw.bind(null,f,b,a),[a]),f.flags|=2048,js(9,{destroy:void 0},nw.bind(null,f,b,l,o),null),l},useId:function(){var a=zr(),o=xt.identifierPrefix;if(Je){var l=ma,f=fa;l=(f&~(1<<32-ht(f)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Ku++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=eR++,o="_"+o+"r_"+l.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:vp,useFormState:mw,useActionState:mw,useOptimistic:function(a){var o=zr();o.memoizedState=o.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=yp.bind(null,Be,!0,l),l.dispatch=o,[a,o]},useMemoCache:lp,useCacheRefresh:function(){return zr().memoizedState=oR.bind(null,Be)},useEffectEvent:function(a){var o=zr(),l={impl:a};return o.memoizedState=l,function(){if((lt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},bp={readContext:Cr,use:Gu,useCallback:Sw,useContext:Cr,useEffect:mp,useImperativeHandle:jw,useInsertionEffect:_w,useLayoutEffect:xw,useMemo:Ew,useReducer:Vu,useRef:vw,useState:function(){return Vu(Ra)},useDebugValue:hp,useDeferredValue:function(a,o){var l=Zt();return Ow(l,pt.memoizedState,a,o)},useTransition:function(){var a=Vu(Ra)[0],o=Zt().memoizedState;return[typeof a=="boolean"?a:Il(a),o]},useSyncExternalStore:tw,useId:kw,useHostTransitionStatus:vp,useFormState:hw,useActionState:hw,useOptimistic:function(a,o){var l=Zt();return sw(l,pt,a,o)},useMemoCache:lp,useCacheRefresh:Dw};bp.useEffectEvent=bw;var qw={readContext:Cr,use:Gu,useCallback:Sw,useContext:Cr,useEffect:mp,useImperativeHandle:jw,useInsertionEffect:_w,useLayoutEffect:xw,useMemo:Ew,useReducer:up,useRef:vw,useState:function(){return up(Ra)},useDebugValue:hp,useDeferredValue:function(a,o){var l=Zt();return pt===null?pp(l,a,o):Ow(l,pt.memoizedState,a,o)},useTransition:function(){var a=up(Ra)[0],o=Zt().memoizedState;return[typeof a=="boolean"?a:Il(a),o]},useSyncExternalStore:tw,useId:kw,useHostTransitionStatus:vp,useFormState:gw,useActionState:gw,useOptimistic:function(a,o){var l=Zt();return pt!==null?sw(l,pt,a,o):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:lp,useCacheRefresh:Dw};qw.useEffectEvent=bw;function _p(a,o,l,f){o=a.memoizedState,l=l(f,o),l=l==null?o:p({},o,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var xp={enqueueSetState:function(a,o,l){a=a._reactInternals;var f=mn(),v=Ei(f);v.payload=o,l!=null&&(v.callback=l),o=Oi(a,v,f),o!==null&&(Jr(o,a,f),Rl(o,a,f))},enqueueReplaceState:function(a,o,l){a=a._reactInternals;var f=mn(),v=Ei(f);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=Oi(a,v,f),o!==null&&(Jr(o,a,f),Rl(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var l=mn(),f=Ei(l);f.tag=2,o!=null&&(f.callback=o),o=Oi(a,f,l),o!==null&&(Jr(o,a,l),Rl(o,a,l))}};function Lw(a,o,l,f,v,b,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,b,E):o.prototype&&o.prototype.isPureReactComponent?!Cl(l,f)||!Cl(v,b):!0}function zw(a,o,l,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,f),o.state!==a&&xp.enqueueReplaceState(o,o.state,null)}function xo(a,o){var l=o;if("ref"in o){l={};for(var f in o)f!=="ref"&&(l[f]=o[f])}if(a=a.defaultProps){l===o&&(l=p({},l));for(var v in a)l[v]===void 0&&(l[v]=a[v])}return l}function Iw(a){Nu(a)}function Uw(a){console.error(a)}function Bw(a){Nu(a)}function Qu(a,o){try{var l=a.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function $w(a,o,l){try{var f=a.onCaughtError;f(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function wp(a,o,l){return l=Ei(l),l.tag=3,l.payload={element:null},l.callback=function(){Qu(a,o)},l}function Hw(a){return a=Ei(a),a.tag=3,a}function Fw(a,o,l,f){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var b=f.value;a.payload=function(){return v(b)},a.callback=function(){$w(o,l,f)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){$w(o,l,f),typeof v!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this));var N=f.stack;this.componentDidCatch(f.value,{componentStack:N!==null?N:""})})}function lR(a,o,l,f,v){if(l.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=l.alternate,o!==null&&ps(o,l,v,!0),l=cn.current,l!==null){switch(l.tag){case 31:case 13:return Mn===null?ud():l.alternate===null&&Kt===0&&(Kt=3),l.flags&=-257,l.flags|=65536,l.lanes=v,f===Iu?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([f]):o.add(f),Gp(a,f,v)),!1;case 22:return l.flags|=65536,f===Iu?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([f]):l.add(f)),Gp(a,f,v)),!1}throw Error(n(435,l.tag))}return Gp(a,f,v),ud(),!1}if(Je)return o=cn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,f!==Bh&&(a=Error(n(422),{cause:f}),kl(kn(a,l)))):(f!==Bh&&(o=Error(n(423),{cause:f}),kl(kn(o,l))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,f=kn(f,l),v=wp(a.stateNode,f,v),Qh(a,v),Kt!==4&&(Kt=2)),!1;var b=Error(n(520),{cause:f});if(b=kn(b,l),Wl===null?Wl=[b]:Wl.push(b),Kt!==4&&(Kt=2),o===null)return!0;f=kn(f,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,a=v&-v,l.lanes|=a,a=wp(l.stateNode,f,a),Qh(l,a),!1;case 1:if(o=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ti===null||!Ti.has(b))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Hw(v),Fw(v,a,l,f),Qh(l,v),!1}l=l.return}while(l!==null);return!1}var jp=Error(n(461)),nr=!1;function Ar(a,o,l,f){o.child=a===null?Vx(o,null,l,f):bo(o,a.child,l,f)}function Kw(a,o,l,f,v){l=l.render;var b=o.ref;if("ref"in f){var E={};for(var N in f)N!=="ref"&&(E[N]=f[N])}else E=f;return po(o),f=ap(a,o,l,E,b,v),N=ip(),a!==null&&!nr?(op(a,o,v),qa(a,o,v)):(Je&&N&&Ih(o),o.flags|=1,Ar(a,o,f,v),o.child)}function Yw(a,o,l,f,v){if(a===null){var b=l.type;return typeof b=="function"&&!qh(b)&&b.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=b,Gw(a,o,b,f,v)):(a=Pu(l.type,null,f,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!Dp(a,v)){var E=b.memoizedProps;if(l=l.compare,l=l!==null?l:Cl,l(E,f)&&a.ref===o.ref)return qa(a,o,v)}return o.flags|=1,a=ka(b,f),a.ref=o.ref,a.return=o,o.child=a}function Gw(a,o,l,f,v){if(a!==null){var b=a.memoizedProps;if(Cl(b,f)&&a.ref===o.ref)if(nr=!1,o.pendingProps=f=b,Dp(a,v))(a.flags&131072)!==0&&(nr=!0);else return o.lanes=a.lanes,qa(a,o,v)}return Sp(a,o,l,f,v)}function Vw(a,o,l,f){var v=f.children,b=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,a!==null){for(f=o.child=a.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~b}else f=0,o.child=null;return Ww(a,o,b,l,f)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Lu(o,b!==null?b.cachePool:null),b!==null?Zx(o,b):ep(),Qx(o);else return f=o.lanes=536870912,Ww(a,o,b!==null?b.baseLanes|l:l,l,f)}else b!==null?(Lu(o,b.cachePool),Zx(o,b),Ai(),o.memoizedState=null):(a!==null&&Lu(o,null),ep(),Ai());return Ar(a,o,v,l),o.child}function $l(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ww(a,o,l,f,v){var b=Vh();return b=b===null?null:{parent:tr._currentValue,pool:b},o.memoizedState={baseLanes:l,cachePool:b},a!==null&&Lu(o,null),ep(),Qx(o),a!==null&&ps(a,o,f,!0),o.childLanes=v,null}function Ju(a,o){return o=td({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function Xw(a,o,l){return bo(o,a.child,null,l),a=Ju(o,o.pendingProps),a.flags|=2,un(o),o.memoizedState=null,a}function cR(a,o,l){var f=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Je){if(f.mode==="hidden")return a=Ju(o,f),o.lanes=536870912,$l(null,a);if(rp(o),(a=Ot)?(a=lS(a,Pn),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:_i!==null?{id:fa,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},l=Px(a),l.return=o,o.child=l,Or=o,Ot=null)):a=null,a===null)throw wi(o);return o.lanes=536870912,null}return Ju(o,f)}var b=a.memoizedState;if(b!==null){var E=b.dehydrated;if(rp(o),v)if(o.flags&256)o.flags&=-257,o=Xw(a,o,l);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(n(558));else if(nr||ps(a,o,l,!1),v=(l&a.childLanes)!==0,nr||v){if(f=xt,f!==null&&(E=Vn(f,l),E!==0&&E!==b.retryLane))throw b.retryLane=E,uo(a,E),Jr(f,a,E),jp;ud(),o=Xw(a,o,l)}else a=b.treeContext,Ot=Rn(E.nextSibling),Or=o,Je=!0,xi=null,Pn=!1,a!==null&&qx(o,a),o=Ju(o,f),o.flags|=4096;return o}return a=ka(a.child,{mode:f.mode,children:f.children}),a.ref=o.ref,o.child=a,a.return=o,a}function ed(a,o){var l=o.ref;if(l===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(a===null||a.ref!==l)&&(o.flags|=4194816)}}function Sp(a,o,l,f,v){return po(o),l=ap(a,o,l,f,void 0,v),f=ip(),a!==null&&!nr?(op(a,o,v),qa(a,o,v)):(Je&&f&&Ih(o),o.flags|=1,Ar(a,o,l,v),o.child)}function Zw(a,o,l,f,v,b){return po(o),o.updateQueue=null,l=ew(o,f,l,v),Jx(a),f=ip(),a!==null&&!nr?(op(a,o,b),qa(a,o,b)):(Je&&f&&Ih(o),o.flags|=1,Ar(a,o,l,b),o.child)}function Qw(a,o,l,f,v){if(po(o),o.stateNode===null){var b=ds,E=l.contextType;typeof E=="object"&&E!==null&&(b=Cr(E)),b=new l(f,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=xp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=f,b.state=o.memoizedState,b.refs={},Xh(o),E=l.contextType,b.context=typeof E=="object"&&E!==null?Cr(E):ds,b.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(_p(o,l,E,f),b.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&xp.enqueueReplaceState(b,b.state,null),Ll(o,f,b,v),ql(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){b=o.stateNode;var N=o.memoizedProps,L=xo(l,N);b.props=L;var W=b.context,se=l.contextType;E=ds,typeof se=="object"&&se!==null&&(E=Cr(se));var de=l.getDerivedStateFromProps;se=typeof de=="function"||typeof b.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,se||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N||W!==E)&&zw(o,b,f,E),Si=!1;var Z=o.memoizedState;b.state=Z,Ll(o,f,b,v),ql(),W=o.memoizedState,N||Z!==W||Si?(typeof de=="function"&&(_p(o,l,de,f),W=o.memoizedState),(L=Si||Lw(o,l,L,f,Z,W,E))?(se||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=W),b.props=f,b.state=W,b.context=E,f=L):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{b=o.stateNode,Zh(a,o),E=o.memoizedProps,se=xo(l,E),b.props=se,de=o.pendingProps,Z=b.context,W=l.contextType,L=ds,typeof W=="object"&&W!==null&&(L=Cr(W)),N=l.getDerivedStateFromProps,(W=typeof N=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==de||Z!==L)&&zw(o,b,f,L),Si=!1,Z=o.memoizedState,b.state=Z,Ll(o,f,b,v),ql();var re=o.memoizedState;E!==de||Z!==re||Si||a!==null&&a.dependencies!==null&&Ru(a.dependencies)?(typeof N=="function"&&(_p(o,l,N,f),re=o.memoizedState),(se=Si||Lw(o,l,se,f,Z,re,L)||a!==null&&a.dependencies!==null&&Ru(a.dependencies))?(W||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,re,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,re,L)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=re),b.props=f,b.state=re,b.context=L,f=se):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),f=!1)}return b=f,ed(a,o),f=(o.flags&128)!==0,b||f?(b=o.stateNode,l=f&&typeof l.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&f?(o.child=bo(o,a.child,null,v),o.child=bo(o,null,l,v)):Ar(a,o,l,v),o.memoizedState=b.state,a=o.child):a=qa(a,o,v),a}function Jw(a,o,l,f){return mo(),o.flags|=256,Ar(a,o,l,f),o.child}var Ep={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Op(a){return{baseLanes:a,cachePool:$x()}}function Cp(a,o,l){return a=a!==null?a.childLanes&~l:0,o&&(a|=fn),a}function ej(a,o,l){var f=o.pendingProps,v=!1,b=(o.flags&128)!==0,E;if((E=b)||(E=a!==null&&a.memoizedState===null?!1:(Xt.current&2)!==0),E&&(v=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,a===null){if(Je){if(v?Ci(o):Ai(),(a=Ot)?(a=lS(a,Pn),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:_i!==null?{id:fa,overflow:ma}:null,retryLane:536870912,hydrationErrors:null},l=Px(a),l.return=o,o.child=l,Or=o,Ot=null)):a=null,a===null)throw wi(o);return cg(a)?o.lanes=32:o.lanes=536870912,null}var N=f.children;return f=f.fallback,v?(Ai(),v=o.mode,N=td({mode:"hidden",children:N},v),f=fo(f,v,l,null),N.return=o,f.return=o,N.sibling=f,o.child=N,f=o.child,f.memoizedState=Op(l),f.childLanes=Cp(a,E,l),o.memoizedState=Ep,$l(null,f)):(Ci(o),Ap(o,N))}var L=a.memoizedState;if(L!==null&&(N=L.dehydrated,N!==null)){if(b)o.flags&256?(Ci(o),o.flags&=-257,o=Np(a,o,l)):o.memoizedState!==null?(Ai(),o.child=a.child,o.flags|=128,o=null):(Ai(),N=f.fallback,v=o.mode,f=td({mode:"visible",children:f.children},v),N=fo(N,v,l,null),N.flags|=2,f.return=o,N.return=o,f.sibling=N,o.child=f,bo(o,a.child,null,l),f=o.child,f.memoizedState=Op(l),f.childLanes=Cp(a,E,l),o.memoizedState=Ep,o=$l(null,f));else if(Ci(o),cg(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var W=E.dgst;E=W,f=Error(n(419)),f.stack="",f.digest=E,kl({value:f,source:null,stack:null}),o=Np(a,o,l)}else if(nr||ps(a,o,l,!1),E=(l&a.childLanes)!==0,nr||E){if(E=xt,E!==null&&(f=Vn(E,l),f!==0&&f!==L.retryLane))throw L.retryLane=f,uo(a,f),Jr(E,a,f),jp;lg(N)||ud(),o=Np(a,o,l)}else lg(N)?(o.flags|=192,o.child=a.child,o=null):(a=L.treeContext,Ot=Rn(N.nextSibling),Or=o,Je=!0,xi=null,Pn=!1,a!==null&&qx(o,a),o=Ap(o,f.children),o.flags|=4096);return o}return v?(Ai(),N=f.fallback,v=o.mode,L=a.child,W=L.sibling,f=ka(L,{mode:"hidden",children:f.children}),f.subtreeFlags=L.subtreeFlags&65011712,W!==null?N=ka(W,N):(N=fo(N,v,l,null),N.flags|=2),N.return=o,f.return=o,f.sibling=N,o.child=f,$l(null,f),f=o.child,N=a.child.memoizedState,N===null?N=Op(l):(v=N.cachePool,v!==null?(L=tr._currentValue,v=v.parent!==L?{parent:L,pool:L}:v):v=$x(),N={baseLanes:N.baseLanes|l,cachePool:v}),f.memoizedState=N,f.childLanes=Cp(a,E,l),o.memoizedState=Ep,$l(a.child,f)):(Ci(o),l=a.child,a=l.sibling,l=ka(l,{mode:"visible",children:f.children}),l.return=o,l.sibling=null,a!==null&&(E=o.deletions,E===null?(o.deletions=[a],o.flags|=16):E.push(a)),o.child=l,o.memoizedState=null,l)}function Ap(a,o){return o=td({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function td(a,o){return a=ln(22,a,null,o),a.lanes=0,a}function Np(a,o,l){return bo(o,a.child,null,l),a=Ap(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function tj(a,o,l){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),Fh(a.return,o,l)}function kp(a,o,l,f,v,b){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:v,treeForkCount:b}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=f,E.tail=l,E.tailMode=v,E.treeForkCount=b)}function rj(a,o,l){var f=o.pendingProps,v=f.revealOrder,b=f.tail;f=f.children;var E=Xt.current,N=(E&2)!==0;if(N?(E=E&1|2,o.flags|=128):E&=1,H(Xt,E),Ar(a,o,f,l),f=Je?Nl:0,!N&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&tj(a,l,o);else if(a.tag===19)tj(a,l,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(l=o.child,v=null;l!==null;)a=l.alternate,a!==null&&Hu(a)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),kp(o,!1,v,l,b,f);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&Hu(a)===null){o.child=v;break}a=v.sibling,v.sibling=l,l=v,v=a}kp(o,!0,l,null,b,f);break;case"together":kp(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function qa(a,o,l){if(a!==null&&(o.dependencies=a.dependencies),Di|=o.lanes,(l&o.childLanes)===0)if(a!==null){if(ps(a,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,l=ka(a,a.pendingProps),o.child=l,l.return=o;a.sibling!==null;)a=a.sibling,l=l.sibling=ka(a,a.pendingProps),l.return=o;l.sibling=null}return o.child}function Dp(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Ru(a)))}function uR(a,o,l){switch(o.tag){case 3:Le(o,o.stateNode.containerInfo),ji(o,tr,a.memoizedState.cache),mo();break;case 27:case 5:we(o);break;case 4:Le(o,o.stateNode.containerInfo);break;case 10:ji(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,rp(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Ci(o),o.flags|=128,null):(l&o.child.childLanes)!==0?ej(a,o,l):(Ci(o),a=qa(a,o,l),a!==null?a.sibling:null);Ci(o);break;case 19:var v=(a.flags&128)!==0;if(f=(l&o.childLanes)!==0,f||(ps(a,o,l,!1),f=(l&o.childLanes)!==0),v){if(f)return rj(a,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),H(Xt,Xt.current),f)break;return null;case 22:return o.lanes=0,Vw(a,o,l,o.pendingProps);case 24:ji(o,tr,a.memoizedState.cache)}return qa(a,o,l)}function nj(a,o,l){if(a!==null)if(a.memoizedProps!==o.pendingProps)nr=!0;else{if(!Dp(a,l)&&(o.flags&128)===0)return nr=!1,uR(a,o,l);nr=(a.flags&131072)!==0}else nr=!1,Je&&(o.flags&1048576)!==0&&Rx(o,Nl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(a=vo(o.elementType),o.type=a,typeof a=="function")qh(a)?(f=xo(a,f),o.tag=1,o=Qw(null,o,a,f,l)):(o.tag=0,o=Sp(null,o,a,f,l));else{if(a!=null){var v=a.$$typeof;if(v===k){o.tag=11,o=Kw(null,o,a,f,l);break e}else if(v===z){o.tag=14,o=Yw(null,o,a,f,l);break e}}throw o=pe(a)||a,Error(n(306,o,""))}}return o;case 0:return Sp(a,o,o.type,o.pendingProps,l);case 1:return f=o.type,v=xo(f,o.pendingProps),Qw(a,o,f,v,l);case 3:e:{if(Le(o,o.stateNode.containerInfo),a===null)throw Error(n(387));f=o.pendingProps;var b=o.memoizedState;v=b.element,Zh(a,o),Ll(o,f,null,l);var E=o.memoizedState;if(f=E.cache,ji(o,tr,f),f!==b.cache&&Kh(o,[tr],l,!0),ql(),f=E.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Jw(a,o,f,l);break e}else if(f!==v){v=kn(Error(n(424)),o),kl(v),o=Jw(a,o,f,l);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Ot=Rn(a.firstChild),Or=o,Je=!0,xi=null,Pn=!0,l=Vx(o,null,f,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(mo(),f===v){o=qa(a,o,l);break e}Ar(a,o,f,l)}o=o.child}return o;case 26:return ed(a,o),a===null?(l=hS(o.type,null,o.pendingProps,null))?o.memoizedState=l:Je||(l=o.type,a=o.pendingProps,f=vd(Ie.current).createElement(l),f[Ht]=o,f[cr]=a,Nr(f,l,a),ce(f),o.stateNode=f):o.memoizedState=hS(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return we(o),a===null&&Je&&(f=o.stateNode=dS(o.type,o.pendingProps,Ie.current),Or=o,Pn=!0,v=Ot,qi(o.type)?(ug=v,Ot=Rn(f.firstChild)):Ot=v),Ar(a,o,o.pendingProps.children,l),ed(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Je&&((v=f=Ot)&&(f=UR(f,o.type,o.pendingProps,Pn),f!==null?(o.stateNode=f,Or=o,Ot=Rn(f.firstChild),Pn=!1,v=!0):v=!1),v||wi(o)),we(o),v=o.type,b=o.pendingProps,E=a!==null?a.memoizedProps:null,f=b.children,ig(v,b)?f=null:E!==null&&ig(v,E)&&(o.flags|=32),o.memoizedState!==null&&(v=ap(a,o,tR,null,null,l),nc._currentValue=v),ed(a,o),Ar(a,o,f,l),o.child;case 6:return a===null&&Je&&((a=l=Ot)&&(l=BR(l,o.pendingProps,Pn),l!==null?(o.stateNode=l,Or=o,Ot=null,a=!0):a=!1),a||wi(o)),null;case 13:return ej(a,o,l);case 4:return Le(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=bo(o,null,f,l):Ar(a,o,f,l),o.child;case 11:return Kw(a,o,o.type,o.pendingProps,l);case 7:return Ar(a,o,o.pendingProps,l),o.child;case 8:return Ar(a,o,o.pendingProps.children,l),o.child;case 12:return Ar(a,o,o.pendingProps.children,l),o.child;case 10:return f=o.pendingProps,ji(o,o.type,f.value),Ar(a,o,f.children,l),o.child;case 9:return v=o.type._context,f=o.pendingProps.children,po(o),v=Cr(v),f=f(v),o.flags|=1,Ar(a,o,f,l),o.child;case 14:return Yw(a,o,o.type,o.pendingProps,l);case 15:return Gw(a,o,o.type,o.pendingProps,l);case 19:return rj(a,o,l);case 31:return cR(a,o,l);case 22:return Vw(a,o,l,o.pendingProps);case 24:return po(o),f=Cr(tr),a===null?(v=Vh(),v===null&&(v=xt,b=Yh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=l),v=b),o.memoizedState={parent:f,cache:v},Xh(o),ji(o,tr,v)):((a.lanes&l)!==0&&(Zh(a,o),Ll(o,null,null,l),ql()),v=a.memoizedState,b=o.memoizedState,v.parent!==f?(v={parent:f,cache:f},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),ji(o,tr,f)):(f=b.cache,ji(o,tr,f),f!==v.cache&&Kh(o,[tr],l,!0))),Ar(a,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function La(a){a.flags|=4}function Tp(a,o,l,f,v){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(kj())a.flags|=8192;else throw yo=Iu,Wh}else a.flags&=-16777217}function aj(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!bS(o))if(kj())a.flags|=8192;else throw yo=Iu,Wh}function rd(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ye():536870912,a.lanes|=o,Cs|=o)}function Hl(a,o){if(!Je)switch(a.tailMode){case"hidden":o=a.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Ct(a){var o=a.alternate!==null&&a.alternate.child===a.child,l=0,f=0;if(o)for(var v=a.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)l|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=f,a.childLanes=l,o}function dR(a,o,l){var f=o.pendingProps;switch(Uh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(o),null;case 1:return Ct(o),null;case 3:return l=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Pa(tr),ee(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(hs(o)?La(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,$h())),Ct(o),null;case 26:var v=o.type,b=o.memoizedState;return a===null?(La(o),b!==null?(Ct(o),aj(o,b)):(Ct(o),Tp(o,v,null,f,l))):b?b!==a.memoizedState?(La(o),Ct(o),aj(o,b)):(Ct(o),o.flags&=-16777217):(a=a.memoizedProps,a!==f&&La(o),Ct(o),Tp(o,v,a,f,l)),null;case 27:if(xe(o),l=Ie.current,v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&La(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Ct(o),null}a=Ee.current,hs(o)?Lx(o):(a=dS(v,f,l),o.stateNode=a,La(o))}return Ct(o),null;case 5:if(xe(o),v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&La(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Ct(o),null}if(b=Ee.current,hs(o))Lx(o);else{var E=vd(Ie.current);switch(b){case 1:b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=E.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?E.createElement("select",{is:f.is}):E.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?E.createElement(v,{is:f.is}):E.createElement(v)}}b[Ht]=o,b[cr]=f;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)b.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=b;e:switch(Nr(b,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&La(o)}}return Ct(o),Tp(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,l),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&La(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(a=Ie.current,hs(o)){if(a=o.stateNode,l=o.memoizedProps,f=null,v=Or,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}a[Ht]=o,a=!!(a.nodeValue===l||f!==null&&f.suppressHydrationWarning===!0||eS(a.nodeValue,l)),a||wi(o,!0)}else a=vd(a).createTextNode(f),a[Ht]=o,o.stateNode=a}return Ct(o),null;case 31:if(l=o.memoizedState,a===null||a.memoizedState!==null){if(f=hs(o),l!==null){if(a===null){if(!f)throw Error(n(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Ht]=o}else mo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ct(o),a=!1}else l=$h(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=l),a=!0;if(!a)return o.flags&256?(un(o),o):(un(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Ct(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=hs(o),f!==null&&f.dehydrated!==null){if(a===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Ht]=o}else mo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ct(o),v=!1}else v=$h(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(un(o),o):(un(o),null)}return un(o),(o.flags&128)!==0?(o.lanes=l,o):(l=f!==null,a=a!==null&&a.memoizedState!==null,l&&(f=o.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048)),l!==a&&l&&(o.child.flags|=8192),rd(o,o.updateQueue),Ct(o),null);case 4:return ee(),a===null&&eg(o.stateNode.containerInfo),Ct(o),null;case 10:return Pa(o.type),Ct(o),null;case 19:if(te(Xt),f=o.memoizedState,f===null)return Ct(o),null;if(v=(o.flags&128)!==0,b=f.rendering,b===null)if(v)Hl(f,!1);else{if(Kt!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=Hu(a),b!==null){for(o.flags|=128,Hl(f,!1),a=b.updateQueue,o.updateQueue=a,rd(o,a),o.subtreeFlags=0,a=l,l=o.child;l!==null;)Tx(l,a),l=l.sibling;return H(Xt,Xt.current&1|2),Je&&Da(o,f.treeForkCount),o.child}a=a.sibling}f.tail!==null&&Ge()>sd&&(o.flags|=128,v=!0,Hl(f,!1),o.lanes=4194304)}else{if(!v)if(a=Hu(b),a!==null){if(o.flags|=128,v=!0,a=a.updateQueue,o.updateQueue=a,rd(o,a),Hl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!Je)return Ct(o),null}else 2*Ge()-f.renderingStartTime>sd&&l!==536870912&&(o.flags|=128,v=!0,Hl(f,!1),o.lanes=4194304);f.isBackwards?(b.sibling=o.child,o.child=b):(a=f.last,a!==null?a.sibling=b:o.child=b,f.last=b)}return f.tail!==null?(a=f.tail,f.rendering=a,f.tail=a.sibling,f.renderingStartTime=Ge(),a.sibling=null,l=Xt.current,H(Xt,v?l&1|2:l&1),Je&&Da(o,f.treeForkCount),a):(Ct(o),null);case 22:case 23:return un(o),tp(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(l&536870912)!==0&&(o.flags&128)===0&&(Ct(o),o.subtreeFlags&6&&(o.flags|=8192)):Ct(o),l=o.updateQueue,l!==null&&rd(o,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==l&&(o.flags|=2048),a!==null&&te(go),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Pa(tr),Ct(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function fR(a,o){switch(Uh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Pa(tr),ee(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return xe(o),null;case 31:if(o.memoizedState!==null){if(un(o),o.alternate===null)throw Error(n(340));mo()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(un(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));mo()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return te(Xt),null;case 4:return ee(),null;case 10:return Pa(o.type),null;case 22:case 23:return un(o),tp(),a!==null&&te(go),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Pa(tr),null;case 25:return null;default:return null}}function ij(a,o){switch(Uh(o),o.tag){case 3:Pa(tr),ee();break;case 26:case 27:case 5:xe(o);break;case 4:ee();break;case 31:o.memoizedState!==null&&un(o);break;case 13:un(o);break;case 19:te(Xt);break;case 10:Pa(o.type);break;case 22:case 23:un(o),tp(),a!==null&&te(go);break;case 24:Pa(tr)}}function Fl(a,o){try{var l=o.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var v=f.next;l=v;do{if((l.tag&a)===a){f=void 0;var b=l.create,E=l.inst;f=b(),E.destroy=f}l=l.next}while(l!==v)}}catch(N){ft(o,o.return,N)}}function Ni(a,o,l){try{var f=o.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var b=v.next;f=b;do{if((f.tag&a)===a){var E=f.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,v=o;var L=l,W=N;try{W()}catch(se){ft(v,L,se)}}}f=f.next}while(f!==b)}}catch(se){ft(o,o.return,se)}}function oj(a){var o=a.updateQueue;if(o!==null){var l=a.stateNode;try{Xx(o,l)}catch(f){ft(a,a.return,f)}}}function sj(a,o,l){l.props=xo(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(f){ft(a,o,f)}}function Kl(a,o){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof l=="function"?a.refCleanup=l(f):l.current=f}}catch(v){ft(a,o,v)}}function ha(a,o){var l=a.ref,f=a.refCleanup;if(l!==null)if(typeof f=="function")try{f()}catch(v){ft(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){ft(a,o,v)}else l.current=null}function lj(a){var o=a.type,l=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&f.focus();break e;case"img":l.src?f.src=l.src:l.srcSet&&(f.srcset=l.srcSet)}}catch(v){ft(a,a.return,v)}}function Pp(a,o,l){try{var f=a.stateNode;MR(f,a.type,l,o),f[cr]=o}catch(v){ft(a,a.return,v)}}function cj(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&qi(a.type)||a.tag===4}function Mp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||cj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&qi(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Rp(a,o,l){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(a),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Aa));else if(f!==4&&(f===27&&qi(a.type)&&(l=a.stateNode,o=null),a=a.child,a!==null))for(Rp(a,o,l),a=a.sibling;a!==null;)Rp(a,o,l),a=a.sibling}function nd(a,o,l){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?l.insertBefore(a,o):l.appendChild(a);else if(f!==4&&(f===27&&qi(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(nd(a,o,l),a=a.sibling;a!==null;)nd(a,o,l),a=a.sibling}function uj(a){var o=a.stateNode,l=a.memoizedProps;try{for(var f=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Nr(o,f,l),o[Ht]=a,o[cr]=l}catch(b){ft(a,a.return,b)}}var za=!1,ar=!1,qp=!1,dj=typeof WeakSet=="function"?WeakSet:Set,vr=null;function mR(a,o){if(a=a.containerInfo,ng=Sd,a=jx(a),Nh(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var E=0,N=-1,L=-1,W=0,se=0,de=a,Z=null;t:for(;;){for(var re;de!==l||v!==0&&de.nodeType!==3||(N=E+v),de!==b||f!==0&&de.nodeType!==3||(L=E+f),de.nodeType===3&&(E+=de.nodeValue.length),(re=de.firstChild)!==null;)Z=de,de=re;for(;;){if(de===a)break t;if(Z===l&&++W===v&&(N=E),Z===b&&++se===f&&(L=E),(re=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=re}l=N===-1||L===-1?null:{start:N,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(ag={focusedElem:a,selectionRange:l},Sd=!1,vr=o;vr!==null;)if(o=vr,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,vr=a;else for(;vr!==null;){switch(o=vr,b=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(l=0;l<a.length;l++)v=a[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,l=o,v=b.memoizedProps,b=b.memoizedState,f=l.stateNode;try{var Ae=xo(l.type,v);a=f.getSnapshotBeforeUpdate(Ae,b),f.__reactInternalSnapshotBeforeUpdate=a}catch(ze){ft(l,l.return,ze)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,l=a.nodeType,l===9)sg(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":sg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,vr=a;break}vr=o.return}}function fj(a,o,l){var f=l.flags;switch(l.tag){case 0:case 11:case 15:Ua(a,l),f&4&&Fl(5,l);break;case 1:if(Ua(a,l),f&4)if(a=l.stateNode,o===null)try{a.componentDidMount()}catch(E){ft(l,l.return,E)}else{var v=xo(l.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch(E){ft(l,l.return,E)}}f&64&&oj(l),f&512&&Kl(l,l.return);break;case 3:if(Ua(a,l),f&64&&(a=l.updateQueue,a!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Xx(a,o)}catch(E){ft(l,l.return,E)}}break;case 27:o===null&&f&4&&uj(l);case 26:case 5:Ua(a,l),o===null&&f&4&&lj(l),f&512&&Kl(l,l.return);break;case 12:Ua(a,l);break;case 31:Ua(a,l),f&4&&pj(a,l);break;case 13:Ua(a,l),f&4&&gj(a,l),f&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=wR.bind(null,l),$R(a,l))));break;case 22:if(f=l.memoizedState!==null||za,!f){o=o!==null&&o.memoizedState!==null||ar,v=za;var b=ar;za=f,(ar=o)&&!b?Ba(a,l,(l.subtreeFlags&8772)!==0):Ua(a,l),za=v,ar=b}break;case 30:break;default:Ua(a,l)}}function mj(a){var o=a.alternate;o!==null&&(a.alternate=null,mj(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&rs(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var kt=null,Wr=!1;function Ia(a,o,l){for(l=l.child;l!==null;)hj(a,o,l),l=l.sibling}function hj(a,o,l){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(er,l)}catch{}switch(l.tag){case 26:ar||ha(l,o),Ia(a,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:ar||ha(l,o);var f=kt,v=Wr;qi(l.type)&&(kt=l.stateNode,Wr=!1),Ia(a,o,l),ec(l.stateNode),kt=f,Wr=v;break;case 5:ar||ha(l,o);case 6:if(f=kt,v=Wr,kt=null,Ia(a,o,l),kt=f,Wr=v,kt!==null)if(Wr)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(l.stateNode)}catch(b){ft(l,o,b)}else try{kt.removeChild(l.stateNode)}catch(b){ft(l,o,b)}break;case 18:kt!==null&&(Wr?(a=kt,oS(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),Rs(a)):oS(kt,l.stateNode));break;case 4:f=kt,v=Wr,kt=l.stateNode.containerInfo,Wr=!0,Ia(a,o,l),kt=f,Wr=v;break;case 0:case 11:case 14:case 15:Ni(2,l,o),ar||Ni(4,l,o),Ia(a,o,l);break;case 1:ar||(ha(l,o),f=l.stateNode,typeof f.componentWillUnmount=="function"&&sj(l,o,f)),Ia(a,o,l);break;case 21:Ia(a,o,l);break;case 22:ar=(f=ar)||l.memoizedState!==null,Ia(a,o,l),ar=f;break;default:Ia(a,o,l)}}function pj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Rs(a)}catch(l){ft(o,o.return,l)}}}function gj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Rs(a)}catch(l){ft(o,o.return,l)}}function hR(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new dj),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new dj),o;default:throw Error(n(435,a.tag))}}function ad(a,o){var l=hR(a);o.forEach(function(f){if(!l.has(f)){l.add(f);var v=jR.bind(null,a,f);f.then(v,v)}})}function Xr(a,o){var l=o.deletions;if(l!==null)for(var f=0;f<l.length;f++){var v=l[f],b=a,E=o,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(qi(N.type)){kt=N.stateNode,Wr=!1;break e}break;case 5:kt=N.stateNode,Wr=!1;break e;case 3:case 4:kt=N.stateNode.containerInfo,Wr=!0;break e}N=N.return}if(kt===null)throw Error(n(160));hj(b,E,v),kt=null,Wr=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)vj(o,a),o=o.sibling}var Qn=null;function vj(a,o){var l=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Xr(o,a),Zr(a),f&4&&(Ni(3,a,a.return),Fl(3,a),Ni(5,a,a.return));break;case 1:Xr(o,a),Zr(a),f&512&&(ar||l===null||ha(l,l.return)),f&64&&za&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?f:l.concat(f))));break;case 26:var v=Qn;if(Xr(o,a),Zr(a),f&512&&(ar||l===null||ha(l,l.return)),f&4){var b=l!==null?l.memoizedState:null;if(f=a.memoizedState,l===null)if(f===null)if(a.stateNode===null){e:{f=a.type,l=a.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":b=v.getElementsByTagName("title")[0],(!b||b[ts]||b[Ht]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(f),v.head.insertBefore(b,v.querySelector("head > title"))),Nr(b,f,l),b[Ht]=a,ce(b),f=b;break e;case"link":var E=vS("link","href",v).get(f+(l.href||""));if(E){for(var N=0;N<E.length;N++)if(b=E[N],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(N,1);break t}}b=v.createElement(f),Nr(b,f,l),v.head.appendChild(b);break;case"meta":if(E=vS("meta","content",v).get(f+(l.content||""))){for(N=0;N<E.length;N++)if(b=E[N],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(N,1);break t}}b=v.createElement(f),Nr(b,f,l),v.head.appendChild(b);break;default:throw Error(n(468,f))}b[Ht]=a,ce(b),f=b}a.stateNode=f}else yS(v,a.type,a.stateNode);else a.stateNode=gS(v,f,a.memoizedProps);else b!==f?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,f===null?yS(v,a.type,a.stateNode):gS(v,f,a.memoizedProps)):f===null&&a.stateNode!==null&&Pp(a,a.memoizedProps,l.memoizedProps)}break;case 27:Xr(o,a),Zr(a),f&512&&(ar||l===null||ha(l,l.return)),l!==null&&f&4&&Pp(a,a.memoizedProps,l.memoizedProps);break;case 5:if(Xr(o,a),Zr(a),f&512&&(ar||l===null||ha(l,l.return)),a.flags&32){v=a.stateNode;try{as(v,"")}catch(Ae){ft(a,a.return,Ae)}}f&4&&a.stateNode!=null&&(v=a.memoizedProps,Pp(a,v,l!==null?l.memoizedProps:v)),f&1024&&(qp=!0);break;case 6:if(Xr(o,a),Zr(a),f&4){if(a.stateNode===null)throw Error(n(162));f=a.memoizedProps,l=a.stateNode;try{l.nodeValue=f}catch(Ae){ft(a,a.return,Ae)}}break;case 3:if(_d=null,v=Qn,Qn=yd(o.containerInfo),Xr(o,a),Qn=v,Zr(a),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Rs(o.containerInfo)}catch(Ae){ft(a,a.return,Ae)}qp&&(qp=!1,yj(a));break;case 4:f=Qn,Qn=yd(a.stateNode.containerInfo),Xr(o,a),Zr(a),Qn=f;break;case 12:Xr(o,a),Zr(a);break;case 31:Xr(o,a),Zr(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,ad(a,f)));break;case 13:Xr(o,a),Zr(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(od=Ge()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,ad(a,f)));break;case 22:v=a.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,W=za,se=ar;if(za=W||v,ar=se||L,Xr(o,a),ar=se,za=W,Zr(a),f&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(l===null||L||za||ar||wo(a)),l=null,o=a;;){if(o.tag===5||o.tag===26){if(l===null){L=l=o;try{if(b=L.stateNode,v)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=L.stateNode;var de=L.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ae){ft(L,L.return,Ae)}}}else if(o.tag===6){if(l===null){L=o;try{L.stateNode.nodeValue=v?"":L.memoizedProps}catch(Ae){ft(L,L.return,Ae)}}}else if(o.tag===18){if(l===null){L=o;try{var re=L.stateNode;v?sS(re,!0):sS(L.stateNode,!1)}catch(Ae){ft(L,L.return,Ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(l=f.retryQueue,l!==null&&(f.retryQueue=null,ad(a,l))));break;case 19:Xr(o,a),Zr(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,ad(a,f)));break;case 30:break;case 21:break;default:Xr(o,a),Zr(a)}}function Zr(a){var o=a.flags;if(o&2){try{for(var l,f=a.return;f!==null;){if(cj(f)){l=f;break}f=f.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var v=l.stateNode,b=Mp(a);nd(a,b,v);break;case 5:var E=l.stateNode;l.flags&32&&(as(E,""),l.flags&=-33);var N=Mp(a);nd(a,N,E);break;case 3:case 4:var L=l.stateNode.containerInfo,W=Mp(a);Rp(a,W,L);break;default:throw Error(n(161))}}catch(se){ft(a,a.return,se)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function yj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;yj(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Ua(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)fj(a,o.alternate,o),o=o.sibling}function wo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Ni(4,o,o.return),wo(o);break;case 1:ha(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&sj(o,o.return,l),wo(o);break;case 27:ec(o.stateNode);case 26:case 5:ha(o,o.return),wo(o);break;case 22:o.memoizedState===null&&wo(o);break;case 30:wo(o);break;default:wo(o)}a=a.sibling}}function Ba(a,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,v=a,b=o,E=b.flags;switch(b.tag){case 0:case 11:case 15:Ba(v,b,l),Fl(4,b);break;case 1:if(Ba(v,b,l),f=b,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(W){ft(f,f.return,W)}if(f=b,v=f.updateQueue,v!==null){var N=f.stateNode;try{var L=v.shared.hiddenCallbacks;if(L!==null)for(v.shared.hiddenCallbacks=null,v=0;v<L.length;v++)Wx(L[v],N)}catch(W){ft(f,f.return,W)}}l&&E&64&&oj(b),Kl(b,b.return);break;case 27:uj(b);case 26:case 5:Ba(v,b,l),l&&f===null&&E&4&&lj(b),Kl(b,b.return);break;case 12:Ba(v,b,l);break;case 31:Ba(v,b,l),l&&E&4&&pj(v,b);break;case 13:Ba(v,b,l),l&&E&4&&gj(v,b);break;case 22:b.memoizedState===null&&Ba(v,b,l),Kl(b,b.return);break;case 30:break;default:Ba(v,b,l)}o=o.sibling}}function Lp(a,o){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&Dl(l))}function zp(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Dl(a))}function Jn(a,o,l,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)bj(a,o,l,f),o=o.sibling}function bj(a,o,l,f){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Jn(a,o,l,f),v&2048&&Fl(9,o);break;case 1:Jn(a,o,l,f);break;case 3:Jn(a,o,l,f),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Dl(a)));break;case 12:if(v&2048){Jn(a,o,l,f),a=o.stateNode;try{var b=o.memoizedProps,E=b.id,N=b.onPostCommit;typeof N=="function"&&N(E,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(L){ft(o,o.return,L)}}else Jn(a,o,l,f);break;case 31:Jn(a,o,l,f);break;case 13:Jn(a,o,l,f);break;case 23:break;case 22:b=o.stateNode,E=o.alternate,o.memoizedState!==null?b._visibility&2?Jn(a,o,l,f):Yl(a,o):b._visibility&2?Jn(a,o,l,f):(b._visibility|=2,Ss(a,o,l,f,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Lp(E,o);break;case 24:Jn(a,o,l,f),v&2048&&zp(o.alternate,o);break;default:Jn(a,o,l,f)}}function Ss(a,o,l,f,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=a,E=o,N=l,L=f,W=E.flags;switch(E.tag){case 0:case 11:case 15:Ss(b,E,N,L,v),Fl(8,E);break;case 23:break;case 22:var se=E.stateNode;E.memoizedState!==null?se._visibility&2?Ss(b,E,N,L,v):Yl(b,E):(se._visibility|=2,Ss(b,E,N,L,v)),v&&W&2048&&Lp(E.alternate,E);break;case 24:Ss(b,E,N,L,v),v&&W&2048&&zp(E.alternate,E);break;default:Ss(b,E,N,L,v)}o=o.sibling}}function Yl(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=a,f=o,v=f.flags;switch(f.tag){case 22:Yl(l,f),v&2048&&Lp(f.alternate,f);break;case 24:Yl(l,f),v&2048&&zp(f.alternate,f);break;default:Yl(l,f)}o=o.sibling}}var Gl=8192;function Es(a,o,l){if(a.subtreeFlags&Gl)for(a=a.child;a!==null;)_j(a,o,l),a=a.sibling}function _j(a,o,l){switch(a.tag){case 26:Es(a,o,l),a.flags&Gl&&a.memoizedState!==null&&eq(l,Qn,a.memoizedState,a.memoizedProps);break;case 5:Es(a,o,l);break;case 3:case 4:var f=Qn;Qn=yd(a.stateNode.containerInfo),Es(a,o,l),Qn=f;break;case 22:a.memoizedState===null&&(f=a.alternate,f!==null&&f.memoizedState!==null?(f=Gl,Gl=16777216,Es(a,o,l),Gl=f):Es(a,o,l));break;default:Es(a,o,l)}}function xj(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Vl(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];vr=f,jj(f,a)}xj(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)wj(a),a=a.sibling}function wj(a){switch(a.tag){case 0:case 11:case 15:Vl(a),a.flags&2048&&Ni(9,a,a.return);break;case 3:Vl(a);break;case 12:Vl(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,id(a)):Vl(a);break;default:Vl(a)}}function id(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var f=o[l];vr=f,jj(f,a)}xj(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Ni(8,o,o.return),id(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,id(o));break;default:id(o)}a=a.sibling}}function jj(a,o){for(;vr!==null;){var l=vr;switch(l.tag){case 0:case 11:case 15:Ni(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var f=l.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Dl(l.memoizedState.cache)}if(f=l.child,f!==null)f.return=l,vr=f;else e:for(l=a;vr!==null;){f=vr;var v=f.sibling,b=f.return;if(mj(f),f===l){vr=null;break e}if(v!==null){v.return=b,vr=v;break e}vr=b}}}var pR={getCacheForType:function(a){var o=Cr(tr),l=o.data.get(a);return l===void 0&&(l=a(),o.data.set(a,l)),l},cacheSignal:function(){return Cr(tr).controller.signal}},gR=typeof WeakMap=="function"?WeakMap:Map,lt=0,xt=null,We=null,Ze=0,dt=0,dn=null,ki=!1,Os=!1,Ip=!1,$a=0,Kt=0,Di=0,jo=0,Up=0,fn=0,Cs=0,Wl=null,Qr=null,Bp=!1,od=0,Sj=0,sd=1/0,ld=null,Ti=null,ur=0,Pi=null,As=null,Ha=0,$p=0,Hp=null,Ej=null,Xl=0,Fp=null;function mn(){return(lt&2)!==0&&Ze!==0?Ze&-Ze:R.T!==null?Xp():no()}function Oj(){if(fn===0)if((Ze&536870912)===0||Je){var a=gi;gi<<=1,(gi&3932160)===0&&(gi=262144),fn=a}else fn=536870912;return a=cn.current,a!==null&&(a.flags|=32),fn}function Jr(a,o,l){(a===xt&&(dt===2||dt===9)||a.cancelPendingCommit!==null)&&(Ns(a,0),Mi(a,Ze,fn,!1)),Ca(a,l),((lt&2)===0||a!==xt)&&(a===xt&&((lt&2)===0&&(jo|=l),Kt===4&&Mi(a,Ze,fn,!1)),pa(a))}function Cj(a,o,l){if((lt&6)!==0)throw Error(n(327));var f=!l&&(o&127)===0&&(o&a.expiredLanes)===0||Oa(a,o),v=f?bR(a,o):Yp(a,o,!0),b=f;do{if(v===0){Os&&!f&&Mi(a,o,0,!1);break}else{if(l=a.current.alternate,b&&!vR(l)){v=Yp(a,o,!1),b=!1;continue}if(v===2){if(b=o,a.errorRecoveryDisabledLanes&b)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var N=a;v=Wl;var L=N.current.memoizedState.isDehydrated;if(L&&(Ns(N,E).flags|=256),E=Yp(N,E,!1),E!==2){if(Ip&&!L){N.errorRecoveryDisabledLanes|=b,jo|=b,v=4;break e}b=Qr,Qr=v,b!==null&&(Qr===null?Qr=b:Qr.push.apply(Qr,b))}v=E}if(b=!1,v!==2)continue}}if(v===1){Ns(a,0),Mi(a,o,0,!0);break}e:{switch(f=a,b=v,b){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Mi(f,o,fn,!ki);break e;case 2:Qr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(v=od+300-Ge(),10<v)){if(Mi(f,o,fn,!ki),vi(f,0,!0)!==0)break e;Ha=o,f.timeoutHandle=aS(Aj.bind(null,f,l,Qr,ld,Bp,o,fn,jo,Cs,ki,b,"Throttled",-0,0),v);break e}Aj(f,l,Qr,ld,Bp,o,fn,jo,Cs,ki,b,null,-0,0)}}break}while(!0);pa(a)}function Aj(a,o,l,f,v,b,E,N,L,W,se,de,Z,re){if(a.timeoutHandle=-1,de=o.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Aa},_j(o,b,de);var Ae=(b&62914560)===b?od-Ge():(b&4194048)===b?Sj-Ge():0;if(Ae=tq(de,Ae),Ae!==null){Ha=b,a.cancelPendingCommit=Ae(qj.bind(null,a,o,b,l,f,v,E,N,L,se,de,null,Z,re)),Mi(a,b,E,!W);return}}qj(a,o,b,l,f,v,E,N,L)}function vR(a){for(var o=a;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var f=0;f<l.length;f++){var v=l[f],b=v.getSnapshot;v=v.value;try{if(!sn(b(),v))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Mi(a,o,l,f){o&=~Up,o&=~jo,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var v=o;0<v;){var b=31-ht(v),E=1<<b;f[b]=-1,v&=~E}l!==0&&yu(a,l,o)}function cd(){return(lt&6)===0?(Zl(0),!1):!0}function Kp(){if(We!==null){if(dt===0)var a=We.return;else a=We,Ta=ho=null,sp(a),bs=null,Pl=0,a=We;for(;a!==null;)ij(a.alternate,a),a=a.return;We=null}}function Ns(a,o){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,LR(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Ha=0,Kp(),xt=a,We=l=ka(a.current,null),Ze=o,dt=0,dn=null,ki=!1,Os=Oa(a,o),Ip=!1,Cs=fn=Up=jo=Di=Kt=0,Qr=Wl=null,Bp=!1,(o&8)!==0&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var v=31-ht(f),b=1<<v;o|=a[v],f&=~b}return $a=o,ku(),l}function Nj(a,o){Be=null,R.H=Bl,o===ys||o===zu?(o=Kx(),dt=3):o===Wh?(o=Kx(),dt=4):dt=o===jp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,dn=o,We===null&&(Kt=1,Qu(a,kn(o,a.current)))}function kj(){var a=cn.current;return a===null?!0:(Ze&4194048)===Ze?Mn===null:(Ze&62914560)===Ze||(Ze&536870912)!==0?a===Mn:!1}function Dj(){var a=R.H;return R.H=Bl,a===null?Bl:a}function Tj(){var a=R.A;return R.A=pR,a}function ud(){Kt=4,ki||(Ze&4194048)!==Ze&&cn.current!==null||(Os=!0),(Di&134217727)===0&&(jo&134217727)===0||xt===null||Mi(xt,Ze,fn,!1)}function Yp(a,o,l){var f=lt;lt|=2;var v=Dj(),b=Tj();(xt!==a||Ze!==o)&&(ld=null,Ns(a,o)),o=!1;var E=Kt;e:do try{if(dt!==0&&We!==null){var N=We,L=dn;switch(dt){case 8:Kp(),E=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(o=!0);var W=dt;if(dt=0,dn=null,ks(a,N,L,W),l&&Os){E=0;break e}break;default:W=dt,dt=0,dn=null,ks(a,N,L,W)}}yR(),E=Kt;break}catch(se){Nj(a,se)}while(!0);return o&&a.shellSuspendCounter++,Ta=ho=null,lt=f,R.H=v,R.A=b,We===null&&(xt=null,Ze=0,ku()),E}function yR(){for(;We!==null;)Pj(We)}function bR(a,o){var l=lt;lt|=2;var f=Dj(),v=Tj();xt!==a||Ze!==o?(ld=null,sd=Ge()+500,Ns(a,o)):Os=Oa(a,o);e:do try{if(dt!==0&&We!==null){o=We;var b=dn;t:switch(dt){case 1:dt=0,dn=null,ks(a,o,b,1);break;case 2:case 9:if(Hx(b)){dt=0,dn=null,Mj(o);break}o=function(){dt!==2&&dt!==9||xt!==a||(dt=7),pa(a)},b.then(o,o);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Hx(b)?(dt=0,dn=null,Mj(o)):(dt=0,dn=null,ks(a,o,b,7));break;case 5:var E=null;switch(We.tag){case 26:E=We.memoizedState;case 5:case 27:var N=We;if(E?bS(E):N.stateNode.complete){dt=0,dn=null;var L=N.sibling;if(L!==null)We=L;else{var W=N.return;W!==null?(We=W,dd(W)):We=null}break t}}dt=0,dn=null,ks(a,o,b,5);break;case 6:dt=0,dn=null,ks(a,o,b,6);break;case 8:Kp(),Kt=6;break e;default:throw Error(n(462))}}_R();break}catch(se){Nj(a,se)}while(!0);return Ta=ho=null,R.H=f,R.A=v,lt=l,We!==null?0:(xt=null,Ze=0,ku(),Kt)}function _R(){for(;We!==null&&!Kr();)Pj(We)}function Pj(a){var o=nj(a.alternate,a,$a);a.memoizedProps=a.pendingProps,o===null?dd(a):We=o}function Mj(a){var o=a,l=o.alternate;switch(o.tag){case 15:case 0:o=Zw(l,o,o.pendingProps,o.type,void 0,Ze);break;case 11:o=Zw(l,o,o.pendingProps,o.type.render,o.ref,Ze);break;case 5:sp(o);default:ij(l,o),o=We=Tx(o,$a),o=nj(l,o,$a)}a.memoizedProps=a.pendingProps,o===null?dd(a):We=o}function ks(a,o,l,f){Ta=ho=null,sp(o),bs=null,Pl=0;var v=o.return;try{if(lR(a,v,o,l,Ze)){Kt=1,Qu(a,kn(l,a.current)),We=null;return}}catch(b){if(v!==null)throw We=v,b;Kt=1,Qu(a,kn(l,a.current)),We=null;return}o.flags&32768?(Je||f===1?a=!0:Os||(Ze&536870912)!==0?a=!1:(ki=a=!0,(f===2||f===9||f===3||f===6)&&(f=cn.current,f!==null&&f.tag===13&&(f.flags|=16384))),Rj(o,a)):dd(o)}function dd(a){var o=a;do{if((o.flags&32768)!==0){Rj(o,ki);return}a=o.return;var l=dR(o.alternate,o,$a);if(l!==null){We=l;return}if(o=o.sibling,o!==null){We=o;return}We=o=a}while(o!==null);Kt===0&&(Kt=5)}function Rj(a,o){do{var l=fR(a.alternate,a);if(l!==null){l.flags&=32767,We=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(a=a.sibling,a!==null)){We=a;return}We=a=l}while(a!==null);Kt=6,We=null}function qj(a,o,l,f,v,b,E,N,L){a.cancelPendingCommit=null;do fd();while(ur!==0);if((lt&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(b=o.lanes|o.childLanes,b|=Mh,pl(a,l,b,E,N,L),a===xt&&(We=xt=null,Ze=0),As=o,Pi=a,Ha=l,$p=b,Hp=v,Ej=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,SR(Er,function(){return Bj(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=R.T,R.T=null,v=U.p,U.p=2,E=lt,lt|=4;try{mR(a,o,l)}finally{lt=E,U.p=v,R.T=f}}ur=1,Lj(),zj(),Ij()}}function Lj(){if(ur===1){ur=0;var a=Pi,o=As,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var f=U.p;U.p=2;var v=lt;lt|=4;try{vj(o,a);var b=ag,E=jx(a.containerInfo),N=b.focusedElem,L=b.selectionRange;if(E!==N&&N&&N.ownerDocument&&wx(N.ownerDocument.documentElement,N)){if(L!==null&&Nh(N)){var W=L.start,se=L.end;if(se===void 0&&(se=W),"selectionStart"in N)N.selectionStart=W,N.selectionEnd=Math.min(se,N.value.length);else{var de=N.ownerDocument||document,Z=de&&de.defaultView||window;if(Z.getSelection){var re=Z.getSelection(),Ae=N.textContent.length,ze=Math.min(L.start,Ae),vt=L.end===void 0?ze:Math.min(L.end,Ae);!re.extend&&ze>vt&&(E=vt,vt=ze,ze=E);var F=xx(N,ze),$=xx(N,vt);if(F&&$&&(re.rangeCount!==1||re.anchorNode!==F.node||re.anchorOffset!==F.offset||re.focusNode!==$.node||re.focusOffset!==$.offset)){var V=de.createRange();V.setStart(F.node,F.offset),re.removeAllRanges(),ze>vt?(re.addRange(V),re.extend($.node,$.offset)):(V.setEnd($.node,$.offset),re.addRange(V))}}}}for(de=[],re=N;re=re.parentNode;)re.nodeType===1&&de.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<de.length;N++){var ue=de[N];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}Sd=!!ng,ag=ng=null}finally{lt=v,U.p=f,R.T=l}}a.current=o,ur=2}}function zj(){if(ur===2){ur=0;var a=Pi,o=As,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var f=U.p;U.p=2;var v=lt;lt|=4;try{fj(a,o.alternate,o)}finally{lt=v,U.p=f,R.T=l}}ur=3}}function Ij(){if(ur===4||ur===3){ur=0,jt();var a=Pi,o=As,l=Ha,f=Ej;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ur=5:(ur=0,As=Pi=null,Uj(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Ti=null),vl(l),o=o.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(er,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=R.T,v=U.p,U.p=2,R.T=null;try{for(var b=a.onRecoverableError,E=0;E<f.length;E++){var N=f[E];b(N.value,{componentStack:N.stack})}}finally{R.T=o,U.p=v}}(Ha&3)!==0&&fd(),pa(a),v=a.pendingLanes,(l&261930)!==0&&(v&42)!==0?a===Fp?Xl++:(Xl=0,Fp=a):Xl=0,Zl(0)}}function Uj(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Dl(o)))}function fd(){return Lj(),zj(),Ij(),Bj()}function Bj(){if(ur!==5)return!1;var a=Pi,o=$p;$p=0;var l=vl(Ha),f=R.T,v=U.p;try{U.p=32>l?32:l,R.T=null,l=Hp,Hp=null;var b=Pi,E=Ha;if(ur=0,As=Pi=null,Ha=0,(lt&6)!==0)throw Error(n(331));var N=lt;if(lt|=4,wj(b.current),bj(b,b.current,E,l),lt=N,Zl(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(er,b)}catch{}return!0}finally{U.p=v,R.T=f,Uj(a,o)}}function $j(a,o,l){o=kn(l,o),o=wp(a.stateNode,o,2),a=Oi(a,o,2),a!==null&&(Ca(a,2),pa(a))}function ft(a,o,l){if(a.tag===3)$j(a,a,l);else for(;o!==null;){if(o.tag===3){$j(o,a,l);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Ti===null||!Ti.has(f))){a=kn(l,a),l=Hw(2),f=Oi(o,l,2),f!==null&&(Fw(l,f,o,a),Ca(f,2),pa(f));break}}o=o.return}}function Gp(a,o,l){var f=a.pingCache;if(f===null){f=a.pingCache=new gR;var v=new Set;f.set(o,v)}else v=f.get(o),v===void 0&&(v=new Set,f.set(o,v));v.has(l)||(Ip=!0,v.add(l),a=xR.bind(null,a,o,l),o.then(a,a))}function xR(a,o,l){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,xt===a&&(Ze&l)===l&&(Kt===4||Kt===3&&(Ze&62914560)===Ze&&300>Ge()-od?(lt&2)===0&&Ns(a,0):Up|=l,Cs===Ze&&(Cs=0)),pa(a)}function Hj(a,o){o===0&&(o=ye()),a=uo(a,o),a!==null&&(Ca(a,o),pa(a))}function wR(a){var o=a.memoizedState,l=0;o!==null&&(l=o.retryLane),Hj(a,l)}function jR(a,o){var l=0;switch(a.tag){case 31:case 13:var f=a.stateNode,v=a.memoizedState;v!==null&&(l=v.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(o),Hj(a,l)}function SR(a,o){return _t(a,o)}var md=null,Ds=null,Vp=!1,hd=!1,Wp=!1,Ri=0;function pa(a){a!==Ds&&a.next===null&&(Ds===null?md=Ds=a:Ds=Ds.next=a),hd=!0,Vp||(Vp=!0,OR())}function Zl(a,o){if(!Wp&&hd){Wp=!0;do for(var l=!1,f=md;f!==null;){if(a!==0){var v=f.pendingLanes;if(v===0)var b=0;else{var E=f.suspendedLanes,N=f.pingedLanes;b=(1<<31-ht(42|a)+1)-1,b&=v&~(E&~N),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,Gj(f,b))}else b=Ze,b=vi(f,f===xt?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Oa(f,b)||(l=!0,Gj(f,b));f=f.next}while(l);Wp=!1}}function ER(){Fj()}function Fj(){hd=Vp=!1;var a=0;Ri!==0&&qR()&&(a=Ri);for(var o=Ge(),l=null,f=md;f!==null;){var v=f.next,b=Kj(f,o);b===0?(f.next=null,l===null?md=v:l.next=v,v===null&&(Ds=l)):(l=f,(a!==0||(b&3)!==0)&&(hd=!0)),f=v}ur!==0&&ur!==5||Zl(a),Ri!==0&&(Ri=0)}function Kj(a,o){for(var l=a.suspendedLanes,f=a.pingedLanes,v=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var E=31-ht(b),N=1<<E,L=v[E];L===-1?((N&l)===0||(N&f)!==0)&&(v[E]=hl(N,o)):L<=o&&(a.expiredLanes|=N),b&=~N}if(o=xt,l=Ze,l=vi(a,a===o?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,l===0||a===o&&(dt===2||dt===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&Nt(f),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||Oa(a,l)){if(o=l&-l,o===a.callbackPriority)return o;switch(f!==null&&Nt(f),vl(l)){case 2:case 8:l=Gr;break;case 32:l=Er;break;case 268435456:l=he;break;default:l=Er}return f=Yj.bind(null,a),l=_t(l,f),a.callbackPriority=o,a.callbackNode=l,o}return f!==null&&f!==null&&Nt(f),a.callbackPriority=2,a.callbackNode=null,2}function Yj(a,o){if(ur!==0&&ur!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(fd()&&a.callbackNode!==l)return null;var f=Ze;return f=vi(a,a===xt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(Cj(a,f,o),Kj(a,Ge()),a.callbackNode!=null&&a.callbackNode===l?Yj.bind(null,a):null)}function Gj(a,o){if(fd())return null;Cj(a,o,!0)}function OR(){zR(function(){(lt&6)!==0?_t(Sn,ER):Fj()})}function Xp(){if(Ri===0){var a=gs;a===0&&(a=pi,pi<<=1,(pi&261888)===0&&(pi=256)),Ri=a}return Ri}function Vj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:wu(""+a)}function Wj(a,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,a.id&&l.setAttribute("form",a.id),o.parentNode.insertBefore(l,o),a=new FormData(a),l.parentNode.removeChild(l),a}function CR(a,o,l,f,v){if(o==="submit"&&l&&l.stateNode===v){var b=Vj((v[cr]||null).action),E=f.submitter;E&&(o=(o=E[cr]||null)?Vj(o.formAction):E.getAttribute("formAction"),o!==null&&(b=o,E=null));var N=new Ou("action","action",null,f,v);a.push({event:N,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Ri!==0){var L=E?Wj(v,E):new FormData(v);gp(l,{pending:!0,data:L,method:v.method,action:b},null,L)}}else typeof b=="function"&&(N.preventDefault(),L=E?Wj(v,E):new FormData(v),gp(l,{pending:!0,data:L,method:v.method,action:b},b,L))},currentTarget:v}]})}}for(var Zp=0;Zp<Ph.length;Zp++){var Qp=Ph[Zp],AR=Qp.toLowerCase(),NR=Qp[0].toUpperCase()+Qp.slice(1);Zn(AR,"on"+NR)}Zn(Ox,"onAnimationEnd"),Zn(Cx,"onAnimationIteration"),Zn(Ax,"onAnimationStart"),Zn("dblclick","onDoubleClick"),Zn("focusin","onFocus"),Zn("focusout","onBlur"),Zn(K2,"onTransitionRun"),Zn(Y2,"onTransitionStart"),Zn(G2,"onTransitionCancel"),Zn(Nx,"onTransitionEnd"),Se("onMouseEnter",["mouseout","mouseover"]),Se("onMouseLeave",["mouseout","mouseover"]),Se("onPointerEnter",["pointerout","pointerover"]),Se("onPointerLeave",["pointerout","pointerover"]),ae("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ae("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ae("onBeforeInput",["compositionend","keypress","textInput","paste"]),ae("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function Xj(a,o){o=(o&4)!==0;for(var l=0;l<a.length;l++){var f=a[l],v=f.event;f=f.listeners;e:{var b=void 0;if(o)for(var E=f.length-1;0<=E;E--){var N=f[E],L=N.instance,W=N.currentTarget;if(N=N.listener,L!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=W;try{b(v)}catch(se){Nu(se)}v.currentTarget=null,b=L}else for(E=0;E<f.length;E++){if(N=f[E],L=N.instance,W=N.currentTarget,N=N.listener,L!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=W;try{b(v)}catch(se){Nu(se)}v.currentTarget=null,b=L}}}}function Xe(a,o){var l=o[io];l===void 0&&(l=o[io]=new Set);var f=a+"__bubble";l.has(f)||(Zj(o,a,2,!1),l.add(f))}function Jp(a,o,l){var f=0;o&&(f|=4),Zj(l,a,f,o)}var pd="_reactListening"+Math.random().toString(36).slice(2);function eg(a){if(!a[pd]){a[pd]=!0,me.forEach(function(l){l!=="selectionchange"&&(kR.has(l)||Jp(l,!1,a),Jp(l,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[pd]||(o[pd]=!0,Jp("selectionchange",!1,o))}}function Zj(a,o,l,f){switch(OS(o)){case 2:var v=aq;break;case 8:v=iq;break;default:v=pg}l=v.bind(null,o,l,a),v=void 0,!_h||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),f?v!==void 0?a.addEventListener(o,l,{capture:!0,passive:v}):a.addEventListener(o,l,!0):v!==void 0?a.addEventListener(o,l,{passive:v}):a.addEventListener(o,l,!1)}function tg(a,o,l,f,v){var b=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var E=f.tag;if(E===3||E===4){var N=f.stateNode.containerInfo;if(N===v)break;if(E===4)for(E=f.return;E!==null;){var L=E.tag;if((L===3||L===4)&&E.stateNode.containerInfo===v)return;E=E.return}for(;N!==null;){if(E=Wn(N),E===null)return;if(L=E.tag,L===5||L===6||L===26||L===27){f=b=E;continue e}N=N.parentNode}}f=f.return}rx(function(){var W=b,se=yh(l),de=[];e:{var Z=kx.get(a);if(Z!==void 0){var re=Ou,Ae=a;switch(a){case"keypress":if(Su(l)===0)break e;case"keydown":case"keyup":re=j2;break;case"focusin":Ae="focus",re=Sh;break;case"focusout":Ae="blur",re=Sh;break;case"beforeblur":case"afterblur":re=Sh;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=ix;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=d2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=O2;break;case Ox:case Cx:case Ax:re=h2;break;case Nx:re=A2;break;case"scroll":case"scrollend":re=c2;break;case"wheel":re=k2;break;case"copy":case"cut":case"paste":re=g2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=sx;break;case"toggle":case"beforetoggle":re=T2}var ze=(o&4)!==0,vt=!ze&&(a==="scroll"||a==="scrollend"),F=ze?Z!==null?Z+"Capture":null:Z;ze=[];for(var $=W,V;$!==null;){var ue=$;if(V=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||V===null||F===null||(ue=_l($,F),ue!=null&&ze.push(Jl($,ue,V))),vt)break;$=$.return}0<ze.length&&(Z=new re(Z,Ae,null,l,se),de.push({event:Z,listeners:ze}))}}if((o&7)===0){e:{if(Z=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",Z&&l!==vh&&(Ae=l.relatedTarget||l.fromElement)&&(Wn(Ae)||Ae[da]))break e;if((re||Z)&&(Z=se.window===se?se:(Z=se.ownerDocument)?Z.defaultView||Z.parentWindow:window,re?(Ae=l.relatedTarget||l.toElement,re=W,Ae=Ae?Wn(Ae):null,Ae!==null&&(vt=s(Ae),ze=Ae.tag,Ae!==vt||ze!==5&&ze!==27&&ze!==6)&&(Ae=null)):(re=null,Ae=W),re!==Ae)){if(ze=ix,ue="onMouseLeave",F="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(ze=sx,ue="onPointerLeave",F="onPointerEnter",$="pointer"),vt=re==null?Z:oo(re),V=Ae==null?Z:oo(Ae),Z=new ze(ue,$+"leave",re,l,se),Z.target=vt,Z.relatedTarget=V,ue=null,Wn(se)===W&&(ze=new ze(F,$+"enter",Ae,l,se),ze.target=V,ze.relatedTarget=vt,ue=ze),vt=ue,re&&Ae)t:{for(ze=DR,F=re,$=Ae,V=0,ue=F;ue;ue=ze(ue))V++;ue=0;for(var qe=$;qe;qe=ze(qe))ue++;for(;0<V-ue;)F=ze(F),V--;for(;0<ue-V;)$=ze($),ue--;for(;V--;){if(F===$||$!==null&&F===$.alternate){ze=F;break t}F=ze(F),$=ze($)}ze=null}else ze=null;re!==null&&Qj(de,Z,re,ze,!1),Ae!==null&&vt!==null&&Qj(de,vt,Ae,ze,!0)}}e:{if(Z=W?oo(W):window,re=Z.nodeName&&Z.nodeName.toLowerCase(),re==="select"||re==="input"&&Z.type==="file")var nt=px;else if(mx(Z))if(gx)nt=$2;else{nt=U2;var Pe=I2}else re=Z.nodeName,!re||re.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&gh(W.elementType)&&(nt=px):nt=B2;if(nt&&(nt=nt(a,W))){hx(de,nt,l,se);break e}Pe&&Pe(a,Z,W),a==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&ph(Z,"number",Z.value)}switch(Pe=W?oo(W):window,a){case"focusin":(mx(Pe)||Pe.contentEditable==="true")&&(ls=Pe,kh=W,Al=null);break;case"focusout":Al=kh=ls=null;break;case"mousedown":Dh=!0;break;case"contextmenu":case"mouseup":case"dragend":Dh=!1,Sx(de,l,se);break;case"selectionchange":if(F2)break;case"keydown":case"keyup":Sx(de,l,se)}var $e;if(Oh)e:{switch(a){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else ss?dx(a,l)&&(Qe="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Qe="onCompositionStart");Qe&&(lx&&l.locale!=="ko"&&(ss||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&ss&&($e=nx()):(bi=se,xh="value"in bi?bi.value:bi.textContent,ss=!0)),Pe=gd(W,Qe),0<Pe.length&&(Qe=new ox(Qe,a,null,l,se),de.push({event:Qe,listeners:Pe}),$e?Qe.data=$e:($e=fx(l),$e!==null&&(Qe.data=$e)))),($e=M2?R2(a,l):q2(a,l))&&(Qe=gd(W,"onBeforeInput"),0<Qe.length&&(Pe=new ox("onBeforeInput","beforeinput",null,l,se),de.push({event:Pe,listeners:Qe}),Pe.data=$e)),CR(de,a,W,l,se)}Xj(de,o)})}function Jl(a,o,l){return{instance:a,listener:o,currentTarget:l}}function gd(a,o){for(var l=o+"Capture",f=[];a!==null;){var v=a,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=_l(a,l),v!=null&&f.unshift(Jl(a,v,b)),v=_l(a,o),v!=null&&f.push(Jl(a,v,b))),a.tag===3)return f;a=a.return}return[]}function DR(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Qj(a,o,l,f,v){for(var b=o._reactName,E=[];l!==null&&l!==f;){var N=l,L=N.alternate,W=N.stateNode;if(N=N.tag,L!==null&&L===f)break;N!==5&&N!==26&&N!==27||W===null||(L=W,v?(W=_l(l,b),W!=null&&E.unshift(Jl(l,W,L))):v||(W=_l(l,b),W!=null&&E.push(Jl(l,W,L)))),l=l.return}E.length!==0&&a.push({event:o,listeners:E})}var TR=/\r\n?/g,PR=/\u0000|\uFFFD/g;function Jj(a){return(typeof a=="string"?a:""+a).replace(TR,`
`).replace(PR,"")}function eS(a,o){return o=Jj(o),Jj(a)===o}function gt(a,o,l,f,v,b){switch(l){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||as(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&as(a,""+f);break;case"className":Wt(a,"class",f);break;case"tabIndex":Wt(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Wt(a,l,f);break;case"style":ex(a,f,b);break;case"data":if(o!=="object"){Wt(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||l!=="href")){a.removeAttribute(l);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(l);break}f=wu(""+f),a.setAttribute(l,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(o!=="input"&&gt(a,o,"name",v.name,v,null),gt(a,o,"formEncType",v.formEncType,v,null),gt(a,o,"formMethod",v.formMethod,v,null),gt(a,o,"formTarget",v.formTarget,v,null)):(gt(a,o,"encType",v.encType,v,null),gt(a,o,"method",v.method,v,null),gt(a,o,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(l);break}f=wu(""+f),a.setAttribute(l,f);break;case"onClick":f!=null&&(a.onclick=Aa);break;case"onScroll":f!=null&&Xe("scroll",a);break;case"onScrollEnd":f!=null&&Xe("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}l=wu(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,""+f):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":f===!0?a.setAttribute(l,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(l,f):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(l,f):a.removeAttribute(l);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(l):a.setAttribute(l,f);break;case"popover":Xe("beforetoggle",a),Xe("toggle",a),et(a,"popover",f);break;case"xlinkActuate":Xn(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Xn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Xn(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Xn(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Xn(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Xn(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Xn(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Xn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Xn(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":et(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=s2.get(l)||l,et(a,l,f))}}function rg(a,o,l,f,v,b){switch(l){case"style":ex(a,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(l=f.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"children":typeof f=="string"?as(a,f):(typeof f=="number"||typeof f=="bigint")&&as(a,""+f);break;case"onScroll":f!=null&&Xe("scroll",a);break;case"onScrollEnd":f!=null&&Xe("scrollend",a);break;case"onClick":f!=null&&(a.onclick=Aa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!le.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),o=l.slice(2,v?l.length-7:void 0),b=a[cr]||null,b=b!=null?b[l]:null,typeof b=="function"&&a.removeEventListener(o,b,v),typeof f=="function")){typeof b!="function"&&b!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(o,f,v);break e}l in a?a[l]=f:f===!0?a.setAttribute(l,""):et(a,l,f)}}}function Nr(a,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",a),Xe("load",a);var f=!1,v=!1,b;for(b in l)if(l.hasOwnProperty(b)){var E=l[b];if(E!=null)switch(b){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:gt(a,o,b,E,l,null)}}v&&gt(a,o,"srcSet",l.srcSet,l,null),f&&gt(a,o,"src",l.src,l,null);return;case"input":Xe("invalid",a);var N=b=E=v=null,L=null,W=null;for(f in l)if(l.hasOwnProperty(f)){var se=l[f];if(se!=null)switch(f){case"name":v=se;break;case"type":E=se;break;case"checked":L=se;break;case"defaultChecked":W=se;break;case"value":b=se;break;case"defaultValue":N=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(137,o));break;default:gt(a,o,f,se,l,null)}}X_(a,b,N,L,W,E,v,!1);return;case"select":Xe("invalid",a),f=E=b=null;for(v in l)if(l.hasOwnProperty(v)&&(N=l[v],N!=null))switch(v){case"value":b=N;break;case"defaultValue":E=N;break;case"multiple":f=N;default:gt(a,o,v,N,l,null)}o=b,l=E,a.multiple=!!f,o!=null?ns(a,!!f,o,!1):l!=null&&ns(a,!!f,l,!0);return;case"textarea":Xe("invalid",a),b=v=f=null;for(E in l)if(l.hasOwnProperty(E)&&(N=l[E],N!=null))switch(E){case"value":f=N;break;case"defaultValue":v=N;break;case"children":b=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:gt(a,o,E,N,l,null)}Q_(a,f,v,b);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(f=l[L],f!=null))switch(L){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:gt(a,o,L,f,l,null)}return;case"dialog":Xe("beforetoggle",a),Xe("toggle",a),Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":Xe("load",a);break;case"video":case"audio":for(f=0;f<Ql.length;f++)Xe(Ql[f],a);break;case"image":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"embed":case"source":case"link":Xe("error",a),Xe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(f=l[W],f!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:gt(a,o,W,f,l,null)}return;default:if(gh(o)){for(se in l)l.hasOwnProperty(se)&&(f=l[se],f!==void 0&&rg(a,o,se,f,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(f=l[N],f!=null&&gt(a,o,N,f,l,null))}function MR(a,o,l,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,E=null,N=null,L=null,W=null,se=null;for(re in l){var de=l[re];if(l.hasOwnProperty(re)&&de!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":L=de;default:f.hasOwnProperty(re)||gt(a,o,re,null,f,de)}}for(var Z in f){var re=f[Z];if(de=l[Z],f.hasOwnProperty(Z)&&(re!=null||de!=null))switch(Z){case"type":b=re;break;case"name":v=re;break;case"checked":W=re;break;case"defaultChecked":se=re;break;case"value":E=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,o));break;default:re!==de&&gt(a,o,Z,re,f,de)}}hh(a,E,N,L,W,se,b,v);return;case"select":re=E=N=Z=null;for(b in l)if(L=l[b],l.hasOwnProperty(b)&&L!=null)switch(b){case"value":break;case"multiple":re=L;default:f.hasOwnProperty(b)||gt(a,o,b,null,f,L)}for(v in f)if(b=f[v],L=l[v],f.hasOwnProperty(v)&&(b!=null||L!=null))switch(v){case"value":Z=b;break;case"defaultValue":N=b;break;case"multiple":E=b;default:b!==L&&gt(a,o,v,b,f,L)}o=N,l=E,f=re,Z!=null?ns(a,!!l,Z,!1):!!f!=!!l&&(o!=null?ns(a,!!l,o,!0):ns(a,!!l,l?[]:"",!1));return;case"textarea":re=Z=null;for(N in l)if(v=l[N],l.hasOwnProperty(N)&&v!=null&&!f.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:gt(a,o,N,null,f,v)}for(E in f)if(v=f[E],b=l[E],f.hasOwnProperty(E)&&(v!=null||b!=null))switch(E){case"value":Z=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==b&&gt(a,o,E,v,f,b)}Z_(a,Z,re);return;case"option":for(var Ae in l)if(Z=l[Ae],l.hasOwnProperty(Ae)&&Z!=null&&!f.hasOwnProperty(Ae))switch(Ae){case"selected":a.selected=!1;break;default:gt(a,o,Ae,null,f,Z)}for(L in f)if(Z=f[L],re=l[L],f.hasOwnProperty(L)&&Z!==re&&(Z!=null||re!=null))switch(L){case"selected":a.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:gt(a,o,L,Z,f,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in l)Z=l[ze],l.hasOwnProperty(ze)&&Z!=null&&!f.hasOwnProperty(ze)&&gt(a,o,ze,null,f,Z);for(W in f)if(Z=f[W],re=l[W],f.hasOwnProperty(W)&&Z!==re&&(Z!=null||re!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,o));break;default:gt(a,o,W,Z,f,re)}return;default:if(gh(o)){for(var vt in l)Z=l[vt],l.hasOwnProperty(vt)&&Z!==void 0&&!f.hasOwnProperty(vt)&&rg(a,o,vt,void 0,f,Z);for(se in f)Z=f[se],re=l[se],!f.hasOwnProperty(se)||Z===re||Z===void 0&&re===void 0||rg(a,o,se,Z,f,re);return}}for(var F in l)Z=l[F],l.hasOwnProperty(F)&&Z!=null&&!f.hasOwnProperty(F)&&gt(a,o,F,null,f,Z);for(de in f)Z=f[de],re=l[de],!f.hasOwnProperty(de)||Z===re||Z==null&&re==null||gt(a,o,de,Z,f,re)}function tS(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function RR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,l=performance.getEntriesByType("resource"),f=0;f<l.length;f++){var v=l[f],b=v.transferSize,E=v.initiatorType,N=v.duration;if(b&&N&&tS(E)){for(E=0,N=v.responseEnd,f+=1;f<l.length;f++){var L=l[f],W=L.startTime;if(W>N)break;var se=L.transferSize,de=L.initiatorType;se&&tS(de)&&(L=L.responseEnd,E+=se*(L<N?1:(N-W)/(L-W)))}if(--f,o+=8*(b+E)/(v.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var ng=null,ag=null;function vd(a){return a.nodeType===9?a:a.ownerDocument}function rS(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nS(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function ig(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var og=null;function qR(){var a=window.event;return a&&a.type==="popstate"?a===og?!1:(og=a,!0):(og=null,!1)}var aS=typeof setTimeout=="function"?setTimeout:void 0,LR=typeof clearTimeout=="function"?clearTimeout:void 0,iS=typeof Promise=="function"?Promise:void 0,zR=typeof queueMicrotask=="function"?queueMicrotask:typeof iS<"u"?function(a){return iS.resolve(null).then(a).catch(IR)}:aS;function IR(a){setTimeout(function(){throw a})}function qi(a){return a==="head"}function oS(a,o){var l=o,f=0;do{var v=l.nextSibling;if(a.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(f===0){a.removeChild(v),Rs(o);return}f--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")f++;else if(l==="html")ec(a.ownerDocument.documentElement);else if(l==="head"){l=a.ownerDocument.head,ec(l);for(var b=l.firstChild;b;){var E=b.nextSibling,N=b.nodeName;b[ts]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=E}}else l==="body"&&ec(a.ownerDocument.body);l=v}while(l);Rs(o)}function sS(a,o){var l=a;a=0;do{var f=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(a===0)break;a--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||a++;l=f}while(l)}function sg(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":sg(l),rs(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function UR(a,o,l,f){for(;a.nodeType===1;){var v=l;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[ts])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Rn(a.nextSibling),a===null)break}return null}function BR(a,o,l){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Rn(a.nextSibling),a===null))return null;return a}function lS(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Rn(a.nextSibling),a===null))return null;return a}function lg(a){return a.data==="$?"||a.data==="$~"}function cg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function $R(a,o){var l=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||l.readyState!=="loading")o();else{var f=function(){o(),l.removeEventListener("DOMContentLoaded",f)};l.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Rn(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var ug=null;function cS(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="/$"||l==="/&"){if(o===0)return Rn(a.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}a=a.nextSibling}return null}function uS(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return a;o--}else l!=="/$"&&l!=="/&"||o++}a=a.previousSibling}return null}function dS(a,o,l){switch(o=vd(l),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function ec(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);rs(a)}var qn=new Map,fS=new Set;function yd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Fa=U.d;U.d={f:HR,r:FR,D:KR,C:YR,L:GR,m:VR,X:XR,S:WR,M:ZR};function HR(){var a=Fa.f(),o=cd();return a||o}function FR(a){var o=yi(a);o!==null&&o.tag===5&&o.type==="form"?Nw(o):Fa.r(a)}var Ts=typeof document>"u"?null:document;function mS(a,o,l){var f=Ts;if(f&&typeof o=="string"&&o){var v=An(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),fS.has(v)||(fS.add(v),a={rel:a,crossOrigin:l,href:o},f.querySelector(v)===null&&(o=f.createElement("link"),Nr(o,"link",a),ce(o),f.head.appendChild(o)))}}function KR(a){Fa.D(a),mS("dns-prefetch",a,null)}function YR(a,o){Fa.C(a,o),mS("preconnect",a,o)}function GR(a,o,l){Fa.L(a,o,l);var f=Ts;if(f&&a&&o){var v='link[rel="preload"][as="'+An(o)+'"]';o==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+An(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+An(l.imageSizes)+'"]')):v+='[href="'+An(a)+'"]';var b=v;switch(o){case"style":b=Ps(a);break;case"script":b=Ms(a)}qn.has(b)||(a=p({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:a,as:o},l),qn.set(b,a),f.querySelector(v)!==null||o==="style"&&f.querySelector(tc(b))||o==="script"&&f.querySelector(rc(b))||(o=f.createElement("link"),Nr(o,"link",a),ce(o),f.head.appendChild(o)))}}function VR(a,o){Fa.m(a,o);var l=Ts;if(l&&a){var f=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+An(f)+'"][href="'+An(a)+'"]',b=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ms(a)}if(!qn.has(b)&&(a=p({rel:"modulepreload",href:a},o),qn.set(b,a),l.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(rc(b)))return}f=l.createElement("link"),Nr(f,"link",a),ce(f),l.head.appendChild(f)}}}function WR(a,o,l){Fa.S(a,o,l);var f=Ts;if(f&&a){var v=Y(f).hoistableStyles,b=Ps(a);o=o||"default";var E=v.get(b);if(!E){var N={loading:0,preload:null};if(E=f.querySelector(tc(b)))N.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},l),(l=qn.get(b))&&dg(a,l);var L=E=f.createElement("link");ce(L),Nr(L,"link",a),L._p=new Promise(function(W,se){L.onload=W,L.onerror=se}),L.addEventListener("load",function(){N.loading|=1}),L.addEventListener("error",function(){N.loading|=2}),N.loading|=4,bd(E,o,f)}E={type:"stylesheet",instance:E,count:1,state:N},v.set(b,E)}}}function XR(a,o){Fa.X(a,o);var l=Ts;if(l&&a){var f=Y(l).hoistableScripts,v=Ms(a),b=f.get(v);b||(b=l.querySelector(rc(v)),b||(a=p({src:a,async:!0},o),(o=qn.get(v))&&fg(a,o),b=l.createElement("script"),ce(b),Nr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function ZR(a,o){Fa.M(a,o);var l=Ts;if(l&&a){var f=Y(l).hoistableScripts,v=Ms(a),b=f.get(v);b||(b=l.querySelector(rc(v)),b||(a=p({src:a,async:!0,type:"module"},o),(o=qn.get(v))&&fg(a,o),b=l.createElement("script"),ce(b),Nr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function hS(a,o,l,f){var v=(v=Ie.current)?yd(v):null;if(!v)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ps(l.href),l=Y(v).hoistableStyles,f=l.get(o),f||(f={type:"style",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=Ps(l.href);var b=Y(v).hoistableStyles,E=b.get(a);if(E||(v=v.ownerDocument||v,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,E),(b=v.querySelector(tc(a)))&&!b._p&&(E.instance=b,E.state.loading=5),qn.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},qn.set(a,l),b||QR(v,a,l,E.state))),o&&f===null)throw Error(n(528,""));return E}if(o&&f!==null)throw Error(n(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ms(l),l=Y(v).hoistableScripts,f=l.get(o),f||(f={type:"script",instance:null,count:0,state:null},l.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Ps(a){return'href="'+An(a)+'"'}function tc(a){return'link[rel="stylesheet"]['+a+"]"}function pS(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function QR(a,o,l,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),Nr(o,"link",l),ce(o),a.head.appendChild(o))}function Ms(a){return'[src="'+An(a)+'"]'}function rc(a){return"script[async]"+a}function gS(a,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+An(l.href)+'"]');if(f)return o.instance=f,ce(f),f;var v=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),ce(f),Nr(f,"style",v),bd(f,l.precedence,a),o.instance=f;case"stylesheet":v=Ps(l.href);var b=a.querySelector(tc(v));if(b)return o.state.loading|=4,o.instance=b,ce(b),b;f=pS(l),(v=qn.get(v))&&dg(f,v),b=(a.ownerDocument||a).createElement("link"),ce(b);var E=b;return E._p=new Promise(function(N,L){E.onload=N,E.onerror=L}),Nr(b,"link",f),o.state.loading|=4,bd(b,l.precedence,a),o.instance=b;case"script":return b=Ms(l.src),(v=a.querySelector(rc(b)))?(o.instance=v,ce(v),v):(f=l,(v=qn.get(b))&&(f=p({},l),fg(f,v)),a=a.ownerDocument||a,v=a.createElement("script"),ce(v),Nr(v,"link",f),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,bd(f,l.precedence,a));return o.instance}function bd(a,o,l){for(var f=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,b=v,E=0;E<f.length;E++){var N=f[E];if(N.dataset.precedence===o)b=N;else if(b!==v)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(a,o.firstChild))}function dg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function fg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var _d=null;function vS(a,o,l){if(_d===null){var f=new Map,v=_d=new Map;v.set(l,f)}else v=_d,f=v.get(l),f||(f=new Map,v.set(l,f));if(f.has(a))return f;for(f.set(a,null),l=l.getElementsByTagName(a),v=0;v<l.length;v++){var b=l[v];if(!(b[ts]||b[Ht]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(o)||"";E=a+E;var N=f.get(E);N?N.push(b):f.set(E,[b])}}return f}function yS(a,o,l){a=a.ownerDocument||a,a.head.insertBefore(l,o==="title"?a.querySelector("head > title"):null)}function JR(a,o,l){if(l===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function bS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function eq(a,o,l,f){if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Ps(f.href),b=o.querySelector(tc(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=xd.bind(a),o.then(a,a)),l.state.loading|=4,l.instance=b,ce(b);return}b=o.ownerDocument||o,f=pS(f),(v=qn.get(v))&&dg(f,v),b=b.createElement("link"),ce(b);var E=b;E._p=new Promise(function(N,L){E.onload=N,E.onerror=L}),Nr(b,"link",f),l.instance=b}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=xd.bind(a),o.addEventListener("load",l),o.addEventListener("error",l))}}var mg=0;function tq(a,o){return a.stylesheets&&a.count===0&&jd(a,a.stylesheets),0<a.count||0<a.imgCount?function(l){var f=setTimeout(function(){if(a.stylesheets&&jd(a,a.stylesheets),a.unsuspend){var b=a.unsuspend;a.unsuspend=null,b()}},6e4+o);0<a.imgBytes&&mg===0&&(mg=62500*RR());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&jd(a,a.stylesheets),a.unsuspend)){var b=a.unsuspend;a.unsuspend=null,b()}},(a.imgBytes>mg?50:800)+o);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function xd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var wd=null;function jd(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,wd=new Map,o.forEach(rq,a),wd=null,xd.call(a))}function rq(a,o){if(!(o.state.loading&4)){var l=wd.get(a);if(l)var f=l.get(null);else{l=new Map,wd.set(a,l);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var E=v[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),f=E)}f&&l.set(null,f)}v=o.instance,E=v.getAttribute("data-precedence"),b=l.get(E)||f,b===f&&l.set(null,v),l.set(E,v),this.count++,f=xd.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),b?b.parentNode.insertBefore(v,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var nc={$$typeof:A,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function nq(a,o,l,f,v,b,E,N,L){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gn(0),this.hiddenUpdates=Gn(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function _S(a,o,l,f,v,b,E,N,L,W,se,de){return a=new nq(a,o,l,E,L,W,se,de,N),o=1,b===!0&&(o|=24),b=ln(3,null,null,o),a.current=b,b.stateNode=a,o=Yh(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:f,isDehydrated:l,cache:o},Xh(b),a}function xS(a){return a?(a=ds,a):ds}function wS(a,o,l,f,v,b){v=xS(v),f.context===null?f.context=v:f.pendingContext=v,f=Ei(o),f.payload={element:l},b=b===void 0?null:b,b!==null&&(f.callback=b),l=Oi(a,f,o),l!==null&&(Jr(l,a,o),Rl(l,a,o))}function jS(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<o?l:o}}function hg(a,o){jS(a,o),(a=a.alternate)&&jS(a,o)}function SS(a){if(a.tag===13||a.tag===31){var o=uo(a,67108864);o!==null&&Jr(o,a,67108864),hg(a,67108864)}}function ES(a){if(a.tag===13||a.tag===31){var o=mn();o=gl(o);var l=uo(a,o);l!==null&&Jr(l,a,o),hg(a,o)}}var Sd=!0;function aq(a,o,l,f){var v=R.T;R.T=null;var b=U.p;try{U.p=2,pg(a,o,l,f)}finally{U.p=b,R.T=v}}function iq(a,o,l,f){var v=R.T;R.T=null;var b=U.p;try{U.p=8,pg(a,o,l,f)}finally{U.p=b,R.T=v}}function pg(a,o,l,f){if(Sd){var v=gg(f);if(v===null)tg(a,o,f,Ed,l),CS(a,f);else if(sq(v,a,o,l,f))f.stopPropagation();else if(CS(a,f),o&4&&-1<oq.indexOf(a)){for(;v!==null;){var b=yi(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=On(b.pendingLanes);if(E!==0){var N=b;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var L=1<<31-ht(E);N.entanglements[1]|=L,E&=~L}pa(b),(lt&6)===0&&(sd=Ge()+500,Zl(0))}}break;case 31:case 13:N=uo(b,2),N!==null&&Jr(N,b,2),cd(),hg(b,2)}if(b=gg(f),b===null&&tg(a,o,f,Ed,l),b===v)break;v=b}v!==null&&f.stopPropagation()}else tg(a,o,f,null,l)}}function gg(a){return a=yh(a),vg(a)}var Ed=null;function vg(a){if(Ed=null,a=Wn(a),a!==null){var o=s(a);if(o===null)a=null;else{var l=o.tag;if(l===13){if(a=c(o),a!==null)return a;a=null}else if(l===31){if(a=u(o),a!==null)return a;a=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Ed=a,null}function OS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yr()){case Sn:return 2;case Gr:return 8;case Er:case Vt:return 32;case he:return 268435456;default:return 32}default:return 32}}var yg=!1,Li=null,zi=null,Ii=null,ac=new Map,ic=new Map,Ui=[],oq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function CS(a,o){switch(a){case"focusin":case"focusout":Li=null;break;case"dragenter":case"dragleave":zi=null;break;case"mouseover":case"mouseout":Ii=null;break;case"pointerover":case"pointerout":ac.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(o.pointerId)}}function oc(a,o,l,f,v,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:l,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},o!==null&&(o=yi(o),o!==null&&SS(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function sq(a,o,l,f,v){switch(o){case"focusin":return Li=oc(Li,a,o,l,f,v),!0;case"dragenter":return zi=oc(zi,a,o,l,f,v),!0;case"mouseover":return Ii=oc(Ii,a,o,l,f,v),!0;case"pointerover":var b=v.pointerId;return ac.set(b,oc(ac.get(b)||null,a,o,l,f,v)),!0;case"gotpointercapture":return b=v.pointerId,ic.set(b,oc(ic.get(b)||null,a,o,l,f,v)),!0}return!1}function AS(a){var o=Wn(a.target);if(o!==null){var l=s(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){a.blockedOn=o,ao(a.priority,function(){ES(l)});return}}else if(o===31){if(o=u(l),o!==null){a.blockedOn=o,ao(a.priority,function(){ES(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Od(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var l=gg(a.nativeEvent);if(l===null){l=a.nativeEvent;var f=new l.constructor(l.type,l);vh=f,l.target.dispatchEvent(f),vh=null}else return o=yi(l),o!==null&&SS(o),a.blockedOn=l,!1;o.shift()}return!0}function NS(a,o,l){Od(a)&&l.delete(o)}function lq(){yg=!1,Li!==null&&Od(Li)&&(Li=null),zi!==null&&Od(zi)&&(zi=null),Ii!==null&&Od(Ii)&&(Ii=null),ac.forEach(NS),ic.forEach(NS)}function Cd(a,o){a.blockedOn===o&&(a.blockedOn=null,yg||(yg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lq)))}var Ad=null;function kS(a){Ad!==a&&(Ad=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ad===a&&(Ad=null);for(var o=0;o<a.length;o+=3){var l=a[o],f=a[o+1],v=a[o+2];if(typeof f!="function"){if(vg(f||l)===null)continue;break}var b=yi(l);b!==null&&(a.splice(o,3),o-=3,gp(b,{pending:!0,data:v,method:l.method,action:f},f,v))}}))}function Rs(a){function o(L){return Cd(L,a)}Li!==null&&Cd(Li,a),zi!==null&&Cd(zi,a),Ii!==null&&Cd(Ii,a),ac.forEach(o),ic.forEach(o);for(var l=0;l<Ui.length;l++){var f=Ui[l];f.blockedOn===a&&(f.blockedOn=null)}for(;0<Ui.length&&(l=Ui[0],l.blockedOn===null);)AS(l),l.blockedOn===null&&Ui.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(f=0;f<l.length;f+=3){var v=l[f],b=l[f+1],E=v[cr]||null;if(typeof b=="function")E||kS(l);else if(E){var N=null;if(b&&b.hasAttribute("formAction")){if(v=b,E=b[cr]||null)N=E.formAction;else if(vg(v)!==null)continue}else N=E.action;typeof N=="function"?l[f+1]=N:(l.splice(f,3),f-=3),kS(l)}}}function DS(){function a(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(E){return v=E})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),f||setTimeout(l,20)}function l(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){f=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function bg(a){this._internalRoot=a}Nd.prototype.render=bg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var l=o.current,f=mn();wS(l,f,a,o,null,null)},Nd.prototype.unmount=bg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;wS(a.current,2,null,a,null,null),cd(),o[da]=null}};function Nd(a){this._internalRoot=a}Nd.prototype.unstable_scheduleHydration=function(a){if(a){var o=no();a={blockedOn:null,target:a,priority:o};for(var l=0;l<Ui.length&&o!==0&&o<Ui[l].priority;l++);Ui.splice(l,0,a),l===0&&AS(a)}};var TS=t.version;if(TS!=="19.2.0")throw Error(n(527,TS,"19.2.0"));U.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(o),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var cq={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kd.isDisabled&&kd.supportsFiber)try{er=kd.inject(cq),$t=kd}catch{}}return lc.createRoot=function(a,o){if(!i(a))throw Error(n(299));var l=!1,f="",v=Iw,b=Uw,E=Bw;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=_S(a,1,!1,null,null,l,f,null,v,b,E,DS),a[da]=o.current,eg(a),new bg(o)},lc.hydrateRoot=function(a,o,l){if(!i(a))throw Error(n(299));var f=!1,v="",b=Iw,E=Uw,N=Bw,L=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),o=_S(a,1,!0,o,l??null,f,v,L,b,E,N,DS),o.context=xS(null),l=o.current,f=mn(),f=gl(f),v=Ei(f),v.callback=null,Oi(l,v,f),l=f,o.current.lanes=l,Ca(o,l),pa(o),a[da]=o.current,eg(a),new Nd(o)},lc.version="19.2.0",lc}var US;function Jq(){if(US)return xg.exports;US=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xg.exports=Qq(),xg.exports}var eL=Jq();const tL=oi(eL);var BS="popstate";function $S(e){return typeof e=="object"&&e!=null&&"pathname"in e&&"search"in e&&"hash"in e&&"state"in e&&"key"in e}function rL(e={}){function t(n,i){let s=i.state?.masked,{pathname:c,search:u,hash:m}=s||n.location;return wy("",{pathname:c,search:u,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default",s?{pathname:n.location.pathname,search:n.location.search,hash:n.location.hash}:void 0)}function r(n,i){return typeof i=="string"?i:Ac(i)}return aL(t,r,null,e)}function Mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $n(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nL(){return Math.random().toString(36).substring(2,10)}function HS(e,t){return{usr:e.state,key:e.key,idx:t,masked:e.unstable_mask?{pathname:e.pathname,search:e.search,hash:e.hash}:void 0}}function wy(e,t,r=null,n,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?tl(t):t,state:r,key:t&&t.key||n||nL(),unstable_mask:i}}function Ac({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function tl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function aL(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,c=i.history,u="POP",m=null,h=g();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function g(){return(c.state||{idx:null}).idx}function p(){u="POP";let S=g(),O=S==null?null:S-h;h=S,m&&m({action:u,location:j.location,delta:O})}function _(S,O){u="PUSH";let C=$S(S)?S:wy(j.location,S,O);h=g()+1;let A=HS(C,h),k=j.createHref(C.unstable_mask||C);try{c.pushState(A,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(k)}s&&m&&m({action:u,location:j.location,delta:1})}function x(S,O){u="REPLACE";let C=$S(S)?S:wy(j.location,S,O);h=g();let A=HS(C,h),k=j.createHref(C.unstable_mask||C);c.replaceState(A,"",k),s&&m&&m({action:u,location:j.location,delta:0})}function w(S){return iL(S)}let j={get action(){return u},get location(){return e(i,c)},listen(S){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(BS,p),m=S,()=>{i.removeEventListener(BS,p),m=null}},createHref(S){return t(i,S)},createURL:w,encodeLocation(S){let O=w(S);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:x,go(S){return c.go(S)}};return j}function iL(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Mt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Ac(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function _N(e,t,r="/"){return oL(e,t,r,!1)}function oL(e,t,r,n){let i=typeof t=="string"?tl(t):t,s=Qa(i.pathname||"/",r);if(s==null)return null;let c=xN(e);sL(c);let u=null;for(let m=0;u==null&&m<c.length;++m){let h=yL(s);u=gL(c[m],h,n)}return u}function xN(e,t=[],r=[],n="",i=!1){let s=(c,u,m=i,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&m)return;Mt(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let p=_a([n,g.relativePath]),_=r.concat(g);c.children&&c.children.length>0&&(Mt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),xN(c.children,t,_,p,m)),!(c.path==null&&!c.index)&&t.push({path:p,score:hL(p,c.index),routesMeta:_})};return e.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))s(c,u);else for(let m of wN(c.path))s(c,u,!0,m)}),t}function wN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let c=wN(n.join("/")),u=[];return u.push(...c.map(m=>m===""?s:[s,m].join("/"))),i&&u.push(...c),u.map(m=>e.startsWith("/")&&m===""?"/":m)}function sL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:pL(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var lL=/^:[\w-]+$/,cL=3,uL=2,dL=1,fL=10,mL=-2,FS=e=>e==="*";function hL(e,t){let r=e.split("/"),n=r.length;return r.some(FS)&&(n+=mL),t&&(n+=uL),r.filter(i=>!FS(i)).reduce((i,s)=>i+(lL.test(s)?cL:s===""?dL:fL),n)}function pL(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function gL(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",c=[];for(let u=0;u<n.length;++u){let m=n[u],h=u===n.length-1,g=s==="/"?t:t.slice(s.length)||"/",p=bf({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},g),_=m.route;if(!p&&h&&r&&!n[n.length-1].route.index&&(p=bf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},g)),!p)return null;Object.assign(i,p.params),c.push({params:i,pathname:_a([s,p.pathname]),pathnameBase:wL(_a([s,p.pathnameBase])),route:_}),p.pathnameBase!=="/"&&(s=_a([s,p.pathnameBase]))}return c}function bf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=vL(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],c=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((h,{paramName:g,isOptional:p},_)=>{if(g==="*"){let w=u[_]||"";c=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[_];return p&&!x?h[g]=void 0:h[g]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:c,pattern:e}}function vL(e,t=!1,r=!0){$n(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,m,h,g)=>{if(n.push({paramName:u,isOptional:m!=null}),m){let p=g.charAt(h+c.length);return p&&p!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function yL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return $n(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Qa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var bL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function _L(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?tl(e):e,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=KS(r.substring(1),"/"):s=KS(r,t)):s=t,{pathname:s,search:jL(n),hash:SL(i)}}function KS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Sg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function xL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Lb(e){let t=xL(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function pm(e,t,r,n=!1){let i;typeof e=="string"?i=tl(e):(i={...e},Mt(!i.pathname||!i.pathname.includes("?"),Sg("?","pathname","search",i)),Mt(!i.pathname||!i.pathname.includes("#"),Sg("#","pathname","hash",i)),Mt(!i.search||!i.search.includes("#"),Sg("#","search","hash",i)));let s=e===""||i.pathname==="",c=s?"/":i.pathname,u;if(c==null)u=r;else{let p=t.length-1;if(!n&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),p-=1;i.pathname=_.join("/")}u=p>=0?t[p]:"/"}let m=_L(i,u),h=c&&c!=="/"&&c.endsWith("/"),g=(s||c===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(h||g)&&(m.pathname+="/"),m}var _a=e=>e.join("/").replace(/\/\/+/g,"/"),wL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),jL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,SL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,EL=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function OL(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function CL(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var jN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function SN(e,t){let r=e;if(typeof r!="string"||!bL.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(jN)try{let s=new URL(window.location.href),c=r.startsWith("//")?new URL(s.protocol+r):new URL(r),u=Qa(c.pathname,t);c.origin===s.origin&&u!=null?r=u+c.search+c.hash:i=!0}catch{$n(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var EN=["POST","PUT","PATCH","DELETE"];new Set(EN);var AL=["GET",...EN];new Set(AL);var rl=y.createContext(null);rl.displayName="DataRouter";var gm=y.createContext(null);gm.displayName="DataRouterState";var NL=y.createContext(!1),ON=y.createContext({isTransitioning:!1});ON.displayName="ViewTransition";var kL=y.createContext(new Map);kL.displayName="Fetchers";var DL=y.createContext(null);DL.displayName="Await";var jn=y.createContext(null);jn.displayName="Navigation";var Yc=y.createContext(null);Yc.displayName="Location";var sa=y.createContext({outlet:null,matches:[],isDataRoute:!1});sa.displayName="Route";var zb=y.createContext(null);zb.displayName="RouteError";var CN="REACT_ROUTER_ERROR",TL="REDIRECT",PL="ROUTE_ERROR_RESPONSE";function ML(e){if(e.startsWith(`${CN}:${TL}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function RL(e){if(e.startsWith(`${CN}:${PL}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new EL(t.status,t.statusText,t.data)}catch{}}function qL(e,{relative:t}={}){Mt(nl(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(jn),{hash:i,pathname:s,search:c}=Gc(e,{relative:t}),u=s;return r!=="/"&&(u=s==="/"?r:_a([r,s])),n.createHref({pathname:u,search:c,hash:i})}function nl(){return y.useContext(Yc)!=null}function la(){return Mt(nl(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Yc).location}var AN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NN(e){y.useContext(jn).static||y.useLayoutEffect(e)}function vm(){let{isDataRoute:e}=y.useContext(sa);return e?WL():LL()}function LL(){Mt(nl(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(rl),{basename:t,navigator:r}=y.useContext(jn),{matches:n}=y.useContext(sa),{pathname:i}=la(),s=JSON.stringify(Lb(n)),c=y.useRef(!1);return NN(()=>{c.current=!0}),y.useCallback((m,h={})=>{if($n(c.current,AN),!c.current)return;if(typeof m=="number"){r.go(m);return}let g=pm(m,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:_a([t,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[t,r,s,i,e])}y.createContext(null);function kN(){let{matches:e}=y.useContext(sa),t=e[e.length-1];return t?t.params:{}}function Gc(e,{relative:t}={}){let{matches:r}=y.useContext(sa),{pathname:n}=la(),i=JSON.stringify(Lb(r));return y.useMemo(()=>pm(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function zL(e,t){return DN(e,t)}function DN(e,t,r){Mt(nl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=y.useContext(jn),{matches:i}=y.useContext(sa),s=i[i.length-1],c=s?s.params:{},u=s?s.pathname:"/",m=s?s.pathnameBase:"/",h=s&&s.route;{let S=h&&h.path||"";PN(u,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let g=la(),p;if(t){let S=typeof t=="string"?tl(t):t;Mt(m==="/"||S.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),p=S}else p=g;let _=p.pathname||"/",x=_;if(m!=="/"){let S=m.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=_N(e,{pathname:x});$n(h||w!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),$n(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=HL(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:_a([m,n.encodeLocation?n.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:_a([m,n.encodeLocation?n.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),i,r);return t&&j?y.createElement(Yc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0,...p},navigationType:"POP"}},j):j}function IL(){let e=VL(),t=OL(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:i},r):null,c)}var UL=y.createElement(IL,null),TN=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=RL(e.digest);r&&(e=r)}let t=e!==void 0?y.createElement(sa.Provider,{value:this.props.routeContext},y.createElement(zb.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?y.createElement(BL,{error:e},t):t}};TN.contextType=NL;var Eg=new WeakMap;function BL({children:e,error:t}){let{basename:r}=y.useContext(jn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=ML(t.digest);if(n){let i=Eg.get(t);if(i)throw i;let s=SN(n.location,r);if(jN&&!Eg.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw Eg.set(t,c),c}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function $L({routeContext:e,match:t,children:r}){let n=y.useContext(rl);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(sa.Provider,{value:e},r)}function HL(e,t=[],r){let n=r?.state;if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n?.errors;if(s!=null){let g=i.findIndex(p=>p.route.id&&s?.[p.route.id]!==void 0);Mt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,g+1))}let c=!1,u=-1;if(r&&n){c=n.renderFallback;for(let g=0;g<i.length;g++){let p=i[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=g),p.route.id){let{loaderData:_,errors:x}=n,w=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||w){r.isStatic&&(c=!0),u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}}let m=r?.onError,h=n&&m?(g,p)=>{m(g,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:CL(n.matches),errorInfo:p})}:void 0;return i.reduceRight((g,p,_)=>{let x,w=!1,j=null,S=null;n&&(x=s&&p.route.id?s[p.route.id]:void 0,j=p.route.errorElement||UL,c&&(u<0&&_===0?(PN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===_&&(w=!0,S=p.route.hydrateFallbackElement||null)));let O=t.concat(i.slice(0,_+1)),C=()=>{let A;return x?A=j:w?A=S:p.route.Component?A=y.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=g,y.createElement($L,{match:p,routeContext:{outlet:g,matches:O,isDataRoute:n!=null},children:A})};return n&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?y.createElement(TN,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:C(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:h}):C()},null)}function Ib(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FL(e){let t=y.useContext(rl);return Mt(t,Ib(e)),t}function KL(e){let t=y.useContext(gm);return Mt(t,Ib(e)),t}function YL(e){let t=y.useContext(sa);return Mt(t,Ib(e)),t}function Ub(e){let t=YL(e),r=t.matches[t.matches.length-1];return Mt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function GL(){return Ub("useRouteId")}function VL(){let e=y.useContext(zb),t=KL("useRouteError"),r=Ub("useRouteError");return e!==void 0?e:t.errors?.[r]}function WL(){let{router:e}=FL("useNavigate"),t=Ub("useNavigate"),r=y.useRef(!1);return NN(()=>{r.current=!0}),y.useCallback(async(i,s={})=>{$n(r.current,AN),r.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var YS={};function PN(e,t,r){!t&&!YS[e]&&(YS[e]=!0,$n(!1,r))}y.memo(XL);function XL({routes:e,future:t,state:r,isStatic:n,onError:i}){return DN(e,void 0,{state:r,isStatic:n,onError:i})}function So({to:e,replace:t,state:r,relative:n}){Mt(nl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(jn);$n(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=y.useContext(sa),{pathname:c}=la(),u=vm(),m=pm(e,Lb(s),c,n==="path"),h=JSON.stringify(m);return y.useEffect(()=>{u(JSON.parse(h),{replace:t,state:r,relative:n})},[u,h,n,t,r]),null}function Ir(e){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZL({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:c}){Mt(!nl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),m=y.useMemo(()=>({basename:u,navigator:i,static:s,unstable_useTransitions:c,future:{}}),[u,i,s,c]);typeof r=="string"&&(r=tl(r));let{pathname:h="/",search:g="",hash:p="",state:_=null,key:x="default",unstable_mask:w}=r,j=y.useMemo(()=>{let S=Qa(h,u);return S==null?null:{location:{pathname:S,search:g,hash:p,state:_,key:x,unstable_mask:w},navigationType:n}},[u,h,g,p,_,x,n,w]);return $n(j!=null,`<Router basename="${u}"> is not able to match the URL "${h}${g}${p}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:y.createElement(jn.Provider,{value:m},y.createElement(Yc.Provider,{children:t,value:j}))}function QL({children:e,location:t}){return zL(jy(e),t)}function jy(e,t=[]){let r=[];return y.Children.forEach(e,(n,i)=>{if(!y.isValidElement(n))return;let s=[...t,i];if(n.type===y.Fragment){r.push.apply(r,jy(n.props.children,s));return}Mt(n.type===Ir,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=jy(n.props.children,s)),r.push(c)}),r}var af="get",of="application/x-www-form-urlencoded";function ym(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function JL(e){return ym(e)&&e.tagName.toLowerCase()==="button"}function ez(e){return ym(e)&&e.tagName.toLowerCase()==="form"}function tz(e){return ym(e)&&e.tagName.toLowerCase()==="input"}function rz(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function nz(e,t){return e.button===0&&(!t||t==="_self")&&!rz(e)}function Sy(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function az(e,t){let r=Sy(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(s=>{r.append(i,s)})}),r}var Dd=null;function iz(){if(Dd===null)try{new FormData(document.createElement("form"),0),Dd=!1}catch{Dd=!0}return Dd}var oz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Og(e){return e!=null&&!oz.has(e)?($n(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${of}"`),null):e}function sz(e,t){let r,n,i,s,c;if(ez(e)){let u=e.getAttribute("action");n=u?Qa(u,t):null,r=e.getAttribute("method")||af,i=Og(e.getAttribute("enctype"))||of,s=new FormData(e)}else if(JL(e)||tz(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||u.getAttribute("action");if(n=m?Qa(m,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||af,i=Og(e.getAttribute("formenctype"))||Og(u.getAttribute("enctype"))||of,s=new FormData(u,e),!iz()){let{name:h,type:g,value:p}=e;if(g==="image"){let _=h?`${h}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else h&&s.append(h,p)}}else{if(ym(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=af,n=null,i=of,c=e}return s&&i==="text/plain"&&(c=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Bb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lz(e,t,r,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:t&&Qa(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function cz(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function uz(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function dz(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let c=await cz(s,r);return c.links?c.links():[]}return[]}));return pz(n.flat(1).filter(uz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function GS(e,t,r,n,i,s){let c=(m,h)=>r[h]?m.route.id!==r[h].route.id:!0,u=(m,h)=>r[h].pathname!==m.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==m.params["*"];return s==="assets"?t.filter((m,h)=>c(m,h)||u(m,h)):s==="data"?t.filter((m,h)=>{let g=n.routes[m.route.id];if(!g||!g.hasLoader)return!1;if(c(m,h)||u(m,h))return!0;if(m.route.shouldRevalidate){let p=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function fz(e,t,{includeHydrateFallback:r}={}){return mz(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function mz(e){return[...new Set(e)]}function hz(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function pz(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(hz(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function MN(){let e=y.useContext(rl);return Bb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function gz(){let e=y.useContext(gm);return Bb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var $b=y.createContext(void 0);$b.displayName="FrameworkContext";function RN(){let e=y.useContext($b);return Bb(e,"You must render this element inside a <HydratedRouter> element"),e}function vz(e,t){let r=y.useContext($b),[n,i]=y.useState(!1),[s,c]=y.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:h,onMouseLeave:g,onTouchStart:p}=t,_=y.useRef(null);y.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let j=O=>{O.forEach(C=>{c(C.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[e]),y.useEffect(()=>{if(n){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{i(!0)},w=()=>{i(!1),c(!1)};return r?e!=="intent"?[s,_,{}]:[s,_,{onFocus:cc(u,x),onBlur:cc(m,w),onMouseEnter:cc(h,x),onMouseLeave:cc(g,w),onTouchStart:cc(p,x)}]:[!1,_,{}]}function cc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function yz({page:e,...t}){let{router:r}=MN(),n=y.useMemo(()=>_N(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(_z,{page:e,matches:n,...t}):null}function bz(e){let{manifest:t,routeModules:r}=RN(),[n,i]=y.useState([]);return y.useEffect(()=>{let s=!1;return dz(e,t,r).then(c=>{s||i(c)}),()=>{s=!0}},[e,t,r]),n}function _z({page:e,matches:t,...r}){let n=la(),{future:i,manifest:s,routeModules:c}=RN(),{basename:u}=MN(),{loaderData:m,matches:h}=gz(),g=y.useMemo(()=>GS(e,t,h,s,n,"data"),[e,t,h,s,n]),p=y.useMemo(()=>GS(e,t,h,s,n,"assets"),[e,t,h,s,n]),_=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,S=!1;if(t.forEach(C=>{let A=s.routes[C.route.id];!A||!A.hasLoader||(!g.some(k=>k.route.id===C.route.id)&&C.route.id in m&&c[C.route.id]?.shouldRevalidate||A.hasClientLoader?S=!0:j.add(C.route.id))}),j.size===0)return[];let O=lz(e,u,i.unstable_trailingSlashAwareDataRequests,"data");return S&&j.size>0&&O.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[O.pathname+O.search]},[u,i.unstable_trailingSlashAwareDataRequests,m,n,s,g,t,e,c]),x=y.useMemo(()=>fz(p,s),[p,s]),w=bz(p);return y.createElement(y.Fragment,null,_.map(j=>y.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>y.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),w.map(({key:j,link:S})=>y.createElement("link",{key:j,nonce:r.nonce,...S,crossOrigin:S.crossOrigin??r.crossOrigin})))}function xz(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var wz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wz&&(window.__reactRouterVersion="7.13.1")}catch{}function jz({basename:e,children:t,unstable_useTransitions:r,window:n}){let i=y.useRef();i.current==null&&(i.current=rL({window:n,v5Compat:!0}));let s=i.current,[c,u]=y.useState({action:s.action,location:s.location}),m=y.useCallback(h=>{r===!1?u(h):y.startTransition(()=>u(h))},[r]);return y.useLayoutEffect(()=>s.listen(m),[s,m]),y.createElement(ZL,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:s,unstable_useTransitions:r})}var qN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hb=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:c,unstable_mask:u,state:m,target:h,to:g,preventScrollReset:p,viewTransition:_,unstable_defaultShouldRevalidate:x,...w},j){let{basename:S,navigator:O,unstable_useTransitions:C}=y.useContext(jn),A=typeof g=="string"&&qN.test(g),k=SN(g,S);g=k.to;let D=qL(g,{relative:i}),M=la(),z=null;if(u){let q=pm(u,[],M.unstable_mask?M.unstable_mask.pathname:"/",!0);S!=="/"&&(q.pathname=q.pathname==="/"?S:_a([S,q.pathname])),z=O.createHref(q)}let[K,Q,ne]=vz(n,w),G=Cz(g,{replace:c,unstable_mask:u,state:m,target:h,preventScrollReset:p,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:x,unstable_useTransitions:C});function I(q){t&&t(q),q.defaultPrevented||G(q)}let ie=!(k.isExternal||s),pe=y.createElement("a",{...w,...ne,href:(ie?z:void 0)||k.absoluteURL||D,onClick:ie?I:t,ref:xz(j,Q),target:h,"data-discover":!A&&r==="render"?"true":void 0});return K&&!A?y.createElement(y.Fragment,null,pe,y.createElement(yz,{page:D})):pe});Hb.displayName="Link";var Sz=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:c,viewTransition:u,children:m,...h},g){let p=Gc(c,{relative:h.relative}),_=la(),x=y.useContext(gm),{navigator:w,basename:j}=y.useContext(jn),S=x!=null&&Pz(p)&&u===!0,O=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,C=_.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),A=A?A.toLowerCase():null,O=O.toLowerCase()),A&&j&&(A=Qa(A,j)||A);const k=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let D=C===O||!i&&C.startsWith(O)&&C.charAt(k)==="/",M=A!=null&&(A===O||!i&&A.startsWith(O)&&A.charAt(O.length)==="/"),z={isActive:D,isPending:M,isTransitioning:S},K=D?t:void 0,Q;typeof n=="function"?Q=n(z):Q=[n,D?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ne=typeof s=="function"?s(z):s;return y.createElement(Hb,{...h,"aria-current":K,className:Q,ref:g,style:ne,to:c,viewTransition:u},typeof m=="function"?m(z):m)});Sz.displayName="NavLink";var Ez=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:c=af,action:u,onSubmit:m,relative:h,preventScrollReset:g,viewTransition:p,unstable_defaultShouldRevalidate:_,...x},w)=>{let{unstable_useTransitions:j}=y.useContext(jn),S=Dz(),O=Tz(u,{relative:h}),C=c.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&qN.test(u),k=D=>{if(m&&m(D),D.defaultPrevented)return;D.preventDefault();let M=D.nativeEvent.submitter,z=M?.getAttribute("formmethod")||c,K=()=>S(M||D.currentTarget,{fetcherKey:t,method:z,navigate:r,replace:i,state:s,relative:h,preventScrollReset:g,viewTransition:p,unstable_defaultShouldRevalidate:_});j&&r!==!1?y.startTransition(()=>K()):K()};return y.createElement("form",{ref:w,method:C,action:O,onSubmit:n?m:k,...x,"data-discover":!A&&e==="render"?"true":void 0})});Ez.displayName="Form";function Oz(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function LN(e){let t=y.useContext(rl);return Mt(t,Oz(e)),t}function Cz(e,{target:t,replace:r,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m,unstable_useTransitions:h}={}){let g=vm(),p=la(),_=Gc(e,{relative:c});return y.useCallback(x=>{if(nz(x,t)){x.preventDefault();let w=r!==void 0?r:Ac(p)===Ac(_),j=()=>g(e,{replace:w,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m});h?y.startTransition(()=>j()):j()}},[p,g,_,r,n,i,t,e,s,c,u,m,h])}function Az(e){$n(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=y.useRef(Sy(e)),r=y.useRef(!1),n=la(),i=y.useMemo(()=>az(n.search,r.current?null:t.current),[n.search]),s=vm(),c=y.useCallback((u,m)=>{const h=Sy(typeof u=="function"?u(new URLSearchParams(i)):u);r.current=!0,s("?"+h,m)},[s,i]);return[i,c]}var Nz=0,kz=()=>`__${String(++Nz)}__`;function Dz(){let{router:e}=LN("useSubmit"),{basename:t}=y.useContext(jn),r=GL(),n=e.fetch,i=e.navigate;return y.useCallback(async(s,c={})=>{let{action:u,method:m,encType:h,formData:g,body:p}=sz(s,t);if(c.navigate===!1){let _=c.fetcherKey||kz();await n(_,r,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||m,formEncType:c.encType||h,flushSync:c.flushSync})}else await i(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||m,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,i,t,r])}function Tz(e,{relative:t}={}){let{basename:r}=y.useContext(jn),n=y.useContext(sa);Mt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Gc(e||".",{relative:t})},c=la();if(e==null){s.search=c.search;let u=new URLSearchParams(s.search),m=u.getAll("index");if(m.some(g=>g==="")){u.delete("index"),m.filter(p=>p).forEach(p=>u.append("index",p));let g=u.toString();s.search=g?`?${g}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:_a([r,s.pathname])),Ac(s)}function Pz(e,{relative:t}={}){let r=y.useContext(ON);Mt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=LN("useViewTransitionState"),i=Gc(e,{relative:t});if(!r.isTransitioning)return!1;let s=Qa(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=Qa(r.nextLocation.pathname,n)||r.nextLocation.pathname;return bf(i.pathname,c)!=null||bf(i.pathname,s)!=null}var zN=bN();function Mz(e,t,r=[]){if(!e||!t)return{hasConflict:!1,conflicts:[]};const n=new Date(e._offlineModifiedAt||e.updated_at||0),i=new Date(t.updated_at||0),s=new Date(e._cachedAt||0);if(i<=s)return{hasConflict:!1,conflicts:[]};const c=[],u=r.length>0?r:Object.keys(e).filter(m=>!m.startsWith("_")&&m!=="id"&&m!=="created_at");for(const m of u){const h=e[m],g=t[m];if(h!==void 0&&g!==void 0&&!sf(h,g)){const p=e._cachedValues?.[m],_=p!==void 0?!sf(h,p):!0,x=p!==void 0?!sf(g,p):!0;_&&x&&c.push({field:m,localValue:h,serverValue:g,cachedValue:p})}}return{hasConflict:c.length>0,conflicts:c,localModifiedAt:n,serverUpdatedAt:i}}function sf(e,t){if(e===t)return!0;if(e==null||t==null)return e===t;if(typeof e!=typeof t)return!1;if(typeof e!="object")return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;const r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(i=>sf(e[i],t[i]))}const Rz={KEEP_LOCAL:"keep_local",KEEP_SERVER:"keep_server",MERGE:"merge"};function qz(e,t=[]){const r={...e,_cachedAt:new Date().toISOString()};if(t.length>0){r._cachedValues={};for(const n of t)e[n]!==void 0&&(r._cachedValues[n]=JSON.parse(JSON.stringify(e[n])))}return r}function Lz(e,t="record"){if(!e.hasConflict)return null;if(e.deletedOnServer)return{title:`${VS(t)} was deleted`,description:`This ${t} was deleted by another user while you were offline.`,severity:"warning",conflictCount:1};const r=e.conflicts.map(n=>n.field).join(", ");return{title:`${VS(t)} was modified`,description:`The following fields were changed by another user: ${r}`,severity:e.conflicts.length>2?"warning":"info",conflictCount:e.conflicts.length,fields:e.conflicts}}function VS(e){return e.charAt(0).toUpperCase()+e.slice(1)}const zz="fieldsync-offline",Iz=2,rt={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let Ao=null;const si=()=>new Promise((e,t)=>{if(Ao){e(Ao);return}const r=indexedDB.open(zz,Iz);r.onerror=()=>{console.error("Failed to open offline database"),t(r.error)},r.onsuccess=()=>{Ao=r.result,e(Ao)},r.onupgradeneeded=n=>{const i=n.target.result;if(i.objectStoreNames.contains(rt.PROJECTS)||i.createObjectStore(rt.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),i.objectStoreNames.contains(rt.AREAS)||i.createObjectStore(rt.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(rt.CREW_CHECKINS)||i.createObjectStore(rt.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(rt.TM_TICKETS)||i.createObjectStore(rt.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(rt.DAILY_REPORTS)||i.createObjectStore(rt.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(rt.MESSAGES)||i.createObjectStore(rt.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!i.objectStoreNames.contains(rt.PENDING_ACTIONS)){const s=i.createObjectStore(rt.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});s.createIndex("type","type",{unique:!1}),s.createIndex("created_at","created_at",{unique:!1})}i.objectStoreNames.contains(rt.CACHED_DATA)||i.createObjectStore(rt.CACHED_DATA,{keyPath:"key"})}}),Vo=(e,t="readonly")=>{if(!Ao)throw new Error("Database not initialized");return Ao.transaction(e,t).objectStore(e)},Vc=async(e,t)=>(await si(),new Promise((r,n)=>{const s=Vo(e,"readwrite").put(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),IN=async(e,t)=>(await si(),new Promise((r,n)=>{const i=Ao.transaction(e,"readwrite"),s=i.objectStore(e);t.forEach(c=>s.put(c)),i.oncomplete=()=>r(),i.onerror=()=>n(i.error)})),UN=async(e,t)=>(await si(),new Promise((r,n)=>{const s=Vo(e).get(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),BN=async e=>(await si(),new Promise((t,r)=>{const i=Vo(e).getAll();i.onsuccess=()=>t(i.result||[]),i.onerror=()=>r(i.error)})),Fb=async(e,t,r)=>(await si(),new Promise((n,i)=>{const u=Vo(e).index(t).getAll(r);u.onsuccess=()=>n(u.result||[]),u.onerror=()=>i(u.error)})),Uz=async(e,t)=>(await si(),new Promise((r,n)=>{const s=Vo(e,"readwrite").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})),Jt={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},hn=async(e,t,r={})=>{await si();const n={type:e,payload:t,metadata:r,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((i,s)=>{const u=Vo(rt.PENDING_ACTIONS,"readwrite").add(n);u.onsuccess=()=>{i(u.result)},u.onerror=()=>s(u.error)})},$N=async()=>BN(rt.PENDING_ACTIONS),lf=async()=>(await $N()).length,WS=async e=>Uz(rt.PENDING_ACTIONS,e),Bz=async(e,t)=>(await si(),new Promise((r,n)=>{const i=Vo(rt.PENDING_ACTIONS,"readwrite"),s=i.get(e);s.onsuccess=()=>{const c=s.result;if(c){const u={...c,...t},m=i.put(u);m.onsuccess=()=>r(u),m.onerror=()=>n(m.error)}else n(new Error("Action not found"))},s.onerror=()=>n(s.error)})),$z=async e=>IN(rt.PROJECTS,e),XS=async e=>e?Fb(rt.PROJECTS,"company_id",e):BN(rt.PROJECTS),Hz=async e=>{const t=e.map(r=>qz(r,["status","weight","name"]));return IN(rt.AREAS,t)},ZS=async e=>Fb(rt.AREAS,"project_id",e),Cg=async(e,t)=>{const r=await UN(rt.AREAS,e);return r&&(r.status=t,r.updated_at=new Date().toISOString(),r._offlineModifiedAt=new Date().toISOString(),await Vc(rt.AREAS,r)),r},Td=async e=>Vc(rt.CREW_CHECKINS,e),QS=async e=>Vc(rt.TM_TICKETS,e),en=()=>{const e=new Uint8Array(6);crypto.getRandomValues(e);const t=Array.from(e,r=>r.toString(36)).join("");return`temp_${Date.now()}_${t}`},qs=async e=>Vc(rt.DAILY_REPORTS,e),Fz=async(e,t)=>(await Fb(rt.DAILY_REPORTS,"project_id",e)).find(n=>n.report_date===t)||null,JS=async e=>Vc(rt.MESSAGES,e);let Kb=typeof navigator<"u"?navigator.onLine:!0;const Ey=new Set,Yb=e=>(Ey.add(e),()=>Ey.delete(e)),Un=()=>Kb,e1=e=>{Kb=e,Ey.forEach(t=>t(e))};typeof window<"u"&&(window.addEventListener("online",()=>{e1(!0)}),window.addEventListener("offline",()=>{e1(!1)}));let Ag=!1;const HN=async(e,t={})=>{if(Ag||!Kb)return{synced:0,failed:0,conflicts:[]};const{onConflict:r}=t;Ag=!0;const n={synced:0,failed:0,conflicts:[]};try{const i=await $N();for(const s of i)try{if(s.payload?.id&&s.type===Jt.UPDATE_AREA_STATUS){const c=await Kz(e,s.type,s.payload);if(c){const u=await UN(rt.AREAS,s.payload.areaId||s.payload.id);if(u){const m=Mz(u,c,["status"]);if(m.hasConflict){const h=Lz(m,"area");if(n.conflicts.push({action:s,conflict:m,summary:h}),r&&await r({action:s,conflict:m,summary:h})===Rz.KEEP_SERVER){await WS(s.id);continue}}}}}await Yz(s,e),await WS(s.id),n.synced++}catch(c){n.failed++,await Bz(s.id,{attempts:(s.attempts||0)+1,last_error:c.message,last_attempt:new Date().toISOString()})}}finally{Ag=!1}return n},Kz=async(e,t,r)=>{try{switch(t){case Jt.UPDATE_AREA_STATUS:return e.getArea?await e.getArea(r.areaId):null;default:return null}}catch{return null}},Yz=async(e,t)=>{const{type:r,payload:n}=e;switch(r){case Jt.UPDATE_AREA_STATUS:return t.updateAreaStatus(n.areaId,n.status);case Jt.CREATE_TM_TICKET:{const i=await t.createTMTicket(n.ticket);return n.workers?.length>0&&await t.addTMWorkers(i.id,n.workers),n.items?.length>0&&await t.addTMItems(i.id,n.items),i}case Jt.SAVE_CREW_CHECKIN:return t.saveCrewCheckin(n.projectId,n.workers,n.checkInDate);case Jt.SUBMIT_DAILY_REPORT:return await t.saveDailyReport(n.projectId,n.reportData),t.submitDailyReport(n.projectId,n.submittedBy);case Jt.SEND_MESSAGE:return t.sendMessage(n.projectId,n.senderType,n.senderName,n.content);case Jt.CREATE_MATERIAL_REQUEST:return t.createMaterialRequest(n.projectId,n.items,n.requestedBy,n.neededBy,n.priority,n.notes);default:throw new Error(`Unknown action type: ${r}`)}},Gb="",FN="",P=!!Gb,T=P?yN(Gb,FN):null,Pd={slowQueryThreshold:200,enableSupabase:P},Ye={query(e,t){const r={type:"query",operation:e,duration_ms:t.duration,rows_returned:t.rows,company_id:t.company_id||null,project_id:t.project_id||null,user_id:t.user_id||null,timestamp:new Date().toISOString()};Pd.enableSupabase&&t.duration>=Pd.slowQueryThreshold&&Ng("query",r)},error(e,t){const r={type:"error",category:e,severity:t.severity||"error",error_code:t.code||null,message:t.message,company_id:t.company_id||null,user_id:t.user_id||null,project_id:t.project_id||null,operation:t.operation||null,context:t.extra||{},timestamp:new Date().toISOString()};Pd.enableSupabase&&Ng("error",r)},storage(e,t){const r={type:"storage",operation:e,company_id:t.company_id||null,project_id:t.project_id||null,file_size_bytes:t.size||0,duration_ms:t.duration||0,success:t.success!==!1,error_message:t.error||null,timestamp:new Date().toISOString()};Pd.enableSupabase&&(!r.success||r.duration_ms>5e3)&&Ng("storage",r)},activity(e,t){}};async function Ng(e,t){if(T)try{e==="error"?await T.rpc("log_error",{p_severity:t.severity,p_category:t.category,p_message:t.message,p_company_id:t.company_id,p_user_id:t.user_id,p_project_id:t.project_id,p_operation:t.operation,p_error_code:t.error_code,p_context:t.context||{}}):e==="query"&&await T.rpc("log_query_metric",{p_operation:t.operation,p_duration_ms:t.duration_ms,p_rows_returned:t.rows_returned,p_company_id:t.company_id,p_project_id:t.project_id,p_user_id:t.user_id,p_context:{}})}catch{}}Ye.wrapQuery=function(e,t){return async function(...r){const n=performance.now();try{const i=await t.apply(this,r),c={duration:Math.round(performance.now()-n),rows:Array.isArray(i)?i.length:void 0};return Ye.query(e,c),i}catch(i){const s=Math.round(performance.now()-n);throw Ye.error("database",{message:i.message,operation:e,severity:"error",extra:{duration:s}}),i}}};Ye.time=async function(e,t){const r=performance.now();try{const n=await t(),i=Math.round(performance.now()-r);return Ye.query(e,{duration:i}),n}catch(n){throw Ye.error("general",{message:n.message,operation:e}),n}};const Oy="fieldsync_field_session";let wc=null;const Wo=()=>{if(wc)return wc;try{const e=sessionStorage.getItem(Oy);if(e)return wc=JSON.parse(e),wc}catch{}return null},cf=e=>{wc=e,e?sessionStorage.setItem(Oy,JSON.stringify(e)):sessionStorage.removeItem(Oy)},Cy=async()=>{const e=Wo();if(e?.token&&P)try{await T.rpc("invalidate_field_session",{p_session_token:e.token})}catch{}cf(null)};let uc=null;const Vb=()=>{const e=Wo();return!e?.token||!P?T:((!uc||uc._sessionToken!==e.token)&&(uc=yN(Gb,FN,{global:{headers:{"x-field-session":e.token}}}),uc._sessionToken=e.token),uc)},Ki=()=>Wo()?.token?Vb():T,_e=()=>P?Wo()?.token?Vb():T:null,Ay=()=>{const e=Wo();return!!(e?.token&&e?.projectId)},Gz=()=>Wo()?.projectId||null,Vz=()=>Wo()?.companyId||null,Ny="fieldsync_data",_f="fieldsync_user",t1={projects:[],areas:[],users:[],assignments:[]},Oe=()=>{try{const e=localStorage.getItem(Ny);return e?JSON.parse(e):t1}catch{return localStorage.removeItem(Ny),t1}},Ve=e=>{localStorage.setItem(Ny,JSON.stringify(e))},Md=()=>{try{const e=localStorage.getItem(_f);return e?JSON.parse(e):null}catch{return localStorage.removeItem(_f),null}},Rd=e=>{e?localStorage.setItem(_f,JSON.stringify(e)):localStorage.removeItem(_f)};function ky(e,t={}){if(e==null)return"";if(typeof e!="string")return String(e);const{maxLength:r=1e4,trim:n=!0,allowNewlines:i=!0}=t;let s=e.replace(/<[^>]*>/g,"").replace(/\0/g,"").normalize("NFC");return i||(s=s.replace(/[\r\n]+/g," ")),n&&(s=s.trim()),s.length>r&&(s=s.substring(0,r)),s}function Wz(e,t={}){if(e==null)return"";if(typeof e!="string")return String(e);const{maxLength:r=5e4}=t;let n=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\0/g,"");return n.length>r&&(n=n.substring(0,r)),n}function Xz(e){if(e==null||typeof e!="string")return"";const t=e.trim();return/^(javascript|data|vbscript|file):/i.test(t)||!/^(https?:\/\/|\/)/i.test(t)?"":t}function Zz(e){return e==null||typeof e!="string"?"":e.replace(/[/\\]/g,"").replace(/\0/g,"").replace(/[<>:"|?*]/g,"").replace(/^[\s.]+|[\s.]+$/g,"").substring(0,255)}function Qz(e){return e==null?"":typeof e!="string"?String(e):e.replace(/'/g,"''").replace(/;/g,"").replace(/--/g,"").replace(/\/\*/g,"").replace(/\*\//g,"")}function Dy(e,t={}){if(e==null)return e;if(typeof e!="object")return ky(e,t);if(Array.isArray(e))return e.map(n=>Dy(n,t));const r={};for(const[n,i]of Object.entries(e))typeof i=="string"?r[n]=ky(i,t):typeof i=="object"&&i!==null?r[n]=Dy(i,t):r[n]=i;return r}const it={text:ky,html:Wz,url:Xz,filename:Zz,sqlDisplay:Qz,object:Dy},Jz={async createCOR(e,t=0){if(P){let r=e.cor_number;t>0&&(r=await this.getNextCORNumber(e.project_id));const{data:n,error:i}=await T.from("change_orders").insert({company_id:e.company_id,project_id:e.project_id,area_id:e.area_id||null,cor_number:r,title:it.text(e.title),description:it.text(e.description)||"",scope_of_work:it.text(e.scope_of_work),period_start:e.period_start,period_end:e.period_end,status:"draft",labor_markup_percent:e.labor_markup_percent??1500,materials_markup_percent:e.materials_markup_percent??1500,equipment_markup_percent:e.equipment_markup_percent??1500,subcontractors_markup_percent:e.subcontractors_markup_percent??500,liability_insurance_percent:e.liability_insurance_percent??144,bond_percent:e.bond_percent??100,license_fee_percent:e.license_fee_percent??10,created_by:e.created_by||null}).select().single();if((i?.code==="23505"||i?.code==="PGRST116"||i?.status===409||i?.message?.includes("duplicate")||i?.message?.includes("unique_cor_number"))&&t<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${t+1})`),this.createCOR(e,t+1);if(i)throw i;return n}return null},async updateCOR(e,t){if(P){const r=it.object(t),{data:n,error:i}=await T.from("change_orders").update({...r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCOR(e){if(P){const{error:t}=await T.from("change_orders").delete().eq("id",e);if(t)throw t}},async bulkUpdateCORGroup(e,t){if(P){const{error:r}=await T.from("change_orders").update({group_name:it.text(t),updated_at:new Date().toISOString()}).in("id",e);if(r)throw r.message?.includes("group_name")||r.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):r}},async getCORs(e,t={}){if(P){let r=T.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",e);t.status&&(r=r.eq("status",t.status)),t.area_id&&(r=r.eq("area_id",t.area_id)),t.date_start&&(r=r.gte("period_start",t.date_start)),t.date_end&&(r=r.lte("period_end",t.date_end)),r=r.order("created_at",{ascending:!1});const{data:n,error:i}=await r;if(i)throw i;return n}return[]},async getCORById(e){if(P){const{data:t,error:r}=await T.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",e).single();if(r)throw r;return t}return null},async getCORsByArea(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").select("*").eq("project_id",e).eq("area_id",t).order("created_at",{ascending:!1});if(n)throw n;return r}return[]},async getAssignableCORs(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",e).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(n)throw n;return r||[]}return[]},async getNextCORNumber(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("cor_number").eq("project_id",e);if(r)throw r;if(t&&t.length>0){let n=0;for(const i of t){const s=i.cor_number?.match(/COR #(\d+)/);if(s){const c=parseInt(s[1]);c>n&&(n=c)}}return`COR #${n+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(e,t){if(P){const r=Math.round(t.regular_hours*t.regular_rate),n=Math.round(t.overtime_hours*t.overtime_rate),i=r+n,{data:s,error:c}=await T.from("change_order_labor").insert({change_order_id:e,labor_class:it.text(t.labor_class),wage_type:t.wage_type||"standard",regular_hours:t.regular_hours||0,overtime_hours:t.overtime_hours||0,regular_rate:t.regular_rate||0,overtime_rate:t.overtime_rate||0,regular_total:r,overtime_total:n,total:i,sort_order:t.sort_order||0,source_ticket_id:t.source_ticket_id||null}).select().single();if(c)throw c;return s}return null},async updateCORLaborItem(e,t){if(P){let r={...it.object(t)};if(t.regular_hours!==void 0||t.regular_rate!==void 0||t.overtime_hours!==void 0||t.overtime_rate!==void 0){const{data:s}=await T.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",e).single(),c=t.regular_hours??s?.regular_hours??0,u=t.overtime_hours??s?.overtime_hours??0,m=t.regular_rate??s?.regular_rate??0,h=t.overtime_rate??s?.overtime_rate??0;r.regular_total=Math.round(c*m),r.overtime_total=Math.round(u*h),r.total=r.regular_total+r.overtime_total}const{data:n,error:i}=await T.from("change_order_labor").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORLaborItem(e){if(P){const{error:t}=await T.from("change_order_labor").delete().eq("id",e);if(t)throw t}},async addCORMaterialItem(e,t){if(P){const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_materials").insert({change_order_id:e,description:it.text(t.description)||"",quantity:s,unit:it.text(t.unit)||"each",unit_cost:i,total:c,source_type:n,source_reference:it.text(t.source_reference)||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCORMaterialItem(e,t){if(P){let r={...it.object(t)};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_materials").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_materials").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORMaterialItem(e){if(P){const{error:t}=await T.from("change_order_materials").delete().eq("id",e);if(t)throw t}},async addCOREquipmentItem(e,t){if(P){const n=["backup_sheet","invoice","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_equipment").insert({change_order_id:e,description:it.text(t.description)||"",quantity:s,unit:it.text(t.unit)||"day",unit_cost:i,total:c,source_type:n,source_reference:it.text(t.source_reference)||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCOREquipmentItem(e,t){if(P){let r={...it.object(t)};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_equipment").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_equipment").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCOREquipmentItem(e){if(P){const{error:t}=await T.from("change_order_equipment").delete().eq("id",e);if(t)throw t}},async addCORSubcontractorItem(e,t){if(P){const r=Math.round(t.quantity*t.unit_cost),{data:n,error:i}=await T.from("change_order_subcontractors").insert({change_order_id:e,description:it.text(t.description),quantity:t.quantity||1,unit:it.text(t.unit)||"lump sum",unit_cost:t.unit_cost||0,total:r,source_type:t.source_type||"custom",source_reference:it.text(t.source_reference)||null,sort_order:t.sort_order||0}).select().single();if(i)throw i;return n}return null},async updateCORSubcontractorItem(e,t){if(P){let r={...it.object(t)};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_subcontractors").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORSubcontractorItem(e){if(P){const{error:t}=await T.from("change_order_subcontractors").delete().eq("id",e);if(t)throw t}},async addBulkLaborItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>{const m=Math.round(c.regular_hours*c.regular_rate),h=Math.round(c.overtime_hours*c.overtime_rate);return{change_order_id:e,labor_class:it.text(c.labor_class),wage_type:c.wage_type||"standard",regular_hours:c.regular_hours||0,overtime_hours:c.overtime_hours||0,regular_rate:c.regular_rate||0,overtime_rate:c.overtime_rate||0,regular_total:m,overtime_total:h,total:m+h,sort_order:c.sort_order??u,source_ticket_id:c.source_ticket_id||null}}),{data:i,error:s}=await r.from("change_order_labor").insert(n).select();if(s)throw s;return i}return[]},async addBulkMaterialItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",g=Math.round(Number(u.unit_cost)||0),p=Number(u.quantity)||1;return{change_order_id:e,description:it.text(u.description)||"",quantity:p,unit:it.text(u.unit)||"each",unit_cost:g,total:Math.round(p*g),source_type:h,source_reference:it.text(u.source_reference)||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_materials").insert(i).select();if(c)throw c;return s}return[]},async addBulkEquipmentItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",g=Math.round(Number(u.unit_cost)||0),p=Number(u.quantity)||1;return{change_order_id:e,description:it.text(u.description)||"",quantity:p,unit:it.text(u.unit)||"day",unit_cost:g,total:Math.round(p*g),source_type:h,source_reference:it.text(u.source_reference)||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_equipment").insert(i).select();if(c)throw c;return s}return[]},async addBulkSubcontractorItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>({change_order_id:e,company_name:it.text(c.company_name)||"",description:it.text(c.description)||"",quantity:c.quantity||1,unit:it.text(c.unit)||"lump sum",unit_cost:c.unit_cost||c.total||c.amount||0,total:c.total||c.amount||0,source_type:c.source_type||"invoice",source_reference:it.text(c.source_reference)||null,sort_order:c.sort_order??u})),{data:i,error:s}=await r.from("change_order_subcontractors").insert(n).select();if(s)throw s;return i}return[]},async clearCORLineItems(e){if(!P)return;const t=_e();if(!t)throw new Error("Database client not available");try{const r=await Promise.all([t.from("change_order_labor").delete().eq("change_order_id",e),t.from("change_order_materials").delete().eq("change_order_id",e),t.from("change_order_equipment").delete().eq("change_order_id",e),t.from("change_order_subcontractors").delete().eq("change_order_id",e)]);for(const n of r)if(n.error)throw n.error}catch(r){throw console.error("Error clearing COR line items:",r),r}},async saveCORLineItems(e,{laborItems:t,materialItems:r,equipmentItems:n,subcontractorItems:i}){if(P){await this.clearCORLineItems(e);const s=await Promise.all([t?.length>0?this.addBulkLaborItems(e,t):[],r?.length>0?this.addBulkMaterialItems(e,r):[],n?.length>0?this.addBulkEquipmentItems(e,n):[],i?.length>0?this.addBulkSubcontractorItems(e,i):[]]);return{labor:s[0],materials:s[1],equipment:s[2],subcontractors:s[3]}}return null},async assignTicketToCOR(e,t){if(P){const{error:r}=await T.rpc("assign_ticket_to_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ye.error("database",{message:r.message,operation:"assignTicketToCOR",extra:{ticketId:e,corId:t}}),r;return{ticket_id:e,change_order_id:t}}return null},async unassignTicketFromCOR(e,t){if(P){const{error:r}=await T.rpc("unassign_ticket_from_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ye.error("database",{message:r.message,operation:"unassignTicketFromCOR",extra:{ticketId:e,corId:t}}),r}},async checkTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("check_ticket_cor_integrity");if(t)throw t;return e||[]}return[]},async fixTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("fix_ticket_cor_integrity");if(t)throw t;return e}return 0},async getTicketsForCOR(e){if(P){const{data:t,error:r}=await T.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",e);if(r)throw r;return t}return[]},async getUnassignedTickets(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(r)throw r;return t}return[]},async importTicketDataToCOR(e,t,r,n,i){if(P){const s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",e).single();if(u)throw u;const{data:m,error:h}=await s.from("labor_rates").select("*").eq("company_id",r).eq("work_type",n||"demolition").eq("job_type",i||"standard");if(h)throw h;const g={};m?.forEach(S=>{g[S.role.toLowerCase()]=S});const p={};c.t_and_m_workers?.forEach(S=>{const O=(S.role||"laborer").toLowerCase();p[O]||(p[O]={regular_hours:0,overtime_hours:0}),p[O].regular_hours+=parseFloat(S.hours)||0,p[O].overtime_hours+=parseFloat(S.overtime_hours)||0});const _=Object.entries(p).map(([S,O])=>{const C=g[S]||{regular_rate:0,overtime_rate:0},A=Math.round((parseFloat(C.regular_rate)||0)*100),k=Math.round((parseFloat(C.overtime_rate)||0)*100);return{labor_class:S.charAt(0).toUpperCase()+S.slice(1),wage_type:i||"standard",regular_hours:O.regular_hours,overtime_hours:O.overtime_hours,regular_rate:A,overtime_rate:k,source_ticket_id:e}});_.length>0&&await this.addBulkLaborItems(t,_);const x=[],w=[];c.t_and_m_items?.forEach(S=>{const O=S.custom_name||S.materials_equipment?.name||"Unknown Item",C=S.custom_category||S.materials_equipment?.category||"Other",A=S.materials_equipment?.unit||"each",k=Math.round((parseFloat(S.materials_equipment?.cost_per_unit)||0)*100),D={description:O,quantity:S.quantity||1,unit:A,unit_cost:k,source_type:"backup_sheet",source_ticket_id:e};C==="Equipment"?w.push(D):x.push(D)}),x.length>0&&await this.addBulkMaterialItems(t,x),w.length>0&&await this.addBulkEquipmentItems(t,w);const{error:j}=await s.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",t).eq("ticket_id",e);if(j)throw j;return Ye.activity("cor_import_success",{ticket_id:e,cor_id:t,labor_count:_.length,material_count:x.length,equipment_count:w.length}),{laborItems:_,materialItems:x,equipmentItems:w}}return null},async reimportTicketDataToCOR(e,t,r,n,i){if(P){const s=_e();if(!s)throw new Error("Database client not available");return await s.from("change_order_labor").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_materials").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_equipment").delete().eq("change_order_id",t).eq("source_ticket_id",e),this.importTicketDataToCOR(e,t,r,n,i)}return null},async markImportFailed(e,t,r="Import failed"){if(P){const n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:r}).eq("change_order_id",t).eq("ticket_id",e);if(i)throw Ye.error("database",{message:i.message,operation:"markImportFailed",extra:{ticketId:e,corId:t}}),i;Ye.error("cor_import_failed",{ticket_id:e,cor_id:t,error:r})}},async getTicketsNeedingImport(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",e).eq("change_order_ticket_associations.import_status","failed");if(r)throw r;return t||[]}return[]},async getTicketImportStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",e).eq("change_order_id",t).single();if(n&&n.code!=="PGRST116")throw n;return r}return null},async recalculateCOR(e){if(P){const{error:t}=await T.rpc("recalculate_cor_totals",{cor_id:e});if(t)throw t;return this.getCORById(e)}return null},async updateCORMarkupPercentages(e,t){if(P){const r={};t.labor!==void 0&&(r.labor_markup_percent=t.labor),t.materials!==void 0&&(r.materials_markup_percent=t.materials),t.equipment!==void 0&&(r.equipment_markup_percent=t.equipment),t.subcontractors!==void 0&&(r.subcontractors_markup_percent=t.subcontractors);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async updateCORFeePercentages(e,t){if(P){const r={};t.liabilityInsurance!==void 0&&(r.liability_insurance_percent=t.liabilityInsurance),t.bond!==void 0&&(r.bond_percent=t.bond),t.licenseFee!==void 0&&(r.license_fee_percent=t.licenseFee);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async submitCORForApproval(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}return null},async approveCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"approved",approved_by:t,approved_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async rejectCOR(e,t=null){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"rejected",rejection_reason:t}).eq("id",e).select().single();if(n)throw n;return r}return null},async markCORAsBilled(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"billed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async closeCOR(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"closed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async saveCORSignature(e,t,r){if(P){const{data:n,error:i}=await T.from("change_orders").update({gc_signature_data:t,gc_signature_name:r,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",e).select().single();if(i)throw i;return n}return null},async getCORStats(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("status, cor_total").eq("project_id",e);if(r)throw r;const n={total_cors:t.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return t.forEach(i=>{switch(i.status){case"draft":n.draft_count++;break;case"pending_approval":n.pending_count++,n.total_pending_value+=i.cor_total||0;break;case"approved":n.approved_count++,n.total_approved_value+=i.cor_total||0;break;case"rejected":n.rejected_count++;break;case"billed":case"closed":n.billed_count++,n.total_billed_value+=i.cor_total||0;break}}),n}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(e,t){return P?T.channel(`change_orders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCorTickets(e,t){return P?T.channel(`cor-tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${e}`},t).subscribe():null},async getCORLog(e){if(P){const{data:t,error:r}=await T.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",e).order("log_number",{ascending:!0});if(r)throw console.error("Error fetching COR log:",r),r;return(t||[]).map(n=>({id:n.id,logNumber:n.log_number,dateSentToClient:n.date_sent_to_client,ceNumber:n.ce_number,comments:n.comments,createdAt:n.created_at,updatedAt:n.updated_at,changeOrder:{id:n.change_order?.id,corNumber:n.change_order?.cor_number,title:n.change_order?.title,corTotal:n.change_order?.cor_total,status:n.change_order?.status,createdAt:n.change_order?.created_at,approvedAt:n.change_order?.approved_at,approvedBy:n.change_order?.approved_by}}))}return[]},async updateCORLogEntry(e,t){if(P){const r={updated_at:new Date().toISOString()};t.dateSentToClient!==void 0&&(r.date_sent_to_client=t.dateSentToClient||null),t.ceNumber!==void 0&&(r.ce_number=t.ceNumber||null),t.comments!==void 0&&(r.comments=t.comments||null);const{data:n,error:i}=await T.from("cor_log_entries").update(r).eq("id",e).select().single();if(i)throw console.error("Error updating COR log entry:",i),i;return n}return null},async updateChangeOrderStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw console.error("Error updating change order status:",n),n;return r}return null},subscribeToCORLog(e,t){return P?T.channel(`cor-log:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocuments(e,t){return P?T.channel(`documents:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"documents",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocumentFolders(e,t){return P?T.channel(`document_folders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"document_folders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialsEquipment(e,t){return P?T.channel(`materials_equipment:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToLaborRates(e,t){return P?T.channel(`labor_rates:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToProject(e,t){return P?T.channel(`project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${e}`},t).subscribe():null},subscribeToPunchList(e,t){return P?T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},t).subscribe():null},async createSignatureRequest(e,t,r,n,i=null,s=null){if(P){const c=_e();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.rpc("generate_signature_token");if(m)throw m;const{data:h,error:g}=await c.from("signature_requests").insert({document_type:e,document_id:t,company_id:r,project_id:n,signature_token:u,expires_at:s,created_by:i}).select().single();if(g)throw g;return h}return null},async getSignatureRequestByToken(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");await t.rpc("increment_signature_view_count",{token:e});const{data:r,error:n}=await t.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",e).single();if(n)throw n;return r}return null},async getSignatureRequestsForDocument(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",e).eq("document_id",t).order("created_at",{ascending:!1});if(i)throw i;return n||[]}return[]},async addSignature(e,t,r){if(P){const n=_e();if(!n)throw new Error("Database client not available");const{data:i,error:s}=await n.from("signatures").insert({signature_request_id:e,signature_slot:t,signature_image:r.signature,signer_name:r.signerName,signer_title:r.signerTitle||null,signer_company:r.signerCompany||null,signed_at:r.signedAt||new Date().toISOString(),ip_address:r.ipAddress||null,user_agent:r.userAgent||null}).select().single();if(s)throw s;return i}return null},async syncSignatureToDocument(e,t){if(!P)return null;const r=_e();if(!r)throw new Error("Database client not available");const{document_type:n,document_id:i}=t,s=e.signature_slot,c={};s===1?(c.gc_signature_data=e.signature_image,c.gc_signature_name=e.signer_name,c.gc_signature_title=e.signer_title,c.gc_signature_company=e.signer_company,c.gc_signature_date=e.signed_at,c.gc_signature_ip=e.ip_address):s===2&&(c.client_signature_data=e.signature_image,c.client_signature_name=e.signer_name,c.client_signature_title=e.signer_title,c.client_signature_company=e.signer_company,c.client_signature_date=e.signed_at,c.client_signature_ip=e.ip_address);const u=n==="cor"?"change_orders":"t_and_m_tickets",{data:m,error:h}=await r.from(u).update(c).eq("id",i).select().single();if(h)throw h;return m},async revokeSignatureRequest(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("signature_requests").update({status:"revoked"}).eq("id",e).select().single();if(n)throw n;return r}return null},async getDocumentForSigning(e,t){if(!P)return null;const r=_e();if(!r)throw new Error("Database client not available");if(e==="cor"){const{data:n,error:i}=await r.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",t).single();if(i)throw i;return n}else if(e==="tm_ticket"){const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (
              id,
              name,
              unit,
              cost_per_unit,
              category
            )
          )
        `).eq("id",t).single();if(i)throw i;return n}return null},async getProjectCosts(e){if(P){const{data:r,error:n}=await T.from("project_costs").select("*").eq("project_id",e).order("cost_date",{ascending:!1});return n?(console.error("Error fetching project costs:",n),[]):r||[]}return(Oe().projectCosts||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.cost_date)-new Date(r.cost_date))},async addProjectCost(e,t,r){const n={project_id:e,company_id:t,category:r.category,description:r.description,amount:parseFloat(r.amount),cost_date:r.cost_date||new Date().toISOString().split("T")[0],notes:r.notes||null,created_by:r.created_by||null};if(P){const{data:c,error:u}=await T.from("project_costs").insert(n).select().single();if(u)throw console.error("Error adding project cost:",u),u;return c}const i=Oe();i.projectCosts||(i.projectCosts=[]);const s={...n,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i.projectCosts.push(s),Ve(i),s},async updateProjectCost(e,t){const r={category:t.category,description:t.description,amount:parseFloat(t.amount),cost_date:t.cost_date,notes:t.notes||null,updated_at:new Date().toISOString()};if(P){const{data:s,error:c}=await T.from("project_costs").update(r).eq("id",e).select().single();if(c)throw console.error("Error updating project cost:",c),c;return s}const n=Oe();if(!n.projectCosts)return null;const i=n.projectCosts.findIndex(s=>s.id===e);return i===-1?null:(n.projectCosts[i]={...n.projectCosts[i],...r},Ve(n),n.projectCosts[i])},async deleteProjectCost(e){if(P){const{error:r}=await T.from("project_costs").delete().eq("id",e);if(r)throw console.error("Error deleting project cost:",r),r;return!0}const t=Oe();return t.projectCosts&&(t.projectCosts=t.projectCosts.filter(r=>r.id!==e),Ve(t)),!0},async getProjectCostsSummary(e){const t=await this.getProjectCosts(e),r={};let n=0;return t.forEach(i=>{const s=parseFloat(i.amount)||0;n+=s,r[i.category]||(r[i.category]={category:i.category,total:0,count:0,items:[]}),r[i.category].total+=s,r[i.category].count++,r[i.category].items.push(i)}),Object.values(r).forEach(i=>{i.percentage=n>0?i.total/n*100:0}),{totalCost:n,byCategory:r,itemCount:t.length}},async getNextInvoiceNumber(e){if(P){const{data:t,error:r}=await T.rpc("get_next_invoice_number",{p_company_id:e});return r?(console.error("Error getting next invoice number:",r),this._generateLocalInvoiceNumber(e)):t}return this._generateLocalInvoiceNumber(e)},async _generateLocalInvoiceNumber(e){const r=(await this.getCompanyInvoices(e)).reduce((n,i)=>{const s=i.invoice_number?.match(/^INV-(\d+)$/);if(s){const c=parseInt(s[1],10);return c>n?c:n}return n},0);return`INV-${String(r+1).padStart(4,"0")}`},async getBillableItems(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("id, cor_number, title, cor_total, status, approved_at").eq("project_id",e).eq("status","approved").order("cor_number",{ascending:!0});r&&console.error("Error fetching billable CORs:",r);const{data:n,error:i}=await T.from("t_and_m_tickets").select("id, work_date, ce_pco_number, change_order_value, status, client_signature_date").eq("project_id",e).eq("status","approved").not("client_signature_data","is",null).order("work_date",{ascending:!0});return i&&console.error("Error fetching billable T&M tickets:",i),{cors:t||[],tickets:n||[]}}return{cors:[],tickets:[]}},async getProjectInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("project_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching project invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.project_id===e)},async getCompanyInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select("*").eq("company_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching company invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.company_id===e)},async createInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").insert({project_id:e.project_id,company_id:e.company_id,invoice_number:e.invoice_number,invoice_date:e.invoice_date,due_date:e.due_date,status:e.status||"draft",retention_percent:e.retention_percent||0,bill_to_name:e.bill_to_name,bill_to_address:e.bill_to_address,bill_to_contact:e.bill_to_contact,notes:e.notes,terms:e.terms||"Net 30",created_by:e.created_by}).select().single();if(s)throw console.error("Error creating invoice:",s),s;if(t&&t.length>0){const c=t.map((m,h)=>({invoice_id:i.id,item_type:m.item_type,reference_id:m.reference_id,reference_number:m.reference_number,description:m.description,amount:m.amount,sort_order:h})),{error:u}=await T.from("invoice_items").insert(c);if(u)throw console.error("Error creating invoice items:",u),await T.from("invoices").delete().eq("id",i.id),u}return this.getInvoice(i.id)}const r=Oe();r.invoices||(r.invoices=[]);const n={...e,id:en(),created_at:new Date().toISOString(),invoice_items:t||[]};return r.invoices.push(n),Ve(r),n},async getInvoice(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",e).single();if(n)throw console.error("Error fetching invoice:",n),n;return r}return(Oe().invoices||[]).find(r=>r.id===e)},async updateInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").update(t).eq("id",e).select().single();if(s)throw console.error("Error updating invoice:",s),s;return i}const r=Oe(),n=(r.invoices||[]).findIndex(i=>i.id===e);return n>=0?(r.invoices[n]={...r.invoices[n],...t},Ve(r),r.invoices[n]):null},async markInvoiceSent(e){return this.updateInvoice(e,{status:"sent",sent_at:new Date().toISOString()})},async recordInvoicePayment(e,t){const r=await this.getInvoice(e);if(!r)throw new Error("Invoice not found");const n=(r.amount_paid||0)+t,i=n>=r.total;return this.updateInvoice(e,{amount_paid:n,status:i?"paid":"partial",paid_at:i?new Date().toISOString():null})},async deleteInvoice(e){if(P){const{error:r}=await T.from("invoices").delete().eq("id",e).eq("status","draft");if(r)throw console.error("Error deleting invoice:",r),r;return!0}const t=Oe();return t.invoices=(t.invoices||[]).filter(r=>r.id!==e),Ve(t),!0},async markItemsBilled(e=[],t=[]){if(P){if(e.length>0){const{error:r}=await T.from("change_orders").update({status:"billed"}).in("id",e);r&&console.error("Error marking CORs as billed:",r)}if(t.length>0){const{error:r}=await T.from("t_and_m_tickets").update({status:"billed"}).in("id",t);r&&console.error("Error marking T&M tickets as billed:",r)}}}},e3={async getCompanyEquipment(e,t=!0){if(!P)return console.warn("Supabase not configured"),[];let r=T.from("equipment").select("*").eq("company_id",e).order("name");t&&(r=r.eq("is_active",!0));const{data:n,error:i}=await r;return i?(console.error("Error fetching company equipment:",i),[]):n||[]},async createEquipment(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("equipment").insert(e).select().single();if(r)throw console.error("Error creating equipment:",r),r;return t},async updateEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("equipment").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating equipment:",n),n;return r},async deactivateEquipment(e){return this.updateEquipment(e,{is_active:!1})},async getProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).order("start_date",{ascending:!1});return r?(console.error("Error fetching project equipment:",r),[]):t||[]},async getActiveProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).is("end_date",null).order("start_date",{ascending:!1});return r?(console.error("Error fetching active project equipment:",r),[]):t||[]},async addEquipmentToProject(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("project_equipment").insert(e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(r)throw console.error("Error adding equipment to project:",r),r;return t},async updateProjectEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("project_equipment").update(t).eq("id",e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(n)throw console.error("Error updating project equipment:",n),n;return r},async markEquipmentReturned(e,t=null){return this.updateProjectEquipment(e,{end_date:t||new Date().toISOString().split("T")[0]})},async removeEquipmentFromProject(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("project_equipment").delete().eq("id",e);if(t)throw console.error("Error removing project equipment:",t),t;return!0},calculateProjectEquipmentCost(e){const t=new Date;return t.setHours(0,0,0,0),e.reduce((r,n)=>{const i=new Date(n.start_date);i.setHours(0,0,0,0);let s;n.end_date?(s=new Date(n.end_date),s.setHours(0,0,0,0)):s=t;const c=Math.max(1,Math.floor((s-i)/(1e3*60*60*24))+1);return r+n.daily_rate*c},0)},calculateDaysOnSite(e,t=null){const r=new Date(e);r.setHours(0,0,0,0);let n;return t?n=new Date(t):n=new Date,n.setHours(0,0,0,0),Math.max(1,Math.floor((n-r)/(1e3*60*60*24))+1)}},t3={async getNextDrawNumber(e){if(!P)return console.warn("Supabase not configured"),1;const{data:t,error:r}=await T.from("draw_requests").select("draw_number").eq("project_id",e).order("draw_number",{ascending:!1}).limit(1).single();return r&&r.code!=="PGRST116"&&console.error("Error getting next draw number:",r),(t?.draw_number||0)+1},async getPreviousBillingTotals(e){if(!P)return console.warn("Supabase not configured"),{totalBilled:0,totalRetention:0};const{data:t,error:r}=await T.from("draw_requests").select("current_billing, retention_held").eq("project_id",e).in("status",["submitted","approved","paid"]);if(r)return console.error("Error getting previous billing totals:",r),{totalBilled:0,totalRetention:0};const n=(t||[]).reduce((s,c)=>s+(c.current_billing||0),0),i=t?.length>0?Math.max(...t.map(s=>s.retention_held||0)):0;return{totalBilled:n,totalRetention:i}},async getProjectDrawRequests(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("draw_requests").select("*").eq("project_id",e).order("draw_number",{ascending:!1});return r?(console.error("Error fetching draw requests:",r),[]):t||[]},async getDrawRequest(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("draw_requests").select(`
        *,
        draw_request_items (
          *
        )
      `).eq("id",e).single();return r?(console.error("Error fetching draw request:",r),null):t},async createDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").insert(e).select().single();if(n)throw console.error("Error creating draw request:",n),n;if(t&&t.length>0){const i=t.map((c,u)=>({...c,draw_request_id:r.id,sort_order:u})),{error:s}=await T.from("draw_request_items").insert(i);s&&console.error("Error creating draw request items:",s)}return this.getDrawRequest(r.id)},async updateDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating draw request:",n),n;return r},async updateDrawRequestStatus(e,t){const r={status:t};return t==="submitted"?r.submitted_at=new Date().toISOString():t==="approved"?r.approved_at=new Date().toISOString():t==="paid"&&(r.paid_at=new Date().toISOString()),this.updateDrawRequest(e,r)},async updateDrawRequestItems(e,t){if(!P)return console.warn("Supabase not configured"),!1;const{error:r}=await T.from("draw_request_items").delete().eq("draw_request_id",e);if(r)throw console.error("Error deleting old draw request items:",r),r;if(t&&t.length>0){const n=t.map((s,c)=>({...s,draw_request_id:e,sort_order:c})),{error:i}=await T.from("draw_request_items").insert(n);if(i)throw console.error("Error inserting draw request items:",i),i}return!0},async deleteDrawRequest(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("draw_requests").delete().eq("id",e);if(t)throw console.error("Error deleting draw request:",t),t;return!0},async getScheduleOfValues(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("areas").select("id, name, square_footage, price_per_sqft").eq("project_id",e).order("created_at");return r?(console.error("Error fetching schedule of values:",r),[]):(t||[]).map((n,i)=>({area_id:n.id,item_number:String(i+1),description:n.name,scheduled_value:Math.round((n.square_footage||0)*(n.price_per_sqft||0)*100)}))},async getPreviousDrawItems(e){if(!P)return console.warn("Supabase not configured"),{};const{data:t,error:r}=await T.from("draw_requests").select("id").eq("project_id",e).in("status",["submitted","approved","paid"]).order("draw_number",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")return console.error("Error fetching latest draw:",r),{};if(!t)return{};const{data:n,error:i}=await T.from("draw_request_items").select("area_id, total_percent, total_amount").eq("draw_request_id",t.id);return i?(console.error("Error fetching previous draw items:",i),{}):(n||[]).reduce((s,c)=>(c.area_id&&(s[c.area_id]={previous_percent:c.total_percent||0,previous_amount:c.total_amount||0}),s),{})},calculatePercentFromAmount(e,t){return!t||t===0?0:Math.round(e/t*1e4)},calculateAmountFromPercent(e,t){return Math.round(e/1e4*t)}};typeof window<"u"&&si().catch(e=>console.error("Failed to init offline DB:",e));const kg=()=>{const e="fieldsync_device_id";let t=localStorage.getItem(e);return t||(t=crypto.randomUUID(),localStorage.setItem(e,t)),t},He=(e,t=1e4)=>e&&it.text(e,{maxLength:t}),pn=e=>!e||typeof e!="object"?e:it.object(e),uf={async signUp(e,t,r,n){if(P){const{data:i,error:s}=await T.auth.signUp({email:e,password:t,options:{data:{name:r,role:n}}});if(s)throw s;return i}else{const i=Oe(),s={id:crypto.randomUUID(),email:e,name:r,role:n,created_at:new Date().toISOString()};return i.users.push(s),Ve(i),Rd(s),{user:s}}},async signIn(e,t){if(P){const{data:r,error:n}=await T.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r}else{const n=Oe().users.find(i=>i.email===e);if(!n)throw new Error("User not found");return Rd(n),{user:n}}},async signOut(){if(P){const{error:e}=await T.auth.signOut();if(e)throw e}else Rd(null)},async getUser(){if(P){const{data:{user:e}}=await T.auth.getUser();return e}else return Md()},async getProfile(){if(P){const{data:{user:e}}=await T.auth.getUser();if(!e)return null;const{data:t,error:r}=await T.from("users").select("*").eq("id",e.id).single();return r?{id:e.id,email:e.email,name:e.user_metadata?.name||"",role:e.user_metadata?.role||"foreman"}:t}else return Md()},async updateRole(e,t){if(P){const{data:r,error:n}=await T.from("users").update({role:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.users.find(i=>i.id===e);return n&&(n.role=t,Ve(r),Md()?.id===e&&Rd(n)),n}},onAuthStateChange(e){if(P)return T.auth.onAuthStateChange(e);{const t=Md();return e(t?"SIGNED_IN":"SIGNED_OUT",{user:t}),{data:{subscription:{unsubscribe:()=>{}}}}}}},be={async getProjects(e=null,t=!1){if(P){if(!Un()){const n=await XS(e);return t?n:n.filter(i=>i.status!=="archived")}const r=performance.now();try{let n=T.from("projects").select("*").order("created_at",{ascending:!1});e&&(n=n.eq("company_id",e)),t||(n=n.eq("status","active"));const{data:i,error:s}=await n,c=Math.round(performance.now()-r);if(Ye.query("getProjects",{duration:c,rows:i?.length,company_id:e}),s){Ye.error("database",{message:s.message,operation:"getProjects",company_id:e});const u=await XS(e);if(u.length>0)return u;throw s}return i?.length>0&&$z(i).catch(u=>console.error("Failed to cache projects:",u)),i}catch(n){throw Ye.error("database",{message:n.message,operation:"getProjects",company_id:e}),n}}else{const r=Oe().projects;return t?r:r.filter(n=>n.status!=="archived")}},async getProjectsPaginated(e,{page:t=0,limit:r=25,status:n="active"}={}){if(P){const c=performance.now();try{let u=T.from("projects").select("*",{count:"exact"}).eq("company_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n!=="all"&&(u=u.eq("status",n));const{data:m,error:h,count:g}=await u,p=Math.round(performance.now()-c);if(Ye.query("getProjectsPaginated",{duration:p,rows:m?.length,page:t,company_id:e}),h)throw h;return{projects:m||[],totalCount:g||0,hasMore:(t+1)*r<(g||0),page:t,limit:r}}catch(u){throw Ye.error("database",{message:u.message,operation:"getProjectsPaginated",company_id:e}),u}}const i=Oe().projects.filter(c=>c.company_id===e&&(n==="all"||c.status===n)),s=t*r;return{projects:i.slice(s,s+r),totalCount:i.length,hasMore:s+r<i.length,page:t,limit:r}},async getProjectsWithSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!1}),i=Math.round(performance.now()-t);if(Ye.query("getProjectsWithSummary",{duration:i,rows:r?.length,company_id:e}),n)throw n;return(r||[]).map(s=>({...s,areaCount:s.areas?.[0]?.count||0,ticketCount:s.tickets?.[0]?.count||0,pendingTicketCount:0,reportCount:s.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,daily_reports:void 0}))}catch(r){return Ye.error("database",{message:r.message,operation:"getProjectsWithSummary",company_id:e}),this.getProjects(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getProjectDashboardSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.rpc("get_project_dashboard_summary",{p_company_id:e}),i=Math.round(performance.now()-t);if(Ye.query("getProjectDashboardSummary",{duration:i,rows:r?.length,company_id:e}),n){if(n.message?.includes("function")||n.code==="42883")return this.getProjectsWithSummary(e);throw n}return(r||[]).map(s=>({id:s.project_id,name:s.project_name,status:s.project_status,job_number:s.project_number,address:s.project_address,pin:s.project_pin,created_at:s.created_at,start_date:s.start_date,end_date:s.end_date,contract_value:Number(s.contract_value)||0,work_type:s.work_type||"demolition",job_type:s.job_type||"standard",general_contractor:s.general_contractor||"",areaCount:Number(s.total_areas)||0,completedAreas:Number(s.completed_areas)||0,inProgressAreas:Number(s.in_progress_areas)||0,pendingAreas:Number(s.pending_areas)||0,ticketCount:Number(s.total_tickets)||0,pendingTicketCount:Number(s.pending_tickets)||0,submittedTicketCount:Number(s.submitted_tickets)||0,approvedTicketCount:Number(s.approved_tickets)||0,totalLaborHours:Number(s.total_labor_hours)||0,todayLaborHours:Number(s.today_labor_hours)||0,todayWorkerCount:Number(s.today_worker_count)||0,lastActivityAt:s.last_activity_at,dailyReportsThisWeek:Number(s.daily_reports_this_week)||0,corCount:Number(s.cor_count)||0,pendingCorCount:Number(s.pending_cor_count)||0,disposalLoadsToday:Number(s.disposal_loads_today)||0}))}catch(r){return Ye.error("database",{message:r.message,operation:"getProjectDashboardSummary",company_id:e}),this.getProjectsWithSummary(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getArchivedProjects(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("company_id",e).eq("status","archived").order("archived_at",{ascending:!1});if(r)throw r;return t}else return Oe().projects.filter(t=>t.status==="archived")},async getProjectCount(e){if(P){const{count:t,error:r}=await T.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",e).in("status",["active","archived"]);if(r)throw r;return t||0}else return Oe().projects.filter(r=>r.company_id===e&&r.status!=="deleted").length},async universalSearch(e,t,r=10){if(!P||!t?.trim())return{projects:[],tickets:[],cors:[],workers:[]};const n=t.trim().toLowerCase(),i={projects:[],tickets:[],cors:[],workers:[]};try{const{data:s}=await T.from("projects").select("id, name, job_number, address, status").eq("company_id",e).eq("status","active").or(`name.ilike.%${n}%,job_number.ilike.%${n}%,address.ilike.%${n}%`).limit(r);i.projects=s||[];const{data:c}=await T.from("t_and_m_tickets").select(`
          id, notes, work_date, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).ilike("notes",`%${n}%`).order("work_date",{ascending:!1}).limit(r);i.tickets=(c||[]).map(g=>({...g,projectName:g.projects?.name||"Unknown Project"}));const{data:u}=await T.from("change_orders").select(`
          id, cor_number, title, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).or(`title.ilike.%${n}%,cor_number.ilike.%${n}%`).order("created_at",{ascending:!1}).limit(r);i.cors=(u||[]).map(g=>({...g,projectName:g.projects?.name||"Unknown Project"}));const{data:m}=await T.from("crew_checkins").select(`
          workers,
          project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).order("check_in_date",{ascending:!1}).limit(50),h=new Map;return(m||[]).forEach(g=>{(g.workers||[]).forEach(p=>{if(p.name.toLowerCase().includes(n)){const _=p.name.toLowerCase();h.has(_)||h.set(_,{name:p.name,role:p.role,projectName:g.projects?.name,lastProject:g.projects})}})}),i.workers=Array.from(h.values()).slice(0,r),i}catch(s){return console.error("Universal search error:",s),i}},async archiveProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="archived",r.archived_at=new Date().toISOString(),Ve(t)),r}},async getProjectStorageStats(e){if(!P)return{photoCount:0,estimatedMB:0};const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);if(r)throw r;let n=0;const i=[];t?.forEach(c=>{c.photos&&Array.isArray(c.photos)&&(n+=c.photos.length,i.push(...c.photos))});const s=n*1.5;return{photoCount:n,estimatedMB:s,photoUrls:i}},async archiveProjectDeep(e,t){if(!P)return null;const{photoUrls:r}=await this.getProjectStorageStats(e);if(r.length>0){const s=r.map(c=>{if(!c)return null;if(c.startsWith("http"))try{const m=new URL(c).pathname.match(/\/tm-photos\/(.+)$/);return m?m[1]:null}catch{return null}return c}).filter(Boolean);if(s.length>0)for(let c=0;c<s.length;c+=100){const u=s.slice(c,c+100);await T.storage.from("tm-photos").remove(u)}}await T.from("t_and_m_tickets").update({photos:[]}).eq("project_id",e);const{data:n,error:i}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",e).select().single();if(i)throw i;return{...n,photosDeleted:r.length}},async restoreProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"active",archived_at:null}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="active",r.archived_at=null,Ve(t)),r}},async getProject(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("id",e).single();if(r)throw r;return t}else return Oe().projects.find(t=>t.id===e)},async createProject(e){if(P){const{data:t,error:r}=await T.from("projects").insert({...pn(e),status:"active"}).select().single();if(r)throw console.error("Supabase createProject error:",r.message,r.details,r.hint),r;return t}else{const t=Oe(),r={...e,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return t.projects.push(r),Ve(t),r}},async getProjectByPin(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("pin",e).eq("status","active").single();return r?null:t}else return Oe().projects.find(r=>r.pin===e&&r.status==="active")||null},async getProjectByPinAndCompany(e,t){if(P){const{data:r,error:n}=await T.from("projects").select("*").eq("pin",e).eq("company_id",t).eq("status","active").single();return n?null:r}else return Oe().projects.find(n=>n.pin===e&&n.company_id===t&&n.status==="active")||null},async getProjectByPinSecure(e,t){if(P){const r=`pin_attempts_${t}`,n=`pin_lockout_${t}`,i=5,s=300*1e3,c=localStorage.getItem(n);if(c&&Date.now()<parseInt(c)){const w=parseInt(c)-Date.now(),j=Math.ceil(w/6e4);return{success:!1,rateLimited:!0,project:null,error:`Too many attempts. Please try again in ${j} minute${j>1?"s":""}.`}}const u=kg(),{data:m,error:h}=await T.rpc("validate_pin_and_create_session",{p_pin:e,p_company_code:t,p_device_id:u,p_ip_address:null});if(h)return console.warn("[PIN Auth] RPC unavailable, using direct PIN lookup:",h.message),await this._pinFallbackDirectQuery(e,t,r,n,i,s);if(!m||m.length===0)return{success:!1,rateLimited:!1,project:null};const g=m[0];if(g.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(g.error_code==="INVALID_COMPANY"||g.error_code==="INVALID_PIN"){let w=parseInt(localStorage.getItem(r)||"0");return w++,localStorage.setItem(r,w.toString()),w>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}if(!g.success||!g.project_id)return{success:!1,rateLimited:!1,project:null};localStorage.removeItem(`pin_attempts_${t}`),localStorage.removeItem(`pin_lockout_${t}`),cf({token:g.session_token,projectId:g.project_id,companyId:g.company_id,projectName:g.project_name,companyName:g.company_name,createdAt:new Date().toISOString()});const p=Vb(),{data:_,error:x}=await p.from("projects").select("*").eq("id",g.project_id).single();return{success:!0,rateLimited:!1,sessionToken:g.session_token,project:_||{id:g.project_id,name:g.project_name,company_id:g.company_id,status:"active"}}}else{const r=Oe(),i=(r.companies||[]).find(c=>c.code===t);if(!i)return{success:!1,rateLimited:!1,project:null};const s=r.projects.find(c=>c.pin===e&&c.company_id===i.id&&c.status==="active");if(s){const c=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;cf({token:c,projectId:s.id,companyId:i.id,projectName:s.name,companyName:i.name,createdAt:new Date().toISOString()})}return{success:!!s,rateLimited:!1,project:s||null}}},async _pinFallbackDirectQuery(e,t,r,n,i,s){try{const{data:c,error:u}=await T.from("companies").select("*").ilike("code",t.trim()).single();if(u||!c)return{success:!1,rateLimited:!1,project:null};const{data:m,error:h}=await T.from("projects").select("*").eq("pin",e.trim()).eq("company_id",c.id).eq("status","active").single();if(h||!m){let p=parseInt(localStorage.getItem(r)||"0");return p++,localStorage.setItem(r,p.toString()),p>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}localStorage.removeItem(r),localStorage.removeItem(n);let g=null;try{const p=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(x=>x.toString(16).padStart(2,"0")).join(""),{error:_}=await T.from("field_sessions").insert({project_id:m.id,company_id:c.id,session_token:p,device_id:typeof kg=="function"?kg():null});_||(g=p)}catch{}return g&&cf({token:g,projectId:m.id,companyId:c.id,projectName:m.name,companyName:c.name,createdAt:new Date().toISOString()}),{success:!0,rateLimited:!1,project:m}}catch(c){return console.error("[PIN Auth] Fallback query failed:",c),{success:!1,rateLimited:!1,project:null,error:"Connection error. Please try again."}}},async isPinAvailable(e,t=null){if(P){let r=T.from("projects").select("id").eq("pin",e);t&&(r=r.neq("id",t));const{data:n,error:i}=await r;if(i)throw i;return n.length===0}else return!Oe().projects.some(n=>n.pin===e&&n.id!==t)},async updateProjectPin(e,t){if(P){const{data:r,error:n}=await T.from("projects").update({pin:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.projects.find(i=>i.id===e);return n&&(n.pin=t,Ve(r)),n}},async updateProject(e,t,r=null){if(P){if(!r)throw console.error("[Security] updateProject called without companyId - this is a security risk"),new Error("Company ID is required for security verification");const{data:n,error:i}=await T.from("projects").update(pn(t)).eq("id",e).eq("company_id",r).select().single();if(i)throw console.error("Error updating project"),i;return n}else{const n=Oe(),i=n.projects.find(s=>s.id===e);return i&&(Object.assign(i,t),Ve(n)),i}},async deleteProject(e,t=null){if(P){let r=[];try{const{data:c}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);c?.forEach(u=>{Array.isArray(u.photos)&&u.photos.forEach(m=>{if(m)if(m.startsWith("http"))try{const h=new URL(m).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);h&&r.push(decodeURIComponent(h[1]))}catch{}else r.push(m)})})}catch{}if(r.length>0)try{for(let c=0;c<r.length;c+=100)await T.storage.from("tm-photos").remove(r.slice(c,c+100))}catch{}await T.from("t_and_m_tickets").delete().eq("project_id",e),await T.from("daily_reports").delete().eq("project_id",e);let n=T.from("projects").delete({count:"exact"}).eq("id",e);t&&(n=n.eq("company_id",t));const{error:i,count:s}=await n;if(i)throw i;if(s===0)throw new Error("Project could not be deleted. You may not have permission (admin or owner role required).")}else{const r=Oe();r.projects=r.projects.filter(n=>n.id!==e),r.areas=r.areas.filter(n=>n.project_id!==e),Ve(r)}},async getAreas(e){if(P){if(!Un())return ZS(e);const t=_e(),{data:r,error:n}=await t.from("areas").select("*").eq("project_id",e).order("sort_order",{ascending:!0});if(n){const i=await ZS(e);if(i.length>0)return i;throw n}return r?.length>0&&Hz(r).catch(i=>console.error("Failed to cache areas:",i)),r}else return Oe().areas.filter(t=>t.project_id===e)},async createArea(e){if(P){const t=_e(),{data:r,error:n}=await t.from("areas").insert(pn(e)).select().single();if(n)throw n;return r}else{const t=Oe(),r={...e,id:crypto.randomUUID(),created_at:new Date().toISOString()};return t.areas.push(r),Ve(t),r}},async updateAreaStatus(e,t,r=null){if(P){if(!Un()){const u=await Cg(e,t);return await hn(Jt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}let i=_e().from("areas").update({status:t}).eq("id",e);r&&(i=i.eq("project_id",r));const{data:s,error:c}=await i.select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u=await Cg(e,t);return await hn(Jt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}throw c}return s&&Cg(e,t).catch(u=>console.error("Failed to update cached area status:",u)),s}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(i.status=t,i.updated_at=new Date().toISOString()),Ve(n),i}},async updateArea(e,t,r=null){if(P){let n=T.from("areas").update(pn(t)).eq("id",e);r&&(n=n.eq("project_id",r));const{data:i,error:s}=await n.select().single();if(s)throw s;return i}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(Object.assign(i,t),i.updated_at=new Date().toISOString()),Ve(n),i}},async deleteArea(e,t=null){if(P){let r=T.from("areas").delete().eq("id",e);t&&(r=r.eq("project_id",t));const{error:n}=await r;if(n)throw n}else{const r=Oe();r.areas=r.areas.filter(n=>n.id!==e),Ve(r)}},subscribeToAreas(e,t){return P?T.channel(`areas:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMessages(e,t){return P?T.channel(`messages:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialRequests(e,t){return P?T.channel(`material_requests:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDailyReports(e,t){return P?T.channel(`daily_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCrewCheckins(e,t){return P?T.channel(`crew_checkins:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToInjuryReports(e,t){return P?T.channel(`injury_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToTMTickets(e,t){return P?T.channel(`tm_tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCompanyActivity(e,t,r){if(!P||!t||t.length===0)return null;const n=T.channel(`company_activity:${e}`);return t.forEach(i=>{n.on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${i}`},s=>r.onMessage?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${i}`},s=>r.onMaterialRequest?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${i}`},s=>r.onTMTicket?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${i}`},s=>r.onCrewCheckin?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${i}`},s=>r.onAreaUpdate?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${i}`},s=>r.onCORChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${i}`},s=>r.onProjectChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${i}`},s=>r.onPunchListChange?.(s))}),n.on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},i=>r.onInjuryReport?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},i=>r.onMaterialsEquipmentChange?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},i=>r.onLaborRateChange?.(i)),n.subscribe()},unsubscribe(e){e&&P&&T.removeChannel(e)},async getAssignedProjects(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",e);if(r)throw r;return t.map(n=>n.projects)}else{const t=Oe();return(t.assignments?.filter(n=>n.user_id===e)||[]).map(n=>t.projects.find(i=>i.id===n.project_id)).filter(Boolean)}},async assignUserToProject(e,t,r){if(P){const{data:n,error:i}=await T.from("project_assignments").insert({project_id:e,user_id:t,assigned_by:r}).select().single();if(i)throw i;return n}else{const n=Oe();n.assignments||(n.assignments=[]);const i={id:crypto.randomUUID(),project_id:e,user_id:t,assigned_by:r,assigned_at:new Date().toISOString()};return n.assignments.push(i),Ve(n),i}},async removeUserFromProject(e,t){if(P){const{error:r}=await T.from("project_assignments").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}else{const r=Oe();r.assignments=r.assignments?.filter(n=>!(n.project_id===e&&n.user_id===t))||[],Ve(r)}},async getProjectAssignments(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",e);if(r)throw r;return t.map(n=>n.users)}else{const t=Oe();return(t.assignments?.filter(n=>n.project_id===e)||[]).map(n=>t.users.find(i=>i.id===n.user_id)).filter(Boolean)}},async getAllUsers(){if(P){const{data:e,error:t}=await T.from("users").select("*").order("name");if(t)throw t;return e}else return Oe().users||[]},async getForemen(){if(P){const{data:e,error:t}=await T.from("users").select("*").eq("role","foreman").order("name");if(t)throw t;return e}else return(Oe().users||[]).filter(e=>e.role==="foreman")},async logActivity(e,t,r,n,i,s){if(P){const{error:c}=await T.from("activity_log").insert({user_id:e,project_id:t,area_id:r,action:n,old_value:i,new_value:s});c&&console.error("Error logging activity:",c)}},async getProjectActivity(e,t=50){if(P){const{data:r,error:n}=await T.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r}return[]},async getMaterialsEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").select("*").eq("company_id",e).eq("active",!0).order("category").order("name");if(r)throw r;return t}return[]},async getMaterialsEquipmentByCategory(e,t){if(P){const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("materials_equipment").select("*").eq("company_id",e).eq("category",t).eq("active",!0).order("name");if(i)throw i;return n}return[]},async getAllMaterialsEquipment(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("materials_equipment").select("*").eq("company_id",e).order("category").order("name");if(n)throw n;return r}return[]},async createMaterialEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").insert(pn(e)).select().single();if(r)throw r;return t}return null},async updateMaterialEquipment(e,t){if(P){const{data:r,error:n}=await T.from("materials_equipment").update(pn(t)).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteMaterialEquipment(e){if(P){const{error:t}=await T.from("materials_equipment").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborCategories(e){if(P){const{data:t,error:r}=await T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async createLaborCategory(e,t,r=0){if(P){const{data:n,error:i}=await T.from("labor_categories").insert({company_id:e,name:He(t),sort_order:r}).select().single();if(i)throw i;return n}return null},async updateLaborCategory(e,t){if(P){const{data:r,error:n}=await T.from("labor_categories").update(pn(t)).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborCategory(e){if(P){const{error:t}=await T.from("labor_categories").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClasses(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async getLaborClassesWithCategories(e){if(P){const[t,r]=await Promise.all([T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name"),T.from("labor_classes").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;return{categories:t.data||[],classes:r.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(e){if(P){const t=_e();if(!t)return{categories:[],classes:[]};const{data:r,error:n}=await t.rpc("get_labor_classes_for_field",{p_company_id:e});if(n){console.error("Error loading field labor classes:",n);const[c,u]=await Promise.all([t.from("labor_categories").select("id, name").eq("company_id",e).eq("active",!0).order("name"),t.from("labor_classes").select("id, name, category_id").eq("company_id",e).eq("active",!0).order("name")]);return{categories:c.data||[],classes:u.data||[]}}const i=new Map,s=[];for(const c of r||[])c.category_id&&c.category_name&&!i.has(c.category_id)&&i.set(c.category_id,{id:c.category_id,name:c.category_name}),s.push({id:c.id,name:c.name,category_id:c.category_id});return{categories:Array.from(i.values()),classes:s}}return{categories:[],classes:[]}},async createLaborClass(e,t,r,n=0){if(P){const{data:i,error:s}=await T.from("labor_classes").insert({company_id:e,category_id:t,name:He(r),sort_order:n}).select().single();if(s)throw s;return i}return null},async updateLaborClass(e,t){if(P){const{data:r,error:n}=await T.from("labor_classes").update(pn(t)).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborClass(e){if(P){const{error:t}=await T.from("labor_classes").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_class_rates").select("*").eq("labor_class_id",e);if(r)throw r;return t||[]}return[]},async getAllLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",e).eq("active",!0);if(r)throw r;return t||[]}return[]},async saveLaborClassRates(e,t){if(P){const r=t.map(i=>({...i,labor_class_id:e})),{error:n}=await T.from("labor_class_rates").upsert(r,{onConflict:"labor_class_id,work_type,job_type"});if(n)throw n}},async getLaborClassRate(e,t,r){if(P){const{data:n,error:i}=await T.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",e).eq("work_type",t).eq("job_type",r).single();if(i&&i.code!=="PGRST116")throw i;return n||null}return null},async getTMTickets(e){if(P){const t=performance.now(),r=_e(),i=Ay()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{const{data:s,error:c}=await r.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${i}
            )
          `).eq("project_id",e).order("created_at",{ascending:!1}),u=Math.round(performance.now()-t);if(Ye.query("getTMTickets",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s}catch(s){throw Ye.error("database",{message:s.message,operation:"getTMTickets",project_id:e}),s}}return[]},async getTMTicketsPaginated(e,{page:t=0,limit:r=25,status:n=null}={}){if(P){const i=performance.now(),s=_e(),u=Ay()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{let m=s.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${u}
            )
          `,{count:"exact"}).eq("project_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n&&(m=m.eq("status",n));const{data:h,error:g,count:p}=await m,_=Math.round(performance.now()-i);if(Ye.query("getTMTicketsPaginated",{duration:_,rows:h?.length,page:t,project_id:e}),g)throw g;return{tickets:h||[],totalCount:p||0,hasMore:(t+1)*r<(p||0),page:t,limit:r}}catch(m){throw Ye.error("database",{message:m.message,operation:"getTMTicketsPaginated",project_id:e}),m}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",e).not("ce_pco_number","is",null).neq("ce_pco_number","");if(r)throw r;const n={};let i=0,s=0;return t?.forEach(c=>{const u=c.ce_pco_number;if(n[u]||(n[u]={approved:0,pending:0,count:0}),n[u].count++,c.status==="approved"||c.status==="billed"){const m=parseFloat(c.change_order_value)||0;n[u].approved+=m,i+=m}else c.status==="pending"&&s++}),{changeOrders:n,totalApprovedValue:i,pendingCount:s}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(e,t){if(P){const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).eq("status",t).order("created_at",{ascending:!1});if(i)throw i;return n}return[]},async getCORTickets(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",e).order("work_date",{ascending:!0});if(n)throw n;return r||[]}return[]},async createTMTicket(e){if(P){if(!Un()){const i={id:en(),project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending_sync",created_by_name:e.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await QS(i),await hn(Jt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}const t=_e();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("t_and_m_tickets").insert({project_id:e.project_id,work_date:e.work_date,ce_pco_number:He(e.ce_pco_number)||null,assigned_cor_id:e.assigned_cor_id||null,notes:He(e.notes),photos:e.photos||[],status:"pending",created_by_name:He(e.created_by_name)||"Field User"}).select().single();if(n){if(n.message?.includes("fetch")||n.message?.includes("network")){const i={id:en(),...e,status:"pending_sync",_offline:!0};return await QS(i),await hn(Jt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}throw n}return r}return null},async addTMWorkers(e,t){if(P){const r=t.map(s=>({ticket_id:e,name:He(s.name),hours:s.hours,overtime_hours:s.overtime_hours||0,time_started:s.time_started||null,time_ended:s.time_ended||null,role:He(s.role)||"Laborer"})),n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_workers").insert(r);if(i)throw i}},async addTMItems(e,t){if(P){const r=t.map(s=>({ticket_id:e,material_equipment_id:s.material_equipment_id||null,custom_name:He(s.custom_name)||null,custom_category:He(s.custom_category)||null,quantity:s.quantity})),n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_items").insert(r);if(i)throw i}},async getPreviousTicketCrew(e,t){if(!P)return null;const r=_e();if(!r)return null;const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",e).lt("work_date",t).order("work_date",{ascending:!1}).limit(1).maybeSingle();if(i||!n)return null;const s=n.t_and_m_workers||[],c=s.some(p=>p.labor_class_id),u={};c&&s.forEach(p=>{p.labor_class_id&&(u[p.labor_class_id]||(u[p.labor_class_id]=[]),u[p.labor_class_id].push({name:p.name,hours:p.hours?.toString()||"",overtimeHours:p.overtime_hours?.toString()||"",timeStarted:p.time_started||"",timeEnded:p.time_ended||""}))});const m=s.filter(p=>["Foreman","General Foreman","Superintendent"].includes(p.role)).map(p=>({name:p.name,hours:p.hours?.toString()||"",overtimeHours:p.overtime_hours?.toString()||"",timeStarted:p.time_started||"",timeEnded:p.time_ended||"",role:p.role})),h=s.filter(p=>p.role==="Operator").map(p=>({name:p.name,hours:p.hours?.toString()||"",overtimeHours:p.overtime_hours?.toString()||"",timeStarted:p.time_started||"",timeEnded:p.time_ended||""})),g=s.filter(p=>p.role==="Laborer").map(p=>({name:p.name,hours:p.hours?.toString()||"",overtimeHours:p.overtime_hours?.toString()||"",timeStarted:p.time_started||"",timeEnded:p.time_ended||""}));return{workDate:n.work_date,supervision:m.length>0?m:null,operators:h.length>0?h:null,laborers:g.length>0?g:null,dynamicWorkers:Object.keys(u).length>0?u:null,totalWorkers:s.length}},async updateTMTicketStatus(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({status:t}).eq("id",e).select().single();if(i)throw i;return n}return null},async approveTMTicket(e,t,r,n=null){if(P){const i={status:"approved",approved_by_user_id:t,approved_by_name:He(r),approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};n!==null&&(i.change_order_value=parseFloat(n)||0);const s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(u)throw u;return c}return null},async rejectTMTicket(e,t,r,n=""){if(P){const i=_e();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:t,rejected_by_name:He(r),rejected_at:new Date().toISOString(),rejection_reason:He(n),approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",e).select().single();if(c)throw c;return s}return null},canApproveTickets(e){return["owner","admin","manager"].includes(e)},async updateTMTicketPhotos(e,t,r=null){if(P){const n=_e();if(!n)throw new Error("Database client not available");const i={photos:t};r&&(i.photo_locations=r);const{data:s,error:c}=await n.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(c)throw c;return s}return null},async saveTMClientSignature(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({client_signature_data:t.signature,client_signature_name:He(t.signerName),client_signature_title:He(t.signerTitle),client_signature_company:He(t.signerCompany),client_signature_date:t.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteTMTicket(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("t_and_m_tickets").delete().eq("id",e);if(r)throw r}},async isTicketEditable(e){if(!e?.assigned_cor_id)return{editable:!0};if(P)try{const{data:t,error:r}=await T.from("change_orders").select("id, status, cor_number").eq("id",e.assigned_cor_id).single();if(r||!t)return{editable:!0};const i=["draft","pending_approval"].includes(t.status);return{editable:i,lockedBy:i?null:t,reason:i?null:`This ticket is linked to ${t.cor_number} which has been ${t.status==="approved"?"approved":t.status}`}}catch(t){return console.error("Error checking ticket editability:",t),{editable:!0}}return{editable:!0}},async getCompanyByCode(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").ilike("code",e.trim()).single();return r?(console.error("[Company Lookup] Error:",{message:r.message,code:r.code,details:r.details,hint:r.hint}),null):t}return null},async getCompany(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").eq("id",e).single();if(r)throw r;return t}return null},async getUserCompanies(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching user companies:",r),[]):t.map(n=>({id:n.companies.id,name:n.companies.name,code:n.companies.code,access_level:n.access_level}))}return[]},async getUserPendingMemberships(e){if(P){const{count:t,error:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("status","pending");return r?(console.error("Error fetching pending memberships:",r),0):t||0}return 0},async getCompanyMemberships(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching company memberships:",r),[]):t||[]}return[]},async approveMembership(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:t}).eq("id",e);if(r)throw r}},async approveMembershipWithRole(e,t,r="member"){if(P){const{error:n}=await T.rpc("approve_membership_with_role",{membership_id:e,approved_by_user:t,new_access_level:r});if(n)throw n}},async rejectMembership(e){if(P){const{error:t}=await T.from("user_companies").delete().eq("id",e);if(t)throw t}},async removeMember(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:t}).eq("id",e);if(r)throw r}},async getProjectTeam(e){if(P){const{data:t,error:r}=await T.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",e).order("assigned_at",{ascending:!0});return r?(console.error("Error fetching project team:",r),[]):t||[]}return[]},async getCompanyMembers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching company members:",r),[]):t||[]}return[]},async addProjectMember(e,t,r,n){if(P){const{data:i,error:s}=await T.from("project_users").insert({project_id:e,user_id:t,project_role:r,assigned_by:n}).select().single();if(s)throw s;return i}return null},async updateProjectMemberRole(e,t,r){if(P){const{error:n}=await T.from("project_users").update({project_role:r}).eq("project_id",e).eq("user_id",t);if(n)throw n}},async removeProjectMember(e,t){if(P){const{error:r}=await T.from("project_users").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}},async updateMemberAccessLevel(e,t){if(P){const{error:r}=await T.from("user_companies").update({access_level:t}).eq("id",e);if(r)throw r}},async updateMemberCompanyRole(e,t){if(P){const{error:r}=await T.from("user_companies").update({company_role:t}).eq("id",e);if(r)throw r}},async repairLegacyUser(e,t,r="member"){if(!P||!e||!t)return!1;try{const{data:n,error:i}=await T.rpc("repair_legacy_user",{p_user_id:e,p_company_id:t,p_role:r});return i?(console.error("RPC repair_legacy_user failed:",i),!1):n===!0}catch(n){return console.error("Error repairing legacy user:",n),!1}},async isLegacyUser(e){if(!P)return!1;try{const{data:t}=await T.from("users").select("company_id, role").eq("id",e).single();if(!t?.company_id)return!1;const{count:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e);return r===0}catch(t){return console.error("Error checking legacy user:",t),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(e,t){if(!P)return[];const r=_e();if(!r)return[];const n=performance.now();try{const{data:i,error:s}=await r.from("disposal_loads").select("*").eq("project_id",e).eq("work_date",t).order("created_at",{ascending:!1}),c=Math.round(performance.now()-n);if(Ye.query("getDisposalLoads",{duration:c,rows:i?.length,project_id:e}),s)throw s;return i||[]}catch(i){throw Ye.error("database",{message:i.message,operation:"getDisposalLoads",project_id:e}),i}},async getDisposalLoadsHistory(e,t=14){if(!P)return[];const r=_e();if(!r)return[];const n=performance.now();try{const i=new Date,s=new Date;s.setDate(s.getDate()-t);const{data:c,error:u}=await r.from("disposal_loads").select("*").eq("project_id",e).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",i.toISOString().split("T")[0]).order("work_date",{ascending:!1}),m=Math.round(performance.now()-n);if(Ye.query("getDisposalLoadsHistory",{duration:m,rows:c?.length,project_id:e}),u)throw u;return(c||[]).map(h=>({...h,load_date:h.work_date}))}catch(i){throw Ye.error("database",{message:i.message,operation:"getDisposalLoadsHistory",project_id:e}),i}},async addDisposalLoad(e,t,r,n,i,s=null){if(!P)return null;const c=_e();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.from("disposal_loads").insert({project_id:e,user_id:t,work_date:r,load_type:He(n),load_count:i,notes:He(s)}).select().single();if(m)throw Ye.error("database",{message:m.message,operation:"addDisposalLoad",project_id:e}),m;return u},async updateDisposalLoad(e,t,r,n=null){if(!P)return null;const i=_e();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("disposal_loads").update({load_type:He(t),load_count:r,notes:He(n)}).eq("id",e).select().single();if(c)throw Ye.error("database",{message:c.message,operation:"updateDisposalLoad"}),c;return s},async deleteDisposalLoad(e){if(!P)return!1;const t=_e();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("disposal_loads").delete().eq("id",e);if(r)throw Ye.error("database",{message:r.message,operation:"deleteDisposalLoad"}),r;return!0},async getDisposalSummary(e,t=null,r=null){if(!P)return[];const n=_e();if(!n)return[];const i=performance.now();try{const{data:s,error:c}=await n.rpc("get_disposal_summary",{p_project_id:e,p_start_date:t,p_end_date:r}),u=Math.round(performance.now()-i);if(Ye.query("getDisposalSummary",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s||[]}catch(s){return Ye.error("database",{message:s.message,operation:"getDisposalSummary",project_id:e}),this.getDisposalSummaryFallback(e,t,r)}},async getDisposalSummaryFallback(e,t,r){let i=(_e()||T).from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e);t&&(i=i.gte("work_date",t)),r&&(i=i.lte("work_date",r));const{data:s,error:c}=await i;if(c)throw c;const u={};return s?.forEach(m=>{u[m.load_type]||(u[m.load_type]={load_type:m.load_type,total_loads:0,days:new Set}),u[m.load_type].total_loads+=m.load_count,u[m.load_type].days.add(m.work_date)}),Object.values(u).map(m=>({load_type:m.load_type,total_loads:m.total_loads,days_with_activity:m.days.size}))},async getWeeklyDisposalSummary(e,t=4){if(!P)return[];const r=_e();if(!r)return[];const n=new Date,i=new Date;i.setDate(i.getDate()-t*7);const{data:s,error:c}=await r.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e).gte("work_date",i.toISOString().split("T")[0]).lte("work_date",n.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(c)throw c;const u={};return s?.forEach(m=>{const h=new Date(m.work_date),g=new Date(h);g.setDate(h.getDate()-h.getDay());const p=g.toISOString().split("T")[0];u[p]||(u[p]={week:p,concrete:0,trash:0,metals:0,hazardous_waste:0}),u[p][m.load_type]+=m.load_count}),Object.values(u).sort((m,h)=>m.week.localeCompare(h.week))},async uploadPhoto(e,t,r,n){if(!P)return null;const i=_e();if(!i)throw new Error("Database client not available");const s=performance.now(),c=n.size||0,u=Date.now(),m=new Uint8Array(6);crypto.getRandomValues(m);const h=Array.from(m,x=>x.toString(36)).join(""),g=n.name?.split(".").pop()||"jpg",p=`${u}-${h}.${g}`,_=`${e}/${t}/${r}/${p}`;try{const{data:x,error:w}=await i.storage.from("tm-photos").upload(_,n,{cacheControl:"3600",upsert:!1}),j=Math.round(performance.now()-s);if(Ye.storage("upload",{company_id:e,project_id:t,size:c,duration:j,success:!w}),w)throw w;return _}catch(x){throw Ye.error("storage",{message:x.message,operation:"uploadPhoto",company_id:e,project_id:t}),x}},async uploadPhotoBase64(e,t,r,n,i="photo.jpg"){if(!P)return null;const s=_e();if(!s)throw new Error("Database client not available");const u=await(await fetch(n)).blob(),m=Date.now(),h=new Uint8Array(6);crypto.getRandomValues(h);const g=Array.from(h,S=>S.toString(36)).join(""),p=i.split(".").pop()||"jpg",_=`${m}-${g}.${p}`,x=`${e}/${t}/${r}/${_}`,{data:w,error:j}=await s.storage.from("tm-photos").upload(x,u,{cacheControl:"3600",upsert:!1,contentType:u.type});if(j)throw j;return x},async resolvePhotoUrl(e){if(!e||!P)return e;let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return e;t=decodeURIComponent(n[1])}catch{return e}else t=e;try{const r=Ki(),{data:n,error:i}=await r.storage.from("tm-photos").createSignedUrl(t,3600);return i||!n?.signedUrl?null:n.signedUrl}catch{return null}},async resolvePhotoUrls(e){if(!P||!e?.length)return e||[];const t=[],r=[];for(let n=0;n<e.length;n++){const i=e[n];if(!i)continue;let s;if(i.startsWith("http"))try{const u=new URL(i).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);u&&(s=decodeURIComponent(u[1]))}catch{}else s=i;s&&(t.push(s),r.push(n))}if(!t.length)return e;try{const n=Ki(),{data:i,error:s}=await n.storage.from("tm-photos").createSignedUrls(t,3600);if(s||!i)return e;const c=[...e];return i.forEach((u,m)=>{c[r[m]]=u.signedUrl||null}),c}catch{return e}},async deletePhoto(e){if(!P||!e)return;let t;if(e.startsWith("http"))try{const i=new URL(e).pathname.match(/\/tm-photos\/(.+)$/);if(!i)return;t=i[1]}catch{return}else t=e;const{error:r}=await T.storage.from("tm-photos").remove([t]);if(r)throw r},async verifyPhotoAccessible(e){if(!P||!e)return{accessible:!1,error:"Invalid input"};let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return{accessible:!1,error:"Not a tm-photos URL"};t=decodeURIComponent(n[1])}catch{return{accessible:!1,error:"Invalid URL"}}else t=e;try{const{data:r,error:n}=await T.storage.from("tm-photos").createSignedUrl(t,60);return n?{accessible:!1,error:n.message}:{accessible:!!r?.signedUrl,status:200}}catch(r){return{accessible:!1,error:r.message||"Verification failed"}}},async verifyTicketPhotos(e){if(!P)return{verified:!1,issues:[]};try{const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("id",e).single();if(r)throw r;if(!t?.photos||t.photos.length===0)return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",e),{verified:!0,status:"empty",issues:[]};const n=[];for(const s of t.photos){const c=await this.verifyPhotoAccessible(s);c.accessible||n.push({url:s,error:c.error})}const i=n.length===0?"verified":"issues";return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:i,photos_issue_count:n.length}).eq("id",e),{verified:n.length===0,status:i,totalPhotos:t.photos.length,issues:n}}catch(t){return console.error("Error verifying ticket photos:",t),{verified:!1,error:t.message,issues:[]}}},async queuePhotoUpload(e,t,r,n){if(!P)return null;const{data:i,error:s}=await T.from("photo_upload_queue").insert({ticket_id:e,temp_id:t,file_name:r,file_size_bytes:n,status:"pending"}).select().single();return s?(console.error("Error queueing photo upload:",s),null):i},async confirmQueuedUpload(e,t,r){if(!P)return!1;const{data:n,error:i}=await T.rpc("confirm_photo_upload",{p_queue_id:e,p_uploaded_url:t,p_storage_path:r});return i?(console.error("Error confirming photo upload:",i),!1):n===!0},async markQueuedUploadFailed(e,t){if(!P)return!1;const{data:r,error:n}=await T.rpc("mark_photo_upload_failed",{p_queue_id:e,p_error:t});return n?(console.error("Error marking photo upload failed:",n),!1):r===!0},async getPendingPhotoUploads(e){if(!P)return[];const{data:t,error:r}=await T.rpc("get_pending_photo_uploads",{p_ticket_id:e});return r?(console.error("Error getting pending photo uploads:",r),[]):t||[]},async logPhotoOperation(e,t,r={}){if(P)try{await T.from("photo_audit_log").insert({ticket_id:e,cor_id:r.corId||null,operation:t,photo_url:r.photoUrl||null,storage_path:r.storagePath||null,details:r.metadata?r.metadata:null,error_message:r.error||null,triggered_by:r.triggeredBy||"system"})}catch(n){console.error("Error logging photo operation:",n)}},async saveExportSnapshot(e,t,r={}){if(!P)return null;const{exportType:n="pdf",exportReason:i=null,clientEmail:s=null,clientName:c=null}=r;try{const{data:u,error:m}=await T.from("cor_export_snapshots").insert({cor_id:e,export_type:n,export_reason:He(i),cor_data:t.cor_data,tickets_data:t.tickets_data,photos_manifest:t.photos_manifest,totals_snapshot:t.totals_snapshot,checksum:t.checksum,client_email:He(s),client_name:He(c)}).select().single();if(m)throw m;return u}catch(u){return console.error("Error saving export snapshot:",u),null}},async getExportSnapshots(e){if(!P)return[];const{data:t,error:r}=await T.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",e).order("exported_at",{ascending:!1});return r?(console.error("Error fetching export snapshots:",r),[]):t||[]},async getExportSnapshot(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_snapshots").select("*").eq("id",e).single();return r?(console.error("Error fetching export snapshot:",r),null):t},async requestCORExport(e,t,r={}){if(!P)return null;try{const n=await T.auth.getUser(),{data:i,error:s}=await T.rpc("request_cor_export",{p_cor_id:e,p_idempotency_key:t,p_options:r,p_requested_by:n?.data?.user?.id||null});if(s)throw s;return i?.[0]||null}catch(n){throw Ye.error("database",{message:n.message,operation:"requestCORExport",extra:{corId:e}}),n}},async getExportJob(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_jobs").select("*").eq("id",e).single();return r?(console.error("Error fetching export job:",r),null):t},async getExportJobs(e,t=10){if(!P)return[];const{data:r,error:n}=await T.from("cor_export_jobs").select("*").eq("cor_id",e).order("created_at",{ascending:!1}).limit(t);return n?(console.error("Error fetching export jobs:",n),[]):r||[]},async updateExportJobStatus(e,t,r={}){if(!P)return null;try{const{data:n,error:i}=await T.rpc("update_export_job_status",{p_job_id:e,p_status:t,p_snapshot_id:r.snapshotId||null,p_pdf_url:r.pdfUrl||null,p_error:r.error||null,p_error_details:r.errorDetails||null,p_metrics:r.metrics||null});if(i)throw i;return n}catch(n){throw Ye.error("database",{message:n.message,operation:"updateExportJobStatus",extra:{jobId:e,status:t}}),n}},async getCurrentCORSnapshot(e){if(!P)return null;const{data:t}=await T.from("change_orders").select("version, last_snapshot_version").eq("id",e).single();if(!t||t.version!==t.last_snapshot_version)return null;const{data:r}=await T.from("cor_export_snapshots").select("*").eq("cor_id",e).eq("is_current",!0).single();return r||null},async saveCORSnapshot(e,t){if(!P)return null;try{await T.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",e.corId);const r=await T.auth.getUser(),{data:n,error:i}=await T.from("cor_export_snapshots").insert({id:e.snapshotId,cor_id:e.corId,job_id:t,cor_version:e.corVersion,cor_data:e.corData,tickets_data:e.ticketsData,photos_manifest:e.photoManifest,totals_snapshot:e.totals,checksum:e.checksum,is_current:!0,exported_by:r?.data?.user?.id||null}).select().single();if(i)throw i;return await T.from("change_orders").update({last_snapshot_version:e.corVersion}).eq("id",e.corId),n}catch(r){throw Ye.error("database",{message:r.message,operation:"saveCORSnapshot",extra:{corId:e.corId}}),r}},async updateCORAggregatedStats(e){if(P)try{await T.rpc("update_cor_aggregated_stats",{p_cor_id:e})}catch(t){console.error("Error updating COR aggregated stats:",t)}},async getCrewCheckin(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),{data:i,error:s}=await n.from("crew_checkins").select("*").eq("project_id",e).eq("check_in_date",r).maybeSingle();return s&&console.error("Error fetching crew checkin:",s),i},async saveCrewCheckin(e,t,r=null,n=null){if(!P)return null;const i=n||new Date().toISOString().split("T")[0];if(!Un()){const m={id:en(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Td(m),await hn(Jt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const s=_e();if(!s){const m={id:en(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Td(m),await hn(Jt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const{data:c,error:u}=await s.from("crew_checkins").upsert({project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:en(),project_id:e,check_in_date:i,workers:t,_offline:!0};return await Td(m),await hn(Jt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}throw console.error("Error saving crew checkin:",u),u}return c&&Td(c).catch(m=>console.error("Failed to cache checkin:",m)),c},async addCrewMember(e,t,r=null){if(!P)return null;const n=await this.getCrewCheckin(e),i=n?.workers||[];return i.find(s=>s.name.toLowerCase()===t.name.toLowerCase())?n:(i.push(t),await this.saveCrewCheckin(e,i,r))},async removeCrewMember(e,t){if(!P)return null;const r=await this.getCrewCheckin(e);if(!r)return null;const n=r.workers.filter(i=>i.name.toLowerCase()!==t.toLowerCase());return await this.saveCrewCheckin(e,n,r.created_by)},async getCrewCheckinHistory(e,t=30){if(!P)return[];const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("crew_checkins").select("*").eq("project_id",e).order("check_in_date",{ascending:!1}).limit(t);return i?(console.error("Error fetching crew history:",i),[]):n||[]},async getRecentWorkers(e,t=30){if(!P)return[];const r=await this.getCrewCheckinHistory(e,t),n=new Map;return r.forEach(i=>{(i.workers||[]).forEach(s=>{const c=s.name.toLowerCase();n.has(c)||n.set(c,{name:s.name,role:s.role,labor_class_id:s.labor_class_id||null,lastSeen:i.check_in_date})})}),Array.from(n.values()).sort((i,s)=>i.name.localeCompare(s.name))},async getLaborRates(e,t=null,r=null){if(!P)return[];let n=T.from("labor_rates").select("*").eq("company_id",e);t&&(n=n.eq("work_type",t)),r&&(n=n.eq("job_type",r));const{data:i,error:s}=await n;return s?(console.error("Error fetching labor rates:",s),[]):i||[]},async calculateManDayCosts(e,t,r,n){if(!P)return{totalCost:0,totalManDays:0,breakdown:[]};const i=await this.getCrewCheckinHistory(e,365),s=await this.getLaborRates(t,r,n),c={};s.forEach(p=>{c[p.role.toLowerCase()]=parseFloat(p.regular_rate)||0});let u=0,m=0;const h={},g=[];return i.forEach(p=>{const _=p.workers||[];let x=0;const w={};_.forEach(j=>{const S=(j.role||"laborer").toLowerCase(),O=c[S]||0;w[S]||(w[S]={count:0,cost:0}),w[S].count++,w[S].cost+=O,x+=O,h[S]||(h[S]={count:0,cost:0,rate:O}),h[S].count++,h[S].cost+=O}),u+=x,m+=_.length,g.push({date:p.check_in_date,workers:_.length,cost:x,breakdown:w})}),{totalCost:u,totalManDays:m,byRole:h,byDate:g,daysWorked:i.length}},async getDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),{data:i,error:s}=await n.from("daily_reports").select("*").eq("project_id",e).eq("report_date",r).maybeSingle();return s&&console.error("Error fetching daily report:",s),i},async compileDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),[i,s,c]=await Promise.all([this.getCrewCheckin(e,r),n.from("areas").select("*").eq("project_id",e),n.from("t_and_m_tickets").select("*").eq("project_id",e).eq("work_date",r)]),u=s?.data||[],m=c?.data||[],h=u.filter(p=>p.status==="done"&&p.completed_at?.startsWith(r)),g=m.reduce((p,_)=>p+(_.photos?.length||0),0);return{crew_count:i?.workers?.length||0,crew_list:i?.workers||[],tasks_completed:h.length,tasks_total:u.length,completed_tasks:h.map(p=>({name:p.name,group:p.group_name})),tm_tickets_count:m.length,photos_count:g}},async saveDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!Un()){const u={id:en(),project_id:e,report_date:n,...t,updated_at:new Date().toISOString(),_offline:!0};return await qs(u),u}const i=_e(),{data:s,error:c}=await i.from("daily_reports").upsert({project_id:e,report_date:n,...t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u={id:en(),project_id:e,report_date:n,...t,_offline:!0};return await qs(u),u}throw console.error("Error saving daily report:",c),c}return s&&qs(s).catch(u=>console.error("Failed to cache report:",u)),s},async submitDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!Un()){const m=await Fz(e,n),h={id:en(),project_id:e,report_date:n,...m||{},status:"pending_sync",submitted_by:t,submitted_at:new Date().toISOString(),_offline:!0};return await qs(h),await hn(Jt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:m||{},submittedBy:t}),h}const i=await this.compileDailyReport(e,n),s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("daily_reports").upsert({project_id:e,report_date:n,...i,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:en(),project_id:e,report_date:n,...i,status:"pending_sync",submitted_by:t,_offline:!0};return await qs(m),await hn(Jt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:i,submittedBy:t}),m}throw console.error("Error submitting daily report:",u),u}return c&&qs(c).catch(m=>console.error("Failed to cache report:",m)),c},async getDailyReports(e,t=30){if(!P)return[];const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("daily_reports").select("*").eq("project_id",e).order("report_date",{ascending:!1}).limit(t);return i?(console.error("Error fetching daily reports:",i),[]):n||[]},async sendMessage(e,t,r,n,i=null,s=null,c="general",u=null){if(!P)return null;if(!Un()){const g={id:en(),project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u,created_at:new Date().toISOString(),_offline:!0};return await JS(g),await hn(Jt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),g}const{data:m,error:h}=await T.from("messages").insert({project_id:e,sender_type:r,sender_name:He(n),sender_user_id:i,message:He(t),photo_url:s,message_type:c,parent_message_id:u}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const g={id:en(),project_id:e,sender_type:r,sender_name:n,message:t,created_at:new Date().toISOString(),_offline:!0};return await JS(g),await hn(Jt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),g}throw console.error("Error sending message:",h),h}return m},async getMessages(e,t=50){if(!P)return[];const r=_e(),{data:n,error:i}=await r.from("messages").select("*").eq("project_id",e).order("created_at",{ascending:!1}).limit(t);return i?[]:n||[]},async getUnreadCount(e,t){if(!P)return 0;const r=_e(),n=t==="field"?"office":"field",{count:i,error:s}=await r.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1);return s?0:i||0},async markMessagesRead(e,t){if(!P)return;const r=_e(),n=t==="field"?"office":"field";await r.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1)},async createMaterialRequest(e,t,r,n=null,i="normal",s=null){if(!P)return null;if(!Un()){const m={id:en(),project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await hn(Jt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}const{data:c,error:u}=await T.from("material_requests").insert({project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:He(s)}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:en(),project_id:e,items:t,requested_by:r,status:"pending_sync",_offline:!0};return await hn(Jt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}throw console.error("Error creating material request:",u),u}return c},async getMaterialRequests(e,t=null){if(!P)return[];let r=T.from("material_requests").select("*").eq("project_id",e).order("created_at",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching material requests:",i),[]):n||[]},async getPendingRequestsCount(e){if(!P)return 0;const{count:t,error:r}=await T.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("status","pending");return r?0:t||0},async updateMaterialRequest(e,t,r,n=null,i=null){if(!P)return null;const s={status:t,responded_by:r,responded_at:new Date().toISOString(),response_notes:He(n),updated_at:new Date().toISOString()};i&&(s.expected_delivery=i),t==="delivered"&&(s.delivered_at=new Date().toISOString());const{data:c,error:u}=await T.from("material_requests").update(s).eq("id",e).select().single();if(u)throw console.error("Error updating material request:",u),u;return c},generateShareToken(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=new Uint8Array(12);return crypto.getRandomValues(t),Array.from(t,r=>e[r%e.length]).join("")},async createProjectShare(e,t,r,n=null){if(!P){const m=Oe();m.projectShares||(m.projectShares=[]);const h={id:crypto.randomUUID(),project_id:e,share_token:this.generateShareToken(),created_by:t,expires_at:n,is_active:!0,permissions:r,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return m.projectShares.push(h),Ve(m),h}const{data:i,error:s}=await T.rpc("generate_share_token");if(s)throw console.error("Error generating share token:",s),s;const{data:c,error:u}=await T.from("project_shares").insert({project_id:e,share_token:i,created_by:t,expires_at:n,permissions:r}).select().single();if(u)throw console.error("Error creating project share:",u),u;return c},async getShareByToken(e){if(!P){const n=Oe();if(!n.projectShares)return null;const i=n.projectShares.find(s=>s.share_token===e&&s.is_active&&(!s.expires_at||new Date(s.expires_at)>new Date));return i&&(i.view_count++,i.last_viewed_at=new Date().toISOString(),Ve(n)),i}const{data:t,error:r}=await T.from("project_shares").select("*, projects(*)").eq("share_token",e).eq("is_active",!0).single();return r?(console.error("Error fetching share by token:",r),null):t.expires_at&&new Date(t.expires_at)<new Date?null:(await T.rpc("increment_share_view_count",{token:e}),t)},async getProjectShares(e){if(!P){const n=Oe();return n.projectShares?n.projectShares.filter(i=>i.project_id===e):[]}const{data:t,error:r}=await T.from("project_shares").select("*, users(name, email)").eq("project_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching project shares:",r),[]):t||[]},async updateProjectShare(e,t){if(!P){const i=Oe();if(!i.projectShares)return null;const s=i.projectShares.findIndex(c=>c.id===e);return s===-1?null:(i.projectShares[s]={...i.projectShares[s],...t,updated_at:new Date().toISOString()},Ve(i),i.projectShares[s])}const{data:r,error:n}=await T.from("project_shares").update(pn(t)).eq("id",e).select().single();if(n)throw console.error("Error updating project share:",n),n;return r},async revokeProjectShare(e){return this.updateProjectShare(e,{is_active:!1})},async deleteProjectShare(e){if(!P){const r=Oe();if(!r.projectShares)return;r.projectShares=r.projectShares.filter(n=>n.id!==e),Ve(r);return}const{error:t}=await T.from("project_shares").delete().eq("id",e);if(t)throw console.error("Error deleting project share:",t),t},async getPublicProjectData(e){const t=await this.getShareByToken(e);if(!t)return null;const r=t.project_id||t.projects?.id;if(!P){const s=Oe(),c=s.projects.find(p=>p.id===r);if(!c)return null;const u=s.areas.filter(p=>p.project_id===r),m=u.reduce((p,_)=>p+parseFloat(_.weight||0),0),h=u.filter(p=>p.status==="done").reduce((p,_)=>p+parseFloat(_.weight||0),0),g=m>0?Math.round(h/m*100):0;return{share:t,project:c,progress:g,areas:t.permissions.progress?u:[],photos:[],dailyReports:[],tmTickets:[]}}const n=t.projects||await this.getProject(r);if(!n)return null;const i={share:t,project:n,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(t.permissions.progress){i.areas=await this.getAreas(r);const s=i.areas.reduce((u,m)=>u+parseFloat(m.weight||0),0),c=i.areas.filter(u=>u.status==="done").reduce((u,m)=>u+parseFloat(m.weight||0),0);i.progress=s>0?Math.round(c/s*100):0}if(t.permissions.photos){const{data:s}=await T.from("t_and_m_tickets").select("photos, work_date").eq("project_id",r).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);i.photos=s?.flatMap(c=>(c.photos||[]).map(u=>({url:u,date:c.work_date})))||[]}if(t.permissions.daily_reports){const{data:s}=await T.from("daily_reports").select("*").eq("project_id",r).order("report_date",{ascending:!1}).limit(10);i.dailyReports=s||[]}return t.permissions.tm_tickets&&(i.tmTickets=await this.getTMTickets(r)),i},async createInjuryReport(e){if(!P){const n=Oe();n.injuryReports||(n.injuryReports=[]);const i={id:crypto.randomUUID(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return n.injuryReports.push(i),Ve(n),i}const{data:t,error:r}=await T.from("injury_reports").insert(pn(e)).select().single();if(r)throw console.error("Error creating injury report:",r),r;return t},async getInjuryReports(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.filter(i=>i.project_id===e).sort((i,s)=>new Date(s.incident_date)-new Date(i.incident_date)):[]}const{data:t,error:r}=await T.from("injury_reports").select("*").eq("project_id",e).order("incident_date",{ascending:!1});return r?(console.error("Error fetching injury reports:",r),[]):t||[]},async getCompanyInjuryReports(e,t=null){if(!P){const s=Oe();if(!s.injuryReports)return[];let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>u.status===t)),c.sort((u,m)=>new Date(m.incident_date)-new Date(u.incident_date))}let r=T.from("injury_reports").select("*, projects(name)").eq("company_id",e).order("incident_date",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching company injury reports:",i),[]):n||[]},async getInjuryReport(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.find(i=>i.id===e):null}const{data:t,error:r}=await T.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",e).single();return r?(console.error("Error fetching injury report:",r),null):t},async updateInjuryReport(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(c=>c.id===e);return s===-1?null:(i.injuryReports[s]={...i.injuryReports[s],...t,updated_at:new Date().toISOString()},Ve(i),i.injuryReports[s])}const{data:r,error:n}=await T.from("injury_reports").update(pn(t)).eq("id",e).select().single();if(n)throw console.error("Error updating injury report:",n),n;return r},async closeInjuryReport(e,t){return this.updateInjuryReport(e,{status:"closed",closed_at:new Date().toISOString(),closed_by:t})},async deleteInjuryReport(e){if(!P){const r=Oe();if(!r.injuryReports)return;r.injuryReports=r.injuryReports.filter(n=>n.id!==e),Ve(r);return}const{error:t}=await T.from("injury_reports").delete().eq("id",e);if(t)throw console.error("Error deleting injury report:",t),t},async getInjuryStatistics(e,t=null,r=null){if(!P){const s=Oe();if(!s.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>new Date(u.incident_date)>=new Date(t))),r&&(c=c.filter(u=>new Date(u.incident_date)<=new Date(r))),{total_incidents:c.length,minor_injuries:c.filter(u=>u.injury_type==="minor").length,serious_injuries:c.filter(u=>u.injury_type==="serious").length,critical_injuries:c.filter(u=>u.injury_type==="critical").length,near_misses:c.filter(u=>u.injury_type==="near_miss").length,osha_recordable:c.filter(u=>u.osha_recordable).length,total_days_away:c.reduce((u,m)=>u+(m.days_away_from_work||0),0),total_restricted_days:c.reduce((u,m)=>u+(m.restricted_work_days||0),0)}}const{data:n,error:i}=await T.rpc("get_injury_statistics",{comp_id:e,start_date:t,end_date:r});return i?(console.error("Error fetching injury statistics:",i),null):n[0]||null},async addWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.push(t),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ve(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.push(t),this.updateInjuryReport(e,{witnesses:n})},async removeWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.splice(t,1),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ve(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.splice(t,1),this.updateInjuryReport(e,{witnesses:n})},async getCompanyUsers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",e);return r?(console.error("Error fetching company users:",r),[]):t?.map(n=>({id:n.user_id,name:n.users?.name||n.users?.email,email:n.users?.email,role:n.role}))||[]}return[]},async getProjectNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",e);return n?(console.error("Error fetching notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.project_id===e):[]},async getUserNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",e);return n?(console.error("Error fetching user notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.user_id===e):[]},async setNotificationPreference(e,t,r){if(P){const{data:c,error:u}=await T.from("notification_preferences").upsert({project_id:e,user_id:t,notification_types:r,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(u)throw console.error("Error setting notification preference:",u),u;return c}const n=Oe();n.notificationPreferences||(n.notificationPreferences=[]);const i=n.notificationPreferences.findIndex(c=>c.project_id===e&&c.user_id===t),s={id:i>=0?n.notificationPreferences[i].id:crypto.randomUUID(),project_id:e,user_id:t,notification_types:r,created_at:i>=0?n.notificationPreferences[i].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i>=0?n.notificationPreferences[i]=s:n.notificationPreferences.push(s),Ve(n),s},async removeNotificationPreference(e,t){if(P){const{error:n}=await T.from("notification_preferences").delete().eq("project_id",e).eq("user_id",t);if(n)throw console.error("Error removing notification preference:",n),n;return!0}const r=Oe();return r.notificationPreferences&&(r.notificationPreferences=r.notificationPreferences.filter(n=>!(n.project_id===e&&n.user_id===t)),Ve(r)),!0},async setProjectNotificationPreferences(e,t){const r=[];for(const n of t)if(n.notificationTypes&&n.notificationTypes.length>0){const i=await this.setNotificationPreference(e,n.userId,n.notificationTypes);r.push(i)}else await this.removeNotificationPreference(e,n.userId);return r},async getNotificationPresets(e){if(P){const{data:r,error:n}=await T.from("notification_presets").select("*").eq("company_id",e).order("name");return n?(console.error("Error fetching notification presets:",n),[]):r||[]}const t=Oe();return t.notificationPresets?t.notificationPresets.filter(r=>r.company_id===e):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:e},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:e},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:e},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:e}]},async createNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").insert({company_id:e,name:He(t),notification_types:r}).select().single();if(c)throw console.error("Error creating notification preset:",c),c;return s}const n=Oe();n.notificationPresets||(n.notificationPresets=[]);const i={id:crypto.randomUUID(),company_id:e,name:t,notification_types:r,created_at:new Date().toISOString()};return n.notificationPresets.push(i),Ve(n),i},async updateNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").update({name:He(t),notification_types:r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(c)throw console.error("Error updating notification preset:",c),c;return s}const n=Oe();if(!n.notificationPresets)return null;const i=n.notificationPresets.findIndex(s=>s.id===e);return i===-1?null:(n.notificationPresets[i]={...n.notificationPresets[i],name:t,notification_types:r,updated_at:new Date().toISOString()},Ve(n),n.notificationPresets[i])},async deleteNotificationPreset(e){if(P){const{error:r}=await T.from("notification_presets").delete().eq("id",e);if(r)throw console.error("Error deleting notification preset:",r),r;return!0}const t=Oe();return t.notificationPresets&&(t.notificationPresets=t.notificationPresets.filter(r=>r.id!==e),Ve(t)),!0},async getDumpSites(e){if(P){const{data:r,error:n}=await T.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",e).eq("active",!0).order("name");return n?(console.error("Error fetching dump sites:",n),[]):r||[]}return(Oe().dumpSites||[]).filter(r=>r.company_id===e&&r.active)},async createDumpSite(e,t,r="",n=""){if(P){const{data:c,error:u}=await T.from("dump_sites").insert({company_id:e,name:He(t),address:He(r),notes:He(n),active:!0}).select().single();if(u)throw console.error("Error creating dump site:",u),u;return c}const i=Oe();i.dumpSites||(i.dumpSites=[]);const s={id:crypto.randomUUID(),company_id:e,name:t,address:r,notes:n,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return i.dumpSites.push(s),Ve(i),s},async updateDumpSite(e,t){if(P){const{data:i,error:s}=await T.from("dump_sites").update({...pn(t),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error updating dump site:",s),s;return i}const r=Oe();if(!r.dumpSites)return null;const n=r.dumpSites.findIndex(i=>i.id===e);return n===-1?null:(r.dumpSites[n]={...r.dumpSites[n],...t},Ve(r),r.dumpSites[n])},async deleteDumpSite(e){return this.updateDumpSite(e,{active:!1})},async setDumpSiteRate(e,t,r,n="load"){if(P){const{data:u}=await T.from("dump_site_rates").select("id").eq("dump_site_id",e).eq("waste_type",t).maybeSingle();if(u){const{data:m,error:h}=await T.from("dump_site_rates").update({estimated_cost_per_load:r,unit:n}).eq("id",u.id).select().single();if(h)throw console.error("Error updating dump site rate:",h),h;return m}else{const{data:m,error:h}=await T.from("dump_site_rates").insert({dump_site_id:e,waste_type:He(t),estimated_cost_per_load:r,unit:n}).select().single();if(h)throw console.error("Error inserting dump site rate:",h),h;return m}}const i=Oe();i.dumpSiteRates||(i.dumpSiteRates=[]);const s=i.dumpSiteRates.findIndex(u=>u.dump_site_id===e&&u.waste_type===t),c={id:s>=0?i.dumpSiteRates[s].id:crypto.randomUUID(),dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n,created_at:new Date().toISOString()};return s>=0?i.dumpSiteRates[s]=c:i.dumpSiteRates.push(c),Ve(i),c},async getDumpSiteRates(e){if(P){const{data:r,error:n}=await T.from("dump_site_rates").select("*").eq("dump_site_id",e);return n?(console.error("Error fetching dump site rates:",n),[]):r||[]}return(Oe().dumpSiteRates||[]).filter(r=>r.dump_site_id===e)},async getHaulOffs(e){if(P){const{data:r,error:n}=await T.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",e).order("work_date",{ascending:!1});return n?(console.error("Error fetching haul-offs:",n),[]):r||[]}return(Oe().haulOffs||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.work_date)-new Date(r.work_date))},async createHaulOff(e,t){const r={project_id:e,dump_site_id:t.dumpSiteId,waste_type:He(t.wasteType),loads:t.loads,hauling_company:He(t.haulingCompany)||"",work_date:t.workDate,notes:He(t.notes)||"",estimated_cost:t.estimatedCost||0,created_by:t.createdBy||""};if(P){const{data:s,error:c}=await T.from("haul_offs").insert(r).select().single();if(c)throw console.error("Error creating haul-off:",c),c;return s}const n=Oe();n.haulOffs||(n.haulOffs=[]);const i={...r,id:crypto.randomUUID(),created_at:new Date().toISOString()};return n.haulOffs.push(i),Ve(n),i},async calculateHaulOffCosts(e){const t=await this.getHaulOffs(e);let r=0,n=0;const i={},s=[],c={};t.forEach(m=>{const h=parseFloat(m.estimated_cost)||0,g=parseInt(m.loads)||0;r+=h,n+=g,i[m.waste_type]||(i[m.waste_type]={loads:0,cost:0}),i[m.waste_type].loads+=g,i[m.waste_type].cost+=h,c[m.work_date]||(c[m.work_date]={date:m.work_date,loads:0,cost:0}),c[m.work_date].loads+=g,c[m.work_date].cost+=h}),Object.values(c).sort((m,h)=>new Date(h.date)-new Date(m.date)).forEach(m=>s.push(m));const u=s.length;return{totalCost:r,totalLoads:n,byWasteType:i,byDate:s,daysWithHaulOff:u,avgDailyHaulOffCost:u>0?r/u:0}},subscribeToHaulOffs(e,t){return P?T.channel(`haul_offs:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${e}`},t).subscribe():null},...Jz,async createFolder(e,t,r){const n=_e(),{data:i,error:s}=await n.from("document_folders").insert({company_id:e,project_id:t,name:He(r.name),description:He(r.description)||null,icon:r.icon||"folder",color:r.color||"blue",sort_order:r.sort_order||0,created_by:(await n.auth.getUser()).data.user?.id}).select().single();if(s)throw s;return i},async getProjectFolders(e){const t=_e(),{data:r,error:n}=await t.from("document_folders").select("*").eq("project_id",e).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(n)throw n;const i=r.map(s=>s.id);if(i.length>0){const{data:s,error:c}=await t.from("documents").select("folder_id").in("folder_id",i).is("archived_at",null).eq("is_current",!0);if(!c&&s){const u={};s.forEach(m=>{u[m.folder_id]=(u[m.folder_id]||0)+1}),r.forEach(m=>{m.document_count=u[m.id]||0})}}return r},async updateFolder(e,t){const r=_e(),{data:n,error:i}=await r.from("document_folders").update({...pn(t),updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n},async deleteFolder(e){const t=_e();await t.from("documents").update({folder_id:null}).eq("folder_id",e);const{error:r}=await t.from("document_folders").delete().eq("id",e);if(r)throw r;return!0},async reorderFolders(e,t){const r=_e(),n=t.map(({id:i,sort_order:s})=>r.from("document_folders").update({sort_order:s,updated_at:new Date().toISOString()}).eq("id",i).eq("project_id",e));return await Promise.all(n),!0},async getFolderDocuments(e,t={}){const r=_e(),{page:n=0,limit:i=25}=t;let s=r.from("documents").select("*",{count:"exact"}).eq("folder_id",e).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);const{data:c,error:u,count:m}=await s;if(u)throw u;return{documents:c||[],totalCount:m||0,hasMore:(m||0)>(n+1)*i}},async moveDocumentToFolder(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").update({folder_id:t}).eq("id",e).select().single();if(i)throw i;return n},async getUnfiledDocuments(e,t={}){const r=_e(),{page:n=0,limit:i=25}=t,{data:s,error:c,count:u}=await r.from("documents").select("*",{count:"exact"}).eq("project_id",e).is("folder_id",null).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);if(c)throw c;return{documents:s||[],totalCount:u||0,hasMore:(u||0)>(n+1)*i}},async uploadDocument(e,t,r,n={}){const i=_e(),s=Date.now(),c=250*1024*1024,{data:u}=await i.from("documents").select("file_size_bytes").eq("project_id",t).is("archived_at",null),m=u?.reduce((j,S)=>j+(S.file_size_bytes||0),0)||0;if(m+r.size>c){const j=Math.round(m/1024/1024),S=Math.round(c/1024/1024);throw new Error(`Project storage limit reached (${j}/${S} MB). Contact support to upgrade.`)}const h=Date.now(),g=new Uint8Array(6);crypto.getRandomValues(g);const p=Array.from(g,j=>j.toString(36)).join(""),_=r.name.split(".").pop()?.toLowerCase()||"bin",x=`${h}-${p}.${_}`,w=`${e}/${t}/documents/${x}`;try{const{data:j,error:S}=await i.storage.from("project-documents").upload(w,r,{cacheControl:"3600",upsert:!1});if(S)throw S;const{data:O}=i.storage.from("project-documents").getPublicUrl(w),C=O.publicUrl,A=n.category==="contracts"?"pending":"approved",{data:k,error:D}=await i.from("documents").insert({company_id:e,project_id:t,name:He(n.name)||r.name.replace(/\.[^/.]+$/,""),description:He(n.description)||null,file_name:r.name,file_size_bytes:r.size,mime_type:r.type,storage_path:w,folder_id:n.folderId||null,category:n.category||"general",tags:n.tags||[],visibility:n.visibility||"all",approval_status:A,resource_type:n.resourceType||null,resource_id:n.resourceId||null,uploaded_by:(await i.auth.getUser()).data?.user?.id}).select().single();if(D)throw D;const M=Date.now()-s;return Ye.storage("document_upload",{company_id:e,project_id:t,file_size:r.size,mime_type:r.type,duration:M,success:!0}),{...k,url:C}}catch(j){throw Ye.error("storage",{message:j.message,operation:"uploadDocument",company_id:e,project_id:t}),j}},async getProjectDocuments(e,{category:t=null,page:r=0,limit:n=25,includeArchived:i=!1}={}){let c=_e().from("documents").select("*",{count:"exact"}).eq("project_id",e).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(r*n,(r+1)*n-1);i||(c=c.is("archived_at",null)),t&&t!=="all"&&(c=c.eq("category",t));const{data:u,error:m,count:h}=await c;if(m)throw m;return{documents:u||[],totalCount:h||0,hasMore:(r+1)*n<(h||0),page:r,limit:n}},async getDocument(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("*").eq("id",e).single();if(n)throw n;return r},async getDocumentVersions(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("id, parent_document_id").eq("id",e).single();if(n)throw n;const i=r.parent_document_id||e,{data:s,error:c}=await t.from("documents").select("*").or(`id.eq.${i},parent_document_id.eq.${i}`).order("version",{ascending:!1});if(c)throw c;return s||[]},async uploadDocumentVersion(e,t,r,n,i={}){const s=_e(),{data:c,error:u}=await s.from("documents").select("*").eq("id",e).single();if(u)throw u;const{data:m}=await s.from("documents").select("version").or(`id.eq.${e},parent_document_id.eq.${e}`).order("version",{ascending:!1}).limit(1),h=(m?.[0]?.version||1)+1;await s.from("documents").update({is_current:!1}).or(`id.eq.${e},parent_document_id.eq.${e}`);const g=await this.uploadDocument(t,r,n,{name:i.name||c.name,description:i.description||c.description,category:c.category,visibility:c.visibility,tags:c.tags,resourceType:c.resource_type,resourceId:c.resource_id}),{data:p,error:_}=await s.from("documents").update({version:h,is_current:!0,parent_document_id:e}).eq("id",g.id).select().single();if(_)throw _;return await s.from("document_audit_log").insert({document_id:g.id,project_id:r,company_id:t,operation:"version_created",details:{version:h,parent_id:e},triggered_by:"user",user_id:(await s.auth.getUser()).data?.user?.id}),{...g,...p}},async updateDocument(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").update({name:He(t.name),description:He(t.description),category:t.category,visibility:t.visibility,tags:t.tags}).eq("id",e).select().single();if(i)throw i;return n},async archiveDocument(e){const t=_e(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:new Date().toISOString(),archived_by:r}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"deleted",triggered_by:"user",user_id:r}),n},async restoreDocument(e){const t=_e(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:null,archived_by:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"restored",triggered_by:"user",user_id:r}),n},async deleteDocumentPermanently(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("storage_path, company_id, project_id").eq("id",e).single();if(n)throw n;r.storage_path&&await t.storage.from("project-documents").remove([r.storage_path]);const{error:i}=await t.from("documents").delete().eq("id",e);if(i)throw i;return!0},async linkDocumentToResource(e,t,r){const n=_e(),{data:i,error:s}=await n.from("documents").update({resource_type:t,resource_id:r}).eq("id",e).select().single();if(s)throw s;return await n.from("document_audit_log").insert({document_id:e,project_id:i.project_id,company_id:i.company_id,operation:"linked",details:{resource_type:t,resource_id:r},triggered_by:"user",user_id:(await n.auth.getUser()).data?.user?.id}),i},async unlinkDocumentFromResource(e){const t=_e(),{data:r}=await t.from("documents").select("resource_type, resource_id, project_id, company_id").eq("id",e).single(),{data:n,error:i}=await t.from("documents").update({resource_type:null,resource_id:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:r.project_id,company_id:r.company_id,operation:"unlinked",details:{resource_type:r.resource_type,resource_id:r.resource_id},triggered_by:"user",user_id:(await t.auth.getUser()).data?.user?.id}),n},async getResourceDocuments(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").select("*").eq("resource_type",e).eq("resource_id",t).is("archived_at",null).order("uploaded_at",{ascending:!1});if(i)throw i;return n||[]},async approveDocument(e){const t=_e(),{data:r,error:n}=await t.rpc("approve_document",{p_document_id:e});if(n)throw n;return r},async rejectDocument(e,t){const r=_e(),{data:n,error:i}=await r.rpc("reject_document",{p_document_id:e,p_reason:t});if(i)throw i;return n},async getPendingDocuments(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("*, project:projects(name)").eq("company_id",e).eq("approval_status","pending").is("archived_at",null).order("uploaded_at",{ascending:!1});if(n)throw n;return r||[]},async searchDocuments(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").select("*").eq("project_id",e).eq("is_current",!0).is("archived_at",null).or(`name.ilike.%${t}%,description.ilike.%${t}%`).order("uploaded_at",{ascending:!1}).limit(20);if(i)throw i;return n||[]},async logDocumentAccess(e,t="downloaded"){const r=_e(),{data:n}=await r.from("documents").select("project_id, company_id").eq("id",e).single();n&&await r.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:t,triggered_by:"user",user_id:(await r.auth.getUser()).data?.user?.id})}};Yb(async e=>{if(e&&P)try{await HN(be)}catch(t){console.error("Error syncing pending actions:",t)}});const uQ=Object.freeze(Object.defineProperty({__proto__:null,auth:uf,clearFieldSession:Cy,db:be,drawRequestOps:t3,equipmentOps:e3,getConnectionStatus:Un,getFieldCompanyId:Vz,getFieldProjectId:Gz,getPendingActionCount:lf,getSupabaseClient:Ki,isFieldMode:Ay,isSupabaseConfigured:P,onConnectionChange:Yb,supabase:T,syncPendingActions:HN},Symbol.toStringTag,{value:"Module"})),KN=y.createContext(),gn={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function qd({children:e,companyId:t}){const[r,n]=y.useState(gn),[i,s]=y.useState(!0);y.useEffect(()=>{t?c(t):u()},[t]),y.useEffect(()=>{g(r)},[r]);const c=async w=>{try{if(s(!0),!P){n(gn),s(!1);return}const{data:j,error:S}=await T.from("company_branding").select("*").eq("company_id",w).single();S?(S.code==="PGRST116"?await m(w):console.error("Error loading branding:",S),n(gn)):n({...gn,...j})}catch(j){console.error("Error in loadBranding:",j),n(gn)}finally{s(!1)}},u=async()=>{try{s(!0);const w=window.location.hostname;if(w==="localhost"||w==="127.0.0.1"){n(gn),s(!1);return}if(!P){n(gn),s(!1);return}const{data:j,error:S}=await T.rpc("get_branding_by_domain",{domain_name:w});S||!j||j.length===0?n(gn):n({...gn,...j[0]})}catch(w){console.error("Error loading branding by domain:",w),n(gn)}finally{s(!1)}},m=async w=>{try{const{data:j,error:S}=await T.from("company_branding").insert({company_id:w,...gn}).select().single();S&&console.error("Error creating default branding:",S)}catch(j){console.error("Error in createDefaultBranding:",j)}},h=y.useCallback(async w=>{try{if(!P)return n(D=>({...D,...w})),{success:!0};if(!t)return{success:!1,error:"No company ID"};const j={},S=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const D of S)w[D]!==void 0&&(j[D]=w[D]);const{data:O,error:C}=await T.from("company_branding").select("id").eq("company_id",t).single();if(C&&C.code==="PGRST116"){const{data:D,error:M}=await T.from("company_branding").insert({company_id:t,...j}).select().single();return M?(console.error("Error creating branding:",M),{success:!1,error:M.message}):(n({...gn,...D}),{success:!0,data:D})}const{data:A,error:k}=await T.from("company_branding").update(j).eq("company_id",t).select().single();return k?(console.error("Error updating branding:",k),{success:!1,error:k.message}):(n({...gn,...A}),{success:!0,data:A})}catch(j){return console.error("Error in updateBranding:",j),{success:!1,error:j.message}}},[t]),g=w=>{const j=document.documentElement;if(j.style.setProperty("--primary-color",w.primary_color),j.style.setProperty("--secondary-color",w.secondary_color),w.favicon_url){let S=document.querySelector("link[rel*='icon']");S||(S=document.createElement("link"),S.rel="icon",document.head.appendChild(S)),S.href=w.favicon_url}document.title=w.custom_app_name||"FieldSync"},p=y.useCallback(async(w,j)=>{try{if(!P)return{success:!0,url:URL.createObjectURL(w)};const S=w.name.split(".").pop(),C=`branding/${`${t}/${j}-${Date.now()}.${S}`}`,{data:A,error:k}=await T.storage.from("public").upload(C,w,{cacheControl:"3600",upsert:!0});if(k)return console.error("Error uploading image:",k),{success:!1,error:k.message};const{data:{publicUrl:D}}=T.storage.from("public").getPublicUrl(C);return{success:!0,url:D}}catch(S){return console.error("Error in uploadBrandingImage:",S),{success:!1,error:S.message}}},[t]),_=y.useCallback(()=>{t?c(t):u()},[t]),x=y.useMemo(()=>({branding:r,loading:i,updateBranding:h,uploadBrandingImage:p,refreshBranding:_}),[r,i,h,p,_]);return d.jsx(KN.Provider,{value:x,children:e})}function r3(){const e=y.useContext(KN);if(!e)throw new Error("useBranding must be used within a BrandingProvider");return e}const YN=y.createContext();function Dg({children:e}){const[t,r]=y.useState(()=>{const s=localStorage.getItem("fieldsync-theme");return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});y.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("fieldsync-theme",t)},[t]),y.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: light)"),c=u=>{localStorage.getItem("fieldsync-theme")||r(u.matches?"light":"dark")};return s.addEventListener("change",c),()=>s.removeEventListener("change",c)},[]);const n=y.useCallback(()=>{r(s=>s==="dark"?"light":"dark")},[]),i=y.useMemo(()=>({theme:t,setTheme:r,toggleTheme:n}),[t,n]);return d.jsx(YN.Provider,{value:i,children:e})}function n3(){const e=y.useContext(YN);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}const a3=y.createContext(null);function i3({children:e}){const[t,r]=y.useState(null),[n,i]=y.useState([]),s=y.useCallback(()=>{r(null)},[]),c=y.useCallback((w,j="info",S=3e3)=>{if(t){i(O=>[...O,{message:w,type:j,duration:S}]);return}r({message:w,type:j,duration:S}),S>0&&setTimeout(()=>{r(null)},S)},[t]),u=y.useCallback(()=>{if(n.length>0){const[w,...j]=n;i(j),setTimeout(()=>{c(w.message,w.type,w.duration)},300)}},[n,c]),m=y.useCallback(()=>{s(),u()},[s,u]),h=y.useCallback((w,j)=>{c(w,"success",j)},[c]),g=y.useCallback((w,j)=>{c(w,"error",j)},[c]),p=y.useCallback((w,j)=>{c(w,"warning",j)},[c]),_=y.useCallback((w,j)=>{c(w,"info",j)},[c]),x=y.useMemo(()=>({toast:t,showToast:c,hideToast:m,success:h,error:g,warning:p,info:_}),[t,c,m,h,g,p,_]);return d.jsxs(a3.Provider,{value:x,children:[e,t&&d.jsx("div",{className:"toast-container",children:d.jsx("div",{className:`toast ${t.type}`,onClick:m,children:t.message})})]})}function Ur({className:e="",showPoweredBy:t=!1}){const{branding:r}=r3();return d.jsxs("div",{className:`app-logo ${e}`,children:[r.logo_url?d.jsx("img",{src:r.logo_url,alt:r.custom_app_name||"Logo",className:"custom-logo"}):d.jsxs("div",{className:"logo",children:[r.custom_app_name||"Field",d.jsx("span",{children:"Sync"})]}),t&&!r.hide_fieldsync_branding&&d.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function o3(e){if(!e)return{score:0,label:"",color:""};let t=0;return e.length>=6&&t++,e.length>=8&&t++,/[A-Z]/.test(e)&&/[a-z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t<=1?{score:1,label:"Weak",color:"var(--accent-red)"}:t<=2?{score:2,label:"Fair",color:"var(--accent-orange)"}:t<=3?{score:3,label:"Good",color:"var(--accent-amber)"}:t<=4?{score:4,label:"Strong",color:"var(--accent-green)"}:{score:5,label:"Very strong",color:"var(--accent-green)"}}function r1(e=6){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",r=new Uint32Array(e);return crypto.getRandomValues(r),Array.from(r,n=>t[n%t.length]).join("")}function Ls(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function dc({steps:e,currentStep:t}){return d.jsx("div",{className:"onboarding-step-indicator",children:e.map((r,n)=>{const i=n+1,s=i===t,c=i<t;return d.jsxs("div",{className:"onboarding-step-wrapper",children:[n>0&&d.jsx("div",{className:`onboarding-step-line ${c?"completed":""}`}),d.jsx("div",{className:`onboarding-step-circle ${s?"active":""} ${c?"completed":""}`,children:c?d.jsx(Vi,{size:14}):i}),d.jsx("span",{className:`onboarding-step-label ${s?"active":""} ${c?"completed":""}`,children:r})]},n)})})}function n1({value:e,onChange:t,placeholder:r,onKeyDown:n,autoFocus:i,showStrength:s}){const[c,u]=y.useState(!1),m=o3(e);return d.jsxs("div",{className:"password-field",children:[d.jsxs("div",{className:"password-input-wrapper",children:[d.jsx("input",{type:c?"text":"password",value:e,onChange:t,placeholder:r||"Password",onKeyDown:n,autoFocus:i}),d.jsx("button",{type:"button",className:"password-toggle",onClick:()=>u(!c),tabIndex:-1,"aria-label":c?"Hide password":"Show password",children:c?d.jsx(mq,{size:18}):d.jsx(hq,{size:18})})]}),s&&e&&d.jsxs("div",{className:"password-strength",children:[d.jsx("div",{className:"password-strength-bar",children:d.jsx("div",{className:"password-strength-fill",style:{width:`${m.score/5*100}%`,background:m.color}})}),d.jsx("span",{className:"password-strength-label",style:{color:m.color},children:m.label})]})]})}function s3({onForemanAccess:e,onOfficeLogin:t,onShowToast:r}){const[n]=Az(),[i,s]=y.useState(()=>{const he=n.get("mode");return he==="foreman"||he==="office"?he:null}),[c,u]=y.useState(""),[m,h]=y.useState(null),[g,p]=y.useState(""),[_,x]=y.useState(!1),[w,j]=y.useState(""),[S,O]=y.useState(null),[C,A]=y.useState(()=>{try{return localStorage.getItem("fieldsync_foreman_name")||""}catch{return""}}),k=y.useRef(null),D=y.useRef(null);y.useEffect(()=>()=>{k.current&&clearTimeout(k.current),D.current&&clearTimeout(D.current)},[]);const[M,z]=y.useState(""),[K,Q]=y.useState(""),[ne,G]=y.useState(1),[I,ie]=y.useState(null),[pe,q]=y.useState(""),[R,U]=y.useState(""),[J,B]=y.useState(""),[fe,je]=y.useState(""),[te,H]=y.useState(!1),[Ee,Te]=y.useState(1),[Ie,ge]=y.useState(""),[Le,ee]=y.useState(""),[we,xe]=y.useState(""),[oe,Fe]=y.useState(""),[ve,Ne]=y.useState(null),Me=he=>{const st=he.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);u(st)},Et=async()=>{if(c.length<2){r("Enter company code","error");return}x(!0);try{const he=await be.getCompanyByCode(c);he?h(he):(r("Invalid company code","error"),u(""))}catch{r("Error checking code","error")}finally{x(!1)}},Re=async he=>{if(he.length===4){x(!0),j("");try{const st=await be.getProjectByPinSecure(he,m.code);if(st.rateLimited){j("error"),r("Too many attempts. Please wait 15 minutes.","error"),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{p(""),j("")},800);return}if(st.success&&st.project){O(st.project);return}if(st.error){console.error("[Foreman Auth] PIN validation failed:",st.error),r(st.error,"error"),p("");return}r("Invalid PIN","error"),p("")}catch{r("Error checking PIN. Please check your connection.","error"),p("")}finally{x(!1)}}},Bt=()=>{if(!C.trim()){r("Enter your name to continue","error");return}try{localStorage.setItem("fieldsync_foreman_name",C.trim())}catch{}e(S,C.trim())},_t=he=>{if(g.length<4&&!_){const st=g+he;p(st),j(""),st.length===4&&(D.current&&clearTimeout(D.current),D.current=setTimeout(()=>Re(st),150))}},Nt=()=>{_||(p(he=>he.slice(0,-1)),j(""))},Kr=()=>{h(null),p(""),j("")},jt=()=>{if(!M.trim()||!K.trim()){r("Enter email and password","error");return}t(M,K)},Ge=async()=>{if(c.length<2){r("Enter company code","error");return}x(!0);try{const he=await be.getCompanyByCode(c);he?(ie(he),G(2)):(r("Invalid company code","error"),u(""))}catch{r("Error checking code","error")}finally{x(!1)}},Yr=async()=>{if(!pe.trim()){r("Enter office code","error");return}x(!0);try{const{data:he,error:st}=await T.rpc("verify_office_code",{company_id:I.id,code:pe.trim()});if(st)throw st;he===!0?G(3):(r("Invalid office code","error"),q(""))}catch{r("Error verifying code","error")}finally{x(!1)}},Sn=async()=>{if(!_){if(!R.trim()){r("Enter your name","error");return}if(!J.trim()||!Ls(J)){r("Enter a valid email address","error");return}if(fe.length<6){r("Password must be 6+ characters","error");return}x(!0);try{const he=J.toLowerCase().trim(),{data:st,error:En}=await T.auth.signUp({email:he,password:fe});let er;if(En?.message?.includes("already registered")||st?.user&&st.user.identities?.length===0){const{data:zt,error:ht}=await T.auth.signInWithPassword({email:he,password:fe});if(ht){r("Account exists with different password. Use your existing password.","error"),x(!1);return}er=zt.user.id;const{data:an}=await T.from("user_companies").select("id, status").eq("user_id",er).eq("company_id",I.id).maybeSingle();if(an){an.status==="active"?(r("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):an.status==="pending"?(r("Your request is still pending approval.","error"),await T.auth.signOut()):(r("Your membership was removed. Contact the company admin.","error"),await T.auth.signOut());return}const{error:Yn}=await T.from("user_companies").insert({user_id:er,company_id:I.id,role:"member",status:"pending"});if(Yn)throw console.error("Error adding to user_companies:",Yn),await T.auth.signOut(),new Error("Failed to submit join request");await T.auth.signOut(),H(!0)}else{if(En)throw En;{if(er=st.user?.id,!er)throw new Error("Failed to create user");const{error:zt}=await T.from("users").insert({id:er,email:he,password_hash:"managed_by_supabase_auth",name:R.trim(),company_id:I.id,role:"member",is_active:!0});if(zt)throw zt;const{error:ht}=await T.from("user_companies").insert({user_id:er,company_id:I.id,role:"member",status:"pending"});if(ht)throw console.error("Error adding to user_companies:",ht),new Error("Failed to submit join request");await T.auth.signOut(),H(!0)}}}catch(he){console.error("Join error:",he),r(he.message||"Error creating account","error")}finally{x(!1)}}},Gr=async()=>{if(!_){if(!Le.trim()){r("Enter your name","error");return}if(!we.trim()||!Ls(we)){r("Enter a valid email address","error");return}if(oe.length<6){r("Password must be 6+ characters","error");return}x(!0);try{const he=we.toLowerCase().trim(),st=r1(6),En=r1(6),{data:er,error:$t}=await T.auth.signUp({email:he,password:oe});if($t){if($t.message?.includes("already registered"))r("An account with this email already exists. Sign in instead.","error");else throw $t;return}const zt=er.user?.id;if(!zt)throw new Error("Failed to create account");const{data:ht,error:an}=await T.from("companies").insert({name:Ie.trim(),code:st,office_code:En,subscription_tier:"free",owner_user_id:zt}).select().single();if(an)throw console.error("Company creation error:",an),new Error("Failed to create company. Please try again.");const{error:Yn}=await T.from("users").insert({id:zt,email:he,password_hash:"managed_by_supabase_auth",name:Le.trim(),company_id:ht.id,role:"admin",is_active:!0});if(Yn)throw console.error("User record error:",Yn),new Error("Failed to set up user profile");const{error:ua}=await T.from("user_companies").insert({user_id:zt,company_id:ht.id,role:"admin",access_level:"administrator",status:"active"});if(ua)throw console.error("User-company link error:",ua),new Error("Failed to link account to company");Ne({name:ht.name,code:st,officeCode:En}),Te(3)}catch(he){console.error("Registration error:",he),r(he.message||"Error creating company","error")}finally{x(!1)}}},Er=()=>{G(1),ie(null),q(""),U(""),B(""),je(""),H(!1),u("")},Vt=()=>{Te(1),ge(""),ee(""),xe(""),Fe(""),Ne(null)};if(i===null)return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in-up",children:[d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsxs("div",{className:"entry-buttons stagger-children",children:[d.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>s("foreman"),children:[d.jsx("span",{className:"entry-mode-icon",children:d.jsx(qo,{size:32})}),d.jsx("span",{className:"entry-mode-title",children:"Foreman"}),d.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),d.jsxs("button",{className:"entry-mode-btn office",onClick:()=>s("office"),children:[d.jsx("span",{className:"entry-mode-icon",children:d.jsx(dq,{size:32})}),d.jsx("span",{className:"entry-mode-title",children:"Office"}),d.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(i==="foreman")return S?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsx("div",{className:"entry-company-badge",children:S.name}),d.jsx("p",{className:"entry-subtitle",children:"Who's checking in?"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"text",value:C,onChange:he=>A(he.target.value),placeholder:"Your name",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Bt()},style:{fontSize:"1.1rem",textAlign:"center"}}),d.jsx("button",{className:"entry-login-btn",onClick:Bt,disabled:!C.trim(),children:"Enter Site"})]}),d.jsx("p",{className:"entry-hint",style:{marginTop:"0.75rem"},children:"Your name will appear on reports and submissions"}),d.jsxs("button",{className:"entry-join-link",style:{marginTop:"0.5rem",display:"flex",alignSelf:"center"},onClick:()=>{O(null),p(""),j("")},children:[d.jsx(dr,{size:16}),d.jsx("span",{children:"Back"})]})]})}):m?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:Kr,children:d.jsx(dr,{size:20})}),d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsx("div",{className:"entry-company-badge",children:m.name}),d.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),d.jsx("div",{className:`pin-display ${w==="error"?"shake":""}`,children:[0,1,2,3].map(he=>d.jsx("div",{className:`pin-dot ${g.length>he?"filled":""} ${w}`,children:g.length>he?"":""},he))}),d.jsxs("div",{className:"number-pad",role:"group","aria-label":"PIN entry keypad",children:[[1,2,3,4,5,6,7,8,9].map(he=>d.jsx("button",{className:"num-btn",onClick:()=>_t(he.toString()),disabled:_,"aria-label":String(he),children:he},he)),d.jsx("button",{className:"num-btn empty",disabled:!0,"aria-hidden":"true"}),d.jsx("button",{className:"num-btn",onClick:()=>_t("0"),disabled:_,"aria-label":"0",children:"0"}),d.jsx("button",{className:"num-btn backspace",onClick:Nt,disabled:_||g.length===0,"aria-label":"Delete last digit",children:d.jsx(dr,{size:18})})]}),_&&d.jsx("div",{className:"entry-loading",children:d.jsx("div",{className:"spinner"})})]})}):d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>s(null),children:d.jsx(dr,{size:20})}),d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),d.jsxs("div",{className:"entry-input-group",children:[d.jsx("input",{type:"text",value:c,onChange:he=>Me(he.target.value),placeholder:"Company Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Et()}}),d.jsx("button",{className:"entry-submit-btn",onClick:Et,disabled:_||c.length<2,children:_?d.jsx("div",{className:"spinner-small"}):d.jsx(Ec,{size:20})})]})]})});if(i==="office")return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>s(null),children:d.jsx(dr,{size:20})}),d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"email",value:M,onChange:he=>z(he.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&jt()}}),d.jsx("input",{type:"password",value:K,onChange:he=>Q(he.target.value),placeholder:"Password",onKeyDown:he=>{he.key==="Enter"&&jt()}}),d.jsx("button",{className:"entry-login-btn",onClick:jt,children:"Sign In"})]}),d.jsx("div",{className:"entry-signup-hint",children:d.jsxs("div",{className:"entry-signup-options",children:[d.jsxs("button",{className:"entry-join-link",onClick:()=>{Er(),s("join")},children:[d.jsx(lN,{size:16}),d.jsx("span",{children:"Join your company"})]}),d.jsxs("button",{className:"entry-join-link",onClick:()=>{Vt(),s("register")},children:[d.jsx(fq,{size:16}),d.jsx("span",{children:"Register a new company"})]})]})})]})});if(i==="join")return te?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-scale-in",children:[d.jsx("div",{className:"entry-success-icon",children:d.jsx(Vi,{size:32})}),d.jsx("h2",{className:"entry-success-title",children:"Request Submitted"}),d.jsxs("p",{className:"entry-success-message",children:["Your request to join ",d.jsx("strong",{children:I?.name})," has been submitted. A company admin will review and approve your access."]}),d.jsx("p",{className:"entry-success-detail",children:"You'll be able to sign in once approved."}),d.jsx("button",{className:"entry-login-btn",onClick:()=>{Er(),s("office")},style:{marginTop:"1.5rem"},children:"Back to Sign In"})]})}):ne===1?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>{Er(),s("office")},children:d.jsx(dr,{size:20})}),d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsx(dc,{steps:["Company","Verify","Account"],currentStep:1}),d.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),d.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),d.jsxs("div",{className:"entry-input-group",children:[d.jsx("input",{type:"text",value:c,onChange:he=>Me(he.target.value),placeholder:"Company Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Ge()}}),d.jsx("button",{className:"entry-submit-btn",onClick:Ge,disabled:_||c.length<2,children:_?d.jsx("div",{className:"spinner-small"}):d.jsx(Ec,{size:20})})]})]})}):ne===2?d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>{G(1),ie(null),q("")},children:d.jsx(dr,{size:20})}),d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsx(dc,{steps:["Company","Verify","Account"],currentStep:2}),d.jsx("div",{className:"entry-company-badge",children:I?.name}),d.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),d.jsx("p",{className:"entry-hint",children:"This verifies your office access"}),d.jsxs("div",{className:"entry-input-group",children:[d.jsx("input",{type:"password",value:pe,onChange:he=>q(he.target.value),placeholder:"Office Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Yr()}}),d.jsx("button",{className:"entry-submit-btn",onClick:Yr,disabled:_||!pe.trim(),children:_?d.jsx("div",{className:"spinner-small"}):d.jsx(Ec,{size:20})})]})]})}):d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>{G(2),q("")},children:d.jsx(dr,{size:20})}),d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsx(dc,{steps:["Company","Verify","Account"],currentStep:3}),d.jsx("div",{className:"entry-company-badge",children:I?.name}),d.jsx("p",{className:"entry-subtitle",children:"Create your account"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"text",value:R,onChange:he=>U(he.target.value),placeholder:"Your Name",autoFocus:!0}),d.jsx("input",{type:"email",value:J,onChange:he=>B(he.target.value),placeholder:"Email",className:J&&!Ls(J)?"input-error":""}),d.jsx(n1,{value:fe,onChange:he=>je(he.target.value),placeholder:"Password (6+ characters)",onKeyDown:he=>{he.key==="Enter"&&Sn()},showStrength:!0}),d.jsx("button",{className:"entry-login-btn",onClick:Sn,disabled:_||!R.trim()||!Ls(J)||fe.length<6,children:_?d.jsxs("span",{className:"btn-loading",children:[d.jsx("div",{className:"spinner-small"}),"Creating account..."]}):"Join Company"})]}),d.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})});if(i==="register"){if(Ee===3&&ve)return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card entry-card-wide animate-scale-in",children:[d.jsx("div",{className:"entry-success-icon",children:d.jsx(Vi,{size:32})}),d.jsx("h2",{className:"entry-success-title",children:"Company Created"}),d.jsxs("p",{className:"entry-success-message",children:[d.jsx("strong",{children:ve.name})," is ready to go. Save these codes to share with your team."]}),d.jsxs("div",{className:"entry-codes-grid",children:[d.jsxs("div",{className:"entry-code-card",children:[d.jsx("span",{className:"entry-code-label",children:"Company Code"}),d.jsx("span",{className:"entry-code-value",children:ve.code}),d.jsx("span",{className:"entry-code-hint",children:"Share with all employees"})]}),d.jsxs("div",{className:"entry-code-card",children:[d.jsx("span",{className:"entry-code-label",children:"Office Code"}),d.jsx("span",{className:"entry-code-value",children:ve.officeCode}),d.jsx("span",{className:"entry-code-hint",children:"Office staff only"})]})]}),d.jsx("p",{className:"entry-codes-warning",children:"Save these codes now. You can also find them in your company settings later."}),d.jsx("button",{className:"entry-login-btn",onClick:()=>{window.location.reload()},style:{marginTop:"0.5rem"},children:"Go to Dashboard"})]})});if(Ee===1)return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>{Vt(),s("office")},children:d.jsx(dr,{size:20})}),d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsx(dc,{steps:["Company","Your Account"],currentStep:1}),d.jsx("p",{className:"entry-subtitle",children:"Register your company"}),d.jsx("p",{className:"entry-hint",children:"Set up your company on FieldSync"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"text",value:Ie,onChange:he=>ge(he.target.value),placeholder:"Company Name",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Ie.trim()&&Te(2)}}),d.jsx("button",{className:"entry-login-btn",onClick:()=>Te(2),disabled:!Ie.trim(),children:"Continue"})]})]})});if(Ee===2)return d.jsx("div",{className:"entry-container",children:d.jsxs("div",{className:"entry-card animate-fade-in",children:[d.jsx("button",{className:"entry-back",onClick:()=>Te(1),children:d.jsx(dr,{size:20})}),d.jsx(Ur,{className:"entry-logo",showPoweredBy:!1}),d.jsx(dc,{steps:["Company","Your Account"],currentStep:2}),d.jsx("div",{className:"entry-company-badge",children:Ie}),d.jsx("p",{className:"entry-subtitle",children:"Create your admin account"}),d.jsxs("div",{className:"entry-form",children:[d.jsx("input",{type:"text",value:Le,onChange:he=>ee(he.target.value),placeholder:"Your Name",autoFocus:!0}),d.jsx("input",{type:"email",value:we,onChange:he=>xe(he.target.value),placeholder:"Email",className:we&&!Ls(we)?"input-error":""}),d.jsx(n1,{value:oe,onChange:he=>Fe(he.target.value),placeholder:"Password (6+ characters)",onKeyDown:he=>{he.key==="Enter"&&Gr()},showStrength:!0}),d.jsx("button",{className:"entry-login-btn",onClick:Gr,disabled:_||!Le.trim()||!Ls(we)||oe.length<6,children:_?d.jsxs("span",{className:"btn-loading",children:[d.jsx("div",{className:"spinner-small"}),"Setting up company..."]}):"Create Company"})]}),d.jsx("p",{className:"entry-join-note",children:"You'll be the administrator. Company and office codes will be generated for you."})]})})}}function GN({message:e,type:t="",onClose:r}){return y.useEffect(()=>{const n=setTimeout(r,3e3);return()=>clearTimeout(n)},[r]),d.jsx("div",{className:"toast-container",children:d.jsx("div",{className:`toast ${t}`,children:e})})}function a1({compact:e=!1}){const{theme:t,toggleTheme:r}=n3();return d.jsx("button",{className:`theme-toggle ${e?"theme-toggle-compact":""}`,onClick:r,title:`Switch to ${t==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${t==="dark"?"light":"dark"} mode`,children:t==="dark"?d.jsxs(d.Fragment,{children:[d.jsx(cN,{size:e?18:16}),!e&&d.jsx("span",{children:"Light"})]}):d.jsxs(d.Fragment,{children:[d.jsx(uN,{size:e?18:16}),!e&&d.jsx("span",{children:"Dark"})]})})}class ga extends y.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("ErrorBoundary caught an error:",t,r),(t?.message?.includes("Failed to fetch dynamically imported module")||t?.message?.includes("Loading chunk")||t?.message?.includes("Loading CSS chunk"))&&(console.warn("[ErrorBoundary] Chunk load failure detected, clearing cache and reloading..."),"caches"in window?caches.keys().then(i=>{Promise.all(i.map(s=>caches.delete(s))).then(()=>{window.location.reload()})}).catch(i=>{console.warn("[ErrorBoundary] Cache clear failed, reloading anyway:",i.message),window.location.reload()}):window.location.reload())}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?d.jsx("div",{className:"error-boundary",children:d.jsxs("div",{className:"error-boundary-content",children:[d.jsx("div",{className:"error-icon",children:d.jsx(hm,{size:48})}),d.jsx("h2",{children:"Something went wrong"}),d.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),d.jsxs("div",{className:"error-actions",children:[d.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),d.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function i1(){const[e,t]=y.useState(Un()),[r,n]=y.useState(0),[i,s]=y.useState(!1),c=y.useRef(!1),u=y.useRef(null);return y.useEffect(()=>{const m=Yb(async g=>{t(g),g&&c.current&&(s(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>s(!1),3e3),c.current=!1),g||(c.current=!0);const p=await lf();n(p)});lf().then(n);const h=setInterval(async()=>{if(!Un()){const g=await lf();n(g)}},5e3);return()=>{m(),clearInterval(h),u.current&&clearTimeout(u.current)}},[]),e&&r===0&&!i?null:d.jsxs("div",{className:`offline-indicator ${e?"online":"offline"} ${i?"synced":""}`,children:[d.jsx("div",{className:"offline-indicator-content",children:e?i?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"online-icon",children:d.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:d.jsx("polyline",{points:"20 6 9 17 4 12"})})}),d.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):r>0?d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"syncing-icon",children:d.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("polyline",{points:"23 4 23 10 17 10"}),d.jsx("polyline",{points:"1 20 1 14 7 14"}),d.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),d.jsxs("span",{className:"offline-text",children:["Syncing ",r,"..."]})]}):null:d.jsxs(d.Fragment,{children:[d.jsx("span",{className:"offline-icon",children:d.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[d.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),d.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),d.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),d.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),d.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),d.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),d.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),d.jsxs("span",{className:"offline-text",children:["Offline",r>0&&d.jsxs("span",{className:"pending-badge",children:[r," pending"]})]})]})}),d.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}function l3(){const[e,t]=y.useState(null),[r,n]=y.useState(!1);y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const c=localStorage.getItem("pwa-install-dismissed");if(c){const m=parseInt(c,10);if(Date.now()-m<10080*60*1e3)return}const u=m=>{m.preventDefault(),t(m),n(!0)};return window.addEventListener("beforeinstallprompt",u),()=>window.removeEventListener("beforeinstallprompt",u)},[]);const i=async()=>{if(!e)return;e.prompt();const{outcome:c}=await e.userChoice;c==="accepted"&&n(!1),t(null)},s=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return r?d.jsxs("div",{className:"install-prompt",children:[d.jsxs("div",{className:"install-prompt-content",children:[d.jsx(dN,{size:20}),d.jsxs("div",{className:"install-prompt-text",children:[d.jsx("strong",{children:"Install FieldSync"}),d.jsx("span",{children:"Add to home screen for quick access"})]})]}),d.jsxs("div",{className:"install-prompt-actions",children:[d.jsx("button",{className:"btn btn-primary btn-small",onClick:i,children:"Install"}),d.jsx("button",{className:"install-prompt-dismiss",onClick:s,"aria-label":"Dismiss",children:d.jsx(Rb,{size:18})})]})]}):null}const Tg="fieldsync-cookie-consent";function c3(){const[e,t]=y.useState(!1);y.useEffect(()=>{if(!localStorage.getItem(Tg)){const s=setTimeout(()=>t(!0),1e3);return()=>clearTimeout(s)}},[]);const r=()=>{localStorage.setItem(Tg,"accepted"),t(!1)},n=()=>{localStorage.setItem(Tg,"declined"),t(!1)};return e?d.jsx("div",{className:"cookie-banner",children:d.jsxs("div",{className:"cookie-banner-content",children:[d.jsxs("p",{children:["We use cookies and local storage to keep you signed in, remember your preferences, and support offline functionality."," ",d.jsx(Hb,{to:"/privacy",className:"cookie-banner-link",children:"Privacy Policy"})]}),d.jsxs("div",{className:"cookie-banner-actions",children:[d.jsx("button",{className:"cookie-btn-decline",onClick:n,children:"Decline"}),d.jsx("button",{className:"cookie-btn-accept",onClick:r,children:"Accept"})]})]})}):null}function u3({factorId:e,onVerified:t,onCancel:r}){const[n,i]=y.useState(""),[s,c]=y.useState(!1),[u,m]=y.useState(null),h=async()=>{if(n.length===6){c(!0),m(null);try{const{data:p,error:_}=await T.auth.mfa.challenge({factorId:e});if(_)throw _;const{error:x}=await T.auth.mfa.verify({factorId:e,challengeId:p.id,code:n});if(x)throw x;t()}catch{m("Invalid code. Please try again."),i("")}finally{c(!1)}}},g=p=>{p.key==="Enter"&&n.length===6&&h()};return d.jsxs("div",{className:"mfa-challenge",children:[d.jsx("div",{className:"mfa-challenge-icon",children:d.jsx(fN,{size:40})}),d.jsx("h2",{children:"Two-Factor Authentication"}),d.jsx("p",{children:"Enter the 6-digit code from your authenticator app"}),d.jsx("div",{className:"mfa-code-input",children:d.jsx("input",{type:"text",value:n,onChange:p=>i(p.target.value.replace(/\D/g,"").slice(0,6)),onKeyDown:g,placeholder:"000000",maxLength:6,autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*",className:"mfa-input-large","aria-label":"MFA verification code"})}),u&&d.jsx("p",{className:"mfa-error",children:u}),d.jsxs("div",{className:"mfa-challenge-actions",children:[d.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Cancel"}),d.jsx("button",{className:"btn btn-primary",onClick:h,disabled:n.length!==6||s,children:s?d.jsxs(d.Fragment,{children:[d.jsx(Gs,{size:14,className:"spinner"})," Verifying..."]}):"Verify"})]})]})}function dQ(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function d3(e){if(!e||e.length===0)return 0;let t=0;return e.forEach(r=>{r.status==="done"&&(t+=r.weight||0)}),Math.round(t)}function fQ(e){if(!e||e.length===0)return{progress:0,earnedValue:0,totalValue:0,isValueBased:!1};if(e.some(n=>n.scheduled_value>0)){const n=e.reduce((c,u)=>c+(u.scheduled_value||0),0),i=e.filter(c=>c.status==="done").reduce((c,u)=>c+(u.scheduled_value||0),0);return{progress:n>0?Math.round(i/n*100):0,earnedValue:i,totalValue:n,isValueBased:!0}}const r=e.filter(n=>n.status==="done").reduce((n,i)=>n+(i.weight||0),0);return{progress:Math.round(r),earnedValue:0,totalValue:0,isValueBased:!1}}function f3(e){if(!e||e.length===0)return"not_started";const t=e.some(i=>i.status==="working"),r=e.some(i=>i.status==="done");return e.every(i=>i.status==="done")?"done":t||r?"working":"not_started"}function mQ(e){const t=f3(e);return t==="done"?"Complete":t==="working"?"In Progress":"Not Started"}function hQ(e,t=0){const r=new Date;r.setHours(0,0,0,0);const n={scheduleStatus:"on_track",scheduleVariance:0,scheduleLabel:"On Track",laborStatus:"on_track",laborVariance:0,laborLabel:null,hasScheduleData:!1,hasLaborData:!1};if(e.start_date&&e.end_date){const i=new Date(e.start_date),s=new Date(e.end_date);i.setHours(0,0,0,0),s.setHours(0,0,0,0);const c=Math.max(1,Math.ceil((s-i)/(1e3*60*60*24))),u=Math.max(0,Math.ceil((r-i)/(1e3*60*60*24))),m=Math.min(100,u/c*100),g=(e.progress||0)-m;n.scheduleVariance=Math.round(g),n.hasScheduleData=!0,g>5?(n.scheduleStatus="ahead",n.scheduleLabel=`Ahead of Schedule (+${n.scheduleVariance}%)`):g<-5?(n.scheduleStatus="behind",n.scheduleLabel=`Behind Schedule (${n.scheduleVariance}%)`):(n.scheduleStatus="on_track",n.scheduleLabel="On Track")}if(e.planned_man_days&&e.planned_man_days>0){const s=(e.progress||0)/100*e.planned_man_days;if(s>0&&t>0){const c=(t-s)/s*100;n.laborVariance=Math.round(c),n.hasLaborData=!0,c>10?(n.laborStatus="over",n.laborLabel=`Over Planned (+${n.laborVariance}% man-days)`):c<-10?(n.laborStatus="under",n.laborLabel=`Under Planned (${n.laborVariance}% man-days)`):(n.laborStatus="on_track",n.laborLabel="Labor On Track")}else t>0&&(n.hasLaborData=!0,n.laborLabel=`${t} man-days used`)}return n}function pQ(e,t=30){if(e.status==="archived"||e.progress<100)return!1;const r=e.areas||[];if(r.length===0||!r.every(c=>c.status==="done"))return!1;const i=r.reduce((c,u)=>{const m=new Date(u.updated_at);return m>c?m:c},new Date(0));return i.getTime()===0?!1:Math.floor((Date.now()-i.getTime())/(1e3*60*60*24))>=t}const gQ=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[59,130,246]},m3=(e,t=5e3,r=.85)=>new Promise(n=>{if(!e){n(null);return}const i=new Image;i.crossOrigin="anonymous";const s=setTimeout(()=>{i.src="",n(null)},t);i.onload=()=>{clearTimeout(s);try{const c=document.createElement("canvas");c.width=i.width,c.height=i.height,c.getContext("2d").drawImage(i,0,0);const m=c.toDataURL("image/jpeg",r);n(m)}catch{n(null)}},i.onerror=()=>{clearTimeout(s),n(null)},i.src=e}),vQ=async(e,t=5e3,r=.85)=>!e||e.length===0?[]:await Promise.all(e.map(i=>m3(i,t,r)));async function o1(e,t=1920,r=.8){return!e.type.startsWith("image/")||e.size<500*1024?e:new Promise(n=>{const i=document.createElement("canvas"),s=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:m}=c;u>t&&(m=Math.round(m*t/u),u=t);const h=1920;m>h&&(u=Math.round(u*h/m),m=h),i.width=u,i.height=m,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(c,0,0,u,m),i.toBlob(g=>{if(g){const p=e.name.replace(/\.[^/.]+$/,""),_=new File([g],`${p}.jpg`,{type:"image/jpeg",lastModified:Date.now()});n(_)}else console.warn("Image compression failed, using original"),n(e)},"image/jpeg",r),URL.revokeObjectURL(c.src)},c.onerror=()=>{console.warn("Failed to load image for compression, using original"),URL.revokeObjectURL(c.src),n(e)},c.src=URL.createObjectURL(e)})}function h3(e=5e3){return new Promise(t=>{if(!navigator.geolocation){t(null);return}navigator.geolocation.getCurrentPosition(r=>{t({latitude:r.coords.latitude,longitude:r.coords.longitude,accuracy:Math.round(r.coords.accuracy)})},()=>t(null),{enableHighAccuracy:!0,timeout:e,maximumAge:6e4})})}const Pg=["Containment","PPE","Disposal","Equipment"],VN={en:{workInfo:"Work Details",crewHours:"Crew & Hours",materialsEquipment:"Materials",evidence:"Evidence",review:"Review",quickActions:"Quick Actions",sameAsYesterday:"Same as Yesterday",setCrewHours:"Set Crew Hours",loading:"Loading...",supervision:"Supervision",operators:"Operators",laborers:"Laborers",addSupervision:"+ Add Supervision",addOperator:"+ Add Operator",addLaborer:"+ Add Laborer",foreman:"Foreman",superintendent:"Superintendent",firstLastName:"First & Last Name",start:"Start",end:"End",regHrs:"Reg Hrs",otHrs:"OT Hrs",selectCategory:"Select a category:",addCustomItem:"+ Add Custom Item",customItem:"Custom Item",itemName:"Item Name",category:"Category",quantity:"Quantity",addItem:"Add Item",cancel:"Cancel",noItemsCategory:"No items in this category yet",workDate:"Work Date",ceNumber:"CE/PCO #",optional:"optional",linkedCOR:"Link to Change Order",selectCOR:"Select COR (optional)",noCORs:"No pending CORs",laborSummary:"Labor Summary",worker:"worker",workers_plural:"workers",totalHours:"Total Hours",regular:"Regular",overtime:"Overtime",materials:"Materials",item:"item",items_plural:"items",noMaterials:"No materials added",notes:"Notes",addNotes:"Add notes about the work performed...",photos:"Photos",addPhotos:"Add Photos",maxPhotos:"max",noPhotos:"No photos added",certification:"Certification",certifyStatement:"I certify that this T&M ticket accurately reflects the work performed.",foremanSignature:"Foreman's Name (Signature)",yourName:"Your name",describeWork:"Describe the work performed",descriptionRequired:"Description is required",whatWorkPerformed:"What work was performed today?",searchMaterials:"Search materials & equipment...",noSearchResults:"No items found",orBrowse:"Or browse by category:",back:"Back",next:"Next",nextCrew:"Next: Crew",nextMaterials:"Next: Materials",reviewItems:"Review",skipNoMaterials:"Skip (no materials)",submitTM:"Submit T&M",submitting:"Submitting...",applySameHours:"Apply Same Hours",batchDescription:"Set start/end time and hours for all workers with names entered.",timeStarted:"Time Started",timeEnded:"Time Ended",regularHours:"Regular Hours",overtimeHours:"Overtime Hours",willApplyTo:"Will apply to",applyToAll:"Apply to All",preset8hr:"8hr Day",preset10hr:"10hr Day",preset4hr:"4hr Day",loadedWorkers:"Loaded {count} workers from {date}",noPreviousCrew:"No previous crew found for this project",appliedHours:"Applied hours to {count} worker(s)",assignedToCOR:"Assigned to COR",photoEvidence:"Photo Evidence",photosAdded:"photo(s) added",recommendedForBilling:"Recommended for billing",addMorePhotos:"Add More Photos",linkToChangeOrder:"Link to Change Order",linkedTo:"Linked to",optionalLinkCOR:"Optional - Link this T&M to a COR",selectCOROptional:"-- Select a COR (optional) --",noActiveCORs:"No active CORs available for this project",addWorkersFirst:"Add workers first",errorLoadingCrew:"Error loading previous crew",descriptionRecommended:"Description recommended",workersNoHours:"worker(s) have no hours entered",nameRequired:"Name required to submit",submitted:"Submitted",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Review & Submit",enterNameToSubmit:"Enter name to submit",done:"Done",skipSignature:"Skip signature for now",total:"total",needHours:"need hours",customHours:"Custom hours",selectTMWorkers:"Select T&M Workers",tapToAdd:"Tap to add",removeClass:"Remove this labor class",add:"Add",addLaborClass:"Add Labor Class...",other:"Other",noCustomClasses:"No custom labor classes set up for this company. Using default categories.",loadingLaborClasses:"Loading labor classes...",noLaborClassesYet:"No labor classes added yet. Select from crew check-in above or add manually:",tmSubmitted:"T&M Ticket Submitted!",ticketSavedReady:"Your ticket has been saved and is ready for client signature.",workersLabel:"Workers",retry:"Retry",retryAllPhotos:"Retry All Failed Photos",getClientSignature:"Get Client Signature",signatureDescription:"Have the client sign this T&M ticket to verify the work performed.",clientSignatureCollected:"Client signature collected!",signNowOnSite:"Sign Now (On-Site)",clientSignsDevice:"Client signs on this device",sendSignatureLink:"Send Signature Link",clientSignsLater:"Client signs later via link",ticketSummary:"Ticket Summary",edit:"Edit",submittedBy:"Submitted By",enterYourName:"Enter your name",certifyAccurate:"By submitting, you certify this T&M is accurate."},es:{workInfo:"Info del Trabajo",crewHours:"Cuadrilla y Horas",materialsEquipment:"Materiales",evidence:"Evidencia",review:"Revisar",quickActions:"Acciones Rapidas",sameAsYesterday:"Igual que Ayer",setCrewHours:"Poner Horas",loading:"Cargando...",supervision:"Supervision",operators:"Operadores",laborers:"Trabajadores",addSupervision:"+ Agregar Supervision",addOperator:"+ Agregar Operador",addLaborer:"+ Agregar Trabajador",foreman:"Capataz",superintendent:"Superintendente",firstLastName:"Nombre y Apellido",start:"Inicio",end:"Fin",regHrs:"Hrs Reg",otHrs:"Hrs Extra",selectCategory:"Seleccione una categoria:",addCustomItem:"+ Agregar Articulo",customItem:"Articulo Personalizado",itemName:"Nombre del Articulo",category:"Categoria",quantity:"Cantidad",addItem:"Agregar",cancel:"Cancelar",noItemsCategory:"No hay articulos en esta categoria",workDate:"Fecha de Trabajo",ceNumber:"CE/PCO #",optional:"opcional",linkedCOR:"Vincular a Orden de Cambio",selectCOR:"Seleccionar COR (opcional)",noCORs:"No hay CORs pendientes",laborSummary:"Resumen de Mano de Obra",worker:"trabajador",workers_plural:"trabajadores",totalHours:"Horas Totales",regular:"Regular",overtime:"Extra",materials:"Materiales",item:"articulo",items_plural:"articulos",noMaterials:"No se agregaron materiales",notes:"Notas",addNotes:"Agregar notas sobre el trabajo realizado...",photos:"Fotos",addPhotos:"Agregar Fotos",maxPhotos:"max",noPhotos:"No se agregaron fotos",certification:"Certificacion",certifyStatement:"Certifico que este ticket T&M refleja con precision el trabajo realizado.",foremanSignature:"Nombre del Capataz (Firma)",yourName:"Su nombre",describeWork:"Describir el trabajo realizado",descriptionRequired:"Descripcion es requerida",whatWorkPerformed:"Que trabajo se realizo hoy?",searchMaterials:"Buscar materiales y equipo...",noSearchResults:"No se encontraron articulos",orBrowse:"O navegar por categoria:",back:"Atras",next:"Siguiente",nextCrew:"Siguiente: Cuadrilla",nextMaterials:"Siguiente: Materiales",reviewItems:"Revisar",skipNoMaterials:"Saltar (sin materiales)",submitTM:"Enviar T&M",submitting:"Enviando...",applySameHours:"Aplicar Mismas Horas",batchDescription:"Establezca hora de inicio/fin y horas para todos los trabajadores.",timeStarted:"Hora de Inicio",timeEnded:"Hora de Fin",regularHours:"Horas Regulares",overtimeHours:"Horas Extra",willApplyTo:"Se aplicara a",applyToAll:"Aplicar a Todos",preset8hr:"Dia 8hr",preset10hr:"Dia 10hr",preset4hr:"Dia 4hr",loadedWorkers:"Se cargaron {count} trabajadores del {date}",noPreviousCrew:"No se encontro equipo anterior para este proyecto",appliedHours:"Horas aplicadas a {count} trabajador(es)",assignedToCOR:"Asignado a COR",photoEvidence:"Evidencia Fotogrfica",photosAdded:"foto(s) agregada(s)",recommendedForBilling:"Recomendado para facturacin",addMorePhotos:"Agregar Ms Fotos",linkToChangeOrder:"Vincular a Orden de Cambio",linkedTo:"Vinculado a",optionalLinkCOR:"Opcional - Vincular este T&M a un COR",selectCOROptional:"-- Seleccionar COR (opcional) --",noActiveCORs:"No hay CORs activos para este proyecto",addWorkersFirst:"Agregue trabajadores primero",errorLoadingCrew:"Error cargando equipo anterior",descriptionRecommended:"Descripcion recomendada",workersNoHours:"trabajador(es) sin horas",nameRequired:"Nombre requerido",submitted:"Enviado",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Revisar y Enviar",enterNameToSubmit:"Ingrese nombre",done:"Listo",skipSignature:"Saltar firma por ahora",total:"total",needHours:"sin horas",customHours:"Horas personalizadas",selectTMWorkers:"Seleccionar Trabajadores T&M",tapToAdd:"Toca para agregar",removeClass:"Eliminar esta clase",add:"Agregar",addLaborClass:"Agregar Clase de Trabajo...",other:"Otros",noCustomClasses:"No hay clases de trabajo personalizadas. Usando categorias predeterminadas.",loadingLaborClasses:"Cargando clases de trabajo...",noLaborClassesYet:"No hay clases de trabajo agregadas. Seleccione del check-in o agregue manualmente:",tmSubmitted:"Ticket T&M Enviado!",ticketSavedReady:"Su ticket ha sido guardado y est listo para la firma del cliente.",workersLabel:"Trabajadores",retry:"Reintentar",retryAllPhotos:"Reintentar Todas las Fotos",getClientSignature:"Obtener Firma del Cliente",signatureDescription:"Haga que el cliente firme este ticket T&M para verificar el trabajo realizado.",clientSignatureCollected:"Firma del cliente recopilada!",signNowOnSite:"Firmar Ahora",clientSignsDevice:"Cliente firma en este dispositivo",sendSignatureLink:"Enviar Enlace",clientSignsLater:"Cliente firma despus va enlace",ticketSummary:"Resumen del Ticket",edit:"Editar",submittedBy:"Enviado Por",enterYourName:"Ingrese su nombre",certifyAccurate:"Al enviar, certifica que este T&M es preciso."}},p3=e=>t=>VN[e]?.[t]||t;function g3({project:e,workDate:t,setWorkDate:r,cePcoNumber:n,setCePcoNumber:i,notes:s,setNotes:c,t:u,lang:m}){return d.jsxs("div",{className:"tm-step-content",children:[d.jsxs("div",{className:"tm-project-info",children:[e.job_number&&d.jsxs("div",{className:"tm-project-detail",children:[d.jsx("span",{className:"tm-project-label",children:"Job #"}),d.jsx("span",{className:"tm-project-value",children:e.job_number})]}),d.jsxs("div",{className:"tm-project-detail",children:[d.jsx("span",{className:"tm-project-label",children:"Project"}),d.jsx("span",{className:"tm-project-value",children:e.name})]}),e.address&&d.jsxs("div",{className:"tm-project-detail",children:[d.jsx("span",{className:"tm-project-label",children:"Address"}),d.jsx("span",{className:"tm-project-value",children:e.address})]}),e.general_contractor&&d.jsxs("div",{className:"tm-project-detail",children:[d.jsx("span",{className:"tm-project-label",children:"GC"}),d.jsx("span",{className:"tm-project-value",children:e.general_contractor})]})]}),d.jsxs("div",{className:"tm-field-row",children:[d.jsxs("div",{className:"tm-field tm-field-half",children:[d.jsx("label",{children:"Date"}),d.jsx("input",{type:"date",value:t,onChange:h=>r(h.target.value),className:"tm-date"})]}),d.jsxs("div",{className:"tm-field tm-field-half",children:[d.jsx("label",{children:"CE / PCO #"}),d.jsx("input",{type:"text",placeholder:"Change Event / PCO",value:n,onChange:h=>i(h.target.value),className:"tm-input"})]})]}),d.jsxs("div",{className:"tm-field tm-description-field",children:[d.jsxs("label",{children:[d.jsx(Go,{size:16,className:"inline-icon"}),u("describeWork")," ",d.jsx("span",{className:"tm-required",children:"*"})]}),d.jsx("textarea",{placeholder:u("whatWorkPerformed"),value:s,onChange:h=>c(h.target.value),rows:4,className:`tm-description ${s.trim()?"":"tm-field-required"}`})]})]})}const v3=e=>{if(!e)return"empty";const t=e.name&&e.name.trim()!=="",r=parseFloat(e.hours)>0||parseFloat(e.overtimeHours)>0;return t?r?"complete":"incomplete":"empty"},s1=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function fc({worker:e,index:t,onUpdate:r,onRemove:n,t:i,roleSelect:s}){const c=v3(e);return d.jsxs("div",{className:`tm-worker-card-expanded ${c!=="empty"?`worker-${c}`:""}`,children:[d.jsxs("div",{className:"tm-worker-row-top",children:[c==="complete"&&d.jsx("span",{className:"tm-worker-check",children:d.jsx(Vi,{size:14})}),s,d.jsx("input",{type:"text",placeholder:i("firstLastName"),value:e.name,onChange:u=>r(t,"name",u.target.value),className:"tm-worker-input"}),d.jsx("button",{className:"tm-remove",onClick:()=>n(t),children:""})]}),d.jsxs("div",{className:"tm-worker-row-bottom",children:[d.jsxs("div",{className:"tm-time-group",children:[d.jsx("label",{children:i("start")}),d.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>r(t,"timeStarted",u.target.value)})]}),d.jsxs("div",{className:"tm-time-group",children:[d.jsx("label",{children:i("end")}),d.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>r(t,"timeEnded",u.target.value)})]}),d.jsxs("div",{className:"tm-time-group",children:[d.jsx("label",{children:i("regHrs")}),d.jsx("input",{type:"number",placeholder:"0",value:e.hours,onChange:u=>r(t,"hours",u.target.value)})]}),d.jsxs("div",{className:"tm-time-group",children:[d.jsx("label",{children:i("otHrs")}),d.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>r(t,"overtimeHours",u.target.value)})]})]})]})}function y3({batchHours:e,setBatchHours:t,namedWorkerCount:r,onApply:n,onClose:i,t:s}){const c=u=>{let m,h,g,p;switch(u){case"full":m="07:00",h="15:30",g="8",p="";break;case"10hr":m="06:00",h="16:30",g="8",p="2";break;case"half":m="07:00",h="11:00",g="4",p="";break;default:return}t({timeStarted:m,timeEnded:h,hours:g,overtimeHours:p})};return d.jsx("div",{className:"tm-modal-overlay",onClick:i,children:d.jsxs("div",{className:"tm-batch-modal",onClick:u=>u.stopPropagation(),children:[d.jsxs("h3",{children:[d.jsx(Lo,{size:18})," ",s("applySameHours")]}),d.jsx("p",{className:"tm-batch-description",children:s("batchDescription")}),d.jsxs("div",{className:"tm-time-presets",children:[d.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("full"),children:s("preset8hr")}),d.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("10hr"),children:s("preset10hr")}),d.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("half"),children:s("preset4hr")})]}),d.jsxs("div",{className:"tm-batch-form",children:[d.jsxs("div",{className:"tm-batch-row",children:[d.jsxs("div",{className:"tm-batch-field",children:[d.jsx("label",{children:s("timeStarted")}),d.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>{const m=u.target.value,h=s1(m,e.timeEnded);t({...e,timeStarted:m,...h||{}})}})]}),d.jsxs("div",{className:"tm-batch-field",children:[d.jsx("label",{children:s("timeEnded")}),d.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>{const m=u.target.value,h=s1(e.timeStarted,m);t({...e,timeEnded:m,...h||{}})}})]})]}),d.jsxs("div",{className:"tm-batch-row",children:[d.jsxs("div",{className:"tm-batch-field",children:[d.jsx("label",{children:s("regularHours")}),d.jsx("input",{type:"number",placeholder:"8",value:e.hours,onChange:u=>t({...e,hours:u.target.value})})]}),d.jsxs("div",{className:"tm-batch-field",children:[d.jsx("label",{children:s("overtimeHours")}),d.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>t({...e,overtimeHours:u.target.value})})]})]})]}),d.jsxs("div",{className:"tm-batch-preview",children:[d.jsxs("strong",{children:[s("willApplyTo"),":"]}),d.jsxs("span",{children:[r," ",s("workers_plural")]})]}),d.jsxs("div",{className:"tm-batch-actions",children:[d.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:s("cancel")}),d.jsx("button",{type:"button",className:"btn btn-primary",onClick:n,disabled:!e.hours&&!e.overtimeHours,children:s("applyToAll")})]})]})})}function b3({supervision:e,operators:t,laborers:r,dynamicWorkers:n,activeLaborClassIds:i,setActiveLaborClassIds:s,laborCategories:c,laborClasses:u,hasCustomLaborClasses:m,loadingLaborClasses:h,todaysCrew:g,showBatchHoursModal:p,setShowBatchHoursModal:_,batchHours:x,setBatchHours:w,loadingPreviousCrew:j,namedWorkers:S,workersNeedingHours:O,totalRegHours:C,totalOTHours:A,onLoadPreviousCrew:k,onApplyBatchHours:D,onApplyInlinePreset:M,onAddCrewWorker:z,onActivateLaborClass:K,onDeactivateLaborClass:Q,addSupervision:ne,updateSupervision:G,removeSupervision:I,addOperator:ie,updateOperator:pe,removeOperator:q,addLaborer:R,updateLaborer:U,removeLaborer:J,addDynamicWorker:B,updateDynamicWorker:fe,removeDynamicWorker:je,getInactiveLaborClasses:te,t:H,lang:Ee,onShowToast:Te}){const Ie=S.length;return d.jsxs("div",{className:"tm-step-content",children:[d.jsxs("div",{className:"tm-crew-summary-bar",children:[d.jsxs("div",{className:"tm-summary-left",children:[d.jsx("span",{className:"tm-summary-count",children:S.length}),d.jsx("span",{className:"tm-summary-label",children:S.length===1?H("worker"):H("workers_plural")})]}),d.jsxs("div",{className:"tm-summary-middle",children:[d.jsxs("span",{className:"tm-summary-hours",children:[C+A,"h"]}),d.jsx("span",{className:"tm-summary-label",children:H("total")})]}),O>0&&d.jsxs("div",{className:"tm-summary-warning",children:[d.jsx(qb,{size:14}),d.jsxs("span",{children:[O," ",H("needHours")]})]})]}),d.jsxs("div",{className:"tm-quick-actions-row",children:[d.jsxs("button",{className:"tm-quick-action",onClick:k,disabled:j,children:[d.jsx(pq,{size:16}),d.jsx("span",{children:H(j?"loading":"sameAsYesterday")})]}),S.length>0&&d.jsxs("div",{className:"tm-time-presets-inline",children:[d.jsx("button",{className:"tm-preset-chip",onClick:()=>M("8hr"),children:"8h"}),d.jsx("button",{className:"tm-preset-chip",onClick:()=>M("10hr"),children:"10h"}),d.jsx("button",{className:"tm-preset-chip",onClick:()=>M("4hr"),children:"4h"}),d.jsx("button",{className:"tm-preset-chip more",onClick:()=>_(!0),title:H("customHours"),children:d.jsx(Lo,{size:14})})]})]}),g.length>0&&d.jsxs("div",{className:"tm-crew-select-section",children:[d.jsxs("div",{className:"tm-section-header",children:[d.jsxs("h4",{children:[d.jsx(qo,{size:16})," ",H("selectTMWorkers")]}),d.jsx("span",{className:"tm-section-hint",children:H("tapToAdd")})]}),d.jsx("div",{className:"tm-crew-grid",children:g.map((ge,Le)=>{const ee=e.some(oe=>oe.name.toLowerCase()===ge.name.toLowerCase())||t.some(oe=>oe.name.toLowerCase()===ge.name.toLowerCase())||r.some(oe=>oe.name.toLowerCase()===ge.name.toLowerCase()),we=Object.values(n).some(oe=>oe.some(Fe=>Fe.name.toLowerCase()===ge.name.toLowerCase())),xe=ee||we;return d.jsxs("button",{className:`tm-crew-item ${xe?"added":""}`,onClick:()=>{xe||z(ge)},disabled:xe,children:[d.jsx("span",{className:"tm-crew-item-name",children:ge.name}),d.jsx("span",{className:`tm-crew-item-role ${(ge.role||"laborer").toLowerCase()}`,children:ge.role||"Laborer"}),xe&&d.jsx("span",{className:"tm-crew-item-check",children:""})]},Le)})})]}),m&&!h&&d.jsxs(d.Fragment,{children:[c.map(ge=>{const Le=u.filter(ee=>ee.category_id===ge.id&&i.has(ee.id));return Le.length===0?null:d.jsxs("div",{className:"tm-labor-category-section",children:[d.jsx("div",{className:"tm-category-header",children:ge.name}),Le.map(ee=>d.jsxs("div",{className:"tm-field",children:[d.jsxs("div",{className:"tm-field-header",children:[d.jsx("label",{children:ee.name}),d.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>Q(ee.id),title:H("removeClass"),children:""})]}),d.jsx("div",{className:"tm-workers-list",children:(n[ee.id]||[]).map((we,xe)=>d.jsx(fc,{worker:we,index:xe,onUpdate:(oe,Fe,ve)=>fe(ee.id,oe,Fe,ve),onRemove:oe=>je(ee.id,oe),t:H},xe))}),d.jsxs("button",{className:"tm-add-btn",onClick:()=>B(ee.id),children:["+ ",H("add")," ",ee.name]})]},ee.id))]},ge.id)}),u.filter(ge=>!ge.category_id&&i.has(ge.id)).map(ge=>d.jsxs("div",{className:"tm-field",children:[d.jsxs("div",{className:"tm-field-header",children:[d.jsx("label",{children:ge.name}),d.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>Q(ge.id),title:H("removeClass"),children:""})]}),d.jsx("div",{className:"tm-workers-list",children:(n[ge.id]||[]).map((Le,ee)=>d.jsx(fc,{worker:Le,index:ee,onUpdate:(we,xe,oe)=>fe(ge.id,we,xe,oe),onRemove:we=>je(ge.id,we),t:H},ee))}),d.jsxs("button",{className:"tm-add-btn",onClick:()=>B(ge.id),children:["+ ",H("add")," ",ge.name]})]},ge.id)),te().length>0&&d.jsx("div",{className:"tm-add-labor-class-section",children:d.jsxs("select",{className:"tm-add-labor-class-select",value:"",onChange:ge=>{ge.target.value&&K(ge.target.value)},children:[d.jsxs("option",{value:"",children:["+ ",H("addLaborClass")]}),c.map(ge=>{const Le=te().filter(ee=>ee.category_id===ge.id);return Le.length===0?null:d.jsx("optgroup",{label:ge.name,children:Le.map(ee=>d.jsx("option",{value:ee.id,children:ee.name},ee.id))},ge.id)}),te().filter(ge=>!ge.category_id).length>0&&d.jsx("optgroup",{label:H("other"),children:te().filter(ge=>!ge.category_id).map(ge=>d.jsx("option",{value:ge.id,children:ge.name},ge.id))})]})}),i.size===0&&d.jsx("div",{className:"tm-no-labor-classes",children:d.jsx("p",{children:H("noLaborClassesYet")})})]}),h&&d.jsxs("div",{className:"tm-loading-labor-classes",children:[d.jsx(Gs,{size:20,className:"tm-spinner"}),d.jsx("span",{children:H("loadingLaborClasses")})]}),!m&&!h&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:H("supervision")}),d.jsx("div",{className:"tm-workers-list",children:e.map((ge,Le)=>d.jsx(fc,{worker:ge,index:Le,onUpdate:G,onRemove:I,t:H,roleSelect:d.jsx("div",{className:"tm-role-select",children:d.jsxs("select",{value:ge.role,onChange:ee=>G(Le,"role",ee.target.value),children:[d.jsx("option",{value:"Foreman",children:H("foreman")}),d.jsx("option",{value:"Superintendent",children:H("superintendent")})]})})},Le))}),d.jsx("button",{className:"tm-add-btn",onClick:ne,children:H("addSupervision")})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:H("operators")}),d.jsx("div",{className:"tm-workers-list",children:t.map((ge,Le)=>d.jsx(fc,{worker:ge,index:Le,onUpdate:pe,onRemove:q,t:H},Le))}),d.jsx("button",{className:"tm-add-btn",onClick:ie,children:H("addOperator")})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:H("laborers")}),d.jsx("div",{className:"tm-workers-list",children:r.map((ge,Le)=>d.jsx(fc,{worker:ge,index:Le,onUpdate:U,onRemove:J,t:H},Le))}),d.jsx("button",{className:"tm-add-btn",onClick:R,children:H("addLaborer")})]})]}),p&&d.jsx(y3,{batchHours:x,setBatchHours:w,namedWorkerCount:Ie,onApply:D,onClose:()=>_(!1),t:H})]})}function _3({companyId:e,items:t,setItems:r,t:n,lang:i,onShowToast:s}){const[c,u]=y.useState(null),[m,h]=y.useState([]),[g,p]=y.useState(!1),[_,x]=y.useState(""),[w,j]=y.useState([]),[S,O]=y.useState([]),[C,A]=y.useState(!1),[k,D]=y.useState({name:"",category:"",quantity:""}),M=y.useRef(null),z=y.useRef(null);y.useEffect(()=>{c&&e&&K(c)},[c,e]),y.useEffect(()=>(!c&&M.current&&(z.current=setTimeout(()=>{M.current?.focus()},100)),()=>{z.current&&clearTimeout(z.current)}),[c]);const K=async q=>{p(!0);try{const R=await be.getMaterialsEquipmentByCategory(e,q);h(R)}catch(R){console.error("Error loading items:",R),s("Error loading items","error")}finally{p(!1)}},Q=async()=>{if(!(S.length>0))try{const q=[];for(const R of Pg){const U=await be.getMaterialsEquipmentByCategory(e,R);q.push(...U.map(J=>({...J,category:R})))}O(q)}catch(q){console.error("Error loading all materials:",q)}},ne=q=>{if(x(q),!q.trim()){j([]);return}const R=q.toLowerCase(),U=S.filter(J=>J.name.toLowerCase().includes(R)||J.category.toLowerCase().includes(R));j(U.slice(0,10))},G=q=>{const R=t.findIndex(U=>U.material_equipment_id===q.id);R>=0?r(t.map((U,J)=>J===R?{...U,quantity:U.quantity+1}:U)):r([...t,{material_equipment_id:q.id,name:q.name,unit:q.unit,category:q.category,quantity:1,isCustom:!1}]),s(`Added ${q.name}`,"success")},I=()=>{if(!k.name||!k.category||!k.quantity){s("Fill in all fields","error");return}r([...t,{material_equipment_id:null,custom_name:k.name,custom_category:k.category,name:k.name,category:k.category,quantity:parseFloat(k.quantity),unit:"each",isCustom:!0}]),D({name:"",category:"",quantity:""}),A(!1),u(null),s("Custom item added","success")},ie=(q,R)=>{const U=parseFloat(R)||0;U<=0?r(t.filter((J,B)=>B!==q)):r(t.map((J,B)=>B===q?{...J,quantity:U}:J))},pe=()=>{C?A(!1):c&&(u(null),A(!1))};return c||C?d.jsxs("div",{className:"tm-step-content",children:[d.jsxs("div",{className:"tm-wizard-header",style:{margin:"-1rem -1rem 1rem -1rem",padding:"0.75rem 1rem"},children:[d.jsx("button",{className:"tm-back-btn",onClick:pe,children:""}),d.jsx("h2",{children:C?"Add Custom Item":c}),d.jsxs("div",{className:"tm-item-count",children:[t.length," items"]})]}),C?d.jsxs("div",{className:"tm-custom-form",children:[d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:"Item Name"}),d.jsx("input",{type:"text",placeholder:"What did you use?",value:k.name,onChange:q=>D({...k,name:q.target.value}),autoFocus:!0})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:"Category"}),d.jsx("div",{className:"tm-category-select",children:Pg.map(q=>d.jsx("button",{className:`tm-cat-chip ${k.category===q?"active":""}`,onClick:()=>D({...k,category:q}),children:q},q))})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:"Quantity"}),d.jsx("input",{type:"number",placeholder:"How many?",value:k.quantity,onChange:q=>D({...k,quantity:q.target.value})})]}),d.jsx("button",{className:"tm-big-btn primary",onClick:I,children:"Add Custom Item"})]}):d.jsx("div",{className:"tm-item-grid",children:g?d.jsx("div",{className:"tm-loading",children:"Loading..."}):d.jsxs(d.Fragment,{children:[m.map(q=>{const R=t.find(U=>U.material_equipment_id===q.id);return d.jsxs("button",{className:`tm-item-card ${R?"added":""}`,onClick:()=>G(q),children:[d.jsx("span",{className:"tm-item-name",children:q.name}),d.jsx("span",{className:"tm-item-unit",children:q.unit}),R&&d.jsx("span",{className:"tm-item-badge",children:R.quantity})]},q.id)}),d.jsxs("button",{className:"tm-item-card custom",onClick:()=>A(!0),children:[d.jsx("span",{className:"tm-item-name",children:"+ Add Other"}),d.jsx("span",{className:"tm-item-unit",children:"Not on list"})]})]})}),!C&&t.length>0&&d.jsx("div",{className:"tm-wizard-footer",children:d.jsxs("button",{className:"tm-big-btn primary",onClick:()=>u(null),children:["Done Adding (",t.length," items)"]})})]}):d.jsxs("div",{className:"tm-step-content",children:[d.jsxs("div",{className:"tm-field tm-search-field",children:[d.jsxs("div",{className:"tm-search-input-wrapper",children:[d.jsx(gq,{size:18,className:"tm-search-icon"}),d.jsx("input",{ref:M,type:"text",placeholder:n("searchMaterials"),value:_,onChange:q=>ne(q.target.value),onFocus:()=>Q(),className:"tm-search-input"}),_&&d.jsx("button",{className:"tm-search-clear",onClick:()=>{x(""),j([])},children:""})]}),_&&w.length>0&&d.jsx("div",{className:"tm-search-results",children:w.map((q,R)=>{const U=t.find(J=>J.id===q.id);return d.jsxs("button",{className:`tm-search-result-item ${U?"added":""}`,onClick:()=>{U?ie(t.indexOf(U),U.quantity+1):r([...t,{...q,quantity:1,isCustom:!1}]),x(""),j([])},children:[d.jsx("span",{className:"tm-search-result-name",children:q.name}),d.jsx("span",{className:"tm-search-result-category",children:q.category}),U&&d.jsxs("span",{className:"tm-search-result-qty",children:["",U.quantity]})]},R)})}),_&&w.length===0&&d.jsx("div",{className:"tm-search-no-results",children:n("noSearchResults")})]}),d.jsxs("div",{className:"tm-field",children:[d.jsx("label",{children:n("orBrowse")}),d.jsx("div",{className:"tm-category-grid",children:Pg.map(q=>{const R=t.filter(U=>U.category===q);return d.jsxs("button",{className:"tm-category-card",onClick:()=>u(q),children:[d.jsx("span",{className:"tm-cat-name",children:q}),R.length>0&&d.jsx("span",{className:"tm-cat-count",children:R.length})]},q)})})]}),t.length>0&&d.jsxs("div",{className:"tm-field",children:[d.jsxs("label",{children:["Added Items (",t.length,")"]}),d.jsx("div",{className:"tm-added-list",children:t.map((q,R)=>d.jsxs("div",{className:"tm-added-item",children:[d.jsxs("div",{className:"tm-added-info",children:[q.isCustom&&d.jsx("span",{className:"tm-custom-badge",children:"Custom"}),d.jsx("span",{className:"tm-added-name",children:q.name})]}),d.jsxs("div",{className:"tm-added-qty",children:[d.jsx("button",{onClick:()=>ie(R,q.quantity-1),children:""}),d.jsx("span",{children:q.quantity}),d.jsx("button",{onClick:()=>ie(R,q.quantity+1),children:"+"})]})]},R))})]})]})}function x3({photos:e,onPhotoAdd:t,onRemovePhoto:r,maxPhotos:n,selectedCorId:i,setSelectedCorId:s,assignableCORs:c,lang:u}){const m=p3(u);return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:`tm-action-card-prominent ${e.length>0?"has-content":"needs-action"}`,children:[d.jsxs("div",{className:"tm-action-card-header",children:[d.jsx("div",{className:"tm-action-card-icon",children:d.jsx(_y,{size:24})}),d.jsxs("div",{className:"tm-action-card-title",children:[d.jsx("h4",{children:m("photoEvidence")}),d.jsx("span",{className:"tm-action-card-status",children:e.length>0?`${e.length} ${m("photosAdded")}`:m("recommendedForBilling")})]})]}),e.length>0&&d.jsx("div",{className:"tm-photo-preview-row",children:e.map(h=>d.jsxs("div",{className:"tm-photo-preview-thumb",children:[d.jsx("img",{src:h.previewUrl,alt:h.name}),h.latitude&&d.jsx("span",{className:"tm-photo-gps-badge",title:`${h.latitude.toFixed(4)}, ${h.longitude.toFixed(4)}`,children:d.jsx(xy,{size:10})}),d.jsx("button",{className:"tm-photo-remove-x",onClick:()=>r(h.id),children:""})]},h.id))}),d.jsxs("label",{className:`tm-action-card-btn ${e.length===0?"primary":""}`,children:[d.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t,style:{display:"none"}}),d.jsx(_y,{size:18}),d.jsx("span",{children:e.length>0?m("addMorePhotos"):m("addPhotos")})]})]}),d.jsxs("div",{className:`tm-action-card-prominent ${i?"has-content":""}`,children:[d.jsxs("div",{className:"tm-action-card-header",children:[d.jsx("div",{className:"tm-action-card-icon cor",children:d.jsx(vq,{size:24})}),d.jsxs("div",{className:"tm-action-card-title",children:[d.jsx("h4",{children:m("linkToChangeOrder")}),d.jsx("span",{className:"tm-action-card-status",children:i?`${m("linkedTo")}: ${c.find(h=>h.id===i)?.cor_number||""}`:m("optionalLinkCOR")})]})]}),d.jsxs("select",{value:i,onChange:h=>s(h.target.value),className:"tm-cor-select-prominent",children:[d.jsx("option",{value:"",children:m("selectCOROptional")}),c.map(h=>d.jsxs("option",{value:h.id,children:[h.cor_number,": ",h.title||"Untitled"," (",h.status,")"]},h.id))]}),c.length===0&&d.jsx("p",{className:"tm-cor-hint",children:m("noActiveCORs")})]})]})}const w3=y.lazy(()=>Mr(()=>import("./SignatureLinkGenerator-BorMNDtA.js"),__vite__mapDeps([0,1,2,3,4]))),j3=y.lazy(()=>Mr(()=>import("./TMClientSignature-DXs1iw9B.js"),__vite__mapDeps([5,1,2,3,4])));function S3({step:e,setStep:t,project:r,companyId:n,workDate:i,cePcoNumber:s,notes:c,photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:g,selectedCorId:p,setSelectedCorId:_,assignableCORs:x,items:w,hasCustomLaborClasses:j,validDynamicWorkersList:S,validSupervision:O,validOperators:C,validLaborers:A,totalWorkers:k,totalRegHours:D,totalOTHours:M,submittedByName:z,setSubmittedByName:K,submittedTicket:Q,submitting:ne,submitProgress:G,clientSigned:I,setClientSigned:ie,showSignatureLinkModal:pe,setShowSignatureLinkModal:q,showOnSiteSignature:R,setShowOnSiteSignature:U,onRetryPhotoUpload:J,t:B,lang:fe,onShowToast:je}){return e===5&&Q?d.jsxs("div",{className:"tm-step-content tm-success-step",children:[d.jsxs("div",{className:"tm-success-header",children:[d.jsx("div",{className:"tm-success-icon",children:d.jsx(na,{size:48})}),d.jsx("h2",{children:B("tmSubmitted")}),d.jsx("p",{className:"tm-success-subtitle",children:B("ticketSavedReady")})]}),d.jsxs("div",{className:"tm-success-summary",children:[d.jsxs("div",{className:"tm-success-stat",children:[d.jsx("span",{className:"tm-success-stat-value",children:k}),d.jsx("span",{className:"tm-success-stat-label",children:B("workersLabel")})]}),d.jsxs("div",{className:"tm-success-stat",children:[d.jsx("span",{className:"tm-success-stat-value",children:D+M}),d.jsx("span",{className:"tm-success-stat-label",children:B("totalHours")})]}),d.jsxs("div",{className:"tm-success-stat",children:[d.jsx("span",{className:"tm-success-stat-value",children:new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),d.jsx("span",{className:"tm-success-stat-label",children:B("workDate")})]})]}),u.some(te=>te.status==="failed")&&d.jsxs("div",{className:"tm-failed-photos-section",children:[d.jsxs("div",{className:"tm-failed-photos-header",children:[d.jsx(qb,{size:18}),d.jsx("span",{children:fe==="en"?`${u.filter(te=>te.status==="failed").length} photo(s) failed to upload`:`${u.filter(te=>te.status==="failed").length} foto(s) no se subieron`})]}),d.jsx("div",{className:"tm-failed-photos-grid",children:u.filter(te=>te.status==="failed").map(te=>d.jsxs("div",{className:"tm-failed-photo-item",children:[d.jsx("img",{src:te.previewUrl,alt:te.name}),d.jsx("div",{className:"tm-failed-photo-overlay",children:d.jsx("button",{className:"tm-retry-photo-btn",onClick:()=>J(te.id,Q.id),disabled:te.status==="uploading"||te.status==="compressing",children:te.status==="uploading"||te.status==="compressing"?d.jsx(Gs,{size:16,className:"tm-spinner"}):d.jsxs(d.Fragment,{children:[d.jsx(PS,{size:16}),d.jsx("span",{children:B("retry")})]})})}),te.error&&d.jsxs("div",{className:"tm-failed-photo-error",title:te.error,children:[te.error.substring(0,20),te.error.length>20?"...":""]})]},te.id))}),d.jsxs("button",{className:"tm-retry-all-btn",onClick:async()=>{const te=u.filter(H=>H.status==="failed");for(const H of te)await J(H.id,Q.id)},children:[d.jsx(PS,{size:16}),B("retryAllPhotos")]})]}),u.length>0&&u.every(te=>te.status==="confirmed")&&d.jsxs("div",{className:"tm-photos-success",children:[d.jsx(Vi,{size:16}),d.jsx("span",{children:fe==="en"?`All ${u.length} photo(s) uploaded successfully`:`${u.length} foto(s) subidas exitosamente`})]}),d.jsxs("div",{className:"tm-signature-options",children:[d.jsx("h3",{children:B("getClientSignature")}),d.jsx("p",{className:"tm-signature-description",children:B("signatureDescription")}),I?d.jsxs("div",{className:"tm-signed-confirmation",children:[d.jsx(na,{size:32,className:"tm-signed-icon"}),d.jsx("span",{children:B("clientSignatureCollected")})]}):d.jsxs("div",{className:"tm-signature-buttons",children:[d.jsxs("button",{className:"tm-signature-option-btn primary",onClick:()=>U(!0),children:[d.jsx("div",{className:"tm-signature-option-icon",children:d.jsx(Oc,{size:24})}),d.jsxs("div",{className:"tm-signature-option-text",children:[d.jsx("span",{className:"tm-signature-option-title",children:B("signNowOnSite")}),d.jsx("span",{className:"tm-signature-option-desc",children:B("clientSignsDevice")})]})]}),d.jsxs("button",{className:"tm-signature-option-btn",onClick:()=>q(!0),children:[d.jsx("div",{className:"tm-signature-option-icon",children:d.jsx(Oc,{size:24})}),d.jsxs("div",{className:"tm-signature-option-text",children:[d.jsx("span",{className:"tm-signature-option-title",children:B("sendSignatureLink")}),d.jsx("span",{className:"tm-signature-option-desc",children:B("clientSignsLater")})]})]})]})]}),pe&&d.jsx(y.Suspense,{fallback:d.jsx("div",{className:"loading",children:"Loading..."}),children:d.jsx(w3,{documentType:"tm_ticket",documentId:Q.id,companyId:n,projectId:r.id,project:r,documentTitle:`T&M - ${new Date(i).toLocaleDateString()}`,onClose:()=>q(!1),onShowToast:je})}),R&&d.jsx(y.Suspense,{fallback:d.jsx("div",{className:"loading",children:"Loading..."}),children:d.jsx(j3,{ticketId:Q.id,ticketSummary:{workDate:i,workerCount:k,totalHours:D+M},lang:fe,onSave:()=>{U(!1),ie(!0)},onClose:()=>U(!1),onShowToast:je})})]}):d.jsxs("div",{className:"tm-step-content",children:[d.jsx(x3,{photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:g,selectedCorId:p,setSelectedCorId:_,assignableCORs:x,lang:fe}),d.jsx("div",{className:"tm-review-divider",children:d.jsx("span",{children:B("ticketSummary")})}),d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[""," ",B("workDate")]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:B("edit")})]}),d.jsxs("div",{className:"tm-review-row",children:[d.jsx("span",{children:new Date(i).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),s&&d.jsxs("span",{children:["CE/PCO: ",s]})]})]}),c&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(Go,{size:16,className:"inline-icon"})," ",B("notes")]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:B("edit")})]}),d.jsx("div",{className:"tm-review-notes",children:c})]}),j&&S.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(qo,{size:16,className:"inline-icon"})," ",B("workersLabel")," (",D+M," hrs)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),d.jsx("div",{className:"tm-review-list",children:S.map((te,H)=>d.jsxs("div",{className:"tm-review-row-detailed",children:[d.jsxs("div",{className:"tm-review-worker-name",children:[d.jsx("span",{className:"tm-role-badge",children:te.role})," ",te.name]}),d.jsxs("div",{className:"tm-review-worker-details",children:[te.time_started&&te.time_ended&&d.jsxs("span",{className:"tm-review-time",children:[te.time_started," - ",te.time_ended]}),d.jsxs("span",{className:"tm-review-hours",children:[te.hours||0," reg",te.overtime_hours>0?` + ${te.overtime_hours} OT`:""]})]})]},H))})]}),!j&&O.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(yq,{size:16,className:"inline-icon"})," Supervision (",O.reduce((te,H)=>te+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),d.jsx("div",{className:"tm-review-list",children:O.map((te,H)=>d.jsxs("div",{className:"tm-review-row-detailed",children:[d.jsxs("div",{className:"tm-review-worker-name",children:[d.jsx("span",{className:"tm-role-badge",children:te.role})," ",te.name]}),d.jsxs("div",{className:"tm-review-worker-details",children:[te.timeStarted&&te.timeEnded&&d.jsxs("span",{className:"tm-review-time",children:[te.timeStarted," - ",te.timeEnded]}),d.jsxs("span",{className:"tm-review-hours",children:[te.hours||0," reg",parseFloat(te.overtimeHours)>0?` + ${te.overtimeHours} OT`:""]})]})]},H))})]}),!j&&C.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[""," Operators (",C.reduce((te,H)=>te+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),d.jsx("div",{className:"tm-review-list",children:C.map((te,H)=>d.jsxs("div",{className:"tm-review-row-detailed",children:[d.jsx("div",{className:"tm-review-worker-name",children:te.name}),d.jsxs("div",{className:"tm-review-worker-details",children:[te.timeStarted&&te.timeEnded&&d.jsxs("span",{className:"tm-review-time",children:[te.timeStarted," - ",te.timeEnded]}),d.jsxs("span",{className:"tm-review-hours",children:[te.hours||0," reg",parseFloat(te.overtimeHours)>0?` + ${te.overtimeHours} OT`:""]})]})]},H))})]}),!j&&A.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(qo,{size:16,className:"inline-icon"})," Laborers (",A.reduce((te,H)=>te+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),d.jsx("div",{className:"tm-review-list",children:A.map((te,H)=>d.jsxs("div",{className:"tm-review-row-detailed",children:[d.jsx("div",{className:"tm-review-worker-name",children:te.name}),d.jsxs("div",{className:"tm-review-worker-details",children:[te.timeStarted&&te.timeEnded&&d.jsxs("span",{className:"tm-review-time",children:[te.timeStarted," - ",te.timeEnded]}),d.jsxs("span",{className:"tm-review-hours",children:[te.hours||0," reg",parseFloat(te.overtimeHours)>0?` + ${te.overtimeHours} OT`:""]})]})]},H))})]}),w.length>0&&d.jsxs("div",{className:"tm-review-section",children:[d.jsxs("div",{className:"tm-review-section-header",children:[d.jsxs("h4",{children:[d.jsx(bq,{size:16,className:"inline-icon"})," Materials & Equipment (",w.length," items)"]}),d.jsx("button",{className:"tm-edit-link",onClick:()=>t(3),children:B("edit")})]}),d.jsx("div",{className:"tm-review-list",children:w.map((te,H)=>d.jsxs("div",{className:"tm-review-row",children:[d.jsxs("span",{children:[te.isCustom&&d.jsxs(d.Fragment,{children:[d.jsx(_q,{size:14,className:"inline-icon"})," "]}),te.name]}),d.jsxs("span",{children:[te.quantity," ",te.unit]})]},H))})]}),d.jsxs("div",{className:"tm-review-section tm-certification",children:[d.jsx("div",{className:"tm-review-header",children:d.jsxs("span",{children:[d.jsx(Oc,{size:16,className:"inline-icon"})," ",B("submittedBy")]})}),d.jsx("input",{type:"text",className:"tm-certification-input",placeholder:B("enterYourName"),value:z,onChange:te=>K(te.target.value)}),d.jsx("p",{className:"tm-certification-note",children:B("certifyAccurate")})]})]})}const l1=()=>{const e=new Uint8Array(6);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(36)).join("")},Ld=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function E3({project:e,companyId:t,maxPhotos:r=10,onSubmit:n,onCancel:i,onShowToast:s}){const[c,u]=y.useState(1),[m,h]=y.useState(new Date().toISOString().split("T")[0]),[g,p]=y.useState(null),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState(!1),[C,A]=y.useState(""),[k,D]=y.useState(""),[M,z]=y.useState(""),[K,Q]=y.useState([]),[ne,G]=y.useState(!1),[I,ie]=y.useState(!1),[pe,q]=y.useState({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),[R,U]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}]),[J,B]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[fe,je]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[te,H]=y.useState([]),[Ee,Te]=y.useState(""),[Ie,ge]=y.useState([]),[Le,ee]=y.useState(!1),[we,xe]=y.useState(""),[oe,Fe]=y.useState([]),[ve,Ne]=y.useState(!1),[Me,Et]=y.useState("en"),Re=Y=>VN[Me][Y]||Y,[Bt,_t]=y.useState([]),[Nt,Kr]=y.useState([]),[jt,Ge]=y.useState({}),[Yr,Sn]=y.useState(!0),[Gr,Er]=y.useState(new Set),Vt=Nt.length>0;y.useEffect(()=>{er(),he();const Y=be.subscribeToCORs?.(e.id,()=>{he()});return()=>{Y?.unsubscribe?.()}},[e.id]),y.useEffect(()=>{(async()=>{if(!t){Sn(!1);return}try{const ce=await be.getLaborClassesForField(t);_t(ce.categories||[]),Kr(ce.classes||[])}catch(ce){console.error("Error loading labor classes:",ce)}finally{Sn(!1)}})()},[t]),y.useEffect(()=>{if(Yr||Nt.length===0)return;const Y=new Set;oe.forEach(le=>{le.labor_class_id&&Y.add(le.labor_class_id)});const ce={},me=new Set;Y.forEach(le=>{Nt.some(ae=>ae.id===le)&&(ce[le]=[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}],me.add(le))}),Ge(le=>Object.keys(le).length===0?ce:le),Er(le=>le.size===0?me:le)},[Nt,oe,Yr]);const he=async()=>{G(!0);try{const Y=await be.getAssignableCORs(e.id);Q(Y||[])}catch(Y){console.error("Error loading assignable CORs:",Y)}finally{G(!1)}},st=()=>{const{timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}=pe;let ae=0;if(Vt){const Se={};Object.entries(jt).forEach(([Ue,Ke])=>{Se[Ue]=Ke.map(ut=>ut&&ut.name&&ut.name.trim()?(ae++,{...ut,timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}):ut)}),Ge(Se)}else U(R.map(Se=>Se&&Se.name&&Se.name.trim()?(ae++,{...Se,timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}):Se)),B(J.map(Se=>Se&&Se.name&&Se.name.trim()?(ae++,{...Se,timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}):Se)),je(fe.map(Se=>Se&&Se.name&&Se.name.trim()?(ae++,{...Se,timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}):Se));ie(!1),q({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),ae>0?s(Re("appliedHours").replace("{count}",ae),"success"):s(Re("addWorkersFirst"),"info")},En=Y=>{let ce,me,le,ae;switch(Y){case"8hr":ce="07:00",me="15:30",le="8",ae="";break;case"10hr":ce="06:00",me="16:30",le="8",ae="2";break;case"4hr":ce="07:00",me="11:00",le="4",ae="";break;default:return}let Se=0;if(Vt){const Ue={};Object.entries(jt).forEach(([Ke,ut])=>{Ue[Ke]=ut.map(Lr=>Lr&&Lr.name&&Lr.name.trim()?(Se++,{...Lr,timeStarted:ce,timeEnded:me,hours:le,overtimeHours:ae}):Lr)}),Ge(Ue)}else U(Ue=>Ue.map(Ke=>Ke&&Ke.name&&Ke.name.trim()?(Se++,{...Ke,timeStarted:ce,timeEnded:me,hours:le,overtimeHours:ae}):Ke)),B(Ue=>Ue.map(Ke=>Ke&&Ke.name&&Ke.name.trim()?(Se++,{...Ke,timeStarted:ce,timeEnded:me,hours:le,overtimeHours:ae}):Ke)),je(Ue=>Ue.map(Ke=>Ke&&Ke.name&&Ke.name.trim()?(Se++,{...Ke,timeStarted:ce,timeEnded:me,hours:le,overtimeHours:ae}):Ke));Se>0?s(Re("appliedHours").replace("{count}",Se),"success"):s(Re("addWorkersFirst"),"info")},er=async()=>{try{const Y=await be.getCrewCheckin(e.id);Y?.workers&&Fe(Y.workers)}catch(Y){console.error("Error loading crew:",Y)}},$t=async()=>{Ne(!0);try{const Y=await be.getPreviousTicketCrew(e.id,m);if(!Y||Y.totalWorkers===0){s(Re("noPreviousCrew"),"info");return}Vt&&Y.dynamicWorkers?Ge(Y.dynamicWorkers):(Y.supervision&&U(Y.supervision),Y.operators&&B(Y.operators),Y.laborers&&je(Y.laborers));const ce=new Date(Y.workDate).toLocaleDateString();s(Re("loadedWorkers").replace("{count}",Y.totalWorkers).replace("{date}",ce),"success")}catch(Y){console.error("Error loading previous crew:",Y),s(Re("errorLoadingCrew"),"error")}finally{Ne(!1)}},zt=()=>{U([...R,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},ht=(Y,ce,me)=>{U(R.map((le,ae)=>{if(ae!==Y)return le;const Se={...le,[ce]:me};if(ce==="timeStarted"||ce==="timeEnded"){const Ue=ce==="timeStarted"?me:le.timeStarted,Ke=ce==="timeEnded"?me:le.timeEnded,ut=Ld(Ue,Ke);ut&&(Se.hours=ut.hours,Se.overtimeHours=ut.overtimeHours)}return Se}))},an=Y=>{R.length>1?U(R.filter((ce,me)=>me!==Y)):U([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},Yn=()=>{je([...fe,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},ua=(Y,ce,me)=>{je(fe.map((le,ae)=>{if(ae!==Y)return le;const Se={...le,[ce]:me};if(ce==="timeStarted"||ce==="timeEnded"){const Ue=ce==="timeStarted"?me:le.timeStarted,Ke=ce==="timeEnded"?me:le.timeEnded,ut=Ld(Ue,Ke);ut&&(Se.hours=ut.hours,Se.overtimeHours=ut.overtimeHours)}return Se}))},pi=Y=>{fe.length>1?je(fe.filter((ce,me)=>me!==Y)):je([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},gi=()=>{B([...J,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},Ea=(Y,ce,me)=>{B(J.map((le,ae)=>{if(ae!==Y)return le;const Se={...le,[ce]:me};if(ce==="timeStarted"||ce==="timeEnded"){const Ue=ce==="timeStarted"?me:le.timeStarted,Ke=ce==="timeEnded"?me:le.timeEnded,ut=Ld(Ue,Ke);ut&&(Se.hours=ut.hours,Se.overtimeHours=ut.overtimeHours)}return Se}))},On=Y=>{J.length>1?B(J.filter((ce,me)=>me!==Y)):B([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},vi=Y=>{Ge(ce=>({...ce,[Y]:[...ce[Y]||[],{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))},Oa=(Y,ce,me,le)=>{Ge(ae=>({...ae,[Y]:(ae[Y]||[]).map((Se,Ue)=>{if(Ue!==ce)return Se;const Ke={...Se,[me]:le};if(me==="timeStarted"||me==="timeEnded"){const ut=me==="timeStarted"?le:Se.timeStarted,Lr=me==="timeEnded"?le:Se.timeEnded,et=Ld(ut,Lr);et&&(Ke.hours=et.hours,Ke.overtimeHours=et.overtimeHours)}return Ke})}))},hl=(Y,ce)=>{Ge(me=>{const le=me[Y]||[];return le.length>1?{...me,[Y]:le.filter((ae,Se)=>Se!==ce)}:{...me,[Y]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}})},ye=Y=>{Y&&(Er(ce=>new Set([...ce,Y])),Ge(ce=>!ce[Y]||ce[Y].length===0?{...ce,[Y]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}:ce))},Gn=Y=>{Er(ce=>{const me=new Set(ce);return me.delete(Y),me}),Ge(ce=>{const me={...ce};return delete me[Y],me})},Ca=()=>Nt.filter(Y=>!Gr.has(Y.id)),pl=()=>{if(!jt||typeof jt!="object")return[];const Y=[];return Object.entries(jt).forEach(([ce,me])=>{if(!Array.isArray(me))return;const le=Nt.find(ae=>ae.id===ce);me.forEach(ae=>{ae&&ae.name&&ae.name.trim()&&(parseFloat(ae.hours)>0||parseFloat(ae.overtimeHours)>0)&&Y.push({name:ae.name.trim(),hours:parseFloat(ae.hours)||0,overtime_hours:parseFloat(ae.overtimeHours)||0,time_started:ae.timeStarted||null,time_ended:ae.timeEnded||null,role:le?.name||"Worker",labor_class_id:ce})})}),Y},yu=Y=>{if(Y.labor_class_id&&Vt&&Nt.some(me=>me.id===Y.labor_class_id)){Gr.has(Y.labor_class_id)||Er(ae=>new Set([...ae,Y.labor_class_id]));const me=jt[Y.labor_class_id]||[],le=me.findIndex(ae=>!ae||!ae.name||!ae.name.trim());if(le>=0){const ae=[...me];ae[le]={...ae[le],name:Y.name},Ge(Se=>({...Se,[Y.labor_class_id]:ae}))}else Ge(ae=>({...ae,[Y.labor_class_id]:[...ae[Y.labor_class_id]||[],{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}else if(Vt){const le=[...Gr][0]||Nt[0]?.id;if(le){Gr.has(le)||Er(Ue=>new Set([...Ue,le]));const ae=jt[le]||[],Se=ae.findIndex(Ue=>!Ue||!Ue.name||!Ue.name.trim());if(Se>=0){const Ue=[...ae];Ue[Se]={...Ue[Se],name:Y.name},Ge(Ke=>({...Ke,[le]:Ue}))}else Ge(Ue=>({...Ue,[le]:[...Ue[le]||[],{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}}else{const me=(Y.role||"").toLowerCase();if(me.includes("foreman")||me.includes("supervisor")||me.includes("superintendent")){const le=R.findIndex(ae=>!ae||!ae.name||!ae.name.trim());le>=0?(ht(le,"name",Y.name),ht(le,"role",me.includes("superintendent")?"Superintendent":"Foreman")):U([...R,{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:me.includes("superintendent")?"Superintendent":"Foreman"}])}else if(me.includes("operator")){const le=J.findIndex(ae=>!ae||!ae.name||!ae.name.trim());le>=0?Ea(le,"name",Y.name):B([...J,{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}else{const le=fe.findIndex(ae=>!ae||!ae.name||!ae.name.trim());le>=0?ua(le,"name",Y.name):je([...fe,{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}}s(`Added ${Y.name}`,"success")},bu=async Y=>{const ce=Array.from(Y.target.files);if(ce.length===0)return;const me=r===-1?1/0:r-Ie.length;if(me<=0){s(`Photo limit reached (${r} max)`,"error"),Y.target.value="";return}const le=ce.slice(0,me);le.length<ce.length&&s(`Only ${le.length} photo(s) added (${r} max)`,"error");const ae=await h3(),Se=10*1024*1024;le.forEach(Ue=>{if(!Ue.type.startsWith("image/")){s("Please select an image file","error");return}if(Ue.size>Se){s(`Photo too large: ${Ue.name} (max 10MB)`,"error");return}const Ke=URL.createObjectURL(Ue),ut=`photo-${Date.now()}-${l1()}`;ge(Lr=>[...Lr,{id:`${Date.now()}-${l1()}`,tempId:ut,file:Ue,previewUrl:Ke,name:Ue.name,status:"pending",attempts:0,error:null,uploadedUrl:null,latitude:ae?.latitude||null,longitude:ae?.longitude||null,gpsAccuracy:ae?.accuracy||null}])}),Y.target.value=""},Vn=(Y,ce)=>{ge(me=>me.map(le=>le.id===Y?{...le,...ce}:le))},gl=async(Y,ce)=>{const me=Ie.find(le=>le.id===Y);if(!(!me||me.status!=="failed")){Vn(Y,{status:"compressing",error:null});try{let le=me.file;try{le=await o1(me.file)}catch(Se){console.warn("Compression failed, using original:",Se)}Vn(Y,{status:"uploading"});const ae=await be.uploadPhoto(t,e.id,ce,le);Vn(Y,{status:"confirmed",uploadedUrl:ae,attempts:me.attempts+1}),await be.updateTMTicketPhotos(ce,[...Ie.filter(Se=>Se.uploadedUrl).map(Se=>Se.uploadedUrl),ae]),s("Photo uploaded successfully","success")}catch(le){console.error("Retry failed:",le),Vn(Y,{status:"failed",error:le.message||"Upload failed",attempts:me.attempts+1}),s("Photo retry failed","error")}}},vl=Y=>{const ce=Ie.find(me=>me.id===Y);ce?.previewUrl&&URL.revokeObjectURL(ce.previewUrl),ge(Ie.filter(me=>me.id!==Y))},no=R.filter(Y=>Y&&Y.name&&Y.name.trim()&&(parseFloat(Y.hours)>0||parseFloat(Y.overtimeHours)>0)),ao=J.filter(Y=>Y&&Y.name&&Y.name.trim()&&(parseFloat(Y.hours)>0||parseFloat(Y.overtimeHours)>0)),on=fe.filter(Y=>Y&&Y.name&&Y.name.trim()&&(parseFloat(Y.hours)>0||parseFloat(Y.overtimeHours)>0)),Ht=pl(),cr=Vt?Ht.length:no.length+ao.length+on.length,da=Vt?Ht.reduce((Y,ce)=>Y+(ce.hours||0),0):[...no,...ao,...on].reduce((Y,ce)=>Y+parseFloat(ce.hours||0),0),io=Vt?Ht.reduce((Y,ce)=>Y+(ce.overtime_hours||0),0):[...no,...ao,...on].reduce((Y,ce)=>Y+parseFloat(ce.overtimeHours||0),0),_u=Vt?Object.values(jt||{}).flat().filter(Y=>Y&&Y.name&&Y.name.trim()):[...R.filter(Y=>Y&&Y.name&&Y.name.trim()),...J.filter(Y=>Y&&Y.name&&Y.name.trim()),...fe.filter(Y=>Y&&Y.name&&Y.name.trim())],yl=_u.length-cr,bl=()=>{if(c===1)return Ee.trim().length>0;if(c===2){if(Vt)return pl().length>0;const Y=R.some(le=>le&&le.name&&le.name.trim()&&(parseFloat(le.hours)>0||parseFloat(le.overtimeHours)>0)),ce=J.some(le=>le&&le.name&&le.name.trim()&&(parseFloat(le.hours)>0||parseFloat(le.overtimeHours)>0)),me=fe.some(le=>le&&le.name&&le.name.trim()&&(parseFloat(le.hours)>0||parseFloat(le.overtimeHours)>0));return Y||ce||me}return!0},rs=(()=>{const Y=[];return c===1&&!Ee.trim()&&Y.push(Re("descriptionRecommended")),c===2&&yl>0&&Y.push(`${yl} ${Re("workersNoHours")}`),c===4&&!k.trim()&&Y.push(Re("nameRequired")),Y})(),Wn=()=>{c<4&&u(c+1)},yi=()=>{c>1?u(c-1):i()},oo=async()=>{if(!k.trim()){s("Enter your name to submit","error");return}let Y=[];if(Vt){if(Y=pl(),Y.length===0){s("Add at least one worker","error");return}}else{const ce=R.filter(ae=>ae&&ae.name&&ae.name.trim()&&(parseFloat(ae.hours)>0||parseFloat(ae.overtimeHours)>0)),me=J.filter(ae=>ae&&ae.name&&ae.name.trim()&&(parseFloat(ae.hours)>0||parseFloat(ae.overtimeHours)>0)),le=fe.filter(ae=>ae&&ae.name&&ae.name.trim()&&(parseFloat(ae.hours)>0||parseFloat(ae.overtimeHours)>0));if(ce.length===0&&me.length===0&&le.length===0){s("Add at least one worker","error");return}Y=[...ce.map(ae=>({name:ae.name.trim(),hours:parseFloat(ae.hours)||0,overtime_hours:parseFloat(ae.overtimeHours)||0,time_started:ae.timeStarted||null,time_ended:ae.timeEnded||null,role:ae.role})),...me.map(ae=>({name:ae.name.trim(),hours:parseFloat(ae.hours)||0,overtime_hours:parseFloat(ae.overtimeHours)||0,time_started:ae.timeStarted||null,time_ended:ae.timeEnded||null,role:"Operator"})),...le.map(ae=>({name:ae.name.trim(),hours:parseFloat(ae.hours)||0,overtime_hours:parseFloat(ae.overtimeHours)||0,time_started:ae.timeStarted||null,time_ended:ae.timeEnded||null,role:"Laborer"}))]}ee(!0),xe("Creating ticket...");try{const ce=await be.createTMTicket({project_id:e.id,work_date:m,ce_pco_number:C.trim()||null,assigned_cor_id:M||null,notes:Ee.trim()||null,photos:[],created_by_name:k.trim()});if(!ce||!ce.id)throw new Error("Failed to create ticket - no ticket ID returned");let me=[];const le=Ie.filter(ae=>ae.status==="pending");if(le.length>0){xe(`Compressing ${le.length} photo${le.length>1?"s":""}...`),le.forEach(et=>Vn(et.id,{status:"compressing"}));const ae=await Promise.all(le.map(async et=>{try{const Wt=await o1(et.file);return{...et,file:Wt}}catch(Wt){return console.warn(`Failed to compress photo ${et.name}, using original:`,Wt),et}}));xe(`Uploading ${le.length} photo${le.length>1?"s":""}...`),le.forEach(et=>Vn(et.id,{status:"uploading"}));let Se=0,Ue=0;const Ke=ae.map(async et=>{try{const Wt=await be.uploadPhoto(t,e.id,ce.id,et.file);return Se++,xe(`Uploading ${Se}/${le.length} photos...`),Vn(et.id,{status:"confirmed",uploadedUrl:Wt,attempts:(et.attempts||0)+1}),{id:et.id,url:Wt}}catch(Wt){return console.error(`Photo ${et.name} upload failed:`,Wt),Ue++,Vn(et.id,{status:"failed",error:Wt.message||"Upload failed",attempts:(et.attempts||0)+1}),{id:et.id,url:null,error:Wt.message}}}),ut=await Promise.all(Ke);me=ut.filter(et=>et.url!==null).map(et=>et.url);const Lr={};for(const et of ut)if(et.url){const Wt=le.find(Xn=>Xn.id===et.id);Wt?.latitude&&Wt?.longitude&&(Lr[et.url]={lat:Wt.latitude,lng:Wt.longitude,accuracy:Wt.gpsAccuracy})}Ue>0&&me.length>0?s(`${me.length}/${le.length} photos uploaded. ${Ue} failed - can retry later.`,"warning"):Ue>0&&me.length===0&&s(`All ${Ue} photos failed to upload - can retry after submission.`,"error"),me.length>0&&(xe("Saving photos..."),await be.updateTMTicketPhotos(ce.id,me,Object.keys(Lr).length>0?Lr:null))}else me.length>0&&(xe("Saving photos..."),await be.updateTMTicketPhotos(ce.id,me));if(xe("Saving workers..."),await be.addTMWorkers(ce.id,Y),te.length>0&&(xe("Saving materials..."),await be.addTMItems(ce.id,te.map(ae=>({material_equipment_id:ae.material_equipment_id,custom_name:ae.custom_name||null,custom_category:ae.custom_category||null,quantity:ae.quantity})))),M){xe("Importing to COR...");try{await be.importTicketDataToCOR(ce.id,M,t,e.work_type||"demolition",e.job_type||"standard")}catch(ae){console.error("Error importing to COR:",ae);try{await be.markImportFailed(ce.id,M,ae?.message||"Import failed")}catch(Se){console.error("Error marking import failed:",Se)}s("T&M saved. COR data sync failed - retry from ticket list.","warning")}}Ie.forEach(ae=>{ae.previewUrl&&URL.revokeObjectURL(ae.previewUrl)}),p(ce),s("T&M submitted!","success"),u(5)}catch(ce){console.error("Error submitting T&M:",ce),s("Error submitting T&M","error")}finally{ee(!1),xe("")}};return d.jsxs("div",{className:"tm-wizard",children:[d.jsxs("div",{className:"tm-wizard-header",children:[c<5?d.jsx("button",{className:"tm-back-btn",onClick:yi,children:""}):d.jsx("div",{className:"tm-success-check",children:d.jsx(na,{size:24})}),d.jsxs("h2",{children:[c===1&&Re("workInfo"),c===2&&Re("crewHours"),c===3&&Re("materialsEquipment"),c===4&&Re("review"),c===5&&Re("submitted")]}),d.jsxs("div",{className:"tm-header-right",children:[c<4&&d.jsxs("button",{className:"tm-lang-toggle",onClick:()=>Et(Me==="en"?"es":"en"),title:Re(Me==="en"?"switchToSpanish":"switchToEnglish"),children:[d.jsx(xq,{size:16}),Me==="en"?"ES":"EN"]}),c<5&&d.jsxs("div",{className:"tm-step-dots",children:[d.jsx("span",{className:`tm-dot ${c>=1?"active":""}`}),d.jsx("span",{className:`tm-dot ${c>=2?"active":""}`}),d.jsx("span",{className:`tm-dot ${c>=3?"active":""}`}),d.jsx("span",{className:`tm-dot ${c>=4?"active":""}`})]})]})]}),c===1&&d.jsx(g3,{project:e,workDate:m,setWorkDate:h,cePcoNumber:C,setCePcoNumber:A,notes:Ee,setNotes:Te,t:Re,lang:Me}),c===2&&d.jsx(b3,{supervision:R,operators:J,laborers:fe,dynamicWorkers:jt,activeLaborClassIds:Gr,setActiveLaborClassIds:Er,laborCategories:Bt,laborClasses:Nt,hasCustomLaborClasses:Vt,loadingLaborClasses:Yr,todaysCrew:oe,showBatchHoursModal:I,setShowBatchHoursModal:ie,batchHours:pe,setBatchHours:q,loadingPreviousCrew:ve,namedWorkers:_u,workersNeedingHours:yl,totalRegHours:da,totalOTHours:io,onLoadPreviousCrew:$t,onApplyBatchHours:st,onApplyInlinePreset:En,onAddCrewWorker:yu,onActivateLaborClass:ye,onDeactivateLaborClass:Gn,addSupervision:zt,updateSupervision:ht,removeSupervision:an,addOperator:gi,updateOperator:Ea,removeOperator:On,addLaborer:Yn,updateLaborer:ua,removeLaborer:pi,addDynamicWorker:vi,updateDynamicWorker:Oa,removeDynamicWorker:hl,getInactiveLaborClasses:Ca,t:Re,lang:Me,onShowToast:s}),c===3&&d.jsx(_3,{companyId:t,items:te,setItems:H,t:Re,lang:Me,onShowToast:s}),(c===4||c===5)&&d.jsx(S3,{step:c,setStep:u,project:e,companyId:t,workDate:m,cePcoNumber:C,notes:Ee,photos:Ie,onPhotoAdd:bu,onRemovePhoto:vl,maxPhotos:r,selectedCorId:M,setSelectedCorId:z,assignableCORs:K,items:te,hasCustomLaborClasses:Vt,validDynamicWorkersList:Ht,validSupervision:no,validOperators:ao,validLaborers:on,totalWorkers:cr,totalRegHours:da,totalOTHours:io,submittedByName:k,setSubmittedByName:D,submittedTicket:g,submitting:Le,submitProgress:we,clientSigned:S,setClientSigned:O,showSignatureLinkModal:_,setShowSignatureLinkModal:x,showOnSiteSignature:w,setShowOnSiteSignature:j,onRetryPhotoUpload:gl,t:Re,lang:Me,onShowToast:s}),c<5&&d.jsxs("div",{className:"tm-wizard-footer",children:[rs.length>0&&d.jsxs("div",{className:"tm-validation-summary",children:[d.jsx(qb,{size:16}),d.jsx("span",{children:rs[0]})]}),c===1&&d.jsx("button",{className:"tm-big-btn primary",onClick:Wn,disabled:!bl(),children:Re("nextCrew")}),c===2&&d.jsxs("button",{className:"tm-big-btn primary",onClick:Wn,disabled:!bl(),children:[Re("nextMaterials")," (",cr," ",Re(cr===1?"worker":"workers_plural"),", ",da+io," hrs)"]}),c===3&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{className:"tm-big-btn primary",onClick:Wn,children:[Re("reviewAndSubmit")," (",te.length," ",te.length===1?Re("item"):Re("items_plural"),")"]}),d.jsx("button",{className:"tm-skip-btn",onClick:Wn,children:Re("skipNoMaterials")})]}),c===4&&d.jsx("button",{className:`tm-big-btn submit ${Le?"submitting":""} ${k.trim()?"ready":"needs-name"}`,onClick:oo,disabled:Le||!k.trim(),children:Le?d.jsxs(d.Fragment,{children:[d.jsx(Gs,{size:20,className:"tm-spinner"}),d.jsx("span",{className:"tm-submit-text",children:we||Re("submitting")})]}):k.trim()?d.jsxs(d.Fragment,{children:[d.jsx(Vi,{size:20}),d.jsx("span",{children:Re("submitTM")})]}):d.jsxs(d.Fragment,{children:[d.jsx(Oc,{size:18}),d.jsx("span",{children:Re("enterNameToSubmit")})]})})]}),c===5&&d.jsxs("div",{className:"tm-wizard-footer",children:[d.jsxs("button",{className:"tm-big-btn primary",onClick:n,children:[d.jsx(Vi,{size:20}),d.jsx("span",{children:Re("done")})]}),d.jsx("button",{className:"tm-skip-btn",onClick:n,children:Re("skipSignature")})]})]})}function O3({project:e,companyId:t,onShowToast:r}){const[n,i]=y.useState([]),[s,c]=y.useState(!0),[u,m]=y.useState(!1),[h,g]=y.useState(!1),[p,_]=y.useState({name:"",role:"",labor_class_id:null}),[x,w]=y.useState([]),[j,S]=y.useState(!0),[O,C]=y.useState([]),[A,k]=y.useState([]),[D,M]=y.useState(!0),z=["Foreman","Laborer","Supervisor","Operator"],K=y.useCallback(async()=>{try{const B=await be.getCrewCheckin(e.id);B?.workers&&i(B.workers)}catch(B){console.error("Error loading crew:",B),r?.("Error loading today's crew","error")}finally{c(!1)}},[e?.id,r]),Q=y.useCallback(async()=>{try{const B=await be.getRecentWorkers(e.id,30);w(B)}catch(B){console.error("Error loading recent workers:",B)}finally{S(!1)}},[e?.id]),ne=y.useCallback(async()=>{try{const B=await be.getLaborClassesForField(t);C(B.categories||[]),k(B.classes||[]),B.classes&&B.classes.length>0&&_(fe=>({...fe,role:B.classes[0].name,labor_class_id:B.classes[0].id}))}catch(B){console.error("Error loading labor classes:",B),r?.("Using default roles - custom labor classes unavailable","info")}finally{M(!1)}},[t,r]);y.useEffect(()=>{e?.id&&(K(),Q(),t?ne():M(!1))},[e?.id,t,K,Q,ne]);const G=B=>{const fe=A.find(je=>je.id===B);_(fe?{...p,role:fe.name,labor_class_id:fe.id}:{...p,role:B,labor_class_id:null})},I=async()=>{if(!p.name.trim()){r("Enter worker name","error");return}if(!p.role){r("Select a role","error");return}if(n.find(B=>B.name.toLowerCase()===p.name.trim().toLowerCase())){r("Worker already added","error");return}m(!0);try{const B=[...n,{name:p.name.trim(),role:p.role,labor_class_id:p.labor_class_id}];await be.saveCrewCheckin(e.id,B),i(B),_({...p,name:""}),g(!1),r("Crew member added","success")}catch(B){console.error("Error adding worker:",B),r("Error adding crew member","error")}finally{m(!1)}},ie=async B=>{m(!0);try{const fe=n.filter(je=>je.name.toLowerCase()!==B.toLowerCase());await be.saveCrewCheckin(e.id,fe),i(fe),r("Crew member removed","success")}catch(fe){console.error("Error removing worker:",fe),r("Error removing crew member","error")}finally{m(!1)}},pe=async B=>{if(n.find(fe=>fe.name.toLowerCase()===B.name.toLowerCase())){r("Already checked in","info");return}m(!0);try{const fe=[...n,{name:B.name,role:B.role,labor_class_id:B.labor_class_id}];await be.saveCrewCheckin(e.id,fe),i(fe),r(`${B.name} checked in`,"success")}catch(fe){console.error("Error adding worker:",fe),r("Error adding crew member","error")}finally{m(!1)}},q=x.filter(B=>!n.find(fe=>fe.name.toLowerCase()===B.name.toLowerCase())),R=new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),U=()=>{const B={};O.forEach(je=>{B[je.id]={name:je.name,classes:A.filter(te=>te.category_id===je.id)}});const fe=A.filter(je=>!je.category_id);return fe.length>0&&(B.uncategorized={name:"Other",classes:fe}),B},J=A.length>0;return s||D?d.jsxs("div",{className:"crew-checkin",children:[d.jsxs("div",{className:"crew-header",children:[d.jsxs("h3",{children:[d.jsx(qo,{size:18,className:"inline-icon"})," Today's Crew"]}),d.jsx("span",{className:"crew-date",children:R})]}),d.jsx("div",{className:"crew-loading",children:"Loading..."})]}):d.jsxs("div",{className:"crew-checkin",children:[d.jsxs("div",{className:"crew-header",children:[d.jsxs("h3",{children:[d.jsx(qo,{size:18,className:"inline-icon"})," Today's Crew"]}),d.jsx("span",{className:"crew-date",children:R})]}),n.length===0?d.jsxs("div",{className:"crew-empty",children:[d.jsx("p",{children:"No crew checked in yet"}),d.jsx("p",{className:"crew-empty-hint",children:"Add your crew for the day"})]}):d.jsx("div",{className:"crew-list",children:n.map(B=>d.jsxs("div",{className:"crew-member",children:[d.jsxs("div",{className:"crew-member-info",children:[d.jsx("span",{className:"crew-member-name",children:B.name}),d.jsx("span",{className:`crew-member-role ${(B.role||"laborer").toLowerCase().replace(/\s+/g,"-")}`,children:B.role})]}),d.jsx("button",{className:"crew-remove-btn",onClick:()=>ie(B.name),disabled:u,children:""})]},B.name))}),!j&&q.length>0&&d.jsxs("div",{className:"crew-quick-add",children:[d.jsx("div",{className:"crew-quick-add-header",children:d.jsx("span",{children:"Tap to add"})}),d.jsx("div",{className:"crew-quick-add-grid",children:q.map(B=>d.jsxs("button",{className:"crew-quick-add-btn",onClick:()=>pe(B),disabled:u,children:[d.jsx("span",{className:"crew-quick-add-name",children:B.name}),d.jsx("span",{className:"crew-quick-add-role",children:B.role})]},B.name))})]}),h?d.jsxs("div",{className:"crew-add-form",children:[d.jsx("input",{type:"text",value:p.name,onChange:B=>_({...p,name:B.target.value}),placeholder:"Name",autoFocus:!0}),d.jsx("select",{value:p.labor_class_id||p.role,onChange:B=>G(B.target.value),children:J?Object.entries(U()).map(([B,fe])=>d.jsx("optgroup",{label:fe.name,children:fe.classes.map(je=>d.jsx("option",{value:je.id,children:je.name},je.id))},B)):z.map(B=>d.jsx("option",{value:B,children:B},B))}),d.jsxs("div",{className:"crew-add-buttons",children:[d.jsx("button",{className:"crew-add-confirm",onClick:I,disabled:u,children:u?"...":"Add"}),d.jsx("button",{className:"crew-add-cancel",onClick:()=>{g(!1),_({name:"",role:A[0]?.name||"Laborer",labor_class_id:A[0]?.id||null})},children:"Cancel"})]})]}):d.jsxs("button",{className:"crew-add-btn",onClick:()=>g(!0),children:[d.jsx(lN,{size:18}),d.jsx("span",{children:"Add New Person"})]}),d.jsxs("div",{className:"crew-count",children:[n.length," ",n.length===1?"person":"people"," on site"]})]})}function C3({project:e,onShowToast:t,onClose:r}){const[n,i]=y.useState(!0),[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,g]=y.useState(""),[p,_]=y.useState("");y.useEffect(()=>{e?.id&&x()},[e?.id]);const x=async()=>{try{const O=await be.getDailyReport(e.id);if(O)m(O),g(O.field_notes||""),_(O.issues||"");else{const C=await be.compileDailyReport(e.id);m({...C,status:"draft"})}}catch(O){console.error("Error loading report:",O),t("Error loading report","error")}finally{i(!1)}},w=async()=>{if(!P){t("Demo Mode: Report saved locally only - won't reach office","info"),r();return}c(!0);try{await be.saveDailyReport(e.id,{field_notes:h,issues:p}),await be.submitDailyReport(e.id,"Field")?(t("Daily report submitted!","success"),r()):t("Report not sent - check connection","error")}catch(O){console.error("Error submitting report:",O),t("Error submitting report","error")}finally{c(!1)}},j=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});if(n)return d.jsxs("div",{className:"daily-report",children:[d.jsxs("div",{className:"daily-report-header",children:[d.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),d.jsx("h2",{children:"Daily Report"})]}),d.jsx("div",{className:"daily-report-loading",children:"Compiling report..."})]});if(!u)return d.jsxs("div",{className:"daily-report",children:[d.jsxs("div",{className:"daily-report-header",children:[d.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),d.jsx("h2",{children:"Daily Report"})]}),d.jsxs("div",{className:"daily-report-error",children:[d.jsx("p",{children:"Unable to load report data."}),d.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Retry"})]})]});const S=u.status==="submitted";return d.jsxs("div",{className:"daily-report",children:[d.jsxs("div",{className:"daily-report-header",children:[d.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),d.jsxs("div",{children:[d.jsx("h2",{children:"Daily Report"}),d.jsx("p",{className:"daily-report-date",children:j})]})]}),S&&d.jsxs("div",{className:"daily-report-submitted-banner",children:[" Submitted ",new Date(u.submitted_at).toLocaleTimeString()]}),d.jsxs("div",{className:"daily-report-content",children:[d.jsxs("div",{className:"daily-report-summary",children:[d.jsxs("div",{className:"daily-report-card",children:[d.jsx("div",{className:"daily-report-card-value",children:u.crew_count||0}),d.jsx("div",{className:"daily-report-card-label",children:"Crew on Site"})]}),d.jsxs("div",{className:"daily-report-card",children:[d.jsx("div",{className:"daily-report-card-value",children:u.tasks_completed||0}),d.jsx("div",{className:"daily-report-card-label",children:"Tasks Done"})]}),d.jsxs("div",{className:"daily-report-card",children:[d.jsx("div",{className:"daily-report-card-value",children:u.tm_tickets_count||0}),d.jsx("div",{className:"daily-report-card-label",children:"T&M Tickets"})]}),d.jsxs("div",{className:"daily-report-card",children:[d.jsx("div",{className:"daily-report-card-value",children:u.photos_count||0}),d.jsx("div",{className:"daily-report-card-label",children:"Photos"})]})]}),u.crew_list?.length>0&&d.jsxs("div",{className:"daily-report-section",children:[d.jsxs("h3",{children:[d.jsx(qo,{size:18,className:"inline-icon"})," Crew"]}),d.jsx("div",{className:"daily-report-crew",children:u.crew_list.map((O,C)=>d.jsxs("div",{className:"daily-report-crew-item",children:[d.jsx("span",{children:O.name}),d.jsx("span",{className:"daily-report-crew-role",children:O.role})]},C))})]}),u.completed_tasks?.length>0&&d.jsxs("div",{className:"daily-report-section",children:[d.jsxs("h3",{children:[d.jsx(wq,{size:18,className:"inline-icon"})," Completed Today"]}),d.jsx("ul",{className:"daily-report-tasks",children:u.completed_tasks.map((O,C)=>d.jsxs("li",{children:[O.name,O.group&&d.jsx("span",{className:"daily-report-task-group",children:O.group})]},C))})]}),d.jsxs("div",{className:"daily-report-section",children:[d.jsxs("h3",{children:[d.jsx(Go,{size:18,className:"inline-icon"})," Notes"]}),d.jsx("textarea",{value:h,onChange:O=>g(O.target.value),placeholder:"Any notes about today's work...",rows:3,disabled:S})]}),d.jsxs("div",{className:"daily-report-section",children:[d.jsxs("h3",{children:[d.jsx(hm,{size:18,className:"inline-icon"})," Issues / Concerns"]}),d.jsx("textarea",{value:p,onChange:O=>_(O.target.value),placeholder:"Any problems, delays, or concerns...",rows:3,disabled:S})]})]}),!S&&d.jsxs("div",{className:"daily-report-footer",children:[d.jsx("button",{className:"btn btn-primary daily-report-submit",onClick:w,disabled:s,children:s?"Submitting...":d.jsxs(d.Fragment,{children:[d.jsx(jq,{size:16,className:"inline-icon"})," Submit Report"]})}),d.jsx("p",{className:"daily-report-hint",children:"This will be sent to the office"})]})]})}function A3({project:e,companyId:t,user:r,onClose:n,onReportCreated:i}){const[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,g]=y.useState(1),[p,_]=y.useState(new Date().toISOString().split("T")[0]),[x,w]=y.useState(new Date().toTimeString().split(" ")[0].substring(0,5)),[j,S]=y.useState(""),[O,C]=y.useState(""),[A,k]=y.useState("minor"),[D,M]=y.useState(""),[z,K]=y.useState(""),[Q,ne]=y.useState(""),[G,I]=y.useState(""),[ie,pe]=y.useState(""),[q,R]=y.useState(""),[U,J]=y.useState(""),[B,fe]=y.useState(r?.name||""),[je,te]=y.useState(""),[H,Ee]=y.useState(""),[Te,Ie]=y.useState(r?.email||""),[ge,Le]=y.useState([]),[ee,we]=y.useState(""),[xe,oe]=y.useState(""),[Fe,ve]=y.useState(""),[Ne,Me]=y.useState(""),[Et,Re]=y.useState(!1),[Bt,_t]=y.useState(""),[Nt,Kr]=y.useState(""),[jt,Ge]=y.useState(!1),[Yr,Sn]=y.useState(""),[Gr,Er]=y.useState(""),[Vt,he]=y.useState(""),[st,En]=y.useState(""),[er,$t]=y.useState(!1),[zt,ht]=y.useState(!1),[an,Yn]=y.useState(0),[ua,pi]=y.useState(0),gi=()=>{if(!ee.trim()){m({type:"error",message:"Please enter witness name"});return}const ye={name:ee,phone:xe,email:Fe,testimony:Ne};Le([...ge,ye]),we(""),oe(""),ve(""),Me(""),m({type:"success",message:"Witness added"})},Ea=ye=>{Le(ge.filter((Gn,Ca)=>Ca!==ye))},On=ye=>{switch(ye){case 1:if(!j.trim()||!O.trim())return m({type:"error",message:"Please fill in all incident details"}),!1;break;case 2:if(!z.trim()||!q.trim())return m({type:"error",message:"Please fill in employee name and job title"}),!1;break;case 3:if(!B.trim()||!je.trim())return m({type:"error",message:"Please fill in supervisor name and title"}),!1;break}return!0},vi=()=>{On(h)&&g(h+1)},Oa=()=>{g(h-1)},hl=async()=>{if(On(h)){if(!P){m({type:"info",message:"Demo Mode: Report saved locally only - won't reach office"}),setTimeout(()=>{n()},1500);return}c(!0);try{const ye={project_id:e.id,company_id:t,incident_date:p,incident_time:x,incident_location:j,incident_description:O,injury_type:A,body_part_affected:D||null,employee_name:z,employee_phone:Q||null,employee_email:G||null,employee_address:ie||null,employee_job_title:q,employee_hire_date:U||null,medical_treatment_required:Et,medical_facility_name:Bt||null,medical_facility_address:Nt||null,hospitalized:jt,reported_by_name:B,reported_by_title:je,reported_by_phone:H||null,reported_by_email:Te||null,witnesses:ge,immediate_actions_taken:Yr||null,corrective_actions_planned:Gr||null,safety_equipment_used:Vt||null,safety_equipment_failed:st||null,osha_recordable:er,workers_comp_claim:zt,days_away_from_work:parseInt(an)||0,restricted_work_days:parseInt(ua)||0,status:"reported",created_by:r?.id},Gn=await be.createInjuryReport(ye);m({type:"success",message:"Injury report submitted successfully"}),i&&i(Gn),setTimeout(()=>{n()},1500)}catch(ye){console.error("Error submitting injury report:",ye),m({type:"error",message:"Failed to submit injury report"})}finally{c(!1)}}};return d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"modal-overlay",onClick:n,children:d.jsxs("div",{className:"modal-content injury-report-modal",onClick:ye=>ye.stopPropagation(),children:[d.jsxs("div",{className:"modal-header",children:[d.jsx("h2",{children:"Workplace Injury/Incident Report"}),d.jsx("button",{className:"close-btn",onClick:n,children:""})]}),d.jsxs("div",{className:"progress-steps",children:[d.jsx("div",{className:`step ${h>=1?"active":""}`,children:"1. Incident"}),d.jsx("div",{className:`step ${h>=2?"active":""}`,children:"2. Employee"}),d.jsx("div",{className:`step ${h>=3?"active":""}`,children:"3. Supervisor"}),d.jsx("div",{className:`step ${h>=4?"active":""}`,children:"4. Witnesses"}),d.jsx("div",{className:`step ${h>=5?"active":""}`,children:"5. Medical & Safety"})]}),d.jsxs("div",{className:"modal-body",children:[h===1&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Incident Details"}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Date of Incident *"}),d.jsx("input",{type:"date",value:p,onChange:ye=>_(ye.target.value),max:new Date().toISOString().split("T")[0]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Time of Incident *"}),d.jsx("input",{type:"time",value:x,onChange:ye=>w(ye.target.value)})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Location on Site *"}),d.jsx("input",{type:"text",value:j,onChange:ye=>S(ye.target.value),placeholder:"e.g., Floor 2, near elevator shaft"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Incident Description *"}),d.jsx("textarea",{value:O,onChange:ye=>C(ye.target.value),rows:4,placeholder:"Describe what happened in detail..."})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Injury Type *"}),d.jsxs("select",{value:A,onChange:ye=>k(ye.target.value),children:[d.jsx("option",{value:"minor",children:"Minor Injury"}),d.jsx("option",{value:"serious",children:"Serious Injury"}),d.jsx("option",{value:"critical",children:"Critical Injury"}),d.jsx("option",{value:"near_miss",children:"Near Miss (No Injury)"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Body Part Affected"}),d.jsx("input",{type:"text",value:D,onChange:ye=>M(ye.target.value),placeholder:"e.g., Left hand, lower back"})]})]})]}),h===2&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Injured Employee Information"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Full Name *"}),d.jsx("input",{type:"text",value:z,onChange:ye=>K(ye.target.value),placeholder:"First and last name"})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Phone Number"}),d.jsx("input",{type:"tel",value:Q,onChange:ye=>ne(ye.target.value),placeholder:"(555) 123-4567"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email Address"}),d.jsx("input",{type:"email",value:G,onChange:ye=>I(ye.target.value),placeholder:"email@example.com"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Home Address"}),d.jsx("input",{type:"text",value:ie,onChange:ye=>pe(ye.target.value),placeholder:"Street address, city, state, zip"})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Job Title *"}),d.jsx("input",{type:"text",value:q,onChange:ye=>R(ye.target.value),placeholder:"e.g., Carpenter, Electrician"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Hire Date"}),d.jsx("input",{type:"date",value:U,onChange:ye=>J(ye.target.value)})]})]})]}),h===3&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Foreman/Supervisor Making Report"}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Your Name *"}),d.jsx("input",{type:"text",value:B,onChange:ye=>fe(ye.target.value),placeholder:"Full name"})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Your Title *"}),d.jsx("input",{type:"text",value:je,onChange:ye=>te(ye.target.value),placeholder:"e.g., Site Foreman, Project Manager"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Your Phone Number"}),d.jsx("input",{type:"tel",value:H,onChange:ye=>Ee(ye.target.value),placeholder:"(555) 123-4567"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Your Email Address"}),d.jsx("input",{type:"email",value:Te,onChange:ye=>Ie(ye.target.value),placeholder:"email@example.com"})]})]}),h===4&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Witness Testimonies (Optional)"}),ge.length>0&&d.jsx("div",{className:"witnesses-list",children:ge.map((ye,Gn)=>d.jsxs("div",{className:"witness-item",children:[d.jsxs("div",{className:"witness-info",children:[d.jsx("strong",{children:ye.name}),ye.phone&&d.jsxs("span",{children:["  ",ye.phone]}),ye.testimony&&d.jsxs("p",{className:"witness-testimony",children:['"',ye.testimony,'"']})]}),d.jsx("button",{className:"btn-danger btn-small",onClick:()=>Ea(Gn),children:"Remove"})]},Gn))}),d.jsxs("div",{className:"add-witness-form",children:[d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Witness Name"}),d.jsx("input",{type:"text",value:ee,onChange:ye=>we(ye.target.value),placeholder:"Full name"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Phone Number"}),d.jsx("input",{type:"tel",value:xe,onChange:ye=>oe(ye.target.value),placeholder:"(555) 123-4567"})]})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Email Address"}),d.jsx("input",{type:"email",value:Fe,onChange:ye=>ve(ye.target.value),placeholder:"email@example.com"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Witness Testimony"}),d.jsx("textarea",{value:Ne,onChange:ye=>Me(ye.target.value),rows:3,placeholder:"What did the witness see or hear?"})]}),d.jsx("button",{className:"btn-secondary",onClick:gi,children:"+ Add Witness"})]})]}),h===5&&d.jsxs("div",{className:"form-step",children:[d.jsx("h3",{children:"Medical Treatment & Safety"}),d.jsx("div",{className:"form-group checkbox-group",children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:Et,onChange:ye=>Re(ye.target.checked)}),"Medical treatment required"]})}),Et&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Medical Facility Name"}),d.jsx("input",{type:"text",value:Bt,onChange:ye=>_t(ye.target.value),placeholder:"Hospital or clinic name"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Medical Facility Address"}),d.jsx("input",{type:"text",value:Nt,onChange:ye=>Kr(ye.target.value),placeholder:"Street address"})]}),d.jsx("div",{className:"form-group checkbox-group",children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:jt,onChange:ye=>Ge(ye.target.checked)}),"Employee was hospitalized"]})})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Immediate Actions Taken"}),d.jsx("textarea",{value:Yr,onChange:ye=>Sn(ye.target.value),rows:2,placeholder:"What was done immediately after the incident?"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Corrective Actions Planned"}),d.jsx("textarea",{value:Gr,onChange:ye=>Er(ye.target.value),rows:2,placeholder:"What will be done to prevent this in the future?"})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Safety Equipment Used"}),d.jsx("input",{type:"text",value:Vt,onChange:ye=>he(ye.target.value),placeholder:"e.g., Hard hat, gloves, harness"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Safety Equipment Failed"}),d.jsx("input",{type:"text",value:st,onChange:ye=>En(ye.target.value),placeholder:"Equipment that failed, if any"})]})]}),d.jsxs("div",{className:"form-row",children:[d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Days Away From Work"}),d.jsx("input",{type:"number",min:"0",value:an,onChange:ye=>Yn(ye.target.value)})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Restricted Work Days"}),d.jsx("input",{type:"number",min:"0",value:ua,onChange:ye=>pi(ye.target.value)})]})]}),d.jsx("div",{className:"form-group checkbox-group",children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:er,onChange:ye=>$t(ye.target.checked)}),"OSHA Recordable Incident"]})}),d.jsx("div",{className:"form-group checkbox-group",children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:zt,onChange:ye=>ht(ye.target.checked)}),"Workers' Compensation Claim Filed"]})})]})]}),d.jsx("div",{className:"modal-footer",children:d.jsxs("div",{className:"form-actions",children:[h>1&&d.jsx("button",{className:"btn-secondary",onClick:Oa,children:" Back"}),d.jsx("button",{className:"btn-secondary",onClick:n,children:"Cancel"}),h<5?d.jsx("button",{className:"btn-primary",onClick:vi,children:"Next "}):d.jsx("button",{className:"btn-primary",onClick:hl,disabled:s,children:s?"Submitting...":"Submit Report"})]})})]})}),u&&d.jsx(GN,{message:u.message,type:u.type,onClose:()=>m(null)}),d.jsx("style",{children:`
        .injury-report-modal {
          max-width: 800px;
          max-height: 90vh;
          overflow-y: auto;
        }

        .progress-steps {
          display: flex;
          justify-content: space-between;
          padding: 1rem 1.5rem;
          border-bottom: 1px solid var(--border-color);
          background-color: var(--bg-elevated);
          overflow-x: auto;
        }

        .progress-steps .step {
          font-size: 0.875rem;
          color: var(--text-muted);
          font-weight: 500;
          white-space: nowrap;
          padding: 0.5rem;
        }

        .progress-steps .step.active {
          color: var(--accent-primary);
          font-weight: 600;
        }

        .form-step h3 {
          margin-top: 0;
          margin-bottom: 1.5rem;
          color: var(--text-primary);
          font-size: 1.25rem;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1rem;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: block;
          margin-bottom: 0.5rem;
          font-weight: 500;
          color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          width: 100%;
          padding: 0.5rem;
          border: 1px solid var(--border-color);
          border-radius: 4px;
          font-size: 1rem;
          background: var(--bg-card);
          color: var(--text-primary);
        }

        .form-group textarea {
          resize: vertical;
        }

        .checkbox-group label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-weight: normal;
          cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
          width: auto;
          margin: 0;
        }

        .witnesses-list {
          margin-bottom: 1.5rem;
        }

        .witness-item {
          border: 1px solid var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          margin-bottom: 0.5rem;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .witness-info {
          flex: 1;
          color: var(--text-primary);
        }

        .witness-testimony {
          margin-top: 0.5rem;
          color: var(--text-secondary);
          font-style: italic;
          font-size: 0.875rem;
        }

        .add-witness-form {
          border: 2px dashed var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          background-color: var(--bg-elevated);
        }

        .modal-footer {
          border-top: 1px solid var(--border-color);
          padding: 1rem 1.5rem;
        }

        .form-actions {
          display: flex;
          justify-content: space-between;
          gap: 0.5rem;
        }

        .btn-primary,
        .btn-secondary,
        .btn-danger {
          padding: 0.5rem 1rem;
          border-radius: 6px;
          font-weight: 500;
          cursor: pointer;
          border: none;
        }

        .btn-primary {
          background-color: var(--primary-color, #3b82f6);
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          opacity: 0.9;
        }

        .btn-primary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .btn-secondary {
          background-color: var(--bg-elevated);
          color: var(--text-primary);
          border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
          background-color: var(--bg-tertiary);
        }

        .btn-danger {
          background-color: #ef4444;
          color: white;
        }

        .btn-danger:hover {
          background-color: #dc2626;
        }

        .btn-small {
          padding: 0.25rem 0.75rem;
          font-size: 0.875rem;
        }

        @media (max-width: 768px) {
          .injury-report-modal {
            max-width: 100%;
            height: 100vh;
            max-height: 100vh;
            border-radius: 0;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .progress-steps .step {
            font-size: 0.75rem;
            padding: 0.25rem;
          }
        }
      `})]})}const df=[{value:"concrete",label:"Concrete",icon:""},{value:"trash",label:"Trash",icon:""},{value:"metals",label:"Metals",icon:""},{value:"hazardous_waste",label:"Hazardous",icon:""}],N3=e=>df.find(t=>t.value===e)||{label:e,icon:""};function k3({project:e,user:t=null,date:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState([]),[m,h]=y.useState(!0),[g,p]=y.useState(!1),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState({type:"concrete",count:1}),C=new Date(r).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});y.useEffect(()=>{A(),k()},[e.id,r]);const A=async()=>{try{h(!0);const I=await be.getDisposalLoads(e.id,r);s(I||[])}catch(I){console.error("Error loading disposal loads:",I)}finally{h(!1)}},k=async()=>{try{const ie=(await be.getDisposalLoadsHistory(e.id,14)||[]).filter(q=>q.load_date!==r).reduce((q,R)=>(q[R.load_date]||(q[R.load_date]=[]),q[R.load_date].push(R),q),{}),pe=Object.entries(ie).map(([q,R])=>({date:q,loads:R,totalLoads:R.reduce((U,J)=>U+J.load_count,0)})).sort((q,R)=>new Date(R.date)-new Date(q.date));u(pe)}catch(I){console.error("Error loading disposal history:",I)}},D=async()=>{if(!(S.count<1)){p(!0);try{await be.addDisposalLoad(e.id,t?.id||null,r,S.type,S.count),await A(),O({type:"concrete",count:1}),x(!1),n?.("Disposal load added","success")}catch(I){console.error("Error adding disposal load:",I),n?.("Error adding load","error")}finally{p(!1)}}},M=async I=>{p(!0);try{await be.deleteDisposalLoad(I),await A(),n?.("Load removed","success")}catch(ie){console.error("Error deleting disposal load:",ie),n?.("Error removing load","error")}finally{p(!1)}},z=async I=>{p(!0);try{await be.addDisposalLoad(e.id,t?.id||null,r,I,1),await A(),n?.("Load added","success")}catch(ie){console.error("Error adding disposal load:",ie),n?.("Error adding load","error")}finally{p(!1)}},K=async I=>{p(!0);try{await be.updateDisposalLoad(I.id,I.load_type,I.load_count+1),await A()}catch(ie){console.error("Error updating load:",ie),n?.("Error updating load","error")}finally{p(!1)}},Q=async I=>{if(I.load_count<=1){await M(I.id);return}p(!0);try{await be.updateDisposalLoad(I.id,I.load_type,I.load_count-1),await A()}catch(ie){console.error("Error updating load:",ie),n?.("Error updating load","error")}finally{p(!1)}},ne=i.reduce((I,ie)=>(I[ie.load_type]||(I[ie.load_type]={items:[],total:0}),I[ie.load_type].items.push(ie),I[ie.load_type].total+=ie.load_count,I),{}),G=i.reduce((I,ie)=>I+ie.load_count,0);return m?d.jsxs("div",{className:"disposal-load-input",children:[d.jsxs("div",{className:"disposal-header",children:[d.jsx(vf,{size:20}),d.jsx("span",{children:"Disposal Loads"})]}),d.jsx("div",{className:"disposal-loading",children:"Loading..."})]}):d.jsxs("div",{className:"disposal-load-input",children:[d.jsxs("div",{className:"disposal-header",children:[d.jsxs("div",{className:"disposal-title",children:[d.jsx(vf,{size:20}),d.jsx("span",{children:"Disposal Loads"}),G>0&&d.jsx("span",{className:"disposal-badge",children:G})]}),d.jsx("span",{className:"disposal-date",children:C})]}),d.jsx("div",{className:"disposal-quick-add",children:df.map(I=>d.jsxs("button",{className:"quick-add-btn",onClick:()=>z(I.value),disabled:g,children:[d.jsx("span",{className:"quick-add-icon",children:I.icon}),d.jsxs("span",{className:"quick-add-label",children:["+ ",I.label]})]},I.value))}),Object.keys(ne).length>0?d.jsx("div",{className:"disposal-loads-list",children:df.map(I=>{const ie=ne[I.value];return ie?d.jsxs("div",{className:"disposal-load-row",children:[d.jsxs("div",{className:"load-info",children:[d.jsx("span",{className:"load-icon",children:I.icon}),d.jsx("span",{className:"load-label",children:I.label})]}),d.jsxs("div",{className:"load-controls",children:[d.jsx("button",{className:"load-btn decrement",onClick:()=>Q(ie.items[0]),disabled:g,children:d.jsx(MS,{size:16})}),d.jsx("span",{className:"load-count",children:ie.total}),d.jsx("button",{className:"load-btn increment",onClick:()=>K(ie.items[0]),disabled:g,children:d.jsx(nf,{size:16})})]})]},I.value):null})}):d.jsxs("div",{className:"disposal-empty",children:[d.jsxs("p",{children:["No disposal loads recorded for ",C]}),d.jsx("p",{className:"disposal-hint",children:"Tap a button above to add loads"})]}),_&&d.jsxs("div",{className:"disposal-add-form",children:[d.jsxs("div",{className:"add-form-row",children:[d.jsx("select",{value:S.type,onChange:I=>O({...S,type:I.target.value}),className:"load-type-select",children:df.map(I=>d.jsxs("option",{value:I.value,children:[I.icon," ",I.label]},I.value))}),d.jsxs("div",{className:"count-input-group",children:[d.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:Math.max(1,S.count-1)}),children:d.jsx(MS,{size:16})}),d.jsx("input",{type:"number",min:"1",value:S.count,onChange:I=>O({...S,count:parseInt(I.target.value)||1}),className:"count-input"}),d.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:S.count+1}),children:d.jsx(nf,{size:16})})]})]}),d.jsxs("div",{className:"add-form-actions",children:[d.jsxs("button",{className:"btn btn-secondary btn-small",onClick:()=>x(!1),children:[d.jsx(Rb,{size:16})," Cancel"]}),d.jsxs("button",{className:"btn btn-primary btn-small",onClick:D,disabled:g,children:[d.jsx(Vi,{size:16})," Add"]})]})]}),!_&&d.jsxs("button",{className:"disposal-add-custom",onClick:()=>x(!0),children:[d.jsx(nf,{size:16}),"Add multiple loads"]}),G>0&&d.jsxs("div",{className:"disposal-summary",children:[d.jsx("strong",{children:G})," total load",G!==1?"s":""," today"]}),c.length>0&&d.jsxs("div",{className:"disposal-history-section",children:[d.jsxs("button",{className:"disposal-history-toggle",onClick:()=>j(!w),children:[d.jsx(Sq,{size:16}),d.jsxs("span",{children:["View History (",c.length," days)"]}),w?d.jsx(mN,{size:16}):d.jsx(yf,{size:16})]}),w&&d.jsx("div",{className:"disposal-history-list",children:c.map(I=>{const ie=new Date(I.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),pe=I.loads.reduce((q,R)=>(q[R.load_type]||(q[R.load_type]=0),q[R.load_type]+=R.load_count,q),{});return d.jsxs("div",{className:"disposal-history-day",children:[d.jsxs("div",{className:"disposal-history-header",children:[d.jsx("span",{className:"disposal-history-date",children:ie}),d.jsxs("span",{className:"disposal-history-total",children:[I.totalLoads," load",I.totalLoads!==1?"s":""]})]}),d.jsx("div",{className:"disposal-history-types",children:Object.entries(pe).map(([q,R])=>{const U=N3(q);return d.jsxs("span",{className:"disposal-history-type",children:[U.icon," ",R," ",U.label]},q)})})]},I.date)})})]})]})}const c1={folder:xc,plans:Aq,specs:Go,permits:fN,contracts:Cq,submittals:Oq,rfis:Eq,photos:_y,reports:hN,safety:hm},zd={blue:"#3b82f6",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",purple:"#8b5cf6",pink:"#ec4899",gray:"#6b7280",orange:"#f97316"},D3=e=>e?.startsWith("image/")?Nq:e?.includes("spreadsheet")||e?.includes("excel")?kq:e?.includes("pdf")?Go:Dq,T3=e=>{if(!e)return"0 B";const t=["B","KB","MB","GB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(r<10?1:0)} ${t[n]}`};function P3({projectId:e,onShowToast:t}){const[r,n]=y.useState([]),[i,s]=y.useState(!0),[c,u]=y.useState(null),[m,h]=y.useState([]),[g,p]=y.useState(!1),_=y.useRef(null),x=y.useCallback(async()=>{s(!0);try{const C=await be.getProjectFolders(e);n(C)}catch(C){console.error("Error loading folders:",C),t?.("Failed to load folders","error")}finally{s(!1)}},[e,t]),w=y.useCallback(async C=>{if(C){p(!0);try{const A=await be.getFolderDocuments(C);h(A.documents)}catch(A){console.error("Error loading documents:",A),t?.("Failed to load documents","error")}finally{p(!1)}}},[t]);y.useEffect(()=>{x();const C=be.subscribeToDocumentFolders?.(e,()=>{x()}),A=be.subscribeToDocuments?.(e,()=>{x(),_.current&&w(_.current.id)});return()=>{C?.unsubscribe?.(),A?.unsubscribe?.()}},[e,x,w]);const j=async C=>{u(C),_.current=C,await w(C.id)},S=async C=>{try{await be.logDocumentAccess(C.id,"downloaded");const A=C.url||`/storage/v1/object/public/project-documents/${C.storage_path}`;window.open(A,"_blank")}catch(A){console.error("Download error:",A)}},O=()=>{u(null),_.current=null,h([])};if(i)return d.jsx("div",{className:"field-docs",children:d.jsxs("div",{className:"field-docs-loading",children:[d.jsx(Gs,{size:24,className:"spinner"}),d.jsx("span",{children:"Loading..."})]})});if(c){const C=c1[c.icon]||xc,A=zd[c.color]||zd.blue;return d.jsxs("div",{className:"field-docs",children:[d.jsxs("div",{className:"field-docs-header",children:[d.jsx("button",{className:"field-docs-back",onClick:O,children:d.jsx(dr,{size:20})}),d.jsxs("div",{className:"field-docs-title",children:[d.jsx("div",{className:"field-docs-title-icon",style:{backgroundColor:`${A}15`},children:d.jsx(C,{size:20,style:{color:A}})}),d.jsxs("div",{className:"field-docs-title-text",children:[d.jsx("h2",{children:c.name}),d.jsxs("span",{children:[m.length," files"]})]})]})]}),d.jsx("div",{className:"field-docs-list",children:g?d.jsxs("div",{className:"field-docs-loading",children:[d.jsx(Gs,{size:24,className:"spinner"}),d.jsx("span",{children:"Loading..."})]}):m.length===0?d.jsxs("div",{className:"field-docs-empty",children:[d.jsx(xc,{size:48,style:{color:A,opacity:.3}}),d.jsx("p",{children:"No documents yet"})]}):m.map(k=>{const D=D3(k.mime_type);return d.jsxs("button",{className:"field-doc-item",onClick:()=>S(k),children:[d.jsx("div",{className:"field-doc-icon",children:d.jsx(D,{size:22})}),d.jsxs("div",{className:"field-doc-info",children:[d.jsx("span",{className:"field-doc-name",children:k.name}),d.jsx("span",{className:"field-doc-size",children:T3(k.file_size_bytes)})]}),d.jsx(dN,{size:20,className:"field-doc-download"})]},k.id)})})]})}return d.jsx("div",{className:"field-docs",children:d.jsx("div",{className:"field-docs-grid",children:r.length===0?d.jsxs("div",{className:"field-docs-empty",children:[d.jsx(xc,{size:56}),d.jsx("h3",{children:"No documents"}),d.jsx("p",{children:"Documents will appear here when added"})]}):r.map(C=>{const A=c1[C.icon]||xc,k=zd[C.color]||zd.blue,D=C.document_count||0;return d.jsxs("button",{className:"field-folder-card",onClick:()=>j(C),children:[d.jsx("div",{className:"field-folder-icon",style:{backgroundColor:`${k}12`},children:d.jsx(A,{size:28,style:{color:k}})}),d.jsxs("div",{className:"field-folder-info",children:[d.jsx("span",{className:"field-folder-name",children:C.name}),d.jsxs("span",{className:"field-folder-count",children:[D," ",D===1?"file":"files"]})]}),d.jsx(Ec,{size:20,className:"field-folder-arrow"})]},C.id)})})})}function WN(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=WN(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ct(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=WN(e))&&(n&&(n+=" "),n+=t);return n}var M3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Wb(e){if(typeof e!="string")return!1;var t=M3;return t.includes(e)}var R3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],q3=new Set(R3);function XN(e){return typeof e!="string"?!1:q3.has(e)}function ZN(e){return typeof e=="string"&&e.startsWith("data-")}function xn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(XN(r)||ZN(r))&&(t[r]=e[r]);return t}function zo(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return xn(t)}return typeof e=="object"&&!Array.isArray(e)?xn(e):null}function Hr(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(XN(r)||ZN(r)||Wb(r))&&(t[r]=e[r]);return t}function L3(e){return e==null?null:y.isValidElement(e)?Hr(e.props):typeof e=="object"&&!Array.isArray(e)?Hr(e):null}var z3=["children","width","height","viewBox","className","style","title","desc"];function Ty(){return Ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ty.apply(null,arguments)}function I3(e,t){if(e==null)return{};var r,n,i=U3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function U3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QN=y.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:s,className:c,style:u,title:m,desc:h}=e,g=I3(e,z3),p=s||{width:n,height:i,x:0,y:0},_=ct("recharts-surface",c);return y.createElement("svg",Ty({},Hr(g),{className:_,width:n,height:i,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),y.createElement("title",null,m),y.createElement("desc",null,h),r)}),B3=["children","className"];function Py(){return Py=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Py.apply(null,arguments)}function $3(e,t){if(e==null)return{};var r,n,i=H3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function H3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wr=y.forwardRef((e,t)=>{var{children:r,className:n}=e,i=$3(e,B3),s=ct("recharts-layer",n);return y.createElement("g",Py({className:s},Hr(i),{ref:t}),r)}),JN=y.createContext(null),yQ=()=>y.useContext(JN);function St(e){return function(){return e}}const ek=Math.cos,xf=Math.sin,ca=Math.sqrt,wf=Math.PI,bm=2*wf,My=Math.PI,Ry=2*My,Eo=1e-6,F3=Ry-Eo;function tk(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function K3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tk;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class Y3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?tk:K3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,c){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,u=this._y1,m=n-t,h=i-r,g=c-t,p=u-r,_=g*g+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(_>Eo)if(!(Math.abs(p*m-h*g)>Eo)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-c,w=i-u,j=m*m+h*h,S=x*x+w*w,O=Math.sqrt(j),C=Math.sqrt(_),A=s*Math.tan((My-Math.acos((j+_-S)/(2*O*C)))/2),k=A/C,D=A/O;Math.abs(k-1)>Eo&&this._append`L${t+k*g},${r+k*p}`,this._append`A${s},${s},0,0,${+(p*x>g*w)},${this._x1=t+D*m},${this._y1=r+D*h}`}}arc(t,r,n,i,s,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(i),m=n*Math.sin(i),h=t+u,g=r+m,p=1^c,_=c?i-s:s-i;this._x1===null?this._append`M${h},${g}`:(Math.abs(this._x1-h)>Eo||Math.abs(this._y1-g)>Eo)&&this._append`L${h},${g}`,n&&(_<0&&(_=_%Ry+Ry),_>F3?this._append`A${n},${n},0,1,${p},${t-u},${r-m}A${n},${n},0,1,${p},${this._x1=h},${this._y1=g}`:_>Eo&&this._append`A${n},${n},0,${+(_>=My)},${p},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Xb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Y3(t)}function Zb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function rk(e){this._context=e}rk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function _m(e){return new rk(e)}function nk(e){return e[0]}function ak(e){return e[1]}function ik(e,t){var r=St(!0),n=null,i=_m,s=null,c=Xb(u);e=typeof e=="function"?e:e===void 0?nk:St(e),t=typeof t=="function"?t:t===void 0?ak:St(t);function u(m){var h,g=(m=Zb(m)).length,p,_=!1,x;for(n==null&&(s=i(x=c())),h=0;h<=g;++h)!(h<g&&r(p=m[h],h,m))===_&&((_=!_)?s.lineStart():s.lineEnd()),_&&s.point(+e(p,h,m),+t(p,h,m));if(x)return s=null,x+""||null}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:St(+m),u):e},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:St(+m),u):t},u.defined=function(m){return arguments.length?(r=typeof m=="function"?m:St(!!m),u):r},u.curve=function(m){return arguments.length?(i=m,n!=null&&(s=i(n)),u):i},u.context=function(m){return arguments.length?(m==null?n=s=null:s=i(n=m),u):n},u}function Id(e,t,r){var n=null,i=St(!0),s=null,c=_m,u=null,m=Xb(h);e=typeof e=="function"?e:e===void 0?nk:St(+e),t=typeof t=="function"?t:St(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ak:St(+r);function h(p){var _,x,w,j=(p=Zb(p)).length,S,O=!1,C,A=new Array(j),k=new Array(j);for(s==null&&(u=c(C=m())),_=0;_<=j;++_){if(!(_<j&&i(S=p[_],_,p))===O)if(O=!O)x=_,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=_-1;w>=x;--w)u.point(A[w],k[w]);u.lineEnd(),u.areaEnd()}O&&(A[_]=+e(S,_,p),k[_]=+t(S,_,p),u.point(n?+n(S,_,p):A[_],r?+r(S,_,p):k[_]))}if(C)return u=null,C+""||null}function g(){return ik().defined(i).curve(c).context(s)}return h.x=function(p){return arguments.length?(e=typeof p=="function"?p:St(+p),n=null,h):e},h.x0=function(p){return arguments.length?(e=typeof p=="function"?p:St(+p),h):e},h.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:St(+p),h):n},h.y=function(p){return arguments.length?(t=typeof p=="function"?p:St(+p),r=null,h):t},h.y0=function(p){return arguments.length?(t=typeof p=="function"?p:St(+p),h):t},h.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:St(+p),h):r},h.lineX0=h.lineY0=function(){return g().x(e).y(t)},h.lineY1=function(){return g().x(e).y(r)},h.lineX1=function(){return g().x(n).y(t)},h.defined=function(p){return arguments.length?(i=typeof p=="function"?p:St(!!p),h):i},h.curve=function(p){return arguments.length?(c=p,s!=null&&(u=c(s)),h):c},h.context=function(p){return arguments.length?(p==null?s=u=null:u=c(s=p),h):s},h}class ok{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function G3(e){return new ok(e,!0)}function V3(e){return new ok(e,!1)}const Qb={draw(e,t){const r=ca(t/wf);e.moveTo(r,0),e.arc(0,0,r,0,bm)}},W3={draw(e,t){const r=ca(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},sk=ca(1/3),X3=sk*2,Z3={draw(e,t){const r=ca(t/X3),n=r*sk;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Q3={draw(e,t){const r=ca(t),n=-r/2;e.rect(n,n,r,r)}},J3=.8908130915292852,lk=xf(wf/10)/xf(7*wf/10),eI=xf(bm/10)*lk,tI=-ek(bm/10)*lk,rI={draw(e,t){const r=ca(t*J3),n=eI*r,i=tI*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const c=bm*s/5,u=ek(c),m=xf(c);e.lineTo(m*r,-u*r),e.lineTo(u*n-m*i,m*n+u*i)}e.closePath()}},Mg=ca(3),nI={draw(e,t){const r=-ca(t/(Mg*3));e.moveTo(0,r*2),e.lineTo(-Mg*r,-r),e.lineTo(Mg*r,-r),e.closePath()}},Ln=-.5,zn=ca(3)/2,qy=1/ca(12),aI=(qy/2+1)*3,iI={draw(e,t){const r=ca(t/aI),n=r/2,i=r*qy,s=n,c=r*qy+r,u=-s,m=c;e.moveTo(n,i),e.lineTo(s,c),e.lineTo(u,m),e.lineTo(Ln*n-zn*i,zn*n+Ln*i),e.lineTo(Ln*s-zn*c,zn*s+Ln*c),e.lineTo(Ln*u-zn*m,zn*u+Ln*m),e.lineTo(Ln*n+zn*i,Ln*i-zn*n),e.lineTo(Ln*s+zn*c,Ln*c-zn*s),e.lineTo(Ln*u+zn*m,Ln*m-zn*u),e.closePath()}};function oI(e,t){let r=null,n=Xb(i);e=typeof e=="function"?e:St(e||Qb),t=typeof t=="function"?t:St(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:St(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:St(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function jf(){}function Sf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function ck(e){this._context=e}ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Sf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Sf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function sI(e){return new ck(e)}function uk(e){this._context=e}uk.prototype={areaStart:jf,areaEnd:jf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Sf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lI(e){return new uk(e)}function dk(e){this._context=e}dk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Sf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cI(e){return new dk(e)}function fk(e){this._context=e}fk.prototype={areaStart:jf,areaEnd:jf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uI(e){return new fk(e)}function u1(e){return e<0?-1:1}function d1(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),c=(r-e._y1)/(i||n<0&&-0),u=(s*i+c*n)/(n+i);return(u1(s)+u1(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(u))||0}function f1(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Rg(e,t,r){var n=e._x0,i=e._y0,s=e._x1,c=e._y1,u=(s-n)/3;e._context.bezierCurveTo(n+u,i+u*t,s-u,c-u*r,s,c)}function Ef(e){this._context=e}Ef.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Rg(this,this._t0,f1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Rg(this,f1(this,r=d1(this,e,t)),r);break;default:Rg(this,this._t0,r=d1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function mk(e){this._context=new hk(e)}(mk.prototype=Object.create(Ef.prototype)).point=function(e,t){Ef.prototype.point.call(this,t,e)};function hk(e){this._context=e}hk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function dI(e){return new Ef(e)}function fI(e){return new mk(e)}function pk(e){this._context=e}pk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=m1(e),i=m1(t),s=0,c=1;c<r;++s,++c)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function m1(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),c=new Array(r);for(i[0]=0,s[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,c[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,c[t]-=n*c[t-1];for(i[r-1]=c[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(c[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function mI(e){return new pk(e)}function xm(e,t){this._context=e,this._t=t}xm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function hI(e){return new xm(e,.5)}function pI(e){return new xm(e,0)}function gI(e){return new xm(e,1)}function Io(e,t){if((c=e.length)>1)for(var r=1,n,i,s=e[t[0]],c,u=s.length;r<c;++r)for(i=s,s=e[t[r]],n=0;n<u;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Ly(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function vI(e,t){return e[t]}function yI(e){const t=[];return t.key=e,t}function bI(){var e=St([]),t=Ly,r=Io,n=vI;function i(s){var c=Array.from(e.apply(this,arguments),yI),u,m=c.length,h=-1,g;for(const p of s)for(u=0,++h;u<m;++u)(c[u][h]=[0,+n(p,c[u].key,h,s)]).data=p;for(u=0,g=Zb(t(c));u<m;++u)c[g[u]].index=u;return r(c,g),c}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:St(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:St(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?Ly:typeof s=="function"?s:St(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??Io,i):r},i}function _I(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,c;i<s;++i){for(c=r=0;r<n;++r)c+=e[r][i][1]||0;if(c)for(r=0;r<n;++r)e[r][i][1]/=c}Io(e,t)}}function xI(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var c=0,u=0;c<i;++c)u+=e[c][r][1]||0;n[r][1]+=n[r][0]=-u/2}Io(e,t)}}function wI(e,t){if(!(!((c=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,c;n<s;++n){for(var u=0,m=0,h=0;u<c;++u){for(var g=e[t[u]],p=g[n][1]||0,_=g[n-1][1]||0,x=(p-_)/2,w=0;w<u;++w){var j=e[t[w]],S=j[n][1]||0,O=j[n-1][1]||0;x+=S-O}m+=p,h+=x*p}i[n-1][1]+=i[n-1][0]=r,m&&(r-=h/m)}i[n-1][1]+=i[n-1][0]=r,Io(e,t)}}var qg={},Lg={},h1;function jI(){return h1||(h1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Lg)),Lg}var zg={},p1;function gk(){return p1||(p1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(zg)),zg}var Ig={},g1;function Jb(){return g1||(g1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Ig)),Ig}var Ug={},Bg={},v1;function SI(){return v1||(v1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Bg)),Bg}var y1;function e0(){return y1||(y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SI(),r=Jb();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],c=i.length;if(c===0)return s;let u=0,m="",h="",g=!1;for(i.charCodeAt(0)===46&&(s.push(""),u++);u<c;){const p=i[u];h?p==="\\"&&u+1<c?(u++,m+=i[u]):p===h?h="":m+=p:g?p==='"'||p==="'"?h=p:p==="]"?(g=!1,s.push(m),m=""):m+=p:p==="["?(g=!0,m&&(s.push(m),m="")):p==="."?m&&(s.push(m),m=""):m+=p,u++}return m&&s.push(m),s}e.toPath=n})(Ug)),Ug}var b1;function t0(){return b1||(b1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jI(),r=gk(),n=Jb(),i=e0();function s(u,m,h){if(u==null)return h;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return h;const g=u[m];return g===void 0?r.isDeepKey(m)?s(u,i.toPath(m),h):h:g}case"number":case"symbol":{typeof m=="number"&&(m=n.toKey(m));const g=u[m];return g===void 0?h:g}default:{if(Array.isArray(m))return c(u,m,h);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return h;const g=u[m];return g===void 0?h:g}}}function c(u,m,h){if(m.length===0)return h;let g=u;for(let p=0;p<m.length;p++){if(g==null||t.isUnsafeProperty(m[p]))return h;g=g[m[p]]}return g===void 0?h:g}e.get=s})(qg)),qg}var $g,_1;function EI(){return _1||(_1=1,$g=t0().get),$g}var OI=EI();const Uo=oi(OI);var CI=4;function Yi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:CI,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Yt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,s,c)=>{var u=r[c-1];return typeof u=="string"?i+u+s:u!==void 0?i+Yi(u)+s:i+s},"")}var xr=e=>e===0?0:e>0?1:-1,ia=e=>typeof e=="number"&&e!=+e,Ja=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ke=e=>(typeof e=="number"||e instanceof Number)&&!ia(e),wa=e=>ke(e)||typeof e=="string",AI=0,Nc=e=>{var t=++AI;return"".concat(e||"").concat(t)},Rr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(t)&&typeof t!="string")return n;var s;if(Ja(t)){if(r==null)return n;var c=t.indexOf("%");s=r*parseFloat(t.slice(0,c))/100}else s=+t;return ia(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},vk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Tt(e,t,r){return ke(e)&&ke(t)?Yi(e+r*(t-e)):t}function yk(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Uo(n,t))===r)}var Rt=e=>e===null||typeof e>"u",Wc=e=>Rt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function NI(e){return e!=null}function Xc(){}var kI=["type","size","sizeType"];function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zy.apply(null,arguments)}function x1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function w1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?x1(Object(r),!0).forEach(function(n){DI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DI(e,t,r){return(t=TI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TI(e){var t=PI(e,"string");return typeof t=="symbol"?t:t+""}function PI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MI(e,t){if(e==null)return{};var r,n,i=RI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function RI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var bk={symbolCircle:Qb,symbolCross:W3,symbolDiamond:Z3,symbolSquare:Q3,symbolStar:rI,symbolTriangle:nI,symbolWye:iI},qI=Math.PI/180,LI=e=>{var t="symbol".concat(Wc(e));return bk[t]||Qb},zI=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*qI;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},II=(e,t)=>{bk["symbol".concat(Wc(e))]=t},_k=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=MI(e,kI),s=w1(w1({},i),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var u=()=>{var _=LI(c),x=oI().type(_).size(zI(r,n,c)),w=x();if(w!==null)return w},{className:m,cx:h,cy:g}=s,p=Hr(s);return ke(h)&&ke(g)&&ke(r)?y.createElement("path",zy({},p,{className:ct("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(g,")"),d:u()})):null};_k.registerSymbol=II;var xk=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,r0=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{Wb(i)&&(n[i]=(s=>r[i](r,s)))}),n},UI=(e,t,r)=>n=>(e(t,r,n),null),wm=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var s=e[i];Wb(i)&&typeof s=="function"&&(n||(n={}),n[i]=UI(s,t,r))}),n};function j1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j1(Object(r),!0).forEach(function(n){$I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $I(e,t,r){return(t=HI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HI(e){var t=FI(e,"string");return typeof t=="symbol"?t:t+""}function FI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jr(e,t){var r=BI({},e),n=t,i=Object.keys(t),s=i.reduce((c,u)=>(c[u]===void 0&&n[u]!==void 0&&(c[u]=n[u]),c),r);return s}var Hg={},Fg={},S1;function KI(){return S1||(S1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let s=0;s<r.length;s++){const c=r[s],u=n(c);i.has(u)||i.set(u,c)}return Array.from(i.values())}e.uniqBy=t})(Fg)),Fg}var Kg={},E1;function wk(){return E1||(E1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Kg)),Kg}var Yg={},Gg={},Vg={},O1;function YI(){return O1||(O1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Vg)),Vg}var C1;function n0(){return C1||(C1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YI();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Gg)),Gg}var Wg={},A1;function GI(){return A1||(A1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Wg)),Wg}var N1;function VI(){return N1||(N1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n0(),r=GI();function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(Yg)),Yg}var Xg={},Zg={},k1;function WI(){return k1||(k1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t0();function r(n){return function(i){return t.get(i,n)}}e.property=r})(Zg)),Zg}var Qg={},Jg={},ev={},tv={},D1;function jk(){return D1||(D1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(tv)),tv}var rv={},T1;function Sk(){return T1||(T1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(rv)),rv}var nv={},P1;function Ek(){return P1||(P1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(nv)),nv}var M1;function XI(){return M1||(M1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jk(),r=Sk(),n=Ek();function i(g,p,_){return typeof _!="function"?i(g,p,()=>{}):s(g,p,function x(w,j,S,O,C,A){const k=_(w,j,S,O,C,A);return k!==void 0?!!k:s(w,j,x,A)},new Map)}function s(g,p,_,x){if(p===g)return!0;switch(typeof p){case"object":return c(g,p,_,x);case"function":return Object.keys(p).length>0?s(g,{...p},_,x):n.eq(g,p);default:return t.isObject(g)?typeof p=="string"?p==="":!0:n.eq(g,p)}}function c(g,p,_,x){if(p==null)return!0;if(Array.isArray(p))return m(g,p,_,x);if(p instanceof Map)return u(g,p,_,x);if(p instanceof Set)return h(g,p,_,x);const w=Object.keys(p);if(g==null||r.isPrimitive(g))return w.length===0;if(w.length===0)return!0;if(x?.has(p))return x.get(p)===g;x?.set(p,g);try{for(let j=0;j<w.length;j++){const S=w[j];if(!r.isPrimitive(g)&&!(S in g)||p[S]===void 0&&g[S]!==void 0||p[S]===null&&g[S]!==null||!_(g[S],p[S],S,g,p,x))return!1}return!0}finally{x?.delete(p)}}function u(g,p,_,x){if(p.size===0)return!0;if(!(g instanceof Map))return!1;for(const[w,j]of p.entries()){const S=g.get(w);if(_(S,j,w,g,p,x)===!1)return!1}return!0}function m(g,p,_,x){if(p.length===0)return!0;if(!Array.isArray(g))return!1;const w=new Set;for(let j=0;j<p.length;j++){const S=p[j];let O=!1;for(let C=0;C<g.length;C++){if(w.has(C))continue;const A=g[C];let k=!1;if(_(A,S,j,g,p,x)&&(k=!0),k){w.add(C),O=!0;break}}if(!O)return!1}return!0}function h(g,p,_,x){return p.size===0?!0:g instanceof Set?m([...g],[...p],_,x):!1}e.isMatchWith=i,e.isSetMatch=h})(ev)),ev}var R1;function Ok(){return R1||(R1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XI();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(Jg)),Jg}var av={},iv={},ov={},q1;function ZI(){return q1||(q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(ov)),ov}var sv={},L1;function Ck(){return L1||(L1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(sv)),sv}var lv={},z1;function Ak(){return z1||(z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",c="[object Symbol]",u="[object Date]",m="[object Map]",h="[object Set]",g="[object Array]",p="[object Function]",_="[object ArrayBuffer]",x="[object Object]",w="[object Error]",j="[object DataView]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",k="[object BigUint64Array]",D="[object Int8Array]",M="[object Int16Array]",z="[object Int32Array]",K="[object BigInt64Array]",Q="[object Float32Array]",ne="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=_,e.arrayTag=g,e.bigInt64ArrayTag=K,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=j,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=Q,e.float64ArrayTag=ne,e.functionTag=p,e.int16ArrayTag=M,e.int32ArrayTag=z,e.int8ArrayTag=D,e.mapTag=m,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=C,e.uint32ArrayTag=A,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=O})(lv)),lv}var cv={},I1;function QI(){return I1||(I1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(cv)),cv}var U1;function Nk(){return U1||(U1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZI(),r=Ck(),n=Ak(),i=Sk(),s=QI();function c(g,p){return u(g,void 0,g,new Map,p)}function u(g,p,_,x=new Map,w=void 0){const j=w?.(g,p,_,x);if(j!==void 0)return j;if(i.isPrimitive(g))return g;if(x.has(g))return x.get(g);if(Array.isArray(g)){const S=new Array(g.length);x.set(g,S);for(let O=0;O<g.length;O++)S[O]=u(g[O],O,_,x,w);return Object.hasOwn(g,"index")&&(S.index=g.index),Object.hasOwn(g,"input")&&(S.input=g.input),S}if(g instanceof Date)return new Date(g.getTime());if(g instanceof RegExp){const S=new RegExp(g.source,g.flags);return S.lastIndex=g.lastIndex,S}if(g instanceof Map){const S=new Map;x.set(g,S);for(const[O,C]of g)S.set(O,u(C,O,_,x,w));return S}if(g instanceof Set){const S=new Set;x.set(g,S);for(const O of g)S.add(u(O,void 0,_,x,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(g))return g.subarray();if(s.isTypedArray(g)){const S=new(Object.getPrototypeOf(g)).constructor(g.length);x.set(g,S);for(let O=0;O<g.length;O++)S[O]=u(g[O],O,_,x,w);return S}if(g instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&g instanceof SharedArrayBuffer)return g.slice(0);if(g instanceof DataView){const S=new DataView(g.buffer.slice(0),g.byteOffset,g.byteLength);return x.set(g,S),m(S,g,_,x,w),S}if(typeof File<"u"&&g instanceof File){const S=new File([g],g.name,{type:g.type});return x.set(g,S),m(S,g,_,x,w),S}if(typeof Blob<"u"&&g instanceof Blob){const S=new Blob([g],{type:g.type});return x.set(g,S),m(S,g,_,x,w),S}if(g instanceof Error){const S=new g.constructor;return x.set(g,S),S.message=g.message,S.name=g.name,S.stack=g.stack,S.cause=g.cause,m(S,g,_,x,w),S}if(g instanceof Boolean){const S=new Boolean(g.valueOf());return x.set(g,S),m(S,g,_,x,w),S}if(g instanceof Number){const S=new Number(g.valueOf());return x.set(g,S),m(S,g,_,x,w),S}if(g instanceof String){const S=new String(g.valueOf());return x.set(g,S),m(S,g,_,x,w),S}if(typeof g=="object"&&h(g)){const S=Object.create(Object.getPrototypeOf(g));return x.set(g,S),m(S,g,_,x,w),S}return g}function m(g,p,_=g,x,w){const j=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<j.length;S++){const O=j[S],C=Object.getOwnPropertyDescriptor(g,O);(C==null||C.writable)&&(g[O]=u(p[O],O,_,x,w))}}function h(g){switch(r.getTag(g)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=u,e.copyProperties=m})(iv)),iv}var B1;function JI(){return B1||(B1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nk();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(av)),av}var $1;function e5(){return $1||($1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ok(),r=JI();function n(i){return i=r.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=n})(Qg)),Qg}var uv={},dv={},fv={},H1;function t5(){return H1||(H1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Nk(),r=Ak();function n(i,s){return t.cloneDeepWith(i,(c,u,m,h)=>{const g=s?.(c,u,m,h);if(g!==void 0)return g;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new i.constructor(i?.valueOf());return t.copyProperties(p,i),p}case r.argumentsTag:{const p={};return t.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(fv)),fv}var F1;function r5(){return F1||(F1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t5();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(dv)),dv}var mv={},hv={},K1;function kk(){return K1||(K1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(hv)),hv}var pv={},Y1;function n5(){return Y1||(Y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ck();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(pv)),pv}var G1;function a5(){return G1||(G1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gk(),r=kk(),n=n5(),i=e0();function s(c,u){let m;if(Array.isArray(u)?m=u:typeof u=="string"&&t.isDeepKey(u)&&c?.[u]==null?m=i.toPath(u):m=[u],m.length===0)return!1;let h=c;for(let g=0;g<m.length;g++){const p=m[g];if((h==null||!Object.hasOwn(h,p))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(p)&&p<h.length))return!1;h=h[p]}return!0}e.has=s})(mv)),mv}var V1;function i5(){return V1||(V1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ok(),r=Jb(),n=r5(),i=t0(),s=a5();function c(u,m){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return m=n.cloneDeep(m),function(h){const g=i.get(h,u);return g===void 0?s.has(h,u):m===void 0?g===void 0:t.isMatch(g,m)}}e.matchesProperty=c})(uv)),uv}var W1;function o5(){return W1||(W1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wk(),r=WI(),n=e5(),i=i5();function s(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=s})(Xg)),Xg}var X1;function s5(){return X1||(X1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KI(),r=wk(),n=VI(),i=o5();function s(c,u=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.iteratee(u)):[]}e.uniqBy=s})(Hg)),Hg}var gv,Z1;function l5(){return Z1||(Z1=1,gv=s5().uniqBy),gv}var c5=l5();const Q1=oi(c5);function u5(e,t,r){return t===!0?Q1(e,r):typeof t=="function"?Q1(e,t):e}var vv={exports:{}},yv={},bv={exports:{}},_v={};var J1;function d5(){if(J1)return _v;J1=1;var e=mm();function t(p,_){return p===_&&(p!==0||1/p===1/_)||p!==p&&_!==_}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,s=e.useLayoutEffect,c=e.useDebugValue;function u(p,_){var x=_(),w=n({inst:{value:x,getSnapshot:_}}),j=w[0].inst,S=w[1];return s(function(){j.value=x,j.getSnapshot=_,m(j)&&S({inst:j})},[p,x,_]),i(function(){return m(j)&&S({inst:j}),p(function(){m(j)&&S({inst:j})})},[p]),c(x),x}function m(p){var _=p.getSnapshot;p=p.value;try{var x=_();return!r(p,x)}catch{return!0}}function h(p,_){return _()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return _v.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,_v}var eE;function f5(){return eE||(eE=1,bv.exports=d5()),bv.exports}var tE;function m5(){if(tE)return yv;tE=1;var e=mm(),t=f5();function r(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,s=e.useRef,c=e.useEffect,u=e.useMemo,m=e.useDebugValue;return yv.useSyncExternalStoreWithSelector=function(h,g,p,_,x){var w=s(null);if(w.current===null){var j={hasValue:!1,value:null};w.current=j}else j=w.current;w=u(function(){function O(M){if(!C){if(C=!0,A=M,M=_(M),x!==void 0&&j.hasValue){var z=j.value;if(x(z,M))return k=z}return k=M}if(z=k,n(A,M))return z;var K=_(M);return x!==void 0&&x(z,K)?(A=M,z):(A=M,k=K)}var C=!1,A,k,D=p===void 0?null:p;return[function(){return O(g())},D===null?void 0:function(){return O(D())}]},[g,p,_,x]);var S=i(h,w[0],w[1]);return c(function(){j.hasValue=!0,j.value=S},[S]),m(S),S},yv}var rE;function h5(){return rE||(rE=1,vv.exports=m5()),vv.exports}var p5=h5(),a0=y.createContext(null),g5=e=>e,qt=()=>{var e=y.useContext(a0);return e?e.store.dispatch:g5},ff=()=>{},v5=()=>ff,y5=(e,t)=>e===t;function De(e){var t=y.useContext(a0);return p5.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:v5,t?t.store.getState:ff,t?t.store.getState:ff,t?e:ff,y5)}function b5(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function _5(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function x5(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var nE=e=>Array.isArray(e)?e:[e];function w5(e){const t=Array.isArray(e[0])?e[0]:e;return x5(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function j5(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var S5=class{constructor(e){this.value=e}deref(){return this.value}},E5=typeof WeakRef<"u"?WeakRef:S5,O5=0,aE=1;function Ud(){return{s:O5,v:void 0,o:null,p:null}}function Dk(e,t={}){let r=Ud();const{resultEqualityCheck:n}=t;let i,s=0;function c(){let u=r;const{length:m}=arguments;for(let p=0,_=m;p<_;p++){const x=arguments[p];if(typeof x=="function"||typeof x=="object"&&x!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const j=w.get(x);j===void 0?(u=Ud(),w.set(x,u)):u=j}else{let w=u.p;w===null&&(u.p=w=new Map);const j=w.get(x);j===void 0?(u=Ud(),w.set(x,u)):u=j}}const h=u;let g;if(u.s===aE)g=u.v;else if(g=e.apply(null,arguments),s++,n){const p=i?.deref?.()??i;p!=null&&n(p,g)&&(g=p,s!==0&&s--),i=typeof g=="object"&&g!==null||typeof g=="function"?new E5(g):g}return h.s=aE,h.v=g,g}return c.clearCache=()=>{r=Ud(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function C5(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let s=0,c=0,u,m={},h=i.pop();typeof h=="object"&&(m=h,h=i.pop()),b5(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const g={...r,...m},{memoize:p,memoizeOptions:_=[],argsMemoize:x=Dk,argsMemoizeOptions:w=[]}=g,j=nE(_),S=nE(w),O=w5(i),C=p(function(){return s++,h.apply(null,arguments)},...j),A=x(function(){c++;const D=j5(O,arguments);return u=C.apply(null,D),u},...S);return Object.assign(A,{resultFunc:h,memoizedResultFunc:C,dependencies:O,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var X=C5(Dk),A5=Object.assign((e,t=X)=>{_5(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((c,u,m)=>(c[r[m]]=u,c),{}))},{withTypes:()=>A5}),xv={},wv={},jv={},iE;function N5(){return iE||(iE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const c=t(n),u=t(i);if(c===u&&c===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?u-c:c-u}return 0};e.compareValues=r})(jv)),jv}var Sv={},Ev={},oE;function Tk(){return oE||(oE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(Ev)),Ev}var sE;function k5(){return sE||(sE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tk(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||c!=null&&Object.hasOwn(c,s)}e.isKey=i})(Sv)),Sv}var lE;function D5(){return lE||(lE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=N5(),r=k5(),n=e0();function i(s,c,u,m){if(s==null)return[];u=m?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,w)=>{let j=x;for(let S=0;S<w.length&&j!=null;++S)j=j[w[S]];return j},g=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:h(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?h(w,x):typeof w=="object"?w[x]:w,p=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return s.map(x=>({original:x,criteria:p.map(w=>g(w,x))})).slice().sort((x,w)=>{for(let j=0;j<p.length;j++){const S=t.compareValues(x.criteria[j],w.criteria[j],u[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(wv)),wv}var Ov={},cE;function T5(){return cE||(cE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],s=Math.floor(n),c=(u,m)=>{for(let h=0;h<u.length;h++){const g=u[h];Array.isArray(g)&&m<s?c(g,m+1):i.push(g)}};return c(r,0),i}e.flatten=t})(Ov)),Ov}var Cv={},uE;function Pk(){return uE||(uE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kk(),r=n0(),n=jk(),i=Ek();function s(c,u,m){return n.isObject(m)&&(typeof u=="number"&&r.isArrayLike(m)&&t.isIndex(u)&&u<m.length||typeof u=="string"&&u in m)?i.eq(m[u],c):!1}e.isIterateeCall=s})(Cv)),Cv}var dE;function P5(){return dE||(dE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=D5(),r=T5(),n=Pk();function i(s,...c){const u=c.length;return u>1&&n.isIterateeCall(s,c[0],c[1])?c=[]:u>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(s,r.flatten(c),["asc"])}e.sortBy=i})(xv)),xv}var Av,fE;function M5(){return fE||(fE=1,Av=P5().sortBy),Av}var R5=M5();const jm=oi(R5);var Mk=e=>e.legend.settings,q5=e=>e.legend.size,L5=e=>e.legend.payload,bQ=X([L5,Mk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?jm(n,r):n}),Bd=1;function z5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-t.height)>Bd||Math.abs(c.left-t.left)>Bd||Math.abs(c.top-t.top)>Bd||Math.abs(c.width-t.width)>Bd)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function kr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var I5=typeof Symbol=="function"&&Symbol.observable||"@@observable",mE=I5,Nv=()=>Math.random().toString(36).substring(7).split("").join("."),U5={INIT:`@@redux/INIT${Nv()}`,REPLACE:`@@redux/REPLACE${Nv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Nv()}`},Of=U5;function i0(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Rk(e,t,r){if(typeof e!="function")throw new Error(kr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(kr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(kr(1));return r(Rk)(e,t)}let n=e,i=t,s=new Map,c=s,u=0,m=!1;function h(){c===s&&(c=new Map,s.forEach((S,O)=>{c.set(O,S)}))}function g(){if(m)throw new Error(kr(3));return i}function p(S){if(typeof S!="function")throw new Error(kr(4));if(m)throw new Error(kr(5));let O=!0;h();const C=u++;return c.set(C,S),function(){if(O){if(m)throw new Error(kr(6));O=!1,h(),c.delete(C),s=null}}}function _(S){if(!i0(S))throw new Error(kr(7));if(typeof S.type>"u")throw new Error(kr(8));if(typeof S.type!="string")throw new Error(kr(17));if(m)throw new Error(kr(9));try{m=!0,i=n(i,S)}finally{m=!1}return(s=c).forEach(C=>{C()}),S}function x(S){if(typeof S!="function")throw new Error(kr(10));n=S,_({type:Of.REPLACE})}function w(){const S=p;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(kr(11));function C(){const k=O;k.next&&k.next(g())}return C(),{unsubscribe:S(C)}},[mE](){return this}}}return _({type:Of.INIT}),{dispatch:_,subscribe:p,getState:g,replaceReducer:x,[mE]:w}}function B5(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Of.INIT})>"u")throw new Error(kr(12));if(typeof r(void 0,{type:Of.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(kr(13))})}function qk(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const c=t[s];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let i;try{B5(r)}catch(s){i=s}return function(c={},u){if(i)throw i;let m=!1;const h={};for(let g=0;g<n.length;g++){const p=n[g],_=r[p],x=c[p],w=_(x,u);if(typeof w>"u")throw u&&u.type,new Error(kr(14));h[p]=w,m=m||w!==x}return m=m||n.length!==Object.keys(c).length,m?h:c}}function Cf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function $5(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(kr(15))};const c={getState:i.getState,dispatch:(m,...h)=>s(m,...h)},u=e.map(m=>m(c));return s=Cf(...u)(i.dispatch),{...i,dispatch:s}}}function Lk(e){return i0(e)&&"type"in e&&typeof e.type=="string"}var zk=Symbol.for("immer-nothing"),hE=Symbol.for("immer-draftable"),Fr=Symbol.for("immer-state");function ea(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var bn=Object,Vs=bn.getPrototypeOf,Af="constructor",Sm="prototype",Iy="configurable",Nf="enumerable",mf="writable",kc="value",ei=e=>!!e&&!!e[Fr];function oa(e){return e?Ik(e)||Om(e)||!!e[hE]||!!e[Af]?.[hE]||Cm(e)||Am(e):!1}var H5=bn[Sm][Af].toString(),pE=new WeakMap;function Ik(e){if(!e||!o0(e))return!1;const t=Vs(e);if(t===null||t===bn[Sm])return!0;const r=bn.hasOwnProperty.call(t,Af)&&t[Af];if(r===Object)return!0;if(!Bs(r))return!1;let n=pE.get(r);return n===void 0&&(n=Function.toString.call(r),pE.set(r,n)),n===H5}function Em(e,t,r=!0){Zc(e)===0?(r?Reflect.ownKeys(e):bn.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Zc(e){const t=e[Fr];return t?t.type_:Om(e)?1:Cm(e)?2:Am(e)?3:0}var gE=(e,t,r=Zc(e))=>r===2?e.has(t):bn[Sm].hasOwnProperty.call(e,t),Uy=(e,t,r=Zc(e))=>r===2?e.get(t):e[t],kf=(e,t,r,n=Zc(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function F5(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Om=Array.isArray,Cm=e=>e instanceof Map,Am=e=>e instanceof Set,o0=e=>typeof e=="object",Bs=e=>typeof e=="function",kv=e=>typeof e=="boolean";function K5(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Ka=e=>e.copy_||e.base_,s0=e=>e.modified_?e.copy_:e.base_;function By(e,t){if(Cm(e))return new Map(e);if(Am(e))return new Set(e);if(Om(e))return Array[Sm].slice.call(e);const r=Ik(e);if(t===!0||t==="class_only"&&!r){const n=bn.getOwnPropertyDescriptors(e);delete n[Fr];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u[mf]===!1&&(u[mf]=!0,u[Iy]=!0),(u.get||u.set)&&(n[c]={[Iy]:!0,[mf]:!0,[Nf]:u[Nf],[kc]:e[c]})}return bn.create(Vs(e),n)}else{const n=Vs(e);if(n!==null&&r)return{...e};const i=bn.create(n);return bn.assign(i,e)}}function l0(e,t=!1){return Nm(e)||ei(e)||!oa(e)||(Zc(e)>1&&bn.defineProperties(e,{set:$d,add:$d,clear:$d,delete:$d}),bn.freeze(e),t&&Em(e,(r,n)=>{l0(n,!0)},!1)),e}function Y5(){ea(2)}var $d={[kc]:Y5};function Nm(e){return e===null||!o0(e)?!0:bn.isFrozen(e)}var Df="MapSet",$y="Patches",vE="ArrayMethods",Uk={};function Bo(e){const t=Uk[e];return t||ea(0,e),t}var yE=e=>!!Uk[e],Dc,Bk=()=>Dc,G5=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:yE(Df)?Bo(Df):void 0,arrayMethodsPlugin_:yE(vE)?Bo(vE):void 0});function bE(e,t){t&&(e.patchPlugin_=Bo($y),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Hy(e){Fy(e),e.drafts_.forEach(V5),e.drafts_=null}function Fy(e){e===Dc&&(Dc=e.parent_)}var _E=e=>Dc=G5(Dc,e);function V5(e){const t=e[Fr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function xE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Fr].modified_&&(Hy(t),ea(4)),oa(e)&&(e=wE(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[Fr].base_,e,t)}else e=wE(t,r);return W5(t,e,!0),Hy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==zk?e:void 0}function wE(e,t){if(Nm(t))return t;const r=t[Fr];if(!r)return Tf(t,e.handledSet_,e);if(!km(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);Fk(r,e)}return r.copy_}function W5(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&l0(t,r)}function $k(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var km=(e,t)=>e.scope_===t,X5=[];function Hk(e,t,r,n){const i=Ka(e),s=e.type_;if(n!==void 0&&Uy(i,n,s)===t){kf(i,n,r,s);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;Em(i,(m,h)=>{if(ei(h)){const g=u.get(h)||[];g.push(m),u.set(h,g)}})}const c=e.draftLocations_.get(t)??X5;for(const u of c)kf(i,u,r,s)}function Z5(e,t,r){e.callbacks_.push(function(i){const s=t;if(!s||!km(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const c=s0(s);Hk(e,s.draft_??s,c,r),Fk(s,i)})}function Fk(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}$k(e)}}function Q5(e,t,r){const{scope_:n}=e;if(ei(r)){const i=r[Fr];km(i,n)&&i.callbacks_.push(function(){hf(e);const c=s0(i);Hk(e,r,c,t)})}else oa(r)&&e.callbacks_.push(function(){const s=Ka(e);e.type_===3?s.has(r)&&Tf(r,n.handledSet_,n):Uy(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Tf(Uy(e.copy_,t,e.type_),n.handledSet_,n)})}function Tf(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||ei(e)||t.has(e)||!oa(e)||Nm(e)||(t.add(e),Em(e,(n,i)=>{if(ei(i)){const s=i[Fr];if(km(s,r)){const c=s0(s);kf(e,n,c,e.type_),$k(s)}}else oa(i)&&Tf(i,t,r)})),e}function J5(e,t){const r=Om(e),n={type_:r?1:0,scope_:t?t.scope_:Bk(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=Pf;r&&(i=[n],s=Tc);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,[u,n]}var Pf={get(e,t){if(t===Fr)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=Ka(e);if(!gE(i,t,e.type_))return e4(e,i,t);const s=i[t];if(e.finalized_||!oa(s)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&K5(t))return s;if(s===Dv(e.base_,t)){hf(e);const c=e.type_===1?+t:t,u=Yy(e.scope_,s,e,c);return e.copy_[c]=u}return s},has(e,t){return t in Ka(e)},ownKeys(e){return Reflect.ownKeys(Ka(e))},set(e,t,r){const n=Kk(Ka(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Dv(Ka(e),t),s=i?.[Fr];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(F5(r,i)&&(r!==void 0||gE(e.base_,t,e.type_)))return!0;hf(e),Ky(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Q5(e,t,r)),!0},deleteProperty(e,t){return hf(e),Dv(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Ky(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ka(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[mf]:!0,[Iy]:e.type_!==1||t!=="length",[Nf]:n[Nf],[kc]:r[t]}},defineProperty(){ea(11)},getPrototypeOf(e){return Vs(e.base_)},setPrototypeOf(){ea(12)}},Tc={};for(let e in Pf){let t=Pf[e];Tc[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Tc.deleteProperty=function(e,t){return Tc.set.call(this,e,t,void 0)};Tc.set=function(e,t,r){return Pf.set.call(this,e[0],t,r,e[0])};function Dv(e,t){const r=e[Fr];return(r?Ka(r):e)[t]}function e4(e,t,r){const n=Kk(t,r);return n?kc in n?n[kc]:n.get?.call(e.draft_):void 0}function Kk(e,t){if(!(t in e))return;let r=Vs(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Vs(r)}}function Ky(e){e.modified_||(e.modified_=!0,e.parent_&&Ky(e.parent_))}function hf(e){e.copy_||(e.assigned_=new Map,e.copy_=By(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var t4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(Bs(r)&&!Bs(n)){const c=n;n=r;const u=this;return function(h=c,...g){return u.produce(h,p=>n.call(this,p,...g))}}Bs(n)||ea(6),i!==void 0&&!Bs(i)&&ea(7);let s;if(oa(r)){const c=_E(this),u=Yy(c,r,void 0);let m=!0;try{s=n(u),m=!1}finally{m?Hy(c):Fy(c)}return bE(c,i),xE(s,c)}else if(!r||!o0(r)){if(s=n(r),s===void 0&&(s=r),s===zk&&(s=void 0),this.autoFreeze_&&l0(s,!0),i){const c=[],u=[];Bo($y).generateReplacementPatches_(r,s,{patches_:c,inversePatches_:u}),i(c,u)}return s}else ea(1,r)},this.produceWithPatches=(r,n)=>{if(Bs(r))return(u,...m)=>this.produceWithPatches(u,h=>r(h,...m));let i,s;return[this.produce(r,n,(u,m)=>{i=u,s=m}),i,s]},kv(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),kv(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),kv(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){oa(t)||ea(8),ei(t)&&(t=aa(t));const r=_E(this),n=Yy(r,t,void 0);return n[Fr].isManual_=!0,Fy(r),n}finishDraft(t,r){const n=t&&t[Fr];(!n||!n.isManual_)&&ea(9);const{scope_:i}=n;return bE(i,r),xE(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const i=Bo($y).applyPatches_;return ei(t)?i(t,r):this.produce(t,s=>i(s,r))}};function Yy(e,t,r,n){const[i,s]=Cm(t)?Bo(Df).proxyMap_(t,r):Am(t)?Bo(Df).proxySet_(t,r):J5(t,r);return(r?.scope_??Bk()).drafts_.push(i),s.callbacks_=r?.callbacks_??[],s.key_=n,r&&n!==void 0?Z5(r,s,n):s.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:h}=m;s.modified_&&h&&h.generatePatches_(s,[],m)}),i}function aa(e){return ei(e)||ea(10,e),Yk(e)}function Yk(e){if(!oa(e)||Nm(e))return e;const t=e[Fr];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=By(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=By(e,!0);return Em(r,(i,s)=>{kf(r,i,Yk(s))},n),t&&(t.finalized_=!1),r}var r4=new t4,Gk=r4.produce;function Vk(e){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,e):i(s)}var n4=Vk(),a4=Vk,i4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Cf:Cf.apply(null,arguments)};function Hn(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(_n(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Lk(n)&&n.type===e,r}var Wk=class jc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,jc.prototype)}static get[Symbol.species](){return jc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new jc(...t[0].concat(this)):new jc(...t.concat(this))}};function jE(e){return oa(e)?Gk(e,()=>{}):e}function Hd(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function o4(e){return typeof e=="boolean"}var s4=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let c=new Wk;return r&&(o4(r)?c.push(n4):c.push(a4(r.extraArgument))),c},Xk="RTK_autoBatch",Dt=()=>e=>({payload:e,meta:{[Xk]:!0}}),SE=e=>t=>{setTimeout(t,e)},Zk=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,c=!1;const u=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:SE(10):e.type==="callback"?e.queueNotification:SE(e.timeout),h=()=>{c=!1,s&&(s=!1,u.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){const p=()=>i&&g(),_=n.subscribe(p);return u.add(g),()=>{_(),u.delete(g)}},dispatch(g){try{return i=!g?.meta?.[Xk],s=!i,s&&(c||(c=!0,m(h))),n.dispatch(g)}finally{i=!0}}})},l4=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new Wk(e);return n&&i.push(Zk(typeof n=="object"?n:void 0)),i};function c4(e){const t=s4(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:c=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(i0(r))u=qk(r);else throw new Error(_n(1));let m;typeof n=="function"?m=n(t):m=t();let h=Cf;i&&(h=i4({trace:!1,...typeof i=="object"&&i}));const g=$5(...m),p=l4(g);let _=typeof c=="function"?c(p):p();const x=h(..._);return Rk(u,s,x)}function Qk(e){const t={},r=[];let n;const i={addCase(s,c){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(_n(28));if(u in t)throw new Error(_n(29));return t[u]=c,i},addAsyncThunk(s,c){return c.pending&&(t[s.pending.type]=c.pending),c.rejected&&(t[s.rejected.type]=c.rejected),c.fulfilled&&(t[s.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:s.settled,reducer:c.settled}),i},addMatcher(s,c){return r.push({matcher:s,reducer:c}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function u4(e){return typeof e=="function"}function d4(e,t){let[r,n,i]=Qk(t),s;if(u4(e))s=()=>jE(e());else{const u=jE(e);s=()=>u}function c(u=s(),m){let h=[r[m.type],...n.filter(({matcher:g})=>g(m)).map(({reducer:g})=>g)];return h.filter(g=>!!g).length===0&&(h=[i]),h.reduce((g,p)=>{if(p)if(ei(g)){const x=p(g,m);return x===void 0?g:x}else{if(oa(g))return Gk(g,_=>p(_,m));{const _=p(g,m);if(_===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return g},u)}return c.getInitialState=s,c}var f4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",m4=(e=21)=>{let t="",r=e;for(;r--;)t+=f4[Math.random()*64|0];return t},h4=Symbol.for("rtk-slice-createasyncthunk");function p4(e,t){return`${e}/${t}`}function g4({creators:e}={}){const t=e?.asyncThunk?.[h4];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(_n(11));const c=(typeof n.reducers=="function"?n.reducers(y4()):n.reducers)||{},u=Object.keys(c),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(A,k){const D=typeof A=="string"?A:A.type;if(!D)throw new Error(_n(12));if(D in m.sliceCaseReducersByType)throw new Error(_n(13));return m.sliceCaseReducersByType[D]=k,h},addMatcher(A,k){return m.sliceMatchers.push({matcher:A,reducer:k}),h},exposeAction(A,k){return m.actionCreators[A]=k,h},exposeCaseReducer(A,k){return m.sliceCaseReducersByName[A]=k,h}};u.forEach(A=>{const k=c[A],D={reducerName:A,type:p4(i,A),createNotation:typeof n.reducers=="function"};_4(k)?w4(D,k,h,t):b4(D,k,h)});function g(){const[A={},k=[],D=void 0]=typeof n.extraReducers=="function"?Qk(n.extraReducers):[n.extraReducers],M={...A,...m.sliceCaseReducersByType};return d4(n.initialState,z=>{for(let K in M)z.addCase(K,M[K]);for(let K of m.sliceMatchers)z.addMatcher(K.matcher,K.reducer);for(let K of k)z.addMatcher(K.matcher,K.reducer);D&&z.addDefaultCase(D)})}const p=A=>A,_=new Map,x=new WeakMap;let w;function j(A,k){return w||(w=g()),w(A,k)}function S(){return w||(w=g()),w.getInitialState()}function O(A,k=!1){function D(z){let K=z[A];return typeof K>"u"&&k&&(K=Hd(x,D,S)),K}function M(z=p){const K=Hd(_,k,()=>new WeakMap);return Hd(K,z,()=>{const Q={};for(const[ne,G]of Object.entries(n.selectors??{}))Q[ne]=v4(G,z,()=>Hd(x,z,S),k);return Q})}return{reducerPath:A,getSelectors:M,get selectors(){return M(D)},selectSlice:D}}const C={name:i,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...O(s),injectInto(A,{reducerPath:k,...D}={}){const M=k??s;return A.inject({reducerPath:M,reducer:j},D),{...C,...O(M,!0)}}};return C}}function v4(e,t,r,n){function i(s,...c){let u=t(s);return typeof u>"u"&&n&&(u=r()),e(u,...c)}return i.unwrapped=e,i}var rn=g4();function y4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function b4({type:e,reducerName:t,createNotation:r},n,i){let s,c;if("reducer"in n){if(r&&!x4(n))throw new Error(_n(17));s=n.reducer,c=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,c?Hn(e,c):Hn(e))}function _4(e){return e._reducerDefinitionType==="asyncThunk"}function x4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function w4({type:e,reducerName:t},r,n,i){if(!i)throw new Error(_n(18));const{payloadCreator:s,fulfilled:c,pending:u,rejected:m,settled:h,options:g}=r,p=i(e,s,g);n.exposeAction(t,p),c&&n.addCase(p.fulfilled,c),u&&n.addCase(p.pending,u),m&&n.addCase(p.rejected,m),h&&n.addMatcher(p.settled,h),n.exposeCaseReducer(t,{fulfilled:c||Fd,pending:u||Fd,rejected:m||Fd,settled:h||Fd})}function Fd(){}var j4="task",Jk="listener",eD="completed",c0="cancelled",S4=`task-${c0}`,E4=`task-${eD}`,Gy=`${Jk}-${c0}`,O4=`${Jk}-${eD}`,Dm=class{constructor(e){this.code=e,this.message=`${j4} ${c0} (reason: ${e})`}name="TaskAbortError";message},u0=(e,t)=>{if(typeof e!="function")throw new TypeError(_n(32))},Mf=()=>{},tD=(e,t=Mf)=>(e.catch(t),e),rD=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Po=e=>{if(e.aborted)throw new Dm(e.reason)};function nD(e,t){let r=Mf;return new Promise((n,i)=>{const s=()=>i(new Dm(e.reason));if(e.aborted){s();return}r=rD(e,s),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Mf})}var C4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Dm?"cancelled":"rejected",error:r}}finally{t?.()}},Rf=e=>t=>tD(nD(e,t).then(r=>(Po(e),r))),aD=e=>{const t=Rf(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Ks}=Object,EE={},Tm="listenerMiddleware",A4=(e,t)=>{const r=n=>rD(e,()=>n.abort(e.reason));return(n,i)=>{u0(n);const s=new AbortController;r(s);const c=C4(async()=>{Po(e),Po(s.signal);const u=await n({pause:Rf(s.signal),delay:aD(s.signal),signal:s.signal});return Po(s.signal),u},()=>s.abort(E4));return i?.autoJoin&&t.push(c.catch(Mf)),{result:Rf(e)(c),cancel(){s.abort(S4)}}}},N4=(e,t)=>{const r=async(n,i)=>{Po(t);let s=()=>{};const u=[new Promise((m,h)=>{let g=e({predicate:n,effect:(p,_)=>{_.unsubscribe(),m([p,_.getState(),_.getOriginalState()])}});s=()=>{g(),h()}})];i!=null&&u.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await nD(t,Promise.race(u));return Po(t),m}finally{s()}};return(n,i)=>tD(r(n,i))},iD=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=Hn(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(_n(21));return u0(s),{predicate:i,type:t,effect:s}},oD=Ks(e=>{const{type:t,predicate:r,effect:n}=iD(e);return{id:m4(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(_n(22))}}},{withTypes:()=>oD}),OE=(e,t)=>{const{type:r,effect:n,predicate:i}=iD(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},Vy=e=>{e.pending.forEach(t=>{t.abort(Gy)})},k4=(e,t)=>()=>{for(const r of t.keys())Vy(r);e.clear()},CE=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},sD=Ks(Hn(`${Tm}/add`),{withTypes:()=>sD}),D4=Hn(`${Tm}/removeAll`),lD=Ks(Hn(`${Tm}/remove`),{withTypes:()=>lD}),T4=(...e)=>{console.error(`${Tm}/error`,...e)},Qc=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},i=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:s,onError:c=T4}=e;u0(c);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w?.cancelActive&&Vy(x)}),m=x=>{const w=OE(t,x)??oD(x);return u(w)};Ks(m,{withTypes:()=>m});const h=x=>{const w=OE(t,x);return w&&(w.unsubscribe(),x.cancelActive&&Vy(w)),!!w};Ks(h,{withTypes:()=>h});const g=async(x,w,j,S)=>{const O=new AbortController,C=N4(m,O.signal),A=[];try{x.pending.add(O),n(x),await Promise.resolve(x.effect(w,Ks({},j,{getOriginalState:S,condition:(k,D)=>C(k,D).then(Boolean),take:C,delay:aD(O.signal),pause:Rf(O.signal),extra:s,signal:O.signal,fork:A4(O.signal,A),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((k,D,M)=>{k!==O&&(k.abort(Gy),M.delete(k))})},cancel:()=>{O.abort(Gy),x.pending.delete(O)},throwIfCancelled:()=>{Po(O.signal)}})))}catch(k){k instanceof Dm||CE(c,k,{raisedBy:"effect"})}finally{await Promise.all(A),O.abort(O4),i(x),x.pending.delete(O)}},p=k4(t,r);return{middleware:x=>w=>j=>{if(!Lk(j))return w(j);if(sD.match(j))return m(j.payload);if(D4.match(j)){p();return}if(lD.match(j))return h(j.payload);let S=x.getState();const O=()=>{if(S===EE)throw new Error(_n(23));return S};let C;try{if(C=w(j),t.size>0){const A=x.getState(),k=Array.from(t.values());for(const D of k){let M=!1;try{M=D.predicate(j,A,S)}catch(z){M=!1,CE(c,z,{raisedBy:"predicate"})}M&&g(D,j,x,O)}}}finally{S=EE}return C},startListening:m,stopListening:h,clearListeners:p}};function _n(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var P4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},cD=rn({name:"chartLayout",initialState:P4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:M4,setLayout:R4,setChartSize:q4,setScale:L4}=cD.actions,z4=cD.reducer;function uD(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function It(e){return Number.isFinite(e)}function ja(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function AE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(r),!0).forEach(function(n){I4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I4(e,t,r){return(t=U4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U4(e){var t=B4(e,"string");return typeof t=="symbol"?t:t+""}function B4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bt(e,t,r){return Rt(e)||Rt(t)?r:wa(t)?Uo(e,t,r):typeof t=="function"?t(e):r}var $4=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:s,verticalAlign:c,layout:u}=t;if((u==="vertical"||u==="horizontal"&&c==="middle")&&s!=="center"&&ke(e[s]))return $s($s({},e),{},{[s]:e[s]+(n||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&c!=="middle"&&ke(e[c]))return $s($s({},e),{},{[c]:e[c]+(i||0)})}return e},eo=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",dD=(e,t,r,n)=>{if(n)return e.map(u=>u.coordinate);var i,s,c=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===r&&(s=!0),u.coordinate));return i||c.push(t),s||c.push(r),c},fD=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:s,scale:c,realScaleType:u,isCategorical:m,categoricalDomain:h,tickCount:g,ticks:p,niceTicks:_,axisType:x}=e;if(!c)return null;var w=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=i==="category"&&c.bandwidth?c.bandwidth()/w:0;if(j=x==="angleAxis"&&s&&s.length>=2?xr(s[0]-s[1])*2*j:j,p||_){var S=(p||_||[]).map((O,C)=>{var A=n?n.indexOf(O):O;return{coordinate:c(A)+j,value:O,offset:j,index:C}});return S.filter(O=>!ia(O.coordinate))}return m&&h?h.map((O,C)=>({coordinate:c(O)+j,value:O,index:C,offset:j})):c.ticks&&g!=null?c.ticks(g).map((O,C)=>({coordinate:c(O)+j,value:O,offset:j,index:C})):c.domain().map((O,C)=>({coordinate:c(O)+j,value:n?n[O]:O,index:C,offset:j}))},NE=1e-4,H4=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-NE,s=Math.max(n[0],n[1])+NE,c=e(t[0]),u=e(t[r-1]);(c<i||c>s||u<i||u>s)&&e.domain([t[0],t[r-1]])}},F4=(e,t)=>{if(!t||t.length!==2||!ke(t[0])||!ke(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ke(e[0])||e[0]<r)&&(i[0]=r),(!ke(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},K4=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0,u=0;u<r;++u){var m=e[u],h=m?.[i];if(h!=null){var g=h[1],p=h[0],_=ia(g)?p:g;_>=0?(h[0]=s,h[1]=s+_,s=g):(h[0]=c,h[1]=c+_,c=g)}}}},Y4=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0;c<r;++c){var u=e[c],m=u?.[i];if(m!=null){var h=ia(m[1])?m[0]:m[1];h>=0?(m[0]=s,m[1]=s+h,s=m[1]):(m[0]=0,m[1]=0)}}}},G4={sign:K4,expand:_I,none:Io,silhouette:xI,wiggle:wI,positive:Y4},V4=(e,t,r)=>{var n,i=(n=G4[r])!==null&&n!==void 0?n:Io,s=bI().keys(t).value((u,m)=>Number(bt(u,m,0))).order(Ly).offset(i),c=s(e);return c.forEach((u,m)=>{u.forEach((h,g)=>{var p=bt(e[g],t[m],0);Array.isArray(p)&&p.length===2&&ke(p[0])&&ke(p[1])&&(h[0]=p[0],h[1]=p[1])})}),c};function W4(e){return e==null?void 0:String(e)}function kE(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:s,dataKey:c}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Rt(i[t.dataKey])){var u=yk(r,"value",i[t.dataKey]);if(u)return u.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var m=bt(i,Rt(c)?t.dataKey:c);return Rt(m)?null:t.scale(m)}var DE=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:s,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var u=bt(s,t.dataKey,t.scale.domain()[c]);return Rt(u)?null:t.scale(u)-i/2+n},X4=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},Z4=e=>{var t=e.flat(2).filter(ke);return[Math.min(...t),Math.max(...t)]},Q4=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],J4=(e,t,r)=>{if(e!=null)return Q4(Object.keys(e).reduce((n,i)=>{var s=e[i];if(!s)return n;var{stackedData:c}=s,u=c.reduce((m,h)=>{var g=uD(h,t,r),p=Z4(g);return!It(p[0])||!It(p[1])?m:[Math.min(m[0],p[0]),Math.max(m[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},TE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,PE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ws=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=jm(t,g=>g.coordinate),s=1/0,c=1,u=i.length;c<u;c++){var m=i[c],h=i[c-1];s=Math.min((m?.coordinate||0)-(h?.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function ME(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:s}=e;return $s($s({},t),{},{dataKey:r,payload:n,value:i,name:s})}function al(e,t){if(e)return String(e);if(typeof t=="string")return t}var eU=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},tU=(e,t)=>t==="centric"?e.angle:e.radius,li=e=>e.layout.width,ci=e=>e.layout.height,rU=e=>e.layout.scale,mD=e=>e.layout.margin,Pm=X(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Mm=X(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),hD="data-recharts-item-index",pD="data-recharts-item-id",Jc=60;function RE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RE(Object(r),!0).forEach(function(n){nU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nU(e,t,r){return(t=aU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aU(e){var t=iU(e,"string");return typeof t=="symbol"?t:t+""}function iU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oU=e=>e.brush.height;function sU(e){var t=Mm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Jc;return r+i}return r},0)}function lU(e){var t=Mm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Jc;return r+i}return r},0)}function cU(e){var t=Pm(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function uU(e){var t=Pm(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var mr=X([li,ci,mD,oU,sU,lU,cU,uU,Mk,q5],(e,t,r,n,i,s,c,u,m,h)=>{var g={left:(r.left||0)+i,right:(r.right||0)+s},p={top:(r.top||0)+c,bottom:(r.bottom||0)+u},_=Kd(Kd({},p),g),x=_.bottom;_.bottom+=n,_=$4(_,m,h);var w=e-_.left-_.right,j=t-_.top-_.bottom;return Kd(Kd({brushBottom:x},_),{},{width:Math.max(w,0),height:Math.max(j,0)})}),dU=X(mr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),d0=X(li,ci,(e,t)=>({x:0,y:0,width:e,height:t})),fU=y.createContext(null),qr=()=>y.useContext(fU)!=null,Rm=e=>e.brush,qm=X([Rm,mr,mD],(e,t,r)=>({height:e.height,x:ke(e.x)?e.x:t.left,y:ke(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:ke(e.width)?e.width:t.width})),Tv={},Pv={},Mv={},qE;function mU(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:s}={}){let c,u=null;const m=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),g=()=>{u!==null&&(r.apply(c,u),c=void 0,u=null)},p=()=>{h&&g(),j()};let _=null;const x=()=>{_!=null&&clearTimeout(_),_=setTimeout(()=>{_=null,p()},n)},w=()=>{_!==null&&(clearTimeout(_),_=null)},j=()=>{w(),c=void 0,u=null},S=()=>{g()},O=function(...C){if(i?.aborted)return;c=this,u=C;const A=_==null;x(),m&&A&&g()};return O.schedule=x,O.cancel=j,O.flush=S,i?.addEventListener("abort",j,{once:!0}),O}e.debounce=t})(Mv)),Mv}var LE;function hU(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mU();function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:u=!0,maxWait:m}=s,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let g,p=null;const _=t.debounce(function(...j){g=n.apply(this,j),p=null},i,{edges:h}),x=function(...j){return m!=null&&(p===null&&(p=Date.now()),Date.now()-p>=m)?(g=n.apply(this,j),p=Date.now(),_.cancel(),_.schedule(),g):(_.apply(this,j),g)},w=()=>(_.flush(),g);return x.cancel=_.cancel,x.flush=w,x}e.debounce=r})(Pv)),Pv}var zE;function pU(){return zE||(zE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hU();function r(n,i=0,s={}){const{leading:c=!0,trailing:u=!0}=s;return t.debounce(n,i,{leading:c,maxWait:i,trailing:u})}e.throttle=r})(Tv)),Tv}var Rv,IE;function gU(){return IE||(IE=1,Rv=pU().throttle),Rv}var vU=gU();const yU=oi(vU);var qf=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(r.replace(/%s/g,()=>i[c++]))}},gD=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:c}=r,u=Ja(n)?e:Number(n),m=Ja(i)?t:Number(i);return s&&s>0&&(u?m=u/s:m&&(u=m*s),c&&m!=null&&m>c&&(m=c)),{calculatedWidth:u,calculatedHeight:m}},bU={width:0,height:0,overflow:"visible"},_U={width:0,overflowX:"visible"},xU={height:0,overflowY:"visible"},wU={},jU=e=>{var{width:t,height:r}=e,n=Ja(t),i=Ja(r);return n&&i?bU:n?_U:i?xU:wU};function SU(e){var{width:t,height:r,aspect:n}=e,i=t,s=r;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wy.apply(null,arguments)}function UE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(r),!0).forEach(function(n){EU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EU(e,t,r){return(t=OU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OU(e){var t=CU(e,"string");return typeof t=="symbol"?t:t+""}function CU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vD=y.createContext({width:-1,height:-1});function AU(e){return ja(e.width)&&ja(e.height)}function yD(e){var{children:t,width:r,height:n}=e,i=y.useMemo(()=>({width:r,height:n}),[r,n]);return AU(i)?y.createElement(vD.Provider,{value:i},t):null}var f0=()=>y.useContext(vD),NU=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:c=0,minHeight:u,maxHeight:m,children:h,debounce:g=0,id:p,className:_,onResize:x,style:w={}}=e,j=y.useRef(null),S=y.useRef();S.current=x,y.useImperativeHandle(t,()=>j.current);var[O,C]=y.useState({containerWidth:n.width,containerHeight:n.height}),A=y.useCallback((K,Q)=>{C(ne=>{var G=Math.round(K),I=Math.round(Q);return ne.containerWidth===G&&ne.containerHeight===I?ne:{containerWidth:G,containerHeight:I}})},[]);y.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Xc;var K=I=>{var ie,{width:pe,height:q}=I[0].contentRect;A(pe,q),(ie=S.current)===null||ie===void 0||ie.call(S,pe,q)};g>0&&(K=yU(K,g,{trailing:!0,leading:!1}));var Q=new ResizeObserver(K),{width:ne,height:G}=j.current.getBoundingClientRect();return A(ne,G),Q.observe(j.current),()=>{Q.disconnect()}},[A,g]);var{containerWidth:k,containerHeight:D}=O;qf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:M,calculatedHeight:z}=gD(k,D,{width:i,height:s,aspect:r,maxHeight:m});return qf(M!=null&&M>0||z!=null&&z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,z,i,s,c,u,r),y.createElement("div",{id:p?"".concat(p):void 0,className:ct("recharts-responsive-container",_),style:BE(BE({},w),{},{width:i,height:s,minWidth:c,minHeight:u,maxHeight:m}),ref:j},y.createElement("div",{style:jU({width:i,height:s})},y.createElement(yD,{width:M,height:z},h)))}),qv=y.forwardRef((e,t)=>{var r=f0();if(ja(r.width)&&ja(r.height))return e.children;var{width:n,height:i}=SU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:c}=gD(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ke(s)&&ke(c)?y.createElement(yD,{width:s,height:c},e.children):y.createElement(NU,Wy({},e,{width:n,height:i,ref:t}))});function bD(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Lm=()=>{var e,t=qr(),r=De(dU),n=De(qm),i=(e=De(Rm))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},kU={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},_D=()=>{var e;return(e=De(mr))!==null&&e!==void 0?e:kU},xD=()=>De(li),wD=()=>De(ci),xQ=()=>De(e=>e.layout.margin),tt=e=>e.layout.layoutType,Xo=()=>De(tt),wQ=()=>{var e=Xo();if(e==="horizontal"||e==="vertical")return e},DU=()=>{var e=Xo();return e!==void 0},zm=e=>{var t=qt(),r=qr(),{width:n,height:i}=e,s=f0(),c=n,u=i;return s&&(c=s.width>0?s.width:n,u=s.height>0?s.height:i),y.useEffect(()=>{!r&&ja(c)&&ja(u)&&t(q4({width:c,height:u}))},[t,r,c,u]),null},jD=Symbol.for("immer-nothing"),$E=Symbol.for("immer-draftable"),wn=Symbol.for("immer-state");function ta(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pc=Object.getPrototypeOf;function Xs(e){return!!e&&!!e[wn]}function $o(e){return e?SD(e)||Array.isArray(e)||!!e[$E]||!!e.constructor?.[$E]||eu(e)||Um(e):!1}var TU=Object.prototype.constructor.toString(),HE=new WeakMap;function SD(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=HE.get(r);return n===void 0&&(n=Function.toString.call(r),HE.set(r,n)),n===TU}function Lf(e,t,r=!0){Im(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Im(e){const t=e[wn];return t?t.type_:Array.isArray(e)?1:eu(e)?2:Um(e)?3:0}function Xy(e,t){return Im(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ED(e,t,r){const n=Im(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function PU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function eu(e){return e instanceof Map}function Um(e){return e instanceof Set}function Oo(e){return e.copy_||e.base_}function Zy(e,t){if(eu(e))return new Map(e);if(Um(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=SD(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[wn];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[c]})}return Object.create(Pc(e),n)}else{const n=Pc(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function m0(e,t=!1){return Bm(e)||Xs(e)||!$o(e)||(Im(e)>1&&Object.defineProperties(e,{set:Yd,add:Yd,clear:Yd,delete:Yd}),Object.freeze(e),t&&Object.values(e).forEach(r=>m0(r,!0))),e}function MU(){ta(2)}var Yd={value:MU};function Bm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var RU={};function Ho(e){const t=RU[e];return t||ta(0,e),t}var Mc;function OD(){return Mc}function qU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function FE(e,t){t&&(Ho("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Qy(e){Jy(e),e.drafts_.forEach(LU),e.drafts_=null}function Jy(e){e===Mc&&(Mc=e.parent_)}function KE(e){return Mc=qU(Mc,e)}function LU(e){const t=e[wn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function YE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[wn].modified_&&(Qy(t),ta(4)),$o(e)&&(e=zf(t,e),t.parent_||If(t,e)),t.patches_&&Ho("Patches").generateReplacementPatches_(r[wn].base_,e,t.patches_,t.inversePatches_)):e=zf(t,r,[]),Qy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jD?e:void 0}function zf(e,t,r){if(Bm(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[wn];if(!i)return Lf(t,(s,c)=>GE(e,i,t,s,c,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return If(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let c=s,u=!1;i.type_===3&&(c=new Set(s),s.clear(),u=!0),Lf(c,(m,h)=>GE(e,i,s,m,h,r,u),n),If(e,s,!1),r&&e.patches_&&Ho("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function GE(e,t,r,n,i,s,c){if(i==null||typeof i!="object"&&!c)return;const u=Bm(i);if(!(u&&!c)){if(Xs(i)){const m=s&&t&&t.type_!==3&&!Xy(t.assigned_,n)?s.concat(n):void 0,h=zf(e,i,m);if(ED(r,n,h),Xs(h))e.canAutoFreeze_=!1;else return}else c&&r.add(i);if($o(i)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&u)return;zf(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(eu(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&If(e,i)}}}function If(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&m0(t,r)}function zU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:OD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=h0;r&&(i=[n],s=Rc);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,u}var h0={get(e,t){if(t===wn)return e;const r=Oo(e);if(!Xy(r,t))return IU(e,r,t);const n=r[t];return e.finalized_||!$o(n)?n:n===Lv(e.base_,t)?(zv(e),e.copy_[t]=tb(n,e)):n},has(e,t){return t in Oo(e)},ownKeys(e){return Reflect.ownKeys(Oo(e))},set(e,t,r){const n=CD(Oo(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Lv(Oo(e),t),s=i?.[wn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(PU(r,i)&&(r!==void 0||Xy(e.base_,t)))return!0;zv(e),eb(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Lv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,zv(e),eb(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Oo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ta(11)},getPrototypeOf(e){return Pc(e.base_)},setPrototypeOf(){ta(12)}},Rc={};Lf(h0,(e,t)=>{Rc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Rc.deleteProperty=function(e,t){return Rc.set.call(this,e,t,void 0)};Rc.set=function(e,t,r){return h0.set.call(this,e[0],t,r,e[0])};function Lv(e,t){const r=e[wn];return(r?Oo(r):e)[t]}function IU(e,t,r){const n=CD(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function CD(e,t){if(!(t in e))return;let r=Pc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Pc(r)}}function eb(e){e.modified_||(e.modified_=!0,e.parent_&&eb(e.parent_))}function zv(e){e.copy_||(e.copy_=Zy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var UU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const c=this;return function(m=s,...h){return c.produce(m,g=>r.call(this,g,...h))}}typeof r!="function"&&ta(6),n!==void 0&&typeof n!="function"&&ta(7);let i;if($o(t)){const s=KE(this),c=tb(t,void 0);let u=!0;try{i=r(c),u=!1}finally{u?Qy(s):Jy(s)}return FE(s,n),YE(i,s)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===jD&&(i=void 0),this.autoFreeze_&&m0(i,!0),n){const s=[],c=[];Ho("Patches").generateReplacementPatches_(t,i,s,c),n(s,c)}return i}else ta(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...u)=>this.produceWithPatches(c,m=>t(m,...u));let n,i;return[this.produce(t,r,(c,u)=>{n=c,i=u}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){$o(e)||ta(8),Xs(e)&&(e=BU(e));const t=KE(this),r=tb(e,void 0);return r[wn].isManual_=!0,Jy(t),r}finishDraft(e,t){const r=e&&e[wn];(!r||!r.isManual_)&&ta(9);const{scope_:n}=r;return FE(n,t),YE(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Ho("Patches").applyPatches_;return Xs(e)?n(e,t):this.produce(e,i=>n(i,t))}};function tb(e,t){const r=eu(e)?Ho("MapSet").proxyMap_(e,t):Um(e)?Ho("MapSet").proxySet_(e,t):zU(e,t);return(t?t.scope_:OD()).drafts_.push(r),r}function BU(e){return Xs(e)||ta(10,e),AD(e)}function AD(e){if(!$o(e)||Bm(e))return e;const t=e[wn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Zy(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Zy(e,!0);return Lf(r,(i,s)=>{ED(r,i,AD(s))},n),t&&(t.finalized_=!1),r}var $U=new UU;$U.produce;var HU={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},ND=rn({name:"legend",initialState:HU,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Dt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=aa(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Dt()},removeLegendPayload:{reducer(e,t){var r=aa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Dt()}}}),{setLegendSize:jQ,setLegendSettings:SQ,addLegendPayload:kD,replaceLegendPayload:DD,removeLegendPayload:TD}=ND.actions,FU=ND.reducer;function rb(){return rb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rb.apply(null,arguments)}function VE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Iv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(r),!0).forEach(function(n){KU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KU(e,t,r){return(t=YU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YU(e){var t=GU(e,"string");return typeof t=="symbol"?t:t+""}function GU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function VU(e){return Array.isArray(e)&&wa(e[0])&&wa(e[1])?e.join(" ~ "):e}var WU=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:s,formatter:c,itemSorter:u,wrapperClassName:m,labelClassName:h,label:g,labelFormatter:p,accessibilityLayer:_=!1}=e,x=()=>{if(s&&s.length){var D={padding:0,margin:0},M=(u?jm(s,u):s).map((z,K)=>{if(z.type==="none")return null;var Q=z.formatter||c||VU,{value:ne,name:G}=z,I=ne,ie=G;if(Q){var pe=Q(ne,G,z,K,s);if(Array.isArray(pe))[I,ie]=pe;else if(pe!=null)I=pe;else return null}var q=Iv({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:q},wa(ie)?y.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,wa(ie)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},I),y.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:D},M)}return null},w=Iv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=Iv({margin:0},i),S=!Rt(g),O=S?g:"",C=ct("recharts-default-tooltip",m),A=ct("recharts-tooltip-label",h);S&&p&&s!==void 0&&s!==null&&(O=p(g,s));var k=_?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",rb({className:C,style:w},k),y.createElement("p",{className:A,style:j},y.isValidElement(O)?O:"".concat(O)),x())},mc="recharts-tooltip-wrapper",XU={visibility:"hidden"};function ZU(e){var{coordinate:t,translateX:r,translateY:n}=e;return ct(mc,{["".concat(mc,"-right")]:ke(r)&&t&&ke(t.x)&&r>=t.x,["".concat(mc,"-left")]:ke(r)&&t&&ke(t.x)&&r<t.x,["".concat(mc,"-bottom")]:ke(n)&&t&&ke(t.y)&&n>=t.y,["".concat(mc,"-top")]:ke(n)&&t&&ke(t.y)&&n<t.y})}function WE(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:s,reverseDirection:c,tooltipDimension:u,viewBox:m,viewBoxDimension:h}=e;if(s&&ke(s[n]))return s[n];var g=r[n]-u-(i>0?i:0),p=r[n]+i;if(t[n])return c[n]?g:p;var _=m[n];if(_==null)return 0;if(c[n]){var x=g,w=_;return x<w?Math.max(p,_):Math.max(g,_)}if(h==null)return 0;var j=p+u,S=_+h;return j>S?Math.max(g,_):Math.max(p,_)}function QU(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function JU(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:c,useTranslate3d:u,viewBox:m}=e,h,g,p;return c.height>0&&c.width>0&&r?(g=WE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.width,viewBox:m,viewBoxDimension:m.width}),p=WE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.height,viewBox:m,viewBoxDimension:m.height}),h=QU({translateX:g,translateY:p,useTranslate3d:u})):h=XU,{cssProperties:h,cssClasses:ZU({translateX:g,translateY:p,coordinate:r})}}function XE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XE(Object(r),!0).forEach(function(n){nb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nb(e,t,r){return(t=e6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e6(e){var t=t6(e,"string");return typeof t=="symbol"?t:t+""}function t6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class r6 extends y.PureComponent{constructor(){super(...arguments),nb(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),nb(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:c,hasPayload:u,isAnimationActive:m,offset:h,position:g,reverseDirection:p,useTranslate3d:_,viewBox:x,wrapperStyle:w,lastBoundingBox:j,innerRef:S,hasPortalFromProps:O}=this.props,{cssClasses:C,cssProperties:A}=JU({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:h,position:g,reverseDirection:p,tooltipBox:{height:j.height,width:j.width},useTranslate3d:_,viewBox:x}),k=O?{}:Gd(Gd({transition:m&&t?"transform ".concat(n,"ms ").concat(i):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=Gd(Gd({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:D,ref:S},s)}}var PD=()=>{var e;return(e=De(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function ab(){return ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ab.apply(null,arguments)}function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function QE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(r),!0).forEach(function(n){n6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n6(e,t,r){return(t=a6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a6(e){var t=i6(e,"string");return typeof t=="symbol"?t:t+""}function i6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JE={curveBasisClosed:lI,curveBasisOpen:cI,curveBasis:sI,curveBumpX:G3,curveBumpY:V3,curveLinearClosed:uI,curveLinear:_m,curveMonotoneX:dI,curveMonotoneY:fI,curveNatural:mI,curveStep:hI,curveStepAfter:gI,curveStepBefore:pI},Uf=e=>It(e.x)&&It(e.y),eO=e=>e.base!=null&&Uf(e.base)&&Uf(e),hc=e=>e.x,pc=e=>e.y,o6=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Wc(e));return(r==="curveMonotone"||r==="curveBump")&&t?JE["".concat(r).concat(t==="vertical"?"Y":"X")]:JE[r]||_m},s6=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:s=!1}=e,c=o6(t,i),u=s?r.filter(Uf):r,m;if(Array.isArray(n)){var h=r.map((x,w)=>QE(QE({},x),{},{base:n[w]}));i==="vertical"?m=Id().y(pc).x1(hc).x0(x=>x.base.x):m=Id().x(hc).y1(pc).y0(x=>x.base.y);var g=m.defined(eO).curve(c),p=s?h.filter(eO):h;return g(p)}i==="vertical"&&ke(n)?m=Id().y(pc).x1(hc).x0(n):ke(n)?m=Id().x(hc).y1(pc).y0(n):m=ik().x(hc).y(pc);var _=m.defined(Uf).curve(c);return _(u)},p0=e=>{var{className:t,points:r,path:n,pathRef:i}=e,s=Xo();if((!r||!r.length)&&!n)return null;var c={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},u=r&&r.length?s6(c):n;return y.createElement("path",ab({},xn(e),r0(e),{className:ct("recharts-curve",t),d:u===null?void 0:u,ref:i}))},l6=["x","y","top","left","width","height","className"];function ib(){return ib=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ib.apply(null,arguments)}function tO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function c6(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tO(Object(r),!0).forEach(function(n){u6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u6(e,t,r){return(t=d6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d6(e){var t=f6(e,"string");return typeof t=="symbol"?t:t+""}function f6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function m6(e,t){if(e==null)return{};var r,n,i=h6(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function h6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var p6=(e,t,r,n,i,s)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),g6=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:s=0,height:c=0,className:u}=e,m=m6(e,l6),h=c6({x:t,y:r,top:n,left:i,width:s,height:c},m);return!ke(t)||!ke(r)||!ke(s)||!ke(c)||!ke(n)||!ke(i)?null:y.createElement("path",ib({},Hr(h),{className:ct("recharts-cross",u),d:p6(t,r,s,c,n,i)}))};function v6(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(n){y6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y6(e,t,r){return(t=b6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b6(e){var t=_6(e,"string");return typeof t=="symbol"?t:t+""}function _6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var x6=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),MD=(e,t,r)=>e.map(n=>"".concat(x6(n)," ").concat(t,"ms ").concat(r)).join(","),w6=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),qc=(e,t)=>Object.keys(t).reduce((r,n)=>nO(nO({},r),{},{[n]:e(n,t[n])}),{});function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(r),!0).forEach(function(n){j6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j6(e,t,r){return(t=S6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S6(e){var t=E6(e,"string");return typeof t=="symbol"?t:t+""}function E6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bf=(e,t,r)=>e+(t-e)*r,ob=e=>{var{from:t,to:r}=e;return t!==r},RD=(e,t,r)=>{var n=qc((i,s)=>{if(ob(s)){var[c,u]=e(s.from,s.to,s.velocity);return fr(fr({},s),{},{from:c,velocity:u})}return s},t);return r<1?qc((i,s)=>ob(s)&&n[i]!=null?fr(fr({},s),{},{velocity:Bf(s.velocity,n[i].velocity,r),from:Bf(s.from,n[i].from,r)}):s,t):RD(e,n,r-1)};function O6(e,t,r,n,i,s){var c,u=n.reduce((_,x)=>fr(fr({},_),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),m=()=>qc((_,x)=>x.from,u),h=()=>!Object.values(u).filter(ob).length,g=null,p=_=>{c||(c=_);var x=_-c,w=x/r.dt;u=RD(r,u,w),i(fr(fr(fr({},e),t),m())),c=_,h()||(g=s.setTimeout(p))};return()=>(g=s.setTimeout(p),()=>{var _;(_=g)===null||_===void 0||_()})}function C6(e,t,r,n,i,s,c){var u=null,m=i.reduce((p,_)=>{var x=e[_],w=t[_];return x==null||w==null?p:fr(fr({},p),{},{[_]:[x,w]})},{}),h,g=p=>{h||(h=p);var _=(p-h)/n,x=qc((j,S)=>Bf(...S,r(_)),m);if(s(fr(fr(fr({},e),t),x)),_<1)u=c.setTimeout(g);else{var w=qc((j,S)=>Bf(...S,r(1)),m);s(fr(fr(fr({},e),t),w))}};return()=>(u=c.setTimeout(g),()=>{var p;(p=u)===null||p===void 0||p()})}const A6=(e,t,r,n,i,s)=>{var c=w6(e,t);return r==null?()=>(i(fr(fr({},e),t)),()=>{}):r.isStepper===!0?O6(e,t,r,c,i,s):C6(e,t,r,n,c,i,s)};var $f=1e-4,qD=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],LD=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),iO=(e,t)=>r=>{var n=qD(e,t);return LD(n,r)},N6=(e,t)=>r=>{var n=qD(e,t),i=[...n.map((s,c)=>s*c).slice(1),0];return LD(i,r)},k6=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},D6=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=k6(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},T6=(e,t,r,n)=>{var i=iO(e,r),s=iO(t,n),c=N6(e,r),u=h=>h>1?1:h<0?0:h,m=h=>{for(var g=h>1?1:h,p=g,_=0;_<8;++_){var x=i(p)-g,w=c(p);if(Math.abs(x-g)<$f||w<$f)return s(p);p=u(p-x/w)}return s(p)};return m.isStepper=!1,m},oO=function(){return T6(...D6(...arguments))},P6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,s=(c,u,m)=>{var h=-(c-u)*r,g=m*n,p=m+(h-g)*i/1e3,_=m*i/1e3+c;return Math.abs(_-u)<$f&&Math.abs(p)<$f?[u,0]:[_,p]};return s.isStepper=!0,s.dt=i,s},M6=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oO(e);case"spring":return P6();default:if(e.split("(")[0]==="cubic-bezier")return oO(e)}return typeof e=="function"?e:null};function R6(e){var t,r=()=>null,n=!1,i=null,s=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var u=c,[m,...h]=u;if(typeof m=="number"){i=e.setTimeout(s.bind(null,h),m);return}s(m),i=e.setTimeout(s.bind(null,h));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,i&&(i(),i=null),s(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class q6{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function L6(){return R6(new q6)}var z6=y.createContext(L6);function I6(e,t){var r=y.useContext(z6);return y.useMemo(()=>t??r(e),[e,t,r])}var U6=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),$m={isSsr:U6()},B6={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},sO={t:0},Uv={t:1};function tu(e){var t=jr(e,B6),{isActive:r,canBegin:n,duration:i,easing:s,begin:c,onAnimationEnd:u,onAnimationStart:m,children:h}=t,g=r==="auto"?!$m.isSsr:r,p=I6(t.animationId,t.animationManager),[_,x]=y.useState(g?sO:Uv),w=y.useRef(null);return y.useEffect(()=>{g||x(Uv)},[g]),y.useEffect(()=>{if(!g||!n)return Xc;var j=A6(sO,Uv,M6(s),i,x,p.getTimeoutController()),S=()=>{w.current=j()};return p.start([m,c,S,i,u]),()=>{p.stop(),w.current&&w.current(),u()}},[g,n,i,s,c,m,u,p]),h(_.t)}function ru(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(Nc(t)),n=y.useRef(e);return n.current!==e&&(r.current=Nc(t),n.current=e),r.current}var $6=["radius"],H6=["radius"],lO,cO,uO,dO,fO,mO,hO,pO,gO,vO;function yO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function bO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(r),!0).forEach(function(n){F6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F6(e,t,r){return(t=K6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K6(e){var t=Y6(e,"string");return typeof t=="symbol"?t:t+""}function Y6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hf(){return Hf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hf.apply(null,arguments)}function _O(e,t){if(e==null)return{};var r,n,i=G6(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function G6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function va(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var xO=(e,t,r,n,i)=>{var s=Yi(r),c=Yi(n),u=Math.min(Math.abs(s)/2,Math.abs(c)/2),m=c>=0?1:-1,h=s>=0?1:-1,g=c>=0&&s>=0||c<0&&s<0?1:0,p;if(u>0&&i instanceof Array){for(var _=[0,0,0,0],x=0,w=4;x<w;x++)_[x]=i[x]>u?u:i[x];p=Yt(lO||(lO=va(["M",",",""])),e,t+m*_[0]),_[0]>0&&(p+=Yt(cO||(cO=va(["A ",",",",0,0,",",",",",""])),_[0],_[0],g,e+h*_[0],t)),p+=Yt(uO||(uO=va(["L ",",",""])),e+r-h*_[1],t),_[1]>0&&(p+=Yt(dO||(dO=va(["A ",",",",0,0,",`,
        `,",",""])),_[1],_[1],g,e+r,t+m*_[1])),p+=Yt(fO||(fO=va(["L ",",",""])),e+r,t+n-m*_[2]),_[2]>0&&(p+=Yt(mO||(mO=va(["A ",",",",0,0,",`,
        `,",",""])),_[2],_[2],g,e+r-h*_[2],t+n)),p+=Yt(hO||(hO=va(["L ",",",""])),e+h*_[3],t+n),_[3]>0&&(p+=Yt(pO||(pO=va(["A ",",",",0,0,",`,
        `,",",""])),_[3],_[3],g,e,t+n-m*_[3])),p+="Z"}else if(u>0&&i===+i&&i>0){var j=Math.min(u,i);p=Yt(gO||(gO=va(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*j,j,j,g,e+h*j,t,e+r-h*j,t,j,j,g,e+r,t+m*j,e+r,t+n-m*j,j,j,g,e+r-h*j,t+n,e+h*j,t+n,j,j,g,e,t+n-m*j)}else p=Yt(vO||(vO=va(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return p},wO={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zD=e=>{var t=jr(e,wO),r=y.useRef(null),[n,i]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var U=r.current.getTotalLength();U&&i(U)}catch{}},[]);var{x:s,y:c,width:u,height:m,radius:h,className:g}=t,{animationEasing:p,animationDuration:_,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:j}=t,S=y.useRef(u),O=y.useRef(m),C=y.useRef(s),A=y.useRef(c),k=y.useMemo(()=>({x:s,y:c,width:u,height:m,radius:h}),[s,c,u,m,h]),D=ru(k,"rectangle-");if(s!==+s||c!==+c||u!==+u||m!==+m||u===0||m===0)return null;var M=ct("recharts-rectangle",g);if(!j){var z=Hr(t),{radius:K}=z,Q=_O(z,$6);return y.createElement("path",Hf({},Q,{x:Yi(s),y:Yi(c),width:Yi(u),height:Yi(m),radius:typeof h=="number"?h:void 0,className:M,d:xO(s,c,u,m,h)}))}var ne=S.current,G=O.current,I=C.current,ie=A.current,pe="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),R=MD(["strokeDasharray"],_,typeof p=="string"?p:wO.animationEasing);return y.createElement(tu,{animationId:D,key:D,canBegin:n>0,duration:_,easing:p,isActive:j,begin:x},U=>{var J=Tt(ne,u,U),B=Tt(G,m,U),fe=Tt(I,s,U),je=Tt(ie,c,U);r.current&&(S.current=J,O.current=B,C.current=fe,A.current=je);var te;w?U>0?te={transition:R,strokeDasharray:q}:te={strokeDasharray:pe}:te={strokeDasharray:q};var H=Hr(t),{radius:Ee}=H,Te=_O(H,H6);return y.createElement("path",Hf({},Te,{radius:typeof h=="number"?h:void 0,className:M,d:xO(fe,je,J,B,h),ref:r,style:bO(bO({},te),t.style)}))})};function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function SO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(r),!0).forEach(function(n){V6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V6(e,t,r){return(t=W6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W6(e){var t=X6(e,"string");return typeof t=="symbol"?t:t+""}function X6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ff=Math.PI/180,Z6=e=>e*180/Math.PI,or=(e,t,r,n)=>({x:e+Math.cos(-Ff*n)*r,y:t+Math.sin(-Ff*n)*r}),ID=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},Q6=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return Math.sqrt((r-i)**2+(n-s)**2)},J6=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:s}=t,c=Q6({x:r,y:n},{x:i,y:s});if(c<=0)return{radius:c,angle:0};var u=(r-i)/c,m=Math.acos(u);return n>s&&(m=2*Math.PI-m),{radius:c,angle:Z6(m),angleInRadian:m}},eB=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:t-s*360,endAngle:r-s*360}},tB=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),s=Math.floor(n/360),c=Math.min(i,s);return e+c*360},rB=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:s}=J6({x:r,y:n},t),{innerRadius:c,outerRadius:u}=t;if(i<c||i>u||i===0)return null;var{startAngle:m,endAngle:h}=eB(t),g=s,p;if(m<=h){for(;g>h;)g-=360;for(;g<m;)g+=360;p=g>=m&&g<=h}else{for(;g>m;)g-=360;for(;g<h;)g+=360;p=g>=h&&g<=m}return p?SO(SO({},t),{},{radius:i,angle:tB(g,t)}):null};function UD(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:s}=e,c=or(t,r,n,i),u=or(t,r,n,s);return{points:[c,u],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}var EO,OO,CO,AO,NO,kO,DO;function sb(){return sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sb.apply(null,arguments)}function No(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var nB=(e,t)=>{var r=xr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Vd=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:s,isExternal:c,cornerRadius:u,cornerIsExternal:m}=e,h=u*(c?1:-1)+n,g=Math.asin(u/h)/Ff,p=m?i:i+s*g,_=or(t,r,h,p),x=or(t,r,n,p),w=m?i-s*g:i,j=or(t,r,h*Math.cos(g*Ff),w);return{center:_,circleTangency:x,lineTangency:j,theta:g}},BD=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:c}=e,u=nB(s,c),m=s+u,h=or(t,r,i,s),g=or(t,r,i,m),p=Yt(EO||(EO=No(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,i,i,+(Math.abs(u)>180),+(s>m),g.x,g.y);if(n>0){var _=or(t,r,n,s),x=or(t,r,n,m);p+=Yt(OO||(OO=No(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,n,n,+(Math.abs(u)>180),+(s<=m),_.x,_.y)}else p+=Yt(CO||(CO=No(["L ",","," Z"])),t,r);return p},aB=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:h}=e,g=xr(h-m),{circleTangency:p,lineTangency:_,theta:x}=Vd({cx:t,cy:r,radius:i,angle:m,sign:g,cornerRadius:s,cornerIsExternal:u}),{circleTangency:w,lineTangency:j,theta:S}=Vd({cx:t,cy:r,radius:i,angle:h,sign:-g,cornerRadius:s,cornerIsExternal:u}),O=u?Math.abs(m-h):Math.abs(m-h)-x-S;if(O<0)return c?Yt(AO||(AO=No(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),_.x,_.y,s,s,s*2,s,s,-s*2):BD({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:m,endAngle:h});var C=Yt(NO||(NO=No(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),_.x,_.y,s,s,+(g<0),p.x,p.y,i,i,+(O>180),+(g<0),w.x,w.y,s,s,+(g<0),j.x,j.y);if(n>0){var{circleTangency:A,lineTangency:k,theta:D}=Vd({cx:t,cy:r,radius:n,angle:m,sign:g,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:M,lineTangency:z,theta:K}=Vd({cx:t,cy:r,radius:n,angle:h,sign:-g,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),Q=u?Math.abs(m-h):Math.abs(m-h)-D-K;if(Q<0&&s===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+=Yt(kO||(kO=No(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),z.x,z.y,s,s,+(g<0),M.x,M.y,n,n,+(Q>180),+(g>0),A.x,A.y,s,s,+(g<0),k.x,k.y)}else C+=Yt(DO||(DO=No(["L",",","Z"])),t,r);return C},iB={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},$D=e=>{var t=jr(e,iB),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:g,className:p}=t;if(s<i||h===g)return null;var _=ct("recharts-sector",p),x=s-i,w=Rr(c,x,0,!0),j;return w>0&&Math.abs(h-g)<360?j=aB({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(w,x/2),forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:g}):j=BD({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:h,endAngle:g}),y.createElement("path",sb({},Hr(t),{className:_,d:j}))};function oB(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(xk(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:c,angle:u}=t,m=or(n,i,s,u),h=or(n,i,c,u);return[{x:m.x,y:m.y},{x:h.x,y:h.y}]}return UD(t)}}var Bv={},$v={},Hv={},TO;function sB(){return TO||(TO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Tk();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Hv)),Hv}var PO;function lB(){return PO||(PO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sB();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})($v)),$v}var MO;function cB(){return MO||(MO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pk(),r=lB();function n(i,s,c){c&&typeof c!="number"&&t.isIterateeCall(i,s,c)&&(s=c=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),c=c===void 0?i<s?1:-1:r.toFinite(c);const u=Math.max(Math.ceil((s-i)/(c||1)),0),m=new Array(u);for(let h=0;h<u;h++)m[h]=i,i+=c;return m}e.range=n})(Bv)),Bv}var Fv,RO;function uB(){return RO||(RO=1,Fv=cB().range),Fv}var dB=uB();const HD=oi(dB);function Gi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function fB(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function g0(e){let t,r,n;e.length!==2?(t=Gi,r=(u,m)=>Gi(e(u),m),n=(u,m)=>e(u)-m):(t=e===Gi||e===fB?e:mB,r=e,n=e);function i(u,m,h=0,g=u.length){if(h<g){if(t(m,m)!==0)return g;do{const p=h+g>>>1;r(u[p],m)<0?h=p+1:g=p}while(h<g)}return h}function s(u,m,h=0,g=u.length){if(h<g){if(t(m,m)!==0)return g;do{const p=h+g>>>1;r(u[p],m)<=0?h=p+1:g=p}while(h<g)}return h}function c(u,m,h=0,g=u.length){const p=i(u,m,h,g-1);return p>h&&n(u[p-1],m)>-n(u[p],m)?p-1:p}return{left:i,center:c,right:s}}function mB(){return 0}function FD(e){return e===null?NaN:+e}function*hB(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const pB=g0(Gi),nu=pB.right;g0(FD).center;class qO extends Map{constructor(t,r=yB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(LO(this,t))}has(t){return super.has(LO(this,t))}set(t,r){return super.set(gB(this,t),r)}delete(t){return super.delete(vB(this,t))}}function LO({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function gB({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function vB({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function yB(e){return e!==null&&typeof e=="object"?e.valueOf():e}function bB(e=Gi){if(e===Gi)return KD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function KD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const _B=Math.sqrt(50),xB=Math.sqrt(10),wB=Math.sqrt(2);function Kf(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),c=s>=_B?10:s>=xB?5:s>=wB?2:1;let u,m,h;return i<0?(h=Math.pow(10,-i)/c,u=Math.round(e*h),m=Math.round(t*h),u/h<e&&++u,m/h>t&&--m,h=-h):(h=Math.pow(10,i)*c,u=Math.round(e/h),m=Math.round(t/h),u*h<e&&++u,m*h>t&&--m),m<u&&.5<=r&&r<2?Kf(e,t,r*2):[u,m,h]}function lb(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,c]=n?Kf(t,e,r):Kf(e,t,r);if(!(s>=i))return[];const u=s-i+1,m=new Array(u);if(n)if(c<0)for(let h=0;h<u;++h)m[h]=(s-h)/-c;else for(let h=0;h<u;++h)m[h]=(s-h)*c;else if(c<0)for(let h=0;h<u;++h)m[h]=(i+h)/-c;else for(let h=0;h<u;++h)m[h]=(i+h)*c;return m}function cb(e,t,r){return t=+t,e=+e,r=+r,Kf(e,t,r)[2]}function ub(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?cb(t,e,r):cb(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function zO(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function IO(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function YD(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?KD:bB(i);n>r;){if(n-r>600){const m=n-r+1,h=t-r+1,g=Math.log(m),p=.5*Math.exp(2*g/3),_=.5*Math.sqrt(g*p*(m-p)/m)*(h-m/2<0?-1:1),x=Math.max(r,Math.floor(t-h*p/m+_)),w=Math.min(n,Math.floor(t+(m-h)*p/m+_));YD(e,t,x,w,i)}const s=e[t];let c=r,u=n;for(gc(e,r,t),i(e[n],s)>0&&gc(e,r,n);c<u;){for(gc(e,c,u),++c,--u;i(e[c],s)<0;)++c;for(;i(e[u],s)>0;)--u}i(e[r],s)===0?gc(e,r,u):(++u,gc(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function gc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function jB(e,t,r){if(e=Float64Array.from(hB(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return IO(e);if(t>=1)return zO(e);var n,i=(n-1)*t,s=Math.floor(i),c=zO(YD(e,s).subarray(0,s+1)),u=IO(e.subarray(s+1));return c+(u-c)*(i-s)}}function SB(e,t,r=FD){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),c=+r(e[s],s,e),u=+r(e[s+1],s+1,e);return c+(u-c)*(i-s)}}function EB(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function Kn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ui(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const db=Symbol("implicit");function v0(){var e=new qO,t=[],r=[],n=db;function i(s){let c=e.get(s);if(c===void 0){if(n!==db)return n;e.set(s,c=t.push(s)-1)}return r[c%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new qO;for(const c of s)e.has(c)||e.set(c,t.push(c)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return v0(t,r).unknown(n)},Kn.apply(i,arguments),i}function y0(){var e=v0().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,c,u=!1,m=0,h=0,g=.5;delete e.unknown;function p(){var _=t().length,x=i<n,w=x?i:n,j=x?n:i;s=(j-w)/Math.max(1,_-m+h*2),u&&(s=Math.floor(s)),w+=(j-w-s*(_-m))*g,c=s*(1-m),u&&(w=Math.round(w),c=Math.round(c));var S=EB(_).map(function(O){return w+s*O});return r(x?S.reverse():S)}return e.domain=function(_){return arguments.length?(t(_),p()):t()},e.range=function(_){return arguments.length?([n,i]=_,n=+n,i=+i,p()):[n,i]},e.rangeRound=function(_){return[n,i]=_,n=+n,i=+i,u=!0,p()},e.bandwidth=function(){return c},e.step=function(){return s},e.round=function(_){return arguments.length?(u=!!_,p()):u},e.padding=function(_){return arguments.length?(m=Math.min(1,h=+_),p()):m},e.paddingInner=function(_){return arguments.length?(m=Math.min(1,_),p()):m},e.paddingOuter=function(_){return arguments.length?(h=+_,p()):h},e.align=function(_){return arguments.length?(g=Math.max(0,Math.min(1,_)),p()):g},e.copy=function(){return y0(t(),[n,i]).round(u).paddingInner(m).paddingOuter(h).align(g)},Kn.apply(p(),arguments)}function GD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return GD(t())},e}function OB(){return GD(y0.apply(null,arguments).paddingInner(1))}function b0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function VD(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function au(){}var Lc=.7,Yf=1/Lc,Ys="\\s*([+-]?\\d+)\\s*",zc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",CB=/^#([0-9a-f]{3,8})$/,AB=new RegExp(`^rgb\\(${Ys},${Ys},${Ys}\\)$`),NB=new RegExp(`^rgb\\(${xa},${xa},${xa}\\)$`),kB=new RegExp(`^rgba\\(${Ys},${Ys},${Ys},${zc}\\)$`),DB=new RegExp(`^rgba\\(${xa},${xa},${xa},${zc}\\)$`),TB=new RegExp(`^hsl\\(${zc},${xa},${xa}\\)$`),PB=new RegExp(`^hsla\\(${zc},${xa},${xa},${zc}\\)$`),UO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};b0(au,Ic,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:BO,formatHex:BO,formatHex8:MB,formatHsl:RB,formatRgb:$O,toString:$O});function BO(){return this.rgb().formatHex()}function MB(){return this.rgb().formatHex8()}function RB(){return WD(this).formatHsl()}function $O(){return this.rgb().formatRgb()}function Ic(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=CB.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?HO(t):r===3?new tn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Wd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Wd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=AB.exec(e))?new tn(t[1],t[2],t[3],1):(t=NB.exec(e))?new tn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=kB.exec(e))?Wd(t[1],t[2],t[3],t[4]):(t=DB.exec(e))?Wd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=TB.exec(e))?YO(t[1],t[2]/100,t[3]/100,1):(t=PB.exec(e))?YO(t[1],t[2]/100,t[3]/100,t[4]):UO.hasOwnProperty(e)?HO(UO[e]):e==="transparent"?new tn(NaN,NaN,NaN,0):null}function HO(e){return new tn(e>>16&255,e>>8&255,e&255,1)}function Wd(e,t,r,n){return n<=0&&(e=t=r=NaN),new tn(e,t,r,n)}function qB(e){return e instanceof au||(e=Ic(e)),e?(e=e.rgb(),new tn(e.r,e.g,e.b,e.opacity)):new tn}function fb(e,t,r,n){return arguments.length===1?qB(e):new tn(e,t,r,n??1)}function tn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}b0(tn,fb,VD(au,{brighter(e){return e=e==null?Yf:Math.pow(Yf,e),new tn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Lc:Math.pow(Lc,e),new tn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tn(Mo(this.r),Mo(this.g),Mo(this.b),Gf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:FO,formatHex:FO,formatHex8:LB,formatRgb:KO,toString:KO}));function FO(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}`}function LB(){return`#${ko(this.r)}${ko(this.g)}${ko(this.b)}${ko((isNaN(this.opacity)?1:this.opacity)*255)}`}function KO(){const e=Gf(this.opacity);return`${e===1?"rgb(":"rgba("}${Mo(this.r)}, ${Mo(this.g)}, ${Mo(this.b)}${e===1?")":`, ${e})`}`}function Gf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ko(e){return e=Mo(e),(e<16?"0":"")+e.toString(16)}function YO(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ra(e,t,r,n)}function WD(e){if(e instanceof ra)return new ra(e.h,e.s,e.l,e.opacity);if(e instanceof au||(e=Ic(e)),!e)return new ra;if(e instanceof ra)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),c=NaN,u=s-i,m=(s+i)/2;return u?(t===s?c=(r-n)/u+(r<n)*6:r===s?c=(n-t)/u+2:c=(t-r)/u+4,u/=m<.5?s+i:2-s-i,c*=60):u=m>0&&m<1?0:c,new ra(c,u,m,e.opacity)}function zB(e,t,r,n){return arguments.length===1?WD(e):new ra(e,t,r,n??1)}function ra(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}b0(ra,zB,VD(au,{brighter(e){return e=e==null?Yf:Math.pow(Yf,e),new ra(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Lc:Math.pow(Lc,e),new ra(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new tn(Kv(e>=240?e-240:e+120,i,n),Kv(e,i,n),Kv(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new ra(GO(this.h),Xd(this.s),Xd(this.l),Gf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gf(this.opacity);return`${e===1?"hsl(":"hsla("}${GO(this.h)}, ${Xd(this.s)*100}%, ${Xd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function GO(e){return e=(e||0)%360,e<0?e+360:e}function Xd(e){return Math.max(0,Math.min(1,e||0))}function Kv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const _0=e=>()=>e;function IB(e,t){return function(r){return e+r*t}}function UB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function BB(e){return(e=+e)==1?XD:function(t,r){return r-t?UB(t,r,e):_0(isNaN(t)?r:t)}}function XD(e,t){var r=t-e;return r?IB(e,r):_0(isNaN(e)?t:e)}const VO=(function e(t){var r=BB(t);function n(i,s){var c=r((i=fb(i)).r,(s=fb(s)).r),u=r(i.g,s.g),m=r(i.b,s.b),h=XD(i.opacity,s.opacity);return function(g){return i.r=c(g),i.g=u(g),i.b=m(g),i.opacity=h(g),i+""}}return n.gamma=e,n})(1);function $B(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function HB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function FB(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),c;for(c=0;c<n;++c)i[c]=il(e[c],t[c]);for(;c<r;++c)s[c]=t[c];return function(u){for(c=0;c<n;++c)s[c]=i[c](u);return s}}function KB(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Vf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function YB(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=il(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var mb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yv=new RegExp(mb.source,"g");function GB(e){return function(){return e}}function VB(e){return function(t){return e(t)+""}}function WB(e,t){var r=mb.lastIndex=Yv.lastIndex=0,n,i,s,c=-1,u=[],m=[];for(e=e+"",t=t+"";(n=mb.exec(e))&&(i=Yv.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,m.push({i:c,x:Vf(n,i)})),r=Yv.lastIndex;return r<t.length&&(s=t.slice(r),u[c]?u[c]+=s:u[++c]=s),u.length<2?m[0]?VB(m[0].x):GB(t):(t=m.length,function(h){for(var g=0,p;g<t;++g)u[(p=m[g]).i]=p.x(h);return u.join("")})}function il(e,t){var r=typeof t,n;return t==null||r==="boolean"?_0(t):(r==="number"?Vf:r==="string"?(n=Ic(t))?(t=n,VO):WB:t instanceof Ic?VO:t instanceof Date?KB:HB(t)?$B:Array.isArray(t)?FB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?YB:Vf)(e,t)}function x0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function XB(e,t){t===void 0&&(t=e,e=il);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(c){var u=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return s[u](c-u)}}function ZB(e){return function(){return e}}function Wf(e){return+e}var WO=[0,1];function $r(e){return e}function hb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:ZB(isNaN(t)?NaN:.5)}function QB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function JB(e,t,r){var n=e[0],i=e[1],s=t[0],c=t[1];return i<n?(n=hb(i,n),s=r(c,s)):(n=hb(n,i),s=r(s,c)),function(u){return s(n(u))}}function e$(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)i[c]=hb(e[c],e[c+1]),s[c]=r(t[c],t[c+1]);return function(u){var m=nu(e,u,1,n)-1;return s[m](i[m](u))}}function iu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hm(){var e=WO,t=WO,r=il,n,i,s,c=$r,u,m,h;function g(){var _=Math.min(e.length,t.length);return c!==$r&&(c=QB(e[0],e[_-1])),u=_>2?e$:JB,m=h=null,p}function p(_){return _==null||isNaN(_=+_)?s:(m||(m=u(e.map(n),t,r)))(n(c(_)))}return p.invert=function(_){return c(i((h||(h=u(t,e.map(n),Vf)))(_)))},p.domain=function(_){return arguments.length?(e=Array.from(_,Wf),g()):e.slice()},p.range=function(_){return arguments.length?(t=Array.from(_),g()):t.slice()},p.rangeRound=function(_){return t=Array.from(_),r=x0,g()},p.clamp=function(_){return arguments.length?(c=_?!0:$r,g()):c!==$r},p.interpolate=function(_){return arguments.length?(r=_,g()):r},p.unknown=function(_){return arguments.length?(s=_,p):s},function(_,x){return n=_,i=x,g()}}function w0(){return Hm()($r,$r)}function t$(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Xf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Zs(e){return e=Xf(Math.abs(e)),e?e[1]:NaN}function r$(e,t){return function(r,n){for(var i=r.length,s=[],c=0,u=e[0],m=0;i>0&&u>0&&(m+u+1>n&&(u=Math.max(1,n-m)),s.push(r.substring(i-=u,i+u)),!((m+=u+1)>n));)u=e[c=(c+1)%e.length];return s.reverse().join(t)}}function n$(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var a$=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uc(e){if(!(t=a$.exec(e)))throw new Error("invalid format: "+e);var t;return new j0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Uc.prototype=j0.prototype;function j0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}j0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function i$(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var ZD;function o$(e,t){var r=Xf(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(ZD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=n.length;return s===c?n:s>c?n+new Array(s-c+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Xf(e,Math.max(0,t+s-1))[0]}function XO(e,t){var r=Xf(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const ZO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:t$,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>XO(e*100,t),r:XO,s:o$,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function QO(e){return e}var JO=Array.prototype.map,eC=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function s$(e){var t=e.grouping===void 0||e.thousands===void 0?QO:r$(JO.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?QO:n$(JO.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function h(p){p=Uc(p);var _=p.fill,x=p.align,w=p.sign,j=p.symbol,S=p.zero,O=p.width,C=p.comma,A=p.precision,k=p.trim,D=p.type;D==="n"?(C=!0,D="g"):ZO[D]||(A===void 0&&(A=12),k=!0,D="g"),(S||_==="0"&&x==="=")&&(S=!0,_="0",x="=");var M=j==="$"?r:j==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",z=j==="$"?n:/[%p]/.test(D)?c:"",K=ZO[D],Q=/[defgprs%]/.test(D);A=A===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function ne(G){var I=M,ie=z,pe,q,R;if(D==="c")ie=K(G)+ie,G="";else{G=+G;var U=G<0||1/G<0;if(G=isNaN(G)?m:K(Math.abs(G),A),k&&(G=i$(G)),U&&+G==0&&w!=="+"&&(U=!1),I=(U?w==="("?w:u:w==="-"||w==="("?"":w)+I,ie=(D==="s"?eC[8+ZD/3]:"")+ie+(U&&w==="("?")":""),Q){for(pe=-1,q=G.length;++pe<q;)if(R=G.charCodeAt(pe),48>R||R>57){ie=(R===46?i+G.slice(pe+1):G.slice(pe))+ie,G=G.slice(0,pe);break}}}C&&!S&&(G=t(G,1/0));var J=I.length+G.length+ie.length,B=J<O?new Array(O-J+1).join(_):"";switch(C&&S&&(G=t(B+G,B.length?O-ie.length:1/0),B=""),x){case"<":G=I+G+ie+B;break;case"=":G=I+B+G+ie;break;case"^":G=B.slice(0,J=B.length>>1)+I+G+ie+B.slice(J);break;default:G=B+I+G+ie;break}return s(G)}return ne.toString=function(){return p+""},ne}function g(p,_){var x=h((p=Uc(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(Zs(_)/3)))*3,j=Math.pow(10,-w),S=eC[8+w/3];return function(O){return x(j*O)+S}}return{format:h,formatPrefix:g}}var Zd,S0,QD;l$({thousands:",",grouping:[3],currency:["$",""]});function l$(e){return Zd=s$(e),S0=Zd.format,QD=Zd.formatPrefix,Zd}function c$(e){return Math.max(0,-Zs(Math.abs(e)))}function u$(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zs(t)/3)))*3-Zs(Math.abs(e)))}function d$(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zs(t)-Zs(e))+1}function JD(e,t,r,n){var i=ub(e,t,r),s;switch(n=Uc(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=u$(i,c))&&(n.precision=s),QD(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=d$(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=c$(i))&&(n.precision=s-(n.type==="%")*2);break}}return S0(n)}function to(e){var t=e.domain;return e.ticks=function(r){var n=t();return lb(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return JD(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,c=n[i],u=n[s],m,h,g=10;for(u<c&&(h=c,c=u,u=h,h=i,i=s,s=h);g-- >0;){if(h=cb(c,u,r),h===m)return n[i]=c,n[s]=u,t(n);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;m=h}return e},e}function eT(){var e=w0();return e.copy=function(){return iu(e,eT())},Kn.apply(e,arguments),to(e)}function tT(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Wf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return tT(e).unknown(t)},e=arguments.length?Array.from(e,Wf):[0,1],to(r)}function rT(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],c;return s<i&&(c=r,r=n,n=c,c=i,i=s,s=c),e[r]=t.floor(i),e[n]=t.ceil(s),e}function tC(e){return Math.log(e)}function rC(e){return Math.exp(e)}function f$(e){return-Math.log(-e)}function m$(e){return-Math.exp(-e)}function h$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function p$(e){return e===10?h$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function g$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function nC(e){return(t,r)=>-e(-t,r)}function E0(e){const t=e(tC,rC),r=t.domain;let n=10,i,s;function c(){return i=g$(n),s=p$(n),r()[0]<0?(i=nC(i),s=nC(s),e(f$,m$)):e(tC,rC),t}return t.base=function(u){return arguments.length?(n=+u,c()):n},t.domain=function(u){return arguments.length?(r(u),c()):r()},t.ticks=u=>{const m=r();let h=m[0],g=m[m.length-1];const p=g<h;p&&([h,g]=[g,h]);let _=i(h),x=i(g),w,j;const S=u==null?10:+u;let O=[];if(!(n%1)&&x-_<S){if(_=Math.floor(_),x=Math.ceil(x),h>0){for(;_<=x;++_)for(w=1;w<n;++w)if(j=_<0?w/s(-_):w*s(_),!(j<h)){if(j>g)break;O.push(j)}}else for(;_<=x;++_)for(w=n-1;w>=1;--w)if(j=_>0?w/s(-_):w*s(_),!(j<h)){if(j>g)break;O.push(j)}O.length*2<S&&(O=lb(h,g,S))}else O=lb(_,x,Math.min(x-_,S)).map(s);return p?O.reverse():O},t.tickFormat=(u,m)=>{if(u==null&&(u=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Uc(m)).precision==null&&(m.trim=!0),m=S0(m)),u===1/0)return m;const h=Math.max(1,n*u/t.ticks().length);return g=>{let p=g/s(Math.round(i(g)));return p*n<n-.5&&(p*=n),p<=h?m(g):""}},t.nice=()=>r(rT(r(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function nT(){const e=E0(Hm()).domain([1,10]);return e.copy=()=>iu(e,nT()).base(e.base()),Kn.apply(e,arguments),e}function aC(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function iC(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function O0(e){var t=1,r=e(aC(t),iC(t));return r.constant=function(n){return arguments.length?e(aC(t=+n),iC(t)):t},to(r)}function aT(){var e=O0(Hm());return e.copy=function(){return iu(e,aT()).constant(e.constant())},Kn.apply(e,arguments)}function oC(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function v$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function y$(e){return e<0?-e*e:e*e}function C0(e){var t=e($r,$r),r=1;function n(){return r===1?e($r,$r):r===.5?e(v$,y$):e(oC(r),oC(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},to(t)}function A0(){var e=C0(Hm());return e.copy=function(){return iu(e,A0()).exponent(e.exponent())},Kn.apply(e,arguments),e}function b$(){return A0.apply(null,arguments).exponent(.5)}function sC(e){return Math.sign(e)*e*e}function _$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function iT(){var e=w0(),t=[0,1],r=!1,n;function i(s){var c=_$(e(s));return isNaN(c)?n:r?Math.round(c):c}return i.invert=function(s){return e.invert(sC(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Wf)).map(sC)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return iT(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Kn.apply(i,arguments),to(i)}function oT(){var e=[],t=[],r=[],n;function i(){var c=0,u=Math.max(1,t.length);for(r=new Array(u-1);++c<u;)r[c-1]=SB(e,c/u);return s}function s(c){return c==null||isNaN(c=+c)?n:t[nu(r,c)]}return s.invertExtent=function(c){var u=t.indexOf(c);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},s.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let u of c)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Gi),i()},s.range=function(c){return arguments.length?(t=Array.from(c),i()):t.slice()},s.unknown=function(c){return arguments.length?(n=c,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return oT().domain(e).range(t).unknown(n)},Kn.apply(s,arguments)}function sT(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function c(m){return m!=null&&m<=m?i[nu(n,m,0,r)]:s}function u(){var m=-1;for(n=new Array(r);++m<r;)n[m]=((m+1)*t-(m-r)*e)/(r+1);return c}return c.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,u()):[e,t]},c.range=function(m){return arguments.length?(r=(i=Array.from(m)).length-1,u()):i.slice()},c.invertExtent=function(m){var h=i.indexOf(m);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},c.unknown=function(m){return arguments.length&&(s=m),c},c.thresholds=function(){return n.slice()},c.copy=function(){return sT().domain([e,t]).range(i).unknown(s)},Kn.apply(to(c),arguments)}function lT(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[nu(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var c=t.indexOf(s);return[e[c-1],e[c]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return lT().domain(e).range(t).unknown(r)},Kn.apply(i,arguments)}const Gv=new Date,Vv=new Date;function hr(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const c=i(s),u=i.ceil(s);return s-c<u-s?c:u},i.offset=(s,c)=>(t(s=new Date(+s),c==null?1:Math.floor(c)),s),i.range=(s,c,u)=>{const m=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<c)||!(u>0))return m;let h;do m.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<c);return m},i.filter=s=>hr(c=>{if(c>=c)for(;e(c),!s(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;t(c,-1),!s(c););else for(;--u>=0;)for(;t(c,1),!s(c););}),r&&(i.count=(s,c)=>(Gv.setTime(+s),Vv.setTime(+c),e(Gv),e(Vv),Math.floor(r(Gv,Vv))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?c=>n(c)%s===0:c=>i.count(0,c)%s===0):i)),i}const Zf=hr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Zf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?hr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Zf);Zf.range;const Va=1e3,Bn=Va*60,Wa=Bn*60,ti=Wa*24,N0=ti*7,lC=ti*30,Wv=ti*365,Do=hr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Va)},(e,t)=>(t-e)/Va,e=>e.getUTCSeconds());Do.range;const k0=hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Va)},(e,t)=>{e.setTime(+e+t*Bn)},(e,t)=>(t-e)/Bn,e=>e.getMinutes());k0.range;const D0=hr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bn)},(e,t)=>(t-e)/Bn,e=>e.getUTCMinutes());D0.range;const T0=hr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Va-e.getMinutes()*Bn)},(e,t)=>{e.setTime(+e+t*Wa)},(e,t)=>(t-e)/Wa,e=>e.getHours());T0.range;const P0=hr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Wa)},(e,t)=>(t-e)/Wa,e=>e.getUTCHours());P0.range;const ou=hr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bn)/ti,e=>e.getDate()-1);ou.range;const Fm=hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ti,e=>e.getUTCDate()-1);Fm.range;const cT=hr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ti,e=>Math.floor(e/ti));cT.range;function Zo(e){return hr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Bn)/N0)}const Km=Zo(0),Qf=Zo(1),x$=Zo(2),w$=Zo(3),Qs=Zo(4),j$=Zo(5),S$=Zo(6);Km.range;Qf.range;x$.range;w$.range;Qs.range;j$.range;S$.range;function Qo(e){return hr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/N0)}const Ym=Qo(0),Jf=Qo(1),E$=Qo(2),O$=Qo(3),Js=Qo(4),C$=Qo(5),A$=Qo(6);Ym.range;Jf.range;E$.range;O$.range;Js.range;C$.range;A$.range;const M0=hr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());M0.range;const R0=hr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());R0.range;const ri=hr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ri.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ri.range;const ni=hr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());ni.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:hr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});ni.range;function uT(e,t,r,n,i,s){const c=[[Do,1,Va],[Do,5,5*Va],[Do,15,15*Va],[Do,30,30*Va],[s,1,Bn],[s,5,5*Bn],[s,15,15*Bn],[s,30,30*Bn],[i,1,Wa],[i,3,3*Wa],[i,6,6*Wa],[i,12,12*Wa],[n,1,ti],[n,2,2*ti],[r,1,N0],[t,1,lC],[t,3,3*lC],[e,1,Wv]];function u(h,g,p){const _=g<h;_&&([h,g]=[g,h]);const x=p&&typeof p.range=="function"?p:m(h,g,p),w=x?x.range(h,+g+1):[];return _?w.reverse():w}function m(h,g,p){const _=Math.abs(g-h)/p,x=g0(([,,S])=>S).right(c,_);if(x===c.length)return e.every(ub(h/Wv,g/Wv,p));if(x===0)return Zf.every(Math.max(ub(h,g,p),1));const[w,j]=c[_/c[x-1][2]<c[x][2]/_?x-1:x];return w.every(j)}return[u,m]}const[N$,k$]=uT(ni,R0,Ym,cT,P0,D0),[D$,T$]=uT(ri,M0,Km,ou,T0,k0);function Xv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Zv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function vc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function P$(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,c=e.shortDays,u=e.months,m=e.shortMonths,h=yc(i),g=bc(i),p=yc(s),_=bc(s),x=yc(c),w=bc(c),j=yc(u),S=bc(u),O=yc(m),C=bc(m),A={a:U,A:J,b:B,B:fe,c:null,d:hC,e:hC,f:r8,g:f8,G:h8,H:J$,I:e8,j:t8,L:dT,m:n8,M:a8,p:je,q:te,Q:vC,s:yC,S:i8,u:o8,U:s8,V:l8,w:c8,W:u8,x:null,X:null,y:d8,Y:m8,Z:p8,"%":gC},k={a:H,A:Ee,b:Te,B:Ie,c:null,d:pC,e:pC,f:b8,g:N8,G:D8,H:g8,I:v8,j:y8,L:mT,m:_8,M:x8,p:ge,q:Le,Q:vC,s:yC,S:w8,u:j8,U:S8,V:E8,w:O8,W:C8,x:null,X:null,y:A8,Y:k8,Z:T8,"%":gC},D={a:ne,A:G,b:I,B:ie,c:pe,d:fC,e:fC,f:W$,g:dC,G:uC,H:mC,I:mC,j:K$,L:V$,m:F$,M:Y$,p:Q,q:H$,Q:Z$,s:Q$,S:G$,u:z$,U:I$,V:U$,w:L$,W:B$,x:q,X:R,y:dC,Y:uC,Z:$$,"%":X$};A.x=M(r,A),A.X=M(n,A),A.c=M(t,A),k.x=M(r,k),k.X=M(n,k),k.c=M(t,k);function M(ee,we){return function(xe){var oe=[],Fe=-1,ve=0,Ne=ee.length,Me,Et,Re;for(xe instanceof Date||(xe=new Date(+xe));++Fe<Ne;)ee.charCodeAt(Fe)===37&&(oe.push(ee.slice(ve,Fe)),(Et=cC[Me=ee.charAt(++Fe)])!=null?Me=ee.charAt(++Fe):Et=Me==="e"?" ":"0",(Re=we[Me])&&(Me=Re(xe,Et)),oe.push(Me),ve=Fe+1);return oe.push(ee.slice(ve,Fe)),oe.join("")}}function z(ee,we){return function(xe){var oe=vc(1900,void 0,1),Fe=K(oe,ee,xe+="",0),ve,Ne;if(Fe!=xe.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(we&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(ve=Zv(vc(oe.y,0,1)),Ne=ve.getUTCDay(),ve=Ne>4||Ne===0?Jf.ceil(ve):Jf(ve),ve=Fm.offset(ve,(oe.V-1)*7),oe.y=ve.getUTCFullYear(),oe.m=ve.getUTCMonth(),oe.d=ve.getUTCDate()+(oe.w+6)%7):(ve=Xv(vc(oe.y,0,1)),Ne=ve.getDay(),ve=Ne>4||Ne===0?Qf.ceil(ve):Qf(ve),ve=ou.offset(ve,(oe.V-1)*7),oe.y=ve.getFullYear(),oe.m=ve.getMonth(),oe.d=ve.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),Ne="Z"in oe?Zv(vc(oe.y,0,1)).getUTCDay():Xv(vc(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(Ne+5)%7:oe.w+oe.U*7-(Ne+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,Zv(oe)):Xv(oe)}}function K(ee,we,xe,oe){for(var Fe=0,ve=we.length,Ne=xe.length,Me,Et;Fe<ve;){if(oe>=Ne)return-1;if(Me=we.charCodeAt(Fe++),Me===37){if(Me=we.charAt(Fe++),Et=D[Me in cC?we.charAt(Fe++):Me],!Et||(oe=Et(ee,xe,oe))<0)return-1}else if(Me!=xe.charCodeAt(oe++))return-1}return oe}function Q(ee,we,xe){var oe=h.exec(we.slice(xe));return oe?(ee.p=g.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function ne(ee,we,xe){var oe=x.exec(we.slice(xe));return oe?(ee.w=w.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function G(ee,we,xe){var oe=p.exec(we.slice(xe));return oe?(ee.w=_.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function I(ee,we,xe){var oe=O.exec(we.slice(xe));return oe?(ee.m=C.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function ie(ee,we,xe){var oe=j.exec(we.slice(xe));return oe?(ee.m=S.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function pe(ee,we,xe){return K(ee,t,we,xe)}function q(ee,we,xe){return K(ee,r,we,xe)}function R(ee,we,xe){return K(ee,n,we,xe)}function U(ee){return c[ee.getDay()]}function J(ee){return s[ee.getDay()]}function B(ee){return m[ee.getMonth()]}function fe(ee){return u[ee.getMonth()]}function je(ee){return i[+(ee.getHours()>=12)]}function te(ee){return 1+~~(ee.getMonth()/3)}function H(ee){return c[ee.getUTCDay()]}function Ee(ee){return s[ee.getUTCDay()]}function Te(ee){return m[ee.getUTCMonth()]}function Ie(ee){return u[ee.getUTCMonth()]}function ge(ee){return i[+(ee.getUTCHours()>=12)]}function Le(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var we=M(ee+="",A);return we.toString=function(){return ee},we},parse:function(ee){var we=z(ee+="",!1);return we.toString=function(){return ee},we},utcFormat:function(ee){var we=M(ee+="",k);return we.toString=function(){return ee},we},utcParse:function(ee){var we=z(ee+="",!0);return we.toString=function(){return ee},we}}}var cC={"-":"",_:" ",0:"0"},Sr=/^\s*\d+/,M$=/^%/,R$=/[\\^$*+?|[\]().{}]/g;function ot(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function q$(e){return e.replace(R$,"\\$&")}function yc(e){return new RegExp("^(?:"+e.map(q$).join("|")+")","i")}function bc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function L$(e,t,r){var n=Sr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function z$(e,t,r){var n=Sr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function I$(e,t,r){var n=Sr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function U$(e,t,r){var n=Sr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function B$(e,t,r){var n=Sr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function uC(e,t,r){var n=Sr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function dC(e,t,r){var n=Sr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function $$(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function H$(e,t,r){var n=Sr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function F$(e,t,r){var n=Sr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function fC(e,t,r){var n=Sr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function K$(e,t,r){var n=Sr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function mC(e,t,r){var n=Sr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Y$(e,t,r){var n=Sr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function G$(e,t,r){var n=Sr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function V$(e,t,r){var n=Sr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function W$(e,t,r){var n=Sr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function X$(e,t,r){var n=M$.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Z$(e,t,r){var n=Sr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Q$(e,t,r){var n=Sr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function hC(e,t){return ot(e.getDate(),t,2)}function J$(e,t){return ot(e.getHours(),t,2)}function e8(e,t){return ot(e.getHours()%12||12,t,2)}function t8(e,t){return ot(1+ou.count(ri(e),e),t,3)}function dT(e,t){return ot(e.getMilliseconds(),t,3)}function r8(e,t){return dT(e,t)+"000"}function n8(e,t){return ot(e.getMonth()+1,t,2)}function a8(e,t){return ot(e.getMinutes(),t,2)}function i8(e,t){return ot(e.getSeconds(),t,2)}function o8(e){var t=e.getDay();return t===0?7:t}function s8(e,t){return ot(Km.count(ri(e)-1,e),t,2)}function fT(e){var t=e.getDay();return t>=4||t===0?Qs(e):Qs.ceil(e)}function l8(e,t){return e=fT(e),ot(Qs.count(ri(e),e)+(ri(e).getDay()===4),t,2)}function c8(e){return e.getDay()}function u8(e,t){return ot(Qf.count(ri(e)-1,e),t,2)}function d8(e,t){return ot(e.getFullYear()%100,t,2)}function f8(e,t){return e=fT(e),ot(e.getFullYear()%100,t,2)}function m8(e,t){return ot(e.getFullYear()%1e4,t,4)}function h8(e,t){var r=e.getDay();return e=r>=4||r===0?Qs(e):Qs.ceil(e),ot(e.getFullYear()%1e4,t,4)}function p8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ot(t/60|0,"0",2)+ot(t%60,"0",2)}function pC(e,t){return ot(e.getUTCDate(),t,2)}function g8(e,t){return ot(e.getUTCHours(),t,2)}function v8(e,t){return ot(e.getUTCHours()%12||12,t,2)}function y8(e,t){return ot(1+Fm.count(ni(e),e),t,3)}function mT(e,t){return ot(e.getUTCMilliseconds(),t,3)}function b8(e,t){return mT(e,t)+"000"}function _8(e,t){return ot(e.getUTCMonth()+1,t,2)}function x8(e,t){return ot(e.getUTCMinutes(),t,2)}function w8(e,t){return ot(e.getUTCSeconds(),t,2)}function j8(e){var t=e.getUTCDay();return t===0?7:t}function S8(e,t){return ot(Ym.count(ni(e)-1,e),t,2)}function hT(e){var t=e.getUTCDay();return t>=4||t===0?Js(e):Js.ceil(e)}function E8(e,t){return e=hT(e),ot(Js.count(ni(e),e)+(ni(e).getUTCDay()===4),t,2)}function O8(e){return e.getUTCDay()}function C8(e,t){return ot(Jf.count(ni(e)-1,e),t,2)}function A8(e,t){return ot(e.getUTCFullYear()%100,t,2)}function N8(e,t){return e=hT(e),ot(e.getUTCFullYear()%100,t,2)}function k8(e,t){return ot(e.getUTCFullYear()%1e4,t,4)}function D8(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Js(e):Js.ceil(e),ot(e.getUTCFullYear()%1e4,t,4)}function T8(){return"+0000"}function gC(){return"%"}function vC(e){return+e}function yC(e){return Math.floor(+e/1e3)}var zs,pT,gT;P8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function P8(e){return zs=P$(e),pT=zs.format,zs.parse,gT=zs.utcFormat,zs.utcParse,zs}function M8(e){return new Date(e)}function R8(e){return e instanceof Date?+e:+new Date(+e)}function q0(e,t,r,n,i,s,c,u,m,h){var g=w0(),p=g.invert,_=g.domain,x=h(".%L"),w=h(":%S"),j=h("%I:%M"),S=h("%I %p"),O=h("%a %d"),C=h("%b %d"),A=h("%B"),k=h("%Y");function D(M){return(m(M)<M?x:u(M)<M?w:c(M)<M?j:s(M)<M?S:n(M)<M?i(M)<M?O:C:r(M)<M?A:k)(M)}return g.invert=function(M){return new Date(p(M))},g.domain=function(M){return arguments.length?_(Array.from(M,R8)):_().map(M8)},g.ticks=function(M){var z=_();return e(z[0],z[z.length-1],M??10)},g.tickFormat=function(M,z){return z==null?D:h(z)},g.nice=function(M){var z=_();return(!M||typeof M.range!="function")&&(M=t(z[0],z[z.length-1],M??10)),M?_(rT(z,M)):g},g.copy=function(){return iu(g,q0(e,t,r,n,i,s,c,u,m,h))},g}function q8(){return Kn.apply(q0(D$,T$,ri,M0,Km,ou,T0,k0,Do,pT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function L8(){return Kn.apply(q0(N$,k$,ni,R0,Ym,Fm,P0,D0,Do,gT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Gm(){var e=0,t=1,r,n,i,s,c=$r,u=!1,m;function h(p){return p==null||isNaN(p=+p)?m:c(i===0?.5:(p=(s(p)-r)*i,u?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t]=p,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(p){return arguments.length?(u=!!p,h):u},h.interpolator=function(p){return arguments.length?(c=p,h):c};function g(p){return function(_){var x,w;return arguments.length?([x,w]=_,c=p(x,w),h):[c(0),c(1)]}}return h.range=g(il),h.rangeRound=g(x0),h.unknown=function(p){return arguments.length?(m=p,h):m},function(p){return s=p,r=p(e),n=p(t),i=r===n?0:1/(n-r),h}}function ro(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function vT(){var e=to(Gm()($r));return e.copy=function(){return ro(e,vT())},ui.apply(e,arguments)}function yT(){var e=E0(Gm()).domain([1,10]);return e.copy=function(){return ro(e,yT()).base(e.base())},ui.apply(e,arguments)}function bT(){var e=O0(Gm());return e.copy=function(){return ro(e,bT()).constant(e.constant())},ui.apply(e,arguments)}function L0(){var e=C0(Gm());return e.copy=function(){return ro(e,L0()).exponent(e.exponent())},ui.apply(e,arguments)}function z8(){return L0.apply(null,arguments).exponent(.5)}function _T(){var e=[],t=$r;function r(n){if(n!=null&&!isNaN(n=+n))return t((nu(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Gi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>jB(e,s/n))},r.copy=function(){return _T(t).domain(e)},ui.apply(r,arguments)}function Vm(){var e=0,t=.5,r=1,n=1,i,s,c,u,m,h=$r,g,p=!1,_;function x(j){return isNaN(j=+j)?_:(j=.5+((j=+g(j))-s)*(n*j<n*s?u:m),h(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,i=g(e=+e),s=g(t=+t),c=g(r=+r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(h=j,x):h};function w(j){return function(S){var O,C,A;return arguments.length?([O,C,A]=S,h=XB(j,[O,C,A]),x):[h(0),h(.5),h(1)]}}return x.range=w(il),x.rangeRound=w(x0),x.unknown=function(j){return arguments.length?(_=j,x):_},function(j){return g=j,i=j(e),s=j(t),c=j(r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x}}function xT(){var e=to(Vm()($r));return e.copy=function(){return ro(e,xT())},ui.apply(e,arguments)}function wT(){var e=E0(Vm()).domain([.1,1,10]);return e.copy=function(){return ro(e,wT()).base(e.base())},ui.apply(e,arguments)}function jT(){var e=O0(Vm());return e.copy=function(){return ro(e,jT()).constant(e.constant())},ui.apply(e,arguments)}function z0(){var e=C0(Vm());return e.copy=function(){return ro(e,z0()).exponent(e.exponent())},ui.apply(e,arguments)}function I8(){return z0.apply(null,arguments).exponent(.5)}const Sc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:y0,scaleDiverging:xT,scaleDivergingLog:wT,scaleDivergingPow:z0,scaleDivergingSqrt:I8,scaleDivergingSymlog:jT,scaleIdentity:tT,scaleImplicit:db,scaleLinear:eT,scaleLog:nT,scaleOrdinal:v0,scalePoint:OB,scalePow:A0,scaleQuantile:oT,scaleQuantize:sT,scaleRadial:iT,scaleSequential:vT,scaleSequentialLog:yT,scaleSequentialPow:L0,scaleSequentialQuantile:_T,scaleSequentialSqrt:z8,scaleSequentialSymlog:bT,scaleSqrt:b$,scaleSymlog:aT,scaleThreshold:lT,scaleTime:q8,scaleUtc:L8,tickFormat:JD},Symbol.toStringTag,{value:"Module"}));var di=e=>e.chartData,Wm=X([di],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),I0=(e,t,r,n)=>n?Wm(e):di(e),U8=(e,t,r)=>r?Wm(e):di(e);function Wi(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(It(t)&&It(r))return!0}return!1}function bC(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function ST(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,s;if(It(r))i=r;else if(typeof r=="function")return;if(It(n))s=n;else if(typeof n=="function")return;var c=[i,s];if(Wi(c))return c}}function B8(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Wi(n))return bC(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,c,u;if(i==="auto")t!=null&&(c=Math.min(...t));else if(ke(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[0]))}catch{}else if(typeof i=="string"&&TE.test(i)){var m=TE.exec(i);if(m==null||m[1]==null||t==null)c=void 0;else{var h=+m[1];c=t[0]-h}}else c=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(ke(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&PE.test(s)){var g=PE.exec(s);if(g==null||g[1]==null||t==null)u=void 0;else{var p=+g[1];u=t[1]+p}}else u=t?.[1];var _=[c,u];if(Wi(_))return t==null?_:bC(_,t,r)}}}var ol=1e9,$8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},B0,Pt=!0,Fn="[DecimalError] ",Ro=Fn+"Invalid argument: ",U0=Fn+"Exponent out of range: ",sl=Math.floor,Co=Math.pow,H8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yn,_r=1e7,At=7,ET=9007199254740991,em=sl(ET/At),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*At;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(e){return Xa(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,r=t.constructor;return wt(Xa(t,new r(e),0,1),r.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return lr(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(yn))throw Error(Fn+"NaN");if(r.s<1)throw Error(Fn+(r.s?"NaN":"-Infinity"));return r.eq(yn)?new n(0):(Pt=!1,t=Xa(Bc(r,s),Bc(e,s),s),Pt=!0,wt(t,i))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?AT(t,e):OT(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Fn+"NaN");return r.s?(Pt=!1,t=Xa(r,e,0,1).times(e),Pt=!0,r.minus(t)):wt(new n(r),i)};Ce.naturalExponential=Ce.exp=function(){return CT(this)};Ce.naturalLogarithm=Ce.ln=function(){return Bc(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?OT(t,e):AT(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ro+e);if(t=lr(i)+1,n=i.d.length-1,r=n*At+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ce.squareRoot=Ce.sqrt=function(){var e,t,r,n,i,s,c,u=this,m=u.constructor;if(u.s<1){if(!u.s)return new m(0);throw Error(Fn+"NaN")}for(e=lr(u),Pt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ba(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=sl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(i.toString()),r=m.precision,i=c=r+3;;)if(s=n,n=s.plus(Xa(u,s,c+2)).times(.5),ba(s.d).slice(0,c)===(t=ba(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),i==c&&t=="4999"){if(wt(s,r+1,0),s.times(s).eq(u)){n=s;break}}else if(t!="9999")break;c+=4}return Pt=!0,wt(n,r)};Ce.times=Ce.mul=function(e){var t,r,n,i,s,c,u,m,h,g=this,p=g.constructor,_=g.d,x=(e=new p(e)).d;if(!g.s||!e.s)return new p(0);for(e.s*=g.s,r=g.e+e.e,m=_.length,h=x.length,m<h&&(s=_,_=x,x=s,c=m,m=h,h=c),s=[],c=m+h,n=c;n--;)s.push(0);for(n=h;--n>=0;){for(t=0,i=m+n;i>n;)u=s[i]+x[n]*_[i-n-1]+t,s[i--]=u%_r|0,t=u/_r|0;s[i]=(s[i]+t)%_r|0}for(;!s[--c];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Pt?wt(e,p.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Sa(e,0,ol),t===void 0?t=n.rounding:Sa(t,0,8),wt(r,e+lr(r)+1,t))};Ce.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Fo(n,!0):(Sa(e,0,ol),t===void 0?t=i.rounding:Sa(t,0,8),n=wt(new i(n),e+1,t),r=Fo(n,!0,e+1)),r};Ce.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?Fo(i):(Sa(e,0,ol),t===void 0?t=s.rounding:Sa(t,0,8),n=wt(new s(i),e+lr(i)+1,t),r=Fo(n.abs(),!1,e+lr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return wt(new t(e),lr(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,r,n,i,s,c,u=this,m=u.constructor,h=12,g=+(e=new m(e));if(!e.s)return new m(yn);if(u=new m(u),!u.s){if(e.s<1)throw Error(Fn+"Infinity");return u}if(u.eq(yn))return u;if(n=m.precision,e.eq(yn))return wt(u,n);if(t=e.e,r=e.d.length-1,c=t>=r,s=u.s,c){if((r=g<0?-g:g)<=ET){for(i=new m(yn),t=Math.ceil(n/At+4),Pt=!1;r%2&&(i=i.times(u),xC(i.d,t)),r=sl(r/2),r!==0;)u=u.times(u),xC(u.d,t);return Pt=!0,e.s<0?new m(yn).div(i):wt(i,n)}}else if(s<0)throw Error(Fn+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Pt=!1,i=e.times(Bc(u,n+h)),Pt=!0,i=CT(i),i.s=s,i};Ce.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=lr(i),n=Fo(i,r<=s.toExpNeg||r>=s.toExpPos)):(Sa(e,1,ol),t===void 0?t=s.rounding:Sa(t,0,8),i=wt(new s(i),e,t),r=lr(i),n=Fo(i,e<=r||r<=s.toExpNeg,e)),n};Ce.toSignificantDigits=Ce.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Sa(e,1,ol),t===void 0?t=n.rounding:Sa(t,0,8)),wt(new n(r),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=lr(e),r=e.constructor;return Fo(e,t<=r.toExpNeg||t>=r.toExpPos)};function OT(e,t){var r,n,i,s,c,u,m,h,g=e.constructor,p=g.precision;if(!e.s||!t.s)return t.s||(t=new g(e)),Pt?wt(t,p):t;if(m=e.d,h=t.d,c=e.e,i=t.e,m=m.slice(),s=c-i,s){for(s<0?(n=m,s=-s,u=h.length):(n=h,i=c,u=m.length),c=Math.ceil(p/At),u=c>u?c+1:u+1,s>u&&(s=u,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(u=m.length,s=h.length,u-s<0&&(s=u,n=h,h=m,m=n),r=0;s;)r=(m[--s]=m[s]+h[s]+r)/_r|0,m[s]%=_r;for(r&&(m.unshift(r),++i),u=m.length;m[--u]==0;)m.pop();return t.d=m,t.e=i,Pt?wt(t,p):t}function Sa(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ro+e)}function ba(e){var t,r,n,i=e.length-1,s="",c=e[0];if(i>0){for(s+=c,t=1;t<i;t++)n=e[t]+"",r=At-n.length,r&&(s+=$i(r)),s+=n;c=e[t],n=c+"",r=At-n.length,r&&(s+=$i(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var Xa=(function(){function e(n,i){var s,c=0,u=n.length;for(n=n.slice();u--;)s=n[u]*i+c,n[u]=s%_r|0,c=s/_r|0;return c&&n.unshift(c),n}function t(n,i,s,c){var u,m;if(s!=c)m=s>c?1:-1;else for(u=m=0;u<s;u++)if(n[u]!=i[u]){m=n[u]>i[u]?1:-1;break}return m}function r(n,i,s){for(var c=0;s--;)n[s]-=c,c=n[s]<i[s]?1:0,n[s]=c*_r+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,c){var u,m,h,g,p,_,x,w,j,S,O,C,A,k,D,M,z,K,Q=n.constructor,ne=n.s==i.s?1:-1,G=n.d,I=i.d;if(!n.s)return new Q(n);if(!i.s)throw Error(Fn+"Division by zero");for(m=n.e-i.e,z=I.length,D=G.length,x=new Q(ne),w=x.d=[],h=0;I[h]==(G[h]||0);)++h;if(I[h]>(G[h]||0)&&--m,s==null?C=s=Q.precision:c?C=s+(lr(n)-lr(i))+1:C=s,C<0)return new Q(0);if(C=C/At+2|0,h=0,z==1)for(g=0,I=I[0],C++;(h<D||g)&&C--;h++)A=g*_r+(G[h]||0),w[h]=A/I|0,g=A%I|0;else{for(g=_r/(I[0]+1)|0,g>1&&(I=e(I,g),G=e(G,g),z=I.length,D=G.length),k=z,j=G.slice(0,z),S=j.length;S<z;)j[S++]=0;K=I.slice(),K.unshift(0),M=I[0],I[1]>=_r/2&&++M;do g=0,u=t(I,j,z,S),u<0?(O=j[0],z!=S&&(O=O*_r+(j[1]||0)),g=O/M|0,g>1?(g>=_r&&(g=_r-1),p=e(I,g),_=p.length,S=j.length,u=t(p,j,_,S),u==1&&(g--,r(p,z<_?K:I,_))):(g==0&&(u=g=1),p=I.slice()),_=p.length,_<S&&p.unshift(0),r(j,p,S),u==-1&&(S=j.length,u=t(I,j,z,S),u<1&&(g++,r(j,z<S?K:I,S))),S=j.length):u===0&&(g++,j=[0]),w[h++]=g,u&&j[0]?j[S++]=G[k]||0:(j=[G[k]],S=1);while((k++<D||j[0]!==void 0)&&C--)}return w[0]||w.shift(),x.e=m,wt(x,c?s+lr(x)+1:s)}})();function CT(e,t){var r,n,i,s,c,u,m=0,h=0,g=e.constructor,p=g.precision;if(lr(e)>16)throw Error(U0+lr(e));if(!e.s)return new g(yn);for(Pt=!1,u=p,c=new g(.03125);e.abs().gte(.1);)e=e.times(c),h+=5;for(n=Math.log(Co(2,h))/Math.LN10*2+5|0,u+=n,r=i=s=new g(yn),g.precision=u;;){if(i=wt(i.times(e),u),r=r.times(++m),c=s.plus(Xa(i,r,u)),ba(c.d).slice(0,u)===ba(s.d).slice(0,u)){for(;h--;)s=wt(s.times(s),u);return g.precision=p,t==null?(Pt=!0,wt(s,p)):s}s=c}}function lr(e){for(var t=e.e*At,r=e.d[0];r>=10;r/=10)t++;return t}function Qv(e,t,r){if(t>e.LN10.sd())throw Pt=!0,r&&(e.precision=r),Error(Fn+"LN10 precision limit exceeded");return wt(new e(e.LN10),t)}function $i(e){for(var t="";e--;)t+="0";return t}function Bc(e,t){var r,n,i,s,c,u,m,h,g,p=1,_=10,x=e,w=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(Fn+(x.s?"NaN":"-Infinity"));if(x.eq(yn))return new j(0);if(t==null?(Pt=!1,h=S):h=t,x.eq(10))return t==null&&(Pt=!0),Qv(j,h);if(h+=_,j.precision=h,r=ba(w),n=r.charAt(0),s=lr(x),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=ba(x.d),n=r.charAt(0),p++;s=lr(x),n>1?(x=new j("0."+r),s++):x=new j(n+"."+r.slice(1))}else return m=Qv(j,h+2,S).times(s+""),x=Bc(new j(n+"."+r.slice(1)),h-_).plus(m),j.precision=S,t==null?(Pt=!0,wt(x,S)):x;for(u=c=x=Xa(x.minus(yn),x.plus(yn),h),g=wt(x.times(x),h),i=3;;){if(c=wt(c.times(g),h),m=u.plus(Xa(c,new j(i),h)),ba(m.d).slice(0,h)===ba(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(Qv(j,h+2,S).times(s+""))),u=Xa(u,new j(p),h),j.precision=S,t==null?(Pt=!0,wt(u,S)):u;u=m,i+=2}}function _C(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=sl(r/At),e.d=[],n=(r+1)%At,r<0&&(n+=At),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=At;n<i;)e.d.push(+t.slice(n,n+=At));t=t.slice(n),n=At-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Pt&&(e.e>em||e.e<-em))throw Error(U0+r)}else e.s=0,e.e=0,e.d=[0];return e}function wt(e,t,r){var n,i,s,c,u,m,h,g,p=e.d;for(c=1,s=p[0];s>=10;s/=10)c++;if(n=t-c,n<0)n+=At,i=t,h=p[g=0];else{if(g=Math.ceil((n+1)/At),s=p.length,g>=s)return e;for(h=s=p[g],c=1;s>=10;s/=10)c++;n%=At,i=n-At+c}if(r!==void 0&&(s=Co(10,c-i-1),u=h/s%10|0,m=t<0||p[g+1]!==void 0||h%s,m=r<4?(u||m)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||m||r==6&&(n>0?i>0?h/Co(10,c-i):0:p[g-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return m?(s=lr(e),p.length=1,t=t-s-1,p[0]=Co(10,(At-t%At)%At),e.e=sl(-t/At)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=g,s=1,g--):(p.length=g+1,s=Co(10,At-n),p[g]=i>0?(h/Co(10,c-i)%Co(10,i)|0)*s:0),m)for(;;)if(g==0){(p[0]+=s)==_r&&(p[0]=1,++e.e);break}else{if(p[g]+=s,p[g]!=_r)break;p[g--]=0,s=1}for(n=p.length;p[--n]===0;)p.pop();if(Pt&&(e.e>em||e.e<-em))throw Error(U0+lr(e));return e}function AT(e,t){var r,n,i,s,c,u,m,h,g,p,_=e.constructor,x=_.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new _(e),Pt?wt(t,x):t;if(m=e.d,p=t.d,n=t.e,h=e.e,m=m.slice(),c=h-n,c){for(g=c<0,g?(r=m,c=-c,u=p.length):(r=p,n=h,u=m.length),i=Math.max(Math.ceil(x/At),u)+2,c>i&&(c=i,r.length=1),r.reverse(),i=c;i--;)r.push(0);r.reverse()}else{for(i=m.length,u=p.length,g=i<u,g&&(u=i),i=0;i<u;i++)if(m[i]!=p[i]){g=m[i]<p[i];break}c=0}for(g&&(r=m,m=p,p=r,t.s=-t.s),u=m.length,i=p.length-u;i>0;--i)m[u++]=0;for(i=p.length;i>c;){if(m[--i]<p[i]){for(s=i;s&&m[--s]===0;)m[s]=_r-1;--m[s],m[i]+=_r}m[i]-=p[i]}for(;m[--u]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,Pt?wt(t,x):t):new _(0)}function Fo(e,t,r){var n,i=lr(e),s=ba(e.d),c=s.length;return t?(r&&(n=r-c)>0?s=s.charAt(0)+"."+s.slice(1)+$i(n):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+$i(-i-1)+s,r&&(n=r-c)>0&&(s+=$i(n))):i>=c?(s+=$i(i+1-c),r&&(n=r-i-1)>0&&(s=s+"."+$i(n))):((n=i+1)<c&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-c)>0&&(i+1===c&&(s+="."),s+=$i(n))),e.s<0?"-"+s:s}function xC(e,t){if(e.length>t)return e.length=t,!0}function NT(e){var t,r,n;function i(s){var c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,s instanceof i){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Ro+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return _C(c,s.toString())}else if(typeof s!="string")throw Error(Ro+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,H8.test(s))_C(c,s);else throw Error(Ro+s)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=NT,i.config=i.set=F8,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function F8(e){if(!e||typeof e!="object")throw Error(Fn+"Object expected");var t,r,n,i=["precision",1,ol,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(sl(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Ro+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ro+r+": "+n);return this}var B0=NT($8);yn=new B0(1);const mt=B0;var K8=e=>e,kT={},DT=e=>e===kT,wC=e=>function t(){return arguments.length===0||arguments.length===1&&DT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},TT=(e,t)=>e===1?t:wC(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.filter(c=>c!==kT).length;return s>=e?t(...n):TT(e-s,wC(function(){for(var c=arguments.length,u=new Array(c),m=0;m<c;m++)u[m]=arguments[m];var h=n.map(g=>DT(g)?u.shift():g);return t(...h,...u)}))}),Y8=e=>TT(e.length,e),pb=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},G8=Y8((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),V8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return K8;var i=r.reverse(),s=i[0],c=i.slice(1);return function(){return c.reduce((u,m)=>m(u),s(...arguments))}};function PT(e){var t;return e===0?t=1:t=Math.floor(new mt(e).abs().log(10).toNumber())+1,t}function MT(e,t,r){for(var n=new mt(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var RT=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},qT=(e,t,r)=>{if(e.lte(0))return new mt(0);var n=PT(e.toNumber()),i=new mt(10).pow(n),s=e.div(i),c=n!==1?.05:.1,u=new mt(Math.ceil(s.div(c).toNumber())).add(r).mul(c),m=u.mul(i);return t?new mt(m.toNumber()):new mt(Math.ceil(m.toNumber()))},W8=(e,t,r)=>{var n=new mt(1),i=new mt(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new mt(10).pow(PT(e)-1),i=new mt(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new mt(Math.floor(e)))}else e===0?i=new mt(Math.floor((t-1)/2)):r||(i=new mt(Math.floor(e)));var c=Math.floor((t-1)/2),u=V8(G8(m=>i.add(new mt(m-c).mul(n)).toNumber()),pb);return u(0,t)},LT=function(t,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new mt(0),tickMin:new mt(0),tickMax:new mt(0)};var c=qT(new mt(r).sub(t).div(n-1),i,s),u;t<=0&&r>=0?u=new mt(0):(u=new mt(t).add(r).div(2),u=u.sub(new mt(u).mod(c)));var m=Math.ceil(u.sub(t).div(c).toNumber()),h=Math.ceil(new mt(r).sub(u).div(c).toNumber()),g=m+h+1;return g>n?LT(t,r,n,i,s+1):(g<n&&(h=r>0?h+(n-g):h,m=r>0?m:m+(n-g)),{step:c,tickMin:u.sub(new mt(m).mul(c)),tickMax:u.add(new mt(h).mul(c))})},X8=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,m]=RT([r,n]);if(u===-1/0||m===1/0){var h=m===1/0?[u,...pb(0,i-1).map(()=>1/0)]:[...pb(0,i-1).map(()=>-1/0),m];return r>n?h.reverse():h}if(u===m)return W8(u,i,s);var{step:g,tickMin:p,tickMax:_}=LT(u,m,c,s,0),x=MT(p,_.add(new mt(.1).mul(g)),g);return r>n?x.reverse():x},Z8=function(t,r){var[n,i]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=RT([n,i]);if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var m=Math.max(r,2),h=qT(new mt(u).sub(c).div(m-1),s,0),g=[...MT(new mt(c),new mt(u),h),u];return s===!1&&(g=g.map(p=>Math.round(p))),n>i?g.reverse():g},zT=e=>e.rootProps.maxBarSize,Q8=e=>e.rootProps.barGap,IT=e=>e.rootProps.barCategoryGap,J8=e=>e.rootProps.barSize,su=e=>e.rootProps.stackOffset,UT=e=>e.rootProps.reverseStackOrder,$0=e=>e.options.chartName,H0=e=>e.rootProps.syncId,BT=e=>e.rootProps.syncMethod,F0=e=>e.options.eventEmitter,EQ=e=>e.rootProps.baseValue,sr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Ya={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},vn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Xm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},eH={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ya.angleAxisId,includeHidden:!1,name:void 0,reversed:Ya.reversed,scale:Ya.scale,tick:Ya.tick,tickCount:void 0,ticks:void 0,type:Ya.type,unit:void 0},tH={allowDataOverflow:vn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:vn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:vn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:vn.scale,tick:vn.tick,tickCount:vn.tickCount,ticks:void 0,type:vn.type,unit:void 0},rH={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ya.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ya.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ya.scale,tick:Ya.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},nH={allowDataOverflow:vn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:vn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:vn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:vn.scale,tick:vn.tick,tickCount:vn.tickCount,ticks:void 0,type:"category",unit:void 0},K0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?rH:eH,Y0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?nH:tH,Zm=e=>e.polarOptions,G0=X([li,ci,mr],ID),$T=X([Zm,G0],(e,t)=>{if(e!=null)return Rr(e.innerRadius,t,0)}),HT=X([Zm,G0],(e,t)=>{if(e!=null)return Rr(e.outerRadius,t,t*.8)}),aH=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},FT=X([Zm],aH);X([K0,FT],Xm);var KT=X([G0,$T,HT],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});X([Y0,KT],Xm);var YT=X([tt,Zm,$T,HT,li,ci],(e,t,r,n,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:u,startAngle:m,endAngle:h}=t;return{cx:Rr(c,i,i/2),cy:Rr(u,s,s/2),innerRadius:r,outerRadius:n,startAngle:m,endAngle:h,clockWise:!1}}}),Lt=(e,t)=>t,lu=(e,t,r)=>r;function V0(e){return e?.id}function GT(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=r,c=new Map;return e.forEach(u=>{var m,h=(m=u.data)!==null&&m!==void 0?m:n;if(!(h==null||h.length===0)){var g=V0(u);h.forEach((p,_)=>{var x=s==null||i?_:String(bt(p,s,null)),w=bt(p,u.dataKey,0),j;c.has(x)?j=c.get(x):j={},Object.assign(j,{[g]:w}),c.set(x,j)})}}),Array.from(c.values())}function Qm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Jm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function eh(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function iH(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var pr=e=>{var t=tt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ll=e=>e.tooltip.settings.axisId;function jC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(r),!0).forEach(function(n){oH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oH(e,t,r){return(t=sH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sH(e){var t=lH(e,"string");return typeof t=="symbol"?t:t+""}function lH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gb=[0,"auto"],yr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},VT=(e,t)=>e.cartesianAxis.xAxis[t],fi=(e,t)=>{var r=VT(e,t);return r??yr},br={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:gb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Jc},WT=(e,t)=>e.cartesianAxis.yAxis[t],mi=(e,t)=>{var r=WT(e,t);return r??br},cH={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},W0=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??cH},Ut=(e,t,r)=>{switch(t){case"xAxis":return fi(e,r);case"yAxis":return mi(e,r);case"zAxis":return W0(e,r);case"angleAxis":return K0(e,r);case"radiusAxis":return Y0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},uH=(e,t,r)=>{switch(t){case"xAxis":return fi(e,r);case"yAxis":return mi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},cu=(e,t,r)=>{switch(t){case"xAxis":return fi(e,r);case"yAxis":return mi(e,r);case"angleAxis":return K0(e,r);case"radiusAxis":return Y0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},XT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function X0(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var th=e=>e.graphicalItems.cartesianItems,dH=X([Lt,lu],X0),Z0=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),uu=X([th,Ut,dH],Z0,{memoizeOptions:{resultEqualityCheck:eh}}),ZT=X([uu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Qm)),QT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),fH=X([uu],QT),Q0=e=>e.map(t=>t.data).filter(Boolean).flat(1),mH=X([uu],Q0,{memoizeOptions:{resultEqualityCheck:eh}}),J0=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},e_=X([mH,I0],J0),t_=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:bt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:bt(i,n)}))):e.map(n=>({value:n})),rh=X([e_,Ut,uu],t_);function JT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function pf(e){if(wa(e)||e instanceof Date){var t=Number(e);if(It(t))return t}}function SC(e){if(Array.isArray(e)){var t=[pf(e[0]),pf(e[1])];return Wi(t)?t:void 0}var r=pf(e);if(r!=null)return[r,r]}function ai(e){return e.map(pf).filter(NI)}function hH(e,t,r){return!r||typeof t!="number"||ia(t)?[]:r.length?ai(r.flatMap(n=>{var i=bt(e,n.dataKey),s,c;if(Array.isArray(i)?[s,c]=i:s=c=i,!(!It(s)||!It(c)))return[t-s,t+c]})):[]}var gr=e=>{var t=pr(e),r=ll(e);return cu(e,t,r)},du=X([gr],e=>e?.dataKey),pH=X([ZT,I0,gr],GT),eP=(e,t,r,n)=>{var i={},s=t.reduce((c,u)=>{if(u.stackId==null)return c;var m=c[u.stackId];return m==null&&(m=[]),m.push(u),c[u.stackId]=m,c},i);return Object.fromEntries(Object.entries(s).map(c=>{var[u,m]=c,h=n?[...m].reverse():m,g=h.map(V0);return[u,{stackedData:V4(e,g,r),graphicalItems:h}]}))},vb=X([pH,ZT,su,UT],eP),tP=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var c=J4(e,i,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},gH=X([Ut],e=>e.allowDataOverflow),r_=e=>{var t;if(e==null||!("domain"in e))return gb;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=ai(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:gb},n_=X([Ut],r_),a_=X([n_,gH],ST),vH=X([vb,di,Lt,a_],tP,{memoizeOptions:{resultEqualityCheck:Jm}}),nh=e=>e.errorBars,yH=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>JT(r,n)),rm=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),c=Math.min(...s),u=Math.max(...s);return[c,u]}},i_=(e,t,r,n,i)=>{var s,c;if(r.length>0&&e.forEach(u=>{r.forEach(m=>{var h,g,p=(h=n[m.id])===null||h===void 0?void 0:h.filter(O=>JT(i,O)),_=bt(u,(g=t.dataKey)!==null&&g!==void 0?g:m.dataKey),x=hH(u,_,p);if(x.length>=2){var w=Math.min(...x),j=Math.max(...x);(s==null||w<s)&&(s=w),(c==null||j>c)&&(c=j)}var S=SC(_);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),c=c==null?S[1]:Math.max(c,S[1]))})}),t?.dataKey!=null&&e.forEach(u=>{var m=SC(bt(u,t.dataKey));m!=null&&(s=s==null?m[0]:Math.min(s,m[0]),c=c==null?m[1]:Math.max(c,m[1]))}),It(s)&&It(c))return[s,c]},bH=X([e_,Ut,fH,nh,Lt],i_,{memoizeOptions:{resultEqualityCheck:Jm}});function _H(e){var{value:t}=e;if(wa(t)||t instanceof Date)return t}var xH=(e,t,r)=>{var n=e.map(_H).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&vk(n))?HD(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},rP=e=>e.referenceElements.dots,cl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),wH=X([rP,Lt,lu],cl),nP=e=>e.referenceElements.areas,jH=X([nP,Lt,lu],cl),aP=e=>e.referenceElements.lines,SH=X([aP,Lt,lu],cl),iP=(e,t)=>{if(e!=null){var r=ai(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},EH=X(wH,Lt,iP),oP=(e,t)=>{if(e!=null){var r=ai(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},OH=X([jH,Lt],oP);function CH(e){var t;if(e.x!=null)return ai([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ai(r)}function AH(e){var t;if(e.y!=null)return ai([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ai(r)}var sP=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?CH(n):AH(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},NH=X([SH,Lt],sP),kH=X(EH,NH,OH,(e,t,r)=>rm(e,r,t)),o_=(e,t,r,n,i,s,c,u)=>{if(r!=null)return r;var m=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",h=m?rm(n,s,i):rm(s,i);return B8(t,h,e.allowDataOverflow)},DH=X([Ut,n_,a_,vH,bH,kH,tt,Lt],o_,{memoizeOptions:{resultEqualityCheck:Jm}}),TH=[0,1],s_=(e,t,r,n,i,s,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:u,type:m}=e,h=eo(t,s);if(h&&u==null){var g;return HD(0,(g=r?.length)!==null&&g!==void 0?g:0)}return m==="category"?xH(n,e,h):i==="expand"?TH:c}},l_=X([Ut,tt,e_,rh,su,Lt,DH],s_),lP=(e,t,r,n,i)=>{if(e!=null){var{scale:s,type:c}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Wc(s));return u in Sc?u:"point"}}},ul=X([Ut,tt,XT,$0,Lt],lP);function PH(e){if(e!=null){if(e in Sc)return Sc[e]();var t="scale".concat(Wc(e));if(t in Sc)return Sc[t]()}}function c_(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=PH(t);if(i!=null){var s=i.domain(r).range(n);return H4(s),s}}}var u_=(e,t,r)=>{var n=r_(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Wi(e))return X8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Wi(e))return Z8(e,t.tickCount,t.allowDecimals)}},d_=X([l_,cu,ul],u_),f_=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Wi(t)&&Array.isArray(r)&&r.length>0){var i=t[0],s=r[0],c=t[1],u=r[r.length-1];return[Math.min(i,s),Math.max(c,u)]}return t},MH=X([Ut,l_,d_,Lt],f_),RH=X(rh,Ut,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ai(e.map(p=>p.value))).sort((p,_)=>p-_),i=n[0],s=n[n.length-1];if(i==null||s==null)return 1/0;var c=s-i;if(c===0)return 1/0;for(var u=0;u<n.length-1;u++){var m=n[u],h=n[u+1];if(!(m==null||h==null)){var g=h-m;r=Math.min(r,g)}}return r/c}}),cP=X(RH,tt,IT,mr,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!It(e))return 0;var s=t==="vertical"?n.height:n.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var c=Rr(r,e*s),u=e*s/2;return u-c-(u-c)/s*c}return 0}),qH=(e,t,r)=>{var n=fi(e,t);return n==null||typeof n.padding!="string"?0:cP(e,"xAxis",t,r,n.padding)},LH=(e,t,r)=>{var n=mi(e,t);return n==null||typeof n.padding!="string"?0:cP(e,"yAxis",t,r,n.padding)},zH=X(fi,qH,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),IH=X(mi,LH,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),UH=X([mr,zH,qm,Rm,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),BH=X([mr,tt,IH,qm,Rm,(e,t,r)=>r],(e,t,r,n,i,s)=>{var{padding:c}=i;return s?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),fu=(e,t,r,n)=>{var i;switch(t){case"xAxis":return UH(e,r,n);case"yAxis":return BH(e,r,n);case"zAxis":return(i=W0(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return FT(e);case"radiusAxis":return KT(e,r);default:return}},uP=X([Ut,fu],Xm),ah=X([Ut,ul,MH,uP],c_);X([uu,nh,Lt],yH);function dP(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var ih=(e,t)=>t,oh=(e,t,r)=>r,$H=X(Pm,ih,oh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(dP)),HH=X(Mm,ih,oh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(dP)),fP=(e,t)=>({width:e.width,height:t.height}),FH=(e,t)=>{var r=typeof t.width=="number"?t.width:Jc;return{width:r,height:e.height}},mP=X(mr,fi,fP),KH=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},YH=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},GH=X(ci,mr,$H,ih,oh,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=fP(t,u);c==null&&(c=KH(t,n,e));var h=n==="top"&&!i||n==="bottom"&&i;s[u.id]=c-Number(h)*m.height,c+=(h?-1:1)*m.height}),s}),VH=X(li,mr,HH,ih,oh,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=FH(t,u);c==null&&(c=YH(t,n,e));var h=n==="left"&&!i||n==="right"&&i;s[u.id]=c-Number(h)*m.width,c+=(h?-1:1)*m.width}),s}),WH=(e,t)=>{var r=fi(e,t);if(r!=null)return GH(e,r.orientation,r.mirror)},XH=X([mr,fi,WH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),ZH=(e,t)=>{var r=mi(e,t);if(r!=null)return VH(e,r.orientation,r.mirror)},QH=X([mr,mi,ZH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),hP=X(mr,mi,(e,t)=>{var r=typeof t.width=="number"?t.width:Jc;return{width:r,height:e.height}}),EC=(e,t,r)=>{switch(t){case"xAxis":return mP(e,r).width;case"yAxis":return hP(e,r).height;default:return}},pP=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:c}=r,u=eo(e,n),m=t.map(h=>h.value);if(c&&u&&s==="category"&&i&&vk(m))return m}},m_=X([tt,rh,Ut,Lt],pP),gP=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,c=eo(e,n);if(c&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},h_=X([tt,rh,cu,Lt],gP),OC=X([tt,uH,ul,ah,m_,h_,fu,d_,Lt],(e,t,r,n,i,s,c,u,m)=>{if(t!=null){var h=eo(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:c,realScaleType:r,scale:n}}}),JH=(e,t,r,n,i,s,c,u,m)=>{if(!(t==null||n==null)){var h=eo(e,m),{type:g,ticks:p,tickCount:_}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=g==="category"&&n.bandwidth?n.bandwidth()/x:0;w=m==="angleAxis"&&s!=null&&s.length>=2?xr(s[0]-s[1])*2*w:w;var j=p||i;if(j){var S=j.map((O,C)=>{var A=c?c.indexOf(O):O;return{index:C,coordinate:n(A)+w,value:O,offset:w}});return S.filter(O=>It(O.coordinate))}return h&&u?u.map((O,C)=>({coordinate:n(O)+w,value:O,index:C,offset:w})).filter(O=>It(O.coordinate)):n.ticks?n.ticks(_).map(O=>({coordinate:n(O)+w,value:O,offset:w})):n.domain().map((O,C)=>({coordinate:n(O)+w,value:c?c[O]:O,index:C,offset:w}))}},vP=X([tt,cu,ul,ah,d_,fu,m_,h_,Lt],JH),e9=(e,t,r,n,i,s,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=eo(e,c),{tickCount:m}=t,h=0;return h=c==="angleAxis"&&n?.length>=2?xr(n[0]-n[1])*2*h:h,u&&s?s.map((g,p)=>({coordinate:r(g)+h,value:g,index:p,offset:h})):r.ticks?r.ticks(m).map(g=>({coordinate:r(g)+h,value:g,offset:h})):r.domain().map((g,p)=>({coordinate:r(g)+h,value:i?i[g]:g,index:p,offset:h}))}},Xi=X([tt,cu,ah,fu,m_,h_,Lt],e9),Zi=X(Ut,ah,(e,t)=>{if(!(e==null||t==null))return tm(tm({},e),{},{scale:t})}),t9=X([Ut,ul,l_,uP],c_);X((e,t,r)=>W0(e,r),t9,(e,t)=>{if(!(e==null||t==null))return tm(tm({},e),{},{scale:t})});var r9=X([tt,Pm,Mm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),yP=e=>e.options.defaultTooltipEventType,bP=e=>e.options.validateTooltipEventTypes;function _P(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function p_(e,t){var r=yP(e),n=bP(e);return _P(t,r,n)}function n9(e){return De(t=>p_(t,e))}var xP=(e,t)=>{var r,n=Number(t);if(!(ia(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},a9=e=>e.tooltip.settings,Fi={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},i9={itemInteraction:{click:Fi,hover:Fi},axisInteraction:{click:Fi,hover:Fi},keyboardInteraction:Fi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},wP=rn({name:"tooltip",initialState:i9,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Dt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=aa(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Dt()},removeTooltipEntrySettings:{reducer(e,t){var r=aa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Dt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:o9,replaceTooltipEntrySettings:s9,removeTooltipEntrySettings:l9,setTooltipSettingsState:c9,setActiveMouseOverItemIndex:jP,mouseLeaveItem:u9,mouseLeaveChart:SP,setActiveClickItemIndex:d9,setMouseOverAxisIndex:EP,setMouseClickAxisIndex:f9,setSyncInteraction:yb,setKeyboardInteraction:bb}=wP.actions,m9=wP.reducer;function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(n){h9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h9(e,t,r){return(t=p9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p9(e){var t=g9(e,"string");return typeof t=="symbol"?t:t+""}function g9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v9(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function y9(e){return e.index!=null}var OP=(e,t,r,n)=>{if(t==null)return Fi;var i=v9(e,t,r);if(i==null)return Fi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(y9(i)){if(s)return Qd(Qd({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Qd(Qd({},Fi),{},{coordinate:i.coordinate})};function b9(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function _9(e,t){var r=b9(e),n=t[0],i=t[1];if(r===void 0)return!1;var s=Math.min(n,i),c=Math.max(n,i);return r>=s&&r<=c}function x9(e,t,r){if(r==null||t==null)return!0;var n=bt(e,t);return n==null||!Wi(r)?!0:_9(n,r)}var g_=(e,t,r,n)=>{var i=e?.index;if(i==null)return null;var s=Number(i);if(!It(s))return i;var c=0,u=1/0;t.length>0&&(u=t.length-1);var m=Math.max(c,Math.min(s,u)),h=t[m];return h==null||x9(h,r,n)?String(m):null},CP=(e,t,r,n,i,s,c,u)=>{if(!(s==null||u==null)){var m=c[0],h=m==null?void 0:u(m.positions,s);if(h!=null)return h;var g=i?.[Number(s)];if(g)switch(r){case"horizontal":return{x:g.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:g.coordinate}}}},AP=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},mu=e=>e.options.tooltipPayloadSearcher,dl=e=>e.tooltip;function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function NC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(r),!0).forEach(function(n){w9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w9(e,t,r){return(t=j9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j9(e){var t=S9(e,"string");return typeof t=="symbol"?t:t+""}function S9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E9(e,t){return e??t}var NP=(e,t,r,n,i,s,c)=>{if(!(t==null||s==null)){var{chartData:u,computedData:m,dataStartIndex:h,dataEndIndex:g}=r,p=[];return e.reduce((_,x)=>{var w,{dataDefinedOnItem:j,settings:S}=x,O=E9(j,u),C=Array.isArray(O)?uD(O,h,g):O,A=(w=S?.dataKey)!==null&&w!==void 0?w:n,k=S?.nameKey,D;if(n&&Array.isArray(C)&&!Array.isArray(C[0])&&c==="axis"?D=yk(C,n,i):D=s(C,t,m,k),Array.isArray(D))D.forEach(z=>{var K=NC(NC({},S),{},{name:z.name,unit:z.unit,color:void 0,fill:void 0});_.push(ME({tooltipEntrySettings:K,dataKey:z.dataKey,payload:z.payload,value:bt(z.payload,z.dataKey),name:z.name}))});else{var M;_.push(ME({tooltipEntrySettings:S,dataKey:A,payload:D,value:bt(D,A),name:(M=bt(D,k))!==null&&M!==void 0?M:S?.name}))}return _},p)}},v_=X([gr,tt,XT,$0,pr],lP),O9=X([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),C9=X([pr,ll],X0),fl=X([O9,gr,C9],Z0,{memoizeOptions:{resultEqualityCheck:eh}}),A9=X([fl],e=>e.filter(Qm)),N9=X([fl],Q0,{memoizeOptions:{resultEqualityCheck:eh}}),ml=X([N9,di],J0),k9=X([A9,di,gr],GT),y_=X([ml,gr,fl],t_),kP=X([gr],r_),D9=X([gr],e=>e.allowDataOverflow),DP=X([kP,D9],ST),T9=X([fl],e=>e.filter(Qm)),P9=X([k9,T9,su,UT],eP),M9=X([P9,di,pr,DP],tP),R9=X([fl],QT),q9=X([ml,gr,R9,nh,pr],i_,{memoizeOptions:{resultEqualityCheck:Jm}}),L9=X([rP,pr,ll],cl),z9=X([L9,pr],iP),I9=X([nP,pr,ll],cl),U9=X([I9,pr],oP),B9=X([aP,pr,ll],cl),$9=X([B9,pr],sP),H9=X([z9,$9,U9],rm),F9=X([gr,kP,DP,M9,q9,H9,tt,pr],o_),hu=X([gr,tt,ml,y_,su,pr,F9],s_),K9=X([hu,gr,v_],u_),Y9=X([gr,hu,K9,pr],f_),TP=e=>{var t=pr(e),r=ll(e),n=!1;return fu(e,t,r,n)},PP=X([gr,TP],Xm),MP=X([gr,v_,Y9,PP],c_),G9=X([tt,y_,gr,pr],pP),V9=X([tt,y_,gr,pr],gP),W9=(e,t,r,n,i,s,c,u)=>{if(t){var{type:m}=t,h=eo(e,u);if(n){var g=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=m==="category"&&n.bandwidth?n.bandwidth()/g:0;return p=u==="angleAxis"&&i!=null&&i?.length>=2?xr(i[0]-i[1])*2*p:p,h&&c?c.map((_,x)=>({coordinate:n(_)+p,value:_,index:x,offset:p})):n.domain().map((_,x)=>({coordinate:n(_)+p,value:s?s[_]:_,index:x,offset:p}))}}},hi=X([tt,gr,v_,MP,TP,G9,V9,pr],W9),b_=X([yP,bP,a9],(e,t,r)=>_P(r.shared,e,t)),RP=e=>e.tooltip.settings.trigger,__=e=>e.tooltip.settings.defaultIndex,pu=X([dl,b_,RP,__],OP),Qi=X([pu,ml,du,hu],g_),qP=X([hi,Qi],xP),x_=X([pu],e=>{if(e)return e.dataKey}),X9=X([pu],e=>{if(e)return e.graphicalItemId}),LP=X([dl,b_,RP,__],AP),Z9=X([li,ci,tt,mr,hi,__,LP,mu],CP),Q9=X([pu,Z9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),J9=X([pu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),eF=X([LP,Qi,di,du,qP,mu,b_],NP),tF=X([eF],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function DC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(n){rF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rF(e,t,r){return(t=nF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nF(e){var t=aF(e,"string");return typeof t=="symbol"?t:t+""}function aF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iF=()=>De(gr),oF=()=>{var e=iF(),t=De(hi),r=De(MP);return Ws(!e||!r?void 0:DC(DC({},e),{},{scale:r}),t)};function TC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Is(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(r),!0).forEach(function(n){sF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sF(e,t,r){return(t=lF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lF(e){var t=cF(e,"string");return typeof t=="symbol"?t:t+""}function cF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uF=(e,t,r,n)=>{var i=t.find(s=>s&&s.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},dF=(e,t,r,n)=>{var i=t.find(h=>h&&h.index===r);if(i){if(e==="centric"){var s=i.coordinate,{radius:c}=n;return Is(Is(Is({},n),or(n.cx,n.cy,c,s)),{},{angle:s,radius:c})}var u=i.coordinate,{angle:m}=n;return Is(Is(Is({},n),or(n.cx,n.cy,u,m)),{},{angle:m,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function fF(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var zP=(e,t,r,n,i)=>{var s,c=(s=t?.length)!==null&&s!==void 0?s:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var m,h,g,p,_,x=u>0?(m=r[u-1])===null||m===void 0?void 0:m.coordinate:(h=r[c-1])===null||h===void 0?void 0:h.coordinate,w=(g=r[u])===null||g===void 0?void 0:g.coordinate,j=u>=c-1?(p=r[0])===null||p===void 0?void 0:p.coordinate:(_=r[u+1])===null||_===void 0?void 0:_.coordinate,S=void 0;if(!(x==null||w==null||j==null))if(xr(w-x)!==xr(j-w)){var O=[];if(xr(j-w)===xr(i[1]-i[0])){S=j;var C=w+i[1]-i[0];O[0]=Math.min(C,(C+x)/2),O[1]=Math.max(C,(C+x)/2)}else{S=x;var A=j+i[1]-i[0];O[0]=Math.min(w,(A+w)/2),O[1]=Math.max(w,(A+w)/2)}var k=[Math.min(w,(S+w)/2),Math.max(w,(S+w)/2)];if(e>k[0]&&e<=k[1]||e>=O[0]&&e<=O[1]){var D;return(D=r[u])===null||D===void 0?void 0:D.index}}else{var M=Math.min(x,j),z=Math.max(x,j);if(e>(M+w)/2&&e<=(z+w)/2){var K;return(K=r[u])===null||K===void 0?void 0:K.index}}}else if(t)for(var Q=0;Q<c;Q++){var ne=t[Q];if(ne!=null){var G=t[Q+1],I=t[Q-1];if(Q===0&&G!=null&&e<=(ne.coordinate+G.coordinate)/2||Q===c-1&&I!=null&&e>(ne.coordinate+I.coordinate)/2||Q>0&&Q<c-1&&I!=null&&G!=null&&e>(ne.coordinate+I.coordinate)/2&&e<=(ne.coordinate+G.coordinate)/2)return ne.index}}return-1},mF=()=>De($0),w_=(e,t)=>t,IP=(e,t,r)=>r,j_=(e,t,r,n)=>n,hF=X(hi,e=>jm(e,t=>t.coordinate)),S_=X([dl,w_,IP,j_],OP),E_=X([S_,ml,du,hu],g_),pF=(e,t,r)=>{if(t!=null){var n=dl(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},UP=X([dl,w_,IP,j_],AP),nm=X([li,ci,tt,mr,hi,j_,UP,mu],CP),gF=X([S_,nm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),BP=X([hi,E_],xP),vF=X([UP,E_,di,du,BP,mu,w_],NP),yF=X([S_,E_],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),bF=(e,t,r,n,i,s,c)=>{if(!(!e||!r||!n||!i)&&fF(e,c)){var u=eU(e,t),m=zP(u,s,i,r,n),h=uF(t,i,m,e);return{activeIndex:String(m),activeCoordinate:h}}},_F=(e,t,r,n,i,s,c)=>{if(!(!e||!n||!i||!s||!r)){var u=rB(e,r);if(u){var m=tU(u,t),h=zP(m,c,s,n,i),g=dF(t,s,h,u);return{activeIndex:String(h),activeCoordinate:g}}}},xF=(e,t,r,n,i,s,c,u)=>{if(!(!e||!t||!n||!i||!s))return t==="horizontal"||t==="vertical"?bF(e,t,n,i,s,c,u):_F(e,t,r,n,i,s,c)},wF=X(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),jF=X(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(sr)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:iH}});function PC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(r),!0).forEach(function(n){SF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SF(e,t,r){return(t=EF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EF(e){var t=OF(e,"string");return typeof t=="symbol"?t:t+""}function OF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CF={},AF={zIndexMap:Object.values(sr).reduce((e,t)=>MC(MC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),CF)},NF=new Set(Object.values(sr));function kF(e){return NF.has(e)}var $P=rn({name:"zIndex",initialState:AF,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Dt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!kF(r)&&delete e.zIndexMap[r])},prepare:Dt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Dt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Dt()}}}),{registerZIndexPortal:DF,unregisterZIndexPortal:TF,registerZIndexPortalElement:PF,unregisterZIndexPortalElement:MF}=$P.actions,RF=$P.reducer;function nn(e){var{zIndex:t,children:r}=e,n=DU(),i=n&&t!==void 0&&t!==0,s=qr(),c=qt();y.useLayoutEffect(()=>i?(c(DF({zIndex:t})),()=>{c(TF({zIndex:t}))}):Xc,[c,t,i]);var u=De(m=>wF(m,t,s));return i?u?zN.createPortal(r,u):null:r}function _b(){return _b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_b.apply(null,arguments)}function RC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RC(Object(r),!0).forEach(function(n){qF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qF(e,t,r){return(t=LF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LF(e){var t=zF(e,"string");return typeof t=="symbol"?t:t+""}function zF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IF(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function UF(e){var t,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:c,layout:u,cursor:m,tooltipEventType:h,chartName:g}=e,p=r,_=n,x=i;if(!m||!p||g!=="ScatterChart"&&h!=="axis")return null;var w,j,S;if(g==="ScatterChart")w=p,j=g6,S=sr.cursorLine;else if(g==="BarChart")w=v6(u,p,s,c),j=zD,S=sr.cursorRectangle;else if(u==="radial"&&xk(p)){var{cx:O,cy:C,radius:A,startAngle:k,endAngle:D}=UD(p);w={cx:O,cy:C,startAngle:k,endAngle:D,innerRadius:A,outerRadius:A},j=$D,S=sr.cursorLine}else w={points:oB(u,p,s)},j=p0,S=sr.cursorLine;var M=typeof m=="object"&&"className"in m?m.className:void 0,z=Jd(Jd(Jd(Jd({stroke:"#ccc",pointerEvents:"none"},s),w),zo(m)),{},{payload:_,payloadIndex:x,className:ct("recharts-tooltip-cursor",M)});return y.createElement(nn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},y.createElement(IF,{cursor:m,cursorComp:j,cursorProps:z}))}function BF(e){var t=oF(),r=_D(),n=Xo(),i=mF();return t==null||r==null||n==null||i==null?null:y.createElement(UF,_b({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var HP=y.createContext(null),$F=()=>y.useContext(HP),Jv={exports:{}},qC;function HF(){return qC||(qC=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(m,h,g){this.fn=m,this.context=h,this.once=g||!1}function s(m,h,g,p,_){if(typeof g!="function")throw new TypeError("The listener must be a function");var x=new i(g,p||m,_),w=r?r+h:h;return m._events[w]?m._events[w].fn?m._events[w]=[m._events[w],x]:m._events[w].push(x):(m._events[w]=x,m._eventsCount++),m}function c(m,h){--m._eventsCount===0?m._events=new n:delete m._events[h]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],g,p;if(this._eventsCount===0)return h;for(p in g=this._events)t.call(g,p)&&h.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(g)):h},u.prototype.listeners=function(h){var g=r?r+h:h,p=this._events[g];if(!p)return[];if(p.fn)return[p.fn];for(var _=0,x=p.length,w=new Array(x);_<x;_++)w[_]=p[_].fn;return w},u.prototype.listenerCount=function(h){var g=r?r+h:h,p=this._events[g];return p?p.fn?1:p.length:0},u.prototype.emit=function(h,g,p,_,x,w){var j=r?r+h:h;if(!this._events[j])return!1;var S=this._events[j],O=arguments.length,C,A;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),O){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,g),!0;case 3:return S.fn.call(S.context,g,p),!0;case 4:return S.fn.call(S.context,g,p,_),!0;case 5:return S.fn.call(S.context,g,p,_,x),!0;case 6:return S.fn.call(S.context,g,p,_,x,w),!0}for(A=1,C=new Array(O-1);A<O;A++)C[A-1]=arguments[A];S.fn.apply(S.context,C)}else{var k=S.length,D;for(A=0;A<k;A++)switch(S[A].once&&this.removeListener(h,S[A].fn,void 0,!0),O){case 1:S[A].fn.call(S[A].context);break;case 2:S[A].fn.call(S[A].context,g);break;case 3:S[A].fn.call(S[A].context,g,p);break;case 4:S[A].fn.call(S[A].context,g,p,_);break;default:if(!C)for(D=1,C=new Array(O-1);D<O;D++)C[D-1]=arguments[D];S[A].fn.apply(S[A].context,C)}}return!0},u.prototype.on=function(h,g,p){return s(this,h,g,p,!1)},u.prototype.once=function(h,g,p){return s(this,h,g,p,!0)},u.prototype.removeListener=function(h,g,p,_){var x=r?r+h:h;if(!this._events[x])return this;if(!g)return c(this,x),this;var w=this._events[x];if(w.fn)w.fn===g&&(!_||w.once)&&(!p||w.context===p)&&c(this,x);else{for(var j=0,S=[],O=w.length;j<O;j++)(w[j].fn!==g||_&&!w[j].once||p&&w[j].context!==p)&&S.push(w[j]);S.length?this._events[x]=S.length===1?S[0]:S:c(this,x)}return this},u.prototype.removeAllListeners=function(h){var g;return h?(g=r?r+h:h,this._events[g]&&c(this,g)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Jv)),Jv.exports}var FF=HF();const KF=oi(FF);var $c=new KF,xb="recharts.syncEvent.tooltip",LC="recharts.syncEvent.brush";function O_(e,t){if(t){var r=Number.parseInt(t,10);if(!ia(r))return e?.[r]}}var YF={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},FP=rn({name:"options",initialState:YF,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),GF=FP.reducer,{createEventEmitter:VF}=FP.actions;function WF(e){return e.tooltip.syncInteraction}var XF={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},KP=rn({name:"chartData",initialState:XF,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:zC,setDataStartEndIndexes:ZF,setComputedData:OQ}=KP.actions,QF=KP.reducer,JF=["x","y"];function IC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Us(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IC(Object(r),!0).forEach(function(n){e7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function e7(e,t,r){return(t=t7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t7(e){var t=r7(e,"string");return typeof t=="symbol"?t:t+""}function r7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n7(e,t){if(e==null)return{};var r,n,i=a7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function a7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function i7(){var e=De(H0),t=De(F0),r=qt(),n=De(BT),i=De(hi),s=Xo(),c=Lm(),u=De(m=>m.rootProps.className);y.useEffect(()=>{if(e==null)return Xc;var m=(h,g,p)=>{if(t!==p&&e===h){if(n==="index"){var _;if(c&&g!==null&&g!==void 0&&(_=g.payload)!==null&&_!==void 0&&_.coordinate&&g.payload.sourceViewBox){var x=g.payload.coordinate,{x:w,y:j}=x,S=n7(x,JF),{x:O,y:C,width:A,height:k}=g.payload.sourceViewBox,D=Us(Us({},S),{},{x:c.x+(A?(w-O)/A:0)*c.width,y:c.y+(k?(j-C)/k:0)*c.height});r(Us(Us({},g),{},{payload:Us(Us({},g.payload),{},{coordinate:D})}))}else r(g);return}if(i!=null){var M;if(typeof n=="function"){var z={activeTooltipIndex:g.payload.index==null?void 0:Number(g.payload.index),isTooltipActive:g.payload.active,activeIndex:g.payload.index==null?void 0:Number(g.payload.index),activeLabel:g.payload.label,activeDataKey:g.payload.dataKey,activeCoordinate:g.payload.coordinate},K=n(i,z);M=i[K]}else n==="value"&&(M=i.find(R=>String(R.value)===g.payload.label));var{coordinate:Q}=g.payload;if(M==null||g.payload.active===!1||Q==null||c==null){r(yb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:ne,y:G}=Q,I=Math.min(ne,c.x+c.width),ie=Math.min(G,c.y+c.height),pe={x:s==="horizontal"?M.coordinate:I,y:s==="horizontal"?ie:M.coordinate},q=yb({active:g.payload.active,coordinate:pe,dataKey:g.payload.dataKey,index:String(M.index),label:g.payload.label,sourceViewBox:g.payload.sourceViewBox,graphicalItemId:g.payload.graphicalItemId});r(q)}}};return $c.on(xb,m),()=>{$c.off(xb,m)}},[u,r,t,e,n,i,s,c])}function o7(){var e=De(H0),t=De(F0),r=qt();y.useEffect(()=>{if(e==null)return Xc;var n=(i,s,c)=>{t!==c&&e===i&&r(ZF(s))};return $c.on(LC,n),()=>{$c.off(LC,n)}},[r,t,e])}function s7(){var e=qt();y.useEffect(()=>{e(VF())},[e]),i7(),o7()}function l7(e,t,r,n,i,s){var c=De(x=>pF(x,e,t)),u=De(F0),m=De(H0),h=De(BT),g=De(WF),p=g?.active,_=Lm();y.useEffect(()=>{if(!p&&m!=null&&u!=null){var x=yb({active:s,coordinate:r,dataKey:c,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:_,graphicalItemId:void 0});$c.emit(xb,m,x,u)}},[p,r,c,i,n,u,m,h,s,_])}function UC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function BC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(r),!0).forEach(function(n){c7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c7(e,t,r){return(t=u7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u7(e){var t=d7(e,"string");return typeof t=="symbol"?t:t+""}function d7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f7(e){return e.dataKey}function m7(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(WU,t)}var $C=[],h7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ey(e){var t,r,n=jr(e,h7),{active:i,allowEscapeViewBox:s,animationDuration:c,animationEasing:u,content:m,filterNull:h,isAnimationActive:g,offset:p,payloadUniqBy:_,position:x,reverseDirection:w,useTranslate3d:j,wrapperStyle:S,cursor:O,shared:C,trigger:A,defaultIndex:k,portal:D,axisId:M}=n,z=qt(),K=typeof k=="number"?String(k):k;y.useEffect(()=>{z(c9({shared:C,trigger:A,axisId:M,active:i,defaultIndex:K}))},[z,C,A,M,i,K]);var Q=Lm(),ne=PD(),G=n9(C),{activeIndex:I,isActive:ie}=(t=De(ge=>yF(ge,G,A,K)))!==null&&t!==void 0?t:{},pe=De(ge=>vF(ge,G,A,K)),q=De(ge=>BP(ge,G,A,K)),R=De(ge=>gF(ge,G,A,K)),U=pe,J=$F(),B=(r=i??ie)!==null&&r!==void 0?r:!1,[fe,je]=z5([U,B]),te=G==="axis"?q:void 0;l7(G,A,R,te,I,B);var H=D??J;if(H==null||Q==null||G==null)return null;var Ee=U??$C;B||(Ee=$C),h&&Ee.length&&(Ee=u5(Ee.filter(ge=>ge.value!=null&&(ge.hide!==!0||n.includeHidden)),_,f7));var Te=Ee.length>0,Ie=y.createElement(r6,{allowEscapeViewBox:s,animationDuration:c,animationEasing:u,isAnimationActive:g,active:B,coordinate:R,hasPayload:Te,offset:p,position:x,reverseDirection:w,useTranslate3d:j,viewBox:Q,wrapperStyle:S,lastBoundingBox:fe,innerRef:je,hasPortalFromProps:!!D},m7(m,BC(BC({},n),{},{payload:Ee,label:te,active:B,activeIndex:I,coordinate:R,accessibilityLayer:ne})));return y.createElement(y.Fragment,null,zN.createPortal(Ie,H),B&&y.createElement(BF,{cursor:O,tooltipEventType:G,coordinate:R,payload:Ee,index:I}))}var gu=e=>null;gu.displayName="Cell";function p7(e,t,r){return(t=g7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g7(e){var t=v7(e,"string");return typeof t=="symbol"?t:t+""}function v7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class y7{constructor(t){p7(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function HC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function b7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(r),!0).forEach(function(n){_7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _7(e,t,r){return(t=x7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x7(e){var t=w7(e,"string");return typeof t=="symbol"?t:t+""}function w7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var j7={cacheSize:2e3,enableCache:!0},YP=b7({},j7),FC=new y7(YP.cacheSize),S7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},KC="recharts_measurement_span";function E7(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",c=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(c,"|").concat(u)}var YC=(e,t)=>{try{var r=document.getElementById(KC);r||(r=document.createElement("span"),r.setAttribute("id",KC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,S7,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Cc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||$m.isSsr)return{width:0,height:0};if(!YP.enableCache)return YC(t,r);var n=E7(t,r),i=FC.get(n);if(i)return i;var s=YC(t,r);return FC.set(n,s),s},GP;function O7(e,t,r){return(t=C7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C7(e){var t=A7(e,"string");return typeof t=="symbol"?t:t+""}function A7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,VC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,N7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,k7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,D7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},T7=["cm","mm","pt","pc","in","Q","px"];function P7(e){return T7.includes(e)}var Hs="NaN";function M7(e,t){return e*D7[t]}class Dr{static parse(t){var r,[,n,i]=(r=k7.exec(t))!==null&&r!==void 0?r:[];return n==null?Dr.NaN:new Dr(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ia(t)&&(this.unit=""),r!==""&&!N7.test(r)&&(this.num=NaN,this.unit=""),P7(r)&&(this.num=M7(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ia(this.num)}}GP=Dr;O7(Dr,"NaN",new GP(NaN,""));function VP(e){if(e==null||e.includes(Hs))return Hs;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,s]=(r=GC.exec(t))!==null&&r!==void 0?r:[],c=Dr.parse(n??""),u=Dr.parse(s??""),m=i==="*"?c.multiply(u):c.divide(u);if(m.isNaN())return Hs;t=t.replace(GC,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,g,p,_]=(h=VC.exec(t))!==null&&h!==void 0?h:[],x=Dr.parse(g??""),w=Dr.parse(_??""),j=p==="+"?x.add(w):x.subtract(w);if(j.isNaN())return Hs;t=t.replace(VC,j.toString())}return t}var WC=/\(([^()]*)\)/;function R7(e){for(var t=e,r;(r=WC.exec(t))!=null;){var[,n]=r;t=t.replace(WC,VP(n))}return t}function q7(e){var t=e.replace(/\s+/g,"");return t=R7(t),t=VP(t),t}function L7(e){try{return q7(e)}catch{return Hs}}function ty(e){var t=L7(e.slice(5,-1));return t===Hs?"":t}var z7=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],I7=["dx","dy","angle","className","breakAll"];function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wb.apply(null,arguments)}function XC(e,t){if(e==null)return{};var r,n,i=U7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function U7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WP=/[ \f\n\r\t\v\u2028\u2029]+/,XP=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];Rt(t)||(r?i=t.toString().split(""):i=t.toString().split(WP));var s=i.map(u=>({word:u,width:Cc(u,n).width})),c=r?0:Cc("",n).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function B7(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var ZP=(e,t,r,n)=>e.reduce((i,s)=>{var{word:c,width:u}=s,m=i[i.length-1];if(m&&u!=null&&(t==null||n||m.width+u+r<Number(t)))m.words.push(c),m.width+=u+r;else{var h={words:[c],width:u};i.push(h)}return i},[]),QP=e=>e.reduce((t,r)=>t.width>r.width?t:r),$7="",ZC=(e,t,r,n,i,s,c,u)=>{var m=e.slice(0,t),h=XP({breakAll:r,style:n,children:m+$7});if(!h)return[!1,[]];var g=ZP(h.wordsWithComputedWidth,s,c,u),p=g.length>i||QP(g).width>Number(s);return[p,g]},H7=(e,t,r,n,i)=>{var{maxLines:s,children:c,style:u,breakAll:m}=e,h=ke(s),g=String(c),p=ZP(t,n,r,i);if(!h||i)return p;var _=p.length>s||QP(p).width>Number(n);if(!_)return p;for(var x=0,w=g.length-1,j=0,S;x<=w&&j<=g.length-1;){var O=Math.floor((x+w)/2),C=O-1,[A,k]=ZC(g,C,m,u,s,n,r,i),[D]=ZC(g,O,m,u,s,n,r,i);if(!A&&!D&&(x=O+1),A&&D&&(w=O-1),!A&&D){S=k;break}j++}return S||p},QC=e=>{var t=Rt(e)?[]:e.toString().split(WP);return[{words:t,width:void 0}]},F7=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:c}=e;if((t||r)&&!$m.isSsr){var u,m,h=XP({breakAll:s,children:n,style:i});if(h){var{wordsWithComputedWidth:g,spaceWidth:p}=h;u=g,m=p}else return QC(n);return H7({breakAll:s,children:n,maxLines:c,style:i},u,m,t,!!r)}return QC(n)},JP="#808080",K7={angle:0,breakAll:!1,capHeight:"0.71em",fill:JP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},sh=y.forwardRef((e,t)=>{var r=jr(e,K7),{x:n,y:i,lineHeight:s,capHeight:c,fill:u,scaleToFit:m,textAnchor:h,verticalAnchor:g}=r,p=XC(r,z7),_=y.useMemo(()=>F7({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:m,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,m,p.style,p.width]),{dx:x,dy:w,angle:j,className:S,breakAll:O}=p,C=XC(p,I7);if(!wa(n)||!wa(i)||_.length===0)return null;var A=Number(n)+(ke(x)?x:0),k=Number(i)+(ke(w)?w:0);if(!It(A)||!It(k))return null;var D;switch(g){case"start":D=ty("calc(".concat(c,")"));break;case"middle":D=ty("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:D=ty("calc(".concat(_.length-1," * -").concat(s,")"));break}var M=[];if(m){var z=_[0].width,{width:K}=p;M.push("scale(".concat(ke(K)&&ke(z)?K/z:1,")"))}return j&&M.push("rotate(".concat(j,", ").concat(A,", ").concat(k,")")),M.length&&(C.transform=M.join(" ")),y.createElement("text",wb({},Hr(C),{ref:t,x:A,y:k,className:ct("recharts-text",S),textAnchor:h,fill:u.includes("url")?JP:u}),_.map((Q,ne)=>{var G=Q.words.join(O?"":" ");return y.createElement("tspan",{x:A,dy:ne===0?D:s,key:"".concat(G,"-").concat(ne)},G)}))});sh.displayName="Text";var Y7=["labelRef"],G7=["content"];function JC(e,t){if(e==null)return{};var r,n,i=V7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function V7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function eA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eA(Object(r),!0).forEach(function(n){W7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W7(e,t,r){return(t=X7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X7(e){var t=Z7(e,"string");return typeof t=="symbol"?t:t+""}function Z7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ga(){return Ga=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ga.apply(null,arguments)}var eM=y.createContext(null),Q7=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c,children:u}=e,m=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c}),[t,r,n,i,s,c]);return y.createElement(eM.Provider,{value:m},u)},tM=()=>{var e=y.useContext(eM),t=Lm();return e||bD(t)},J7=y.createContext(null),eK=()=>{var e=y.useContext(J7),t=De(YT);return e||t},tK=e=>{var{value:t,formatter:r}=e,n=Rt(e.children)?t:e.children;return typeof r=="function"?r(n):n},C_=e=>e!=null&&typeof e=="function",rK=(e,t)=>{var r=xr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},nK=(e,t,r,n,i)=>{var{offset:s,className:c}=e,{cx:u,cy:m,innerRadius:h,outerRadius:g,startAngle:p,endAngle:_,clockWise:x}=i,w=(h+g)/2,j=rK(p,_),S=j>=0?1:-1,O,C;switch(t){case"insideStart":O=p+S*s,C=x;break;case"insideEnd":O=_-S*s,C=!x;break;case"end":O=_+S*s,C=x;break;default:throw new Error("Unsupported position ".concat(t))}C=j<=0?C:!C;var A=or(u,m,w,O),k=or(u,m,w,O+(C?1:-1)*359),D="M".concat(A.x,",").concat(A.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),M=Rt(e.id)?Nc("recharts-radial-line-"):e.id;return y.createElement("text",Ga({},n,{dominantBaseline:"central",className:ct("recharts-radial-bar-label",c)}),y.createElement("defs",null,y.createElement("path",{id:M,d:D})),y.createElement("textPath",{xlinkHref:"#".concat(M)},r))},aK=(e,t,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:c,startAngle:u,endAngle:m}=e,h=(u+m)/2;if(r==="outside"){var{x:g,y:p}=or(n,i,c+t,h);return{x:g,y:p,textAnchor:g>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var _=(s+c)/2,{x,y:w}=or(n,i,_,h);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},jb=e=>"cx"in e&&ke(e.cx),iK=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,s;r!=null&&!jb(r)&&(s=r);var{x:c,y:u,upperWidth:m,lowerWidth:h,height:g}=t,p=c,_=c+(m-h)/2,x=(p+_)/2,w=(m+h)/2,j=p+m/2,S=g>=0?1:-1,O=S*n,C=S>0?"end":"start",A=S>0?"start":"end",k=m>=0?1:-1,D=k*n,M=k>0?"end":"start",z=k>0?"start":"end";if(i==="top"){var K={x:p+m/2,y:u-O,textAnchor:"middle",verticalAnchor:C};return Qt(Qt({},K),s?{height:Math.max(u-s.y,0),width:m}:{})}if(i==="bottom"){var Q={x:_+h/2,y:u+g+O,textAnchor:"middle",verticalAnchor:A};return Qt(Qt({},Q),s?{height:Math.max(s.y+s.height-(u+g),0),width:h}:{})}if(i==="left"){var ne={x:x-D,y:u+g/2,textAnchor:M,verticalAnchor:"middle"};return Qt(Qt({},ne),s?{width:Math.max(ne.x-s.x,0),height:g}:{})}if(i==="right"){var G={x:x+w+D,y:u+g/2,textAnchor:z,verticalAnchor:"middle"};return Qt(Qt({},G),s?{width:Math.max(s.x+s.width-G.x,0),height:g}:{})}var I=s?{width:w,height:g}:{};return i==="insideLeft"?Qt({x:x+D,y:u+g/2,textAnchor:z,verticalAnchor:"middle"},I):i==="insideRight"?Qt({x:x+w-D,y:u+g/2,textAnchor:M,verticalAnchor:"middle"},I):i==="insideTop"?Qt({x:p+m/2,y:u+O,textAnchor:"middle",verticalAnchor:A},I):i==="insideBottom"?Qt({x:_+h/2,y:u+g-O,textAnchor:"middle",verticalAnchor:C},I):i==="insideTopLeft"?Qt({x:p+D,y:u+O,textAnchor:z,verticalAnchor:A},I):i==="insideTopRight"?Qt({x:p+m-D,y:u+O,textAnchor:M,verticalAnchor:A},I):i==="insideBottomLeft"?Qt({x:_+D,y:u+g-O,textAnchor:z,verticalAnchor:C},I):i==="insideBottomRight"?Qt({x:_+h-D,y:u+g-O,textAnchor:M,verticalAnchor:C},I):i&&typeof i=="object"&&(ke(i.x)||Ja(i.x))&&(ke(i.y)||Ja(i.y))?Qt({x:c+Rr(i.x,w),y:u+Rr(i.y,g),textAnchor:"end",verticalAnchor:"end"},I):Qt({x:j,y:u+g/2,textAnchor:"middle",verticalAnchor:"middle"},I)},oK={angle:0,offset:5,zIndex:sr.label,position:"middle",textBreakAll:!1};function Hi(e){var t=jr(e,oK),{viewBox:r,position:n,value:i,children:s,content:c,className:u="",textBreakAll:m,labelRef:h}=t,g=eK(),p=tM(),_=n==="center"?p:g??p,x,w,j;if(r==null?x=_:jb(r)?x=r:x=bD(r),!x||Rt(i)&&Rt(s)&&!y.isValidElement(c)&&typeof c!="function")return null;var S=Qt(Qt({},t),{},{viewBox:x});if(y.isValidElement(c)){var{labelRef:O}=S,C=JC(S,Y7);return y.cloneElement(c,C)}if(typeof c=="function"){var{content:A}=S,k=JC(S,G7);if(w=y.createElement(c,k),y.isValidElement(w))return w}else w=tK(t);var D=Hr(t);if(jb(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return nK(t,n,w,D,x);j=aK(x,t.offset,t.position)}else j=iK(t,x);return y.createElement(nn,{zIndex:t.zIndex},y.createElement(sh,Ga({ref:h,className:ct("recharts-label",u)},D,j,{textAnchor:B7(D.textAnchor)?D.textAnchor:j.textAnchor,breakAll:m}),w))}Hi.displayName="Label";var sK=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(Hi,Ga({key:"label-implicit"},n)):wa(e)?y.createElement(Hi,Ga({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===Hi?y.cloneElement(e,Qt({key:"label-implicit"},n)):y.createElement(Hi,Ga({key:"label-implicit",content:e},n)):C_(e)?y.createElement(Hi,Ga({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(Hi,Ga({},e,{key:"label-implicit"},n)):null};function lK(e){var{label:t,labelRef:r}=e,n=tM();return sK(t,n,r)||null}var ry={},ny={},tA;function cK(){return tA||(tA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(ny)),ny}var ay={},rA;function uK(){return rA||(rA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(ay)),ay}var nA;function dK(){return nA||(nA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cK(),r=uK(),n=n0();function i(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=i})(ry)),ry}var iy,aA;function fK(){return aA||(aA=1,iy=dK().last),iy}var mK=fK();const hK=oi(mK);var pK=["valueAccessor"],gK=["dataKey","clockWise","id","textBreakAll","zIndex"];function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},am.apply(null,arguments)}function iA(e,t){if(e==null)return{};var r,n,i=vK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yK=e=>Array.isArray(e.value)?hK(e.value):e.value,rM=y.createContext(void 0),nM=rM.Provider,aM=y.createContext(void 0),bK=aM.Provider;function _K(){return y.useContext(rM)}function xK(){return y.useContext(aM)}function gf(e){var{valueAccessor:t=yK}=e,r=iA(e,pK),{dataKey:n,clockWise:i,id:s,textBreakAll:c,zIndex:u}=r,m=iA(r,gK),h=_K(),g=xK(),p=h||g;return!p||!p.length?null:y.createElement(nn,{zIndex:u??sr.label},y.createElement(wr,{className:"recharts-label-list"},p.map((_,x)=>{var w,j=Rt(n)?t(_,x):bt(_&&_.payload,n),S=Rt(s)?{}:{id:"".concat(s,"-").concat(x)};return y.createElement(Hi,am({key:"label-".concat(x)},Hr(_),m,S,{fill:(w=r.fill)!==null&&w!==void 0?w:_.fill,parentViewBox:_.parentViewBox,value:j,textBreakAll:c,viewBox:_.viewBox,index:x,zIndex:0}))})))}gf.displayName="LabelList";function A_(e){var{label:t}=e;return t?t===!0?y.createElement(gf,{key:"labelList-implicit"}):y.isValidElement(t)||C_(t)?y.createElement(gf,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(gf,am({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb.apply(null,arguments)}var iM=e=>{var{cx:t,cy:r,r:n,className:i}=e,s=ct("recharts-dot",i);return ke(t)&&ke(r)&&ke(n)?y.createElement("circle",Sb({},xn(e),r0(e),{className:s,cx:t,cy:r,r:n})):null},oM=e=>e.graphicalItems.polarItems,wK=X([Lt,lu],X0),lh=X([oM,Ut,wK],Z0),jK=X([lh],Q0),ch=X([jK,Wm],J0),SK=X([ch,Ut,lh],t_);X([ch,Ut,lh],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var s,c=bt(n,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:bt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var oA=()=>{},EK=X([ch,Ut,lh,nh,Lt],i_),OK=X([Ut,n_,a_,oA,EK,oA,tt,Lt],o_),sM=X([Ut,tt,ch,SK,su,Lt,OK],s_),CK=X([sM,Ut,ul],u_);X([Ut,sM,CK,Lt],f_);var AK={radiusAxis:{},angleAxis:{}},lM=rn({name:"polarAxis",initialState:AK,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:CQ,removeRadiusAxis:AQ,addAngleAxis:NQ,removeAngleAxis:kQ}=lM.actions,NK=lM.reducer;function sA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(r),!0).forEach(function(n){kK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kK(e,t,r){return(t=DK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DK(e){var t=TK(e,"string");return typeof t=="symbol"?t:t+""}function TK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PK=(e,t)=>t,N_=X([oM,PK],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),MK=[],k_=(e,t,r)=>r?.length===0?MK:r,cM=X([Wm,N_,k_],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(s=>lA(lA({},t.presentationProps),s.props))),i!=null)return i}}),RK=X([cM,N_,k_],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var s,c=bt(n,t.nameKey,t.name),u;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?u=n.fill:u=t.fill,{value:al(c,t.dataKey),color:u,payload:n,type:t.legendType}})}),qK=X([cM,N_,k_,mr],(e,t,r,n)=>{if(!(t==null||e==null))return zY({offset:n,pieSettings:t,displayedData:e,cells:r})}),oy={exports:{}},yt={};var cA;function LK(){if(cA)return yt;cA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case r:case i:case n:case m:case h:case _:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case p:case g:return j;case s:return j;default:return S}}case t:return S}}}return yt.ContextConsumer=s,yt.ContextProvider=c,yt.Element=e,yt.ForwardRef=u,yt.Fragment=r,yt.Lazy=p,yt.Memo=g,yt.Portal=t,yt.Profiler=i,yt.StrictMode=n,yt.Suspense=m,yt.SuspenseList=h,yt.isContextConsumer=function(j){return w(j)===s},yt.isContextProvider=function(j){return w(j)===c},yt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},yt.isForwardRef=function(j){return w(j)===u},yt.isFragment=function(j){return w(j)===r},yt.isLazy=function(j){return w(j)===p},yt.isMemo=function(j){return w(j)===g},yt.isPortal=function(j){return w(j)===t},yt.isProfiler=function(j){return w(j)===i},yt.isStrictMode=function(j){return w(j)===n},yt.isSuspense=function(j){return w(j)===m},yt.isSuspenseList=function(j){return w(j)===h},yt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===i||j===n||j===m||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===p||j.$$typeof===g||j.$$typeof===c||j.$$typeof===s||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},yt.typeOf=w,yt}var uA;function zK(){return uA||(uA=1,oy.exports=LK()),oy.exports}var IK=zK(),dA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",fA=null,sy=null,uM=e=>{if(e===fA&&Array.isArray(sy))return sy;var t=[];return y.Children.forEach(e,r=>{Rt(r)||(IK.isFragment(r)?t=t.concat(uM(r.props.children)):t.push(r))}),sy=t,fA=e,t};function D_(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>dA(i)):n=[dA(t)],uM(e).forEach(i=>{var s=Uo(i,"type.displayName")||Uo(i,"type.name");s&&n.indexOf(s)!==-1&&r.push(i)}),r}var dM=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,ly={},mA;function UK(){return mA||(mA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(ly)),ly}var cy,hA;function BK(){return hA||(hA=1,cy=UK().isPlainObject),cy}var $K=BK();const HK=oi($K);var pA,gA,vA,yA,bA;function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(n){FK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FK(e,t,r){return(t=KK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KK(e){var t=YK(e,"string");return typeof t=="symbol"?t:t+""}function YK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function im(){return im=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},im.apply(null,arguments)}function _c(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var wA=(e,t,r,n,i)=>{var s=r-n,c;return c=Yt(pA||(pA=_c(["M ",",",""])),e,t),c+=Yt(gA||(gA=_c(["L ",",",""])),e+r,t),c+=Yt(vA||(vA=_c(["L ",",",""])),e+r-s/2,t+i),c+=Yt(yA||(yA=_c(["L ",",",""])),e+r-s/2-n,t+i),c+=Yt(bA||(bA=_c(["L ",","," Z"])),e,t),c},GK={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},VK=e=>{var t=jr(e,GK),{x:r,y:n,upperWidth:i,lowerWidth:s,height:c,className:u}=t,{animationEasing:m,animationDuration:h,animationBegin:g,isUpdateAnimationActive:p}=t,_=y.useRef(null),[x,w]=y.useState(-1),j=y.useRef(i),S=y.useRef(s),O=y.useRef(c),C=y.useRef(r),A=y.useRef(n),k=ru(e,"trapezoid-");if(y.useEffect(()=>{if(_.current&&_.current.getTotalLength)try{var pe=_.current.getTotalLength();pe&&w(pe)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||c!==+c||i===0&&s===0||c===0)return null;var D=ct("recharts-trapezoid",u);if(!p)return y.createElement("g",null,y.createElement("path",im({},Hr(t),{className:D,d:wA(r,n,i,s,c)})));var M=j.current,z=S.current,K=O.current,Q=C.current,ne=A.current,G="0px ".concat(x===-1?1:x,"px"),I="".concat(x,"px 0px"),ie=MD(["strokeDasharray"],h,m);return y.createElement(tu,{animationId:k,key:k,canBegin:x>0,duration:h,easing:m,isActive:p,begin:g},pe=>{var q=Tt(M,i,pe),R=Tt(z,s,pe),U=Tt(K,c,pe),J=Tt(Q,r,pe),B=Tt(ne,n,pe);_.current&&(j.current=q,S.current=R,O.current=U,C.current=J,A.current=B);var fe=pe>0?{transition:ie,strokeDasharray:I}:{strokeDasharray:G};return y.createElement("path",im({},Hr(t),{className:D,d:wA(J,B,q,R,U),ref:_,style:xA(xA({},fe),t.style)}))})},WK=["option","shapeType","activeClassName"];function XK(e,t){if(e==null)return{};var r,n,i=ZK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ZK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function om(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jA(Object(r),!0).forEach(function(n){QK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QK(e,t,r){return(t=JK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JK(e){var t=eY(e,"string");return typeof t=="symbol"?t:t+""}function eY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tY(e,t){return om(om({},t),e)}function rY(e,t){return e==="symbols"}function SA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(zD,r);case"trapezoid":return y.createElement(VK,r);case"sector":return y.createElement($D,r);case"symbols":if(rY(t))return y.createElement(_k,r);break;case"curve":return y.createElement(p0,r);default:return null}}function nY(e){return y.isValidElement(e)?e.props:e}function T_(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=XK(e,WK),s;if(y.isValidElement(t))s=y.cloneElement(t,om(om({},i),nY(t)));else if(typeof t=="function")s=t(i,i.index);else if(HK(t)&&typeof t!="boolean"){var c=tY(t,i);s=y.createElement(SA,{shapeType:r,elementProps:c})}else{var u=i;s=y.createElement(SA,{shapeType:r,elementProps:u})}return i.isActive?y.createElement(wr,{className:n},s):s}var P_=(e,t,r)=>{var n=qt();return(i,s)=>c=>{e?.(i,s,c),n(jP({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},M_=e=>{var t=qt();return(r,n)=>i=>{e?.(r,n,i),t(u9())}},R_=(e,t,r)=>{var n=qt();return(i,s)=>c=>{e?.(i,s,c),n(d9({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function q_(e){var{tooltipEntrySettings:t}=e,r=qt(),n=qr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(o9(t)):i.current!==t&&r(s9({prev:i.current,next:t})),i.current=t)},[t,r,n]),y.useLayoutEffect(()=>()=>{i.current&&(r(l9(i.current)),i.current=null)},[r]),null}function fM(e){var{legendPayload:t}=e,r=qt(),n=qr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(kD(t)):i.current!==t&&r(DD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(TD(i.current)),i.current=null)},[r]),null}function aY(e){var{legendPayload:t}=e,r=qt(),n=De(tt),i=y.useRef(null);return y.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(kD(t)):i.current!==t&&r(DD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(TD(i.current)),i.current=null)},[r]),null}var uy,iY=()=>{var[e]=y.useState(()=>Nc("uid-"));return e},oY=(uy=Tq.useId)!==null&&uy!==void 0?uy:iY;function sY(e,t){var r=oY();return t||(e?"".concat(e,"-").concat(r):r)}var lY=y.createContext(void 0),L_=e=>{var{id:t,type:r,children:n}=e,i=sY("recharts-".concat(r),t);return y.createElement(lY.Provider,{value:i},n(i))},cY={cartesianItems:[],polarItems:[]},mM=rn({name:"graphicalItems",initialState:cY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Dt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=aa(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Dt()},removeCartesianGraphicalItem:{reducer(e,t){var r=aa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Dt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Dt()},removePolarGraphicalItem:{reducer(e,t){var r=aa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Dt()}}}),{addCartesianGraphicalItem:uY,replaceCartesianGraphicalItem:dY,removeCartesianGraphicalItem:fY,addPolarGraphicalItem:mY,removePolarGraphicalItem:hY}=mM.actions,pY=mM.reducer,gY=e=>{var t=qt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(uY(e)):r.current!==e&&t(dY({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(fY(r.current)),r.current=null)},[t]),null},hM=y.memo(gY);function vY(e){var t=qt();return y.useLayoutEffect(()=>(t(mY(e)),()=>{t(hY(e))}),[t,e]),null}var yY=["key"],bY=["onMouseEnter","onClick","onMouseLeave"],_Y=["id"],xY=["id"];function EA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(r),!0).forEach(function(n){wY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wY(e,t,r){return(t=jY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jY(e){var t=SY(e,"string");return typeof t=="symbol"?t:t+""}function SY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ji(){return Ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ji.apply(null,arguments)}function uh(e,t){if(e==null)return{};var r,n,i=EY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function EY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function OY(e){var t=y.useMemo(()=>D_(e.children,gu),[e.children]),r=De(n=>RK(n,e.id,t));return r==null?null:y.createElement(aY,{legendPayload:r})}var CY=y.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:c,name:u,hide:m,tooltipType:h,id:g}=e,p={dataDefinedOnItem:n.map(_=>_.tooltipPayload),positions:n.map(_=>_.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:c,dataKey:t,nameKey:r,name:al(u,t),hide:m,type:h,color:c,unit:"",graphicalItemId:g}};return y.createElement(q_,{tooltipEntrySettings:p})}),AY=(e,t)=>e>t?"start":e<t?"end":"middle",NY=(e,t,r)=>Rr(typeof t=="function"?t(e):t,r,r*.8),kY=(e,t,r)=>{var{top:n,left:i,width:s,height:c}=t,u=ID(s,c),m=i+Rr(e.cx,s,s/2),h=n+Rr(e.cy,c,c/2),g=Rr(e.innerRadius,u,0),p=NY(r,e.outerRadius,u),_=e.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:m,cy:h,innerRadius:g,outerRadius:p,maxRadius:_}},DY=(e,t)=>{var r=xr(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function TY(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var PY=(e,t)=>{if(y.isValidElement(e))return y.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ct("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=uh(t,yY);return y.createElement(p0,Ji({},i,{type:"linear",className:r}))},MY=(e,t,r)=>{if(y.isValidElement(e))return y.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),y.isValidElement(n)))return n;var i=ct("recharts-pie-label-text",TY(e));return y.createElement(sh,Ji({},t,{alignmentBaseline:"middle",className:i}),n)};function RY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:s,dataKey:c}=r;if(!n||!i||!t)return null;var u=xn(r),m=zo(i),h=zo(s),g=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,p=t.map((_,x)=>{var w=(_.startAngle+_.endAngle)/2,j=or(_.cx,_.cy,_.outerRadius+g,w),S=Gt(Gt(Gt(Gt({},u),_),{},{stroke:"none"},m),{},{index:x,textAnchor:AY(j.x,_.cx)},j),O=Gt(Gt(Gt(Gt({},u),_),{},{fill:"none",stroke:_.fill},h),{},{index:x,points:[or(_.cx,_.cy,_.outerRadius,w),j],key:"line"});return y.createElement(nn,{zIndex:sr.label,key:"label-".concat(_.startAngle,"-").concat(_.endAngle,"-").concat(_.midAngle,"-").concat(x)},y.createElement(wr,null,s&&PY(s,O),MY(i,S,bt(_,c))))});return y.createElement(wr,{className:"recharts-pie-labels"},p)}function qY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?y.createElement(A_,{label:i}):y.createElement(RY,{sectors:t,props:r,showLabels:n})}function LY(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:s,id:c}=e,u=De(Qi),m=De(x_),h=De(X9),{onMouseEnter:g,onClick:p,onMouseLeave:_}=i,x=uh(i,bY),w=P_(g,i.dataKey,c),j=M_(_),S=R_(p,i.dataKey,c);return t==null||t.length===0?null:y.createElement(y.Fragment,null,t.map((O,C)=>{if(O?.startAngle===0&&O?.endAngle===0&&t.length!==1)return null;var A=h==null||h===c,k=String(C)===u&&(m==null||i.dataKey===m)&&A,D=u?n:null,M=r&&k?r:D,z=Gt(Gt({},O),{},{stroke:O.stroke,tabIndex:-1,[hD]:C,[pD]:c});return y.createElement(wr,Ji({key:"sector-".concat(O?.startAngle,"-").concat(O?.endAngle,"-").concat(O.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},wm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),y.createElement(T_,Ji({option:s??M,index:C,shapeType:"sector",isActive:k},z)))}))}function zY(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:s}=e,{cornerRadius:c,startAngle:u,endAngle:m,dataKey:h,nameKey:g,tooltipType:p}=r,_=Math.abs(r.minAngle),x=DY(u,m),w=Math.abs(x),j=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,S=n.filter(M=>bt(M,h,0)!==0).length,O=(w>=360?S:S-1)*j,C=w-S*_-O,A=n.reduce((M,z)=>{var K=bt(z,h,0);return M+(ke(K)?K:0)},0),k;if(A>0){var D;k=n.map((M,z)=>{var K=bt(M,h,0),Q=bt(M,g,z),ne=kY(r,s,M),G=(ke(K)?K:0)/A,I,ie=Gt(Gt({},M),i&&i[z]&&i[z].props);z?I=D.endAngle+xr(x)*j*(K!==0?1:0):I=u;var pe=I+xr(x)*((K!==0?_:0)+G*C),q=(I+pe)/2,R=(ne.innerRadius+ne.outerRadius)/2,U=[{name:Q,value:K,payload:ie,dataKey:h,type:p,graphicalItemId:r.id}],J=or(ne.cx,ne.cy,R,q);return D=Gt(Gt(Gt(Gt({},r.presentationProps),{},{percent:G,cornerRadius:typeof c=="string"?parseFloat(c):c,name:Q,tooltipPayload:U,midAngle:q,middleRadius:R,tooltipPosition:J},ie),ne),{},{value:K,dataKey:h,startAngle:I,endAngle:pe,payload:ie,paddingAngle:xr(x)*j}),D})}return k}function IY(e){var{showLabels:t,sectors:r,children:n}=e,i=y.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return y.createElement(bK,{value:t?i:void 0},n)}function UY(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,activeShape:h,inactiveShape:g,onAnimationStart:p,onAnimationEnd:_}=t,x=ru(t,"recharts-pie-"),w=r.current,[j,S]=y.useState(!1),O=y.useCallback(()=>{typeof _=="function"&&_(),S(!1)},[_]),C=y.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return y.createElement(IY,{showLabels:!j,sectors:i},y.createElement(tu,{animationId:x,begin:c,duration:u,isActive:s,easing:m,onAnimationStart:C,onAnimationEnd:O,key:x},A=>{var k=[],D=i&&i[0],M=D?.startAngle;return i?.forEach((z,K)=>{var Q=w&&w[K],ne=K>0?Uo(z,"paddingAngle",0):0;if(Q){var G=Tt(Q.endAngle-Q.startAngle,z.endAngle-z.startAngle,A),I=Gt(Gt({},z),{},{startAngle:M+ne,endAngle:M+G+ne});k.push(I),M=I.endAngle}else{var{endAngle:ie,startAngle:pe}=z,q=Tt(0,ie-pe,A),R=Gt(Gt({},z),{},{startAngle:M+ne,endAngle:M+q+ne});k.push(R),M=R.endAngle}}),r.current=k,y.createElement(wr,null,y.createElement(LY,{sectors:k,activeShape:h,inactiveShape:g,allOtherPieProps:t,shape:t.shape,id:n}))}),y.createElement(qY,{showLabels:!j,sectors:i,props:t}),t.children)}var BY={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:sr.area};function $Y(e){var{id:t}=e,r=uh(e,_Y),{hide:n,className:i,rootTabIndex:s}=e,c=y.useMemo(()=>D_(e.children,gu),[e.children]),u=De(g=>qK(g,t,c)),m=y.useRef(null),h=ct("recharts-pie",i);return n||u==null?(m.current=null,y.createElement(wr,{tabIndex:s,className:h})):y.createElement(nn,{zIndex:e.zIndex},y.createElement(CY,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:u,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),y.createElement(wr,{tabIndex:s,className:h},y.createElement(UY,{props:Gt(Gt({},r),{},{sectors:u}),previousSectorsRef:m,id:t})))}function pM(e){var t=jr(e,BY),{id:r}=t,n=uh(t,xY),i=xn(n);return y.createElement(L_,{id:r,type:"pie"},s=>y.createElement(y.Fragment,null,y.createElement(vY,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),y.createElement(OY,Ji({},n,{id:s})),y.createElement($Y,Ji({},n,{id:s}))))}pM.displayName="Pie";var HY=["points"];function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(n){FY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FY(e,t,r){return(t=KY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KY(e){var t=YY(e,"string");return typeof t=="symbol"?t:t+""}function YY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sm(){return sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sm.apply(null,arguments)}function GY(e,t){if(e==null)return{};var r,n,i=VY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function VY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function WY(e){var{option:t,dotProps:r,className:n}=e;if(y.isValidElement(t))return y.cloneElement(t,r);if(typeof t=="function")return t(r);var i=ct(n,typeof t!="boolean"?t.className:""),s=r??{},{points:c}=s,u=GY(s,HY);return y.createElement(iM,sm({},u,{className:i}))}function XY(e,t){return e==null?!1:t?!0:e.length===1}function ZY(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:s,baseProps:c,needClip:u,clipPathId:m,zIndex:h=sr.scatter}=e;if(!XY(t,r))return null;var g=dM(r),p=L3(r),_=t.map((w,j)=>{var S,O,C=dy(dy(dy({r:3},c),p),{},{index:j,cx:(S=w.x)!==null&&S!==void 0?S:void 0,cy:(O=w.y)!==null&&O!==void 0?O:void 0,dataKey:s,value:w.value,payload:w.payload,points:t});return y.createElement(WY,{key:"dot-".concat(j),option:r,dotProps:C,className:i})}),x={};return u&&m!=null&&(x.clipPath="url(#clipPath-".concat(g?"":"dots-").concat(m,")")),y.createElement(nn,{zIndex:h},y.createElement(wr,sm({className:n},x),_))}function CA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function AA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(r),!0).forEach(function(n){QY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QY(e,t,r){return(t=JY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JY(e){var t=eG(e,"string");return typeof t=="symbol"?t:t+""}function eG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gM=0,tG={xAxis:{},yAxis:{},zAxis:{}},vM=rn({name:"cartesianAxis",initialState:tG,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Dt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Dt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Dt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Dt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Dt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Dt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Dt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Dt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Dt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var c=[...s,n].slice(-3);e.yAxis[r]=AA(AA({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:rG,replaceXAxis:nG,removeXAxis:aG,addYAxis:iG,replaceYAxis:oG,removeYAxis:sG,addZAxis:DQ,replaceZAxis:TQ,removeZAxis:PQ,updateYAxisWidth:lG}=vM.actions,cG=vM.reducer,uG=X([mr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),dG=X([uG,li,ci],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),z_=()=>De(dG),fG=()=>De(tF);function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){mG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mG(e,t,r){return(t=hG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hG(e){var t=pG(e,"string");return typeof t=="symbol"?t:t+""}function pG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gG=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:s,clipPath:c}=e;if(i===!1||t.x==null||t.y==null)return null;var u={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=fy(fy(fy({},u),zo(i)),r0(i)),h;return y.isValidElement(i)?h=y.cloneElement(i,m):typeof i=="function"?h=i(m):h=y.createElement(iM,m),y.createElement(wr,{className:"recharts-active-dot",clipPath:c},h)};function vG(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:s,zIndex:c=sr.activeDot}=e,u=De(Qi),m=fG();if(t==null||m==null)return null;var h=t.find(g=>m.includes(g.payload));return Rt(h)?null:y.createElement(nn,{zIndex:c},y.createElement(gG,{point:h,childIndex:Number(u),mainColor:r,dataKey:i,activeDot:n,clipPath:s}))}var kA=(e,t,r)=>{var n=r??e;if(!Rt(n))return Rr(n,t,0)},yG=(e,t,r)=>{var n={},i=e.filter(Qm),s=e.filter(h=>h.stackId==null),c=i.reduce((h,g)=>(h[g.stackId]||(h[g.stackId]=[]),h[g.stackId].push(g),h),n),u=Object.entries(c).map(h=>{var[g,p]=h,_=p.map(w=>w.dataKey),x=kA(t,r,p[0].barSize);return{stackId:g,dataKeys:_,barSize:x}}),m=s.map(h=>{var g=[h.dataKey].filter(_=>_!=null),p=kA(t,r,h.barSize);return{stackId:void 0,dataKeys:g,barSize:p}});return[...u,...m]};function DA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ef(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(r),!0).forEach(function(n){bG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bG(e,t,r){return(t=_G(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _G(e){var t=xG(e,"string");return typeof t=="symbol"?t:t+""}function xG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wG(e,t,r,n,i){var s=n.length;if(!(s<1)){var c=Rr(e,r,0,!0),u,m=[];if(It(n[0].barSize)){var h=!1,g=r/s,p=n.reduce((O,C)=>O+(C.barSize||0),0);p+=(s-1)*c,p>=r&&(p-=(s-1)*c,c=0),p>=r&&g>0&&(h=!0,g*=.9,p=s*g);var _=(r-p)/2>>0,x={offset:_-c,size:0};u=n.reduce((O,C)=>{var A,k={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:x.offset+x.size+c,size:h?g:(A=C.barSize)!==null&&A!==void 0?A:0}},D=[...O,k];return x=D[D.length-1].position,D},m)}else{var w=Rr(t,r,0,!0);r-2*w-(s-1)*c<=0&&(c=0);var j=(r-2*w-(s-1)*c)/s;j>1&&(j>>=0);var S=It(i)?Math.min(j,i):j;u=n.reduce((O,C,A)=>[...O,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:w+(j+c)*A+(j-S)/2,size:S}}],m)}return u}}var jG=(e,t,r,n,i,s,c)=>{var u=Rt(c)?t:c,m=wG(r,n,i!==s?i:s,e,u);return i!==s&&m!=null&&(m=m.map(h=>ef(ef({},h),{},{position:ef(ef({},h.position),{},{offset:h.position.offset-i/2})}))),m},SG=(e,t)=>{var r=V0(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===r)}}}};function EG(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&It(e.zIndex)?e.zIndex:t}var yM=e=>{var{chartData:t}=e,r=qt(),n=qr();return y.useEffect(()=>n?()=>{}:(r(zC(t)),()=>{r(zC(void 0))}),[t,r,n]),null},TA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},bM=rn({name:"brush",initialState:TA,reducers:{setBrushSettings(e,t){return t.payload==null?TA:t.payload}}}),{setBrushSettings:MQ}=bM.actions,OG=bM.reducer;function PA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PA(Object(r),!0).forEach(function(n){_M(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _M(e,t,r){return(t=CG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CG(e){var t=AG(e,"string");return typeof t=="symbol"?t:t+""}function AG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NG=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return{x:Math.min(r,i),y:Math.min(n,s),width:Math.abs(i-r),height:Math.abs(s-n)}},RQ=e=>{var{x1:t,y1:r,x2:n,y2:i}=e;return NG({x:t,y:r},{x:n,y:i})};class dh{static create(t){return new dh(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}_M(dh,"EPS",1e-4);var qQ=e=>{var t=Object.keys(e).reduce((r,n)=>tf(tf({},r),{},{[n]:dh.create(e[n])}),{});return tf(tf({},t),{},{apply(r){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(r).map(s=>{var[c,u]=s;return[c,t[c].apply(u,{bandAware:n,position:i})]}))},isInRange(r){return Object.keys(r).every(n=>t[n].isInRange(r[n]))}})};function kG(e){return(e%180+180)%180}var DG=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=kG(i),c=s*Math.PI/180,u=Math.atan(n/r),m=c>u&&c<Math.PI-u?n/Math.sin(c):r/Math.cos(c);return Math.abs(m)},TG={dots:[],areas:[],lines:[]},xM=rn({name:"referenceElements",initialState:TG,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=aa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=aa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=aa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:LQ,removeDot:zQ,addArea:IQ,removeArea:UQ,addLine:BQ,removeLine:$Q}=xM.actions,PG=xM.reducer,wM=y.createContext(void 0),MG=e=>{var{children:t}=e,[r]=y.useState("".concat(Nc("recharts"),"-clip")),n=z_();if(n==null)return null;var{x:i,y:s,width:c,height:u}=n;return y.createElement(wM.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:i,y:s,height:u,width:c}))),t)},HQ=()=>y.useContext(wM);function jM(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function RG(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return DG(n,r)}function qG(e,t,r){var n=r==="width",{x:i,y:s,width:c,height:u}=e;return t===1?{start:n?i:s,end:n?i+c:s+u}:{start:n?i+c:s+u,end:n?i:s}}function Hc(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function LG(e,t){return jM(e,t+1)}function zG(e,t,r,n,i){for(var s=(n||[]).slice(),{start:c,end:u}=t,m=0,h=1,g=c,p=function(){var w=n?.[m];if(w===void 0)return{v:jM(n,h)};var j=m,S,O=()=>(S===void 0&&(S=r(w,j)),S),C=w.coordinate,A=m===0||Hc(e,C,O,g,u);A||(m=0,g=c,h+=1),A&&(g=C+e*(O()/2+i),m+=h)},_;h<=s.length;)if(_=p(),_)return _.v;return[]}function IG(e,t,r,n,i){var s=(n||[]).slice(),c=s.length;if(c===0)return[];for(var{start:u,end:m}=t,h=1;h<=c;h++){for(var g=(c-1)%h,p=u,_=!0,x=function(){var C=n[w],A=w,k,D=()=>(k===void 0&&(k=r(C,A)),k),M=C.coordinate,z=w===g||Hc(e,M,D,p,m);if(!z)return _=!1,1;z&&(p=M+e*(D()/2+i))},w=g;w<c&&!x();w+=h);if(_){for(var j=[],S=g;S<c;S+=h)j.push(n[S]);return j}}return[]}function MA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MA(Object(r),!0).forEach(function(n){UG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UG(e,t,r){return(t=BG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BG(e){var t=$G(e,"string");return typeof t=="symbol"?t:t+""}function $G(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HG(e,t,r,n,i){for(var s=(n||[]).slice(),c=s.length,{start:u}=t,{end:m}=t,h=function(_){var x=s[_],w,j=()=>(w===void 0&&(w=r(x,_)),w);if(_===c-1){var S=e*(x.coordinate+e*j()/2-m);s[_]=x=Tr(Tr({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else s[_]=x=Tr(Tr({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var O=Hc(e,x.tickCoord,j,u,m);O&&(m=x.tickCoord-e*(j()/2+i),s[_]=Tr(Tr({},x),{},{isShow:!0}))}},g=c-1;g>=0;g--)h(g);return s}function FG(e,t,r,n,i,s){var c=(n||[]).slice(),u=c.length,{start:m,end:h}=t;if(s){var g=n[u-1],p=r(g,u-1),_=e*(g.coordinate+e*p/2-h);if(c[u-1]=g=Tr(Tr({},g),{},{tickCoord:_>0?g.coordinate-_*e:g.coordinate}),g.tickCoord!=null){var x=Hc(e,g.tickCoord,()=>p,m,h);x&&(h=g.tickCoord-e*(p/2+i),c[u-1]=Tr(Tr({},g),{},{isShow:!0}))}}for(var w=s?u-1:u,j=function(C){var A=c[C],k,D=()=>(k===void 0&&(k=r(A,C)),k);if(C===0){var M=e*(A.coordinate-e*D()/2-m);c[C]=A=Tr(Tr({},A),{},{tickCoord:M<0?A.coordinate-M*e:A.coordinate})}else c[C]=A=Tr(Tr({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var z=Hc(e,A.tickCoord,D,m,h);z&&(m=A.tickCoord+e*(D()/2+i),c[C]=Tr(Tr({},A),{},{isShow:!0}))}},S=0;S<w;S++)j(S);return c}function I_(e,t,r){var{tick:n,ticks:i,viewBox:s,minTickGap:c,orientation:u,interval:m,tickFormatter:h,unit:g,angle:p}=e;if(!i||!i.length||!n)return[];if(ke(m)||$m.isSsr){var _;return(_=LG(i,ke(m)?m:0))!==null&&_!==void 0?_:[]}var x=[],w=u==="top"||u==="bottom"?"width":"height",j=g&&w==="width"?Cc(g,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(A,k)=>{var D=typeof h=="function"?h(A.value,k):A.value;return w==="width"?RG(Cc(D,{fontSize:t,letterSpacing:r}),j,p):Cc(D,{fontSize:t,letterSpacing:r})[w]},O=i.length>=2?xr(i[1].coordinate-i[0].coordinate):1,C=qG(s,O,w);return m==="equidistantPreserveStart"?zG(O,C,S,i,c):m==="equidistantPreserveEnd"?IG(O,C,S,i,c):(m==="preserveStart"||m==="preserveStartEnd"?x=FG(O,C,S,i,c,m==="preserveStartEnd"):x=HG(O,C,S,i,c),x.filter(A=>A.isShow))}var KG=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=e,c=0;if(t){Array.from(t).forEach(g=>{if(g){var p=g.getBoundingClientRect();p.width>c&&(c=p.width)}});var u=r?r.getBoundingClientRect().width:0,m=i+s,h=c+m+u+(r?n:0);return Math.round(h)}return 0},YG=["axisLine","width","height","className","hide","ticks","axisType"];function GG(e,t){if(e==null)return{};var r,n,i=VG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function VG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ko(){return Ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ko.apply(null,arguments)}function RA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ir(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RA(Object(r),!0).forEach(function(n){WG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WG(e,t,r){return(t=XG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XG(e){var t=ZG(e,"string");return typeof t=="symbol"?t:t+""}function ZG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Za={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:sr.axis};function QG(e){var{x:t,y:r,width:n,height:i,orientation:s,mirror:c,axisLine:u,otherSvgProps:m}=e;if(!u)return null;var h=ir(ir(ir({},m),xn(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var g=+(s==="top"&&!c||s==="bottom"&&c);h=ir(ir({},h),{},{x1:t,y1:r+g*i,x2:t+n,y2:r+g*i})}else{var p=+(s==="left"&&!c||s==="right"&&c);h=ir(ir({},h),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+i})}return y.createElement("line",Ko({},h,{className:ct("recharts-cartesian-axis-line",Uo(u,"className"))}))}function JG(e,t,r,n,i,s,c,u,m){var h,g,p,_,x,w,j=u?-1:1,S=e.tickSize||c,O=ke(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=g=e.coordinate,_=r+ +!u*i,p=_-j*S,w=p-j*m,x=O;break;case"left":p=_=e.coordinate,g=t+ +!u*n,h=g-j*S,x=h-j*m,w=O;break;case"right":p=_=e.coordinate,g=t+ +u*n,h=g+j*S,x=h+j*m,w=O;break;default:h=g=e.coordinate,_=r+ +u*i,p=_+j*S,w=p+j*m,x=O;break}return{line:{x1:h,y1:p,x2:g,y2:_},tick:{x,y:w}}}function eV(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function tV(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function rV(e){var{option:t,tickProps:r,value:n}=e,i,s=ct(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))i=y.cloneElement(t,ir(ir({},r),{},{className:s}));else if(typeof t=="function")i=t(ir(ir({},r),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=ct(c,t?.className)),i=y.createElement(sh,Ko({},r,{className:c}),n)}return i}var nV=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:c,unit:u,padding:m,tickTextProps:h,orientation:g,mirror:p,x:_,y:x,width:w,height:j,tickSize:S,tickMargin:O,fontSize:C,letterSpacing:A,getTicksConfig:k,events:D,axisType:M}=e,z=I_(ir(ir({},k),{},{ticks:r}),C,A),K=eV(g,p),Q=tV(g,p),ne=xn(k),G=zo(n),I={};typeof i=="object"&&(I=i);var ie=ir(ir({},ne),{},{fill:"none"},I),pe=z.map(U=>ir({entry:U},JG(U,_,x,w,j,g,S,p,O))),q=pe.map(U=>{var{entry:J,line:B}=U;return y.createElement(wr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&y.createElement("line",Ko({},ie,B,{className:ct("recharts-cartesian-axis-tick-line",Uo(i,"className"))})))}),R=pe.map((U,J)=>{var{entry:B,tick:fe}=U,je=ir(ir(ir(ir({textAnchor:K,verticalAnchor:Q},ne),{},{stroke:"none",fill:s},G),fe),{},{index:J,payload:B,visibleTicksCount:z.length,tickFormatter:c,padding:m},h);return y.createElement(wr,Ko({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(B.value,"-").concat(B.coordinate,"-").concat(B.tickCoord)},wm(D,B,J)),n&&y.createElement(rV,{option:n,tickProps:je,value:"".concat(typeof c=="function"?c(B.value,J):B.value).concat(u||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},R.length>0&&y.createElement(nn,{zIndex:sr.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:t},R)),q.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},q))}),aV=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:s,hide:c,ticks:u,axisType:m}=e,h=GG(e,YG),[g,p]=y.useState(""),[_,x]=y.useState(""),w=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return KG({ticks:w.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=y.useCallback(S=>{if(S){var O=S.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=O;var C=O[0];if(C){var A=window.getComputedStyle(C),k=A.fontSize,D=A.letterSpacing;(k!==g||D!==_)&&(p(k),x(D))}}},[g,_]);return c||n!=null&&n<=0||i!=null&&i<=0?null:y.createElement(nn,{zIndex:e.zIndex},y.createElement(wr,{className:ct("recharts-cartesian-axis",s)},y.createElement(QG,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:xn(e)}),y.createElement(nV,{ref:j,axisType:m,events:h,fontSize:g,getTicksConfig:e,height:e.height,letterSpacing:_,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(Q7,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(lK,{label:e.label,labelRef:e.labelRef}),e.children)))}),U_=y.forwardRef((e,t)=>{var r=jr(e,Za);return y.createElement(aV,Ko({},r,{ref:t}))});U_.displayName="CartesianAxis";var iV=["x1","y1","x2","y2","key"],oV=["offset"],sV=["xAxisId","yAxisId"],lV=["xAxisId","yAxisId"];function qA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Pr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(r),!0).forEach(function(n){cV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cV(e,t,r){return(t=uV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uV(e){var t=dV(e,"string");return typeof t=="symbol"?t:t+""}function dV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function To(){return To=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},To.apply(null,arguments)}function lm(e,t){if(e==null)return{};var r,n,i=fV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mV=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:c,ry:u}=e;return y.createElement("rect",{x:n,y:i,ry:u,width:s,height:c,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function SM(e){var{option:t,lineItemProps:r}=e,n;if(y.isValidElement(t))n=y.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:s,y1:c,x2:u,y2:m,key:h}=r,g=lm(r,iV),p=(i=xn(g))!==null&&i!==void 0?i:{},{offset:_}=p,x=lm(p,oV);n=y.createElement("line",To({},x,{x1:s,y1:c,x2:u,y2:m,fill:"none",key:h}))}return n}function hV(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=lm(e,sV),m=i.map((h,g)=>{var p=Pr(Pr({},u),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(g),index:g});return y.createElement(SM,{key:"line-".concat(g),option:n,lineItemProps:p})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function pV(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=lm(e,lV),m=i.map((h,g)=>{var p=Pr(Pr({},u),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(g),index:g});return y.createElement(SM,{option:n,lineItemProps:p,key:"line-".concat(g)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function gV(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:s,height:c,horizontalPoints:u,horizontal:m=!0}=e;if(!m||!t||!t.length||u==null)return null;var h=u.map(p=>Math.round(p+i-i)).sort((p,_)=>p-_);i!==h[0]&&h.unshift(0);var g=h.map((p,_)=>{var x=!h[_+1],w=x?i+c-p:h[_+1]-p;if(w<=0)return null;var j=_%t.length;return y.createElement("rect",{key:"react-".concat(_),y:p,x:n,height:w,width:s,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},g)}function vV(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:c,height:u,verticalPoints:m}=e;if(!t||!r||!r.length)return null;var h=m.map(p=>Math.round(p+i-i)).sort((p,_)=>p-_);i!==h[0]&&h.unshift(0);var g=h.map((p,_)=>{var x=!h[_+1],w=x?i+c-p:h[_+1]-p;if(w<=0)return null;var j=_%r.length;return y.createElement("rect",{key:"react-".concat(_),x:p,y:s,width:w,height:u,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},g)}var yV=(e,t)=>{var{xAxis:r,width:n,height:i,offset:s}=e;return dD(I_(Pr(Pr(Pr({},Za),r),{},{ticks:fD(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},bV=(e,t)=>{var{yAxis:r,width:n,height:i,offset:s}=e;return dD(I_(Pr(Pr(Pr({},Za),r),{},{ticks:fD(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},_V={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:sr.grid};function Eb(e){var t=xD(),r=wD(),n=_D(),i=Pr(Pr({},jr(e,_V)),{},{x:ke(e.x)?e.x:n.left,y:ke(e.y)?e.y:n.top,width:ke(e.width)?e.width:n.width,height:ke(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:c,x:u,y:m,width:h,height:g,syncWithTicks:p,horizontalValues:_,verticalValues:x}=i,w=qr(),j=De(Q=>OC(Q,"xAxis",s,w)),S=De(Q=>OC(Q,"yAxis",c,w));if(!ja(h)||!ja(g)||!ke(u)||!ke(m))return null;var O=i.verticalCoordinatesGenerator||yV,C=i.horizontalCoordinatesGenerator||bV,{horizontalPoints:A,verticalPoints:k}=i;if((!A||!A.length)&&typeof C=="function"){var D=_&&_.length,M=C({yAxis:S?Pr(Pr({},S),{},{ticks:D?_:S.ticks}):void 0,width:t??h,height:r??g,offset:n},D?!0:p);qf(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(A=M)}if((!k||!k.length)&&typeof O=="function"){var z=x&&x.length,K=O({xAxis:j?Pr(Pr({},j),{},{ticks:z?x:j.ticks}):void 0,width:t??h,height:r??g,offset:n},z?!0:p);qf(Array.isArray(K),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof K,"]")),Array.isArray(K)&&(k=K)}return y.createElement(nn,{zIndex:i.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(mV,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),y.createElement(gV,To({},i,{horizontalPoints:A})),y.createElement(vV,To({},i,{verticalPoints:k})),y.createElement(hV,To({},i,{offset:n,horizontalPoints:A,xAxis:j,yAxis:S})),y.createElement(pV,To({},i,{offset:n,verticalPoints:k,xAxis:j,yAxis:S}))))}Eb.displayName="CartesianGrid";var xV={},EM=rn({name:"errorBars",initialState:xV,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:FQ,replaceErrorBar:KQ,removeErrorBar:YQ}=EM.actions,wV=EM.reducer,jV=["children"];function SV(e,t){if(e==null)return{};var r,n,i=EV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function EV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var OV={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},CV=y.createContext(OV);function OM(e){var{children:t}=e,r=SV(e,jV);return y.createElement(CV.Provider,{value:r},t)}function B_(e,t){var r,n,i=De(h=>fi(h,e)),s=De(h=>mi(h,t)),c=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:yr.allowDataOverflow,u=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:br.allowDataOverflow,m=c||u;return{needClip:m,needClipX:c,needClipY:u}}function CM(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=z_(),{needClipX:s,needClipY:c,needClip:u}=B_(t,r);if(!u||!i)return null;var{x:m,y:h,width:g,height:p}=i;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:s?m:m-g/2,y:c?h:h-p/2,width:s?g:g*2,height:c?p:p*2}))}var AM=(e,t,r,n)=>Zi(e,"xAxis",t,n),NM=(e,t,r,n)=>Xi(e,"xAxis",t,n),kM=(e,t,r,n)=>Zi(e,"yAxis",r,n),DM=(e,t,r,n)=>Xi(e,"yAxis",r,n),AV=X([tt,AM,kM,NM,DM],(e,t,r,n,i)=>eo(e,"xAxis")?Ws(t,n,!1):Ws(r,i,!1)),NV=(e,t,r,n,i)=>i;function kV(e){return e.type==="line"}var DV=X([th,NV],(e,t)=>e.filter(kV).find(r=>r.id===t)),TV=X([tt,AM,kM,NM,DM,DV,AV,I0],(e,t,r,n,i,s,c,u)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:g}=u;if(!(s==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||c==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:p,data:_}=s,x;if(_!=null&&_.length>0?x=_:x=m?.slice(h,g+1),x!=null)return bW({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:p,bandSize:c,displayedData:x})}});function PV(e){var t=zo(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:s}=t,c=Number(i),u=Number(s);return(Number.isNaN(c)||c<0)&&(c=r),(Number.isNaN(u)||u<0)&&(u=n),{r:c,strokeWidth:u}}return{r,strokeWidth:n}}var my={exports:{}},hy={};var LA;function MV(){if(LA)return hy;LA=1;var e=mm();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,c=e.useMemo,u=e.useDebugValue;return hy.useSyncExternalStoreWithSelector=function(m,h,g,p,_){var x=i(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=c(function(){function S(D){if(!O){if(O=!0,C=D,D=p(D),_!==void 0&&w.hasValue){var M=w.value;if(_(M,D))return A=M}return A=D}if(M=A,r(C,D))return M;var z=p(D);return _!==void 0&&_(M,z)?(C=D,M):(C=D,A=z)}var O=!1,C,A,k=g===void 0?null:g;return[function(){return S(h())},k===null?void 0:function(){return S(k())}]},[h,g,p,_]);var j=n(m,x[0],x[1]);return s(function(){w.hasValue=!0,w.value=j},[j]),u(j),j},hy}var zA;function RV(){return zA||(zA=1,my.exports=MV()),my.exports}RV();function qV(e){e()}function LV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){qV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var IA={notify(){},get:()=>[]};function zV(e,t){let r,n=IA,i=0,s=!1;function c(j){g();const S=n.subscribe(j);let O=!1;return()=>{O||(O=!0,S(),p())}}function u(){n.notify()}function m(){w.onStateChange&&w.onStateChange()}function h(){return s}function g(){i++,r||(r=e.subscribe(m),n=LV())}function p(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=IA)}function _(){s||(s=!0,g())}function x(){s&&(s=!1,p())}const w={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:m,isSubscribed:h,trySubscribe:_,tryUnsubscribe:x,getListeners:()=>n};return w}var IV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UV=IV(),BV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",$V=BV(),HV=()=>UV||$V?y.useLayoutEffect:y.useEffect,FV=HV();function UA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function KV(e,t){if(UA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!UA(e[r[i]],t[r[i]]))return!1;return!0}var YV=Symbol.for("react-redux-context"),GV=typeof globalThis<"u"?globalThis:{};function VV(){if(!y.createContext)return{};const e=GV[YV]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var WV=VV();function XV(e){const{children:t,context:r,serverState:n,store:i}=e,s=y.useMemo(()=>{const m=zV(i);return{store:i,subscription:m,getServerState:n?()=>n:void 0}},[i,n]),c=y.useMemo(()=>i.getState(),[i]);FV(()=>{const{subscription:m}=s;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[s,c]);const u=r||WV;return y.createElement(u.Provider,{value:s},t)}var ZV=XV,QV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function JV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function fh(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(QV.has(n)){if(e[n]==null&&t[n]==null)continue;if(!KV(e[n],t[n]))return!1}else if(!JV(e[n],t[n]))return!1;return!0}var eW=["id"],tW=["type","layout","connectNulls","needClip","shape"],rW=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fc.apply(null,arguments)}function BA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ya(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BA(Object(r),!0).forEach(function(n){nW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nW(e,t,r){return(t=aW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aW(e){var t=iW(e,"string");return typeof t=="symbol"?t:t+""}function iW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $_(e,t){if(e==null)return{};var r,n,i=oW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function oW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var sW=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:al(r,t),payload:e}]},lW=y.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:s,name:c,hide:u,unit:m,tooltipType:h,id:g}=e,p={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:al(c,t),hide:u,type:h,color:n,unit:m,graphicalItemId:g}};return y.createElement(q_,{tooltipEntrySettings:p})}),TM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function cW(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var uW=(e,t,r)=>{var n=r.reduce((p,_)=>p+_);if(!n)return TM(t,e);for(var i=Math.floor(e/n),s=e%n,c=t-e,u=[],m=0,h=0;m<r.length;h+=r[m],++m)if(h+r[m]>s){u=[...r.slice(0,m),s-h];break}var g=u.length%2===0?[0,c]:[c];return[...cW(r,i),...u,...g].map(p=>"".concat(p,"px")).join(", ")};function dW(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:s,needClip:c}=n,{id:u}=n,m=$_(n,eW),h=xn(m);return y.createElement(ZY,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:c,clipPathId:t})}function fW(e){var{showLabels:t,children:r,points:n}=e,i=y.useMemo(()=>n?.map(s=>{var c,u,m={x:(c=s.x)!==null&&c!==void 0?c:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ya(ya({},m),{},{value:s.value,payload:s.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[n]);return y.createElement(nM,{value:t?i:void 0},r)}function $A(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:s}=e,{type:c,layout:u,connectNulls:m,needClip:h,shape:g}=s,p=$_(s,tW),_=ya(ya({},Hr(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:c,layout:u,connectNulls:m,strokeDasharray:i??s.strokeDasharray});return y.createElement(y.Fragment,null,n?.length>1&&y.createElement(T_,Fc({shapeType:"curve",option:g},_,{pathRef:r})),y.createElement(dW,{points:n,clipPathId:t,props:s}))}function mW(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function hW(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:c,strokeDasharray:u,isAnimationActive:m,animationBegin:h,animationDuration:g,animationEasing:p,animateNewValues:_,width:x,height:w,onAnimationEnd:j,onAnimationStart:S}=r,O=i.current,C=ru(c,"recharts-line-"),A=y.useRef(C),[k,D]=y.useState(!1),M=!k,z=y.useCallback(()=>{typeof j=="function"&&j(),D(!1)},[j]),K=y.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),Q=mW(n.current),ne=y.useRef(0);A.current!==C&&(ne.current=s.current,A.current=C);var G=ne.current;return y.createElement(fW,{points:c,showLabels:M},r.children,y.createElement(tu,{animationId:C,begin:h,duration:g,isActive:m,easing:p,onAnimationEnd:z,onAnimationStart:K,key:C},I=>{var ie=Tt(G,Q+G,I),pe=Math.min(ie,Q),q;if(m)if(u){var R="".concat(u).split(/[,\s]+/gim).map(B=>parseFloat(B));q=uW(pe,Q,R)}else q=TM(Q,pe);else q=u==null?void 0:String(u);if(I>0&&Q>0&&(i.current=c,s.current=Math.max(s.current,pe)),O){var U=O.length/c.length,J=I===1?c:c.map((B,fe)=>{var je=Math.floor(fe*U);if(O[je]){var te=O[je];return ya(ya({},B),{},{x:Tt(te.x,B.x,I),y:Tt(te.y,B.y,I)})}return _?ya(ya({},B),{},{x:Tt(x*2,B.x,I),y:Tt(w/2,B.y,I)}):ya(ya({},B),{},{x:B.x,y:B.y})});return i.current=J,y.createElement($A,{props:r,points:J,clipPathId:t,pathRef:n,strokeDasharray:q})}return y.createElement($A,{props:r,points:c,clipPathId:t,pathRef:n,strokeDasharray:q})}),y.createElement(A_,{label:r.label}))}function pW(e){var{clipPathId:t,props:r}=e,n=y.useRef(null),i=y.useRef(0),s=y.useRef(null);return y.createElement(hW,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var gW=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:bt(e.payload,t)}};class vW extends y.Component{render(){var{hide:t,dot:r,points:n,className:i,xAxisId:s,yAxisId:c,top:u,left:m,width:h,height:g,id:p,needClip:_,zIndex:x}=this.props;if(t)return null;var w=ct("recharts-line",i),j=p,{r:S,strokeWidth:O}=PV(r),C=dM(r),A=S*2+O,k=_?"url(#clipPath-".concat(C?"":"dots-").concat(j,")"):void 0;return y.createElement(nn,{zIndex:x},y.createElement(wr,{className:w},_&&y.createElement("defs",null,y.createElement(CM,{clipPathId:j,xAxisId:s,yAxisId:c}),!C&&y.createElement("clipPath",{id:"clipPath-dots-".concat(j)},y.createElement("rect",{x:m-A/2,y:u-A/2,width:h+A,height:g+A}))),y.createElement(OM,{xAxisId:s,yAxisId:c,data:n,dataPointFormatter:gW,errorBarOffset:0},y.createElement(pW,{props:this.props,clipPathId:j}))),y.createElement(vG,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var PM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:sr.line,type:"linear"};function yW(e){var t=jr(e,PM),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,connectNulls:u,dot:m,hide:h,isAnimationActive:g,label:p,legendType:_,xAxisId:x,yAxisId:w,id:j}=t,S=$_(t,rW),{needClip:O}=B_(x,w),C=z_(),A=Xo(),k=qr(),D=De(ne=>TV(ne,x,w,k,j));if(A!=="horizontal"&&A!=="vertical"||D==null||C==null)return null;var{height:M,width:z,x:K,y:Q}=C;return y.createElement(vW,Fc({},S,{id:j,connectNulls:u,dot:m,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,isAnimationActive:g,hide:h,label:p,legendType:_,xAxisId:x,yAxisId:w,points:D,layout:A,height:M,width:z,left:K,top:Q,needClip:O}))}function bW(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:c,bandSize:u,displayedData:m}=e;return m.map((h,g)=>{var p=bt(h,c);if(t==="horizontal"){var _=kE({axis:r,ticks:i,bandSize:u,entry:h,index:g}),x=Rt(p)?null:n.scale(p);return{x:_,y:x,value:p,payload:h}}var w=Rt(p)?null:r.scale(p),j=kE({axis:n,ticks:s,bandSize:u,entry:h,index:g});return w==null||j==null?null:{x:w,y:j,value:p,payload:h}}).filter(Boolean)}function _W(e){var t=jr(e,PM),r=qr();return y.createElement(L_,{id:t.id,type:"line"},n=>y.createElement(y.Fragment,null,y.createElement(fM,{legendPayload:sW(t)}),y.createElement(lW,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),y.createElement(hM,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),y.createElement(yW,Fc({},t,{id:n}))))}var MM=y.memo(_W,fh);MM.displayName="Line";function Jo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:gM}function es(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:gM}var xW="Invariant failed";function wW(e,t){throw new Error(xW)}function Ob(){return Ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ob.apply(null,arguments)}function cm(e){return y.createElement(T_,Ob({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var jW=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(ke(t))return t;var s=ke(n)||Rt(n);return s?t(n,i):(s||wW(),r)}},SW=(e,t,r)=>r,EW=(e,t)=>t,vu=X([th,EW],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),OW=X([vu],e=>e?.maxBarSize),CW=(e,t,r,n)=>n,AW=X([tt,th,Jo,es,SW],(e,t,r,n,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),NW=(e,t,r)=>{var n=tt(e),i=Jo(e,t),s=es(e,t);if(!(i==null||s==null))return n==="horizontal"?vb(e,"yAxis",s,r):vb(e,"xAxis",i,r)},kW=(e,t)=>{var r=tt(e),n=Jo(e,t),i=es(e,t);if(!(n==null||i==null))return r==="horizontal"?EC(e,"xAxis",n):EC(e,"yAxis",i)},DW=X([AW,J8,kW],yG),TW=(e,t,r)=>{var n,i,s=vu(e,t);if(s!=null){var c=Jo(e,t),u=es(e,t);if(!(c==null||u==null)){var m=tt(e),h=zT(e),{maxBarSize:g}=s,p=Rt(g)?h:g,_,x;return m==="horizontal"?(_=Zi(e,"xAxis",c,r),x=Xi(e,"xAxis",c,r)):(_=Zi(e,"yAxis",u,r),x=Xi(e,"yAxis",u,r)),(n=(i=Ws(_,x,!0))!==null&&i!==void 0?i:p)!==null&&n!==void 0?n:0}}},RM=(e,t,r)=>{var n=tt(e),i=Jo(e,t),s=es(e,t);if(!(i==null||s==null)){var c,u;return n==="horizontal"?(c=Zi(e,"xAxis",i,r),u=Xi(e,"xAxis",i,r)):(c=Zi(e,"yAxis",s,r),u=Xi(e,"yAxis",s,r)),Ws(c,u)}},PW=X([DW,zT,Q8,IT,TW,RM,OW],jG),MW=(e,t,r)=>{var n=Jo(e,t);if(n!=null)return Zi(e,"xAxis",n,r)},RW=(e,t,r)=>{var n=es(e,t);if(n!=null)return Zi(e,"yAxis",n,r)},qW=(e,t,r)=>{var n=Jo(e,t);if(n!=null)return Xi(e,"xAxis",n,r)},LW=(e,t,r)=>{var n=es(e,t);if(n!=null)return Xi(e,"yAxis",n,r)},zW=X([PW,vu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),IW=X([NW,vu],SG),UW=X([mr,d0,MW,RW,qW,LW,zW,tt,U8,RM,IW,vu,CW],(e,t,r,n,i,s,c,u,m,h,g,p,_)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:j}=m;if(!(p==null||c==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||i==null||s==null||h==null)){var{data:S}=p,O;if(S!=null&&S.length>0?O=S:O=x?.slice(w,j+1),O!=null)return pX({layout:u,barSettings:p,pos:c,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:g,displayedData:O,offset:e,cells:_,dataStartIndex:w})}}),BW=["index"];function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(null,arguments)}function $W(e,t){if(e==null)return{};var r,n,i=HW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function HW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qM=y.createContext(void 0),FW=e=>{var t=y.useContext(qM);if(t!=null)return t.stackId;if(e!=null)return W4(e)},KW=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),YW=e=>{var t=y.useContext(qM);if(t!=null){var{stackId:r}=t;return"url(#".concat(KW(r,e),")")}},GW=e=>{var{index:t}=e,r=$W(e,BW),n=YW(t);return y.createElement(wr,Cb({className:"recharts-bar-stack-layer",clipPath:n},r))},VW=["onMouseEnter","onMouseLeave","onClick"],WW=["value","background","tooltipPosition"],XW=["id"],ZW=["onMouseEnter","onClick","onMouseLeave"];function ii(){return ii=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ii.apply(null,arguments)}function HA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HA(Object(r),!0).forEach(function(n){QW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QW(e,t,r){return(t=JW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JW(e){var t=eX(e,"string");return typeof t=="symbol"?t:t+""}function eX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function um(e,t){if(e==null)return{};var r,n,i=tX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function tX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rX=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:al(r,t),payload:e}]},nX=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:s,hide:c,unit:u,tooltipType:m,id:h}=e,g={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:al(s,t),hide:c,type:m,color:i,unit:u,graphicalItemId:h}};return y.createElement(q_,{tooltipEntrySettings:g})});function aX(e){var t=De(Qi),{data:r,dataKey:n,background:i,allOtherBarProps:s}=e,{onMouseEnter:c,onMouseLeave:u,onClick:m}=s,h=um(s,VW),g=P_(c,n,s.id),p=M_(u),_=R_(m,n,s.id);if(!i||r==null)return null;var x=zo(i);return y.createElement(nn,{zIndex:EG(i,sr.barBackground)},r.map((w,j)=>{var{value:S,background:O,tooltipPosition:C}=w,A=um(w,WW);if(!O)return null;var k=g(w,j),D=p(w,j),M=_(w,j),z=Br(Br(Br(Br(Br({option:i,isActive:String(j)===t},A),{},{fill:"#eee"},O),x),wm(h,w,j)),{},{onMouseEnter:k,onMouseLeave:D,onClick:M,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return y.createElement(cm,ii({key:"background-bar-".concat(j)},z))}))}function iX(e){var{showLabels:t,children:r,rects:n}=e,i=n?.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Br(Br({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return y.createElement(nM,{value:t?i:void 0},r)}function oX(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:s,dataKey:c}=e,u=De(Qi),m=De(x_),h=r&&String(s)===u&&(m==null||c===m),g=h?r:t;return h?y.createElement(nn,{zIndex:sr.activeBar},y.createElement(cm,ii({},n,{name:String(n.name)},i,{isActive:h,option:g,index:s,dataKey:c}))):y.createElement(cm,ii({},n,{name:String(n.name)},i,{isActive:h,option:g,index:s,dataKey:c}))}function sX(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:s}=e;return y.createElement(cm,ii({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:s}))}function lX(e){var t,{data:r,props:n}=e,i=(t=xn(n))!==null&&t!==void 0?t:{},{id:s}=i,c=um(i,XW),{shape:u,dataKey:m,activeBar:h}=n,{onMouseEnter:g,onClick:p,onMouseLeave:_}=n,x=um(n,ZW),w=P_(g,m,s),j=M_(_),S=R_(p,m,s);return r?y.createElement(y.Fragment,null,r.map((O,C)=>y.createElement(GW,ii({index:C,key:"rectangle-".concat(O?.x,"-").concat(O?.y,"-").concat(O?.value,"-").concat(C),className:"recharts-bar-rectangle"},wm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),h?y.createElement(oX,{shape:u,activeBar:h,baseProps:c,entry:O,index:C,dataKey:m}):y.createElement(sX,{shape:u,baseProps:c,entry:O,index:C,dataKey:m})))):null}function cX(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,onAnimationEnd:h,onAnimationStart:g}=t,p=r.current,_=ru(t,"recharts-bar-"),[x,w]=y.useState(!1),j=!x,S=y.useCallback(()=>{typeof h=="function"&&h(),w(!1)},[h]),O=y.useCallback(()=>{typeof g=="function"&&g(),w(!0)},[g]);return y.createElement(iX,{showLabels:j,rects:n},y.createElement(tu,{animationId:_,begin:c,duration:u,isActive:s,easing:m,onAnimationEnd:S,onAnimationStart:O,key:_},C=>{var A=C===1?n:n?.map((k,D)=>{var M=p&&p[D];if(M)return Br(Br({},k),{},{x:Tt(M.x,k.x,C),y:Tt(M.y,k.y,C),width:Tt(M.width,k.width,C),height:Tt(M.height,k.height,C)});if(i==="horizontal"){var z=Tt(0,k.height,C),K=Tt(k.stackedBarStart,k.y,C);return Br(Br({},k),{},{y:K,height:z})}var Q=Tt(0,k.width,C),ne=Tt(k.stackedBarStart,k.x,C);return Br(Br({},k),{},{width:Q,x:ne})});return C>0&&(r.current=A??null),A==null?null:y.createElement(wr,null,y.createElement(lX,{props:t,data:A}))}),y.createElement(A_,{label:t.label}),t.children)}function uX(e){var t=y.useRef(null);return y.createElement(cX,{previousRectanglesRef:t,props:e})}var LM=0,dX=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:bt(e,t)}};class fX extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:s,yAxisId:c,needClip:u,background:m,id:h}=this.props;if(t||r==null)return null;var g=ct("recharts-bar",i),p=h;return y.createElement(wr,{className:g,id:h},u&&y.createElement("defs",null,y.createElement(CM,{clipPathId:p,xAxisId:s,yAxisId:c})),y.createElement(wr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},y.createElement(aX,{data:r,dataKey:n,background:m,allOtherBarProps:this.props}),y.createElement(uX,this.props)))}}var mX={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:LM,xAxisId:0,yAxisId:0,zIndex:sr.bar};function hX(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:g}=e,{needClip:p}=B_(t,r),_=Xo(),x=qr(),w=D_(e.children,gu),j=De(C=>UW(C,e.id,x,w));if(_!=="vertical"&&_!=="horizontal")return null;var S,O=j?.[0];return O==null||O.height==null||O.width==null?S=0:S=_==="vertical"?O.height/2:O.width/2,y.createElement(OM,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:dX,errorBarOffset:S},y.createElement(fX,ii({},e,{layout:_,needClip:p,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:g})))}function pX(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:c,yAxis:u,xAxisTicks:m,yAxisTicks:h,stackedData:g,displayedData:p,offset:_,cells:x,parentViewBox:w,dataStartIndex:j}=e,S=t==="horizontal"?u:c,O=g?S.scale.domain():null,C=X4({numericAxis:S}),A=S.scale(C);return p.map((k,D)=>{var M,z,K,Q,ne,G;if(g){var I=g[D+j];if(I==null)return null;M=F4(I,O)}else M=bt(k,r),Array.isArray(M)||(M=[C,M]);var ie=jW(n,LM)(M[1],D);if(t==="horizontal"){var pe,[q,R]=[u.scale(M[0]),u.scale(M[1])];z=DE({axis:c,ticks:m,bandSize:s,offset:i.offset,entry:k,index:D}),K=(pe=R??q)!==null&&pe!==void 0?pe:void 0,Q=i.size;var U=q-R;if(ne=ia(U)?0:U,G={x:z,y:_.top,width:Q,height:_.height},Math.abs(ie)>0&&Math.abs(ne)<Math.abs(ie)){var J=xr(ne||ie)*(Math.abs(ie)-Math.abs(ne));K-=J,ne+=J}}else{var[B,fe]=[c.scale(M[0]),c.scale(M[1])];if(z=B,K=DE({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:k,index:D}),Q=fe-B,ne=i.size,G={x:_.left,y:K,width:_.width,height:ne},Math.abs(ie)>0&&Math.abs(Q)<Math.abs(ie)){var je=xr(Q||ie)*(Math.abs(ie)-Math.abs(Q));Q+=je}}if(z==null||K==null||Q==null||ne==null)return null;var te=Br(Br({},k),{},{stackedBarStart:A,x:z,y:K,width:Q,height:ne,value:g?M:M[1],payload:k,background:G,tooltipPosition:{x:z+Q/2,y:K+ne/2},parentViewBox:w},x&&x[D]&&x[D].props);return te}).filter(Boolean)}function gX(e){var t=jr(e,mX),r=FW(t.stackId),n=qr();return y.createElement(L_,{id:t.id,type:"bar"},i=>y.createElement(y.Fragment,null,y.createElement(fM,{legendPayload:rX(t)}),y.createElement(nX,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),y.createElement(hM,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),y.createElement(nn,{zIndex:t.zIndex},y.createElement(hX,ii({},t,{id:i})))))}var zM=y.memo(gX,fh);zM.displayName="Bar";var vX=["domain","range"],yX=["domain","range"];function FA(e,t){if(e==null)return{};var r,n,i=bX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function KA(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function IM(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=FA(e,vX),{domain:s,range:c}=t,u=FA(t,yX);return!KA(r,s)||!KA(n,c)?!1:fh(i,u)}var _X=["dangerouslySetInnerHTML","ticks","scale"],xX=["id","scale"];function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ab.apply(null,arguments)}function YA(e,t){if(e==null)return{};var r,n,i=wX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function jX(e){var t=qt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(rG(e)):r.current!==e&&t(nG({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(aG(r.current)),r.current=null)},[t]),null}var SX=e=>{var{xAxisId:t,className:r}=e,n=De(d0),i=qr(),s="xAxis",c=De(O=>vP(O,s,t,i)),u=De(O=>mP(O,t)),m=De(O=>XH(O,t)),h=De(O=>VT(O,t));if(u==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:g,ticks:p,scale:_}=e,x=YA(e,_X),{id:w,scale:j}=h,S=YA(h,xX);return y.createElement(U_,Ab({},x,S,{x:m.x,y:m.y,width:u.width,height:u.height,className:ct("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:c,axisType:s}))},EX={allowDataOverflow:yr.allowDataOverflow,allowDecimals:yr.allowDecimals,allowDuplicatedCategory:yr.allowDuplicatedCategory,angle:yr.angle,axisLine:Za.axisLine,height:yr.height,hide:!1,includeHidden:yr.includeHidden,interval:yr.interval,minTickGap:yr.minTickGap,mirror:yr.mirror,orientation:yr.orientation,padding:yr.padding,reversed:yr.reversed,scale:yr.scale,tick:yr.tick,tickCount:yr.tickCount,tickLine:Za.tickLine,tickSize:Za.tickSize,type:yr.type,xAxisId:0},OX=e=>{var t=jr(e,EX);return y.createElement(y.Fragment,null,y.createElement(jX,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(SX,t))},Nb=y.memo(OX,IM);Nb.displayName="XAxis";var CX=["dangerouslySetInnerHTML","ticks","scale"],AX=["id","scale"];function kb(){return kb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kb.apply(null,arguments)}function GA(e,t){if(e==null)return{};var r,n,i=NX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function NX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kX(e){var t=qt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(iG(e)):r.current!==e&&t(oG({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(sG(r.current)),r.current=null)},[t]),null}var DX=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,s=y.useRef(null),c=y.useRef(null),u=De(d0),m=qr(),h=qt(),g="yAxis",p=De(M=>hP(M,t)),_=De(M=>QH(M,t)),x=De(M=>vP(M,g,t,m)),w=De(M=>WT(M,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!p||C_(i)||y.isValidElement(i)||w==null)){var M=s.current;if(M){var z=M.getCalculatedWidth();Math.round(p.width)!==Math.round(z)&&h(lG({id:t,width:z}))}}},[x,p,h,i,t,n,w]),p==null||_==null||w==null)return null;var{dangerouslySetInnerHTML:j,ticks:S,scale:O}=e,C=GA(e,CX),{id:A,scale:k}=w,D=GA(w,AX);return y.createElement(U_,kb({},C,D,{ref:s,labelRef:c,x:_.x,y:_.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:ct("recharts-".concat(g," ").concat(g),r),viewBox:u,ticks:x,axisType:g}))},TX={allowDataOverflow:br.allowDataOverflow,allowDecimals:br.allowDecimals,allowDuplicatedCategory:br.allowDuplicatedCategory,angle:br.angle,axisLine:Za.axisLine,hide:!1,includeHidden:br.includeHidden,interval:br.interval,minTickGap:br.minTickGap,mirror:br.mirror,orientation:br.orientation,padding:br.padding,reversed:br.reversed,scale:br.scale,tick:br.tick,tickCount:br.tickCount,tickLine:Za.tickLine,tickSize:Za.tickSize,type:br.type,width:br.width,yAxisId:0},PX=e=>{var t=jr(e,TX);return y.createElement(y.Fragment,null,y.createElement(kX,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(DX,t))},Db=y.memo(PX,IM);Db.displayName="YAxis";var MX=(e,t)=>t,H_=X([MX,tt,YT,pr,PP,hi,hF,mr],xF),F_=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},UM=Hn("mouseClick"),BM=Qc();BM.startListening({actionCreator:UM,effect:(e,t)=>{var r=e.payload,n=H_(t.getState(),F_(r));n?.activeIndex!=null&&t.dispatch(f9({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Tb=Hn("mouseMove"),$M=Qc(),rf=null;$M.startListening({actionCreator:Tb,effect:(e,t)=>{var r=e.payload;rf!==null&&cancelAnimationFrame(rf);var n=F_(r);rf=requestAnimationFrame(()=>{var i=t.getState(),s=p_(i,i.tooltip.settings.shared);if(s==="axis"){var c=H_(i,n);c?.activeIndex!=null?t.dispatch(EP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):t.dispatch(SP())}rf=null})}});function RX(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var VA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},HM=rn({name:"rootProps",initialState:VA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:VA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),qX=HM.reducer,{updateOptions:LX}=HM.actions,FM=rn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:zX}=FM.actions,IX=FM.reducer,KM=Hn("keyDown"),YM=Hn("focus"),K_=Qc();K_.startListening({actionCreator:KM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=g_(i,ml(r),du(r),hu(r)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var m=hi(r);if(s==="Enter"){var h=nm(r,"axis","hover",String(i.index));t.dispatch(bb({active:!i.active,activeIndex:i.index,activeCoordinate:h}));return}var g=r9(r),p=g==="left-to-right"?1:-1,_=s==="ArrowRight"?1:-1,x=u+_*p;if(!(m==null||x>=m.length||x<0)){var w=nm(r,"axis","hover",String(x));t.dispatch(bb({active:!0,activeIndex:x.toString(),activeCoordinate:w}))}}}}}});K_.startListening({actionCreator:YM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",c=nm(r,"axis","hover",String(s));t.dispatch(bb({active:!0,activeIndex:s,activeCoordinate:c}))}}}});var In=Hn("externalEvent"),GM=Qc(),py=new Map;GM.startListening({actionCreator:In,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,s=py.get(i);s!==void 0&&cancelAnimationFrame(s);var c=requestAnimationFrame(()=>{try{var u=t.getState(),m={activeCoordinate:Q9(u),activeDataKey:x_(u),activeIndex:Qi(u),activeLabel:qP(u),activeTooltipIndex:Qi(u),isTooltipActive:J9(u)};r(m,n)}finally{py.delete(i)}});py.set(i,c)}}});var UX=X([dl],e=>e.tooltipItemPayloads),BX=X([UX,mu,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(u=>u.settings.graphicalItemId===n);if(i!=null){var{positions:s}=i;if(s!=null){var c=t(s,r);return c}}}),VM=Hn("touchMove"),WM=Qc();WM.startListening({actionCreator:VM,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=p_(n,n.tooltip.settings.shared);if(i==="axis"){var s=r.touches[0];if(s==null)return;var c=H_(n,F_({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));c?.activeIndex!=null&&t.dispatch(EP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,m=r.touches[0];if(document.elementFromPoint==null||m==null)return;var h=document.elementFromPoint(m.clientX,m.clientY);if(!h||!h.getAttribute)return;var g=h.getAttribute(hD),p=(u=h.getAttribute(pD))!==null&&u!==void 0?u:void 0,_=fl(n).find(j=>j.id===p);if(g==null||_==null||p==null)return;var{dataKey:x}=_,w=BX(n,g,p);t.dispatch(jP({activeDataKey:x,activeIndex:g,activeCoordinate:w,activeGraphicalItemId:p}))}}}});var $X=qk({brush:OG,cartesianAxis:cG,chartData:QF,errorBars:wV,graphicalItems:pY,layout:z4,legend:FU,options:GF,polarAxis:NK,polarOptions:IX,referenceElements:PG,rootProps:qX,tooltip:m9,zIndex:RF}),HX=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return c4({reducer:$X,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([BM.middleware,$M.middleware,K_.middleware,GM.middleware,WM.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(Zk({type:"raf"}))},devTools:{serialize:{replacer:RX},name:"recharts-".concat(r)}})};function XM(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=qr(),s=y.useRef(null);if(i)return r;s.current==null&&(s.current=HX(t,n));var c=a0;return y.createElement(ZV,{context:c,store:s.current},r)}function FX(e){var{layout:t,margin:r}=e,n=qt(),i=qr();return y.useEffect(()=>{i||(n(R4(t)),n(M4(r)))},[n,i,t,r]),null}var ZM=y.memo(FX,fh);function QM(e){var t=qt();return y.useEffect(()=>{t(LX(e))},[t,e]),null}function WA(e){var{zIndex:t,isPanorama:r}=e,n=y.useRef(null),i=qt();return y.useLayoutEffect(()=>(n.current&&i(PF({zIndex:t,element:n.current,isPanorama:r})),()=>{i(MF({zIndex:t,isPanorama:r}))}),[i,t,r]),y.createElement("g",{tabIndex:-1,ref:n})}function XA(e){var{children:t,isPanorama:r}=e,n=De(jF);if(!n||n.length===0)return t;var i=n.filter(c=>c<0),s=n.filter(c=>c>0);return y.createElement(y.Fragment,null,i.map(c=>y.createElement(WA,{key:c,zIndex:c,isPanorama:r})),t,s.map(c=>y.createElement(WA,{key:c,zIndex:c,isPanorama:r})))}var KX=["children"];function YX(e,t){if(e==null)return{};var r,n,i=GX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function GX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dm.apply(null,arguments)}var VX={width:"100%",height:"100%",display:"block"},WX=y.forwardRef((e,t)=>{var r=xD(),n=wD(),i=PD();if(!ja(r)||!ja(n))return null;var{children:s,otherAttributes:c,title:u,desc:m}=e,h,g;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=i?0:void 0,typeof c.role=="string"?g=c.role:g=i?"application":void 0),y.createElement(QN,dm({},c,{title:u,desc:m,role:g,tabIndex:h,width:r,height:n,style:VX,ref:t}),s)}),XX=e=>{var{children:t}=e,r=De(qm);if(!r)return null;var{width:n,height:i,y:s,x:c}=r;return y.createElement(QN,{width:n,height:i,x:c,y:s},t)},ZA=y.forwardRef((e,t)=>{var{children:r}=e,n=YX(e,KX),i=qr();return i?y.createElement(XX,null,y.createElement(XA,{isPanorama:!0},r)):y.createElement(WX,dm({ref:t},n),y.createElement(XA,{isPanorama:!1},r))});function ZX(){var e=qt(),[t,r]=y.useState(null),n=De(rU);return y.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;It(s)&&s!==n&&e(L4(s))}},[t,e,n]),r}function QA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function QX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(r),!0).forEach(function(n){JX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JX(e,t,r){return(t=eZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eZ(e){var t=tZ(e,"string");return typeof t=="symbol"?t:t+""}function tZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yo(){return Yo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yo.apply(null,arguments)}var rZ=()=>(s7(),null);function fm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var nZ=y.forwardRef((e,t)=>{var r,n,i=y.useRef(null),[s,c]=y.useState({containerWidth:fm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:fm((n=e.style)===null||n===void 0?void 0:n.height)}),u=y.useCallback((h,g)=>{c(p=>{var _=Math.round(h),x=Math.round(g);return p.containerWidth===_&&p.containerHeight===x?p:{containerWidth:_,containerHeight:x}})},[]),m=y.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:g,height:p}=h.getBoundingClientRect();u(g,p);var _=w=>{var{width:j,height:S}=w[0].contentRect;u(j,S)},x=new ResizeObserver(_);x.observe(h),i.current=x}},[t,u]);return y.useEffect(()=>()=>{var h=i.current;h?.disconnect()},[u]),y.createElement(y.Fragment,null,y.createElement(zm,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",Yo({ref:m},e)))}),aZ=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,s]=y.useState({containerWidth:fm(r),containerHeight:fm(n)}),c=y.useCallback((m,h)=>{s(g=>{var p=Math.round(m),_=Math.round(h);return g.containerWidth===p&&g.containerHeight===_?g:{containerWidth:p,containerHeight:_}})},[]),u=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:h,height:g}=m.getBoundingClientRect();c(h,g)}},[t,c]);return y.createElement(y.Fragment,null,y.createElement(zm,{width:i.containerWidth,height:i.containerHeight}),y.createElement("div",Yo({ref:u},e)))}),iZ=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(zm,{width:r,height:n}),y.createElement("div",Yo({ref:t},e)))}),oZ=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ja(r)||Ja(n)?y.createElement(aZ,Yo({},e,{ref:t})):y.createElement(iZ,Yo({},e,{ref:t}))});function sZ(e){return e===!0?nZ:oZ}var lZ=y.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:c,onDoubleClick:u,onMouseDown:m,onMouseEnter:h,onMouseLeave:g,onMouseMove:p,onMouseUp:_,onTouchEnd:x,onTouchMove:w,onTouchStart:j,style:S,width:O,responsive:C,dispatchTouchEvents:A=!0}=e,k=y.useRef(null),D=qt(),[M,z]=y.useState(null),[K,Q]=y.useState(null),ne=ZX(),G=f0(),I=G?.width>0?G.width:O,ie=G?.height>0?G.height:i,pe=y.useCallback(ee=>{ne(ee),typeof t=="function"&&t(ee),z(ee),Q(ee),ee!=null&&(k.current=ee)},[ne,t,z,Q]),q=y.useCallback(ee=>{D(UM(ee)),D(In({handler:s,reactEvent:ee}))},[D,s]),R=y.useCallback(ee=>{D(Tb(ee)),D(In({handler:h,reactEvent:ee}))},[D,h]),U=y.useCallback(ee=>{D(SP()),D(In({handler:g,reactEvent:ee}))},[D,g]),J=y.useCallback(ee=>{D(Tb(ee)),D(In({handler:p,reactEvent:ee}))},[D,p]),B=y.useCallback(()=>{D(YM())},[D]),fe=y.useCallback(ee=>{D(KM(ee.key))},[D]),je=y.useCallback(ee=>{D(In({handler:c,reactEvent:ee}))},[D,c]),te=y.useCallback(ee=>{D(In({handler:u,reactEvent:ee}))},[D,u]),H=y.useCallback(ee=>{D(In({handler:m,reactEvent:ee}))},[D,m]),Ee=y.useCallback(ee=>{D(In({handler:_,reactEvent:ee}))},[D,_]),Te=y.useCallback(ee=>{D(In({handler:j,reactEvent:ee}))},[D,j]),Ie=y.useCallback(ee=>{A&&D(VM(ee)),D(In({handler:w,reactEvent:ee}))},[D,A,w]),ge=y.useCallback(ee=>{D(In({handler:x,reactEvent:ee}))},[D,x]),Le=sZ(C);return y.createElement(HP.Provider,{value:M},y.createElement(JN.Provider,{value:K},y.createElement(Le,{width:I??S?.width,height:ie??S?.height,className:ct("recharts-wrapper",n),style:QX({position:"relative",cursor:"default",width:I,height:ie},S),onClick:q,onContextMenu:je,onDoubleClick:te,onFocus:B,onKeyDown:fe,onMouseDown:H,onMouseEnter:R,onMouseLeave:U,onMouseMove:J,onMouseUp:Ee,onTouchEnd:ge,onTouchMove:Ie,onTouchStart:Te,ref:pe},y.createElement(rZ,null),r)))}),cZ=["width","height","responsive","children","className","style","compact","title","desc"];function uZ(e,t){if(e==null)return{};var r,n,i=dZ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JM=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:s,className:c,style:u,compact:m,title:h,desc:g}=e,p=uZ(e,cZ),_=xn(p);return m?y.createElement(y.Fragment,null,y.createElement(zm,{width:r,height:n}),y.createElement(ZA,{otherAttributes:_,title:h,desc:g},s)):y.createElement(lZ,{className:c,style:u,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(ZA,{otherAttributes:_,title:h,desc:g,ref:t},y.createElement(MG,null,s)))});function Pb(){return Pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pb.apply(null,arguments)}var fZ={top:5,right:5,bottom:5,left:5},mZ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:fZ,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},e2=y.forwardRef(function(t,r){var n,i=jr(t.categoricalChartProps,mZ),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,g={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(XM,{preloadedState:{options:g},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:s},y.createElement(yM,{chartData:h.data}),y.createElement(ZM,{layout:i.layout,margin:i.margin}),y.createElement(QM,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(JM,Pb({},i,{ref:r})))}),hZ=["axis"],pZ=y.forwardRef((e,t)=>y.createElement(e2,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:hZ,tooltipPayloadSearcher:O_,categoricalChartProps:e,ref:t})),gZ=["axis","item"],vZ=y.forwardRef((e,t)=>y.createElement(e2,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:gZ,tooltipPayloadSearcher:O_,categoricalChartProps:e,ref:t}));function yZ(e){var t=qt();return y.useEffect(()=>{t(zX(e))},[t,e]),null}var bZ=["layout"];function Mb(){return Mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mb.apply(null,arguments)}function _Z(e,t){if(e==null)return{};var r,n,i=xZ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var wZ={top:5,right:5,bottom:5,left:5},t2={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:wZ,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},jZ=y.forwardRef(function(t,r){var n,i=jr(t.categoricalChartProps,t2),{layout:s}=i,c=_Z(i,bZ),{chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:g}=t,p={chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,eventEmitter:void 0};return y.createElement(XM,{preloadedState:{options:p},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:u},y.createElement(yM,{chartData:i.data}),y.createElement(ZM,{layout:s,margin:i.margin}),y.createElement(QM,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(yZ,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),y.createElement(JM,Mb({},c,{ref:r})))});function JA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JA(Object(r),!0).forEach(function(n){SZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SZ(e,t,r){return(t=EZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EZ(e){var t=OZ(e,"string");return typeof t=="symbol"?t:t+""}function OZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CZ=["item"],AZ=eN(eN({},t2),{},{layout:"centric",startAngle:0,endAngle:360}),NZ=y.forwardRef((e,t)=>{var r=jr(e,AZ);return y.createElement(jZ,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:CZ,tooltipPayloadSearcher:O_,categoricalChartProps:r,ref:t})});function kZ({project:e,companyId:t,onBack:r}){const[n,i]=y.useState(!0),[s,c]=y.useState("week"),[u,m]=y.useState({areas:[],tickets:[],crewHistory:[],disposalLoads:[],dailyReports:[]});y.useEffect(()=>{e?.id&&h()},[e?.id,s]);const h=async()=>{i(!0);try{const C=new Date,A=new Date;s==="week"?A.setDate(C.getDate()-7):A.setDate(C.getDate()-30);const k=A.toISOString().split("T")[0],D=s==="week"?7:30,[M,z,K,Q]=await Promise.all([be.getAreas(e.id),be.getTMTickets?.(e.id)||[],be.getDisposalLoadsHistory?.(e.id,D)||[],be.getDailyReports?.(e.id)||[]]),ne=[],G=new Date(A);for(;G<=C;){const I=G.toISOString().split("T")[0];try{const ie=await be.getCrewCheckin(e.id,I);ne.push({date:I,count:ie?.workers?.length||0,dayName:G.toLocaleDateString("en-US",{weekday:"short"})})}catch{ne.push({date:I,count:0,dayName:G.toLocaleDateString("en-US",{weekday:"short"})})}G.setDate(G.getDate()+1)}m({areas:M,tickets:z.filter(I=>I.work_date>=k),crewHistory:ne,disposalLoads:K,dailyReports:Q.filter(I=>I.report_date>=k)})}catch(C){console.error("Error loading metrics:",C)}finally{i(!1)}},g=y.useRef(null),p=y.useCallback(()=>{g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{h()},300)},[e?.id,s]);y.useEffect(()=>{if(!e?.id)return;const C=[],A=be.subscribeToAreas?.(e.id,p);A&&C.push(A);const k=be.subscribeToCrewCheckins?.(e.id,p);k&&C.push(k);const D=be.subscribeToTMTickets?.(e.id,p);D&&C.push(D);const M=be.subscribeToHaulOffs?.(e.id,p);M&&C.push(M);const z=be.subscribeToDailyReports?.(e.id,p);return z&&C.push(z),()=>{g.current&&clearTimeout(g.current),C.forEach(K=>be.unsubscribe?.(K))}},[e?.id,p]);const _=y.useMemo(()=>{const{areas:C,tickets:A,crewHistory:k,disposalLoads:D,dailyReports:M}=u,z=C.length,K=C.filter(H=>H.status==="done").length,Q=C.filter(H=>H.status==="working").length,ne=C.filter(H=>H.status==="not_started").length,G=z>0?Math.round(K/z*100):0,I=k.reduce((H,Ee)=>H+Ee.count,0),ie=k.length>0&&Math.round(I/k.filter(H=>H.count>0).length*10)/10||0,pe=k.filter(H=>H.count>0).length,q=A.filter(H=>H.status==="pending"||H.status==="draft").length,R=A.filter(H=>H.status==="signed"||H.status==="approved").length,U=A.reduce((H,Ee)=>H+(Ee.total_amount||0),0),J=D.reduce((H,Ee)=>H+(Ee.load_count||0),0),B=0,fe=M.filter(H=>H.submitted).length,je=s==="week"?7:30,te=x(M);return{progress:{totalAreas:z,completedAreas:K,inProgressAreas:Q,notStartedAreas:ne,progressPercent:G},crew:{totalManDays:I,avgCrewSize:ie,daysWithCrew:pe,history:k},tickets:{total:A.length,pending:q,signed:R,totalValue:U},disposal:{totalLoads:J,totalTonnage:B},reports:{submitted:fe,due:je,streak:te}}},[u,s]);function x(C){if(!C.length)return 0;const A=[...new Set(C.filter(z=>z.submitted).map(z=>z.report_date))].sort().reverse();let k=0;const D=new Date().toISOString().split("T")[0];let M=new Date(D);for(let z=0;z<30;z++){const K=M.toISOString().split("T")[0];if(A.includes(K))k++,M.setDate(M.getDate()-1);else break}return k}const w={primary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",muted:"#6b7280",purple:"#8b5cf6"},j=[w.success,w.primary,w.muted],S=[{name:"Completed",value:_.progress.completedAreas},{name:"In Progress",value:_.progress.inProgressAreas},{name:"Not Started",value:_.progress.notStartedAreas}].filter(C=>C.value>0),O=y.useMemo(()=>{const C={};return u.tickets.forEach(A=>{const k=A.work_date;C[k]=(C[k]||0)+1}),_.crew.history.map(A=>({...A,tickets:C[A.date]||0}))},[u.tickets,_.crew.history]);return n?d.jsxs("div",{className:"foreman-metrics loading",children:[d.jsxs("div",{className:"metrics-header",children:[d.jsxs("button",{className:"back-btn",onClick:r,children:[d.jsx(dr,{size:20}),"Back"]}),d.jsx("h2",{children:"Project Metrics"})]}),d.jsxs("div",{className:"loading-state",children:[d.jsx("div",{className:"spinner"}),d.jsx("p",{children:"Loading metrics..."})]})]}):d.jsxs("div",{className:"foreman-metrics",children:[d.jsxs("div",{className:"metrics-header",children:[d.jsxs("button",{className:"back-btn",onClick:r,children:[d.jsx(dr,{size:20}),"Back"]}),d.jsx("h2",{children:"Project Metrics"}),d.jsxs("div",{className:"time-toggle",children:[d.jsx("button",{className:s==="week"?"active":"",onClick:()=>c("week"),children:"7 Days"}),d.jsx("button",{className:s==="month"?"active":"",onClick:()=>c("month"),children:"30 Days"})]})]}),d.jsxs("div",{className:"summary-cards",children:[d.jsxs("div",{className:"summary-card progress-card",children:[d.jsx("div",{className:"card-icon",children:d.jsx(pN,{size:24})}),d.jsxs("div",{className:"card-content",children:[d.jsxs("span",{className:"card-value",children:[_.progress.progressPercent,"%"]}),d.jsx("span",{className:"card-label",children:"Complete"})]}),d.jsxs("div",{className:"card-detail",children:[_.progress.completedAreas,"/",_.progress.totalAreas," areas"]})]}),d.jsxs("div",{className:"summary-card crew-card",children:[d.jsx("div",{className:"card-icon",children:d.jsx(gN,{size:24})}),d.jsxs("div",{className:"card-content",children:[d.jsx("span",{className:"card-value",children:_.crew.totalManDays}),d.jsx("span",{className:"card-label",children:"Man-Days"})]}),d.jsxs("div",{className:"card-detail",children:["Avg ",_.crew.avgCrewSize," workers/day"]})]}),d.jsxs("div",{className:"summary-card tickets-card",children:[d.jsx("div",{className:"card-icon",children:d.jsx(Go,{size:24})}),d.jsxs("div",{className:"card-content",children:[d.jsx("span",{className:"card-value",children:_.tickets.total}),d.jsx("span",{className:"card-label",children:"T&M Tickets"})]}),d.jsxs("div",{className:"card-detail",children:[_.tickets.signed," signed, ",_.tickets.pending," pending"]})]}),d.jsxs("div",{className:"summary-card disposal-card",children:[d.jsx("div",{className:"card-icon",children:d.jsx(vf,{size:24})}),d.jsxs("div",{className:"card-content",children:[d.jsx("span",{className:"card-value",children:_.disposal.totalLoads}),d.jsx("span",{className:"card-label",children:"Disposal Loads"})]}),d.jsxs("div",{className:"card-detail",children:[_.disposal.totalTonnage.toFixed(1)," tons"]})]})]}),d.jsxs("div",{className:"charts-grid",children:[d.jsxs("div",{className:"chart-card",children:[d.jsx("h3",{children:"Area Progress"}),S.length>0?d.jsx(qv,{width:"100%",height:200,children:d.jsxs(NZ,{children:[d.jsx(pM,{data:S,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",label:({name:C,value:A})=>`${C}: ${A}`,labelLine:!1,children:S.map((C,A)=>d.jsx(gu,{fill:j[A%j.length]},`cell-${A}`))}),d.jsx(ey,{})]})}):d.jsx("div",{className:"no-data",children:"No area data"})]}),d.jsxs("div",{className:"chart-card",children:[d.jsx("h3",{children:"Daily Crew Size"}),d.jsx(qv,{width:"100%",height:200,children:d.jsxs(vZ,{data:_.crew.history,children:[d.jsx(Eb,{strokeDasharray:"3 3",opacity:.3}),d.jsx(Nb,{dataKey:"dayName",tick:{fontSize:12}}),d.jsx(Db,{tick:{fontSize:12}}),d.jsx(ey,{formatter:C=>[C,"Workers"],labelFormatter:C=>`Day: ${C}`}),d.jsx(zM,{dataKey:"count",fill:w.primary,radius:[4,4,0,0]})]})})]}),d.jsxs("div",{className:"chart-card",children:[d.jsx("h3",{children:"T&M Tickets by Day"}),d.jsx(qv,{width:"100%",height:200,children:d.jsxs(pZ,{data:O,children:[d.jsx(Eb,{strokeDasharray:"3 3",opacity:.3}),d.jsx(Nb,{dataKey:"dayName",tick:{fontSize:12}}),d.jsx(Db,{tick:{fontSize:12}}),d.jsx(ey,{formatter:C=>[C,"Tickets"]}),d.jsx(MM,{type:"monotone",dataKey:"tickets",stroke:w.success,strokeWidth:2,dot:{fill:w.success,strokeWidth:2}})]})})]}),d.jsxs("div",{className:"chart-card activity-card",children:[d.jsx("h3",{children:"Activity Summary"}),d.jsxs("div",{className:"activity-list",children:[d.jsxs("div",{className:"activity-item",children:[d.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.success}20`,color:w.success},children:d.jsx(na,{size:20})}),d.jsxs("div",{className:"activity-info",children:[d.jsx("span",{className:"activity-label",children:"Days with Crew"}),d.jsxs("span",{className:"activity-value",children:[_.crew.daysWithCrew," of ",s==="week"?7:30]})]})]}),d.jsxs("div",{className:"activity-item",children:[d.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.primary}20`,color:w.primary},children:d.jsx(Pq,{size:20})}),d.jsxs("div",{className:"activity-info",children:[d.jsx("span",{className:"activity-label",children:"Reports Submitted"}),d.jsx("span",{className:"activity-value",children:_.reports.submitted})]})]}),d.jsxs("div",{className:"activity-item",children:[d.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.warning}20`,color:w.warning},children:d.jsx(Lo,{size:20})}),d.jsxs("div",{className:"activity-info",children:[d.jsx("span",{className:"activity-label",children:"Report Streak"}),d.jsxs("span",{className:"activity-value",children:[_.reports.streak," days"]})]})]}),_.tickets.totalValue>0&&d.jsxs("div",{className:"activity-item",children:[d.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.purple}20`,color:w.purple},children:d.jsx(Mq,{size:20})}),d.jsxs("div",{className:"activity-info",children:[d.jsx("span",{className:"activity-label",children:"T&M Value"}),d.jsxs("span",{className:"activity-value",children:["$",_.tickets.totalValue.toLocaleString()]})]})]})]})]})]}),d.jsx("style",{children:`
        .foreman-metrics {
          padding: 1rem;
          max-width: 100%;
          overflow-x: hidden;
        }

        .foreman-metrics.loading {
          min-height: 400px;
        }

        .loading-state {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 3rem;
          color: var(--text-secondary);
        }

        .metrics-header {
          display: flex;
          align-items: center;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
        }

        .metrics-header h2 {
          flex: 1;
          margin: 0;
          font-size: 1.25rem;
          color: var(--text-primary);
        }

        .back-btn {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: var(--bg-elevated);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          color: var(--text-primary);
          cursor: pointer;
          font-size: 0.875rem;
        }

        .back-btn:hover {
          background: var(--bg-tertiary);
        }

        .time-toggle {
          display: flex;
          background: var(--bg-elevated);
          border-radius: 8px;
          padding: 4px;
          gap: 4px;
        }

        .time-toggle button {
          padding: 0.5rem 1rem;
          border: none;
          background: transparent;
          border-radius: 6px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.875rem;
          transition: all 0.2s;
        }

        .time-toggle button.active {
          background: var(--primary-color, #3b82f6);
          color: white;
        }

        .summary-cards {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        @media (min-width: 640px) {
          .summary-cards {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        .summary-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .card-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .progress-card .card-icon {
          background: #dbeafe;
          color: #3b82f6;
        }

        .crew-card .card-icon {
          background: #dcfce7;
          color: #22c55e;
        }

        .tickets-card .card-icon {
          background: #fef3c7;
          color: #f59e0b;
        }

        .disposal-card .card-icon {
          background: #f3e8ff;
          color: #8b5cf6;
        }

        [data-theme="dark"] .progress-card .card-icon {
          background: #1e3a5f;
        }

        [data-theme="dark"] .crew-card .card-icon {
          background: #14532d;
        }

        [data-theme="dark"] .tickets-card .card-icon {
          background: #451a03;
        }

        [data-theme="dark"] .disposal-card .card-icon {
          background: #3b0764;
        }

        .card-content {
          display: flex;
          flex-direction: column;
        }

        .card-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: var(--text-primary);
          line-height: 1.2;
        }

        .card-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .card-detail {
          font-size: 0.75rem;
          color: var(--text-secondary);
          margin-top: auto;
        }

        .charts-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        @media (min-width: 640px) {
          .charts-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }

        .chart-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
        }

        .chart-card h3 {
          margin: 0 0 1rem 0;
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        .no-data {
          height: 200px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: var(--text-secondary);
          font-size: 0.875rem;
        }

        .activity-card {
          grid-column: 1 / -1;
        }

        @media (min-width: 640px) {
          .activity-card {
            grid-column: auto;
          }
        }

        .activity-list {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
        }

        .activity-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .activity-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .activity-info {
          display: flex;
          flex-direction: column;
          flex: 1;
        }

        .activity-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
        }

        .activity-value {
          font-size: 1rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        /* Recharts customization */
        .recharts-cartesian-grid-horizontal line,
        .recharts-cartesian-grid-vertical line {
          stroke: var(--border-color);
        }

        .recharts-text {
          fill: var(--text-secondary);
        }

        .recharts-tooltip-wrapper {
          outline: none;
        }

        .recharts-default-tooltip {
          background: var(--bg-card) !important;
          border: 1px solid var(--border-color) !important;
          border-radius: 8px !important;
        }

        .recharts-tooltip-label {
          color: var(--text-primary) !important;
        }

        .recharts-tooltip-item {
          color: var(--text-secondary) !important;
        }
      `})]})}const gy={crew:{id:"crew",label:"Crew Check-in",icon:gN,description:"Log who's on site today"},tm:{id:"tm",label:"T&M Ticket",icon:Go,description:"Create time & materials ticket"},report:{id:"report",label:"Daily Report",icon:hN,description:"Submit end-of-day report"},progress:{id:"progress",label:"Update Progress",icon:vN,description:"Mark tasks complete"},disposal:{id:"disposal",label:"Disposal Loads",icon:vf,description:"Log haul-off loads"},docs:{id:"docs",label:"Documents",icon:Lq,description:"View project files"},metrics:{id:"metrics",label:"Project Metrics",icon:qq,description:"View charts & trends"},punchlist:{id:"punchlist",label:"Punch List",icon:Rq,description:"View & resolve punch items"},injury:{id:"injury",label:"Report Injury",icon:hm,description:"Log safety incident",isDanger:!0}},tN=["crew","tm","report","progress"],rN=e=>`fm_pinned_${e}`;function DZ({project:e,todayStatus:t,progress:r,areasWorking:n,areasDone:i,areasRemaining:s,punchListOpenCount:c,onNavigate:u,onShowToast:m}){const[h,g]=y.useState(()=>{try{const k=localStorage.getItem(rN(e?.id));return k?JSON.parse(k):tN}catch{return tN}}),[p,_]=y.useState(!1),[x,w]=y.useState(!0);y.useEffect(()=>{if(e?.id)try{localStorage.setItem(rN(e.id),JSON.stringify(h))}catch{}},[h,e?.id]);const j=y.useCallback(k=>{g(D=>D.includes(k)?D.length<=1?(m?.("Keep at least one pinned action","info"),D):D.filter(M=>M!==k):D.length>=5?(m?.("Maximum 5 pinned actions","info"),D):[...D,k])},[m]),S=y.useMemo(()=>Object.keys(gy).filter(k=>!h.includes(k)),[h]),O=y.useCallback(k=>{switch(k){case"crew":return{done:t.crewCheckedIn,badge:t.crewCheckedIn?`${t.crewCount} on site`:null,status:t.crewCheckedIn?"Done today":"Not started"};case"tm":return{done:!1,badge:t.tmTicketsToday>0?`${t.tmTicketsToday} today`:null,status:t.tmTicketsToday>0?`${t.tmTicketsToday} created`:"Create new"};case"report":return{done:t.dailyReportDone,badge:null,status:t.dailyReportDone?"Submitted":"Not submitted"};case"progress":return{done:s===0,badge:s>0?`${s} left`:null,status:`${r}% complete`};case"disposal":return{done:!1,badge:t.disposalLoadsToday>0?`${t.disposalLoadsToday} today`:null,status:t.disposalLoadsToday>0?`${t.disposalLoadsToday} logged`:"Log loads"};case"punchlist":return{done:c===0&&c!==void 0,badge:c>0?`${c} open`:null,status:c>0?`${c} items open`:"All clear"};default:return{done:!1,badge:null,status:null}}},[t,r,s]),C=k=>{const D=gy[k];if(!D)return null;const M=D.icon,z=O(k);return d.jsxs("div",{className:"fm-pinned-card-wrapper",children:[d.jsxs("button",{className:`fm-pinned-card ${z.done?"completed":""} ${D.isDanger?"danger":""}`,onClick:()=>!p&&u(k),disabled:p,children:[d.jsx("div",{className:"fm-pinned-icon",children:d.jsx(M,{size:28})}),d.jsx("span",{className:"fm-pinned-label",children:D.label}),z.badge&&!p&&d.jsx("span",{className:"fm-pinned-badge",children:z.badge}),z.done&&!p&&d.jsx("div",{className:"fm-pinned-check",children:d.jsx(na,{size:18})})]}),p&&d.jsx("button",{className:"fm-pin-toggle pinned",onClick:()=>j(k),"aria-label":`Unpin ${D.label}`,children:d.jsx(Iq,{size:16})})]},k)},A=k=>{const D=gy[k];if(!D)return null;const M=D.icon,z=O(k);return d.jsxs("div",{className:"fm-action-row-wrapper",children:[d.jsxs("button",{className:`fm-action-row ${D.isDanger?"danger":""}`,onClick:()=>!p&&u(k),disabled:p,children:[d.jsx(M,{size:20}),d.jsx("span",{className:"fm-action-label",children:D.label}),z.badge&&!p&&d.jsx("span",{className:"fm-action-badge",children:z.badge})]}),p&&d.jsx("button",{className:"fm-pin-toggle",onClick:()=>j(k),"aria-label":`Pin ${D.label}`,children:d.jsx(Uq,{size:16})})]},k)};return d.jsxs("div",{className:"fm-landing",children:[d.jsxs("button",{className:"fm-metrics-snapshot",onClick:()=>u("metrics"),"aria-label":"View full project metrics",children:[d.jsxs("div",{className:"fm-snapshot-header",children:[d.jsx(pN,{size:18}),d.jsx("span",{children:"Project Overview"}),d.jsx(yf,{size:16,className:"fm-snapshot-arrow"})]}),d.jsxs("div",{className:"fm-snapshot-stats",children:[d.jsxs("div",{className:"fm-snapshot-stat main",children:[d.jsxs("span",{className:"fm-snapshot-value",children:[r,"%"]}),d.jsx("span",{className:"fm-snapshot-label",children:"Complete"})]}),d.jsx("div",{className:"fm-snapshot-divider"}),d.jsxs("div",{className:"fm-snapshot-stat",children:[d.jsx("span",{className:"fm-snapshot-value",children:n}),d.jsx("span",{className:"fm-snapshot-label",children:"In Progress"})]}),d.jsxs("div",{className:"fm-snapshot-stat",children:[d.jsx("span",{className:"fm-snapshot-value",children:i}),d.jsx("span",{className:"fm-snapshot-label",children:"Done"})]}),d.jsxs("div",{className:"fm-snapshot-stat",children:[d.jsx("span",{className:"fm-snapshot-value",children:s}),d.jsx("span",{className:"fm-snapshot-label",children:"Remaining"})]})]}),t.crewCheckedIn&&d.jsxs("div",{className:"fm-snapshot-today",children:[d.jsx(Lo,{size:14}),d.jsxs("span",{children:[t.crewCount," crew on site today"]})]})]}),d.jsxs("div",{className:"fm-section-header",children:[d.jsx("h2",{children:"Quick Actions"}),d.jsx("button",{className:`fm-edit-btn ${p?"active":""}`,onClick:()=>_(!p),"aria-label":p?"Done editing":"Customize actions",children:p?"Done":d.jsx(zq,{size:18})})]}),p&&d.jsx("p",{className:"fm-edit-hint",children:"Tap icons to pin/unpin actions"}),d.jsx("div",{className:"fm-pinned-grid",children:h.map(C)}),S.length>0&&d.jsxs("div",{className:"fm-more-section",children:[d.jsxs("button",{className:"fm-more-header",onClick:()=>w(!x),"aria-expanded":!x,children:[d.jsx("span",{children:"More Actions"}),x?d.jsx(yf,{size:20}):d.jsx(mN,{size:20})]}),!x&&d.jsx("div",{className:"fm-more-content",children:S.map(A)})]}),d.jsx("style",{children:`
        .fm-landing {
          padding: 0 1rem 2rem;
        }

        /* Metrics Snapshot - Premium Hero Card */
        .fm-metrics-snapshot {
          width: 100%;
          background: var(--gradient-blue, linear-gradient(135deg, #3b82f6, #2563eb, #1d4ed8));
          border: none;
          border-radius: 16px;
          padding: 1.25rem;
          color: white;
          text-align: left;
          cursor: pointer;
          margin-bottom: 1.5rem;
          transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s ease;
          box-shadow: 0 4px 15px rgba(59, 130, 246, 0.25), 0 2px 8px rgba(0,0,0,0.15);
          position: relative;
          overflow: hidden;
        }

        .fm-metrics-snapshot::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 50%;
          background: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, transparent 100%);
          pointer-events: none;
          border-radius: 16px 16px 0 0;
        }

        .fm-metrics-snapshot::after {
          content: '';
          position: absolute;
          bottom: -40px;
          right: -40px;
          width: 160px;
          height: 160px;
          background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%);
          pointer-events: none;
        }

        .fm-metrics-snapshot:active {
          transform: scale(0.98);
        }

        .fm-snapshot-header {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          opacity: 0.9;
          margin-bottom: 0.875rem;
          font-weight: 500;
          position: relative;
          z-index: 1;
        }

        .fm-snapshot-arrow {
          margin-left: auto;
          opacity: 0.7;
        }

        .fm-snapshot-stats {
          display: flex;
          align-items: center;
          gap: 0.875rem;
          position: relative;
          z-index: 1;
        }

        .fm-snapshot-stat {
          display: flex;
          flex-direction: column;
          align-items: center;
          flex: 1;
        }

        .fm-snapshot-stat.main {
          flex: 1.5;
          align-items: flex-start;
        }

        .fm-snapshot-value {
          font-size: 1.625rem;
          font-weight: 700;
          line-height: 1.2;
          font-variant-numeric: tabular-nums;
          letter-spacing: -0.02em;
        }

        .fm-snapshot-stat.main .fm-snapshot-value {
          font-size: 2.25rem;
        }

        .fm-snapshot-label {
          font-size: 0.68rem;
          opacity: 0.85;
          text-transform: uppercase;
          letter-spacing: 0.06em;
          font-weight: 600;
          margin-top: 0.1rem;
        }

        .fm-snapshot-divider {
          width: 1px;
          height: 44px;
          background: rgba(255,255,255,0.25);
        }

        .fm-snapshot-today {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-top: 0.875rem;
          padding-top: 0.875rem;
          border-top: 1px solid rgba(255,255,255,0.15);
          font-size: 0.8rem;
          opacity: 0.9;
          font-weight: 500;
          position: relative;
          z-index: 1;
        }

        /* Section Header */
        .fm-section-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.875rem;
        }

        .fm-section-header h2 {
          font-size: 1.05rem;
          font-weight: 700;
          color: var(--text-primary);
          margin: 0;
          letter-spacing: -0.01em;
        }

        .fm-edit-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0.5rem;
          background: var(--gradient-card-dark, var(--bg-elevated));
          border: 1px solid var(--border-color);
          border-radius: 10px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.8rem;
          min-width: 36px;
          min-height: 36px;
          transition: all 0.2s ease;
          box-shadow: var(--shadow-sm, 0 1px 2px rgba(0,0,0,0.1));
        }

        .fm-edit-btn:hover {
          border-color: var(--accent-blue, #3b82f6);
        }

        .fm-edit-btn.active {
          background: var(--gradient-blue, var(--primary-color, #3b82f6));
          border-color: transparent;
          color: white;
          padding: 0.5rem 1rem;
          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .fm-edit-hint {
          font-size: 0.8rem;
          color: var(--text-secondary);
          margin: 0 0 0.75rem;
          text-align: center;
          font-weight: 500;
        }

        /* Pinned Actions Grid */
        .fm-pinned-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 0.875rem;
          margin-bottom: 1.5rem;
        }

        .fm-pinned-card-wrapper {
          position: relative;
        }

        .fm-pinned-card {
          width: 100%;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 1.375rem 1rem;
          background: var(--gradient-card-dark, var(--bg-card));
          border: 1px solid var(--border-color);
          border-radius: 14px;
          cursor: pointer;
          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
          min-height: 114px;
          position: relative;
          box-shadow: var(--shadow-card, 0 1px 3px rgba(0,0,0,0.1));
          overflow: hidden;
        }

        .fm-pinned-card::before {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          height: 2px;
          background: var(--gradient-blue, linear-gradient(90deg, #3b82f6, #2563eb));
          opacity: 0;
          transition: opacity 0.2s ease;
        }

        .fm-pinned-card:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: var(--shadow-card-hover, 0 8px 25px rgba(0,0,0,0.15));
          border-color: rgba(59, 130, 246, 0.3);
        }

        .fm-pinned-card:hover:not(:disabled)::before {
          opacity: 1;
        }

        .fm-pinned-card:active:not(:disabled) {
          transform: scale(0.97);
        }

        .fm-pinned-card:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-pinned-card.completed {
          border-color: rgba(34, 197, 94, 0.4);
          background: linear-gradient(135deg, rgba(34, 197, 94, 0.08) 0%, rgba(34, 197, 94, 0.03) 100%);
        }

        .fm-pinned-card.completed::before {
          background: linear-gradient(90deg, #22c55e, #16a34a);
          opacity: 1;
        }

        .fm-pinned-card.danger {
          border-color: rgba(245, 158, 11, 0.4);
        }

        .fm-pinned-card.danger::before {
          background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .fm-pinned-card.danger .fm-pinned-icon {
          color: #f59e0b;
        }

        .fm-pinned-icon {
          color: var(--primary-color, #3b82f6);
          margin-bottom: 0.625rem;
          transition: transform 0.2s ease;
        }

        .fm-pinned-card:hover:not(:disabled) .fm-pinned-icon {
          transform: scale(1.08);
        }

        .fm-pinned-label {
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
          text-align: center;
          letter-spacing: -0.01em;
        }

        .fm-pinned-badge {
          position: absolute;
          top: 8px;
          right: 8px;
          background: var(--gradient-blue, var(--primary-color, #3b82f6));
          color: white;
          font-size: 0.68rem;
          font-weight: 700;
          padding: 0.2rem 0.55rem;
          border-radius: 10px;
          box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
        }

        .fm-pinned-check {
          position: absolute;
          top: 8px;
          right: 8px;
          color: #22c55e;
          filter: drop-shadow(0 1px 3px rgba(34, 197, 94, 0.3));
        }

        .fm-pin-toggle {
          position: absolute;
          top: -8px;
          right: -8px;
          width: 28px;
          height: 28px;
          border-radius: 50%;
          background: var(--bg-card);
          border: 2px solid var(--border-color);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          color: var(--text-secondary);
          transition: all 0.2s ease;
          z-index: 10;
          box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        }

        .fm-pin-toggle:hover {
          background: var(--bg-elevated);
          transform: scale(1.1);
        }

        .fm-pin-toggle.pinned {
          background: #ef4444;
          border-color: #ef4444;
          color: white;
          box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        /* More Actions Section */
        .fm-more-section {
          background: var(--gradient-card-dark, var(--bg-card));
          border: 1px solid var(--border-color);
          border-radius: 14px;
          overflow: hidden;
          box-shadow: var(--shadow-card, 0 1px 3px rgba(0,0,0,0.1));
        }

        .fm-more-header {
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 1rem 1.125rem;
          background: transparent;
          border: none;
          cursor: pointer;
          font-size: 0.9rem;
          font-weight: 600;
          color: var(--text-primary);
          transition: background 0.15s ease;
        }

        .fm-more-header:hover {
          background: var(--bg-secondary, rgba(255,255,255,0.02));
        }

        .fm-more-header:active {
          background: var(--bg-elevated);
        }

        .fm-more-content {
          border-top: 1px solid var(--border-color);
        }

        .fm-action-row-wrapper {
          position: relative;
          display: flex;
          align-items: center;
        }

        .fm-action-row-wrapper .fm-pin-toggle {
          position: static;
          margin-right: 0.75rem;
          flex-shrink: 0;
        }

        .fm-action-row {
          flex: 1;
          display: flex;
          align-items: center;
          gap: 0.875rem;
          padding: 1.125rem;
          background: transparent;
          border: none;
          border-bottom: 1px solid var(--border-color);
          cursor: pointer;
          text-align: left;
          color: var(--text-primary);
          transition: all 0.2s ease;
        }

        .fm-action-row:last-child {
          border-bottom: none;
        }

        .fm-action-row:hover:not(:disabled) {
          background: var(--bg-secondary, rgba(255,255,255,0.02));
          padding-left: 1.25rem;
        }

        .fm-action-row:active:not(:disabled) {
          background: var(--bg-elevated);
        }

        .fm-action-row:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-action-row.danger {
          color: #f59e0b;
        }

        .fm-action-row svg {
          transition: color 0.15s ease;
        }

        .fm-action-row:hover:not(:disabled) svg {
          color: var(--accent-blue, #3b82f6);
        }

        .fm-action-row.danger:hover:not(:disabled) svg {
          color: #f59e0b;
        }

        .fm-action-label {
          flex: 1;
          font-size: 0.9rem;
          font-weight: 500;
        }

        .fm-action-badge {
          font-size: 0.72rem;
          color: var(--text-secondary);
          background: var(--bg-elevated);
          padding: 0.25rem 0.625rem;
          border-radius: 20px;
          font-weight: 600;
        }

        /* Dark mode adjustments */
        [data-theme="dark"] .fm-metrics-snapshot {
          background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 60%, #172554 100%);
          box-shadow: 0 4px 20px rgba(30, 64, 175, 0.3), 0 2px 8px rgba(0,0,0,0.2);
        }

        [data-theme="dark"] .fm-pinned-card.completed {
          background: linear-gradient(135deg, rgba(34, 197, 94, 0.12) 0%, rgba(34, 197, 94, 0.04) 100%);
        }
      `})]})}const vy=[{value:"high",label:"High",color:"#ef4444"},{value:"medium",label:"Medium",color:"#f59e0b"},{value:"low",label:"Low",color:"#6b7280"}],yy=[{value:"open",label:"Open",icon:$q,color:"#ef4444"},{value:"in_progress",label:"In Progress",icon:Lo,color:"#f59e0b"},{value:"complete",label:"Complete",icon:na,color:"#10b981"}];function r2({projectId:e,areas:t=[],companyId:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState(!0),[m,h]=y.useState(!1),[g,p]=y.useState(null),[_,x]=y.useState("all"),[w,j]=y.useState("all"),[S,O]=y.useState(!1),[C,A]=y.useState({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),k=y.useCallback(async()=>{if(!e||!P){u(!1);return}try{const q=Ki(),{data:R,error:U}=await q.from("punch_list_items").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(U)throw U;s(R||[])}catch(q){console.error("Error loading punch list:",q),s([])}finally{u(!1)}},[e]);y.useEffect(()=>{k()},[k]),y.useEffect(()=>{if(!e||!P)return;const q=T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},()=>k()).subscribe();return()=>{T.removeChannel(q)}},[e,k]);const D=y.useMemo(()=>i.filter(q=>!(_!=="all"&&q.status!==_||w!=="all"&&q.area_id!==w)),[i,_,w]),M=y.useMemo(()=>{const q=i.filter(J=>J.status==="open").length,R=i.filter(J=>J.status==="in_progress").length,U=i.filter(J=>J.status==="complete").length;return{open:q,inProgress:R,complete:U,total:i.length}},[i]),z=()=>{A({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),p(null),h(!1)},K=async q=>{if(q.preventDefault(),!C.description.trim()){n?.("Please enter a description","error");return}O(!0);try{const R=Ki();if(g){const{error:U}=await R.from("punch_list_items").update({description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,updated_at:new Date().toISOString()}).eq("id",g.id);if(U)throw U;n?.("Punch item updated","success")}else{const{error:U}=await R.from("punch_list_items").insert({project_id:e,company_id:r,description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,status:"open"});if(U)throw U;n?.("Punch item added","success")}z(),k()}catch(R){console.error("Error saving punch item:",R),n?.(R.message||"Error saving item","error")}finally{O(!1)}},Q=async(q,R)=>{try{const U={status:R,updated_at:new Date().toISOString()};R==="complete"?U.completed_at=new Date().toISOString():U.completed_at=null;const{error:J}=await Ki().from("punch_list_items").update(U).eq("id",q);if(J)throw J;k()}catch(U){console.error("Error updating status:",U),n?.("Error updating status","error")}},ne=async q=>{if(confirm("Delete this punch item?"))try{const{error:R}=await Ki().from("punch_list_items").delete().eq("id",q);if(R)throw R;n?.("Item deleted","success"),k()}catch(R){console.error("Error deleting item:",R),n?.("Error deleting item","error")}},G=q=>{A({description:q.description,area_id:q.area_id||"",assigned_to:q.assigned_to||"",priority:q.priority||"medium",notes:q.notes||"",photo_url:q.photo_url||""}),p(q),h(!0)},I=q=>q&&t.find(U=>U.id===q)?.name||null,ie=q=>vy.find(R=>R.value===q)||vy[1],pe=q=>yy.find(R=>R.value===q)||yy[0];return d.jsxs("div",{className:"punch-list-card",children:[d.jsxs("div",{className:"punch-list-header",children:[d.jsxs("div",{className:"punch-list-title",children:[d.jsx(na,{size:18}),d.jsx("h3",{children:"Punch List"}),M.total>0&&d.jsxs("span",{className:"punch-stats-inline",children:[d.jsxs("span",{className:"punch-stat-open",children:[M.open," open"]}),M.inProgress>0&&d.jsxs("span",{className:"punch-stat-progress",children:[M.inProgress," in progress"]}),d.jsxs("span",{className:"punch-stat-complete",children:[M.complete,"/",M.total," complete"]})]})]}),d.jsxs("button",{className:"punch-add-btn",onClick:()=>{z(),h(!0)},children:[d.jsx(nf,{size:16}),"Add Item"]})]}),M.total>0&&d.jsxs("div",{className:"punch-progress-bar",children:[d.jsx("div",{className:"punch-progress-fill",style:{width:`${M.complete/M.total*100}%`}}),d.jsxs("span",{className:"punch-progress-label",children:[Math.round(M.complete/M.total*100),"% complete"]})]}),M.total>0&&d.jsxs("div",{className:"punch-filters",children:[d.jsxs("div",{className:"punch-filter-group",children:[d.jsx(Bq,{size:14}),d.jsxs("select",{value:_,onChange:q=>x(q.target.value),className:"punch-filter-select",children:[d.jsx("option",{value:"all",children:"All Status"}),yy.map(q=>d.jsx("option",{value:q.value,children:q.label},q.value))]})]}),t.length>0&&d.jsxs("div",{className:"punch-filter-group",children:[d.jsx(xy,{size:14}),d.jsxs("select",{value:w,onChange:q=>j(q.target.value),className:"punch-filter-select",children:[d.jsx("option",{value:"all",children:"All Areas"}),t.map(q=>d.jsx("option",{value:q.id,children:q.name},q.id))]})]})]}),m&&d.jsxs("form",{className:"punch-form",onSubmit:K,children:[d.jsxs("div",{className:"punch-form-header",children:[d.jsx("h4",{children:g?"Edit Item":"New Punch Item"}),d.jsx("button",{type:"button",className:"punch-form-close",onClick:z,children:d.jsx(Rb,{size:16})})]}),d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Description *"}),d.jsx("textarea",{value:C.description,onChange:q=>A(R=>({...R,description:q.target.value})),placeholder:"What needs to be fixed or completed?",rows:2,required:!0})]}),d.jsxs("div",{className:"punch-form-row",children:[d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Area"}),d.jsxs("select",{value:C.area_id,onChange:q=>A(R=>({...R,area_id:q.target.value})),children:[d.jsx("option",{value:"",children:"No area"}),t.map(q=>d.jsx("option",{value:q.id,children:q.name},q.id))]})]}),d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Assigned To"}),d.jsx("input",{type:"text",value:C.assigned_to,onChange:q=>A(R=>({...R,assigned_to:q.target.value})),placeholder:"Name or company"})]}),d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Priority"}),d.jsx("select",{value:C.priority,onChange:q=>A(R=>({...R,priority:q.target.value})),children:vy.map(q=>d.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),d.jsxs("div",{className:"punch-form-field",children:[d.jsx("label",{children:"Notes"}),d.jsx("textarea",{value:C.notes,onChange:q=>A(R=>({...R,notes:q.target.value})),placeholder:"Additional details...",rows:2})]}),d.jsxs("div",{className:"punch-form-actions",children:[d.jsx("button",{type:"button",className:"punch-btn-cancel",onClick:z,children:"Cancel"}),d.jsxs("button",{type:"submit",className:"punch-btn-save",disabled:S,children:[d.jsx(Hq,{size:14}),S?"Saving...":g?"Update":"Add Item"]})]})]}),c?d.jsx("div",{className:"punch-loading",children:"Loading punch list..."}):D.length===0?d.jsxs("div",{className:"punch-empty",children:[d.jsx(na,{size:32,style:{opacity:.3}}),d.jsx("p",{children:i.length===0?"No punch items yet":"No items match filters"}),i.length===0&&d.jsx("span",{children:"Add items that need attention before project closeout"})]}):d.jsx("div",{className:"punch-items-list",children:D.map(q=>{const R=pe(q.status),U=ie(q.priority),J=R.icon;return d.jsxs("div",{className:`punch-item punch-item-${q.status}`,children:[d.jsx("button",{className:"punch-item-status-btn",onClick:()=>{const B=q.status==="open"?"in_progress":q.status==="in_progress"?"complete":"open";Q(q.id,B)},title:`Click to change status (current: ${R.label})`,children:d.jsx(J,{size:18,style:{color:R.color}})}),d.jsxs("div",{className:"punch-item-content",children:[d.jsxs("div",{className:"punch-item-top",children:[d.jsx("span",{className:`punch-item-desc ${q.status==="complete"?"completed":""}`,children:q.description}),d.jsx("div",{className:"punch-item-badges",children:d.jsx("span",{className:"punch-priority-badge",style:{color:U.color,borderColor:`${U.color}40`},children:U.label})})]}),d.jsxs("div",{className:"punch-item-meta",children:[I(q.area_id)&&d.jsxs("span",{className:"punch-meta-tag",children:[d.jsx(xy,{size:11}),I(q.area_id)]}),q.assigned_to&&d.jsxs("span",{className:"punch-meta-tag",children:[d.jsx(Fq,{size:11}),q.assigned_to]}),q.completed_at&&d.jsxs("span",{className:"punch-meta-tag completed",children:[d.jsx(na,{size:11}),"Done ",new Date(q.completed_at).toLocaleDateString()]})]}),q.notes&&d.jsx("div",{className:"punch-item-notes",children:q.notes})]}),d.jsxs("div",{className:"punch-item-actions",children:[d.jsx("button",{className:"punch-action-btn",onClick:()=>G(q),title:"Edit",children:d.jsx(Oc,{size:14})}),d.jsx("button",{className:"punch-action-btn delete",onClick:()=>ne(q.id),title:"Delete",children:d.jsx(Kq,{size:14})})]})]},q.id)})})]})}const GQ=Object.freeze(Object.defineProperty({__proto__:null,default:r2},Symbol.toStringTag,{value:"Module"}));function TZ({project:e,companyId:t,foremanName:r,onShowToast:n,onExit:i}){const[s,c]=y.useState([]),[u,m]=y.useState(!0),[h,g]=y.useState(null),[p,_]=y.useState({}),[x,w]=y.useState("home"),[j,S]=y.useState(!1),[O,C]=y.useState(0),[A,k]=y.useState({crewCheckedIn:!1,crewCount:0,tmTicketsToday:0,dailyReportDone:!1,disposalLoadsToday:0}),[D,M]=y.useState(()=>typeof window<"u"?document.documentElement.getAttribute("data-theme")==="dark":!1);new Date().getHours(),y.useEffect(()=>{e?.id&&(G(),z(),K())},[e?.id]);const z=async()=>{try{const H=new Date().toISOString().split("T")[0],Te=(await be.getCrewCheckin(e.id,H))?.workers||[],Ie=Te.length>0,Le=(await be.getTMTickets?.(e.id)||[]).filter(we=>we.work_date===H),ee=await be.getDisposalLoads?.(e.id,H)||[];k({crewCheckedIn:Ie,crewCount:Te.length,tmTicketsToday:Le.length,dailyReportDone:!1,disposalLoadsToday:ee.reduce((we,xe)=>we+(xe.load_count||1),0)})}catch(H){console.error("Error loading today status:",H)}},K=async()=>{if(!(!e?.id||!P))try{const{count:H}=await Ki().from("punch_list_items").select("*",{count:"exact",head:!0}).eq("project_id",e.id).eq("status","open");C(H||0)}catch{}},Q=y.useRef(null),ne=y.useCallback(()=>{Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{G(),z()},300)},[e?.id]);y.useEffect(()=>{if(!e?.id)return;const H=[],Ee=be.subscribeToAreas?.(e.id,ne);Ee&&H.push(Ee);const Te=be.subscribeToCrewCheckins?.(e.id,ne);Te&&H.push(Te);const Ie=be.subscribeToTMTickets?.(e.id,ne);Ie&&H.push(Ie);const ge=be.subscribeToHaulOffs?.(e.id,ne);ge&&H.push(ge);const Le=be.subscribeToDailyReports?.(e.id,ne);Le&&H.push(Le);const ee=be.subscribeToCORs?.(e.id,ne);ee&&H.push(ee);const we=be.subscribeToMaterialRequests?.(e.id,ne);we&&H.push(we);const xe=be.subscribeToProject?.(e.id,ne);xe&&H.push(xe);const oe=be.subscribeToPunchList?.(e.id,()=>{K(),ne()});if(oe&&H.push(oe),t){const Fe=be.subscribeToMaterialsEquipment?.(t,ne);Fe&&H.push(Fe);const ve=be.subscribeToLaborRates?.(t,ne);ve&&H.push(ve)}return()=>{Q.current&&clearTimeout(Q.current),H.forEach(Fe=>be.unsubscribe?.(Fe))}},[e?.id,ne]);const G=async()=>{try{const H=await be.getAreas(e.id);c(H);const Ee=[...new Set(H.map(Ie=>Ie.group_name||"General"))],Te={};Ee.forEach(Ie=>Te[Ie]=!1),_(Te)}catch(H){console.error("Error loading areas:",H),n?.("Error loading areas","error")}finally{m(!1)}},I=async(H,Ee)=>{const Te=s.find(ge=>ge.id===H);if(!Te)return;const Ie=Te.status===Ee?"not_started":Ee;g(H);try{await be.updateAreaStatus(H,Ie),c(ge=>ge.map(Le=>Le.id===H?{...Le,status:Ie}:Le))}catch(ge){console.error("Error updating status:",ge),n?.("Error updating","error")}finally{g(null)}},ie=H=>{_(Ee=>({...Ee,[H]:!Ee[H]}))},pe=()=>{const H=D?"light":"dark";document.documentElement.setAttribute("data-theme",H),localStorage.setItem("theme",H),M(!D)},q=d3(s),R=s.filter(H=>H.status==="done").length,U=s.filter(H=>H.status==="working").length,J=s.length-R,B=s.reduce((H,Ee)=>{const Te=Ee.group_name||"General";return H[Te]||(H[Te]=[]),H[Te].push(Ee),H},{}),fe=Object.keys(B).length>1||Object.keys(B).length===1&&!B.General,je=H=>`${H.filter(Te=>Te.status==="done").length}/${H.length}`,te=y.useCallback(H=>{w(H)},[]);return x==="tm"?d.jsx("div",{className:"fm-view",children:d.jsx(E3,{project:e,companyId:t,onSubmit:()=>w("home"),onCancel:()=>w("home"),onShowToast:n})}):x==="report"?d.jsx(C3,{project:e,onShowToast:n,onClose:()=>w("home")}):x==="injury"?d.jsx("div",{className:"fm-view",children:d.jsx(A3,{project:e,companyId:t,onClose:()=>w("home"),onReportCreated:()=>{w("home"),n?.("Injury report submitted","success")}})}):x==="crew"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:d.jsx(dr,{size:20})}),d.jsx("h2",{children:"Crew Check-in"})]}),d.jsx(O3,{project:e,companyId:t,onShowToast:n})]}):x==="disposal"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:d.jsx(dr,{size:20})}),d.jsx("h2",{children:"Disposal Loads"})]}),d.jsx(k3,{project:e,date:new Date().toISOString().split("T")[0],onShowToast:n})]}):x==="docs"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:d.jsx(dr,{size:20})}),d.jsx("h2",{children:"Documents"})]}),d.jsx(P3,{projectId:e.id,onShowToast:n})]}):x==="metrics"?d.jsx(kZ,{project:e,companyId:t,onBack:()=>w("home")}):x==="punchlist"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>{w("home"),K()},children:d.jsx(dr,{size:20})}),d.jsx("h2",{children:"Punch List"})]}),d.jsx(r2,{projectId:e.id,areas:s,companyId:t,onShowToast:n})]}):x==="progress"?d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-subheader",children:[d.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:d.jsx(dr,{size:20})}),d.jsx("h2",{children:"Progress"}),d.jsxs("span",{className:"fm-subheader-badge",children:[q,"%"]})]}),d.jsx("div",{className:"fm-progress-content",children:u?d.jsxs("div",{className:"fm-loading",children:[d.jsx("div",{className:"spinner"}),d.jsx("span",{children:"Loading..."})]}):s.length===0?d.jsxs("div",{className:"fm-empty",children:[d.jsx(vN,{size:48}),d.jsx("h3",{children:"No tasks yet"}),d.jsx("p",{children:"Office will add tasks to this project"})]}):fe?Object.entries(B).map(([H,Ee])=>d.jsxs("div",{className:"fm-group",children:[d.jsxs("button",{className:"fm-group-header",onClick:()=>ie(H),children:[d.jsxs("div",{className:"fm-group-left",children:[p[H]?d.jsx(yf,{size:18}):d.jsx(Ec,{size:18}),d.jsx("span",{children:H})]}),d.jsx("span",{className:"fm-group-count",children:je(Ee)})]}),p[H]&&d.jsx("div",{className:"fm-group-items",children:Ee.map(Te=>d.jsxs("div",{className:`fm-task ${Te.status}`,children:[d.jsx("span",{className:"fm-task-name",children:Te.name}),d.jsxs("div",{className:"fm-task-btns",children:[d.jsx("button",{className:`fm-status-btn working ${Te.status==="working"?"active":""}`,onClick:()=>I(Te.id,"working"),disabled:h===Te.id,children:d.jsx(Lo,{size:14})}),d.jsx("button",{className:`fm-status-btn done ${Te.status==="done"?"active":""}`,onClick:()=>I(Te.id,"done"),disabled:h===Te.id,children:d.jsx(na,{size:14})})]})]},Te.id))})]},H)):d.jsx("div",{className:"fm-task-list",children:s.map(H=>d.jsxs("div",{className:`fm-task ${H.status}`,children:[d.jsx("span",{className:"fm-task-name",children:H.name}),d.jsxs("div",{className:"fm-task-btns",children:[d.jsx("button",{className:`fm-status-btn working ${H.status==="working"?"active":""}`,onClick:()=>I(H.id,"working"),disabled:h===H.id,children:d.jsx(Lo,{size:14})}),d.jsx("button",{className:`fm-status-btn done ${H.status==="done"?"active":""}`,onClick:()=>I(H.id,"done"),disabled:h===H.id,children:d.jsx(na,{size:14})})]})]},H.id))})})]}):d.jsxs("div",{className:"fm-view",children:[d.jsxs("div",{className:"fm-header",children:[d.jsx("button",{className:"fm-exit",onClick:i,children:d.jsx(dr,{size:20})}),d.jsxs("div",{className:"fm-header-center",children:[d.jsx("h1",{className:"fm-project-name",children:e.name}),r&&d.jsx("span",{className:"fm-foreman-name",children:r}),d.jsx("button",{className:"fm-info-toggle",onClick:()=>S(!j),children:d.jsx(Yq,{size:16})})]}),d.jsx("button",{className:"fm-theme",onClick:pe,children:D?d.jsx(cN,{size:20}):d.jsx(uN,{size:20})})]}),j&&d.jsxs("div",{className:"fm-project-info",children:[e.job_number&&d.jsxs("div",{className:"fm-info-item",children:[d.jsx("span",{children:"Job #"}),d.jsx("span",{children:e.job_number})]}),e.address&&d.jsxs("div",{className:"fm-info-item",children:[d.jsx("span",{children:"Address"}),d.jsx("span",{children:e.address})]}),e.general_contractor&&d.jsxs("div",{className:"fm-info-item",children:[d.jsx("span",{children:"GC"}),d.jsx("span",{children:e.general_contractor})]}),e.client_phone&&d.jsxs("div",{className:"fm-info-item",children:[d.jsx("span",{children:"Phone"}),d.jsx("a",{href:`tel:${e.client_phone}`,children:e.client_phone})]})]}),d.jsx(DZ,{project:e,todayStatus:A,progress:q,areasWorking:U,areasDone:R,areasRemaining:J,punchListOpenCount:O,onNavigate:te,onShowToast:n})]})}const PZ=y.lazy(()=>Mr(()=>import("./Dashboard-Q9HM0WBN.js").then(e=>e.D),__vite__mapDeps([6,4,1,2,7]))),MZ=y.lazy(()=>Mr(()=>import("./Setup-BMKaQUvd.js"),__vite__mapDeps([8,4,1,2,3]))),RZ=y.lazy(()=>Mr(()=>import("./BrandingSettings-DgfhTeY8.js"),__vite__mapDeps([9,1,2,3,4]))),qZ=y.lazy(()=>Mr(()=>import("./PricingManager-CefQYPsc.js"),__vite__mapDeps([10,1,2,3,4]))),LZ=y.lazy(()=>Mr(()=>import("./PublicView-DHn_7yKh.js"),__vite__mapDeps([11,1,2,3,4]))),zZ=y.lazy(()=>Mr(()=>import("./SignaturePage-BZdLHu6C.js"),__vite__mapDeps([12,1,2,7,4,13,3]))),IZ=y.lazy(()=>Mr(()=>import("./MembershipManager-C_26fPlT.js"),__vite__mapDeps([14,1,2,3,4]))),UZ=y.lazy(()=>Mr(()=>import("./LandingPage-Cop6Tj4M.js"),__vite__mapDeps([15,1,2,3,4]))),BZ=y.lazy(()=>Mr(()=>import("./PrivacyPolicy-DxXO0N7B.js"),__vite__mapDeps([16,1,2,3,4]))),$Z=y.lazy(()=>Mr(()=>import("./TermsOfService-Dzxef8Sh.js"),__vite__mapDeps([17,1,2,3,4])));function Fs(){return d.jsxs("div",{className:"page-loader",children:[d.jsx(Ur,{className:"loading-logo"}),d.jsx("div",{className:"spinner"})]})}function HZ({pendingCompanyName:e,userName:t,onCheckStatus:r,onLogout:n}){const[i,s]=y.useState(!1);y.useEffect(()=>{const u=setInterval(()=>{r()},3e4);return()=>clearInterval(u)},[r]);const c=async()=>{s(!0),await r(),setTimeout(()=>s(!1),1e3)};return d.jsxs("div",{className:"pending-approval-screen",children:[d.jsx(Ur,{className:"pending-logo"}),d.jsx("div",{className:"pending-pulse-ring",children:d.jsx("div",{className:"pending-pulse-dot"})}),d.jsx("h2",{children:"Awaiting Approval"}),e&&d.jsx("div",{className:"pending-company-name",children:e}),d.jsxs("p",{className:"pending-message",children:[t?`Hi ${t.split(" ")[0]}, your`:"Your"," membership request has been submitted. A company administrator will review and approve your access."]}),d.jsx("p",{className:"pending-auto-check",children:"We'll automatically check for updates"}),d.jsxs("div",{className:"pending-actions",children:[d.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Sign Out"}),d.jsx("button",{className:"btn btn-primary",onClick:c,disabled:i,children:i?"Checking...":"Check Status"})]})]})}function FZ(){const{token:e}=kN();return d.jsx(y.Suspense,{fallback:d.jsx(Fs,{}),children:d.jsx(LZ,{shareToken:e})})}function KZ(){const{token:e}=kN();return d.jsx(y.Suspense,{fallback:d.jsx(Fs,{}),children:d.jsx(zZ,{signatureToken:e})})}function YZ(){const e=vm(),t=la(),[r,n]=y.useState(null),[i,s]=y.useState(null),[c,u]=y.useState([]),[,m]=y.useState([]),[h,g]=y.useState(null),[p,_]=y.useState(""),[x,w]=y.useState(!0),[j,S]=y.useState(null),[O,C]=y.useState(!1),[A,k]=y.useState(!1),[D,M]=y.useState(null),[z,K]=y.useState(0),[Q,ne]=y.useState(!1),[G,I]=y.useState(null),[ie,pe]=y.useState(""),[q,R]=y.useState(!1),U=y.useCallback((ve,Ne="")=>{S({message:ve,type:Ne})},[]),J=y.useCallback(async()=>{try{if(!P){w(!1);return}const{data:{user:ve}}=await T.auth.getUser();if(!ve){w(!1);return}const{data:Ne}=await T.from("users").select("*").eq("id",ve.id).single();if(Ne){n(Ne);let Me=await be.getUserCompanies(ve.id);if(Me.length===0&&Ne.company_id&&await be.repairLegacyUser(ve.id,Ne.company_id,Ne.role||"member")&&(Me=await be.getUserCompanies(ve.id)),u(Me),Me.length===0){if(await be.getUserPendingMemberships(ve.id)>0){try{const{data:_t}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",ve.id).eq("status","pending").limit(1);_t?.[0]?.companies?.name&&pe(_t[0].companies.name)}catch{}e("/pending",{replace:!0});return}S({message:"No company access. Join a company to continue.",type:"error"}),await uf.signOut();return}const Et=localStorage.getItem("selectedCompanyId");let Re=null;if(Et&&Me.find(Bt=>Bt.id===Et)?Re=Me.find(Bt=>Bt.id===Et):Me.length>0&&(Re=Me[0]),Re){const{data:Bt}=await T.from("companies").select("*").eq("id",Re.id).single();s(Bt),R(!0);const _t=t.pathname,Nt=_t.startsWith("/view/")||_t.startsWith("/sign/"),Kr=["/dashboard","/projects/new","/pricing","/branding","/team"].includes(_t);!Nt&&!Kr&&_t!=="/field"&&e("/dashboard",{replace:!0})}}}catch(ve){console.error("Auth check error:",ve)}finally{w(!1)}},[e,t.pathname]);y.useEffect(()=>{const ve=t.pathname;ve.startsWith("/view/")||ve.startsWith("/sign/")?w(!1):J()},[]),y.useEffect(()=>{if(!P)return;const{data:{subscription:ve}}=T.auth.onAuthStateChange(async Ne=>{if(Ne==="SIGNED_OUT"||Ne==="USER_DELETED"){const Me=t.pathname;if(Me.startsWith("/sign/")||Me.startsWith("/view/"))return;n(null),s(null),u([]),R(!1),e("/login",{replace:!0})}else if(Ne==="SIGNED_IN"&&!r){const Me=t.pathname;!Me.startsWith("/sign/")&&!Me.startsWith("/view/")&&J()}});return()=>{ve?.unsubscribe()}},[r,J,e,t.pathname]);const B=(ve,Ne="")=>{localStorage.setItem("fieldsync-has-visited","true"),g(ve),_(Ne),e("/field")},fe=async(ve,Ne)=>{try{await Cy(),localStorage.setItem("fieldsync-has-visited","true");const{data:Me,error:Et}=await T.auth.signInWithPassword({email:ve,password:Ne});if(Et){U(Et.message||"Invalid credentials","error");return}const{data:Re,error:Bt}=await T.from("users").select("*").eq("id",Me.user.id).single();if(Bt){console.error("User fetch error:",Bt),U("Error loading profile","error");return}if(Re){n(Re);let _t=await be.getUserCompanies(Me.user.id);_t.length===0&&Re.company_id&&await be.repairLegacyUser(Me.user.id,Re.company_id,Re.role||"member")&&(_t=await be.getUserCompanies(Me.user.id)),u(_t);const Nt=localStorage.getItem("selectedCompanyId");let Kr=null;if(Nt&&_t.find(jt=>jt.id===Nt)?Kr=_t.find(jt=>jt.id===Nt):_t.length>0&&(Kr=_t[0]),Kr){const{data:jt}=await T.from("companies").select("*").eq("id",Kr.id).single();s(jt),R(!0);const{data:Ge}=await T.auth.mfa.listFactors(),Yr=Ge?.totp?.find(Sn=>Sn.status==="verified");Yr?(I(Yr.id),ne(!0)):e("/dashboard")}else if(await be.getUserPendingMemberships(Me.user.id)>0){try{const{data:Ge}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",Me.user.id).eq("status","pending").limit(1);Ge?.[0]?.companies?.name&&pe(Ge[0].companies.name)}catch{}e("/pending")}else U("No company access. Please contact admin.","error")}else U("Profile not found. Please contact admin.","error")}catch(Me){console.error("Login error:",Me),U("Login failed","error")}},je=async ve=>{try{const{data:Ne}=await T.from("companies").select("*").eq("id",ve).single();Ne&&(s(Ne),localStorage.setItem("selectedCompanyId",ve),C(!1),e("/dashboard"),U(`Switched to ${Ne.name}`,"success"))}catch(Ne){console.error("Switch company error:",Ne),U("Error switching company","error")}},te=async()=>{try{await uf.signOut(),n(null),s(null),u([]),R(!1),localStorage.removeItem("selectedCompanyId"),e("/login")}catch(ve){console.error("Logout error:",ve),U("Error signing out","error")}},H=async()=>{await Cy(),g(null),_(""),e("/login")},Ee=()=>{e("/dashboard"),i?.id&&Te()},Te=async()=>{if(i?.id)try{const ve=await be.getProjects(i.id);m(ve)}catch(ve){console.error("Error loading projects:",ve)}};y.useEffect(()=>{i?.id&&q&&(Te(),Ie())},[i?.id,q]);const Ie=async()=>{if(i?.id)try{const Ne=(await be.getCompanyMemberships(i.id)).filter(Me=>Me.status==="pending").length;K(Ne)}catch(ve){console.error("Error loading pending count:",ve)}},ge=y.useCallback(()=>{M(null)},[]),we=c.find(ve=>ve.id===i?.id)?.access_level==="administrator"||i?.owner_user_id===r?.id,xe=j&&d.jsx(GN,{message:j.message,type:j.type,onClose:()=>S(null)});if(x)return d.jsx(Dg,{children:d.jsx(qd,{companyId:i?.id,children:d.jsxs("div",{className:"loading-screen",children:[d.jsx(Ur,{className:"loading-logo"}),d.jsx("div",{className:"spinner"})]})})});if(Q)return d.jsx(Dg,{children:d.jsxs(qd,{companyId:i?.id,children:[d.jsx(ga,{children:d.jsx(u3,{factorId:G,onVerified:()=>{ne(!1),e("/dashboard")},onCancel:async()=>{ne(!1),I(null),await uf.signOut(),n(null),s(null),u([]),R(!1),e("/login")}})}),xe]})});const oe=ve=>!r||!i||!q?d.jsx(So,{to:"/login",replace:!0}):ve,Fe=ve=>d.jsx(i3,{children:d.jsxs("div",{children:[!P&&d.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),d.jsx("nav",{className:"nav",children:d.jsxs("div",{className:"nav-content",children:[d.jsx(Ur,{}),d.jsxs("div",{className:"nav-tabs nav-tabs-desktop",children:[d.jsx("button",{className:`nav-tab ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>e("/dashboard"),children:"Dashboard"}),d.jsx("button",{className:`nav-tab ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>e("/projects/new"),children:"+ New Project"}),d.jsx("button",{className:`nav-tab ${t.pathname==="/pricing"?"active":""}`,onClick:()=>e("/pricing"),children:"Pricing"}),we&&d.jsx("button",{className:`nav-tab ${t.pathname==="/branding"?"active":""}`,onClick:()=>e("/branding"),children:"Branding"}),we&&d.jsxs("button",{className:`nav-tab ${t.pathname==="/team"?"active":""}`,onClick:()=>e("/team"),children:["Team",z>0&&d.jsx("span",{className:"nav-tab-badge",children:z})]})]}),d.jsxs("div",{className:"nav-user nav-user-desktop",children:[d.jsx(a1,{compact:!0}),d.jsxs("div",{className:"mobile-menu",children:[d.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!A),"aria-label":"User menu",children:""}),A&&d.jsxs("div",{className:"mobile-menu-dropdown",children:[d.jsxs("div",{className:"mobile-menu-info",children:[d.jsx("div",{className:"mobile-menu-user",children:r?.name||r?.email}),i&&d.jsx("div",{className:"mobile-menu-company",children:i.name})]}),d.jsx("button",{className:"mobile-menu-logout",onClick:()=>{k(!1),te()},children:"Sign Out"})]})]}),c.length>1&&d.jsxs("div",{className:"company-switcher",children:[d.jsxs("button",{className:"company-switcher-btn",onClick:()=>C(!O),children:[i?.name||"Select Company",d.jsx("span",{className:"switcher-arrow",children:""})]}),O&&d.jsx("div",{className:"company-dropdown",children:c.map(Ne=>d.jsxs("button",{className:`company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>je(Ne.id),children:[Ne.name,Ne.id===i?.id&&d.jsx("span",{className:"check",children:""})]},Ne.id))})]}),c.length<=1&&i&&d.jsx("span",{className:"nav-company-name",children:i.name}),d.jsx("span",{className:"nav-user-name",children:r?.name||r?.email}),d.jsx("button",{className:"nav-logout",onClick:te,children:"Sign Out"})]}),d.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!0),"aria-label":"Open menu",children:d.jsxs("span",{className:"hamburger-icon",children:[d.jsx("span",{}),d.jsx("span",{}),d.jsx("span",{})]})})]})}),A&&d.jsx("div",{className:"mobile-drawer-overlay",onClick:()=>k(!1),children:d.jsxs("div",{className:"mobile-drawer",onClick:Ne=>Ne.stopPropagation(),children:[d.jsxs("div",{className:"mobile-drawer-header",children:[d.jsx(Ur,{}),d.jsx("button",{className:"mobile-drawer-close",onClick:()=>k(!1),"aria-label":"Close menu",children:""})]}),d.jsxs("div",{className:"mobile-drawer-user",children:[d.jsx("div",{className:"mobile-user-avatar",children:(r?.name||r?.email||"U")[0].toUpperCase()}),d.jsxs("div",{className:"mobile-user-info",children:[d.jsx("span",{className:"mobile-user-name",children:r?.name||r?.email}),d.jsx("span",{className:"mobile-user-company",children:i?.name})]})]}),c.length>1&&d.jsxs("div",{className:"mobile-drawer-section",children:[d.jsx("div",{className:"mobile-section-title",children:"Switch Company"}),d.jsx("div",{className:"mobile-company-list",children:c.map(Ne=>d.jsxs("button",{className:`mobile-company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>{je(Ne.id),k(!1)},children:[d.jsx("span",{className:"mobile-company-name",children:Ne.name}),Ne.id===i?.id&&d.jsx("span",{className:"mobile-company-check",children:""})]},Ne.id))})]}),d.jsxs("div",{className:"mobile-drawer-section",children:[d.jsx("div",{className:"mobile-section-title",children:"Navigation"}),d.jsxs("div",{className:"mobile-nav-list",children:[d.jsx("button",{className:`mobile-nav-item ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>{e("/dashboard"),k(!1)},children:"Dashboard"}),d.jsx("button",{className:`mobile-nav-item ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>{e("/projects/new"),k(!1)},children:"+ New Project"}),d.jsx("button",{className:`mobile-nav-item ${t.pathname==="/pricing"?"active":""}`,onClick:()=>{e("/pricing"),k(!1)},children:"Pricing"}),we&&d.jsx("button",{className:`mobile-nav-item ${t.pathname==="/branding"?"active":""}`,onClick:()=>{e("/branding"),k(!1)},children:"Branding"}),we&&d.jsxs("button",{className:`mobile-nav-item ${t.pathname==="/team"?"active":""}`,onClick:()=>{e("/team"),k(!1)},children:["Team",z>0&&d.jsx("span",{className:"mobile-nav-badge",children:z})]})]})]}),d.jsxs("div",{className:"mobile-drawer-section",children:[d.jsx("div",{className:"mobile-section-title",children:"Appearance"}),d.jsx("div",{className:"mobile-theme-toggle",children:d.jsx(a1,{})})]}),d.jsx("div",{className:"mobile-drawer-footer",children:d.jsx("button",{className:"mobile-logout-btn",onClick:()=>{te(),k(!1)},children:"Sign Out"})})]})}),d.jsx(ga,{children:d.jsx(y.Suspense,{fallback:d.jsx(Fs,{}),children:d.jsx("div",{className:"container",children:ve},i?.id)})}),d.jsx(i1,{}),xe,d.jsx(l3,{})]})});return d.jsx(Dg,{children:d.jsxs(qd,{companyId:i?.id,children:[d.jsxs(QL,{children:[d.jsx(Ir,{path:"/view/:token",element:d.jsxs(ga,{children:[d.jsx(FZ,{}),xe]})}),d.jsx(Ir,{path:"/sign/:token",element:d.jsxs(ga,{children:[d.jsx(KZ,{}),xe]})}),d.jsx(Ir,{path:"/privacy",element:d.jsx(ga,{children:d.jsx(y.Suspense,{fallback:d.jsx(Fs,{}),children:d.jsx(BZ,{})})})}),d.jsx(Ir,{path:"/terms",element:d.jsx(ga,{children:d.jsx(y.Suspense,{fallback:d.jsx(Fs,{}),children:d.jsx($Z,{})})})}),d.jsx(Ir,{path:"/login",element:r&&i&&q?d.jsx(So,{to:"/dashboard",replace:!0}):d.jsxs(ga,{children:[d.jsx(s3,{onForemanAccess:B,onOfficeLogin:fe,onShowToast:U}),xe]})}),d.jsx(Ir,{path:"/pending",element:d.jsxs(ga,{children:[d.jsx(HZ,{pendingCompanyName:ie,userName:r?.name,onCheckStatus:J,onLogout:te}),xe]})}),d.jsx(Ir,{path:"/field",element:h?d.jsxs(qd,{companyId:h.company_id,children:[d.jsx(ga,{children:d.jsx(TZ,{project:h,companyId:h.company_id,foremanName:p,onShowToast:U,onExit:H})}),d.jsx(i1,{}),xe]}):d.jsx(So,{to:"/login",replace:!0})}),d.jsx(Ir,{path:"/dashboard",element:oe(Fe(d.jsx(PZ,{company:i,user:r,isAdmin:we,onShowToast:U,navigateToProjectId:D,onProjectNavigated:ge})))}),d.jsx(Ir,{path:"/projects/new",element:oe(Fe(d.jsx(MZ,{company:i,user:r,onProjectCreated:Ee,onShowToast:U})))}),d.jsx(Ir,{path:"/pricing",element:oe(Fe(d.jsx(qZ,{company:i,onShowToast:U})))}),d.jsx(Ir,{path:"/branding",element:oe(Fe(d.jsx(RZ,{company:i,onShowToast:U})))}),d.jsx(Ir,{path:"/team",element:oe(we?Fe(d.jsx(IZ,{company:i,user:r,onShowToast:U})):d.jsx(So,{to:"/dashboard",replace:!0}))}),d.jsx(Ir,{path:"/",element:r&&i&&q?d.jsx(So,{to:"/dashboard",replace:!0}):localStorage.getItem("fieldsync-has-visited")?d.jsx(So,{to:"/login",replace:!0}):d.jsx(ga,{children:d.jsx(y.Suspense,{fallback:d.jsx(Fs,{}),children:d.jsx(UZ,{})})})}),d.jsx(Ir,{path:"*",element:d.jsx(So,{to:"/",replace:!0})})]}),d.jsx(c3,{})]})})}var el;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(el||(el={}));class by extends Error{constructor(t,r,n){super(t),this.message=t,this.code=r,this.data=n}}const GZ=e=>{var t,r;return e?.androidBridge?"android":!((r=(t=e?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},VZ=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},n=r.Plugins=r.Plugins||{},i=()=>t!==null?t.name:GZ(e),s=()=>i()!=="web",c=p=>{const _=h.get(p);return!!(_?.platforms.has(i())||u(p))},u=p=>{var _;return(_=r.PluginHeaders)===null||_===void 0?void 0:_.find(x=>x.name===p)},m=p=>e.console.error(p),h=new Map,g=(p,_={})=>{const x=h.get(p);if(x)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),x.proxy;const w=i(),j=u(p);let S;const O=async()=>(!S&&w in _?S=typeof _[w]=="function"?S=await _[w]():S=_[w]:t!==null&&!S&&"web"in _&&(S=typeof _.web=="function"?S=await _.web():S=_.web),S),C=(K,Q)=>{var ne,G;if(j){const I=j?.methods.find(ie=>Q===ie.name);if(I)return I.rtype==="promise"?ie=>r.nativePromise(p,Q.toString(),ie):(ie,pe)=>r.nativeCallback(p,Q.toString(),ie,pe);if(K)return(ne=K[Q])===null||ne===void 0?void 0:ne.bind(K)}else{if(K)return(G=K[Q])===null||G===void 0?void 0:G.bind(K);throw new by(`"${p}" plugin is not implemented on ${w}`,el.Unimplemented)}},A=K=>{let Q;const ne=(...G)=>{const I=O().then(ie=>{const pe=C(ie,K);if(pe){const q=pe(...G);return Q=q?.remove,q}else throw new by(`"${p}.${K}()" is not implemented on ${w}`,el.Unimplemented)});return K==="addListener"&&(I.remove=async()=>Q()),I};return ne.toString=()=>`${K.toString()}() { [capacitor code] }`,Object.defineProperty(ne,"name",{value:K,writable:!1,configurable:!1}),ne},k=A("addListener"),D=A("removeListener"),M=(K,Q)=>{const ne=k({eventName:K},Q),G=async()=>{const ie=await ne;D({eventName:K,callbackId:ie},Q)},I=new Promise(ie=>ne.then(()=>ie({remove:G})));return I.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await G()},I},z=new Proxy({},{get(K,Q){switch(Q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?M:k;case"removeListener":return D;default:return A(Q)}}});return n[p]=z,h.set(p,{name:p,proxy:z,platforms:new Set([...Object.keys(_),...j?[w]:[]])}),z};return r.convertFileSrc||(r.convertFileSrc=p=>p),r.getPlatform=i,r.handleError=m,r.isNativePlatform=s,r.isPluginAvailable=c,r.registerPlugin=g,r.Exception=by,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},WZ=e=>e.Capacitor=VZ(e),Kc=WZ(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Y_=Kc.registerPlugin;class G_{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(r);const s=this.windowListeners[t];s&&!s.registered&&this.addWindowListener(s),n&&this.sendRetainedArgumentsForEvent(t);const c=async()=>this.removeListener(t,r);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,n){const i=this.listeners[t];if(!i){if(n){let s=this.retainedEventArguments[t];s||(s=[]),s.push(r),this.retainedEventArguments[t]=s}return}i.forEach(s=>s(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new Kc.Exception(t,el.Unimplemented)}unavailable(t="not available"){return new Kc.Exception(t,el.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const i=n.indexOf(r);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(n=>{this.notifyListeners(t,n)}))}}const nN=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),aN=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class XZ extends G_{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[i,s]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=aN(i).trim(),s=aN(s).trim(),r[i]=s}),r}async setCookie(t){try{const r=nN(t.key),n=nN(t.value),i=t.expires?`; expires=${t.expires.replace("expires=","")}`:"",s=(t.path||"/").replace("path=",""),c=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${n||""}${i}; path=${s}; ${c};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Y_("CapacitorCookies",{web:()=>new XZ});const ZZ=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const i=n.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>r(i),n.readAsDataURL(e)}),QZ=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,s,c)=>(i[s]=e[t[c]],i),{})},JZ=(e,t=!0)=>e?Object.entries(e).reduce((n,i)=>{const[s,c]=i;let u,m;return Array.isArray(c)?(m="",c.forEach(h=>{u=t?encodeURIComponent(h):h,m+=`${s}=${u}&`}),m.slice(0,-1)):(u=t?encodeURIComponent(c):c,m=`${s}=${u}`),`${n}&${m}`},"").substr(1):null,eQ=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),i=QZ(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[c,u]of Object.entries(e.data||{}))s.set(c,u);r.body=s.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const s=new FormData;if(e.data instanceof FormData)e.data.forEach((u,m)=>{s.append(m,u)});else for(const u of Object.keys(e.data))s.append(u,e.data[u]);r.body=s;const c=new Headers(r.headers);c.delete("content-type"),r.headers=c}else(i.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class tQ extends G_{async request(t){const r=eQ(t,t.webFetchExtra),n=JZ(t.params,t.shouldEncodeUrlParams),i=n?`${t.url}?${n}`:t.url,s=await fetch(i,r),c=s.headers.get("content-type")||"";let{responseType:u="text"}=s.ok?t:{};c.includes("application/json")&&(u="json");let m,h;switch(u){case"arraybuffer":case"blob":h=await s.blob(),m=await ZZ(h);break;case"json":m=await s.json();break;case"document":case"text":default:m=await s.text()}const g={};return s.headers.forEach((p,_)=>{g[_]=p}),{data:m,headers:g,status:s.status,url:s.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Y_("CapacitorHttp",{web:()=>new tQ});var iN;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(iN||(iN={}));var oN;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(oN||(oN={}));class rQ extends G_{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}Y_("SystemBars",{web:()=>new rQ});const n2=Kc.isNativePlatform(),nQ=Kc.getPlatform(),aQ=nQ==="android";let sN=!1;async function iQ(){if(!n2||sN)return;sN=!0;const{App:e}=await Mr(async()=>{const{App:s}=await import("./index-sSYsjcJV.js");return{App:s}},__vite__mapDeps([18,4,1,2,3])),{StatusBar:t,Style:r}=await Mr(async()=>{const{StatusBar:s,Style:c}=await import("./index-Boe0Uq3g.js");return{StatusBar:s,Style:c}},__vite__mapDeps([19,1,2,3,4])),{SplashScreen:n}=await Mr(async()=>{const{SplashScreen:s}=await import("./index-DmCARBTz.js");return{SplashScreen:s}},__vite__mapDeps([20,4,1,2,3])),{Keyboard:i}=await Mr(async()=>{const{Keyboard:s}=await import("./index-Ci3GJRKs.js");return{Keyboard:s}},__vite__mapDeps([21,1,2,3,4]));try{await t.setStyle({style:r.Dark}),aQ&&await t.setBackgroundColor({color:"#0f172a"})}catch{}try{await n.hide()}catch{}e.addListener("backButton",({canGoBack:s})=>{s?window.history.back():e.minimizeApp()});try{i.addListener("keyboardWillShow",()=>{document.body.classList.add("keyboard-visible")}),i.addListener("keyboardWillHide",()=>{document.body.classList.remove("keyboard-visible")})}catch{}}iQ();n2&&document.documentElement.classList.add("native");tL.createRoot(document.getElementById("root")).render(d.jsx(Gq.StrictMode,{children:d.jsx(jz,{children:d.jsx(YZ,{})})}));"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{setInterval(()=>{e.update().catch(t=>console.debug("[SW] Update check failed:",t.message))},3e5)}).catch(e=>{console.debug("[SW] Registration failed:",e.message)})}),navigator.serviceWorker.addEventListener("message",e=>{e.data?.type==="SW_UPDATED"&&(console.log("[App] Service worker updated, reloading for fresh assets..."),window.location.reload()),e.data?.type==="ASSET_NOT_FOUND"&&(console.warn("[App] Asset not found:",e.data.url,"- reloading..."),"caches"in window?caches.keys().then(t=>{t.forEach(r=>caches.delete(r))}).finally(()=>{window.location.reload()}):window.location.reload())}));export{hM as $,Hr as A,lK as B,Q7 as C,sr as D,It as E,wa as F,ia as G,RQ as H,X as I,tt as J,U8 as K,wr as L,EQ as M,Zi as N,Jo as O,es as P,Xi as Q,V0 as R,QN as S,eo as T,Ws as U,th as V,vb as W,fh as X,L_ as Y,nn as Z,fM as _,wm as a,uQ as a$,W4 as a0,al as a1,q_ as a2,Xo as a3,mF as a4,B_ as a5,z_ as a6,PV as a7,dM as a8,CM as a9,vm as aA,NZ as aB,pM as aC,gu as aD,e3 as aE,t3 as aF,r3 as aG,gQ as aH,m3 as aI,A3 as aJ,GN as aK,T as aL,dQ as aM,pZ as aN,MM as aO,fQ as aP,pQ as aQ,f3 as aR,mQ as aS,hQ as aT,Ur as aU,vQ as aV,Hb as aW,Y_ as aX,P3 as aY,P as aZ,G_ as a_,vG as aa,bt as ab,kE as ac,ru as ad,wQ as ae,tu as af,Tt as ag,Rt as ah,A_ as ai,nM as aj,xn as ak,p0 as al,ZY as am,$m as an,e2 as ao,O_ as ap,Ye as aq,be as ar,d as as,qv as at,vZ as au,Eb as av,Nb as aw,Db as ax,ey as ay,zM as az,_k as b,GQ as b0,ct as c,yQ as d,xQ as e,z5 as f,xD as g,wD as h,zN as i,ke as j,qt as k,SQ as l,jQ as m,u5 as n,BQ as o,$Q as p,qr as q,jr as r,bQ as s,HQ as t,De as u,fi as v,mi as w,ah as x,Lm as y,qQ as z};
//# sourceMappingURL=index-6q4sZMdk.js.map
