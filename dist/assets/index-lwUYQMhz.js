const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SignatureLinkGenerator-BRNzftRA.js","assets/icons-CwUiT5nc.js","assets/react-DXGY7bZi.js","assets/pdf-aQqpMATS.js","assets/supabase-VuevzHjS.js","assets/TMClientSignature-Bxr6sKtw.js","assets/Dashboard-B-myWZ9n.js","assets/corCalculations-vdJc_BOT.js","assets/Setup-CzdAdXSU.js","assets/BrandingSettings-C-4OCM-n.js","assets/PricingManager-Baq9r9k3.js","assets/PublicView-CGKBJ7oG.js","assets/SignaturePage-Dca-qYZq.js","assets/SignatureCanvas-CxhPY3CN.js","assets/MembershipManager-DSrJd7FS.js","assets/LandingPage-D4I5glOI.js","assets/index-uQdBCTyx.js","assets/index-D24d4aV3.js","assets/index-BYDwCBXz.js","assets/index-upkyCs2q.js"])))=>i.map(i=>d[i]);
import{r as y,H as Po,B as iq,A as cr,C as _c,U as tN,a as oq,b as Ki,E as sq,c as lq,S as rN,M as nN,T as um,D as aN,X as Nb,d as iN,L as $s,F as Fo,e as Mo,f as kb,g as cq,h as uq,i as gy,j as vy,k as dq,l as ea,R as OS,P as xc,m as fq,W as mq,Z as hq,G as pq,n as gq,o as vq,p as mf,q as CS,s as Jd,t as yq,u as oN,v as hf,w as sN,x as bq,y as _q,z as xq,I as wq,J as gc,K as jq,N as Sq,O as Eq,Q as Oq,V as lN,Y as cN,_ as Cq,$ as Aq,a0 as Nq,a1 as kq,a2 as Dq,a3 as uN,a4 as Tq,a5 as Pq,a6 as Mq,a7 as Rq,a8 as qq,a9 as Lq,aa as zq,ab as Iq,ac as Uq,ad as Bq}from"./icons-CwUiT5nc.js";import{r as dm,b as dN,a as ri}from"./react-DXGY7bZi.js";import{_ as Zr}from"./pdf-aQqpMATS.js";import{c as fN}from"./supabase-VuevzHjS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var vg={exports:{}},rc={};var AS;function $q(){if(AS)return rc;AS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,s){var c=null;if(s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:n,key:c,ref:i!==void 0?i:null,props:s}}return rc.Fragment=t,rc.jsx=r,rc.jsxs=r,rc}var NS;function Hq(){return NS||(NS=1,vg.exports=$q()),vg.exports}var f=Hq(),yg={exports:{}},nc={},bg={exports:{}},_g={};var kS;function Fq(){return kS||(kS=1,(function(e){function t(R,U){var J=R.length;R.push(U);e:for(;0<J;){var B=J-1>>>1,fe=R[B];if(0<i(fe,U))R[B]=U,R[J]=fe,J=B;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var U=R[0],J=R.pop();if(J!==U){R[0]=J;e:for(var B=0,fe=R.length,je=fe>>>1;B<je;){var te=2*(B+1)-1,H=R[te],Ee=te+1,Te=R[Ee];if(0>i(H,J))Ee<fe&&0>i(Te,H)?(R[B]=Te,R[Ee]=J,B=Ee):(R[B]=H,R[te]=J,B=te);else if(Ee<fe&&0>i(Te,J))R[B]=Te,R[Ee]=J,B=Ee;else break e}}return U}function i(R,U){var J=R.sortIndex-U.sortIndex;return J!==0?J:R.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var m=[],h=[],g=1,p=null,_=3,x=!1,w=!1,j=!1,S=!1,O=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(R){for(var U=r(h);U!==null;){if(U.callback===null)n(h);else if(U.startTime<=R)n(h),U.sortIndex=U.expirationTime,t(m,U);else break;U=r(h)}}function D(R){if(j=!1,k(R),!w)if(r(m)!==null)w=!0,M||(M=!0,I());else{var U=r(h);U!==null&&q(D,U.startTime-R)}}var M=!1,z=-1,K=5,Q=-1;function ne(){return S?!0:!(e.unstable_now()-Q<K)}function G(){if(S=!1,M){var R=e.unstable_now();Q=R;var U=!0;try{e:{w=!1,j&&(j=!1,C(z),z=-1),x=!0;var J=_;try{t:{for(k(R),p=r(m);p!==null&&!(p.expirationTime>R&&ne());){var B=p.callback;if(typeof B=="function"){p.callback=null,_=p.priorityLevel;var fe=B(p.expirationTime<=R);if(R=e.unstable_now(),typeof fe=="function"){p.callback=fe,k(R),U=!0;break t}p===r(m)&&n(m),k(R)}else n(m);p=r(m)}if(p!==null)U=!0;else{var je=r(h);je!==null&&q(D,je.startTime-R),U=!1}}break e}finally{p=null,_=J,x=!1}U=void 0}}finally{U?I():M=!1}}}var I;if(typeof A=="function")I=function(){A(G)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,pe=ie.port2;ie.port1.onmessage=G,I=function(){pe.postMessage(null)}}else I=function(){O(G,0)};function q(R,U){z=O(function(){R(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(R){switch(_){case 1:case 2:case 3:var U=3;break;default:U=_}var J=_;_=U;try{return R()}finally{_=J}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,U){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var J=_;_=R;try{return U()}finally{_=J}},e.unstable_scheduleCallback=function(R,U,J){var B=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?B+J:B):J=B,R){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=J+fe,R={id:g++,callback:U,priorityLevel:R,startTime:J,expirationTime:fe,sortIndex:-1},J>B?(R.sortIndex=J,t(h,R),r(m)===null&&R===r(h)&&(j?(C(z),z=-1):j=!0,q(D,J-B))):(R.sortIndex=fe,t(m,R),w||x||(w=!0,M||(M=!0,I()))),R},e.unstable_shouldYield=ne,e.unstable_wrapCallback=function(R){var U=_;return function(){var J=_;_=U;try{return R.apply(this,arguments)}finally{_=J}}}})(_g)),_g}var DS;function Kq(){return DS||(DS=1,bg.exports=Fq()),bg.exports}var TS;function Yq(){if(TS)return nc;TS=1;var e=Kq(),t=dm(),r=dN();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,l=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(l=o.return),a=o.return;while(a)}return o.tag===3?l:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function m(a){if(s(a)!==a)throw Error(n(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(n(188));return o!==a?null:a}for(var l=a,d=o;;){var v=l.return;if(v===null)break;var b=v.alternate;if(b===null){if(d=v.return,d!==null){l=d;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===l)return m(v),a;if(b===d)return m(v),o;b=b.sibling}throw Error(n(188))}if(l.return!==d.return)l=v,d=b;else{for(var E=!1,N=v.child;N;){if(N===l){E=!0,l=v,d=b;break}if(N===d){E=!0,d=v,l=b;break}N=N.sibling}if(!E){for(N=b.child;N;){if(N===l){E=!0,l=b,d=v;break}if(N===d){E=!0,d=b,l=v;break}N=N.sibling}if(!E)throw Error(n(189))}}if(l.alternate!==d)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?a:o}function g(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=g(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),ne=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function I(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var ie=Symbol.for("react.client.reference");function pe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ie?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case j:return"Fragment";case O:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case Q:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case A:return a.displayName||"Context";case C:return(a._context.displayName||"Context")+".Consumer";case k:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case z:return o=a.displayName||null,o!==null?o:pe(a.type)||"Memo";case K:o=a._payload,a=a._init;try{return pe(a(o))}catch{}}return null}var q=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},B=[],fe=-1;function je(a){return{current:a}}function te(a){0>fe||(a.current=B[fe],B[fe]=null,fe--)}function H(a,o){fe++,B[fe]=a.current,a.current=o}var Ee=je(null),Te=je(null),Ie=je(null),ge=je(null);function Le(a,o){switch(H(Ie,o),H(Te,a),H(Ee,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Wj(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Wj(o),a=Xj(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}te(Ee),H(Ee,a)}function ee(){te(Ee),te(Te),te(Ie)}function we(a){a.memoizedState!==null&&H(ge,a);var o=Ee.current,l=Xj(o,a.type);o!==l&&(H(Te,a),H(Ee,l))}function xe(a){Te.current===a&&(te(Ee),te(Te)),ge.current===a&&(te(ge),Ql._currentValue=J)}var oe,He;function ve(a){if(oe===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);oe=o&&o[1]||"",He=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+a+He}var Ne=!1;function Me(a,o){if(!a||Ne)return"";Ne=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(re){var Z=re}Reflect.construct(a,[],de)}else{try{de.call()}catch(re){Z=re}a.call(de.prototype)}}else{try{throw Error()}catch(re){Z=re}(de=a())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(re){if(re&&Z&&typeof re.stack=="string")return[re.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),E=b[0],N=b[1];if(E&&N){var L=E.split(`
`),W=N.split(`
`);for(v=d=0;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;for(;v<W.length&&!W[v].includes("DetermineComponentFrameRoot");)v++;if(d===L.length||v===W.length)for(d=L.length-1,v=W.length-1;1<=d&&0<=v&&L[d]!==W[v];)v--;for(;1<=d&&0<=v;d--,v--)if(L[d]!==W[v]){if(d!==1||v!==1)do if(d--,v--,0>v||L[d]!==W[v]){var se=`
`+L[d].replace(" at new "," at ");return a.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",a.displayName)),se}while(1<=d&&0<=v);break}}}finally{Ne=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?ve(l):""}function jt(a,o){switch(a.tag){case 26:case 27:case 5:return ve(a.type);case 16:return ve("Lazy");case 13:return a.child!==o&&o!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return Me(a.type,!1);case 11:return Me(a.type.render,!1);case 1:return Me(a.type,!0);case 31:return ve("Activity");default:return""}}function Re(a){try{var o="",l=null;do o+=jt(a,l),l=a,a=a.return;while(a);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var It=Object.prototype.hasOwnProperty,yt=e.unstable_scheduleCallback,Ct=e.unstable_cancelCallback,Br=e.unstable_shouldYield,xt=e.unstable_requestPaint,Ye=e.unstable_now,$r=e.unstable_getCurrentPriorityLevel,xn=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,jr=e.unstable_NormalPriority,Yt=e.unstable_LowPriority,he=e.unstable_IdlePriority,it=e.log,wn=e.unstable_setDisableYieldValue,Qt=null,Ut=null;function qt(a){if(typeof it=="function"&&wn(a),Ut&&typeof Ut.setStrictMode=="function")try{Ut.setStrictMode(Qt,a)}catch{}}var ft=Math.clz32?Math.clz32:sa,tn=Math.log,Hn=Math.LN2;function sa(a){return a>>>=0,a===0?32:31-(tn(a)/Hn|0)|0}var di=256,fi=262144,xa=4194304;function jn(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function mi(a,o,l){var d=a.pendingLanes;if(d===0)return 0;var v=0,b=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var N=d&134217727;return N!==0?(d=N&~b,d!==0?v=jn(d):(E&=N,E!==0?v=jn(E):l||(l=N&~a,l!==0&&(v=jn(l))))):(N=d&~b,N!==0?v=jn(N):E!==0?v=jn(E):l||(l=d&~a,l!==0&&(v=jn(l)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,l=o&-o,b>=l||b===32&&(l&4194048)!==0)?o:v}function wa(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function cl(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var a=xa;return xa<<=1,(xa&62914560)===0&&(xa=4194304),a}function Fn(a){for(var o=[],l=0;31>l;l++)o.push(a);return o}function ja(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ul(a,o,l,d,v,b){var E=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var N=a.entanglements,L=a.expirationTimes,W=a.hiddenUpdates;for(l=E&~l;0<l;){var se=31-ft(l),de=1<<se;N[se]=0,L[se]=-1;var Z=W[se];if(Z!==null)for(W[se]=null,se=0;se<Z.length;se++){var re=Z[se];re!==null&&(re.lane&=-536870913)}l&=~de}d!==0&&hu(a,d,0),b!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=b&~(E&~o))}function hu(a,o,l){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-ft(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|l&261930}function pu(a,o){var l=a.entangledLanes|=o;for(a=a.entanglements;l;){var d=31-ft(l),v=1<<d;v&o|a[d]&o&&(a[d]|=o),l&=~v}}function Kn(a,o){var l=o&-o;return l=(l&42)!==0?1:dl(l),(l&(a.suspendedLanes|o))!==0?0:l}function dl(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function fl(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function eo(){var a=U.p;return a!==0?a:(a=window.event,a===void 0?32:bS(a.type))}function to(a,o){var l=U.p;try{return U.p=a,o()}finally{U.p=l}}var rn=Math.random().toString(36).slice(2),Bt="__reactFiber$"+rn,sr="__reactProps$"+rn,la="__reactContainer$"+rn,ro="__reactEvents$"+rn,gu="__reactListeners$"+rn,ml="__reactHandles$"+rn,hl="__reactResources$"+rn,Zo="__reactMarker$"+rn;function Qo(a){delete a[Bt],delete a[sr],delete a[ro],delete a[gu],delete a[ml]}function Yn(a){var o=a[Bt];if(o)return o;for(var l=a.parentNode;l;){if(o=l[la]||l[Bt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(a=nS(a);a!==null;){if(l=a[Bt])return l;a=nS(a)}return o}a=l,l=a.parentNode}return null}function hi(a){if(a=a[Bt]||a[la]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function no(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function Y(a){var o=a[hl];return o||(o=a[hl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ce(a){a[Zo]=!0}var me=new Set,le={};function ae(a,o){Se(a,o),Se(a+"Capture",o)}function Se(a,o){for(le[a]=o,a=0;a<o.length;a++)me.add(o[a])}var Ue=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fe={},lt={};function Mr(a){return It.call(lt,a)?!0:It.call(Fe,a)?!1:Ue.test(a)?lt[a]=!0:(Fe[a]=!0,!1)}function Je(a,o,l){if(Mr(o))if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+l)}}function Gt(a,o,l){if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+l)}}function Gn(a,o,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(o,l,""+d)}}function Sn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function B_(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function QM(a,o,l){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,b=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function(E){l=""+E,b.call(this,E)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function uh(a){if(!a._valueTracker){var o=B_(a)?"checked":"value";a._valueTracker=QM(a,o,""+a[o])}}function $_(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return a&&(d=B_(a)?a.checked?"true":"false":a.value),a=d,a!==l?(o.setValue(a),!0):!1}function vu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var JM=/[\n"\\]/g;function En(a){return a.replace(JM,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function dh(a,o,l,d,v,b,E,N){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),o!=null?E==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+Sn(o)):a.value!==""+Sn(o)&&(a.value=""+Sn(o)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),o!=null?fh(a,E,Sn(o)):l!=null?fh(a,E,Sn(l)):d!=null&&a.removeAttribute("value"),v==null&&b!=null&&(a.defaultChecked=!!b),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+Sn(N):a.removeAttribute("name")}function H_(a,o,l,d,v,b,E,N){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){uh(a);return}l=l!=null?""+Sn(l):"",o=o!=null?""+Sn(o):l,N||o===a.value||(a.value=o),a.defaultValue=o}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=N?a.checked:!!d,a.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E),uh(a)}function fh(a,o,l){o==="number"&&vu(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function Jo(a,o,l,d){if(a=a.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<a.length;l++)v=o.hasOwnProperty("$"+a[l].value),a[l].selected!==v&&(a[l].selected=v),v&&d&&(a[l].defaultSelected=!0)}else{for(l=""+Sn(l),o=null,v=0;v<a.length;v++){if(a[v].value===l){a[v].selected=!0,d&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function F_(a,o,l){if(o!=null&&(o=""+Sn(o),o!==a.value&&(a.value=o),l==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=l!=null?""+Sn(l):""}function K_(a,o,l,d){if(o==null){if(d!=null){if(l!=null)throw Error(n(92));if(q(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),o=l}l=Sn(o),a.defaultValue=l,d=a.textContent,d===l&&d!==""&&d!==null&&(a.value=d),uh(a)}function es(a,o){if(o){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=o;return}}a.textContent=o}var e2=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Y_(a,o,l){var d=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,l):typeof l!="number"||l===0||e2.has(o)?o==="float"?a.cssFloat=l:a[o]=(""+l).trim():a[o]=l+"px"}function G_(a,o,l){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var v in o)d=o[v],o.hasOwnProperty(v)&&l[v]!==d&&Y_(a,v,d)}else for(var b in o)o.hasOwnProperty(b)&&Y_(a,b,o[b])}function mh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var t2=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),r2=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yu(a){return r2.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Sa(){}var hh=null;function ph(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ts=null,rs=null;function V_(a){var o=hi(a);if(o&&(a=o.stateNode)){var l=a[sr]||null;e:switch(a=o.stateNode,o.type){case"input":if(dh(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+En(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==a&&d.form===a.form){var v=d[sr]||null;if(!v)throw Error(n(90));dh(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<l.length;o++)d=l[o],d.form===a.form&&$_(d)}break e;case"textarea":F_(a,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Jo(a,!!l.multiple,o,!1)}}}var gh=!1;function W_(a,o,l){if(gh)return a(o,l);gh=!0;try{var d=a(o);return d}finally{if(gh=!1,(ts!==null||rs!==null)&&(id(),ts&&(o=ts,a=rs,rs=ts=null,V_(o),a)))for(o=0;o<a.length;o++)V_(a[o])}}function pl(a,o){var l=a.stateNode;if(l===null)return null;var d=l[sr]||null;if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vh=!1;if(Ea)try{var gl={};Object.defineProperty(gl,"passive",{get:function(){vh=!0}}),window.addEventListener("test",gl,gl),window.removeEventListener("test",gl,gl)}catch{vh=!1}var pi=null,yh=null,bu=null;function X_(){if(bu)return bu;var a,o=yh,l=o.length,d,v="value"in pi?pi.value:pi.textContent,b=v.length;for(a=0;a<l&&o[a]===v[a];a++);var E=l-a;for(d=1;d<=E&&o[l-d]===v[b-d];d++);return bu=v.slice(a,1<d?1-d:void 0)}function _u(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function xu(){return!0}function Z_(){return!1}function Fr(a){function o(l,d,v,b,E){this._reactName=l,this._targetInst=v,this.type=d,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(l=a[N],this[N]=l?l(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?xu:Z_,this.isPropagationStopped=Z_,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xu)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xu)},persist:function(){},isPersistent:xu}),o}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wu=Fr(ao),vl=p({},ao,{view:0,detail:0}),n2=Fr(vl),bh,_h,yl,ju=p({},vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==yl&&(yl&&a.type==="mousemove"?(bh=a.screenX-yl.screenX,_h=a.screenY-yl.screenY):_h=bh=0,yl=a),bh)},movementY:function(a){return"movementY"in a?a.movementY:_h}}),Q_=Fr(ju),a2=p({},ju,{dataTransfer:0}),i2=Fr(a2),o2=p({},vl,{relatedTarget:0}),xh=Fr(o2),s2=p({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),l2=Fr(s2),c2=p({},ao,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),u2=Fr(c2),d2=p({},ao,{data:0}),J_=Fr(d2),f2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},m2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function p2(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=h2[a])?!!o[a]:!1}function wh(){return p2}var g2=p({},vl,{key:function(a){if(a.key){var o=f2[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=_u(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?m2[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wh,charCode:function(a){return a.type==="keypress"?_u(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?_u(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),v2=Fr(g2),y2=p({},ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ex=Fr(y2),b2=p({},vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wh}),_2=Fr(b2),x2=p({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),w2=Fr(x2),j2=p({},ju,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),S2=Fr(j2),E2=p({},ao,{newState:0,oldState:0}),O2=Fr(E2),C2=[9,13,27,32],jh=Ea&&"CompositionEvent"in window,bl=null;Ea&&"documentMode"in document&&(bl=document.documentMode);var A2=Ea&&"TextEvent"in window&&!bl,tx=Ea&&(!jh||bl&&8<bl&&11>=bl),rx=" ",nx=!1;function ax(a,o){switch(a){case"keyup":return C2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ix(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ns=!1;function N2(a,o){switch(a){case"compositionend":return ix(o);case"keypress":return o.which!==32?null:(nx=!0,rx);case"textInput":return a=o.data,a===rx&&nx?null:a;default:return null}}function k2(a,o){if(ns)return a==="compositionend"||!jh&&ax(a,o)?(a=X_(),bu=yh=pi=null,ns=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return tx&&o.locale!=="ko"?null:o.data;default:return null}}var D2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ox(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!D2[a.type]:o==="textarea"}function sx(a,o,l,d){ts?rs?rs.push(d):rs=[d]:ts=d,o=fd(o,"onChange"),0<o.length&&(l=new wu("onChange","change",null,l,d),a.push({event:l,listeners:o}))}var _l=null,xl=null;function T2(a){Hj(a,0)}function Su(a){var o=no(a);if($_(o))return a}function lx(a,o){if(a==="change")return o}var cx=!1;if(Ea){var Sh;if(Ea){var Eh="oninput"in document;if(!Eh){var ux=document.createElement("div");ux.setAttribute("oninput","return;"),Eh=typeof ux.oninput=="function"}Sh=Eh}else Sh=!1;cx=Sh&&(!document.documentMode||9<document.documentMode)}function dx(){_l&&(_l.detachEvent("onpropertychange",fx),xl=_l=null)}function fx(a){if(a.propertyName==="value"&&Su(xl)){var o=[];sx(o,xl,a,ph(a)),W_(T2,o)}}function P2(a,o,l){a==="focusin"?(dx(),_l=o,xl=l,_l.attachEvent("onpropertychange",fx)):a==="focusout"&&dx()}function M2(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Su(xl)}function R2(a,o){if(a==="click")return Su(o)}function q2(a,o){if(a==="input"||a==="change")return Su(o)}function L2(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var nn=typeof Object.is=="function"?Object.is:L2;function wl(a,o){if(nn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var l=Object.keys(a),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var v=l[d];if(!It.call(o,v)||!nn(a[v],o[v]))return!1}return!0}function mx(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function hx(a,o){var l=mx(a);a=0;for(var d;l;){if(l.nodeType===3){if(d=a+l.textContent.length,a<=o&&d>=o)return{node:l,offset:o-a};a=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=mx(l)}}function px(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?px(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function gx(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=vu(a.document);o instanceof a.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)a=o.contentWindow;else break;o=vu(a.document)}return o}function Oh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var z2=Ea&&"documentMode"in document&&11>=document.documentMode,as=null,Ch=null,jl=null,Ah=!1;function vx(a,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ah||as==null||as!==vu(d)||(d=as,"selectionStart"in d&&Oh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),jl&&wl(jl,d)||(jl=d,d=fd(Ch,"onSelect"),0<d.length&&(o=new wu("onSelect","select",null,o,l),a.push({event:o,listeners:d}),o.target=as)))}function io(a,o){var l={};return l[a.toLowerCase()]=o.toLowerCase(),l["Webkit"+a]="webkit"+o,l["Moz"+a]="moz"+o,l}var is={animationend:io("Animation","AnimationEnd"),animationiteration:io("Animation","AnimationIteration"),animationstart:io("Animation","AnimationStart"),transitionrun:io("Transition","TransitionRun"),transitionstart:io("Transition","TransitionStart"),transitioncancel:io("Transition","TransitionCancel"),transitionend:io("Transition","TransitionEnd")},Nh={},yx={};Ea&&(yx=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function oo(a){if(Nh[a])return Nh[a];if(!is[a])return a;var o=is[a],l;for(l in o)if(o.hasOwnProperty(l)&&l in yx)return Nh[a]=o[l];return a}var bx=oo("animationend"),_x=oo("animationiteration"),xx=oo("animationstart"),I2=oo("transitionrun"),U2=oo("transitionstart"),B2=oo("transitioncancel"),wx=oo("transitionend"),jx=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function Vn(a,o){jx.set(a,o),ae(o,[a])}var Eu=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},On=[],os=0,Dh=0;function Ou(){for(var a=os,o=Dh=os=0;o<a;){var l=On[o];On[o++]=null;var d=On[o];On[o++]=null;var v=On[o];On[o++]=null;var b=On[o];if(On[o++]=null,d!==null&&v!==null){var E=d.pending;E===null?v.next=v:(v.next=E.next,E.next=v),d.pending=v}b!==0&&Sx(l,v,b)}}function Cu(a,o,l,d){On[os++]=a,On[os++]=o,On[os++]=l,On[os++]=d,Dh|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Th(a,o,l,d){return Cu(a,o,l,d),Au(a)}function so(a,o){return Cu(a,null,null,o),Au(a)}function Sx(a,o,l){a.lanes|=l;var d=a.alternate;d!==null&&(d.lanes|=l);for(var v=!1,b=a.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(v=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,v&&o!==null&&(v=31-ft(l),a=b.hiddenUpdates,d=a[v],d===null?a[v]=[o]:d.push(o),o.lane=l|536870912),b):null}function Au(a){if(50<Kl)throw Kl=0,Bp=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ss={};function $2(a,o,l,d){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(a,o,l,d){return new $2(a,o,l,d)}function Ph(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Oa(a,o){var l=a.alternate;return l===null?(l=an(a.tag,o,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=o,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,o=a.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function Ex(a,o){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,o=l.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Nu(a,o,l,d,v,b){var E=0;if(d=a,typeof a=="function")Ph(a)&&(E=1);else if(typeof a=="string")E=GR(a,l,Ee.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case Q:return a=an(31,l,o,v),a.elementType=Q,a.lanes=b,a;case j:return lo(l.children,v,b,o);case S:E=8,v|=24;break;case O:return a=an(12,l,o,v|2),a.elementType=O,a.lanes=b,a;case D:return a=an(13,l,o,v),a.elementType=D,a.lanes=b,a;case M:return a=an(19,l,o,v),a.elementType=M,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:E=10;break e;case C:E=9;break e;case k:E=11;break e;case z:E=14;break e;case K:E=16,d=null;break e}E=29,l=Error(n(130,a===null?"null":typeof a,"")),d=null}return o=an(E,l,o,v),o.elementType=a,o.type=d,o.lanes=b,o}function lo(a,o,l,d){return a=an(7,a,d,o),a.lanes=l,a}function Mh(a,o,l){return a=an(6,a,null,o),a.lanes=l,a}function Ox(a){var o=an(18,null,null,0);return o.stateNode=a,o}function Rh(a,o,l){return o=an(4,a.children!==null?a.children:[],a.key,o),o.lanes=l,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var Cx=new WeakMap;function Cn(a,o){if(typeof a=="object"&&a!==null){var l=Cx.get(a);return l!==void 0?l:(o={value:a,source:o,stack:Re(o)},Cx.set(a,o),o)}return{value:a,source:o,stack:Re(o)}}var ls=[],cs=0,ku=null,Sl=0,An=[],Nn=0,gi=null,ca=1,ua="";function Ca(a,o){ls[cs++]=Sl,ls[cs++]=ku,ku=a,Sl=o}function Ax(a,o,l){An[Nn++]=ca,An[Nn++]=ua,An[Nn++]=gi,gi=a;var d=ca;a=ua;var v=32-ft(d)-1;d&=~(1<<v),l+=1;var b=32-ft(o)+v;if(30<b){var E=v-v%5;b=(d&(1<<E)-1).toString(32),d>>=E,v-=E,ca=1<<32-ft(o)+v|l<<v|d,ua=b+a}else ca=1<<b|l<<v|d,ua=a}function qh(a){a.return!==null&&(Ca(a,1),Ax(a,1,0))}function Lh(a){for(;a===ku;)ku=ls[--cs],ls[cs]=null,Sl=ls[--cs],ls[cs]=null;for(;a===gi;)gi=An[--Nn],An[Nn]=null,ua=An[--Nn],An[Nn]=null,ca=An[--Nn],An[Nn]=null}function Nx(a,o){An[Nn++]=ca,An[Nn++]=ua,An[Nn++]=gi,ca=o.id,ua=o.overflow,gi=a}var Sr=null,St=null,Qe=!1,vi=null,kn=!1,zh=Error(n(519));function yi(a){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw El(Cn(o,a)),zh}function kx(a){var o=a.stateNode,l=a.type,d=a.memoizedProps;switch(o[Bt]=a,o[sr]=d,l){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(l=0;l<Gl.length;l++)We(Gl[l],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),H_(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),K_(o,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||d.suppressHydrationWarning===!0||Gj(o.textContent,l)?(d.popover!=null&&(We("beforetoggle",o),We("toggle",o)),d.onScroll!=null&&We("scroll",o),d.onScrollEnd!=null&&We("scrollend",o),d.onClick!=null&&(o.onclick=Sa),o=!0):o=!1,o||yi(a,!0)}function Dx(a){for(Sr=a.return;Sr;)switch(Sr.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Sr=Sr.return}}function us(a){if(a!==Sr)return!1;if(!Qe)return Dx(a),Qe=!0,!1;var o=a.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||rg(a.type,a.memoizedProps)),l=!l),l&&St&&yi(a),Dx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=rS(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=rS(a)}else o===27?(o=St,Ti(a.type)?(a=sg,sg=null,St=a):St=o):St=Sr?Tn(a.stateNode.nextSibling):null;return!0}function co(){St=Sr=null,Qe=!1}function Ih(){var a=vi;return a!==null&&(Vr===null?Vr=a:Vr.push.apply(Vr,a),vi=null),a}function El(a){vi===null?vi=[a]:vi.push(a)}var Uh=je(null),uo=null,Aa=null;function bi(a,o,l){H(Uh,o._currentValue),o._currentValue=l}function Na(a){a._currentValue=Uh.current,te(Uh)}function Bh(a,o,l){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===l)break;a=a.return}}function $h(a,o,l,d){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var b=v.dependencies;if(b!==null){var E=v.child;b=b.firstContext;e:for(;b!==null;){var N=b;b=v;for(var L=0;L<o.length;L++)if(N.context===o[L]){b.lanes|=l,N=b.alternate,N!==null&&(N.lanes|=l),Bh(b.return,l,a),d||(E=null);break e}b=N.next}}else if(v.tag===18){if(E=v.return,E===null)throw Error(n(341));E.lanes|=l,b=E.alternate,b!==null&&(b.lanes|=l),Bh(E,l,a),E=null}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===a){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}}function ds(a,o,l,d){a=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var E=v.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var N=v.type;nn(v.pendingProps.value,E.value)||(a!==null?a.push(N):a=[N])}}else if(v===ge.current){if(E=v.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Ql):a=[Ql])}v=v.return}a!==null&&$h(o,a,l,d),o.flags|=262144}function Du(a){for(a=a.firstContext;a!==null;){if(!nn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function fo(a){uo=a,Aa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Er(a){return Tx(uo,a)}function Tu(a,o){return uo===null&&fo(a),Tx(a,o)}function Tx(a,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Aa===null){if(a===null)throw Error(n(308));Aa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Aa=Aa.next=o;return l}var H2=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(l,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(l){return l()})}},F2=e.unstable_scheduleCallback,K2=e.unstable_NormalPriority,Jt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hh(){return{controller:new H2,data:new Map,refCount:0}}function Ol(a){a.refCount--,a.refCount===0&&F2(K2,function(){a.controller.abort()})}var Cl=null,Fh=0,fs=0,ms=null;function Y2(a,o){if(Cl===null){var l=Cl=[];Fh=0,fs=Gp(),ms={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Fh++,o.then(Px,Px),o}function Px(){if(--Fh===0&&Cl!==null){ms!==null&&(ms.status="fulfilled");var a=Cl;Cl=null,fs=0,ms=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function G2(a,o){var l=[],d={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var v=0;v<l.length;v++)(0,l[v])(o)},function(v){for(d.status="rejected",d.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),d}var Mx=R.S;R.S=function(a,o){vj=Ye(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&Y2(a,o),Mx!==null&&Mx(a,o)};var mo=je(null);function Kh(){var a=mo.current;return a!==null?a:bt.pooledCache}function Pu(a,o){o===null?H(mo,mo.current):H(mo,o.pool)}function Rx(){var a=Kh();return a===null?null:{parent:Jt._currentValue,pool:a}}var hs=Error(n(460)),Yh=Error(n(474)),Mu=Error(n(542)),Ru={then:function(){}};function qx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Lx(a,o,l){switch(l=a[l],l===void 0?a.push(o):l!==o&&(o.then(Sa,Sa),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ix(a),a;default:if(typeof o.status=="string")o.then(Sa,Sa);else{if(a=bt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=d}},function(d){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Ix(a),a}throw po=o,hs}}function ho(a){try{var o=a._init;return o(a._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(po=l,hs):l}}var po=null;function zx(){if(po===null)throw Error(n(459));var a=po;return po=null,a}function Ix(a){if(a===hs||a===Mu)throw Error(n(483))}var ps=null,Al=0;function qu(a){var o=Al;return Al+=1,ps===null&&(ps=[]),Lx(ps,a,o)}function Nl(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Lu(a,o){throw o.$$typeof===_?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Ux(a){function o(F,$){if(a){var V=F.deletions;V===null?(F.deletions=[$],F.flags|=16):V.push($)}}function l(F,$){if(!a)return null;for(;$!==null;)o(F,$),$=$.sibling;return null}function d(F){for(var $=new Map;F!==null;)F.key!==null?$.set(F.key,F):$.set(F.index,F),F=F.sibling;return $}function v(F,$){return F=Oa(F,$),F.index=0,F.sibling=null,F}function b(F,$,V){return F.index=V,a?(V=F.alternate,V!==null?(V=V.index,V<$?(F.flags|=67108866,$):V):(F.flags|=67108866,$)):(F.flags|=1048576,$)}function E(F){return a&&F.alternate===null&&(F.flags|=67108866),F}function N(F,$,V,ue){return $===null||$.tag!==6?($=Mh(V,F.mode,ue),$.return=F,$):($=v($,V),$.return=F,$)}function L(F,$,V,ue){var qe=V.type;return qe===j?se(F,$,V.props.children,ue,V.key):$!==null&&($.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===K&&ho(qe)===$.type)?($=v($,V.props),Nl($,V),$.return=F,$):($=Nu(V.type,V.key,V.props,null,F.mode,ue),Nl($,V),$.return=F,$)}function W(F,$,V,ue){return $===null||$.tag!==4||$.stateNode.containerInfo!==V.containerInfo||$.stateNode.implementation!==V.implementation?($=Rh(V,F.mode,ue),$.return=F,$):($=v($,V.children||[]),$.return=F,$)}function se(F,$,V,ue,qe){return $===null||$.tag!==7?($=lo(V,F.mode,ue,qe),$.return=F,$):($=v($,V),$.return=F,$)}function de(F,$,V){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Mh(""+$,F.mode,V),$.return=F,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case x:return V=Nu($.type,$.key,$.props,null,F.mode,V),Nl(V,$),V.return=F,V;case w:return $=Rh($,F.mode,V),$.return=F,$;case K:return $=ho($),de(F,$,V)}if(q($)||I($))return $=lo($,F.mode,V,null),$.return=F,$;if(typeof $.then=="function")return de(F,qu($),V);if($.$$typeof===A)return de(F,Tu(F,$),V);Lu(F,$)}return null}function Z(F,$,V,ue){var qe=$!==null?$.key:null;if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return qe!==null?null:N(F,$,""+V,ue);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case x:return V.key===qe?L(F,$,V,ue):null;case w:return V.key===qe?W(F,$,V,ue):null;case K:return V=ho(V),Z(F,$,V,ue)}if(q(V)||I(V))return qe!==null?null:se(F,$,V,ue,null);if(typeof V.then=="function")return Z(F,$,qu(V),ue);if(V.$$typeof===A)return Z(F,$,Tu(F,V),ue);Lu(F,V)}return null}function re(F,$,V,ue,qe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return F=F.get(V)||null,N($,F,""+ue,qe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:return F=F.get(ue.key===null?V:ue.key)||null,L($,F,ue,qe);case w:return F=F.get(ue.key===null?V:ue.key)||null,W($,F,ue,qe);case K:return ue=ho(ue),re(F,$,V,ue,qe)}if(q(ue)||I(ue))return F=F.get(V)||null,se($,F,ue,qe,null);if(typeof ue.then=="function")return re(F,$,V,qu(ue),qe);if(ue.$$typeof===A)return re(F,$,V,Tu($,ue),qe);Lu($,ue)}return null}function Ae(F,$,V,ue){for(var qe=null,rt=null,Pe=$,$e=$=0,Ze=null;Pe!==null&&$e<V.length;$e++){Pe.index>$e?(Ze=Pe,Pe=null):Ze=Pe.sibling;var nt=Z(F,Pe,V[$e],ue);if(nt===null){Pe===null&&(Pe=Ze);break}a&&Pe&&nt.alternate===null&&o(F,Pe),$=b(nt,$,$e),rt===null?qe=nt:rt.sibling=nt,rt=nt,Pe=Ze}if($e===V.length)return l(F,Pe),Qe&&Ca(F,$e),qe;if(Pe===null){for(;$e<V.length;$e++)Pe=de(F,V[$e],ue),Pe!==null&&($=b(Pe,$,$e),rt===null?qe=Pe:rt.sibling=Pe,rt=Pe);return Qe&&Ca(F,$e),qe}for(Pe=d(Pe);$e<V.length;$e++)Ze=re(Pe,F,$e,V[$e],ue),Ze!==null&&(a&&Ze.alternate!==null&&Pe.delete(Ze.key===null?$e:Ze.key),$=b(Ze,$,$e),rt===null?qe=Ze:rt.sibling=Ze,rt=Ze);return a&&Pe.forEach(function(Li){return o(F,Li)}),Qe&&Ca(F,$e),qe}function ze(F,$,V,ue){if(V==null)throw Error(n(151));for(var qe=null,rt=null,Pe=$,$e=$=0,Ze=null,nt=V.next();Pe!==null&&!nt.done;$e++,nt=V.next()){Pe.index>$e?(Ze=Pe,Pe=null):Ze=Pe.sibling;var Li=Z(F,Pe,nt.value,ue);if(Li===null){Pe===null&&(Pe=Ze);break}a&&Pe&&Li.alternate===null&&o(F,Pe),$=b(Li,$,$e),rt===null?qe=Li:rt.sibling=Li,rt=Li,Pe=Ze}if(nt.done)return l(F,Pe),Qe&&Ca(F,$e),qe;if(Pe===null){for(;!nt.done;$e++,nt=V.next())nt=de(F,nt.value,ue),nt!==null&&($=b(nt,$,$e),rt===null?qe=nt:rt.sibling=nt,rt=nt);return Qe&&Ca(F,$e),qe}for(Pe=d(Pe);!nt.done;$e++,nt=V.next())nt=re(Pe,F,$e,nt.value,ue),nt!==null&&(a&&nt.alternate!==null&&Pe.delete(nt.key===null?$e:nt.key),$=b(nt,$,$e),rt===null?qe=nt:rt.sibling=nt,rt=nt);return a&&Pe.forEach(function(aq){return o(F,aq)}),Qe&&Ca(F,$e),qe}function pt(F,$,V,ue){if(typeof V=="object"&&V!==null&&V.type===j&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case x:e:{for(var qe=V.key;$!==null;){if($.key===qe){if(qe=V.type,qe===j){if($.tag===7){l(F,$.sibling),ue=v($,V.props.children),ue.return=F,F=ue;break e}}else if($.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===K&&ho(qe)===$.type){l(F,$.sibling),ue=v($,V.props),Nl(ue,V),ue.return=F,F=ue;break e}l(F,$);break}else o(F,$);$=$.sibling}V.type===j?(ue=lo(V.props.children,F.mode,ue,V.key),ue.return=F,F=ue):(ue=Nu(V.type,V.key,V.props,null,F.mode,ue),Nl(ue,V),ue.return=F,F=ue)}return E(F);case w:e:{for(qe=V.key;$!==null;){if($.key===qe)if($.tag===4&&$.stateNode.containerInfo===V.containerInfo&&$.stateNode.implementation===V.implementation){l(F,$.sibling),ue=v($,V.children||[]),ue.return=F,F=ue;break e}else{l(F,$);break}else o(F,$);$=$.sibling}ue=Rh(V,F.mode,ue),ue.return=F,F=ue}return E(F);case K:return V=ho(V),pt(F,$,V,ue)}if(q(V))return Ae(F,$,V,ue);if(I(V)){if(qe=I(V),typeof qe!="function")throw Error(n(150));return V=qe.call(V),ze(F,$,V,ue)}if(typeof V.then=="function")return pt(F,$,qu(V),ue);if(V.$$typeof===A)return pt(F,$,Tu(F,V),ue);Lu(F,V)}return typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint"?(V=""+V,$!==null&&$.tag===6?(l(F,$.sibling),ue=v($,V),ue.return=F,F=ue):(l(F,$),ue=Mh(V,F.mode,ue),ue.return=F,F=ue),E(F)):l(F,$)}return function(F,$,V,ue){try{Al=0;var qe=pt(F,$,V,ue);return ps=null,qe}catch(Pe){if(Pe===hs||Pe===Mu)throw Pe;var rt=an(29,Pe,null,F.mode);return rt.lanes=ue,rt.return=F,rt}finally{}}}var go=Ux(!0),Bx=Ux(!1),_i=!1;function Gh(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function xi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function wi(a,o,l){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(ot&2)!==0){var v=d.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),d.pending=o,o=Au(a),Sx(a,null,l),o}return Cu(a,d,o,l),Au(a)}function kl(a,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,l|=d,o.lanes=l,pu(a,l)}}function Wh(a,o){var l=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var v=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?v=b=E:b=b.next=E,l=l.next}while(l!==null);b===null?v=b=o:b=b.next=o}else v=b=o;l={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=o:a.next=o,l.lastBaseUpdate=o}var Xh=!1;function Dl(){if(Xh){var a=ms;if(a!==null)throw a}}function Tl(a,o,l,d){Xh=!1;var v=a.updateQueue;_i=!1;var b=v.firstBaseUpdate,E=v.lastBaseUpdate,N=v.shared.pending;if(N!==null){v.shared.pending=null;var L=N,W=L.next;L.next=null,E===null?b=W:E.next=W,E=L;var se=a.alternate;se!==null&&(se=se.updateQueue,N=se.lastBaseUpdate,N!==E&&(N===null?se.firstBaseUpdate=W:N.next=W,se.lastBaseUpdate=L))}if(b!==null){var de=v.baseState;E=0,se=W=L=null,N=b;do{var Z=N.lane&-536870913,re=Z!==N.lane;if(re?(Xe&Z)===Z:(d&Z)===Z){Z!==0&&Z===fs&&(Xh=!0),se!==null&&(se=se.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ae=a,ze=N;Z=o;var pt=l;switch(ze.tag){case 1:if(Ae=ze.payload,typeof Ae=="function"){de=Ae.call(pt,de,Z);break e}de=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=ze.payload,Z=typeof Ae=="function"?Ae.call(pt,de,Z):Ae,Z==null)break e;de=p({},de,Z);break e;case 2:_i=!0}}Z=N.callback,Z!==null&&(a.flags|=64,re&&(a.flags|=8192),re=v.callbacks,re===null?v.callbacks=[Z]:re.push(Z))}else re={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},se===null?(W=se=re,L=de):se=se.next=re,E|=Z;if(N=N.next,N===null){if(N=v.shared.pending,N===null)break;re=N,N=re.next,re.next=null,v.lastBaseUpdate=re,v.shared.pending=null}}while(!0);se===null&&(L=de),v.baseState=L,v.firstBaseUpdate=W,v.lastBaseUpdate=se,b===null&&(v.shared.lanes=0),Ci|=E,a.lanes=E,a.memoizedState=de}}function $x(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function Hx(a,o){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)$x(l[a],o)}var gs=je(null),zu=je(0);function Fx(a,o){a=za,H(zu,a),H(gs,o),za=a|o.baseLanes}function Zh(){H(zu,za),H(gs,gs.current)}function Qh(){za=zu.current,te(gs),te(zu)}var on=je(null),Dn=null;function ji(a){var o=a.alternate;H(Vt,Vt.current&1),H(on,a),Dn===null&&(o===null||gs.current!==null||o.memoizedState!==null)&&(Dn=a)}function Jh(a){H(Vt,Vt.current),H(on,a),Dn===null&&(Dn=a)}function Kx(a){a.tag===22?(H(Vt,Vt.current),H(on,a),Dn===null&&(Dn=a)):Si()}function Si(){H(Vt,Vt.current),H(on,on.current)}function sn(a){te(on),Dn===a&&(Dn=null),te(Vt)}var Vt=je(0);function Iu(a){for(var o=a;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ig(l)||og(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ka=0,Be=null,mt=null,er=null,Uu=!1,vs=!1,vo=!1,Bu=0,Pl=0,ys=null,V2=0;function $t(){throw Error(n(321))}function ep(a,o){if(o===null)return!1;for(var l=0;l<o.length&&l<a.length;l++)if(!nn(a[l],o[l]))return!1;return!0}function tp(a,o,l,d,v,b){return ka=b,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=a===null||a.memoizedState===null?Aw:gp,vo=!1,b=l(d,v),vo=!1,vs&&(b=Gx(o,l,d,v)),Yx(a),b}function Yx(a){R.H=ql;var o=mt!==null&&mt.next!==null;if(ka=0,er=mt=Be=null,Uu=!1,Pl=0,ys=null,o)throw Error(n(300));a===null||tr||(a=a.dependencies,a!==null&&Du(a)&&(tr=!0))}function Gx(a,o,l,d){Be=a;var v=0;do{if(vs&&(ys=null),Pl=0,vs=!1,25<=v)throw Error(n(301));if(v+=1,er=mt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}R.H=Nw,b=o(l,d)}while(vs);return b}function W2(){var a=R.H,o=a.useState()[0];return o=typeof o.then=="function"?Ml(o):o,a=a.useState()[0],(mt!==null?mt.memoizedState:null)!==a&&(Be.flags|=1024),o}function rp(){var a=Bu!==0;return Bu=0,a}function np(a,o,l){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~l}function ap(a){if(Uu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Uu=!1}ka=0,er=mt=Be=null,vs=!1,Pl=Bu=0,ys=null}function Rr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?Be.memoizedState=er=a:er=er.next=a,er}function Wt(){if(mt===null){var a=Be.alternate;a=a!==null?a.memoizedState:null}else a=mt.next;var o=er===null?Be.memoizedState:er.next;if(o!==null)er=o,mt=a;else{if(a===null)throw Be.alternate===null?Error(n(467)):Error(n(310));mt=a,a={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},er===null?Be.memoizedState=er=a:er=er.next=a}return er}function $u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(a){var o=Pl;return Pl+=1,ys===null&&(ys=[]),a=Lx(ys,a,o),o=Be,(er===null?o.memoizedState:er.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?Aw:gp),a}function Hu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ml(a);if(a.$$typeof===A)return Er(a)}throw Error(n(438,String(a)))}function ip(a){var o=null,l=Be.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var d=Be.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=$u(),Be.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(a),d=0;d<a;d++)l[d]=ne;return o.index++,l}function Da(a,o){return typeof o=="function"?o(a):o}function Fu(a){var o=Wt();return op(o,mt,a)}function op(a,o,l){var d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=l;var v=a.baseQueue,b=d.pending;if(b!==null){if(v!==null){var E=v.next;v.next=b.next,b.next=E}o.baseQueue=v=b,d.pending=null}if(b=a.baseState,v===null)a.memoizedState=b;else{o=v.next;var N=E=null,L=null,W=o,se=!1;do{var de=W.lane&-536870913;if(de!==W.lane?(Xe&de)===de:(ka&de)===de){var Z=W.revertLane;if(Z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),de===fs&&(se=!0);else if((ka&Z)===Z){W=W.next,Z===fs&&(se=!0);continue}else de={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(N=L=de,E=b):L=L.next=de,Be.lanes|=Z,Ci|=Z;de=W.action,vo&&l(b,de),b=W.hasEagerState?W.eagerState:l(b,de)}else Z={lane:de,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(N=L=Z,E=b):L=L.next=Z,Be.lanes|=de,Ci|=de;W=W.next}while(W!==null&&W!==o);if(L===null?E=b:L.next=N,!nn(b,a.memoizedState)&&(tr=!0,se&&(l=ms,l!==null)))throw l;a.memoizedState=b,a.baseState=E,a.baseQueue=L,d.lastRenderedState=b}return v===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function sp(a){var o=Wt(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var d=l.dispatch,v=l.pending,b=o.memoizedState;if(v!==null){l.pending=null;var E=v=v.next;do b=a(b,E.action),E=E.next;while(E!==v);nn(b,o.memoizedState)||(tr=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),l.lastRenderedState=b}return[b,d]}function Vx(a,o,l){var d=Be,v=Wt(),b=Qe;if(b){if(l===void 0)throw Error(n(407));l=l()}else l=o();var E=!nn((mt||v).memoizedState,l);if(E&&(v.memoizedState=l,tr=!0),v=v.queue,up(Zx.bind(null,d,v,a),[a]),v.getSnapshot!==o||E||er!==null&&er.memoizedState.tag&1){if(d.flags|=2048,bs(9,{destroy:void 0},Xx.bind(null,d,v,l,o),null),bt===null)throw Error(n(349));b||(ka&127)!==0||Wx(d,o,l)}return l}function Wx(a,o,l){a.flags|=16384,a={getSnapshot:o,value:l},o=Be.updateQueue,o===null?(o=$u(),Be.updateQueue=o,o.stores=[a]):(l=o.stores,l===null?o.stores=[a]:l.push(a))}function Xx(a,o,l,d){o.value=l,o.getSnapshot=d,Qx(o)&&Jx(a)}function Zx(a,o,l){return l(function(){Qx(o)&&Jx(a)})}function Qx(a){var o=a.getSnapshot;a=a.value;try{var l=o();return!nn(a,l)}catch{return!0}}function Jx(a){var o=so(a,2);o!==null&&Wr(o,a,2)}function lp(a){var o=Rr();if(typeof a=="function"){var l=a;if(a=l(),vo){qt(!0);try{l()}finally{qt(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:a},o}function ew(a,o,l,d){return a.baseState=l,op(a,mt,typeof d=="function"?d:Da)}function X2(a,o,l,d,v){if(Gu(a))throw Error(n(485));if(a=o.action,a!==null){var b={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};R.T!==null?l(!0):b.isTransition=!1,d(b),l=o.pending,l===null?(b.next=o.pending=b,tw(o,b)):(b.next=l.next,o.pending=l.next=b)}}function tw(a,o){var l=o.action,d=o.payload,v=a.state;if(o.isTransition){var b=R.T,E={};R.T=E;try{var N=l(v,d),L=R.S;L!==null&&L(E,N),rw(a,o,N)}catch(W){cp(a,o,W)}finally{b!==null&&E.types!==null&&(b.types=E.types),R.T=b}}else try{b=l(v,d),rw(a,o,b)}catch(W){cp(a,o,W)}}function rw(a,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){nw(a,o,d)},function(d){return cp(a,o,d)}):nw(a,o,l)}function nw(a,o,l){o.status="fulfilled",o.value=l,aw(o),a.state=l,o=a.pending,o!==null&&(l=o.next,l===o?a.pending=null:(l=l.next,o.next=l,tw(a,l)))}function cp(a,o,l){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=l,aw(o),o=o.next;while(o!==d)}a.action=null}function aw(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function iw(a,o){return o}function ow(a,o){if(Qe){var l=bt.formState;if(l!==null){e:{var d=Be;if(Qe){if(St){t:{for(var v=St,b=kn;v.nodeType!==8;){if(!b){v=null;break t}if(v=Tn(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){St=Tn(v.nextSibling),d=v.data==="F!";break e}}yi(d)}d=!1}d&&(o=l[0])}}return l=Rr(),l.memoizedState=l.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:iw,lastRenderedState:o},l.queue=d,l=Ew.bind(null,Be,d),d.dispatch=l,d=lp(!1),b=pp.bind(null,Be,!1,d.queue),d=Rr(),v={state:o,dispatch:null,action:a,pending:null},d.queue=v,l=X2.bind(null,Be,v,b,l),v.dispatch=l,d.memoizedState=a,[o,l,!1]}function sw(a){var o=Wt();return lw(o,mt,a)}function lw(a,o,l){if(o=op(a,o,iw)[0],a=Fu(Da)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Ml(o)}catch(E){throw E===hs?Mu:E}else d=o;o=Wt();var v=o.queue,b=v.dispatch;return l!==o.memoizedState&&(Be.flags|=2048,bs(9,{destroy:void 0},Z2.bind(null,v,l),null)),[d,b,a]}function Z2(a,o){a.action=o}function cw(a){var o=Wt(),l=mt;if(l!==null)return lw(o,l,a);Wt(),o=o.memoizedState,l=Wt();var d=l.queue.dispatch;return l.memoizedState=a,[o,d,!1]}function bs(a,o,l,d){return a={tag:a,create:l,deps:d,inst:o,next:null},o=Be.updateQueue,o===null&&(o=$u(),Be.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=a.next=a:(d=l.next,l.next=a,a.next=d,o.lastEffect=a),a}function uw(){return Wt().memoizedState}function Ku(a,o,l,d){var v=Rr();Be.flags|=a,v.memoizedState=bs(1|o,{destroy:void 0},l,d===void 0?null:d)}function Yu(a,o,l,d){var v=Wt();d=d===void 0?null:d;var b=v.memoizedState.inst;mt!==null&&d!==null&&ep(d,mt.memoizedState.deps)?v.memoizedState=bs(o,b,l,d):(Be.flags|=a,v.memoizedState=bs(1|o,b,l,d))}function dw(a,o){Ku(8390656,8,a,o)}function up(a,o){Yu(2048,8,a,o)}function Q2(a){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=$u(),Be.updateQueue=o,o.events=[a];else{var l=o.events;l===null?o.events=[a]:l.push(a)}}function fw(a){var o=Wt().memoizedState;return Q2({ref:o,nextImpl:a}),function(){if((ot&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function mw(a,o){return Yu(4,2,a,o)}function hw(a,o){return Yu(4,4,a,o)}function pw(a,o){if(typeof o=="function"){a=a();var l=o(a);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function gw(a,o,l){l=l!=null?l.concat([a]):null,Yu(4,4,pw.bind(null,o,a),l)}function dp(){}function vw(a,o){var l=Wt();o=o===void 0?null:o;var d=l.memoizedState;return o!==null&&ep(o,d[1])?d[0]:(l.memoizedState=[a,o],a)}function yw(a,o){var l=Wt();o=o===void 0?null:o;var d=l.memoizedState;if(o!==null&&ep(o,d[1]))return d[0];if(d=a(),vo){qt(!0);try{a()}finally{qt(!1)}}return l.memoizedState=[d,o],d}function fp(a,o,l){return l===void 0||(ka&1073741824)!==0&&(Xe&261930)===0?a.memoizedState=o:(a.memoizedState=l,a=bj(),Be.lanes|=a,Ci|=a,l)}function bw(a,o,l,d){return nn(l,o)?l:gs.current!==null?(a=fp(a,l,d),nn(a,o)||(tr=!0),a):(ka&42)===0||(ka&1073741824)!==0&&(Xe&261930)===0?(tr=!0,a.memoizedState=l):(a=bj(),Be.lanes|=a,Ci|=a,o)}function _w(a,o,l,d,v){var b=U.p;U.p=b!==0&&8>b?b:8;var E=R.T,N={};R.T=N,pp(a,!1,o,l);try{var L=v(),W=R.S;if(W!==null&&W(N,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var se=G2(L,d);Rl(a,o,se,un(a))}else Rl(a,o,d,un(a))}catch(de){Rl(a,o,{then:function(){},status:"rejected",reason:de},un())}finally{U.p=b,E!==null&&N.types!==null&&(E.types=N.types),R.T=E}}function J2(){}function mp(a,o,l,d){if(a.tag!==5)throw Error(n(476));var v=xw(a).queue;_w(a,v,o,J,l===null?J2:function(){return ww(a),l(d)})}function xw(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:J},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:l},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function ww(a){var o=xw(a);o.next===null&&(o=a.alternate.memoizedState),Rl(a,o.next.queue,{},un())}function hp(){return Er(Ql)}function jw(){return Wt().memoizedState}function Sw(){return Wt().memoizedState}function eR(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var l=un();a=xi(l);var d=wi(o,a,l);d!==null&&(Wr(d,o,l),kl(d,o,l)),o={cache:Hh()},a.payload=o;return}o=o.return}}function tR(a,o,l){var d=un();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Gu(a)?Ow(o,l):(l=Th(a,o,l,d),l!==null&&(Wr(l,a,d),Cw(l,o,d)))}function Ew(a,o,l){var d=un();Rl(a,o,l,d)}function Rl(a,o,l,d){var v={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Gu(a))Ow(o,v);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var E=o.lastRenderedState,N=b(E,l);if(v.hasEagerState=!0,v.eagerState=N,nn(N,E))return Cu(a,o,v,0),bt===null&&Ou(),!1}catch{}finally{}if(l=Th(a,o,v,d),l!==null)return Wr(l,a,d),Cw(l,o,d),!0}return!1}function pp(a,o,l,d){if(d={lane:2,revertLane:Gp(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Gu(a)){if(o)throw Error(n(479))}else o=Th(a,l,d,2),o!==null&&Wr(o,a,2)}function Gu(a){var o=a.alternate;return a===Be||o!==null&&o===Be}function Ow(a,o){vs=Uu=!0;var l=a.pending;l===null?o.next=o:(o.next=l.next,l.next=o),a.pending=o}function Cw(a,o,l){if((l&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,l|=d,o.lanes=l,pu(a,l)}}var ql={readContext:Er,use:Hu,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};ql.useEffectEvent=$t;var Aw={readContext:Er,use:Hu,useCallback:function(a,o){return Rr().memoizedState=[a,o===void 0?null:o],a},useContext:Er,useEffect:dw,useImperativeHandle:function(a,o,l){l=l!=null?l.concat([a]):null,Ku(4194308,4,pw.bind(null,o,a),l)},useLayoutEffect:function(a,o){return Ku(4194308,4,a,o)},useInsertionEffect:function(a,o){Ku(4,2,a,o)},useMemo:function(a,o){var l=Rr();o=o===void 0?null:o;var d=a();if(vo){qt(!0);try{a()}finally{qt(!1)}}return l.memoizedState=[d,o],d},useReducer:function(a,o,l){var d=Rr();if(l!==void 0){var v=l(o);if(vo){qt(!0);try{l(o)}finally{qt(!1)}}}else v=o;return d.memoizedState=d.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},d.queue=a,a=a.dispatch=tR.bind(null,Be,a),[d.memoizedState,a]},useRef:function(a){var o=Rr();return a={current:a},o.memoizedState=a},useState:function(a){a=lp(a);var o=a.queue,l=Ew.bind(null,Be,o);return o.dispatch=l,[a.memoizedState,l]},useDebugValue:dp,useDeferredValue:function(a,o){var l=Rr();return fp(l,a,o)},useTransition:function(){var a=lp(!1);return a=_w.bind(null,Be,a.queue,!0,!1),Rr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,l){var d=Be,v=Rr();if(Qe){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),bt===null)throw Error(n(349));(Xe&127)!==0||Wx(d,o,l)}v.memoizedState=l;var b={value:l,getSnapshot:o};return v.queue=b,dw(Zx.bind(null,d,b,a),[a]),d.flags|=2048,bs(9,{destroy:void 0},Xx.bind(null,d,b,l,o),null),l},useId:function(){var a=Rr(),o=bt.identifierPrefix;if(Qe){var l=ua,d=ca;l=(d&~(1<<32-ft(d)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Bu++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=V2++,o="_"+o+"r_"+l.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:hp,useFormState:ow,useActionState:ow,useOptimistic:function(a){var o=Rr();o.memoizedState=o.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=pp.bind(null,Be,!0,l),l.dispatch=o,[a,o]},useMemoCache:ip,useCacheRefresh:function(){return Rr().memoizedState=eR.bind(null,Be)},useEffectEvent:function(a){var o=Rr(),l={impl:a};return o.memoizedState=l,function(){if((ot&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},gp={readContext:Er,use:Hu,useCallback:vw,useContext:Er,useEffect:up,useImperativeHandle:gw,useInsertionEffect:mw,useLayoutEffect:hw,useMemo:yw,useReducer:Fu,useRef:uw,useState:function(){return Fu(Da)},useDebugValue:dp,useDeferredValue:function(a,o){var l=Wt();return bw(l,mt.memoizedState,a,o)},useTransition:function(){var a=Fu(Da)[0],o=Wt().memoizedState;return[typeof a=="boolean"?a:Ml(a),o]},useSyncExternalStore:Vx,useId:jw,useHostTransitionStatus:hp,useFormState:sw,useActionState:sw,useOptimistic:function(a,o){var l=Wt();return ew(l,mt,a,o)},useMemoCache:ip,useCacheRefresh:Sw};gp.useEffectEvent=fw;var Nw={readContext:Er,use:Hu,useCallback:vw,useContext:Er,useEffect:up,useImperativeHandle:gw,useInsertionEffect:mw,useLayoutEffect:hw,useMemo:yw,useReducer:sp,useRef:uw,useState:function(){return sp(Da)},useDebugValue:dp,useDeferredValue:function(a,o){var l=Wt();return mt===null?fp(l,a,o):bw(l,mt.memoizedState,a,o)},useTransition:function(){var a=sp(Da)[0],o=Wt().memoizedState;return[typeof a=="boolean"?a:Ml(a),o]},useSyncExternalStore:Vx,useId:jw,useHostTransitionStatus:hp,useFormState:cw,useActionState:cw,useOptimistic:function(a,o){var l=Wt();return mt!==null?ew(l,mt,a,o):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:ip,useCacheRefresh:Sw};Nw.useEffectEvent=fw;function vp(a,o,l,d){o=a.memoizedState,l=l(d,o),l=l==null?o:p({},o,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var yp={enqueueSetState:function(a,o,l){a=a._reactInternals;var d=un(),v=xi(d);v.payload=o,l!=null&&(v.callback=l),o=wi(a,v,d),o!==null&&(Wr(o,a,d),kl(o,a,d))},enqueueReplaceState:function(a,o,l){a=a._reactInternals;var d=un(),v=xi(d);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=wi(a,v,d),o!==null&&(Wr(o,a,d),kl(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var l=un(),d=xi(l);d.tag=2,o!=null&&(d.callback=o),o=wi(a,d,l),o!==null&&(Wr(o,a,l),kl(o,a,l))}};function kw(a,o,l,d,v,b,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,b,E):o.prototype&&o.prototype.isPureReactComponent?!wl(l,d)||!wl(v,b):!0}function Dw(a,o,l,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==a&&yp.enqueueReplaceState(o,o.state,null)}function yo(a,o){var l=o;if("ref"in o){l={};for(var d in o)d!=="ref"&&(l[d]=o[d])}if(a=a.defaultProps){l===o&&(l=p({},l));for(var v in a)l[v]===void 0&&(l[v]=a[v])}return l}function Tw(a){Eu(a)}function Pw(a){console.error(a)}function Mw(a){Eu(a)}function Vu(a,o){try{var l=a.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Rw(a,o,l){try{var d=a.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function bp(a,o,l){return l=xi(l),l.tag=3,l.payload={element:null},l.callback=function(){Vu(a,o)},l}function qw(a){return a=xi(a),a.tag=3,a}function Lw(a,o,l,d){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var b=d.value;a.payload=function(){return v(b)},a.callback=function(){Rw(o,l,d)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){Rw(o,l,d),typeof v!="function"&&(Ai===null?Ai=new Set([this]):Ai.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function rR(a,o,l,d,v){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=l.alternate,o!==null&&ds(o,l,v,!0),l=on.current,l!==null){switch(l.tag){case 31:case 13:return Dn===null?od():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=v,d===Ru?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([d]):o.add(d),Fp(a,d,v)),!1;case 22:return l.flags|=65536,d===Ru?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([d]):l.add(d)),Fp(a,d,v)),!1}throw Error(n(435,l.tag))}return Fp(a,d,v),od(),!1}if(Qe)return o=on.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,d!==zh&&(a=Error(n(422),{cause:d}),El(Cn(a,l)))):(d!==zh&&(o=Error(n(423),{cause:d}),El(Cn(o,l))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,d=Cn(d,l),v=bp(a.stateNode,d,v),Wh(a,v),Ht!==4&&(Ht=2)),!1;var b=Error(n(520),{cause:d});if(b=Cn(b,l),Fl===null?Fl=[b]:Fl.push(b),Ht!==4&&(Ht=2),o===null)return!0;d=Cn(d,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,a=v&-v,l.lanes|=a,a=bp(l.stateNode,d,a),Wh(l,a),!1;case 1:if(o=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Ai===null||!Ai.has(b))))return l.flags|=65536,v&=-v,l.lanes|=v,v=qw(v),Lw(v,a,l,d),Wh(l,v),!1}l=l.return}while(l!==null);return!1}var _p=Error(n(461)),tr=!1;function Or(a,o,l,d){o.child=a===null?Bx(o,null,l,d):go(o,a.child,l,d)}function zw(a,o,l,d,v){l=l.render;var b=o.ref;if("ref"in d){var E={};for(var N in d)N!=="ref"&&(E[N]=d[N])}else E=d;return fo(o),d=tp(a,o,l,E,b,v),N=rp(),a!==null&&!tr?(np(a,o,v),Ta(a,o,v)):(Qe&&N&&qh(o),o.flags|=1,Or(a,o,d,v),o.child)}function Iw(a,o,l,d,v){if(a===null){var b=l.type;return typeof b=="function"&&!Ph(b)&&b.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=b,Uw(a,o,b,d,v)):(a=Nu(l.type,null,d,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!Ap(a,v)){var E=b.memoizedProps;if(l=l.compare,l=l!==null?l:wl,l(E,d)&&a.ref===o.ref)return Ta(a,o,v)}return o.flags|=1,a=Oa(b,d),a.ref=o.ref,a.return=o,o.child=a}function Uw(a,o,l,d,v){if(a!==null){var b=a.memoizedProps;if(wl(b,d)&&a.ref===o.ref)if(tr=!1,o.pendingProps=d=b,Ap(a,v))(a.flags&131072)!==0&&(tr=!0);else return o.lanes=a.lanes,Ta(a,o,v)}return xp(a,o,l,d,v)}function Bw(a,o,l,d){var v=d.children,b=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,a!==null){for(d=o.child=a.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~b}else d=0,o.child=null;return $w(a,o,b,l,d)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Pu(o,b!==null?b.cachePool:null),b!==null?Fx(o,b):Zh(),Kx(o);else return d=o.lanes=536870912,$w(a,o,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Pu(o,b.cachePool),Fx(o,b),Si(),o.memoizedState=null):(a!==null&&Pu(o,null),Zh(),Si());return Or(a,o,v,l),o.child}function Ll(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function $w(a,o,l,d,v){var b=Kh();return b=b===null?null:{parent:Jt._currentValue,pool:b},o.memoizedState={baseLanes:l,cachePool:b},a!==null&&Pu(o,null),Zh(),Kx(o),a!==null&&ds(a,o,d,!0),o.childLanes=v,null}function Wu(a,o){return o=Zu({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function Hw(a,o,l){return go(o,a.child,null,l),a=Wu(o,o.pendingProps),a.flags|=2,sn(o),o.memoizedState=null,a}function nR(a,o,l){var d=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Qe){if(d.mode==="hidden")return a=Wu(o,d),o.lanes=536870912,Ll(null,a);if(Jh(o),(a=St)?(a=tS(a,kn),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:gi!==null?{id:ca,overflow:ua}:null,retryLane:536870912,hydrationErrors:null},l=Ox(a),l.return=o,o.child=l,Sr=o,St=null)):a=null,a===null)throw yi(o);return o.lanes=536870912,null}return Wu(o,d)}var b=a.memoizedState;if(b!==null){var E=b.dehydrated;if(Jh(o),v)if(o.flags&256)o.flags&=-257,o=Hw(a,o,l);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(n(558));else if(tr||ds(a,o,l,!1),v=(l&a.childLanes)!==0,tr||v){if(d=bt,d!==null&&(E=Kn(d,l),E!==0&&E!==b.retryLane))throw b.retryLane=E,so(a,E),Wr(d,a,E),_p;od(),o=Hw(a,o,l)}else a=b.treeContext,St=Tn(E.nextSibling),Sr=o,Qe=!0,vi=null,kn=!1,a!==null&&Nx(o,a),o=Wu(o,d),o.flags|=4096;return o}return a=Oa(a.child,{mode:d.mode,children:d.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Xu(a,o){var l=o.ref;if(l===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(a===null||a.ref!==l)&&(o.flags|=4194816)}}function xp(a,o,l,d,v){return fo(o),l=tp(a,o,l,d,void 0,v),d=rp(),a!==null&&!tr?(np(a,o,v),Ta(a,o,v)):(Qe&&d&&qh(o),o.flags|=1,Or(a,o,l,v),o.child)}function Fw(a,o,l,d,v,b){return fo(o),o.updateQueue=null,l=Gx(o,d,l,v),Yx(a),d=rp(),a!==null&&!tr?(np(a,o,b),Ta(a,o,b)):(Qe&&d&&qh(o),o.flags|=1,Or(a,o,l,b),o.child)}function Kw(a,o,l,d,v){if(fo(o),o.stateNode===null){var b=ss,E=l.contextType;typeof E=="object"&&E!==null&&(b=Er(E)),b=new l(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=yp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},Gh(o),E=l.contextType,b.context=typeof E=="object"&&E!==null?Er(E):ss,b.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(vp(o,l,E,d),b.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&yp.enqueueReplaceState(b,b.state,null),Tl(o,d,b,v),Dl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){b=o.stateNode;var N=o.memoizedProps,L=yo(l,N);b.props=L;var W=b.context,se=l.contextType;E=ss,typeof se=="object"&&se!==null&&(E=Er(se));var de=l.getDerivedStateFromProps;se=typeof de=="function"||typeof b.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,se||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N||W!==E)&&Dw(o,b,d,E),_i=!1;var Z=o.memoizedState;b.state=Z,Tl(o,d,b,v),Dl(),W=o.memoizedState,N||Z!==W||_i?(typeof de=="function"&&(vp(o,l,de,d),W=o.memoizedState),(L=_i||kw(o,l,L,d,Z,W,E))?(se||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=W),b.props=d,b.state=W,b.context=E,d=L):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,Vh(a,o),E=o.memoizedProps,se=yo(l,E),b.props=se,de=o.pendingProps,Z=b.context,W=l.contextType,L=ss,typeof W=="object"&&W!==null&&(L=Er(W)),N=l.getDerivedStateFromProps,(W=typeof N=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==de||Z!==L)&&Dw(o,b,d,L),_i=!1,Z=o.memoizedState,b.state=Z,Tl(o,d,b,v),Dl();var re=o.memoizedState;E!==de||Z!==re||_i||a!==null&&a.dependencies!==null&&Du(a.dependencies)?(typeof N=="function"&&(vp(o,l,N,d),re=o.memoizedState),(se=_i||kw(o,l,se,d,Z,re,L)||a!==null&&a.dependencies!==null&&Du(a.dependencies))?(W||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,re,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,re,L)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=re),b.props=d,b.state=re,b.context=L,d=se):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),d=!1)}return b=d,Xu(a,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&d?(o.child=go(o,a.child,null,v),o.child=go(o,null,l,v)):Or(a,o,l,v),o.memoizedState=b.state,a=o.child):a=Ta(a,o,v),a}function Yw(a,o,l,d){return co(),o.flags|=256,Or(a,o,l,d),o.child}var wp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jp(a){return{baseLanes:a,cachePool:Rx()}}function Sp(a,o,l){return a=a!==null?a.childLanes&~l:0,o&&(a|=cn),a}function Gw(a,o,l){var d=o.pendingProps,v=!1,b=(o.flags&128)!==0,E;if((E=b)||(E=a!==null&&a.memoizedState===null?!1:(Vt.current&2)!==0),E&&(v=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,a===null){if(Qe){if(v?ji(o):Si(),(a=St)?(a=tS(a,kn),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:gi!==null?{id:ca,overflow:ua}:null,retryLane:536870912,hydrationErrors:null},l=Ox(a),l.return=o,o.child=l,Sr=o,St=null)):a=null,a===null)throw yi(o);return og(a)?o.lanes=32:o.lanes=536870912,null}var N=d.children;return d=d.fallback,v?(Si(),v=o.mode,N=Zu({mode:"hidden",children:N},v),d=lo(d,v,l,null),N.return=o,d.return=o,N.sibling=d,o.child=N,d=o.child,d.memoizedState=jp(l),d.childLanes=Sp(a,E,l),o.memoizedState=wp,Ll(null,d)):(ji(o),Ep(o,N))}var L=a.memoizedState;if(L!==null&&(N=L.dehydrated,N!==null)){if(b)o.flags&256?(ji(o),o.flags&=-257,o=Op(a,o,l)):o.memoizedState!==null?(Si(),o.child=a.child,o.flags|=128,o=null):(Si(),N=d.fallback,v=o.mode,d=Zu({mode:"visible",children:d.children},v),N=lo(N,v,l,null),N.flags|=2,d.return=o,N.return=o,d.sibling=N,o.child=d,go(o,a.child,null,l),d=o.child,d.memoizedState=jp(l),d.childLanes=Sp(a,E,l),o.memoizedState=wp,o=Ll(null,d));else if(ji(o),og(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var W=E.dgst;E=W,d=Error(n(419)),d.stack="",d.digest=E,El({value:d,source:null,stack:null}),o=Op(a,o,l)}else if(tr||ds(a,o,l,!1),E=(l&a.childLanes)!==0,tr||E){if(E=bt,E!==null&&(d=Kn(E,l),d!==0&&d!==L.retryLane))throw L.retryLane=d,so(a,d),Wr(E,a,d),_p;ig(N)||od(),o=Op(a,o,l)}else ig(N)?(o.flags|=192,o.child=a.child,o=null):(a=L.treeContext,St=Tn(N.nextSibling),Sr=o,Qe=!0,vi=null,kn=!1,a!==null&&Nx(o,a),o=Ep(o,d.children),o.flags|=4096);return o}return v?(Si(),N=d.fallback,v=o.mode,L=a.child,W=L.sibling,d=Oa(L,{mode:"hidden",children:d.children}),d.subtreeFlags=L.subtreeFlags&65011712,W!==null?N=Oa(W,N):(N=lo(N,v,l,null),N.flags|=2),N.return=o,d.return=o,d.sibling=N,o.child=d,Ll(null,d),d=o.child,N=a.child.memoizedState,N===null?N=jp(l):(v=N.cachePool,v!==null?(L=Jt._currentValue,v=v.parent!==L?{parent:L,pool:L}:v):v=Rx(),N={baseLanes:N.baseLanes|l,cachePool:v}),d.memoizedState=N,d.childLanes=Sp(a,E,l),o.memoizedState=wp,Ll(a.child,d)):(ji(o),l=a.child,a=l.sibling,l=Oa(l,{mode:"visible",children:d.children}),l.return=o,l.sibling=null,a!==null&&(E=o.deletions,E===null?(o.deletions=[a],o.flags|=16):E.push(a)),o.child=l,o.memoizedState=null,l)}function Ep(a,o){return o=Zu({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Zu(a,o){return a=an(22,a,null,o),a.lanes=0,a}function Op(a,o,l){return go(o,a.child,null,l),a=Ep(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Vw(a,o,l){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),Bh(a.return,o,l)}function Cp(a,o,l,d,v,b){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:v,treeForkCount:b}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=d,E.tail=l,E.tailMode=v,E.treeForkCount=b)}function Ww(a,o,l){var d=o.pendingProps,v=d.revealOrder,b=d.tail;d=d.children;var E=Vt.current,N=(E&2)!==0;if(N?(E=E&1|2,o.flags|=128):E&=1,H(Vt,E),Or(a,o,d,l),d=Qe?Sl:0,!N&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Vw(a,l,o);else if(a.tag===19)Vw(a,l,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(l=o.child,v=null;l!==null;)a=l.alternate,a!==null&&Iu(a)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),Cp(o,!1,v,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&Iu(a)===null){o.child=v;break}a=v.sibling,v.sibling=l,l=v,v=a}Cp(o,!0,l,null,b,d);break;case"together":Cp(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Ta(a,o,l){if(a!==null&&(o.dependencies=a.dependencies),Ci|=o.lanes,(l&o.childLanes)===0)if(a!==null){if(ds(a,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,l=Oa(a,a.pendingProps),o.child=l,l.return=o;a.sibling!==null;)a=a.sibling,l=l.sibling=Oa(a,a.pendingProps),l.return=o;l.sibling=null}return o.child}function Ap(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Du(a)))}function aR(a,o,l){switch(o.tag){case 3:Le(o,o.stateNode.containerInfo),bi(o,Jt,a.memoizedState.cache),co();break;case 27:case 5:we(o);break;case 4:Le(o,o.stateNode.containerInfo);break;case 10:bi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Jh(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(ji(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Gw(a,o,l):(ji(o),a=Ta(a,o,l),a!==null?a.sibling:null);ji(o);break;case 19:var v=(a.flags&128)!==0;if(d=(l&o.childLanes)!==0,d||(ds(a,o,l,!1),d=(l&o.childLanes)!==0),v){if(d)return Ww(a,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),H(Vt,Vt.current),d)break;return null;case 22:return o.lanes=0,Bw(a,o,l,o.pendingProps);case 24:bi(o,Jt,a.memoizedState.cache)}return Ta(a,o,l)}function Xw(a,o,l){if(a!==null)if(a.memoizedProps!==o.pendingProps)tr=!0;else{if(!Ap(a,l)&&(o.flags&128)===0)return tr=!1,aR(a,o,l);tr=(a.flags&131072)!==0}else tr=!1,Qe&&(o.flags&1048576)!==0&&Ax(o,Sl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(a=ho(o.elementType),o.type=a,typeof a=="function")Ph(a)?(d=yo(a,d),o.tag=1,o=Kw(null,o,a,d,l)):(o.tag=0,o=xp(null,o,a,d,l));else{if(a!=null){var v=a.$$typeof;if(v===k){o.tag=11,o=zw(null,o,a,d,l);break e}else if(v===z){o.tag=14,o=Iw(null,o,a,d,l);break e}}throw o=pe(a)||a,Error(n(306,o,""))}}return o;case 0:return xp(a,o,o.type,o.pendingProps,l);case 1:return d=o.type,v=yo(d,o.pendingProps),Kw(a,o,d,v,l);case 3:e:{if(Le(o,o.stateNode.containerInfo),a===null)throw Error(n(387));d=o.pendingProps;var b=o.memoizedState;v=b.element,Vh(a,o),Tl(o,d,null,l);var E=o.memoizedState;if(d=E.cache,bi(o,Jt,d),d!==b.cache&&$h(o,[Jt],l,!0),Dl(),d=E.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Yw(a,o,d,l);break e}else if(d!==v){v=Cn(Error(n(424)),o),El(v),o=Yw(a,o,d,l);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(St=Tn(a.firstChild),Sr=o,Qe=!0,vi=null,kn=!0,l=Bx(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(co(),d===v){o=Ta(a,o,l);break e}Or(a,o,d,l)}o=o.child}return o;case 26:return Xu(a,o),a===null?(l=sS(o.type,null,o.pendingProps,null))?o.memoizedState=l:Qe||(l=o.type,a=o.pendingProps,d=md(Ie.current).createElement(l),d[Bt]=o,d[sr]=a,Cr(d,l,a),ce(d),o.stateNode=d):o.memoizedState=sS(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return we(o),a===null&&Qe&&(d=o.stateNode=aS(o.type,o.pendingProps,Ie.current),Sr=o,kn=!0,v=St,Ti(o.type)?(sg=v,St=Tn(d.firstChild)):St=v),Or(a,o,o.pendingProps.children,l),Xu(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Qe&&((v=d=St)&&(d=MR(d,o.type,o.pendingProps,kn),d!==null?(o.stateNode=d,Sr=o,St=Tn(d.firstChild),kn=!1,v=!0):v=!1),v||yi(o)),we(o),v=o.type,b=o.pendingProps,E=a!==null?a.memoizedProps:null,d=b.children,rg(v,b)?d=null:E!==null&&rg(v,E)&&(o.flags|=32),o.memoizedState!==null&&(v=tp(a,o,W2,null,null,l),Ql._currentValue=v),Xu(a,o),Or(a,o,d,l),o.child;case 6:return a===null&&Qe&&((a=l=St)&&(l=RR(l,o.pendingProps,kn),l!==null?(o.stateNode=l,Sr=o,St=null,a=!0):a=!1),a||yi(o)),null;case 13:return Gw(a,o,l);case 4:return Le(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=go(o,null,d,l):Or(a,o,d,l),o.child;case 11:return zw(a,o,o.type,o.pendingProps,l);case 7:return Or(a,o,o.pendingProps,l),o.child;case 8:return Or(a,o,o.pendingProps.children,l),o.child;case 12:return Or(a,o,o.pendingProps.children,l),o.child;case 10:return d=o.pendingProps,bi(o,o.type,d.value),Or(a,o,d.children,l),o.child;case 9:return v=o.type._context,d=o.pendingProps.children,fo(o),v=Er(v),d=d(v),o.flags|=1,Or(a,o,d,l),o.child;case 14:return Iw(a,o,o.type,o.pendingProps,l);case 15:return Uw(a,o,o.type,o.pendingProps,l);case 19:return Ww(a,o,l);case 31:return nR(a,o,l);case 22:return Bw(a,o,l,o.pendingProps);case 24:return fo(o),d=Er(Jt),a===null?(v=Kh(),v===null&&(v=bt,b=Hh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=l),v=b),o.memoizedState={parent:d,cache:v},Gh(o),bi(o,Jt,v)):((a.lanes&l)!==0&&(Vh(a,o),Tl(o,null,null,l),Dl()),v=a.memoizedState,b=o.memoizedState,v.parent!==d?(v={parent:d,cache:d},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),bi(o,Jt,d)):(d=b.cache,bi(o,Jt,d),d!==v.cache&&$h(o,[Jt],l,!0))),Or(a,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Pa(a){a.flags|=4}function Np(a,o,l,d,v){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(jj())a.flags|=8192;else throw po=Ru,Yh}else a.flags&=-16777217}function Zw(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!fS(o))if(jj())a.flags|=8192;else throw po=Ru,Yh}function Qu(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ye():536870912,a.lanes|=o,js|=o)}function zl(a,o){if(!Qe)switch(a.tailMode){case"hidden":o=a.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Et(a){var o=a.alternate!==null&&a.alternate.child===a.child,l=0,d=0;if(o)for(var v=a.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=d,a.childLanes=l,o}function iR(a,o,l){var d=o.pendingProps;switch(Lh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return l=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Na(Jt),ee(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(us(o)?Pa(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ih())),Et(o),null;case 26:var v=o.type,b=o.memoizedState;return a===null?(Pa(o),b!==null?(Et(o),Zw(o,b)):(Et(o),Np(o,v,null,d,l))):b?b!==a.memoizedState?(Pa(o),Et(o),Zw(o,b)):(Et(o),o.flags&=-16777217):(a=a.memoizedProps,a!==d&&Pa(o),Et(o),Np(o,v,a,d,l)),null;case 27:if(xe(o),l=Ie.current,v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Pa(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Et(o),null}a=Ee.current,us(o)?kx(o):(a=aS(v,d,l),o.stateNode=a,Pa(o))}return Et(o),null;case 5:if(xe(o),v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Pa(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Et(o),null}if(b=Ee.current,us(o))kx(o);else{var E=md(Ie.current);switch(b){case 1:b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=E.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?E.createElement("select",{is:d.is}):E.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?E.createElement(v,{is:d.is}):E.createElement(v)}}b[Bt]=o,b[sr]=d;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)b.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=b;e:switch(Cr(b,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Pa(o)}}return Et(o),Np(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,l),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Pa(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(a=Ie.current,us(o)){if(a=o.stateNode,l=o.memoizedProps,d=null,v=Sr,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}a[Bt]=o,a=!!(a.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Gj(a.nodeValue,l)),a||yi(o,!0)}else a=md(a).createTextNode(d),a[Bt]=o,o.stateNode=a}return Et(o),null;case 31:if(l=o.memoizedState,a===null||a.memoizedState!==null){if(d=us(o),l!==null){if(a===null){if(!d)throw Error(n(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Bt]=o}else co(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),a=!1}else l=Ih(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=l),a=!0;if(!a)return o.flags&256?(sn(o),o):(sn(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Et(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=us(o),d!==null&&d.dehydrated!==null){if(a===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Bt]=o}else co(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),v=!1}else v=Ih(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(sn(o),o):(sn(o),null)}return sn(o),(o.flags&128)!==0?(o.lanes=l,o):(l=d!==null,a=a!==null&&a.memoizedState!==null,l&&(d=o.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==v&&(d.flags|=2048)),l!==a&&l&&(o.child.flags|=8192),Qu(o,o.updateQueue),Et(o),null);case 4:return ee(),a===null&&Zp(o.stateNode.containerInfo),Et(o),null;case 10:return Na(o.type),Et(o),null;case 19:if(te(Vt),d=o.memoizedState,d===null)return Et(o),null;if(v=(o.flags&128)!==0,b=d.rendering,b===null)if(v)zl(d,!1);else{if(Ht!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=Iu(a),b!==null){for(o.flags|=128,zl(d,!1),a=b.updateQueue,o.updateQueue=a,Qu(o,a),o.subtreeFlags=0,a=l,l=o.child;l!==null;)Ex(l,a),l=l.sibling;return H(Vt,Vt.current&1|2),Qe&&Ca(o,d.treeForkCount),o.child}a=a.sibling}d.tail!==null&&Ye()>nd&&(o.flags|=128,v=!0,zl(d,!1),o.lanes=4194304)}else{if(!v)if(a=Iu(b),a!==null){if(o.flags|=128,v=!0,a=a.updateQueue,o.updateQueue=a,Qu(o,a),zl(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Qe)return Et(o),null}else 2*Ye()-d.renderingStartTime>nd&&l!==536870912&&(o.flags|=128,v=!0,zl(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(a=d.last,a!==null?a.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Ye(),a.sibling=null,l=Vt.current,H(Vt,v?l&1|2:l&1),Qe&&Ca(o,d.treeForkCount),a):(Et(o),null);case 22:case 23:return sn(o),Qh(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(l&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),l=o.updateQueue,l!==null&&Qu(o,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==l&&(o.flags|=2048),a!==null&&te(mo),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Na(Jt),Et(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function oR(a,o){switch(Lh(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Na(Jt),ee(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return xe(o),null;case 31:if(o.memoizedState!==null){if(sn(o),o.alternate===null)throw Error(n(340));co()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(sn(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));co()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return te(Vt),null;case 4:return ee(),null;case 10:return Na(o.type),null;case 22:case 23:return sn(o),Qh(),a!==null&&te(mo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Na(Jt),null;case 25:return null;default:return null}}function Qw(a,o){switch(Lh(o),o.tag){case 3:Na(Jt),ee();break;case 26:case 27:case 5:xe(o);break;case 4:ee();break;case 31:o.memoizedState!==null&&sn(o);break;case 13:sn(o);break;case 19:te(Vt);break;case 10:Na(o.type);break;case 22:case 23:sn(o),Qh(),a!==null&&te(mo);break;case 24:Na(Jt)}}function Il(a,o){try{var l=o.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var v=d.next;l=v;do{if((l.tag&a)===a){d=void 0;var b=l.create,E=l.inst;d=b(),E.destroy=d}l=l.next}while(l!==v)}}catch(N){ut(o,o.return,N)}}function Ei(a,o,l){try{var d=o.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var b=v.next;d=b;do{if((d.tag&a)===a){var E=d.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,v=o;var L=l,W=N;try{W()}catch(se){ut(v,L,se)}}}d=d.next}while(d!==b)}}catch(se){ut(o,o.return,se)}}function Jw(a){var o=a.updateQueue;if(o!==null){var l=a.stateNode;try{Hx(o,l)}catch(d){ut(a,a.return,d)}}}function ej(a,o,l){l.props=yo(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(d){ut(a,o,d)}}function Ul(a,o){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof l=="function"?a.refCleanup=l(d):l.current=d}}catch(v){ut(a,o,v)}}function da(a,o){var l=a.ref,d=a.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(v){ut(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){ut(a,o,v)}else l.current=null}function tj(a){var o=a.type,l=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(v){ut(a,a.return,v)}}function kp(a,o,l){try{var d=a.stateNode;AR(d,a.type,l,o),d[sr]=o}catch(v){ut(a,a.return,v)}}function rj(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ti(a.type)||a.tag===4}function Dp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||rj(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ti(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Tp(a,o,l){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(a),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=Sa));else if(d!==4&&(d===27&&Ti(a.type)&&(l=a.stateNode,o=null),a=a.child,a!==null))for(Tp(a,o,l),a=a.sibling;a!==null;)Tp(a,o,l),a=a.sibling}function Ju(a,o,l){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?l.insertBefore(a,o):l.appendChild(a);else if(d!==4&&(d===27&&Ti(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Ju(a,o,l),a=a.sibling;a!==null;)Ju(a,o,l),a=a.sibling}function nj(a){var o=a.stateNode,l=a.memoizedProps;try{for(var d=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Cr(o,d,l),o[Bt]=a,o[sr]=l}catch(b){ut(a,a.return,b)}}var Ma=!1,rr=!1,Pp=!1,aj=typeof WeakSet=="function"?WeakSet:Set,pr=null;function sR(a,o){if(a=a.containerInfo,eg=_d,a=gx(a),Oh(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var v=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var E=0,N=-1,L=-1,W=0,se=0,de=a,Z=null;t:for(;;){for(var re;de!==l||v!==0&&de.nodeType!==3||(N=E+v),de!==b||d!==0&&de.nodeType!==3||(L=E+d),de.nodeType===3&&(E+=de.nodeValue.length),(re=de.firstChild)!==null;)Z=de,de=re;for(;;){if(de===a)break t;if(Z===l&&++W===v&&(N=E),Z===b&&++se===d&&(L=E),(re=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=re}l=N===-1||L===-1?null:{start:N,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(tg={focusedElem:a,selectionRange:l},_d=!1,pr=o;pr!==null;)if(o=pr,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,pr=a;else for(;pr!==null;){switch(o=pr,b=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(l=0;l<a.length;l++)v=a[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,l=o,v=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var Ae=yo(l.type,v);a=d.getSnapshotBeforeUpdate(Ae,b),d.__reactInternalSnapshotBeforeUpdate=a}catch(ze){ut(l,l.return,ze)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,l=a.nodeType,l===9)ag(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":ag(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,pr=a;break}pr=o.return}}function ij(a,o,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:qa(a,l),d&4&&Il(5,l);break;case 1:if(qa(a,l),d&4)if(a=l.stateNode,o===null)try{a.componentDidMount()}catch(E){ut(l,l.return,E)}else{var v=yo(l.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch(E){ut(l,l.return,E)}}d&64&&Jw(l),d&512&&Ul(l,l.return);break;case 3:if(qa(a,l),d&64&&(a=l.updateQueue,a!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Hx(a,o)}catch(E){ut(l,l.return,E)}}break;case 27:o===null&&d&4&&nj(l);case 26:case 5:qa(a,l),o===null&&d&4&&tj(l),d&512&&Ul(l,l.return);break;case 12:qa(a,l);break;case 31:qa(a,l),d&4&&lj(a,l);break;case 13:qa(a,l),d&4&&cj(a,l),d&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=gR.bind(null,l),qR(a,l))));break;case 22:if(d=l.memoizedState!==null||Ma,!d){o=o!==null&&o.memoizedState!==null||rr,v=Ma;var b=rr;Ma=d,(rr=o)&&!b?La(a,l,(l.subtreeFlags&8772)!==0):qa(a,l),Ma=v,rr=b}break;case 30:break;default:qa(a,l)}}function oj(a){var o=a.alternate;o!==null&&(a.alternate=null,oj(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Qo(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var At=null,Kr=!1;function Ra(a,o,l){for(l=l.child;l!==null;)sj(a,o,l),l=l.sibling}function sj(a,o,l){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(Qt,l)}catch{}switch(l.tag){case 26:rr||da(l,o),Ra(a,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:rr||da(l,o);var d=At,v=Kr;Ti(l.type)&&(At=l.stateNode,Kr=!1),Ra(a,o,l),Wl(l.stateNode),At=d,Kr=v;break;case 5:rr||da(l,o);case 6:if(d=At,v=Kr,At=null,Ra(a,o,l),At=d,Kr=v,At!==null)if(Kr)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(l.stateNode)}catch(b){ut(l,o,b)}else try{At.removeChild(l.stateNode)}catch(b){ut(l,o,b)}break;case 18:At!==null&&(Kr?(a=At,Jj(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),Ds(a)):Jj(At,l.stateNode));break;case 4:d=At,v=Kr,At=l.stateNode.containerInfo,Kr=!0,Ra(a,o,l),At=d,Kr=v;break;case 0:case 11:case 14:case 15:Ei(2,l,o),rr||Ei(4,l,o),Ra(a,o,l);break;case 1:rr||(da(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"&&ej(l,o,d)),Ra(a,o,l);break;case 21:Ra(a,o,l);break;case 22:rr=(d=rr)||l.memoizedState!==null,Ra(a,o,l),rr=d;break;default:Ra(a,o,l)}}function lj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Ds(a)}catch(l){ut(o,o.return,l)}}}function cj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Ds(a)}catch(l){ut(o,o.return,l)}}function lR(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new aj),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new aj),o;default:throw Error(n(435,a.tag))}}function ed(a,o){var l=lR(a);o.forEach(function(d){if(!l.has(d)){l.add(d);var v=vR.bind(null,a,d);d.then(v,v)}})}function Yr(a,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var v=l[d],b=a,E=o,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(Ti(N.type)){At=N.stateNode,Kr=!1;break e}break;case 5:At=N.stateNode,Kr=!1;break e;case 3:case 4:At=N.stateNode.containerInfo,Kr=!0;break e}N=N.return}if(At===null)throw Error(n(160));sj(b,E,v),At=null,Kr=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)uj(o,a),o=o.sibling}var Wn=null;function uj(a,o){var l=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Yr(o,a),Gr(a),d&4&&(Ei(3,a,a.return),Il(3,a),Ei(5,a,a.return));break;case 1:Yr(o,a),Gr(a),d&512&&(rr||l===null||da(l,l.return)),d&64&&Ma&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var v=Wn;if(Yr(o,a),Gr(a),d&512&&(rr||l===null||da(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=a.memoizedState,l===null)if(d===null)if(a.stateNode===null){e:{d=a.type,l=a.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Zo]||b[Bt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(d),v.head.insertBefore(b,v.querySelector("head > title"))),Cr(b,d,l),b[Bt]=a,ce(b),d=b;break e;case"link":var E=uS("link","href",v).get(d+(l.href||""));if(E){for(var N=0;N<E.length;N++)if(b=E[N],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(N,1);break t}}b=v.createElement(d),Cr(b,d,l),v.head.appendChild(b);break;case"meta":if(E=uS("meta","content",v).get(d+(l.content||""))){for(N=0;N<E.length;N++)if(b=E[N],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(N,1);break t}}b=v.createElement(d),Cr(b,d,l),v.head.appendChild(b);break;default:throw Error(n(468,d))}b[Bt]=a,ce(b),d=b}a.stateNode=d}else dS(v,a.type,a.stateNode);else a.stateNode=cS(v,d,a.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?dS(v,a.type,a.stateNode):cS(v,d,a.memoizedProps)):d===null&&a.stateNode!==null&&kp(a,a.memoizedProps,l.memoizedProps)}break;case 27:Yr(o,a),Gr(a),d&512&&(rr||l===null||da(l,l.return)),l!==null&&d&4&&kp(a,a.memoizedProps,l.memoizedProps);break;case 5:if(Yr(o,a),Gr(a),d&512&&(rr||l===null||da(l,l.return)),a.flags&32){v=a.stateNode;try{es(v,"")}catch(Ae){ut(a,a.return,Ae)}}d&4&&a.stateNode!=null&&(v=a.memoizedProps,kp(a,v,l!==null?l.memoizedProps:v)),d&1024&&(Pp=!0);break;case 6:if(Yr(o,a),Gr(a),d&4){if(a.stateNode===null)throw Error(n(162));d=a.memoizedProps,l=a.stateNode;try{l.nodeValue=d}catch(Ae){ut(a,a.return,Ae)}}break;case 3:if(gd=null,v=Wn,Wn=hd(o.containerInfo),Yr(o,a),Wn=v,Gr(a),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Ds(o.containerInfo)}catch(Ae){ut(a,a.return,Ae)}Pp&&(Pp=!1,dj(a));break;case 4:d=Wn,Wn=hd(a.stateNode.containerInfo),Yr(o,a),Gr(a),Wn=d;break;case 12:Yr(o,a),Gr(a);break;case 31:Yr(o,a),Gr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,ed(a,d)));break;case 13:Yr(o,a),Gr(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(rd=Ye()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,ed(a,d)));break;case 22:v=a.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,W=Ma,se=rr;if(Ma=W||v,rr=se||L,Yr(o,a),rr=se,Ma=W,Gr(a),d&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(l===null||L||Ma||rr||bo(a)),l=null,o=a;;){if(o.tag===5||o.tag===26){if(l===null){L=l=o;try{if(b=L.stateNode,v)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=L.stateNode;var de=L.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ae){ut(L,L.return,Ae)}}}else if(o.tag===6){if(l===null){L=o;try{L.stateNode.nodeValue=v?"":L.memoizedProps}catch(Ae){ut(L,L.return,Ae)}}}else if(o.tag===18){if(l===null){L=o;try{var re=L.stateNode;v?eS(re,!0):eS(L.stateNode,!1)}catch(Ae){ut(L,L.return,Ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,ed(a,l))));break;case 19:Yr(o,a),Gr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,ed(a,d)));break;case 30:break;case 21:break;default:Yr(o,a),Gr(a)}}function Gr(a){var o=a.flags;if(o&2){try{for(var l,d=a.return;d!==null;){if(rj(d)){l=d;break}d=d.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var v=l.stateNode,b=Dp(a);Ju(a,b,v);break;case 5:var E=l.stateNode;l.flags&32&&(es(E,""),l.flags&=-33);var N=Dp(a);Ju(a,N,E);break;case 3:case 4:var L=l.stateNode.containerInfo,W=Dp(a);Tp(a,W,L);break;default:throw Error(n(161))}}catch(se){ut(a,a.return,se)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function dj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;dj(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function qa(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)ij(a,o.alternate,o),o=o.sibling}function bo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Ei(4,o,o.return),bo(o);break;case 1:da(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&ej(o,o.return,l),bo(o);break;case 27:Wl(o.stateNode);case 26:case 5:da(o,o.return),bo(o);break;case 22:o.memoizedState===null&&bo(o);break;case 30:bo(o);break;default:bo(o)}a=a.sibling}}function La(a,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,v=a,b=o,E=b.flags;switch(b.tag){case 0:case 11:case 15:La(v,b,l),Il(4,b);break;case 1:if(La(v,b,l),d=b,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(W){ut(d,d.return,W)}if(d=b,v=d.updateQueue,v!==null){var N=d.stateNode;try{var L=v.shared.hiddenCallbacks;if(L!==null)for(v.shared.hiddenCallbacks=null,v=0;v<L.length;v++)$x(L[v],N)}catch(W){ut(d,d.return,W)}}l&&E&64&&Jw(b),Ul(b,b.return);break;case 27:nj(b);case 26:case 5:La(v,b,l),l&&d===null&&E&4&&tj(b),Ul(b,b.return);break;case 12:La(v,b,l);break;case 31:La(v,b,l),l&&E&4&&lj(v,b);break;case 13:La(v,b,l),l&&E&4&&cj(v,b);break;case 22:b.memoizedState===null&&La(v,b,l),Ul(b,b.return);break;case 30:break;default:La(v,b,l)}o=o.sibling}}function Mp(a,o){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&Ol(l))}function Rp(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Ol(a))}function Xn(a,o,l,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)fj(a,o,l,d),o=o.sibling}function fj(a,o,l,d){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Xn(a,o,l,d),v&2048&&Il(9,o);break;case 1:Xn(a,o,l,d);break;case 3:Xn(a,o,l,d),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Ol(a)));break;case 12:if(v&2048){Xn(a,o,l,d),a=o.stateNode;try{var b=o.memoizedProps,E=b.id,N=b.onPostCommit;typeof N=="function"&&N(E,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(L){ut(o,o.return,L)}}else Xn(a,o,l,d);break;case 31:Xn(a,o,l,d);break;case 13:Xn(a,o,l,d);break;case 23:break;case 22:b=o.stateNode,E=o.alternate,o.memoizedState!==null?b._visibility&2?Xn(a,o,l,d):Bl(a,o):b._visibility&2?Xn(a,o,l,d):(b._visibility|=2,_s(a,o,l,d,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Mp(E,o);break;case 24:Xn(a,o,l,d),v&2048&&Rp(o.alternate,o);break;default:Xn(a,o,l,d)}}function _s(a,o,l,d,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=a,E=o,N=l,L=d,W=E.flags;switch(E.tag){case 0:case 11:case 15:_s(b,E,N,L,v),Il(8,E);break;case 23:break;case 22:var se=E.stateNode;E.memoizedState!==null?se._visibility&2?_s(b,E,N,L,v):Bl(b,E):(se._visibility|=2,_s(b,E,N,L,v)),v&&W&2048&&Mp(E.alternate,E);break;case 24:_s(b,E,N,L,v),v&&W&2048&&Rp(E.alternate,E);break;default:_s(b,E,N,L,v)}o=o.sibling}}function Bl(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=a,d=o,v=d.flags;switch(d.tag){case 22:Bl(l,d),v&2048&&Mp(d.alternate,d);break;case 24:Bl(l,d),v&2048&&Rp(d.alternate,d);break;default:Bl(l,d)}o=o.sibling}}var $l=8192;function xs(a,o,l){if(a.subtreeFlags&$l)for(a=a.child;a!==null;)mj(a,o,l),a=a.sibling}function mj(a,o,l){switch(a.tag){case 26:xs(a,o,l),a.flags&$l&&a.memoizedState!==null&&VR(l,Wn,a.memoizedState,a.memoizedProps);break;case 5:xs(a,o,l);break;case 3:case 4:var d=Wn;Wn=hd(a.stateNode.containerInfo),xs(a,o,l),Wn=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=$l,$l=16777216,xs(a,o,l),$l=d):xs(a,o,l));break;default:xs(a,o,l)}}function hj(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Hl(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];pr=d,gj(d,a)}hj(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)pj(a),a=a.sibling}function pj(a){switch(a.tag){case 0:case 11:case 15:Hl(a),a.flags&2048&&Ei(9,a,a.return);break;case 3:Hl(a);break;case 12:Hl(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,td(a)):Hl(a);break;default:Hl(a)}}function td(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];pr=d,gj(d,a)}hj(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Ei(8,o,o.return),td(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,td(o));break;default:td(o)}a=a.sibling}}function gj(a,o){for(;pr!==null;){var l=pr;switch(l.tag){case 0:case 11:case 15:Ei(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Ol(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,pr=d;else e:for(l=a;pr!==null;){d=pr;var v=d.sibling,b=d.return;if(oj(d),d===l){pr=null;break e}if(v!==null){v.return=b,pr=v;break e}pr=b}}}var cR={getCacheForType:function(a){var o=Er(Jt),l=o.data.get(a);return l===void 0&&(l=a(),o.data.set(a,l)),l},cacheSignal:function(){return Er(Jt).controller.signal}},uR=typeof WeakMap=="function"?WeakMap:Map,ot=0,bt=null,Ve=null,Xe=0,ct=0,ln=null,Oi=!1,ws=!1,qp=!1,za=0,Ht=0,Ci=0,_o=0,Lp=0,cn=0,js=0,Fl=null,Vr=null,zp=!1,rd=0,vj=0,nd=1/0,ad=null,Ai=null,lr=0,Ni=null,Ss=null,Ia=0,Ip=0,Up=null,yj=null,Kl=0,Bp=null;function un(){return(ot&2)!==0&&Xe!==0?Xe&-Xe:R.T!==null?Gp():eo()}function bj(){if(cn===0)if((Xe&536870912)===0||Qe){var a=fi;fi<<=1,(fi&3932160)===0&&(fi=262144),cn=a}else cn=536870912;return a=on.current,a!==null&&(a.flags|=32),cn}function Wr(a,o,l){(a===bt&&(ct===2||ct===9)||a.cancelPendingCommit!==null)&&(Es(a,0),ki(a,Xe,cn,!1)),ja(a,l),((ot&2)===0||a!==bt)&&(a===bt&&((ot&2)===0&&(_o|=l),Ht===4&&ki(a,Xe,cn,!1)),fa(a))}function _j(a,o,l){if((ot&6)!==0)throw Error(n(327));var d=!l&&(o&127)===0&&(o&a.expiredLanes)===0||wa(a,o),v=d?mR(a,o):Hp(a,o,!0),b=d;do{if(v===0){ws&&!d&&ki(a,o,0,!1);break}else{if(l=a.current.alternate,b&&!dR(l)){v=Hp(a,o,!1),b=!1;continue}if(v===2){if(b=o,a.errorRecoveryDisabledLanes&b)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var N=a;v=Fl;var L=N.current.memoizedState.isDehydrated;if(L&&(Es(N,E).flags|=256),E=Hp(N,E,!1),E!==2){if(qp&&!L){N.errorRecoveryDisabledLanes|=b,_o|=b,v=4;break e}b=Vr,Vr=v,b!==null&&(Vr===null?Vr=b:Vr.push.apply(Vr,b))}v=E}if(b=!1,v!==2)continue}}if(v===1){Es(a,0),ki(a,o,0,!0);break}e:{switch(d=a,b=v,b){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:ki(d,o,cn,!Oi);break e;case 2:Vr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(v=rd+300-Ye(),10<v)){if(ki(d,o,cn,!Oi),mi(d,0,!0)!==0)break e;Ia=o,d.timeoutHandle=Zj(xj.bind(null,d,l,Vr,ad,zp,o,cn,_o,js,Oi,b,"Throttled",-0,0),v);break e}xj(d,l,Vr,ad,zp,o,cn,_o,js,Oi,b,null,-0,0)}}break}while(!0);fa(a)}function xj(a,o,l,d,v,b,E,N,L,W,se,de,Z,re){if(a.timeoutHandle=-1,de=o.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sa},mj(o,b,de);var Ae=(b&62914560)===b?rd-Ye():(b&4194048)===b?vj-Ye():0;if(Ae=WR(de,Ae),Ae!==null){Ia=b,a.cancelPendingCommit=Ae(Nj.bind(null,a,o,b,l,d,v,E,N,L,se,de,null,Z,re)),ki(a,b,E,!W);return}}Nj(a,o,b,l,d,v,E,N,L)}function dR(a){for(var o=a;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var v=l[d],b=v.getSnapshot;v=v.value;try{if(!nn(b(),v))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ki(a,o,l,d){o&=~Lp,o&=~_o,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var v=o;0<v;){var b=31-ft(v),E=1<<b;d[b]=-1,v&=~E}l!==0&&hu(a,l,o)}function id(){return(ot&6)===0?(Yl(0),!1):!0}function $p(){if(Ve!==null){if(ct===0)var a=Ve.return;else a=Ve,Aa=uo=null,ap(a),ps=null,Al=0,a=Ve;for(;a!==null;)Qw(a.alternate,a),a=a.return;Ve=null}}function Es(a,o){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,DR(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Ia=0,$p(),bt=a,Ve=l=Oa(a.current,null),Xe=o,ct=0,ln=null,Oi=!1,ws=wa(a,o),qp=!1,js=cn=Lp=_o=Ci=Ht=0,Vr=Fl=null,zp=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var v=31-ft(d),b=1<<v;o|=a[v],d&=~b}return za=o,Ou(),l}function wj(a,o){Be=null,R.H=ql,o===hs||o===Mu?(o=zx(),ct=3):o===Yh?(o=zx(),ct=4):ct=o===_p?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ln=o,Ve===null&&(Ht=1,Vu(a,Cn(o,a.current)))}function jj(){var a=on.current;return a===null?!0:(Xe&4194048)===Xe?Dn===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?a===Dn:!1}function Sj(){var a=R.H;return R.H=ql,a===null?ql:a}function Ej(){var a=R.A;return R.A=cR,a}function od(){Ht=4,Oi||(Xe&4194048)!==Xe&&on.current!==null||(ws=!0),(Ci&134217727)===0&&(_o&134217727)===0||bt===null||ki(bt,Xe,cn,!1)}function Hp(a,o,l){var d=ot;ot|=2;var v=Sj(),b=Ej();(bt!==a||Xe!==o)&&(ad=null,Es(a,o)),o=!1;var E=Ht;e:do try{if(ct!==0&&Ve!==null){var N=Ve,L=ln;switch(ct){case 8:$p(),E=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(o=!0);var W=ct;if(ct=0,ln=null,Os(a,N,L,W),l&&ws){E=0;break e}break;default:W=ct,ct=0,ln=null,Os(a,N,L,W)}}fR(),E=Ht;break}catch(se){wj(a,se)}while(!0);return o&&a.shellSuspendCounter++,Aa=uo=null,ot=d,R.H=v,R.A=b,Ve===null&&(bt=null,Xe=0,Ou()),E}function fR(){for(;Ve!==null;)Oj(Ve)}function mR(a,o){var l=ot;ot|=2;var d=Sj(),v=Ej();bt!==a||Xe!==o?(ad=null,nd=Ye()+500,Es(a,o)):ws=wa(a,o);e:do try{if(ct!==0&&Ve!==null){o=Ve;var b=ln;t:switch(ct){case 1:ct=0,ln=null,Os(a,o,b,1);break;case 2:case 9:if(qx(b)){ct=0,ln=null,Cj(o);break}o=function(){ct!==2&&ct!==9||bt!==a||(ct=7),fa(a)},b.then(o,o);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:qx(b)?(ct=0,ln=null,Cj(o)):(ct=0,ln=null,Os(a,o,b,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var N=Ve;if(E?fS(E):N.stateNode.complete){ct=0,ln=null;var L=N.sibling;if(L!==null)Ve=L;else{var W=N.return;W!==null?(Ve=W,sd(W)):Ve=null}break t}}ct=0,ln=null,Os(a,o,b,5);break;case 6:ct=0,ln=null,Os(a,o,b,6);break;case 8:$p(),Ht=6;break e;default:throw Error(n(462))}}hR();break}catch(se){wj(a,se)}while(!0);return Aa=uo=null,R.H=d,R.A=v,ot=l,Ve!==null?0:(bt=null,Xe=0,Ou(),Ht)}function hR(){for(;Ve!==null&&!Br();)Oj(Ve)}function Oj(a){var o=Xw(a.alternate,a,za);a.memoizedProps=a.pendingProps,o===null?sd(a):Ve=o}function Cj(a){var o=a,l=o.alternate;switch(o.tag){case 15:case 0:o=Fw(l,o,o.pendingProps,o.type,void 0,Xe);break;case 11:o=Fw(l,o,o.pendingProps,o.type.render,o.ref,Xe);break;case 5:ap(o);default:Qw(l,o),o=Ve=Ex(o,za),o=Xw(l,o,za)}a.memoizedProps=a.pendingProps,o===null?sd(a):Ve=o}function Os(a,o,l,d){Aa=uo=null,ap(o),ps=null,Al=0;var v=o.return;try{if(rR(a,v,o,l,Xe)){Ht=1,Vu(a,Cn(l,a.current)),Ve=null;return}}catch(b){if(v!==null)throw Ve=v,b;Ht=1,Vu(a,Cn(l,a.current)),Ve=null;return}o.flags&32768?(Qe||d===1?a=!0:ws||(Xe&536870912)!==0?a=!1:(Oi=a=!0,(d===2||d===9||d===3||d===6)&&(d=on.current,d!==null&&d.tag===13&&(d.flags|=16384))),Aj(o,a)):sd(o)}function sd(a){var o=a;do{if((o.flags&32768)!==0){Aj(o,Oi);return}a=o.return;var l=iR(o.alternate,o,za);if(l!==null){Ve=l;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=a}while(o!==null);Ht===0&&(Ht=5)}function Aj(a,o){do{var l=oR(a.alternate,a);if(l!==null){l.flags&=32767,Ve=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(a=a.sibling,a!==null)){Ve=a;return}Ve=a=l}while(a!==null);Ht=6,Ve=null}function Nj(a,o,l,d,v,b,E,N,L){a.cancelPendingCommit=null;do ld();while(lr!==0);if((ot&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(b=o.lanes|o.childLanes,b|=Dh,ul(a,l,b,E,N,L),a===bt&&(Ve=bt=null,Xe=0),Ss=o,Ni=a,Ia=l,Ip=b,Up=v,yj=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,yR(jr,function(){return Mj(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=R.T,R.T=null,v=U.p,U.p=2,E=ot,ot|=4;try{sR(a,o,l)}finally{ot=E,U.p=v,R.T=d}}lr=1,kj(),Dj(),Tj()}}function kj(){if(lr===1){lr=0;var a=Ni,o=Ss,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var d=U.p;U.p=2;var v=ot;ot|=4;try{uj(o,a);var b=tg,E=gx(a.containerInfo),N=b.focusedElem,L=b.selectionRange;if(E!==N&&N&&N.ownerDocument&&px(N.ownerDocument.documentElement,N)){if(L!==null&&Oh(N)){var W=L.start,se=L.end;if(se===void 0&&(se=W),"selectionStart"in N)N.selectionStart=W,N.selectionEnd=Math.min(se,N.value.length);else{var de=N.ownerDocument||document,Z=de&&de.defaultView||window;if(Z.getSelection){var re=Z.getSelection(),Ae=N.textContent.length,ze=Math.min(L.start,Ae),pt=L.end===void 0?ze:Math.min(L.end,Ae);!re.extend&&ze>pt&&(E=pt,pt=ze,ze=E);var F=hx(N,ze),$=hx(N,pt);if(F&&$&&(re.rangeCount!==1||re.anchorNode!==F.node||re.anchorOffset!==F.offset||re.focusNode!==$.node||re.focusOffset!==$.offset)){var V=de.createRange();V.setStart(F.node,F.offset),re.removeAllRanges(),ze>pt?(re.addRange(V),re.extend($.node,$.offset)):(V.setEnd($.node,$.offset),re.addRange(V))}}}}for(de=[],re=N;re=re.parentNode;)re.nodeType===1&&de.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<de.length;N++){var ue=de[N];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}_d=!!eg,tg=eg=null}finally{ot=v,U.p=d,R.T=l}}a.current=o,lr=2}}function Dj(){if(lr===2){lr=0;var a=Ni,o=Ss,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var d=U.p;U.p=2;var v=ot;ot|=4;try{ij(a,o.alternate,o)}finally{ot=v,U.p=d,R.T=l}}lr=3}}function Tj(){if(lr===4||lr===3){lr=0,xt();var a=Ni,o=Ss,l=Ia,d=yj;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?lr=5:(lr=0,Ss=Ni=null,Pj(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Ai=null),fl(l),o=o.stateNode,Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(Qt,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=R.T,v=U.p,U.p=2,R.T=null;try{for(var b=a.onRecoverableError,E=0;E<d.length;E++){var N=d[E];b(N.value,{componentStack:N.stack})}}finally{R.T=o,U.p=v}}(Ia&3)!==0&&ld(),fa(a),v=a.pendingLanes,(l&261930)!==0&&(v&42)!==0?a===Bp?Kl++:(Kl=0,Bp=a):Kl=0,Yl(0)}}function Pj(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Ol(o)))}function ld(){return kj(),Dj(),Tj(),Mj()}function Mj(){if(lr!==5)return!1;var a=Ni,o=Ip;Ip=0;var l=fl(Ia),d=R.T,v=U.p;try{U.p=32>l?32:l,R.T=null,l=Up,Up=null;var b=Ni,E=Ia;if(lr=0,Ss=Ni=null,Ia=0,(ot&6)!==0)throw Error(n(331));var N=ot;if(ot|=4,pj(b.current),fj(b,b.current,E,l),ot=N,Yl(0,!1),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(Qt,b)}catch{}return!0}finally{U.p=v,R.T=d,Pj(a,o)}}function Rj(a,o,l){o=Cn(l,o),o=bp(a.stateNode,o,2),a=wi(a,o,2),a!==null&&(ja(a,2),fa(a))}function ut(a,o,l){if(a.tag===3)Rj(a,a,l);else for(;o!==null;){if(o.tag===3){Rj(o,a,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ai===null||!Ai.has(d))){a=Cn(l,a),l=qw(2),d=wi(o,l,2),d!==null&&(Lw(l,d,o,a),ja(d,2),fa(d));break}}o=o.return}}function Fp(a,o,l){var d=a.pingCache;if(d===null){d=a.pingCache=new uR;var v=new Set;d.set(o,v)}else v=d.get(o),v===void 0&&(v=new Set,d.set(o,v));v.has(l)||(qp=!0,v.add(l),a=pR.bind(null,a,o,l),o.then(a,a))}function pR(a,o,l){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,bt===a&&(Xe&l)===l&&(Ht===4||Ht===3&&(Xe&62914560)===Xe&&300>Ye()-rd?(ot&2)===0&&Es(a,0):Lp|=l,js===Xe&&(js=0)),fa(a)}function qj(a,o){o===0&&(o=ye()),a=so(a,o),a!==null&&(ja(a,o),fa(a))}function gR(a){var o=a.memoizedState,l=0;o!==null&&(l=o.retryLane),qj(a,l)}function vR(a,o){var l=0;switch(a.tag){case 31:case 13:var d=a.stateNode,v=a.memoizedState;v!==null&&(l=v.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(o),qj(a,l)}function yR(a,o){return yt(a,o)}var cd=null,Cs=null,Kp=!1,ud=!1,Yp=!1,Di=0;function fa(a){a!==Cs&&a.next===null&&(Cs===null?cd=Cs=a:Cs=Cs.next=a),ud=!0,Kp||(Kp=!0,_R())}function Yl(a,o){if(!Yp&&ud){Yp=!0;do for(var l=!1,d=cd;d!==null;){if(a!==0){var v=d.pendingLanes;if(v===0)var b=0;else{var E=d.suspendedLanes,N=d.pingedLanes;b=(1<<31-ft(42|a)+1)-1,b&=v&~(E&~N),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,Uj(d,b))}else b=Xe,b=mi(d,d===bt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||wa(d,b)||(l=!0,Uj(d,b));d=d.next}while(l);Yp=!1}}function bR(){Lj()}function Lj(){ud=Kp=!1;var a=0;Di!==0&&kR()&&(a=Di);for(var o=Ye(),l=null,d=cd;d!==null;){var v=d.next,b=zj(d,o);b===0?(d.next=null,l===null?cd=v:l.next=v,v===null&&(Cs=l)):(l=d,(a!==0||(b&3)!==0)&&(ud=!0)),d=v}lr!==0&&lr!==5||Yl(a),Di!==0&&(Di=0)}function zj(a,o){for(var l=a.suspendedLanes,d=a.pingedLanes,v=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var E=31-ft(b),N=1<<E,L=v[E];L===-1?((N&l)===0||(N&d)!==0)&&(v[E]=cl(N,o)):L<=o&&(a.expiredLanes|=N),b&=~N}if(o=bt,l=Xe,l=mi(a,a===o?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,l===0||a===o&&(ct===2||ct===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&Ct(d),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||wa(a,l)){if(o=l&-l,o===a.callbackPriority)return o;switch(d!==null&&Ct(d),fl(l)){case 2:case 8:l=Hr;break;case 32:l=jr;break;case 268435456:l=he;break;default:l=jr}return d=Ij.bind(null,a),l=yt(l,d),a.callbackPriority=o,a.callbackNode=l,o}return d!==null&&d!==null&&Ct(d),a.callbackPriority=2,a.callbackNode=null,2}function Ij(a,o){if(lr!==0&&lr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(ld()&&a.callbackNode!==l)return null;var d=Xe;return d=mi(a,a===bt?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(_j(a,d,o),zj(a,Ye()),a.callbackNode!=null&&a.callbackNode===l?Ij.bind(null,a):null)}function Uj(a,o){if(ld())return null;_j(a,o,!0)}function _R(){TR(function(){(ot&6)!==0?yt(xn,bR):Lj()})}function Gp(){if(Di===0){var a=fs;a===0&&(a=di,di<<=1,(di&261888)===0&&(di=256)),Di=a}return Di}function Bj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:yu(""+a)}function $j(a,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,a.id&&l.setAttribute("form",a.id),o.parentNode.insertBefore(l,o),a=new FormData(a),l.parentNode.removeChild(l),a}function xR(a,o,l,d,v){if(o==="submit"&&l&&l.stateNode===v){var b=Bj((v[sr]||null).action),E=d.submitter;E&&(o=(o=E[sr]||null)?Bj(o.formAction):E.getAttribute("formAction"),o!==null&&(b=o,E=null));var N=new wu("action","action",null,d,v);a.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Di!==0){var L=E?$j(v,E):new FormData(v);mp(l,{pending:!0,data:L,method:v.method,action:b},null,L)}}else typeof b=="function"&&(N.preventDefault(),L=E?$j(v,E):new FormData(v),mp(l,{pending:!0,data:L,method:v.method,action:b},b,L))},currentTarget:v}]})}}for(var Vp=0;Vp<kh.length;Vp++){var Wp=kh[Vp],wR=Wp.toLowerCase(),jR=Wp[0].toUpperCase()+Wp.slice(1);Vn(wR,"on"+jR)}Vn(bx,"onAnimationEnd"),Vn(_x,"onAnimationIteration"),Vn(xx,"onAnimationStart"),Vn("dblclick","onDoubleClick"),Vn("focusin","onFocus"),Vn("focusout","onBlur"),Vn(I2,"onTransitionRun"),Vn(U2,"onTransitionStart"),Vn(B2,"onTransitionCancel"),Vn(wx,"onTransitionEnd"),Se("onMouseEnter",["mouseout","mouseover"]),Se("onMouseLeave",["mouseout","mouseover"]),Se("onPointerEnter",["pointerout","pointerover"]),Se("onPointerLeave",["pointerout","pointerover"]),ae("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ae("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ae("onBeforeInput",["compositionend","keypress","textInput","paste"]),ae("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ae("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function Hj(a,o){o=(o&4)!==0;for(var l=0;l<a.length;l++){var d=a[l],v=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var E=d.length-1;0<=E;E--){var N=d[E],L=N.instance,W=N.currentTarget;if(N=N.listener,L!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=W;try{b(v)}catch(se){Eu(se)}v.currentTarget=null,b=L}else for(E=0;E<d.length;E++){if(N=d[E],L=N.instance,W=N.currentTarget,N=N.listener,L!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=W;try{b(v)}catch(se){Eu(se)}v.currentTarget=null,b=L}}}}function We(a,o){var l=o[ro];l===void 0&&(l=o[ro]=new Set);var d=a+"__bubble";l.has(d)||(Fj(o,a,2,!1),l.add(d))}function Xp(a,o,l){var d=0;o&&(d|=4),Fj(l,a,d,o)}var dd="_reactListening"+Math.random().toString(36).slice(2);function Zp(a){if(!a[dd]){a[dd]=!0,me.forEach(function(l){l!=="selectionchange"&&(SR.has(l)||Xp(l,!1,a),Xp(l,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[dd]||(o[dd]=!0,Xp("selectionchange",!1,o))}}function Fj(a,o,l,d){switch(bS(o)){case 2:var v=QR;break;case 8:v=JR;break;default:v=fg}l=v.bind(null,o,l,a),v=void 0,!vh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),d?v!==void 0?a.addEventListener(o,l,{capture:!0,passive:v}):a.addEventListener(o,l,!0):v!==void 0?a.addEventListener(o,l,{passive:v}):a.addEventListener(o,l,!1)}function Qp(a,o,l,d,v){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var N=d.stateNode.containerInfo;if(N===v)break;if(E===4)for(E=d.return;E!==null;){var L=E.tag;if((L===3||L===4)&&E.stateNode.containerInfo===v)return;E=E.return}for(;N!==null;){if(E=Yn(N),E===null)return;if(L=E.tag,L===5||L===6||L===26||L===27){d=b=E;continue e}N=N.parentNode}}d=d.return}W_(function(){var W=b,se=ph(l),de=[];e:{var Z=jx.get(a);if(Z!==void 0){var re=wu,Ae=a;switch(a){case"keypress":if(_u(l)===0)break e;case"keydown":case"keyup":re=v2;break;case"focusin":Ae="focus",re=xh;break;case"focusout":Ae="blur",re=xh;break;case"beforeblur":case"afterblur":re=xh;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Q_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=i2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=_2;break;case bx:case _x:case xx:re=l2;break;case wx:re=w2;break;case"scroll":case"scrollend":re=n2;break;case"wheel":re=S2;break;case"copy":case"cut":case"paste":re=u2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=ex;break;case"toggle":case"beforetoggle":re=O2}var ze=(o&4)!==0,pt=!ze&&(a==="scroll"||a==="scrollend"),F=ze?Z!==null?Z+"Capture":null:Z;ze=[];for(var $=W,V;$!==null;){var ue=$;if(V=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||V===null||F===null||(ue=pl($,F),ue!=null&&ze.push(Vl($,ue,V))),pt)break;$=$.return}0<ze.length&&(Z=new re(Z,Ae,null,l,se),de.push({event:Z,listeners:ze}))}}if((o&7)===0){e:{if(Z=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",Z&&l!==hh&&(Ae=l.relatedTarget||l.fromElement)&&(Yn(Ae)||Ae[la]))break e;if((re||Z)&&(Z=se.window===se?se:(Z=se.ownerDocument)?Z.defaultView||Z.parentWindow:window,re?(Ae=l.relatedTarget||l.toElement,re=W,Ae=Ae?Yn(Ae):null,Ae!==null&&(pt=s(Ae),ze=Ae.tag,Ae!==pt||ze!==5&&ze!==27&&ze!==6)&&(Ae=null)):(re=null,Ae=W),re!==Ae)){if(ze=Q_,ue="onMouseLeave",F="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(ze=ex,ue="onPointerLeave",F="onPointerEnter",$="pointer"),pt=re==null?Z:no(re),V=Ae==null?Z:no(Ae),Z=new ze(ue,$+"leave",re,l,se),Z.target=pt,Z.relatedTarget=V,ue=null,Yn(se)===W&&(ze=new ze(F,$+"enter",Ae,l,se),ze.target=V,ze.relatedTarget=pt,ue=ze),pt=ue,re&&Ae)t:{for(ze=ER,F=re,$=Ae,V=0,ue=F;ue;ue=ze(ue))V++;ue=0;for(var qe=$;qe;qe=ze(qe))ue++;for(;0<V-ue;)F=ze(F),V--;for(;0<ue-V;)$=ze($),ue--;for(;V--;){if(F===$||$!==null&&F===$.alternate){ze=F;break t}F=ze(F),$=ze($)}ze=null}else ze=null;re!==null&&Kj(de,Z,re,ze,!1),Ae!==null&&pt!==null&&Kj(de,pt,Ae,ze,!0)}}e:{if(Z=W?no(W):window,re=Z.nodeName&&Z.nodeName.toLowerCase(),re==="select"||re==="input"&&Z.type==="file")var rt=lx;else if(ox(Z))if(cx)rt=q2;else{rt=M2;var Pe=P2}else re=Z.nodeName,!re||re.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?W&&mh(W.elementType)&&(rt=lx):rt=R2;if(rt&&(rt=rt(a,W))){sx(de,rt,l,se);break e}Pe&&Pe(a,Z,W),a==="focusout"&&W&&Z.type==="number"&&W.memoizedProps.value!=null&&fh(Z,"number",Z.value)}switch(Pe=W?no(W):window,a){case"focusin":(ox(Pe)||Pe.contentEditable==="true")&&(as=Pe,Ch=W,jl=null);break;case"focusout":jl=Ch=as=null;break;case"mousedown":Ah=!0;break;case"contextmenu":case"mouseup":case"dragend":Ah=!1,vx(de,l,se);break;case"selectionchange":if(z2)break;case"keydown":case"keyup":vx(de,l,se)}var $e;if(jh)e:{switch(a){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else ns?ax(a,l)&&(Ze="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(tx&&l.locale!=="ko"&&(ns||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&ns&&($e=X_()):(pi=se,yh="value"in pi?pi.value:pi.textContent,ns=!0)),Pe=fd(W,Ze),0<Pe.length&&(Ze=new J_(Ze,a,null,l,se),de.push({event:Ze,listeners:Pe}),$e?Ze.data=$e:($e=ix(l),$e!==null&&(Ze.data=$e)))),($e=A2?N2(a,l):k2(a,l))&&(Ze=fd(W,"onBeforeInput"),0<Ze.length&&(Pe=new J_("onBeforeInput","beforeinput",null,l,se),de.push({event:Pe,listeners:Ze}),Pe.data=$e)),xR(de,a,W,l,se)}Hj(de,o)})}function Vl(a,o,l){return{instance:a,listener:o,currentTarget:l}}function fd(a,o){for(var l=o+"Capture",d=[];a!==null;){var v=a,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=pl(a,l),v!=null&&d.unshift(Vl(a,v,b)),v=pl(a,o),v!=null&&d.push(Vl(a,v,b))),a.tag===3)return d;a=a.return}return[]}function ER(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Kj(a,o,l,d,v){for(var b=o._reactName,E=[];l!==null&&l!==d;){var N=l,L=N.alternate,W=N.stateNode;if(N=N.tag,L!==null&&L===d)break;N!==5&&N!==26&&N!==27||W===null||(L=W,v?(W=pl(l,b),W!=null&&E.unshift(Vl(l,W,L))):v||(W=pl(l,b),W!=null&&E.push(Vl(l,W,L)))),l=l.return}E.length!==0&&a.push({event:o,listeners:E})}var OR=/\r\n?/g,CR=/\u0000|\uFFFD/g;function Yj(a){return(typeof a=="string"?a:""+a).replace(OR,`
`).replace(CR,"")}function Gj(a,o){return o=Yj(o),Yj(a)===o}function ht(a,o,l,d,v,b){switch(l){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||es(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&es(a,""+d);break;case"className":Gt(a,"class",d);break;case"tabIndex":Gt(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Gt(a,l,d);break;case"style":G_(a,d,b);break;case"data":if(o!=="object"){Gt(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||l!=="href")){a.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(l);break}d=yu(""+d),a.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(o!=="input"&&ht(a,o,"name",v.name,v,null),ht(a,o,"formEncType",v.formEncType,v,null),ht(a,o,"formMethod",v.formMethod,v,null),ht(a,o,"formTarget",v.formTarget,v,null)):(ht(a,o,"encType",v.encType,v,null),ht(a,o,"method",v.method,v,null),ht(a,o,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(l);break}d=yu(""+d),a.setAttribute(l,d);break;case"onClick":d!=null&&(a.onclick=Sa);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}l=yu(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,""+d):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":d===!0?a.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,d):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(l,d):a.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(l):a.setAttribute(l,d);break;case"popover":We("beforetoggle",a),We("toggle",a),Je(a,"popover",d);break;case"xlinkActuate":Gn(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Gn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Gn(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Gn(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Gn(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Gn(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Gn(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Gn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Gn(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Je(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=t2.get(l)||l,Je(a,l,d))}}function Jp(a,o,l,d,v,b){switch(l){case"style":G_(a,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"children":typeof d=="string"?es(a,d):(typeof d=="number"||typeof d=="bigint")&&es(a,""+d);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"onClick":d!=null&&(a.onclick=Sa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!le.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),o=l.slice(2,v?l.length-7:void 0),b=a[sr]||null,b=b!=null?b[l]:null,typeof b=="function"&&a.removeEventListener(o,b,v),typeof d=="function")){typeof b!="function"&&b!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(o,d,v);break e}l in a?a[l]=d:d===!0?a.setAttribute(l,""):Je(a,l,d)}}}function Cr(a,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var d=!1,v=!1,b;for(b in l)if(l.hasOwnProperty(b)){var E=l[b];if(E!=null)switch(b){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ht(a,o,b,E,l,null)}}v&&ht(a,o,"srcSet",l.srcSet,l,null),d&&ht(a,o,"src",l.src,l,null);return;case"input":We("invalid",a);var N=b=E=v=null,L=null,W=null;for(d in l)if(l.hasOwnProperty(d)){var se=l[d];if(se!=null)switch(d){case"name":v=se;break;case"type":E=se;break;case"checked":L=se;break;case"defaultChecked":W=se;break;case"value":b=se;break;case"defaultValue":N=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(137,o));break;default:ht(a,o,d,se,l,null)}}H_(a,b,N,L,W,E,v,!1);return;case"select":We("invalid",a),d=E=b=null;for(v in l)if(l.hasOwnProperty(v)&&(N=l[v],N!=null))switch(v){case"value":b=N;break;case"defaultValue":E=N;break;case"multiple":d=N;default:ht(a,o,v,N,l,null)}o=b,l=E,a.multiple=!!d,o!=null?Jo(a,!!d,o,!1):l!=null&&Jo(a,!!d,l,!0);return;case"textarea":We("invalid",a),b=v=d=null;for(E in l)if(l.hasOwnProperty(E)&&(N=l[E],N!=null))switch(E){case"value":d=N;break;case"defaultValue":v=N;break;case"children":b=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:ht(a,o,E,N,l,null)}K_(a,d,v,b);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(d=l[L],d!=null))switch(L){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ht(a,o,L,d,l,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(d=0;d<Gl.length;d++)We(Gl[d],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in l)if(l.hasOwnProperty(W)&&(d=l[W],d!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ht(a,o,W,d,l,null)}return;default:if(mh(o)){for(se in l)l.hasOwnProperty(se)&&(d=l[se],d!==void 0&&Jp(a,o,se,d,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(d=l[N],d!=null&&ht(a,o,N,d,l,null))}function AR(a,o,l,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,E=null,N=null,L=null,W=null,se=null;for(re in l){var de=l[re];if(l.hasOwnProperty(re)&&de!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":L=de;default:d.hasOwnProperty(re)||ht(a,o,re,null,d,de)}}for(var Z in d){var re=d[Z];if(de=l[Z],d.hasOwnProperty(Z)&&(re!=null||de!=null))switch(Z){case"type":b=re;break;case"name":v=re;break;case"checked":W=re;break;case"defaultChecked":se=re;break;case"value":E=re;break;case"defaultValue":N=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(n(137,o));break;default:re!==de&&ht(a,o,Z,re,d,de)}}dh(a,E,N,L,W,se,b,v);return;case"select":re=E=N=Z=null;for(b in l)if(L=l[b],l.hasOwnProperty(b)&&L!=null)switch(b){case"value":break;case"multiple":re=L;default:d.hasOwnProperty(b)||ht(a,o,b,null,d,L)}for(v in d)if(b=d[v],L=l[v],d.hasOwnProperty(v)&&(b!=null||L!=null))switch(v){case"value":Z=b;break;case"defaultValue":N=b;break;case"multiple":E=b;default:b!==L&&ht(a,o,v,b,d,L)}o=N,l=E,d=re,Z!=null?Jo(a,!!l,Z,!1):!!d!=!!l&&(o!=null?Jo(a,!!l,o,!0):Jo(a,!!l,l?[]:"",!1));return;case"textarea":re=Z=null;for(N in l)if(v=l[N],l.hasOwnProperty(N)&&v!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ht(a,o,N,null,d,v)}for(E in d)if(v=d[E],b=l[E],d.hasOwnProperty(E)&&(v!=null||b!=null))switch(E){case"value":Z=v;break;case"defaultValue":re=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==b&&ht(a,o,E,v,d,b)}F_(a,Z,re);return;case"option":for(var Ae in l)if(Z=l[Ae],l.hasOwnProperty(Ae)&&Z!=null&&!d.hasOwnProperty(Ae))switch(Ae){case"selected":a.selected=!1;break;default:ht(a,o,Ae,null,d,Z)}for(L in d)if(Z=d[L],re=l[L],d.hasOwnProperty(L)&&Z!==re&&(Z!=null||re!=null))switch(L){case"selected":a.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ht(a,o,L,Z,d,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in l)Z=l[ze],l.hasOwnProperty(ze)&&Z!=null&&!d.hasOwnProperty(ze)&&ht(a,o,ze,null,d,Z);for(W in d)if(Z=d[W],re=l[W],d.hasOwnProperty(W)&&Z!==re&&(Z!=null||re!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,o));break;default:ht(a,o,W,Z,d,re)}return;default:if(mh(o)){for(var pt in l)Z=l[pt],l.hasOwnProperty(pt)&&Z!==void 0&&!d.hasOwnProperty(pt)&&Jp(a,o,pt,void 0,d,Z);for(se in d)Z=d[se],re=l[se],!d.hasOwnProperty(se)||Z===re||Z===void 0&&re===void 0||Jp(a,o,se,Z,d,re);return}}for(var F in l)Z=l[F],l.hasOwnProperty(F)&&Z!=null&&!d.hasOwnProperty(F)&&ht(a,o,F,null,d,Z);for(de in d)Z=d[de],re=l[de],!d.hasOwnProperty(de)||Z===re||Z==null&&re==null||ht(a,o,de,Z,d,re)}function Vj(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function NR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var v=l[d],b=v.transferSize,E=v.initiatorType,N=v.duration;if(b&&N&&Vj(E)){for(E=0,N=v.responseEnd,d+=1;d<l.length;d++){var L=l[d],W=L.startTime;if(W>N)break;var se=L.transferSize,de=L.initiatorType;se&&Vj(de)&&(L=L.responseEnd,E+=se*(L<N?1:(N-W)/(L-W)))}if(--d,o+=8*(b+E)/(v.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var eg=null,tg=null;function md(a){return a.nodeType===9?a:a.ownerDocument}function Wj(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xj(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function rg(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ng=null;function kR(){var a=window.event;return a&&a.type==="popstate"?a===ng?!1:(ng=a,!0):(ng=null,!1)}var Zj=typeof setTimeout=="function"?setTimeout:void 0,DR=typeof clearTimeout=="function"?clearTimeout:void 0,Qj=typeof Promise=="function"?Promise:void 0,TR=typeof queueMicrotask=="function"?queueMicrotask:typeof Qj<"u"?function(a){return Qj.resolve(null).then(a).catch(PR)}:Zj;function PR(a){setTimeout(function(){throw a})}function Ti(a){return a==="head"}function Jj(a,o){var l=o,d=0;do{var v=l.nextSibling;if(a.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(d===0){a.removeChild(v),Ds(o);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Wl(a.ownerDocument.documentElement);else if(l==="head"){l=a.ownerDocument.head,Wl(l);for(var b=l.firstChild;b;){var E=b.nextSibling,N=b.nodeName;b[Zo]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=E}}else l==="body"&&Wl(a.ownerDocument.body);l=v}while(l);Ds(o)}function eS(a,o){var l=a;a=0;do{var d=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(a===0)break;a--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||a++;l=d}while(l)}function ag(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":ag(l),Qo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function MR(a,o,l,d){for(;a.nodeType===1;){var v=l;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Zo])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=Tn(a.nextSibling),a===null)break}return null}function RR(a,o,l){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=Tn(a.nextSibling),a===null))return null;return a}function tS(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=Tn(a.nextSibling),a===null))return null;return a}function ig(a){return a.data==="$?"||a.data==="$~"}function og(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function qR(a,o){var l=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||l.readyState!=="loading")o();else{var d=function(){o(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function Tn(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var sg=null;function rS(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="/$"||l==="/&"){if(o===0)return Tn(a.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}a=a.nextSibling}return null}function nS(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return a;o--}else l!=="/$"&&l!=="/&"||o++}a=a.previousSibling}return null}function aS(a,o,l){switch(o=md(l),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Wl(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Qo(a)}var Pn=new Map,iS=new Set;function hd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ua=U.d;U.d={f:LR,r:zR,D:IR,C:UR,L:BR,m:$R,X:FR,S:HR,M:KR};function LR(){var a=Ua.f(),o=id();return a||o}function zR(a){var o=hi(a);o!==null&&o.tag===5&&o.type==="form"?ww(o):Ua.r(a)}var As=typeof document>"u"?null:document;function oS(a,o,l){var d=As;if(d&&typeof o=="string"&&o){var v=En(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),iS.has(v)||(iS.add(v),a={rel:a,crossOrigin:l,href:o},d.querySelector(v)===null&&(o=d.createElement("link"),Cr(o,"link",a),ce(o),d.head.appendChild(o)))}}function IR(a){Ua.D(a),oS("dns-prefetch",a,null)}function UR(a,o){Ua.C(a,o),oS("preconnect",a,o)}function BR(a,o,l){Ua.L(a,o,l);var d=As;if(d&&a&&o){var v='link[rel="preload"][as="'+En(o)+'"]';o==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+En(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+En(l.imageSizes)+'"]')):v+='[href="'+En(a)+'"]';var b=v;switch(o){case"style":b=Ns(a);break;case"script":b=ks(a)}Pn.has(b)||(a=p({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:a,as:o},l),Pn.set(b,a),d.querySelector(v)!==null||o==="style"&&d.querySelector(Xl(b))||o==="script"&&d.querySelector(Zl(b))||(o=d.createElement("link"),Cr(o,"link",a),ce(o),d.head.appendChild(o)))}}function $R(a,o){Ua.m(a,o);var l=As;if(l&&a){var d=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+En(d)+'"][href="'+En(a)+'"]',b=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ks(a)}if(!Pn.has(b)&&(a=p({rel:"modulepreload",href:a},o),Pn.set(b,a),l.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Zl(b)))return}d=l.createElement("link"),Cr(d,"link",a),ce(d),l.head.appendChild(d)}}}function HR(a,o,l){Ua.S(a,o,l);var d=As;if(d&&a){var v=Y(d).hoistableStyles,b=Ns(a);o=o||"default";var E=v.get(b);if(!E){var N={loading:0,preload:null};if(E=d.querySelector(Xl(b)))N.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},l),(l=Pn.get(b))&&lg(a,l);var L=E=d.createElement("link");ce(L),Cr(L,"link",a),L._p=new Promise(function(W,se){L.onload=W,L.onerror=se}),L.addEventListener("load",function(){N.loading|=1}),L.addEventListener("error",function(){N.loading|=2}),N.loading|=4,pd(E,o,d)}E={type:"stylesheet",instance:E,count:1,state:N},v.set(b,E)}}}function FR(a,o){Ua.X(a,o);var l=As;if(l&&a){var d=Y(l).hoistableScripts,v=ks(a),b=d.get(v);b||(b=l.querySelector(Zl(v)),b||(a=p({src:a,async:!0},o),(o=Pn.get(v))&&cg(a,o),b=l.createElement("script"),ce(b),Cr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(v,b))}}function KR(a,o){Ua.M(a,o);var l=As;if(l&&a){var d=Y(l).hoistableScripts,v=ks(a),b=d.get(v);b||(b=l.querySelector(Zl(v)),b||(a=p({src:a,async:!0,type:"module"},o),(o=Pn.get(v))&&cg(a,o),b=l.createElement("script"),ce(b),Cr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(v,b))}}function sS(a,o,l,d){var v=(v=Ie.current)?hd(v):null;if(!v)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ns(l.href),l=Y(v).hoistableStyles,d=l.get(o),d||(d={type:"style",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=Ns(l.href);var b=Y(v).hoistableStyles,E=b.get(a);if(E||(v=v.ownerDocument||v,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,E),(b=v.querySelector(Xl(a)))&&!b._p&&(E.instance=b,E.state.loading=5),Pn.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Pn.set(a,l),b||YR(v,a,l,E.state))),o&&d===null)throw Error(n(528,""));return E}if(o&&d!==null)throw Error(n(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ks(l),l=Y(v).hoistableScripts,d=l.get(o),d||(d={type:"script",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Ns(a){return'href="'+En(a)+'"'}function Xl(a){return'link[rel="stylesheet"]['+a+"]"}function lS(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function YR(a,o,l,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Cr(o,"link",l),ce(o),a.head.appendChild(o))}function ks(a){return'[src="'+En(a)+'"]'}function Zl(a){return"script[async]"+a}function cS(a,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+En(l.href)+'"]');if(d)return o.instance=d,ce(d),d;var v=p({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),ce(d),Cr(d,"style",v),pd(d,l.precedence,a),o.instance=d;case"stylesheet":v=Ns(l.href);var b=a.querySelector(Xl(v));if(b)return o.state.loading|=4,o.instance=b,ce(b),b;d=lS(l),(v=Pn.get(v))&&lg(d,v),b=(a.ownerDocument||a).createElement("link"),ce(b);var E=b;return E._p=new Promise(function(N,L){E.onload=N,E.onerror=L}),Cr(b,"link",d),o.state.loading|=4,pd(b,l.precedence,a),o.instance=b;case"script":return b=ks(l.src),(v=a.querySelector(Zl(b)))?(o.instance=v,ce(v),v):(d=l,(v=Pn.get(b))&&(d=p({},l),cg(d,v)),a=a.ownerDocument||a,v=a.createElement("script"),ce(v),Cr(v,"link",d),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,pd(d,l.precedence,a));return o.instance}function pd(a,o,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,b=v,E=0;E<d.length;E++){var N=d[E];if(N.dataset.precedence===o)b=N;else if(b!==v)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(a,o.firstChild))}function lg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function cg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var gd=null;function uS(a,o,l){if(gd===null){var d=new Map,v=gd=new Map;v.set(l,d)}else v=gd,d=v.get(l),d||(d=new Map,v.set(l,d));if(d.has(a))return d;for(d.set(a,null),l=l.getElementsByTagName(a),v=0;v<l.length;v++){var b=l[v];if(!(b[Zo]||b[Bt]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(o)||"";E=a+E;var N=d.get(E);N?N.push(b):d.set(E,[b])}}return d}function dS(a,o,l){a=a.ownerDocument||a,a.head.insertBefore(l,o==="title"?a.querySelector("head > title"):null)}function GR(a,o,l){if(l===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function fS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function VR(a,o,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=Ns(d.href),b=o.querySelector(Xl(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=vd.bind(a),o.then(a,a)),l.state.loading|=4,l.instance=b,ce(b);return}b=o.ownerDocument||o,d=lS(d),(v=Pn.get(v))&&lg(d,v),b=b.createElement("link"),ce(b);var E=b;E._p=new Promise(function(N,L){E.onload=N,E.onerror=L}),Cr(b,"link",d),l.instance=b}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=vd.bind(a),o.addEventListener("load",l),o.addEventListener("error",l))}}var ug=0;function WR(a,o){return a.stylesheets&&a.count===0&&bd(a,a.stylesheets),0<a.count||0<a.imgCount?function(l){var d=setTimeout(function(){if(a.stylesheets&&bd(a,a.stylesheets),a.unsuspend){var b=a.unsuspend;a.unsuspend=null,b()}},6e4+o);0<a.imgBytes&&ug===0&&(ug=62500*NR());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&bd(a,a.stylesheets),a.unsuspend)){var b=a.unsuspend;a.unsuspend=null,b()}},(a.imgBytes>ug?50:800)+o);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function vd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var yd=null;function bd(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,yd=new Map,o.forEach(XR,a),yd=null,vd.call(a))}function XR(a,o){if(!(o.state.loading&4)){var l=yd.get(a);if(l)var d=l.get(null);else{l=new Map,yd.set(a,l);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var E=v[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),d=E)}d&&l.set(null,d)}v=o.instance,E=v.getAttribute("data-precedence"),b=l.get(E)||d,b===d&&l.set(null,v),l.set(E,v),this.count++,d=vd.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),b?b.parentNode.insertBefore(v,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var Ql={$$typeof:A,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function ZR(a,o,l,d,v,b,E,N,L){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fn(0),this.hiddenUpdates=Fn(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function mS(a,o,l,d,v,b,E,N,L,W,se,de){return a=new ZR(a,o,l,E,L,W,se,de,N),o=1,b===!0&&(o|=24),b=an(3,null,null,o),a.current=b,b.stateNode=a,o=Hh(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:o},Gh(b),a}function hS(a){return a?(a=ss,a):ss}function pS(a,o,l,d,v,b){v=hS(v),d.context===null?d.context=v:d.pendingContext=v,d=xi(o),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=wi(a,d,o),l!==null&&(Wr(l,a,o),kl(l,a,o))}function gS(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<o?l:o}}function dg(a,o){gS(a,o),(a=a.alternate)&&gS(a,o)}function vS(a){if(a.tag===13||a.tag===31){var o=so(a,67108864);o!==null&&Wr(o,a,67108864),dg(a,67108864)}}function yS(a){if(a.tag===13||a.tag===31){var o=un();o=dl(o);var l=so(a,o);l!==null&&Wr(l,a,o),dg(a,o)}}var _d=!0;function QR(a,o,l,d){var v=R.T;R.T=null;var b=U.p;try{U.p=2,fg(a,o,l,d)}finally{U.p=b,R.T=v}}function JR(a,o,l,d){var v=R.T;R.T=null;var b=U.p;try{U.p=8,fg(a,o,l,d)}finally{U.p=b,R.T=v}}function fg(a,o,l,d){if(_d){var v=mg(d);if(v===null)Qp(a,o,d,xd,l),_S(a,d);else if(tq(v,a,o,l,d))d.stopPropagation();else if(_S(a,d),o&4&&-1<eq.indexOf(a)){for(;v!==null;){var b=hi(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=jn(b.pendingLanes);if(E!==0){var N=b;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var L=1<<31-ft(E);N.entanglements[1]|=L,E&=~L}fa(b),(ot&6)===0&&(nd=Ye()+500,Yl(0))}}break;case 31:case 13:N=so(b,2),N!==null&&Wr(N,b,2),id(),dg(b,2)}if(b=mg(d),b===null&&Qp(a,o,d,xd,l),b===v)break;v=b}v!==null&&d.stopPropagation()}else Qp(a,o,d,null,l)}}function mg(a){return a=ph(a),hg(a)}var xd=null;function hg(a){if(xd=null,a=Yn(a),a!==null){var o=s(a);if(o===null)a=null;else{var l=o.tag;if(l===13){if(a=c(o),a!==null)return a;a=null}else if(l===31){if(a=u(o),a!==null)return a;a=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return xd=a,null}function bS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($r()){case xn:return 2;case Hr:return 8;case jr:case Yt:return 32;case he:return 268435456;default:return 32}default:return 32}}var pg=!1,Pi=null,Mi=null,Ri=null,Jl=new Map,ec=new Map,qi=[],eq="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _S(a,o){switch(a){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Mi=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Jl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ec.delete(o.pointerId)}}function tc(a,o,l,d,v,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[v]},o!==null&&(o=hi(o),o!==null&&vS(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function tq(a,o,l,d,v){switch(o){case"focusin":return Pi=tc(Pi,a,o,l,d,v),!0;case"dragenter":return Mi=tc(Mi,a,o,l,d,v),!0;case"mouseover":return Ri=tc(Ri,a,o,l,d,v),!0;case"pointerover":var b=v.pointerId;return Jl.set(b,tc(Jl.get(b)||null,a,o,l,d,v)),!0;case"gotpointercapture":return b=v.pointerId,ec.set(b,tc(ec.get(b)||null,a,o,l,d,v)),!0}return!1}function xS(a){var o=Yn(a.target);if(o!==null){var l=s(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){a.blockedOn=o,to(a.priority,function(){yS(l)});return}}else if(o===31){if(o=u(l),o!==null){a.blockedOn=o,to(a.priority,function(){yS(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function wd(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var l=mg(a.nativeEvent);if(l===null){l=a.nativeEvent;var d=new l.constructor(l.type,l);hh=d,l.target.dispatchEvent(d),hh=null}else return o=hi(l),o!==null&&vS(o),a.blockedOn=l,!1;o.shift()}return!0}function wS(a,o,l){wd(a)&&l.delete(o)}function rq(){pg=!1,Pi!==null&&wd(Pi)&&(Pi=null),Mi!==null&&wd(Mi)&&(Mi=null),Ri!==null&&wd(Ri)&&(Ri=null),Jl.forEach(wS),ec.forEach(wS)}function jd(a,o){a.blockedOn===o&&(a.blockedOn=null,pg||(pg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rq)))}var Sd=null;function jS(a){Sd!==a&&(Sd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Sd===a&&(Sd=null);for(var o=0;o<a.length;o+=3){var l=a[o],d=a[o+1],v=a[o+2];if(typeof d!="function"){if(hg(d||l)===null)continue;break}var b=hi(l);b!==null&&(a.splice(o,3),o-=3,mp(b,{pending:!0,data:v,method:l.method,action:d},d,v))}}))}function Ds(a){function o(L){return jd(L,a)}Pi!==null&&jd(Pi,a),Mi!==null&&jd(Mi,a),Ri!==null&&jd(Ri,a),Jl.forEach(o),ec.forEach(o);for(var l=0;l<qi.length;l++){var d=qi[l];d.blockedOn===a&&(d.blockedOn=null)}for(;0<qi.length&&(l=qi[0],l.blockedOn===null);)xS(l),l.blockedOn===null&&qi.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var v=l[d],b=l[d+1],E=v[sr]||null;if(typeof b=="function")E||jS(l);else if(E){var N=null;if(b&&b.hasAttribute("formAction")){if(v=b,E=b[sr]||null)N=E.formAction;else if(hg(v)!==null)continue}else N=E.action;typeof N=="function"?l[d+1]=N:(l.splice(d,3),d-=3),jS(l)}}}function SS(){function a(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(E){return v=E})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function gg(a){this._internalRoot=a}Ed.prototype.render=gg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var l=o.current,d=un();pS(l,d,a,o,null,null)},Ed.prototype.unmount=gg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;pS(a.current,2,null,a,null,null),id(),o[la]=null}};function Ed(a){this._internalRoot=a}Ed.prototype.unstable_scheduleHydration=function(a){if(a){var o=eo();a={blockedOn:null,target:a,priority:o};for(var l=0;l<qi.length&&o!==0&&o<qi[l].priority;l++);qi.splice(l,0,a),l===0&&xS(a)}};var ES=t.version;if(ES!=="19.2.0")throw Error(n(527,ES,"19.2.0"));U.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(o),a=a!==null?g(a):null,a=a===null?null:a.stateNode,a};var nq={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Od.isDisabled&&Od.supportsFiber)try{Qt=Od.inject(nq),Ut=Od}catch{}}return nc.createRoot=function(a,o){if(!i(a))throw Error(n(299));var l=!1,d="",v=Tw,b=Pw,E=Mw;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=mS(a,1,!1,null,null,l,d,null,v,b,E,SS),a[la]=o.current,Zp(a),new gg(o)},nc.hydrateRoot=function(a,o,l){if(!i(a))throw Error(n(299));var d=!1,v="",b=Tw,E=Pw,N=Mw,L=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),o=mS(a,1,!0,o,l??null,d,v,L,b,E,N,SS),o.context=hS(null),l=o.current,d=un(),d=dl(d),v=xi(d),v.callback=null,wi(l,v,d),l=d,o.current.lanes=l,ja(o,l),fa(o),a[la]=o.current,Zp(a),new Ed(o)},nc.version="19.2.0",nc}var PS;function Gq(){if(PS)return yg.exports;PS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),yg.exports=Yq(),yg.exports}var Vq=Gq();const Wq=ri(Vq);var MS="popstate";function RS(e){return typeof e=="object"&&e!=null&&"pathname"in e&&"search"in e&&"hash"in e&&"state"in e&&"key"in e}function Xq(e={}){function t(n,i){let s=i.state?.masked,{pathname:c,search:u,hash:m}=s||n.location;return yy("",{pathname:c,search:u,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default",s?{pathname:n.location.pathname,search:n.location.search,hash:n.location.hash}:void 0)}function r(n,i){return typeof i=="string"?i:jc(i)}return Qq(t,r,null,e)}function Tt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function In(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Zq(){return Math.random().toString(36).substring(2,10)}function qS(e,t){return{usr:e.state,key:e.key,idx:t,masked:e.unstable_mask?{pathname:e.pathname,search:e.search,hash:e.hash}:void 0}}function yy(e,t,r=null,n,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Xs(t):t,state:r,key:t&&t.key||n||Zq(),unstable_mask:i}}function jc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xs(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Qq(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,c=i.history,u="POP",m=null,h=g();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function g(){return(c.state||{idx:null}).idx}function p(){u="POP";let S=g(),O=S==null?null:S-h;h=S,m&&m({action:u,location:j.location,delta:O})}function _(S,O){u="PUSH";let C=RS(S)?S:yy(j.location,S,O);h=g()+1;let A=qS(C,h),k=j.createHref(C.unstable_mask||C);try{c.pushState(A,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(k)}s&&m&&m({action:u,location:j.location,delta:1})}function x(S,O){u="REPLACE";let C=RS(S)?S:yy(j.location,S,O);h=g();let A=qS(C,h),k=j.createHref(C.unstable_mask||C);c.replaceState(A,"",k),s&&m&&m({action:u,location:j.location,delta:0})}function w(S){return Jq(S)}let j={get action(){return u},get location(){return e(i,c)},listen(S){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(MS,p),m=S,()=>{i.removeEventListener(MS,p),m=null}},createHref(S){return t(i,S)},createURL:w,encodeLocation(S){let O=w(S);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:x,go(S){return c.go(S)}};return j}function Jq(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Tt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:jc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function mN(e,t,r="/"){return eL(e,t,r,!1)}function eL(e,t,r,n){let i=typeof t=="string"?Xs(t):t,s=Va(i.pathname||"/",r);if(s==null)return null;let c=hN(e);tL(c);let u=null;for(let m=0;u==null&&m<c.length;++m){let h=fL(s);u=uL(c[m],h,n)}return u}function hN(e,t=[],r=[],n="",i=!1){let s=(c,u,m=i,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&m)return;Tt(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let p=ga([n,g.relativePath]),_=r.concat(g);c.children&&c.children.length>0&&(Tt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),hN(c.children,t,_,p,m)),!(c.path==null&&!c.index)&&t.push({path:p,score:lL(p,c.index),routesMeta:_})};return e.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))s(c,u);else for(let m of pN(c.path))s(c,u,!0,m)}),t}function pN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let c=pN(n.join("/")),u=[];return u.push(...c.map(m=>m===""?s:[s,m].join("/"))),i&&u.push(...c),u.map(m=>e.startsWith("/")&&m===""?"/":m)}function tL(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:cL(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var rL=/^:[\w-]+$/,nL=3,aL=2,iL=1,oL=10,sL=-2,LS=e=>e==="*";function lL(e,t){let r=e.split("/"),n=r.length;return r.some(LS)&&(n+=sL),t&&(n+=aL),r.filter(i=>!LS(i)).reduce((i,s)=>i+(rL.test(s)?nL:s===""?iL:oL),n)}function cL(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function uL(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",c=[];for(let u=0;u<n.length;++u){let m=n[u],h=u===n.length-1,g=s==="/"?t:t.slice(s.length)||"/",p=pf({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},g),_=m.route;if(!p&&h&&r&&!n[n.length-1].route.index&&(p=pf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},g)),!p)return null;Object.assign(i,p.params),c.push({params:i,pathname:ga([s,p.pathname]),pathnameBase:gL(ga([s,p.pathnameBase])),route:_}),p.pathnameBase!=="/"&&(s=ga([s,p.pathnameBase]))}return c}function pf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=dL(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],c=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((h,{paramName:g,isOptional:p},_)=>{if(g==="*"){let w=u[_]||"";c=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[_];return p&&!x?h[g]=void 0:h[g]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:c,pattern:e}}function dL(e,t=!1,r=!0){In(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,m,h,g)=>{if(n.push({paramName:u,isOptional:m!=null}),m){let p=g.charAt(h+c.length);return p&&p!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function fL(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return In(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Va(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var mL=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function hL(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Xs(e):e,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=zS(r.substring(1),"/"):s=zS(r,t)):s=t,{pathname:s,search:vL(n),hash:yL(i)}}function zS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function xg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pL(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Db(e){let t=pL(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function fm(e,t,r,n=!1){let i;typeof e=="string"?i=Xs(e):(i={...e},Tt(!i.pathname||!i.pathname.includes("?"),xg("?","pathname","search",i)),Tt(!i.pathname||!i.pathname.includes("#"),xg("#","pathname","hash",i)),Tt(!i.search||!i.search.includes("#"),xg("#","search","hash",i)));let s=e===""||i.pathname==="",c=s?"/":i.pathname,u;if(c==null)u=r;else{let p=t.length-1;if(!n&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),p-=1;i.pathname=_.join("/")}u=p>=0?t[p]:"/"}let m=hL(i,u),h=c&&c!=="/"&&c.endsWith("/"),g=(s||c===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(h||g)&&(m.pathname+="/"),m}var ga=e=>e.join("/").replace(/\/\/+/g,"/"),gL=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vL=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yL=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,bL=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function _L(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function xL(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var gN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vN(e,t){let r=e;if(typeof r!="string"||!mL.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(gN)try{let s=new URL(window.location.href),c=r.startsWith("//")?new URL(s.protocol+r):new URL(r),u=Va(c.pathname,t);c.origin===s.origin&&u!=null?r=u+c.search+c.hash:i=!0}catch{In(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yN=["POST","PUT","PATCH","DELETE"];new Set(yN);var wL=["GET",...yN];new Set(wL);var Zs=y.createContext(null);Zs.displayName="DataRouter";var mm=y.createContext(null);mm.displayName="DataRouterState";var jL=y.createContext(!1),bN=y.createContext({isTransitioning:!1});bN.displayName="ViewTransition";var SL=y.createContext(new Map);SL.displayName="Fetchers";var EL=y.createContext(null);EL.displayName="Await";var _n=y.createContext(null);_n.displayName="Navigation";var Bc=y.createContext(null);Bc.displayName="Location";var aa=y.createContext({outlet:null,matches:[],isDataRoute:!1});aa.displayName="Route";var Tb=y.createContext(null);Tb.displayName="RouteError";var _N="REACT_ROUTER_ERROR",OL="REDIRECT",CL="ROUTE_ERROR_RESPONSE";function AL(e){if(e.startsWith(`${_N}:${OL}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function NL(e){if(e.startsWith(`${_N}:${CL}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new bL(t.status,t.statusText,t.data)}catch{}}function kL(e,{relative:t}={}){Tt(Qs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(_n),{hash:i,pathname:s,search:c}=$c(e,{relative:t}),u=s;return r!=="/"&&(u=s==="/"?r:ga([r,s])),n.createHref({pathname:u,search:c,hash:i})}function Qs(){return y.useContext(Bc)!=null}function ia(){return Tt(Qs(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Bc).location}var xN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wN(e){y.useContext(_n).static||y.useLayoutEffect(e)}function hm(){let{isDataRoute:e}=y.useContext(aa);return e?HL():DL()}function DL(){Tt(Qs(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(Zs),{basename:t,navigator:r}=y.useContext(_n),{matches:n}=y.useContext(aa),{pathname:i}=ia(),s=JSON.stringify(Db(n)),c=y.useRef(!1);return wN(()=>{c.current=!0}),y.useCallback((m,h={})=>{if(In(c.current,xN),!c.current)return;if(typeof m=="number"){r.go(m);return}let g=fm(m,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:ga([t,g.pathname])),(h.replace?r.replace:r.push)(g,h.state,h)},[t,r,s,i,e])}y.createContext(null);function jN(){let{matches:e}=y.useContext(aa),t=e[e.length-1];return t?t.params:{}}function $c(e,{relative:t}={}){let{matches:r}=y.useContext(aa),{pathname:n}=ia(),i=JSON.stringify(Db(r));return y.useMemo(()=>fm(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function TL(e,t){return SN(e,t)}function SN(e,t,r){Tt(Qs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=y.useContext(_n),{matches:i}=y.useContext(aa),s=i[i.length-1],c=s?s.params:{},u=s?s.pathname:"/",m=s?s.pathnameBase:"/",h=s&&s.route;{let S=h&&h.path||"";ON(u,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let g=ia(),p;if(t){let S=typeof t=="string"?Xs(t):t;Tt(m==="/"||S.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),p=S}else p=g;let _=p.pathname||"/",x=_;if(m!=="/"){let S=m.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=mN(e,{pathname:x});In(h||w!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),In(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=LL(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:ga([m,n.encodeLocation?n.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:ga([m,n.encodeLocation?n.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),i,r);return t&&j?y.createElement(Bc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0,...p},navigationType:"POP"}},j):j}function PL(){let e=$L(),t=_L(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:i},r):null,c)}var ML=y.createElement(PL,null),EN=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=NL(e.digest);r&&(e=r)}let t=e!==void 0?y.createElement(aa.Provider,{value:this.props.routeContext},y.createElement(Tb.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?y.createElement(RL,{error:e},t):t}};EN.contextType=jL;var wg=new WeakMap;function RL({children:e,error:t}){let{basename:r}=y.useContext(_n);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=AL(t.digest);if(n){let i=wg.get(t);if(i)throw i;let s=vN(n.location,r);if(gN&&!wg.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw wg.set(t,c),c}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function qL({routeContext:e,match:t,children:r}){let n=y.useContext(Zs);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(aa.Provider,{value:e},r)}function LL(e,t=[],r){let n=r?.state;if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n?.errors;if(s!=null){let g=i.findIndex(p=>p.route.id&&s?.[p.route.id]!==void 0);Tt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,g+1))}let c=!1,u=-1;if(r&&n){c=n.renderFallback;for(let g=0;g<i.length;g++){let p=i[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=g),p.route.id){let{loaderData:_,errors:x}=n,w=p.route.loader&&!_.hasOwnProperty(p.route.id)&&(!x||x[p.route.id]===void 0);if(p.route.lazy||w){r.isStatic&&(c=!0),u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}}let m=r?.onError,h=n&&m?(g,p)=>{m(g,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:xL(n.matches),errorInfo:p})}:void 0;return i.reduceRight((g,p,_)=>{let x,w=!1,j=null,S=null;n&&(x=s&&p.route.id?s[p.route.id]:void 0,j=p.route.errorElement||ML,c&&(u<0&&_===0?(ON("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===_&&(w=!0,S=p.route.hydrateFallbackElement||null)));let O=t.concat(i.slice(0,_+1)),C=()=>{let A;return x?A=j:w?A=S:p.route.Component?A=y.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=g,y.createElement(qL,{match:p,routeContext:{outlet:g,matches:O,isDataRoute:n!=null},children:A})};return n&&(p.route.ErrorBoundary||p.route.errorElement||_===0)?y.createElement(EN,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:C(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:h}):C()},null)}function Pb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zL(e){let t=y.useContext(Zs);return Tt(t,Pb(e)),t}function IL(e){let t=y.useContext(mm);return Tt(t,Pb(e)),t}function UL(e){let t=y.useContext(aa);return Tt(t,Pb(e)),t}function Mb(e){let t=UL(e),r=t.matches[t.matches.length-1];return Tt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function BL(){return Mb("useRouteId")}function $L(){let e=y.useContext(Tb),t=IL("useRouteError"),r=Mb("useRouteError");return e!==void 0?e:t.errors?.[r]}function HL(){let{router:e}=zL("useNavigate"),t=Mb("useNavigate"),r=y.useRef(!1);return wN(()=>{r.current=!0}),y.useCallback(async(i,s={})=>{In(r.current,xN),r.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var IS={};function ON(e,t,r){!t&&!IS[e]&&(IS[e]=!0,In(!1,r))}y.memo(FL);function FL({routes:e,future:t,state:r,isStatic:n,onError:i}){return SN(e,void 0,{state:r,isStatic:n,onError:i})}function xo({to:e,replace:t,state:r,relative:n}){Tt(Qs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(_n);In(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=y.useContext(aa),{pathname:c}=ia(),u=hm(),m=fm(e,Db(s),c,n==="path"),h=JSON.stringify(m);return y.useEffect(()=>{u(JSON.parse(h),{replace:t,state:r,relative:n})},[u,h,n,t,r]),null}function mn(e){Tt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KL({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:c}){Tt(!Qs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),m=y.useMemo(()=>({basename:u,navigator:i,static:s,unstable_useTransitions:c,future:{}}),[u,i,s,c]);typeof r=="string"&&(r=Xs(r));let{pathname:h="/",search:g="",hash:p="",state:_=null,key:x="default",unstable_mask:w}=r,j=y.useMemo(()=>{let S=Va(h,u);return S==null?null:{location:{pathname:S,search:g,hash:p,state:_,key:x,unstable_mask:w},navigationType:n}},[u,h,g,p,_,x,n,w]);return In(j!=null,`<Router basename="${u}"> is not able to match the URL "${h}${g}${p}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:y.createElement(_n.Provider,{value:m},y.createElement(Bc.Provider,{children:t,value:j}))}function YL({children:e,location:t}){return TL(by(e),t)}function by(e,t=[]){let r=[];return y.Children.forEach(e,(n,i)=>{if(!y.isValidElement(n))return;let s=[...t,i];if(n.type===y.Fragment){r.push.apply(r,by(n.props.children,s));return}Tt(n.type===mn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=by(n.props.children,s)),r.push(c)}),r}var ef="get",tf="application/x-www-form-urlencoded";function pm(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function GL(e){return pm(e)&&e.tagName.toLowerCase()==="button"}function VL(e){return pm(e)&&e.tagName.toLowerCase()==="form"}function WL(e){return pm(e)&&e.tagName.toLowerCase()==="input"}function XL(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ZL(e,t){return e.button===0&&(!t||t==="_self")&&!XL(e)}function _y(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(i=>[r,i]):[[r,n]])},[]))}function QL(e,t){let r=_y(e);return t&&t.forEach((n,i)=>{r.has(i)||t.getAll(i).forEach(s=>{r.append(i,s)})}),r}var Cd=null;function JL(){if(Cd===null)try{new FormData(document.createElement("form"),0),Cd=!1}catch{Cd=!0}return Cd}var ez=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jg(e){return e!=null&&!ez.has(e)?(In(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tf}"`),null):e}function tz(e,t){let r,n,i,s,c;if(VL(e)){let u=e.getAttribute("action");n=u?Va(u,t):null,r=e.getAttribute("method")||ef,i=jg(e.getAttribute("enctype"))||tf,s=new FormData(e)}else if(GL(e)||WL(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||u.getAttribute("action");if(n=m?Va(m,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||ef,i=jg(e.getAttribute("formenctype"))||jg(u.getAttribute("enctype"))||tf,s=new FormData(u,e),!JL()){let{name:h,type:g,value:p}=e;if(g==="image"){let _=h?`${h}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else h&&s.append(h,p)}}else{if(pm(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ef,n=null,i=tf,c=e}return s&&i==="text/plain"&&(c=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Rb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function rz(e,t,r,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:t&&Va(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function nz(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function az(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function iz(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let c=await nz(s,r);return c.links?c.links():[]}return[]}));return cz(n.flat(1).filter(az).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function US(e,t,r,n,i,s){let c=(m,h)=>r[h]?m.route.id!==r[h].route.id:!0,u=(m,h)=>r[h].pathname!==m.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==m.params["*"];return s==="assets"?t.filter((m,h)=>c(m,h)||u(m,h)):s==="data"?t.filter((m,h)=>{let g=n.routes[m.route.id];if(!g||!g.hasLoader)return!1;if(c(m,h)||u(m,h))return!0;if(m.route.shouldRevalidate){let p=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function oz(e,t,{includeHydrateFallback:r}={}){return sz(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function sz(e){return[...new Set(e)]}function lz(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function cz(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(lz(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function CN(){let e=y.useContext(Zs);return Rb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function uz(){let e=y.useContext(mm);return Rb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var qb=y.createContext(void 0);qb.displayName="FrameworkContext";function AN(){let e=y.useContext(qb);return Rb(e,"You must render this element inside a <HydratedRouter> element"),e}function dz(e,t){let r=y.useContext(qb),[n,i]=y.useState(!1),[s,c]=y.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:h,onMouseLeave:g,onTouchStart:p}=t,_=y.useRef(null);y.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let j=O=>{O.forEach(C=>{c(C.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[e]),y.useEffect(()=>{if(n){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{i(!0)},w=()=>{i(!1),c(!1)};return r?e!=="intent"?[s,_,{}]:[s,_,{onFocus:ac(u,x),onBlur:ac(m,w),onMouseEnter:ac(h,x),onMouseLeave:ac(g,w),onTouchStart:ac(p,x)}]:[!1,_,{}]}function ac(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function fz({page:e,...t}){let{router:r}=CN(),n=y.useMemo(()=>mN(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(hz,{page:e,matches:n,...t}):null}function mz(e){let{manifest:t,routeModules:r}=AN(),[n,i]=y.useState([]);return y.useEffect(()=>{let s=!1;return iz(e,t,r).then(c=>{s||i(c)}),()=>{s=!0}},[e,t,r]),n}function hz({page:e,matches:t,...r}){let n=ia(),{future:i,manifest:s,routeModules:c}=AN(),{basename:u}=CN(),{loaderData:m,matches:h}=uz(),g=y.useMemo(()=>US(e,t,h,s,n,"data"),[e,t,h,s,n]),p=y.useMemo(()=>US(e,t,h,s,n,"assets"),[e,t,h,s,n]),_=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,S=!1;if(t.forEach(C=>{let A=s.routes[C.route.id];!A||!A.hasLoader||(!g.some(k=>k.route.id===C.route.id)&&C.route.id in m&&c[C.route.id]?.shouldRevalidate||A.hasClientLoader?S=!0:j.add(C.route.id))}),j.size===0)return[];let O=rz(e,u,i.unstable_trailingSlashAwareDataRequests,"data");return S&&j.size>0&&O.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[O.pathname+O.search]},[u,i.unstable_trailingSlashAwareDataRequests,m,n,s,g,t,e,c]),x=y.useMemo(()=>oz(p,s),[p,s]),w=mz(p);return y.createElement(y.Fragment,null,_.map(j=>y.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>y.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),w.map(({key:j,link:S})=>y.createElement("link",{key:j,nonce:r.nonce,...S,crossOrigin:S.crossOrigin??r.crossOrigin})))}function pz(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var gz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gz&&(window.__reactRouterVersion="7.13.1")}catch{}function vz({basename:e,children:t,unstable_useTransitions:r,window:n}){let i=y.useRef();i.current==null&&(i.current=Xq({window:n,v5Compat:!0}));let s=i.current,[c,u]=y.useState({action:s.action,location:s.location}),m=y.useCallback(h=>{r===!1?u(h):y.startTransition(()=>u(h))},[r]);return y.useLayoutEffect(()=>s.listen(m),[s,m]),y.createElement(KL,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:s,unstable_useTransitions:r})}var NN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kN=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:c,unstable_mask:u,state:m,target:h,to:g,preventScrollReset:p,viewTransition:_,unstable_defaultShouldRevalidate:x,...w},j){let{basename:S,navigator:O,unstable_useTransitions:C}=y.useContext(_n),A=typeof g=="string"&&NN.test(g),k=vN(g,S);g=k.to;let D=kL(g,{relative:i}),M=ia(),z=null;if(u){let q=fm(u,[],M.unstable_mask?M.unstable_mask.pathname:"/",!0);S!=="/"&&(q.pathname=q.pathname==="/"?S:ga([S,q.pathname])),z=O.createHref(q)}let[K,Q,ne]=dz(n,w),G=xz(g,{replace:c,unstable_mask:u,state:m,target:h,preventScrollReset:p,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:x,unstable_useTransitions:C});function I(q){t&&t(q),q.defaultPrevented||G(q)}let ie=!(k.isExternal||s),pe=y.createElement("a",{...w,...ne,href:(ie?z:void 0)||k.absoluteURL||D,onClick:ie?I:t,ref:pz(j,Q),target:h,"data-discover":!A&&r==="render"?"true":void 0});return K&&!A?y.createElement(y.Fragment,null,pe,y.createElement(fz,{page:D})):pe});kN.displayName="Link";var yz=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:c,viewTransition:u,children:m,...h},g){let p=$c(c,{relative:h.relative}),_=ia(),x=y.useContext(mm),{navigator:w,basename:j}=y.useContext(_n),S=x!=null&&Cz(p)&&u===!0,O=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,C=_.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),A=A?A.toLowerCase():null,O=O.toLowerCase()),A&&j&&(A=Va(A,j)||A);const k=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let D=C===O||!i&&C.startsWith(O)&&C.charAt(k)==="/",M=A!=null&&(A===O||!i&&A.startsWith(O)&&A.charAt(O.length)==="/"),z={isActive:D,isPending:M,isTransitioning:S},K=D?t:void 0,Q;typeof n=="function"?Q=n(z):Q=[n,D?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ne=typeof s=="function"?s(z):s;return y.createElement(kN,{...h,"aria-current":K,className:Q,ref:g,style:ne,to:c,viewTransition:u},typeof m=="function"?m(z):m)});yz.displayName="NavLink";var bz=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:c=ef,action:u,onSubmit:m,relative:h,preventScrollReset:g,viewTransition:p,unstable_defaultShouldRevalidate:_,...x},w)=>{let{unstable_useTransitions:j}=y.useContext(_n),S=Ez(),O=Oz(u,{relative:h}),C=c.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&NN.test(u),k=D=>{if(m&&m(D),D.defaultPrevented)return;D.preventDefault();let M=D.nativeEvent.submitter,z=M?.getAttribute("formmethod")||c,K=()=>S(M||D.currentTarget,{fetcherKey:t,method:z,navigate:r,replace:i,state:s,relative:h,preventScrollReset:g,viewTransition:p,unstable_defaultShouldRevalidate:_});j&&r!==!1?y.startTransition(()=>K()):K()};return y.createElement("form",{ref:w,method:C,action:O,onSubmit:n?m:k,...x,"data-discover":!A&&e==="render"?"true":void 0})});bz.displayName="Form";function _z(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DN(e){let t=y.useContext(Zs);return Tt(t,_z(e)),t}function xz(e,{target:t,replace:r,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m,unstable_useTransitions:h}={}){let g=hm(),p=ia(),_=$c(e,{relative:c});return y.useCallback(x=>{if(ZL(x,t)){x.preventDefault();let w=r!==void 0?r:jc(p)===jc(_),j=()=>g(e,{replace:w,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m});h?y.startTransition(()=>j()):j()}},[p,g,_,r,n,i,t,e,s,c,u,m,h])}function wz(e){In(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=y.useRef(_y(e)),r=y.useRef(!1),n=ia(),i=y.useMemo(()=>QL(n.search,r.current?null:t.current),[n.search]),s=hm(),c=y.useCallback((u,m)=>{const h=_y(typeof u=="function"?u(new URLSearchParams(i)):u);r.current=!0,s("?"+h,m)},[s,i]);return[i,c]}var jz=0,Sz=()=>`__${String(++jz)}__`;function Ez(){let{router:e}=DN("useSubmit"),{basename:t}=y.useContext(_n),r=BL(),n=e.fetch,i=e.navigate;return y.useCallback(async(s,c={})=>{let{action:u,method:m,encType:h,formData:g,body:p}=tz(s,t);if(c.navigate===!1){let _=c.fetcherKey||Sz();await n(_,r,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||m,formEncType:c.encType||h,flushSync:c.flushSync})}else await i(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:p,formMethod:c.method||m,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,i,t,r])}function Oz(e,{relative:t}={}){let{basename:r}=y.useContext(_n),n=y.useContext(aa);Tt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...$c(e||".",{relative:t})},c=ia();if(e==null){s.search=c.search;let u=new URLSearchParams(s.search),m=u.getAll("index");if(m.some(g=>g==="")){u.delete("index"),m.filter(p=>p).forEach(p=>u.append("index",p));let g=u.toString();s.search=g?`?${g}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:ga([r,s.pathname])),jc(s)}function Cz(e,{relative:t}={}){let r=y.useContext(bN);Tt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=DN("useViewTransitionState"),i=$c(e,{relative:t});if(!r.isTransitioning)return!1;let s=Va(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=Va(r.nextLocation.pathname,n)||r.nextLocation.pathname;return pf(i.pathname,c)!=null||pf(i.pathname,s)!=null}var TN=dN();function Az(e,t,r=[]){if(!e||!t)return{hasConflict:!1,conflicts:[]};const n=new Date(e._offlineModifiedAt||e.updated_at||0),i=new Date(t.updated_at||0),s=new Date(e._cachedAt||0);if(i<=s)return{hasConflict:!1,conflicts:[]};const c=[],u=r.length>0?r:Object.keys(e).filter(m=>!m.startsWith("_")&&m!=="id"&&m!=="created_at");for(const m of u){const h=e[m],g=t[m];if(h!==void 0&&g!==void 0&&!rf(h,g)){const p=e._cachedValues?.[m],_=p!==void 0?!rf(h,p):!0,x=p!==void 0?!rf(g,p):!0;_&&x&&c.push({field:m,localValue:h,serverValue:g,cachedValue:p})}}return{hasConflict:c.length>0,conflicts:c,localModifiedAt:n,serverUpdatedAt:i}}function rf(e,t){if(e===t)return!0;if(e==null||t==null)return e===t;if(typeof e!=typeof t)return!1;if(typeof e!="object")return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;const r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(i=>rf(e[i],t[i]))}const Nz={KEEP_LOCAL:"keep_local",KEEP_SERVER:"keep_server",MERGE:"merge"};function kz(e,t=[]){const r={...e,_cachedAt:new Date().toISOString()};if(t.length>0){r._cachedValues={};for(const n of t)e[n]!==void 0&&(r._cachedValues[n]=JSON.parse(JSON.stringify(e[n])))}return r}function Dz(e,t="record"){if(!e.hasConflict)return null;if(e.deletedOnServer)return{title:`${BS(t)} was deleted`,description:`This ${t} was deleted by another user while you were offline.`,severity:"warning",conflictCount:1};const r=e.conflicts.map(n=>n.field).join(", ");return{title:`${BS(t)} was modified`,description:`The following fields were changed by another user: ${r}`,severity:e.conflicts.length>2?"warning":"info",conflictCount:e.conflicts.length,fields:e.conflicts}}function BS(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Tz="fieldsync-offline",Pz=2,tt={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let Eo=null;const ni=()=>new Promise((e,t)=>{if(Eo){e(Eo);return}const r=indexedDB.open(Tz,Pz);r.onerror=()=>{console.error("Failed to open offline database"),t(r.error)},r.onsuccess=()=>{Eo=r.result,e(Eo)},r.onupgradeneeded=n=>{const i=n.target.result;if(i.objectStoreNames.contains(tt.PROJECTS)||i.createObjectStore(tt.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),i.objectStoreNames.contains(tt.AREAS)||i.createObjectStore(tt.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.CREW_CHECKINS)||i.createObjectStore(tt.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.TM_TICKETS)||i.createObjectStore(tt.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.DAILY_REPORTS)||i.createObjectStore(tt.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.MESSAGES)||i.createObjectStore(tt.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!i.objectStoreNames.contains(tt.PENDING_ACTIONS)){const s=i.createObjectStore(tt.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});s.createIndex("type","type",{unique:!1}),s.createIndex("created_at","created_at",{unique:!1})}i.objectStoreNames.contains(tt.CACHED_DATA)||i.createObjectStore(tt.CACHED_DATA,{keyPath:"key"})}}),Ko=(e,t="readonly")=>{if(!Eo)throw new Error("Database not initialized");return Eo.transaction(e,t).objectStore(e)},Hc=async(e,t)=>(await ni(),new Promise((r,n)=>{const s=Ko(e,"readwrite").put(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),PN=async(e,t)=>(await ni(),new Promise((r,n)=>{const i=Eo.transaction(e,"readwrite"),s=i.objectStore(e);t.forEach(c=>s.put(c)),i.oncomplete=()=>r(),i.onerror=()=>n(i.error)})),MN=async(e,t)=>(await ni(),new Promise((r,n)=>{const s=Ko(e).get(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),RN=async e=>(await ni(),new Promise((t,r)=>{const i=Ko(e).getAll();i.onsuccess=()=>t(i.result||[]),i.onerror=()=>r(i.error)})),Lb=async(e,t,r)=>(await ni(),new Promise((n,i)=>{const u=Ko(e).index(t).getAll(r);u.onsuccess=()=>n(u.result||[]),u.onerror=()=>i(u.error)})),Mz=async(e,t)=>(await ni(),new Promise((r,n)=>{const s=Ko(e,"readwrite").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})),Zt={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},dn=async(e,t,r={})=>{await ni();const n={type:e,payload:t,metadata:r,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((i,s)=>{const u=Ko(tt.PENDING_ACTIONS,"readwrite").add(n);u.onsuccess=()=>{i(u.result)},u.onerror=()=>s(u.error)})},qN=async()=>RN(tt.PENDING_ACTIONS),nf=async()=>(await qN()).length,$S=async e=>Mz(tt.PENDING_ACTIONS,e),Rz=async(e,t)=>(await ni(),new Promise((r,n)=>{const i=Ko(tt.PENDING_ACTIONS,"readwrite"),s=i.get(e);s.onsuccess=()=>{const c=s.result;if(c){const u={...c,...t},m=i.put(u);m.onsuccess=()=>r(u),m.onerror=()=>n(m.error)}else n(new Error("Action not found"))},s.onerror=()=>n(s.error)})),qz=async e=>PN(tt.PROJECTS,e),HS=async e=>e?Lb(tt.PROJECTS,"company_id",e):RN(tt.PROJECTS),Lz=async e=>{const t=e.map(r=>kz(r,["status","weight","name"]));return PN(tt.AREAS,t)},FS=async e=>Lb(tt.AREAS,"project_id",e),Sg=async(e,t)=>{const r=await MN(tt.AREAS,e);return r&&(r.status=t,r.updated_at=new Date().toISOString(),r._offlineModifiedAt=new Date().toISOString(),await Hc(tt.AREAS,r)),r},Ad=async e=>Hc(tt.CREW_CHECKINS,e),KS=async e=>Hc(tt.TM_TICKETS,e),Xr=()=>{const e=new Uint8Array(6);crypto.getRandomValues(e);const t=Array.from(e,r=>r.toString(36)).join("");return`temp_${Date.now()}_${t}`},Ts=async e=>Hc(tt.DAILY_REPORTS,e),zz=async(e,t)=>(await Lb(tt.DAILY_REPORTS,"project_id",e)).find(n=>n.report_date===t)||null,YS=async e=>Hc(tt.MESSAGES,e);let zb=typeof navigator<"u"?navigator.onLine:!0;const xy=new Set,Ib=e=>(xy.add(e),()=>xy.delete(e)),Ln=()=>zb,GS=e=>{zb=e,xy.forEach(t=>t(e))};typeof window<"u"&&(window.addEventListener("online",()=>{GS(!0)}),window.addEventListener("offline",()=>{GS(!1)}));let Eg=!1;const LN=async(e,t={})=>{if(Eg||!zb)return{synced:0,failed:0,conflicts:[]};const{onConflict:r}=t;Eg=!0;const n={synced:0,failed:0,conflicts:[]};try{const i=await qN();for(const s of i)try{if(s.payload?.id&&s.type===Zt.UPDATE_AREA_STATUS){const c=await Iz(e,s.type,s.payload);if(c){const u=await MN(tt.AREAS,s.payload.areaId||s.payload.id);if(u){const m=Az(u,c,["status"]);if(m.hasConflict){const h=Dz(m,"area");if(n.conflicts.push({action:s,conflict:m,summary:h}),r&&await r({action:s,conflict:m,summary:h})===Nz.KEEP_SERVER){await $S(s.id);continue}}}}}await Uz(s,e),await $S(s.id),n.synced++}catch(c){n.failed++,await Rz(s.id,{attempts:(s.attempts||0)+1,last_error:c.message,last_attempt:new Date().toISOString()})}}finally{Eg=!1}return n},Iz=async(e,t,r)=>{try{switch(t){case Zt.UPDATE_AREA_STATUS:return e.getArea?await e.getArea(r.areaId):null;default:return null}}catch{return null}},Uz=async(e,t)=>{const{type:r,payload:n}=e;switch(r){case Zt.UPDATE_AREA_STATUS:return t.updateAreaStatus(n.areaId,n.status);case Zt.CREATE_TM_TICKET:{const i=await t.createTMTicket(n.ticket);return n.workers?.length>0&&await t.addTMWorkers(i.id,n.workers),n.items?.length>0&&await t.addTMItems(i.id,n.items),i}case Zt.SAVE_CREW_CHECKIN:return t.saveCrewCheckin(n.projectId,n.workers,n.checkInDate);case Zt.SUBMIT_DAILY_REPORT:return await t.saveDailyReport(n.projectId,n.reportData),t.submitDailyReport(n.projectId,n.submittedBy);case Zt.SEND_MESSAGE:return t.sendMessage(n.projectId,n.senderType,n.senderName,n.content);case Zt.CREATE_MATERIAL_REQUEST:return t.createMaterialRequest(n.projectId,n.items,n.requestedBy,n.neededBy,n.priority,n.notes);default:throw new Error(`Unknown action type: ${r}`)}},Ub="",zN="",P=!!Ub,T=P?fN(Ub,zN):null,Nd={slowQueryThreshold:200,enableSupabase:P},Ke={query(e,t){const r={type:"query",operation:e,duration_ms:t.duration,rows_returned:t.rows,company_id:t.company_id||null,project_id:t.project_id||null,user_id:t.user_id||null,timestamp:new Date().toISOString()};Nd.enableSupabase&&t.duration>=Nd.slowQueryThreshold&&Og("query",r)},error(e,t){const r={type:"error",category:e,severity:t.severity||"error",error_code:t.code||null,message:t.message,company_id:t.company_id||null,user_id:t.user_id||null,project_id:t.project_id||null,operation:t.operation||null,context:t.extra||{},timestamp:new Date().toISOString()};Nd.enableSupabase&&Og("error",r)},storage(e,t){const r={type:"storage",operation:e,company_id:t.company_id||null,project_id:t.project_id||null,file_size_bytes:t.size||0,duration_ms:t.duration||0,success:t.success!==!1,error_message:t.error||null,timestamp:new Date().toISOString()};Nd.enableSupabase&&(!r.success||r.duration_ms>5e3)&&Og("storage",r)},activity(e,t){}};async function Og(e,t){if(T)try{e==="error"?await T.rpc("log_error",{p_severity:t.severity,p_category:t.category,p_message:t.message,p_company_id:t.company_id,p_user_id:t.user_id,p_project_id:t.project_id,p_operation:t.operation,p_error_code:t.error_code,p_context:t.context||{}}):e==="query"&&await T.rpc("log_query_metric",{p_operation:t.operation,p_duration_ms:t.duration_ms,p_rows_returned:t.rows_returned,p_company_id:t.company_id,p_project_id:t.project_id,p_user_id:t.user_id,p_context:{}})}catch{}}Ke.wrapQuery=function(e,t){return async function(...r){const n=performance.now();try{const i=await t.apply(this,r),c={duration:Math.round(performance.now()-n),rows:Array.isArray(i)?i.length:void 0};return Ke.query(e,c),i}catch(i){const s=Math.round(performance.now()-n);throw Ke.error("database",{message:i.message,operation:e,severity:"error",extra:{duration:s}}),i}}};Ke.time=async function(e,t){const r=performance.now();try{const n=await t(),i=Math.round(performance.now()-r);return Ke.query(e,{duration:i}),n}catch(n){throw Ke.error("general",{message:n.message,operation:e}),n}};const wy="fieldsync_field_session";let vc=null;const Fc=()=>{if(vc)return vc;try{const e=sessionStorage.getItem(wy);if(e)return vc=JSON.parse(e),vc}catch{}return null},af=e=>{vc=e,e?sessionStorage.setItem(wy,JSON.stringify(e)):sessionStorage.removeItem(wy)},jy=async()=>{const e=Fc();if(e?.token&&P)try{await T.rpc("invalidate_field_session",{p_session_token:e.token})}catch{}af(null)};let ic=null;const Bb=()=>{const e=Fc();return!e?.token||!P?T:((!ic||ic._sessionToken!==e.token)&&(ic=fN(Ub,zN,{global:{headers:{"x-field-session":e.token}}}),ic._sessionToken=e.token),ic)},$i=()=>Fc()?.token?Bb():T,_e=()=>P?Fc()?.token?Bb():T:null,Sy=()=>{const e=Fc();return!!(e?.token&&e?.projectId)},Ey="fieldsync_data",gf="fieldsync_user",VS={projects:[],areas:[],users:[],assignments:[]},Oe=()=>{try{const e=localStorage.getItem(Ey);return e?JSON.parse(e):VS}catch{return localStorage.removeItem(Ey),VS}},Ge=e=>{localStorage.setItem(Ey,JSON.stringify(e))},kd=()=>{try{const e=localStorage.getItem(gf);return e?JSON.parse(e):null}catch{return localStorage.removeItem(gf),null}},Dd=e=>{e?localStorage.setItem(gf,JSON.stringify(e)):localStorage.removeItem(gf)},Bz={async createCOR(e,t=0){if(P){let r=e.cor_number;t>0&&(r=await this.getNextCORNumber(e.project_id));const{data:n,error:i}=await T.from("change_orders").insert({company_id:e.company_id,project_id:e.project_id,area_id:e.area_id||null,cor_number:r,title:e.title,description:e.description||"",scope_of_work:e.scope_of_work,period_start:e.period_start,period_end:e.period_end,status:"draft",labor_markup_percent:e.labor_markup_percent??1500,materials_markup_percent:e.materials_markup_percent??1500,equipment_markup_percent:e.equipment_markup_percent??1500,subcontractors_markup_percent:e.subcontractors_markup_percent??500,liability_insurance_percent:e.liability_insurance_percent??144,bond_percent:e.bond_percent??100,license_fee_percent:e.license_fee_percent??10,created_by:e.created_by||null}).select().single();if((i?.code==="23505"||i?.code==="PGRST116"||i?.status===409||i?.message?.includes("duplicate")||i?.message?.includes("unique_cor_number"))&&t<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${t+1})`),this.createCOR(e,t+1);if(i)throw i;return n}return null},async updateCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteCOR(e){if(P){const{error:t}=await T.from("change_orders").delete().eq("id",e);if(t)throw t}},async bulkUpdateCORGroup(e,t){if(P){const{error:r}=await T.from("change_orders").update({group_name:t,updated_at:new Date().toISOString()}).in("id",e);if(r)throw r.message?.includes("group_name")||r.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):r}},async getCORs(e,t={}){if(P){let r=T.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",e);t.status&&(r=r.eq("status",t.status)),t.area_id&&(r=r.eq("area_id",t.area_id)),t.date_start&&(r=r.gte("period_start",t.date_start)),t.date_end&&(r=r.lte("period_end",t.date_end)),r=r.order("created_at",{ascending:!1});const{data:n,error:i}=await r;if(i)throw i;return n}return[]},async getCORById(e){if(P){const{data:t,error:r}=await T.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",e).single();if(r)throw r;return t}return null},async getCORsByArea(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").select("*").eq("project_id",e).eq("area_id",t).order("created_at",{ascending:!1});if(n)throw n;return r}return[]},async getAssignableCORs(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",e).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(n)throw n;return r||[]}return[]},async getNextCORNumber(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("cor_number").eq("project_id",e);if(r)throw r;if(t&&t.length>0){let n=0;for(const i of t){const s=i.cor_number?.match(/COR #(\d+)/);if(s){const c=parseInt(s[1]);c>n&&(n=c)}}return`COR #${n+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(e,t){if(P){const r=Math.round(t.regular_hours*t.regular_rate),n=Math.round(t.overtime_hours*t.overtime_rate),i=r+n,{data:s,error:c}=await T.from("change_order_labor").insert({change_order_id:e,labor_class:t.labor_class,wage_type:t.wage_type||"standard",regular_hours:t.regular_hours||0,overtime_hours:t.overtime_hours||0,regular_rate:t.regular_rate||0,overtime_rate:t.overtime_rate||0,regular_total:r,overtime_total:n,total:i,sort_order:t.sort_order||0,source_ticket_id:t.source_ticket_id||null}).select().single();if(c)throw c;return s}return null},async updateCORLaborItem(e,t){if(P){let r={...t};if(t.regular_hours!==void 0||t.regular_rate!==void 0||t.overtime_hours!==void 0||t.overtime_rate!==void 0){const{data:s}=await T.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",e).single(),c=t.regular_hours??s?.regular_hours??0,u=t.overtime_hours??s?.overtime_hours??0,m=t.regular_rate??s?.regular_rate??0,h=t.overtime_rate??s?.overtime_rate??0;r.regular_total=Math.round(c*m),r.overtime_total=Math.round(u*h),r.total=r.regular_total+r.overtime_total}const{data:n,error:i}=await T.from("change_order_labor").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORLaborItem(e){if(P){const{error:t}=await T.from("change_order_labor").delete().eq("id",e);if(t)throw t}},async addCORMaterialItem(e,t){if(P){const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_materials").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"each",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCORMaterialItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_materials").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_materials").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORMaterialItem(e){if(P){const{error:t}=await T.from("change_order_materials").delete().eq("id",e);if(t)throw t}},async addCOREquipmentItem(e,t){if(P){const n=["backup_sheet","invoice","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_equipment").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"day",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCOREquipmentItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_equipment").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_equipment").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCOREquipmentItem(e){if(P){const{error:t}=await T.from("change_order_equipment").delete().eq("id",e);if(t)throw t}},async addCORSubcontractorItem(e,t){if(P){const r=Math.round(t.quantity*t.unit_cost),{data:n,error:i}=await T.from("change_order_subcontractors").insert({change_order_id:e,description:t.description,quantity:t.quantity||1,unit:t.unit||"lump sum",unit_cost:t.unit_cost||0,total:r,source_type:t.source_type||"custom",source_reference:t.source_reference||null,sort_order:t.sort_order||0}).select().single();if(i)throw i;return n}return null},async updateCORSubcontractorItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_subcontractors").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORSubcontractorItem(e){if(P){const{error:t}=await T.from("change_order_subcontractors").delete().eq("id",e);if(t)throw t}},async addBulkLaborItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>{const m=Math.round(c.regular_hours*c.regular_rate),h=Math.round(c.overtime_hours*c.overtime_rate);return{change_order_id:e,labor_class:c.labor_class,wage_type:c.wage_type||"standard",regular_hours:c.regular_hours||0,overtime_hours:c.overtime_hours||0,regular_rate:c.regular_rate||0,overtime_rate:c.overtime_rate||0,regular_total:m,overtime_total:h,total:m+h,sort_order:c.sort_order??u,source_ticket_id:c.source_ticket_id||null}}),{data:i,error:s}=await r.from("change_order_labor").insert(n).select();if(s)throw s;return i}return[]},async addBulkMaterialItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",g=Math.round(Number(u.unit_cost)||0),p=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:p,unit:u.unit||"each",unit_cost:g,total:Math.round(p*g),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_materials").insert(i).select();if(c)throw c;return s}return[]},async addBulkEquipmentItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",g=Math.round(Number(u.unit_cost)||0),p=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:p,unit:u.unit||"day",unit_cost:g,total:Math.round(p*g),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_equipment").insert(i).select();if(c)throw c;return s}return[]},async addBulkSubcontractorItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>({change_order_id:e,company_name:c.company_name||"",description:c.description||"",quantity:c.quantity||1,unit:c.unit||"lump sum",unit_cost:c.unit_cost||c.total||c.amount||0,total:c.total||c.amount||0,source_type:c.source_type||"invoice",source_reference:c.source_reference||null,sort_order:c.sort_order??u})),{data:i,error:s}=await r.from("change_order_subcontractors").insert(n).select();if(s)throw s;return i}return[]},async clearCORLineItems(e){if(!P)return;const t=_e();if(!t)throw new Error("Database client not available");try{const r=await Promise.all([t.from("change_order_labor").delete().eq("change_order_id",e),t.from("change_order_materials").delete().eq("change_order_id",e),t.from("change_order_equipment").delete().eq("change_order_id",e),t.from("change_order_subcontractors").delete().eq("change_order_id",e)]);for(const n of r)if(n.error)throw n.error}catch(r){throw console.error("Error clearing COR line items:",r),r}},async saveCORLineItems(e,{laborItems:t,materialItems:r,equipmentItems:n,subcontractorItems:i}){if(P){await this.clearCORLineItems(e);const s=await Promise.all([t?.length>0?this.addBulkLaborItems(e,t):[],r?.length>0?this.addBulkMaterialItems(e,r):[],n?.length>0?this.addBulkEquipmentItems(e,n):[],i?.length>0?this.addBulkSubcontractorItems(e,i):[]]);return{labor:s[0],materials:s[1],equipment:s[2],subcontractors:s[3]}}return null},async assignTicketToCOR(e,t){if(P){const{error:r}=await T.rpc("assign_ticket_to_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"assignTicketToCOR",extra:{ticketId:e,corId:t}}),r;return{ticket_id:e,change_order_id:t}}return null},async unassignTicketFromCOR(e,t){if(P){const{error:r}=await T.rpc("unassign_ticket_from_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"unassignTicketFromCOR",extra:{ticketId:e,corId:t}}),r}},async checkTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("check_ticket_cor_integrity");if(t)throw t;return e||[]}return[]},async fixTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("fix_ticket_cor_integrity");if(t)throw t;return e}return 0},async getTicketsForCOR(e){if(P){const{data:t,error:r}=await T.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",e);if(r)throw r;return t}return[]},async getUnassignedTickets(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(r)throw r;return t}return[]},async importTicketDataToCOR(e,t,r,n,i){if(P){const s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",e).single();if(u)throw u;const{data:m,error:h}=await s.from("labor_rates").select("*").eq("company_id",r).eq("work_type",n||"demolition").eq("job_type",i||"standard");if(h)throw h;const g={};m?.forEach(S=>{g[S.role.toLowerCase()]=S});const p={};c.t_and_m_workers?.forEach(S=>{const O=(S.role||"laborer").toLowerCase();p[O]||(p[O]={regular_hours:0,overtime_hours:0}),p[O].regular_hours+=parseFloat(S.hours)||0,p[O].overtime_hours+=parseFloat(S.overtime_hours)||0});const _=Object.entries(p).map(([S,O])=>{const C=g[S]||{regular_rate:0,overtime_rate:0},A=Math.round((parseFloat(C.regular_rate)||0)*100),k=Math.round((parseFloat(C.overtime_rate)||0)*100);return{labor_class:S.charAt(0).toUpperCase()+S.slice(1),wage_type:i||"standard",regular_hours:O.regular_hours,overtime_hours:O.overtime_hours,regular_rate:A,overtime_rate:k,source_ticket_id:e}});_.length>0&&await this.addBulkLaborItems(t,_);const x=[],w=[];c.t_and_m_items?.forEach(S=>{const O=S.custom_name||S.materials_equipment?.name||"Unknown Item",C=S.custom_category||S.materials_equipment?.category||"Other",A=S.materials_equipment?.unit||"each",k=Math.round((parseFloat(S.materials_equipment?.cost_per_unit)||0)*100),D={description:O,quantity:S.quantity||1,unit:A,unit_cost:k,source_type:"backup_sheet",source_ticket_id:e};C==="Equipment"?w.push(D):x.push(D)}),x.length>0&&await this.addBulkMaterialItems(t,x),w.length>0&&await this.addBulkEquipmentItems(t,w);const{error:j}=await s.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",t).eq("ticket_id",e);if(j)throw j;return Ke.activity("cor_import_success",{ticket_id:e,cor_id:t,labor_count:_.length,material_count:x.length,equipment_count:w.length}),{laborItems:_,materialItems:x,equipmentItems:w}}return null},async reimportTicketDataToCOR(e,t,r,n,i){if(P){const s=_e();if(!s)throw new Error("Database client not available");return await s.from("change_order_labor").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_materials").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_equipment").delete().eq("change_order_id",t).eq("source_ticket_id",e),this.importTicketDataToCOR(e,t,r,n,i)}return null},async markImportFailed(e,t,r="Import failed"){if(P){const n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:r}).eq("change_order_id",t).eq("ticket_id",e);if(i)throw Ke.error("database",{message:i.message,operation:"markImportFailed",extra:{ticketId:e,corId:t}}),i;Ke.error("cor_import_failed",{ticket_id:e,cor_id:t,error:r})}},async getTicketsNeedingImport(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",e).eq("change_order_ticket_associations.import_status","failed");if(r)throw r;return t||[]}return[]},async getTicketImportStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",e).eq("change_order_id",t).single();if(n&&n.code!=="PGRST116")throw n;return r}return null},async recalculateCOR(e){if(P){const{error:t}=await T.rpc("recalculate_cor_totals",{cor_id:e});if(t)throw t;return this.getCORById(e)}return null},async updateCORMarkupPercentages(e,t){if(P){const r={};t.labor!==void 0&&(r.labor_markup_percent=t.labor),t.materials!==void 0&&(r.materials_markup_percent=t.materials),t.equipment!==void 0&&(r.equipment_markup_percent=t.equipment),t.subcontractors!==void 0&&(r.subcontractors_markup_percent=t.subcontractors);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async updateCORFeePercentages(e,t){if(P){const r={};t.liabilityInsurance!==void 0&&(r.liability_insurance_percent=t.liabilityInsurance),t.bond!==void 0&&(r.bond_percent=t.bond),t.licenseFee!==void 0&&(r.license_fee_percent=t.licenseFee);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async submitCORForApproval(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}return null},async approveCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"approved",approved_by:t,approved_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async rejectCOR(e,t=null){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"rejected",rejection_reason:t}).eq("id",e).select().single();if(n)throw n;return r}return null},async markCORAsBilled(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"billed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async closeCOR(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"closed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async saveCORSignature(e,t,r){if(P){const{data:n,error:i}=await T.from("change_orders").update({gc_signature_data:t,gc_signature_name:r,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",e).select().single();if(i)throw i;return n}return null},async getCORStats(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("status, cor_total").eq("project_id",e);if(r)throw r;const n={total_cors:t.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return t.forEach(i=>{switch(i.status){case"draft":n.draft_count++;break;case"pending_approval":n.pending_count++,n.total_pending_value+=i.cor_total||0;break;case"approved":n.approved_count++,n.total_approved_value+=i.cor_total||0;break;case"rejected":n.rejected_count++;break;case"billed":case"closed":n.billed_count++,n.total_billed_value+=i.cor_total||0;break}}),n}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(e,t){return P?T.channel(`change_orders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCorTickets(e,t){return P?T.channel(`cor-tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${e}`},t).subscribe():null},async getCORLog(e){if(P){const{data:t,error:r}=await T.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",e).order("log_number",{ascending:!0});if(r)throw console.error("Error fetching COR log:",r),r;return(t||[]).map(n=>({id:n.id,logNumber:n.log_number,dateSentToClient:n.date_sent_to_client,ceNumber:n.ce_number,comments:n.comments,createdAt:n.created_at,updatedAt:n.updated_at,changeOrder:{id:n.change_order?.id,corNumber:n.change_order?.cor_number,title:n.change_order?.title,corTotal:n.change_order?.cor_total,status:n.change_order?.status,createdAt:n.change_order?.created_at,approvedAt:n.change_order?.approved_at,approvedBy:n.change_order?.approved_by}}))}return[]},async updateCORLogEntry(e,t){if(P){const r={updated_at:new Date().toISOString()};t.dateSentToClient!==void 0&&(r.date_sent_to_client=t.dateSentToClient||null),t.ceNumber!==void 0&&(r.ce_number=t.ceNumber||null),t.comments!==void 0&&(r.comments=t.comments||null);const{data:n,error:i}=await T.from("cor_log_entries").update(r).eq("id",e).select().single();if(i)throw console.error("Error updating COR log entry:",i),i;return n}return null},async updateChangeOrderStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw console.error("Error updating change order status:",n),n;return r}return null},subscribeToCORLog(e,t){return P?T.channel(`cor-log:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocuments(e,t){return P?T.channel(`documents:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"documents",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocumentFolders(e,t){return P?T.channel(`document_folders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"document_folders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialsEquipment(e,t){return P?T.channel(`materials_equipment:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToLaborRates(e,t){return P?T.channel(`labor_rates:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToProject(e,t){return P?T.channel(`project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${e}`},t).subscribe():null},subscribeToPunchList(e,t){return P?T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},t).subscribe():null},async createSignatureRequest(e,t,r,n,i=null,s=null){if(P){const c=_e();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.rpc("generate_signature_token");if(m)throw m;const{data:h,error:g}=await c.from("signature_requests").insert({document_type:e,document_id:t,company_id:r,project_id:n,signature_token:u,expires_at:s,created_by:i}).select().single();if(g)throw g;return h}return null},async getSignatureRequestByToken(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");await t.rpc("increment_signature_view_count",{token:e});const{data:r,error:n}=await t.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",e).single();if(n)throw n;return r}return null},async getSignatureRequestsForDocument(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",e).eq("document_id",t).order("created_at",{ascending:!1});if(i)throw i;return n||[]}return[]},async addSignature(e,t,r){if(P){const n=_e();if(!n)throw new Error("Database client not available");const{data:i,error:s}=await n.from("signatures").insert({signature_request_id:e,signature_slot:t,signature_image:r.signature,signer_name:r.signerName,signer_title:r.signerTitle||null,signer_company:r.signerCompany||null,signed_at:r.signedAt||new Date().toISOString(),ip_address:r.ipAddress||null,user_agent:r.userAgent||null}).select().single();if(s)throw s;return i}return null},async syncSignatureToDocument(e,t){if(!P)return null;const r=_e();if(!r)throw new Error("Database client not available");const{document_type:n,document_id:i}=t,s=e.signature_slot,c={};s===1?(c.gc_signature_data=e.signature_image,c.gc_signature_name=e.signer_name,c.gc_signature_title=e.signer_title,c.gc_signature_company=e.signer_company,c.gc_signature_date=e.signed_at,c.gc_signature_ip=e.ip_address):s===2&&(c.client_signature_data=e.signature_image,c.client_signature_name=e.signer_name,c.client_signature_title=e.signer_title,c.client_signature_company=e.signer_company,c.client_signature_date=e.signed_at,c.client_signature_ip=e.ip_address);const u=n==="cor"?"change_orders":"t_and_m_tickets",{data:m,error:h}=await r.from(u).update(c).eq("id",i).select().single();if(h)throw h;return m},async revokeSignatureRequest(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("signature_requests").update({status:"revoked"}).eq("id",e).select().single();if(n)throw n;return r}return null},async getDocumentForSigning(e,t){if(!P)return null;const r=_e();if(!r)throw new Error("Database client not available");if(e==="cor"){const{data:n,error:i}=await r.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",t).single();if(i)throw i;return n}else if(e==="tm_ticket"){const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (
              id,
              name,
              unit,
              cost_per_unit,
              category
            )
          )
        `).eq("id",t).single();if(i)throw i;return n}return null},async getProjectCosts(e){if(P){const{data:r,error:n}=await T.from("project_costs").select("*").eq("project_id",e).order("cost_date",{ascending:!1});return n?(console.error("Error fetching project costs:",n),[]):r||[]}return(Oe().projectCosts||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.cost_date)-new Date(r.cost_date))},async addProjectCost(e,t,r){const n={project_id:e,company_id:t,category:r.category,description:r.description,amount:parseFloat(r.amount),cost_date:r.cost_date||new Date().toISOString().split("T")[0],notes:r.notes||null,created_by:r.created_by||null};if(P){const{data:c,error:u}=await T.from("project_costs").insert(n).select().single();if(u)throw console.error("Error adding project cost:",u),u;return c}const i=Oe();i.projectCosts||(i.projectCosts=[]);const s={...n,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i.projectCosts.push(s),Ge(i),s},async updateProjectCost(e,t){const r={category:t.category,description:t.description,amount:parseFloat(t.amount),cost_date:t.cost_date,notes:t.notes||null,updated_at:new Date().toISOString()};if(P){const{data:s,error:c}=await T.from("project_costs").update(r).eq("id",e).select().single();if(c)throw console.error("Error updating project cost:",c),c;return s}const n=Oe();if(!n.projectCosts)return null;const i=n.projectCosts.findIndex(s=>s.id===e);return i===-1?null:(n.projectCosts[i]={...n.projectCosts[i],...r},Ge(n),n.projectCosts[i])},async deleteProjectCost(e){if(P){const{error:r}=await T.from("project_costs").delete().eq("id",e);if(r)throw console.error("Error deleting project cost:",r),r;return!0}const t=Oe();return t.projectCosts&&(t.projectCosts=t.projectCosts.filter(r=>r.id!==e),Ge(t)),!0},async getProjectCostsSummary(e){const t=await this.getProjectCosts(e),r={};let n=0;return t.forEach(i=>{const s=parseFloat(i.amount)||0;n+=s,r[i.category]||(r[i.category]={category:i.category,total:0,count:0,items:[]}),r[i.category].total+=s,r[i.category].count++,r[i.category].items.push(i)}),Object.values(r).forEach(i=>{i.percentage=n>0?i.total/n*100:0}),{totalCost:n,byCategory:r,itemCount:t.length}},async getNextInvoiceNumber(e){if(P){const{data:t,error:r}=await T.rpc("get_next_invoice_number",{p_company_id:e});return r?(console.error("Error getting next invoice number:",r),this._generateLocalInvoiceNumber(e)):t}return this._generateLocalInvoiceNumber(e)},async _generateLocalInvoiceNumber(e){const r=(await this.getCompanyInvoices(e)).reduce((n,i)=>{const s=i.invoice_number?.match(/^INV-(\d+)$/);if(s){const c=parseInt(s[1],10);return c>n?c:n}return n},0);return`INV-${String(r+1).padStart(4,"0")}`},async getBillableItems(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("id, cor_number, title, cor_total, status, approved_at").eq("project_id",e).eq("status","approved").order("cor_number",{ascending:!0});r&&console.error("Error fetching billable CORs:",r);const{data:n,error:i}=await T.from("t_and_m_tickets").select("id, work_date, ce_pco_number, change_order_value, status, client_signature_date").eq("project_id",e).eq("status","approved").not("client_signature_data","is",null).order("work_date",{ascending:!0});return i&&console.error("Error fetching billable T&M tickets:",i),{cors:t||[],tickets:n||[]}}return{cors:[],tickets:[]}},async getProjectInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("project_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching project invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.project_id===e)},async getCompanyInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select("*").eq("company_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching company invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.company_id===e)},async createInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").insert({project_id:e.project_id,company_id:e.company_id,invoice_number:e.invoice_number,invoice_date:e.invoice_date,due_date:e.due_date,status:e.status||"draft",retention_percent:e.retention_percent||0,bill_to_name:e.bill_to_name,bill_to_address:e.bill_to_address,bill_to_contact:e.bill_to_contact,notes:e.notes,terms:e.terms||"Net 30",created_by:e.created_by}).select().single();if(s)throw console.error("Error creating invoice:",s),s;if(t&&t.length>0){const c=t.map((m,h)=>({invoice_id:i.id,item_type:m.item_type,reference_id:m.reference_id,reference_number:m.reference_number,description:m.description,amount:m.amount,sort_order:h})),{error:u}=await T.from("invoice_items").insert(c);if(u)throw console.error("Error creating invoice items:",u),await T.from("invoices").delete().eq("id",i.id),u}return this.getInvoice(i.id)}const r=Oe();r.invoices||(r.invoices=[]);const n={...e,id:Xr(),created_at:new Date().toISOString(),invoice_items:t||[]};return r.invoices.push(n),Ge(r),n},async getInvoice(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",e).single();if(n)throw console.error("Error fetching invoice:",n),n;return r}return(Oe().invoices||[]).find(r=>r.id===e)},async updateInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").update(t).eq("id",e).select().single();if(s)throw console.error("Error updating invoice:",s),s;return i}const r=Oe(),n=(r.invoices||[]).findIndex(i=>i.id===e);return n>=0?(r.invoices[n]={...r.invoices[n],...t},Ge(r),r.invoices[n]):null},async markInvoiceSent(e){return this.updateInvoice(e,{status:"sent",sent_at:new Date().toISOString()})},async recordInvoicePayment(e,t){const r=await this.getInvoice(e);if(!r)throw new Error("Invoice not found");const n=(r.amount_paid||0)+t,i=n>=r.total;return this.updateInvoice(e,{amount_paid:n,status:i?"paid":"partial",paid_at:i?new Date().toISOString():null})},async deleteInvoice(e){if(P){const{error:r}=await T.from("invoices").delete().eq("id",e).eq("status","draft");if(r)throw console.error("Error deleting invoice:",r),r;return!0}const t=Oe();return t.invoices=(t.invoices||[]).filter(r=>r.id!==e),Ge(t),!0},async markItemsBilled(e=[],t=[]){if(P){if(e.length>0){const{error:r}=await T.from("change_orders").update({status:"billed"}).in("id",e);r&&console.error("Error marking CORs as billed:",r)}if(t.length>0){const{error:r}=await T.from("t_and_m_tickets").update({status:"billed"}).in("id",t);r&&console.error("Error marking T&M tickets as billed:",r)}}}},$z={async getCompanyEquipment(e,t=!0){if(!P)return console.warn("Supabase not configured"),[];let r=T.from("equipment").select("*").eq("company_id",e).order("name");t&&(r=r.eq("is_active",!0));const{data:n,error:i}=await r;return i?(console.error("Error fetching company equipment:",i),[]):n||[]},async createEquipment(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("equipment").insert(e).select().single();if(r)throw console.error("Error creating equipment:",r),r;return t},async updateEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("equipment").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating equipment:",n),n;return r},async deactivateEquipment(e){return this.updateEquipment(e,{is_active:!1})},async getProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).order("start_date",{ascending:!1});return r?(console.error("Error fetching project equipment:",r),[]):t||[]},async getActiveProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).is("end_date",null).order("start_date",{ascending:!1});return r?(console.error("Error fetching active project equipment:",r),[]):t||[]},async addEquipmentToProject(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("project_equipment").insert(e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(r)throw console.error("Error adding equipment to project:",r),r;return t},async updateProjectEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("project_equipment").update(t).eq("id",e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(n)throw console.error("Error updating project equipment:",n),n;return r},async markEquipmentReturned(e,t=null){return this.updateProjectEquipment(e,{end_date:t||new Date().toISOString().split("T")[0]})},async removeEquipmentFromProject(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("project_equipment").delete().eq("id",e);if(t)throw console.error("Error removing project equipment:",t),t;return!0},calculateProjectEquipmentCost(e){const t=new Date;return t.setHours(0,0,0,0),e.reduce((r,n)=>{const i=new Date(n.start_date);i.setHours(0,0,0,0);let s;n.end_date?(s=new Date(n.end_date),s.setHours(0,0,0,0)):s=t;const c=Math.max(1,Math.floor((s-i)/(1e3*60*60*24))+1);return r+n.daily_rate*c},0)},calculateDaysOnSite(e,t=null){const r=new Date(e);r.setHours(0,0,0,0);let n;return t?n=new Date(t):n=new Date,n.setHours(0,0,0,0),Math.max(1,Math.floor((n-r)/(1e3*60*60*24))+1)}},Hz={async getNextDrawNumber(e){if(!P)return console.warn("Supabase not configured"),1;const{data:t,error:r}=await T.from("draw_requests").select("draw_number").eq("project_id",e).order("draw_number",{ascending:!1}).limit(1).single();return r&&r.code!=="PGRST116"&&console.error("Error getting next draw number:",r),(t?.draw_number||0)+1},async getPreviousBillingTotals(e){if(!P)return console.warn("Supabase not configured"),{totalBilled:0,totalRetention:0};const{data:t,error:r}=await T.from("draw_requests").select("current_billing, retention_held").eq("project_id",e).in("status",["submitted","approved","paid"]);if(r)return console.error("Error getting previous billing totals:",r),{totalBilled:0,totalRetention:0};const n=(t||[]).reduce((s,c)=>s+(c.current_billing||0),0),i=t?.length>0?Math.max(...t.map(s=>s.retention_held||0)):0;return{totalBilled:n,totalRetention:i}},async getProjectDrawRequests(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("draw_requests").select("*").eq("project_id",e).order("draw_number",{ascending:!1});return r?(console.error("Error fetching draw requests:",r),[]):t||[]},async getDrawRequest(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("draw_requests").select(`
        *,
        draw_request_items (
          *
        )
      `).eq("id",e).single();return r?(console.error("Error fetching draw request:",r),null):t},async createDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").insert(e).select().single();if(n)throw console.error("Error creating draw request:",n),n;if(t&&t.length>0){const i=t.map((c,u)=>({...c,draw_request_id:r.id,sort_order:u})),{error:s}=await T.from("draw_request_items").insert(i);s&&console.error("Error creating draw request items:",s)}return this.getDrawRequest(r.id)},async updateDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating draw request:",n),n;return r},async updateDrawRequestStatus(e,t){const r={status:t};return t==="submitted"?r.submitted_at=new Date().toISOString():t==="approved"?r.approved_at=new Date().toISOString():t==="paid"&&(r.paid_at=new Date().toISOString()),this.updateDrawRequest(e,r)},async updateDrawRequestItems(e,t){if(!P)return console.warn("Supabase not configured"),!1;const{error:r}=await T.from("draw_request_items").delete().eq("draw_request_id",e);if(r)throw console.error("Error deleting old draw request items:",r),r;if(t&&t.length>0){const n=t.map((s,c)=>({...s,draw_request_id:e,sort_order:c})),{error:i}=await T.from("draw_request_items").insert(n);if(i)throw console.error("Error inserting draw request items:",i),i}return!0},async deleteDrawRequest(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("draw_requests").delete().eq("id",e);if(t)throw console.error("Error deleting draw request:",t),t;return!0},async getScheduleOfValues(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("areas").select("id, name, square_footage, price_per_sqft").eq("project_id",e).order("created_at");return r?(console.error("Error fetching schedule of values:",r),[]):(t||[]).map((n,i)=>({area_id:n.id,item_number:String(i+1),description:n.name,scheduled_value:Math.round((n.square_footage||0)*(n.price_per_sqft||0)*100)}))},async getPreviousDrawItems(e){if(!P)return console.warn("Supabase not configured"),{};const{data:t,error:r}=await T.from("draw_requests").select("id").eq("project_id",e).in("status",["submitted","approved","paid"]).order("draw_number",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")return console.error("Error fetching latest draw:",r),{};if(!t)return{};const{data:n,error:i}=await T.from("draw_request_items").select("area_id, total_percent, total_amount").eq("draw_request_id",t.id);return i?(console.error("Error fetching previous draw items:",i),{}):(n||[]).reduce((s,c)=>(c.area_id&&(s[c.area_id]={previous_percent:c.total_percent||0,previous_amount:c.total_amount||0}),s),{})},calculatePercentFromAmount(e,t){return!t||t===0?0:Math.round(e/t*1e4)},calculateAmountFromPercent(e,t){return Math.round(e/1e4*t)}};typeof window<"u"&&ni().catch(e=>console.error("Failed to init offline DB:",e));const Cg=()=>{const e="fieldsync_device_id";let t=localStorage.getItem(e);return t||(t=crypto.randomUUID(),localStorage.setItem(e,t)),t},of={async signUp(e,t,r,n){if(P){const{data:i,error:s}=await T.auth.signUp({email:e,password:t,options:{data:{name:r,role:n}}});if(s)throw s;return i}else{const i=Oe(),s={id:crypto.randomUUID(),email:e,name:r,role:n,created_at:new Date().toISOString()};return i.users.push(s),Ge(i),Dd(s),{user:s}}},async signIn(e,t){if(P){const{data:r,error:n}=await T.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r}else{const n=Oe().users.find(i=>i.email===e);if(!n)throw new Error("User not found");return Dd(n),{user:n}}},async signOut(){if(P){const{error:e}=await T.auth.signOut();if(e)throw e}else Dd(null)},async getUser(){if(P){const{data:{user:e}}=await T.auth.getUser();return e}else return kd()},async getProfile(){if(P){const{data:{user:e}}=await T.auth.getUser();if(!e)return null;const{data:t,error:r}=await T.from("users").select("*").eq("id",e.id).single();return r?{id:e.id,email:e.email,name:e.user_metadata?.name||"",role:e.user_metadata?.role||"foreman"}:t}else return kd()},async updateRole(e,t){if(P){const{data:r,error:n}=await T.from("users").update({role:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.users.find(i=>i.id===e);return n&&(n.role=t,Ge(r),kd()?.id===e&&Dd(n)),n}},onAuthStateChange(e){if(P)return T.auth.onAuthStateChange(e);{const t=kd();return e(t?"SIGNED_IN":"SIGNED_OUT",{user:t}),{data:{subscription:{unsubscribe:()=>{}}}}}}},be={async getProjects(e=null,t=!1){if(P){if(!Ln()){const n=await HS(e);return t?n:n.filter(i=>i.status!=="archived")}const r=performance.now();try{let n=T.from("projects").select("*").order("created_at",{ascending:!1});e&&(n=n.eq("company_id",e)),t||(n=n.eq("status","active"));const{data:i,error:s}=await n,c=Math.round(performance.now()-r);if(Ke.query("getProjects",{duration:c,rows:i?.length,company_id:e}),s){Ke.error("database",{message:s.message,operation:"getProjects",company_id:e});const u=await HS(e);if(u.length>0)return u;throw s}return i?.length>0&&qz(i).catch(u=>console.error("Failed to cache projects:",u)),i}catch(n){throw Ke.error("database",{message:n.message,operation:"getProjects",company_id:e}),n}}else{const r=Oe().projects;return t?r:r.filter(n=>n.status!=="archived")}},async getProjectsPaginated(e,{page:t=0,limit:r=25,status:n="active"}={}){if(P){const c=performance.now();try{let u=T.from("projects").select("*",{count:"exact"}).eq("company_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n!=="all"&&(u=u.eq("status",n));const{data:m,error:h,count:g}=await u,p=Math.round(performance.now()-c);if(Ke.query("getProjectsPaginated",{duration:p,rows:m?.length,page:t,company_id:e}),h)throw h;return{projects:m||[],totalCount:g||0,hasMore:(t+1)*r<(g||0),page:t,limit:r}}catch(u){throw Ke.error("database",{message:u.message,operation:"getProjectsPaginated",company_id:e}),u}}const i=Oe().projects.filter(c=>c.company_id===e&&(n==="all"||c.status===n)),s=t*r;return{projects:i.slice(s,s+r),totalCount:i.length,hasMore:s+r<i.length,page:t,limit:r}},async getProjectsWithSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!1}),i=Math.round(performance.now()-t);if(Ke.query("getProjectsWithSummary",{duration:i,rows:r?.length,company_id:e}),n)throw n;return(r||[]).map(s=>({...s,areaCount:s.areas?.[0]?.count||0,ticketCount:s.tickets?.[0]?.count||0,pendingTicketCount:0,reportCount:s.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,daily_reports:void 0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectsWithSummary",company_id:e}),this.getProjects(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getProjectDashboardSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.rpc("get_project_dashboard_summary",{p_company_id:e}),i=Math.round(performance.now()-t);if(Ke.query("getProjectDashboardSummary",{duration:i,rows:r?.length,company_id:e}),n){if(n.message?.includes("function")||n.code==="42883")return this.getProjectsWithSummary(e);throw n}return(r||[]).map(s=>({id:s.project_id,name:s.project_name,status:s.project_status,job_number:s.project_number,address:s.project_address,pin:s.project_pin,created_at:s.created_at,start_date:s.start_date,end_date:s.end_date,contract_value:Number(s.contract_value)||0,work_type:s.work_type||"demolition",job_type:s.job_type||"standard",general_contractor:s.general_contractor||"",areaCount:Number(s.total_areas)||0,completedAreas:Number(s.completed_areas)||0,inProgressAreas:Number(s.in_progress_areas)||0,pendingAreas:Number(s.pending_areas)||0,ticketCount:Number(s.total_tickets)||0,pendingTicketCount:Number(s.pending_tickets)||0,submittedTicketCount:Number(s.submitted_tickets)||0,approvedTicketCount:Number(s.approved_tickets)||0,totalLaborHours:Number(s.total_labor_hours)||0,todayLaborHours:Number(s.today_labor_hours)||0,todayWorkerCount:Number(s.today_worker_count)||0,lastActivityAt:s.last_activity_at,dailyReportsThisWeek:Number(s.daily_reports_this_week)||0,corCount:Number(s.cor_count)||0,pendingCorCount:Number(s.pending_cor_count)||0,disposalLoadsToday:Number(s.disposal_loads_today)||0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectDashboardSummary",company_id:e}),this.getProjectsWithSummary(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getArchivedProjects(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("company_id",e).eq("status","archived").order("archived_at",{ascending:!1});if(r)throw r;return t}else return Oe().projects.filter(t=>t.status==="archived")},async getProjectCount(e){if(P){const{count:t,error:r}=await T.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",e).in("status",["active","archived"]);if(r)throw r;return t||0}else return Oe().projects.filter(r=>r.company_id===e&&r.status!=="deleted").length},async universalSearch(e,t,r=10){if(!P||!t?.trim())return{projects:[],tickets:[],cors:[],workers:[]};const n=t.trim().toLowerCase(),i={projects:[],tickets:[],cors:[],workers:[]};try{const{data:s}=await T.from("projects").select("id, name, job_number, address, status").eq("company_id",e).eq("status","active").or(`name.ilike.%${n}%,job_number.ilike.%${n}%,address.ilike.%${n}%`).limit(r);i.projects=s||[];const{data:c}=await T.from("t_and_m_tickets").select(`
          id, notes, work_date, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).ilike("notes",`%${n}%`).order("work_date",{ascending:!1}).limit(r);i.tickets=(c||[]).map(g=>({...g,projectName:g.projects?.name||"Unknown Project"}));const{data:u}=await T.from("change_orders").select(`
          id, cor_number, title, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).or(`title.ilike.%${n}%,cor_number.ilike.%${n}%`).order("created_at",{ascending:!1}).limit(r);i.cors=(u||[]).map(g=>({...g,projectName:g.projects?.name||"Unknown Project"}));const{data:m}=await T.from("crew_checkins").select(`
          workers,
          project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).order("check_in_date",{ascending:!1}).limit(50),h=new Map;return(m||[]).forEach(g=>{(g.workers||[]).forEach(p=>{if(p.name.toLowerCase().includes(n)){const _=p.name.toLowerCase();h.has(_)||h.set(_,{name:p.name,role:p.role,projectName:g.projects?.name,lastProject:g.projects})}})}),i.workers=Array.from(h.values()).slice(0,r),i}catch(s){return console.error("Universal search error:",s),i}},async archiveProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="archived",r.archived_at=new Date().toISOString(),Ge(t)),r}},async getProjectStorageStats(e){if(!P)return{photoCount:0,estimatedMB:0};const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);if(r)throw r;let n=0;const i=[];t?.forEach(c=>{c.photos&&Array.isArray(c.photos)&&(n+=c.photos.length,i.push(...c.photos))});const s=n*1.5;return{photoCount:n,estimatedMB:s,photoUrls:i}},async archiveProjectDeep(e,t){if(!P)return null;const{photoUrls:r}=await this.getProjectStorageStats(e);if(r.length>0){const s=r.map(c=>{if(!c)return null;if(c.startsWith("http"))try{const m=new URL(c).pathname.match(/\/tm-photos\/(.+)$/);return m?m[1]:null}catch{return null}return c}).filter(Boolean);if(s.length>0)for(let c=0;c<s.length;c+=100){const u=s.slice(c,c+100);await T.storage.from("tm-photos").remove(u)}}await T.from("t_and_m_tickets").update({photos:[]}).eq("project_id",e);const{data:n,error:i}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",e).select().single();if(i)throw i;return{...n,photosDeleted:r.length}},async restoreProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"active",archived_at:null}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="active",r.archived_at=null,Ge(t)),r}},async getProject(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("id",e).single();if(r)throw r;return t}else return Oe().projects.find(t=>t.id===e)},async createProject(e){if(P){const{data:t,error:r}=await T.from("projects").insert({...e,status:"active"}).select().single();if(r)throw console.error("Supabase createProject error:",r.message,r.details,r.hint),r;return t}else{const t=Oe(),r={...e,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return t.projects.push(r),Ge(t),r}},async getProjectByPin(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("pin",e).eq("status","active").single();return r?null:t}else return Oe().projects.find(r=>r.pin===e&&r.status==="active")||null},async getProjectByPinAndCompany(e,t){if(P){const{data:r,error:n}=await T.from("projects").select("*").eq("pin",e).eq("company_id",t).eq("status","active").single();return n?null:r}else return Oe().projects.find(n=>n.pin===e&&n.company_id===t&&n.status==="active")||null},async getProjectByPinSecure(e,t){if(P){const r=`pin_attempts_${t}`,n=`pin_lockout_${t}`,i=5,s=300*1e3,c=localStorage.getItem(n);if(c&&Date.now()<parseInt(c)){const w=parseInt(c)-Date.now(),j=Math.ceil(w/6e4);return{success:!1,rateLimited:!0,project:null,error:`Too many attempts. Please try again in ${j} minute${j>1?"s":""}.`}}const u=Cg(),{data:m,error:h}=await T.rpc("validate_pin_and_create_session",{p_pin:e,p_company_code:t,p_device_id:u,p_ip_address:null});if(h)return console.warn("[PIN Auth] RPC unavailable, using direct PIN lookup:",h.message),await this._pinFallbackDirectQuery(e,t,r,n,i,s);if(!m||m.length===0)return{success:!1,rateLimited:!1,project:null};const g=m[0];if(g.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(g.error_code==="INVALID_COMPANY"||g.error_code==="INVALID_PIN"){let w=parseInt(localStorage.getItem(r)||"0");return w++,localStorage.setItem(r,w.toString()),w>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}if(!g.success||!g.project_id)return{success:!1,rateLimited:!1,project:null};localStorage.removeItem(`pin_attempts_${t}`),localStorage.removeItem(`pin_lockout_${t}`),af({token:g.session_token,projectId:g.project_id,companyId:g.company_id,projectName:g.project_name,companyName:g.company_name,createdAt:new Date().toISOString()});const p=Bb(),{data:_,error:x}=await p.from("projects").select("*").eq("id",g.project_id).single();return{success:!0,rateLimited:!1,sessionToken:g.session_token,project:_||{id:g.project_id,name:g.project_name,company_id:g.company_id,status:"active"}}}else{const r=Oe(),i=(r.companies||[]).find(c=>c.code===t);if(!i)return{success:!1,rateLimited:!1,project:null};const s=r.projects.find(c=>c.pin===e&&c.company_id===i.id&&c.status==="active");if(s){const c=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;af({token:c,projectId:s.id,companyId:i.id,projectName:s.name,companyName:i.name,createdAt:new Date().toISOString()})}return{success:!!s,rateLimited:!1,project:s||null}}},async _pinFallbackDirectQuery(e,t,r,n,i,s){try{const{data:c,error:u}=await T.from("companies").select("*").ilike("code",t.trim()).single();if(u||!c)return{success:!1,rateLimited:!1,project:null};const{data:m,error:h}=await T.from("projects").select("*").eq("pin",e.trim()).eq("company_id",c.id).eq("status","active").single();if(h||!m){let p=parseInt(localStorage.getItem(r)||"0");return p++,localStorage.setItem(r,p.toString()),p>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}localStorage.removeItem(r),localStorage.removeItem(n);let g=null;try{const p=Array.from(crypto.getRandomValues(new Uint8Array(32))).map(x=>x.toString(16).padStart(2,"0")).join(""),{error:_}=await T.from("field_sessions").insert({project_id:m.id,company_id:c.id,session_token:p,device_id:typeof Cg=="function"?Cg():null});_||(g=p)}catch{}return g&&af({token:g,projectId:m.id,companyId:c.id,projectName:m.name,companyName:c.name,createdAt:new Date().toISOString()}),{success:!0,rateLimited:!1,project:m}}catch(c){return console.error("[PIN Auth] Fallback query failed:",c),{success:!1,rateLimited:!1,project:null,error:"Connection error. Please try again."}}},async isPinAvailable(e,t=null){if(P){let r=T.from("projects").select("id").eq("pin",e);t&&(r=r.neq("id",t));const{data:n,error:i}=await r;if(i)throw i;return n.length===0}else return!Oe().projects.some(n=>n.pin===e&&n.id!==t)},async updateProjectPin(e,t){if(P){const{data:r,error:n}=await T.from("projects").update({pin:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.projects.find(i=>i.id===e);return n&&(n.pin=t,Ge(r)),n}},async updateProject(e,t,r=null){if(P){if(!r)throw console.error("[Security] updateProject called without companyId - this is a security risk"),new Error("Company ID is required for security verification");const{data:n,error:i}=await T.from("projects").update(t).eq("id",e).eq("company_id",r).select().single();if(i)throw console.error("Error updating project"),i;return n}else{const n=Oe(),i=n.projects.find(s=>s.id===e);return i&&(Object.assign(i,t),Ge(n)),i}},async deleteProject(e,t=null){if(P){let r=[];try{const{data:c}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);c?.forEach(u=>{Array.isArray(u.photos)&&u.photos.forEach(m=>{if(m)if(m.startsWith("http"))try{const h=new URL(m).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);h&&r.push(decodeURIComponent(h[1]))}catch{}else r.push(m)})})}catch{}if(r.length>0)try{for(let c=0;c<r.length;c+=100)await T.storage.from("tm-photos").remove(r.slice(c,c+100))}catch{}await T.from("t_and_m_tickets").delete().eq("project_id",e),await T.from("daily_reports").delete().eq("project_id",e);let n=T.from("projects").delete({count:"exact"}).eq("id",e);t&&(n=n.eq("company_id",t));const{error:i,count:s}=await n;if(i)throw i;if(s===0)throw new Error("Project could not be deleted. You may not have permission (admin or owner role required).")}else{const r=Oe();r.projects=r.projects.filter(n=>n.id!==e),r.areas=r.areas.filter(n=>n.project_id!==e),Ge(r)}},async getAreas(e){if(P){if(!Ln())return FS(e);const t=_e(),{data:r,error:n}=await t.from("areas").select("*").eq("project_id",e).order("sort_order",{ascending:!0});if(n){const i=await FS(e);if(i.length>0)return i;throw n}return r?.length>0&&Lz(r).catch(i=>console.error("Failed to cache areas:",i)),r}else return Oe().areas.filter(t=>t.project_id===e)},async createArea(e){if(P){const t=_e(),{data:r,error:n}=await t.from("areas").insert(e).select().single();if(n)throw n;return r}else{const t=Oe(),r={...e,id:crypto.randomUUID(),created_at:new Date().toISOString()};return t.areas.push(r),Ge(t),r}},async updateAreaStatus(e,t,r=null){if(P){if(!Ln()){const u=await Sg(e,t);return await dn(Zt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}let i=_e().from("areas").update({status:t}).eq("id",e);r&&(i=i.eq("project_id",r));const{data:s,error:c}=await i.select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u=await Sg(e,t);return await dn(Zt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}throw c}return s&&Sg(e,t).catch(u=>console.error("Failed to update cached area status:",u)),s}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(i.status=t,i.updated_at=new Date().toISOString()),Ge(n),i}},async updateArea(e,t,r=null){if(P){let n=T.from("areas").update(t).eq("id",e);r&&(n=n.eq("project_id",r));const{data:i,error:s}=await n.select().single();if(s)throw s;return i}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(Object.assign(i,t),i.updated_at=new Date().toISOString()),Ge(n),i}},async deleteArea(e,t=null){if(P){let r=T.from("areas").delete().eq("id",e);t&&(r=r.eq("project_id",t));const{error:n}=await r;if(n)throw n}else{const r=Oe();r.areas=r.areas.filter(n=>n.id!==e),Ge(r)}},subscribeToAreas(e,t){return P?T.channel(`areas:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMessages(e,t){return P?T.channel(`messages:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialRequests(e,t){return P?T.channel(`material_requests:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDailyReports(e,t){return P?T.channel(`daily_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCrewCheckins(e,t){return P?T.channel(`crew_checkins:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToInjuryReports(e,t){return P?T.channel(`injury_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToTMTickets(e,t){return P?T.channel(`tm_tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCompanyActivity(e,t,r){if(!P||!t||t.length===0)return null;const n=T.channel(`company_activity:${e}`);return t.forEach(i=>{n.on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${i}`},s=>r.onMessage?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${i}`},s=>r.onMaterialRequest?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${i}`},s=>r.onTMTicket?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${i}`},s=>r.onCrewCheckin?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${i}`},s=>r.onAreaUpdate?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${i}`},s=>r.onCORChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${i}`},s=>r.onProjectChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${i}`},s=>r.onPunchListChange?.(s))}),n.on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},i=>r.onInjuryReport?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},i=>r.onMaterialsEquipmentChange?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},i=>r.onLaborRateChange?.(i)),n.subscribe()},unsubscribe(e){e&&P&&T.removeChannel(e)},async getAssignedProjects(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",e);if(r)throw r;return t.map(n=>n.projects)}else{const t=Oe();return(t.assignments?.filter(n=>n.user_id===e)||[]).map(n=>t.projects.find(i=>i.id===n.project_id)).filter(Boolean)}},async assignUserToProject(e,t,r){if(P){const{data:n,error:i}=await T.from("project_assignments").insert({project_id:e,user_id:t,assigned_by:r}).select().single();if(i)throw i;return n}else{const n=Oe();n.assignments||(n.assignments=[]);const i={id:crypto.randomUUID(),project_id:e,user_id:t,assigned_by:r,assigned_at:new Date().toISOString()};return n.assignments.push(i),Ge(n),i}},async removeUserFromProject(e,t){if(P){const{error:r}=await T.from("project_assignments").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}else{const r=Oe();r.assignments=r.assignments?.filter(n=>!(n.project_id===e&&n.user_id===t))||[],Ge(r)}},async getProjectAssignments(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",e);if(r)throw r;return t.map(n=>n.users)}else{const t=Oe();return(t.assignments?.filter(n=>n.project_id===e)||[]).map(n=>t.users.find(i=>i.id===n.user_id)).filter(Boolean)}},async getAllUsers(){if(P){const{data:e,error:t}=await T.from("users").select("*").order("name");if(t)throw t;return e}else return Oe().users||[]},async getForemen(){if(P){const{data:e,error:t}=await T.from("users").select("*").eq("role","foreman").order("name");if(t)throw t;return e}else return(Oe().users||[]).filter(e=>e.role==="foreman")},async logActivity(e,t,r,n,i,s){if(P){const{error:c}=await T.from("activity_log").insert({user_id:e,project_id:t,area_id:r,action:n,old_value:i,new_value:s});c&&console.error("Error logging activity:",c)}},async getProjectActivity(e,t=50){if(P){const{data:r,error:n}=await T.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r}return[]},async getMaterialsEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").select("*").eq("company_id",e).eq("active",!0).order("category").order("name");if(r)throw r;return t}return[]},async getMaterialsEquipmentByCategory(e,t){if(P){const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("materials_equipment").select("*").eq("company_id",e).eq("category",t).eq("active",!0).order("name");if(i)throw i;return n}return[]},async getAllMaterialsEquipment(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("materials_equipment").select("*").eq("company_id",e).order("category").order("name");if(n)throw n;return r}return[]},async createMaterialEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").insert(e).select().single();if(r)throw r;return t}return null},async updateMaterialEquipment(e,t){if(P){const{data:r,error:n}=await T.from("materials_equipment").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteMaterialEquipment(e){if(P){const{error:t}=await T.from("materials_equipment").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborCategories(e){if(P){const{data:t,error:r}=await T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async createLaborCategory(e,t,r=0){if(P){const{data:n,error:i}=await T.from("labor_categories").insert({company_id:e,name:t,sort_order:r}).select().single();if(i)throw i;return n}return null},async updateLaborCategory(e,t){if(P){const{data:r,error:n}=await T.from("labor_categories").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborCategory(e){if(P){const{error:t}=await T.from("labor_categories").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClasses(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async getLaborClassesWithCategories(e){if(P){const[t,r]=await Promise.all([T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name"),T.from("labor_classes").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;return{categories:t.data||[],classes:r.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(e){if(P){const t=_e();if(!t)return{categories:[],classes:[]};const{data:r,error:n}=await t.rpc("get_labor_classes_for_field",{p_company_id:e});if(n){console.error("Error loading field labor classes:",n);const[c,u]=await Promise.all([t.from("labor_categories").select("id, name").eq("company_id",e).eq("active",!0).order("name"),t.from("labor_classes").select("id, name, category_id").eq("company_id",e).eq("active",!0).order("name")]);return{categories:c.data||[],classes:u.data||[]}}const i=new Map,s=[];for(const c of r||[])c.category_id&&c.category_name&&!i.has(c.category_id)&&i.set(c.category_id,{id:c.category_id,name:c.category_name}),s.push({id:c.id,name:c.name,category_id:c.category_id});return{categories:Array.from(i.values()),classes:s}}return{categories:[],classes:[]}},async createLaborClass(e,t,r,n=0){if(P){const{data:i,error:s}=await T.from("labor_classes").insert({company_id:e,category_id:t,name:r,sort_order:n}).select().single();if(s)throw s;return i}return null},async updateLaborClass(e,t){if(P){const{data:r,error:n}=await T.from("labor_classes").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborClass(e){if(P){const{error:t}=await T.from("labor_classes").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_class_rates").select("*").eq("labor_class_id",e);if(r)throw r;return t||[]}return[]},async getAllLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",e).eq("active",!0);if(r)throw r;return t||[]}return[]},async saveLaborClassRates(e,t){if(P){const r=t.map(i=>({...i,labor_class_id:e})),{error:n}=await T.from("labor_class_rates").upsert(r,{onConflict:"labor_class_id,work_type,job_type"});if(n)throw n}},async getLaborClassRate(e,t,r){if(P){const{data:n,error:i}=await T.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",e).eq("work_type",t).eq("job_type",r).single();if(i&&i.code!=="PGRST116")throw i;return n||null}return null},async getTMTickets(e){if(P){const t=performance.now(),r=_e(),i=Sy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{const{data:s,error:c}=await r.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${i}
            )
          `).eq("project_id",e).order("created_at",{ascending:!1}),u=Math.round(performance.now()-t);if(Ke.query("getTMTickets",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s}catch(s){throw Ke.error("database",{message:s.message,operation:"getTMTickets",project_id:e}),s}}return[]},async getTMTicketsPaginated(e,{page:t=0,limit:r=25,status:n=null}={}){if(P){const i=performance.now(),s=_e(),u=Sy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{let m=s.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${u}
            )
          `,{count:"exact"}).eq("project_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n&&(m=m.eq("status",n));const{data:h,error:g,count:p}=await m,_=Math.round(performance.now()-i);if(Ke.query("getTMTicketsPaginated",{duration:_,rows:h?.length,page:t,project_id:e}),g)throw g;return{tickets:h||[],totalCount:p||0,hasMore:(t+1)*r<(p||0),page:t,limit:r}}catch(m){throw Ke.error("database",{message:m.message,operation:"getTMTicketsPaginated",project_id:e}),m}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",e).not("ce_pco_number","is",null).neq("ce_pco_number","");if(r)throw r;const n={};let i=0,s=0;return t?.forEach(c=>{const u=c.ce_pco_number;if(n[u]||(n[u]={approved:0,pending:0,count:0}),n[u].count++,c.status==="approved"||c.status==="billed"){const m=parseFloat(c.change_order_value)||0;n[u].approved+=m,i+=m}else c.status==="pending"&&s++}),{changeOrders:n,totalApprovedValue:i,pendingCount:s}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(e,t){if(P){const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).eq("status",t).order("created_at",{ascending:!1});if(i)throw i;return n}return[]},async getCORTickets(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",e).order("work_date",{ascending:!0});if(n)throw n;return r||[]}return[]},async createTMTicket(e){if(P){if(!Ln()){const i={id:Xr(),project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending_sync",created_by_name:e.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await KS(i),await dn(Zt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}const t=_e();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("t_and_m_tickets").insert({project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending",created_by_name:e.created_by_name||"Field User"}).select().single();if(n){if(n.message?.includes("fetch")||n.message?.includes("network")){const i={id:Xr(),...e,status:"pending_sync",_offline:!0};return await KS(i),await dn(Zt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}throw n}return r}return null},async addTMWorkers(e,t){if(P){const r=t.map(s=>({ticket_id:e,name:s.name,hours:s.hours,overtime_hours:s.overtime_hours||0,time_started:s.time_started||null,time_ended:s.time_ended||null,role:s.role||"Laborer"})),n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_workers").insert(r);if(i)throw i}},async addTMItems(e,t){if(P){const r=t.map(s=>({ticket_id:e,material_equipment_id:s.material_equipment_id||null,custom_name:s.custom_name||null,custom_category:s.custom_category||null,quantity:s.quantity})),n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_items").insert(r);if(i)throw i}},async getPreviousTicketCrew(e,t){if(!P)return null;const r=_e();if(!r)return null;const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",e).lt("work_date",t).order("work_date",{ascending:!1}).limit(1).maybeSingle();if(i||!n)return null;const s=n.t_and_m_workers||[],c=s.some(p=>p.labor_class_id),u={};c&&s.forEach(p=>{p.labor_class_id&&(u[p.labor_class_id]||(u[p.labor_class_id]=[]),u[p.labor_class_id].push({name:p.name,hours:p.hours?.toString()||"",overtimeHours:p.overtime_hours?.toString()||"",timeStarted:p.time_started||"",timeEnded:p.time_ended||""}))});const m=s.filter(p=>["Foreman","General Foreman","Superintendent"].includes(p.role)).map(p=>({name:p.name,hours:p.hours?.toString()||"",overtimeHours:p.overtime_hours?.toString()||"",timeStarted:p.time_started||"",timeEnded:p.time_ended||"",role:p.role})),h=s.filter(p=>p.role==="Operator").map(p=>({name:p.name,hours:p.hours?.toString()||"",overtimeHours:p.overtime_hours?.toString()||"",timeStarted:p.time_started||"",timeEnded:p.time_ended||""})),g=s.filter(p=>p.role==="Laborer").map(p=>({name:p.name,hours:p.hours?.toString()||"",overtimeHours:p.overtime_hours?.toString()||"",timeStarted:p.time_started||"",timeEnded:p.time_ended||""}));return{workDate:n.work_date,supervision:m.length>0?m:null,operators:h.length>0?h:null,laborers:g.length>0?g:null,dynamicWorkers:Object.keys(u).length>0?u:null,totalWorkers:s.length}},async updateTMTicketStatus(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({status:t}).eq("id",e).select().single();if(i)throw i;return n}return null},async approveTMTicket(e,t,r,n=null){if(P){const i={status:"approved",approved_by_user_id:t,approved_by_name:r,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};n!==null&&(i.change_order_value=parseFloat(n)||0);const s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(u)throw u;return c}return null},async rejectTMTicket(e,t,r,n=""){if(P){const i=_e();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:t,rejected_by_name:r,rejected_at:new Date().toISOString(),rejection_reason:n,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",e).select().single();if(c)throw c;return s}return null},canApproveTickets(e){return["owner","admin","manager"].includes(e)},async updateTMTicketPhotos(e,t,r=null){if(P){const n=_e();if(!n)throw new Error("Database client not available");const i={photos:t};r&&(i.photo_locations=r);const{data:s,error:c}=await n.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(c)throw c;return s}return null},async saveTMClientSignature(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({client_signature_data:t.signature,client_signature_name:t.signerName,client_signature_title:t.signerTitle,client_signature_company:t.signerCompany,client_signature_date:t.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteTMTicket(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("t_and_m_tickets").delete().eq("id",e);if(r)throw r}},async isTicketEditable(e){if(!e?.assigned_cor_id)return{editable:!0};if(P)try{const{data:t,error:r}=await T.from("change_orders").select("id, status, cor_number").eq("id",e.assigned_cor_id).single();if(r||!t)return{editable:!0};const i=["draft","pending_approval"].includes(t.status);return{editable:i,lockedBy:i?null:t,reason:i?null:`This ticket is linked to ${t.cor_number} which has been ${t.status==="approved"?"approved":t.status}`}}catch(t){return console.error("Error checking ticket editability:",t),{editable:!0}}return{editable:!0}},async getCompanyByCode(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").ilike("code",e.trim()).single();return r?(console.error("[Company Lookup] Error:",{message:r.message,code:r.code,details:r.details,hint:r.hint}),null):t}return null},async getCompany(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").eq("id",e).single();if(r)throw r;return t}return null},async getUserCompanies(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching user companies:",r),[]):t.map(n=>({id:n.companies.id,name:n.companies.name,code:n.companies.code,access_level:n.access_level}))}return[]},async getUserPendingMemberships(e){if(P){const{count:t,error:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("status","pending");return r?(console.error("Error fetching pending memberships:",r),0):t||0}return 0},async getCompanyMemberships(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching company memberships:",r),[]):t||[]}return[]},async approveMembership(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:t}).eq("id",e);if(r)throw r}},async approveMembershipWithRole(e,t,r="member"){if(P){const{error:n}=await T.rpc("approve_membership_with_role",{membership_id:e,approved_by_user:t,new_access_level:r});if(n)throw n}},async rejectMembership(e){if(P){const{error:t}=await T.from("user_companies").delete().eq("id",e);if(t)throw t}},async removeMember(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:t}).eq("id",e);if(r)throw r}},async getProjectTeam(e){if(P){const{data:t,error:r}=await T.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",e).order("assigned_at",{ascending:!0});return r?(console.error("Error fetching project team:",r),[]):t||[]}return[]},async getCompanyMembers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching company members:",r),[]):t||[]}return[]},async addProjectMember(e,t,r,n){if(P){const{data:i,error:s}=await T.from("project_users").insert({project_id:e,user_id:t,project_role:r,assigned_by:n}).select().single();if(s)throw s;return i}return null},async updateProjectMemberRole(e,t,r){if(P){const{error:n}=await T.from("project_users").update({project_role:r}).eq("project_id",e).eq("user_id",t);if(n)throw n}},async removeProjectMember(e,t){if(P){const{error:r}=await T.from("project_users").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}},async updateMemberAccessLevel(e,t){if(P){const{error:r}=await T.from("user_companies").update({access_level:t}).eq("id",e);if(r)throw r}},async updateMemberCompanyRole(e,t){if(P){const{error:r}=await T.from("user_companies").update({company_role:t}).eq("id",e);if(r)throw r}},async repairLegacyUser(e,t,r="member"){if(!P||!e||!t)return!1;try{const{data:n,error:i}=await T.rpc("repair_legacy_user",{p_user_id:e,p_company_id:t,p_role:r});return i?(console.error("RPC repair_legacy_user failed:",i),!1):n===!0}catch(n){return console.error("Error repairing legacy user:",n),!1}},async isLegacyUser(e){if(!P)return!1;try{const{data:t}=await T.from("users").select("company_id, role").eq("id",e).single();if(!t?.company_id)return!1;const{count:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e);return r===0}catch(t){return console.error("Error checking legacy user:",t),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(e,t){if(!P)return[];const r=_e();if(!r)return[];const n=performance.now();try{const{data:i,error:s}=await r.from("disposal_loads").select("*").eq("project_id",e).eq("work_date",t).order("created_at",{ascending:!1}),c=Math.round(performance.now()-n);if(Ke.query("getDisposalLoads",{duration:c,rows:i?.length,project_id:e}),s)throw s;return i||[]}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoads",project_id:e}),i}},async getDisposalLoadsHistory(e,t=14){if(!P)return[];const r=_e();if(!r)return[];const n=performance.now();try{const i=new Date,s=new Date;s.setDate(s.getDate()-t);const{data:c,error:u}=await r.from("disposal_loads").select("*").eq("project_id",e).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",i.toISOString().split("T")[0]).order("work_date",{ascending:!1}),m=Math.round(performance.now()-n);if(Ke.query("getDisposalLoadsHistory",{duration:m,rows:c?.length,project_id:e}),u)throw u;return(c||[]).map(h=>({...h,load_date:h.work_date}))}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoadsHistory",project_id:e}),i}},async addDisposalLoad(e,t,r,n,i,s=null){if(!P)return null;const c=_e();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.from("disposal_loads").insert({project_id:e,user_id:t,work_date:r,load_type:n,load_count:i,notes:s}).select().single();if(m)throw Ke.error("database",{message:m.message,operation:"addDisposalLoad",project_id:e}),m;return u},async updateDisposalLoad(e,t,r,n=null){if(!P)return null;const i=_e();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("disposal_loads").update({load_type:t,load_count:r,notes:n}).eq("id",e).select().single();if(c)throw Ke.error("database",{message:c.message,operation:"updateDisposalLoad"}),c;return s},async deleteDisposalLoad(e){if(!P)return!1;const t=_e();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("disposal_loads").delete().eq("id",e);if(r)throw Ke.error("database",{message:r.message,operation:"deleteDisposalLoad"}),r;return!0},async getDisposalSummary(e,t=null,r=null){if(!P)return[];const n=_e();if(!n)return[];const i=performance.now();try{const{data:s,error:c}=await n.rpc("get_disposal_summary",{p_project_id:e,p_start_date:t,p_end_date:r}),u=Math.round(performance.now()-i);if(Ke.query("getDisposalSummary",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s||[]}catch(s){return Ke.error("database",{message:s.message,operation:"getDisposalSummary",project_id:e}),this.getDisposalSummaryFallback(e,t,r)}},async getDisposalSummaryFallback(e,t,r){let i=(_e()||T).from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e);t&&(i=i.gte("work_date",t)),r&&(i=i.lte("work_date",r));const{data:s,error:c}=await i;if(c)throw c;const u={};return s?.forEach(m=>{u[m.load_type]||(u[m.load_type]={load_type:m.load_type,total_loads:0,days:new Set}),u[m.load_type].total_loads+=m.load_count,u[m.load_type].days.add(m.work_date)}),Object.values(u).map(m=>({load_type:m.load_type,total_loads:m.total_loads,days_with_activity:m.days.size}))},async getWeeklyDisposalSummary(e,t=4){if(!P)return[];const r=_e();if(!r)return[];const n=new Date,i=new Date;i.setDate(i.getDate()-t*7);const{data:s,error:c}=await r.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e).gte("work_date",i.toISOString().split("T")[0]).lte("work_date",n.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(c)throw c;const u={};return s?.forEach(m=>{const h=new Date(m.work_date),g=new Date(h);g.setDate(h.getDate()-h.getDay());const p=g.toISOString().split("T")[0];u[p]||(u[p]={week:p,concrete:0,trash:0,metals:0,hazardous_waste:0}),u[p][m.load_type]+=m.load_count}),Object.values(u).sort((m,h)=>m.week.localeCompare(h.week))},async uploadPhoto(e,t,r,n){if(!P)return null;const i=_e();if(!i)throw new Error("Database client not available");const s=performance.now(),c=n.size||0,u=Date.now(),m=new Uint8Array(6);crypto.getRandomValues(m);const h=Array.from(m,x=>x.toString(36)).join(""),g=n.name?.split(".").pop()||"jpg",p=`${u}-${h}.${g}`,_=`${e}/${t}/${r}/${p}`;try{const{data:x,error:w}=await i.storage.from("tm-photos").upload(_,n,{cacheControl:"3600",upsert:!1}),j=Math.round(performance.now()-s);if(Ke.storage("upload",{company_id:e,project_id:t,size:c,duration:j,success:!w}),w)throw w;return _}catch(x){throw Ke.error("storage",{message:x.message,operation:"uploadPhoto",company_id:e,project_id:t}),x}},async uploadPhotoBase64(e,t,r,n,i="photo.jpg"){if(!P)return null;const s=_e();if(!s)throw new Error("Database client not available");const u=await(await fetch(n)).blob(),m=Date.now(),h=new Uint8Array(6);crypto.getRandomValues(h);const g=Array.from(h,S=>S.toString(36)).join(""),p=i.split(".").pop()||"jpg",_=`${m}-${g}.${p}`,x=`${e}/${t}/${r}/${_}`,{data:w,error:j}=await s.storage.from("tm-photos").upload(x,u,{cacheControl:"3600",upsert:!1,contentType:u.type});if(j)throw j;return x},async resolvePhotoUrl(e){if(!e||!P)return e;let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return e;t=decodeURIComponent(n[1])}catch{return e}else t=e;try{const r=$i(),{data:n,error:i}=await r.storage.from("tm-photos").createSignedUrl(t,3600);return i||!n?.signedUrl?null:n.signedUrl}catch{return null}},async resolvePhotoUrls(e){if(!P||!e?.length)return e||[];const t=[],r=[];for(let n=0;n<e.length;n++){const i=e[n];if(!i)continue;let s;if(i.startsWith("http"))try{const u=new URL(i).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);u&&(s=decodeURIComponent(u[1]))}catch{}else s=i;s&&(t.push(s),r.push(n))}if(!t.length)return e;try{const n=$i(),{data:i,error:s}=await n.storage.from("tm-photos").createSignedUrls(t,3600);if(s||!i)return e;const c=[...e];return i.forEach((u,m)=>{c[r[m]]=u.signedUrl||null}),c}catch{return e}},async deletePhoto(e){if(!P||!e)return;let t;if(e.startsWith("http"))try{const i=new URL(e).pathname.match(/\/tm-photos\/(.+)$/);if(!i)return;t=i[1]}catch{return}else t=e;const{error:r}=await T.storage.from("tm-photos").remove([t]);if(r)throw r},async verifyPhotoAccessible(e){if(!P||!e)return{accessible:!1,error:"Invalid input"};let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return{accessible:!1,error:"Not a tm-photos URL"};t=decodeURIComponent(n[1])}catch{return{accessible:!1,error:"Invalid URL"}}else t=e;try{const{data:r,error:n}=await T.storage.from("tm-photos").createSignedUrl(t,60);return n?{accessible:!1,error:n.message}:{accessible:!!r?.signedUrl,status:200}}catch(r){return{accessible:!1,error:r.message||"Verification failed"}}},async verifyTicketPhotos(e){if(!P)return{verified:!1,issues:[]};try{const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("id",e).single();if(r)throw r;if(!t?.photos||t.photos.length===0)return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",e),{verified:!0,status:"empty",issues:[]};const n=[];for(const s of t.photos){const c=await this.verifyPhotoAccessible(s);c.accessible||n.push({url:s,error:c.error})}const i=n.length===0?"verified":"issues";return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:i,photos_issue_count:n.length}).eq("id",e),{verified:n.length===0,status:i,totalPhotos:t.photos.length,issues:n}}catch(t){return console.error("Error verifying ticket photos:",t),{verified:!1,error:t.message,issues:[]}}},async queuePhotoUpload(e,t,r,n){if(!P)return null;const{data:i,error:s}=await T.from("photo_upload_queue").insert({ticket_id:e,temp_id:t,file_name:r,file_size_bytes:n,status:"pending"}).select().single();return s?(console.error("Error queueing photo upload:",s),null):i},async confirmQueuedUpload(e,t,r){if(!P)return!1;const{data:n,error:i}=await T.rpc("confirm_photo_upload",{p_queue_id:e,p_uploaded_url:t,p_storage_path:r});return i?(console.error("Error confirming photo upload:",i),!1):n===!0},async markQueuedUploadFailed(e,t){if(!P)return!1;const{data:r,error:n}=await T.rpc("mark_photo_upload_failed",{p_queue_id:e,p_error:t});return n?(console.error("Error marking photo upload failed:",n),!1):r===!0},async getPendingPhotoUploads(e){if(!P)return[];const{data:t,error:r}=await T.rpc("get_pending_photo_uploads",{p_ticket_id:e});return r?(console.error("Error getting pending photo uploads:",r),[]):t||[]},async logPhotoOperation(e,t,r={}){if(P)try{await T.from("photo_audit_log").insert({ticket_id:e,cor_id:r.corId||null,operation:t,photo_url:r.photoUrl||null,storage_path:r.storagePath||null,details:r.metadata?r.metadata:null,error_message:r.error||null,triggered_by:r.triggeredBy||"system"})}catch(n){console.error("Error logging photo operation:",n)}},async saveExportSnapshot(e,t,r={}){if(!P)return null;const{exportType:n="pdf",exportReason:i=null,clientEmail:s=null,clientName:c=null}=r;try{const{data:u,error:m}=await T.from("cor_export_snapshots").insert({cor_id:e,export_type:n,export_reason:i,cor_data:t.cor_data,tickets_data:t.tickets_data,photos_manifest:t.photos_manifest,totals_snapshot:t.totals_snapshot,checksum:t.checksum,client_email:s,client_name:c}).select().single();if(m)throw m;return u}catch(u){return console.error("Error saving export snapshot:",u),null}},async getExportSnapshots(e){if(!P)return[];const{data:t,error:r}=await T.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",e).order("exported_at",{ascending:!1});return r?(console.error("Error fetching export snapshots:",r),[]):t||[]},async getExportSnapshot(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_snapshots").select("*").eq("id",e).single();return r?(console.error("Error fetching export snapshot:",r),null):t},async requestCORExport(e,t,r={}){if(!P)return null;try{const n=await T.auth.getUser(),{data:i,error:s}=await T.rpc("request_cor_export",{p_cor_id:e,p_idempotency_key:t,p_options:r,p_requested_by:n?.data?.user?.id||null});if(s)throw s;return i?.[0]||null}catch(n){throw Ke.error("database",{message:n.message,operation:"requestCORExport",extra:{corId:e}}),n}},async getExportJob(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_jobs").select("*").eq("id",e).single();return r?(console.error("Error fetching export job:",r),null):t},async getExportJobs(e,t=10){if(!P)return[];const{data:r,error:n}=await T.from("cor_export_jobs").select("*").eq("cor_id",e).order("created_at",{ascending:!1}).limit(t);return n?(console.error("Error fetching export jobs:",n),[]):r||[]},async updateExportJobStatus(e,t,r={}){if(!P)return null;try{const{data:n,error:i}=await T.rpc("update_export_job_status",{p_job_id:e,p_status:t,p_snapshot_id:r.snapshotId||null,p_pdf_url:r.pdfUrl||null,p_error:r.error||null,p_error_details:r.errorDetails||null,p_metrics:r.metrics||null});if(i)throw i;return n}catch(n){throw Ke.error("database",{message:n.message,operation:"updateExportJobStatus",extra:{jobId:e,status:t}}),n}},async getCurrentCORSnapshot(e){if(!P)return null;const{data:t}=await T.from("change_orders").select("version, last_snapshot_version").eq("id",e).single();if(!t||t.version!==t.last_snapshot_version)return null;const{data:r}=await T.from("cor_export_snapshots").select("*").eq("cor_id",e).eq("is_current",!0).single();return r||null},async saveCORSnapshot(e,t){if(!P)return null;try{await T.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",e.corId);const r=await T.auth.getUser(),{data:n,error:i}=await T.from("cor_export_snapshots").insert({id:e.snapshotId,cor_id:e.corId,job_id:t,cor_version:e.corVersion,cor_data:e.corData,tickets_data:e.ticketsData,photos_manifest:e.photoManifest,totals_snapshot:e.totals,checksum:e.checksum,is_current:!0,exported_by:r?.data?.user?.id||null}).select().single();if(i)throw i;return await T.from("change_orders").update({last_snapshot_version:e.corVersion}).eq("id",e.corId),n}catch(r){throw Ke.error("database",{message:r.message,operation:"saveCORSnapshot",extra:{corId:e.corId}}),r}},async updateCORAggregatedStats(e){if(P)try{await T.rpc("update_cor_aggregated_stats",{p_cor_id:e})}catch(t){console.error("Error updating COR aggregated stats:",t)}},async getCrewCheckin(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),{data:i,error:s}=await n.from("crew_checkins").select("*").eq("project_id",e).eq("check_in_date",r).maybeSingle();return s&&console.error("Error fetching crew checkin:",s),i},async saveCrewCheckin(e,t,r=null,n=null){if(!P)return null;const i=n||new Date().toISOString().split("T")[0];if(!Ln()){const m={id:Xr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Ad(m),await dn(Zt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const s=_e();if(!s){const m={id:Xr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Ad(m),await dn(Zt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const{data:c,error:u}=await s.from("crew_checkins").upsert({project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Xr(),project_id:e,check_in_date:i,workers:t,_offline:!0};return await Ad(m),await dn(Zt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}throw console.error("Error saving crew checkin:",u),u}return c&&Ad(c).catch(m=>console.error("Failed to cache checkin:",m)),c},async addCrewMember(e,t,r=null){if(!P)return null;const n=await this.getCrewCheckin(e),i=n?.workers||[];return i.find(s=>s.name.toLowerCase()===t.name.toLowerCase())?n:(i.push(t),await this.saveCrewCheckin(e,i,r))},async removeCrewMember(e,t){if(!P)return null;const r=await this.getCrewCheckin(e);if(!r)return null;const n=r.workers.filter(i=>i.name.toLowerCase()!==t.toLowerCase());return await this.saveCrewCheckin(e,n,r.created_by)},async getCrewCheckinHistory(e,t=30){if(!P)return[];const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("crew_checkins").select("*").eq("project_id",e).order("check_in_date",{ascending:!1}).limit(t);return i?(console.error("Error fetching crew history:",i),[]):n||[]},async getRecentWorkers(e,t=30){if(!P)return[];const r=await this.getCrewCheckinHistory(e,t),n=new Map;return r.forEach(i=>{(i.workers||[]).forEach(s=>{const c=s.name.toLowerCase();n.has(c)||n.set(c,{name:s.name,role:s.role,labor_class_id:s.labor_class_id||null,lastSeen:i.check_in_date})})}),Array.from(n.values()).sort((i,s)=>i.name.localeCompare(s.name))},async getLaborRates(e,t=null,r=null){if(!P)return[];let n=T.from("labor_rates").select("*").eq("company_id",e);t&&(n=n.eq("work_type",t)),r&&(n=n.eq("job_type",r));const{data:i,error:s}=await n;return s?(console.error("Error fetching labor rates:",s),[]):i||[]},async calculateManDayCosts(e,t,r,n){if(!P)return{totalCost:0,totalManDays:0,breakdown:[]};const i=await this.getCrewCheckinHistory(e,365),s=await this.getLaborRates(t,r,n),c={};s.forEach(p=>{c[p.role.toLowerCase()]=parseFloat(p.regular_rate)||0});let u=0,m=0;const h={},g=[];return i.forEach(p=>{const _=p.workers||[];let x=0;const w={};_.forEach(j=>{const S=(j.role||"laborer").toLowerCase(),O=c[S]||0;w[S]||(w[S]={count:0,cost:0}),w[S].count++,w[S].cost+=O,x+=O,h[S]||(h[S]={count:0,cost:0,rate:O}),h[S].count++,h[S].cost+=O}),u+=x,m+=_.length,g.push({date:p.check_in_date,workers:_.length,cost:x,breakdown:w})}),{totalCost:u,totalManDays:m,byRole:h,byDate:g,daysWorked:i.length}},async getDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),{data:i,error:s}=await n.from("daily_reports").select("*").eq("project_id",e).eq("report_date",r).maybeSingle();return s&&console.error("Error fetching daily report:",s),i},async compileDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),[i,s,c]=await Promise.all([this.getCrewCheckin(e,r),n.from("areas").select("*").eq("project_id",e),n.from("t_and_m_tickets").select("*").eq("project_id",e).eq("work_date",r)]),u=s?.data||[],m=c?.data||[],h=u.filter(p=>p.status==="done"&&p.completed_at?.startsWith(r)),g=m.reduce((p,_)=>p+(_.photos?.length||0),0);return{crew_count:i?.workers?.length||0,crew_list:i?.workers||[],tasks_completed:h.length,tasks_total:u.length,completed_tasks:h.map(p=>({name:p.name,group:p.group_name})),tm_tickets_count:m.length,photos_count:g}},async saveDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!Ln()){const u={id:Xr(),project_id:e,report_date:n,...t,updated_at:new Date().toISOString(),_offline:!0};return await Ts(u),u}const i=_e(),{data:s,error:c}=await i.from("daily_reports").upsert({project_id:e,report_date:n,...t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u={id:Xr(),project_id:e,report_date:n,...t,_offline:!0};return await Ts(u),u}throw console.error("Error saving daily report:",c),c}return s&&Ts(s).catch(u=>console.error("Failed to cache report:",u)),s},async submitDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!Ln()){const m=await zz(e,n),h={id:Xr(),project_id:e,report_date:n,...m||{},status:"pending_sync",submitted_by:t,submitted_at:new Date().toISOString(),_offline:!0};return await Ts(h),await dn(Zt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:m||{},submittedBy:t}),h}const i=await this.compileDailyReport(e,n),s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("daily_reports").upsert({project_id:e,report_date:n,...i,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Xr(),project_id:e,report_date:n,...i,status:"pending_sync",submitted_by:t,_offline:!0};return await Ts(m),await dn(Zt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:i,submittedBy:t}),m}throw console.error("Error submitting daily report:",u),u}return c&&Ts(c).catch(m=>console.error("Failed to cache report:",m)),c},async getDailyReports(e,t=30){if(!P)return[];const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("daily_reports").select("*").eq("project_id",e).order("report_date",{ascending:!1}).limit(t);return i?(console.error("Error fetching daily reports:",i),[]):n||[]},async sendMessage(e,t,r,n,i=null,s=null,c="general",u=null){if(!P)return null;if(!Ln()){const g={id:Xr(),project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u,created_at:new Date().toISOString(),_offline:!0};return await YS(g),await dn(Zt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),g}const{data:m,error:h}=await T.from("messages").insert({project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const g={id:Xr(),project_id:e,sender_type:r,sender_name:n,message:t,created_at:new Date().toISOString(),_offline:!0};return await YS(g),await dn(Zt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),g}throw console.error("Error sending message:",h),h}return m},async getMessages(e,t=50){if(!P)return[];const r=_e(),{data:n,error:i}=await r.from("messages").select("*").eq("project_id",e).order("created_at",{ascending:!1}).limit(t);return i?[]:n||[]},async getUnreadCount(e,t){if(!P)return 0;const r=_e(),n=t==="field"?"office":"field",{count:i,error:s}=await r.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1);return s?0:i||0},async markMessagesRead(e,t){if(!P)return;const r=_e(),n=t==="field"?"office":"field";await r.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1)},async createMaterialRequest(e,t,r,n=null,i="normal",s=null){if(!P)return null;if(!Ln()){const m={id:Xr(),project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await dn(Zt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}const{data:c,error:u}=await T.from("material_requests").insert({project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Xr(),project_id:e,items:t,requested_by:r,status:"pending_sync",_offline:!0};return await dn(Zt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}throw console.error("Error creating material request:",u),u}return c},async getMaterialRequests(e,t=null){if(!P)return[];let r=T.from("material_requests").select("*").eq("project_id",e).order("created_at",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching material requests:",i),[]):n||[]},async getPendingRequestsCount(e){if(!P)return 0;const{count:t,error:r}=await T.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("status","pending");return r?0:t||0},async updateMaterialRequest(e,t,r,n=null,i=null){if(!P)return null;const s={status:t,responded_by:r,responded_at:new Date().toISOString(),response_notes:n,updated_at:new Date().toISOString()};i&&(s.expected_delivery=i),t==="delivered"&&(s.delivered_at=new Date().toISOString());const{data:c,error:u}=await T.from("material_requests").update(s).eq("id",e).select().single();if(u)throw console.error("Error updating material request:",u),u;return c},generateShareToken(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=new Uint8Array(12);return crypto.getRandomValues(t),Array.from(t,r=>e[r%e.length]).join("")},async createProjectShare(e,t,r,n=null){if(!P){const m=Oe();m.projectShares||(m.projectShares=[]);const h={id:crypto.randomUUID(),project_id:e,share_token:this.generateShareToken(),created_by:t,expires_at:n,is_active:!0,permissions:r,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return m.projectShares.push(h),Ge(m),h}const{data:i,error:s}=await T.rpc("generate_share_token");if(s)throw console.error("Error generating share token:",s),s;const{data:c,error:u}=await T.from("project_shares").insert({project_id:e,share_token:i,created_by:t,expires_at:n,permissions:r}).select().single();if(u)throw console.error("Error creating project share:",u),u;return c},async getShareByToken(e){if(!P){const n=Oe();if(!n.projectShares)return null;const i=n.projectShares.find(s=>s.share_token===e&&s.is_active&&(!s.expires_at||new Date(s.expires_at)>new Date));return i&&(i.view_count++,i.last_viewed_at=new Date().toISOString(),Ge(n)),i}const{data:t,error:r}=await T.from("project_shares").select("*, projects(*)").eq("share_token",e).eq("is_active",!0).single();return r?(console.error("Error fetching share by token:",r),null):t.expires_at&&new Date(t.expires_at)<new Date?null:(await T.rpc("increment_share_view_count",{token:e}),t)},async getProjectShares(e){if(!P){const n=Oe();return n.projectShares?n.projectShares.filter(i=>i.project_id===e):[]}const{data:t,error:r}=await T.from("project_shares").select("*, users(name, email)").eq("project_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching project shares:",r),[]):t||[]},async updateProjectShare(e,t){if(!P){const i=Oe();if(!i.projectShares)return null;const s=i.projectShares.findIndex(c=>c.id===e);return s===-1?null:(i.projectShares[s]={...i.projectShares[s],...t,updated_at:new Date().toISOString()},Ge(i),i.projectShares[s])}const{data:r,error:n}=await T.from("project_shares").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating project share:",n),n;return r},async revokeProjectShare(e){return this.updateProjectShare(e,{is_active:!1})},async deleteProjectShare(e){if(!P){const r=Oe();if(!r.projectShares)return;r.projectShares=r.projectShares.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("project_shares").delete().eq("id",e);if(t)throw console.error("Error deleting project share:",t),t},async getPublicProjectData(e){const t=await this.getShareByToken(e);if(!t)return null;const r=t.project_id||t.projects?.id;if(!P){const s=Oe(),c=s.projects.find(p=>p.id===r);if(!c)return null;const u=s.areas.filter(p=>p.project_id===r),m=u.reduce((p,_)=>p+parseFloat(_.weight||0),0),h=u.filter(p=>p.status==="done").reduce((p,_)=>p+parseFloat(_.weight||0),0),g=m>0?Math.round(h/m*100):0;return{share:t,project:c,progress:g,areas:t.permissions.progress?u:[],photos:[],dailyReports:[],tmTickets:[]}}const n=t.projects||await this.getProject(r);if(!n)return null;const i={share:t,project:n,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(t.permissions.progress){i.areas=await this.getAreas(r);const s=i.areas.reduce((u,m)=>u+parseFloat(m.weight||0),0),c=i.areas.filter(u=>u.status==="done").reduce((u,m)=>u+parseFloat(m.weight||0),0);i.progress=s>0?Math.round(c/s*100):0}if(t.permissions.photos){const{data:s}=await T.from("t_and_m_tickets").select("photos, work_date").eq("project_id",r).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);i.photos=s?.flatMap(c=>(c.photos||[]).map(u=>({url:u,date:c.work_date})))||[]}if(t.permissions.daily_reports){const{data:s}=await T.from("daily_reports").select("*").eq("project_id",r).order("report_date",{ascending:!1}).limit(10);i.dailyReports=s||[]}return t.permissions.tm_tickets&&(i.tmTickets=await this.getTMTickets(r)),i},async createInjuryReport(e){if(!P){const n=Oe();n.injuryReports||(n.injuryReports=[]);const i={id:crypto.randomUUID(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return n.injuryReports.push(i),Ge(n),i}const{data:t,error:r}=await T.from("injury_reports").insert(e).select().single();if(r)throw console.error("Error creating injury report:",r),r;return t},async getInjuryReports(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.filter(i=>i.project_id===e).sort((i,s)=>new Date(s.incident_date)-new Date(i.incident_date)):[]}const{data:t,error:r}=await T.from("injury_reports").select("*").eq("project_id",e).order("incident_date",{ascending:!1});return r?(console.error("Error fetching injury reports:",r),[]):t||[]},async getCompanyInjuryReports(e,t=null){if(!P){const s=Oe();if(!s.injuryReports)return[];let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>u.status===t)),c.sort((u,m)=>new Date(m.incident_date)-new Date(u.incident_date))}let r=T.from("injury_reports").select("*, projects(name)").eq("company_id",e).order("incident_date",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching company injury reports:",i),[]):n||[]},async getInjuryReport(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.find(i=>i.id===e):null}const{data:t,error:r}=await T.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",e).single();return r?(console.error("Error fetching injury report:",r),null):t},async updateInjuryReport(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(c=>c.id===e);return s===-1?null:(i.injuryReports[s]={...i.injuryReports[s],...t,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s])}const{data:r,error:n}=await T.from("injury_reports").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating injury report:",n),n;return r},async closeInjuryReport(e,t){return this.updateInjuryReport(e,{status:"closed",closed_at:new Date().toISOString(),closed_by:t})},async deleteInjuryReport(e){if(!P){const r=Oe();if(!r.injuryReports)return;r.injuryReports=r.injuryReports.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("injury_reports").delete().eq("id",e);if(t)throw console.error("Error deleting injury report:",t),t},async getInjuryStatistics(e,t=null,r=null){if(!P){const s=Oe();if(!s.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>new Date(u.incident_date)>=new Date(t))),r&&(c=c.filter(u=>new Date(u.incident_date)<=new Date(r))),{total_incidents:c.length,minor_injuries:c.filter(u=>u.injury_type==="minor").length,serious_injuries:c.filter(u=>u.injury_type==="serious").length,critical_injuries:c.filter(u=>u.injury_type==="critical").length,near_misses:c.filter(u=>u.injury_type==="near_miss").length,osha_recordable:c.filter(u=>u.osha_recordable).length,total_days_away:c.reduce((u,m)=>u+(m.days_away_from_work||0),0),total_restricted_days:c.reduce((u,m)=>u+(m.restricted_work_days||0),0)}}const{data:n,error:i}=await T.rpc("get_injury_statistics",{comp_id:e,start_date:t,end_date:r});return i?(console.error("Error fetching injury statistics:",i),null):n[0]||null},async addWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.push(t),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.push(t),this.updateInjuryReport(e,{witnesses:n})},async removeWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.splice(t,1),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.splice(t,1),this.updateInjuryReport(e,{witnesses:n})},async getCompanyUsers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",e);return r?(console.error("Error fetching company users:",r),[]):t?.map(n=>({id:n.user_id,name:n.users?.name||n.users?.email,email:n.users?.email,role:n.role}))||[]}return[]},async getProjectNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",e);return n?(console.error("Error fetching notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.project_id===e):[]},async getUserNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",e);return n?(console.error("Error fetching user notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.user_id===e):[]},async setNotificationPreference(e,t,r){if(P){const{data:c,error:u}=await T.from("notification_preferences").upsert({project_id:e,user_id:t,notification_types:r,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(u)throw console.error("Error setting notification preference:",u),u;return c}const n=Oe();n.notificationPreferences||(n.notificationPreferences=[]);const i=n.notificationPreferences.findIndex(c=>c.project_id===e&&c.user_id===t),s={id:i>=0?n.notificationPreferences[i].id:crypto.randomUUID(),project_id:e,user_id:t,notification_types:r,created_at:i>=0?n.notificationPreferences[i].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i>=0?n.notificationPreferences[i]=s:n.notificationPreferences.push(s),Ge(n),s},async removeNotificationPreference(e,t){if(P){const{error:n}=await T.from("notification_preferences").delete().eq("project_id",e).eq("user_id",t);if(n)throw console.error("Error removing notification preference:",n),n;return!0}const r=Oe();return r.notificationPreferences&&(r.notificationPreferences=r.notificationPreferences.filter(n=>!(n.project_id===e&&n.user_id===t)),Ge(r)),!0},async setProjectNotificationPreferences(e,t){const r=[];for(const n of t)if(n.notificationTypes&&n.notificationTypes.length>0){const i=await this.setNotificationPreference(e,n.userId,n.notificationTypes);r.push(i)}else await this.removeNotificationPreference(e,n.userId);return r},async getNotificationPresets(e){if(P){const{data:r,error:n}=await T.from("notification_presets").select("*").eq("company_id",e).order("name");return n?(console.error("Error fetching notification presets:",n),[]):r||[]}const t=Oe();return t.notificationPresets?t.notificationPresets.filter(r=>r.company_id===e):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:e},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:e},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:e},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:e}]},async createNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").insert({company_id:e,name:t,notification_types:r}).select().single();if(c)throw console.error("Error creating notification preset:",c),c;return s}const n=Oe();n.notificationPresets||(n.notificationPresets=[]);const i={id:crypto.randomUUID(),company_id:e,name:t,notification_types:r,created_at:new Date().toISOString()};return n.notificationPresets.push(i),Ge(n),i},async updateNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").update({name:t,notification_types:r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(c)throw console.error("Error updating notification preset:",c),c;return s}const n=Oe();if(!n.notificationPresets)return null;const i=n.notificationPresets.findIndex(s=>s.id===e);return i===-1?null:(n.notificationPresets[i]={...n.notificationPresets[i],name:t,notification_types:r,updated_at:new Date().toISOString()},Ge(n),n.notificationPresets[i])},async deleteNotificationPreset(e){if(P){const{error:r}=await T.from("notification_presets").delete().eq("id",e);if(r)throw console.error("Error deleting notification preset:",r),r;return!0}const t=Oe();return t.notificationPresets&&(t.notificationPresets=t.notificationPresets.filter(r=>r.id!==e),Ge(t)),!0},async getDumpSites(e){if(P){const{data:r,error:n}=await T.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",e).eq("active",!0).order("name");return n?(console.error("Error fetching dump sites:",n),[]):r||[]}return(Oe().dumpSites||[]).filter(r=>r.company_id===e&&r.active)},async createDumpSite(e,t,r="",n=""){if(P){const{data:c,error:u}=await T.from("dump_sites").insert({company_id:e,name:t,address:r,notes:n,active:!0}).select().single();if(u)throw console.error("Error creating dump site:",u),u;return c}const i=Oe();i.dumpSites||(i.dumpSites=[]);const s={id:crypto.randomUUID(),company_id:e,name:t,address:r,notes:n,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return i.dumpSites.push(s),Ge(i),s},async updateDumpSite(e,t){if(P){const{data:i,error:s}=await T.from("dump_sites").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error updating dump site:",s),s;return i}const r=Oe();if(!r.dumpSites)return null;const n=r.dumpSites.findIndex(i=>i.id===e);return n===-1?null:(r.dumpSites[n]={...r.dumpSites[n],...t},Ge(r),r.dumpSites[n])},async deleteDumpSite(e){return this.updateDumpSite(e,{active:!1})},async setDumpSiteRate(e,t,r,n="load"){if(P){const{data:u}=await T.from("dump_site_rates").select("id").eq("dump_site_id",e).eq("waste_type",t).maybeSingle();if(u){const{data:m,error:h}=await T.from("dump_site_rates").update({estimated_cost_per_load:r,unit:n}).eq("id",u.id).select().single();if(h)throw console.error("Error updating dump site rate:",h),h;return m}else{const{data:m,error:h}=await T.from("dump_site_rates").insert({dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n}).select().single();if(h)throw console.error("Error inserting dump site rate:",h),h;return m}}const i=Oe();i.dumpSiteRates||(i.dumpSiteRates=[]);const s=i.dumpSiteRates.findIndex(u=>u.dump_site_id===e&&u.waste_type===t),c={id:s>=0?i.dumpSiteRates[s].id:crypto.randomUUID(),dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n,created_at:new Date().toISOString()};return s>=0?i.dumpSiteRates[s]=c:i.dumpSiteRates.push(c),Ge(i),c},async getDumpSiteRates(e){if(P){const{data:r,error:n}=await T.from("dump_site_rates").select("*").eq("dump_site_id",e);return n?(console.error("Error fetching dump site rates:",n),[]):r||[]}return(Oe().dumpSiteRates||[]).filter(r=>r.dump_site_id===e)},async getHaulOffs(e){if(P){const{data:r,error:n}=await T.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",e).order("work_date",{ascending:!1});return n?(console.error("Error fetching haul-offs:",n),[]):r||[]}return(Oe().haulOffs||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.work_date)-new Date(r.work_date))},async createHaulOff(e,t){const r={project_id:e,dump_site_id:t.dumpSiteId,waste_type:t.wasteType,loads:t.loads,hauling_company:t.haulingCompany||"",work_date:t.workDate,notes:t.notes||"",estimated_cost:t.estimatedCost||0,created_by:t.createdBy||""};if(P){const{data:s,error:c}=await T.from("haul_offs").insert(r).select().single();if(c)throw console.error("Error creating haul-off:",c),c;return s}const n=Oe();n.haulOffs||(n.haulOffs=[]);const i={...r,id:crypto.randomUUID(),created_at:new Date().toISOString()};return n.haulOffs.push(i),Ge(n),i},async calculateHaulOffCosts(e){const t=await this.getHaulOffs(e);let r=0,n=0;const i={},s=[],c={};t.forEach(m=>{const h=parseFloat(m.estimated_cost)||0,g=parseInt(m.loads)||0;r+=h,n+=g,i[m.waste_type]||(i[m.waste_type]={loads:0,cost:0}),i[m.waste_type].loads+=g,i[m.waste_type].cost+=h,c[m.work_date]||(c[m.work_date]={date:m.work_date,loads:0,cost:0}),c[m.work_date].loads+=g,c[m.work_date].cost+=h}),Object.values(c).sort((m,h)=>new Date(h.date)-new Date(m.date)).forEach(m=>s.push(m));const u=s.length;return{totalCost:r,totalLoads:n,byWasteType:i,byDate:s,daysWithHaulOff:u,avgDailyHaulOffCost:u>0?r/u:0}},subscribeToHaulOffs(e,t){return P?T.channel(`haul_offs:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${e}`},t).subscribe():null},...Bz,async createFolder(e,t,r){const n=_e(),{data:i,error:s}=await n.from("document_folders").insert({company_id:e,project_id:t,name:r.name,description:r.description||null,icon:r.icon||"folder",color:r.color||"blue",sort_order:r.sort_order||0,created_by:(await n.auth.getUser()).data.user?.id}).select().single();if(s)throw s;return i},async getProjectFolders(e){const t=_e(),{data:r,error:n}=await t.from("document_folders").select("*").eq("project_id",e).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(n)throw n;const i=r.map(s=>s.id);if(i.length>0){const{data:s,error:c}=await t.from("documents").select("folder_id").in("folder_id",i).is("archived_at",null).eq("is_current",!0);if(!c&&s){const u={};s.forEach(m=>{u[m.folder_id]=(u[m.folder_id]||0)+1}),r.forEach(m=>{m.document_count=u[m.id]||0})}}return r},async updateFolder(e,t){const r=_e(),{data:n,error:i}=await r.from("document_folders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n},async deleteFolder(e){const t=_e();await t.from("documents").update({folder_id:null}).eq("folder_id",e);const{error:r}=await t.from("document_folders").delete().eq("id",e);if(r)throw r;return!0},async reorderFolders(e,t){const r=_e(),n=t.map(({id:i,sort_order:s})=>r.from("document_folders").update({sort_order:s,updated_at:new Date().toISOString()}).eq("id",i).eq("project_id",e));return await Promise.all(n),!0},async getFolderDocuments(e,t={}){const r=_e(),{page:n=0,limit:i=25}=t;let s=r.from("documents").select("*",{count:"exact"}).eq("folder_id",e).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);const{data:c,error:u,count:m}=await s;if(u)throw u;return{documents:c||[],totalCount:m||0,hasMore:(m||0)>(n+1)*i}},async moveDocumentToFolder(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").update({folder_id:t}).eq("id",e).select().single();if(i)throw i;return n},async getUnfiledDocuments(e,t={}){const r=_e(),{page:n=0,limit:i=25}=t,{data:s,error:c,count:u}=await r.from("documents").select("*",{count:"exact"}).eq("project_id",e).is("folder_id",null).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);if(c)throw c;return{documents:s||[],totalCount:u||0,hasMore:(u||0)>(n+1)*i}},async uploadDocument(e,t,r,n={}){const i=_e(),s=Date.now(),c=250*1024*1024,{data:u}=await i.from("documents").select("file_size_bytes").eq("project_id",t).is("archived_at",null),m=u?.reduce((j,S)=>j+(S.file_size_bytes||0),0)||0;if(m+r.size>c){const j=Math.round(m/1024/1024),S=Math.round(c/1024/1024);throw new Error(`Project storage limit reached (${j}/${S} MB). Contact support to upgrade.`)}const h=Date.now(),g=new Uint8Array(6);crypto.getRandomValues(g);const p=Array.from(g,j=>j.toString(36)).join(""),_=r.name.split(".").pop()?.toLowerCase()||"bin",x=`${h}-${p}.${_}`,w=`${e}/${t}/documents/${x}`;try{const{data:j,error:S}=await i.storage.from("project-documents").upload(w,r,{cacheControl:"3600",upsert:!1});if(S)throw S;const{data:O}=i.storage.from("project-documents").getPublicUrl(w),C=O.publicUrl,A=n.category==="contracts"?"pending":"approved",{data:k,error:D}=await i.from("documents").insert({company_id:e,project_id:t,name:n.name||r.name.replace(/\.[^/.]+$/,""),description:n.description||null,file_name:r.name,file_size_bytes:r.size,mime_type:r.type,storage_path:w,folder_id:n.folderId||null,category:n.category||"general",tags:n.tags||[],visibility:n.visibility||"all",approval_status:A,resource_type:n.resourceType||null,resource_id:n.resourceId||null,uploaded_by:(await i.auth.getUser()).data?.user?.id}).select().single();if(D)throw D;const M=Date.now()-s;return Ke.storage("document_upload",{company_id:e,project_id:t,file_size:r.size,mime_type:r.type,duration:M,success:!0}),{...k,url:C}}catch(j){throw Ke.error("storage",{message:j.message,operation:"uploadDocument",company_id:e,project_id:t}),j}},async getProjectDocuments(e,{category:t=null,page:r=0,limit:n=25,includeArchived:i=!1}={}){let c=_e().from("documents").select("*",{count:"exact"}).eq("project_id",e).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(r*n,(r+1)*n-1);i||(c=c.is("archived_at",null)),t&&t!=="all"&&(c=c.eq("category",t));const{data:u,error:m,count:h}=await c;if(m)throw m;return{documents:u||[],totalCount:h||0,hasMore:(r+1)*n<(h||0),page:r,limit:n}},async getDocument(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("*").eq("id",e).single();if(n)throw n;return r},async getDocumentVersions(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("id, parent_document_id").eq("id",e).single();if(n)throw n;const i=r.parent_document_id||e,{data:s,error:c}=await t.from("documents").select("*").or(`id.eq.${i},parent_document_id.eq.${i}`).order("version",{ascending:!1});if(c)throw c;return s||[]},async uploadDocumentVersion(e,t,r,n,i={}){const s=_e(),{data:c,error:u}=await s.from("documents").select("*").eq("id",e).single();if(u)throw u;const{data:m}=await s.from("documents").select("version").or(`id.eq.${e},parent_document_id.eq.${e}`).order("version",{ascending:!1}).limit(1),h=(m?.[0]?.version||1)+1;await s.from("documents").update({is_current:!1}).or(`id.eq.${e},parent_document_id.eq.${e}`);const g=await this.uploadDocument(t,r,n,{name:i.name||c.name,description:i.description||c.description,category:c.category,visibility:c.visibility,tags:c.tags,resourceType:c.resource_type,resourceId:c.resource_id}),{data:p,error:_}=await s.from("documents").update({version:h,is_current:!0,parent_document_id:e}).eq("id",g.id).select().single();if(_)throw _;return await s.from("document_audit_log").insert({document_id:g.id,project_id:r,company_id:t,operation:"version_created",details:{version:h,parent_id:e},triggered_by:"user",user_id:(await s.auth.getUser()).data?.user?.id}),{...g,...p}},async updateDocument(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").update({name:t.name,description:t.description,category:t.category,visibility:t.visibility,tags:t.tags}).eq("id",e).select().single();if(i)throw i;return n},async archiveDocument(e){const t=_e(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:new Date().toISOString(),archived_by:r}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"deleted",triggered_by:"user",user_id:r}),n},async restoreDocument(e){const t=_e(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:null,archived_by:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"restored",triggered_by:"user",user_id:r}),n},async deleteDocumentPermanently(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("storage_path, company_id, project_id").eq("id",e).single();if(n)throw n;r.storage_path&&await t.storage.from("project-documents").remove([r.storage_path]);const{error:i}=await t.from("documents").delete().eq("id",e);if(i)throw i;return!0},async linkDocumentToResource(e,t,r){const n=_e(),{data:i,error:s}=await n.from("documents").update({resource_type:t,resource_id:r}).eq("id",e).select().single();if(s)throw s;return await n.from("document_audit_log").insert({document_id:e,project_id:i.project_id,company_id:i.company_id,operation:"linked",details:{resource_type:t,resource_id:r},triggered_by:"user",user_id:(await n.auth.getUser()).data?.user?.id}),i},async unlinkDocumentFromResource(e){const t=_e(),{data:r}=await t.from("documents").select("resource_type, resource_id, project_id, company_id").eq("id",e).single(),{data:n,error:i}=await t.from("documents").update({resource_type:null,resource_id:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:r.project_id,company_id:r.company_id,operation:"unlinked",details:{resource_type:r.resource_type,resource_id:r.resource_id},triggered_by:"user",user_id:(await t.auth.getUser()).data?.user?.id}),n},async getResourceDocuments(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").select("*").eq("resource_type",e).eq("resource_id",t).is("archived_at",null).order("uploaded_at",{ascending:!1});if(i)throw i;return n||[]},async approveDocument(e){const t=_e(),{data:r,error:n}=await t.rpc("approve_document",{p_document_id:e});if(n)throw n;return r},async rejectDocument(e,t){const r=_e(),{data:n,error:i}=await r.rpc("reject_document",{p_document_id:e,p_reason:t});if(i)throw i;return n},async getPendingDocuments(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("*, project:projects(name)").eq("company_id",e).eq("approval_status","pending").is("archived_at",null).order("uploaded_at",{ascending:!1});if(n)throw n;return r||[]},async searchDocuments(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").select("*").eq("project_id",e).eq("is_current",!0).is("archived_at",null).or(`name.ilike.%${t}%,description.ilike.%${t}%`).order("uploaded_at",{ascending:!1}).limit(20);if(i)throw i;return n||[]},async logDocumentAccess(e,t="downloaded"){const r=_e(),{data:n}=await r.from("documents").select("project_id, company_id").eq("id",e).single();n&&await r.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:t,triggered_by:"user",user_id:(await r.auth.getUser()).data?.user?.id})}};Ib(async e=>{if(e&&P)try{await LN(be)}catch(t){console.error("Error syncing pending actions:",t)}});const WZ=Object.freeze(Object.defineProperty({__proto__:null,auth:of,clearFieldSession:jy,db:be,drawRequestOps:Hz,equipmentOps:$z,getConnectionStatus:Ln,getPendingActionCount:nf,getSupabaseClient:$i,isFieldMode:Sy,isSupabaseConfigured:P,onConnectionChange:Ib,supabase:T,syncPendingActions:LN},Symbol.toStringTag,{value:"Module"})),IN=y.createContext(),fn={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function Td({children:e,companyId:t}){const[r,n]=y.useState(fn),[i,s]=y.useState(!0);y.useEffect(()=>{t?c(t):u()},[t]),y.useEffect(()=>{g(r)},[r]);const c=async w=>{try{if(s(!0),!P){n(fn),s(!1);return}const{data:j,error:S}=await T.from("company_branding").select("*").eq("company_id",w).single();S?(S.code==="PGRST116"?await m(w):console.error("Error loading branding:",S),n(fn)):n({...fn,...j})}catch(j){console.error("Error in loadBranding:",j),n(fn)}finally{s(!1)}},u=async()=>{try{s(!0);const w=window.location.hostname;if(w==="localhost"||w==="127.0.0.1"){n(fn),s(!1);return}if(!P){n(fn),s(!1);return}const{data:j,error:S}=await T.rpc("get_branding_by_domain",{domain_name:w});S||!j||j.length===0?n(fn):n({...fn,...j[0]})}catch(w){console.error("Error loading branding by domain:",w),n(fn)}finally{s(!1)}},m=async w=>{try{const{data:j,error:S}=await T.from("company_branding").insert({company_id:w,...fn}).select().single();S&&console.error("Error creating default branding:",S)}catch(j){console.error("Error in createDefaultBranding:",j)}},h=y.useCallback(async w=>{try{if(!P)return n(D=>({...D,...w})),{success:!0};if(!t)return{success:!1,error:"No company ID"};const j={},S=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const D of S)w[D]!==void 0&&(j[D]=w[D]);const{data:O,error:C}=await T.from("company_branding").select("id").eq("company_id",t).single();if(C&&C.code==="PGRST116"){const{data:D,error:M}=await T.from("company_branding").insert({company_id:t,...j}).select().single();return M?(console.error("Error creating branding:",M),{success:!1,error:M.message}):(n({...fn,...D}),{success:!0,data:D})}const{data:A,error:k}=await T.from("company_branding").update(j).eq("company_id",t).select().single();return k?(console.error("Error updating branding:",k),{success:!1,error:k.message}):(n({...fn,...A}),{success:!0,data:A})}catch(j){return console.error("Error in updateBranding:",j),{success:!1,error:j.message}}},[t]),g=w=>{const j=document.documentElement;if(j.style.setProperty("--primary-color",w.primary_color),j.style.setProperty("--secondary-color",w.secondary_color),w.favicon_url){let S=document.querySelector("link[rel*='icon']");S||(S=document.createElement("link"),S.rel="icon",document.head.appendChild(S)),S.href=w.favicon_url}document.title=w.custom_app_name||"FieldSync"},p=y.useCallback(async(w,j)=>{try{if(!P)return{success:!0,url:URL.createObjectURL(w)};const S=w.name.split(".").pop(),C=`branding/${`${t}/${j}-${Date.now()}.${S}`}`,{data:A,error:k}=await T.storage.from("public").upload(C,w,{cacheControl:"3600",upsert:!0});if(k)return console.error("Error uploading image:",k),{success:!1,error:k.message};const{data:{publicUrl:D}}=T.storage.from("public").getPublicUrl(C);return{success:!0,url:D}}catch(S){return console.error("Error in uploadBrandingImage:",S),{success:!1,error:S.message}}},[t]),_=y.useCallback(()=>{t?c(t):u()},[t]),x=y.useMemo(()=>({branding:r,loading:i,updateBranding:h,uploadBrandingImage:p,refreshBranding:_}),[r,i,h,p,_]);return f.jsx(IN.Provider,{value:x,children:e})}function Fz(){const e=y.useContext(IN);if(!e)throw new Error("useBranding must be used within a BrandingProvider");return e}const UN=y.createContext();function Ag({children:e}){const[t,r]=y.useState(()=>{const s=localStorage.getItem("fieldsync-theme");return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});y.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("fieldsync-theme",t)},[t]),y.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: light)"),c=u=>{localStorage.getItem("fieldsync-theme")||r(u.matches?"light":"dark")};return s.addEventListener("change",c),()=>s.removeEventListener("change",c)},[]);const n=y.useCallback(()=>{r(s=>s==="dark"?"light":"dark")},[]),i=y.useMemo(()=>({theme:t,setTheme:r,toggleTheme:n}),[t,n]);return f.jsx(UN.Provider,{value:i,children:e})}function Kz(){const e=y.useContext(UN);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}const Yz=y.createContext(null);function Gz({children:e}){const[t,r]=y.useState(null),[n,i]=y.useState([]),s=y.useCallback(()=>{r(null)},[]),c=y.useCallback((w,j="info",S=3e3)=>{if(t){i(O=>[...O,{message:w,type:j,duration:S}]);return}r({message:w,type:j,duration:S}),S>0&&setTimeout(()=>{r(null)},S)},[t]),u=y.useCallback(()=>{if(n.length>0){const[w,...j]=n;i(j),setTimeout(()=>{c(w.message,w.type,w.duration)},300)}},[n,c]),m=y.useCallback(()=>{s(),u()},[s,u]),h=y.useCallback((w,j)=>{c(w,"success",j)},[c]),g=y.useCallback((w,j)=>{c(w,"error",j)},[c]),p=y.useCallback((w,j)=>{c(w,"warning",j)},[c]),_=y.useCallback((w,j)=>{c(w,"info",j)},[c]),x=y.useMemo(()=>({toast:t,showToast:c,hideToast:m,success:h,error:g,warning:p,info:_}),[t,c,m,h,g,p,_]);return f.jsxs(Yz.Provider,{value:x,children:[e,t&&f.jsx("div",{className:"toast-container",children:f.jsx("div",{className:`toast ${t.type}`,onClick:m,children:t.message})})]})}function qr({className:e="",showPoweredBy:t=!1}){const{branding:r}=Fz();return f.jsxs("div",{className:`app-logo ${e}`,children:[r.logo_url?f.jsx("img",{src:r.logo_url,alt:r.custom_app_name||"Logo",className:"custom-logo"}):f.jsxs("div",{className:"logo",children:[r.custom_app_name||"Field",f.jsx("span",{children:"Sync"})]}),t&&!r.hide_fieldsync_branding&&f.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function Vz(e){if(!e)return{score:0,label:"",color:""};let t=0;return e.length>=6&&t++,e.length>=8&&t++,/[A-Z]/.test(e)&&/[a-z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t<=1?{score:1,label:"Weak",color:"var(--accent-red)"}:t<=2?{score:2,label:"Fair",color:"var(--accent-orange)"}:t<=3?{score:3,label:"Good",color:"var(--accent-amber)"}:t<=4?{score:4,label:"Strong",color:"var(--accent-green)"}:{score:5,label:"Very strong",color:"var(--accent-green)"}}function WS(e=6){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",r=new Uint32Array(e);return crypto.getRandomValues(r),Array.from(r,n=>t[n%t.length]).join("")}function Ps(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function oc({steps:e,currentStep:t}){return f.jsx("div",{className:"onboarding-step-indicator",children:e.map((r,n)=>{const i=n+1,s=i===t,c=i<t;return f.jsxs("div",{className:"onboarding-step-wrapper",children:[n>0&&f.jsx("div",{className:`onboarding-step-line ${c?"completed":""}`}),f.jsx("div",{className:`onboarding-step-circle ${s?"active":""} ${c?"completed":""}`,children:c?f.jsx(Ki,{size:14}):i}),f.jsx("span",{className:`onboarding-step-label ${s?"active":""} ${c?"completed":""}`,children:r})]},n)})})}function XS({value:e,onChange:t,placeholder:r,onKeyDown:n,autoFocus:i,showStrength:s}){const[c,u]=y.useState(!1),m=Vz(e);return f.jsxs("div",{className:"password-field",children:[f.jsxs("div",{className:"password-input-wrapper",children:[f.jsx("input",{type:c?"text":"password",value:e,onChange:t,placeholder:r||"Password",onKeyDown:n,autoFocus:i}),f.jsx("button",{type:"button",className:"password-toggle",onClick:()=>u(!c),tabIndex:-1,"aria-label":c?"Hide password":"Show password",children:c?f.jsx(sq,{size:18}):f.jsx(lq,{size:18})})]}),s&&e&&f.jsxs("div",{className:"password-strength",children:[f.jsx("div",{className:"password-strength-bar",children:f.jsx("div",{className:"password-strength-fill",style:{width:`${m.score/5*100}%`,background:m.color}})}),f.jsx("span",{className:"password-strength-label",style:{color:m.color},children:m.label})]})]})}function Wz({onForemanAccess:e,onOfficeLogin:t,onShowToast:r}){const[n]=wz(),[i,s]=y.useState(()=>{const he=n.get("mode");return he==="foreman"||he==="office"?he:null}),[c,u]=y.useState(""),[m,h]=y.useState(null),[g,p]=y.useState(""),[_,x]=y.useState(!1),[w,j]=y.useState(""),[S,O]=y.useState(null),[C,A]=y.useState(()=>{try{return localStorage.getItem("fieldsync_foreman_name")||""}catch{return""}}),k=y.useRef(null),D=y.useRef(null);y.useEffect(()=>()=>{k.current&&clearTimeout(k.current),D.current&&clearTimeout(D.current)},[]);const[M,z]=y.useState(""),[K,Q]=y.useState(""),[ne,G]=y.useState(1),[I,ie]=y.useState(null),[pe,q]=y.useState(""),[R,U]=y.useState(""),[J,B]=y.useState(""),[fe,je]=y.useState(""),[te,H]=y.useState(!1),[Ee,Te]=y.useState(1),[Ie,ge]=y.useState(""),[Le,ee]=y.useState(""),[we,xe]=y.useState(""),[oe,He]=y.useState(""),[ve,Ne]=y.useState(null),Me=he=>{const it=he.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);u(it)},jt=async()=>{if(c.length<2){r("Enter company code","error");return}x(!0);try{const he=await be.getCompanyByCode(c);he?h(he):(r("Invalid company code","error"),u(""))}catch{r("Error checking code","error")}finally{x(!1)}},Re=async he=>{if(he.length===4){x(!0),j("");try{const it=await be.getProjectByPinSecure(he,m.code);if(it.rateLimited){j("error"),r("Too many attempts. Please wait 15 minutes.","error"),k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{p(""),j("")},800);return}if(it.success&&it.project){O(it.project);return}if(it.error){console.error("[Foreman Auth] PIN validation failed:",it.error),r(it.error,"error"),p("");return}r("Invalid PIN","error"),p("")}catch{r("Error checking PIN. Please check your connection.","error"),p("")}finally{x(!1)}}},It=()=>{if(!C.trim()){r("Enter your name to continue","error");return}try{localStorage.setItem("fieldsync_foreman_name",C.trim())}catch{}e(S,C.trim())},yt=he=>{if(g.length<4&&!_){const it=g+he;p(it),j(""),it.length===4&&(D.current&&clearTimeout(D.current),D.current=setTimeout(()=>Re(it),150))}},Ct=()=>{_||(p(he=>he.slice(0,-1)),j(""))},Br=()=>{h(null),p(""),j("")},xt=()=>{if(!M.trim()||!K.trim()){r("Enter email and password","error");return}t(M,K)},Ye=async()=>{if(c.length<2){r("Enter company code","error");return}x(!0);try{const he=await be.getCompanyByCode(c);he?(ie(he),G(2)):(r("Invalid company code","error"),u(""))}catch{r("Error checking code","error")}finally{x(!1)}},$r=async()=>{if(!pe.trim()){r("Enter office code","error");return}x(!0);try{const{data:he,error:it}=await T.rpc("verify_office_code",{company_id:I.id,code:pe.trim()});if(it)throw it;he===!0?G(3):(r("Invalid office code","error"),q(""))}catch{r("Error verifying code","error")}finally{x(!1)}},xn=async()=>{if(!_){if(!R.trim()){r("Enter your name","error");return}if(!J.trim()||!Ps(J)){r("Enter a valid email address","error");return}if(fe.length<6){r("Password must be 6+ characters","error");return}x(!0);try{const he=J.toLowerCase().trim(),{data:it,error:wn}=await T.auth.signUp({email:he,password:fe});let Qt;if(wn?.message?.includes("already registered")||it?.user&&it.user.identities?.length===0){const{data:qt,error:ft}=await T.auth.signInWithPassword({email:he,password:fe});if(ft){r("Account exists with different password. Use your existing password.","error"),x(!1);return}Qt=qt.user.id;const{data:tn}=await T.from("user_companies").select("id, status").eq("user_id",Qt).eq("company_id",I.id).maybeSingle();if(tn){tn.status==="active"?(r("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):tn.status==="pending"?(r("Your request is still pending approval.","error"),await T.auth.signOut()):(r("Your membership was removed. Contact the company admin.","error"),await T.auth.signOut());return}const{error:Hn}=await T.from("user_companies").insert({user_id:Qt,company_id:I.id,role:"member",status:"pending"});if(Hn)throw console.error("Error adding to user_companies:",Hn),await T.auth.signOut(),new Error("Failed to submit join request");await T.auth.signOut(),H(!0)}else{if(wn)throw wn;{if(Qt=it.user?.id,!Qt)throw new Error("Failed to create user");const{error:qt}=await T.from("users").insert({id:Qt,email:he,password_hash:"managed_by_supabase_auth",name:R.trim(),company_id:I.id,role:"member",is_active:!0});if(qt)throw qt;const{error:ft}=await T.from("user_companies").insert({user_id:Qt,company_id:I.id,role:"member",status:"pending"});if(ft)throw console.error("Error adding to user_companies:",ft),new Error("Failed to submit join request");await T.auth.signOut(),H(!0)}}}catch(he){console.error("Join error:",he),r(he.message||"Error creating account","error")}finally{x(!1)}}},Hr=async()=>{if(!_){if(!Le.trim()){r("Enter your name","error");return}if(!we.trim()||!Ps(we)){r("Enter a valid email address","error");return}if(oe.length<6){r("Password must be 6+ characters","error");return}x(!0);try{const he=we.toLowerCase().trim(),it=WS(6),wn=WS(6),{data:Qt,error:Ut}=await T.auth.signUp({email:he,password:oe});if(Ut){if(Ut.message?.includes("already registered"))r("An account with this email already exists. Sign in instead.","error");else throw Ut;return}const qt=Qt.user?.id;if(!qt)throw new Error("Failed to create account");const{data:ft,error:tn}=await T.from("companies").insert({name:Ie.trim(),code:it,office_code:wn,subscription_tier:"free",owner_user_id:qt}).select().single();if(tn)throw console.error("Company creation error:",tn),new Error("Failed to create company. Please try again.");const{error:Hn}=await T.from("users").insert({id:qt,email:he,password_hash:"managed_by_supabase_auth",name:Le.trim(),company_id:ft.id,role:"admin",is_active:!0});if(Hn)throw console.error("User record error:",Hn),new Error("Failed to set up user profile");const{error:sa}=await T.from("user_companies").insert({user_id:qt,company_id:ft.id,role:"admin",access_level:"administrator",status:"active"});if(sa)throw console.error("User-company link error:",sa),new Error("Failed to link account to company");Ne({name:ft.name,code:it,officeCode:wn}),Te(3)}catch(he){console.error("Registration error:",he),r(he.message||"Error creating company","error")}finally{x(!1)}}},jr=()=>{G(1),ie(null),q(""),U(""),B(""),je(""),H(!1),u("")},Yt=()=>{Te(1),ge(""),ee(""),xe(""),He(""),Ne(null)};if(i===null)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in-up",children:[f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsxs("div",{className:"entry-buttons stagger-children",children:[f.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>s("foreman"),children:[f.jsx("span",{className:"entry-mode-icon",children:f.jsx(Po,{size:32})}),f.jsx("span",{className:"entry-mode-title",children:"Foreman"}),f.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),f.jsxs("button",{className:"entry-mode-btn office",onClick:()=>s("office"),children:[f.jsx("span",{className:"entry-mode-icon",children:f.jsx(iq,{size:32})}),f.jsx("span",{className:"entry-mode-title",children:"Office"}),f.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(i==="foreman")return S?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("div",{className:"entry-company-badge",children:S.name}),f.jsx("p",{className:"entry-subtitle",children:"Who's checking in?"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:C,onChange:he=>A(he.target.value),placeholder:"Your name",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&It()},style:{fontSize:"1.1rem",textAlign:"center"}}),f.jsx("button",{className:"entry-login-btn",onClick:It,disabled:!C.trim(),children:"Enter Site"})]}),f.jsx("p",{className:"entry-hint",style:{marginTop:"0.75rem"},children:"Your name will appear on reports and submissions"}),f.jsxs("button",{className:"entry-join-link",style:{marginTop:"0.5rem",display:"flex",alignSelf:"center"},onClick:()=>{O(null),p(""),j("")},children:[f.jsx(cr,{size:16}),f.jsx("span",{children:"Back"})]})]})}):m?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:Br,children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("div",{className:"entry-company-badge",children:m.name}),f.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),f.jsx("div",{className:`pin-display ${w==="error"?"shake":""}`,children:[0,1,2,3].map(he=>f.jsx("div",{className:`pin-dot ${g.length>he?"filled":""} ${w}`,children:g.length>he?"":""},he))}),f.jsxs("div",{className:"number-pad",role:"group","aria-label":"PIN entry keypad",children:[[1,2,3,4,5,6,7,8,9].map(he=>f.jsx("button",{className:"num-btn",onClick:()=>yt(he.toString()),disabled:_,"aria-label":String(he),children:he},he)),f.jsx("button",{className:"num-btn empty",disabled:!0,"aria-hidden":"true"}),f.jsx("button",{className:"num-btn",onClick:()=>yt("0"),disabled:_,"aria-label":"0",children:"0"}),f.jsx("button",{className:"num-btn backspace",onClick:Ct,disabled:_||g.length===0,"aria-label":"Delete last digit",children:f.jsx(cr,{size:18})})]}),_&&f.jsx("div",{className:"entry-loading",children:f.jsx("div",{className:"spinner"})})]})}):f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>s(null),children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"text",value:c,onChange:he=>Me(he.target.value),placeholder:"Company Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&jt()}}),f.jsx("button",{className:"entry-submit-btn",onClick:jt,disabled:_||c.length<2,children:_?f.jsx("div",{className:"spinner-small"}):f.jsx(_c,{size:20})})]})]})});if(i==="office")return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>s(null),children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"email",value:M,onChange:he=>z(he.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&xt()}}),f.jsx("input",{type:"password",value:K,onChange:he=>Q(he.target.value),placeholder:"Password",onKeyDown:he=>{he.key==="Enter"&&xt()}}),f.jsx("button",{className:"entry-login-btn",onClick:xt,children:"Sign In"})]}),f.jsx("div",{className:"entry-signup-hint",children:f.jsxs("div",{className:"entry-signup-options",children:[f.jsxs("button",{className:"entry-join-link",onClick:()=>{jr(),s("join")},children:[f.jsx(tN,{size:16}),f.jsx("span",{children:"Join your company"})]}),f.jsxs("button",{className:"entry-join-link",onClick:()=>{Yt(),s("register")},children:[f.jsx(oq,{size:16}),f.jsx("span",{children:"Register a new company"})]})]})})]})});if(i==="join")return te?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-scale-in",children:[f.jsx("div",{className:"entry-success-icon",children:f.jsx(Ki,{size:32})}),f.jsx("h2",{className:"entry-success-title",children:"Request Submitted"}),f.jsxs("p",{className:"entry-success-message",children:["Your request to join ",f.jsx("strong",{children:I?.name})," has been submitted. A company admin will review and approve your access."]}),f.jsx("p",{className:"entry-success-detail",children:"You'll be able to sign in once approved."}),f.jsx("button",{className:"entry-login-btn",onClick:()=>{jr(),s("office")},style:{marginTop:"1.5rem"},children:"Back to Sign In"})]})}):ne===1?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{jr(),s("office")},children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(oc,{steps:["Company","Verify","Account"],currentStep:1}),f.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),f.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"text",value:c,onChange:he=>Me(he.target.value),placeholder:"Company Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Ye()}}),f.jsx("button",{className:"entry-submit-btn",onClick:Ye,disabled:_||c.length<2,children:_?f.jsx("div",{className:"spinner-small"}):f.jsx(_c,{size:20})})]})]})}):ne===2?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{G(1),ie(null),q("")},children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(oc,{steps:["Company","Verify","Account"],currentStep:2}),f.jsx("div",{className:"entry-company-badge",children:I?.name}),f.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),f.jsx("p",{className:"entry-hint",children:"This verifies your office access"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"password",value:pe,onChange:he=>q(he.target.value),placeholder:"Office Code",disabled:_,autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&$r()}}),f.jsx("button",{className:"entry-submit-btn",onClick:$r,disabled:_||!pe.trim(),children:_?f.jsx("div",{className:"spinner-small"}):f.jsx(_c,{size:20})})]})]})}):f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{G(2),q("")},children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(oc,{steps:["Company","Verify","Account"],currentStep:3}),f.jsx("div",{className:"entry-company-badge",children:I?.name}),f.jsx("p",{className:"entry-subtitle",children:"Create your account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:R,onChange:he=>U(he.target.value),placeholder:"Your Name",autoFocus:!0}),f.jsx("input",{type:"email",value:J,onChange:he=>B(he.target.value),placeholder:"Email",className:J&&!Ps(J)?"input-error":""}),f.jsx(XS,{value:fe,onChange:he=>je(he.target.value),placeholder:"Password (6+ characters)",onKeyDown:he=>{he.key==="Enter"&&xn()},showStrength:!0}),f.jsx("button",{className:"entry-login-btn",onClick:xn,disabled:_||!R.trim()||!Ps(J)||fe.length<6,children:_?f.jsxs("span",{className:"btn-loading",children:[f.jsx("div",{className:"spinner-small"}),"Creating account..."]}):"Join Company"})]}),f.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})});if(i==="register"){if(Ee===3&&ve)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card entry-card-wide animate-scale-in",children:[f.jsx("div",{className:"entry-success-icon",children:f.jsx(Ki,{size:32})}),f.jsx("h2",{className:"entry-success-title",children:"Company Created"}),f.jsxs("p",{className:"entry-success-message",children:[f.jsx("strong",{children:ve.name})," is ready to go. Save these codes to share with your team."]}),f.jsxs("div",{className:"entry-codes-grid",children:[f.jsxs("div",{className:"entry-code-card",children:[f.jsx("span",{className:"entry-code-label",children:"Company Code"}),f.jsx("span",{className:"entry-code-value",children:ve.code}),f.jsx("span",{className:"entry-code-hint",children:"Share with all employees"})]}),f.jsxs("div",{className:"entry-code-card",children:[f.jsx("span",{className:"entry-code-label",children:"Office Code"}),f.jsx("span",{className:"entry-code-value",children:ve.officeCode}),f.jsx("span",{className:"entry-code-hint",children:"Office staff only"})]})]}),f.jsx("p",{className:"entry-codes-warning",children:"Save these codes now. You can also find them in your company settings later."}),f.jsx("button",{className:"entry-login-btn",onClick:()=>{window.location.reload()},style:{marginTop:"0.5rem"},children:"Go to Dashboard"})]})});if(Ee===1)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{Yt(),s("office")},children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(oc,{steps:["Company","Your Account"],currentStep:1}),f.jsx("p",{className:"entry-subtitle",children:"Register your company"}),f.jsx("p",{className:"entry-hint",children:"Set up your company on FieldSync"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:Ie,onChange:he=>ge(he.target.value),placeholder:"Company Name",autoFocus:!0,onKeyDown:he=>{he.key==="Enter"&&Ie.trim()&&Te(2)}}),f.jsx("button",{className:"entry-login-btn",onClick:()=>Te(2),disabled:!Ie.trim(),children:"Continue"})]})]})});if(Ee===2)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>Te(1),children:f.jsx(cr,{size:20})}),f.jsx(qr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(oc,{steps:["Company","Your Account"],currentStep:2}),f.jsx("div",{className:"entry-company-badge",children:Ie}),f.jsx("p",{className:"entry-subtitle",children:"Create your admin account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:Le,onChange:he=>ee(he.target.value),placeholder:"Your Name",autoFocus:!0}),f.jsx("input",{type:"email",value:we,onChange:he=>xe(he.target.value),placeholder:"Email",className:we&&!Ps(we)?"input-error":""}),f.jsx(XS,{value:oe,onChange:he=>He(he.target.value),placeholder:"Password (6+ characters)",onKeyDown:he=>{he.key==="Enter"&&Hr()},showStrength:!0}),f.jsx("button",{className:"entry-login-btn",onClick:Hr,disabled:_||!Le.trim()||!Ps(we)||oe.length<6,children:_?f.jsxs("span",{className:"btn-loading",children:[f.jsx("div",{className:"spinner-small"}),"Setting up company..."]}):"Create Company"})]}),f.jsx("p",{className:"entry-join-note",children:"You'll be the administrator. Company and office codes will be generated for you."})]})})}}function BN({message:e,type:t="",onClose:r}){return y.useEffect(()=>{const n=setTimeout(r,3e3);return()=>clearTimeout(n)},[r]),f.jsx("div",{className:"toast-container",children:f.jsx("div",{className:`toast ${t}`,children:e})})}function ZS({compact:e=!1}){const{theme:t,toggleTheme:r}=Kz();return f.jsx("button",{className:`theme-toggle ${e?"theme-toggle-compact":""}`,onClick:r,title:`Switch to ${t==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${t==="dark"?"light":"dark"} mode`,children:t==="dark"?f.jsxs(f.Fragment,{children:[f.jsx(rN,{size:e?18:16}),!e&&f.jsx("span",{children:"Light"})]}):f.jsxs(f.Fragment,{children:[f.jsx(nN,{size:e?18:16}),!e&&f.jsx("span",{children:"Dark"})]})})}class zi extends y.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("ErrorBoundary caught an error:",t,r),(t?.message?.includes("Failed to fetch dynamically imported module")||t?.message?.includes("Loading chunk")||t?.message?.includes("Loading CSS chunk"))&&(console.warn("[ErrorBoundary] Chunk load failure detected, clearing cache and reloading..."),"caches"in window?caches.keys().then(i=>{Promise.all(i.map(s=>caches.delete(s))).then(()=>{window.location.reload()})}).catch(i=>{console.warn("[ErrorBoundary] Cache clear failed, reloading anyway:",i.message),window.location.reload()}):window.location.reload())}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?f.jsx("div",{className:"error-boundary",children:f.jsxs("div",{className:"error-boundary-content",children:[f.jsx("div",{className:"error-icon",children:f.jsx(um,{size:48})}),f.jsx("h2",{children:"Something went wrong"}),f.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),f.jsxs("div",{className:"error-actions",children:[f.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),f.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function QS(){const[e,t]=y.useState(Ln()),[r,n]=y.useState(0),[i,s]=y.useState(!1),c=y.useRef(!1),u=y.useRef(null);return y.useEffect(()=>{const m=Ib(async g=>{t(g),g&&c.current&&(s(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>s(!1),3e3),c.current=!1),g||(c.current=!0);const p=await nf();n(p)});nf().then(n);const h=setInterval(async()=>{if(!Ln()){const g=await nf();n(g)}},5e3);return()=>{m(),clearInterval(h),u.current&&clearTimeout(u.current)}},[]),e&&r===0&&!i?null:f.jsxs("div",{className:`offline-indicator ${e?"online":"offline"} ${i?"synced":""}`,children:[f.jsx("div",{className:"offline-indicator-content",children:e?i?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"online-icon",children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f.jsx("polyline",{points:"20 6 9 17 4 12"})})}),f.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):r>0?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"syncing-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("polyline",{points:"23 4 23 10 17 10"}),f.jsx("polyline",{points:"1 20 1 14 7 14"}),f.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),f.jsxs("span",{className:"offline-text",children:["Syncing ",r,"..."]})]}):null:f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"offline-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),f.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),f.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),f.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),f.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),f.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),f.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),f.jsxs("span",{className:"offline-text",children:["Offline",r>0&&f.jsxs("span",{className:"pending-badge",children:[r," pending"]})]})]})}),f.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}function Xz(){const[e,t]=y.useState(null),[r,n]=y.useState(!1);y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const c=localStorage.getItem("pwa-install-dismissed");if(c){const m=parseInt(c,10);if(Date.now()-m<10080*60*1e3)return}const u=m=>{m.preventDefault(),t(m),n(!0)};return window.addEventListener("beforeinstallprompt",u),()=>window.removeEventListener("beforeinstallprompt",u)},[]);const i=async()=>{if(!e)return;e.prompt();const{outcome:c}=await e.userChoice;c==="accepted"&&n(!1),t(null)},s=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return r?f.jsxs("div",{className:"install-prompt",children:[f.jsxs("div",{className:"install-prompt-content",children:[f.jsx(aN,{size:20}),f.jsxs("div",{className:"install-prompt-text",children:[f.jsx("strong",{children:"Install FieldSync"}),f.jsx("span",{children:"Add to home screen for quick access"})]})]}),f.jsxs("div",{className:"install-prompt-actions",children:[f.jsx("button",{className:"btn btn-primary btn-small",onClick:i,children:"Install"}),f.jsx("button",{className:"install-prompt-dismiss",onClick:s,"aria-label":"Dismiss",children:f.jsx(Nb,{size:18})})]})]}):null}function Zz({factorId:e,onVerified:t,onCancel:r}){const[n,i]=y.useState(""),[s,c]=y.useState(!1),[u,m]=y.useState(null),h=async()=>{if(n.length===6){c(!0),m(null);try{const{data:p,error:_}=await T.auth.mfa.challenge({factorId:e});if(_)throw _;const{error:x}=await T.auth.mfa.verify({factorId:e,challengeId:p.id,code:n});if(x)throw x;t()}catch{m("Invalid code. Please try again."),i("")}finally{c(!1)}}},g=p=>{p.key==="Enter"&&n.length===6&&h()};return f.jsxs("div",{className:"mfa-challenge",children:[f.jsx("div",{className:"mfa-challenge-icon",children:f.jsx(iN,{size:40})}),f.jsx("h2",{children:"Two-Factor Authentication"}),f.jsx("p",{children:"Enter the 6-digit code from your authenticator app"}),f.jsx("div",{className:"mfa-code-input",children:f.jsx("input",{type:"text",value:n,onChange:p=>i(p.target.value.replace(/\D/g,"").slice(0,6)),onKeyDown:g,placeholder:"000000",maxLength:6,autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*",className:"mfa-input-large","aria-label":"MFA verification code"})}),u&&f.jsx("p",{className:"mfa-error",children:u}),f.jsxs("div",{className:"mfa-challenge-actions",children:[f.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Cancel"}),f.jsx("button",{className:"btn btn-primary",onClick:h,disabled:n.length!==6||s,children:s?f.jsxs(f.Fragment,{children:[f.jsx($s,{size:14,className:"spinner"})," Verifying..."]}):"Verify"})]})]})}function XZ(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function Qz(e){if(!e||e.length===0)return 0;let t=0;return e.forEach(r=>{r.status==="done"&&(t+=r.weight||0)}),Math.round(t)}function ZZ(e){if(!e||e.length===0)return{progress:0,earnedValue:0,totalValue:0,isValueBased:!1};if(e.some(n=>n.scheduled_value>0)){const n=e.reduce((c,u)=>c+(u.scheduled_value||0),0),i=e.filter(c=>c.status==="done").reduce((c,u)=>c+(u.scheduled_value||0),0);return{progress:n>0?Math.round(i/n*100):0,earnedValue:i,totalValue:n,isValueBased:!0}}const r=e.filter(n=>n.status==="done").reduce((n,i)=>n+(i.weight||0),0);return{progress:Math.round(r),earnedValue:0,totalValue:0,isValueBased:!1}}function Jz(e){if(!e||e.length===0)return"not_started";const t=e.some(i=>i.status==="working"),r=e.some(i=>i.status==="done");return e.every(i=>i.status==="done")?"done":t||r?"working":"not_started"}function QZ(e){const t=Jz(e);return t==="done"?"Complete":t==="working"?"In Progress":"Not Started"}function JZ(e,t=0){const r=new Date;r.setHours(0,0,0,0);const n={scheduleStatus:"on_track",scheduleVariance:0,scheduleLabel:"On Track",laborStatus:"on_track",laborVariance:0,laborLabel:null,hasScheduleData:!1,hasLaborData:!1};if(e.start_date&&e.end_date){const i=new Date(e.start_date),s=new Date(e.end_date);i.setHours(0,0,0,0),s.setHours(0,0,0,0);const c=Math.max(1,Math.ceil((s-i)/(1e3*60*60*24))),u=Math.max(0,Math.ceil((r-i)/(1e3*60*60*24))),m=Math.min(100,u/c*100),g=(e.progress||0)-m;n.scheduleVariance=Math.round(g),n.hasScheduleData=!0,g>5?(n.scheduleStatus="ahead",n.scheduleLabel=`Ahead of Schedule (+${n.scheduleVariance}%)`):g<-5?(n.scheduleStatus="behind",n.scheduleLabel=`Behind Schedule (${n.scheduleVariance}%)`):(n.scheduleStatus="on_track",n.scheduleLabel="On Track")}if(e.planned_man_days&&e.planned_man_days>0){const s=(e.progress||0)/100*e.planned_man_days;if(s>0&&t>0){const c=(t-s)/s*100;n.laborVariance=Math.round(c),n.hasLaborData=!0,c>10?(n.laborStatus="over",n.laborLabel=`Over Planned (+${n.laborVariance}% man-days)`):c<-10?(n.laborStatus="under",n.laborLabel=`Under Planned (${n.laborVariance}% man-days)`):(n.laborStatus="on_track",n.laborLabel="Labor On Track")}else t>0&&(n.hasLaborData=!0,n.laborLabel=`${t} man-days used`)}return n}function eQ(e,t=30){if(e.status==="archived"||e.progress<100)return!1;const r=e.areas||[];if(r.length===0||!r.every(c=>c.status==="done"))return!1;const i=r.reduce((c,u)=>{const m=new Date(u.updated_at);return m>c?m:c},new Date(0));return i.getTime()===0?!1:Math.floor((Date.now()-i.getTime())/(1e3*60*60*24))>=t}const tQ=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[59,130,246]},e3=(e,t=5e3,r=.85)=>new Promise(n=>{if(!e){n(null);return}const i=new Image;i.crossOrigin="anonymous";const s=setTimeout(()=>{i.src="",n(null)},t);i.onload=()=>{clearTimeout(s);try{const c=document.createElement("canvas");c.width=i.width,c.height=i.height,c.getContext("2d").drawImage(i,0,0);const m=c.toDataURL("image/jpeg",r);n(m)}catch{n(null)}},i.onerror=()=>{clearTimeout(s),n(null)},i.src=e}),rQ=async(e,t=5e3,r=.85)=>!e||e.length===0?[]:await Promise.all(e.map(i=>e3(i,t,r)));async function JS(e,t=1920,r=.8){return!e.type.startsWith("image/")||e.size<500*1024?e:new Promise(n=>{const i=document.createElement("canvas"),s=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:m}=c;u>t&&(m=Math.round(m*t/u),u=t);const h=1920;m>h&&(u=Math.round(u*h/m),m=h),i.width=u,i.height=m,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(c,0,0,u,m),i.toBlob(g=>{if(g){const p=e.name.replace(/\.[^/.]+$/,""),_=new File([g],`${p}.jpg`,{type:"image/jpeg",lastModified:Date.now()});n(_)}else console.warn("Image compression failed, using original"),n(e)},"image/jpeg",r),URL.revokeObjectURL(c.src)},c.onerror=()=>{console.warn("Failed to load image for compression, using original"),URL.revokeObjectURL(c.src),n(e)},c.src=URL.createObjectURL(e)})}function t3(e=5e3){return new Promise(t=>{if(!navigator.geolocation){t(null);return}navigator.geolocation.getCurrentPosition(r=>{t({latitude:r.coords.latitude,longitude:r.coords.longitude,accuracy:Math.round(r.coords.accuracy)})},()=>t(null),{enableHighAccuracy:!0,timeout:e,maximumAge:6e4})})}const Ng=["Containment","PPE","Disposal","Equipment"],$N={en:{workInfo:"Work Details",crewHours:"Crew & Hours",materialsEquipment:"Materials",evidence:"Evidence",review:"Review",quickActions:"Quick Actions",sameAsYesterday:"Same as Yesterday",setCrewHours:"Set Crew Hours",loading:"Loading...",supervision:"Supervision",operators:"Operators",laborers:"Laborers",addSupervision:"+ Add Supervision",addOperator:"+ Add Operator",addLaborer:"+ Add Laborer",foreman:"Foreman",superintendent:"Superintendent",firstLastName:"First & Last Name",start:"Start",end:"End",regHrs:"Reg Hrs",otHrs:"OT Hrs",selectCategory:"Select a category:",addCustomItem:"+ Add Custom Item",customItem:"Custom Item",itemName:"Item Name",category:"Category",quantity:"Quantity",addItem:"Add Item",cancel:"Cancel",noItemsCategory:"No items in this category yet",workDate:"Work Date",ceNumber:"CE/PCO #",optional:"optional",linkedCOR:"Link to Change Order",selectCOR:"Select COR (optional)",noCORs:"No pending CORs",laborSummary:"Labor Summary",worker:"worker",workers_plural:"workers",totalHours:"Total Hours",regular:"Regular",overtime:"Overtime",materials:"Materials",item:"item",items_plural:"items",noMaterials:"No materials added",notes:"Notes",addNotes:"Add notes about the work performed...",photos:"Photos",addPhotos:"Add Photos",maxPhotos:"max",noPhotos:"No photos added",certification:"Certification",certifyStatement:"I certify that this T&M ticket accurately reflects the work performed.",foremanSignature:"Foreman's Name (Signature)",yourName:"Your name",describeWork:"Describe the work performed",descriptionRequired:"Description is required",whatWorkPerformed:"What work was performed today?",searchMaterials:"Search materials & equipment...",noSearchResults:"No items found",orBrowse:"Or browse by category:",back:"Back",next:"Next",nextCrew:"Next: Crew",nextMaterials:"Next: Materials",reviewItems:"Review",skipNoMaterials:"Skip (no materials)",submitTM:"Submit T&M",submitting:"Submitting...",applySameHours:"Apply Same Hours",batchDescription:"Set start/end time and hours for all workers with names entered.",timeStarted:"Time Started",timeEnded:"Time Ended",regularHours:"Regular Hours",overtimeHours:"Overtime Hours",willApplyTo:"Will apply to",applyToAll:"Apply to All",preset8hr:"8hr Day",preset10hr:"10hr Day",preset4hr:"4hr Day",loadedWorkers:"Loaded {count} workers from {date}",noPreviousCrew:"No previous crew found for this project",appliedHours:"Applied hours to {count} worker(s)",assignedToCOR:"Assigned to COR",photoEvidence:"Photo Evidence",photosAdded:"photo(s) added",recommendedForBilling:"Recommended for billing",addMorePhotos:"Add More Photos",linkToChangeOrder:"Link to Change Order",linkedTo:"Linked to",optionalLinkCOR:"Optional - Link this T&M to a COR",selectCOROptional:"-- Select a COR (optional) --",noActiveCORs:"No active CORs available for this project",addWorkersFirst:"Add workers first",errorLoadingCrew:"Error loading previous crew",descriptionRecommended:"Description recommended",workersNoHours:"worker(s) have no hours entered",nameRequired:"Name required to submit",submitted:"Submitted",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Review & Submit",enterNameToSubmit:"Enter name to submit",done:"Done",skipSignature:"Skip signature for now",total:"total",needHours:"need hours",customHours:"Custom hours",selectTMWorkers:"Select T&M Workers",tapToAdd:"Tap to add",removeClass:"Remove this labor class",add:"Add",addLaborClass:"Add Labor Class...",other:"Other",noCustomClasses:"No custom labor classes set up for this company. Using default categories.",loadingLaborClasses:"Loading labor classes...",noLaborClassesYet:"No labor classes added yet. Select from crew check-in above or add manually:",tmSubmitted:"T&M Ticket Submitted!",ticketSavedReady:"Your ticket has been saved and is ready for client signature.",workersLabel:"Workers",retry:"Retry",retryAllPhotos:"Retry All Failed Photos",getClientSignature:"Get Client Signature",signatureDescription:"Have the client sign this T&M ticket to verify the work performed.",clientSignatureCollected:"Client signature collected!",signNowOnSite:"Sign Now (On-Site)",clientSignsDevice:"Client signs on this device",sendSignatureLink:"Send Signature Link",clientSignsLater:"Client signs later via link",ticketSummary:"Ticket Summary",edit:"Edit",submittedBy:"Submitted By",enterYourName:"Enter your name",certifyAccurate:"By submitting, you certify this T&M is accurate."},es:{workInfo:"Info del Trabajo",crewHours:"Cuadrilla y Horas",materialsEquipment:"Materiales",evidence:"Evidencia",review:"Revisar",quickActions:"Acciones Rapidas",sameAsYesterday:"Igual que Ayer",setCrewHours:"Poner Horas",loading:"Cargando...",supervision:"Supervision",operators:"Operadores",laborers:"Trabajadores",addSupervision:"+ Agregar Supervision",addOperator:"+ Agregar Operador",addLaborer:"+ Agregar Trabajador",foreman:"Capataz",superintendent:"Superintendente",firstLastName:"Nombre y Apellido",start:"Inicio",end:"Fin",regHrs:"Hrs Reg",otHrs:"Hrs Extra",selectCategory:"Seleccione una categoria:",addCustomItem:"+ Agregar Articulo",customItem:"Articulo Personalizado",itemName:"Nombre del Articulo",category:"Categoria",quantity:"Cantidad",addItem:"Agregar",cancel:"Cancelar",noItemsCategory:"No hay articulos en esta categoria",workDate:"Fecha de Trabajo",ceNumber:"CE/PCO #",optional:"opcional",linkedCOR:"Vincular a Orden de Cambio",selectCOR:"Seleccionar COR (opcional)",noCORs:"No hay CORs pendientes",laborSummary:"Resumen de Mano de Obra",worker:"trabajador",workers_plural:"trabajadores",totalHours:"Horas Totales",regular:"Regular",overtime:"Extra",materials:"Materiales",item:"articulo",items_plural:"articulos",noMaterials:"No se agregaron materiales",notes:"Notas",addNotes:"Agregar notas sobre el trabajo realizado...",photos:"Fotos",addPhotos:"Agregar Fotos",maxPhotos:"max",noPhotos:"No se agregaron fotos",certification:"Certificacion",certifyStatement:"Certifico que este ticket T&M refleja con precision el trabajo realizado.",foremanSignature:"Nombre del Capataz (Firma)",yourName:"Su nombre",describeWork:"Describir el trabajo realizado",descriptionRequired:"Descripcion es requerida",whatWorkPerformed:"Que trabajo se realizo hoy?",searchMaterials:"Buscar materiales y equipo...",noSearchResults:"No se encontraron articulos",orBrowse:"O navegar por categoria:",back:"Atras",next:"Siguiente",nextCrew:"Siguiente: Cuadrilla",nextMaterials:"Siguiente: Materiales",reviewItems:"Revisar",skipNoMaterials:"Saltar (sin materiales)",submitTM:"Enviar T&M",submitting:"Enviando...",applySameHours:"Aplicar Mismas Horas",batchDescription:"Establezca hora de inicio/fin y horas para todos los trabajadores.",timeStarted:"Hora de Inicio",timeEnded:"Hora de Fin",regularHours:"Horas Regulares",overtimeHours:"Horas Extra",willApplyTo:"Se aplicara a",applyToAll:"Aplicar a Todos",preset8hr:"Dia 8hr",preset10hr:"Dia 10hr",preset4hr:"Dia 4hr",loadedWorkers:"Se cargaron {count} trabajadores del {date}",noPreviousCrew:"No se encontro equipo anterior para este proyecto",appliedHours:"Horas aplicadas a {count} trabajador(es)",assignedToCOR:"Asignado a COR",photoEvidence:"Evidencia Fotogrfica",photosAdded:"foto(s) agregada(s)",recommendedForBilling:"Recomendado para facturacin",addMorePhotos:"Agregar Ms Fotos",linkToChangeOrder:"Vincular a Orden de Cambio",linkedTo:"Vinculado a",optionalLinkCOR:"Opcional - Vincular este T&M a un COR",selectCOROptional:"-- Seleccionar COR (opcional) --",noActiveCORs:"No hay CORs activos para este proyecto",addWorkersFirst:"Agregue trabajadores primero",errorLoadingCrew:"Error cargando equipo anterior",descriptionRecommended:"Descripcion recomendada",workersNoHours:"trabajador(es) sin horas",nameRequired:"Nombre requerido",submitted:"Enviado",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Revisar y Enviar",enterNameToSubmit:"Ingrese nombre",done:"Listo",skipSignature:"Saltar firma por ahora",total:"total",needHours:"sin horas",customHours:"Horas personalizadas",selectTMWorkers:"Seleccionar Trabajadores T&M",tapToAdd:"Toca para agregar",removeClass:"Eliminar esta clase",add:"Agregar",addLaborClass:"Agregar Clase de Trabajo...",other:"Otros",noCustomClasses:"No hay clases de trabajo personalizadas. Usando categorias predeterminadas.",loadingLaborClasses:"Cargando clases de trabajo...",noLaborClassesYet:"No hay clases de trabajo agregadas. Seleccione del check-in o agregue manualmente:",tmSubmitted:"Ticket T&M Enviado!",ticketSavedReady:"Su ticket ha sido guardado y est listo para la firma del cliente.",workersLabel:"Trabajadores",retry:"Reintentar",retryAllPhotos:"Reintentar Todas las Fotos",getClientSignature:"Obtener Firma del Cliente",signatureDescription:"Haga que el cliente firme este ticket T&M para verificar el trabajo realizado.",clientSignatureCollected:"Firma del cliente recopilada!",signNowOnSite:"Firmar Ahora",clientSignsDevice:"Cliente firma en este dispositivo",sendSignatureLink:"Enviar Enlace",clientSignsLater:"Cliente firma despus va enlace",ticketSummary:"Resumen del Ticket",edit:"Editar",submittedBy:"Enviado Por",enterYourName:"Ingrese su nombre",certifyAccurate:"Al enviar, certifica que este T&M es preciso."}},r3=e=>t=>$N[e]?.[t]||t;function n3({project:e,workDate:t,setWorkDate:r,cePcoNumber:n,setCePcoNumber:i,notes:s,setNotes:c,t:u,lang:m}){return f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-project-info",children:[e.job_number&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Job #"}),f.jsx("span",{className:"tm-project-value",children:e.job_number})]}),f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Project"}),f.jsx("span",{className:"tm-project-value",children:e.name})]}),e.address&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Address"}),f.jsx("span",{className:"tm-project-value",children:e.address})]}),e.general_contractor&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"GC"}),f.jsx("span",{className:"tm-project-value",children:e.general_contractor})]})]}),f.jsxs("div",{className:"tm-field-row",children:[f.jsxs("div",{className:"tm-field tm-field-half",children:[f.jsx("label",{children:"Date"}),f.jsx("input",{type:"date",value:t,onChange:h=>r(h.target.value),className:"tm-date"})]}),f.jsxs("div",{className:"tm-field tm-field-half",children:[f.jsx("label",{children:"CE / PCO #"}),f.jsx("input",{type:"text",placeholder:"Change Event / PCO",value:n,onChange:h=>i(h.target.value),className:"tm-input"})]})]}),f.jsxs("div",{className:"tm-field tm-description-field",children:[f.jsxs("label",{children:[f.jsx(Fo,{size:16,className:"inline-icon"}),u("describeWork")," ",f.jsx("span",{className:"tm-required",children:"*"})]}),f.jsx("textarea",{placeholder:u("whatWorkPerformed"),value:s,onChange:h=>c(h.target.value),rows:4,className:`tm-description ${s.trim()?"":"tm-field-required"}`})]})]})}const a3=e=>{if(!e)return"empty";const t=e.name&&e.name.trim()!=="",r=parseFloat(e.hours)>0||parseFloat(e.overtimeHours)>0;return t?r?"complete":"incomplete":"empty"},e1=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function sc({worker:e,index:t,onUpdate:r,onRemove:n,t:i,roleSelect:s}){const c=a3(e);return f.jsxs("div",{className:`tm-worker-card-expanded ${c!=="empty"?`worker-${c}`:""}`,children:[f.jsxs("div",{className:"tm-worker-row-top",children:[c==="complete"&&f.jsx("span",{className:"tm-worker-check",children:f.jsx(Ki,{size:14})}),s,f.jsx("input",{type:"text",placeholder:i("firstLastName"),value:e.name,onChange:u=>r(t,"name",u.target.value),className:"tm-worker-input"}),f.jsx("button",{className:"tm-remove",onClick:()=>n(t),children:""})]}),f.jsxs("div",{className:"tm-worker-row-bottom",children:[f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("start")}),f.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>r(t,"timeStarted",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("end")}),f.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>r(t,"timeEnded",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("regHrs")}),f.jsx("input",{type:"number",placeholder:"0",value:e.hours,onChange:u=>r(t,"hours",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("otHrs")}),f.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>r(t,"overtimeHours",u.target.value)})]})]})]})}function i3({batchHours:e,setBatchHours:t,namedWorkerCount:r,onApply:n,onClose:i,t:s}){const c=u=>{let m,h,g,p;switch(u){case"full":m="07:00",h="15:30",g="8",p="";break;case"10hr":m="06:00",h="16:30",g="8",p="2";break;case"half":m="07:00",h="11:00",g="4",p="";break;default:return}t({timeStarted:m,timeEnded:h,hours:g,overtimeHours:p})};return f.jsx("div",{className:"tm-modal-overlay",onClick:i,children:f.jsxs("div",{className:"tm-batch-modal",onClick:u=>u.stopPropagation(),children:[f.jsxs("h3",{children:[f.jsx(Mo,{size:18})," ",s("applySameHours")]}),f.jsx("p",{className:"tm-batch-description",children:s("batchDescription")}),f.jsxs("div",{className:"tm-time-presets",children:[f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("full"),children:s("preset8hr")}),f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("10hr"),children:s("preset10hr")}),f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("half"),children:s("preset4hr")})]}),f.jsxs("div",{className:"tm-batch-form",children:[f.jsxs("div",{className:"tm-batch-row",children:[f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("timeStarted")}),f.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>{const m=u.target.value,h=e1(m,e.timeEnded);t({...e,timeStarted:m,...h||{}})}})]}),f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("timeEnded")}),f.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>{const m=u.target.value,h=e1(e.timeStarted,m);t({...e,timeEnded:m,...h||{}})}})]})]}),f.jsxs("div",{className:"tm-batch-row",children:[f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("regularHours")}),f.jsx("input",{type:"number",placeholder:"8",value:e.hours,onChange:u=>t({...e,hours:u.target.value})})]}),f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("overtimeHours")}),f.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>t({...e,overtimeHours:u.target.value})})]})]})]}),f.jsxs("div",{className:"tm-batch-preview",children:[f.jsxs("strong",{children:[s("willApplyTo"),":"]}),f.jsxs("span",{children:[r," ",s("workers_plural")]})]}),f.jsxs("div",{className:"tm-batch-actions",children:[f.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:s("cancel")}),f.jsx("button",{type:"button",className:"btn btn-primary",onClick:n,disabled:!e.hours&&!e.overtimeHours,children:s("applyToAll")})]})]})})}function o3({supervision:e,operators:t,laborers:r,dynamicWorkers:n,activeLaborClassIds:i,setActiveLaborClassIds:s,laborCategories:c,laborClasses:u,hasCustomLaborClasses:m,loadingLaborClasses:h,todaysCrew:g,showBatchHoursModal:p,setShowBatchHoursModal:_,batchHours:x,setBatchHours:w,loadingPreviousCrew:j,namedWorkers:S,workersNeedingHours:O,totalRegHours:C,totalOTHours:A,onLoadPreviousCrew:k,onApplyBatchHours:D,onApplyInlinePreset:M,onAddCrewWorker:z,onActivateLaborClass:K,onDeactivateLaborClass:Q,addSupervision:ne,updateSupervision:G,removeSupervision:I,addOperator:ie,updateOperator:pe,removeOperator:q,addLaborer:R,updateLaborer:U,removeLaborer:J,addDynamicWorker:B,updateDynamicWorker:fe,removeDynamicWorker:je,getInactiveLaborClasses:te,t:H,lang:Ee,onShowToast:Te}){const Ie=S.length;return f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-crew-summary-bar",children:[f.jsxs("div",{className:"tm-summary-left",children:[f.jsx("span",{className:"tm-summary-count",children:S.length}),f.jsx("span",{className:"tm-summary-label",children:S.length===1?H("worker"):H("workers_plural")})]}),f.jsxs("div",{className:"tm-summary-middle",children:[f.jsxs("span",{className:"tm-summary-hours",children:[C+A,"h"]}),f.jsx("span",{className:"tm-summary-label",children:H("total")})]}),O>0&&f.jsxs("div",{className:"tm-summary-warning",children:[f.jsx(kb,{size:14}),f.jsxs("span",{children:[O," ",H("needHours")]})]})]}),f.jsxs("div",{className:"tm-quick-actions-row",children:[f.jsxs("button",{className:"tm-quick-action",onClick:k,disabled:j,children:[f.jsx(cq,{size:16}),f.jsx("span",{children:H(j?"loading":"sameAsYesterday")})]}),S.length>0&&f.jsxs("div",{className:"tm-time-presets-inline",children:[f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("8hr"),children:"8h"}),f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("10hr"),children:"10h"}),f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("4hr"),children:"4h"}),f.jsx("button",{className:"tm-preset-chip more",onClick:()=>_(!0),title:H("customHours"),children:f.jsx(Mo,{size:14})})]})]}),g.length>0&&f.jsxs("div",{className:"tm-crew-select-section",children:[f.jsxs("div",{className:"tm-section-header",children:[f.jsxs("h4",{children:[f.jsx(Po,{size:16})," ",H("selectTMWorkers")]}),f.jsx("span",{className:"tm-section-hint",children:H("tapToAdd")})]}),f.jsx("div",{className:"tm-crew-grid",children:g.map((ge,Le)=>{const ee=e.some(oe=>oe.name.toLowerCase()===ge.name.toLowerCase())||t.some(oe=>oe.name.toLowerCase()===ge.name.toLowerCase())||r.some(oe=>oe.name.toLowerCase()===ge.name.toLowerCase()),we=Object.values(n).some(oe=>oe.some(He=>He.name.toLowerCase()===ge.name.toLowerCase())),xe=ee||we;return f.jsxs("button",{className:`tm-crew-item ${xe?"added":""}`,onClick:()=>{xe||z(ge)},disabled:xe,children:[f.jsx("span",{className:"tm-crew-item-name",children:ge.name}),f.jsx("span",{className:`tm-crew-item-role ${(ge.role||"laborer").toLowerCase()}`,children:ge.role||"Laborer"}),xe&&f.jsx("span",{className:"tm-crew-item-check",children:""})]},Le)})})]}),m&&!h&&f.jsxs(f.Fragment,{children:[c.map(ge=>{const Le=u.filter(ee=>ee.category_id===ge.id&&i.has(ee.id));return Le.length===0?null:f.jsxs("div",{className:"tm-labor-category-section",children:[f.jsx("div",{className:"tm-category-header",children:ge.name}),Le.map(ee=>f.jsxs("div",{className:"tm-field",children:[f.jsxs("div",{className:"tm-field-header",children:[f.jsx("label",{children:ee.name}),f.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>Q(ee.id),title:H("removeClass"),children:""})]}),f.jsx("div",{className:"tm-workers-list",children:(n[ee.id]||[]).map((we,xe)=>f.jsx(sc,{worker:we,index:xe,onUpdate:(oe,He,ve)=>fe(ee.id,oe,He,ve),onRemove:oe=>je(ee.id,oe),t:H},xe))}),f.jsxs("button",{className:"tm-add-btn",onClick:()=>B(ee.id),children:["+ ",H("add")," ",ee.name]})]},ee.id))]},ge.id)}),u.filter(ge=>!ge.category_id&&i.has(ge.id)).map(ge=>f.jsxs("div",{className:"tm-field",children:[f.jsxs("div",{className:"tm-field-header",children:[f.jsx("label",{children:ge.name}),f.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>Q(ge.id),title:H("removeClass"),children:""})]}),f.jsx("div",{className:"tm-workers-list",children:(n[ge.id]||[]).map((Le,ee)=>f.jsx(sc,{worker:Le,index:ee,onUpdate:(we,xe,oe)=>fe(ge.id,we,xe,oe),onRemove:we=>je(ge.id,we),t:H},ee))}),f.jsxs("button",{className:"tm-add-btn",onClick:()=>B(ge.id),children:["+ ",H("add")," ",ge.name]})]},ge.id)),te().length>0&&f.jsx("div",{className:"tm-add-labor-class-section",children:f.jsxs("select",{className:"tm-add-labor-class-select",value:"",onChange:ge=>{ge.target.value&&K(ge.target.value)},children:[f.jsxs("option",{value:"",children:["+ ",H("addLaborClass")]}),c.map(ge=>{const Le=te().filter(ee=>ee.category_id===ge.id);return Le.length===0?null:f.jsx("optgroup",{label:ge.name,children:Le.map(ee=>f.jsx("option",{value:ee.id,children:ee.name},ee.id))},ge.id)}),te().filter(ge=>!ge.category_id).length>0&&f.jsx("optgroup",{label:H("other"),children:te().filter(ge=>!ge.category_id).map(ge=>f.jsx("option",{value:ge.id,children:ge.name},ge.id))})]})}),i.size===0&&f.jsx("div",{className:"tm-no-labor-classes",children:f.jsx("p",{children:H("noLaborClassesYet")})})]}),h&&f.jsxs("div",{className:"tm-loading-labor-classes",children:[f.jsx($s,{size:20,className:"tm-spinner"}),f.jsx("span",{children:H("loadingLaborClasses")})]}),!m&&!h&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:H("supervision")}),f.jsx("div",{className:"tm-workers-list",children:e.map((ge,Le)=>f.jsx(sc,{worker:ge,index:Le,onUpdate:G,onRemove:I,t:H,roleSelect:f.jsx("div",{className:"tm-role-select",children:f.jsxs("select",{value:ge.role,onChange:ee=>G(Le,"role",ee.target.value),children:[f.jsx("option",{value:"Foreman",children:H("foreman")}),f.jsx("option",{value:"Superintendent",children:H("superintendent")})]})})},Le))}),f.jsx("button",{className:"tm-add-btn",onClick:ne,children:H("addSupervision")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:H("operators")}),f.jsx("div",{className:"tm-workers-list",children:t.map((ge,Le)=>f.jsx(sc,{worker:ge,index:Le,onUpdate:pe,onRemove:q,t:H},Le))}),f.jsx("button",{className:"tm-add-btn",onClick:ie,children:H("addOperator")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:H("laborers")}),f.jsx("div",{className:"tm-workers-list",children:r.map((ge,Le)=>f.jsx(sc,{worker:ge,index:Le,onUpdate:U,onRemove:J,t:H},Le))}),f.jsx("button",{className:"tm-add-btn",onClick:R,children:H("addLaborer")})]})]}),p&&f.jsx(i3,{batchHours:x,setBatchHours:w,namedWorkerCount:Ie,onApply:D,onClose:()=>_(!1),t:H})]})}function s3({companyId:e,items:t,setItems:r,t:n,lang:i,onShowToast:s}){const[c,u]=y.useState(null),[m,h]=y.useState([]),[g,p]=y.useState(!1),[_,x]=y.useState(""),[w,j]=y.useState([]),[S,O]=y.useState([]),[C,A]=y.useState(!1),[k,D]=y.useState({name:"",category:"",quantity:""}),M=y.useRef(null),z=y.useRef(null);y.useEffect(()=>{c&&e&&K(c)},[c,e]),y.useEffect(()=>(!c&&M.current&&(z.current=setTimeout(()=>{M.current?.focus()},100)),()=>{z.current&&clearTimeout(z.current)}),[c]);const K=async q=>{p(!0);try{const R=await be.getMaterialsEquipmentByCategory(e,q);h(R)}catch(R){console.error("Error loading items:",R),s("Error loading items","error")}finally{p(!1)}},Q=async()=>{if(!(S.length>0))try{const q=[];for(const R of Ng){const U=await be.getMaterialsEquipmentByCategory(e,R);q.push(...U.map(J=>({...J,category:R})))}O(q)}catch(q){console.error("Error loading all materials:",q)}},ne=q=>{if(x(q),!q.trim()){j([]);return}const R=q.toLowerCase(),U=S.filter(J=>J.name.toLowerCase().includes(R)||J.category.toLowerCase().includes(R));j(U.slice(0,10))},G=q=>{const R=t.findIndex(U=>U.material_equipment_id===q.id);R>=0?r(t.map((U,J)=>J===R?{...U,quantity:U.quantity+1}:U)):r([...t,{material_equipment_id:q.id,name:q.name,unit:q.unit,category:q.category,quantity:1,isCustom:!1}]),s(`Added ${q.name}`,"success")},I=()=>{if(!k.name||!k.category||!k.quantity){s("Fill in all fields","error");return}r([...t,{material_equipment_id:null,custom_name:k.name,custom_category:k.category,name:k.name,category:k.category,quantity:parseFloat(k.quantity),unit:"each",isCustom:!0}]),D({name:"",category:"",quantity:""}),A(!1),u(null),s("Custom item added","success")},ie=(q,R)=>{const U=parseFloat(R)||0;U<=0?r(t.filter((J,B)=>B!==q)):r(t.map((J,B)=>B===q?{...J,quantity:U}:J))},pe=()=>{C?A(!1):c&&(u(null),A(!1))};return c||C?f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-wizard-header",style:{margin:"-1rem -1rem 1rem -1rem",padding:"0.75rem 1rem"},children:[f.jsx("button",{className:"tm-back-btn",onClick:pe,children:""}),f.jsx("h2",{children:C?"Add Custom Item":c}),f.jsxs("div",{className:"tm-item-count",children:[t.length," items"]})]}),C?f.jsxs("div",{className:"tm-custom-form",children:[f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Item Name"}),f.jsx("input",{type:"text",placeholder:"What did you use?",value:k.name,onChange:q=>D({...k,name:q.target.value}),autoFocus:!0})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Category"}),f.jsx("div",{className:"tm-category-select",children:Ng.map(q=>f.jsx("button",{className:`tm-cat-chip ${k.category===q?"active":""}`,onClick:()=>D({...k,category:q}),children:q},q))})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Quantity"}),f.jsx("input",{type:"number",placeholder:"How many?",value:k.quantity,onChange:q=>D({...k,quantity:q.target.value})})]}),f.jsx("button",{className:"tm-big-btn primary",onClick:I,children:"Add Custom Item"})]}):f.jsx("div",{className:"tm-item-grid",children:g?f.jsx("div",{className:"tm-loading",children:"Loading..."}):f.jsxs(f.Fragment,{children:[m.map(q=>{const R=t.find(U=>U.material_equipment_id===q.id);return f.jsxs("button",{className:`tm-item-card ${R?"added":""}`,onClick:()=>G(q),children:[f.jsx("span",{className:"tm-item-name",children:q.name}),f.jsx("span",{className:"tm-item-unit",children:q.unit}),R&&f.jsx("span",{className:"tm-item-badge",children:R.quantity})]},q.id)}),f.jsxs("button",{className:"tm-item-card custom",onClick:()=>A(!0),children:[f.jsx("span",{className:"tm-item-name",children:"+ Add Other"}),f.jsx("span",{className:"tm-item-unit",children:"Not on list"})]})]})}),!C&&t.length>0&&f.jsx("div",{className:"tm-wizard-footer",children:f.jsxs("button",{className:"tm-big-btn primary",onClick:()=>u(null),children:["Done Adding (",t.length," items)"]})})]}):f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-field tm-search-field",children:[f.jsxs("div",{className:"tm-search-input-wrapper",children:[f.jsx(uq,{size:18,className:"tm-search-icon"}),f.jsx("input",{ref:M,type:"text",placeholder:n("searchMaterials"),value:_,onChange:q=>ne(q.target.value),onFocus:()=>Q(),className:"tm-search-input"}),_&&f.jsx("button",{className:"tm-search-clear",onClick:()=>{x(""),j([])},children:""})]}),_&&w.length>0&&f.jsx("div",{className:"tm-search-results",children:w.map((q,R)=>{const U=t.find(J=>J.id===q.id);return f.jsxs("button",{className:`tm-search-result-item ${U?"added":""}`,onClick:()=>{U?ie(t.indexOf(U),U.quantity+1):r([...t,{...q,quantity:1,isCustom:!1}]),x(""),j([])},children:[f.jsx("span",{className:"tm-search-result-name",children:q.name}),f.jsx("span",{className:"tm-search-result-category",children:q.category}),U&&f.jsxs("span",{className:"tm-search-result-qty",children:["",U.quantity]})]},R)})}),_&&w.length===0&&f.jsx("div",{className:"tm-search-no-results",children:n("noSearchResults")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:n("orBrowse")}),f.jsx("div",{className:"tm-category-grid",children:Ng.map(q=>{const R=t.filter(U=>U.category===q);return f.jsxs("button",{className:"tm-category-card",onClick:()=>u(q),children:[f.jsx("span",{className:"tm-cat-name",children:q}),R.length>0&&f.jsx("span",{className:"tm-cat-count",children:R.length})]},q)})})]}),t.length>0&&f.jsxs("div",{className:"tm-field",children:[f.jsxs("label",{children:["Added Items (",t.length,")"]}),f.jsx("div",{className:"tm-added-list",children:t.map((q,R)=>f.jsxs("div",{className:"tm-added-item",children:[f.jsxs("div",{className:"tm-added-info",children:[q.isCustom&&f.jsx("span",{className:"tm-custom-badge",children:"Custom"}),f.jsx("span",{className:"tm-added-name",children:q.name})]}),f.jsxs("div",{className:"tm-added-qty",children:[f.jsx("button",{onClick:()=>ie(R,q.quantity-1),children:""}),f.jsx("span",{children:q.quantity}),f.jsx("button",{onClick:()=>ie(R,q.quantity+1),children:"+"})]})]},R))})]})]})}function l3({photos:e,onPhotoAdd:t,onRemovePhoto:r,maxPhotos:n,selectedCorId:i,setSelectedCorId:s,assignableCORs:c,lang:u}){const m=r3(u);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`tm-action-card-prominent ${e.length>0?"has-content":"needs-action"}`,children:[f.jsxs("div",{className:"tm-action-card-header",children:[f.jsx("div",{className:"tm-action-card-icon",children:f.jsx(gy,{size:24})}),f.jsxs("div",{className:"tm-action-card-title",children:[f.jsx("h4",{children:m("photoEvidence")}),f.jsx("span",{className:"tm-action-card-status",children:e.length>0?`${e.length} ${m("photosAdded")}`:m("recommendedForBilling")})]})]}),e.length>0&&f.jsx("div",{className:"tm-photo-preview-row",children:e.map(h=>f.jsxs("div",{className:"tm-photo-preview-thumb",children:[f.jsx("img",{src:h.previewUrl,alt:h.name}),h.latitude&&f.jsx("span",{className:"tm-photo-gps-badge",title:`${h.latitude.toFixed(4)}, ${h.longitude.toFixed(4)}`,children:f.jsx(vy,{size:10})}),f.jsx("button",{className:"tm-photo-remove-x",onClick:()=>r(h.id),children:""})]},h.id))}),f.jsxs("label",{className:`tm-action-card-btn ${e.length===0?"primary":""}`,children:[f.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t,style:{display:"none"}}),f.jsx(gy,{size:18}),f.jsx("span",{children:e.length>0?m("addMorePhotos"):m("addPhotos")})]})]}),f.jsxs("div",{className:`tm-action-card-prominent ${i?"has-content":""}`,children:[f.jsxs("div",{className:"tm-action-card-header",children:[f.jsx("div",{className:"tm-action-card-icon cor",children:f.jsx(dq,{size:24})}),f.jsxs("div",{className:"tm-action-card-title",children:[f.jsx("h4",{children:m("linkToChangeOrder")}),f.jsx("span",{className:"tm-action-card-status",children:i?`${m("linkedTo")}: ${c.find(h=>h.id===i)?.cor_number||""}`:m("optionalLinkCOR")})]})]}),f.jsxs("select",{value:i,onChange:h=>s(h.target.value),className:"tm-cor-select-prominent",children:[f.jsx("option",{value:"",children:m("selectCOROptional")}),c.map(h=>f.jsxs("option",{value:h.id,children:[h.cor_number,": ",h.title||"Untitled"," (",h.status,")"]},h.id))]}),c.length===0&&f.jsx("p",{className:"tm-cor-hint",children:m("noActiveCORs")})]})]})}const c3=y.lazy(()=>Zr(()=>import("./SignatureLinkGenerator-BRNzftRA.js"),__vite__mapDeps([0,1,2,3,4]))),u3=y.lazy(()=>Zr(()=>import("./TMClientSignature-Bxr6sKtw.js"),__vite__mapDeps([5,1,2,3,4])));function d3({step:e,setStep:t,project:r,companyId:n,workDate:i,cePcoNumber:s,notes:c,photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:g,selectedCorId:p,setSelectedCorId:_,assignableCORs:x,items:w,hasCustomLaborClasses:j,validDynamicWorkersList:S,validSupervision:O,validOperators:C,validLaborers:A,totalWorkers:k,totalRegHours:D,totalOTHours:M,submittedByName:z,setSubmittedByName:K,submittedTicket:Q,submitting:ne,submitProgress:G,clientSigned:I,setClientSigned:ie,showSignatureLinkModal:pe,setShowSignatureLinkModal:q,showOnSiteSignature:R,setShowOnSiteSignature:U,onRetryPhotoUpload:J,t:B,lang:fe,onShowToast:je}){return e===5&&Q?f.jsxs("div",{className:"tm-step-content tm-success-step",children:[f.jsxs("div",{className:"tm-success-header",children:[f.jsx("div",{className:"tm-success-icon",children:f.jsx(ea,{size:48})}),f.jsx("h2",{children:B("tmSubmitted")}),f.jsx("p",{className:"tm-success-subtitle",children:B("ticketSavedReady")})]}),f.jsxs("div",{className:"tm-success-summary",children:[f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:k}),f.jsx("span",{className:"tm-success-stat-label",children:B("workersLabel")})]}),f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:D+M}),f.jsx("span",{className:"tm-success-stat-label",children:B("totalHours")})]}),f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),f.jsx("span",{className:"tm-success-stat-label",children:B("workDate")})]})]}),u.some(te=>te.status==="failed")&&f.jsxs("div",{className:"tm-failed-photos-section",children:[f.jsxs("div",{className:"tm-failed-photos-header",children:[f.jsx(kb,{size:18}),f.jsx("span",{children:fe==="en"?`${u.filter(te=>te.status==="failed").length} photo(s) failed to upload`:`${u.filter(te=>te.status==="failed").length} foto(s) no se subieron`})]}),f.jsx("div",{className:"tm-failed-photos-grid",children:u.filter(te=>te.status==="failed").map(te=>f.jsxs("div",{className:"tm-failed-photo-item",children:[f.jsx("img",{src:te.previewUrl,alt:te.name}),f.jsx("div",{className:"tm-failed-photo-overlay",children:f.jsx("button",{className:"tm-retry-photo-btn",onClick:()=>J(te.id,Q.id),disabled:te.status==="uploading"||te.status==="compressing",children:te.status==="uploading"||te.status==="compressing"?f.jsx($s,{size:16,className:"tm-spinner"}):f.jsxs(f.Fragment,{children:[f.jsx(OS,{size:16}),f.jsx("span",{children:B("retry")})]})})}),te.error&&f.jsxs("div",{className:"tm-failed-photo-error",title:te.error,children:[te.error.substring(0,20),te.error.length>20?"...":""]})]},te.id))}),f.jsxs("button",{className:"tm-retry-all-btn",onClick:async()=>{const te=u.filter(H=>H.status==="failed");for(const H of te)await J(H.id,Q.id)},children:[f.jsx(OS,{size:16}),B("retryAllPhotos")]})]}),u.length>0&&u.every(te=>te.status==="confirmed")&&f.jsxs("div",{className:"tm-photos-success",children:[f.jsx(Ki,{size:16}),f.jsx("span",{children:fe==="en"?`All ${u.length} photo(s) uploaded successfully`:`${u.length} foto(s) subidas exitosamente`})]}),f.jsxs("div",{className:"tm-signature-options",children:[f.jsx("h3",{children:B("getClientSignature")}),f.jsx("p",{className:"tm-signature-description",children:B("signatureDescription")}),I?f.jsxs("div",{className:"tm-signed-confirmation",children:[f.jsx(ea,{size:32,className:"tm-signed-icon"}),f.jsx("span",{children:B("clientSignatureCollected")})]}):f.jsxs("div",{className:"tm-signature-buttons",children:[f.jsxs("button",{className:"tm-signature-option-btn primary",onClick:()=>U(!0),children:[f.jsx("div",{className:"tm-signature-option-icon",children:f.jsx(xc,{size:24})}),f.jsxs("div",{className:"tm-signature-option-text",children:[f.jsx("span",{className:"tm-signature-option-title",children:B("signNowOnSite")}),f.jsx("span",{className:"tm-signature-option-desc",children:B("clientSignsDevice")})]})]}),f.jsxs("button",{className:"tm-signature-option-btn",onClick:()=>q(!0),children:[f.jsx("div",{className:"tm-signature-option-icon",children:f.jsx(xc,{size:24})}),f.jsxs("div",{className:"tm-signature-option-text",children:[f.jsx("span",{className:"tm-signature-option-title",children:B("sendSignatureLink")}),f.jsx("span",{className:"tm-signature-option-desc",children:B("clientSignsLater")})]})]})]})]}),pe&&f.jsx(y.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading..."}),children:f.jsx(c3,{documentType:"tm_ticket",documentId:Q.id,companyId:n,projectId:r.id,project:r,documentTitle:`T&M - ${new Date(i).toLocaleDateString()}`,onClose:()=>q(!1),onShowToast:je})}),R&&f.jsx(y.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading..."}),children:f.jsx(u3,{ticketId:Q.id,ticketSummary:{workDate:i,workerCount:k,totalHours:D+M},lang:fe,onSave:()=>{U(!1),ie(!0)},onClose:()=>U(!1),onShowToast:je})})]}):f.jsxs("div",{className:"tm-step-content",children:[f.jsx(l3,{photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:g,selectedCorId:p,setSelectedCorId:_,assignableCORs:x,lang:fe}),f.jsx("div",{className:"tm-review-divider",children:f.jsx("span",{children:B("ticketSummary")})}),f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[""," ",B("workDate")]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:B("edit")})]}),f.jsxs("div",{className:"tm-review-row",children:[f.jsx("span",{children:new Date(i).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),s&&f.jsxs("span",{children:["CE/PCO: ",s]})]})]}),c&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(Fo,{size:16,className:"inline-icon"})," ",B("notes")]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:B("edit")})]}),f.jsx("div",{className:"tm-review-notes",children:c})]}),j&&S.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(Po,{size:16,className:"inline-icon"})," ",B("workersLabel")," (",D+M," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:S.map((te,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsxs("div",{className:"tm-review-worker-name",children:[f.jsx("span",{className:"tm-role-badge",children:te.role})," ",te.name]}),f.jsxs("div",{className:"tm-review-worker-details",children:[te.time_started&&te.time_ended&&f.jsxs("span",{className:"tm-review-time",children:[te.time_started," - ",te.time_ended]}),f.jsxs("span",{className:"tm-review-hours",children:[te.hours||0," reg",te.overtime_hours>0?` + ${te.overtime_hours} OT`:""]})]})]},H))})]}),!j&&O.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(fq,{size:16,className:"inline-icon"})," Supervision (",O.reduce((te,H)=>te+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:O.map((te,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsxs("div",{className:"tm-review-worker-name",children:[f.jsx("span",{className:"tm-role-badge",children:te.role})," ",te.name]}),f.jsxs("div",{className:"tm-review-worker-details",children:[te.timeStarted&&te.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[te.timeStarted," - ",te.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[te.hours||0," reg",parseFloat(te.overtimeHours)>0?` + ${te.overtimeHours} OT`:""]})]})]},H))})]}),!j&&C.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[""," Operators (",C.reduce((te,H)=>te+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:C.map((te,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsx("div",{className:"tm-review-worker-name",children:te.name}),f.jsxs("div",{className:"tm-review-worker-details",children:[te.timeStarted&&te.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[te.timeStarted," - ",te.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[te.hours||0," reg",parseFloat(te.overtimeHours)>0?` + ${te.overtimeHours} OT`:""]})]})]},H))})]}),!j&&A.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(Po,{size:16,className:"inline-icon"})," Laborers (",A.reduce((te,H)=>te+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:A.map((te,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsx("div",{className:"tm-review-worker-name",children:te.name}),f.jsxs("div",{className:"tm-review-worker-details",children:[te.timeStarted&&te.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[te.timeStarted," - ",te.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[te.hours||0," reg",parseFloat(te.overtimeHours)>0?` + ${te.overtimeHours} OT`:""]})]})]},H))})]}),w.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(mq,{size:16,className:"inline-icon"})," Materials & Equipment (",w.length," items)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(3),children:B("edit")})]}),f.jsx("div",{className:"tm-review-list",children:w.map((te,H)=>f.jsxs("div",{className:"tm-review-row",children:[f.jsxs("span",{children:[te.isCustom&&f.jsxs(f.Fragment,{children:[f.jsx(hq,{size:14,className:"inline-icon"})," "]}),te.name]}),f.jsxs("span",{children:[te.quantity," ",te.unit]})]},H))})]}),f.jsxs("div",{className:"tm-review-section tm-certification",children:[f.jsx("div",{className:"tm-review-header",children:f.jsxs("span",{children:[f.jsx(xc,{size:16,className:"inline-icon"})," ",B("submittedBy")]})}),f.jsx("input",{type:"text",className:"tm-certification-input",placeholder:B("enterYourName"),value:z,onChange:te=>K(te.target.value)}),f.jsx("p",{className:"tm-certification-note",children:B("certifyAccurate")})]})]})}const t1=()=>{const e=new Uint8Array(6);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(36)).join("")},Pd=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function f3({project:e,companyId:t,maxPhotos:r=10,onSubmit:n,onCancel:i,onShowToast:s}){const[c,u]=y.useState(1),[m,h]=y.useState(new Date().toISOString().split("T")[0]),[g,p]=y.useState(null),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState(!1),[C,A]=y.useState(""),[k,D]=y.useState(""),[M,z]=y.useState(""),[K,Q]=y.useState([]),[ne,G]=y.useState(!1),[I,ie]=y.useState(!1),[pe,q]=y.useState({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),[R,U]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}]),[J,B]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[fe,je]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[te,H]=y.useState([]),[Ee,Te]=y.useState(""),[Ie,ge]=y.useState([]),[Le,ee]=y.useState(!1),[we,xe]=y.useState(""),[oe,He]=y.useState([]),[ve,Ne]=y.useState(!1),[Me,jt]=y.useState("en"),Re=Y=>$N[Me][Y]||Y,[It,yt]=y.useState([]),[Ct,Br]=y.useState([]),[xt,Ye]=y.useState({}),[$r,xn]=y.useState(!0),[Hr,jr]=y.useState(new Set),Yt=Ct.length>0;y.useEffect(()=>{Qt(),he();const Y=be.subscribeToCORs?.(e.id,()=>{he()});return()=>{Y?.unsubscribe?.()}},[e.id]),y.useEffect(()=>{(async()=>{if(!t){xn(!1);return}try{const ce=await be.getLaborClassesForField(t);yt(ce.categories||[]),Br(ce.classes||[])}catch(ce){console.error("Error loading labor classes:",ce)}finally{xn(!1)}})()},[t]),y.useEffect(()=>{if($r||Ct.length===0)return;const Y=new Set;oe.forEach(le=>{le.labor_class_id&&Y.add(le.labor_class_id)});const ce={},me=new Set;Y.forEach(le=>{Ct.some(ae=>ae.id===le)&&(ce[le]=[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}],me.add(le))}),Ye(le=>Object.keys(le).length===0?ce:le),jr(le=>le.size===0?me:le)},[Ct,oe,$r]);const he=async()=>{G(!0);try{const Y=await be.getAssignableCORs(e.id);Q(Y||[])}catch(Y){console.error("Error loading assignable CORs:",Y)}finally{G(!1)}},it=()=>{const{timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}=pe;let ae=0;if(Yt){const Se={};Object.entries(xt).forEach(([Ue,Fe])=>{Se[Ue]=Fe.map(lt=>lt&&lt.name&&lt.name.trim()?(ae++,{...lt,timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}):lt)}),Ye(Se)}else U(R.map(Se=>Se&&Se.name&&Se.name.trim()?(ae++,{...Se,timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}):Se)),B(J.map(Se=>Se&&Se.name&&Se.name.trim()?(ae++,{...Se,timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}):Se)),je(fe.map(Se=>Se&&Se.name&&Se.name.trim()?(ae++,{...Se,timeStarted:Y,timeEnded:ce,hours:me,overtimeHours:le}):Se));ie(!1),q({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),ae>0?s(Re("appliedHours").replace("{count}",ae),"success"):s(Re("addWorkersFirst"),"info")},wn=Y=>{let ce,me,le,ae;switch(Y){case"8hr":ce="07:00",me="15:30",le="8",ae="";break;case"10hr":ce="06:00",me="16:30",le="8",ae="2";break;case"4hr":ce="07:00",me="11:00",le="4",ae="";break;default:return}let Se=0;if(Yt){const Ue={};Object.entries(xt).forEach(([Fe,lt])=>{Ue[Fe]=lt.map(Mr=>Mr&&Mr.name&&Mr.name.trim()?(Se++,{...Mr,timeStarted:ce,timeEnded:me,hours:le,overtimeHours:ae}):Mr)}),Ye(Ue)}else U(Ue=>Ue.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(Se++,{...Fe,timeStarted:ce,timeEnded:me,hours:le,overtimeHours:ae}):Fe)),B(Ue=>Ue.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(Se++,{...Fe,timeStarted:ce,timeEnded:me,hours:le,overtimeHours:ae}):Fe)),je(Ue=>Ue.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(Se++,{...Fe,timeStarted:ce,timeEnded:me,hours:le,overtimeHours:ae}):Fe));Se>0?s(Re("appliedHours").replace("{count}",Se),"success"):s(Re("addWorkersFirst"),"info")},Qt=async()=>{try{const Y=await be.getCrewCheckin(e.id);Y?.workers&&He(Y.workers)}catch(Y){console.error("Error loading crew:",Y)}},Ut=async()=>{Ne(!0);try{const Y=await be.getPreviousTicketCrew(e.id,m);if(!Y||Y.totalWorkers===0){s(Re("noPreviousCrew"),"info");return}Yt&&Y.dynamicWorkers?Ye(Y.dynamicWorkers):(Y.supervision&&U(Y.supervision),Y.operators&&B(Y.operators),Y.laborers&&je(Y.laborers));const ce=new Date(Y.workDate).toLocaleDateString();s(Re("loadedWorkers").replace("{count}",Y.totalWorkers).replace("{date}",ce),"success")}catch(Y){console.error("Error loading previous crew:",Y),s(Re("errorLoadingCrew"),"error")}finally{Ne(!1)}},qt=()=>{U([...R,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},ft=(Y,ce,me)=>{U(R.map((le,ae)=>{if(ae!==Y)return le;const Se={...le,[ce]:me};if(ce==="timeStarted"||ce==="timeEnded"){const Ue=ce==="timeStarted"?me:le.timeStarted,Fe=ce==="timeEnded"?me:le.timeEnded,lt=Pd(Ue,Fe);lt&&(Se.hours=lt.hours,Se.overtimeHours=lt.overtimeHours)}return Se}))},tn=Y=>{R.length>1?U(R.filter((ce,me)=>me!==Y)):U([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},Hn=()=>{je([...fe,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},sa=(Y,ce,me)=>{je(fe.map((le,ae)=>{if(ae!==Y)return le;const Se={...le,[ce]:me};if(ce==="timeStarted"||ce==="timeEnded"){const Ue=ce==="timeStarted"?me:le.timeStarted,Fe=ce==="timeEnded"?me:le.timeEnded,lt=Pd(Ue,Fe);lt&&(Se.hours=lt.hours,Se.overtimeHours=lt.overtimeHours)}return Se}))},di=Y=>{fe.length>1?je(fe.filter((ce,me)=>me!==Y)):je([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},fi=()=>{B([...J,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},xa=(Y,ce,me)=>{B(J.map((le,ae)=>{if(ae!==Y)return le;const Se={...le,[ce]:me};if(ce==="timeStarted"||ce==="timeEnded"){const Ue=ce==="timeStarted"?me:le.timeStarted,Fe=ce==="timeEnded"?me:le.timeEnded,lt=Pd(Ue,Fe);lt&&(Se.hours=lt.hours,Se.overtimeHours=lt.overtimeHours)}return Se}))},jn=Y=>{J.length>1?B(J.filter((ce,me)=>me!==Y)):B([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},mi=Y=>{Ye(ce=>({...ce,[Y]:[...ce[Y]||[],{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))},wa=(Y,ce,me,le)=>{Ye(ae=>({...ae,[Y]:(ae[Y]||[]).map((Se,Ue)=>{if(Ue!==ce)return Se;const Fe={...Se,[me]:le};if(me==="timeStarted"||me==="timeEnded"){const lt=me==="timeStarted"?le:Se.timeStarted,Mr=me==="timeEnded"?le:Se.timeEnded,Je=Pd(lt,Mr);Je&&(Fe.hours=Je.hours,Fe.overtimeHours=Je.overtimeHours)}return Fe})}))},cl=(Y,ce)=>{Ye(me=>{const le=me[Y]||[];return le.length>1?{...me,[Y]:le.filter((ae,Se)=>Se!==ce)}:{...me,[Y]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}})},ye=Y=>{Y&&(jr(ce=>new Set([...ce,Y])),Ye(ce=>!ce[Y]||ce[Y].length===0?{...ce,[Y]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}:ce))},Fn=Y=>{jr(ce=>{const me=new Set(ce);return me.delete(Y),me}),Ye(ce=>{const me={...ce};return delete me[Y],me})},ja=()=>Ct.filter(Y=>!Hr.has(Y.id)),ul=()=>{if(!xt||typeof xt!="object")return[];const Y=[];return Object.entries(xt).forEach(([ce,me])=>{if(!Array.isArray(me))return;const le=Ct.find(ae=>ae.id===ce);me.forEach(ae=>{ae&&ae.name&&ae.name.trim()&&(parseFloat(ae.hours)>0||parseFloat(ae.overtimeHours)>0)&&Y.push({name:ae.name.trim(),hours:parseFloat(ae.hours)||0,overtime_hours:parseFloat(ae.overtimeHours)||0,time_started:ae.timeStarted||null,time_ended:ae.timeEnded||null,role:le?.name||"Worker",labor_class_id:ce})})}),Y},hu=Y=>{if(Y.labor_class_id&&Yt&&Ct.some(me=>me.id===Y.labor_class_id)){Hr.has(Y.labor_class_id)||jr(ae=>new Set([...ae,Y.labor_class_id]));const me=xt[Y.labor_class_id]||[],le=me.findIndex(ae=>!ae||!ae.name||!ae.name.trim());if(le>=0){const ae=[...me];ae[le]={...ae[le],name:Y.name},Ye(Se=>({...Se,[Y.labor_class_id]:ae}))}else Ye(ae=>({...ae,[Y.labor_class_id]:[...ae[Y.labor_class_id]||[],{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}else if(Yt){const le=[...Hr][0]||Ct[0]?.id;if(le){Hr.has(le)||jr(Ue=>new Set([...Ue,le]));const ae=xt[le]||[],Se=ae.findIndex(Ue=>!Ue||!Ue.name||!Ue.name.trim());if(Se>=0){const Ue=[...ae];Ue[Se]={...Ue[Se],name:Y.name},Ye(Fe=>({...Fe,[le]:Ue}))}else Ye(Ue=>({...Ue,[le]:[...Ue[le]||[],{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}}else{const me=(Y.role||"").toLowerCase();if(me.includes("foreman")||me.includes("supervisor")||me.includes("superintendent")){const le=R.findIndex(ae=>!ae||!ae.name||!ae.name.trim());le>=0?(ft(le,"name",Y.name),ft(le,"role",me.includes("superintendent")?"Superintendent":"Foreman")):U([...R,{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:me.includes("superintendent")?"Superintendent":"Foreman"}])}else if(me.includes("operator")){const le=J.findIndex(ae=>!ae||!ae.name||!ae.name.trim());le>=0?xa(le,"name",Y.name):B([...J,{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}else{const le=fe.findIndex(ae=>!ae||!ae.name||!ae.name.trim());le>=0?sa(le,"name",Y.name):je([...fe,{name:Y.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}}s(`Added ${Y.name}`,"success")},pu=async Y=>{const ce=Array.from(Y.target.files);if(ce.length===0)return;const me=r===-1?1/0:r-Ie.length;if(me<=0){s(`Photo limit reached (${r} max)`,"error"),Y.target.value="";return}const le=ce.slice(0,me);le.length<ce.length&&s(`Only ${le.length} photo(s) added (${r} max)`,"error");const ae=await t3(),Se=10*1024*1024;le.forEach(Ue=>{if(!Ue.type.startsWith("image/")){s("Please select an image file","error");return}if(Ue.size>Se){s(`Photo too large: ${Ue.name} (max 10MB)`,"error");return}const Fe=URL.createObjectURL(Ue),lt=`photo-${Date.now()}-${t1()}`;ge(Mr=>[...Mr,{id:`${Date.now()}-${t1()}`,tempId:lt,file:Ue,previewUrl:Fe,name:Ue.name,status:"pending",attempts:0,error:null,uploadedUrl:null,latitude:ae?.latitude||null,longitude:ae?.longitude||null,gpsAccuracy:ae?.accuracy||null}])}),Y.target.value=""},Kn=(Y,ce)=>{ge(me=>me.map(le=>le.id===Y?{...le,...ce}:le))},dl=async(Y,ce)=>{const me=Ie.find(le=>le.id===Y);if(!(!me||me.status!=="failed")){Kn(Y,{status:"compressing",error:null});try{let le=me.file;try{le=await JS(me.file)}catch(Se){console.warn("Compression failed, using original:",Se)}Kn(Y,{status:"uploading"});const ae=await be.uploadPhoto(t,e.id,ce,le);Kn(Y,{status:"confirmed",uploadedUrl:ae,attempts:me.attempts+1}),await be.updateTMTicketPhotos(ce,[...Ie.filter(Se=>Se.uploadedUrl).map(Se=>Se.uploadedUrl),ae]),s("Photo uploaded successfully","success")}catch(le){console.error("Retry failed:",le),Kn(Y,{status:"failed",error:le.message||"Upload failed",attempts:me.attempts+1}),s("Photo retry failed","error")}}},fl=Y=>{const ce=Ie.find(me=>me.id===Y);ce?.previewUrl&&URL.revokeObjectURL(ce.previewUrl),ge(Ie.filter(me=>me.id!==Y))},eo=R.filter(Y=>Y&&Y.name&&Y.name.trim()&&(parseFloat(Y.hours)>0||parseFloat(Y.overtimeHours)>0)),to=J.filter(Y=>Y&&Y.name&&Y.name.trim()&&(parseFloat(Y.hours)>0||parseFloat(Y.overtimeHours)>0)),rn=fe.filter(Y=>Y&&Y.name&&Y.name.trim()&&(parseFloat(Y.hours)>0||parseFloat(Y.overtimeHours)>0)),Bt=ul(),sr=Yt?Bt.length:eo.length+to.length+rn.length,la=Yt?Bt.reduce((Y,ce)=>Y+(ce.hours||0),0):[...eo,...to,...rn].reduce((Y,ce)=>Y+parseFloat(ce.hours||0),0),ro=Yt?Bt.reduce((Y,ce)=>Y+(ce.overtime_hours||0),0):[...eo,...to,...rn].reduce((Y,ce)=>Y+parseFloat(ce.overtimeHours||0),0),gu=Yt?Object.values(xt||{}).flat().filter(Y=>Y&&Y.name&&Y.name.trim()):[...R.filter(Y=>Y&&Y.name&&Y.name.trim()),...J.filter(Y=>Y&&Y.name&&Y.name.trim()),...fe.filter(Y=>Y&&Y.name&&Y.name.trim())],ml=gu.length-sr,hl=()=>{if(c===1)return Ee.trim().length>0;if(c===2){if(Yt)return ul().length>0;const Y=R.some(le=>le&&le.name&&le.name.trim()&&(parseFloat(le.hours)>0||parseFloat(le.overtimeHours)>0)),ce=J.some(le=>le&&le.name&&le.name.trim()&&(parseFloat(le.hours)>0||parseFloat(le.overtimeHours)>0)),me=fe.some(le=>le&&le.name&&le.name.trim()&&(parseFloat(le.hours)>0||parseFloat(le.overtimeHours)>0));return Y||ce||me}return!0},Qo=(()=>{const Y=[];return c===1&&!Ee.trim()&&Y.push(Re("descriptionRecommended")),c===2&&ml>0&&Y.push(`${ml} ${Re("workersNoHours")}`),c===4&&!k.trim()&&Y.push(Re("nameRequired")),Y})(),Yn=()=>{c<4&&u(c+1)},hi=()=>{c>1?u(c-1):i()},no=async()=>{if(!k.trim()){s("Enter your name to submit","error");return}let Y=[];if(Yt){if(Y=ul(),Y.length===0){s("Add at least one worker","error");return}}else{const ce=R.filter(ae=>ae&&ae.name&&ae.name.trim()&&(parseFloat(ae.hours)>0||parseFloat(ae.overtimeHours)>0)),me=J.filter(ae=>ae&&ae.name&&ae.name.trim()&&(parseFloat(ae.hours)>0||parseFloat(ae.overtimeHours)>0)),le=fe.filter(ae=>ae&&ae.name&&ae.name.trim()&&(parseFloat(ae.hours)>0||parseFloat(ae.overtimeHours)>0));if(ce.length===0&&me.length===0&&le.length===0){s("Add at least one worker","error");return}Y=[...ce.map(ae=>({name:ae.name.trim(),hours:parseFloat(ae.hours)||0,overtime_hours:parseFloat(ae.overtimeHours)||0,time_started:ae.timeStarted||null,time_ended:ae.timeEnded||null,role:ae.role})),...me.map(ae=>({name:ae.name.trim(),hours:parseFloat(ae.hours)||0,overtime_hours:parseFloat(ae.overtimeHours)||0,time_started:ae.timeStarted||null,time_ended:ae.timeEnded||null,role:"Operator"})),...le.map(ae=>({name:ae.name.trim(),hours:parseFloat(ae.hours)||0,overtime_hours:parseFloat(ae.overtimeHours)||0,time_started:ae.timeStarted||null,time_ended:ae.timeEnded||null,role:"Laborer"}))]}ee(!0),xe("Creating ticket...");try{const ce=await be.createTMTicket({project_id:e.id,work_date:m,ce_pco_number:C.trim()||null,assigned_cor_id:M||null,notes:Ee.trim()||null,photos:[],created_by_name:k.trim()});if(!ce||!ce.id)throw new Error("Failed to create ticket - no ticket ID returned");let me=[];const le=Ie.filter(ae=>ae.status==="pending");if(le.length>0){xe(`Compressing ${le.length} photo${le.length>1?"s":""}...`),le.forEach(Je=>Kn(Je.id,{status:"compressing"}));const ae=await Promise.all(le.map(async Je=>{try{const Gt=await JS(Je.file);return{...Je,file:Gt}}catch(Gt){return console.warn(`Failed to compress photo ${Je.name}, using original:`,Gt),Je}}));xe(`Uploading ${le.length} photo${le.length>1?"s":""}...`),le.forEach(Je=>Kn(Je.id,{status:"uploading"}));let Se=0,Ue=0;const Fe=ae.map(async Je=>{try{const Gt=await be.uploadPhoto(t,e.id,ce.id,Je.file);return Se++,xe(`Uploading ${Se}/${le.length} photos...`),Kn(Je.id,{status:"confirmed",uploadedUrl:Gt,attempts:(Je.attempts||0)+1}),{id:Je.id,url:Gt}}catch(Gt){return console.error(`Photo ${Je.name} upload failed:`,Gt),Ue++,Kn(Je.id,{status:"failed",error:Gt.message||"Upload failed",attempts:(Je.attempts||0)+1}),{id:Je.id,url:null,error:Gt.message}}}),lt=await Promise.all(Fe);me=lt.filter(Je=>Je.url!==null).map(Je=>Je.url);const Mr={};for(const Je of lt)if(Je.url){const Gt=le.find(Gn=>Gn.id===Je.id);Gt?.latitude&&Gt?.longitude&&(Mr[Je.url]={lat:Gt.latitude,lng:Gt.longitude,accuracy:Gt.gpsAccuracy})}Ue>0&&me.length>0?s(`${me.length}/${le.length} photos uploaded. ${Ue} failed - can retry later.`,"warning"):Ue>0&&me.length===0&&s(`All ${Ue} photos failed to upload - can retry after submission.`,"error"),me.length>0&&(xe("Saving photos..."),await be.updateTMTicketPhotos(ce.id,me,Object.keys(Mr).length>0?Mr:null))}else me.length>0&&(xe("Saving photos..."),await be.updateTMTicketPhotos(ce.id,me));if(xe("Saving workers..."),await be.addTMWorkers(ce.id,Y),te.length>0&&(xe("Saving materials..."),await be.addTMItems(ce.id,te.map(ae=>({material_equipment_id:ae.material_equipment_id,custom_name:ae.custom_name||null,custom_category:ae.custom_category||null,quantity:ae.quantity})))),M){xe("Importing to COR...");try{await be.importTicketDataToCOR(ce.id,M,t,e.work_type||"demolition",e.job_type||"standard")}catch(ae){console.error("Error importing to COR:",ae);try{await be.markImportFailed(ce.id,M,ae?.message||"Import failed")}catch(Se){console.error("Error marking import failed:",Se)}s("T&M saved. COR data sync failed - retry from ticket list.","warning")}}Ie.forEach(ae=>{ae.previewUrl&&URL.revokeObjectURL(ae.previewUrl)}),p(ce),s("T&M submitted!","success"),u(5)}catch(ce){console.error("Error submitting T&M:",ce),s("Error submitting T&M","error")}finally{ee(!1),xe("")}};return f.jsxs("div",{className:"tm-wizard",children:[f.jsxs("div",{className:"tm-wizard-header",children:[c<5?f.jsx("button",{className:"tm-back-btn",onClick:hi,children:""}):f.jsx("div",{className:"tm-success-check",children:f.jsx(ea,{size:24})}),f.jsxs("h2",{children:[c===1&&Re("workInfo"),c===2&&Re("crewHours"),c===3&&Re("materialsEquipment"),c===4&&Re("review"),c===5&&Re("submitted")]}),f.jsxs("div",{className:"tm-header-right",children:[c<4&&f.jsxs("button",{className:"tm-lang-toggle",onClick:()=>jt(Me==="en"?"es":"en"),title:Re(Me==="en"?"switchToSpanish":"switchToEnglish"),children:[f.jsx(pq,{size:16}),Me==="en"?"ES":"EN"]}),c<5&&f.jsxs("div",{className:"tm-step-dots",children:[f.jsx("span",{className:`tm-dot ${c>=1?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=2?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=3?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=4?"active":""}`})]})]})]}),c===1&&f.jsx(n3,{project:e,workDate:m,setWorkDate:h,cePcoNumber:C,setCePcoNumber:A,notes:Ee,setNotes:Te,t:Re,lang:Me}),c===2&&f.jsx(o3,{supervision:R,operators:J,laborers:fe,dynamicWorkers:xt,activeLaborClassIds:Hr,setActiveLaborClassIds:jr,laborCategories:It,laborClasses:Ct,hasCustomLaborClasses:Yt,loadingLaborClasses:$r,todaysCrew:oe,showBatchHoursModal:I,setShowBatchHoursModal:ie,batchHours:pe,setBatchHours:q,loadingPreviousCrew:ve,namedWorkers:gu,workersNeedingHours:ml,totalRegHours:la,totalOTHours:ro,onLoadPreviousCrew:Ut,onApplyBatchHours:it,onApplyInlinePreset:wn,onAddCrewWorker:hu,onActivateLaborClass:ye,onDeactivateLaborClass:Fn,addSupervision:qt,updateSupervision:ft,removeSupervision:tn,addOperator:fi,updateOperator:xa,removeOperator:jn,addLaborer:Hn,updateLaborer:sa,removeLaborer:di,addDynamicWorker:mi,updateDynamicWorker:wa,removeDynamicWorker:cl,getInactiveLaborClasses:ja,t:Re,lang:Me,onShowToast:s}),c===3&&f.jsx(s3,{companyId:t,items:te,setItems:H,t:Re,lang:Me,onShowToast:s}),(c===4||c===5)&&f.jsx(d3,{step:c,setStep:u,project:e,companyId:t,workDate:m,cePcoNumber:C,notes:Ee,photos:Ie,onPhotoAdd:pu,onRemovePhoto:fl,maxPhotos:r,selectedCorId:M,setSelectedCorId:z,assignableCORs:K,items:te,hasCustomLaborClasses:Yt,validDynamicWorkersList:Bt,validSupervision:eo,validOperators:to,validLaborers:rn,totalWorkers:sr,totalRegHours:la,totalOTHours:ro,submittedByName:k,setSubmittedByName:D,submittedTicket:g,submitting:Le,submitProgress:we,clientSigned:S,setClientSigned:O,showSignatureLinkModal:_,setShowSignatureLinkModal:x,showOnSiteSignature:w,setShowOnSiteSignature:j,onRetryPhotoUpload:dl,t:Re,lang:Me,onShowToast:s}),c<5&&f.jsxs("div",{className:"tm-wizard-footer",children:[Qo.length>0&&f.jsxs("div",{className:"tm-validation-summary",children:[f.jsx(kb,{size:16}),f.jsx("span",{children:Qo[0]})]}),c===1&&f.jsx("button",{className:"tm-big-btn primary",onClick:Yn,disabled:!hl(),children:Re("nextCrew")}),c===2&&f.jsxs("button",{className:"tm-big-btn primary",onClick:Yn,disabled:!hl(),children:[Re("nextMaterials")," (",sr," ",Re(sr===1?"worker":"workers_plural"),", ",la+ro," hrs)"]}),c===3&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"tm-big-btn primary",onClick:Yn,children:[Re("reviewAndSubmit")," (",te.length," ",te.length===1?Re("item"):Re("items_plural"),")"]}),f.jsx("button",{className:"tm-skip-btn",onClick:Yn,children:Re("skipNoMaterials")})]}),c===4&&f.jsx("button",{className:`tm-big-btn submit ${Le?"submitting":""} ${k.trim()?"ready":"needs-name"}`,onClick:no,disabled:Le||!k.trim(),children:Le?f.jsxs(f.Fragment,{children:[f.jsx($s,{size:20,className:"tm-spinner"}),f.jsx("span",{className:"tm-submit-text",children:we||Re("submitting")})]}):k.trim()?f.jsxs(f.Fragment,{children:[f.jsx(Ki,{size:20}),f.jsx("span",{children:Re("submitTM")})]}):f.jsxs(f.Fragment,{children:[f.jsx(xc,{size:18}),f.jsx("span",{children:Re("enterNameToSubmit")})]})})]}),c===5&&f.jsxs("div",{className:"tm-wizard-footer",children:[f.jsxs("button",{className:"tm-big-btn primary",onClick:n,children:[f.jsx(Ki,{size:20}),f.jsx("span",{children:Re("done")})]}),f.jsx("button",{className:"tm-skip-btn",onClick:n,children:Re("skipSignature")})]})]})}function m3({project:e,companyId:t,onShowToast:r}){const[n,i]=y.useState([]),[s,c]=y.useState(!0),[u,m]=y.useState(!1),[h,g]=y.useState(!1),[p,_]=y.useState({name:"",role:"",labor_class_id:null}),[x,w]=y.useState([]),[j,S]=y.useState(!0),[O,C]=y.useState([]),[A,k]=y.useState([]),[D,M]=y.useState(!0),z=["Foreman","Laborer","Supervisor","Operator"],K=y.useCallback(async()=>{try{const B=await be.getCrewCheckin(e.id);B?.workers&&i(B.workers)}catch(B){console.error("Error loading crew:",B),r?.("Error loading today's crew","error")}finally{c(!1)}},[e?.id,r]),Q=y.useCallback(async()=>{try{const B=await be.getRecentWorkers(e.id,30);w(B)}catch(B){console.error("Error loading recent workers:",B)}finally{S(!1)}},[e?.id]),ne=y.useCallback(async()=>{try{const B=await be.getLaborClassesForField(t);C(B.categories||[]),k(B.classes||[]),B.classes&&B.classes.length>0&&_(fe=>({...fe,role:B.classes[0].name,labor_class_id:B.classes[0].id}))}catch(B){console.error("Error loading labor classes:",B),r?.("Using default roles - custom labor classes unavailable","info")}finally{M(!1)}},[t,r]);y.useEffect(()=>{e?.id&&(K(),Q(),t?ne():M(!1))},[e?.id,t,K,Q,ne]);const G=B=>{const fe=A.find(je=>je.id===B);_(fe?{...p,role:fe.name,labor_class_id:fe.id}:{...p,role:B,labor_class_id:null})},I=async()=>{if(!p.name.trim()){r("Enter worker name","error");return}if(!p.role){r("Select a role","error");return}if(n.find(B=>B.name.toLowerCase()===p.name.trim().toLowerCase())){r("Worker already added","error");return}m(!0);try{const B=[...n,{name:p.name.trim(),role:p.role,labor_class_id:p.labor_class_id}];await be.saveCrewCheckin(e.id,B),i(B),_({...p,name:""}),g(!1),r("Crew member added","success")}catch(B){console.error("Error adding worker:",B),r("Error adding crew member","error")}finally{m(!1)}},ie=async B=>{m(!0);try{const fe=n.filter(je=>je.name.toLowerCase()!==B.toLowerCase());await be.saveCrewCheckin(e.id,fe),i(fe),r("Crew member removed","success")}catch(fe){console.error("Error removing worker:",fe),r("Error removing crew member","error")}finally{m(!1)}},pe=async B=>{if(n.find(fe=>fe.name.toLowerCase()===B.name.toLowerCase())){r("Already checked in","info");return}m(!0);try{const fe=[...n,{name:B.name,role:B.role,labor_class_id:B.labor_class_id}];await be.saveCrewCheckin(e.id,fe),i(fe),r(`${B.name} checked in`,"success")}catch(fe){console.error("Error adding worker:",fe),r("Error adding crew member","error")}finally{m(!1)}},q=x.filter(B=>!n.find(fe=>fe.name.toLowerCase()===B.name.toLowerCase())),R=new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),U=()=>{const B={};O.forEach(je=>{B[je.id]={name:je.name,classes:A.filter(te=>te.category_id===je.id)}});const fe=A.filter(je=>!je.category_id);return fe.length>0&&(B.uncategorized={name:"Other",classes:fe}),B},J=A.length>0;return s||D?f.jsxs("div",{className:"crew-checkin",children:[f.jsxs("div",{className:"crew-header",children:[f.jsxs("h3",{children:[f.jsx(Po,{size:18,className:"inline-icon"})," Today's Crew"]}),f.jsx("span",{className:"crew-date",children:R})]}),f.jsx("div",{className:"crew-loading",children:"Loading..."})]}):f.jsxs("div",{className:"crew-checkin",children:[f.jsxs("div",{className:"crew-header",children:[f.jsxs("h3",{children:[f.jsx(Po,{size:18,className:"inline-icon"})," Today's Crew"]}),f.jsx("span",{className:"crew-date",children:R})]}),n.length===0?f.jsxs("div",{className:"crew-empty",children:[f.jsx("p",{children:"No crew checked in yet"}),f.jsx("p",{className:"crew-empty-hint",children:"Add your crew for the day"})]}):f.jsx("div",{className:"crew-list",children:n.map(B=>f.jsxs("div",{className:"crew-member",children:[f.jsxs("div",{className:"crew-member-info",children:[f.jsx("span",{className:"crew-member-name",children:B.name}),f.jsx("span",{className:`crew-member-role ${(B.role||"laborer").toLowerCase().replace(/\s+/g,"-")}`,children:B.role})]}),f.jsx("button",{className:"crew-remove-btn",onClick:()=>ie(B.name),disabled:u,children:""})]},B.name))}),!j&&q.length>0&&f.jsxs("div",{className:"crew-quick-add",children:[f.jsx("div",{className:"crew-quick-add-header",children:f.jsx("span",{children:"Tap to add"})}),f.jsx("div",{className:"crew-quick-add-grid",children:q.map(B=>f.jsxs("button",{className:"crew-quick-add-btn",onClick:()=>pe(B),disabled:u,children:[f.jsx("span",{className:"crew-quick-add-name",children:B.name}),f.jsx("span",{className:"crew-quick-add-role",children:B.role})]},B.name))})]}),h?f.jsxs("div",{className:"crew-add-form",children:[f.jsx("input",{type:"text",value:p.name,onChange:B=>_({...p,name:B.target.value}),placeholder:"Name",autoFocus:!0}),f.jsx("select",{value:p.labor_class_id||p.role,onChange:B=>G(B.target.value),children:J?Object.entries(U()).map(([B,fe])=>f.jsx("optgroup",{label:fe.name,children:fe.classes.map(je=>f.jsx("option",{value:je.id,children:je.name},je.id))},B)):z.map(B=>f.jsx("option",{value:B,children:B},B))}),f.jsxs("div",{className:"crew-add-buttons",children:[f.jsx("button",{className:"crew-add-confirm",onClick:I,disabled:u,children:u?"...":"Add"}),f.jsx("button",{className:"crew-add-cancel",onClick:()=>{g(!1),_({name:"",role:A[0]?.name||"Laborer",labor_class_id:A[0]?.id||null})},children:"Cancel"})]})]}):f.jsxs("button",{className:"crew-add-btn",onClick:()=>g(!0),children:[f.jsx(tN,{size:18}),f.jsx("span",{children:"Add New Person"})]}),f.jsxs("div",{className:"crew-count",children:[n.length," ",n.length===1?"person":"people"," on site"]})]})}function h3({project:e,onShowToast:t,onClose:r}){const[n,i]=y.useState(!0),[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,g]=y.useState(""),[p,_]=y.useState("");y.useEffect(()=>{e?.id&&x()},[e?.id]);const x=async()=>{try{const O=await be.getDailyReport(e.id);if(O)m(O),g(O.field_notes||""),_(O.issues||"");else{const C=await be.compileDailyReport(e.id);m({...C,status:"draft"})}}catch(O){console.error("Error loading report:",O),t("Error loading report","error")}finally{i(!1)}},w=async()=>{if(!P){t("Demo Mode: Report saved locally only - won't reach office","info"),r();return}c(!0);try{await be.saveDailyReport(e.id,{field_notes:h,issues:p}),await be.submitDailyReport(e.id,"Field")?(t("Daily report submitted!","success"),r()):t("Report not sent - check connection","error")}catch(O){console.error("Error submitting report:",O),t("Error submitting report","error")}finally{c(!1)}},j=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});if(n)return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsx("h2",{children:"Daily Report"})]}),f.jsx("div",{className:"daily-report-loading",children:"Compiling report..."})]});if(!u)return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsx("h2",{children:"Daily Report"})]}),f.jsxs("div",{className:"daily-report-error",children:[f.jsx("p",{children:"Unable to load report data."}),f.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Retry"})]})]});const S=u.status==="submitted";return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsxs("div",{children:[f.jsx("h2",{children:"Daily Report"}),f.jsx("p",{className:"daily-report-date",children:j})]})]}),S&&f.jsxs("div",{className:"daily-report-submitted-banner",children:[" Submitted ",new Date(u.submitted_at).toLocaleTimeString()]}),f.jsxs("div",{className:"daily-report-content",children:[f.jsxs("div",{className:"daily-report-summary",children:[f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.crew_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"Crew on Site"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.tasks_completed||0}),f.jsx("div",{className:"daily-report-card-label",children:"Tasks Done"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.tm_tickets_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"T&M Tickets"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.photos_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"Photos"})]})]}),u.crew_list?.length>0&&f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(Po,{size:18,className:"inline-icon"})," Crew"]}),f.jsx("div",{className:"daily-report-crew",children:u.crew_list.map((O,C)=>f.jsxs("div",{className:"daily-report-crew-item",children:[f.jsx("span",{children:O.name}),f.jsx("span",{className:"daily-report-crew-role",children:O.role})]},C))})]}),u.completed_tasks?.length>0&&f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(gq,{size:18,className:"inline-icon"})," Completed Today"]}),f.jsx("ul",{className:"daily-report-tasks",children:u.completed_tasks.map((O,C)=>f.jsxs("li",{children:[O.name,O.group&&f.jsx("span",{className:"daily-report-task-group",children:O.group})]},C))})]}),f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(Fo,{size:18,className:"inline-icon"})," Notes"]}),f.jsx("textarea",{value:h,onChange:O=>g(O.target.value),placeholder:"Any notes about today's work...",rows:3,disabled:S})]}),f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(um,{size:18,className:"inline-icon"})," Issues / Concerns"]}),f.jsx("textarea",{value:p,onChange:O=>_(O.target.value),placeholder:"Any problems, delays, or concerns...",rows:3,disabled:S})]})]}),!S&&f.jsxs("div",{className:"daily-report-footer",children:[f.jsx("button",{className:"btn btn-primary daily-report-submit",onClick:w,disabled:s,children:s?"Submitting...":f.jsxs(f.Fragment,{children:[f.jsx(vq,{size:16,className:"inline-icon"})," Submit Report"]})}),f.jsx("p",{className:"daily-report-hint",children:"This will be sent to the office"})]})]})}function p3({project:e,companyId:t,user:r,onClose:n,onReportCreated:i}){const[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,g]=y.useState(1),[p,_]=y.useState(new Date().toISOString().split("T")[0]),[x,w]=y.useState(new Date().toTimeString().split(" ")[0].substring(0,5)),[j,S]=y.useState(""),[O,C]=y.useState(""),[A,k]=y.useState("minor"),[D,M]=y.useState(""),[z,K]=y.useState(""),[Q,ne]=y.useState(""),[G,I]=y.useState(""),[ie,pe]=y.useState(""),[q,R]=y.useState(""),[U,J]=y.useState(""),[B,fe]=y.useState(r?.name||""),[je,te]=y.useState(""),[H,Ee]=y.useState(""),[Te,Ie]=y.useState(r?.email||""),[ge,Le]=y.useState([]),[ee,we]=y.useState(""),[xe,oe]=y.useState(""),[He,ve]=y.useState(""),[Ne,Me]=y.useState(""),[jt,Re]=y.useState(!1),[It,yt]=y.useState(""),[Ct,Br]=y.useState(""),[xt,Ye]=y.useState(!1),[$r,xn]=y.useState(""),[Hr,jr]=y.useState(""),[Yt,he]=y.useState(""),[it,wn]=y.useState(""),[Qt,Ut]=y.useState(!1),[qt,ft]=y.useState(!1),[tn,Hn]=y.useState(0),[sa,di]=y.useState(0),fi=()=>{if(!ee.trim()){m({type:"error",message:"Please enter witness name"});return}const ye={name:ee,phone:xe,email:He,testimony:Ne};Le([...ge,ye]),we(""),oe(""),ve(""),Me(""),m({type:"success",message:"Witness added"})},xa=ye=>{Le(ge.filter((Fn,ja)=>ja!==ye))},jn=ye=>{switch(ye){case 1:if(!j.trim()||!O.trim())return m({type:"error",message:"Please fill in all incident details"}),!1;break;case 2:if(!z.trim()||!q.trim())return m({type:"error",message:"Please fill in employee name and job title"}),!1;break;case 3:if(!B.trim()||!je.trim())return m({type:"error",message:"Please fill in supervisor name and title"}),!1;break}return!0},mi=()=>{jn(h)&&g(h+1)},wa=()=>{g(h-1)},cl=async()=>{if(jn(h)){if(!P){m({type:"info",message:"Demo Mode: Report saved locally only - won't reach office"}),setTimeout(()=>{n()},1500);return}c(!0);try{const ye={project_id:e.id,company_id:t,incident_date:p,incident_time:x,incident_location:j,incident_description:O,injury_type:A,body_part_affected:D||null,employee_name:z,employee_phone:Q||null,employee_email:G||null,employee_address:ie||null,employee_job_title:q,employee_hire_date:U||null,medical_treatment_required:jt,medical_facility_name:It||null,medical_facility_address:Ct||null,hospitalized:xt,reported_by_name:B,reported_by_title:je,reported_by_phone:H||null,reported_by_email:Te||null,witnesses:ge,immediate_actions_taken:$r||null,corrective_actions_planned:Hr||null,safety_equipment_used:Yt||null,safety_equipment_failed:it||null,osha_recordable:Qt,workers_comp_claim:qt,days_away_from_work:parseInt(tn)||0,restricted_work_days:parseInt(sa)||0,status:"reported",created_by:r?.id},Fn=await be.createInjuryReport(ye);m({type:"success",message:"Injury report submitted successfully"}),i&&i(Fn),setTimeout(()=>{n()},1500)}catch(ye){console.error("Error submitting injury report:",ye),m({type:"error",message:"Failed to submit injury report"})}finally{c(!1)}}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"modal-overlay",onClick:n,children:f.jsxs("div",{className:"modal-content injury-report-modal",onClick:ye=>ye.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Workplace Injury/Incident Report"}),f.jsx("button",{className:"close-btn",onClick:n,children:""})]}),f.jsxs("div",{className:"progress-steps",children:[f.jsx("div",{className:`step ${h>=1?"active":""}`,children:"1. Incident"}),f.jsx("div",{className:`step ${h>=2?"active":""}`,children:"2. Employee"}),f.jsx("div",{className:`step ${h>=3?"active":""}`,children:"3. Supervisor"}),f.jsx("div",{className:`step ${h>=4?"active":""}`,children:"4. Witnesses"}),f.jsx("div",{className:`step ${h>=5?"active":""}`,children:"5. Medical & Safety"})]}),f.jsxs("div",{className:"modal-body",children:[h===1&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Incident Details"}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Date of Incident *"}),f.jsx("input",{type:"date",value:p,onChange:ye=>_(ye.target.value),max:new Date().toISOString().split("T")[0]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Time of Incident *"}),f.jsx("input",{type:"time",value:x,onChange:ye=>w(ye.target.value)})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Location on Site *"}),f.jsx("input",{type:"text",value:j,onChange:ye=>S(ye.target.value),placeholder:"e.g., Floor 2, near elevator shaft"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Incident Description *"}),f.jsx("textarea",{value:O,onChange:ye=>C(ye.target.value),rows:4,placeholder:"Describe what happened in detail..."})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Injury Type *"}),f.jsxs("select",{value:A,onChange:ye=>k(ye.target.value),children:[f.jsx("option",{value:"minor",children:"Minor Injury"}),f.jsx("option",{value:"serious",children:"Serious Injury"}),f.jsx("option",{value:"critical",children:"Critical Injury"}),f.jsx("option",{value:"near_miss",children:"Near Miss (No Injury)"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Body Part Affected"}),f.jsx("input",{type:"text",value:D,onChange:ye=>M(ye.target.value),placeholder:"e.g., Left hand, lower back"})]})]})]}),h===2&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Injured Employee Information"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Full Name *"}),f.jsx("input",{type:"text",value:z,onChange:ye=>K(ye.target.value),placeholder:"First and last name"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Phone Number"}),f.jsx("input",{type:"tel",value:Q,onChange:ye=>ne(ye.target.value),placeholder:"(555) 123-4567"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email Address"}),f.jsx("input",{type:"email",value:G,onChange:ye=>I(ye.target.value),placeholder:"email@example.com"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Home Address"}),f.jsx("input",{type:"text",value:ie,onChange:ye=>pe(ye.target.value),placeholder:"Street address, city, state, zip"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Job Title *"}),f.jsx("input",{type:"text",value:q,onChange:ye=>R(ye.target.value),placeholder:"e.g., Carpenter, Electrician"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Hire Date"}),f.jsx("input",{type:"date",value:U,onChange:ye=>J(ye.target.value)})]})]})]}),h===3&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Foreman/Supervisor Making Report"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Name *"}),f.jsx("input",{type:"text",value:B,onChange:ye=>fe(ye.target.value),placeholder:"Full name"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Title *"}),f.jsx("input",{type:"text",value:je,onChange:ye=>te(ye.target.value),placeholder:"e.g., Site Foreman, Project Manager"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Phone Number"}),f.jsx("input",{type:"tel",value:H,onChange:ye=>Ee(ye.target.value),placeholder:"(555) 123-4567"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Email Address"}),f.jsx("input",{type:"email",value:Te,onChange:ye=>Ie(ye.target.value),placeholder:"email@example.com"})]})]}),h===4&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Witness Testimonies (Optional)"}),ge.length>0&&f.jsx("div",{className:"witnesses-list",children:ge.map((ye,Fn)=>f.jsxs("div",{className:"witness-item",children:[f.jsxs("div",{className:"witness-info",children:[f.jsx("strong",{children:ye.name}),ye.phone&&f.jsxs("span",{children:["  ",ye.phone]}),ye.testimony&&f.jsxs("p",{className:"witness-testimony",children:['"',ye.testimony,'"']})]}),f.jsx("button",{className:"btn-danger btn-small",onClick:()=>xa(Fn),children:"Remove"})]},Fn))}),f.jsxs("div",{className:"add-witness-form",children:[f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Witness Name"}),f.jsx("input",{type:"text",value:ee,onChange:ye=>we(ye.target.value),placeholder:"Full name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Phone Number"}),f.jsx("input",{type:"tel",value:xe,onChange:ye=>oe(ye.target.value),placeholder:"(555) 123-4567"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email Address"}),f.jsx("input",{type:"email",value:He,onChange:ye=>ve(ye.target.value),placeholder:"email@example.com"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Witness Testimony"}),f.jsx("textarea",{value:Ne,onChange:ye=>Me(ye.target.value),rows:3,placeholder:"What did the witness see or hear?"})]}),f.jsx("button",{className:"btn-secondary",onClick:fi,children:"+ Add Witness"})]})]}),h===5&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Medical Treatment & Safety"}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:jt,onChange:ye=>Re(ye.target.checked)}),"Medical treatment required"]})}),jt&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Medical Facility Name"}),f.jsx("input",{type:"text",value:It,onChange:ye=>yt(ye.target.value),placeholder:"Hospital or clinic name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Medical Facility Address"}),f.jsx("input",{type:"text",value:Ct,onChange:ye=>Br(ye.target.value),placeholder:"Street address"})]}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:xt,onChange:ye=>Ye(ye.target.checked)}),"Employee was hospitalized"]})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Immediate Actions Taken"}),f.jsx("textarea",{value:$r,onChange:ye=>xn(ye.target.value),rows:2,placeholder:"What was done immediately after the incident?"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Corrective Actions Planned"}),f.jsx("textarea",{value:Hr,onChange:ye=>jr(ye.target.value),rows:2,placeholder:"What will be done to prevent this in the future?"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Safety Equipment Used"}),f.jsx("input",{type:"text",value:Yt,onChange:ye=>he(ye.target.value),placeholder:"e.g., Hard hat, gloves, harness"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Safety Equipment Failed"}),f.jsx("input",{type:"text",value:it,onChange:ye=>wn(ye.target.value),placeholder:"Equipment that failed, if any"})]})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Days Away From Work"}),f.jsx("input",{type:"number",min:"0",value:tn,onChange:ye=>Hn(ye.target.value)})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Restricted Work Days"}),f.jsx("input",{type:"number",min:"0",value:sa,onChange:ye=>di(ye.target.value)})]})]}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:Qt,onChange:ye=>Ut(ye.target.checked)}),"OSHA Recordable Incident"]})}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:qt,onChange:ye=>ft(ye.target.checked)}),"Workers' Compensation Claim Filed"]})})]})]}),f.jsx("div",{className:"modal-footer",children:f.jsxs("div",{className:"form-actions",children:[h>1&&f.jsx("button",{className:"btn-secondary",onClick:wa,children:" Back"}),f.jsx("button",{className:"btn-secondary",onClick:n,children:"Cancel"}),h<5?f.jsx("button",{className:"btn-primary",onClick:mi,children:"Next "}):f.jsx("button",{className:"btn-primary",onClick:cl,disabled:s,children:s?"Submitting...":"Submit Report"})]})})]})}),u&&f.jsx(BN,{message:u.message,type:u.type,onClose:()=>m(null)}),f.jsx("style",{children:`
        .injury-report-modal {
          max-width: 800px;
          max-height: 90vh;
          overflow-y: auto;
        }

        .progress-steps {
          display: flex;
          justify-content: space-between;
          padding: 1rem 1.5rem;
          border-bottom: 1px solid var(--border-color);
          background-color: var(--bg-elevated);
          overflow-x: auto;
        }

        .progress-steps .step {
          font-size: 0.875rem;
          color: var(--text-muted);
          font-weight: 500;
          white-space: nowrap;
          padding: 0.5rem;
        }

        .progress-steps .step.active {
          color: var(--accent-primary);
          font-weight: 600;
        }

        .form-step h3 {
          margin-top: 0;
          margin-bottom: 1.5rem;
          color: var(--text-primary);
          font-size: 1.25rem;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1rem;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: block;
          margin-bottom: 0.5rem;
          font-weight: 500;
          color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          width: 100%;
          padding: 0.5rem;
          border: 1px solid var(--border-color);
          border-radius: 4px;
          font-size: 1rem;
          background: var(--bg-card);
          color: var(--text-primary);
        }

        .form-group textarea {
          resize: vertical;
        }

        .checkbox-group label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-weight: normal;
          cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
          width: auto;
          margin: 0;
        }

        .witnesses-list {
          margin-bottom: 1.5rem;
        }

        .witness-item {
          border: 1px solid var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          margin-bottom: 0.5rem;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .witness-info {
          flex: 1;
          color: var(--text-primary);
        }

        .witness-testimony {
          margin-top: 0.5rem;
          color: var(--text-secondary);
          font-style: italic;
          font-size: 0.875rem;
        }

        .add-witness-form {
          border: 2px dashed var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          background-color: var(--bg-elevated);
        }

        .modal-footer {
          border-top: 1px solid var(--border-color);
          padding: 1rem 1.5rem;
        }

        .form-actions {
          display: flex;
          justify-content: space-between;
          gap: 0.5rem;
        }

        .btn-primary,
        .btn-secondary,
        .btn-danger {
          padding: 0.5rem 1rem;
          border-radius: 6px;
          font-weight: 500;
          cursor: pointer;
          border: none;
        }

        .btn-primary {
          background-color: var(--primary-color, #3b82f6);
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          opacity: 0.9;
        }

        .btn-primary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .btn-secondary {
          background-color: var(--bg-elevated);
          color: var(--text-primary);
          border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
          background-color: var(--bg-tertiary);
        }

        .btn-danger {
          background-color: #ef4444;
          color: white;
        }

        .btn-danger:hover {
          background-color: #dc2626;
        }

        .btn-small {
          padding: 0.25rem 0.75rem;
          font-size: 0.875rem;
        }

        @media (max-width: 768px) {
          .injury-report-modal {
            max-width: 100%;
            height: 100vh;
            max-height: 100vh;
            border-radius: 0;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .progress-steps .step {
            font-size: 0.75rem;
            padding: 0.25rem;
          }
        }
      `})]})}const sf=[{value:"concrete",label:"Concrete",icon:""},{value:"trash",label:"Trash",icon:""},{value:"metals",label:"Metals",icon:""},{value:"hazardous_waste",label:"Hazardous",icon:""}],g3=e=>sf.find(t=>t.value===e)||{label:e,icon:""};function v3({project:e,user:t=null,date:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState([]),[m,h]=y.useState(!0),[g,p]=y.useState(!1),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState({type:"concrete",count:1}),C=new Date(r).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});y.useEffect(()=>{A(),k()},[e.id,r]);const A=async()=>{try{h(!0);const I=await be.getDisposalLoads(e.id,r);s(I||[])}catch(I){console.error("Error loading disposal loads:",I)}finally{h(!1)}},k=async()=>{try{const ie=(await be.getDisposalLoadsHistory(e.id,14)||[]).filter(q=>q.load_date!==r).reduce((q,R)=>(q[R.load_date]||(q[R.load_date]=[]),q[R.load_date].push(R),q),{}),pe=Object.entries(ie).map(([q,R])=>({date:q,loads:R,totalLoads:R.reduce((U,J)=>U+J.load_count,0)})).sort((q,R)=>new Date(R.date)-new Date(q.date));u(pe)}catch(I){console.error("Error loading disposal history:",I)}},D=async()=>{if(!(S.count<1)){p(!0);try{await be.addDisposalLoad(e.id,t?.id||null,r,S.type,S.count),await A(),O({type:"concrete",count:1}),x(!1),n?.("Disposal load added","success")}catch(I){console.error("Error adding disposal load:",I),n?.("Error adding load","error")}finally{p(!1)}}},M=async I=>{p(!0);try{await be.deleteDisposalLoad(I),await A(),n?.("Load removed","success")}catch(ie){console.error("Error deleting disposal load:",ie),n?.("Error removing load","error")}finally{p(!1)}},z=async I=>{p(!0);try{await be.addDisposalLoad(e.id,t?.id||null,r,I,1),await A(),n?.("Load added","success")}catch(ie){console.error("Error adding disposal load:",ie),n?.("Error adding load","error")}finally{p(!1)}},K=async I=>{p(!0);try{await be.updateDisposalLoad(I.id,I.load_type,I.load_count+1),await A()}catch(ie){console.error("Error updating load:",ie),n?.("Error updating load","error")}finally{p(!1)}},Q=async I=>{if(I.load_count<=1){await M(I.id);return}p(!0);try{await be.updateDisposalLoad(I.id,I.load_type,I.load_count-1),await A()}catch(ie){console.error("Error updating load:",ie),n?.("Error updating load","error")}finally{p(!1)}},ne=i.reduce((I,ie)=>(I[ie.load_type]||(I[ie.load_type]={items:[],total:0}),I[ie.load_type].items.push(ie),I[ie.load_type].total+=ie.load_count,I),{}),G=i.reduce((I,ie)=>I+ie.load_count,0);return m?f.jsxs("div",{className:"disposal-load-input",children:[f.jsxs("div",{className:"disposal-header",children:[f.jsx(mf,{size:20}),f.jsx("span",{children:"Disposal Loads"})]}),f.jsx("div",{className:"disposal-loading",children:"Loading..."})]}):f.jsxs("div",{className:"disposal-load-input",children:[f.jsxs("div",{className:"disposal-header",children:[f.jsxs("div",{className:"disposal-title",children:[f.jsx(mf,{size:20}),f.jsx("span",{children:"Disposal Loads"}),G>0&&f.jsx("span",{className:"disposal-badge",children:G})]}),f.jsx("span",{className:"disposal-date",children:C})]}),f.jsx("div",{className:"disposal-quick-add",children:sf.map(I=>f.jsxs("button",{className:"quick-add-btn",onClick:()=>z(I.value),disabled:g,children:[f.jsx("span",{className:"quick-add-icon",children:I.icon}),f.jsxs("span",{className:"quick-add-label",children:["+ ",I.label]})]},I.value))}),Object.keys(ne).length>0?f.jsx("div",{className:"disposal-loads-list",children:sf.map(I=>{const ie=ne[I.value];return ie?f.jsxs("div",{className:"disposal-load-row",children:[f.jsxs("div",{className:"load-info",children:[f.jsx("span",{className:"load-icon",children:I.icon}),f.jsx("span",{className:"load-label",children:I.label})]}),f.jsxs("div",{className:"load-controls",children:[f.jsx("button",{className:"load-btn decrement",onClick:()=>Q(ie.items[0]),disabled:g,children:f.jsx(CS,{size:16})}),f.jsx("span",{className:"load-count",children:ie.total}),f.jsx("button",{className:"load-btn increment",onClick:()=>K(ie.items[0]),disabled:g,children:f.jsx(Jd,{size:16})})]})]},I.value):null})}):f.jsxs("div",{className:"disposal-empty",children:[f.jsxs("p",{children:["No disposal loads recorded for ",C]}),f.jsx("p",{className:"disposal-hint",children:"Tap a button above to add loads"})]}),_&&f.jsxs("div",{className:"disposal-add-form",children:[f.jsxs("div",{className:"add-form-row",children:[f.jsx("select",{value:S.type,onChange:I=>O({...S,type:I.target.value}),className:"load-type-select",children:sf.map(I=>f.jsxs("option",{value:I.value,children:[I.icon," ",I.label]},I.value))}),f.jsxs("div",{className:"count-input-group",children:[f.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:Math.max(1,S.count-1)}),children:f.jsx(CS,{size:16})}),f.jsx("input",{type:"number",min:"1",value:S.count,onChange:I=>O({...S,count:parseInt(I.target.value)||1}),className:"count-input"}),f.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:S.count+1}),children:f.jsx(Jd,{size:16})})]})]}),f.jsxs("div",{className:"add-form-actions",children:[f.jsxs("button",{className:"btn btn-secondary btn-small",onClick:()=>x(!1),children:[f.jsx(Nb,{size:16})," Cancel"]}),f.jsxs("button",{className:"btn btn-primary btn-small",onClick:D,disabled:g,children:[f.jsx(Ki,{size:16})," Add"]})]})]}),!_&&f.jsxs("button",{className:"disposal-add-custom",onClick:()=>x(!0),children:[f.jsx(Jd,{size:16}),"Add multiple loads"]}),G>0&&f.jsxs("div",{className:"disposal-summary",children:[f.jsx("strong",{children:G})," total load",G!==1?"s":""," today"]}),c.length>0&&f.jsxs("div",{className:"disposal-history-section",children:[f.jsxs("button",{className:"disposal-history-toggle",onClick:()=>j(!w),children:[f.jsx(yq,{size:16}),f.jsxs("span",{children:["View History (",c.length," days)"]}),w?f.jsx(oN,{size:16}):f.jsx(hf,{size:16})]}),w&&f.jsx("div",{className:"disposal-history-list",children:c.map(I=>{const ie=new Date(I.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),pe=I.loads.reduce((q,R)=>(q[R.load_type]||(q[R.load_type]=0),q[R.load_type]+=R.load_count,q),{});return f.jsxs("div",{className:"disposal-history-day",children:[f.jsxs("div",{className:"disposal-history-header",children:[f.jsx("span",{className:"disposal-history-date",children:ie}),f.jsxs("span",{className:"disposal-history-total",children:[I.totalLoads," load",I.totalLoads!==1?"s":""]})]}),f.jsx("div",{className:"disposal-history-types",children:Object.entries(pe).map(([q,R])=>{const U=g3(q);return f.jsxs("span",{className:"disposal-history-type",children:[U.icon," ",R," ",U.label]},q)})})]},I.date)})})]})]})}const r1={folder:gc,plans:wq,specs:Fo,permits:iN,contracts:xq,submittals:_q,rfis:bq,photos:gy,reports:sN,safety:um},Md={blue:"#3b82f6",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",purple:"#8b5cf6",pink:"#ec4899",gray:"#6b7280",orange:"#f97316"},y3=e=>e?.startsWith("image/")?jq:e?.includes("spreadsheet")||e?.includes("excel")?Sq:e?.includes("pdf")?Fo:Eq,b3=e=>{if(!e)return"0 B";const t=["B","KB","MB","GB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(r<10?1:0)} ${t[n]}`};function _3({projectId:e,onShowToast:t}){const[r,n]=y.useState([]),[i,s]=y.useState(!0),[c,u]=y.useState(null),[m,h]=y.useState([]),[g,p]=y.useState(!1),_=y.useRef(null),x=y.useCallback(async()=>{s(!0);try{const C=await be.getProjectFolders(e);n(C)}catch(C){console.error("Error loading folders:",C),t?.("Failed to load folders","error")}finally{s(!1)}},[e,t]),w=y.useCallback(async C=>{if(C){p(!0);try{const A=await be.getFolderDocuments(C);h(A.documents)}catch(A){console.error("Error loading documents:",A),t?.("Failed to load documents","error")}finally{p(!1)}}},[t]);y.useEffect(()=>{x();const C=be.subscribeToDocumentFolders?.(e,()=>{x()}),A=be.subscribeToDocuments?.(e,()=>{x(),_.current&&w(_.current.id)});return()=>{C?.unsubscribe?.(),A?.unsubscribe?.()}},[e,x,w]);const j=async C=>{u(C),_.current=C,await w(C.id)},S=async C=>{try{await be.logDocumentAccess(C.id,"downloaded");const A=C.url||`/storage/v1/object/public/project-documents/${C.storage_path}`;window.open(A,"_blank")}catch(A){console.error("Download error:",A)}},O=()=>{u(null),_.current=null,h([])};if(i)return f.jsx("div",{className:"field-docs",children:f.jsxs("div",{className:"field-docs-loading",children:[f.jsx($s,{size:24,className:"spinner"}),f.jsx("span",{children:"Loading..."})]})});if(c){const C=r1[c.icon]||gc,A=Md[c.color]||Md.blue;return f.jsxs("div",{className:"field-docs",children:[f.jsxs("div",{className:"field-docs-header",children:[f.jsx("button",{className:"field-docs-back",onClick:O,children:f.jsx(cr,{size:20})}),f.jsxs("div",{className:"field-docs-title",children:[f.jsx("div",{className:"field-docs-title-icon",style:{backgroundColor:`${A}15`},children:f.jsx(C,{size:20,style:{color:A}})}),f.jsxs("div",{className:"field-docs-title-text",children:[f.jsx("h2",{children:c.name}),f.jsxs("span",{children:[m.length," files"]})]})]})]}),f.jsx("div",{className:"field-docs-list",children:g?f.jsxs("div",{className:"field-docs-loading",children:[f.jsx($s,{size:24,className:"spinner"}),f.jsx("span",{children:"Loading..."})]}):m.length===0?f.jsxs("div",{className:"field-docs-empty",children:[f.jsx(gc,{size:48,style:{color:A,opacity:.3}}),f.jsx("p",{children:"No documents yet"})]}):m.map(k=>{const D=y3(k.mime_type);return f.jsxs("button",{className:"field-doc-item",onClick:()=>S(k),children:[f.jsx("div",{className:"field-doc-icon",children:f.jsx(D,{size:22})}),f.jsxs("div",{className:"field-doc-info",children:[f.jsx("span",{className:"field-doc-name",children:k.name}),f.jsx("span",{className:"field-doc-size",children:b3(k.file_size_bytes)})]}),f.jsx(aN,{size:20,className:"field-doc-download"})]},k.id)})})]})}return f.jsx("div",{className:"field-docs",children:f.jsx("div",{className:"field-docs-grid",children:r.length===0?f.jsxs("div",{className:"field-docs-empty",children:[f.jsx(gc,{size:56}),f.jsx("h3",{children:"No documents"}),f.jsx("p",{children:"Documents will appear here when added"})]}):r.map(C=>{const A=r1[C.icon]||gc,k=Md[C.color]||Md.blue,D=C.document_count||0;return f.jsxs("button",{className:"field-folder-card",onClick:()=>j(C),children:[f.jsx("div",{className:"field-folder-icon",style:{backgroundColor:`${k}12`},children:f.jsx(A,{size:28,style:{color:k}})}),f.jsxs("div",{className:"field-folder-info",children:[f.jsx("span",{className:"field-folder-name",children:C.name}),f.jsxs("span",{className:"field-folder-count",children:[D," ",D===1?"file":"files"]})]}),f.jsx(_c,{size:20,className:"field-folder-arrow"})]},C.id)})})})}function HN(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=HN(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function st(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=HN(e))&&(n&&(n+=" "),n+=t);return n}var x3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function $b(e){if(typeof e!="string")return!1;var t=x3;return t.includes(e)}var w3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],j3=new Set(w3);function FN(e){return typeof e!="string"?!1:j3.has(e)}function KN(e){return typeof e=="string"&&e.startsWith("data-")}function yn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(FN(r)||KN(r))&&(t[r]=e[r]);return t}function Ro(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return yn(t)}return typeof e=="object"&&!Array.isArray(e)?yn(e):null}function Ir(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(FN(r)||KN(r)||$b(r))&&(t[r]=e[r]);return t}function S3(e){return e==null?null:y.isValidElement(e)?Ir(e.props):typeof e=="object"&&!Array.isArray(e)?Ir(e):null}var E3=["children","width","height","viewBox","className","style","title","desc"];function Oy(){return Oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Oy.apply(null,arguments)}function O3(e,t){if(e==null)return{};var r,n,i=C3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function C3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var YN=y.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:s,className:c,style:u,title:m,desc:h}=e,g=O3(e,E3),p=s||{width:n,height:i,x:0,y:0},_=st("recharts-surface",c);return y.createElement("svg",Oy({},Ir(g),{className:_,width:n,height:i,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),y.createElement("title",null,m),y.createElement("desc",null,h),r)}),A3=["children","className"];function Cy(){return Cy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cy.apply(null,arguments)}function N3(e,t){if(e==null)return{};var r,n,i=k3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function k3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var _r=y.forwardRef((e,t)=>{var{children:r,className:n}=e,i=N3(e,A3),s=st("recharts-layer",n);return y.createElement("g",Cy({className:s},Ir(i),{ref:t}),r)}),GN=y.createContext(null),nQ=()=>y.useContext(GN);function wt(e){return function(){return e}}const VN=Math.cos,vf=Math.sin,oa=Math.sqrt,yf=Math.PI,gm=2*yf,Ay=Math.PI,Ny=2*Ay,wo=1e-6,D3=Ny-wo;function WN(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function T3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return WN;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class P3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?WN:T3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,c){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,u=this._y1,m=n-t,h=i-r,g=c-t,p=u-r,_=g*g+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(_>wo)if(!(Math.abs(p*m-h*g)>wo)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-c,w=i-u,j=m*m+h*h,S=x*x+w*w,O=Math.sqrt(j),C=Math.sqrt(_),A=s*Math.tan((Ay-Math.acos((j+_-S)/(2*O*C)))/2),k=A/C,D=A/O;Math.abs(k-1)>wo&&this._append`L${t+k*g},${r+k*p}`,this._append`A${s},${s},0,0,${+(p*x>g*w)},${this._x1=t+D*m},${this._y1=r+D*h}`}}arc(t,r,n,i,s,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(i),m=n*Math.sin(i),h=t+u,g=r+m,p=1^c,_=c?i-s:s-i;this._x1===null?this._append`M${h},${g}`:(Math.abs(this._x1-h)>wo||Math.abs(this._y1-g)>wo)&&this._append`L${h},${g}`,n&&(_<0&&(_=_%Ny+Ny),_>D3?this._append`A${n},${n},0,1,${p},${t-u},${r-m}A${n},${n},0,1,${p},${this._x1=h},${this._y1=g}`:_>wo&&this._append`A${n},${n},0,${+(_>=Ay)},${p},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Hb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new P3(t)}function Fb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function XN(e){this._context=e}XN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function vm(e){return new XN(e)}function ZN(e){return e[0]}function QN(e){return e[1]}function JN(e,t){var r=wt(!0),n=null,i=vm,s=null,c=Hb(u);e=typeof e=="function"?e:e===void 0?ZN:wt(e),t=typeof t=="function"?t:t===void 0?QN:wt(t);function u(m){var h,g=(m=Fb(m)).length,p,_=!1,x;for(n==null&&(s=i(x=c())),h=0;h<=g;++h)!(h<g&&r(p=m[h],h,m))===_&&((_=!_)?s.lineStart():s.lineEnd()),_&&s.point(+e(p,h,m),+t(p,h,m));if(x)return s=null,x+""||null}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:wt(+m),u):e},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:wt(+m),u):t},u.defined=function(m){return arguments.length?(r=typeof m=="function"?m:wt(!!m),u):r},u.curve=function(m){return arguments.length?(i=m,n!=null&&(s=i(n)),u):i},u.context=function(m){return arguments.length?(m==null?n=s=null:s=i(n=m),u):n},u}function Rd(e,t,r){var n=null,i=wt(!0),s=null,c=vm,u=null,m=Hb(h);e=typeof e=="function"?e:e===void 0?ZN:wt(+e),t=typeof t=="function"?t:wt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?QN:wt(+r);function h(p){var _,x,w,j=(p=Fb(p)).length,S,O=!1,C,A=new Array(j),k=new Array(j);for(s==null&&(u=c(C=m())),_=0;_<=j;++_){if(!(_<j&&i(S=p[_],_,p))===O)if(O=!O)x=_,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=_-1;w>=x;--w)u.point(A[w],k[w]);u.lineEnd(),u.areaEnd()}O&&(A[_]=+e(S,_,p),k[_]=+t(S,_,p),u.point(n?+n(S,_,p):A[_],r?+r(S,_,p):k[_]))}if(C)return u=null,C+""||null}function g(){return JN().defined(i).curve(c).context(s)}return h.x=function(p){return arguments.length?(e=typeof p=="function"?p:wt(+p),n=null,h):e},h.x0=function(p){return arguments.length?(e=typeof p=="function"?p:wt(+p),h):e},h.x1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:wt(+p),h):n},h.y=function(p){return arguments.length?(t=typeof p=="function"?p:wt(+p),r=null,h):t},h.y0=function(p){return arguments.length?(t=typeof p=="function"?p:wt(+p),h):t},h.y1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:wt(+p),h):r},h.lineX0=h.lineY0=function(){return g().x(e).y(t)},h.lineY1=function(){return g().x(e).y(r)},h.lineX1=function(){return g().x(n).y(t)},h.defined=function(p){return arguments.length?(i=typeof p=="function"?p:wt(!!p),h):i},h.curve=function(p){return arguments.length?(c=p,s!=null&&(u=c(s)),h):c},h.context=function(p){return arguments.length?(p==null?s=u=null:u=c(s=p),h):s},h}class ek{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function M3(e){return new ek(e,!0)}function R3(e){return new ek(e,!1)}const Kb={draw(e,t){const r=oa(t/yf);e.moveTo(r,0),e.arc(0,0,r,0,gm)}},q3={draw(e,t){const r=oa(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},tk=oa(1/3),L3=tk*2,z3={draw(e,t){const r=oa(t/L3),n=r*tk;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},I3={draw(e,t){const r=oa(t),n=-r/2;e.rect(n,n,r,r)}},U3=.8908130915292852,rk=vf(yf/10)/vf(7*yf/10),B3=vf(gm/10)*rk,$3=-VN(gm/10)*rk,H3={draw(e,t){const r=oa(t*U3),n=B3*r,i=$3*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const c=gm*s/5,u=VN(c),m=vf(c);e.lineTo(m*r,-u*r),e.lineTo(u*n-m*i,m*n+u*i)}e.closePath()}},kg=oa(3),F3={draw(e,t){const r=-oa(t/(kg*3));e.moveTo(0,r*2),e.lineTo(-kg*r,-r),e.lineTo(kg*r,-r),e.closePath()}},Mn=-.5,Rn=oa(3)/2,ky=1/oa(12),K3=(ky/2+1)*3,Y3={draw(e,t){const r=oa(t/K3),n=r/2,i=r*ky,s=n,c=r*ky+r,u=-s,m=c;e.moveTo(n,i),e.lineTo(s,c),e.lineTo(u,m),e.lineTo(Mn*n-Rn*i,Rn*n+Mn*i),e.lineTo(Mn*s-Rn*c,Rn*s+Mn*c),e.lineTo(Mn*u-Rn*m,Rn*u+Mn*m),e.lineTo(Mn*n+Rn*i,Mn*i-Rn*n),e.lineTo(Mn*s+Rn*c,Mn*c-Rn*s),e.lineTo(Mn*u+Rn*m,Mn*m-Rn*u),e.closePath()}};function G3(e,t){let r=null,n=Hb(i);e=typeof e=="function"?e:wt(e||Kb),t=typeof t=="function"?t:wt(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:wt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:wt(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function bf(){}function _f(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function nk(e){this._context=e}nk.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:_f(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:_f(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function V3(e){return new nk(e)}function ak(e){this._context=e}ak.prototype={areaStart:bf,areaEnd:bf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:_f(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function W3(e){return new ak(e)}function ik(e){this._context=e}ik.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:_f(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function X3(e){return new ik(e)}function ok(e){this._context=e}ok.prototype={areaStart:bf,areaEnd:bf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Z3(e){return new ok(e)}function n1(e){return e<0?-1:1}function a1(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),c=(r-e._y1)/(i||n<0&&-0),u=(s*i+c*n)/(n+i);return(n1(s)+n1(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(u))||0}function i1(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Dg(e,t,r){var n=e._x0,i=e._y0,s=e._x1,c=e._y1,u=(s-n)/3;e._context.bezierCurveTo(n+u,i+u*t,s-u,c-u*r,s,c)}function xf(e){this._context=e}xf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Dg(this,this._t0,i1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Dg(this,i1(this,r=a1(this,e,t)),r);break;default:Dg(this,this._t0,r=a1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function sk(e){this._context=new lk(e)}(sk.prototype=Object.create(xf.prototype)).point=function(e,t){xf.prototype.point.call(this,t,e)};function lk(e){this._context=e}lk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function Q3(e){return new xf(e)}function J3(e){return new sk(e)}function ck(e){this._context=e}ck.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=o1(e),i=o1(t),s=0,c=1;c<r;++s,++c)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function o1(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),c=new Array(r);for(i[0]=0,s[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,c[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,c[t]-=n*c[t-1];for(i[r-1]=c[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(c[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function e5(e){return new ck(e)}function ym(e,t){this._context=e,this._t=t}ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function t5(e){return new ym(e,.5)}function r5(e){return new ym(e,0)}function n5(e){return new ym(e,1)}function qo(e,t){if((c=e.length)>1)for(var r=1,n,i,s=e[t[0]],c,u=s.length;r<c;++r)for(i=s,s=e[t[r]],n=0;n<u;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Dy(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function a5(e,t){return e[t]}function i5(e){const t=[];return t.key=e,t}function o5(){var e=wt([]),t=Dy,r=qo,n=a5;function i(s){var c=Array.from(e.apply(this,arguments),i5),u,m=c.length,h=-1,g;for(const p of s)for(u=0,++h;u<m;++u)(c[u][h]=[0,+n(p,c[u].key,h,s)]).data=p;for(u=0,g=Fb(t(c));u<m;++u)c[g[u]].index=u;return r(c,g),c}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:wt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:wt(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?Dy:typeof s=="function"?s:wt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??qo,i):r},i}function s5(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,c;i<s;++i){for(c=r=0;r<n;++r)c+=e[r][i][1]||0;if(c)for(r=0;r<n;++r)e[r][i][1]/=c}qo(e,t)}}function l5(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var c=0,u=0;c<i;++c)u+=e[c][r][1]||0;n[r][1]+=n[r][0]=-u/2}qo(e,t)}}function c5(e,t){if(!(!((c=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,c;n<s;++n){for(var u=0,m=0,h=0;u<c;++u){for(var g=e[t[u]],p=g[n][1]||0,_=g[n-1][1]||0,x=(p-_)/2,w=0;w<u;++w){var j=e[t[w]],S=j[n][1]||0,O=j[n-1][1]||0;x+=S-O}m+=p,h+=x*p}i[n-1][1]+=i[n-1][0]=r,m&&(r-=h/m)}i[n-1][1]+=i[n-1][0]=r,qo(e,t)}}var Tg={},Pg={},s1;function u5(){return s1||(s1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Pg)),Pg}var Mg={},l1;function uk(){return l1||(l1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Mg)),Mg}var Rg={},c1;function Yb(){return c1||(c1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Rg)),Rg}var qg={},Lg={},u1;function d5(){return u1||(u1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Lg)),Lg}var d1;function Gb(){return d1||(d1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d5(),r=Yb();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],c=i.length;if(c===0)return s;let u=0,m="",h="",g=!1;for(i.charCodeAt(0)===46&&(s.push(""),u++);u<c;){const p=i[u];h?p==="\\"&&u+1<c?(u++,m+=i[u]):p===h?h="":m+=p:g?p==='"'||p==="'"?h=p:p==="]"?(g=!1,s.push(m),m=""):m+=p:p==="["?(g=!0,m&&(s.push(m),m="")):p==="."?m&&(s.push(m),m=""):m+=p,u++}return m&&s.push(m),s}e.toPath=n})(qg)),qg}var f1;function Vb(){return f1||(f1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u5(),r=uk(),n=Yb(),i=Gb();function s(u,m,h){if(u==null)return h;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return h;const g=u[m];return g===void 0?r.isDeepKey(m)?s(u,i.toPath(m),h):h:g}case"number":case"symbol":{typeof m=="number"&&(m=n.toKey(m));const g=u[m];return g===void 0?h:g}default:{if(Array.isArray(m))return c(u,m,h);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return h;const g=u[m];return g===void 0?h:g}}}function c(u,m,h){if(m.length===0)return h;let g=u;for(let p=0;p<m.length;p++){if(g==null||t.isUnsafeProperty(m[p]))return h;g=g[m[p]]}return g===void 0?h:g}e.get=s})(Tg)),Tg}var zg,m1;function f5(){return m1||(m1=1,zg=Vb().get),zg}var m5=f5();const Lo=ri(m5);var h5=4;function Hi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h5,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Ft(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,s,c)=>{var u=r[c-1];return typeof u=="string"?i+u+s:u!==void 0?i+Hi(u)+s:i+s},"")}var br=e=>e===0?0:e>0?1:-1,ra=e=>typeof e=="number"&&e!=+e,Wa=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ke=e=>(typeof e=="number"||e instanceof Number)&&!ra(e),ya=e=>ke(e)||typeof e=="string",p5=0,Sc=e=>{var t=++p5;return"".concat(e||"").concat(t)},Tr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(t)&&typeof t!="string")return n;var s;if(Wa(t)){if(r==null)return n;var c=t.indexOf("%");s=r*parseFloat(t.slice(0,c))/100}else s=+t;return ra(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},dk=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function kt(e,t,r){return ke(e)&&ke(t)?Hi(e+r*(t-e)):t}function fk(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Lo(n,t))===r)}var Pt=e=>e===null||typeof e>"u",Kc=e=>Pt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function g5(e){return e!=null}function Yc(){}var v5=["type","size","sizeType"];function Ty(){return Ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ty.apply(null,arguments)}function h1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function p1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h1(Object(r),!0).forEach(function(n){y5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y5(e,t,r){return(t=b5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b5(e){var t=_5(e,"string");return typeof t=="symbol"?t:t+""}function _5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function x5(e,t){if(e==null)return{};var r,n,i=w5(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function w5(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mk={symbolCircle:Kb,symbolCross:q3,symbolDiamond:z3,symbolSquare:I3,symbolStar:H3,symbolTriangle:F3,symbolWye:Y3},j5=Math.PI/180,S5=e=>{var t="symbol".concat(Kc(e));return mk[t]||Kb},E5=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*j5;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},O5=(e,t)=>{mk["symbol".concat(Kc(e))]=t},hk=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=x5(e,v5),s=p1(p1({},i),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var u=()=>{var _=S5(c),x=G3().type(_).size(E5(r,n,c)),w=x();if(w!==null)return w},{className:m,cx:h,cy:g}=s,p=Ir(s);return ke(h)&&ke(g)&&ke(r)?y.createElement("path",Ty({},p,{className:st("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(g,")"),d:u()})):null};hk.registerSymbol=O5;var pk=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Wb=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{$b(i)&&(n[i]=(s=>r[i](r,s)))}),n},C5=(e,t,r)=>n=>(e(t,r,n),null),bm=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var s=e[i];$b(i)&&typeof s=="function"&&(n||(n={}),n[i]=C5(s,t,r))}),n};function g1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function A5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g1(Object(r),!0).forEach(function(n){N5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N5(e,t,r){return(t=k5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k5(e){var t=D5(e,"string");return typeof t=="symbol"?t:t+""}function D5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xr(e,t){var r=A5({},e),n=t,i=Object.keys(t),s=i.reduce((c,u)=>(c[u]===void 0&&n[u]!==void 0&&(c[u]=n[u]),c),r);return s}var Ig={},Ug={},v1;function T5(){return v1||(v1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let s=0;s<r.length;s++){const c=r[s],u=n(c);i.has(u)||i.set(u,c)}return Array.from(i.values())}e.uniqBy=t})(Ug)),Ug}var Bg={},y1;function gk(){return y1||(y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Bg)),Bg}var $g={},Hg={},Fg={},b1;function P5(){return b1||(b1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Fg)),Fg}var _1;function Xb(){return _1||(_1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=P5();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Hg)),Hg}var Kg={},x1;function M5(){return x1||(x1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Kg)),Kg}var w1;function R5(){return w1||(w1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xb(),r=M5();function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})($g)),$g}var Yg={},Gg={},j1;function q5(){return j1||(j1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vb();function r(n){return function(i){return t.get(i,n)}}e.property=r})(Gg)),Gg}var Vg={},Wg={},Xg={},Zg={},S1;function vk(){return S1||(S1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Zg)),Zg}var Qg={},E1;function yk(){return E1||(E1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Qg)),Qg}var Jg={},O1;function bk(){return O1||(O1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Jg)),Jg}var C1;function L5(){return C1||(C1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vk(),r=yk(),n=bk();function i(g,p,_){return typeof _!="function"?i(g,p,()=>{}):s(g,p,function x(w,j,S,O,C,A){const k=_(w,j,S,O,C,A);return k!==void 0?!!k:s(w,j,x,A)},new Map)}function s(g,p,_,x){if(p===g)return!0;switch(typeof p){case"object":return c(g,p,_,x);case"function":return Object.keys(p).length>0?s(g,{...p},_,x):n.eq(g,p);default:return t.isObject(g)?typeof p=="string"?p==="":!0:n.eq(g,p)}}function c(g,p,_,x){if(p==null)return!0;if(Array.isArray(p))return m(g,p,_,x);if(p instanceof Map)return u(g,p,_,x);if(p instanceof Set)return h(g,p,_,x);const w=Object.keys(p);if(g==null||r.isPrimitive(g))return w.length===0;if(w.length===0)return!0;if(x?.has(p))return x.get(p)===g;x?.set(p,g);try{for(let j=0;j<w.length;j++){const S=w[j];if(!r.isPrimitive(g)&&!(S in g)||p[S]===void 0&&g[S]!==void 0||p[S]===null&&g[S]!==null||!_(g[S],p[S],S,g,p,x))return!1}return!0}finally{x?.delete(p)}}function u(g,p,_,x){if(p.size===0)return!0;if(!(g instanceof Map))return!1;for(const[w,j]of p.entries()){const S=g.get(w);if(_(S,j,w,g,p,x)===!1)return!1}return!0}function m(g,p,_,x){if(p.length===0)return!0;if(!Array.isArray(g))return!1;const w=new Set;for(let j=0;j<p.length;j++){const S=p[j];let O=!1;for(let C=0;C<g.length;C++){if(w.has(C))continue;const A=g[C];let k=!1;if(_(A,S,j,g,p,x)&&(k=!0),k){w.add(C),O=!0;break}}if(!O)return!1}return!0}function h(g,p,_,x){return p.size===0?!0:g instanceof Set?m([...g],[...p],_,x):!1}e.isMatchWith=i,e.isSetMatch=h})(Xg)),Xg}var A1;function _k(){return A1||(A1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(Wg)),Wg}var ev={},tv={},rv={},N1;function z5(){return N1||(N1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(rv)),rv}var nv={},k1;function xk(){return k1||(k1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(nv)),nv}var av={},D1;function wk(){return D1||(D1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",c="[object Symbol]",u="[object Date]",m="[object Map]",h="[object Set]",g="[object Array]",p="[object Function]",_="[object ArrayBuffer]",x="[object Object]",w="[object Error]",j="[object DataView]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",k="[object BigUint64Array]",D="[object Int8Array]",M="[object Int16Array]",z="[object Int32Array]",K="[object BigInt64Array]",Q="[object Float32Array]",ne="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=_,e.arrayTag=g,e.bigInt64ArrayTag=K,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=j,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=Q,e.float64ArrayTag=ne,e.functionTag=p,e.int16ArrayTag=M,e.int32ArrayTag=z,e.int8ArrayTag=D,e.mapTag=m,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=C,e.uint32ArrayTag=A,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=O})(av)),av}var iv={},T1;function I5(){return T1||(T1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(iv)),iv}var P1;function jk(){return P1||(P1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z5(),r=xk(),n=wk(),i=yk(),s=I5();function c(g,p){return u(g,void 0,g,new Map,p)}function u(g,p,_,x=new Map,w=void 0){const j=w?.(g,p,_,x);if(j!==void 0)return j;if(i.isPrimitive(g))return g;if(x.has(g))return x.get(g);if(Array.isArray(g)){const S=new Array(g.length);x.set(g,S);for(let O=0;O<g.length;O++)S[O]=u(g[O],O,_,x,w);return Object.hasOwn(g,"index")&&(S.index=g.index),Object.hasOwn(g,"input")&&(S.input=g.input),S}if(g instanceof Date)return new Date(g.getTime());if(g instanceof RegExp){const S=new RegExp(g.source,g.flags);return S.lastIndex=g.lastIndex,S}if(g instanceof Map){const S=new Map;x.set(g,S);for(const[O,C]of g)S.set(O,u(C,O,_,x,w));return S}if(g instanceof Set){const S=new Set;x.set(g,S);for(const O of g)S.add(u(O,void 0,_,x,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(g))return g.subarray();if(s.isTypedArray(g)){const S=new(Object.getPrototypeOf(g)).constructor(g.length);x.set(g,S);for(let O=0;O<g.length;O++)S[O]=u(g[O],O,_,x,w);return S}if(g instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&g instanceof SharedArrayBuffer)return g.slice(0);if(g instanceof DataView){const S=new DataView(g.buffer.slice(0),g.byteOffset,g.byteLength);return x.set(g,S),m(S,g,_,x,w),S}if(typeof File<"u"&&g instanceof File){const S=new File([g],g.name,{type:g.type});return x.set(g,S),m(S,g,_,x,w),S}if(typeof Blob<"u"&&g instanceof Blob){const S=new Blob([g],{type:g.type});return x.set(g,S),m(S,g,_,x,w),S}if(g instanceof Error){const S=new g.constructor;return x.set(g,S),S.message=g.message,S.name=g.name,S.stack=g.stack,S.cause=g.cause,m(S,g,_,x,w),S}if(g instanceof Boolean){const S=new Boolean(g.valueOf());return x.set(g,S),m(S,g,_,x,w),S}if(g instanceof Number){const S=new Number(g.valueOf());return x.set(g,S),m(S,g,_,x,w),S}if(g instanceof String){const S=new String(g.valueOf());return x.set(g,S),m(S,g,_,x,w),S}if(typeof g=="object"&&h(g)){const S=Object.create(Object.getPrototypeOf(g));return x.set(g,S),m(S,g,_,x,w),S}return g}function m(g,p,_=g,x,w){const j=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<j.length;S++){const O=j[S],C=Object.getOwnPropertyDescriptor(g,O);(C==null||C.writable)&&(g[O]=u(p[O],O,_,x,w))}}function h(g){switch(r.getTag(g)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=u,e.copyProperties=m})(tv)),tv}var M1;function U5(){return M1||(M1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jk();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(ev)),ev}var R1;function B5(){return R1||(R1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_k(),r=U5();function n(i){return i=r.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=n})(Vg)),Vg}var ov={},sv={},lv={},q1;function $5(){return q1||(q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jk(),r=wk();function n(i,s){return t.cloneDeepWith(i,(c,u,m,h)=>{const g=s?.(c,u,m,h);if(g!==void 0)return g;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const p=new i.constructor(i?.valueOf());return t.copyProperties(p,i),p}case r.argumentsTag:{const p={};return t.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}e.cloneDeepWith=n})(lv)),lv}var L1;function H5(){return L1||(L1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$5();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(sv)),sv}var cv={},uv={},z1;function Sk(){return z1||(z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(uv)),uv}var dv={},I1;function F5(){return I1||(I1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xk();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(dv)),dv}var U1;function K5(){return U1||(U1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uk(),r=Sk(),n=F5(),i=Gb();function s(c,u){let m;if(Array.isArray(u)?m=u:typeof u=="string"&&t.isDeepKey(u)&&c?.[u]==null?m=i.toPath(u):m=[u],m.length===0)return!1;let h=c;for(let g=0;g<m.length;g++){const p=m[g];if((h==null||!Object.hasOwn(h,p))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(p)&&p<h.length))return!1;h=h[p]}return!0}e.has=s})(cv)),cv}var B1;function Y5(){return B1||(B1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_k(),r=Yb(),n=H5(),i=Vb(),s=K5();function c(u,m){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return m=n.cloneDeep(m),function(h){const g=i.get(h,u);return g===void 0?s.has(h,u):m===void 0?g===void 0:t.isMatch(g,m)}}e.matchesProperty=c})(ov)),ov}var $1;function G5(){return $1||($1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gk(),r=q5(),n=B5(),i=Y5();function s(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=s})(Yg)),Yg}var H1;function V5(){return H1||(H1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T5(),r=gk(),n=R5(),i=G5();function s(c,u=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.iteratee(u)):[]}e.uniqBy=s})(Ig)),Ig}var fv,F1;function W5(){return F1||(F1=1,fv=V5().uniqBy),fv}var X5=W5();const K1=ri(X5);function Z5(e,t,r){return t===!0?K1(e,r):typeof t=="function"?K1(e,t):e}var mv={exports:{}},hv={},pv={exports:{}},gv={};var Y1;function Q5(){if(Y1)return gv;Y1=1;var e=dm();function t(p,_){return p===_&&(p!==0||1/p===1/_)||p!==p&&_!==_}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,s=e.useLayoutEffect,c=e.useDebugValue;function u(p,_){var x=_(),w=n({inst:{value:x,getSnapshot:_}}),j=w[0].inst,S=w[1];return s(function(){j.value=x,j.getSnapshot=_,m(j)&&S({inst:j})},[p,x,_]),i(function(){return m(j)&&S({inst:j}),p(function(){m(j)&&S({inst:j})})},[p]),c(x),x}function m(p){var _=p.getSnapshot;p=p.value;try{var x=_();return!r(p,x)}catch{return!0}}function h(p,_){return _()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return gv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:g,gv}var G1;function J5(){return G1||(G1=1,pv.exports=Q5()),pv.exports}var V1;function eI(){if(V1)return hv;V1=1;var e=dm(),t=J5();function r(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,s=e.useRef,c=e.useEffect,u=e.useMemo,m=e.useDebugValue;return hv.useSyncExternalStoreWithSelector=function(h,g,p,_,x){var w=s(null);if(w.current===null){var j={hasValue:!1,value:null};w.current=j}else j=w.current;w=u(function(){function O(M){if(!C){if(C=!0,A=M,M=_(M),x!==void 0&&j.hasValue){var z=j.value;if(x(z,M))return k=z}return k=M}if(z=k,n(A,M))return z;var K=_(M);return x!==void 0&&x(z,K)?(A=M,z):(A=M,k=K)}var C=!1,A,k,D=p===void 0?null:p;return[function(){return O(g())},D===null?void 0:function(){return O(D())}]},[g,p,_,x]);var S=i(h,w[0],w[1]);return c(function(){j.hasValue=!0,j.value=S},[S]),m(S),S},hv}var W1;function tI(){return W1||(W1=1,mv.exports=eI()),mv.exports}var rI=tI(),Zb=y.createContext(null),nI=e=>e,Mt=()=>{var e=y.useContext(Zb);return e?e.store.dispatch:nI},lf=()=>{},aI=()=>lf,iI=(e,t)=>e===t;function De(e){var t=y.useContext(Zb);return rI.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:aI,t?t.store.getState:lf,t?t.store.getState:lf,t?e:lf,iI)}function oI(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function sI(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function lI(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var X1=e=>Array.isArray(e)?e:[e];function cI(e){const t=Array.isArray(e[0])?e[0]:e;return lI(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function uI(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var dI=class{constructor(e){this.value=e}deref(){return this.value}},fI=typeof WeakRef<"u"?WeakRef:dI,mI=0,Z1=1;function qd(){return{s:mI,v:void 0,o:null,p:null}}function Ek(e,t={}){let r=qd();const{resultEqualityCheck:n}=t;let i,s=0;function c(){let u=r;const{length:m}=arguments;for(let p=0,_=m;p<_;p++){const x=arguments[p];if(typeof x=="function"||typeof x=="object"&&x!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const j=w.get(x);j===void 0?(u=qd(),w.set(x,u)):u=j}else{let w=u.p;w===null&&(u.p=w=new Map);const j=w.get(x);j===void 0?(u=qd(),w.set(x,u)):u=j}}const h=u;let g;if(u.s===Z1)g=u.v;else if(g=e.apply(null,arguments),s++,n){const p=i?.deref?.()??i;p!=null&&n(p,g)&&(g=p,s!==0&&s--),i=typeof g=="object"&&g!==null||typeof g=="function"?new fI(g):g}return h.s=Z1,h.v=g,g}return c.clearCache=()=>{r=qd(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function hI(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let s=0,c=0,u,m={},h=i.pop();typeof h=="object"&&(m=h,h=i.pop()),oI(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const g={...r,...m},{memoize:p,memoizeOptions:_=[],argsMemoize:x=Ek,argsMemoizeOptions:w=[]}=g,j=X1(_),S=X1(w),O=cI(i),C=p(function(){return s++,h.apply(null,arguments)},...j),A=x(function(){c++;const D=uI(O,arguments);return u=C.apply(null,D),u},...S);return Object.assign(A,{resultFunc:h,memoizedResultFunc:C,dependencies:O,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:p,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var X=hI(Ek),pI=Object.assign((e,t=X)=>{sI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((c,u,m)=>(c[r[m]]=u,c),{}))},{withTypes:()=>pI}),vv={},yv={},bv={},Q1;function gI(){return Q1||(Q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const c=t(n),u=t(i);if(c===u&&c===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?u-c:c-u}return 0};e.compareValues=r})(bv)),bv}var _v={},xv={},J1;function Ok(){return J1||(J1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(xv)),xv}var eE;function vI(){return eE||(eE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ok(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||c!=null&&Object.hasOwn(c,s)}e.isKey=i})(_v)),_v}var tE;function yI(){return tE||(tE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gI(),r=vI(),n=Gb();function i(s,c,u,m){if(s==null)return[];u=m?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,w)=>{let j=x;for(let S=0;S<w.length&&j!=null;++S)j=j[w[S]];return j},g=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:h(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?h(w,x):typeof w=="object"?w[x]:w,p=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return s.map(x=>({original:x,criteria:p.map(w=>g(w,x))})).slice().sort((x,w)=>{for(let j=0;j<p.length;j++){const S=t.compareValues(x.criteria[j],w.criteria[j],u[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(yv)),yv}var wv={},rE;function bI(){return rE||(rE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],s=Math.floor(n),c=(u,m)=>{for(let h=0;h<u.length;h++){const g=u[h];Array.isArray(g)&&m<s?c(g,m+1):i.push(g)}};return c(r,0),i}e.flatten=t})(wv)),wv}var jv={},nE;function Ck(){return nE||(nE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sk(),r=Xb(),n=vk(),i=bk();function s(c,u,m){return n.isObject(m)&&(typeof u=="number"&&r.isArrayLike(m)&&t.isIndex(u)&&u<m.length||typeof u=="string"&&u in m)?i.eq(m[u],c):!1}e.isIterateeCall=s})(jv)),jv}var aE;function _I(){return aE||(aE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yI(),r=bI(),n=Ck();function i(s,...c){const u=c.length;return u>1&&n.isIterateeCall(s,c[0],c[1])?c=[]:u>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(s,r.flatten(c),["asc"])}e.sortBy=i})(vv)),vv}var Sv,iE;function xI(){return iE||(iE=1,Sv=_I().sortBy),Sv}var wI=xI();const _m=ri(wI);var Ak=e=>e.legend.settings,jI=e=>e.legend.size,SI=e=>e.legend.payload,aQ=X([SI,Ak],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?_m(n,r):n}),Ld=1;function EI(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-t.height)>Ld||Math.abs(c.left-t.left)>Ld||Math.abs(c.top-t.top)>Ld||Math.abs(c.width-t.width)>Ld)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ar(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var OI=typeof Symbol=="function"&&Symbol.observable||"@@observable",oE=OI,Ev=()=>Math.random().toString(36).substring(7).split("").join("."),CI={INIT:`@@redux/INIT${Ev()}`,REPLACE:`@@redux/REPLACE${Ev()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Ev()}`},wf=CI;function Qb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Nk(e,t,r){if(typeof e!="function")throw new Error(Ar(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ar(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ar(1));return r(Nk)(e,t)}let n=e,i=t,s=new Map,c=s,u=0,m=!1;function h(){c===s&&(c=new Map,s.forEach((S,O)=>{c.set(O,S)}))}function g(){if(m)throw new Error(Ar(3));return i}function p(S){if(typeof S!="function")throw new Error(Ar(4));if(m)throw new Error(Ar(5));let O=!0;h();const C=u++;return c.set(C,S),function(){if(O){if(m)throw new Error(Ar(6));O=!1,h(),c.delete(C),s=null}}}function _(S){if(!Qb(S))throw new Error(Ar(7));if(typeof S.type>"u")throw new Error(Ar(8));if(typeof S.type!="string")throw new Error(Ar(17));if(m)throw new Error(Ar(9));try{m=!0,i=n(i,S)}finally{m=!1}return(s=c).forEach(C=>{C()}),S}function x(S){if(typeof S!="function")throw new Error(Ar(10));n=S,_({type:wf.REPLACE})}function w(){const S=p;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(Ar(11));function C(){const k=O;k.next&&k.next(g())}return C(),{unsubscribe:S(C)}},[oE](){return this}}}return _({type:wf.INIT}),{dispatch:_,subscribe:p,getState:g,replaceReducer:x,[oE]:w}}function AI(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:wf.INIT})>"u")throw new Error(Ar(12));if(typeof r(void 0,{type:wf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ar(13))})}function kk(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const c=t[s];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let i;try{AI(r)}catch(s){i=s}return function(c={},u){if(i)throw i;let m=!1;const h={};for(let g=0;g<n.length;g++){const p=n[g],_=r[p],x=c[p],w=_(x,u);if(typeof w>"u")throw u&&u.type,new Error(Ar(14));h[p]=w,m=m||w!==x}return m=m||n.length!==Object.keys(c).length,m?h:c}}function jf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function NI(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(Ar(15))};const c={getState:i.getState,dispatch:(m,...h)=>s(m,...h)},u=e.map(m=>m(c));return s=jf(...u)(i.dispatch),{...i,dispatch:s}}}function Dk(e){return Qb(e)&&"type"in e&&typeof e.type=="string"}var Tk=Symbol.for("immer-nothing"),sE=Symbol.for("immer-draftable"),Ur=Symbol.for("immer-state");function Zn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var gn=Object,Hs=gn.getPrototypeOf,Sf="constructor",xm="prototype",Py="configurable",Ef="enumerable",cf="writable",Ec="value",Xa=e=>!!e&&!!e[Ur];function na(e){return e?Pk(e)||jm(e)||!!e[sE]||!!e[Sf]?.[sE]||Sm(e)||Em(e):!1}var kI=gn[xm][Sf].toString(),lE=new WeakMap;function Pk(e){if(!e||!Jb(e))return!1;const t=Hs(e);if(t===null||t===gn[xm])return!0;const r=gn.hasOwnProperty.call(t,Sf)&&t[Sf];if(r===Object)return!0;if(!Ls(r))return!1;let n=lE.get(r);return n===void 0&&(n=Function.toString.call(r),lE.set(r,n)),n===kI}function wm(e,t,r=!0){Gc(e)===0?(r?Reflect.ownKeys(e):gn.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Gc(e){const t=e[Ur];return t?t.type_:jm(e)?1:Sm(e)?2:Em(e)?3:0}var cE=(e,t,r=Gc(e))=>r===2?e.has(t):gn[xm].hasOwnProperty.call(e,t),My=(e,t,r=Gc(e))=>r===2?e.get(t):e[t],Of=(e,t,r,n=Gc(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function DI(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var jm=Array.isArray,Sm=e=>e instanceof Map,Em=e=>e instanceof Set,Jb=e=>typeof e=="object",Ls=e=>typeof e=="function",Ov=e=>typeof e=="boolean";function TI(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var Ba=e=>e.copy_||e.base_,e0=e=>e.modified_?e.copy_:e.base_;function Ry(e,t){if(Sm(e))return new Map(e);if(Em(e))return new Set(e);if(jm(e))return Array[xm].slice.call(e);const r=Pk(e);if(t===!0||t==="class_only"&&!r){const n=gn.getOwnPropertyDescriptors(e);delete n[Ur];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u[cf]===!1&&(u[cf]=!0,u[Py]=!0),(u.get||u.set)&&(n[c]={[Py]:!0,[cf]:!0,[Ef]:u[Ef],[Ec]:e[c]})}return gn.create(Hs(e),n)}else{const n=Hs(e);if(n!==null&&r)return{...e};const i=gn.create(n);return gn.assign(i,e)}}function t0(e,t=!1){return Om(e)||Xa(e)||!na(e)||(Gc(e)>1&&gn.defineProperties(e,{set:zd,add:zd,clear:zd,delete:zd}),gn.freeze(e),t&&wm(e,(r,n)=>{t0(n,!0)},!1)),e}function PI(){Zn(2)}var zd={[Ec]:PI};function Om(e){return e===null||!Jb(e)?!0:gn.isFrozen(e)}var Cf="MapSet",qy="Patches",uE="ArrayMethods",Mk={};function zo(e){const t=Mk[e];return t||Zn(0,e),t}var dE=e=>!!Mk[e],Oc,Rk=()=>Oc,MI=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:dE(Cf)?zo(Cf):void 0,arrayMethodsPlugin_:dE(uE)?zo(uE):void 0});function fE(e,t){t&&(e.patchPlugin_=zo(qy),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ly(e){zy(e),e.drafts_.forEach(RI),e.drafts_=null}function zy(e){e===Oc&&(Oc=e.parent_)}var mE=e=>Oc=MI(Oc,e);function RI(e){const t=e[Ur];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Ur].modified_&&(Ly(t),Zn(4)),na(e)&&(e=pE(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[Ur].base_,e,t)}else e=pE(t,r);return qI(t,e,!0),Ly(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Tk?e:void 0}function pE(e,t){if(Om(t))return t;const r=t[Ur];if(!r)return Af(t,e.handledSet_,e);if(!Cm(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);zk(r,e)}return r.copy_}function qI(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&t0(t,r)}function qk(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Cm=(e,t)=>e.scope_===t,LI=[];function Lk(e,t,r,n){const i=Ba(e),s=e.type_;if(n!==void 0&&My(i,n,s)===t){Of(i,n,r,s);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;wm(i,(m,h)=>{if(Xa(h)){const g=u.get(h)||[];g.push(m),u.set(h,g)}})}const c=e.draftLocations_.get(t)??LI;for(const u of c)Of(i,u,r,s)}function zI(e,t,r){e.callbacks_.push(function(i){const s=t;if(!s||!Cm(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const c=e0(s);Lk(e,s.draft_??s,c,r),zk(s,i)})}function zk(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}qk(e)}}function II(e,t,r){const{scope_:n}=e;if(Xa(r)){const i=r[Ur];Cm(i,n)&&i.callbacks_.push(function(){uf(e);const c=e0(i);Lk(e,r,c,t)})}else na(r)&&e.callbacks_.push(function(){const s=Ba(e);e.type_===3?s.has(r)&&Af(r,n.handledSet_,n):My(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Af(My(e.copy_,t,e.type_),n.handledSet_,n)})}function Af(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Xa(e)||t.has(e)||!na(e)||Om(e)||(t.add(e),wm(e,(n,i)=>{if(Xa(i)){const s=i[Ur];if(Cm(s,r)){const c=e0(s);Of(e,n,c,e.type_),qk(s)}}else na(i)&&Af(i,t,r)})),e}function UI(e,t){const r=jm(e),n={type_:r?1:0,scope_:t?t.scope_:Rk(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=Nf;r&&(i=[n],s=Cc);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,[u,n]}var Nf={get(e,t){if(t===Ur)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=Ba(e);if(!cE(i,t,e.type_))return BI(e,i,t);const s=i[t];if(e.finalized_||!na(s)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&TI(t))return s;if(s===Cv(e.base_,t)){uf(e);const c=e.type_===1?+t:t,u=Uy(e.scope_,s,e,c);return e.copy_[c]=u}return s},has(e,t){return t in Ba(e)},ownKeys(e){return Reflect.ownKeys(Ba(e))},set(e,t,r){const n=Ik(Ba(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Cv(Ba(e),t),s=i?.[Ur];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(DI(r,i)&&(r!==void 0||cE(e.base_,t,e.type_)))return!0;uf(e),Iy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),II(e,t,r)),!0},deleteProperty(e,t){return uf(e),Cv(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Iy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ba(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[cf]:!0,[Py]:e.type_!==1||t!=="length",[Ef]:n[Ef],[Ec]:r[t]}},defineProperty(){Zn(11)},getPrototypeOf(e){return Hs(e.base_)},setPrototypeOf(){Zn(12)}},Cc={};for(let e in Nf){let t=Nf[e];Cc[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Cc.deleteProperty=function(e,t){return Cc.set.call(this,e,t,void 0)};Cc.set=function(e,t,r){return Nf.set.call(this,e[0],t,r,e[0])};function Cv(e,t){const r=e[Ur];return(r?Ba(r):e)[t]}function BI(e,t,r){const n=Ik(t,r);return n?Ec in n?n[Ec]:n.get?.call(e.draft_):void 0}function Ik(e,t){if(!(t in e))return;let r=Hs(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Hs(r)}}function Iy(e){e.modified_||(e.modified_=!0,e.parent_&&Iy(e.parent_))}function uf(e){e.copy_||(e.assigned_=new Map,e.copy_=Ry(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var $I=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(Ls(r)&&!Ls(n)){const c=n;n=r;const u=this;return function(h=c,...g){return u.produce(h,p=>n.call(this,p,...g))}}Ls(n)||Zn(6),i!==void 0&&!Ls(i)&&Zn(7);let s;if(na(r)){const c=mE(this),u=Uy(c,r,void 0);let m=!0;try{s=n(u),m=!1}finally{m?Ly(c):zy(c)}return fE(c,i),hE(s,c)}else if(!r||!Jb(r)){if(s=n(r),s===void 0&&(s=r),s===Tk&&(s=void 0),this.autoFreeze_&&t0(s,!0),i){const c=[],u=[];zo(qy).generateReplacementPatches_(r,s,{patches_:c,inversePatches_:u}),i(c,u)}return s}else Zn(1,r)},this.produceWithPatches=(r,n)=>{if(Ls(r))return(u,...m)=>this.produceWithPatches(u,h=>r(h,...m));let i,s;return[this.produce(r,n,(u,m)=>{i=u,s=m}),i,s]},Ov(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Ov(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Ov(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){na(t)||Zn(8),Xa(t)&&(t=ta(t));const r=mE(this),n=Uy(r,t,void 0);return n[Ur].isManual_=!0,zy(r),n}finishDraft(t,r){const n=t&&t[Ur];(!n||!n.isManual_)&&Zn(9);const{scope_:i}=n;return fE(i,r),hE(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const i=zo(qy).applyPatches_;return Xa(t)?i(t,r):this.produce(t,s=>i(s,r))}};function Uy(e,t,r,n){const[i,s]=Sm(t)?zo(Cf).proxyMap_(t,r):Em(t)?zo(Cf).proxySet_(t,r):UI(t,r);return(r?.scope_??Rk()).drafts_.push(i),s.callbacks_=r?.callbacks_??[],s.key_=n,r&&n!==void 0?zI(r,s,n):s.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:h}=m;s.modified_&&h&&h.generatePatches_(s,[],m)}),i}function ta(e){return Xa(e)||Zn(10,e),Uk(e)}function Uk(e){if(!na(e)||Om(e))return e;const t=e[Ur];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ry(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ry(e,!0);return wm(r,(i,s)=>{Of(r,i,Uk(s))},n),t&&(t.finalized_=!1),r}var HI=new $I,Bk=HI.produce;function $k(e){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,e):i(s)}var FI=$k(),KI=$k,YI=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jf:jf.apply(null,arguments)};function Un(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(vn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>Dk(n)&&n.type===e,r}var Hk=class yc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,yc.prototype)}static get[Symbol.species](){return yc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new yc(...t[0].concat(this)):new yc(...t.concat(this))}};function gE(e){return na(e)?Bk(e,()=>{}):e}function Id(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function GI(e){return typeof e=="boolean"}var VI=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let c=new Hk;return r&&(GI(r)?c.push(FI):c.push(KI(r.extraArgument))),c},Fk="RTK_autoBatch",Nt=()=>e=>({payload:e,meta:{[Fk]:!0}}),vE=e=>t=>{setTimeout(t,e)},Kk=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,c=!1;const u=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:vE(10):e.type==="callback"?e.queueNotification:vE(e.timeout),h=()=>{c=!1,s&&(s=!1,u.forEach(g=>g()))};return Object.assign({},n,{subscribe(g){const p=()=>i&&g(),_=n.subscribe(p);return u.add(g),()=>{_(),u.delete(g)}},dispatch(g){try{return i=!g?.meta?.[Fk],s=!i,s&&(c||(c=!0,m(h))),n.dispatch(g)}finally{i=!0}}})},WI=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new Hk(e);return n&&i.push(Kk(typeof n=="object"?n:void 0)),i};function XI(e){const t=VI(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:c=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(Qb(r))u=kk(r);else throw new Error(vn(1));let m;typeof n=="function"?m=n(t):m=t();let h=jf;i&&(h=YI({trace:!1,...typeof i=="object"&&i}));const g=NI(...m),p=WI(g);let _=typeof c=="function"?c(p):p();const x=h(..._);return Nk(u,s,x)}function Yk(e){const t={},r=[];let n;const i={addCase(s,c){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(vn(28));if(u in t)throw new Error(vn(29));return t[u]=c,i},addAsyncThunk(s,c){return c.pending&&(t[s.pending.type]=c.pending),c.rejected&&(t[s.rejected.type]=c.rejected),c.fulfilled&&(t[s.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:s.settled,reducer:c.settled}),i},addMatcher(s,c){return r.push({matcher:s,reducer:c}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function ZI(e){return typeof e=="function"}function QI(e,t){let[r,n,i]=Yk(t),s;if(ZI(e))s=()=>gE(e());else{const u=gE(e);s=()=>u}function c(u=s(),m){let h=[r[m.type],...n.filter(({matcher:g})=>g(m)).map(({reducer:g})=>g)];return h.filter(g=>!!g).length===0&&(h=[i]),h.reduce((g,p)=>{if(p)if(Xa(g)){const x=p(g,m);return x===void 0?g:x}else{if(na(g))return Bk(g,_=>p(_,m));{const _=p(g,m);if(_===void 0){if(g===null)return g;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return g},u)}return c.getInitialState=s,c}var JI="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",e4=(e=21)=>{let t="",r=e;for(;r--;)t+=JI[Math.random()*64|0];return t},t4=Symbol.for("rtk-slice-createasyncthunk");function r4(e,t){return`${e}/${t}`}function n4({creators:e}={}){const t=e?.asyncThunk?.[t4];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(vn(11));const c=(typeof n.reducers=="function"?n.reducers(i4()):n.reducers)||{},u=Object.keys(c),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(A,k){const D=typeof A=="string"?A:A.type;if(!D)throw new Error(vn(12));if(D in m.sliceCaseReducersByType)throw new Error(vn(13));return m.sliceCaseReducersByType[D]=k,h},addMatcher(A,k){return m.sliceMatchers.push({matcher:A,reducer:k}),h},exposeAction(A,k){return m.actionCreators[A]=k,h},exposeCaseReducer(A,k){return m.sliceCaseReducersByName[A]=k,h}};u.forEach(A=>{const k=c[A],D={reducerName:A,type:r4(i,A),createNotation:typeof n.reducers=="function"};s4(k)?c4(D,k,h,t):o4(D,k,h)});function g(){const[A={},k=[],D=void 0]=typeof n.extraReducers=="function"?Yk(n.extraReducers):[n.extraReducers],M={...A,...m.sliceCaseReducersByType};return QI(n.initialState,z=>{for(let K in M)z.addCase(K,M[K]);for(let K of m.sliceMatchers)z.addMatcher(K.matcher,K.reducer);for(let K of k)z.addMatcher(K.matcher,K.reducer);D&&z.addDefaultCase(D)})}const p=A=>A,_=new Map,x=new WeakMap;let w;function j(A,k){return w||(w=g()),w(A,k)}function S(){return w||(w=g()),w.getInitialState()}function O(A,k=!1){function D(z){let K=z[A];return typeof K>"u"&&k&&(K=Id(x,D,S)),K}function M(z=p){const K=Id(_,k,()=>new WeakMap);return Id(K,z,()=>{const Q={};for(const[ne,G]of Object.entries(n.selectors??{}))Q[ne]=a4(G,z,()=>Id(x,z,S),k);return Q})}return{reducerPath:A,getSelectors:M,get selectors(){return M(D)},selectSlice:D}}const C={name:i,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...O(s),injectInto(A,{reducerPath:k,...D}={}){const M=k??s;return A.inject({reducerPath:M,reducer:j},D),{...C,...O(M,!0)}}};return C}}function a4(e,t,r,n){function i(s,...c){let u=t(s);return typeof u>"u"&&n&&(u=r()),e(u,...c)}return i.unwrapped=e,i}var Jr=n4();function i4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function o4({type:e,reducerName:t,createNotation:r},n,i){let s,c;if("reducer"in n){if(r&&!l4(n))throw new Error(vn(17));s=n.reducer,c=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,c?Un(e,c):Un(e))}function s4(e){return e._reducerDefinitionType==="asyncThunk"}function l4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function c4({type:e,reducerName:t},r,n,i){if(!i)throw new Error(vn(18));const{payloadCreator:s,fulfilled:c,pending:u,rejected:m,settled:h,options:g}=r,p=i(e,s,g);n.exposeAction(t,p),c&&n.addCase(p.fulfilled,c),u&&n.addCase(p.pending,u),m&&n.addCase(p.rejected,m),h&&n.addMatcher(p.settled,h),n.exposeCaseReducer(t,{fulfilled:c||Ud,pending:u||Ud,rejected:m||Ud,settled:h||Ud})}function Ud(){}var u4="task",Gk="listener",Vk="completed",r0="cancelled",d4=`task-${r0}`,f4=`task-${Vk}`,By=`${Gk}-${r0}`,m4=`${Gk}-${Vk}`,Am=class{constructor(e){this.code=e,this.message=`${u4} ${r0} (reason: ${e})`}name="TaskAbortError";message},n0=(e,t)=>{if(typeof e!="function")throw new TypeError(vn(32))},kf=()=>{},Wk=(e,t=kf)=>(e.catch(t),e),Xk=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ko=e=>{if(e.aborted)throw new Am(e.reason)};function Zk(e,t){let r=kf;return new Promise((n,i)=>{const s=()=>i(new Am(e.reason));if(e.aborted){s();return}r=Xk(e,s),t.finally(()=>r()).then(n,i)}).finally(()=>{r=kf})}var h4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Am?"cancelled":"rejected",error:r}}finally{t?.()}},Df=e=>t=>Wk(Zk(e,t).then(r=>(ko(e),r))),Qk=e=>{const t=Df(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Us}=Object,yE={},Nm="listenerMiddleware",p4=(e,t)=>{const r=n=>Xk(e,()=>n.abort(e.reason));return(n,i)=>{n0(n);const s=new AbortController;r(s);const c=h4(async()=>{ko(e),ko(s.signal);const u=await n({pause:Df(s.signal),delay:Qk(s.signal),signal:s.signal});return ko(s.signal),u},()=>s.abort(f4));return i?.autoJoin&&t.push(c.catch(kf)),{result:Df(e)(c),cancel(){s.abort(d4)}}}},g4=(e,t)=>{const r=async(n,i)=>{ko(t);let s=()=>{};const u=[new Promise((m,h)=>{let g=e({predicate:n,effect:(p,_)=>{_.unsubscribe(),m([p,_.getState(),_.getOriginalState()])}});s=()=>{g(),h()}})];i!=null&&u.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await Zk(t,Promise.race(u));return ko(t),m}finally{s()}};return(n,i)=>Wk(r(n,i))},Jk=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=Un(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(vn(21));return n0(s),{predicate:i,type:t,effect:s}},eD=Us(e=>{const{type:t,predicate:r,effect:n}=Jk(e);return{id:e4(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(vn(22))}}},{withTypes:()=>eD}),bE=(e,t)=>{const{type:r,effect:n,predicate:i}=Jk(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},$y=e=>{e.pending.forEach(t=>{t.abort(By)})},v4=(e,t)=>()=>{for(const r of t.keys())$y(r);e.clear()},_E=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},tD=Us(Un(`${Nm}/add`),{withTypes:()=>tD}),y4=Un(`${Nm}/removeAll`),rD=Us(Un(`${Nm}/remove`),{withTypes:()=>rD}),b4=(...e)=>{console.error(`${Nm}/error`,...e)},Vc=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},i=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:s,onError:c=b4}=e;n0(c);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w?.cancelActive&&$y(x)}),m=x=>{const w=bE(t,x)??eD(x);return u(w)};Us(m,{withTypes:()=>m});const h=x=>{const w=bE(t,x);return w&&(w.unsubscribe(),x.cancelActive&&$y(w)),!!w};Us(h,{withTypes:()=>h});const g=async(x,w,j,S)=>{const O=new AbortController,C=g4(m,O.signal),A=[];try{x.pending.add(O),n(x),await Promise.resolve(x.effect(w,Us({},j,{getOriginalState:S,condition:(k,D)=>C(k,D).then(Boolean),take:C,delay:Qk(O.signal),pause:Df(O.signal),extra:s,signal:O.signal,fork:p4(O.signal,A),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((k,D,M)=>{k!==O&&(k.abort(By),M.delete(k))})},cancel:()=>{O.abort(By),x.pending.delete(O)},throwIfCancelled:()=>{ko(O.signal)}})))}catch(k){k instanceof Am||_E(c,k,{raisedBy:"effect"})}finally{await Promise.all(A),O.abort(m4),i(x),x.pending.delete(O)}},p=v4(t,r);return{middleware:x=>w=>j=>{if(!Dk(j))return w(j);if(tD.match(j))return m(j.payload);if(y4.match(j)){p();return}if(rD.match(j))return h(j.payload);let S=x.getState();const O=()=>{if(S===yE)throw new Error(vn(23));return S};let C;try{if(C=w(j),t.size>0){const A=x.getState(),k=Array.from(t.values());for(const D of k){let M=!1;try{M=D.predicate(j,A,S)}catch(z){M=!1,_E(c,z,{raisedBy:"predicate"})}M&&g(D,j,x,O)}}}finally{S=yE}return C},startListening:m,stopListening:h,clearListeners:p}};function vn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _4={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},nD=Jr({name:"chartLayout",initialState:_4,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:x4,setLayout:w4,setChartSize:j4,setScale:S4}=nD.actions,E4=nD.reducer;function aD(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Lt(e){return Number.isFinite(e)}function ba(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function xE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(r),!0).forEach(function(n){O4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O4(e,t,r){return(t=C4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C4(e){var t=A4(e,"string");return typeof t=="symbol"?t:t+""}function A4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vt(e,t,r){return Pt(e)||Pt(t)?r:ya(t)?Lo(e,t,r):typeof t=="function"?t(e):r}var N4=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:s,verticalAlign:c,layout:u}=t;if((u==="vertical"||u==="horizontal"&&c==="middle")&&s!=="center"&&ke(e[s]))return zs(zs({},e),{},{[s]:e[s]+(n||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&c!=="middle"&&ke(e[c]))return zs(zs({},e),{},{[c]:e[c]+(i||0)})}return e},Zi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",iD=(e,t,r,n)=>{if(n)return e.map(u=>u.coordinate);var i,s,c=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===r&&(s=!0),u.coordinate));return i||c.push(t),s||c.push(r),c},oD=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:s,scale:c,realScaleType:u,isCategorical:m,categoricalDomain:h,tickCount:g,ticks:p,niceTicks:_,axisType:x}=e;if(!c)return null;var w=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=i==="category"&&c.bandwidth?c.bandwidth()/w:0;if(j=x==="angleAxis"&&s&&s.length>=2?br(s[0]-s[1])*2*j:j,p||_){var S=(p||_||[]).map((O,C)=>{var A=n?n.indexOf(O):O;return{coordinate:c(A)+j,value:O,offset:j,index:C}});return S.filter(O=>!ra(O.coordinate))}return m&&h?h.map((O,C)=>({coordinate:c(O)+j,value:O,index:C,offset:j})):c.ticks&&g!=null?c.ticks(g).map((O,C)=>({coordinate:c(O)+j,value:O,offset:j,index:C})):c.domain().map((O,C)=>({coordinate:c(O)+j,value:n?n[O]:O,index:C,offset:j}))},wE=1e-4,k4=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-wE,s=Math.max(n[0],n[1])+wE,c=e(t[0]),u=e(t[r-1]);(c<i||c>s||u<i||u>s)&&e.domain([t[0],t[r-1]])}},D4=(e,t)=>{if(!t||t.length!==2||!ke(t[0])||!ke(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ke(e[0])||e[0]<r)&&(i[0]=r),(!ke(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},T4=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0,u=0;u<r;++u){var m=e[u],h=m?.[i];if(h!=null){var g=h[1],p=h[0],_=ra(g)?p:g;_>=0?(h[0]=s,h[1]=s+_,s=g):(h[0]=c,h[1]=c+_,c=g)}}}},P4=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0;c<r;++c){var u=e[c],m=u?.[i];if(m!=null){var h=ra(m[1])?m[0]:m[1];h>=0?(m[0]=s,m[1]=s+h,s=m[1]):(m[0]=0,m[1]=0)}}}},M4={sign:T4,expand:s5,none:qo,silhouette:l5,wiggle:c5,positive:P4},R4=(e,t,r)=>{var n,i=(n=M4[r])!==null&&n!==void 0?n:qo,s=o5().keys(t).value((u,m)=>Number(vt(u,m,0))).order(Dy).offset(i),c=s(e);return c.forEach((u,m)=>{u.forEach((h,g)=>{var p=vt(e[g],t[m],0);Array.isArray(p)&&p.length===2&&ke(p[0])&&ke(p[1])&&(h[0]=p[0],h[1]=p[1])})}),c};function q4(e){return e==null?void 0:String(e)}function jE(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:s,dataKey:c}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Pt(i[t.dataKey])){var u=fk(r,"value",i[t.dataKey]);if(u)return u.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var m=vt(i,Pt(c)?t.dataKey:c);return Pt(m)?null:t.scale(m)}var SE=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:s,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var u=vt(s,t.dataKey,t.scale.domain()[c]);return Pt(u)?null:t.scale(u)-i/2+n},L4=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},z4=e=>{var t=e.flat(2).filter(ke);return[Math.min(...t),Math.max(...t)]},I4=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],U4=(e,t,r)=>{if(e!=null)return I4(Object.keys(e).reduce((n,i)=>{var s=e[i];if(!s)return n;var{stackedData:c}=s,u=c.reduce((m,h)=>{var g=aD(h,t,r),p=z4(g);return!Lt(p[0])||!Lt(p[1])?m:[Math.min(m[0],p[0]),Math.max(m[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},EE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,OE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fs=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=_m(t,g=>g.coordinate),s=1/0,c=1,u=i.length;c<u;c++){var m=i[c],h=i[c-1];s=Math.min((m?.coordinate||0)-(h?.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function CE(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:s}=e;return zs(zs({},t),{},{dataKey:r,payload:n,value:i,name:s})}function Js(e,t){if(e)return String(e);if(typeof t=="string")return t}var B4=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},$4=(e,t)=>t==="centric"?e.angle:e.radius,ai=e=>e.layout.width,ii=e=>e.layout.height,H4=e=>e.layout.scale,sD=e=>e.layout.margin,km=X(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Dm=X(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),lD="data-recharts-item-index",cD="data-recharts-item-id",Wc=60;function AE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AE(Object(r),!0).forEach(function(n){F4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F4(e,t,r){return(t=K4(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K4(e){var t=Y4(e,"string");return typeof t=="symbol"?t:t+""}function Y4(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var G4=e=>e.brush.height;function V4(e){var t=Dm(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Wc;return r+i}return r},0)}function W4(e){var t=Dm(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Wc;return r+i}return r},0)}function X4(e){var t=km(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Z4(e){var t=km(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var dr=X([ai,ii,sD,G4,V4,W4,X4,Z4,Ak,jI],(e,t,r,n,i,s,c,u,m,h)=>{var g={left:(r.left||0)+i,right:(r.right||0)+s},p={top:(r.top||0)+c,bottom:(r.bottom||0)+u},_=Bd(Bd({},p),g),x=_.bottom;_.bottom+=n,_=N4(_,m,h);var w=e-_.left-_.right,j=t-_.top-_.bottom;return Bd(Bd({brushBottom:x},_),{},{width:Math.max(w,0),height:Math.max(j,0)})}),Q4=X(dr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),a0=X(ai,ii,(e,t)=>({x:0,y:0,width:e,height:t})),J4=y.createContext(null),Pr=()=>y.useContext(J4)!=null,Tm=e=>e.brush,Pm=X([Tm,dr,sD],(e,t,r)=>({height:e.height,x:ke(e.x)?e.x:t.left,y:ke(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:ke(e.width)?e.width:t.width})),Av={},Nv={},kv={},NE;function eU(){return NE||(NE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:s}={}){let c,u=null;const m=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),g=()=>{u!==null&&(r.apply(c,u),c=void 0,u=null)},p=()=>{h&&g(),j()};let _=null;const x=()=>{_!=null&&clearTimeout(_),_=setTimeout(()=>{_=null,p()},n)},w=()=>{_!==null&&(clearTimeout(_),_=null)},j=()=>{w(),c=void 0,u=null},S=()=>{g()},O=function(...C){if(i?.aborted)return;c=this,u=C;const A=_==null;x(),m&&A&&g()};return O.schedule=x,O.cancel=j,O.flush=S,i?.addEventListener("abort",j,{once:!0}),O}e.debounce=t})(kv)),kv}var kE;function tU(){return kE||(kE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=eU();function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:u=!0,maxWait:m}=s,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let g,p=null;const _=t.debounce(function(...j){g=n.apply(this,j),p=null},i,{edges:h}),x=function(...j){return m!=null&&(p===null&&(p=Date.now()),Date.now()-p>=m)?(g=n.apply(this,j),p=Date.now(),_.cancel(),_.schedule(),g):(_.apply(this,j),g)},w=()=>(_.flush(),g);return x.cancel=_.cancel,x.flush=w,x}e.debounce=r})(Nv)),Nv}var DE;function rU(){return DE||(DE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tU();function r(n,i=0,s={}){const{leading:c=!0,trailing:u=!0}=s;return t.debounce(n,i,{leading:c,maxWait:i,trailing:u})}e.throttle=r})(Av)),Av}var Dv,TE;function nU(){return TE||(TE=1,Dv=rU().throttle),Dv}var aU=nU();const iU=ri(aU);var Tf=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(r.replace(/%s/g,()=>i[c++]))}},uD=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:c}=r,u=Wa(n)?e:Number(n),m=Wa(i)?t:Number(i);return s&&s>0&&(u?m=u/s:m&&(u=m*s),c&&m!=null&&m>c&&(m=c)),{calculatedWidth:u,calculatedHeight:m}},oU={width:0,height:0,overflow:"visible"},sU={width:0,overflowX:"visible"},lU={height:0,overflowY:"visible"},cU={},uU=e=>{var{width:t,height:r}=e,n=Wa(t),i=Wa(r);return n&&i?oU:n?sU:i?lU:cU};function dU(e){var{width:t,height:r,aspect:n}=e,i=t,s=r;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hy.apply(null,arguments)}function PE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ME(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PE(Object(r),!0).forEach(function(n){fU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fU(e,t,r){return(t=mU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mU(e){var t=hU(e,"string");return typeof t=="symbol"?t:t+""}function hU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dD=y.createContext({width:-1,height:-1});function pU(e){return ba(e.width)&&ba(e.height)}function fD(e){var{children:t,width:r,height:n}=e,i=y.useMemo(()=>({width:r,height:n}),[r,n]);return pU(i)?y.createElement(dD.Provider,{value:i},t):null}var i0=()=>y.useContext(dD),gU=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:c=0,minHeight:u,maxHeight:m,children:h,debounce:g=0,id:p,className:_,onResize:x,style:w={}}=e,j=y.useRef(null),S=y.useRef();S.current=x,y.useImperativeHandle(t,()=>j.current);var[O,C]=y.useState({containerWidth:n.width,containerHeight:n.height}),A=y.useCallback((K,Q)=>{C(ne=>{var G=Math.round(K),I=Math.round(Q);return ne.containerWidth===G&&ne.containerHeight===I?ne:{containerWidth:G,containerHeight:I}})},[]);y.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Yc;var K=I=>{var ie,{width:pe,height:q}=I[0].contentRect;A(pe,q),(ie=S.current)===null||ie===void 0||ie.call(S,pe,q)};g>0&&(K=iU(K,g,{trailing:!0,leading:!1}));var Q=new ResizeObserver(K),{width:ne,height:G}=j.current.getBoundingClientRect();return A(ne,G),Q.observe(j.current),()=>{Q.disconnect()}},[A,g]);var{containerWidth:k,containerHeight:D}=O;Tf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:M,calculatedHeight:z}=uD(k,D,{width:i,height:s,aspect:r,maxHeight:m});return Tf(M!=null&&M>0||z!=null&&z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,z,i,s,c,u,r),y.createElement("div",{id:p?"".concat(p):void 0,className:st("recharts-responsive-container",_),style:ME(ME({},w),{},{width:i,height:s,minWidth:c,minHeight:u,maxHeight:m}),ref:j},y.createElement("div",{style:uU({width:i,height:s})},y.createElement(fD,{width:M,height:z},h)))}),Tv=y.forwardRef((e,t)=>{var r=i0();if(ba(r.width)&&ba(r.height))return e.children;var{width:n,height:i}=dU({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:c}=uD(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ke(s)&&ke(c)?y.createElement(fD,{width:s,height:c},e.children):y.createElement(gU,Hy({},e,{width:n,height:i,ref:t}))});function mD(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Mm=()=>{var e,t=Pr(),r=De(Q4),n=De(Pm),i=(e=De(Tm))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},vU={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},hD=()=>{var e;return(e=De(dr))!==null&&e!==void 0?e:vU},pD=()=>De(ai),gD=()=>De(ii),oQ=()=>De(e=>e.layout.margin),et=e=>e.layout.layoutType,Yo=()=>De(et),sQ=()=>{var e=Yo();if(e==="horizontal"||e==="vertical")return e},yU=()=>{var e=Yo();return e!==void 0},Rm=e=>{var t=Mt(),r=Pr(),{width:n,height:i}=e,s=i0(),c=n,u=i;return s&&(c=s.width>0?s.width:n,u=s.height>0?s.height:i),y.useEffect(()=>{!r&&ba(c)&&ba(u)&&t(j4({width:c,height:u}))},[t,r,c,u]),null},vD=Symbol.for("immer-nothing"),RE=Symbol.for("immer-draftable"),bn=Symbol.for("immer-state");function Qn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ac=Object.getPrototypeOf;function Ks(e){return!!e&&!!e[bn]}function Io(e){return e?yD(e)||Array.isArray(e)||!!e[RE]||!!e.constructor?.[RE]||Xc(e)||Lm(e):!1}var bU=Object.prototype.constructor.toString(),qE=new WeakMap;function yD(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=qE.get(r);return n===void 0&&(n=Function.toString.call(r),qE.set(r,n)),n===bU}function Pf(e,t,r=!0){qm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function qm(e){const t=e[bn];return t?t.type_:Array.isArray(e)?1:Xc(e)?2:Lm(e)?3:0}function Fy(e,t){return qm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function bD(e,t,r){const n=qm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function _U(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Xc(e){return e instanceof Map}function Lm(e){return e instanceof Set}function jo(e){return e.copy_||e.base_}function Ky(e,t){if(Xc(e))return new Map(e);if(Lm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=yD(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[bn];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[c]})}return Object.create(Ac(e),n)}else{const n=Ac(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function o0(e,t=!1){return zm(e)||Ks(e)||!Io(e)||(qm(e)>1&&Object.defineProperties(e,{set:$d,add:$d,clear:$d,delete:$d}),Object.freeze(e),t&&Object.values(e).forEach(r=>o0(r,!0))),e}function xU(){Qn(2)}var $d={value:xU};function zm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var wU={};function Uo(e){const t=wU[e];return t||Qn(0,e),t}var Nc;function _D(){return Nc}function jU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function LE(e,t){t&&(Uo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Yy(e){Gy(e),e.drafts_.forEach(SU),e.drafts_=null}function Gy(e){e===Nc&&(Nc=e.parent_)}function zE(e){return Nc=jU(Nc,e)}function SU(e){const t=e[bn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function IE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[bn].modified_&&(Yy(t),Qn(4)),Io(e)&&(e=Mf(t,e),t.parent_||Rf(t,e)),t.patches_&&Uo("Patches").generateReplacementPatches_(r[bn].base_,e,t.patches_,t.inversePatches_)):e=Mf(t,r,[]),Yy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==vD?e:void 0}function Mf(e,t,r){if(zm(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[bn];if(!i)return Pf(t,(s,c)=>UE(e,i,t,s,c,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Rf(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let c=s,u=!1;i.type_===3&&(c=new Set(s),s.clear(),u=!0),Pf(c,(m,h)=>UE(e,i,s,m,h,r,u),n),Rf(e,s,!1),r&&e.patches_&&Uo("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function UE(e,t,r,n,i,s,c){if(i==null||typeof i!="object"&&!c)return;const u=zm(i);if(!(u&&!c)){if(Ks(i)){const m=s&&t&&t.type_!==3&&!Fy(t.assigned_,n)?s.concat(n):void 0,h=Mf(e,i,m);if(bD(r,n,h),Ks(h))e.canAutoFreeze_=!1;else return}else c&&r.add(i);if(Io(i)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&u)return;Mf(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Xc(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Rf(e,i)}}}function Rf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&o0(t,r)}function EU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:_D(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=s0;r&&(i=[n],s=kc);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,u}var s0={get(e,t){if(t===bn)return e;const r=jo(e);if(!Fy(r,t))return OU(e,r,t);const n=r[t];return e.finalized_||!Io(n)?n:n===Pv(e.base_,t)?(Mv(e),e.copy_[t]=Wy(n,e)):n},has(e,t){return t in jo(e)},ownKeys(e){return Reflect.ownKeys(jo(e))},set(e,t,r){const n=xD(jo(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Pv(jo(e),t),s=i?.[bn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(_U(r,i)&&(r!==void 0||Fy(e.base_,t)))return!0;Mv(e),Vy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Pv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Mv(e),Vy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=jo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Qn(11)},getPrototypeOf(e){return Ac(e.base_)},setPrototypeOf(){Qn(12)}},kc={};Pf(s0,(e,t)=>{kc[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});kc.deleteProperty=function(e,t){return kc.set.call(this,e,t,void 0)};kc.set=function(e,t,r){return s0.set.call(this,e[0],t,r,e[0])};function Pv(e,t){const r=e[bn];return(r?jo(r):e)[t]}function OU(e,t,r){const n=xD(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function xD(e,t){if(!(t in e))return;let r=Ac(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Ac(r)}}function Vy(e){e.modified_||(e.modified_=!0,e.parent_&&Vy(e.parent_))}function Mv(e){e.copy_||(e.copy_=Ky(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var CU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const c=this;return function(m=s,...h){return c.produce(m,g=>r.call(this,g,...h))}}typeof r!="function"&&Qn(6),n!==void 0&&typeof n!="function"&&Qn(7);let i;if(Io(t)){const s=zE(this),c=Wy(t,void 0);let u=!0;try{i=r(c),u=!1}finally{u?Yy(s):Gy(s)}return LE(s,n),IE(i,s)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===vD&&(i=void 0),this.autoFreeze_&&o0(i,!0),n){const s=[],c=[];Uo("Patches").generateReplacementPatches_(t,i,s,c),n(s,c)}return i}else Qn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...u)=>this.produceWithPatches(c,m=>t(m,...u));let n,i;return[this.produce(t,r,(c,u)=>{n=c,i=u}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Io(e)||Qn(8),Ks(e)&&(e=AU(e));const t=zE(this),r=Wy(e,void 0);return r[bn].isManual_=!0,Gy(t),r}finishDraft(e,t){const r=e&&e[bn];(!r||!r.isManual_)&&Qn(9);const{scope_:n}=r;return LE(n,t),IE(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Uo("Patches").applyPatches_;return Ks(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Wy(e,t){const r=Xc(e)?Uo("MapSet").proxyMap_(e,t):Lm(e)?Uo("MapSet").proxySet_(e,t):EU(e,t);return(t?t.scope_:_D()).drafts_.push(r),r}function AU(e){return Ks(e)||Qn(10,e),wD(e)}function wD(e){if(!Io(e)||zm(e))return e;const t=e[bn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ky(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ky(e,!0);return Pf(r,(i,s)=>{bD(r,i,wD(s))},n),t&&(t.finalized_=!1),r}var NU=new CU;NU.produce;var kU={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},jD=Jr({name:"legend",initialState:kU,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Nt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ta(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:Nt()},removeLegendPayload:{reducer(e,t){var r=ta(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Nt()}}}),{setLegendSize:lQ,setLegendSettings:cQ,addLegendPayload:SD,replaceLegendPayload:ED,removeLegendPayload:OD}=jD.actions,DU=jD.reducer;function Xy(){return Xy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xy.apply(null,arguments)}function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(r),!0).forEach(function(n){TU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TU(e,t,r){return(t=PU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PU(e){var t=MU(e,"string");return typeof t=="symbol"?t:t+""}function MU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RU(e){return Array.isArray(e)&&ya(e[0])&&ya(e[1])?e.join(" ~ "):e}var qU=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:s,formatter:c,itemSorter:u,wrapperClassName:m,labelClassName:h,label:g,labelFormatter:p,accessibilityLayer:_=!1}=e,x=()=>{if(s&&s.length){var D={padding:0,margin:0},M=(u?_m(s,u):s).map((z,K)=>{if(z.type==="none")return null;var Q=z.formatter||c||RU,{value:ne,name:G}=z,I=ne,ie=G;if(Q){var pe=Q(ne,G,z,K,s);if(Array.isArray(pe))[I,ie]=pe;else if(pe!=null)I=pe;else return null}var q=Rv({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(K),style:q},ya(ie)?y.createElement("span",{className:"recharts-tooltip-item-name"},ie):null,ya(ie)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},I),y.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:D},M)}return null},w=Rv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=Rv({margin:0},i),S=!Pt(g),O=S?g:"",C=st("recharts-default-tooltip",m),A=st("recharts-tooltip-label",h);S&&p&&s!==void 0&&s!==null&&(O=p(g,s));var k=_?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Xy({className:C,style:w},k),y.createElement("p",{className:A,style:j},y.isValidElement(O)?O:"".concat(O)),x())},lc="recharts-tooltip-wrapper",LU={visibility:"hidden"};function zU(e){var{coordinate:t,translateX:r,translateY:n}=e;return st(lc,{["".concat(lc,"-right")]:ke(r)&&t&&ke(t.x)&&r>=t.x,["".concat(lc,"-left")]:ke(r)&&t&&ke(t.x)&&r<t.x,["".concat(lc,"-bottom")]:ke(n)&&t&&ke(t.y)&&n>=t.y,["".concat(lc,"-top")]:ke(n)&&t&&ke(t.y)&&n<t.y})}function $E(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:s,reverseDirection:c,tooltipDimension:u,viewBox:m,viewBoxDimension:h}=e;if(s&&ke(s[n]))return s[n];var g=r[n]-u-(i>0?i:0),p=r[n]+i;if(t[n])return c[n]?g:p;var _=m[n];if(_==null)return 0;if(c[n]){var x=g,w=_;return x<w?Math.max(p,_):Math.max(g,_)}if(h==null)return 0;var j=p+u,S=_+h;return j>S?Math.max(g,_):Math.max(p,_)}function IU(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function UU(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:c,useTranslate3d:u,viewBox:m}=e,h,g,p;return c.height>0&&c.width>0&&r?(g=$E({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.width,viewBox:m,viewBoxDimension:m.width}),p=$E({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.height,viewBox:m,viewBoxDimension:m.height}),h=IU({translateX:g,translateY:p,useTranslate3d:u})):h=LU,{cssProperties:h,cssClasses:zU({translateX:g,translateY:p,coordinate:r})}}function HE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Hd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(r),!0).forEach(function(n){Zy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zy(e,t,r){return(t=BU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BU(e){var t=$U(e,"string");return typeof t=="symbol"?t:t+""}function $U(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class HU extends y.PureComponent{constructor(){super(...arguments),Zy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Zy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:c,hasPayload:u,isAnimationActive:m,offset:h,position:g,reverseDirection:p,useTranslate3d:_,viewBox:x,wrapperStyle:w,lastBoundingBox:j,innerRef:S,hasPortalFromProps:O}=this.props,{cssClasses:C,cssProperties:A}=UU({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:h,position:g,reverseDirection:p,tooltipBox:{height:j.height,width:j.width},useTranslate3d:_,viewBox:x}),k=O?{}:Hd(Hd({transition:m&&t?"transform ".concat(n,"ms ").concat(i):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=Hd(Hd({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:D,ref:S},s)}}var CD=()=>{var e;return(e=De(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Qy(){return Qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qy.apply(null,arguments)}function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function KE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(n){FU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FU(e,t,r){return(t=KU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KU(e){var t=YU(e,"string");return typeof t=="symbol"?t:t+""}function YU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YE={curveBasisClosed:W3,curveBasisOpen:X3,curveBasis:V3,curveBumpX:M3,curveBumpY:R3,curveLinearClosed:Z3,curveLinear:vm,curveMonotoneX:Q3,curveMonotoneY:J3,curveNatural:e5,curveStep:t5,curveStepAfter:n5,curveStepBefore:r5},qf=e=>Lt(e.x)&&Lt(e.y),GE=e=>e.base!=null&&qf(e.base)&&qf(e),cc=e=>e.x,uc=e=>e.y,GU=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Kc(e));return(r==="curveMonotone"||r==="curveBump")&&t?YE["".concat(r).concat(t==="vertical"?"Y":"X")]:YE[r]||vm},VU=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:s=!1}=e,c=GU(t,i),u=s?r.filter(qf):r,m;if(Array.isArray(n)){var h=r.map((x,w)=>KE(KE({},x),{},{base:n[w]}));i==="vertical"?m=Rd().y(uc).x1(cc).x0(x=>x.base.x):m=Rd().x(cc).y1(uc).y0(x=>x.base.y);var g=m.defined(GE).curve(c),p=s?h.filter(GE):h;return g(p)}i==="vertical"&&ke(n)?m=Rd().y(uc).x1(cc).x0(n):ke(n)?m=Rd().x(cc).y1(uc).y0(n):m=JN().x(cc).y(uc);var _=m.defined(qf).curve(c);return _(u)},l0=e=>{var{className:t,points:r,path:n,pathRef:i}=e,s=Yo();if((!r||!r.length)&&!n)return null;var c={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},u=r&&r.length?VU(c):n;return y.createElement("path",Qy({},yn(e),Wb(e),{className:st("recharts-curve",t),d:u===null?void 0:u,ref:i}))},WU=["x","y","top","left","width","height","className"];function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jy.apply(null,arguments)}function VE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VE(Object(r),!0).forEach(function(n){ZU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZU(e,t,r){return(t=QU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QU(e){var t=JU(e,"string");return typeof t=="symbol"?t:t+""}function JU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function e6(e,t){if(e==null)return{};var r,n,i=t6(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function t6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var r6=(e,t,r,n,i,s)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),n6=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:s=0,height:c=0,className:u}=e,m=e6(e,WU),h=XU({x:t,y:r,top:n,left:i,width:s,height:c},m);return!ke(t)||!ke(r)||!ke(s)||!ke(c)||!ke(n)||!ke(i)?null:y.createElement("path",Jy({},Ir(h),{className:st("recharts-cross",u),d:r6(t,r,s,c,n,i)}))};function a6(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function XE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(r),!0).forEach(function(n){i6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i6(e,t,r){return(t=o6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o6(e){var t=s6(e,"string");return typeof t=="symbol"?t:t+""}function s6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var l6=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),AD=(e,t,r)=>e.map(n=>"".concat(l6(n)," ").concat(t,"ms ").concat(r)).join(","),c6=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),Dc=(e,t)=>Object.keys(t).reduce((r,n)=>XE(XE({},r),{},{[n]:e(n,t[n])}),{});function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(r),!0).forEach(function(n){u6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u6(e,t,r){return(t=d6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d6(e){var t=f6(e,"string");return typeof t=="symbol"?t:t+""}function f6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lf=(e,t,r)=>e+(t-e)*r,eb=e=>{var{from:t,to:r}=e;return t!==r},ND=(e,t,r)=>{var n=Dc((i,s)=>{if(eb(s)){var[c,u]=e(s.from,s.to,s.velocity);return ur(ur({},s),{},{from:c,velocity:u})}return s},t);return r<1?Dc((i,s)=>eb(s)&&n[i]!=null?ur(ur({},s),{},{velocity:Lf(s.velocity,n[i].velocity,r),from:Lf(s.from,n[i].from,r)}):s,t):ND(e,n,r-1)};function m6(e,t,r,n,i,s){var c,u=n.reduce((_,x)=>ur(ur({},_),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),m=()=>Dc((_,x)=>x.from,u),h=()=>!Object.values(u).filter(eb).length,g=null,p=_=>{c||(c=_);var x=_-c,w=x/r.dt;u=ND(r,u,w),i(ur(ur(ur({},e),t),m())),c=_,h()||(g=s.setTimeout(p))};return()=>(g=s.setTimeout(p),()=>{var _;(_=g)===null||_===void 0||_()})}function h6(e,t,r,n,i,s,c){var u=null,m=i.reduce((p,_)=>{var x=e[_],w=t[_];return x==null||w==null?p:ur(ur({},p),{},{[_]:[x,w]})},{}),h,g=p=>{h||(h=p);var _=(p-h)/n,x=Dc((j,S)=>Lf(...S,r(_)),m);if(s(ur(ur(ur({},e),t),x)),_<1)u=c.setTimeout(g);else{var w=Dc((j,S)=>Lf(...S,r(1)),m);s(ur(ur(ur({},e),t),w))}};return()=>(u=c.setTimeout(g),()=>{var p;(p=u)===null||p===void 0||p()})}const p6=(e,t,r,n,i,s)=>{var c=c6(e,t);return r==null?()=>(i(ur(ur({},e),t)),()=>{}):r.isStepper===!0?m6(e,t,r,c,i,s):h6(e,t,r,n,c,i,s)};var zf=1e-4,kD=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],DD=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),QE=(e,t)=>r=>{var n=kD(e,t);return DD(n,r)},g6=(e,t)=>r=>{var n=kD(e,t),i=[...n.map((s,c)=>s*c).slice(1),0];return DD(i,r)},v6=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},y6=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=v6(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},b6=(e,t,r,n)=>{var i=QE(e,r),s=QE(t,n),c=g6(e,r),u=h=>h>1?1:h<0?0:h,m=h=>{for(var g=h>1?1:h,p=g,_=0;_<8;++_){var x=i(p)-g,w=c(p);if(Math.abs(x-g)<zf||w<zf)return s(p);p=u(p-x/w)}return s(p)};return m.isStepper=!1,m},JE=function(){return b6(...y6(...arguments))},_6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,s=(c,u,m)=>{var h=-(c-u)*r,g=m*n,p=m+(h-g)*i/1e3,_=m*i/1e3+c;return Math.abs(_-u)<zf&&Math.abs(p)<zf?[u,0]:[_,p]};return s.isStepper=!0,s.dt=i,s},x6=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return JE(e);case"spring":return _6();default:if(e.split("(")[0]==="cubic-bezier")return JE(e)}return typeof e=="function"?e:null};function w6(e){var t,r=()=>null,n=!1,i=null,s=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var u=c,[m,...h]=u;if(typeof m=="number"){i=e.setTimeout(s.bind(null,h),m);return}s(m),i=e.setTimeout(s.bind(null,h));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,i&&(i(),i=null),s(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class j6{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function S6(){return w6(new j6)}var E6=y.createContext(S6);function O6(e,t){var r=y.useContext(E6);return y.useMemo(()=>t??r(e),[e,t,r])}var C6=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Im={isSsr:C6()},A6={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},eO={t:0},qv={t:1};function Zc(e){var t=xr(e,A6),{isActive:r,canBegin:n,duration:i,easing:s,begin:c,onAnimationEnd:u,onAnimationStart:m,children:h}=t,g=r==="auto"?!Im.isSsr:r,p=O6(t.animationId,t.animationManager),[_,x]=y.useState(g?eO:qv),w=y.useRef(null);return y.useEffect(()=>{g||x(qv)},[g]),y.useEffect(()=>{if(!g||!n)return Yc;var j=p6(eO,qv,x6(s),i,x,p.getTimeoutController()),S=()=>{w.current=j()};return p.start([m,c,S,i,u]),()=>{p.stop(),w.current&&w.current(),u()}},[g,n,i,s,c,m,u,p]),h(_.t)}function Qc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(Sc(t)),n=y.useRef(e);return n.current!==e&&(r.current=Sc(t),n.current=e),r.current}var N6=["radius"],k6=["radius"],tO,rO,nO,aO,iO,oO,sO,lO,cO,uO;function dO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dO(Object(r),!0).forEach(function(n){D6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D6(e,t,r){return(t=T6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T6(e){var t=P6(e,"string");return typeof t=="symbol"?t:t+""}function P6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function If(){return If=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},If.apply(null,arguments)}function mO(e,t){if(e==null)return{};var r,n,i=M6(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function M6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ma(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var hO=(e,t,r,n,i)=>{var s=Hi(r),c=Hi(n),u=Math.min(Math.abs(s)/2,Math.abs(c)/2),m=c>=0?1:-1,h=s>=0?1:-1,g=c>=0&&s>=0||c<0&&s<0?1:0,p;if(u>0&&i instanceof Array){for(var _=[0,0,0,0],x=0,w=4;x<w;x++)_[x]=i[x]>u?u:i[x];p=Ft(tO||(tO=ma(["M",",",""])),e,t+m*_[0]),_[0]>0&&(p+=Ft(rO||(rO=ma(["A ",",",",0,0,",",",",",""])),_[0],_[0],g,e+h*_[0],t)),p+=Ft(nO||(nO=ma(["L ",",",""])),e+r-h*_[1],t),_[1]>0&&(p+=Ft(aO||(aO=ma(["A ",",",",0,0,",`,
        `,",",""])),_[1],_[1],g,e+r,t+m*_[1])),p+=Ft(iO||(iO=ma(["L ",",",""])),e+r,t+n-m*_[2]),_[2]>0&&(p+=Ft(oO||(oO=ma(["A ",",",",0,0,",`,
        `,",",""])),_[2],_[2],g,e+r-h*_[2],t+n)),p+=Ft(sO||(sO=ma(["L ",",",""])),e+h*_[3],t+n),_[3]>0&&(p+=Ft(lO||(lO=ma(["A ",",",",0,0,",`,
        `,",",""])),_[3],_[3],g,e,t+n-m*_[3])),p+="Z"}else if(u>0&&i===+i&&i>0){var j=Math.min(u,i);p=Ft(cO||(cO=ma(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*j,j,j,g,e+h*j,t,e+r-h*j,t,j,j,g,e+r,t+m*j,e+r,t+n-m*j,j,j,g,e+r-h*j,t+n,e+h*j,t+n,j,j,g,e,t+n-m*j)}else p=Ft(uO||(uO=ma(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return p},pO={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},TD=e=>{var t=xr(e,pO),r=y.useRef(null),[n,i]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var U=r.current.getTotalLength();U&&i(U)}catch{}},[]);var{x:s,y:c,width:u,height:m,radius:h,className:g}=t,{animationEasing:p,animationDuration:_,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:j}=t,S=y.useRef(u),O=y.useRef(m),C=y.useRef(s),A=y.useRef(c),k=y.useMemo(()=>({x:s,y:c,width:u,height:m,radius:h}),[s,c,u,m,h]),D=Qc(k,"rectangle-");if(s!==+s||c!==+c||u!==+u||m!==+m||u===0||m===0)return null;var M=st("recharts-rectangle",g);if(!j){var z=Ir(t),{radius:K}=z,Q=mO(z,N6);return y.createElement("path",If({},Q,{x:Hi(s),y:Hi(c),width:Hi(u),height:Hi(m),radius:typeof h=="number"?h:void 0,className:M,d:hO(s,c,u,m,h)}))}var ne=S.current,G=O.current,I=C.current,ie=A.current,pe="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),R=AD(["strokeDasharray"],_,typeof p=="string"?p:pO.animationEasing);return y.createElement(Zc,{animationId:D,key:D,canBegin:n>0,duration:_,easing:p,isActive:j,begin:x},U=>{var J=kt(ne,u,U),B=kt(G,m,U),fe=kt(I,s,U),je=kt(ie,c,U);r.current&&(S.current=J,O.current=B,C.current=fe,A.current=je);var te;w?U>0?te={transition:R,strokeDasharray:q}:te={strokeDasharray:pe}:te={strokeDasharray:q};var H=Ir(t),{radius:Ee}=H,Te=mO(H,k6);return y.createElement("path",If({},Te,{radius:typeof h=="number"?h:void 0,className:M,d:hO(fe,je,J,B,h),ref:r,style:fO(fO({},te),t.style)}))})};function gO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gO(Object(r),!0).forEach(function(n){R6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R6(e,t,r){return(t=q6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q6(e){var t=L6(e,"string");return typeof t=="symbol"?t:t+""}function L6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uf=Math.PI/180,z6=e=>e*180/Math.PI,ar=(e,t,r,n)=>({x:e+Math.cos(-Uf*n)*r,y:t+Math.sin(-Uf*n)*r}),PD=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},I6=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return Math.sqrt((r-i)**2+(n-s)**2)},U6=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:s}=t,c=I6({x:r,y:n},{x:i,y:s});if(c<=0)return{radius:c,angle:0};var u=(r-i)/c,m=Math.acos(u);return n>s&&(m=2*Math.PI-m),{radius:c,angle:z6(m),angleInRadian:m}},B6=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:t-s*360,endAngle:r-s*360}},$6=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),s=Math.floor(n/360),c=Math.min(i,s);return e+c*360},H6=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:s}=U6({x:r,y:n},t),{innerRadius:c,outerRadius:u}=t;if(i<c||i>u||i===0)return null;var{startAngle:m,endAngle:h}=B6(t),g=s,p;if(m<=h){for(;g>h;)g-=360;for(;g<m;)g+=360;p=g>=m&&g<=h}else{for(;g>m;)g-=360;for(;g<h;)g+=360;p=g>=h&&g<=m}return p?vO(vO({},t),{},{radius:i,angle:$6(g,t)}):null};function MD(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:s}=e,c=ar(t,r,n,i),u=ar(t,r,n,s);return{points:[c,u],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}var yO,bO,_O,xO,wO,jO,SO;function tb(){return tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tb.apply(null,arguments)}function Oo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var F6=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Fd=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:s,isExternal:c,cornerRadius:u,cornerIsExternal:m}=e,h=u*(c?1:-1)+n,g=Math.asin(u/h)/Uf,p=m?i:i+s*g,_=ar(t,r,h,p),x=ar(t,r,n,p),w=m?i-s*g:i,j=ar(t,r,h*Math.cos(g*Uf),w);return{center:_,circleTangency:x,lineTangency:j,theta:g}},RD=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:c}=e,u=F6(s,c),m=s+u,h=ar(t,r,i,s),g=ar(t,r,i,m),p=Ft(yO||(yO=Oo(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,i,i,+(Math.abs(u)>180),+(s>m),g.x,g.y);if(n>0){var _=ar(t,r,n,s),x=ar(t,r,n,m);p+=Ft(bO||(bO=Oo(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,n,n,+(Math.abs(u)>180),+(s<=m),_.x,_.y)}else p+=Ft(_O||(_O=Oo(["L ",","," Z"])),t,r);return p},K6=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:h}=e,g=br(h-m),{circleTangency:p,lineTangency:_,theta:x}=Fd({cx:t,cy:r,radius:i,angle:m,sign:g,cornerRadius:s,cornerIsExternal:u}),{circleTangency:w,lineTangency:j,theta:S}=Fd({cx:t,cy:r,radius:i,angle:h,sign:-g,cornerRadius:s,cornerIsExternal:u}),O=u?Math.abs(m-h):Math.abs(m-h)-x-S;if(O<0)return c?Ft(xO||(xO=Oo(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),_.x,_.y,s,s,s*2,s,s,-s*2):RD({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:m,endAngle:h});var C=Ft(wO||(wO=Oo(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),_.x,_.y,s,s,+(g<0),p.x,p.y,i,i,+(O>180),+(g<0),w.x,w.y,s,s,+(g<0),j.x,j.y);if(n>0){var{circleTangency:A,lineTangency:k,theta:D}=Fd({cx:t,cy:r,radius:n,angle:m,sign:g,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:M,lineTangency:z,theta:K}=Fd({cx:t,cy:r,radius:n,angle:h,sign:-g,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),Q=u?Math.abs(m-h):Math.abs(m-h)-D-K;if(Q<0&&s===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+=Ft(jO||(jO=Oo(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),z.x,z.y,s,s,+(g<0),M.x,M.y,n,n,+(Q>180),+(g>0),A.x,A.y,s,s,+(g<0),k.x,k.y)}else C+=Ft(SO||(SO=Oo(["L",",","Z"])),t,r);return C},Y6={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},qD=e=>{var t=xr(e,Y6),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:g,className:p}=t;if(s<i||h===g)return null;var _=st("recharts-sector",p),x=s-i,w=Tr(c,x,0,!0),j;return w>0&&Math.abs(h-g)<360?j=K6({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(w,x/2),forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:g}):j=RD({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:h,endAngle:g}),y.createElement("path",tb({},Ir(t),{className:_,d:j}))};function G6(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(pk(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:c,angle:u}=t,m=ar(n,i,s,u),h=ar(n,i,c,u);return[{x:m.x,y:m.y},{x:h.x,y:h.y}]}return MD(t)}}var Lv={},zv={},Iv={},EO;function V6(){return EO||(EO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ok();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Iv)),Iv}var OO;function W6(){return OO||(OO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V6();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(zv)),zv}var CO;function X6(){return CO||(CO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ck(),r=W6();function n(i,s,c){c&&typeof c!="number"&&t.isIterateeCall(i,s,c)&&(s=c=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),c=c===void 0?i<s?1:-1:r.toFinite(c);const u=Math.max(Math.ceil((s-i)/(c||1)),0),m=new Array(u);for(let h=0;h<u;h++)m[h]=i,i+=c;return m}e.range=n})(Lv)),Lv}var Uv,AO;function Z6(){return AO||(AO=1,Uv=X6().range),Uv}var Q6=Z6();const LD=ri(Q6);function Fi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function J6(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function c0(e){let t,r,n;e.length!==2?(t=Fi,r=(u,m)=>Fi(e(u),m),n=(u,m)=>e(u)-m):(t=e===Fi||e===J6?e:eB,r=e,n=e);function i(u,m,h=0,g=u.length){if(h<g){if(t(m,m)!==0)return g;do{const p=h+g>>>1;r(u[p],m)<0?h=p+1:g=p}while(h<g)}return h}function s(u,m,h=0,g=u.length){if(h<g){if(t(m,m)!==0)return g;do{const p=h+g>>>1;r(u[p],m)<=0?h=p+1:g=p}while(h<g)}return h}function c(u,m,h=0,g=u.length){const p=i(u,m,h,g-1);return p>h&&n(u[p-1],m)>-n(u[p],m)?p-1:p}return{left:i,center:c,right:s}}function eB(){return 0}function zD(e){return e===null?NaN:+e}function*tB(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const rB=c0(Fi),Jc=rB.right;c0(zD).center;class NO extends Map{constructor(t,r=iB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(kO(this,t))}has(t){return super.has(kO(this,t))}set(t,r){return super.set(nB(this,t),r)}delete(t){return super.delete(aB(this,t))}}function kO({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function nB({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function aB({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function iB(e){return e!==null&&typeof e=="object"?e.valueOf():e}function oB(e=Fi){if(e===Fi)return ID;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ID(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const sB=Math.sqrt(50),lB=Math.sqrt(10),cB=Math.sqrt(2);function Bf(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),c=s>=sB?10:s>=lB?5:s>=cB?2:1;let u,m,h;return i<0?(h=Math.pow(10,-i)/c,u=Math.round(e*h),m=Math.round(t*h),u/h<e&&++u,m/h>t&&--m,h=-h):(h=Math.pow(10,i)*c,u=Math.round(e/h),m=Math.round(t/h),u*h<e&&++u,m*h>t&&--m),m<u&&.5<=r&&r<2?Bf(e,t,r*2):[u,m,h]}function rb(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,c]=n?Bf(t,e,r):Bf(e,t,r);if(!(s>=i))return[];const u=s-i+1,m=new Array(u);if(n)if(c<0)for(let h=0;h<u;++h)m[h]=(s-h)/-c;else for(let h=0;h<u;++h)m[h]=(s-h)*c;else if(c<0)for(let h=0;h<u;++h)m[h]=(i+h)/-c;else for(let h=0;h<u;++h)m[h]=(i+h)*c;return m}function nb(e,t,r){return t=+t,e=+e,r=+r,Bf(e,t,r)[2]}function ab(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?nb(t,e,r):nb(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function DO(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function TO(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function UD(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?ID:oB(i);n>r;){if(n-r>600){const m=n-r+1,h=t-r+1,g=Math.log(m),p=.5*Math.exp(2*g/3),_=.5*Math.sqrt(g*p*(m-p)/m)*(h-m/2<0?-1:1),x=Math.max(r,Math.floor(t-h*p/m+_)),w=Math.min(n,Math.floor(t+(m-h)*p/m+_));UD(e,t,x,w,i)}const s=e[t];let c=r,u=n;for(dc(e,r,t),i(e[n],s)>0&&dc(e,r,n);c<u;){for(dc(e,c,u),++c,--u;i(e[c],s)<0;)++c;for(;i(e[u],s)>0;)--u}i(e[r],s)===0?dc(e,r,u):(++u,dc(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function dc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function uB(e,t,r){if(e=Float64Array.from(tB(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return TO(e);if(t>=1)return DO(e);var n,i=(n-1)*t,s=Math.floor(i),c=DO(UD(e,s).subarray(0,s+1)),u=TO(e.subarray(s+1));return c+(u-c)*(i-s)}}function dB(e,t,r=zD){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),c=+r(e[s],s,e),u=+r(e[s+1],s+1,e);return c+(u-c)*(i-s)}}function fB(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function $n(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function oi(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ib=Symbol("implicit");function u0(){var e=new NO,t=[],r=[],n=ib;function i(s){let c=e.get(s);if(c===void 0){if(n!==ib)return n;e.set(s,c=t.push(s)-1)}return r[c%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new NO;for(const c of s)e.has(c)||e.set(c,t.push(c)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return u0(t,r).unknown(n)},$n.apply(i,arguments),i}function d0(){var e=u0().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,c,u=!1,m=0,h=0,g=.5;delete e.unknown;function p(){var _=t().length,x=i<n,w=x?i:n,j=x?n:i;s=(j-w)/Math.max(1,_-m+h*2),u&&(s=Math.floor(s)),w+=(j-w-s*(_-m))*g,c=s*(1-m),u&&(w=Math.round(w),c=Math.round(c));var S=fB(_).map(function(O){return w+s*O});return r(x?S.reverse():S)}return e.domain=function(_){return arguments.length?(t(_),p()):t()},e.range=function(_){return arguments.length?([n,i]=_,n=+n,i=+i,p()):[n,i]},e.rangeRound=function(_){return[n,i]=_,n=+n,i=+i,u=!0,p()},e.bandwidth=function(){return c},e.step=function(){return s},e.round=function(_){return arguments.length?(u=!!_,p()):u},e.padding=function(_){return arguments.length?(m=Math.min(1,h=+_),p()):m},e.paddingInner=function(_){return arguments.length?(m=Math.min(1,_),p()):m},e.paddingOuter=function(_){return arguments.length?(h=+_,p()):h},e.align=function(_){return arguments.length?(g=Math.max(0,Math.min(1,_)),p()):g},e.copy=function(){return d0(t(),[n,i]).round(u).paddingInner(m).paddingOuter(h).align(g)},$n.apply(p(),arguments)}function BD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return BD(t())},e}function mB(){return BD(d0.apply(null,arguments).paddingInner(1))}function f0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function $D(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function eu(){}var Tc=.7,$f=1/Tc,Bs="\\s*([+-]?\\d+)\\s*",Pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",va="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hB=/^#([0-9a-f]{3,8})$/,pB=new RegExp(`^rgb\\(${Bs},${Bs},${Bs}\\)$`),gB=new RegExp(`^rgb\\(${va},${va},${va}\\)$`),vB=new RegExp(`^rgba\\(${Bs},${Bs},${Bs},${Pc}\\)$`),yB=new RegExp(`^rgba\\(${va},${va},${va},${Pc}\\)$`),bB=new RegExp(`^hsl\\(${Pc},${va},${va}\\)$`),_B=new RegExp(`^hsla\\(${Pc},${va},${va},${Pc}\\)$`),PO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f0(eu,Mc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:MO,formatHex:MO,formatHex8:xB,formatHsl:wB,formatRgb:RO,toString:RO});function MO(){return this.rgb().formatHex()}function xB(){return this.rgb().formatHex8()}function wB(){return HD(this).formatHsl()}function RO(){return this.rgb().formatRgb()}function Mc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=hB.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?qO(t):r===3?new Qr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Kd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Kd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pB.exec(e))?new Qr(t[1],t[2],t[3],1):(t=gB.exec(e))?new Qr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=vB.exec(e))?Kd(t[1],t[2],t[3],t[4]):(t=yB.exec(e))?Kd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=bB.exec(e))?IO(t[1],t[2]/100,t[3]/100,1):(t=_B.exec(e))?IO(t[1],t[2]/100,t[3]/100,t[4]):PO.hasOwnProperty(e)?qO(PO[e]):e==="transparent"?new Qr(NaN,NaN,NaN,0):null}function qO(e){return new Qr(e>>16&255,e>>8&255,e&255,1)}function Kd(e,t,r,n){return n<=0&&(e=t=r=NaN),new Qr(e,t,r,n)}function jB(e){return e instanceof eu||(e=Mc(e)),e?(e=e.rgb(),new Qr(e.r,e.g,e.b,e.opacity)):new Qr}function ob(e,t,r,n){return arguments.length===1?jB(e):new Qr(e,t,r,n??1)}function Qr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}f0(Qr,ob,$D(eu,{brighter(e){return e=e==null?$f:Math.pow($f,e),new Qr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Tc:Math.pow(Tc,e),new Qr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qr(Do(this.r),Do(this.g),Do(this.b),Hf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:LO,formatHex:LO,formatHex8:SB,formatRgb:zO,toString:zO}));function LO(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}`}function SB(){return`#${Co(this.r)}${Co(this.g)}${Co(this.b)}${Co((isNaN(this.opacity)?1:this.opacity)*255)}`}function zO(){const e=Hf(this.opacity);return`${e===1?"rgb(":"rgba("}${Do(this.r)}, ${Do(this.g)}, ${Do(this.b)}${e===1?")":`, ${e})`}`}function Hf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Do(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Co(e){return e=Do(e),(e<16?"0":"")+e.toString(16)}function IO(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Jn(e,t,r,n)}function HD(e){if(e instanceof Jn)return new Jn(e.h,e.s,e.l,e.opacity);if(e instanceof eu||(e=Mc(e)),!e)return new Jn;if(e instanceof Jn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),c=NaN,u=s-i,m=(s+i)/2;return u?(t===s?c=(r-n)/u+(r<n)*6:r===s?c=(n-t)/u+2:c=(t-r)/u+4,u/=m<.5?s+i:2-s-i,c*=60):u=m>0&&m<1?0:c,new Jn(c,u,m,e.opacity)}function EB(e,t,r,n){return arguments.length===1?HD(e):new Jn(e,t,r,n??1)}function Jn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}f0(Jn,EB,$D(eu,{brighter(e){return e=e==null?$f:Math.pow($f,e),new Jn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Tc:Math.pow(Tc,e),new Jn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Qr(Bv(e>=240?e-240:e+120,i,n),Bv(e,i,n),Bv(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Jn(UO(this.h),Yd(this.s),Yd(this.l),Hf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Hf(this.opacity);return`${e===1?"hsl(":"hsla("}${UO(this.h)}, ${Yd(this.s)*100}%, ${Yd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function UO(e){return e=(e||0)%360,e<0?e+360:e}function Yd(e){return Math.max(0,Math.min(1,e||0))}function Bv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const m0=e=>()=>e;function OB(e,t){return function(r){return e+r*t}}function CB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function AB(e){return(e=+e)==1?FD:function(t,r){return r-t?CB(t,r,e):m0(isNaN(t)?r:t)}}function FD(e,t){var r=t-e;return r?OB(e,r):m0(isNaN(e)?t:e)}const BO=(function e(t){var r=AB(t);function n(i,s){var c=r((i=ob(i)).r,(s=ob(s)).r),u=r(i.g,s.g),m=r(i.b,s.b),h=FD(i.opacity,s.opacity);return function(g){return i.r=c(g),i.g=u(g),i.b=m(g),i.opacity=h(g),i+""}}return n.gamma=e,n})(1);function NB(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function kB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function DB(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),c;for(c=0;c<n;++c)i[c]=el(e[c],t[c]);for(;c<r;++c)s[c]=t[c];return function(u){for(c=0;c<n;++c)s[c]=i[c](u);return s}}function TB(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ff(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function PB(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=el(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var sb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$v=new RegExp(sb.source,"g");function MB(e){return function(){return e}}function RB(e){return function(t){return e(t)+""}}function qB(e,t){var r=sb.lastIndex=$v.lastIndex=0,n,i,s,c=-1,u=[],m=[];for(e=e+"",t=t+"";(n=sb.exec(e))&&(i=$v.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,m.push({i:c,x:Ff(n,i)})),r=$v.lastIndex;return r<t.length&&(s=t.slice(r),u[c]?u[c]+=s:u[++c]=s),u.length<2?m[0]?RB(m[0].x):MB(t):(t=m.length,function(h){for(var g=0,p;g<t;++g)u[(p=m[g]).i]=p.x(h);return u.join("")})}function el(e,t){var r=typeof t,n;return t==null||r==="boolean"?m0(t):(r==="number"?Ff:r==="string"?(n=Mc(t))?(t=n,BO):qB:t instanceof Mc?BO:t instanceof Date?TB:kB(t)?NB:Array.isArray(t)?DB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?PB:Ff)(e,t)}function h0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function LB(e,t){t===void 0&&(t=e,e=el);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(c){var u=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return s[u](c-u)}}function zB(e){return function(){return e}}function Kf(e){return+e}var $O=[0,1];function zr(e){return e}function lb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:zB(isNaN(t)?NaN:.5)}function IB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function UB(e,t,r){var n=e[0],i=e[1],s=t[0],c=t[1];return i<n?(n=lb(i,n),s=r(c,s)):(n=lb(n,i),s=r(s,c)),function(u){return s(n(u))}}function BB(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)i[c]=lb(e[c],e[c+1]),s[c]=r(t[c],t[c+1]);return function(u){var m=Jc(e,u,1,n)-1;return s[m](i[m](u))}}function tu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Um(){var e=$O,t=$O,r=el,n,i,s,c=zr,u,m,h;function g(){var _=Math.min(e.length,t.length);return c!==zr&&(c=IB(e[0],e[_-1])),u=_>2?BB:UB,m=h=null,p}function p(_){return _==null||isNaN(_=+_)?s:(m||(m=u(e.map(n),t,r)))(n(c(_)))}return p.invert=function(_){return c(i((h||(h=u(t,e.map(n),Ff)))(_)))},p.domain=function(_){return arguments.length?(e=Array.from(_,Kf),g()):e.slice()},p.range=function(_){return arguments.length?(t=Array.from(_),g()):t.slice()},p.rangeRound=function(_){return t=Array.from(_),r=h0,g()},p.clamp=function(_){return arguments.length?(c=_?!0:zr,g()):c!==zr},p.interpolate=function(_){return arguments.length?(r=_,g()):r},p.unknown=function(_){return arguments.length?(s=_,p):s},function(_,x){return n=_,i=x,g()}}function p0(){return Um()(zr,zr)}function $B(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Yf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ys(e){return e=Yf(Math.abs(e)),e?e[1]:NaN}function HB(e,t){return function(r,n){for(var i=r.length,s=[],c=0,u=e[0],m=0;i>0&&u>0&&(m+u+1>n&&(u=Math.max(1,n-m)),s.push(r.substring(i-=u,i+u)),!((m+=u+1)>n));)u=e[c=(c+1)%e.length];return s.reverse().join(t)}}function FB(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var KB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Rc(e){if(!(t=KB.exec(e)))throw new Error("invalid format: "+e);var t;return new g0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Rc.prototype=g0.prototype;function g0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}g0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function YB(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var KD;function GB(e,t){var r=Yf(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(KD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=n.length;return s===c?n:s>c?n+new Array(s-c+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Yf(e,Math.max(0,t+s-1))[0]}function HO(e,t){var r=Yf(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const FO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$B,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>HO(e*100,t),r:HO,s:GB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function KO(e){return e}var YO=Array.prototype.map,GO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function VB(e){var t=e.grouping===void 0||e.thousands===void 0?KO:HB(YO.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?KO:FB(YO.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function h(p){p=Rc(p);var _=p.fill,x=p.align,w=p.sign,j=p.symbol,S=p.zero,O=p.width,C=p.comma,A=p.precision,k=p.trim,D=p.type;D==="n"?(C=!0,D="g"):FO[D]||(A===void 0&&(A=12),k=!0,D="g"),(S||_==="0"&&x==="=")&&(S=!0,_="0",x="=");var M=j==="$"?r:j==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",z=j==="$"?n:/[%p]/.test(D)?c:"",K=FO[D],Q=/[defgprs%]/.test(D);A=A===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function ne(G){var I=M,ie=z,pe,q,R;if(D==="c")ie=K(G)+ie,G="";else{G=+G;var U=G<0||1/G<0;if(G=isNaN(G)?m:K(Math.abs(G),A),k&&(G=YB(G)),U&&+G==0&&w!=="+"&&(U=!1),I=(U?w==="("?w:u:w==="-"||w==="("?"":w)+I,ie=(D==="s"?GO[8+KD/3]:"")+ie+(U&&w==="("?")":""),Q){for(pe=-1,q=G.length;++pe<q;)if(R=G.charCodeAt(pe),48>R||R>57){ie=(R===46?i+G.slice(pe+1):G.slice(pe))+ie,G=G.slice(0,pe);break}}}C&&!S&&(G=t(G,1/0));var J=I.length+G.length+ie.length,B=J<O?new Array(O-J+1).join(_):"";switch(C&&S&&(G=t(B+G,B.length?O-ie.length:1/0),B=""),x){case"<":G=I+G+ie+B;break;case"=":G=I+B+G+ie;break;case"^":G=B.slice(0,J=B.length>>1)+I+G+ie+B.slice(J);break;default:G=B+I+G+ie;break}return s(G)}return ne.toString=function(){return p+""},ne}function g(p,_){var x=h((p=Rc(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(Ys(_)/3)))*3,j=Math.pow(10,-w),S=GO[8+w/3];return function(O){return x(j*O)+S}}return{format:h,formatPrefix:g}}var Gd,v0,YD;WB({thousands:",",grouping:[3],currency:["$",""]});function WB(e){return Gd=VB(e),v0=Gd.format,YD=Gd.formatPrefix,Gd}function XB(e){return Math.max(0,-Ys(Math.abs(e)))}function ZB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ys(t)/3)))*3-Ys(Math.abs(e)))}function QB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ys(t)-Ys(e))+1}function GD(e,t,r,n){var i=ab(e,t,r),s;switch(n=Rc(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=ZB(i,c))&&(n.precision=s),YD(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=QB(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=XB(i))&&(n.precision=s-(n.type==="%")*2);break}}return v0(n)}function Qi(e){var t=e.domain;return e.ticks=function(r){var n=t();return rb(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return GD(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,c=n[i],u=n[s],m,h,g=10;for(u<c&&(h=c,c=u,u=h,h=i,i=s,s=h);g-- >0;){if(h=nb(c,u,r),h===m)return n[i]=c,n[s]=u,t(n);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;m=h}return e},e}function VD(){var e=p0();return e.copy=function(){return tu(e,VD())},$n.apply(e,arguments),Qi(e)}function WD(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Kf),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return WD(e).unknown(t)},e=arguments.length?Array.from(e,Kf):[0,1],Qi(r)}function XD(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],c;return s<i&&(c=r,r=n,n=c,c=i,i=s,s=c),e[r]=t.floor(i),e[n]=t.ceil(s),e}function VO(e){return Math.log(e)}function WO(e){return Math.exp(e)}function JB(e){return-Math.log(-e)}function e$(e){return-Math.exp(-e)}function t$(e){return isFinite(e)?+("1e"+e):e<0?0:e}function r$(e){return e===10?t$:e===Math.E?Math.exp:t=>Math.pow(e,t)}function n$(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function XO(e){return(t,r)=>-e(-t,r)}function y0(e){const t=e(VO,WO),r=t.domain;let n=10,i,s;function c(){return i=n$(n),s=r$(n),r()[0]<0?(i=XO(i),s=XO(s),e(JB,e$)):e(VO,WO),t}return t.base=function(u){return arguments.length?(n=+u,c()):n},t.domain=function(u){return arguments.length?(r(u),c()):r()},t.ticks=u=>{const m=r();let h=m[0],g=m[m.length-1];const p=g<h;p&&([h,g]=[g,h]);let _=i(h),x=i(g),w,j;const S=u==null?10:+u;let O=[];if(!(n%1)&&x-_<S){if(_=Math.floor(_),x=Math.ceil(x),h>0){for(;_<=x;++_)for(w=1;w<n;++w)if(j=_<0?w/s(-_):w*s(_),!(j<h)){if(j>g)break;O.push(j)}}else for(;_<=x;++_)for(w=n-1;w>=1;--w)if(j=_>0?w/s(-_):w*s(_),!(j<h)){if(j>g)break;O.push(j)}O.length*2<S&&(O=rb(h,g,S))}else O=rb(_,x,Math.min(x-_,S)).map(s);return p?O.reverse():O},t.tickFormat=(u,m)=>{if(u==null&&(u=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Rc(m)).precision==null&&(m.trim=!0),m=v0(m)),u===1/0)return m;const h=Math.max(1,n*u/t.ticks().length);return g=>{let p=g/s(Math.round(i(g)));return p*n<n-.5&&(p*=n),p<=h?m(g):""}},t.nice=()=>r(XD(r(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function ZD(){const e=y0(Um()).domain([1,10]);return e.copy=()=>tu(e,ZD()).base(e.base()),$n.apply(e,arguments),e}function ZO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function QO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function b0(e){var t=1,r=e(ZO(t),QO(t));return r.constant=function(n){return arguments.length?e(ZO(t=+n),QO(t)):t},Qi(r)}function QD(){var e=b0(Um());return e.copy=function(){return tu(e,QD()).constant(e.constant())},$n.apply(e,arguments)}function JO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function a$(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function i$(e){return e<0?-e*e:e*e}function _0(e){var t=e(zr,zr),r=1;function n(){return r===1?e(zr,zr):r===.5?e(a$,i$):e(JO(r),JO(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Qi(t)}function x0(){var e=_0(Um());return e.copy=function(){return tu(e,x0()).exponent(e.exponent())},$n.apply(e,arguments),e}function o$(){return x0.apply(null,arguments).exponent(.5)}function eC(e){return Math.sign(e)*e*e}function s$(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function JD(){var e=p0(),t=[0,1],r=!1,n;function i(s){var c=s$(e(s));return isNaN(c)?n:r?Math.round(c):c}return i.invert=function(s){return e.invert(eC(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Kf)).map(eC)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return JD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},$n.apply(i,arguments),Qi(i)}function eT(){var e=[],t=[],r=[],n;function i(){var c=0,u=Math.max(1,t.length);for(r=new Array(u-1);++c<u;)r[c-1]=dB(e,c/u);return s}function s(c){return c==null||isNaN(c=+c)?n:t[Jc(r,c)]}return s.invertExtent=function(c){var u=t.indexOf(c);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},s.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let u of c)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Fi),i()},s.range=function(c){return arguments.length?(t=Array.from(c),i()):t.slice()},s.unknown=function(c){return arguments.length?(n=c,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return eT().domain(e).range(t).unknown(n)},$n.apply(s,arguments)}function tT(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function c(m){return m!=null&&m<=m?i[Jc(n,m,0,r)]:s}function u(){var m=-1;for(n=new Array(r);++m<r;)n[m]=((m+1)*t-(m-r)*e)/(r+1);return c}return c.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,u()):[e,t]},c.range=function(m){return arguments.length?(r=(i=Array.from(m)).length-1,u()):i.slice()},c.invertExtent=function(m){var h=i.indexOf(m);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},c.unknown=function(m){return arguments.length&&(s=m),c},c.thresholds=function(){return n.slice()},c.copy=function(){return tT().domain([e,t]).range(i).unknown(s)},$n.apply(Qi(c),arguments)}function rT(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[Jc(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var c=t.indexOf(s);return[e[c-1],e[c]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return rT().domain(e).range(t).unknown(r)},$n.apply(i,arguments)}const Hv=new Date,Fv=new Date;function fr(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const c=i(s),u=i.ceil(s);return s-c<u-s?c:u},i.offset=(s,c)=>(t(s=new Date(+s),c==null?1:Math.floor(c)),s),i.range=(s,c,u)=>{const m=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<c)||!(u>0))return m;let h;do m.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<c);return m},i.filter=s=>fr(c=>{if(c>=c)for(;e(c),!s(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;t(c,-1),!s(c););else for(;--u>=0;)for(;t(c,1),!s(c););}),r&&(i.count=(s,c)=>(Hv.setTime(+s),Fv.setTime(+c),e(Hv),e(Fv),Math.floor(r(Hv,Fv))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?c=>n(c)%s===0:c=>i.count(0,c)%s===0):i)),i}const Gf=fr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Gf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Gf);Gf.range;const Fa=1e3,zn=Fa*60,Ka=zn*60,Za=Ka*24,w0=Za*7,tC=Za*30,Kv=Za*365,Ao=fr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Fa)},(e,t)=>(t-e)/Fa,e=>e.getUTCSeconds());Ao.range;const j0=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fa)},(e,t)=>{e.setTime(+e+t*zn)},(e,t)=>(t-e)/zn,e=>e.getMinutes());j0.range;const S0=fr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*zn)},(e,t)=>(t-e)/zn,e=>e.getUTCMinutes());S0.range;const E0=fr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fa-e.getMinutes()*zn)},(e,t)=>{e.setTime(+e+t*Ka)},(e,t)=>(t-e)/Ka,e=>e.getHours());E0.range;const O0=fr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ka)},(e,t)=>(t-e)/Ka,e=>e.getUTCHours());O0.range;const ru=fr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*zn)/Za,e=>e.getDate()-1);ru.range;const Bm=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Za,e=>e.getUTCDate()-1);Bm.range;const nT=fr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Za,e=>Math.floor(e/Za));nT.range;function Go(e){return fr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*zn)/w0)}const $m=Go(0),Vf=Go(1),l$=Go(2),c$=Go(3),Gs=Go(4),u$=Go(5),d$=Go(6);$m.range;Vf.range;l$.range;c$.range;Gs.range;u$.range;d$.range;function Vo(e){return fr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/w0)}const Hm=Vo(0),Wf=Vo(1),f$=Vo(2),m$=Vo(3),Vs=Vo(4),h$=Vo(5),p$=Vo(6);Hm.range;Wf.range;f$.range;m$.range;Vs.range;h$.range;p$.range;const C0=fr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());C0.range;const A0=fr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());A0.range;const Qa=fr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Qa.range;const Ja=fr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ja.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ja.range;function aT(e,t,r,n,i,s){const c=[[Ao,1,Fa],[Ao,5,5*Fa],[Ao,15,15*Fa],[Ao,30,30*Fa],[s,1,zn],[s,5,5*zn],[s,15,15*zn],[s,30,30*zn],[i,1,Ka],[i,3,3*Ka],[i,6,6*Ka],[i,12,12*Ka],[n,1,Za],[n,2,2*Za],[r,1,w0],[t,1,tC],[t,3,3*tC],[e,1,Kv]];function u(h,g,p){const _=g<h;_&&([h,g]=[g,h]);const x=p&&typeof p.range=="function"?p:m(h,g,p),w=x?x.range(h,+g+1):[];return _?w.reverse():w}function m(h,g,p){const _=Math.abs(g-h)/p,x=c0(([,,S])=>S).right(c,_);if(x===c.length)return e.every(ab(h/Kv,g/Kv,p));if(x===0)return Gf.every(Math.max(ab(h,g,p),1));const[w,j]=c[_/c[x-1][2]<c[x][2]/_?x-1:x];return w.every(j)}return[u,m]}const[g$,v$]=aT(Ja,A0,Hm,nT,O0,S0),[y$,b$]=aT(Qa,C0,$m,ru,E0,j0);function Yv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Gv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function _$(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,c=e.shortDays,u=e.months,m=e.shortMonths,h=mc(i),g=hc(i),p=mc(s),_=hc(s),x=mc(c),w=hc(c),j=mc(u),S=hc(u),O=mc(m),C=hc(m),A={a:U,A:J,b:B,B:fe,c:null,d:sC,e:sC,f:H$,g:J$,G:t8,H:U$,I:B$,j:$$,L:iT,m:F$,M:K$,p:je,q:te,Q:uC,s:dC,S:Y$,u:G$,U:V$,V:W$,w:X$,W:Z$,x:null,X:null,y:Q$,Y:e8,Z:r8,"%":cC},k={a:H,A:Ee,b:Te,B:Ie,c:null,d:lC,e:lC,f:o8,g:g8,G:y8,H:n8,I:a8,j:i8,L:sT,m:s8,M:l8,p:ge,q:Le,Q:uC,s:dC,S:c8,u:u8,U:d8,V:f8,w:m8,W:h8,x:null,X:null,y:p8,Y:v8,Z:b8,"%":cC},D={a:ne,A:G,b:I,B:ie,c:pe,d:iC,e:iC,f:q$,g:aC,G:nC,H:oC,I:oC,j:T$,L:R$,m:D$,M:P$,p:Q,q:k$,Q:z$,s:I$,S:M$,u:E$,U:O$,V:C$,w:S$,W:A$,x:q,X:R,y:aC,Y:nC,Z:N$,"%":L$};A.x=M(r,A),A.X=M(n,A),A.c=M(t,A),k.x=M(r,k),k.X=M(n,k),k.c=M(t,k);function M(ee,we){return function(xe){var oe=[],He=-1,ve=0,Ne=ee.length,Me,jt,Re;for(xe instanceof Date||(xe=new Date(+xe));++He<Ne;)ee.charCodeAt(He)===37&&(oe.push(ee.slice(ve,He)),(jt=rC[Me=ee.charAt(++He)])!=null?Me=ee.charAt(++He):jt=Me==="e"?" ":"0",(Re=we[Me])&&(Me=Re(xe,jt)),oe.push(Me),ve=He+1);return oe.push(ee.slice(ve,He)),oe.join("")}}function z(ee,we){return function(xe){var oe=fc(1900,void 0,1),He=K(oe,ee,xe+="",0),ve,Ne;if(He!=xe.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(we&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(ve=Gv(fc(oe.y,0,1)),Ne=ve.getUTCDay(),ve=Ne>4||Ne===0?Wf.ceil(ve):Wf(ve),ve=Bm.offset(ve,(oe.V-1)*7),oe.y=ve.getUTCFullYear(),oe.m=ve.getUTCMonth(),oe.d=ve.getUTCDate()+(oe.w+6)%7):(ve=Yv(fc(oe.y,0,1)),Ne=ve.getDay(),ve=Ne>4||Ne===0?Vf.ceil(ve):Vf(ve),ve=ru.offset(ve,(oe.V-1)*7),oe.y=ve.getFullYear(),oe.m=ve.getMonth(),oe.d=ve.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),Ne="Z"in oe?Gv(fc(oe.y,0,1)).getUTCDay():Yv(fc(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(Ne+5)%7:oe.w+oe.U*7-(Ne+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,Gv(oe)):Yv(oe)}}function K(ee,we,xe,oe){for(var He=0,ve=we.length,Ne=xe.length,Me,jt;He<ve;){if(oe>=Ne)return-1;if(Me=we.charCodeAt(He++),Me===37){if(Me=we.charAt(He++),jt=D[Me in rC?we.charAt(He++):Me],!jt||(oe=jt(ee,xe,oe))<0)return-1}else if(Me!=xe.charCodeAt(oe++))return-1}return oe}function Q(ee,we,xe){var oe=h.exec(we.slice(xe));return oe?(ee.p=g.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function ne(ee,we,xe){var oe=x.exec(we.slice(xe));return oe?(ee.w=w.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function G(ee,we,xe){var oe=p.exec(we.slice(xe));return oe?(ee.w=_.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function I(ee,we,xe){var oe=O.exec(we.slice(xe));return oe?(ee.m=C.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function ie(ee,we,xe){var oe=j.exec(we.slice(xe));return oe?(ee.m=S.get(oe[0].toLowerCase()),xe+oe[0].length):-1}function pe(ee,we,xe){return K(ee,t,we,xe)}function q(ee,we,xe){return K(ee,r,we,xe)}function R(ee,we,xe){return K(ee,n,we,xe)}function U(ee){return c[ee.getDay()]}function J(ee){return s[ee.getDay()]}function B(ee){return m[ee.getMonth()]}function fe(ee){return u[ee.getMonth()]}function je(ee){return i[+(ee.getHours()>=12)]}function te(ee){return 1+~~(ee.getMonth()/3)}function H(ee){return c[ee.getUTCDay()]}function Ee(ee){return s[ee.getUTCDay()]}function Te(ee){return m[ee.getUTCMonth()]}function Ie(ee){return u[ee.getUTCMonth()]}function ge(ee){return i[+(ee.getUTCHours()>=12)]}function Le(ee){return 1+~~(ee.getUTCMonth()/3)}return{format:function(ee){var we=M(ee+="",A);return we.toString=function(){return ee},we},parse:function(ee){var we=z(ee+="",!1);return we.toString=function(){return ee},we},utcFormat:function(ee){var we=M(ee+="",k);return we.toString=function(){return ee},we},utcParse:function(ee){var we=z(ee+="",!0);return we.toString=function(){return ee},we}}}var rC={"-":"",_:" ",0:"0"},wr=/^\s*\d+/,x$=/^%/,w$=/[\\^$*+?|[\]().{}]/g;function at(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function j$(e){return e.replace(w$,"\\$&")}function mc(e){return new RegExp("^(?:"+e.map(j$).join("|")+")","i")}function hc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function S$(e,t,r){var n=wr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function E$(e,t,r){var n=wr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function O$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function C$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function A$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function nC(e,t,r){var n=wr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function aC(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function N$(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function k$(e,t,r){var n=wr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function D$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function iC(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function T$(e,t,r){var n=wr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function oC(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function P$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function M$(e,t,r){var n=wr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function R$(e,t,r){var n=wr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function q$(e,t,r){var n=wr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function L$(e,t,r){var n=x$.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function z$(e,t,r){var n=wr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function I$(e,t,r){var n=wr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function sC(e,t){return at(e.getDate(),t,2)}function U$(e,t){return at(e.getHours(),t,2)}function B$(e,t){return at(e.getHours()%12||12,t,2)}function $$(e,t){return at(1+ru.count(Qa(e),e),t,3)}function iT(e,t){return at(e.getMilliseconds(),t,3)}function H$(e,t){return iT(e,t)+"000"}function F$(e,t){return at(e.getMonth()+1,t,2)}function K$(e,t){return at(e.getMinutes(),t,2)}function Y$(e,t){return at(e.getSeconds(),t,2)}function G$(e){var t=e.getDay();return t===0?7:t}function V$(e,t){return at($m.count(Qa(e)-1,e),t,2)}function oT(e){var t=e.getDay();return t>=4||t===0?Gs(e):Gs.ceil(e)}function W$(e,t){return e=oT(e),at(Gs.count(Qa(e),e)+(Qa(e).getDay()===4),t,2)}function X$(e){return e.getDay()}function Z$(e,t){return at(Vf.count(Qa(e)-1,e),t,2)}function Q$(e,t){return at(e.getFullYear()%100,t,2)}function J$(e,t){return e=oT(e),at(e.getFullYear()%100,t,2)}function e8(e,t){return at(e.getFullYear()%1e4,t,4)}function t8(e,t){var r=e.getDay();return e=r>=4||r===0?Gs(e):Gs.ceil(e),at(e.getFullYear()%1e4,t,4)}function r8(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function lC(e,t){return at(e.getUTCDate(),t,2)}function n8(e,t){return at(e.getUTCHours(),t,2)}function a8(e,t){return at(e.getUTCHours()%12||12,t,2)}function i8(e,t){return at(1+Bm.count(Ja(e),e),t,3)}function sT(e,t){return at(e.getUTCMilliseconds(),t,3)}function o8(e,t){return sT(e,t)+"000"}function s8(e,t){return at(e.getUTCMonth()+1,t,2)}function l8(e,t){return at(e.getUTCMinutes(),t,2)}function c8(e,t){return at(e.getUTCSeconds(),t,2)}function u8(e){var t=e.getUTCDay();return t===0?7:t}function d8(e,t){return at(Hm.count(Ja(e)-1,e),t,2)}function lT(e){var t=e.getUTCDay();return t>=4||t===0?Vs(e):Vs.ceil(e)}function f8(e,t){return e=lT(e),at(Vs.count(Ja(e),e)+(Ja(e).getUTCDay()===4),t,2)}function m8(e){return e.getUTCDay()}function h8(e,t){return at(Wf.count(Ja(e)-1,e),t,2)}function p8(e,t){return at(e.getUTCFullYear()%100,t,2)}function g8(e,t){return e=lT(e),at(e.getUTCFullYear()%100,t,2)}function v8(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function y8(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Vs(e):Vs.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function b8(){return"+0000"}function cC(){return"%"}function uC(e){return+e}function dC(e){return Math.floor(+e/1e3)}var Ms,cT,uT;_8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _8(e){return Ms=_$(e),cT=Ms.format,Ms.parse,uT=Ms.utcFormat,Ms.utcParse,Ms}function x8(e){return new Date(e)}function w8(e){return e instanceof Date?+e:+new Date(+e)}function N0(e,t,r,n,i,s,c,u,m,h){var g=p0(),p=g.invert,_=g.domain,x=h(".%L"),w=h(":%S"),j=h("%I:%M"),S=h("%I %p"),O=h("%a %d"),C=h("%b %d"),A=h("%B"),k=h("%Y");function D(M){return(m(M)<M?x:u(M)<M?w:c(M)<M?j:s(M)<M?S:n(M)<M?i(M)<M?O:C:r(M)<M?A:k)(M)}return g.invert=function(M){return new Date(p(M))},g.domain=function(M){return arguments.length?_(Array.from(M,w8)):_().map(x8)},g.ticks=function(M){var z=_();return e(z[0],z[z.length-1],M??10)},g.tickFormat=function(M,z){return z==null?D:h(z)},g.nice=function(M){var z=_();return(!M||typeof M.range!="function")&&(M=t(z[0],z[z.length-1],M??10)),M?_(XD(z,M)):g},g.copy=function(){return tu(g,N0(e,t,r,n,i,s,c,u,m,h))},g}function j8(){return $n.apply(N0(y$,b$,Qa,C0,$m,ru,E0,j0,Ao,cT).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function S8(){return $n.apply(N0(g$,v$,Ja,A0,Hm,Bm,O0,S0,Ao,uT).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fm(){var e=0,t=1,r,n,i,s,c=zr,u=!1,m;function h(p){return p==null||isNaN(p=+p)?m:c(i===0?.5:(p=(s(p)-r)*i,u?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t]=p,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(p){return arguments.length?(u=!!p,h):u},h.interpolator=function(p){return arguments.length?(c=p,h):c};function g(p){return function(_){var x,w;return arguments.length?([x,w]=_,c=p(x,w),h):[c(0),c(1)]}}return h.range=g(el),h.rangeRound=g(h0),h.unknown=function(p){return arguments.length?(m=p,h):m},function(p){return s=p,r=p(e),n=p(t),i=r===n?0:1/(n-r),h}}function Ji(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function dT(){var e=Qi(Fm()(zr));return e.copy=function(){return Ji(e,dT())},oi.apply(e,arguments)}function fT(){var e=y0(Fm()).domain([1,10]);return e.copy=function(){return Ji(e,fT()).base(e.base())},oi.apply(e,arguments)}function mT(){var e=b0(Fm());return e.copy=function(){return Ji(e,mT()).constant(e.constant())},oi.apply(e,arguments)}function k0(){var e=_0(Fm());return e.copy=function(){return Ji(e,k0()).exponent(e.exponent())},oi.apply(e,arguments)}function E8(){return k0.apply(null,arguments).exponent(.5)}function hT(){var e=[],t=zr;function r(n){if(n!=null&&!isNaN(n=+n))return t((Jc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Fi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>uB(e,s/n))},r.copy=function(){return hT(t).domain(e)},oi.apply(r,arguments)}function Km(){var e=0,t=.5,r=1,n=1,i,s,c,u,m,h=zr,g,p=!1,_;function x(j){return isNaN(j=+j)?_:(j=.5+((j=+g(j))-s)*(n*j<n*s?u:m),h(p?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,i=g(e=+e),s=g(t=+t),c=g(r=+r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(p=!!j,x):p},x.interpolator=function(j){return arguments.length?(h=j,x):h};function w(j){return function(S){var O,C,A;return arguments.length?([O,C,A]=S,h=LB(j,[O,C,A]),x):[h(0),h(.5),h(1)]}}return x.range=w(el),x.rangeRound=w(h0),x.unknown=function(j){return arguments.length?(_=j,x):_},function(j){return g=j,i=j(e),s=j(t),c=j(r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x}}function pT(){var e=Qi(Km()(zr));return e.copy=function(){return Ji(e,pT())},oi.apply(e,arguments)}function gT(){var e=y0(Km()).domain([.1,1,10]);return e.copy=function(){return Ji(e,gT()).base(e.base())},oi.apply(e,arguments)}function vT(){var e=b0(Km());return e.copy=function(){return Ji(e,vT()).constant(e.constant())},oi.apply(e,arguments)}function D0(){var e=_0(Km());return e.copy=function(){return Ji(e,D0()).exponent(e.exponent())},oi.apply(e,arguments)}function O8(){return D0.apply(null,arguments).exponent(.5)}const bc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:d0,scaleDiverging:pT,scaleDivergingLog:gT,scaleDivergingPow:D0,scaleDivergingSqrt:O8,scaleDivergingSymlog:vT,scaleIdentity:WD,scaleImplicit:ib,scaleLinear:VD,scaleLog:ZD,scaleOrdinal:u0,scalePoint:mB,scalePow:x0,scaleQuantile:eT,scaleQuantize:tT,scaleRadial:JD,scaleSequential:dT,scaleSequentialLog:fT,scaleSequentialPow:k0,scaleSequentialQuantile:hT,scaleSequentialSqrt:E8,scaleSequentialSymlog:mT,scaleSqrt:o$,scaleSymlog:QD,scaleThreshold:rT,scaleTime:j8,scaleUtc:S8,tickFormat:GD},Symbol.toStringTag,{value:"Module"}));var si=e=>e.chartData,Ym=X([si],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),T0=(e,t,r,n)=>n?Ym(e):si(e),C8=(e,t,r)=>r?Ym(e):si(e);function Yi(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Lt(t)&&Lt(r))return!0}return!1}function fC(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function yT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,s;if(Lt(r))i=r;else if(typeof r=="function")return;if(Lt(n))s=n;else if(typeof n=="function")return;var c=[i,s];if(Yi(c))return c}}function A8(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Yi(n))return fC(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,c,u;if(i==="auto")t!=null&&(c=Math.min(...t));else if(ke(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[0]))}catch{}else if(typeof i=="string"&&EE.test(i)){var m=EE.exec(i);if(m==null||m[1]==null||t==null)c=void 0;else{var h=+m[1];c=t[0]-h}}else c=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(ke(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&OE.test(s)){var g=OE.exec(s);if(g==null||g[1]==null||t==null)u=void 0;else{var p=+g[1];u=t[1]+p}}else u=t?.[1];var _=[c,u];if(Yi(_))return t==null?_:fC(_,t,r)}}}var tl=1e9,N8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},M0,Dt=!0,Bn="[DecimalError] ",To=Bn+"Invalid argument: ",P0=Bn+"Exponent out of range: ",rl=Math.floor,So=Math.pow,k8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pn,yr=1e7,Ot=7,bT=9007199254740991,Xf=rl(bT/Ot),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ot;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(e){return Ya(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,r=t.constructor;return _t(Ya(t,new r(e),0,1),r.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return or(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(pn))throw Error(Bn+"NaN");if(r.s<1)throw Error(Bn+(r.s?"NaN":"-Infinity"));return r.eq(pn)?new n(0):(Dt=!1,t=Ya(qc(r,s),qc(e,s),s),Dt=!0,_t(t,i))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?wT(t,e):_T(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Bn+"NaN");return r.s?(Dt=!1,t=Ya(r,e,0,1).times(e),Dt=!0,r.minus(t)):_t(new n(r),i)};Ce.naturalExponential=Ce.exp=function(){return xT(this)};Ce.naturalLogarithm=Ce.ln=function(){return qc(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_T(t,e):wT(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(To+e);if(t=or(i)+1,n=i.d.length-1,r=n*Ot+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ce.squareRoot=Ce.sqrt=function(){var e,t,r,n,i,s,c,u=this,m=u.constructor;if(u.s<1){if(!u.s)return new m(0);throw Error(Bn+"NaN")}for(e=or(u),Dt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=pa(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=rl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(i.toString()),r=m.precision,i=c=r+3;;)if(s=n,n=s.plus(Ya(u,s,c+2)).times(.5),pa(s.d).slice(0,c)===(t=pa(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),i==c&&t=="4999"){if(_t(s,r+1,0),s.times(s).eq(u)){n=s;break}}else if(t!="9999")break;c+=4}return Dt=!0,_t(n,r)};Ce.times=Ce.mul=function(e){var t,r,n,i,s,c,u,m,h,g=this,p=g.constructor,_=g.d,x=(e=new p(e)).d;if(!g.s||!e.s)return new p(0);for(e.s*=g.s,r=g.e+e.e,m=_.length,h=x.length,m<h&&(s=_,_=x,x=s,c=m,m=h,h=c),s=[],c=m+h,n=c;n--;)s.push(0);for(n=h;--n>=0;){for(t=0,i=m+n;i>n;)u=s[i]+x[n]*_[i-n-1]+t,s[i--]=u%yr|0,t=u/yr|0;s[i]=(s[i]+t)%yr|0}for(;!s[--c];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Dt?_t(e,p.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(_a(e,0,tl),t===void 0?t=n.rounding:_a(t,0,8),_t(r,e+or(r)+1,t))};Ce.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Bo(n,!0):(_a(e,0,tl),t===void 0?t=i.rounding:_a(t,0,8),n=_t(new i(n),e+1,t),r=Bo(n,!0,e+1)),r};Ce.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?Bo(i):(_a(e,0,tl),t===void 0?t=s.rounding:_a(t,0,8),n=_t(new s(i),e+or(i)+1,t),r=Bo(n.abs(),!1,e+or(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return _t(new t(e),or(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,r,n,i,s,c,u=this,m=u.constructor,h=12,g=+(e=new m(e));if(!e.s)return new m(pn);if(u=new m(u),!u.s){if(e.s<1)throw Error(Bn+"Infinity");return u}if(u.eq(pn))return u;if(n=m.precision,e.eq(pn))return _t(u,n);if(t=e.e,r=e.d.length-1,c=t>=r,s=u.s,c){if((r=g<0?-g:g)<=bT){for(i=new m(pn),t=Math.ceil(n/Ot+4),Dt=!1;r%2&&(i=i.times(u),hC(i.d,t)),r=rl(r/2),r!==0;)u=u.times(u),hC(u.d,t);return Dt=!0,e.s<0?new m(pn).div(i):_t(i,n)}}else if(s<0)throw Error(Bn+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Dt=!1,i=e.times(qc(u,n+h)),Dt=!0,i=xT(i),i.s=s,i};Ce.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=or(i),n=Bo(i,r<=s.toExpNeg||r>=s.toExpPos)):(_a(e,1,tl),t===void 0?t=s.rounding:_a(t,0,8),i=_t(new s(i),e,t),r=or(i),n=Bo(i,e<=r||r<=s.toExpNeg,e)),n};Ce.toSignificantDigits=Ce.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(_a(e,1,tl),t===void 0?t=n.rounding:_a(t,0,8)),_t(new n(r),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=or(e),r=e.constructor;return Bo(e,t<=r.toExpNeg||t>=r.toExpPos)};function _T(e,t){var r,n,i,s,c,u,m,h,g=e.constructor,p=g.precision;if(!e.s||!t.s)return t.s||(t=new g(e)),Dt?_t(t,p):t;if(m=e.d,h=t.d,c=e.e,i=t.e,m=m.slice(),s=c-i,s){for(s<0?(n=m,s=-s,u=h.length):(n=h,i=c,u=m.length),c=Math.ceil(p/Ot),u=c>u?c+1:u+1,s>u&&(s=u,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(u=m.length,s=h.length,u-s<0&&(s=u,n=h,h=m,m=n),r=0;s;)r=(m[--s]=m[s]+h[s]+r)/yr|0,m[s]%=yr;for(r&&(m.unshift(r),++i),u=m.length;m[--u]==0;)m.pop();return t.d=m,t.e=i,Dt?_t(t,p):t}function _a(e,t,r){if(e!==~~e||e<t||e>r)throw Error(To+e)}function pa(e){var t,r,n,i=e.length-1,s="",c=e[0];if(i>0){for(s+=c,t=1;t<i;t++)n=e[t]+"",r=Ot-n.length,r&&(s+=Ii(r)),s+=n;c=e[t],n=c+"",r=Ot-n.length,r&&(s+=Ii(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var Ya=(function(){function e(n,i){var s,c=0,u=n.length;for(n=n.slice();u--;)s=n[u]*i+c,n[u]=s%yr|0,c=s/yr|0;return c&&n.unshift(c),n}function t(n,i,s,c){var u,m;if(s!=c)m=s>c?1:-1;else for(u=m=0;u<s;u++)if(n[u]!=i[u]){m=n[u]>i[u]?1:-1;break}return m}function r(n,i,s){for(var c=0;s--;)n[s]-=c,c=n[s]<i[s]?1:0,n[s]=c*yr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,c){var u,m,h,g,p,_,x,w,j,S,O,C,A,k,D,M,z,K,Q=n.constructor,ne=n.s==i.s?1:-1,G=n.d,I=i.d;if(!n.s)return new Q(n);if(!i.s)throw Error(Bn+"Division by zero");for(m=n.e-i.e,z=I.length,D=G.length,x=new Q(ne),w=x.d=[],h=0;I[h]==(G[h]||0);)++h;if(I[h]>(G[h]||0)&&--m,s==null?C=s=Q.precision:c?C=s+(or(n)-or(i))+1:C=s,C<0)return new Q(0);if(C=C/Ot+2|0,h=0,z==1)for(g=0,I=I[0],C++;(h<D||g)&&C--;h++)A=g*yr+(G[h]||0),w[h]=A/I|0,g=A%I|0;else{for(g=yr/(I[0]+1)|0,g>1&&(I=e(I,g),G=e(G,g),z=I.length,D=G.length),k=z,j=G.slice(0,z),S=j.length;S<z;)j[S++]=0;K=I.slice(),K.unshift(0),M=I[0],I[1]>=yr/2&&++M;do g=0,u=t(I,j,z,S),u<0?(O=j[0],z!=S&&(O=O*yr+(j[1]||0)),g=O/M|0,g>1?(g>=yr&&(g=yr-1),p=e(I,g),_=p.length,S=j.length,u=t(p,j,_,S),u==1&&(g--,r(p,z<_?K:I,_))):(g==0&&(u=g=1),p=I.slice()),_=p.length,_<S&&p.unshift(0),r(j,p,S),u==-1&&(S=j.length,u=t(I,j,z,S),u<1&&(g++,r(j,z<S?K:I,S))),S=j.length):u===0&&(g++,j=[0]),w[h++]=g,u&&j[0]?j[S++]=G[k]||0:(j=[G[k]],S=1);while((k++<D||j[0]!==void 0)&&C--)}return w[0]||w.shift(),x.e=m,_t(x,c?s+or(x)+1:s)}})();function xT(e,t){var r,n,i,s,c,u,m=0,h=0,g=e.constructor,p=g.precision;if(or(e)>16)throw Error(P0+or(e));if(!e.s)return new g(pn);for(Dt=!1,u=p,c=new g(.03125);e.abs().gte(.1);)e=e.times(c),h+=5;for(n=Math.log(So(2,h))/Math.LN10*2+5|0,u+=n,r=i=s=new g(pn),g.precision=u;;){if(i=_t(i.times(e),u),r=r.times(++m),c=s.plus(Ya(i,r,u)),pa(c.d).slice(0,u)===pa(s.d).slice(0,u)){for(;h--;)s=_t(s.times(s),u);return g.precision=p,t==null?(Dt=!0,_t(s,p)):s}s=c}}function or(e){for(var t=e.e*Ot,r=e.d[0];r>=10;r/=10)t++;return t}function Vv(e,t,r){if(t>e.LN10.sd())throw Dt=!0,r&&(e.precision=r),Error(Bn+"LN10 precision limit exceeded");return _t(new e(e.LN10),t)}function Ii(e){for(var t="";e--;)t+="0";return t}function qc(e,t){var r,n,i,s,c,u,m,h,g,p=1,_=10,x=e,w=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(Bn+(x.s?"NaN":"-Infinity"));if(x.eq(pn))return new j(0);if(t==null?(Dt=!1,h=S):h=t,x.eq(10))return t==null&&(Dt=!0),Vv(j,h);if(h+=_,j.precision=h,r=pa(w),n=r.charAt(0),s=or(x),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=pa(x.d),n=r.charAt(0),p++;s=or(x),n>1?(x=new j("0."+r),s++):x=new j(n+"."+r.slice(1))}else return m=Vv(j,h+2,S).times(s+""),x=qc(new j(n+"."+r.slice(1)),h-_).plus(m),j.precision=S,t==null?(Dt=!0,_t(x,S)):x;for(u=c=x=Ya(x.minus(pn),x.plus(pn),h),g=_t(x.times(x),h),i=3;;){if(c=_t(c.times(g),h),m=u.plus(Ya(c,new j(i),h)),pa(m.d).slice(0,h)===pa(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus(Vv(j,h+2,S).times(s+""))),u=Ya(u,new j(p),h),j.precision=S,t==null?(Dt=!0,_t(u,S)):u;u=m,i+=2}}function mC(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=rl(r/Ot),e.d=[],n=(r+1)%Ot,r<0&&(n+=Ot),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ot;n<i;)e.d.push(+t.slice(n,n+=Ot));t=t.slice(n),n=Ot-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Dt&&(e.e>Xf||e.e<-Xf))throw Error(P0+r)}else e.s=0,e.e=0,e.d=[0];return e}function _t(e,t,r){var n,i,s,c,u,m,h,g,p=e.d;for(c=1,s=p[0];s>=10;s/=10)c++;if(n=t-c,n<0)n+=Ot,i=t,h=p[g=0];else{if(g=Math.ceil((n+1)/Ot),s=p.length,g>=s)return e;for(h=s=p[g],c=1;s>=10;s/=10)c++;n%=Ot,i=n-Ot+c}if(r!==void 0&&(s=So(10,c-i-1),u=h/s%10|0,m=t<0||p[g+1]!==void 0||h%s,m=r<4?(u||m)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||m||r==6&&(n>0?i>0?h/So(10,c-i):0:p[g-1])%10&1||r==(e.s<0?8:7))),t<1||!p[0])return m?(s=or(e),p.length=1,t=t-s-1,p[0]=So(10,(Ot-t%Ot)%Ot),e.e=rl(-t/Ot)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(n==0?(p.length=g,s=1,g--):(p.length=g+1,s=So(10,Ot-n),p[g]=i>0?(h/So(10,c-i)%So(10,i)|0)*s:0),m)for(;;)if(g==0){(p[0]+=s)==yr&&(p[0]=1,++e.e);break}else{if(p[g]+=s,p[g]!=yr)break;p[g--]=0,s=1}for(n=p.length;p[--n]===0;)p.pop();if(Dt&&(e.e>Xf||e.e<-Xf))throw Error(P0+or(e));return e}function wT(e,t){var r,n,i,s,c,u,m,h,g,p,_=e.constructor,x=_.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new _(e),Dt?_t(t,x):t;if(m=e.d,p=t.d,n=t.e,h=e.e,m=m.slice(),c=h-n,c){for(g=c<0,g?(r=m,c=-c,u=p.length):(r=p,n=h,u=m.length),i=Math.max(Math.ceil(x/Ot),u)+2,c>i&&(c=i,r.length=1),r.reverse(),i=c;i--;)r.push(0);r.reverse()}else{for(i=m.length,u=p.length,g=i<u,g&&(u=i),i=0;i<u;i++)if(m[i]!=p[i]){g=m[i]<p[i];break}c=0}for(g&&(r=m,m=p,p=r,t.s=-t.s),u=m.length,i=p.length-u;i>0;--i)m[u++]=0;for(i=p.length;i>c;){if(m[--i]<p[i]){for(s=i;s&&m[--s]===0;)m[s]=yr-1;--m[s],m[i]+=yr}m[i]-=p[i]}for(;m[--u]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,Dt?_t(t,x):t):new _(0)}function Bo(e,t,r){var n,i=or(e),s=pa(e.d),c=s.length;return t?(r&&(n=r-c)>0?s=s.charAt(0)+"."+s.slice(1)+Ii(n):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ii(-i-1)+s,r&&(n=r-c)>0&&(s+=Ii(n))):i>=c?(s+=Ii(i+1-c),r&&(n=r-i-1)>0&&(s=s+"."+Ii(n))):((n=i+1)<c&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-c)>0&&(i+1===c&&(s+="."),s+=Ii(n))),e.s<0?"-"+s:s}function hC(e,t){if(e.length>t)return e.length=t,!0}function jT(e){var t,r,n;function i(s){var c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,s instanceof i){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(To+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return mC(c,s.toString())}else if(typeof s!="string")throw Error(To+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,k8.test(s))mC(c,s);else throw Error(To+s)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=jT,i.config=i.set=D8,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function D8(e){if(!e||typeof e!="object")throw Error(Bn+"Object expected");var t,r,n,i=["precision",1,tl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(rl(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(To+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(To+r+": "+n);return this}var M0=jT(N8);pn=new M0(1);const dt=M0;var T8=e=>e,ST={},ET=e=>e===ST,pC=e=>function t(){return arguments.length===0||arguments.length===1&&ET(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},OT=(e,t)=>e===1?t:pC(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.filter(c=>c!==ST).length;return s>=e?t(...n):OT(e-s,pC(function(){for(var c=arguments.length,u=new Array(c),m=0;m<c;m++)u[m]=arguments[m];var h=n.map(g=>ET(g)?u.shift():g);return t(...h,...u)}))}),P8=e=>OT(e.length,e),cb=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},M8=P8((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),R8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return T8;var i=r.reverse(),s=i[0],c=i.slice(1);return function(){return c.reduce((u,m)=>m(u),s(...arguments))}};function CT(e){var t;return e===0?t=1:t=Math.floor(new dt(e).abs().log(10).toNumber())+1,t}function AT(e,t,r){for(var n=new dt(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var NT=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},kT=(e,t,r)=>{if(e.lte(0))return new dt(0);var n=CT(e.toNumber()),i=new dt(10).pow(n),s=e.div(i),c=n!==1?.05:.1,u=new dt(Math.ceil(s.div(c).toNumber())).add(r).mul(c),m=u.mul(i);return t?new dt(m.toNumber()):new dt(Math.ceil(m.toNumber()))},q8=(e,t,r)=>{var n=new dt(1),i=new dt(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new dt(10).pow(CT(e)-1),i=new dt(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new dt(Math.floor(e)))}else e===0?i=new dt(Math.floor((t-1)/2)):r||(i=new dt(Math.floor(e)));var c=Math.floor((t-1)/2),u=R8(M8(m=>i.add(new dt(m-c).mul(n)).toNumber()),cb);return u(0,t)},DT=function(t,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new dt(0),tickMin:new dt(0),tickMax:new dt(0)};var c=kT(new dt(r).sub(t).div(n-1),i,s),u;t<=0&&r>=0?u=new dt(0):(u=new dt(t).add(r).div(2),u=u.sub(new dt(u).mod(c)));var m=Math.ceil(u.sub(t).div(c).toNumber()),h=Math.ceil(new dt(r).sub(u).div(c).toNumber()),g=m+h+1;return g>n?DT(t,r,n,i,s+1):(g<n&&(h=r>0?h+(n-g):h,m=r>0?m:m+(n-g)),{step:c,tickMin:u.sub(new dt(m).mul(c)),tickMax:u.add(new dt(h).mul(c))})},L8=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,m]=NT([r,n]);if(u===-1/0||m===1/0){var h=m===1/0?[u,...cb(0,i-1).map(()=>1/0)]:[...cb(0,i-1).map(()=>-1/0),m];return r>n?h.reverse():h}if(u===m)return q8(u,i,s);var{step:g,tickMin:p,tickMax:_}=DT(u,m,c,s,0),x=AT(p,_.add(new dt(.1).mul(g)),g);return r>n?x.reverse():x},z8=function(t,r){var[n,i]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=NT([n,i]);if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var m=Math.max(r,2),h=kT(new dt(u).sub(c).div(m-1),s,0),g=[...AT(new dt(c),new dt(u),h),u];return s===!1&&(g=g.map(p=>Math.round(p))),n>i?g.reverse():g},TT=e=>e.rootProps.maxBarSize,I8=e=>e.rootProps.barGap,PT=e=>e.rootProps.barCategoryGap,U8=e=>e.rootProps.barSize,nu=e=>e.rootProps.stackOffset,MT=e=>e.rootProps.reverseStackOrder,R0=e=>e.options.chartName,q0=e=>e.rootProps.syncId,RT=e=>e.rootProps.syncMethod,L0=e=>e.options.eventEmitter,uQ=e=>e.rootProps.baseValue,ir={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},$a={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},hn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Gm=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},B8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:$a.reversed,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:$a.type,unit:void 0},$8={allowDataOverflow:hn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hn.scale,tick:hn.tick,tickCount:hn.tickCount,ticks:void 0,type:hn.type,unit:void 0},H8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:$a.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$a.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$a.scale,tick:$a.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},F8={allowDataOverflow:hn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:hn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:hn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:hn.scale,tick:hn.tick,tickCount:hn.tickCount,ticks:void 0,type:"category",unit:void 0},z0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?H8:B8,I0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?F8:$8,Vm=e=>e.polarOptions,U0=X([ai,ii,dr],PD),qT=X([Vm,U0],(e,t)=>{if(e!=null)return Tr(e.innerRadius,t,0)}),LT=X([Vm,U0],(e,t)=>{if(e!=null)return Tr(e.outerRadius,t,t*.8)}),K8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},zT=X([Vm],K8);X([z0,zT],Gm);var IT=X([U0,qT,LT],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});X([I0,IT],Gm);var UT=X([et,Vm,qT,LT,ai,ii],(e,t,r,n,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:u,startAngle:m,endAngle:h}=t;return{cx:Tr(c,i,i/2),cy:Tr(u,s,s/2),innerRadius:r,outerRadius:n,startAngle:m,endAngle:h,clockWise:!1}}}),Rt=(e,t)=>t,au=(e,t,r)=>r;function B0(e){return e?.id}function BT(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=r,c=new Map;return e.forEach(u=>{var m,h=(m=u.data)!==null&&m!==void 0?m:n;if(!(h==null||h.length===0)){var g=B0(u);h.forEach((p,_)=>{var x=s==null||i?_:String(vt(p,s,null)),w=vt(p,u.dataKey,0),j;c.has(x)?j=c.get(x):j={},Object.assign(j,{[g]:w}),c.set(x,j)})}}),Array.from(c.values())}function Wm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Xm=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Zm(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function Y8(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var mr=e=>{var t=et(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},nl=e=>e.tooltip.settings.axisId;function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(n){G8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G8(e,t,r){return(t=V8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V8(e){var t=W8(e,"string");return typeof t=="symbol"?t:t+""}function W8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ub=[0,"auto"],gr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},$T=(e,t)=>e.cartesianAxis.xAxis[t],li=(e,t)=>{var r=$T(e,t);return r??gr},vr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ub,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Wc},HT=(e,t)=>e.cartesianAxis.yAxis[t],ci=(e,t)=>{var r=HT(e,t);return r??vr},X8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},$0=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??X8},zt=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);case"zAxis":return $0(e,r);case"angleAxis":return z0(e,r);case"radiusAxis":return I0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Z8=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},iu=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);case"angleAxis":return z0(e,r);case"radiusAxis":return I0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},FT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function H0(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Qm=e=>e.graphicalItems.cartesianItems,Q8=X([Rt,au],H0),F0=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),ou=X([Qm,zt,Q8],F0,{memoizeOptions:{resultEqualityCheck:Zm}}),KT=X([ou],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Wm)),YT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),J8=X([ou],YT),K0=e=>e.map(t=>t.data).filter(Boolean).flat(1),eH=X([ou],K0,{memoizeOptions:{resultEqualityCheck:Zm}}),Y0=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},G0=X([eH,T0],Y0),V0=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:vt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:vt(i,n)}))):e.map(n=>({value:n})),Jm=X([G0,zt,ou],V0);function GT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function df(e){if(ya(e)||e instanceof Date){var t=Number(e);if(Lt(t))return t}}function vC(e){if(Array.isArray(e)){var t=[df(e[0]),df(e[1])];return Yi(t)?t:void 0}var r=df(e);if(r!=null)return[r,r]}function ei(e){return e.map(df).filter(g5)}function tH(e,t,r){return!r||typeof t!="number"||ra(t)?[]:r.length?ei(r.flatMap(n=>{var i=vt(e,n.dataKey),s,c;if(Array.isArray(i)?[s,c]=i:s=c=i,!(!Lt(s)||!Lt(c)))return[t-s,t+c]})):[]}var hr=e=>{var t=mr(e),r=nl(e);return iu(e,t,r)},su=X([hr],e=>e?.dataKey),rH=X([KT,T0,hr],BT),VT=(e,t,r,n)=>{var i={},s=t.reduce((c,u)=>{if(u.stackId==null)return c;var m=c[u.stackId];return m==null&&(m=[]),m.push(u),c[u.stackId]=m,c},i);return Object.fromEntries(Object.entries(s).map(c=>{var[u,m]=c,h=n?[...m].reverse():m,g=h.map(B0);return[u,{stackedData:R4(e,g,r),graphicalItems:h}]}))},db=X([rH,KT,nu,MT],VT),WT=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var c=U4(e,i,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},nH=X([zt],e=>e.allowDataOverflow),W0=e=>{var t;if(e==null||!("domain"in e))return ub;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=ei(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:ub},X0=X([zt],W0),Z0=X([X0,nH],yT),aH=X([db,si,Rt,Z0],WT,{memoizeOptions:{resultEqualityCheck:Xm}}),eh=e=>e.errorBars,iH=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>GT(r,n)),Qf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),c=Math.min(...s),u=Math.max(...s);return[c,u]}},Q0=(e,t,r,n,i)=>{var s,c;if(r.length>0&&e.forEach(u=>{r.forEach(m=>{var h,g,p=(h=n[m.id])===null||h===void 0?void 0:h.filter(O=>GT(i,O)),_=vt(u,(g=t.dataKey)!==null&&g!==void 0?g:m.dataKey),x=tH(u,_,p);if(x.length>=2){var w=Math.min(...x),j=Math.max(...x);(s==null||w<s)&&(s=w),(c==null||j>c)&&(c=j)}var S=vC(_);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),c=c==null?S[1]:Math.max(c,S[1]))})}),t?.dataKey!=null&&e.forEach(u=>{var m=vC(vt(u,t.dataKey));m!=null&&(s=s==null?m[0]:Math.min(s,m[0]),c=c==null?m[1]:Math.max(c,m[1]))}),Lt(s)&&Lt(c))return[s,c]},oH=X([G0,zt,J8,eh,Rt],Q0,{memoizeOptions:{resultEqualityCheck:Xm}});function sH(e){var{value:t}=e;if(ya(t)||t instanceof Date)return t}var lH=(e,t,r)=>{var n=e.map(sH).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&dk(n))?LD(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},XT=e=>e.referenceElements.dots,al=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),cH=X([XT,Rt,au],al),ZT=e=>e.referenceElements.areas,uH=X([ZT,Rt,au],al),QT=e=>e.referenceElements.lines,dH=X([QT,Rt,au],al),JT=(e,t)=>{if(e!=null){var r=ei(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},fH=X(cH,Rt,JT),eP=(e,t)=>{if(e!=null){var r=ei(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},mH=X([uH,Rt],eP);function hH(e){var t;if(e.x!=null)return ei([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:ei(r)}function pH(e){var t;if(e.y!=null)return ei([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:ei(r)}var tP=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?hH(n):pH(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},gH=X([dH,Rt],tP),vH=X(fH,gH,mH,(e,t,r)=>Qf(e,r,t)),J0=(e,t,r,n,i,s,c,u)=>{if(r!=null)return r;var m=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",h=m?Qf(n,s,i):Qf(s,i);return A8(t,h,e.allowDataOverflow)},yH=X([zt,X0,Z0,aH,oH,vH,et,Rt],J0,{memoizeOptions:{resultEqualityCheck:Xm}}),bH=[0,1],e_=(e,t,r,n,i,s,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:u,type:m}=e,h=Zi(t,s);if(h&&u==null){var g;return LD(0,(g=r?.length)!==null&&g!==void 0?g:0)}return m==="category"?lH(n,e,h):i==="expand"?bH:c}},t_=X([zt,et,G0,Jm,nu,Rt,yH],e_),rP=(e,t,r,n,i)=>{if(e!=null){var{scale:s,type:c}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat(Kc(s));return u in bc?u:"point"}}},il=X([zt,et,FT,R0,Rt],rP);function _H(e){if(e!=null){if(e in bc)return bc[e]();var t="scale".concat(Kc(e));if(t in bc)return bc[t]()}}function r_(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=_H(t);if(i!=null){var s=i.domain(r).range(n);return k4(s),s}}}var n_=(e,t,r)=>{var n=W0(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Yi(e))return L8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Yi(e))return z8(e,t.tickCount,t.allowDecimals)}},a_=X([t_,iu,il],n_),i_=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Yi(t)&&Array.isArray(r)&&r.length>0){var i=t[0],s=r[0],c=t[1],u=r[r.length-1];return[Math.min(i,s),Math.max(c,u)]}return t},xH=X([zt,t_,a_,Rt],i_),wH=X(Jm,zt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(ei(e.map(p=>p.value))).sort((p,_)=>p-_),i=n[0],s=n[n.length-1];if(i==null||s==null)return 1/0;var c=s-i;if(c===0)return 1/0;for(var u=0;u<n.length-1;u++){var m=n[u],h=n[u+1];if(!(m==null||h==null)){var g=h-m;r=Math.min(r,g)}}return r/c}}),nP=X(wH,et,PT,dr,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!Lt(e))return 0;var s=t==="vertical"?n.height:n.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var c=Tr(r,e*s),u=e*s/2;return u-c-(u-c)/s*c}return 0}),jH=(e,t,r)=>{var n=li(e,t);return n==null||typeof n.padding!="string"?0:nP(e,"xAxis",t,r,n.padding)},SH=(e,t,r)=>{var n=ci(e,t);return n==null||typeof n.padding!="string"?0:nP(e,"yAxis",t,r,n.padding)},EH=X(li,jH,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),OH=X(ci,SH,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),CH=X([dr,EH,Pm,Tm,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),AH=X([dr,et,OH,Pm,Tm,(e,t,r)=>r],(e,t,r,n,i,s)=>{var{padding:c}=i;return s?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),lu=(e,t,r,n)=>{var i;switch(t){case"xAxis":return CH(e,r,n);case"yAxis":return AH(e,r,n);case"zAxis":return(i=$0(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return zT(e);case"radiusAxis":return IT(e,r);default:return}},aP=X([zt,lu],Gm),th=X([zt,il,xH,aP],r_);X([ou,eh,Rt],iH);function iP(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var rh=(e,t)=>t,nh=(e,t,r)=>r,NH=X(km,rh,nh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(iP)),kH=X(Dm,rh,nh,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(iP)),oP=(e,t)=>({width:e.width,height:t.height}),DH=(e,t)=>{var r=typeof t.width=="number"?t.width:Wc;return{width:r,height:e.height}},sP=X(dr,li,oP),TH=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},PH=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},MH=X(ii,dr,NH,rh,nh,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=oP(t,u);c==null&&(c=TH(t,n,e));var h=n==="top"&&!i||n==="bottom"&&i;s[u.id]=c-Number(h)*m.height,c+=(h?-1:1)*m.height}),s}),RH=X(ai,dr,kH,rh,nh,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=DH(t,u);c==null&&(c=PH(t,n,e));var h=n==="left"&&!i||n==="right"&&i;s[u.id]=c-Number(h)*m.width,c+=(h?-1:1)*m.width}),s}),qH=(e,t)=>{var r=li(e,t);if(r!=null)return MH(e,r.orientation,r.mirror)},LH=X([dr,li,qH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),zH=(e,t)=>{var r=ci(e,t);if(r!=null)return RH(e,r.orientation,r.mirror)},IH=X([dr,ci,zH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),lP=X(dr,ci,(e,t)=>{var r=typeof t.width=="number"?t.width:Wc;return{width:r,height:e.height}}),yC=(e,t,r)=>{switch(t){case"xAxis":return sP(e,r).width;case"yAxis":return lP(e,r).height;default:return}},cP=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:c}=r,u=Zi(e,n),m=t.map(h=>h.value);if(c&&u&&s==="category"&&i&&dk(m))return m}},o_=X([et,Jm,zt,Rt],cP),uP=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,c=Zi(e,n);if(c&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},s_=X([et,Jm,iu,Rt],uP),bC=X([et,Z8,il,th,o_,s_,lu,a_,Rt],(e,t,r,n,i,s,c,u,m)=>{if(t!=null){var h=Zi(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:c,realScaleType:r,scale:n}}}),UH=(e,t,r,n,i,s,c,u,m)=>{if(!(t==null||n==null)){var h=Zi(e,m),{type:g,ticks:p,tickCount:_}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=g==="category"&&n.bandwidth?n.bandwidth()/x:0;w=m==="angleAxis"&&s!=null&&s.length>=2?br(s[0]-s[1])*2*w:w;var j=p||i;if(j){var S=j.map((O,C)=>{var A=c?c.indexOf(O):O;return{index:C,coordinate:n(A)+w,value:O,offset:w}});return S.filter(O=>Lt(O.coordinate))}return h&&u?u.map((O,C)=>({coordinate:n(O)+w,value:O,index:C,offset:w})).filter(O=>Lt(O.coordinate)):n.ticks?n.ticks(_).map(O=>({coordinate:n(O)+w,value:O,offset:w})):n.domain().map((O,C)=>({coordinate:n(O)+w,value:c?c[O]:O,index:C,offset:w}))}},dP=X([et,iu,il,th,a_,lu,o_,s_,Rt],UH),BH=(e,t,r,n,i,s,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Zi(e,c),{tickCount:m}=t,h=0;return h=c==="angleAxis"&&n?.length>=2?br(n[0]-n[1])*2*h:h,u&&s?s.map((g,p)=>({coordinate:r(g)+h,value:g,index:p,offset:h})):r.ticks?r.ticks(m).map(g=>({coordinate:r(g)+h,value:g,offset:h})):r.domain().map((g,p)=>({coordinate:r(g)+h,value:i?i[g]:g,index:p,offset:h}))}},Gi=X([et,iu,th,lu,o_,s_,Rt],BH),Vi=X(zt,th,(e,t)=>{if(!(e==null||t==null))return Zf(Zf({},e),{},{scale:t})}),$H=X([zt,il,t_,aP],r_);X((e,t,r)=>$0(e,r),$H,(e,t)=>{if(!(e==null||t==null))return Zf(Zf({},e),{},{scale:t})});var HH=X([et,km,Dm],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),fP=e=>e.options.defaultTooltipEventType,mP=e=>e.options.validateTooltipEventTypes;function hP(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function l_(e,t){var r=fP(e),n=mP(e);return hP(t,r,n)}function FH(e){return De(t=>l_(t,e))}var pP=(e,t)=>{var r,n=Number(t);if(!(ra(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},KH=e=>e.tooltip.settings,Bi={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},YH={itemInteraction:{click:Bi,hover:Bi},axisInteraction:{click:Bi,hover:Bi},keyboardInteraction:Bi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},gP=Jr({name:"tooltip",initialState:YH,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Nt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ta(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:Nt()},removeTooltipEntrySettings:{reducer(e,t){var r=ta(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Nt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:GH,replaceTooltipEntrySettings:VH,removeTooltipEntrySettings:WH,setTooltipSettingsState:XH,setActiveMouseOverItemIndex:vP,mouseLeaveItem:ZH,mouseLeaveChart:yP,setActiveClickItemIndex:QH,setMouseOverAxisIndex:bP,setMouseClickAxisIndex:JH,setSyncInteraction:fb,setKeyboardInteraction:mb}=gP.actions,e9=gP.reducer;function _C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_C(Object(r),!0).forEach(function(n){t9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_C(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t9(e,t,r){return(t=r9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r9(e){var t=n9(e,"string");return typeof t=="symbol"?t:t+""}function n9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function a9(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function i9(e){return e.index!=null}var _P=(e,t,r,n)=>{if(t==null)return Bi;var i=a9(e,t,r);if(i==null)return Bi;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(i9(i)){if(s)return Vd(Vd({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Vd(Vd({},Bi),{},{coordinate:i.coordinate})};function o9(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function s9(e,t){var r=o9(e),n=t[0],i=t[1];if(r===void 0)return!1;var s=Math.min(n,i),c=Math.max(n,i);return r>=s&&r<=c}function l9(e,t,r){if(r==null||t==null)return!0;var n=vt(e,t);return n==null||!Yi(r)?!0:s9(n,r)}var c_=(e,t,r,n)=>{var i=e?.index;if(i==null)return null;var s=Number(i);if(!Lt(s))return i;var c=0,u=1/0;t.length>0&&(u=t.length-1);var m=Math.max(c,Math.min(s,u)),h=t[m];return h==null||l9(h,r,n)?String(m):null},xP=(e,t,r,n,i,s,c,u)=>{if(!(s==null||u==null)){var m=c[0],h=m==null?void 0:u(m.positions,s);if(h!=null)return h;var g=i?.[Number(s)];if(g)switch(r){case"horizontal":return{x:g.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:g.coordinate}}}},wP=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},cu=e=>e.options.tooltipPayloadSearcher,ol=e=>e.tooltip;function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function wC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){c9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c9(e,t,r){return(t=u9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u9(e){var t=d9(e,"string");return typeof t=="symbol"?t:t+""}function d9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f9(e,t){return e??t}var jP=(e,t,r,n,i,s,c)=>{if(!(t==null||s==null)){var{chartData:u,computedData:m,dataStartIndex:h,dataEndIndex:g}=r,p=[];return e.reduce((_,x)=>{var w,{dataDefinedOnItem:j,settings:S}=x,O=f9(j,u),C=Array.isArray(O)?aD(O,h,g):O,A=(w=S?.dataKey)!==null&&w!==void 0?w:n,k=S?.nameKey,D;if(n&&Array.isArray(C)&&!Array.isArray(C[0])&&c==="axis"?D=fk(C,n,i):D=s(C,t,m,k),Array.isArray(D))D.forEach(z=>{var K=wC(wC({},S),{},{name:z.name,unit:z.unit,color:void 0,fill:void 0});_.push(CE({tooltipEntrySettings:K,dataKey:z.dataKey,payload:z.payload,value:vt(z.payload,z.dataKey),name:z.name}))});else{var M;_.push(CE({tooltipEntrySettings:S,dataKey:A,payload:D,value:vt(D,A),name:(M=vt(D,k))!==null&&M!==void 0?M:S?.name}))}return _},p)}},u_=X([hr,et,FT,R0,mr],rP),m9=X([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),h9=X([mr,nl],H0),sl=X([m9,hr,h9],F0,{memoizeOptions:{resultEqualityCheck:Zm}}),p9=X([sl],e=>e.filter(Wm)),g9=X([sl],K0,{memoizeOptions:{resultEqualityCheck:Zm}}),ll=X([g9,si],Y0),v9=X([p9,si,hr],BT),d_=X([ll,hr,sl],V0),SP=X([hr],W0),y9=X([hr],e=>e.allowDataOverflow),EP=X([SP,y9],yT),b9=X([sl],e=>e.filter(Wm)),_9=X([v9,b9,nu,MT],VT),x9=X([_9,si,mr,EP],WT),w9=X([sl],YT),j9=X([ll,hr,w9,eh,mr],Q0,{memoizeOptions:{resultEqualityCheck:Xm}}),S9=X([XT,mr,nl],al),E9=X([S9,mr],JT),O9=X([ZT,mr,nl],al),C9=X([O9,mr],eP),A9=X([QT,mr,nl],al),N9=X([A9,mr],tP),k9=X([E9,N9,C9],Qf),D9=X([hr,SP,EP,x9,j9,k9,et,mr],J0),uu=X([hr,et,ll,d_,nu,mr,D9],e_),T9=X([uu,hr,u_],n_),P9=X([hr,uu,T9,mr],i_),OP=e=>{var t=mr(e),r=nl(e),n=!1;return lu(e,t,r,n)},CP=X([hr,OP],Gm),AP=X([hr,u_,P9,CP],r_),M9=X([et,d_,hr,mr],cP),R9=X([et,d_,hr,mr],uP),q9=(e,t,r,n,i,s,c,u)=>{if(t){var{type:m}=t,h=Zi(e,u);if(n){var g=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,p=m==="category"&&n.bandwidth?n.bandwidth()/g:0;return p=u==="angleAxis"&&i!=null&&i?.length>=2?br(i[0]-i[1])*2*p:p,h&&c?c.map((_,x)=>({coordinate:n(_)+p,value:_,index:x,offset:p})):n.domain().map((_,x)=>({coordinate:n(_)+p,value:s?s[_]:_,index:x,offset:p}))}}},ui=X([et,hr,u_,AP,OP,M9,R9,mr],q9),f_=X([fP,mP,KH],(e,t,r)=>hP(r.shared,e,t)),NP=e=>e.tooltip.settings.trigger,m_=e=>e.tooltip.settings.defaultIndex,du=X([ol,f_,NP,m_],_P),Wi=X([du,ll,su,uu],c_),kP=X([ui,Wi],pP),h_=X([du],e=>{if(e)return e.dataKey}),L9=X([du],e=>{if(e)return e.graphicalItemId}),DP=X([ol,f_,NP,m_],wP),z9=X([ai,ii,et,dr,ui,m_,DP,cu],xP),I9=X([du,z9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),U9=X([du],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),B9=X([DP,Wi,si,su,kP,cu,f_],jP),$9=X([B9],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function jC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function SC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jC(Object(r),!0).forEach(function(n){H9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H9(e,t,r){return(t=F9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F9(e){var t=K9(e,"string");return typeof t=="symbol"?t:t+""}function K9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Y9=()=>De(hr),G9=()=>{var e=Y9(),t=De(ui),r=De(AP);return Fs(!e||!r?void 0:SC(SC({},e),{},{scale:r}),t)};function EC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(r),!0).forEach(function(n){V9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V9(e,t,r){return(t=W9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W9(e){var t=X9(e,"string");return typeof t=="symbol"?t:t+""}function X9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Z9=(e,t,r,n)=>{var i=t.find(s=>s&&s.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},Q9=(e,t,r,n)=>{var i=t.find(h=>h&&h.index===r);if(i){if(e==="centric"){var s=i.coordinate,{radius:c}=n;return Rs(Rs(Rs({},n),ar(n.cx,n.cy,c,s)),{},{angle:s,radius:c})}var u=i.coordinate,{angle:m}=n;return Rs(Rs(Rs({},n),ar(n.cx,n.cy,u,m)),{},{angle:m,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function J9(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var TP=(e,t,r,n,i)=>{var s,c=(s=t?.length)!==null&&s!==void 0?s:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var m,h,g,p,_,x=u>0?(m=r[u-1])===null||m===void 0?void 0:m.coordinate:(h=r[c-1])===null||h===void 0?void 0:h.coordinate,w=(g=r[u])===null||g===void 0?void 0:g.coordinate,j=u>=c-1?(p=r[0])===null||p===void 0?void 0:p.coordinate:(_=r[u+1])===null||_===void 0?void 0:_.coordinate,S=void 0;if(!(x==null||w==null||j==null))if(br(w-x)!==br(j-w)){var O=[];if(br(j-w)===br(i[1]-i[0])){S=j;var C=w+i[1]-i[0];O[0]=Math.min(C,(C+x)/2),O[1]=Math.max(C,(C+x)/2)}else{S=x;var A=j+i[1]-i[0];O[0]=Math.min(w,(A+w)/2),O[1]=Math.max(w,(A+w)/2)}var k=[Math.min(w,(S+w)/2),Math.max(w,(S+w)/2)];if(e>k[0]&&e<=k[1]||e>=O[0]&&e<=O[1]){var D;return(D=r[u])===null||D===void 0?void 0:D.index}}else{var M=Math.min(x,j),z=Math.max(x,j);if(e>(M+w)/2&&e<=(z+w)/2){var K;return(K=r[u])===null||K===void 0?void 0:K.index}}}else if(t)for(var Q=0;Q<c;Q++){var ne=t[Q];if(ne!=null){var G=t[Q+1],I=t[Q-1];if(Q===0&&G!=null&&e<=(ne.coordinate+G.coordinate)/2||Q===c-1&&I!=null&&e>(ne.coordinate+I.coordinate)/2||Q>0&&Q<c-1&&I!=null&&G!=null&&e>(ne.coordinate+I.coordinate)/2&&e<=(ne.coordinate+G.coordinate)/2)return ne.index}}return-1},eF=()=>De(R0),p_=(e,t)=>t,PP=(e,t,r)=>r,g_=(e,t,r,n)=>n,tF=X(ui,e=>_m(e,t=>t.coordinate)),v_=X([ol,p_,PP,g_],_P),y_=X([v_,ll,su,uu],c_),rF=(e,t,r)=>{if(t!=null){var n=ol(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},MP=X([ol,p_,PP,g_],wP),Jf=X([ai,ii,et,dr,ui,g_,MP,cu],xP),nF=X([v_,Jf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),RP=X([ui,y_],pP),aF=X([MP,y_,si,su,RP,cu,p_],jP),iF=X([v_,y_],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),oF=(e,t,r,n,i,s,c)=>{if(!(!e||!r||!n||!i)&&J9(e,c)){var u=B4(e,t),m=TP(u,s,i,r,n),h=Z9(t,i,m,e);return{activeIndex:String(m),activeCoordinate:h}}},sF=(e,t,r,n,i,s,c)=>{if(!(!e||!n||!i||!s||!r)){var u=H6(e,r);if(u){var m=$4(u,t),h=TP(m,c,s,n,i),g=Q9(t,s,h,u);return{activeIndex:String(h),activeCoordinate:g}}}},lF=(e,t,r,n,i,s,c,u)=>{if(!(!e||!t||!n||!i||!s))return t==="horizontal"||t==="vertical"?oF(e,t,n,i,s,c,u):sF(e,t,r,n,i,s,c)},cF=X(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),uF=X(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(ir)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:Y8}});function OC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function CC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(r),!0).forEach(function(n){dF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dF(e,t,r){return(t=fF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fF(e){var t=mF(e,"string");return typeof t=="symbol"?t:t+""}function mF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hF={},pF={zIndexMap:Object.values(ir).reduce((e,t)=>CC(CC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),hF)},gF=new Set(Object.values(ir));function vF(e){return gF.has(e)}var qP=Jr({name:"zIndex",initialState:pF,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Nt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!vF(r)&&delete e.zIndexMap[r])},prepare:Nt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:Nt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Nt()}}}),{registerZIndexPortal:yF,unregisterZIndexPortal:bF,registerZIndexPortalElement:_F,unregisterZIndexPortalElement:xF}=qP.actions,wF=qP.reducer;function en(e){var{zIndex:t,children:r}=e,n=yU(),i=n&&t!==void 0&&t!==0,s=Pr(),c=Mt();y.useLayoutEffect(()=>i?(c(yF({zIndex:t})),()=>{c(bF({zIndex:t}))}):Yc,[c,t,i]);var u=De(m=>cF(m,t,s));return i?u?TN.createPortal(r,u):null:r}function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hb.apply(null,arguments)}function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(r),!0).forEach(function(n){jF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jF(e,t,r){return(t=SF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SF(e){var t=EF(e,"string");return typeof t=="symbol"?t:t+""}function EF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OF(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function CF(e){var t,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:c,layout:u,cursor:m,tooltipEventType:h,chartName:g}=e,p=r,_=n,x=i;if(!m||!p||g!=="ScatterChart"&&h!=="axis")return null;var w,j,S;if(g==="ScatterChart")w=p,j=n6,S=ir.cursorLine;else if(g==="BarChart")w=a6(u,p,s,c),j=TD,S=ir.cursorRectangle;else if(u==="radial"&&pk(p)){var{cx:O,cy:C,radius:A,startAngle:k,endAngle:D}=MD(p);w={cx:O,cy:C,startAngle:k,endAngle:D,innerRadius:A,outerRadius:A},j=qD,S=ir.cursorLine}else w={points:G6(u,p,s)},j=l0,S=ir.cursorLine;var M=typeof m=="object"&&"className"in m?m.className:void 0,z=Wd(Wd(Wd(Wd({stroke:"#ccc",pointerEvents:"none"},s),w),Ro(m)),{},{payload:_,payloadIndex:x,className:st("recharts-tooltip-cursor",M)});return y.createElement(en,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},y.createElement(OF,{cursor:m,cursorComp:j,cursorProps:z}))}function AF(e){var t=G9(),r=hD(),n=Yo(),i=eF();return t==null||r==null||n==null||i==null?null:y.createElement(CF,hb({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var LP=y.createContext(null),NF=()=>y.useContext(LP),Wv={exports:{}},NC;function kF(){return NC||(NC=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(m,h,g){this.fn=m,this.context=h,this.once=g||!1}function s(m,h,g,p,_){if(typeof g!="function")throw new TypeError("The listener must be a function");var x=new i(g,p||m,_),w=r?r+h:h;return m._events[w]?m._events[w].fn?m._events[w]=[m._events[w],x]:m._events[w].push(x):(m._events[w]=x,m._eventsCount++),m}function c(m,h){--m._eventsCount===0?m._events=new n:delete m._events[h]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],g,p;if(this._eventsCount===0)return h;for(p in g=this._events)t.call(g,p)&&h.push(r?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(g)):h},u.prototype.listeners=function(h){var g=r?r+h:h,p=this._events[g];if(!p)return[];if(p.fn)return[p.fn];for(var _=0,x=p.length,w=new Array(x);_<x;_++)w[_]=p[_].fn;return w},u.prototype.listenerCount=function(h){var g=r?r+h:h,p=this._events[g];return p?p.fn?1:p.length:0},u.prototype.emit=function(h,g,p,_,x,w){var j=r?r+h:h;if(!this._events[j])return!1;var S=this._events[j],O=arguments.length,C,A;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),O){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,g),!0;case 3:return S.fn.call(S.context,g,p),!0;case 4:return S.fn.call(S.context,g,p,_),!0;case 5:return S.fn.call(S.context,g,p,_,x),!0;case 6:return S.fn.call(S.context,g,p,_,x,w),!0}for(A=1,C=new Array(O-1);A<O;A++)C[A-1]=arguments[A];S.fn.apply(S.context,C)}else{var k=S.length,D;for(A=0;A<k;A++)switch(S[A].once&&this.removeListener(h,S[A].fn,void 0,!0),O){case 1:S[A].fn.call(S[A].context);break;case 2:S[A].fn.call(S[A].context,g);break;case 3:S[A].fn.call(S[A].context,g,p);break;case 4:S[A].fn.call(S[A].context,g,p,_);break;default:if(!C)for(D=1,C=new Array(O-1);D<O;D++)C[D-1]=arguments[D];S[A].fn.apply(S[A].context,C)}}return!0},u.prototype.on=function(h,g,p){return s(this,h,g,p,!1)},u.prototype.once=function(h,g,p){return s(this,h,g,p,!0)},u.prototype.removeListener=function(h,g,p,_){var x=r?r+h:h;if(!this._events[x])return this;if(!g)return c(this,x),this;var w=this._events[x];if(w.fn)w.fn===g&&(!_||w.once)&&(!p||w.context===p)&&c(this,x);else{for(var j=0,S=[],O=w.length;j<O;j++)(w[j].fn!==g||_&&!w[j].once||p&&w[j].context!==p)&&S.push(w[j]);S.length?this._events[x]=S.length===1?S[0]:S:c(this,x)}return this},u.prototype.removeAllListeners=function(h){var g;return h?(g=r?r+h:h,this._events[g]&&c(this,g)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Wv)),Wv.exports}var DF=kF();const TF=ri(DF);var Lc=new TF,pb="recharts.syncEvent.tooltip",kC="recharts.syncEvent.brush";function b_(e,t){if(t){var r=Number.parseInt(t,10);if(!ra(r))return e?.[r]}}var PF={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},zP=Jr({name:"options",initialState:PF,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),MF=zP.reducer,{createEventEmitter:RF}=zP.actions;function qF(e){return e.tooltip.syncInteraction}var LF={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},IP=Jr({name:"chartData",initialState:LF,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:DC,setDataStartEndIndexes:zF,setComputedData:dQ}=IP.actions,IF=IP.reducer,UF=["x","y"];function TC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TC(Object(r),!0).forEach(function(n){BF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BF(e,t,r){return(t=$F(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $F(e){var t=HF(e,"string");return typeof t=="symbol"?t:t+""}function HF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FF(e,t){if(e==null)return{};var r,n,i=KF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function KF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function YF(){var e=De(q0),t=De(L0),r=Mt(),n=De(RT),i=De(ui),s=Yo(),c=Mm(),u=De(m=>m.rootProps.className);y.useEffect(()=>{if(e==null)return Yc;var m=(h,g,p)=>{if(t!==p&&e===h){if(n==="index"){var _;if(c&&g!==null&&g!==void 0&&(_=g.payload)!==null&&_!==void 0&&_.coordinate&&g.payload.sourceViewBox){var x=g.payload.coordinate,{x:w,y:j}=x,S=FF(x,UF),{x:O,y:C,width:A,height:k}=g.payload.sourceViewBox,D=qs(qs({},S),{},{x:c.x+(A?(w-O)/A:0)*c.width,y:c.y+(k?(j-C)/k:0)*c.height});r(qs(qs({},g),{},{payload:qs(qs({},g.payload),{},{coordinate:D})}))}else r(g);return}if(i!=null){var M;if(typeof n=="function"){var z={activeTooltipIndex:g.payload.index==null?void 0:Number(g.payload.index),isTooltipActive:g.payload.active,activeIndex:g.payload.index==null?void 0:Number(g.payload.index),activeLabel:g.payload.label,activeDataKey:g.payload.dataKey,activeCoordinate:g.payload.coordinate},K=n(i,z);M=i[K]}else n==="value"&&(M=i.find(R=>String(R.value)===g.payload.label));var{coordinate:Q}=g.payload;if(M==null||g.payload.active===!1||Q==null||c==null){r(fb({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:ne,y:G}=Q,I=Math.min(ne,c.x+c.width),ie=Math.min(G,c.y+c.height),pe={x:s==="horizontal"?M.coordinate:I,y:s==="horizontal"?ie:M.coordinate},q=fb({active:g.payload.active,coordinate:pe,dataKey:g.payload.dataKey,index:String(M.index),label:g.payload.label,sourceViewBox:g.payload.sourceViewBox,graphicalItemId:g.payload.graphicalItemId});r(q)}}};return Lc.on(pb,m),()=>{Lc.off(pb,m)}},[u,r,t,e,n,i,s,c])}function GF(){var e=De(q0),t=De(L0),r=Mt();y.useEffect(()=>{if(e==null)return Yc;var n=(i,s,c)=>{t!==c&&e===i&&r(zF(s))};return Lc.on(kC,n),()=>{Lc.off(kC,n)}},[r,t,e])}function VF(){var e=Mt();y.useEffect(()=>{e(RF())},[e]),YF(),GF()}function WF(e,t,r,n,i,s){var c=De(x=>rF(x,e,t)),u=De(L0),m=De(q0),h=De(RT),g=De(qF),p=g?.active,_=Mm();y.useEffect(()=>{if(!p&&m!=null&&u!=null){var x=fb({active:s,coordinate:r,dataKey:c,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:_,graphicalItemId:void 0});Lc.emit(pb,m,x,u)}},[p,r,c,i,n,u,m,h,s,_])}function PC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PC(Object(r),!0).forEach(function(n){XF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XF(e,t,r){return(t=ZF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZF(e){var t=QF(e,"string");return typeof t=="symbol"?t:t+""}function QF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JF(e){return e.dataKey}function e7(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(qU,t)}var RC=[],t7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Xv(e){var t,r,n=xr(e,t7),{active:i,allowEscapeViewBox:s,animationDuration:c,animationEasing:u,content:m,filterNull:h,isAnimationActive:g,offset:p,payloadUniqBy:_,position:x,reverseDirection:w,useTranslate3d:j,wrapperStyle:S,cursor:O,shared:C,trigger:A,defaultIndex:k,portal:D,axisId:M}=n,z=Mt(),K=typeof k=="number"?String(k):k;y.useEffect(()=>{z(XH({shared:C,trigger:A,axisId:M,active:i,defaultIndex:K}))},[z,C,A,M,i,K]);var Q=Mm(),ne=CD(),G=FH(C),{activeIndex:I,isActive:ie}=(t=De(ge=>iF(ge,G,A,K)))!==null&&t!==void 0?t:{},pe=De(ge=>aF(ge,G,A,K)),q=De(ge=>RP(ge,G,A,K)),R=De(ge=>nF(ge,G,A,K)),U=pe,J=NF(),B=(r=i??ie)!==null&&r!==void 0?r:!1,[fe,je]=EI([U,B]),te=G==="axis"?q:void 0;WF(G,A,R,te,I,B);var H=D??J;if(H==null||Q==null||G==null)return null;var Ee=U??RC;B||(Ee=RC),h&&Ee.length&&(Ee=Z5(Ee.filter(ge=>ge.value!=null&&(ge.hide!==!0||n.includeHidden)),_,JF));var Te=Ee.length>0,Ie=y.createElement(HU,{allowEscapeViewBox:s,animationDuration:c,animationEasing:u,isAnimationActive:g,active:B,coordinate:R,hasPayload:Te,offset:p,position:x,reverseDirection:w,useTranslate3d:j,viewBox:Q,wrapperStyle:S,lastBoundingBox:fe,innerRef:je,hasPortalFromProps:!!D},e7(m,MC(MC({},n),{},{payload:Ee,label:te,active:B,activeIndex:I,coordinate:R,accessibilityLayer:ne})));return y.createElement(y.Fragment,null,TN.createPortal(Ie,H),B&&y.createElement(AF,{cursor:O,tooltipEventType:G,coordinate:R,payload:Ee,index:I}))}var fu=e=>null;fu.displayName="Cell";function r7(e,t,r){return(t=n7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n7(e){var t=a7(e,"string");return typeof t=="symbol"?t:t+""}function a7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class i7{constructor(t){r7(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function qC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function o7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qC(Object(r),!0).forEach(function(n){s7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s7(e,t,r){return(t=l7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l7(e){var t=c7(e,"string");return typeof t=="symbol"?t:t+""}function c7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var u7={cacheSize:2e3,enableCache:!0},UP=o7({},u7),LC=new i7(UP.cacheSize),d7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},zC="recharts_measurement_span";function f7(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",c=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(c,"|").concat(u)}var IC=(e,t)=>{try{var r=document.getElementById(zC);r||(r=document.createElement("span"),r.setAttribute("id",zC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,d7,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},wc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Im.isSsr)return{width:0,height:0};if(!UP.enableCache)return IC(t,r);var n=f7(t,r),i=LC.get(n);if(i)return i;var s=IC(t,r);return LC.set(n,s),s},BP;function m7(e,t,r){return(t=h7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h7(e){var t=p7(e,"string");return typeof t=="symbol"?t:t+""}function p7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var UC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,BC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g7=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,v7=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,y7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},b7=["cm","mm","pt","pc","in","Q","px"];function _7(e){return b7.includes(e)}var Is="NaN";function x7(e,t){return e*y7[t]}class Nr{static parse(t){var r,[,n,i]=(r=v7.exec(t))!==null&&r!==void 0?r:[];return n==null?Nr.NaN:new Nr(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ra(t)&&(this.unit=""),r!==""&&!g7.test(r)&&(this.num=NaN,this.unit=""),_7(r)&&(this.num=x7(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Nr(NaN,""):new Nr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ra(this.num)}}BP=Nr;m7(Nr,"NaN",new BP(NaN,""));function $P(e){if(e==null||e.includes(Is))return Is;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,s]=(r=UC.exec(t))!==null&&r!==void 0?r:[],c=Nr.parse(n??""),u=Nr.parse(s??""),m=i==="*"?c.multiply(u):c.divide(u);if(m.isNaN())return Is;t=t.replace(UC,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,g,p,_]=(h=BC.exec(t))!==null&&h!==void 0?h:[],x=Nr.parse(g??""),w=Nr.parse(_??""),j=p==="+"?x.add(w):x.subtract(w);if(j.isNaN())return Is;t=t.replace(BC,j.toString())}return t}var $C=/\(([^()]*)\)/;function w7(e){for(var t=e,r;(r=$C.exec(t))!=null;){var[,n]=r;t=t.replace($C,$P(n))}return t}function j7(e){var t=e.replace(/\s+/g,"");return t=w7(t),t=$P(t),t}function S7(e){try{return j7(e)}catch{return Is}}function Zv(e){var t=S7(e.slice(5,-1));return t===Is?"":t}var E7=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],O7=["dx","dy","angle","className","breakAll"];function gb(){return gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gb.apply(null,arguments)}function HC(e,t){if(e==null)return{};var r,n,i=C7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function C7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HP=/[ \f\n\r\t\v\u2028\u2029]+/,FP=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];Pt(t)||(r?i=t.toString().split(""):i=t.toString().split(HP));var s=i.map(u=>({word:u,width:wc(u,n).width})),c=r?0:wc("",n).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function A7(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var KP=(e,t,r,n)=>e.reduce((i,s)=>{var{word:c,width:u}=s,m=i[i.length-1];if(m&&u!=null&&(t==null||n||m.width+u+r<Number(t)))m.words.push(c),m.width+=u+r;else{var h={words:[c],width:u};i.push(h)}return i},[]),YP=e=>e.reduce((t,r)=>t.width>r.width?t:r),N7="",FC=(e,t,r,n,i,s,c,u)=>{var m=e.slice(0,t),h=FP({breakAll:r,style:n,children:m+N7});if(!h)return[!1,[]];var g=KP(h.wordsWithComputedWidth,s,c,u),p=g.length>i||YP(g).width>Number(s);return[p,g]},k7=(e,t,r,n,i)=>{var{maxLines:s,children:c,style:u,breakAll:m}=e,h=ke(s),g=String(c),p=KP(t,n,r,i);if(!h||i)return p;var _=p.length>s||YP(p).width>Number(n);if(!_)return p;for(var x=0,w=g.length-1,j=0,S;x<=w&&j<=g.length-1;){var O=Math.floor((x+w)/2),C=O-1,[A,k]=FC(g,C,m,u,s,n,r,i),[D]=FC(g,O,m,u,s,n,r,i);if(!A&&!D&&(x=O+1),A&&D&&(w=O-1),!A&&D){S=k;break}j++}return S||p},KC=e=>{var t=Pt(e)?[]:e.toString().split(HP);return[{words:t,width:void 0}]},D7=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:c}=e;if((t||r)&&!Im.isSsr){var u,m,h=FP({breakAll:s,children:n,style:i});if(h){var{wordsWithComputedWidth:g,spaceWidth:p}=h;u=g,m=p}else return KC(n);return k7({breakAll:s,children:n,maxLines:c,style:i},u,m,t,!!r)}return KC(n)},GP="#808080",T7={angle:0,breakAll:!1,capHeight:"0.71em",fill:GP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ah=y.forwardRef((e,t)=>{var r=xr(e,T7),{x:n,y:i,lineHeight:s,capHeight:c,fill:u,scaleToFit:m,textAnchor:h,verticalAnchor:g}=r,p=HC(r,E7),_=y.useMemo(()=>D7({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:m,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,m,p.style,p.width]),{dx:x,dy:w,angle:j,className:S,breakAll:O}=p,C=HC(p,O7);if(!ya(n)||!ya(i)||_.length===0)return null;var A=Number(n)+(ke(x)?x:0),k=Number(i)+(ke(w)?w:0);if(!Lt(A)||!Lt(k))return null;var D;switch(g){case"start":D=Zv("calc(".concat(c,")"));break;case"middle":D=Zv("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:D=Zv("calc(".concat(_.length-1," * -").concat(s,")"));break}var M=[];if(m){var z=_[0].width,{width:K}=p;M.push("scale(".concat(ke(K)&&ke(z)?K/z:1,")"))}return j&&M.push("rotate(".concat(j,", ").concat(A,", ").concat(k,")")),M.length&&(C.transform=M.join(" ")),y.createElement("text",gb({},Ir(C),{ref:t,x:A,y:k,className:st("recharts-text",S),textAnchor:h,fill:u.includes("url")?GP:u}),_.map((Q,ne)=>{var G=Q.words.join(O?"":" ");return y.createElement("tspan",{x:A,dy:ne===0?D:s,key:"".concat(G,"-").concat(ne)},G)}))});ah.displayName="Text";var P7=["labelRef"],M7=["content"];function YC(e,t){if(e==null)return{};var r,n,i=R7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function R7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(r),!0).forEach(function(n){q7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q7(e,t,r){return(t=L7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L7(e){var t=z7(e,"string");return typeof t=="symbol"?t:t+""}function z7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ha(){return Ha=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ha.apply(null,arguments)}var VP=y.createContext(null),I7=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c,children:u}=e,m=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c}),[t,r,n,i,s,c]);return y.createElement(VP.Provider,{value:m},u)},WP=()=>{var e=y.useContext(VP),t=Mm();return e||mD(t)},U7=y.createContext(null),B7=()=>{var e=y.useContext(U7),t=De(UT);return e||t},$7=e=>{var{value:t,formatter:r}=e,n=Pt(e.children)?t:e.children;return typeof r=="function"?r(n):n},__=e=>e!=null&&typeof e=="function",H7=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),360);return r*n},F7=(e,t,r,n,i)=>{var{offset:s,className:c}=e,{cx:u,cy:m,innerRadius:h,outerRadius:g,startAngle:p,endAngle:_,clockWise:x}=i,w=(h+g)/2,j=H7(p,_),S=j>=0?1:-1,O,C;switch(t){case"insideStart":O=p+S*s,C=x;break;case"insideEnd":O=_-S*s,C=!x;break;case"end":O=_+S*s,C=x;break;default:throw new Error("Unsupported position ".concat(t))}C=j<=0?C:!C;var A=ar(u,m,w,O),k=ar(u,m,w,O+(C?1:-1)*359),D="M".concat(A.x,",").concat(A.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),M=Pt(e.id)?Sc("recharts-radial-line-"):e.id;return y.createElement("text",Ha({},n,{dominantBaseline:"central",className:st("recharts-radial-bar-label",c)}),y.createElement("defs",null,y.createElement("path",{id:M,d:D})),y.createElement("textPath",{xlinkHref:"#".concat(M)},r))},K7=(e,t,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:c,startAngle:u,endAngle:m}=e,h=(u+m)/2;if(r==="outside"){var{x:g,y:p}=ar(n,i,c+t,h);return{x:g,y:p,textAnchor:g>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var _=(s+c)/2,{x,y:w}=ar(n,i,_,h);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},vb=e=>"cx"in e&&ke(e.cx),Y7=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,s;r!=null&&!vb(r)&&(s=r);var{x:c,y:u,upperWidth:m,lowerWidth:h,height:g}=t,p=c,_=c+(m-h)/2,x=(p+_)/2,w=(m+h)/2,j=p+m/2,S=g>=0?1:-1,O=S*n,C=S>0?"end":"start",A=S>0?"start":"end",k=m>=0?1:-1,D=k*n,M=k>0?"end":"start",z=k>0?"start":"end";if(i==="top"){var K={x:p+m/2,y:u-O,textAnchor:"middle",verticalAnchor:C};return Xt(Xt({},K),s?{height:Math.max(u-s.y,0),width:m}:{})}if(i==="bottom"){var Q={x:_+h/2,y:u+g+O,textAnchor:"middle",verticalAnchor:A};return Xt(Xt({},Q),s?{height:Math.max(s.y+s.height-(u+g),0),width:h}:{})}if(i==="left"){var ne={x:x-D,y:u+g/2,textAnchor:M,verticalAnchor:"middle"};return Xt(Xt({},ne),s?{width:Math.max(ne.x-s.x,0),height:g}:{})}if(i==="right"){var G={x:x+w+D,y:u+g/2,textAnchor:z,verticalAnchor:"middle"};return Xt(Xt({},G),s?{width:Math.max(s.x+s.width-G.x,0),height:g}:{})}var I=s?{width:w,height:g}:{};return i==="insideLeft"?Xt({x:x+D,y:u+g/2,textAnchor:z,verticalAnchor:"middle"},I):i==="insideRight"?Xt({x:x+w-D,y:u+g/2,textAnchor:M,verticalAnchor:"middle"},I):i==="insideTop"?Xt({x:p+m/2,y:u+O,textAnchor:"middle",verticalAnchor:A},I):i==="insideBottom"?Xt({x:_+h/2,y:u+g-O,textAnchor:"middle",verticalAnchor:C},I):i==="insideTopLeft"?Xt({x:p+D,y:u+O,textAnchor:z,verticalAnchor:A},I):i==="insideTopRight"?Xt({x:p+m-D,y:u+O,textAnchor:M,verticalAnchor:A},I):i==="insideBottomLeft"?Xt({x:_+D,y:u+g-O,textAnchor:z,verticalAnchor:C},I):i==="insideBottomRight"?Xt({x:_+h-D,y:u+g-O,textAnchor:M,verticalAnchor:C},I):i&&typeof i=="object"&&(ke(i.x)||Wa(i.x))&&(ke(i.y)||Wa(i.y))?Xt({x:c+Tr(i.x,w),y:u+Tr(i.y,g),textAnchor:"end",verticalAnchor:"end"},I):Xt({x:j,y:u+g/2,textAnchor:"middle",verticalAnchor:"middle"},I)},G7={angle:0,offset:5,zIndex:ir.label,position:"middle",textBreakAll:!1};function Ui(e){var t=xr(e,G7),{viewBox:r,position:n,value:i,children:s,content:c,className:u="",textBreakAll:m,labelRef:h}=t,g=B7(),p=WP(),_=n==="center"?p:g??p,x,w,j;if(r==null?x=_:vb(r)?x=r:x=mD(r),!x||Pt(i)&&Pt(s)&&!y.isValidElement(c)&&typeof c!="function")return null;var S=Xt(Xt({},t),{},{viewBox:x});if(y.isValidElement(c)){var{labelRef:O}=S,C=YC(S,P7);return y.cloneElement(c,C)}if(typeof c=="function"){var{content:A}=S,k=YC(S,M7);if(w=y.createElement(c,k),y.isValidElement(w))return w}else w=$7(t);var D=Ir(t);if(vb(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return F7(t,n,w,D,x);j=K7(x,t.offset,t.position)}else j=Y7(t,x);return y.createElement(en,{zIndex:t.zIndex},y.createElement(ah,Ha({ref:h,className:st("recharts-label",u)},D,j,{textAnchor:A7(D.textAnchor)?D.textAnchor:j.textAnchor,breakAll:m}),w))}Ui.displayName="Label";var V7=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(Ui,Ha({key:"label-implicit"},n)):ya(e)?y.createElement(Ui,Ha({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===Ui?y.cloneElement(e,Xt({key:"label-implicit"},n)):y.createElement(Ui,Ha({key:"label-implicit",content:e},n)):__(e)?y.createElement(Ui,Ha({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(Ui,Ha({},e,{key:"label-implicit"},n)):null};function W7(e){var{label:t,labelRef:r}=e,n=WP();return V7(t,n,r)||null}var Qv={},Jv={},VC;function X7(){return VC||(VC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Jv)),Jv}var ey={},WC;function Z7(){return WC||(WC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(ey)),ey}var XC;function Q7(){return XC||(XC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X7(),r=Z7(),n=Xb();function i(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=i})(Qv)),Qv}var ty,ZC;function J7(){return ZC||(ZC=1,ty=Q7().last),ty}var eK=J7();const tK=ri(eK);var rK=["valueAccessor"],nK=["dataKey","clockWise","id","textBreakAll","zIndex"];function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},em.apply(null,arguments)}function QC(e,t){if(e==null)return{};var r,n,i=aK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function aK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var iK=e=>Array.isArray(e.value)?tK(e.value):e.value,XP=y.createContext(void 0),ZP=XP.Provider,QP=y.createContext(void 0),oK=QP.Provider;function sK(){return y.useContext(XP)}function lK(){return y.useContext(QP)}function ff(e){var{valueAccessor:t=iK}=e,r=QC(e,rK),{dataKey:n,clockWise:i,id:s,textBreakAll:c,zIndex:u}=r,m=QC(r,nK),h=sK(),g=lK(),p=h||g;return!p||!p.length?null:y.createElement(en,{zIndex:u??ir.label},y.createElement(_r,{className:"recharts-label-list"},p.map((_,x)=>{var w,j=Pt(n)?t(_,x):vt(_&&_.payload,n),S=Pt(s)?{}:{id:"".concat(s,"-").concat(x)};return y.createElement(Ui,em({key:"label-".concat(x)},Ir(_),m,S,{fill:(w=r.fill)!==null&&w!==void 0?w:_.fill,parentViewBox:_.parentViewBox,value:j,textBreakAll:c,viewBox:_.viewBox,index:x,zIndex:0}))})))}ff.displayName="LabelList";function x_(e){var{label:t}=e;return t?t===!0?y.createElement(ff,{key:"labelList-implicit"}):y.isValidElement(t)||__(t)?y.createElement(ff,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(ff,em({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function yb(){return yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yb.apply(null,arguments)}var JP=e=>{var{cx:t,cy:r,r:n,className:i}=e,s=st("recharts-dot",i);return ke(t)&&ke(r)&&ke(n)?y.createElement("circle",yb({},yn(e),Wb(e),{className:s,cx:t,cy:r,r:n})):null},eM=e=>e.graphicalItems.polarItems,cK=X([Rt,au],H0),ih=X([eM,zt,cK],F0),uK=X([ih],K0),oh=X([uK,Ym],Y0),dK=X([oh,zt,ih],V0);X([oh,zt,ih],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var s,c=vt(n,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:vt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var JC=()=>{},fK=X([oh,zt,ih,eh,Rt],Q0),mK=X([zt,X0,Z0,JC,fK,JC,et,Rt],J0),tM=X([zt,et,oh,dK,nu,Rt,mK],e_),hK=X([tM,zt,il],n_);X([zt,tM,hK,Rt],i_);var pK={radiusAxis:{},angleAxis:{}},rM=Jr({name:"polarAxis",initialState:pK,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:fQ,removeRadiusAxis:mQ,addAngleAxis:hQ,removeAngleAxis:pQ}=rM.actions,gK=rM.reducer;function eA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function tA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eA(Object(r),!0).forEach(function(n){vK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vK(e,t,r){return(t=yK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yK(e){var t=bK(e,"string");return typeof t=="symbol"?t:t+""}function bK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _K=(e,t)=>t,w_=X([eM,_K],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),xK=[],j_=(e,t,r)=>r?.length===0?xK:r,nM=X([Ym,w_,j_],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(s=>tA(tA({},t.presentationProps),s.props))),i!=null)return i}}),wK=X([nM,w_,j_],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var s,c=vt(n,t.nameKey,t.name),u;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?u=n.fill:u=t.fill,{value:Js(c,t.dataKey),color:u,payload:n,type:t.legendType}})}),jK=X([nM,w_,j_,dr],(e,t,r,n)=>{if(!(t==null||e==null))return EY({offset:n,pieSettings:t,displayedData:e,cells:r})}),ry={exports:{}},gt={};var rA;function SK(){if(rA)return gt;rA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),g=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),_=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case r:case i:case n:case m:case h:case _:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case p:case g:return j;case s:return j;default:return S}}case t:return S}}}return gt.ContextConsumer=s,gt.ContextProvider=c,gt.Element=e,gt.ForwardRef=u,gt.Fragment=r,gt.Lazy=p,gt.Memo=g,gt.Portal=t,gt.Profiler=i,gt.StrictMode=n,gt.Suspense=m,gt.SuspenseList=h,gt.isContextConsumer=function(j){return w(j)===s},gt.isContextProvider=function(j){return w(j)===c},gt.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},gt.isForwardRef=function(j){return w(j)===u},gt.isFragment=function(j){return w(j)===r},gt.isLazy=function(j){return w(j)===p},gt.isMemo=function(j){return w(j)===g},gt.isPortal=function(j){return w(j)===t},gt.isProfiler=function(j){return w(j)===i},gt.isStrictMode=function(j){return w(j)===n},gt.isSuspense=function(j){return w(j)===m},gt.isSuspenseList=function(j){return w(j)===h},gt.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===i||j===n||j===m||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===p||j.$$typeof===g||j.$$typeof===c||j.$$typeof===s||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},gt.typeOf=w,gt}var nA;function EK(){return nA||(nA=1,ry.exports=SK()),ry.exports}var OK=EK(),aA=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",iA=null,ny=null,aM=e=>{if(e===iA&&Array.isArray(ny))return ny;var t=[];return y.Children.forEach(e,r=>{Pt(r)||(OK.isFragment(r)?t=t.concat(aM(r.props.children)):t.push(r))}),ny=t,iA=e,t};function S_(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>aA(i)):n=[aA(t)],aM(e).forEach(i=>{var s=Lo(i,"type.displayName")||Lo(i,"type.name");s&&n.indexOf(s)!==-1&&r.push(i)}),r}var iM=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,ay={},oA;function CK(){return oA||(oA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(ay)),ay}var iy,sA;function AK(){return sA||(sA=1,iy=CK().isPlainObject),iy}var NK=AK();const kK=ri(NK);var lA,cA,uA,dA,fA;function mA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(r),!0).forEach(function(n){DK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DK(e,t,r){return(t=TK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TK(e){var t=PK(e,"string");return typeof t=="symbol"?t:t+""}function PK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tm(){return tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},tm.apply(null,arguments)}function pc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var pA=(e,t,r,n,i)=>{var s=r-n,c;return c=Ft(lA||(lA=pc(["M ",",",""])),e,t),c+=Ft(cA||(cA=pc(["L ",",",""])),e+r,t),c+=Ft(uA||(uA=pc(["L ",",",""])),e+r-s/2,t+i),c+=Ft(dA||(dA=pc(["L ",",",""])),e+r-s/2-n,t+i),c+=Ft(fA||(fA=pc(["L ",","," Z"])),e,t),c},MK={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},RK=e=>{var t=xr(e,MK),{x:r,y:n,upperWidth:i,lowerWidth:s,height:c,className:u}=t,{animationEasing:m,animationDuration:h,animationBegin:g,isUpdateAnimationActive:p}=t,_=y.useRef(null),[x,w]=y.useState(-1),j=y.useRef(i),S=y.useRef(s),O=y.useRef(c),C=y.useRef(r),A=y.useRef(n),k=Qc(e,"trapezoid-");if(y.useEffect(()=>{if(_.current&&_.current.getTotalLength)try{var pe=_.current.getTotalLength();pe&&w(pe)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||c!==+c||i===0&&s===0||c===0)return null;var D=st("recharts-trapezoid",u);if(!p)return y.createElement("g",null,y.createElement("path",tm({},Ir(t),{className:D,d:pA(r,n,i,s,c)})));var M=j.current,z=S.current,K=O.current,Q=C.current,ne=A.current,G="0px ".concat(x===-1?1:x,"px"),I="".concat(x,"px 0px"),ie=AD(["strokeDasharray"],h,m);return y.createElement(Zc,{animationId:k,key:k,canBegin:x>0,duration:h,easing:m,isActive:p,begin:g},pe=>{var q=kt(M,i,pe),R=kt(z,s,pe),U=kt(K,c,pe),J=kt(Q,r,pe),B=kt(ne,n,pe);_.current&&(j.current=q,S.current=R,O.current=U,C.current=J,A.current=B);var fe=pe>0?{transition:ie,strokeDasharray:I}:{strokeDasharray:G};return y.createElement("path",tm({},Ir(t),{className:D,d:pA(J,B,q,R,U),ref:_,style:hA(hA({},fe),t.style)}))})},qK=["option","shapeType","activeClassName"];function LK(e,t){if(e==null)return{};var r,n,i=zK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function zK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function gA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function rm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gA(Object(r),!0).forEach(function(n){IK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IK(e,t,r){return(t=UK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UK(e){var t=BK(e,"string");return typeof t=="symbol"?t:t+""}function BK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $K(e,t){return rm(rm({},t),e)}function HK(e,t){return e==="symbols"}function vA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(TD,r);case"trapezoid":return y.createElement(RK,r);case"sector":return y.createElement(qD,r);case"symbols":if(HK(t))return y.createElement(hk,r);break;case"curve":return y.createElement(l0,r);default:return null}}function FK(e){return y.isValidElement(e)?e.props:e}function E_(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=LK(e,qK),s;if(y.isValidElement(t))s=y.cloneElement(t,rm(rm({},i),FK(t)));else if(typeof t=="function")s=t(i,i.index);else if(kK(t)&&typeof t!="boolean"){var c=$K(t,i);s=y.createElement(vA,{shapeType:r,elementProps:c})}else{var u=i;s=y.createElement(vA,{shapeType:r,elementProps:u})}return i.isActive?y.createElement(_r,{className:n},s):s}var O_=(e,t,r)=>{var n=Mt();return(i,s)=>c=>{e?.(i,s,c),n(vP({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},C_=e=>{var t=Mt();return(r,n)=>i=>{e?.(r,n,i),t(ZH())}},A_=(e,t,r)=>{var n=Mt();return(i,s)=>c=>{e?.(i,s,c),n(QH({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function N_(e){var{tooltipEntrySettings:t}=e,r=Mt(),n=Pr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(GH(t)):i.current!==t&&r(VH({prev:i.current,next:t})),i.current=t)},[t,r,n]),y.useLayoutEffect(()=>()=>{i.current&&(r(WH(i.current)),i.current=null)},[r]),null}function oM(e){var{legendPayload:t}=e,r=Mt(),n=Pr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(SD(t)):i.current!==t&&r(ED({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(OD(i.current)),i.current=null)},[r]),null}function KK(e){var{legendPayload:t}=e,r=Mt(),n=De(et),i=y.useRef(null);return y.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(SD(t)):i.current!==t&&r(ED({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(OD(i.current)),i.current=null)},[r]),null}var oy,YK=()=>{var[e]=y.useState(()=>Sc("uid-"));return e},GK=(oy=Oq.useId)!==null&&oy!==void 0?oy:YK;function VK(e,t){var r=GK();return t||(e?"".concat(e,"-").concat(r):r)}var WK=y.createContext(void 0),k_=e=>{var{id:t,type:r,children:n}=e,i=VK("recharts-".concat(r),t);return y.createElement(WK.Provider,{value:i},n(i))},XK={cartesianItems:[],polarItems:[]},sM=Jr({name:"graphicalItems",initialState:XK,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Nt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=ta(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:Nt()},removeCartesianGraphicalItem:{reducer(e,t){var r=ta(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Nt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Nt()},removePolarGraphicalItem:{reducer(e,t){var r=ta(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Nt()}}}),{addCartesianGraphicalItem:ZK,replaceCartesianGraphicalItem:QK,removeCartesianGraphicalItem:JK,addPolarGraphicalItem:eY,removePolarGraphicalItem:tY}=sM.actions,rY=sM.reducer,nY=e=>{var t=Mt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(ZK(e)):r.current!==e&&t(QK({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(JK(r.current)),r.current=null)},[t]),null},lM=y.memo(nY);function aY(e){var t=Mt();return y.useLayoutEffect(()=>(t(eY(e)),()=>{t(tY(e))}),[t,e]),null}var iY=["key"],oY=["onMouseEnter","onClick","onMouseLeave"],sY=["id"],lY=["id"];function yA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yA(Object(r),!0).forEach(function(n){cY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cY(e,t,r){return(t=uY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uY(e){var t=dY(e,"string");return typeof t=="symbol"?t:t+""}function dY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xi(){return Xi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xi.apply(null,arguments)}function sh(e,t){if(e==null)return{};var r,n,i=fY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function mY(e){var t=y.useMemo(()=>S_(e.children,fu),[e.children]),r=De(n=>wK(n,e.id,t));return r==null?null:y.createElement(KK,{legendPayload:r})}var hY=y.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:c,name:u,hide:m,tooltipType:h,id:g}=e,p={dataDefinedOnItem:n.map(_=>_.tooltipPayload),positions:n.map(_=>_.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:c,dataKey:t,nameKey:r,name:Js(u,t),hide:m,type:h,color:c,unit:"",graphicalItemId:g}};return y.createElement(N_,{tooltipEntrySettings:p})}),pY=(e,t)=>e>t?"start":e<t?"end":"middle",gY=(e,t,r)=>Tr(typeof t=="function"?t(e):t,r,r*.8),vY=(e,t,r)=>{var{top:n,left:i,width:s,height:c}=t,u=PD(s,c),m=i+Tr(e.cx,s,s/2),h=n+Tr(e.cy,c,c/2),g=Tr(e.innerRadius,u,0),p=gY(r,e.outerRadius,u),_=e.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:m,cy:h,innerRadius:g,outerRadius:p,maxRadius:_}},yY=(e,t)=>{var r=br(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function bY(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var _Y=(e,t)=>{if(y.isValidElement(e))return y.cloneElement(e,t);if(typeof e=="function")return e(t);var r=st("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=sh(t,iY);return y.createElement(l0,Xi({},i,{type:"linear",className:r}))},xY=(e,t,r)=>{if(y.isValidElement(e))return y.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),y.isValidElement(n)))return n;var i=st("recharts-pie-label-text",bY(e));return y.createElement(ah,Xi({},t,{alignmentBaseline:"middle",className:i}),n)};function wY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:s,dataKey:c}=r;if(!n||!i||!t)return null;var u=yn(r),m=Ro(i),h=Ro(s),g=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,p=t.map((_,x)=>{var w=(_.startAngle+_.endAngle)/2,j=ar(_.cx,_.cy,_.outerRadius+g,w),S=Kt(Kt(Kt(Kt({},u),_),{},{stroke:"none"},m),{},{index:x,textAnchor:pY(j.x,_.cx)},j),O=Kt(Kt(Kt(Kt({},u),_),{},{fill:"none",stroke:_.fill},h),{},{index:x,points:[ar(_.cx,_.cy,_.outerRadius,w),j],key:"line"});return y.createElement(en,{zIndex:ir.label,key:"label-".concat(_.startAngle,"-").concat(_.endAngle,"-").concat(_.midAngle,"-").concat(x)},y.createElement(_r,null,s&&_Y(s,O),xY(i,S,vt(_,c))))});return y.createElement(_r,{className:"recharts-pie-labels"},p)}function jY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?y.createElement(x_,{label:i}):y.createElement(wY,{sectors:t,props:r,showLabels:n})}function SY(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:s,id:c}=e,u=De(Wi),m=De(h_),h=De(L9),{onMouseEnter:g,onClick:p,onMouseLeave:_}=i,x=sh(i,oY),w=O_(g,i.dataKey,c),j=C_(_),S=A_(p,i.dataKey,c);return t==null||t.length===0?null:y.createElement(y.Fragment,null,t.map((O,C)=>{if(O?.startAngle===0&&O?.endAngle===0&&t.length!==1)return null;var A=h==null||h===c,k=String(C)===u&&(m==null||i.dataKey===m)&&A,D=u?n:null,M=r&&k?r:D,z=Kt(Kt({},O),{},{stroke:O.stroke,tabIndex:-1,[lD]:C,[cD]:c});return y.createElement(_r,Xi({key:"sector-".concat(O?.startAngle,"-").concat(O?.endAngle,"-").concat(O.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},bm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),y.createElement(E_,Xi({option:s??M,index:C,shapeType:"sector",isActive:k},z)))}))}function EY(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:s}=e,{cornerRadius:c,startAngle:u,endAngle:m,dataKey:h,nameKey:g,tooltipType:p}=r,_=Math.abs(r.minAngle),x=yY(u,m),w=Math.abs(x),j=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,S=n.filter(M=>vt(M,h,0)!==0).length,O=(w>=360?S:S-1)*j,C=w-S*_-O,A=n.reduce((M,z)=>{var K=vt(z,h,0);return M+(ke(K)?K:0)},0),k;if(A>0){var D;k=n.map((M,z)=>{var K=vt(M,h,0),Q=vt(M,g,z),ne=vY(r,s,M),G=(ke(K)?K:0)/A,I,ie=Kt(Kt({},M),i&&i[z]&&i[z].props);z?I=D.endAngle+br(x)*j*(K!==0?1:0):I=u;var pe=I+br(x)*((K!==0?_:0)+G*C),q=(I+pe)/2,R=(ne.innerRadius+ne.outerRadius)/2,U=[{name:Q,value:K,payload:ie,dataKey:h,type:p,graphicalItemId:r.id}],J=ar(ne.cx,ne.cy,R,q);return D=Kt(Kt(Kt(Kt({},r.presentationProps),{},{percent:G,cornerRadius:typeof c=="string"?parseFloat(c):c,name:Q,tooltipPayload:U,midAngle:q,middleRadius:R,tooltipPosition:J},ie),ne),{},{value:K,dataKey:h,startAngle:I,endAngle:pe,payload:ie,paddingAngle:br(x)*j}),D})}return k}function OY(e){var{showLabels:t,sectors:r,children:n}=e,i=y.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return y.createElement(oK,{value:t?i:void 0},n)}function CY(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,activeShape:h,inactiveShape:g,onAnimationStart:p,onAnimationEnd:_}=t,x=Qc(t,"recharts-pie-"),w=r.current,[j,S]=y.useState(!1),O=y.useCallback(()=>{typeof _=="function"&&_(),S(!1)},[_]),C=y.useCallback(()=>{typeof p=="function"&&p(),S(!0)},[p]);return y.createElement(OY,{showLabels:!j,sectors:i},y.createElement(Zc,{animationId:x,begin:c,duration:u,isActive:s,easing:m,onAnimationStart:C,onAnimationEnd:O,key:x},A=>{var k=[],D=i&&i[0],M=D?.startAngle;return i?.forEach((z,K)=>{var Q=w&&w[K],ne=K>0?Lo(z,"paddingAngle",0):0;if(Q){var G=kt(Q.endAngle-Q.startAngle,z.endAngle-z.startAngle,A),I=Kt(Kt({},z),{},{startAngle:M+ne,endAngle:M+G+ne});k.push(I),M=I.endAngle}else{var{endAngle:ie,startAngle:pe}=z,q=kt(0,ie-pe,A),R=Kt(Kt({},z),{},{startAngle:M+ne,endAngle:M+q+ne});k.push(R),M=R.endAngle}}),r.current=k,y.createElement(_r,null,y.createElement(SY,{sectors:k,activeShape:h,inactiveShape:g,allOtherPieProps:t,shape:t.shape,id:n}))}),y.createElement(jY,{showLabels:!j,sectors:i,props:t}),t.children)}var AY={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ir.area};function NY(e){var{id:t}=e,r=sh(e,sY),{hide:n,className:i,rootTabIndex:s}=e,c=y.useMemo(()=>S_(e.children,fu),[e.children]),u=De(g=>jK(g,t,c)),m=y.useRef(null),h=st("recharts-pie",i);return n||u==null?(m.current=null,y.createElement(_r,{tabIndex:s,className:h})):y.createElement(en,{zIndex:e.zIndex},y.createElement(hY,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:u,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),y.createElement(_r,{tabIndex:s,className:h},y.createElement(CY,{props:Kt(Kt({},r),{},{sectors:u}),previousSectorsRef:m,id:t})))}function cM(e){var t=xr(e,AY),{id:r}=t,n=sh(t,lY),i=yn(n);return y.createElement(k_,{id:r,type:"pie"},s=>y.createElement(y.Fragment,null,y.createElement(aY,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),y.createElement(mY,Xi({},n,{id:s})),y.createElement(NY,Xi({},n,{id:s}))))}cM.displayName="Pie";var kY=["points"];function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(n){DY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DY(e,t,r){return(t=TY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TY(e){var t=PY(e,"string");return typeof t=="symbol"?t:t+""}function PY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nm(){return nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nm.apply(null,arguments)}function MY(e,t){if(e==null)return{};var r,n,i=RY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function RY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function qY(e){var{option:t,dotProps:r,className:n}=e;if(y.isValidElement(t))return y.cloneElement(t,r);if(typeof t=="function")return t(r);var i=st(n,typeof t!="boolean"?t.className:""),s=r??{},{points:c}=s,u=MY(s,kY);return y.createElement(JP,nm({},u,{className:i}))}function LY(e,t){return e==null?!1:t?!0:e.length===1}function zY(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:s,baseProps:c,needClip:u,clipPathId:m,zIndex:h=ir.scatter}=e;if(!LY(t,r))return null;var g=iM(r),p=S3(r),_=t.map((w,j)=>{var S,O,C=sy(sy(sy({r:3},c),p),{},{index:j,cx:(S=w.x)!==null&&S!==void 0?S:void 0,cy:(O=w.y)!==null&&O!==void 0?O:void 0,dataKey:s,value:w.value,payload:w.payload,points:t});return y.createElement(qY,{key:"dot-".concat(j),option:r,dotProps:C,className:i})}),x={};return u&&m!=null&&(x.clipPath="url(#clipPath-".concat(g?"":"dots-").concat(m,")")),y.createElement(en,{zIndex:h},y.createElement(_r,nm({className:n},x),_))}function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(n){IY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IY(e,t,r){return(t=UY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UY(e){var t=BY(e,"string");return typeof t=="symbol"?t:t+""}function BY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uM=0,$Y={xAxis:{},yAxis:{},zAxis:{}},dM=Jr({name:"cartesianAxis",initialState:$Y,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Nt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Nt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Nt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Nt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Nt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Nt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Nt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Nt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Nt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var c=[...s,n].slice(-3);e.yAxis[r]=xA(xA({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:HY,replaceXAxis:FY,removeXAxis:KY,addYAxis:YY,replaceYAxis:GY,removeYAxis:VY,addZAxis:gQ,replaceZAxis:vQ,removeZAxis:yQ,updateYAxisWidth:WY}=dM.actions,XY=dM.reducer,ZY=X([dr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),QY=X([ZY,ai,ii],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),D_=()=>De(QY),JY=()=>De($9);function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ly(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){eG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eG(e,t,r){return(t=tG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tG(e){var t=rG(e,"string");return typeof t=="symbol"?t:t+""}function rG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nG=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:s,clipPath:c}=e;if(i===!1||t.x==null||t.y==null)return null;var u={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=ly(ly(ly({},u),Ro(i)),Wb(i)),h;return y.isValidElement(i)?h=y.cloneElement(i,m):typeof i=="function"?h=i(m):h=y.createElement(JP,m),y.createElement(_r,{className:"recharts-active-dot",clipPath:c},h)};function aG(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:s,zIndex:c=ir.activeDot}=e,u=De(Wi),m=JY();if(t==null||m==null)return null;var h=t.find(g=>m.includes(g.payload));return Pt(h)?null:y.createElement(en,{zIndex:c},y.createElement(nG,{point:h,childIndex:Number(u),mainColor:r,dataKey:i,activeDot:n,clipPath:s}))}var jA=(e,t,r)=>{var n=r??e;if(!Pt(n))return Tr(n,t,0)},iG=(e,t,r)=>{var n={},i=e.filter(Wm),s=e.filter(h=>h.stackId==null),c=i.reduce((h,g)=>(h[g.stackId]||(h[g.stackId]=[]),h[g.stackId].push(g),h),n),u=Object.entries(c).map(h=>{var[g,p]=h,_=p.map(w=>w.dataKey),x=jA(t,r,p[0].barSize);return{stackId:g,dataKeys:_,barSize:x}}),m=s.map(h=>{var g=[h.dataKey].filter(_=>_!=null),p=jA(t,r,h.barSize);return{stackId:void 0,dataKeys:g,barSize:p}});return[...u,...m]};function SA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SA(Object(r),!0).forEach(function(n){oG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oG(e,t,r){return(t=sG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sG(e){var t=lG(e,"string");return typeof t=="symbol"?t:t+""}function lG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cG(e,t,r,n,i){var s=n.length;if(!(s<1)){var c=Tr(e,r,0,!0),u,m=[];if(Lt(n[0].barSize)){var h=!1,g=r/s,p=n.reduce((O,C)=>O+(C.barSize||0),0);p+=(s-1)*c,p>=r&&(p-=(s-1)*c,c=0),p>=r&&g>0&&(h=!0,g*=.9,p=s*g);var _=(r-p)/2>>0,x={offset:_-c,size:0};u=n.reduce((O,C)=>{var A,k={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:x.offset+x.size+c,size:h?g:(A=C.barSize)!==null&&A!==void 0?A:0}},D=[...O,k];return x=D[D.length-1].position,D},m)}else{var w=Tr(t,r,0,!0);r-2*w-(s-1)*c<=0&&(c=0);var j=(r-2*w-(s-1)*c)/s;j>1&&(j>>=0);var S=Lt(i)?Math.min(j,i):j;u=n.reduce((O,C,A)=>[...O,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:w+(j+c)*A+(j-S)/2,size:S}}],m)}return u}}var uG=(e,t,r,n,i,s,c)=>{var u=Pt(c)?t:c,m=cG(r,n,i!==s?i:s,e,u);return i!==s&&m!=null&&(m=m.map(h=>Xd(Xd({},h),{},{position:Xd(Xd({},h.position),{},{offset:h.position.offset-i/2})}))),m},dG=(e,t)=>{var r=B0(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===r)}}}};function fG(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Lt(e.zIndex)?e.zIndex:t}var fM=e=>{var{chartData:t}=e,r=Mt(),n=Pr();return y.useEffect(()=>n?()=>{}:(r(DC(t)),()=>{r(DC(void 0))}),[t,r,n]),null},EA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},mM=Jr({name:"brush",initialState:EA,reducers:{setBrushSettings(e,t){return t.payload==null?EA:t.payload}}}),{setBrushSettings:bQ}=mM.actions,mG=mM.reducer;function OA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OA(Object(r),!0).forEach(function(n){hM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hM(e,t,r){return(t=hG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hG(e){var t=pG(e,"string");return typeof t=="symbol"?t:t+""}function pG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gG=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return{x:Math.min(r,i),y:Math.min(n,s),width:Math.abs(i-r),height:Math.abs(s-n)}},_Q=e=>{var{x1:t,y1:r,x2:n,y2:i}=e;return gG({x:t,y:r},{x:n,y:i})};class lh{static create(t){return new lh(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}hM(lh,"EPS",1e-4);var xQ=e=>{var t=Object.keys(e).reduce((r,n)=>Zd(Zd({},r),{},{[n]:lh.create(e[n])}),{});return Zd(Zd({},t),{},{apply(r){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(r).map(s=>{var[c,u]=s;return[c,t[c].apply(u,{bandAware:n,position:i})]}))},isInRange(r){return Object.keys(r).every(n=>t[n].isInRange(r[n]))}})};function vG(e){return(e%180+180)%180}var yG=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=vG(i),c=s*Math.PI/180,u=Math.atan(n/r),m=c>u&&c<Math.PI-u?n/Math.sin(c):r/Math.cos(c);return Math.abs(m)},bG={dots:[],areas:[],lines:[]},pM=Jr({name:"referenceElements",initialState:bG,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ta(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ta(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ta(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:wQ,removeDot:jQ,addArea:SQ,removeArea:EQ,addLine:OQ,removeLine:CQ}=pM.actions,_G=pM.reducer,gM=y.createContext(void 0),xG=e=>{var{children:t}=e,[r]=y.useState("".concat(Sc("recharts"),"-clip")),n=D_();if(n==null)return null;var{x:i,y:s,width:c,height:u}=n;return y.createElement(gM.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:i,y:s,height:u,width:c}))),t)},AQ=()=>y.useContext(gM);function vM(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function wG(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return yG(n,r)}function jG(e,t,r){var n=r==="width",{x:i,y:s,width:c,height:u}=e;return t===1?{start:n?i:s,end:n?i+c:s+u}:{start:n?i+c:s+u,end:n?i:s}}function zc(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function SG(e,t){return vM(e,t+1)}function EG(e,t,r,n,i){for(var s=(n||[]).slice(),{start:c,end:u}=t,m=0,h=1,g=c,p=function(){var w=n?.[m];if(w===void 0)return{v:vM(n,h)};var j=m,S,O=()=>(S===void 0&&(S=r(w,j)),S),C=w.coordinate,A=m===0||zc(e,C,O,g,u);A||(m=0,g=c,h+=1),A&&(g=C+e*(O()/2+i),m+=h)},_;h<=s.length;)if(_=p(),_)return _.v;return[]}function OG(e,t,r,n,i){var s=(n||[]).slice(),c=s.length;if(c===0)return[];for(var{start:u,end:m}=t,h=1;h<=c;h++){for(var g=(c-1)%h,p=u,_=!0,x=function(){var C=n[w],A=w,k,D=()=>(k===void 0&&(k=r(C,A)),k),M=C.coordinate,z=w===g||zc(e,M,D,p,m);if(!z)return _=!1,1;z&&(p=M+e*(D()/2+i))},w=g;w<c&&!x();w+=h);if(_){for(var j=[],S=g;S<c;S+=h)j.push(n[S]);return j}}return[]}function CA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(r),!0).forEach(function(n){CG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CG(e,t,r){return(t=AG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AG(e){var t=NG(e,"string");return typeof t=="symbol"?t:t+""}function NG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kG(e,t,r,n,i){for(var s=(n||[]).slice(),c=s.length,{start:u}=t,{end:m}=t,h=function(_){var x=s[_],w,j=()=>(w===void 0&&(w=r(x,_)),w);if(_===c-1){var S=e*(x.coordinate+e*j()/2-m);s[_]=x=kr(kr({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else s[_]=x=kr(kr({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var O=zc(e,x.tickCoord,j,u,m);O&&(m=x.tickCoord-e*(j()/2+i),s[_]=kr(kr({},x),{},{isShow:!0}))}},g=c-1;g>=0;g--)h(g);return s}function DG(e,t,r,n,i,s){var c=(n||[]).slice(),u=c.length,{start:m,end:h}=t;if(s){var g=n[u-1],p=r(g,u-1),_=e*(g.coordinate+e*p/2-h);if(c[u-1]=g=kr(kr({},g),{},{tickCoord:_>0?g.coordinate-_*e:g.coordinate}),g.tickCoord!=null){var x=zc(e,g.tickCoord,()=>p,m,h);x&&(h=g.tickCoord-e*(p/2+i),c[u-1]=kr(kr({},g),{},{isShow:!0}))}}for(var w=s?u-1:u,j=function(C){var A=c[C],k,D=()=>(k===void 0&&(k=r(A,C)),k);if(C===0){var M=e*(A.coordinate-e*D()/2-m);c[C]=A=kr(kr({},A),{},{tickCoord:M<0?A.coordinate-M*e:A.coordinate})}else c[C]=A=kr(kr({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var z=zc(e,A.tickCoord,D,m,h);z&&(m=A.tickCoord+e*(D()/2+i),c[C]=kr(kr({},A),{},{isShow:!0}))}},S=0;S<w;S++)j(S);return c}function T_(e,t,r){var{tick:n,ticks:i,viewBox:s,minTickGap:c,orientation:u,interval:m,tickFormatter:h,unit:g,angle:p}=e;if(!i||!i.length||!n)return[];if(ke(m)||Im.isSsr){var _;return(_=SG(i,ke(m)?m:0))!==null&&_!==void 0?_:[]}var x=[],w=u==="top"||u==="bottom"?"width":"height",j=g&&w==="width"?wc(g,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(A,k)=>{var D=typeof h=="function"?h(A.value,k):A.value;return w==="width"?wG(wc(D,{fontSize:t,letterSpacing:r}),j,p):wc(D,{fontSize:t,letterSpacing:r})[w]},O=i.length>=2?br(i[1].coordinate-i[0].coordinate):1,C=jG(s,O,w);return m==="equidistantPreserveStart"?EG(O,C,S,i,c):m==="equidistantPreserveEnd"?OG(O,C,S,i,c):(m==="preserveStart"||m==="preserveStartEnd"?x=DG(O,C,S,i,c,m==="preserveStartEnd"):x=kG(O,C,S,i,c),x.filter(A=>A.isShow))}var TG=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=e,c=0;if(t){Array.from(t).forEach(g=>{if(g){var p=g.getBoundingClientRect();p.width>c&&(c=p.width)}});var u=r?r.getBoundingClientRect().width:0,m=i+s,h=c+m+u+(r?n:0);return Math.round(h)}return 0},PG=["axisLine","width","height","className","hide","ticks","axisType"];function MG(e,t){if(e==null)return{};var r,n,i=RG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function RG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$o.apply(null,arguments)}function AA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AA(Object(r),!0).forEach(function(n){qG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qG(e,t,r){return(t=LG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LG(e){var t=zG(e,"string");return typeof t=="symbol"?t:t+""}function zG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ga={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:ir.axis};function IG(e){var{x:t,y:r,width:n,height:i,orientation:s,mirror:c,axisLine:u,otherSvgProps:m}=e;if(!u)return null;var h=nr(nr(nr({},m),yn(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var g=+(s==="top"&&!c||s==="bottom"&&c);h=nr(nr({},h),{},{x1:t,y1:r+g*i,x2:t+n,y2:r+g*i})}else{var p=+(s==="left"&&!c||s==="right"&&c);h=nr(nr({},h),{},{x1:t+p*n,y1:r,x2:t+p*n,y2:r+i})}return y.createElement("line",$o({},h,{className:st("recharts-cartesian-axis-line",Lo(u,"className"))}))}function UG(e,t,r,n,i,s,c,u,m){var h,g,p,_,x,w,j=u?-1:1,S=e.tickSize||c,O=ke(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=g=e.coordinate,_=r+ +!u*i,p=_-j*S,w=p-j*m,x=O;break;case"left":p=_=e.coordinate,g=t+ +!u*n,h=g-j*S,x=h-j*m,w=O;break;case"right":p=_=e.coordinate,g=t+ +u*n,h=g+j*S,x=h+j*m,w=O;break;default:h=g=e.coordinate,_=r+ +u*i,p=_+j*S,w=p+j*m,x=O;break}return{line:{x1:h,y1:p,x2:g,y2:_},tick:{x,y:w}}}function BG(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function $G(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function HG(e){var{option:t,tickProps:r,value:n}=e,i,s=st(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))i=y.cloneElement(t,nr(nr({},r),{},{className:s}));else if(typeof t=="function")i=t(nr(nr({},r),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=st(c,t?.className)),i=y.createElement(ah,$o({},r,{className:c}),n)}return i}var FG=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:c,unit:u,padding:m,tickTextProps:h,orientation:g,mirror:p,x:_,y:x,width:w,height:j,tickSize:S,tickMargin:O,fontSize:C,letterSpacing:A,getTicksConfig:k,events:D,axisType:M}=e,z=T_(nr(nr({},k),{},{ticks:r}),C,A),K=BG(g,p),Q=$G(g,p),ne=yn(k),G=Ro(n),I={};typeof i=="object"&&(I=i);var ie=nr(nr({},ne),{},{fill:"none"},I),pe=z.map(U=>nr({entry:U},UG(U,_,x,w,j,g,S,p,O))),q=pe.map(U=>{var{entry:J,line:B}=U;return y.createElement(_r,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(J.value,"-").concat(J.coordinate,"-").concat(J.tickCoord)},i&&y.createElement("line",$o({},ie,B,{className:st("recharts-cartesian-axis-tick-line",Lo(i,"className"))})))}),R=pe.map((U,J)=>{var{entry:B,tick:fe}=U,je=nr(nr(nr(nr({textAnchor:K,verticalAnchor:Q},ne),{},{stroke:"none",fill:s},G),fe),{},{index:J,payload:B,visibleTicksCount:z.length,tickFormatter:c,padding:m},h);return y.createElement(_r,$o({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(B.value,"-").concat(B.coordinate,"-").concat(B.tickCoord)},bm(D,B,J)),n&&y.createElement(HG,{option:n,tickProps:je,value:"".concat(typeof c=="function"?c(B.value,J):B.value).concat(u||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},R.length>0&&y.createElement(en,{zIndex:ir.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:t},R)),q.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},q))}),KG=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:s,hide:c,ticks:u,axisType:m}=e,h=MG(e,PG),[g,p]=y.useState(""),[_,x]=y.useState(""),w=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return TG({ticks:w.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=y.useCallback(S=>{if(S){var O=S.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=O;var C=O[0];if(C){var A=window.getComputedStyle(C),k=A.fontSize,D=A.letterSpacing;(k!==g||D!==_)&&(p(k),x(D))}}},[g,_]);return c||n!=null&&n<=0||i!=null&&i<=0?null:y.createElement(en,{zIndex:e.zIndex},y.createElement(_r,{className:st("recharts-cartesian-axis",s)},y.createElement(IG,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:yn(e)}),y.createElement(FG,{ref:j,axisType:m,events:h,fontSize:g,getTicksConfig:e,height:e.height,letterSpacing:_,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(I7,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(W7,{label:e.label,labelRef:e.labelRef}),e.children)))}),P_=y.forwardRef((e,t)=>{var r=xr(e,Ga);return y.createElement(KG,$o({},r,{ref:t}))});P_.displayName="CartesianAxis";var YG=["x1","y1","x2","y2","key"],GG=["offset"],VG=["xAxisId","yAxisId"],WG=["xAxisId","yAxisId"];function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){XG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XG(e,t,r){return(t=ZG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZG(e){var t=QG(e,"string");return typeof t=="symbol"?t:t+""}function QG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function No(){return No=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},No.apply(null,arguments)}function am(e,t){if(e==null)return{};var r,n,i=JG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function JG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eV=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:c,ry:u}=e;return y.createElement("rect",{x:n,y:i,ry:u,width:s,height:c,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function yM(e){var{option:t,lineItemProps:r}=e,n;if(y.isValidElement(t))n=y.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:s,y1:c,x2:u,y2:m,key:h}=r,g=am(r,YG),p=(i=yn(g))!==null&&i!==void 0?i:{},{offset:_}=p,x=am(p,GG);n=y.createElement("line",No({},x,{x1:s,y1:c,x2:u,y2:m,fill:"none",key:h}))}return n}function tV(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=am(e,VG),m=i.map((h,g)=>{var p=Dr(Dr({},u),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(g),index:g});return y.createElement(yM,{key:"line-".concat(g),option:n,lineItemProps:p})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function rV(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=am(e,WG),m=i.map((h,g)=>{var p=Dr(Dr({},u),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(g),index:g});return y.createElement(yM,{option:n,lineItemProps:p,key:"line-".concat(g)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function nV(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:s,height:c,horizontalPoints:u,horizontal:m=!0}=e;if(!m||!t||!t.length||u==null)return null;var h=u.map(p=>Math.round(p+i-i)).sort((p,_)=>p-_);i!==h[0]&&h.unshift(0);var g=h.map((p,_)=>{var x=!h[_+1],w=x?i+c-p:h[_+1]-p;if(w<=0)return null;var j=_%t.length;return y.createElement("rect",{key:"react-".concat(_),y:p,x:n,height:w,width:s,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},g)}function aV(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:c,height:u,verticalPoints:m}=e;if(!t||!r||!r.length)return null;var h=m.map(p=>Math.round(p+i-i)).sort((p,_)=>p-_);i!==h[0]&&h.unshift(0);var g=h.map((p,_)=>{var x=!h[_+1],w=x?i+c-p:h[_+1]-p;if(w<=0)return null;var j=_%r.length;return y.createElement("rect",{key:"react-".concat(_),x:p,y:s,width:w,height:u,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},g)}var iV=(e,t)=>{var{xAxis:r,width:n,height:i,offset:s}=e;return iD(T_(Dr(Dr(Dr({},Ga),r),{},{ticks:oD(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},oV=(e,t)=>{var{yAxis:r,width:n,height:i,offset:s}=e;return iD(T_(Dr(Dr(Dr({},Ga),r),{},{ticks:oD(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},sV={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:ir.grid};function bb(e){var t=pD(),r=gD(),n=hD(),i=Dr(Dr({},xr(e,sV)),{},{x:ke(e.x)?e.x:n.left,y:ke(e.y)?e.y:n.top,width:ke(e.width)?e.width:n.width,height:ke(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:c,x:u,y:m,width:h,height:g,syncWithTicks:p,horizontalValues:_,verticalValues:x}=i,w=Pr(),j=De(Q=>bC(Q,"xAxis",s,w)),S=De(Q=>bC(Q,"yAxis",c,w));if(!ba(h)||!ba(g)||!ke(u)||!ke(m))return null;var O=i.verticalCoordinatesGenerator||iV,C=i.horizontalCoordinatesGenerator||oV,{horizontalPoints:A,verticalPoints:k}=i;if((!A||!A.length)&&typeof C=="function"){var D=_&&_.length,M=C({yAxis:S?Dr(Dr({},S),{},{ticks:D?_:S.ticks}):void 0,width:t??h,height:r??g,offset:n},D?!0:p);Tf(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(A=M)}if((!k||!k.length)&&typeof O=="function"){var z=x&&x.length,K=O({xAxis:j?Dr(Dr({},j),{},{ticks:z?x:j.ticks}):void 0,width:t??h,height:r??g,offset:n},z?!0:p);Tf(Array.isArray(K),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof K,"]")),Array.isArray(K)&&(k=K)}return y.createElement(en,{zIndex:i.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(eV,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),y.createElement(nV,No({},i,{horizontalPoints:A})),y.createElement(aV,No({},i,{verticalPoints:k})),y.createElement(tV,No({},i,{offset:n,horizontalPoints:A,xAxis:j,yAxis:S})),y.createElement(rV,No({},i,{offset:n,verticalPoints:k,xAxis:j,yAxis:S}))))}bb.displayName="CartesianGrid";var lV={},bM=Jr({name:"errorBars",initialState:lV,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:NQ,replaceErrorBar:kQ,removeErrorBar:DQ}=bM.actions,cV=bM.reducer,uV=["children"];function dV(e,t){if(e==null)return{};var r,n,i=fV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function fV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mV={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},hV=y.createContext(mV);function _M(e){var{children:t}=e,r=dV(e,uV);return y.createElement(hV.Provider,{value:r},t)}function M_(e,t){var r,n,i=De(h=>li(h,e)),s=De(h=>ci(h,t)),c=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:gr.allowDataOverflow,u=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:vr.allowDataOverflow,m=c||u;return{needClip:m,needClipX:c,needClipY:u}}function xM(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=D_(),{needClipX:s,needClipY:c,needClip:u}=M_(t,r);if(!u||!i)return null;var{x:m,y:h,width:g,height:p}=i;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:s?m:m-g/2,y:c?h:h-p/2,width:s?g:g*2,height:c?p:p*2}))}var wM=(e,t,r,n)=>Vi(e,"xAxis",t,n),jM=(e,t,r,n)=>Gi(e,"xAxis",t,n),SM=(e,t,r,n)=>Vi(e,"yAxis",r,n),EM=(e,t,r,n)=>Gi(e,"yAxis",r,n),pV=X([et,wM,SM,jM,EM],(e,t,r,n,i)=>Zi(e,"xAxis")?Fs(t,n,!1):Fs(r,i,!1)),gV=(e,t,r,n,i)=>i;function vV(e){return e.type==="line"}var yV=X([Qm,gV],(e,t)=>e.filter(vV).find(r=>r.id===t)),bV=X([et,wM,SM,jM,EM,yV,pV,T0],(e,t,r,n,i,s,c,u)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:g}=u;if(!(s==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||c==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:p,data:_}=s,x;if(_!=null&&_.length>0?x=_:x=m?.slice(h,g+1),x!=null)return oW({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:p,bandSize:c,displayedData:x})}});function _V(e){var t=Ro(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:s}=t,c=Number(i),u=Number(s);return(Number.isNaN(c)||c<0)&&(c=r),(Number.isNaN(u)||u<0)&&(u=n),{r:c,strokeWidth:u}}return{r,strokeWidth:n}}var cy={exports:{}},uy={};var kA;function xV(){if(kA)return uy;kA=1;var e=dm();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,c=e.useMemo,u=e.useDebugValue;return uy.useSyncExternalStoreWithSelector=function(m,h,g,p,_){var x=i(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=c(function(){function S(D){if(!O){if(O=!0,C=D,D=p(D),_!==void 0&&w.hasValue){var M=w.value;if(_(M,D))return A=M}return A=D}if(M=A,r(C,D))return M;var z=p(D);return _!==void 0&&_(M,z)?(C=D,M):(C=D,A=z)}var O=!1,C,A,k=g===void 0?null:g;return[function(){return S(h())},k===null?void 0:function(){return S(k())}]},[h,g,p,_]);var j=n(m,x[0],x[1]);return s(function(){w.hasValue=!0,w.value=j},[j]),u(j),j},uy}var DA;function wV(){return DA||(DA=1,cy.exports=xV()),cy.exports}wV();function jV(e){e()}function SV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){jV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var TA={notify(){},get:()=>[]};function EV(e,t){let r,n=TA,i=0,s=!1;function c(j){g();const S=n.subscribe(j);let O=!1;return()=>{O||(O=!0,S(),p())}}function u(){n.notify()}function m(){w.onStateChange&&w.onStateChange()}function h(){return s}function g(){i++,r||(r=e.subscribe(m),n=SV())}function p(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=TA)}function _(){s||(s=!0,g())}function x(){s&&(s=!1,p())}const w={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:m,isSubscribed:h,trySubscribe:_,tryUnsubscribe:x,getListeners:()=>n};return w}var OV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CV=OV(),AV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",NV=AV(),kV=()=>CV||NV?y.useLayoutEffect:y.useEffect,DV=kV();function PA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function TV(e,t){if(PA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!PA(e[r[i]],t[r[i]]))return!1;return!0}var PV=Symbol.for("react-redux-context"),MV=typeof globalThis<"u"?globalThis:{};function RV(){if(!y.createContext)return{};const e=MV[PV]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var qV=RV();function LV(e){const{children:t,context:r,serverState:n,store:i}=e,s=y.useMemo(()=>{const m=EV(i);return{store:i,subscription:m,getServerState:n?()=>n:void 0}},[i,n]),c=y.useMemo(()=>i.getState(),[i]);DV(()=>{const{subscription:m}=s;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[s,c]);const u=r||qV;return y.createElement(u.Provider,{value:s},t)}var zV=LV,IV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function UV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function ch(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(IV.has(n)){if(e[n]==null&&t[n]==null)continue;if(!TV(e[n],t[n]))return!1}else if(!UV(e[n],t[n]))return!1;return!0}var BV=["id"],$V=["type","layout","connectNulls","needClip","shape"],HV=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Ic(){return Ic=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ic.apply(null,arguments)}function MA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ha(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MA(Object(r),!0).forEach(function(n){FV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FV(e,t,r){return(t=KV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KV(e){var t=YV(e,"string");return typeof t=="symbol"?t:t+""}function YV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R_(e,t){if(e==null)return{};var r,n,i=GV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function GV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var VV=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Js(r,t),payload:e}]},WV=y.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:s,name:c,hide:u,unit:m,tooltipType:h,id:g}=e,p={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:Js(c,t),hide:u,type:h,color:n,unit:m,graphicalItemId:g}};return y.createElement(N_,{tooltipEntrySettings:p})}),OM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function XV(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var ZV=(e,t,r)=>{var n=r.reduce((p,_)=>p+_);if(!n)return OM(t,e);for(var i=Math.floor(e/n),s=e%n,c=t-e,u=[],m=0,h=0;m<r.length;h+=r[m],++m)if(h+r[m]>s){u=[...r.slice(0,m),s-h];break}var g=u.length%2===0?[0,c]:[c];return[...XV(r,i),...u,...g].map(p=>"".concat(p,"px")).join(", ")};function QV(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:s,needClip:c}=n,{id:u}=n,m=R_(n,BV),h=yn(m);return y.createElement(zY,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:c,clipPathId:t})}function JV(e){var{showLabels:t,children:r,points:n}=e,i=y.useMemo(()=>n?.map(s=>{var c,u,m={x:(c=s.x)!==null&&c!==void 0?c:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return ha(ha({},m),{},{value:s.value,payload:s.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[n]);return y.createElement(ZP,{value:t?i:void 0},r)}function RA(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:s}=e,{type:c,layout:u,connectNulls:m,needClip:h,shape:g}=s,p=R_(s,$V),_=ha(ha({},Ir(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:c,layout:u,connectNulls:m,strokeDasharray:i??s.strokeDasharray});return y.createElement(y.Fragment,null,n?.length>1&&y.createElement(E_,Ic({shapeType:"curve",option:g},_,{pathRef:r})),y.createElement(QV,{points:n,clipPathId:t,props:s}))}function eW(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function tW(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:c,strokeDasharray:u,isAnimationActive:m,animationBegin:h,animationDuration:g,animationEasing:p,animateNewValues:_,width:x,height:w,onAnimationEnd:j,onAnimationStart:S}=r,O=i.current,C=Qc(c,"recharts-line-"),A=y.useRef(C),[k,D]=y.useState(!1),M=!k,z=y.useCallback(()=>{typeof j=="function"&&j(),D(!1)},[j]),K=y.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),Q=eW(n.current),ne=y.useRef(0);A.current!==C&&(ne.current=s.current,A.current=C);var G=ne.current;return y.createElement(JV,{points:c,showLabels:M},r.children,y.createElement(Zc,{animationId:C,begin:h,duration:g,isActive:m,easing:p,onAnimationEnd:z,onAnimationStart:K,key:C},I=>{var ie=kt(G,Q+G,I),pe=Math.min(ie,Q),q;if(m)if(u){var R="".concat(u).split(/[,\s]+/gim).map(B=>parseFloat(B));q=ZV(pe,Q,R)}else q=OM(Q,pe);else q=u==null?void 0:String(u);if(I>0&&Q>0&&(i.current=c,s.current=Math.max(s.current,pe)),O){var U=O.length/c.length,J=I===1?c:c.map((B,fe)=>{var je=Math.floor(fe*U);if(O[je]){var te=O[je];return ha(ha({},B),{},{x:kt(te.x,B.x,I),y:kt(te.y,B.y,I)})}return _?ha(ha({},B),{},{x:kt(x*2,B.x,I),y:kt(w/2,B.y,I)}):ha(ha({},B),{},{x:B.x,y:B.y})});return i.current=J,y.createElement(RA,{props:r,points:J,clipPathId:t,pathRef:n,strokeDasharray:q})}return y.createElement(RA,{props:r,points:c,clipPathId:t,pathRef:n,strokeDasharray:q})}),y.createElement(x_,{label:r.label}))}function rW(e){var{clipPathId:t,props:r}=e,n=y.useRef(null),i=y.useRef(0),s=y.useRef(null);return y.createElement(tW,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var nW=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:vt(e.payload,t)}};class aW extends y.Component{render(){var{hide:t,dot:r,points:n,className:i,xAxisId:s,yAxisId:c,top:u,left:m,width:h,height:g,id:p,needClip:_,zIndex:x}=this.props;if(t)return null;var w=st("recharts-line",i),j=p,{r:S,strokeWidth:O}=_V(r),C=iM(r),A=S*2+O,k=_?"url(#clipPath-".concat(C?"":"dots-").concat(j,")"):void 0;return y.createElement(en,{zIndex:x},y.createElement(_r,{className:w},_&&y.createElement("defs",null,y.createElement(xM,{clipPathId:j,xAxisId:s,yAxisId:c}),!C&&y.createElement("clipPath",{id:"clipPath-dots-".concat(j)},y.createElement("rect",{x:m-A/2,y:u-A/2,width:h+A,height:g+A}))),y.createElement(_M,{xAxisId:s,yAxisId:c,data:n,dataPointFormatter:nW,errorBarOffset:0},y.createElement(rW,{props:this.props,clipPathId:j}))),y.createElement(aG,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var CM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ir.line,type:"linear"};function iW(e){var t=xr(e,CM),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,connectNulls:u,dot:m,hide:h,isAnimationActive:g,label:p,legendType:_,xAxisId:x,yAxisId:w,id:j}=t,S=R_(t,HV),{needClip:O}=M_(x,w),C=D_(),A=Yo(),k=Pr(),D=De(ne=>bV(ne,x,w,k,j));if(A!=="horizontal"&&A!=="vertical"||D==null||C==null)return null;var{height:M,width:z,x:K,y:Q}=C;return y.createElement(aW,Ic({},S,{id:j,connectNulls:u,dot:m,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,isAnimationActive:g,hide:h,label:p,legendType:_,xAxisId:x,yAxisId:w,points:D,layout:A,height:M,width:z,left:K,top:Q,needClip:O}))}function oW(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:c,bandSize:u,displayedData:m}=e;return m.map((h,g)=>{var p=vt(h,c);if(t==="horizontal"){var _=jE({axis:r,ticks:i,bandSize:u,entry:h,index:g}),x=Pt(p)?null:n.scale(p);return{x:_,y:x,value:p,payload:h}}var w=Pt(p)?null:r.scale(p),j=jE({axis:n,ticks:s,bandSize:u,entry:h,index:g});return w==null||j==null?null:{x:w,y:j,value:p,payload:h}}).filter(Boolean)}function sW(e){var t=xr(e,CM),r=Pr();return y.createElement(k_,{id:t.id,type:"line"},n=>y.createElement(y.Fragment,null,y.createElement(oM,{legendPayload:VV(t)}),y.createElement(WV,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),y.createElement(lM,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),y.createElement(iW,Ic({},t,{id:n}))))}var AM=y.memo(sW,ch);AM.displayName="Line";function Wo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:uM}function Xo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:uM}var lW="Invariant failed";function cW(e,t){throw new Error(lW)}function _b(){return _b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_b.apply(null,arguments)}function im(e){return y.createElement(E_,_b({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var uW=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(ke(t))return t;var s=ke(n)||Pt(n);return s?t(n,i):(s||cW(),r)}},dW=(e,t,r)=>r,fW=(e,t)=>t,mu=X([Qm,fW],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),mW=X([mu],e=>e?.maxBarSize),hW=(e,t,r,n)=>n,pW=X([et,Qm,Wo,Xo,dW],(e,t,r,n,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),gW=(e,t,r)=>{var n=et(e),i=Wo(e,t),s=Xo(e,t);if(!(i==null||s==null))return n==="horizontal"?db(e,"yAxis",s,r):db(e,"xAxis",i,r)},vW=(e,t)=>{var r=et(e),n=Wo(e,t),i=Xo(e,t);if(!(n==null||i==null))return r==="horizontal"?yC(e,"xAxis",n):yC(e,"yAxis",i)},yW=X([pW,U8,vW],iG),bW=(e,t,r)=>{var n,i,s=mu(e,t);if(s!=null){var c=Wo(e,t),u=Xo(e,t);if(!(c==null||u==null)){var m=et(e),h=TT(e),{maxBarSize:g}=s,p=Pt(g)?h:g,_,x;return m==="horizontal"?(_=Vi(e,"xAxis",c,r),x=Gi(e,"xAxis",c,r)):(_=Vi(e,"yAxis",u,r),x=Gi(e,"yAxis",u,r)),(n=(i=Fs(_,x,!0))!==null&&i!==void 0?i:p)!==null&&n!==void 0?n:0}}},NM=(e,t,r)=>{var n=et(e),i=Wo(e,t),s=Xo(e,t);if(!(i==null||s==null)){var c,u;return n==="horizontal"?(c=Vi(e,"xAxis",i,r),u=Gi(e,"xAxis",i,r)):(c=Vi(e,"yAxis",s,r),u=Gi(e,"yAxis",s,r)),Fs(c,u)}},_W=X([yW,TT,I8,PT,bW,NM,mW],uG),xW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Vi(e,"xAxis",n,r)},wW=(e,t,r)=>{var n=Xo(e,t);if(n!=null)return Vi(e,"yAxis",n,r)},jW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Gi(e,"xAxis",n,r)},SW=(e,t,r)=>{var n=Xo(e,t);if(n!=null)return Gi(e,"yAxis",n,r)},EW=X([_W,mu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),OW=X([gW,mu],dG),CW=X([dr,a0,xW,wW,jW,SW,EW,et,C8,NM,OW,mu,hW],(e,t,r,n,i,s,c,u,m,h,g,p,_)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:j}=m;if(!(p==null||c==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||i==null||s==null||h==null)){var{data:S}=p,O;if(S!=null&&S.length>0?O=S:O=x?.slice(w,j+1),O!=null)return rX({layout:u,barSettings:p,pos:c,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:g,displayedData:O,offset:e,cells:_,dataStartIndex:w})}}),AW=["index"];function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xb.apply(null,arguments)}function NW(e,t){if(e==null)return{};var r,n,i=kW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function kW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kM=y.createContext(void 0),DW=e=>{var t=y.useContext(kM);if(t!=null)return t.stackId;if(e!=null)return q4(e)},TW=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),PW=e=>{var t=y.useContext(kM);if(t!=null){var{stackId:r}=t;return"url(#".concat(TW(r,e),")")}},MW=e=>{var{index:t}=e,r=NW(e,AW),n=PW(t);return y.createElement(_r,xb({className:"recharts-bar-stack-layer",clipPath:n},r))},RW=["onMouseEnter","onMouseLeave","onClick"],qW=["value","background","tooltipPosition"],LW=["id"],zW=["onMouseEnter","onClick","onMouseLeave"];function ti(){return ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ti.apply(null,arguments)}function qA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(r),!0).forEach(function(n){IW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IW(e,t,r){return(t=UW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UW(e){var t=BW(e,"string");return typeof t=="symbol"?t:t+""}function BW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function om(e,t){if(e==null)return{};var r,n,i=$W(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $W(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HW=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Js(r,t),payload:e}]},FW=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:s,hide:c,unit:u,tooltipType:m,id:h}=e,g={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Js(s,t),hide:c,type:m,color:i,unit:u,graphicalItemId:h}};return y.createElement(N_,{tooltipEntrySettings:g})});function KW(e){var t=De(Wi),{data:r,dataKey:n,background:i,allOtherBarProps:s}=e,{onMouseEnter:c,onMouseLeave:u,onClick:m}=s,h=om(s,RW),g=O_(c,n,s.id),p=C_(u),_=A_(m,n,s.id);if(!i||r==null)return null;var x=Ro(i);return y.createElement(en,{zIndex:fG(i,ir.barBackground)},r.map((w,j)=>{var{value:S,background:O,tooltipPosition:C}=w,A=om(w,qW);if(!O)return null;var k=g(w,j),D=p(w,j),M=_(w,j),z=Lr(Lr(Lr(Lr(Lr({option:i,isActive:String(j)===t},A),{},{fill:"#eee"},O),x),bm(h,w,j)),{},{onMouseEnter:k,onMouseLeave:D,onClick:M,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return y.createElement(im,ti({key:"background-bar-".concat(j)},z))}))}function YW(e){var{showLabels:t,children:r,rects:n}=e,i=n?.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Lr(Lr({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return y.createElement(ZP,{value:t?i:void 0},r)}function GW(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:s,dataKey:c}=e,u=De(Wi),m=De(h_),h=r&&String(s)===u&&(m==null||c===m),g=h?r:t;return h?y.createElement(en,{zIndex:ir.activeBar},y.createElement(im,ti({},n,{name:String(n.name)},i,{isActive:h,option:g,index:s,dataKey:c}))):y.createElement(im,ti({},n,{name:String(n.name)},i,{isActive:h,option:g,index:s,dataKey:c}))}function VW(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:s}=e;return y.createElement(im,ti({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:s}))}function WW(e){var t,{data:r,props:n}=e,i=(t=yn(n))!==null&&t!==void 0?t:{},{id:s}=i,c=om(i,LW),{shape:u,dataKey:m,activeBar:h}=n,{onMouseEnter:g,onClick:p,onMouseLeave:_}=n,x=om(n,zW),w=O_(g,m,s),j=C_(_),S=A_(p,m,s);return r?y.createElement(y.Fragment,null,r.map((O,C)=>y.createElement(MW,ti({index:C,key:"rectangle-".concat(O?.x,"-").concat(O?.y,"-").concat(O?.value,"-").concat(C),className:"recharts-bar-rectangle"},bm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),h?y.createElement(GW,{shape:u,activeBar:h,baseProps:c,entry:O,index:C,dataKey:m}):y.createElement(VW,{shape:u,baseProps:c,entry:O,index:C,dataKey:m})))):null}function XW(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,onAnimationEnd:h,onAnimationStart:g}=t,p=r.current,_=Qc(t,"recharts-bar-"),[x,w]=y.useState(!1),j=!x,S=y.useCallback(()=>{typeof h=="function"&&h(),w(!1)},[h]),O=y.useCallback(()=>{typeof g=="function"&&g(),w(!0)},[g]);return y.createElement(YW,{showLabels:j,rects:n},y.createElement(Zc,{animationId:_,begin:c,duration:u,isActive:s,easing:m,onAnimationEnd:S,onAnimationStart:O,key:_},C=>{var A=C===1?n:n?.map((k,D)=>{var M=p&&p[D];if(M)return Lr(Lr({},k),{},{x:kt(M.x,k.x,C),y:kt(M.y,k.y,C),width:kt(M.width,k.width,C),height:kt(M.height,k.height,C)});if(i==="horizontal"){var z=kt(0,k.height,C),K=kt(k.stackedBarStart,k.y,C);return Lr(Lr({},k),{},{y:K,height:z})}var Q=kt(0,k.width,C),ne=kt(k.stackedBarStart,k.x,C);return Lr(Lr({},k),{},{width:Q,x:ne})});return C>0&&(r.current=A??null),A==null?null:y.createElement(_r,null,y.createElement(WW,{props:t,data:A}))}),y.createElement(x_,{label:t.label}),t.children)}function ZW(e){var t=y.useRef(null);return y.createElement(XW,{previousRectanglesRef:t,props:e})}var DM=0,QW=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:vt(e,t)}};class JW extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:s,yAxisId:c,needClip:u,background:m,id:h}=this.props;if(t||r==null)return null;var g=st("recharts-bar",i),p=h;return y.createElement(_r,{className:g,id:h},u&&y.createElement("defs",null,y.createElement(xM,{clipPathId:p,xAxisId:s,yAxisId:c})),y.createElement(_r,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},y.createElement(KW,{data:r,dataKey:n,background:m,allOtherBarProps:this.props}),y.createElement(ZW,this.props)))}}var eX={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:DM,xAxisId:0,yAxisId:0,zIndex:ir.bar};function tX(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:g}=e,{needClip:p}=M_(t,r),_=Yo(),x=Pr(),w=S_(e.children,fu),j=De(C=>CW(C,e.id,x,w));if(_!=="vertical"&&_!=="horizontal")return null;var S,O=j?.[0];return O==null||O.height==null||O.width==null?S=0:S=_==="vertical"?O.height/2:O.width/2,y.createElement(_M,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:QW,errorBarOffset:S},y.createElement(JW,ti({},e,{layout:_,needClip:p,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:g})))}function rX(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:c,yAxis:u,xAxisTicks:m,yAxisTicks:h,stackedData:g,displayedData:p,offset:_,cells:x,parentViewBox:w,dataStartIndex:j}=e,S=t==="horizontal"?u:c,O=g?S.scale.domain():null,C=L4({numericAxis:S}),A=S.scale(C);return p.map((k,D)=>{var M,z,K,Q,ne,G;if(g){var I=g[D+j];if(I==null)return null;M=D4(I,O)}else M=vt(k,r),Array.isArray(M)||(M=[C,M]);var ie=uW(n,DM)(M[1],D);if(t==="horizontal"){var pe,[q,R]=[u.scale(M[0]),u.scale(M[1])];z=SE({axis:c,ticks:m,bandSize:s,offset:i.offset,entry:k,index:D}),K=(pe=R??q)!==null&&pe!==void 0?pe:void 0,Q=i.size;var U=q-R;if(ne=ra(U)?0:U,G={x:z,y:_.top,width:Q,height:_.height},Math.abs(ie)>0&&Math.abs(ne)<Math.abs(ie)){var J=br(ne||ie)*(Math.abs(ie)-Math.abs(ne));K-=J,ne+=J}}else{var[B,fe]=[c.scale(M[0]),c.scale(M[1])];if(z=B,K=SE({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:k,index:D}),Q=fe-B,ne=i.size,G={x:_.left,y:K,width:_.width,height:ne},Math.abs(ie)>0&&Math.abs(Q)<Math.abs(ie)){var je=br(Q||ie)*(Math.abs(ie)-Math.abs(Q));Q+=je}}if(z==null||K==null||Q==null||ne==null)return null;var te=Lr(Lr({},k),{},{stackedBarStart:A,x:z,y:K,width:Q,height:ne,value:g?M:M[1],payload:k,background:G,tooltipPosition:{x:z+Q/2,y:K+ne/2},parentViewBox:w},x&&x[D]&&x[D].props);return te}).filter(Boolean)}function nX(e){var t=xr(e,eX),r=DW(t.stackId),n=Pr();return y.createElement(k_,{id:t.id,type:"bar"},i=>y.createElement(y.Fragment,null,y.createElement(oM,{legendPayload:HW(t)}),y.createElement(FW,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),y.createElement(lM,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),y.createElement(en,{zIndex:t.zIndex},y.createElement(tX,ti({},t,{id:i})))))}var TM=y.memo(nX,ch);TM.displayName="Bar";var aX=["domain","range"],iX=["domain","range"];function LA(e,t){if(e==null)return{};var r,n,i=oX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function oX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zA(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function PM(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=LA(e,aX),{domain:s,range:c}=t,u=LA(t,iX);return!zA(r,s)||!zA(n,c)?!1:ch(i,u)}var sX=["dangerouslySetInnerHTML","ticks","scale"],lX=["id","scale"];function wb(){return wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wb.apply(null,arguments)}function IA(e,t){if(e==null)return{};var r,n,i=cX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function cX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function uX(e){var t=Mt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(HY(e)):r.current!==e&&t(FY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(KY(r.current)),r.current=null)},[t]),null}var dX=e=>{var{xAxisId:t,className:r}=e,n=De(a0),i=Pr(),s="xAxis",c=De(O=>dP(O,s,t,i)),u=De(O=>sP(O,t)),m=De(O=>LH(O,t)),h=De(O=>$T(O,t));if(u==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:g,ticks:p,scale:_}=e,x=IA(e,sX),{id:w,scale:j}=h,S=IA(h,lX);return y.createElement(P_,wb({},x,S,{x:m.x,y:m.y,width:u.width,height:u.height,className:st("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:c,axisType:s}))},fX={allowDataOverflow:gr.allowDataOverflow,allowDecimals:gr.allowDecimals,allowDuplicatedCategory:gr.allowDuplicatedCategory,angle:gr.angle,axisLine:Ga.axisLine,height:gr.height,hide:!1,includeHidden:gr.includeHidden,interval:gr.interval,minTickGap:gr.minTickGap,mirror:gr.mirror,orientation:gr.orientation,padding:gr.padding,reversed:gr.reversed,scale:gr.scale,tick:gr.tick,tickCount:gr.tickCount,tickLine:Ga.tickLine,tickSize:Ga.tickSize,type:gr.type,xAxisId:0},mX=e=>{var t=xr(e,fX);return y.createElement(y.Fragment,null,y.createElement(uX,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(dX,t))},jb=y.memo(mX,PM);jb.displayName="XAxis";var hX=["dangerouslySetInnerHTML","ticks","scale"],pX=["id","scale"];function Sb(){return Sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sb.apply(null,arguments)}function UA(e,t){if(e==null)return{};var r,n,i=gX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function gX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function vX(e){var t=Mt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(YY(e)):r.current!==e&&t(GY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(VY(r.current)),r.current=null)},[t]),null}var yX=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,s=y.useRef(null),c=y.useRef(null),u=De(a0),m=Pr(),h=Mt(),g="yAxis",p=De(M=>lP(M,t)),_=De(M=>IH(M,t)),x=De(M=>dP(M,g,t,m)),w=De(M=>HT(M,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!p||__(i)||y.isValidElement(i)||w==null)){var M=s.current;if(M){var z=M.getCalculatedWidth();Math.round(p.width)!==Math.round(z)&&h(WY({id:t,width:z}))}}},[x,p,h,i,t,n,w]),p==null||_==null||w==null)return null;var{dangerouslySetInnerHTML:j,ticks:S,scale:O}=e,C=UA(e,hX),{id:A,scale:k}=w,D=UA(w,pX);return y.createElement(P_,Sb({},C,D,{ref:s,labelRef:c,x:_.x,y:_.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:p.width,height:p.height,className:st("recharts-".concat(g," ").concat(g),r),viewBox:u,ticks:x,axisType:g}))},bX={allowDataOverflow:vr.allowDataOverflow,allowDecimals:vr.allowDecimals,allowDuplicatedCategory:vr.allowDuplicatedCategory,angle:vr.angle,axisLine:Ga.axisLine,hide:!1,includeHidden:vr.includeHidden,interval:vr.interval,minTickGap:vr.minTickGap,mirror:vr.mirror,orientation:vr.orientation,padding:vr.padding,reversed:vr.reversed,scale:vr.scale,tick:vr.tick,tickCount:vr.tickCount,tickLine:Ga.tickLine,tickSize:Ga.tickSize,type:vr.type,width:vr.width,yAxisId:0},_X=e=>{var t=xr(e,bX);return y.createElement(y.Fragment,null,y.createElement(vX,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(yX,t))},Eb=y.memo(_X,PM);Eb.displayName="YAxis";var xX=(e,t)=>t,q_=X([xX,et,UT,mr,CP,ui,tF,dr],lF),L_=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},MM=Un("mouseClick"),RM=Vc();RM.startListening({actionCreator:MM,effect:(e,t)=>{var r=e.payload,n=q_(t.getState(),L_(r));n?.activeIndex!=null&&t.dispatch(JH({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Ob=Un("mouseMove"),qM=Vc(),Qd=null;qM.startListening({actionCreator:Ob,effect:(e,t)=>{var r=e.payload;Qd!==null&&cancelAnimationFrame(Qd);var n=L_(r);Qd=requestAnimationFrame(()=>{var i=t.getState(),s=l_(i,i.tooltip.settings.shared);if(s==="axis"){var c=q_(i,n);c?.activeIndex!=null?t.dispatch(bP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):t.dispatch(yP())}Qd=null})}});function wX(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var BA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},LM=Jr({name:"rootProps",initialState:BA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:BA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),jX=LM.reducer,{updateOptions:SX}=LM.actions,zM=Jr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:EX}=zM.actions,OX=zM.reducer,IM=Un("keyDown"),UM=Un("focus"),z_=Vc();z_.startListening({actionCreator:IM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=c_(i,ll(r),su(r),uu(r)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var m=ui(r);if(s==="Enter"){var h=Jf(r,"axis","hover",String(i.index));t.dispatch(mb({active:!i.active,activeIndex:i.index,activeCoordinate:h}));return}var g=HH(r),p=g==="left-to-right"?1:-1,_=s==="ArrowRight"?1:-1,x=u+_*p;if(!(m==null||x>=m.length||x<0)){var w=Jf(r,"axis","hover",String(x));t.dispatch(mb({active:!0,activeIndex:x.toString(),activeCoordinate:w}))}}}}}});z_.startListening({actionCreator:UM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",c=Jf(r,"axis","hover",String(s));t.dispatch(mb({active:!0,activeIndex:s,activeCoordinate:c}))}}}});var qn=Un("externalEvent"),BM=Vc(),dy=new Map;BM.startListening({actionCreator:qn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,s=dy.get(i);s!==void 0&&cancelAnimationFrame(s);var c=requestAnimationFrame(()=>{try{var u=t.getState(),m={activeCoordinate:I9(u),activeDataKey:h_(u),activeIndex:Wi(u),activeLabel:kP(u),activeTooltipIndex:Wi(u),isTooltipActive:U9(u)};r(m,n)}finally{dy.delete(i)}});dy.set(i,c)}}});var CX=X([ol],e=>e.tooltipItemPayloads),AX=X([CX,cu,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(u=>u.settings.graphicalItemId===n);if(i!=null){var{positions:s}=i;if(s!=null){var c=t(s,r);return c}}}),$M=Un("touchMove"),HM=Vc();HM.startListening({actionCreator:$M,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=l_(n,n.tooltip.settings.shared);if(i==="axis"){var s=r.touches[0];if(s==null)return;var c=q_(n,L_({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));c?.activeIndex!=null&&t.dispatch(bP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,m=r.touches[0];if(document.elementFromPoint==null||m==null)return;var h=document.elementFromPoint(m.clientX,m.clientY);if(!h||!h.getAttribute)return;var g=h.getAttribute(lD),p=(u=h.getAttribute(cD))!==null&&u!==void 0?u:void 0,_=sl(n).find(j=>j.id===p);if(g==null||_==null||p==null)return;var{dataKey:x}=_,w=AX(n,g,p);t.dispatch(vP({activeDataKey:x,activeIndex:g,activeCoordinate:w,activeGraphicalItemId:p}))}}}});var NX=kk({brush:mG,cartesianAxis:XY,chartData:IF,errorBars:cV,graphicalItems:rY,layout:E4,legend:DU,options:MF,polarAxis:gK,polarOptions:OX,referenceElements:_G,rootProps:jX,tooltip:e9,zIndex:wF}),kX=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return XI({reducer:NX,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([RM.middleware,qM.middleware,z_.middleware,BM.middleware,HM.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(Kk({type:"raf"}))},devTools:{serialize:{replacer:wX},name:"recharts-".concat(r)}})};function FM(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Pr(),s=y.useRef(null);if(i)return r;s.current==null&&(s.current=kX(t,n));var c=Zb;return y.createElement(zV,{context:c,store:s.current},r)}function DX(e){var{layout:t,margin:r}=e,n=Mt(),i=Pr();return y.useEffect(()=>{i||(n(w4(t)),n(x4(r)))},[n,i,t,r]),null}var KM=y.memo(DX,ch);function YM(e){var t=Mt();return y.useEffect(()=>{t(SX(e))},[t,e]),null}function $A(e){var{zIndex:t,isPanorama:r}=e,n=y.useRef(null),i=Mt();return y.useLayoutEffect(()=>(n.current&&i(_F({zIndex:t,element:n.current,isPanorama:r})),()=>{i(xF({zIndex:t,isPanorama:r}))}),[i,t,r]),y.createElement("g",{tabIndex:-1,ref:n})}function HA(e){var{children:t,isPanorama:r}=e,n=De(uF);if(!n||n.length===0)return t;var i=n.filter(c=>c<0),s=n.filter(c=>c>0);return y.createElement(y.Fragment,null,i.map(c=>y.createElement($A,{key:c,zIndex:c,isPanorama:r})),t,s.map(c=>y.createElement($A,{key:c,zIndex:c,isPanorama:r})))}var TX=["children"];function PX(e,t){if(e==null)return{};var r,n,i=MX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function MX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sm(){return sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sm.apply(null,arguments)}var RX={width:"100%",height:"100%",display:"block"},qX=y.forwardRef((e,t)=>{var r=pD(),n=gD(),i=CD();if(!ba(r)||!ba(n))return null;var{children:s,otherAttributes:c,title:u,desc:m}=e,h,g;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=i?0:void 0,typeof c.role=="string"?g=c.role:g=i?"application":void 0),y.createElement(YN,sm({},c,{title:u,desc:m,role:g,tabIndex:h,width:r,height:n,style:RX,ref:t}),s)}),LX=e=>{var{children:t}=e,r=De(Pm);if(!r)return null;var{width:n,height:i,y:s,x:c}=r;return y.createElement(YN,{width:n,height:i,x:c,y:s},t)},FA=y.forwardRef((e,t)=>{var{children:r}=e,n=PX(e,TX),i=Pr();return i?y.createElement(LX,null,y.createElement(HA,{isPanorama:!0},r)):y.createElement(qX,sm({ref:t},n),y.createElement(HA,{isPanorama:!1},r))});function zX(){var e=Mt(),[t,r]=y.useState(null),n=De(H4);return y.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;Lt(s)&&s!==n&&e(S4(s))}},[t,e,n]),r}function KA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function IX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KA(Object(r),!0).forEach(function(n){UX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UX(e,t,r){return(t=BX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BX(e){var t=$X(e,"string");return typeof t=="symbol"?t:t+""}function $X(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ho(){return Ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ho.apply(null,arguments)}var HX=()=>(VF(),null);function lm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var FX=y.forwardRef((e,t)=>{var r,n,i=y.useRef(null),[s,c]=y.useState({containerWidth:lm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:lm((n=e.style)===null||n===void 0?void 0:n.height)}),u=y.useCallback((h,g)=>{c(p=>{var _=Math.round(h),x=Math.round(g);return p.containerWidth===_&&p.containerHeight===x?p:{containerWidth:_,containerHeight:x}})},[]),m=y.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:g,height:p}=h.getBoundingClientRect();u(g,p);var _=w=>{var{width:j,height:S}=w[0].contentRect;u(j,S)},x=new ResizeObserver(_);x.observe(h),i.current=x}},[t,u]);return y.useEffect(()=>()=>{var h=i.current;h?.disconnect()},[u]),y.createElement(y.Fragment,null,y.createElement(Rm,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",Ho({ref:m},e)))}),KX=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,s]=y.useState({containerWidth:lm(r),containerHeight:lm(n)}),c=y.useCallback((m,h)=>{s(g=>{var p=Math.round(m),_=Math.round(h);return g.containerWidth===p&&g.containerHeight===_?g:{containerWidth:p,containerHeight:_}})},[]),u=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:h,height:g}=m.getBoundingClientRect();c(h,g)}},[t,c]);return y.createElement(y.Fragment,null,y.createElement(Rm,{width:i.containerWidth,height:i.containerHeight}),y.createElement("div",Ho({ref:u},e)))}),YX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(Rm,{width:r,height:n}),y.createElement("div",Ho({ref:t},e)))}),GX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return Wa(r)||Wa(n)?y.createElement(KX,Ho({},e,{ref:t})):y.createElement(YX,Ho({},e,{ref:t}))});function VX(e){return e===!0?FX:GX}var WX=y.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:c,onDoubleClick:u,onMouseDown:m,onMouseEnter:h,onMouseLeave:g,onMouseMove:p,onMouseUp:_,onTouchEnd:x,onTouchMove:w,onTouchStart:j,style:S,width:O,responsive:C,dispatchTouchEvents:A=!0}=e,k=y.useRef(null),D=Mt(),[M,z]=y.useState(null),[K,Q]=y.useState(null),ne=zX(),G=i0(),I=G?.width>0?G.width:O,ie=G?.height>0?G.height:i,pe=y.useCallback(ee=>{ne(ee),typeof t=="function"&&t(ee),z(ee),Q(ee),ee!=null&&(k.current=ee)},[ne,t,z,Q]),q=y.useCallback(ee=>{D(MM(ee)),D(qn({handler:s,reactEvent:ee}))},[D,s]),R=y.useCallback(ee=>{D(Ob(ee)),D(qn({handler:h,reactEvent:ee}))},[D,h]),U=y.useCallback(ee=>{D(yP()),D(qn({handler:g,reactEvent:ee}))},[D,g]),J=y.useCallback(ee=>{D(Ob(ee)),D(qn({handler:p,reactEvent:ee}))},[D,p]),B=y.useCallback(()=>{D(UM())},[D]),fe=y.useCallback(ee=>{D(IM(ee.key))},[D]),je=y.useCallback(ee=>{D(qn({handler:c,reactEvent:ee}))},[D,c]),te=y.useCallback(ee=>{D(qn({handler:u,reactEvent:ee}))},[D,u]),H=y.useCallback(ee=>{D(qn({handler:m,reactEvent:ee}))},[D,m]),Ee=y.useCallback(ee=>{D(qn({handler:_,reactEvent:ee}))},[D,_]),Te=y.useCallback(ee=>{D(qn({handler:j,reactEvent:ee}))},[D,j]),Ie=y.useCallback(ee=>{A&&D($M(ee)),D(qn({handler:w,reactEvent:ee}))},[D,A,w]),ge=y.useCallback(ee=>{D(qn({handler:x,reactEvent:ee}))},[D,x]),Le=VX(C);return y.createElement(LP.Provider,{value:M},y.createElement(GN.Provider,{value:K},y.createElement(Le,{width:I??S?.width,height:ie??S?.height,className:st("recharts-wrapper",n),style:IX({position:"relative",cursor:"default",width:I,height:ie},S),onClick:q,onContextMenu:je,onDoubleClick:te,onFocus:B,onKeyDown:fe,onMouseDown:H,onMouseEnter:R,onMouseLeave:U,onMouseMove:J,onMouseUp:Ee,onTouchEnd:ge,onTouchMove:Ie,onTouchStart:Te,ref:pe},y.createElement(HX,null),r)))}),XX=["width","height","responsive","children","className","style","compact","title","desc"];function ZX(e,t){if(e==null)return{};var r,n,i=QX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var GM=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:s,className:c,style:u,compact:m,title:h,desc:g}=e,p=ZX(e,XX),_=yn(p);return m?y.createElement(y.Fragment,null,y.createElement(Rm,{width:r,height:n}),y.createElement(FA,{otherAttributes:_,title:h,desc:g},s)):y.createElement(WX,{className:c,style:u,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(FA,{otherAttributes:_,title:h,desc:g,ref:t},y.createElement(xG,null,s)))});function Cb(){return Cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(null,arguments)}var JX={top:5,right:5,bottom:5,left:5},eZ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:JX,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},VM=y.forwardRef(function(t,r){var n,i=xr(t.categoricalChartProps,eZ),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,g={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(FM,{preloadedState:{options:g},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:s},y.createElement(fM,{chartData:h.data}),y.createElement(KM,{layout:i.layout,margin:i.margin}),y.createElement(YM,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(GM,Cb({},i,{ref:r})))}),tZ=["axis"],rZ=y.forwardRef((e,t)=>y.createElement(VM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tZ,tooltipPayloadSearcher:b_,categoricalChartProps:e,ref:t})),nZ=["axis","item"],aZ=y.forwardRef((e,t)=>y.createElement(VM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:nZ,tooltipPayloadSearcher:b_,categoricalChartProps:e,ref:t}));function iZ(e){var t=Mt();return y.useEffect(()=>{t(EX(e))},[t,e]),null}var oZ=["layout"];function Ab(){return Ab=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ab.apply(null,arguments)}function sZ(e,t){if(e==null)return{};var r,n,i=lZ(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cZ={top:5,right:5,bottom:5,left:5},WM={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:cZ,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},uZ=y.forwardRef(function(t,r){var n,i=xr(t.categoricalChartProps,WM),{layout:s}=i,c=sZ(i,oZ),{chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:g}=t,p={chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:g,eventEmitter:void 0};return y.createElement(FM,{preloadedState:{options:p},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:u},y.createElement(fM,{chartData:i.data}),y.createElement(KM,{layout:s,margin:i.margin}),y.createElement(YM,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(iZ,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),y.createElement(GM,Ab({},c,{ref:r})))});function YA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function GA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YA(Object(r),!0).forEach(function(n){dZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dZ(e,t,r){return(t=fZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fZ(e){var t=mZ(e,"string");return typeof t=="symbol"?t:t+""}function mZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hZ=["item"],pZ=GA(GA({},WM),{},{layout:"centric",startAngle:0,endAngle:360}),gZ=y.forwardRef((e,t)=>{var r=xr(e,pZ);return y.createElement(uZ,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:hZ,tooltipPayloadSearcher:b_,categoricalChartProps:r,ref:t})});function vZ({project:e,companyId:t,onBack:r}){const[n,i]=y.useState(!0),[s,c]=y.useState("week"),[u,m]=y.useState({areas:[],tickets:[],crewHistory:[],disposalLoads:[],dailyReports:[]});y.useEffect(()=>{e?.id&&h()},[e?.id,s]);const h=async()=>{i(!0);try{const C=new Date,A=new Date;s==="week"?A.setDate(C.getDate()-7):A.setDate(C.getDate()-30);const k=A.toISOString().split("T")[0],D=s==="week"?7:30,[M,z,K,Q]=await Promise.all([be.getAreas(e.id),be.getTMTickets?.(e.id)||[],be.getDisposalLoadsHistory?.(e.id,D)||[],be.getDailyReports?.(e.id)||[]]),ne=[],G=new Date(A);for(;G<=C;){const I=G.toISOString().split("T")[0];try{const ie=await be.getCrewCheckin(e.id,I);ne.push({date:I,count:ie?.workers?.length||0,dayName:G.toLocaleDateString("en-US",{weekday:"short"})})}catch{ne.push({date:I,count:0,dayName:G.toLocaleDateString("en-US",{weekday:"short"})})}G.setDate(G.getDate()+1)}m({areas:M,tickets:z.filter(I=>I.work_date>=k),crewHistory:ne,disposalLoads:K,dailyReports:Q.filter(I=>I.report_date>=k)})}catch(C){console.error("Error loading metrics:",C)}finally{i(!1)}},g=y.useRef(null),p=y.useCallback(()=>{g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{h()},300)},[e?.id,s]);y.useEffect(()=>{if(!e?.id)return;const C=[],A=be.subscribeToAreas?.(e.id,p);A&&C.push(A);const k=be.subscribeToCrewCheckins?.(e.id,p);k&&C.push(k);const D=be.subscribeToTMTickets?.(e.id,p);D&&C.push(D);const M=be.subscribeToHaulOffs?.(e.id,p);M&&C.push(M);const z=be.subscribeToDailyReports?.(e.id,p);return z&&C.push(z),()=>{g.current&&clearTimeout(g.current),C.forEach(K=>be.unsubscribe?.(K))}},[e?.id,p]);const _=y.useMemo(()=>{const{areas:C,tickets:A,crewHistory:k,disposalLoads:D,dailyReports:M}=u,z=C.length,K=C.filter(H=>H.status==="done").length,Q=C.filter(H=>H.status==="working").length,ne=C.filter(H=>H.status==="not_started").length,G=z>0?Math.round(K/z*100):0,I=k.reduce((H,Ee)=>H+Ee.count,0),ie=k.length>0&&Math.round(I/k.filter(H=>H.count>0).length*10)/10||0,pe=k.filter(H=>H.count>0).length,q=A.filter(H=>H.status==="pending"||H.status==="draft").length,R=A.filter(H=>H.status==="signed"||H.status==="approved").length,U=A.reduce((H,Ee)=>H+(Ee.total_amount||0),0),J=D.reduce((H,Ee)=>H+(Ee.load_count||0),0),B=0,fe=M.filter(H=>H.submitted).length,je=s==="week"?7:30,te=x(M);return{progress:{totalAreas:z,completedAreas:K,inProgressAreas:Q,notStartedAreas:ne,progressPercent:G},crew:{totalManDays:I,avgCrewSize:ie,daysWithCrew:pe,history:k},tickets:{total:A.length,pending:q,signed:R,totalValue:U},disposal:{totalLoads:J,totalTonnage:B},reports:{submitted:fe,due:je,streak:te}}},[u,s]);function x(C){if(!C.length)return 0;const A=[...new Set(C.filter(z=>z.submitted).map(z=>z.report_date))].sort().reverse();let k=0;const D=new Date().toISOString().split("T")[0];let M=new Date(D);for(let z=0;z<30;z++){const K=M.toISOString().split("T")[0];if(A.includes(K))k++,M.setDate(M.getDate()-1);else break}return k}const w={primary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",muted:"#6b7280",purple:"#8b5cf6"},j=[w.success,w.primary,w.muted],S=[{name:"Completed",value:_.progress.completedAreas},{name:"In Progress",value:_.progress.inProgressAreas},{name:"Not Started",value:_.progress.notStartedAreas}].filter(C=>C.value>0),O=y.useMemo(()=>{const C={};return u.tickets.forEach(A=>{const k=A.work_date;C[k]=(C[k]||0)+1}),_.crew.history.map(A=>({...A,tickets:C[A.date]||0}))},[u.tickets,_.crew.history]);return n?f.jsxs("div",{className:"foreman-metrics loading",children:[f.jsxs("div",{className:"metrics-header",children:[f.jsxs("button",{className:"back-btn",onClick:r,children:[f.jsx(cr,{size:20}),"Back"]}),f.jsx("h2",{children:"Project Metrics"})]}),f.jsxs("div",{className:"loading-state",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:"Loading metrics..."})]})]}):f.jsxs("div",{className:"foreman-metrics",children:[f.jsxs("div",{className:"metrics-header",children:[f.jsxs("button",{className:"back-btn",onClick:r,children:[f.jsx(cr,{size:20}),"Back"]}),f.jsx("h2",{children:"Project Metrics"}),f.jsxs("div",{className:"time-toggle",children:[f.jsx("button",{className:s==="week"?"active":"",onClick:()=>c("week"),children:"7 Days"}),f.jsx("button",{className:s==="month"?"active":"",onClick:()=>c("month"),children:"30 Days"})]})]}),f.jsxs("div",{className:"summary-cards",children:[f.jsxs("div",{className:"summary-card progress-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(lN,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsxs("span",{className:"card-value",children:[_.progress.progressPercent,"%"]}),f.jsx("span",{className:"card-label",children:"Complete"})]}),f.jsxs("div",{className:"card-detail",children:[_.progress.completedAreas,"/",_.progress.totalAreas," areas"]})]}),f.jsxs("div",{className:"summary-card crew-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(cN,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.crew.totalManDays}),f.jsx("span",{className:"card-label",children:"Man-Days"})]}),f.jsxs("div",{className:"card-detail",children:["Avg ",_.crew.avgCrewSize," workers/day"]})]}),f.jsxs("div",{className:"summary-card tickets-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(Fo,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.tickets.total}),f.jsx("span",{className:"card-label",children:"T&M Tickets"})]}),f.jsxs("div",{className:"card-detail",children:[_.tickets.signed," signed, ",_.tickets.pending," pending"]})]}),f.jsxs("div",{className:"summary-card disposal-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(mf,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.disposal.totalLoads}),f.jsx("span",{className:"card-label",children:"Disposal Loads"})]}),f.jsxs("div",{className:"card-detail",children:[_.disposal.totalTonnage.toFixed(1)," tons"]})]})]}),f.jsxs("div",{className:"charts-grid",children:[f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"Area Progress"}),S.length>0?f.jsx(Tv,{width:"100%",height:200,children:f.jsxs(gZ,{children:[f.jsx(cM,{data:S,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",label:({name:C,value:A})=>`${C}: ${A}`,labelLine:!1,children:S.map((C,A)=>f.jsx(fu,{fill:j[A%j.length]},`cell-${A}`))}),f.jsx(Xv,{})]})}):f.jsx("div",{className:"no-data",children:"No area data"})]}),f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"Daily Crew Size"}),f.jsx(Tv,{width:"100%",height:200,children:f.jsxs(aZ,{data:_.crew.history,children:[f.jsx(bb,{strokeDasharray:"3 3",opacity:.3}),f.jsx(jb,{dataKey:"dayName",tick:{fontSize:12}}),f.jsx(Eb,{tick:{fontSize:12}}),f.jsx(Xv,{formatter:C=>[C,"Workers"],labelFormatter:C=>`Day: ${C}`}),f.jsx(TM,{dataKey:"count",fill:w.primary,radius:[4,4,0,0]})]})})]}),f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"T&M Tickets by Day"}),f.jsx(Tv,{width:"100%",height:200,children:f.jsxs(rZ,{data:O,children:[f.jsx(bb,{strokeDasharray:"3 3",opacity:.3}),f.jsx(jb,{dataKey:"dayName",tick:{fontSize:12}}),f.jsx(Eb,{tick:{fontSize:12}}),f.jsx(Xv,{formatter:C=>[C,"Tickets"]}),f.jsx(AM,{type:"monotone",dataKey:"tickets",stroke:w.success,strokeWidth:2,dot:{fill:w.success,strokeWidth:2}})]})})]}),f.jsxs("div",{className:"chart-card activity-card",children:[f.jsx("h3",{children:"Activity Summary"}),f.jsxs("div",{className:"activity-list",children:[f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.success}20`,color:w.success},children:f.jsx(ea,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Days with Crew"}),f.jsxs("span",{className:"activity-value",children:[_.crew.daysWithCrew," of ",s==="week"?7:30]})]})]}),f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.primary}20`,color:w.primary},children:f.jsx(Cq,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Reports Submitted"}),f.jsx("span",{className:"activity-value",children:_.reports.submitted})]})]}),f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.warning}20`,color:w.warning},children:f.jsx(Mo,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Report Streak"}),f.jsxs("span",{className:"activity-value",children:[_.reports.streak," days"]})]})]}),_.tickets.totalValue>0&&f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.purple}20`,color:w.purple},children:f.jsx(Aq,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"T&M Value"}),f.jsxs("span",{className:"activity-value",children:["$",_.tickets.totalValue.toLocaleString()]})]})]})]})]})]}),f.jsx("style",{children:`
        .foreman-metrics {
          padding: 1rem;
          max-width: 100%;
          overflow-x: hidden;
        }

        .foreman-metrics.loading {
          min-height: 400px;
        }

        .loading-state {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 3rem;
          color: var(--text-secondary);
        }

        .metrics-header {
          display: flex;
          align-items: center;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
        }

        .metrics-header h2 {
          flex: 1;
          margin: 0;
          font-size: 1.25rem;
          color: var(--text-primary);
        }

        .back-btn {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: var(--bg-elevated);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          color: var(--text-primary);
          cursor: pointer;
          font-size: 0.875rem;
        }

        .back-btn:hover {
          background: var(--bg-tertiary);
        }

        .time-toggle {
          display: flex;
          background: var(--bg-elevated);
          border-radius: 8px;
          padding: 4px;
          gap: 4px;
        }

        .time-toggle button {
          padding: 0.5rem 1rem;
          border: none;
          background: transparent;
          border-radius: 6px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.875rem;
          transition: all 0.2s;
        }

        .time-toggle button.active {
          background: var(--primary-color, #3b82f6);
          color: white;
        }

        .summary-cards {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        @media (min-width: 640px) {
          .summary-cards {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        .summary-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .card-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .progress-card .card-icon {
          background: #dbeafe;
          color: #3b82f6;
        }

        .crew-card .card-icon {
          background: #dcfce7;
          color: #22c55e;
        }

        .tickets-card .card-icon {
          background: #fef3c7;
          color: #f59e0b;
        }

        .disposal-card .card-icon {
          background: #f3e8ff;
          color: #8b5cf6;
        }

        [data-theme="dark"] .progress-card .card-icon {
          background: #1e3a5f;
        }

        [data-theme="dark"] .crew-card .card-icon {
          background: #14532d;
        }

        [data-theme="dark"] .tickets-card .card-icon {
          background: #451a03;
        }

        [data-theme="dark"] .disposal-card .card-icon {
          background: #3b0764;
        }

        .card-content {
          display: flex;
          flex-direction: column;
        }

        .card-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: var(--text-primary);
          line-height: 1.2;
        }

        .card-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .card-detail {
          font-size: 0.75rem;
          color: var(--text-secondary);
          margin-top: auto;
        }

        .charts-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        @media (min-width: 640px) {
          .charts-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }

        .chart-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
        }

        .chart-card h3 {
          margin: 0 0 1rem 0;
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        .no-data {
          height: 200px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: var(--text-secondary);
          font-size: 0.875rem;
        }

        .activity-card {
          grid-column: 1 / -1;
        }

        @media (min-width: 640px) {
          .activity-card {
            grid-column: auto;
          }
        }

        .activity-list {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
        }

        .activity-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .activity-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .activity-info {
          display: flex;
          flex-direction: column;
          flex: 1;
        }

        .activity-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
        }

        .activity-value {
          font-size: 1rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        /* Recharts customization */
        .recharts-cartesian-grid-horizontal line,
        .recharts-cartesian-grid-vertical line {
          stroke: var(--border-color);
        }

        .recharts-text {
          fill: var(--text-secondary);
        }

        .recharts-tooltip-wrapper {
          outline: none;
        }

        .recharts-default-tooltip {
          background: var(--bg-card) !important;
          border: 1px solid var(--border-color) !important;
          border-radius: 8px !important;
        }

        .recharts-tooltip-label {
          color: var(--text-primary) !important;
        }

        .recharts-tooltip-item {
          color: var(--text-secondary) !important;
        }
      `})]})}const fy={crew:{id:"crew",label:"Crew Check-in",icon:cN,description:"Log who's on site today"},tm:{id:"tm",label:"T&M Ticket",icon:Fo,description:"Create time & materials ticket"},report:{id:"report",label:"Daily Report",icon:sN,description:"Submit end-of-day report"},progress:{id:"progress",label:"Update Progress",icon:uN,description:"Mark tasks complete"},disposal:{id:"disposal",label:"Disposal Loads",icon:mf,description:"Log haul-off loads"},docs:{id:"docs",label:"Documents",icon:Dq,description:"View project files"},metrics:{id:"metrics",label:"Project Metrics",icon:kq,description:"View charts & trends"},punchlist:{id:"punchlist",label:"Punch List",icon:Nq,description:"View & resolve punch items"},injury:{id:"injury",label:"Report Injury",icon:um,description:"Log safety incident",isDanger:!0}},VA=["crew","tm","report","progress"],WA=e=>`fm_pinned_${e}`;function yZ({project:e,todayStatus:t,progress:r,areasWorking:n,areasDone:i,areasRemaining:s,punchListOpenCount:c,onNavigate:u,onShowToast:m}){const[h,g]=y.useState(()=>{try{const k=localStorage.getItem(WA(e?.id));return k?JSON.parse(k):VA}catch{return VA}}),[p,_]=y.useState(!1),[x,w]=y.useState(!0);y.useEffect(()=>{if(e?.id)try{localStorage.setItem(WA(e.id),JSON.stringify(h))}catch{}},[h,e?.id]);const j=y.useCallback(k=>{g(D=>D.includes(k)?D.length<=1?(m?.("Keep at least one pinned action","info"),D):D.filter(M=>M!==k):D.length>=5?(m?.("Maximum 5 pinned actions","info"),D):[...D,k])},[m]),S=y.useMemo(()=>Object.keys(fy).filter(k=>!h.includes(k)),[h]),O=y.useCallback(k=>{switch(k){case"crew":return{done:t.crewCheckedIn,badge:t.crewCheckedIn?`${t.crewCount} on site`:null,status:t.crewCheckedIn?"Done today":"Not started"};case"tm":return{done:!1,badge:t.tmTicketsToday>0?`${t.tmTicketsToday} today`:null,status:t.tmTicketsToday>0?`${t.tmTicketsToday} created`:"Create new"};case"report":return{done:t.dailyReportDone,badge:null,status:t.dailyReportDone?"Submitted":"Not submitted"};case"progress":return{done:s===0,badge:s>0?`${s} left`:null,status:`${r}% complete`};case"disposal":return{done:!1,badge:t.disposalLoadsToday>0?`${t.disposalLoadsToday} today`:null,status:t.disposalLoadsToday>0?`${t.disposalLoadsToday} logged`:"Log loads"};case"punchlist":return{done:c===0&&c!==void 0,badge:c>0?`${c} open`:null,status:c>0?`${c} items open`:"All clear"};default:return{done:!1,badge:null,status:null}}},[t,r,s]),C=k=>{const D=fy[k];if(!D)return null;const M=D.icon,z=O(k);return f.jsxs("div",{className:"fm-pinned-card-wrapper",children:[f.jsxs("button",{className:`fm-pinned-card ${z.done?"completed":""} ${D.isDanger?"danger":""}`,onClick:()=>!p&&u(k),disabled:p,children:[f.jsx("div",{className:"fm-pinned-icon",children:f.jsx(M,{size:28})}),f.jsx("span",{className:"fm-pinned-label",children:D.label}),z.badge&&!p&&f.jsx("span",{className:"fm-pinned-badge",children:z.badge}),z.done&&!p&&f.jsx("div",{className:"fm-pinned-check",children:f.jsx(ea,{size:18})})]}),p&&f.jsx("button",{className:"fm-pin-toggle pinned",onClick:()=>j(k),"aria-label":`Unpin ${D.label}`,children:f.jsx(Pq,{size:16})})]},k)},A=k=>{const D=fy[k];if(!D)return null;const M=D.icon,z=O(k);return f.jsxs("div",{className:"fm-action-row-wrapper",children:[f.jsxs("button",{className:`fm-action-row ${D.isDanger?"danger":""}`,onClick:()=>!p&&u(k),disabled:p,children:[f.jsx(M,{size:20}),f.jsx("span",{className:"fm-action-label",children:D.label}),z.badge&&!p&&f.jsx("span",{className:"fm-action-badge",children:z.badge})]}),p&&f.jsx("button",{className:"fm-pin-toggle",onClick:()=>j(k),"aria-label":`Pin ${D.label}`,children:f.jsx(Mq,{size:16})})]},k)};return f.jsxs("div",{className:"fm-landing",children:[f.jsxs("button",{className:"fm-metrics-snapshot",onClick:()=>u("metrics"),"aria-label":"View full project metrics",children:[f.jsxs("div",{className:"fm-snapshot-header",children:[f.jsx(lN,{size:18}),f.jsx("span",{children:"Project Overview"}),f.jsx(hf,{size:16,className:"fm-snapshot-arrow"})]}),f.jsxs("div",{className:"fm-snapshot-stats",children:[f.jsxs("div",{className:"fm-snapshot-stat main",children:[f.jsxs("span",{className:"fm-snapshot-value",children:[r,"%"]}),f.jsx("span",{className:"fm-snapshot-label",children:"Complete"})]}),f.jsx("div",{className:"fm-snapshot-divider"}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:n}),f.jsx("span",{className:"fm-snapshot-label",children:"In Progress"})]}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:i}),f.jsx("span",{className:"fm-snapshot-label",children:"Done"})]}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:s}),f.jsx("span",{className:"fm-snapshot-label",children:"Remaining"})]})]}),t.crewCheckedIn&&f.jsxs("div",{className:"fm-snapshot-today",children:[f.jsx(Mo,{size:14}),f.jsxs("span",{children:[t.crewCount," crew on site today"]})]})]}),f.jsxs("div",{className:"fm-section-header",children:[f.jsx("h2",{children:"Quick Actions"}),f.jsx("button",{className:`fm-edit-btn ${p?"active":""}`,onClick:()=>_(!p),"aria-label":p?"Done editing":"Customize actions",children:p?"Done":f.jsx(Tq,{size:18})})]}),p&&f.jsx("p",{className:"fm-edit-hint",children:"Tap icons to pin/unpin actions"}),f.jsx("div",{className:"fm-pinned-grid",children:h.map(C)}),S.length>0&&f.jsxs("div",{className:"fm-more-section",children:[f.jsxs("button",{className:"fm-more-header",onClick:()=>w(!x),"aria-expanded":!x,children:[f.jsx("span",{children:"More Actions"}),x?f.jsx(hf,{size:20}):f.jsx(oN,{size:20})]}),!x&&f.jsx("div",{className:"fm-more-content",children:S.map(A)})]}),f.jsx("style",{children:`
        .fm-landing {
          padding: 0 1rem 2rem;
        }

        /* Metrics Snapshot - Premium Hero Card */
        .fm-metrics-snapshot {
          width: 100%;
          background: var(--gradient-blue, linear-gradient(135deg, #3b82f6, #2563eb, #1d4ed8));
          border: none;
          border-radius: 16px;
          padding: 1.25rem;
          color: white;
          text-align: left;
          cursor: pointer;
          margin-bottom: 1.5rem;
          transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s ease;
          box-shadow: 0 4px 15px rgba(59, 130, 246, 0.25), 0 2px 8px rgba(0,0,0,0.15);
          position: relative;
          overflow: hidden;
        }

        .fm-metrics-snapshot::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 50%;
          background: linear-gradient(180deg, rgba(255,255,255,0.1) 0%, transparent 100%);
          pointer-events: none;
          border-radius: 16px 16px 0 0;
        }

        .fm-metrics-snapshot::after {
          content: '';
          position: absolute;
          bottom: -40px;
          right: -40px;
          width: 160px;
          height: 160px;
          background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%);
          pointer-events: none;
        }

        .fm-metrics-snapshot:active {
          transform: scale(0.98);
        }

        .fm-snapshot-header {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          opacity: 0.9;
          margin-bottom: 0.875rem;
          font-weight: 500;
          position: relative;
          z-index: 1;
        }

        .fm-snapshot-arrow {
          margin-left: auto;
          opacity: 0.7;
        }

        .fm-snapshot-stats {
          display: flex;
          align-items: center;
          gap: 0.875rem;
          position: relative;
          z-index: 1;
        }

        .fm-snapshot-stat {
          display: flex;
          flex-direction: column;
          align-items: center;
          flex: 1;
        }

        .fm-snapshot-stat.main {
          flex: 1.5;
          align-items: flex-start;
        }

        .fm-snapshot-value {
          font-size: 1.625rem;
          font-weight: 700;
          line-height: 1.2;
          font-variant-numeric: tabular-nums;
          letter-spacing: -0.02em;
        }

        .fm-snapshot-stat.main .fm-snapshot-value {
          font-size: 2.25rem;
        }

        .fm-snapshot-label {
          font-size: 0.68rem;
          opacity: 0.85;
          text-transform: uppercase;
          letter-spacing: 0.06em;
          font-weight: 600;
          margin-top: 0.1rem;
        }

        .fm-snapshot-divider {
          width: 1px;
          height: 44px;
          background: rgba(255,255,255,0.25);
        }

        .fm-snapshot-today {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-top: 0.875rem;
          padding-top: 0.875rem;
          border-top: 1px solid rgba(255,255,255,0.15);
          font-size: 0.8rem;
          opacity: 0.9;
          font-weight: 500;
          position: relative;
          z-index: 1;
        }

        /* Section Header */
        .fm-section-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.875rem;
        }

        .fm-section-header h2 {
          font-size: 1.05rem;
          font-weight: 700;
          color: var(--text-primary);
          margin: 0;
          letter-spacing: -0.01em;
        }

        .fm-edit-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0.5rem;
          background: var(--gradient-card-dark, var(--bg-elevated));
          border: 1px solid var(--border-color);
          border-radius: 10px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.8rem;
          min-width: 36px;
          min-height: 36px;
          transition: all 0.2s ease;
          box-shadow: var(--shadow-sm, 0 1px 2px rgba(0,0,0,0.1));
        }

        .fm-edit-btn:hover {
          border-color: var(--accent-blue, #3b82f6);
        }

        .fm-edit-btn.active {
          background: var(--gradient-blue, var(--primary-color, #3b82f6));
          border-color: transparent;
          color: white;
          padding: 0.5rem 1rem;
          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);
        }

        .fm-edit-hint {
          font-size: 0.8rem;
          color: var(--text-secondary);
          margin: 0 0 0.75rem;
          text-align: center;
          font-weight: 500;
        }

        /* Pinned Actions Grid */
        .fm-pinned-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 0.875rem;
          margin-bottom: 1.5rem;
        }

        .fm-pinned-card-wrapper {
          position: relative;
        }

        .fm-pinned-card {
          width: 100%;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 1.375rem 1rem;
          background: var(--gradient-card-dark, var(--bg-card));
          border: 1px solid var(--border-color);
          border-radius: 14px;
          cursor: pointer;
          transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
          min-height: 114px;
          position: relative;
          box-shadow: var(--shadow-card, 0 1px 3px rgba(0,0,0,0.1));
          overflow: hidden;
        }

        .fm-pinned-card::before {
          content: '';
          position: absolute;
          bottom: 0;
          left: 0;
          right: 0;
          height: 2px;
          background: var(--gradient-blue, linear-gradient(90deg, #3b82f6, #2563eb));
          opacity: 0;
          transition: opacity 0.2s ease;
        }

        .fm-pinned-card:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: var(--shadow-card-hover, 0 8px 25px rgba(0,0,0,0.15));
          border-color: rgba(59, 130, 246, 0.3);
        }

        .fm-pinned-card:hover:not(:disabled)::before {
          opacity: 1;
        }

        .fm-pinned-card:active:not(:disabled) {
          transform: scale(0.97);
        }

        .fm-pinned-card:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-pinned-card.completed {
          border-color: rgba(34, 197, 94, 0.4);
          background: linear-gradient(135deg, rgba(34, 197, 94, 0.08) 0%, rgba(34, 197, 94, 0.03) 100%);
        }

        .fm-pinned-card.completed::before {
          background: linear-gradient(90deg, #22c55e, #16a34a);
          opacity: 1;
        }

        .fm-pinned-card.danger {
          border-color: rgba(245, 158, 11, 0.4);
        }

        .fm-pinned-card.danger::before {
          background: linear-gradient(90deg, #f59e0b, #d97706);
        }

        .fm-pinned-card.danger .fm-pinned-icon {
          color: #f59e0b;
        }

        .fm-pinned-icon {
          color: var(--primary-color, #3b82f6);
          margin-bottom: 0.625rem;
          transition: transform 0.2s ease;
        }

        .fm-pinned-card:hover:not(:disabled) .fm-pinned-icon {
          transform: scale(1.08);
        }

        .fm-pinned-label {
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
          text-align: center;
          letter-spacing: -0.01em;
        }

        .fm-pinned-badge {
          position: absolute;
          top: 8px;
          right: 8px;
          background: var(--gradient-blue, var(--primary-color, #3b82f6));
          color: white;
          font-size: 0.68rem;
          font-weight: 700;
          padding: 0.2rem 0.55rem;
          border-radius: 10px;
          box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
        }

        .fm-pinned-check {
          position: absolute;
          top: 8px;
          right: 8px;
          color: #22c55e;
          filter: drop-shadow(0 1px 3px rgba(34, 197, 94, 0.3));
        }

        .fm-pin-toggle {
          position: absolute;
          top: -8px;
          right: -8px;
          width: 28px;
          height: 28px;
          border-radius: 50%;
          background: var(--bg-card);
          border: 2px solid var(--border-color);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          color: var(--text-secondary);
          transition: all 0.2s ease;
          z-index: 10;
          box-shadow: 0 2px 6px rgba(0,0,0,0.15);
        }

        .fm-pin-toggle:hover {
          background: var(--bg-elevated);
          transform: scale(1.1);
        }

        .fm-pin-toggle.pinned {
          background: #ef4444;
          border-color: #ef4444;
          color: white;
          box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
        }

        /* More Actions Section */
        .fm-more-section {
          background: var(--gradient-card-dark, var(--bg-card));
          border: 1px solid var(--border-color);
          border-radius: 14px;
          overflow: hidden;
          box-shadow: var(--shadow-card, 0 1px 3px rgba(0,0,0,0.1));
        }

        .fm-more-header {
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 1rem 1.125rem;
          background: transparent;
          border: none;
          cursor: pointer;
          font-size: 0.9rem;
          font-weight: 600;
          color: var(--text-primary);
          transition: background 0.15s ease;
        }

        .fm-more-header:hover {
          background: var(--bg-secondary, rgba(255,255,255,0.02));
        }

        .fm-more-header:active {
          background: var(--bg-elevated);
        }

        .fm-more-content {
          border-top: 1px solid var(--border-color);
        }

        .fm-action-row-wrapper {
          position: relative;
          display: flex;
          align-items: center;
        }

        .fm-action-row-wrapper .fm-pin-toggle {
          position: static;
          margin-right: 0.75rem;
          flex-shrink: 0;
        }

        .fm-action-row {
          flex: 1;
          display: flex;
          align-items: center;
          gap: 0.875rem;
          padding: 1.125rem;
          background: transparent;
          border: none;
          border-bottom: 1px solid var(--border-color);
          cursor: pointer;
          text-align: left;
          color: var(--text-primary);
          transition: all 0.2s ease;
        }

        .fm-action-row:last-child {
          border-bottom: none;
        }

        .fm-action-row:hover:not(:disabled) {
          background: var(--bg-secondary, rgba(255,255,255,0.02));
          padding-left: 1.25rem;
        }

        .fm-action-row:active:not(:disabled) {
          background: var(--bg-elevated);
        }

        .fm-action-row:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-action-row.danger {
          color: #f59e0b;
        }

        .fm-action-row svg {
          transition: color 0.15s ease;
        }

        .fm-action-row:hover:not(:disabled) svg {
          color: var(--accent-blue, #3b82f6);
        }

        .fm-action-row.danger:hover:not(:disabled) svg {
          color: #f59e0b;
        }

        .fm-action-label {
          flex: 1;
          font-size: 0.9rem;
          font-weight: 500;
        }

        .fm-action-badge {
          font-size: 0.72rem;
          color: var(--text-secondary);
          background: var(--bg-elevated);
          padding: 0.25rem 0.625rem;
          border-radius: 20px;
          font-weight: 600;
        }

        /* Dark mode adjustments */
        [data-theme="dark"] .fm-metrics-snapshot {
          background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 60%, #172554 100%);
          box-shadow: 0 4px 20px rgba(30, 64, 175, 0.3), 0 2px 8px rgba(0,0,0,0.2);
        }

        [data-theme="dark"] .fm-pinned-card.completed {
          background: linear-gradient(135deg, rgba(34, 197, 94, 0.12) 0%, rgba(34, 197, 94, 0.04) 100%);
        }
      `})]})}const my=[{value:"high",label:"High",color:"#ef4444"},{value:"medium",label:"Medium",color:"#f59e0b"},{value:"low",label:"Low",color:"#6b7280"}],hy=[{value:"open",label:"Open",icon:qq,color:"#ef4444"},{value:"in_progress",label:"In Progress",icon:Mo,color:"#f59e0b"},{value:"complete",label:"Complete",icon:ea,color:"#10b981"}];function XM({projectId:e,areas:t=[],companyId:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState(!0),[m,h]=y.useState(!1),[g,p]=y.useState(null),[_,x]=y.useState("all"),[w,j]=y.useState("all"),[S,O]=y.useState(!1),[C,A]=y.useState({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),k=y.useCallback(async()=>{if(!e||!P){u(!1);return}try{const q=$i(),{data:R,error:U}=await q.from("punch_list_items").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(U)throw U;s(R||[])}catch(q){console.error("Error loading punch list:",q),s([])}finally{u(!1)}},[e]);y.useEffect(()=>{k()},[k]),y.useEffect(()=>{if(!e||!P)return;const q=T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},()=>k()).subscribe();return()=>{T.removeChannel(q)}},[e,k]);const D=y.useMemo(()=>i.filter(q=>!(_!=="all"&&q.status!==_||w!=="all"&&q.area_id!==w)),[i,_,w]),M=y.useMemo(()=>{const q=i.filter(J=>J.status==="open").length,R=i.filter(J=>J.status==="in_progress").length,U=i.filter(J=>J.status==="complete").length;return{open:q,inProgress:R,complete:U,total:i.length}},[i]),z=()=>{A({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),p(null),h(!1)},K=async q=>{if(q.preventDefault(),!C.description.trim()){n?.("Please enter a description","error");return}O(!0);try{const R=$i();if(g){const{error:U}=await R.from("punch_list_items").update({description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,updated_at:new Date().toISOString()}).eq("id",g.id);if(U)throw U;n?.("Punch item updated","success")}else{const{error:U}=await R.from("punch_list_items").insert({project_id:e,company_id:r,description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,status:"open"});if(U)throw U;n?.("Punch item added","success")}z(),k()}catch(R){console.error("Error saving punch item:",R),n?.(R.message||"Error saving item","error")}finally{O(!1)}},Q=async(q,R)=>{try{const U={status:R,updated_at:new Date().toISOString()};R==="complete"?U.completed_at=new Date().toISOString():U.completed_at=null;const{error:J}=await $i().from("punch_list_items").update(U).eq("id",q);if(J)throw J;k()}catch(U){console.error("Error updating status:",U),n?.("Error updating status","error")}},ne=async q=>{if(confirm("Delete this punch item?"))try{const{error:R}=await $i().from("punch_list_items").delete().eq("id",q);if(R)throw R;n?.("Item deleted","success"),k()}catch(R){console.error("Error deleting item:",R),n?.("Error deleting item","error")}},G=q=>{A({description:q.description,area_id:q.area_id||"",assigned_to:q.assigned_to||"",priority:q.priority||"medium",notes:q.notes||"",photo_url:q.photo_url||""}),p(q),h(!0)},I=q=>q&&t.find(U=>U.id===q)?.name||null,ie=q=>my.find(R=>R.value===q)||my[1],pe=q=>hy.find(R=>R.value===q)||hy[0];return f.jsxs("div",{className:"punch-list-card",children:[f.jsxs("div",{className:"punch-list-header",children:[f.jsxs("div",{className:"punch-list-title",children:[f.jsx(ea,{size:18}),f.jsx("h3",{children:"Punch List"}),M.total>0&&f.jsxs("span",{className:"punch-stats-inline",children:[f.jsxs("span",{className:"punch-stat-open",children:[M.open," open"]}),M.inProgress>0&&f.jsxs("span",{className:"punch-stat-progress",children:[M.inProgress," in progress"]}),f.jsxs("span",{className:"punch-stat-complete",children:[M.complete,"/",M.total," complete"]})]})]}),f.jsxs("button",{className:"punch-add-btn",onClick:()=>{z(),h(!0)},children:[f.jsx(Jd,{size:16}),"Add Item"]})]}),M.total>0&&f.jsxs("div",{className:"punch-progress-bar",children:[f.jsx("div",{className:"punch-progress-fill",style:{width:`${M.complete/M.total*100}%`}}),f.jsxs("span",{className:"punch-progress-label",children:[Math.round(M.complete/M.total*100),"% complete"]})]}),M.total>0&&f.jsxs("div",{className:"punch-filters",children:[f.jsxs("div",{className:"punch-filter-group",children:[f.jsx(Rq,{size:14}),f.jsxs("select",{value:_,onChange:q=>x(q.target.value),className:"punch-filter-select",children:[f.jsx("option",{value:"all",children:"All Status"}),hy.map(q=>f.jsx("option",{value:q.value,children:q.label},q.value))]})]}),t.length>0&&f.jsxs("div",{className:"punch-filter-group",children:[f.jsx(vy,{size:14}),f.jsxs("select",{value:w,onChange:q=>j(q.target.value),className:"punch-filter-select",children:[f.jsx("option",{value:"all",children:"All Areas"}),t.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]})]}),m&&f.jsxs("form",{className:"punch-form",onSubmit:K,children:[f.jsxs("div",{className:"punch-form-header",children:[f.jsx("h4",{children:g?"Edit Item":"New Punch Item"}),f.jsx("button",{type:"button",className:"punch-form-close",onClick:z,children:f.jsx(Nb,{size:16})})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Description *"}),f.jsx("textarea",{value:C.description,onChange:q=>A(R=>({...R,description:q.target.value})),placeholder:"What needs to be fixed or completed?",rows:2,required:!0})]}),f.jsxs("div",{className:"punch-form-row",children:[f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Area"}),f.jsxs("select",{value:C.area_id,onChange:q=>A(R=>({...R,area_id:q.target.value})),children:[f.jsx("option",{value:"",children:"No area"}),t.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Assigned To"}),f.jsx("input",{type:"text",value:C.assigned_to,onChange:q=>A(R=>({...R,assigned_to:q.target.value})),placeholder:"Name or company"})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Priority"}),f.jsx("select",{value:C.priority,onChange:q=>A(R=>({...R,priority:q.target.value})),children:my.map(q=>f.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Notes"}),f.jsx("textarea",{value:C.notes,onChange:q=>A(R=>({...R,notes:q.target.value})),placeholder:"Additional details...",rows:2})]}),f.jsxs("div",{className:"punch-form-actions",children:[f.jsx("button",{type:"button",className:"punch-btn-cancel",onClick:z,children:"Cancel"}),f.jsxs("button",{type:"submit",className:"punch-btn-save",disabled:S,children:[f.jsx(Lq,{size:14}),S?"Saving...":g?"Update":"Add Item"]})]})]}),c?f.jsx("div",{className:"punch-loading",children:"Loading punch list..."}):D.length===0?f.jsxs("div",{className:"punch-empty",children:[f.jsx(ea,{size:32,style:{opacity:.3}}),f.jsx("p",{children:i.length===0?"No punch items yet":"No items match filters"}),i.length===0&&f.jsx("span",{children:"Add items that need attention before project closeout"})]}):f.jsx("div",{className:"punch-items-list",children:D.map(q=>{const R=pe(q.status),U=ie(q.priority),J=R.icon;return f.jsxs("div",{className:`punch-item punch-item-${q.status}`,children:[f.jsx("button",{className:"punch-item-status-btn",onClick:()=>{const B=q.status==="open"?"in_progress":q.status==="in_progress"?"complete":"open";Q(q.id,B)},title:`Click to change status (current: ${R.label})`,children:f.jsx(J,{size:18,style:{color:R.color}})}),f.jsxs("div",{className:"punch-item-content",children:[f.jsxs("div",{className:"punch-item-top",children:[f.jsx("span",{className:`punch-item-desc ${q.status==="complete"?"completed":""}`,children:q.description}),f.jsx("div",{className:"punch-item-badges",children:f.jsx("span",{className:"punch-priority-badge",style:{color:U.color,borderColor:`${U.color}40`},children:U.label})})]}),f.jsxs("div",{className:"punch-item-meta",children:[I(q.area_id)&&f.jsxs("span",{className:"punch-meta-tag",children:[f.jsx(vy,{size:11}),I(q.area_id)]}),q.assigned_to&&f.jsxs("span",{className:"punch-meta-tag",children:[f.jsx(zq,{size:11}),q.assigned_to]}),q.completed_at&&f.jsxs("span",{className:"punch-meta-tag completed",children:[f.jsx(ea,{size:11}),"Done ",new Date(q.completed_at).toLocaleDateString()]})]}),q.notes&&f.jsx("div",{className:"punch-item-notes",children:q.notes})]}),f.jsxs("div",{className:"punch-item-actions",children:[f.jsx("button",{className:"punch-action-btn",onClick:()=>G(q),title:"Edit",children:f.jsx(xc,{size:14})}),f.jsx("button",{className:"punch-action-btn delete",onClick:()=>ne(q.id),title:"Delete",children:f.jsx(Iq,{size:14})})]})]},q.id)})})]})}const TQ=Object.freeze(Object.defineProperty({__proto__:null,default:XM},Symbol.toStringTag,{value:"Module"}));function bZ({project:e,companyId:t,foremanName:r,onShowToast:n,onExit:i}){const[s,c]=y.useState([]),[u,m]=y.useState(!0),[h,g]=y.useState(null),[p,_]=y.useState({}),[x,w]=y.useState("home"),[j,S]=y.useState(!1),[O,C]=y.useState(0),[A,k]=y.useState({crewCheckedIn:!1,crewCount:0,tmTicketsToday:0,dailyReportDone:!1,disposalLoadsToday:0}),[D,M]=y.useState(()=>typeof window<"u"?document.documentElement.getAttribute("data-theme")==="dark":!1);new Date().getHours(),y.useEffect(()=>{e?.id&&(G(),z(),K())},[e?.id]);const z=async()=>{try{const H=new Date().toISOString().split("T")[0],Te=(await be.getCrewCheckin(e.id,H))?.workers||[],Ie=Te.length>0,Le=(await be.getTMTickets?.(e.id)||[]).filter(we=>we.work_date===H),ee=await be.getDisposalLoads?.(e.id,H)||[];k({crewCheckedIn:Ie,crewCount:Te.length,tmTicketsToday:Le.length,dailyReportDone:!1,disposalLoadsToday:ee.reduce((we,xe)=>we+(xe.load_count||1),0)})}catch(H){console.error("Error loading today status:",H)}},K=async()=>{if(!(!e?.id||!P))try{const{count:H}=await $i().from("punch_list_items").select("*",{count:"exact",head:!0}).eq("project_id",e.id).eq("status","open");C(H||0)}catch{}},Q=y.useRef(null),ne=y.useCallback(()=>{Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{G(),z()},300)},[e?.id]);y.useEffect(()=>{if(!e?.id)return;const H=[],Ee=be.subscribeToAreas?.(e.id,ne);Ee&&H.push(Ee);const Te=be.subscribeToCrewCheckins?.(e.id,ne);Te&&H.push(Te);const Ie=be.subscribeToTMTickets?.(e.id,ne);Ie&&H.push(Ie);const ge=be.subscribeToHaulOffs?.(e.id,ne);ge&&H.push(ge);const Le=be.subscribeToDailyReports?.(e.id,ne);Le&&H.push(Le);const ee=be.subscribeToCORs?.(e.id,ne);ee&&H.push(ee);const we=be.subscribeToMaterialRequests?.(e.id,ne);we&&H.push(we);const xe=be.subscribeToProject?.(e.id,ne);xe&&H.push(xe);const oe=be.subscribeToPunchList?.(e.id,()=>{K(),ne()});if(oe&&H.push(oe),t){const He=be.subscribeToMaterialsEquipment?.(t,ne);He&&H.push(He);const ve=be.subscribeToLaborRates?.(t,ne);ve&&H.push(ve)}return()=>{Q.current&&clearTimeout(Q.current),H.forEach(He=>be.unsubscribe?.(He))}},[e?.id,ne]);const G=async()=>{try{const H=await be.getAreas(e.id);c(H);const Ee=[...new Set(H.map(Ie=>Ie.group_name||"General"))],Te={};Ee.forEach(Ie=>Te[Ie]=!1),_(Te)}catch(H){console.error("Error loading areas:",H),n?.("Error loading areas","error")}finally{m(!1)}},I=async(H,Ee)=>{const Te=s.find(ge=>ge.id===H);if(!Te)return;const Ie=Te.status===Ee?"not_started":Ee;g(H);try{await be.updateAreaStatus(H,Ie),c(ge=>ge.map(Le=>Le.id===H?{...Le,status:Ie}:Le))}catch(ge){console.error("Error updating status:",ge),n?.("Error updating","error")}finally{g(null)}},ie=H=>{_(Ee=>({...Ee,[H]:!Ee[H]}))},pe=()=>{const H=D?"light":"dark";document.documentElement.setAttribute("data-theme",H),localStorage.setItem("theme",H),M(!D)},q=Qz(s),R=s.filter(H=>H.status==="done").length,U=s.filter(H=>H.status==="working").length,J=s.length-R,B=s.reduce((H,Ee)=>{const Te=Ee.group_name||"General";return H[Te]||(H[Te]=[]),H[Te].push(Ee),H},{}),fe=Object.keys(B).length>1||Object.keys(B).length===1&&!B.General,je=H=>`${H.filter(Te=>Te.status==="done").length}/${H.length}`,te=y.useCallback(H=>{w(H)},[]);return x==="tm"?f.jsx("div",{className:"fm-view",children:f.jsx(f3,{project:e,companyId:t,onSubmit:()=>w("home"),onCancel:()=>w("home"),onShowToast:n})}):x==="report"?f.jsx(h3,{project:e,onShowToast:n,onClose:()=>w("home")}):x==="injury"?f.jsx("div",{className:"fm-view",children:f.jsx(p3,{project:e,companyId:t,onClose:()=>w("home"),onReportCreated:()=>{w("home"),n?.("Injury report submitted","success")}})}):x==="crew"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Crew Check-in"})]}),f.jsx(m3,{project:e,companyId:t,onShowToast:n})]}):x==="disposal"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Disposal Loads"})]}),f.jsx(v3,{project:e,date:new Date().toISOString().split("T")[0],onShowToast:n})]}):x==="docs"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Documents"})]}),f.jsx(_3,{projectId:e.id,onShowToast:n})]}):x==="metrics"?f.jsx(vZ,{project:e,companyId:t,onBack:()=>w("home")}):x==="punchlist"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>{w("home"),K()},children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Punch List"})]}),f.jsx(XM,{projectId:e.id,areas:s,companyId:t,onShowToast:n})]}):x==="progress"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(cr,{size:20})}),f.jsx("h2",{children:"Progress"}),f.jsxs("span",{className:"fm-subheader-badge",children:[q,"%"]})]}),f.jsx("div",{className:"fm-progress-content",children:u?f.jsxs("div",{className:"fm-loading",children:[f.jsx("div",{className:"spinner"}),f.jsx("span",{children:"Loading..."})]}):s.length===0?f.jsxs("div",{className:"fm-empty",children:[f.jsx(uN,{size:48}),f.jsx("h3",{children:"No tasks yet"}),f.jsx("p",{children:"Office will add tasks to this project"})]}):fe?Object.entries(B).map(([H,Ee])=>f.jsxs("div",{className:"fm-group",children:[f.jsxs("button",{className:"fm-group-header",onClick:()=>ie(H),children:[f.jsxs("div",{className:"fm-group-left",children:[p[H]?f.jsx(hf,{size:18}):f.jsx(_c,{size:18}),f.jsx("span",{children:H})]}),f.jsx("span",{className:"fm-group-count",children:je(Ee)})]}),p[H]&&f.jsx("div",{className:"fm-group-items",children:Ee.map(Te=>f.jsxs("div",{className:`fm-task ${Te.status}`,children:[f.jsx("span",{className:"fm-task-name",children:Te.name}),f.jsxs("div",{className:"fm-task-btns",children:[f.jsx("button",{className:`fm-status-btn working ${Te.status==="working"?"active":""}`,onClick:()=>I(Te.id,"working"),disabled:h===Te.id,children:f.jsx(Mo,{size:14})}),f.jsx("button",{className:`fm-status-btn done ${Te.status==="done"?"active":""}`,onClick:()=>I(Te.id,"done"),disabled:h===Te.id,children:f.jsx(ea,{size:14})})]})]},Te.id))})]},H)):f.jsx("div",{className:"fm-task-list",children:s.map(H=>f.jsxs("div",{className:`fm-task ${H.status}`,children:[f.jsx("span",{className:"fm-task-name",children:H.name}),f.jsxs("div",{className:"fm-task-btns",children:[f.jsx("button",{className:`fm-status-btn working ${H.status==="working"?"active":""}`,onClick:()=>I(H.id,"working"),disabled:h===H.id,children:f.jsx(Mo,{size:14})}),f.jsx("button",{className:`fm-status-btn done ${H.status==="done"?"active":""}`,onClick:()=>I(H.id,"done"),disabled:h===H.id,children:f.jsx(ea,{size:14})})]})]},H.id))})})]}):f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-header",children:[f.jsx("button",{className:"fm-exit",onClick:i,children:f.jsx(cr,{size:20})}),f.jsxs("div",{className:"fm-header-center",children:[f.jsx("h1",{className:"fm-project-name",children:e.name}),r&&f.jsx("span",{className:"fm-foreman-name",children:r}),f.jsx("button",{className:"fm-info-toggle",onClick:()=>S(!j),children:f.jsx(Uq,{size:16})})]}),f.jsx("button",{className:"fm-theme",onClick:pe,children:D?f.jsx(rN,{size:20}):f.jsx(nN,{size:20})})]}),j&&f.jsxs("div",{className:"fm-project-info",children:[e.job_number&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Job #"}),f.jsx("span",{children:e.job_number})]}),e.address&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Address"}),f.jsx("span",{children:e.address})]}),e.general_contractor&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"GC"}),f.jsx("span",{children:e.general_contractor})]}),e.client_phone&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Phone"}),f.jsx("a",{href:`tel:${e.client_phone}`,children:e.client_phone})]})]}),f.jsx(yZ,{project:e,todayStatus:A,progress:q,areasWorking:U,areasDone:R,areasRemaining:J,punchListOpenCount:O,onNavigate:te,onShowToast:n})]})}const _Z=y.lazy(()=>Zr(()=>import("./Dashboard-B-myWZ9n.js").then(e=>e.D),__vite__mapDeps([6,3,1,2,7]))),xZ=y.lazy(()=>Zr(()=>import("./Setup-CzdAdXSU.js"),__vite__mapDeps([8,3,1,2,4]))),wZ=y.lazy(()=>Zr(()=>import("./BrandingSettings-C-4OCM-n.js"),__vite__mapDeps([9,1,2,3,4]))),jZ=y.lazy(()=>Zr(()=>import("./PricingManager-Baq9r9k3.js"),__vite__mapDeps([10,1,2,3,4]))),SZ=y.lazy(()=>Zr(()=>import("./PublicView-CGKBJ7oG.js"),__vite__mapDeps([11,1,2,3,4]))),EZ=y.lazy(()=>Zr(()=>import("./SignaturePage-Dca-qYZq.js"),__vite__mapDeps([12,1,2,7,3,13,4]))),OZ=y.lazy(()=>Zr(()=>import("./MembershipManager-DSrJd7FS.js"),__vite__mapDeps([14,1,2,3,4]))),CZ=y.lazy(()=>Zr(()=>import("./LandingPage-D4I5glOI.js"),__vite__mapDeps([15,1,2,3,4])));function cm(){return f.jsxs("div",{className:"page-loader",children:[f.jsx(qr,{className:"loading-logo"}),f.jsx("div",{className:"spinner"})]})}function AZ({pendingCompanyName:e,userName:t,onCheckStatus:r,onLogout:n}){const[i,s]=y.useState(!1);y.useEffect(()=>{const u=setInterval(()=>{r()},3e4);return()=>clearInterval(u)},[r]);const c=async()=>{s(!0),await r(),setTimeout(()=>s(!1),1e3)};return f.jsxs("div",{className:"pending-approval-screen",children:[f.jsx(qr,{className:"pending-logo"}),f.jsx("div",{className:"pending-pulse-ring",children:f.jsx("div",{className:"pending-pulse-dot"})}),f.jsx("h2",{children:"Awaiting Approval"}),e&&f.jsx("div",{className:"pending-company-name",children:e}),f.jsxs("p",{className:"pending-message",children:[t?`Hi ${t.split(" ")[0]}, your`:"Your"," membership request has been submitted. A company administrator will review and approve your access."]}),f.jsx("p",{className:"pending-auto-check",children:"We'll automatically check for updates"}),f.jsxs("div",{className:"pending-actions",children:[f.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Sign Out"}),f.jsx("button",{className:"btn btn-primary",onClick:c,disabled:i,children:i?"Checking...":"Check Status"})]})]})}function NZ(){const{token:e}=jN();return f.jsx(y.Suspense,{fallback:f.jsx(cm,{}),children:f.jsx(SZ,{shareToken:e})})}function kZ(){const{token:e}=jN();return f.jsx(y.Suspense,{fallback:f.jsx(cm,{}),children:f.jsx(EZ,{signatureToken:e})})}function DZ(){const e=hm(),t=ia(),[r,n]=y.useState(null),[i,s]=y.useState(null),[c,u]=y.useState([]),[,m]=y.useState([]),[h,g]=y.useState(null),[p,_]=y.useState(""),[x,w]=y.useState(!0),[j,S]=y.useState(null),[O,C]=y.useState(!1),[A,k]=y.useState(!1),[D,M]=y.useState(null),[z,K]=y.useState(0),[Q,ne]=y.useState(!1),[G,I]=y.useState(null),[ie,pe]=y.useState(""),[q,R]=y.useState(!1),U=y.useCallback((ve,Ne="")=>{S({message:ve,type:Ne})},[]),J=y.useCallback(async()=>{try{if(!P){w(!1);return}const{data:{user:ve}}=await T.auth.getUser();if(!ve){w(!1);return}const{data:Ne}=await T.from("users").select("*").eq("id",ve.id).single();if(Ne){n(Ne);let Me=await be.getUserCompanies(ve.id);if(Me.length===0&&Ne.company_id&&await be.repairLegacyUser(ve.id,Ne.company_id,Ne.role||"member")&&(Me=await be.getUserCompanies(ve.id)),u(Me),Me.length===0){if(await be.getUserPendingMemberships(ve.id)>0){try{const{data:yt}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",ve.id).eq("status","pending").limit(1);yt?.[0]?.companies?.name&&pe(yt[0].companies.name)}catch{}e("/pending",{replace:!0});return}S({message:"No company access. Join a company to continue.",type:"error"}),await of.signOut();return}const jt=localStorage.getItem("selectedCompanyId");let Re=null;if(jt&&Me.find(It=>It.id===jt)?Re=Me.find(It=>It.id===jt):Me.length>0&&(Re=Me[0]),Re){const{data:It}=await T.from("companies").select("*").eq("id",Re.id).single();s(It),R(!0);const yt=t.pathname,Ct=yt.startsWith("/view/")||yt.startsWith("/sign/"),Br=["/dashboard","/projects/new","/pricing","/branding","/team"].includes(yt);!Ct&&!Br&&yt!=="/field"&&e("/dashboard",{replace:!0})}}}catch(ve){console.error("Auth check error:",ve)}finally{w(!1)}},[e,t.pathname]);y.useEffect(()=>{const ve=t.pathname;ve.startsWith("/view/")||ve.startsWith("/sign/")?w(!1):J()},[]),y.useEffect(()=>{if(!P)return;const{data:{subscription:ve}}=T.auth.onAuthStateChange(async Ne=>{if(Ne==="SIGNED_OUT"||Ne==="USER_DELETED"){const Me=t.pathname;if(Me.startsWith("/sign/")||Me.startsWith("/view/"))return;n(null),s(null),u([]),R(!1),e("/login",{replace:!0})}else if(Ne==="SIGNED_IN"&&!r){const Me=t.pathname;!Me.startsWith("/sign/")&&!Me.startsWith("/view/")&&J()}});return()=>{ve?.unsubscribe()}},[r,J,e,t.pathname]);const B=(ve,Ne="")=>{localStorage.setItem("fieldsync-has-visited","true"),g(ve),_(Ne),e("/field")},fe=async(ve,Ne)=>{try{await jy(),localStorage.setItem("fieldsync-has-visited","true");const{data:Me,error:jt}=await T.auth.signInWithPassword({email:ve,password:Ne});if(jt){U(jt.message||"Invalid credentials","error");return}const{data:Re,error:It}=await T.from("users").select("*").eq("id",Me.user.id).single();if(It){console.error("User fetch error:",It),U("Error loading profile","error");return}if(Re){n(Re);let yt=await be.getUserCompanies(Me.user.id);yt.length===0&&Re.company_id&&await be.repairLegacyUser(Me.user.id,Re.company_id,Re.role||"member")&&(yt=await be.getUserCompanies(Me.user.id)),u(yt);const Ct=localStorage.getItem("selectedCompanyId");let Br=null;if(Ct&&yt.find(xt=>xt.id===Ct)?Br=yt.find(xt=>xt.id===Ct):yt.length>0&&(Br=yt[0]),Br){const{data:xt}=await T.from("companies").select("*").eq("id",Br.id).single();s(xt),R(!0);const{data:Ye}=await T.auth.mfa.listFactors(),$r=Ye?.totp?.find(xn=>xn.status==="verified");$r?(I($r.id),ne(!0)):e("/dashboard")}else if(await be.getUserPendingMemberships(Me.user.id)>0){try{const{data:Ye}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",Me.user.id).eq("status","pending").limit(1);Ye?.[0]?.companies?.name&&pe(Ye[0].companies.name)}catch{}e("/pending")}else U("No company access. Please contact admin.","error")}else U("Profile not found. Please contact admin.","error")}catch(Me){console.error("Login error:",Me),U("Login failed","error")}},je=async ve=>{try{const{data:Ne}=await T.from("companies").select("*").eq("id",ve).single();Ne&&(s(Ne),localStorage.setItem("selectedCompanyId",ve),C(!1),e("/dashboard"),U(`Switched to ${Ne.name}`,"success"))}catch(Ne){console.error("Switch company error:",Ne),U("Error switching company","error")}},te=async()=>{try{await of.signOut(),n(null),s(null),u([]),R(!1),localStorage.removeItem("selectedCompanyId"),e("/login")}catch(ve){console.error("Logout error:",ve),U("Error signing out","error")}},H=async()=>{await jy(),g(null),_(""),e("/login")},Ee=()=>{e("/dashboard"),i?.id&&Te()},Te=async()=>{if(i?.id)try{const ve=await be.getProjects(i.id);m(ve)}catch(ve){console.error("Error loading projects:",ve)}};y.useEffect(()=>{i?.id&&q&&(Te(),Ie())},[i?.id,q]);const Ie=async()=>{if(i?.id)try{const Ne=(await be.getCompanyMemberships(i.id)).filter(Me=>Me.status==="pending").length;K(Ne)}catch(ve){console.error("Error loading pending count:",ve)}},ge=y.useCallback(()=>{M(null)},[]),we=c.find(ve=>ve.id===i?.id)?.access_level==="administrator"||i?.owner_user_id===r?.id,xe=j&&f.jsx(BN,{message:j.message,type:j.type,onClose:()=>S(null)});if(x)return f.jsx(Ag,{children:f.jsx(Td,{companyId:i?.id,children:f.jsxs("div",{className:"loading-screen",children:[f.jsx(qr,{className:"loading-logo"}),f.jsx("div",{className:"spinner"})]})})});if(Q)return f.jsx(Ag,{children:f.jsxs(Td,{companyId:i?.id,children:[f.jsx(zi,{children:f.jsx(Zz,{factorId:G,onVerified:()=>{ne(!1),e("/dashboard")},onCancel:async()=>{ne(!1),I(null),await of.signOut(),n(null),s(null),u([]),R(!1),e("/login")}})}),xe]})});const oe=ve=>!r||!i||!q?f.jsx(xo,{to:"/login",replace:!0}):ve,He=ve=>f.jsx(Gz,{children:f.jsxs("div",{children:[!P&&f.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),f.jsx("nav",{className:"nav",children:f.jsxs("div",{className:"nav-content",children:[f.jsx(qr,{}),f.jsxs("div",{className:"nav-tabs nav-tabs-desktop",children:[f.jsx("button",{className:`nav-tab ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>e("/dashboard"),children:"Dashboard"}),f.jsx("button",{className:`nav-tab ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>e("/projects/new"),children:"+ New Project"}),f.jsx("button",{className:`nav-tab ${t.pathname==="/pricing"?"active":""}`,onClick:()=>e("/pricing"),children:"Pricing"}),we&&f.jsx("button",{className:`nav-tab ${t.pathname==="/branding"?"active":""}`,onClick:()=>e("/branding"),children:"Branding"}),we&&f.jsxs("button",{className:`nav-tab ${t.pathname==="/team"?"active":""}`,onClick:()=>e("/team"),children:["Team",z>0&&f.jsx("span",{className:"nav-tab-badge",children:z})]})]}),f.jsxs("div",{className:"nav-user nav-user-desktop",children:[f.jsx(ZS,{compact:!0}),f.jsxs("div",{className:"mobile-menu",children:[f.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!A),"aria-label":"User menu",children:""}),A&&f.jsxs("div",{className:"mobile-menu-dropdown",children:[f.jsxs("div",{className:"mobile-menu-info",children:[f.jsx("div",{className:"mobile-menu-user",children:r?.name||r?.email}),i&&f.jsx("div",{className:"mobile-menu-company",children:i.name})]}),f.jsx("button",{className:"mobile-menu-logout",onClick:()=>{k(!1),te()},children:"Sign Out"})]})]}),c.length>1&&f.jsxs("div",{className:"company-switcher",children:[f.jsxs("button",{className:"company-switcher-btn",onClick:()=>C(!O),children:[i?.name||"Select Company",f.jsx("span",{className:"switcher-arrow",children:""})]}),O&&f.jsx("div",{className:"company-dropdown",children:c.map(Ne=>f.jsxs("button",{className:`company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>je(Ne.id),children:[Ne.name,Ne.id===i?.id&&f.jsx("span",{className:"check",children:""})]},Ne.id))})]}),c.length<=1&&i&&f.jsx("span",{className:"nav-company-name",children:i.name}),f.jsx("span",{className:"nav-user-name",children:r?.name||r?.email}),f.jsx("button",{className:"nav-logout",onClick:te,children:"Sign Out"})]}),f.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!0),"aria-label":"Open menu",children:f.jsxs("span",{className:"hamburger-icon",children:[f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{})]})})]})}),A&&f.jsx("div",{className:"mobile-drawer-overlay",onClick:()=>k(!1),children:f.jsxs("div",{className:"mobile-drawer",onClick:Ne=>Ne.stopPropagation(),children:[f.jsxs("div",{className:"mobile-drawer-header",children:[f.jsx(qr,{}),f.jsx("button",{className:"mobile-drawer-close",onClick:()=>k(!1),"aria-label":"Close menu",children:""})]}),f.jsxs("div",{className:"mobile-drawer-user",children:[f.jsx("div",{className:"mobile-user-avatar",children:(r?.name||r?.email||"U")[0].toUpperCase()}),f.jsxs("div",{className:"mobile-user-info",children:[f.jsx("span",{className:"mobile-user-name",children:r?.name||r?.email}),f.jsx("span",{className:"mobile-user-company",children:i?.name})]})]}),c.length>1&&f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Switch Company"}),f.jsx("div",{className:"mobile-company-list",children:c.map(Ne=>f.jsxs("button",{className:`mobile-company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>{je(Ne.id),k(!1)},children:[f.jsx("span",{className:"mobile-company-name",children:Ne.name}),Ne.id===i?.id&&f.jsx("span",{className:"mobile-company-check",children:""})]},Ne.id))})]}),f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Navigation"}),f.jsxs("div",{className:"mobile-nav-list",children:[f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>{e("/dashboard"),k(!1)},children:"Dashboard"}),f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>{e("/projects/new"),k(!1)},children:"+ New Project"}),f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/pricing"?"active":""}`,onClick:()=>{e("/pricing"),k(!1)},children:"Pricing"}),we&&f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/branding"?"active":""}`,onClick:()=>{e("/branding"),k(!1)},children:"Branding"}),we&&f.jsxs("button",{className:`mobile-nav-item ${t.pathname==="/team"?"active":""}`,onClick:()=>{e("/team"),k(!1)},children:["Team",z>0&&f.jsx("span",{className:"mobile-nav-badge",children:z})]})]})]}),f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Appearance"}),f.jsx("div",{className:"mobile-theme-toggle",children:f.jsx(ZS,{})})]}),f.jsx("div",{className:"mobile-drawer-footer",children:f.jsx("button",{className:"mobile-logout-btn",onClick:()=>{te(),k(!1)},children:"Sign Out"})})]})}),f.jsx(zi,{children:f.jsx(y.Suspense,{fallback:f.jsx(cm,{}),children:f.jsx("div",{className:"container",children:ve},i?.id)})}),f.jsx(QS,{}),xe,f.jsx(Xz,{})]})});return f.jsx(Ag,{children:f.jsx(Td,{companyId:i?.id,children:f.jsxs(YL,{children:[f.jsx(mn,{path:"/view/:token",element:f.jsxs(zi,{children:[f.jsx(NZ,{}),xe]})}),f.jsx(mn,{path:"/sign/:token",element:f.jsxs(zi,{children:[f.jsx(kZ,{}),xe]})}),f.jsx(mn,{path:"/login",element:r&&i&&q?f.jsx(xo,{to:"/dashboard",replace:!0}):f.jsxs(zi,{children:[f.jsx(Wz,{onForemanAccess:B,onOfficeLogin:fe,onShowToast:U}),xe]})}),f.jsx(mn,{path:"/pending",element:f.jsxs(zi,{children:[f.jsx(AZ,{pendingCompanyName:ie,userName:r?.name,onCheckStatus:J,onLogout:te}),xe]})}),f.jsx(mn,{path:"/field",element:h?f.jsxs(Td,{companyId:h.company_id,children:[f.jsx(zi,{children:f.jsx(bZ,{project:h,companyId:h.company_id,foremanName:p,onShowToast:U,onExit:H})}),f.jsx(QS,{}),xe]}):f.jsx(xo,{to:"/login",replace:!0})}),f.jsx(mn,{path:"/dashboard",element:oe(He(f.jsx(_Z,{company:i,user:r,isAdmin:we,onShowToast:U,navigateToProjectId:D,onProjectNavigated:ge})))}),f.jsx(mn,{path:"/projects/new",element:oe(He(f.jsx(xZ,{company:i,user:r,onProjectCreated:Ee,onShowToast:U})))}),f.jsx(mn,{path:"/pricing",element:oe(He(f.jsx(jZ,{company:i,onShowToast:U})))}),f.jsx(mn,{path:"/branding",element:oe(He(f.jsx(wZ,{company:i,onShowToast:U})))}),f.jsx(mn,{path:"/team",element:oe(we?He(f.jsx(OZ,{company:i,user:r,onShowToast:U})):f.jsx(xo,{to:"/dashboard",replace:!0}))}),f.jsx(mn,{path:"/",element:r&&i&&q?f.jsx(xo,{to:"/dashboard",replace:!0}):localStorage.getItem("fieldsync-has-visited")?f.jsx(xo,{to:"/login",replace:!0}):f.jsx(zi,{children:f.jsx(y.Suspense,{fallback:f.jsx(cm,{}),children:f.jsx(CZ,{})})})}),f.jsx(mn,{path:"*",element:f.jsx(xo,{to:"/",replace:!0})})]})})})}var Ws;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Ws||(Ws={}));class py extends Error{constructor(t,r,n){super(t),this.message=t,this.code=r,this.data=n}}const TZ=e=>{var t,r;return e?.androidBridge?"android":!((r=(t=e?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},PZ=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},n=r.Plugins=r.Plugins||{},i=()=>t!==null?t.name:TZ(e),s=()=>i()!=="web",c=p=>{const _=h.get(p);return!!(_?.platforms.has(i())||u(p))},u=p=>{var _;return(_=r.PluginHeaders)===null||_===void 0?void 0:_.find(x=>x.name===p)},m=p=>e.console.error(p),h=new Map,g=(p,_={})=>{const x=h.get(p);if(x)return console.warn(`Capacitor plugin "${p}" already registered. Cannot register plugins twice.`),x.proxy;const w=i(),j=u(p);let S;const O=async()=>(!S&&w in _?S=typeof _[w]=="function"?S=await _[w]():S=_[w]:t!==null&&!S&&"web"in _&&(S=typeof _.web=="function"?S=await _.web():S=_.web),S),C=(K,Q)=>{var ne,G;if(j){const I=j?.methods.find(ie=>Q===ie.name);if(I)return I.rtype==="promise"?ie=>r.nativePromise(p,Q.toString(),ie):(ie,pe)=>r.nativeCallback(p,Q.toString(),ie,pe);if(K)return(ne=K[Q])===null||ne===void 0?void 0:ne.bind(K)}else{if(K)return(G=K[Q])===null||G===void 0?void 0:G.bind(K);throw new py(`"${p}" plugin is not implemented on ${w}`,Ws.Unimplemented)}},A=K=>{let Q;const ne=(...G)=>{const I=O().then(ie=>{const pe=C(ie,K);if(pe){const q=pe(...G);return Q=q?.remove,q}else throw new py(`"${p}.${K}()" is not implemented on ${w}`,Ws.Unimplemented)});return K==="addListener"&&(I.remove=async()=>Q()),I};return ne.toString=()=>`${K.toString()}() { [capacitor code] }`,Object.defineProperty(ne,"name",{value:K,writable:!1,configurable:!1}),ne},k=A("addListener"),D=A("removeListener"),M=(K,Q)=>{const ne=k({eventName:K},Q),G=async()=>{const ie=await ne;D({eventName:K,callbackId:ie},Q)},I=new Promise(ie=>ne.then(()=>ie({remove:G})));return I.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await G()},I},z=new Proxy({},{get(K,Q){switch(Q){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return j?M:k;case"removeListener":return D;default:return A(Q)}}});return n[p]=z,h.set(p,{name:p,proxy:z,platforms:new Set([...Object.keys(_),...j?[w]:[]])}),z};return r.convertFileSrc||(r.convertFileSrc=p=>p),r.getPlatform=i,r.handleError=m,r.isNativePlatform=s,r.isPluginAvailable=c,r.registerPlugin=g,r.Exception=py,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},MZ=e=>e.Capacitor=PZ(e),Uc=MZ(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),I_=Uc.registerPlugin;class U_{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let n=!1;this.listeners[t]||(this.listeners[t]=[],n=!0),this.listeners[t].push(r);const s=this.windowListeners[t];s&&!s.registered&&this.addWindowListener(s),n&&this.sendRetainedArgumentsForEvent(t);const c=async()=>this.removeListener(t,r);return Promise.resolve({remove:c})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,n){const i=this.listeners[t];if(!i){if(n){let s=this.retainedEventArguments[t];s||(s=[]),s.push(r),this.retainedEventArguments[t]=s}return}i.forEach(s=>s(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:n=>{this.notifyListeners(r,n)}}}unimplemented(t="not implemented"){return new Uc.Exception(t,Ws.Unimplemented)}unavailable(t="not available"){return new Uc.Exception(t,Ws.Unavailable)}async removeListener(t,r){const n=this.listeners[t];if(!n)return;const i=n.indexOf(r);this.listeners[t].splice(i,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(n=>{this.notifyListeners(t,n)}))}}const XA=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),ZA=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class RZ extends U_{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(n=>{if(n.length<=0)return;let[i,s]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=ZA(i).trim(),s=ZA(s).trim(),r[i]=s}),r}async setCookie(t){try{const r=XA(t.key),n=XA(t.value),i=t.expires?`; expires=${t.expires.replace("expires=","")}`:"",s=(t.path||"/").replace("path=",""),c=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${n||""}${i}; path=${s}; ${c};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}I_("CapacitorCookies",{web:()=>new RZ});const qZ=async e=>new Promise((t,r)=>{const n=new FileReader;n.onload=()=>{const i=n.result;t(i.indexOf(",")>=0?i.split(",")[1]:i)},n.onerror=i=>r(i),n.readAsDataURL(e)}),LZ=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(i=>i.toLocaleLowerCase()).reduce((i,s,c)=>(i[s]=e[t[c]],i),{})},zZ=(e,t=!0)=>e?Object.entries(e).reduce((n,i)=>{const[s,c]=i;let u,m;return Array.isArray(c)?(m="",c.forEach(h=>{u=t?encodeURIComponent(h):h,m+=`${s}=${u}&`}),m.slice(0,-1)):(u=t?encodeURIComponent(c):c,m=`${s}=${u}`),`${n}&${m}`},"").substr(1):null,IZ=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),i=LZ(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[c,u]of Object.entries(e.data||{}))s.set(c,u);r.body=s.toString()}else if(i.includes("multipart/form-data")||e.data instanceof FormData){const s=new FormData;if(e.data instanceof FormData)e.data.forEach((u,m)=>{s.append(m,u)});else for(const u of Object.keys(e.data))s.append(u,e.data[u]);r.body=s;const c=new Headers(r.headers);c.delete("content-type"),r.headers=c}else(i.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r};class UZ extends U_{async request(t){const r=IZ(t,t.webFetchExtra),n=zZ(t.params,t.shouldEncodeUrlParams),i=n?`${t.url}?${n}`:t.url,s=await fetch(i,r),c=s.headers.get("content-type")||"";let{responseType:u="text"}=s.ok?t:{};c.includes("application/json")&&(u="json");let m,h;switch(u){case"arraybuffer":case"blob":h=await s.blob(),m=await qZ(h);break;case"json":m=await s.json();break;case"document":case"text":default:m=await s.text()}const g={};return s.headers.forEach((p,_)=>{g[_]=p}),{data:m,headers:g,status:s.status,url:s.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}I_("CapacitorHttp",{web:()=>new UZ});var QA;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(QA||(QA={}));var JA;(function(e){e.StatusBar="StatusBar",e.NavigationBar="NavigationBar"})(JA||(JA={}));class BZ extends U_{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}I_("SystemBars",{web:()=>new BZ});const ZM=Uc.isNativePlatform(),$Z=Uc.getPlatform(),HZ=$Z==="android";let eN=!1;async function FZ(){if(!ZM||eN)return;eN=!0;const{App:e}=await Zr(async()=>{const{App:s}=await import("./index-uQdBCTyx.js");return{App:s}},__vite__mapDeps([16,3,1,2,4])),{StatusBar:t,Style:r}=await Zr(async()=>{const{StatusBar:s,Style:c}=await import("./index-D24d4aV3.js");return{StatusBar:s,Style:c}},__vite__mapDeps([17,1,2,3,4])),{SplashScreen:n}=await Zr(async()=>{const{SplashScreen:s}=await import("./index-BYDwCBXz.js");return{SplashScreen:s}},__vite__mapDeps([18,3,1,2,4])),{Keyboard:i}=await Zr(async()=>{const{Keyboard:s}=await import("./index-upkyCs2q.js");return{Keyboard:s}},__vite__mapDeps([19,1,2,3,4]));try{await t.setStyle({style:r.Dark}),HZ&&await t.setBackgroundColor({color:"#0f172a"})}catch{}try{await n.hide()}catch{}e.addListener("backButton",({canGoBack:s})=>{s?window.history.back():e.minimizeApp()});try{i.addListener("keyboardWillShow",()=>{document.body.classList.add("keyboard-visible")}),i.addListener("keyboardWillHide",()=>{document.body.classList.remove("keyboard-visible")})}catch{}}FZ();ZM&&document.documentElement.classList.add("native");Wq.createRoot(document.getElementById("root")).render(f.jsx(Bq.StrictMode,{children:f.jsx(vz,{children:f.jsx(DZ,{})})}));"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{setInterval(()=>{e.update().catch(t=>console.debug("[SW] Update check failed:",t.message))},3e5)}).catch(e=>{console.debug("[SW] Registration failed:",e.message)})}),navigator.serviceWorker.addEventListener("message",e=>{e.data?.type==="SW_UPDATED"&&(console.log("[App] Service worker updated, reloading for fresh assets..."),window.location.reload()),e.data?.type==="ASSET_NOT_FOUND"&&(console.warn("[App] Asset not found:",e.data.url,"- reloading..."),"caches"in window?caches.keys().then(t=>{t.forEach(r=>caches.delete(r))}).finally(()=>{window.location.reload()}):window.location.reload())}));export{lM as $,Ir as A,W7 as B,I7 as C,ir as D,Lt as E,ya as F,ra as G,_Q as H,X as I,et as J,Vi as K,_r as L,Gi as M,C8 as N,uQ as O,Wo as P,Xo as Q,db as R,YN as S,B0 as T,Zi as U,Fs as V,Qm as W,ch as X,k_ as Y,en as Z,oM as _,bm as a,TQ as a$,q4 as a0,Js as a1,N_ as a2,Yo as a3,eF as a4,M_ as a5,D_ as a6,_V as a7,iM as a8,xM as a9,gZ as aA,cM as aB,fu as aC,$z as aD,Hz as aE,Fz as aF,tQ as aG,e3 as aH,p3 as aI,BN as aJ,T as aK,XZ as aL,rZ as aM,AM as aN,ZZ as aO,eQ as aP,Jz as aQ,QZ as aR,JZ as aS,qr as aT,rQ as aU,hm as aV,I_ as aW,_3 as aX,P as aY,U_ as aZ,WZ as a_,aG as aa,vt as ab,jE as ac,Qc as ad,sQ as ae,Zc as af,kt as ag,Pt as ah,x_ as ai,ZP as aj,yn as ak,l0 as al,zY as am,Im as an,VM as ao,b_ as ap,Ke as aq,be as ar,f as as,Tv as at,aZ as au,bb as av,jb as aw,Eb as ax,Xv as ay,TM as az,hk as b,st as c,nQ as d,oQ as e,EI as f,pD as g,gD as h,TN as i,ke as j,Mt as k,cQ as l,lQ as m,Z5 as n,OQ as o,CQ as p,Pr as q,xr as r,aQ as s,AQ as t,De as u,li as v,ci as w,th as x,Mm as y,xQ as z};
//# sourceMappingURL=index-lwUYQMhz.js.map
