{"version":3,"mappings":"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","names":["selectXAxisWithScale","state","graphicalItemId","isPanorama","selectAxisWithScale","selectXAxisIdFromGraphicalItemId","selectXAxisTicks","selectTicksOfGraphicalItem","selectYAxisWithScale","selectYAxisIdFromGraphicalItemId","selectYAxisTicks","selectBandSize","createSelector","selectChartLayout","layout","xAxis","yAxis","xAxisTicks","yAxisTicks","isCategoricalAxis","getBandSizeOfAxis","pickAreaId","_state","id","selectSynchronisedAreaSettings","selectUnfilteredCartesianItems","graphicalItems","item","selectNumericalAxisType","isXAxisCategorical","selectNumericalAxisIdFromGraphicalItemId","axisType","selectNumericalAxisStackGroups","selectStackGroups","selectGraphicalItemStackedData","areaSettings","stackGroups","_stackGroups$stackId","stackId","stackSeriesIdentifier","getStackSeriesIdentifier","groups","found","v","selectArea","selectChartDataWithIndexesIfNotInPanoramaPosition3","selectChartBaseValue","stackedData","_ref","bandSize","chartBaseValue","chartData","dataStartIndex","dataEndIndex","data","displayedData","computeArea","_excluded","_excluded2","_extends","n","e","t","r","_objectWithoutProperties","o","i","_objectWithoutPropertiesLoose","ownKeys","_objectSpread","_defineProperty","_toPropertyKey","_toPrimitive","getLegendItemColor","stroke","fill","computeLegendPayloadFromAreaData","props","dataKey","name","legendType","hide","getTooltipNameProp","SetAreaTooltipEntrySettings","React.memo","strokeWidth","unit","tooltipType","tooltipEntrySettings","React.createElement","SetTooltipEntrySettings","AreaDotsWrapper","_ref2","clipPathId","points","needClip","dot","areaProps","svgPropertiesNoEvents","Dots","AreaLabelListProvider","_ref3","showLabels","children","labelListEntries","point","_point$x","_point$y","viewBox","CartesianLabelListContextProvider","StaticArea","_ref4","baseLine","type","connectNulls","isRange","propsWithoutId","allOtherProps","propsWithEvents","svgPropertiesAndEvents","React.Fragment","Layer","Curve","VerticalRect","_ref5","_points$","_points","alpha","startY","endY","isWellBehavedNumber","height","maxX","entry","isNumber","HorizontalRect","_ref6","_points$2","_points2","startX","endX","width","maxY","ClipRect","_ref7","AreaWithAnimation","_ref8","previousPointsRef","previousBaselineRef","isAnimationActive","animationBegin","animationDuration","animationEasing","onAnimationStart","onAnimationEnd","animationInput","useMemo","animationId","useAnimationId","useCartesianChartLayout","isAnimating","setIsAnimating","useState","handleAnimationEnd","useCallback","handleAnimationStart","prevPoints","prevBaseLine","JavascriptAnimate","prevPointsDiffFactor","stepPoints","index","prevPointIndex","prev","interpolate","stepBaseLine","isNullish","isNan","LabelListFromLabelProp","RenderArea","_ref9","useRef","AreaWithState","PureComponent","className","top","left","xAxisId","yAxisId","zIndex","layerClass","clsx","getRadiusAndStrokeWidthFromDot","clipDot","isClipDot","dotSize","activePointsClipPath","ZIndexLayer","GraphicalItemClipPath","ActivePoints","defaultAreaProps","DefaultZIndexes","AreaImpl","_useAppSelector","_resolveDefaultProps","resolveDefaultProps","activeDot","fillOpacity","everythingElse","useChartLayout","chartName","useChartName","useNeedsClip","useIsPanorama","useAppSelector","plotArea","usePlotArea","Global","getBaseValue","itemBaseValue","baseValue","numericAxis","domain","domainMax","domainMin","_ref0","hasStack","isHorizontalLayout","_valueAsArray$","_valueAsArray","valueAsArray","rawValue","getValueByDataKey","value1","isBreakPoint","getCateCoordinateOfLine","x","AreaFn","outsideProps","RegisterGraphicalItemId","SetLegendPayload","SetCartesianGraphicalItem","getNormalizedStackId","Area","propsAreEqual","allowedTooltipTypes","AreaChart","forwardRef","ref","CartesianChart","arrayTooltipSearcher","TMDashboard","tickets","laborRates","metrics","pending","approved","billed","rejected","totalHours","regularHours","overtimeHours","workerHoursMap","workersByRole","ticket","worker","regHrs","otHrs","role","materialsCost","costPer","uniqueWorkers","topWorkers","a","b","completedTickets","approvalRate","rates","calculateTicketValue","laborCost","rate","pendingValue","sum","approvedValue","billedValue","monthlyData","date","monthKey","monthLabel","byMonth","byStatus","s","formatCurrency","value","CustomTooltip","active","payload","label","jsxs","jsx","ClipboardList","Clock","Users","DollarSign","AlertCircle","CheckCircle","FileText","TrendingUp","ResponsiveContainer","PieChart","Pie","percent","Cell","Tooltip","BarChart","CartesianGrid","XAxis","YAxis","Bar","hours","percentage","TMTicketCard","memo","isExpanded","isSelected","isLocked","lockInfo","hasFailedImport","isRetrying","onToggleExpand","onToggleSelect","onApprove","onUpdateStatus","onDelete","onOpenCorAssign","onRetryImport","onShowSignatureLink","formatDate","calculateTotalHours","calculateTicketTotal","totalCost","handleKeyDown","Lock","CountBadge","Camera","AlertTriangle","HardHat","Wrench","Fragment","photo","idx","Link","Link2","RefreshCw","loadXLSX","loadJsPDF","__vitePreload","TMList","project","company","onShowToast","compact","previewMode","onViewAll","branding","useBranding","setTickets","loading","setLoading","loadingMore","setLoadingMore","filter","setFilter","expandedTicket","setExpandedTicket","selectedTickets","setSelectedTickets","page","setPage","hasMore","setHasMore","totalCount","setTotalCount","TICKETS_PER_PAGE","MAX_TICKETS_IN_MEMORY","viewMode","setViewMode","displayMode","setDisplayMode","saved","expandedMonths","setExpandedMonths","dateFilter","setDateFilter","showChangeOrderModal","setShowChangeOrderModal","pendingApprovalTicket","setPendingApprovalTicket","changeOrderValue","setChangeOrderValue","showSignatureLink","setShowSignatureLink","signatureLinkTicket","setSignatureLinkTicket","showCorAssignModal","setShowCorAssignModal","pendingCorAssignTicket","setPendingCorAssignTicket","availableCors","setAvailableCors","selectedCorForAssign","setSelectedCorForAssign","loadingCors","setLoadingCors","lockedTickets","setLockedTickets","failedImports","setFailedImports","retryingImport","setRetryingImport","useEffect","loadTickets","subscription","db","pageNum","reset","result","combined","ticketsWithCOR","lockResults","importStatusResults","editResult","importStatus","loadMore","updateStatus","ticketId","newStatus","error","handleApprove","confirmChangeOrderApproval","deleteTicket","openCorAssignModal","cors","handleAssignToCor","cor","handleRetryImport","next","total","w","regHours","otHours","dateStr","toggleTicketSelection","handleToggleExpand","handleShowSignatureLink","toggleSelectAll","currentFiltered","allSelected","clearSelection","getExportTickets","filtered","exportToExcel","exportTickets","XLSX","workersData","itemsData","summaryData","ticketDate","ticketStatus","itemName","category","wb","summarySheet","workersSheet","itemsSheet","fileName","exportToPDF","jsPDFModule","autoTableModule","jsPDF","autoTable","doc","pageWidth","pageHeight","margin","yPos","primaryColor","hexToRgb","secondaryColor","logoOffset","logoBase64","loadImageAsBase64","dates","startDate","endDate","grandTotalHours","grandTotalMaterials","totalWorkers","boxWidth","summaryBoxData","lightPrimary","c","boxX","supervisionData","operatorsData","laborersData","supervisionRegHours","supervisionOTHours","operatorsRegHours","operatorsOTHours","laborersRegHours","laborersOTHours","rowData","renderLaborTable","title","totalRegHours","totalOTHours","categoryData","categoryTotals","categoryOrder","renderMaterialsTable","subtotal","cat","firstTicket","renderSignatureBlock","signatureData","signerName","signerTitle","signerCompany","signedDate","sigLineY","titleCompany","formattedDate","totalPages","footerY","filteredTickets","now","currentMonth","currentYear","sevenDaysAgo","ticketsByMonth","currentMonthKey","toggleMonthExpand","newExpanded","totalTicketsCount","TicketSkeleton","allFilteredSelected","someSelected","renderTicketCard","BarChart3","List","exportTMTicketsCSV","FileSpreadsheet","status","Calendar","monthData","ChevronDown","ChevronRight","SignatureLinkGenerator","X"],"ignoreList":[0,1,2],"sources":["../../node_modules/recharts/es6/state/selectors/areaSelectors.js","../../node_modules/recharts/es6/cartesian/Area.js","../../node_modules/recharts/es6/chart/AreaChart.js","../../src/components/tm/TMDashboard.jsx","../../src/components/tm/TMTicketCard.jsx","../../src/components/TMList.jsx"],"sourcesContent":["import { createSelector } from 'reselect';\nimport { computeArea } from '../../cartesian/Area';\nimport { selectAxisWithScale, selectStackGroups, selectTicksOfGraphicalItem, selectUnfilteredCartesianItems } from './axisSelectors';\nimport { selectChartLayout } from '../../context/chartLayoutContext';\nimport { selectChartDataWithIndexesIfNotInPanoramaPosition3 } from './dataSelectors';\nimport { getBandSizeOfAxis, isCategoricalAxis } from '../../util/ChartUtils';\nimport { getStackSeriesIdentifier } from '../../util/stacks/getStackSeriesIdentifier';\nimport { selectChartBaseValue } from './rootPropsSelectors';\nimport { selectXAxisIdFromGraphicalItemId, selectYAxisIdFromGraphicalItemId } from './graphicalItemSelectors';\nvar selectXAxisWithScale = (state, graphicalItemId, isPanorama) => selectAxisWithScale(state, 'xAxis', selectXAxisIdFromGraphicalItemId(state, graphicalItemId), isPanorama);\nvar selectXAxisTicks = (state, graphicalItemId, isPanorama) => selectTicksOfGraphicalItem(state, 'xAxis', selectXAxisIdFromGraphicalItemId(state, graphicalItemId), isPanorama);\nvar selectYAxisWithScale = (state, graphicalItemId, isPanorama) => selectAxisWithScale(state, 'yAxis', selectYAxisIdFromGraphicalItemId(state, graphicalItemId), isPanorama);\nvar selectYAxisTicks = (state, graphicalItemId, isPanorama) => selectTicksOfGraphicalItem(state, 'yAxis', selectYAxisIdFromGraphicalItemId(state, graphicalItemId), isPanorama);\nvar selectBandSize = createSelector([selectChartLayout, selectXAxisWithScale, selectYAxisWithScale, selectXAxisTicks, selectYAxisTicks], (layout, xAxis, yAxis, xAxisTicks, yAxisTicks) => {\n  if (isCategoricalAxis(layout, 'xAxis')) {\n    return getBandSizeOfAxis(xAxis, xAxisTicks, false);\n  }\n  return getBandSizeOfAxis(yAxis, yAxisTicks, false);\n});\nvar pickAreaId = (_state, id) => id;\n\n/*\n * There is a race condition problem because we read some data from props and some from the state.\n * The state is updated through a dispatch and is one render behind,\n * and so we have this weird one tick render where the displayedData in one selector have the old dataKey\n * but the new dataKey in another selector.\n *\n * A proper fix is to either move everything into the state, or read the dataKey always from props\n * - but this is a smaller change.\n */\nvar selectSynchronisedAreaSettings = createSelector([selectUnfilteredCartesianItems, pickAreaId], (graphicalItems, id) => graphicalItems.filter(item => item.type === 'area').find(item => item.id === id));\nvar selectNumericalAxisType = state => {\n  var layout = selectChartLayout(state);\n  var isXAxisCategorical = isCategoricalAxis(layout, 'xAxis');\n  return isXAxisCategorical ? 'yAxis' : 'xAxis';\n};\nvar selectNumericalAxisIdFromGraphicalItemId = (state, graphicalItemId) => {\n  var axisType = selectNumericalAxisType(state);\n  if (axisType === 'yAxis') {\n    return selectYAxisIdFromGraphicalItemId(state, graphicalItemId);\n  }\n  return selectXAxisIdFromGraphicalItemId(state, graphicalItemId);\n};\nvar selectNumericalAxisStackGroups = (state, graphicalItemId, isPanorama) => selectStackGroups(state, selectNumericalAxisType(state), selectNumericalAxisIdFromGraphicalItemId(state, graphicalItemId), isPanorama);\nexport var selectGraphicalItemStackedData = createSelector([selectSynchronisedAreaSettings, selectNumericalAxisStackGroups], (areaSettings, stackGroups) => {\n  var _stackGroups$stackId;\n  if (areaSettings == null || stackGroups == null) {\n    return undefined;\n  }\n  var {\n    stackId\n  } = areaSettings;\n  var stackSeriesIdentifier = getStackSeriesIdentifier(areaSettings);\n  if (stackId == null || stackSeriesIdentifier == null) {\n    return undefined;\n  }\n  var groups = (_stackGroups$stackId = stackGroups[stackId]) === null || _stackGroups$stackId === void 0 ? void 0 : _stackGroups$stackId.stackedData;\n  var found = groups === null || groups === void 0 ? void 0 : groups.find(v => v.key === stackSeriesIdentifier);\n  if (found == null) {\n    return undefined;\n  }\n  return found.map(item => [item[0], item[1]]);\n});\nexport var selectArea = createSelector([selectChartLayout, selectXAxisWithScale, selectYAxisWithScale, selectXAxisTicks, selectYAxisTicks, selectGraphicalItemStackedData, selectChartDataWithIndexesIfNotInPanoramaPosition3, selectBandSize, selectSynchronisedAreaSettings, selectChartBaseValue], (layout, xAxis, yAxis, xAxisTicks, yAxisTicks, stackedData, _ref, bandSize, areaSettings, chartBaseValue) => {\n  var {\n    chartData,\n    dataStartIndex,\n    dataEndIndex\n  } = _ref;\n  if (areaSettings == null || layout !== 'horizontal' && layout !== 'vertical' || xAxis == null || yAxis == null || xAxisTicks == null || yAxisTicks == null || xAxisTicks.length === 0 || yAxisTicks.length === 0 || bandSize == null) {\n    return undefined;\n  }\n  var {\n    data\n  } = areaSettings;\n  var displayedData;\n  if (data && data.length > 0) {\n    displayedData = data;\n  } else {\n    displayedData = chartData === null || chartData === void 0 ? void 0 : chartData.slice(dataStartIndex, dataEndIndex + 1);\n  }\n  if (displayedData == null) {\n    return undefined;\n  }\n  return computeArea({\n    layout,\n    xAxis,\n    yAxis,\n    xAxisTicks,\n    yAxisTicks,\n    dataStartIndex,\n    areaSettings,\n    stackedData,\n    displayedData,\n    chartBaseValue,\n    bandSize\n  });\n});","var _excluded = [\"id\"],\n  _excluded2 = [\"activeDot\", \"animationBegin\", \"animationDuration\", \"animationEasing\", \"connectNulls\", \"dot\", \"fill\", \"fillOpacity\", \"hide\", \"isAnimationActive\", \"legendType\", \"stroke\", \"xAxisId\", \"yAxisId\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport * as React from 'react';\nimport { PureComponent, useCallback, useMemo, useRef, useState } from 'react';\nimport { clsx } from 'clsx';\nimport { Curve } from '../shape/Curve';\nimport { Layer } from '../container/Layer';\nimport { CartesianLabelListContextProvider, LabelListFromLabelProp } from '../component/LabelList';\nimport { Dots } from '../component/Dots';\nimport { Global } from '../util/Global';\nimport { interpolate, isNan, isNullish, isNumber } from '../util/DataUtils';\nimport { getCateCoordinateOfLine, getNormalizedStackId, getTooltipNameProp, getValueByDataKey } from '../util/ChartUtils';\nimport { isClipDot } from '../util/ReactUtils';\nimport { ActivePoints } from '../component/ActivePoints';\nimport { SetTooltipEntrySettings } from '../state/SetTooltipEntrySettings';\nimport { GraphicalItemClipPath, useNeedsClip } from './GraphicalItemClipPath';\nimport { selectArea } from '../state/selectors/areaSelectors';\nimport { useIsPanorama } from '../context/PanoramaContext';\nimport { useCartesianChartLayout, useChartLayout } from '../context/chartLayoutContext';\nimport { useChartName } from '../state/selectors/selectors';\nimport { SetLegendPayload } from '../state/SetLegendPayload';\nimport { useAppSelector } from '../state/hooks';\nimport { useAnimationId } from '../util/useAnimationId';\nimport { resolveDefaultProps } from '../util/resolveDefaultProps';\nimport { isWellBehavedNumber } from '../util/isWellBehavedNumber';\nimport { usePlotArea } from '../hooks';\nimport { RegisterGraphicalItemId } from '../context/RegisterGraphicalItemId';\nimport { SetCartesianGraphicalItem } from '../state/SetGraphicalItem';\nimport { svgPropertiesNoEvents } from '../util/svgPropertiesNoEvents';\nimport { JavascriptAnimate } from '../animation/JavascriptAnimate';\nimport { getRadiusAndStrokeWidthFromDot } from '../util/getRadiusAndStrokeWidthFromDot';\nimport { svgPropertiesAndEvents } from '../util/svgPropertiesAndEvents';\nimport { ZIndexLayer } from '../zIndex/ZIndexLayer';\nimport { DefaultZIndexes } from '../zIndex/DefaultZIndexes';\nimport { propsAreEqual } from '../util/propsAreEqual';\n\n/**\n * @inline\n */\n\n/**\n * Internal props, combination of external props + defaultProps + private Recharts state\n */\n\n/**\n * External props, intended for end users to fill in\n */\n\n/**\n * Because of naming conflict, we are forced to ignore certain (valid) SVG attributes.\n */\n\nfunction getLegendItemColor(stroke, fill) {\n  return stroke && stroke !== 'none' ? stroke : fill;\n}\nvar computeLegendPayloadFromAreaData = props => {\n  var {\n    dataKey,\n    name,\n    stroke,\n    fill,\n    legendType,\n    hide\n  } = props;\n  return [{\n    inactive: hide,\n    dataKey,\n    type: legendType,\n    color: getLegendItemColor(stroke, fill),\n    value: getTooltipNameProp(name, dataKey),\n    payload: props\n  }];\n};\nvar SetAreaTooltipEntrySettings = /*#__PURE__*/React.memo(_ref => {\n  var {\n    dataKey,\n    data,\n    stroke,\n    strokeWidth,\n    fill,\n    name,\n    hide,\n    unit,\n    tooltipType,\n    id\n  } = _ref;\n  var tooltipEntrySettings = {\n    dataDefinedOnItem: data,\n    positions: undefined,\n    settings: {\n      stroke,\n      strokeWidth,\n      fill,\n      dataKey,\n      nameKey: undefined,\n      name: getTooltipNameProp(name, dataKey),\n      hide,\n      type: tooltipType,\n      color: getLegendItemColor(stroke, fill),\n      unit,\n      graphicalItemId: id\n    }\n  };\n  return /*#__PURE__*/React.createElement(SetTooltipEntrySettings, {\n    tooltipEntrySettings: tooltipEntrySettings\n  });\n});\nfunction AreaDotsWrapper(_ref2) {\n  var {\n    clipPathId,\n    points,\n    props\n  } = _ref2;\n  var {\n    needClip,\n    dot,\n    dataKey\n  } = props;\n  var areaProps = svgPropertiesNoEvents(props);\n  return /*#__PURE__*/React.createElement(Dots, {\n    points: points,\n    dot: dot,\n    className: \"recharts-area-dots\",\n    dotClassName: \"recharts-area-dot\",\n    dataKey: dataKey,\n    baseProps: areaProps,\n    needClip: needClip,\n    clipPathId: clipPathId\n  });\n}\nfunction AreaLabelListProvider(_ref3) {\n  var {\n    showLabels,\n    children,\n    points\n  } = _ref3;\n  var labelListEntries = points.map(point => {\n    var _point$x, _point$y;\n    var viewBox = {\n      x: (_point$x = point.x) !== null && _point$x !== void 0 ? _point$x : 0,\n      y: (_point$y = point.y) !== null && _point$y !== void 0 ? _point$y : 0,\n      width: 0,\n      lowerWidth: 0,\n      upperWidth: 0,\n      height: 0\n    };\n    return _objectSpread(_objectSpread({}, viewBox), {}, {\n      value: point.value,\n      payload: point.payload,\n      parentViewBox: undefined,\n      viewBox,\n      fill: undefined\n    });\n  });\n  return /*#__PURE__*/React.createElement(CartesianLabelListContextProvider, {\n    value: showLabels ? labelListEntries : undefined\n  }, children);\n}\nfunction StaticArea(_ref4) {\n  var {\n    points,\n    baseLine,\n    needClip,\n    clipPathId,\n    props\n  } = _ref4;\n  var {\n    layout,\n    type,\n    stroke,\n    connectNulls,\n    isRange\n  } = props;\n  var {\n      id\n    } = props,\n    propsWithoutId = _objectWithoutProperties(props, _excluded);\n  var allOtherProps = svgPropertiesNoEvents(propsWithoutId);\n  var propsWithEvents = svgPropertiesAndEvents(propsWithoutId);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, (points === null || points === void 0 ? void 0 : points.length) > 1 && /*#__PURE__*/React.createElement(Layer, {\n    clipPath: needClip ? \"url(#clipPath-\".concat(clipPathId, \")\") : undefined\n  }, /*#__PURE__*/React.createElement(Curve, _extends({}, propsWithEvents, {\n    id: id,\n    points: points,\n    connectNulls: connectNulls,\n    type: type,\n    baseLine: baseLine,\n    layout: layout,\n    stroke: \"none\",\n    className: \"recharts-area-area\"\n  })), stroke !== 'none' && /*#__PURE__*/React.createElement(Curve, _extends({}, allOtherProps, {\n    className: \"recharts-area-curve\",\n    layout: layout,\n    type: type,\n    connectNulls: connectNulls,\n    fill: \"none\",\n    points: points\n  })), stroke !== 'none' && isRange && /*#__PURE__*/React.createElement(Curve, _extends({}, allOtherProps, {\n    className: \"recharts-area-curve\",\n    layout: layout,\n    type: type,\n    connectNulls: connectNulls,\n    fill: \"none\",\n    points: baseLine\n  }))), /*#__PURE__*/React.createElement(AreaDotsWrapper, {\n    points: points,\n    props: propsWithoutId,\n    clipPathId: clipPathId\n  }));\n}\nfunction VerticalRect(_ref5) {\n  var _points$, _points;\n  var {\n    alpha,\n    baseLine,\n    points,\n    strokeWidth\n  } = _ref5;\n  var startY = (_points$ = points[0]) === null || _points$ === void 0 ? void 0 : _points$.y;\n  var endY = (_points = points[points.length - 1]) === null || _points === void 0 ? void 0 : _points.y;\n  if (!isWellBehavedNumber(startY) || !isWellBehavedNumber(endY)) {\n    return null;\n  }\n  var height = alpha * Math.abs(startY - endY);\n  var maxX = Math.max(...points.map(entry => entry.x || 0));\n  if (isNumber(baseLine)) {\n    maxX = Math.max(baseLine, maxX);\n  } else if (baseLine && Array.isArray(baseLine) && baseLine.length) {\n    maxX = Math.max(...baseLine.map(entry => entry.x || 0), maxX);\n  }\n  if (isNumber(maxX)) {\n    return /*#__PURE__*/React.createElement(\"rect\", {\n      x: 0,\n      y: startY < endY ? startY : startY - height,\n      width: maxX + (strokeWidth ? parseInt(\"\".concat(strokeWidth), 10) : 1),\n      height: Math.floor(height)\n    });\n  }\n  return null;\n}\nfunction HorizontalRect(_ref6) {\n  var _points$2, _points2;\n  var {\n    alpha,\n    baseLine,\n    points,\n    strokeWidth\n  } = _ref6;\n  var startX = (_points$2 = points[0]) === null || _points$2 === void 0 ? void 0 : _points$2.x;\n  var endX = (_points2 = points[points.length - 1]) === null || _points2 === void 0 ? void 0 : _points2.x;\n  if (!isWellBehavedNumber(startX) || !isWellBehavedNumber(endX)) {\n    return null;\n  }\n  var width = alpha * Math.abs(startX - endX);\n  var maxY = Math.max(...points.map(entry => entry.y || 0));\n  if (isNumber(baseLine)) {\n    maxY = Math.max(baseLine, maxY);\n  } else if (baseLine && Array.isArray(baseLine) && baseLine.length) {\n    maxY = Math.max(...baseLine.map(entry => entry.y || 0), maxY);\n  }\n  if (isNumber(maxY)) {\n    return /*#__PURE__*/React.createElement(\"rect\", {\n      x: startX < endX ? startX : startX - width,\n      y: 0,\n      width: width,\n      height: Math.floor(maxY + (strokeWidth ? parseInt(\"\".concat(strokeWidth), 10) : 1))\n    });\n  }\n  return null;\n}\nfunction ClipRect(_ref7) {\n  var {\n    alpha,\n    layout,\n    points,\n    baseLine,\n    strokeWidth\n  } = _ref7;\n  if (layout === 'vertical') {\n    return /*#__PURE__*/React.createElement(VerticalRect, {\n      alpha: alpha,\n      points: points,\n      baseLine: baseLine,\n      strokeWidth: strokeWidth\n    });\n  }\n  return /*#__PURE__*/React.createElement(HorizontalRect, {\n    alpha: alpha,\n    points: points,\n    baseLine: baseLine,\n    strokeWidth: strokeWidth\n  });\n}\nfunction AreaWithAnimation(_ref8) {\n  var {\n    needClip,\n    clipPathId,\n    props,\n    previousPointsRef,\n    previousBaselineRef\n  } = _ref8;\n  var {\n    points,\n    baseLine,\n    isAnimationActive,\n    animationBegin,\n    animationDuration,\n    animationEasing,\n    onAnimationStart,\n    onAnimationEnd\n  } = props;\n  var animationInput = useMemo(() => ({\n    points,\n    baseLine\n  }), [points, baseLine]);\n  var animationId = useAnimationId(animationInput, 'recharts-area-');\n  var layout = useCartesianChartLayout();\n  var [isAnimating, setIsAnimating] = useState(false);\n  var showLabels = !isAnimating;\n  var handleAnimationEnd = useCallback(() => {\n    if (typeof onAnimationEnd === 'function') {\n      onAnimationEnd();\n    }\n    setIsAnimating(false);\n  }, [onAnimationEnd]);\n  var handleAnimationStart = useCallback(() => {\n    if (typeof onAnimationStart === 'function') {\n      onAnimationStart();\n    }\n    setIsAnimating(true);\n  }, [onAnimationStart]);\n  if (layout == null) {\n    return null;\n  }\n  var prevPoints = previousPointsRef.current;\n  var prevBaseLine = previousBaselineRef.current;\n  return /*#__PURE__*/React.createElement(AreaLabelListProvider, {\n    showLabels: showLabels,\n    points: points\n  }, props.children, /*#__PURE__*/React.createElement(JavascriptAnimate, {\n    animationId: animationId,\n    begin: animationBegin,\n    duration: animationDuration,\n    isActive: isAnimationActive,\n    easing: animationEasing,\n    onAnimationEnd: handleAnimationEnd,\n    onAnimationStart: handleAnimationStart,\n    key: animationId\n  }, t => {\n    if (prevPoints) {\n      var prevPointsDiffFactor = prevPoints.length / points.length;\n      var stepPoints =\n      /*\n       * Here it is important that at the very end of the animation, on the last frame,\n       * we render the original points without any interpolation.\n       * This is needed because the code above is checking for reference equality to decide if the animation should run\n       * and if we create a new array instance (even if the numbers were the same)\n       * then we would break animations.\n       */\n      t === 1 ? points : points.map((entry, index) => {\n        var prevPointIndex = Math.floor(index * prevPointsDiffFactor);\n        if (prevPoints[prevPointIndex]) {\n          var prev = prevPoints[prevPointIndex];\n          return _objectSpread(_objectSpread({}, entry), {}, {\n            x: interpolate(prev.x, entry.x, t),\n            y: interpolate(prev.y, entry.y, t)\n          });\n        }\n        return entry;\n      });\n      var stepBaseLine;\n      if (isNumber(baseLine)) {\n        stepBaseLine = interpolate(prevBaseLine, baseLine, t);\n      } else if (isNullish(baseLine) || isNan(baseLine)) {\n        stepBaseLine = interpolate(prevBaseLine, 0, t);\n      } else {\n        stepBaseLine = baseLine.map((entry, index) => {\n          var prevPointIndex = Math.floor(index * prevPointsDiffFactor);\n          if (Array.isArray(prevBaseLine) && prevBaseLine[prevPointIndex]) {\n            var prev = prevBaseLine[prevPointIndex];\n            return _objectSpread(_objectSpread({}, entry), {}, {\n              x: interpolate(prev.x, entry.x, t),\n              y: interpolate(prev.y, entry.y, t)\n            });\n          }\n          return entry;\n        });\n      }\n      if (t > 0) {\n        /*\n         * We need to keep the refs in the parent component because we need to remember the last shape of the animation\n         * even if AreaWithAnimation is unmounted as that happens when changing props.\n         *\n         * And we need to update the refs here because here is where the interpolation is computed.\n         * Eslint doesn't like changing function arguments, but we need it so here is an eslint-disable.\n         */\n        // eslint-disable-next-line no-param-reassign\n        previousPointsRef.current = stepPoints;\n        // eslint-disable-next-line no-param-reassign\n        previousBaselineRef.current = stepBaseLine;\n      }\n      return /*#__PURE__*/React.createElement(StaticArea, {\n        points: stepPoints,\n        baseLine: stepBaseLine,\n        needClip: needClip,\n        clipPathId: clipPathId,\n        props: props\n      });\n    }\n    if (t > 0) {\n      // eslint-disable-next-line no-param-reassign\n      previousPointsRef.current = points;\n      // eslint-disable-next-line no-param-reassign\n      previousBaselineRef.current = baseLine;\n    }\n    return /*#__PURE__*/React.createElement(Layer, null, isAnimationActive && /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"clipPath\", {\n      id: \"animationClipPath-\".concat(clipPathId)\n    }, /*#__PURE__*/React.createElement(ClipRect, {\n      alpha: t,\n      points: points,\n      baseLine: baseLine,\n      layout: layout,\n      strokeWidth: props.strokeWidth\n    }))), /*#__PURE__*/React.createElement(Layer, {\n      clipPath: \"url(#animationClipPath-\".concat(clipPathId, \")\")\n    }, /*#__PURE__*/React.createElement(StaticArea, {\n      points: points,\n      baseLine: baseLine,\n      needClip: needClip,\n      clipPathId: clipPathId,\n      props: props\n    })));\n  }), /*#__PURE__*/React.createElement(LabelListFromLabelProp, {\n    label: props.label\n  }));\n}\n\n/*\n * This components decides if the area should be animated or not.\n * It also holds the state of the animation.\n */\nfunction RenderArea(_ref9) {\n  var {\n    needClip,\n    clipPathId,\n    props\n  } = _ref9;\n  /*\n   * These two must be refs, not state!\n   * Because we want to store the most recent shape of the animation in case we have to interrupt the animation;\n   * that happens when user initiates another animation before the current one finishes.\n   *\n   * If this was a useState, then every step in the animation would trigger a re-render.\n   * So, useRef it is.\n   */\n  var previousPointsRef = useRef(null);\n  var previousBaselineRef = useRef();\n  return /*#__PURE__*/React.createElement(AreaWithAnimation, {\n    needClip: needClip,\n    clipPathId: clipPathId,\n    props: props,\n    previousPointsRef: previousPointsRef,\n    previousBaselineRef: previousBaselineRef\n  });\n}\nclass AreaWithState extends PureComponent {\n  render() {\n    var {\n      hide,\n      dot,\n      points,\n      className,\n      top,\n      left,\n      needClip,\n      xAxisId,\n      yAxisId,\n      width,\n      height,\n      id,\n      baseLine,\n      zIndex\n    } = this.props;\n    if (hide) {\n      return null;\n    }\n    var layerClass = clsx('recharts-area', className);\n    var clipPathId = id;\n    var {\n      r,\n      strokeWidth\n    } = getRadiusAndStrokeWidthFromDot(dot);\n    var clipDot = isClipDot(dot);\n    var dotSize = r * 2 + strokeWidth;\n    var activePointsClipPath = needClip ? \"url(#clipPath-\".concat(clipDot ? '' : 'dots-').concat(clipPathId, \")\") : undefined;\n    return /*#__PURE__*/React.createElement(ZIndexLayer, {\n      zIndex: zIndex\n    }, /*#__PURE__*/React.createElement(Layer, {\n      className: layerClass\n    }, needClip && /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(GraphicalItemClipPath, {\n      clipPathId: clipPathId,\n      xAxisId: xAxisId,\n      yAxisId: yAxisId\n    }), !clipDot && /*#__PURE__*/React.createElement(\"clipPath\", {\n      id: \"clipPath-dots-\".concat(clipPathId)\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      x: left - dotSize / 2,\n      y: top - dotSize / 2,\n      width: width + dotSize,\n      height: height + dotSize\n    }))), /*#__PURE__*/React.createElement(RenderArea, {\n      needClip: needClip,\n      clipPathId: clipPathId,\n      props: this.props\n    })), /*#__PURE__*/React.createElement(ActivePoints, {\n      points: points,\n      mainColor: getLegendItemColor(this.props.stroke, this.props.fill),\n      itemDataKey: this.props.dataKey,\n      activeDot: this.props.activeDot,\n      clipPath: activePointsClipPath\n    }), this.props.isRange && Array.isArray(baseLine) && /*#__PURE__*/React.createElement(ActivePoints, {\n      points: baseLine,\n      mainColor: getLegendItemColor(this.props.stroke, this.props.fill),\n      itemDataKey: this.props.dataKey,\n      activeDot: this.props.activeDot,\n      clipPath: activePointsClipPath\n    }));\n  }\n}\nexport var defaultAreaProps = {\n  activeDot: true,\n  animationBegin: 0,\n  animationDuration: 1500,\n  animationEasing: 'ease',\n  connectNulls: false,\n  dot: false,\n  fill: '#3182bd',\n  fillOpacity: 0.6,\n  hide: false,\n  isAnimationActive: 'auto',\n  legendType: 'line',\n  stroke: '#3182bd',\n  strokeWidth: 1,\n  type: 'linear',\n  label: false,\n  xAxisId: 0,\n  yAxisId: 0,\n  zIndex: DefaultZIndexes.area\n};\nfunction AreaImpl(props) {\n  var _useAppSelector;\n  var _resolveDefaultProps = resolveDefaultProps(props, defaultAreaProps),\n    {\n      activeDot,\n      animationBegin,\n      animationDuration,\n      animationEasing,\n      connectNulls,\n      dot,\n      fill,\n      fillOpacity,\n      hide,\n      isAnimationActive,\n      legendType,\n      stroke,\n      xAxisId,\n      yAxisId\n    } = _resolveDefaultProps,\n    everythingElse = _objectWithoutProperties(_resolveDefaultProps, _excluded2);\n  var layout = useChartLayout();\n  var chartName = useChartName();\n  var {\n    needClip\n  } = useNeedsClip(xAxisId, yAxisId);\n  var isPanorama = useIsPanorama();\n  var {\n    points,\n    isRange,\n    baseLine\n  } = (_useAppSelector = useAppSelector(state => selectArea(state, props.id, isPanorama))) !== null && _useAppSelector !== void 0 ? _useAppSelector : {};\n  var plotArea = usePlotArea();\n  if (layout !== 'horizontal' && layout !== 'vertical' || plotArea == null) {\n    // Can't render Area in an unsupported layout\n    return null;\n  }\n  if (chartName !== 'AreaChart' && chartName !== 'ComposedChart') {\n    // There is nothing stopping us from rendering Area in other charts, except for historical reasons. Do we want to allow that?\n    return null;\n  }\n  var {\n    height,\n    width,\n    x: left,\n    y: top\n  } = plotArea;\n  if (!points || !points.length) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(AreaWithState, _extends({}, everythingElse, {\n    activeDot: activeDot,\n    animationBegin: animationBegin,\n    animationDuration: animationDuration,\n    animationEasing: animationEasing,\n    baseLine: baseLine,\n    connectNulls: connectNulls,\n    dot: dot,\n    fill: fill,\n    fillOpacity: fillOpacity,\n    height: height,\n    hide: hide,\n    layout: layout,\n    isAnimationActive: isAnimationActive === 'auto' ? !Global.isSsr : isAnimationActive,\n    isRange: isRange,\n    legendType: legendType,\n    needClip: needClip,\n    points: points,\n    stroke: stroke,\n    width: width,\n    left: left,\n    top: top,\n    xAxisId: xAxisId,\n    yAxisId: yAxisId\n  }));\n}\nexport var getBaseValue = (layout, chartBaseValue, itemBaseValue, xAxis, yAxis) => {\n  // The baseValue can be defined both on the AreaChart, and on the Area.\n  // The value for the item takes precedence.\n  var baseValue = itemBaseValue !== null && itemBaseValue !== void 0 ? itemBaseValue : chartBaseValue;\n  if (isNumber(baseValue)) {\n    return baseValue;\n  }\n  var numericAxis = layout === 'horizontal' ? yAxis : xAxis;\n  // @ts-expect-error d3scale .domain() returns unknown, Math.max expects number\n  var domain = numericAxis.scale.domain();\n  if (numericAxis.type === 'number') {\n    var domainMax = Math.max(domain[0], domain[1]);\n    var domainMin = Math.min(domain[0], domain[1]);\n    if (baseValue === 'dataMin') {\n      return domainMin;\n    }\n    if (baseValue === 'dataMax') {\n      return domainMax;\n    }\n    return domainMax < 0 ? domainMax : Math.max(Math.min(domain[0], domain[1]), 0);\n  }\n  if (baseValue === 'dataMin') {\n    return domain[0];\n  }\n  if (baseValue === 'dataMax') {\n    return domain[1];\n  }\n  return domain[0];\n};\nexport function computeArea(_ref0) {\n  var {\n    areaSettings: {\n      connectNulls,\n      baseValue: itemBaseValue,\n      dataKey\n    },\n    stackedData,\n    layout,\n    chartBaseValue,\n    xAxis,\n    yAxis,\n    displayedData,\n    dataStartIndex,\n    xAxisTicks,\n    yAxisTicks,\n    bandSize\n  } = _ref0;\n  var hasStack = stackedData && stackedData.length;\n  var baseValue = getBaseValue(layout, chartBaseValue, itemBaseValue, xAxis, yAxis);\n  var isHorizontalLayout = layout === 'horizontal';\n  var isRange = false;\n  var points = displayedData.map((entry, index) => {\n    var _valueAsArray$, _valueAsArray;\n    var valueAsArray;\n    if (hasStack) {\n      valueAsArray = stackedData[dataStartIndex + index];\n    } else {\n      var rawValue = getValueByDataKey(entry, dataKey);\n      if (!Array.isArray(rawValue)) {\n        // @ts-expect-error getValueByDataKey is not checking its return value\n        valueAsArray = [baseValue, rawValue];\n      } else {\n        // @ts-expect-error getValueByDataKey is not checking its return value\n        valueAsArray = rawValue;\n        isRange = true;\n      }\n    }\n    var value1 = (_valueAsArray$ = (_valueAsArray = valueAsArray) === null || _valueAsArray === void 0 ? void 0 : _valueAsArray[1]) !== null && _valueAsArray$ !== void 0 ? _valueAsArray$ : null;\n    var isBreakPoint = value1 == null || hasStack && !connectNulls && getValueByDataKey(entry, dataKey) == null;\n    if (isHorizontalLayout) {\n      return {\n        x: getCateCoordinateOfLine({\n          axis: xAxis,\n          ticks: xAxisTicks,\n          bandSize,\n          entry,\n          index\n        }),\n        y: isBreakPoint ? null : yAxis.scale(value1),\n        value: valueAsArray,\n        payload: entry\n      };\n    }\n    return {\n      x: isBreakPoint ? null : xAxis.scale(value1),\n      y: getCateCoordinateOfLine({\n        axis: yAxis,\n        ticks: yAxisTicks,\n        bandSize,\n        entry,\n        index\n      }),\n      value: valueAsArray,\n      payload: entry\n    };\n  });\n  var baseLine;\n  if (hasStack || isRange) {\n    baseLine = points.map(entry => {\n      var x = Array.isArray(entry.value) ? entry.value[0] : null;\n      if (isHorizontalLayout) {\n        return {\n          x: entry.x,\n          y: x != null && entry.y != null ? yAxis.scale(x) : null,\n          payload: entry.payload\n        };\n      }\n      return {\n        x: x != null ? xAxis.scale(x) : null,\n        y: entry.y,\n        payload: entry.payload\n      };\n    });\n  } else {\n    baseLine = isHorizontalLayout ? yAxis.scale(baseValue) : xAxis.scale(baseValue);\n  }\n  return {\n    points,\n    baseLine,\n    isRange\n  };\n}\nfunction AreaFn(outsideProps) {\n  var props = resolveDefaultProps(outsideProps, defaultAreaProps);\n  var isPanorama = useIsPanorama();\n  // Report all props to Redux store first, before calling any hooks, to avoid circular dependencies.\n  return /*#__PURE__*/React.createElement(RegisterGraphicalItemId, {\n    id: props.id,\n    type: \"area\"\n  }, id => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SetLegendPayload, {\n    legendPayload: computeLegendPayloadFromAreaData(props)\n  }), /*#__PURE__*/React.createElement(SetAreaTooltipEntrySettings, {\n    dataKey: props.dataKey,\n    data: props.data,\n    stroke: props.stroke,\n    strokeWidth: props.strokeWidth,\n    fill: props.fill,\n    name: props.name,\n    hide: props.hide,\n    unit: props.unit,\n    tooltipType: props.tooltipType,\n    id: id\n  }), /*#__PURE__*/React.createElement(SetCartesianGraphicalItem, {\n    type: \"area\",\n    id: id,\n    data: props.data,\n    dataKey: props.dataKey,\n    xAxisId: props.xAxisId,\n    yAxisId: props.yAxisId,\n    zAxisId: 0,\n    stackId: getNormalizedStackId(props.stackId),\n    hide: props.hide,\n    barSize: undefined,\n    baseValue: props.baseValue,\n    isPanorama: isPanorama,\n    connectNulls: props.connectNulls\n  }), /*#__PURE__*/React.createElement(AreaImpl, _extends({}, props, {\n    id: id\n  }))));\n}\n\n/**\n * @provides LabelListContext\n * @consumes CartesianChartContext\n */\nexport var Area = /*#__PURE__*/React.memo(AreaFn, propsAreEqual);\nArea.displayName = 'Area';","import * as React from 'react';\nimport { forwardRef } from 'react';\nimport { arrayTooltipSearcher } from '../state/optionsSlice';\nimport { CartesianChart } from './CartesianChart';\nvar allowedTooltipTypes = ['axis'];\n\n/**\n * @provides CartesianViewBoxContext\n * @provides CartesianChartContext\n */\nexport var AreaChart = /*#__PURE__*/forwardRef((props, ref) => {\n  return /*#__PURE__*/React.createElement(CartesianChart, {\n    chartName: \"AreaChart\",\n    defaultTooltipEventType: \"axis\",\n    validateTooltipEventTypes: allowedTooltipTypes,\n    tooltipPayloadSearcher: arrayTooltipSearcher,\n    categoricalChartProps: props,\n    ref: ref\n  });\n});","import { useMemo } from 'react'\nimport {\n  PieChart, Pie, Cell, ResponsiveContainer,\n  BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend,\n  AreaChart, Area\n} from 'recharts'\nimport {\n  ClipboardList, Clock, DollarSign, Users, TrendingUp,\n  CheckCircle, AlertCircle, XCircle, FileText\n} from 'lucide-react'\n\n/**\n * TMDashboard - Visual summary and charts for T&M Tickets section\n * Shows key metrics, status distribution, and trends\n */\nexport default function TMDashboard({ tickets = [], laborRates = {} }) {\n  // Calculate comprehensive metrics\n  const metrics = useMemo(() => {\n    if (!tickets.length) {\n      return {\n        total: 0,\n        pending: 0,\n        approved: 0,\n        billed: 0,\n        rejected: 0,\n        totalHours: 0,\n        regularHours: 0,\n        overtimeHours: 0,\n        materialsCost: 0,\n        uniqueWorkers: 0,\n        avgHoursPerTicket: 0,\n        approvalRate: 0,\n        pendingValue: 0,\n        approvedValue: 0,\n        billedValue: 0,\n        workersByRole: {},\n        topWorkers: [],\n        byMonth: [],\n        byStatus: []\n      }\n    }\n\n    // Status counts\n    const pending = tickets.filter(t => t.status === 'pending').length\n    const approved = tickets.filter(t => t.status === 'approved').length\n    const billed = tickets.filter(t => t.status === 'billed').length\n    const rejected = tickets.filter(t => t.status === 'rejected').length\n\n    // Hours calculations\n    let totalHours = 0\n    let regularHours = 0\n    let overtimeHours = 0\n    const workerHoursMap = {}\n    const workersByRole = { Foreman: 0, Superintendent: 0, Operator: 0, Laborer: 0 }\n\n    tickets.forEach(ticket => {\n      if (ticket.t_and_m_workers) {\n        ticket.t_and_m_workers.forEach(worker => {\n          const regHrs = parseFloat(worker.hours) || 0\n          const otHrs = parseFloat(worker.overtime_hours) || 0\n          regularHours += regHrs\n          overtimeHours += otHrs\n          totalHours += regHrs + otHrs\n\n          // Track worker hours\n          const name = worker.name || 'Unknown'\n          if (!workerHoursMap[name]) {\n            workerHoursMap[name] = { name, hours: 0, role: worker.role || 'Laborer' }\n          }\n          workerHoursMap[name].hours += regHrs + otHrs\n\n          // Count by role\n          const role = worker.role || 'Laborer'\n          if (workersByRole[role] !== undefined) {\n            workersByRole[role] += regHrs + otHrs\n          } else {\n            workersByRole[role] = regHrs + otHrs\n          }\n        })\n      }\n    })\n\n    // Materials cost calculation\n    let materialsCost = 0\n    tickets.forEach(ticket => {\n      if (ticket.t_and_m_items) {\n        ticket.t_and_m_items.forEach(item => {\n          const costPer = item.materials_equipment?.cost_per_unit || 0\n          materialsCost += item.quantity * costPer\n        })\n      }\n    })\n\n    // Unique workers\n    const uniqueWorkers = Object.keys(workerHoursMap).length\n\n    // Top 5 workers by hours\n    const topWorkers = Object.values(workerHoursMap)\n      .sort((a, b) => b.hours - a.hours)\n      .slice(0, 5)\n\n    // Approval rate\n    const completedTickets = approved + billed + rejected\n    const approvalRate = completedTickets > 0\n      ? Math.round(((approved + billed) / completedTickets) * 100)\n      : 0\n\n    // Value calculations (estimate labor cost using default rates if no rates provided)\n    const defaultRates = {\n      Foreman: 85,\n      Superintendent: 95,\n      Operator: 75,\n      Laborer: 55\n    }\n    const rates = { ...defaultRates, ...laborRates }\n\n    const calculateTicketValue = (ticket) => {\n      let laborCost = 0\n      let materialsCost = 0\n\n      if (ticket.t_and_m_workers) {\n        ticket.t_and_m_workers.forEach(worker => {\n          const role = worker.role || 'Laborer'\n          const rate = rates[role] || rates.Laborer\n          const regHrs = parseFloat(worker.hours) || 0\n          const otHrs = parseFloat(worker.overtime_hours) || 0\n          laborCost += regHrs * rate + otHrs * rate * 1.5\n        })\n      }\n\n      if (ticket.t_and_m_items) {\n        ticket.t_and_m_items.forEach(item => {\n          const costPer = item.materials_equipment?.cost_per_unit || 0\n          materialsCost += item.quantity * costPer\n        })\n      }\n\n      return laborCost + materialsCost\n    }\n\n    const pendingValue = tickets\n      .filter(t => t.status === 'pending')\n      .reduce((sum, t) => sum + calculateTicketValue(t), 0)\n    const approvedValue = tickets\n      .filter(t => t.status === 'approved')\n      .reduce((sum, t) => sum + calculateTicketValue(t), 0)\n    const billedValue = tickets\n      .filter(t => t.status === 'billed')\n      .reduce((sum, t) => sum + calculateTicketValue(t), 0)\n\n    // Monthly data for trend chart\n    const monthlyData = {}\n    tickets.forEach(ticket => {\n      const date = new Date(ticket.work_date)\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`\n      const monthLabel = date.toLocaleDateString('en-US', { month: 'short', year: '2-digit' })\n\n      if (!monthlyData[monthKey]) {\n        monthlyData[monthKey] = {\n          month: monthLabel,\n          monthKey,\n          tickets: 0,\n          hours: 0,\n          cost: 0,\n          value: 0\n        }\n      }\n\n      monthlyData[monthKey].tickets += 1\n      monthlyData[monthKey].cost += calculateTicketValue(ticket) - materialsCost\n\n      if (ticket.t_and_m_workers) {\n        ticket.t_and_m_workers.forEach(worker => {\n          const regHrs = parseFloat(worker.hours) || 0\n          const otHrs = parseFloat(worker.overtime_hours) || 0\n          monthlyData[monthKey].hours += regHrs + otHrs\n        })\n      }\n\n      if (ticket.t_and_m_items) {\n        ticket.t_and_m_items.forEach(item => {\n          const costPer = item.materials_equipment?.cost_per_unit || 0\n          monthlyData[monthKey].value += item.quantity * costPer\n        })\n      }\n    })\n\n    const byMonth = Object.values(monthlyData)\n      .sort((a, b) => a.monthKey.localeCompare(b.monthKey))\n      .slice(-6) // Last 6 months\n\n    // Status distribution for pie chart\n    const byStatus = [\n      { name: 'Pending', value: pending, color: '#f59e0b' },\n      { name: 'Approved', value: approved, color: '#10b981' },\n      { name: 'Billed', value: billed, color: '#3b82f6' },\n      { name: 'Rejected', value: rejected, color: '#ef4444' }\n    ].filter(s => s.value > 0)\n\n    return {\n      total: tickets.length,\n      pending,\n      approved,\n      billed,\n      rejected,\n      totalHours,\n      regularHours,\n      overtimeHours,\n      materialsCost,\n      uniqueWorkers,\n      avgHoursPerTicket: tickets.length > 0 ? totalHours / tickets.length : 0,\n      approvalRate,\n      pendingValue,\n      approvedValue,\n      billedValue,\n      workersByRole,\n      topWorkers,\n      byMonth,\n      byStatus\n    }\n  }, [tickets, laborRates])\n\n  // Format currency\n  const formatCurrency = (value) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(value)\n  }\n\n  // Custom tooltip for charts\n  const CustomTooltip = ({ active, payload, label }) => {\n    if (active && payload && payload.length) {\n      return (\n        <div className=\"tm-chart-tooltip\">\n          <p className=\"tm-tooltip-label\">{label}</p>\n          {payload.map((entry, index) => (\n            <p key={index} style={{ color: entry.color }}>\n              {entry.name}: {entry.name.includes('Cost') || entry.name.includes('Value')\n                ? formatCurrency(entry.value)\n                : entry.value.toFixed(1)}\n            </p>\n          ))}\n        </div>\n      )\n    }\n    return null\n  }\n\n  if (tickets.length === 0) {\n    return (\n      <div className=\"tm-dashboard tm-dashboard-empty\">\n        <div className=\"tm-empty-icon\">\n          <ClipboardList size={48} />\n        </div>\n        <p>No T&M tickets yet</p>\n        <p className=\"tm-empty-hint\">Create tickets to see analytics and trends</p>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"tm-dashboard\">\n      {/* Summary Cards Row */}\n      <div className=\"tm-summary-cards\">\n        <div className=\"tm-summary-card\">\n          <div className=\"tm-card-icon tickets\">\n            <ClipboardList size={20} />\n          </div>\n          <div className=\"tm-card-content\">\n            <span className=\"tm-card-value\">{metrics.total}</span>\n            <span className=\"tm-card-label\">Total Tickets</span>\n          </div>\n        </div>\n\n        <div className=\"tm-summary-card\">\n          <div className=\"tm-card-icon hours\">\n            <Clock size={20} />\n          </div>\n          <div className=\"tm-card-content\">\n            <span className=\"tm-card-value\">{metrics.totalHours.toFixed(1)}</span>\n            <span className=\"tm-card-label\">Total Hours</span>\n            {metrics.overtimeHours > 0 && (\n              <span className=\"tm-card-detail\">{metrics.overtimeHours.toFixed(1)} OT</span>\n            )}\n          </div>\n        </div>\n\n        <div className=\"tm-summary-card\">\n          <div className=\"tm-card-icon workers\">\n            <Users size={20} />\n          </div>\n          <div className=\"tm-card-content\">\n            <span className=\"tm-card-value\">{metrics.uniqueWorkers}</span>\n            <span className=\"tm-card-label\">Workers</span>\n          </div>\n        </div>\n\n        <div className=\"tm-summary-card\">\n          <div className=\"tm-card-icon materials\">\n            <DollarSign size={20} />\n          </div>\n          <div className=\"tm-card-content\">\n            <span className=\"tm-card-value\">{formatCurrency(metrics.materialsCost)}</span>\n            <span className=\"tm-card-label\">Materials</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Status Overview Cards */}\n      <div className=\"tm-status-cards\">\n        <div className=\"tm-status-card pending\">\n          <div className=\"tm-status-header\">\n            <AlertCircle size={16} />\n            <span>Pending</span>\n          </div>\n          <div className=\"tm-status-count\">{metrics.pending}</div>\n          <div className=\"tm-status-value\">{formatCurrency(metrics.pendingValue)}</div>\n        </div>\n\n        <div className=\"tm-status-card approved\">\n          <div className=\"tm-status-header\">\n            <CheckCircle size={16} />\n            <span>Approved</span>\n          </div>\n          <div className=\"tm-status-count\">{metrics.approved}</div>\n          <div className=\"tm-status-value\">{formatCurrency(metrics.approvedValue)}</div>\n        </div>\n\n        <div className=\"tm-status-card billed\">\n          <div className=\"tm-status-header\">\n            <FileText size={16} />\n            <span>Billed</span>\n          </div>\n          <div className=\"tm-status-count\">{metrics.billed}</div>\n          <div className=\"tm-status-value\">{formatCurrency(metrics.billedValue)}</div>\n        </div>\n\n        <div className=\"tm-status-card rate\">\n          <div className=\"tm-status-header\">\n            <TrendingUp size={16} />\n            <span>Approval Rate</span>\n          </div>\n          <div className=\"tm-status-count\">{metrics.approvalRate}%</div>\n          <div className=\"tm-status-value\">{metrics.approved + metrics.billed} / {metrics.total - metrics.pending}</div>\n        </div>\n      </div>\n\n      {/* Charts Row */}\n      <div className=\"tm-charts-row\">\n        {/* Status Distribution Pie Chart */}\n        {metrics.byStatus.length > 0 && (\n          <div className=\"tm-chart-card\">\n            <h4 className=\"tm-chart-title\">Status Distribution</h4>\n            <div className=\"tm-chart-container\">\n              <ResponsiveContainer width=\"100%\" height={200}>\n                <PieChart>\n                  <Pie\n                    data={metrics.byStatus}\n                    cx=\"50%\"\n                    cy=\"50%\"\n                    innerRadius={50}\n                    outerRadius={80}\n                    paddingAngle={2}\n                    dataKey=\"value\"\n                    label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n                    labelLine={false}\n                  >\n                    {metrics.byStatus.map((entry, index) => (\n                      <Cell key={`cell-${index}`} fill={entry.color} />\n                    ))}\n                  </Pie>\n                  <Tooltip />\n                </PieChart>\n              </ResponsiveContainer>\n            </div>\n            <div className=\"tm-chart-legend\">\n              {metrics.byStatus.map((entry, index) => (\n                <div key={index} className=\"tm-legend-item\">\n                  <span className=\"tm-legend-color\" style={{ background: entry.color }} />\n                  <span className=\"tm-legend-label\">{entry.name}</span>\n                  <span className=\"tm-legend-value\">{entry.value}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Hours Trend Bar Chart */}\n        {metrics.byMonth.length > 0 && (\n          <div className=\"tm-chart-card wide\">\n            <h4 className=\"tm-chart-title\">Hours by Month</h4>\n            <div className=\"tm-chart-container\">\n              <ResponsiveContainer width=\"100%\" height={200}>\n                <BarChart data={metrics.byMonth}>\n                  <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border-color)\" />\n                  <XAxis\n                    dataKey=\"month\"\n                    tick={{ fill: 'var(--text-secondary)', fontSize: 12 }}\n                    axisLine={{ stroke: 'var(--border-color)' }}\n                  />\n                  <YAxis\n                    tick={{ fill: 'var(--text-secondary)', fontSize: 12 }}\n                    axisLine={{ stroke: 'var(--border-color)' }}\n                  />\n                  <Tooltip content={<CustomTooltip />} />\n                  <Bar\n                    dataKey=\"hours\"\n                    name=\"Hours\"\n                    fill=\"var(--primary-color)\"\n                    radius={[4, 4, 0, 0]}\n                  />\n                </BarChart>\n              </ResponsiveContainer>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Second Charts Row */}\n      <div className=\"tm-charts-row\">\n        {/* Labor by Role */}\n        <div className=\"tm-chart-card\">\n          <h4 className=\"tm-chart-title\">Hours by Role</h4>\n          <div className=\"tm-role-breakdown\">\n            {Object.entries(metrics.workersByRole)\n              .filter(([, hours]) => hours > 0)\n              .sort((a, b) => b[1] - a[1])\n              .map(([role, hours]) => {\n                const percentage = (hours / metrics.totalHours) * 100\n                return (\n                  <div key={role} className=\"tm-role-bar\">\n                    <div className=\"tm-role-info\">\n                      <span className=\"tm-role-name\">{role}</span>\n                      <span className=\"tm-role-hours\">{hours.toFixed(1)} hrs</span>\n                    </div>\n                    <div className=\"tm-role-track\">\n                      <div\n                        className=\"tm-role-fill\"\n                        style={{ width: `${percentage}%` }}\n                      />\n                    </div>\n                  </div>\n                )\n              })}\n          </div>\n        </div>\n\n        {/* Top Workers */}\n        {metrics.topWorkers.length > 0 && (\n          <div className=\"tm-chart-card\">\n            <h4 className=\"tm-chart-title\">Top Workers</h4>\n            <div className=\"tm-top-workers\">\n              {metrics.topWorkers.map((worker, index) => (\n                <div key={worker.name} className=\"tm-worker-row\">\n                  <span className=\"tm-worker-rank\">#{index + 1}</span>\n                  <div className=\"tm-worker-info\">\n                    <span className=\"tm-worker-name\">{worker.name}</span>\n                    <span className=\"tm-worker-role\">{worker.role}</span>\n                  </div>\n                  <span className=\"tm-worker-hours\">{worker.hours.toFixed(1)} hrs</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Tickets Trend */}\n        {metrics.byMonth.length > 1 && (\n          <div className=\"tm-chart-card\">\n            <h4 className=\"tm-chart-title\">Ticket Volume</h4>\n            <div className=\"tm-chart-container\">\n              <ResponsiveContainer width=\"100%\" height={150}>\n                <AreaChart data={metrics.byMonth}>\n                  <defs>\n                    <linearGradient id=\"ticketGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                      <stop offset=\"5%\" stopColor=\"var(--primary-color)\" stopOpacity={0.3}/>\n                      <stop offset=\"95%\" stopColor=\"var(--primary-color)\" stopOpacity={0}/>\n                    </linearGradient>\n                  </defs>\n                  <XAxis\n                    dataKey=\"month\"\n                    tick={{ fill: 'var(--text-secondary)', fontSize: 10 }}\n                    axisLine={false}\n                    tickLine={false}\n                  />\n                  <YAxis hide />\n                  <Tooltip content={<CustomTooltip />} />\n                  <Area\n                    type=\"monotone\"\n                    dataKey=\"tickets\"\n                    name=\"Tickets\"\n                    stroke=\"var(--primary-color)\"\n                    fill=\"url(#ticketGradient)\"\n                    strokeWidth={2}\n                  />\n                </AreaChart>\n              </ResponsiveContainer>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Quick Stats Footer */}\n      <div className=\"tm-quick-stats\">\n        <div className=\"tm-quick-stat\">\n          <span className=\"tm-quick-label\">Avg Hours/Ticket</span>\n          <span className=\"tm-quick-value\">{metrics.avgHoursPerTicket.toFixed(1)}</span>\n        </div>\n        <div className=\"tm-quick-stat\">\n          <span className=\"tm-quick-label\">Regular Hours</span>\n          <span className=\"tm-quick-value\">{metrics.regularHours.toFixed(1)}</span>\n        </div>\n        <div className=\"tm-quick-stat\">\n          <span className=\"tm-quick-label\">Overtime Hours</span>\n          <span className=\"tm-quick-value\">{metrics.overtimeHours.toFixed(1)}</span>\n        </div>\n        <div className=\"tm-quick-stat\">\n          <span className=\"tm-quick-label\">Total Est. Value</span>\n          <span className=\"tm-quick-value\">{formatCurrency(metrics.pendingValue + metrics.approvedValue + metrics.billedValue)}</span>\n        </div>\n      </div>\n    </div>\n  )\n}\n","import { memo } from 'react'\nimport { HardHat, FileText, Wrench, Camera, Link, Lock, Link2, RefreshCw, AlertTriangle, CheckCircle } from 'lucide-react'\nimport { CountBadge } from '../ui'\n\n/**\n * Memoized T&M Ticket Card component\n * Prevents unnecessary re-renders when parent list updates\n */\nconst TMTicketCard = memo(function TMTicketCard({\n  ticket,\n  isExpanded,\n  isSelected,\n  isLocked,\n  lockInfo,\n  hasFailedImport,\n  isRetrying,\n  onToggleExpand,\n  onToggleSelect,\n  onApprove,\n  onUpdateStatus,\n  onDelete,\n  onOpenCorAssign,\n  onRetryImport,\n  onShowSignatureLink,\n  formatDate,\n  calculateTotalHours,\n  calculateTicketTotal\n}) {\n  const totalHours = calculateTotalHours(ticket)\n  const totalCost = calculateTicketTotal(ticket)\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault()\n      onToggleExpand(ticket.id)\n    }\n  }\n\n  return (\n    <div\n      className={`tm-ticket-card hover-lift animate-fade-in-up ${ticket.status} ${isSelected ? 'selected' : ''} ${isLocked ? 'locked' : ''}`}\n      role=\"article\"\n      aria-label={`T&M Ticket for ${formatDate(ticket.work_date)}, ${totalHours} hours, $${totalCost.toFixed(2)}, status: ${ticket.status}`}\n    >\n      <div\n        className=\"tm-ticket-header\"\n        onClick={() => onToggleExpand(ticket.id)}\n        onKeyDown={handleKeyDown}\n        role=\"button\"\n        tabIndex={0}\n        aria-expanded={isExpanded}\n        aria-label={`${isExpanded ? 'Collapse' : 'Expand'} ticket details`}\n      >\n        <input\n          type=\"checkbox\"\n          checked={isSelected}\n          onChange={(e) => onToggleSelect(ticket.id, e)}\n          onClick={(e) => e.stopPropagation()}\n          className=\"tm-checkbox\"\n          aria-label={`Select ticket for ${formatDate(ticket.work_date)}`}\n        />\n        <div className=\"tm-ticket-info\">\n          <span className=\"tm-ticket-date\">{formatDate(ticket.work_date)}</span>\n          {ticket.ce_pco_number && (\n            <span className=\"tm-ce-badge\">{ticket.ce_pco_number}</span>\n          )}\n          {ticket.assigned_cor_id && lockInfo?.lockedBy && (\n            <span className={`tm-cor-badge ${isLocked ? 'locked' : ''}`} title={lockInfo?.reason}>\n              {isLocked && <Lock size={10} />}\n              {lockInfo.lockedBy.cor_number}\n            </span>\n          )}\n          {ticket.photos?.length > 0 && (\n            <CountBadge\n              count={ticket.photos.length}\n              icon={Camera}\n              size=\"small\"\n              variant=\"default\"\n            />\n          )}\n          {hasFailedImport && (\n            <span className=\"tm-import-failed-badge\" title=\"COR data import failed - retry needed\">\n              <AlertTriangle size={12} /> Import Failed\n            </span>\n          )}\n          {ticket.client_signature_data && (\n            <span className=\"tm-verified-badge\" title={`Verified by ${ticket.client_signature_name || 'client'}${ticket.client_signature_date ? ` on ${formatDate(ticket.client_signature_date)}` : ''}`}>\n              <CheckCircle size={12} /> Verified\n            </span>\n          )}\n          <span className={`tm-ticket-status ${ticket.status}`}>{ticket.status}</span>\n        </div>\n        <div className=\"tm-ticket-summary\">\n          <span className=\"tm-ticket-hours\">{totalHours} hrs</span>\n          <span className=\"tm-ticket-total\">${totalCost.toFixed(2)}</span>\n          <span className=\"tm-expand-arrow\" aria-hidden=\"true\">{isExpanded ? '' : ''}</span>\n        </div>\n      </div>\n\n      {isExpanded && (\n        <div className=\"tm-ticket-details\">\n          {ticket.t_and_m_workers?.length > 0 && (\n            <div className=\"tm-detail-section\">\n              <h4><HardHat size={16} className=\"inline-icon\" /> Workers</h4>\n              <div className=\"tm-detail-list\">\n                {ticket.t_and_m_workers.map(worker => (\n                  <div key={worker.id} className=\"tm-detail-row\">\n                    <span>\n                      {worker.role && worker.role !== 'Laborer' && (\n                        <span className=\"tm-role-badge\">{worker.role}</span>\n                      )}\n                      {worker.name}\n                    </span>\n                    <span>\n                      {worker.hours} hrs\n                      {parseFloat(worker.overtime_hours) > 0 && (\n                        <span className=\"tm-ot-badge\"> +{worker.overtime_hours} OT</span>\n                      )}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {ticket.t_and_m_items?.length > 0 && (\n            <div className=\"tm-detail-section\">\n              <h4><Wrench size={16} className=\"inline-icon\" /> Materials & Equipment</h4>\n              <div className=\"tm-detail-list\">\n                {ticket.t_and_m_items.map(item => (\n                  <div key={item.id} className=\"tm-detail-row\">\n                    <span>\n                      {item.custom_name ? (\n                        <><span className=\"tm-custom-badge\">Custom</span> {item.custom_name}</>\n                      ) : (\n                        item.materials_equipment?.name\n                      )}\n                    </span>\n                    <span className=\"tm-detail-qty\">\n                      {item.quantity} {item.materials_equipment?.unit || 'each'}\n                      {item.materials_equipment?.cost_per_unit > 0 && (\n                        <span className=\"tm-item-cost\">\n                          ${(item.quantity * item.materials_equipment.cost_per_unit).toFixed(2)}\n                        </span>\n                      )}\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {ticket.notes && (\n            <div className=\"tm-detail-section\">\n              <h4><FileText size={16} className=\"inline-icon\" /> Description</h4>\n              <p className=\"tm-notes-text\">{ticket.notes}</p>\n            </div>\n          )}\n\n          {ticket.photos && ticket.photos.length > 0 && (\n            <div className=\"tm-detail-section\">\n              <h4><Camera size={16} className=\"inline-icon\" /> Photos ({ticket.photos.length})</h4>\n              <div className=\"tm-photos-grid\">\n                {ticket.photos.map((photo, idx) => (\n                  <a key={idx} href={photo} target=\"_blank\" rel=\"noopener noreferrer\" className=\"tm-photo-thumb\">\n                    <img\n                      src={photo}\n                      alt={`Photo ${idx + 1}`}\n                      onError={(e) => {\n                        e.target.onerror = null\n                        e.target.classList.add('photo-error')\n                        e.target.src = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IiM5NGEzYjgiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIj48cmVjdCB4PSIzIiB5PSIzIiB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHJ4PSIyIiByeT0iMiIvPjxjaXJjbGUgY3g9IjguNSIgY3k9IjguNSIgcj0iMS41Ii8+PHBvbHlsaW5lIHBvaW50cz0iMjEgMTUgMTYgMTAgNSAyMSIvPjwvc3ZnPg=='\n                      }}\n                    />\n                  </a>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {ticket.ce_pco_number && ticket.change_order_value > 0 && (\n            <div className=\"tm-change-order-value\">\n              <span className=\"tm-co-label\">Change Order Value:</span>\n              <span className=\"tm-co-amount\">${ticket.change_order_value.toLocaleString()}</span>\n            </div>\n          )}\n\n          {isLocked && (\n            <div className=\"tm-lock-notice\">\n              <Lock size={14} />\n              <span>{lockInfo?.reason || 'This ticket is locked (COR approved)'}</span>\n            </div>\n          )}\n\n          <div className=\"tm-ticket-actions\" role=\"group\" aria-label=\"Ticket actions\">\n            {ticket.status === 'pending' && !isLocked && (\n              <>\n                <button\n                  className=\"btn btn-success btn-small\"\n                  onClick={(e) => { e.stopPropagation(); onApprove(ticket); }}\n                  aria-label=\"Approve this ticket\"\n                >\n                  Approve\n                </button>\n                <button\n                  className=\"btn btn-warning btn-small\"\n                  onClick={(e) => { e.stopPropagation(); onUpdateStatus(ticket.id, 'rejected'); }}\n                  aria-label=\"Reject this ticket\"\n                >\n                  Reject\n                </button>\n              </>\n            )}\n            {ticket.status === 'approved' && !isLocked && (\n              <>\n                <button\n                  className=\"btn btn-primary btn-small\"\n                  onClick={(e) => { e.stopPropagation(); onUpdateStatus(ticket.id, 'billed'); }}\n                  aria-label=\"Mark ticket as billed\"\n                >\n                  Mark Billed\n                </button>\n                <button\n                  className=\"btn btn-secondary btn-small\"\n                  onClick={(e) => { e.stopPropagation(); onShowSignatureLink(ticket); }}\n                  aria-label=\"Get signature link for this ticket\"\n                >\n                  <Link size={14} aria-hidden=\"true\" /> Signature Link\n                </button>\n              </>\n            )}\n            {ticket.status === 'rejected' && !isLocked && (\n              <button\n                className=\"btn btn-secondary btn-small\"\n                onClick={(e) => { e.stopPropagation(); onUpdateStatus(ticket.id, 'pending'); }}\n                aria-label=\"Restore rejected ticket to pending\"\n              >\n                Restore\n              </button>\n            )}\n            {!isLocked && (\n              <button\n                className={`btn btn-small ${ticket.assigned_cor_id ? 'btn-ghost' : 'btn-secondary'}`}\n                onClick={(e) => { e.stopPropagation(); onOpenCorAssign(ticket); }}\n                aria-label={ticket.assigned_cor_id ? 'Change COR link' : 'Link to Change Order'}\n              >\n                <Link2 size={14} aria-hidden=\"true\" /> {ticket.assigned_cor_id ? 'COR' : 'Link COR'}\n              </button>\n            )}\n            {hasFailedImport && !isLocked && (\n              <button\n                className=\"btn btn-warning btn-small\"\n                onClick={(e) => onRetryImport(ticket, e)}\n                disabled={isRetrying}\n                aria-label=\"Retry syncing data to COR\"\n                aria-busy={isRetrying}\n              >\n                <RefreshCw size={14} className={isRetrying ? 'spin' : ''} aria-hidden=\"true\" /> {isRetrying ? 'Syncing...' : 'Retry Sync'}\n              </button>\n            )}\n            {!isLocked && (\n              <button\n                className=\"btn btn-danger btn-small\"\n                onClick={(e) => { e.stopPropagation(); onDelete(ticket.id); }}\n                aria-label=\"Delete this ticket\"\n              >\n                Delete\n              </button>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n})\n\nexport default TMTicketCard\n","import { useState, useEffect, useMemo, useCallback } from 'react'\nimport { FileText, ChevronDown, ChevronRight, Calendar, X, FileSpreadsheet, BarChart3, List } from 'lucide-react'\nimport { db } from '../lib/supabase'\nimport { useBranding } from '../lib/BrandingContext'\nimport { hexToRgb, loadImageAsBase64 } from '../lib/imageUtils'\nimport SignatureLinkGenerator from './SignatureLinkGenerator'\nimport { TicketSkeleton, CountBadge } from './ui'\nimport TMDashboard from './tm/TMDashboard'\nimport TMTicketCard from './tm/TMTicketCard'\nimport { exportTMTicketsCSV } from '../lib/financialExport'\n// Dynamic imports for export libraries (loaded on-demand to reduce initial bundle)\n// jsPDF + XLSX together are ~1MB, so we only load them when user actually exports\nconst loadXLSX = () => import('xlsx')\nconst loadJsPDF = () => Promise.all([import('jspdf'), import('jspdf-autotable')])\n\nexport default function TMList({\n  project,\n  company,\n  onShowToast,\n  compact = false,\n  // Preview mode props\n  previewMode = false,   // When true, shows current month tickets with \"See All\" button\n  onViewAll              // Callback when \"See All\" is clicked\n}) {\n  const { branding } = useBranding()\n  const [tickets, setTickets] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [loadingMore, setLoadingMore] = useState(false)\n  const [filter, setFilter] = useState('all')\n  const [expandedTicket, setExpandedTicket] = useState(null)\n  const [selectedTickets, setSelectedTickets] = useState(new Set())\n\n  // Pagination state\n  const [page, setPage] = useState(0)\n  const [hasMore, setHasMore] = useState(true)\n  const [totalCount, setTotalCount] = useState(0)\n  const TICKETS_PER_PAGE = 25\n  const MAX_TICKETS_IN_MEMORY = 500 // Prevent memory bloat from infinite scroll\n\n  // View mode state - in preview mode, we filter to current month\n  const [viewMode, setViewMode] = useState('recent') // 'recent' | 'all'\n  const [displayMode, setDisplayMode] = useState(() => {\n    // Load user preference from localStorage, default to 'dashboard'\n    const saved = localStorage.getItem('fieldsync-tm-default-view')\n    return saved === 'list' || saved === 'dashboard' ? saved : 'dashboard'\n  })\n  const [expandedMonths, setExpandedMonths] = useState(new Set())\n  const [dateFilter, setDateFilter] = useState({ start: '', end: '' })\n\n  // Change order approval modal state\n  const [showChangeOrderModal, setShowChangeOrderModal] = useState(false)\n  const [pendingApprovalTicket, setPendingApprovalTicket] = useState(null)\n  const [changeOrderValue, setChangeOrderValue] = useState('')\n\n  // Signature link modal state\n  const [showSignatureLink, setShowSignatureLink] = useState(false)\n  const [signatureLinkTicket, setSignatureLinkTicket] = useState(null)\n\n  // COR association modal state\n  const [showCorAssignModal, setShowCorAssignModal] = useState(false)\n  const [pendingCorAssignTicket, setPendingCorAssignTicket] = useState(null)\n  const [availableCors, setAvailableCors] = useState([])\n  const [selectedCorForAssign, setSelectedCorForAssign] = useState('')\n  const [loadingCors, setLoadingCors] = useState(false)\n\n  // Track which tickets are locked (linked to approved COR)\n  const [lockedTickets, setLockedTickets] = useState({})\n\n  // Track failed COR imports for retry UI\n  const [failedImports, setFailedImports] = useState({})\n  const [retryingImport, setRetryingImport] = useState(null)\n\n  useEffect(() => {\n    // Reset pagination when project changes\n    setTickets([])\n    setPage(0)\n    setHasMore(true)\n    loadTickets(0, true)\n\n    // Subscribe to real-time updates for T&M tickets\n    const subscription = db.subscribeToTMTickets?.(project.id, () => {\n      // On real-time update, refresh the first page\n      loadTickets(0, true)\n    })\n\n    return () => {\n      if (subscription) db.unsubscribe?.(subscription)\n    }\n  }, [project.id])\n\n  // Save user preference when displayMode changes\n  useEffect(() => {\n    if (!compact) {\n      localStorage.setItem('fieldsync-tm-default-view', displayMode)\n    }\n  }, [displayMode, compact])\n\n  // Reset to preferred view when switching to full mode\n  useEffect(() => {\n    if (!compact) {\n      const saved = localStorage.getItem('fieldsync-tm-default-view')\n      const preferredView = saved === 'list' || saved === 'dashboard' ? saved : 'dashboard'\n      setDisplayMode(preferredView)\n    }\n  }, [compact])\n\n  // Load tickets with pagination\n  const loadTickets = async (pageNum = 0, reset = false) => {\n    try {\n      if (reset) {\n        setLoading(true)\n      } else {\n        setLoadingMore(true)\n      }\n\n      // Use paginated query for scalability\n      const result = await db.getTMTicketsPaginated(project.id, {\n        page: pageNum,\n        limit: TICKETS_PER_PAGE,\n        status: filter !== 'all' ? filter : null\n      })\n\n      if (reset) {\n        setTickets(result.tickets)\n      } else {\n        // Append new tickets but limit total to prevent memory bloat\n        setTickets(prev => {\n          const combined = [...prev, ...result.tickets]\n          // If exceeding limit, keep only the most recent tickets\n          if (combined.length > MAX_TICKETS_IN_MEMORY) {\n            return combined.slice(-MAX_TICKETS_IN_MEMORY)\n          }\n          return combined\n        })\n      }\n\n      setPage(pageNum)\n      setHasMore(result.hasMore)\n      setTotalCount(result.totalCount)\n\n      // Check editability for tickets with COR assignments\n      const ticketsWithCOR = result.tickets.filter(t => t.assigned_cor_id)\n      if (ticketsWithCOR.length > 0) {\n        const lockResults = {}\n        const importStatusResults = {}\n        await Promise.all(ticketsWithCOR.map(async (ticket) => {\n          const editResult = await db.isTicketEditable(ticket)\n          if (!editResult.editable) {\n            lockResults[ticket.id] = editResult\n          }\n          // Check import status for each ticket\n          try {\n            const importStatus = await db.getTicketImportStatus(ticket.id, ticket.assigned_cor_id)\n            if (importStatus?.import_status === 'failed') {\n              importStatusResults[ticket.id] = importStatus\n            }\n          } catch (e) {\n            // Ignore - column may not exist yet\n          }\n        }))\n        setLockedTickets(prev => reset ? lockResults : { ...prev, ...lockResults })\n        setFailedImports(prev => reset ? importStatusResults : { ...prev, ...importStatusResults })\n      }\n    } catch (error) {\n      onShowToast('Error loading T&M tickets', 'error')\n    } finally {\n      setLoading(false)\n      setLoadingMore(false)\n    }\n  }\n\n  // Load more tickets (next page)\n  const loadMore = () => {\n    if (!loadingMore && hasMore) {\n      loadTickets(page + 1, false)\n    }\n  }\n\n  // Reload tickets when filter changes\n  useEffect(() => {\n    if (project?.id) {\n      setTickets([])\n      setPage(0)\n      setHasMore(true)\n      loadTickets(0, true)\n    }\n  }, [filter])\n\n  const updateStatus = useCallback(async (ticketId, newStatus) => {\n    // Check if ticket is locked due to approved COR\n    if (lockedTickets[ticketId]) {\n      onShowToast(lockedTickets[ticketId].reason || 'This ticket is locked (COR approved)', 'error')\n      return\n    }\n\n    try {\n      await db.updateTMTicketStatus(ticketId, newStatus)\n      setTickets(prev => prev.map(t =>\n        t.id === ticketId ? { ...t, status: newStatus } : t\n      ))\n      onShowToast(`Ticket ${newStatus}`, 'success')\n    } catch (error) {\n      console.error('Error updating status:', error)\n      onShowToast('Error updating status', 'error')\n    }\n  }, [lockedTickets]) // onShowToast is stable (memoized in App.jsx)\n\n  // Handle approval - approve directly (CE/PCO is informational only)\n  const handleApprove = useCallback((ticket) => {\n    // Check if ticket is locked due to approved COR\n    if (lockedTickets[ticket.id]) {\n      onShowToast(lockedTickets[ticket.id].reason || 'This ticket is locked (COR approved)', 'error')\n      return\n    }\n\n    updateStatus(ticket.id, 'approved')\n  }, [lockedTickets, updateStatus]) // onShowToast is stable\n\n  // Confirm approval with change order value\n  const confirmChangeOrderApproval = async () => {\n    if (!pendingApprovalTicket) return\n\n    try {\n      const value = parseFloat(changeOrderValue) || 0\n      await db.approveTMTicket(pendingApprovalTicket.id, null, null, value)\n      setTickets(tickets.map(t =>\n        t.id === pendingApprovalTicket.id\n          ? { ...t, status: 'approved', change_order_value: value }\n          : t\n      ))\n      onShowToast(`Ticket approved with $${value.toLocaleString()} change order`, 'success')\n      setShowChangeOrderModal(false)\n      setPendingApprovalTicket(null)\n      setChangeOrderValue('')\n    } catch (error) {\n      console.error('Error approving ticket:', error)\n      onShowToast('Error approving ticket', 'error')\n    }\n  }\n\n  const deleteTicket = useCallback(async (ticketId) => {\n    // Check if ticket is locked due to approved COR\n    if (lockedTickets[ticketId]) {\n      onShowToast(lockedTickets[ticketId].reason || 'This ticket is locked (COR approved)', 'error')\n      return\n    }\n\n    if (!confirm('Delete this T&M ticket?')) return\n    try {\n      await db.deleteTMTicket(ticketId)\n      setTickets(prev => prev.filter(t => t.id !== ticketId))\n      onShowToast('Ticket deleted', 'success')\n    } catch (error) {\n      console.error('Error deleting ticket:', error)\n      onShowToast('Error deleting ticket', 'error')\n    }\n  }, [lockedTickets]) // onShowToast is stable (memoized in App.jsx)\n\n  // Open COR association modal\n  const openCorAssignModal = useCallback(async (ticket) => {\n    setPendingCorAssignTicket(ticket)\n    setSelectedCorForAssign(ticket.assigned_cor_id || '')\n    setShowCorAssignModal(true)\n    setLoadingCors(true)\n\n    try {\n      // Load CORs that can receive tickets (not billed/archived)\n      const cors = await db.getAssignableCORs(project.id)\n      setAvailableCors(cors || [])\n    } catch (error) {\n      console.error('Error loading CORs:', error)\n      onShowToast('Error loading change orders', 'error')\n    } finally {\n      setLoadingCors(false)\n    }\n  }, [project.id]) // onShowToast is stable (memoized in App.jsx)\n\n  // Associate ticket with selected COR\n  const handleAssignToCor = async () => {\n    if (!pendingCorAssignTicket) return\n\n    try {\n      if (selectedCorForAssign) {\n        // Associate with COR using atomic function (ticketId, corId)\n        await db.assignTicketToCOR(pendingCorAssignTicket.id, selectedCorForAssign)\n        const cor = availableCors.find(c => c.id === selectedCorForAssign)\n        onShowToast(`Ticket linked to ${cor?.cor_number || 'COR'}`, 'success')\n      } else if (pendingCorAssignTicket.assigned_cor_id) {\n        // Remove association using atomic function (ticketId, corId)\n        await db.unassignTicketFromCOR(pendingCorAssignTicket.id, pendingCorAssignTicket.assigned_cor_id)\n        onShowToast('Ticket unlinked from COR', 'success')\n      }\n\n      // Refresh tickets\n      loadTickets()\n      setShowCorAssignModal(false)\n      setPendingCorAssignTicket(null)\n      setSelectedCorForAssign('')\n    } catch (error) {\n      console.error('Error updating COR association:', error)\n      onShowToast('Error updating COR link', 'error')\n    }\n  }\n\n  // Retry a failed COR import\n  const handleRetryImport = useCallback(async (ticket, e) => {\n    e?.stopPropagation()\n    if (!ticket.assigned_cor_id) return\n\n    setRetryingImport(ticket.id)\n    try {\n      await db.importTicketDataToCOR(\n        ticket.id,\n        ticket.assigned_cor_id,\n        company.id,\n        project.work_type || 'demolition',\n        project.job_type || 'standard'\n      )\n      onShowToast('COR data import successful!', 'success')\n      // Clear the failed import state for this ticket\n      setFailedImports(prev => {\n        const next = { ...prev }\n        delete next[ticket.id]\n        return next\n      })\n      loadTickets()\n    } catch (error) {\n      console.error('Error retrying import:', error)\n      onShowToast('Import retry failed. Please try again.', 'error')\n    } finally {\n      setRetryingImport(null)\n    }\n  }, [company.id, project.work_type, project.job_type]) // onShowToast and loadTickets are stable\n\n  const calculateTicketTotal = (ticket) => {\n    let total = 0\n    if (ticket.t_and_m_items) {\n      ticket.t_and_m_items.forEach(item => {\n        if (item.materials_equipment?.cost_per_unit) {\n          total += item.quantity * item.materials_equipment.cost_per_unit\n        }\n      })\n    }\n    return total\n  }\n\n  const calculateTotalHours = (ticket) => {\n    if (!ticket.t_and_m_workers) return 0\n    return ticket.t_and_m_workers.reduce((sum, w) => {\n      const regHours = parseFloat(w.hours) || 0\n      const otHours = parseFloat(w.overtime_hours) || 0\n      return sum + regHours + otHours\n    }, 0)\n  }\n\n  const formatDate = (dateStr) => {\n    return new Date(dateStr).toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric'\n    })\n  }\n\n  // Selection helpers\n  const toggleTicketSelection = useCallback((ticketId, e) => {\n    e?.stopPropagation()\n    setSelectedTickets(prev => {\n      const next = new Set(prev)\n      if (next.has(ticketId)) {\n        next.delete(ticketId)\n      } else {\n        next.add(ticketId)\n      }\n      return next\n    })\n  }, [])\n\n  // Memoized handlers for TMTicketCard - must be before any early returns\n  const handleToggleExpand = useCallback((ticketId) => {\n    setExpandedTicket(prev => prev === ticketId ? null : ticketId)\n  }, [])\n\n  const handleShowSignatureLink = useCallback((ticket) => {\n    setSignatureLinkTicket(ticket)\n    setShowSignatureLink(true)\n  }, [])\n\n  const toggleSelectAll = () => {\n    const currentFiltered = filter === 'all' ? tickets : tickets.filter(t => t.status === filter)\n    const allSelected = currentFiltered.every(t => selectedTickets.has(t.id))\n    if (allSelected) {\n      setSelectedTickets(new Set())\n    } else {\n      setSelectedTickets(new Set(currentFiltered.map(t => t.id)))\n    }\n  }\n\n  const clearSelection = () => {\n    setSelectedTickets(new Set())\n  }\n\n  // Get tickets to export (selected or all filtered)\n  const getExportTickets = () => {\n    const filtered = filter === 'all' ? tickets : tickets.filter(t => t.status === filter)\n    if (selectedTickets.size > 0) {\n      return filtered.filter(t => selectedTickets.has(t.id))\n    }\n    return filtered\n  }\n\n  // Export to Excel (loads XLSX library on-demand)\n  const exportToExcel = async () => {\n    const exportTickets = getExportTickets()\n\n    if (exportTickets.length === 0) {\n      onShowToast('No tickets to export', 'error')\n      return\n    }\n\n    onShowToast('Preparing Excel export...', 'info')\n\n    // Dynamic import - only loads XLSX when user actually exports\n    const XLSX = (await loadXLSX()).default || await loadXLSX()\n\n    // Create workers sheet\n    const workersData = []\n    // Create items sheet\n    const itemsData = []\n    // Create summary sheet\n    const summaryData = []\n\n    exportTickets.forEach(ticket => {\n      const ticketDate = formatDate(ticket.work_date)\n      const ticketStatus = ticket.status\n      \n      // Workers\n      if (ticket.t_and_m_workers) {\n        ticket.t_and_m_workers.forEach(worker => {\n          const regHours = parseFloat(worker.hours) || 0\n          const otHours = parseFloat(worker.overtime_hours) || 0\n          workersData.push({\n            'Date': ticketDate,\n            'Status': ticketStatus,\n            'Worker Name': worker.name,\n            'Role': worker.role || 'Laborer',\n            'Regular Hours': regHours,\n            'OT Hours': otHours,\n            'Total Hours': regHours + otHours\n          })\n        })\n      }\n      \n      // Items\n      if (ticket.t_and_m_items) {\n        ticket.t_and_m_items.forEach(item => {\n          const itemName = item.custom_name || item.materials_equipment?.name || 'Unknown'\n          const category = item.custom_category || item.materials_equipment?.category || 'Unknown'\n          const unit = item.materials_equipment?.unit || 'each'\n          const costPer = item.materials_equipment?.cost_per_unit || 0\n          const total = item.quantity * costPer\n          \n          itemsData.push({\n            'Date': ticketDate,\n            'Status': ticketStatus,\n            'Category': category,\n            'Item': itemName,\n            'Quantity': item.quantity,\n            'Unit': unit,\n            'Cost/Unit': costPer,\n            'Total': total\n          })\n        })\n      }\n      \n      // Summary\n      summaryData.push({\n        'Date': ticketDate,\n        'Status': ticketStatus,\n        'Workers': ticket.t_and_m_workers?.length || 0,\n        'Total Hours': calculateTotalHours(ticket),\n        'Items': ticket.t_and_m_items?.length || 0,\n        'Materials Cost': calculateTicketTotal(ticket),\n        'Notes': ticket.notes || ''\n      })\n    })\n\n    // Create workbook\n    const wb = XLSX.utils.book_new()\n    \n    // Add sheets\n    const summarySheet = XLSX.utils.json_to_sheet(summaryData)\n    XLSX.utils.book_append_sheet(wb, summarySheet, 'Summary')\n    \n    if (workersData.length > 0) {\n      const workersSheet = XLSX.utils.json_to_sheet(workersData)\n      XLSX.utils.book_append_sheet(wb, workersSheet, 'Workers')\n    }\n    \n    if (itemsData.length > 0) {\n      const itemsSheet = XLSX.utils.json_to_sheet(itemsData)\n      XLSX.utils.book_append_sheet(wb, itemsSheet, 'Materials & Equipment')\n    }\n    \n    // Download\n    const fileName = `${project.name}_TM_${new Date().toISOString().split('T')[0]}.xlsx`\n    XLSX.writeFile(wb, fileName)\n    onShowToast('Export downloaded!', 'success')\n  }\n\n  // Export to PDF - Professional format with company branding (loads jsPDF on-demand)\n  const exportToPDF = async () => {\n    const exportTickets = getExportTickets()\n\n    if (exportTickets.length === 0) {\n      onShowToast('No tickets to export', 'error')\n      return\n    }\n\n    onShowToast('Generating PDF...', 'info')\n\n    // Dynamic import - only loads jsPDF and autoTable when user actually exports\n    const [jsPDFModule, autoTableModule] = await loadJsPDF()\n    const jsPDF = jsPDFModule.default\n    const autoTable = autoTableModule.default\n\n    const doc = new jsPDF()\n    const pageWidth = doc.internal.pageSize.getWidth()\n    const pageHeight = doc.internal.pageSize.getHeight()\n    const margin = 20\n    let yPos = margin\n\n    // Get company colors from branding\n    const primaryColor = hexToRgb(branding?.primary_color || '#3B82F6')\n    const secondaryColor = hexToRgb(branding?.secondary_color || '#1E40AF')\n\n    // Company Header with branded colors\n    doc.setFillColor(...primaryColor)\n    doc.rect(0, 0, pageWidth, 45, 'F')\n\n    // Add accent stripe\n    doc.setFillColor(...secondaryColor)\n    doc.rect(0, 42, pageWidth, 3, 'F')\n\n    // Add company logo if available\n    let logoOffset = margin\n    if (branding?.logo_url) {\n      try {\n        const logoBase64 = await loadImageAsBase64(branding.logo_url)\n        if (logoBase64) {\n          // Add logo (max height 30px, maintain aspect ratio)\n          const logoHeight = 30\n          const logoWidth = 30 // Square assumption, will be adjusted by aspect ratio\n          doc.addImage(logoBase64, 'PNG', margin, 7, logoWidth, logoHeight)\n          logoOffset = margin + logoWidth + 10\n        }\n      } catch (e) {\n        console.error('Error adding logo:', e)\n      }\n    }\n\n    doc.setTextColor(255, 255, 255)\n    doc.setFontSize(22)\n    doc.setFont('helvetica', 'bold')\n    doc.text(company?.name || 'Company Name', logoOffset, 20)\n\n    // Add company tagline/subtitle\n    doc.setFontSize(10)\n    doc.setFont('helvetica', 'normal')\n    doc.text('TIME & MATERIALS REPORT', logoOffset, 30)\n\n    // Right side info\n    doc.setFontSize(9)\n    doc.text(`Report Date: ${new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}`, pageWidth - margin, 18, { align: 'right' })\n    if (project.job_number) {\n      doc.text(`Job #: ${project.job_number}`, pageWidth - margin, 26, { align: 'right' })\n    }\n    doc.text(`Status: ${filter.charAt(0).toUpperCase() + filter.slice(1)}`, pageWidth - margin, 34, { align: 'right' })\n\n    yPos = 55\n\n    // Project Info Box\n    doc.setFillColor(248, 250, 252) // Light gray\n    doc.rect(margin, yPos - 5, pageWidth - (margin * 2), 30, 'F')\n    doc.setDrawColor(...primaryColor)\n    doc.setLineWidth(0.5)\n    doc.rect(margin, yPos - 5, pageWidth - (margin * 2), 30, 'S')\n\n    doc.setTextColor(...primaryColor)\n    doc.setFontSize(14)\n    doc.setFont('helvetica', 'bold')\n    doc.text(`Project: ${project.name}`, margin + 5, yPos + 7)\n\n    doc.setFontSize(10)\n    doc.setFont('helvetica', 'normal')\n    doc.setTextColor(51, 65, 85)\n\n    // Date range\n    const dates = exportTickets.map(t => new Date(t.work_date)).sort((a, b) => a - b)\n    const startDate = dates[0]?.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })\n    const endDate = dates[dates.length - 1]?.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })\n    doc.text(`Date Range: ${startDate} - ${endDate}`, margin + 5, yPos + 17)\n    doc.text(`Total Tickets: ${exportTickets.length}`, pageWidth - margin - 5, yPos + 7, { align: 'right' })\n\n    yPos += 40\n\n    // Summary Section\n    const grandTotalHours = exportTickets.reduce((sum, t) => sum + calculateTotalHours(t), 0)\n    const grandTotalMaterials = exportTickets.reduce((sum, t) => sum + calculateTicketTotal(t), 0)\n    const totalWorkers = new Set(exportTickets.flatMap(t => t.t_and_m_workers?.map(w => w.name) || [])).size\n\n    doc.setTextColor(...primaryColor)\n    doc.setFontSize(12)\n    doc.setFont('helvetica', 'bold')\n    doc.text('SUMMARY', margin, yPos)\n    yPos += 8\n\n    // Summary boxes with brand colors\n    const boxWidth = (pageWidth - margin * 2 - 20) / 3\n    const summaryBoxData = [\n      { label: 'Total Labor Hours', value: grandTotalHours.toFixed(1) },\n      { label: 'Unique Workers', value: totalWorkers.toString() },\n      { label: 'Materials Cost', value: `$${grandTotalMaterials.toFixed(2)}` }\n    ]\n\n    // Create lighter version of primary color for box backgrounds\n    const lightPrimary = primaryColor.map(c => Math.min(255, c + 180))\n\n    summaryBoxData.forEach((item, index) => {\n      const boxX = margin + (index * (boxWidth + 10))\n      doc.setFillColor(...lightPrimary)\n      doc.rect(boxX, yPos, boxWidth, 25, 'F')\n      doc.setDrawColor(...primaryColor)\n      doc.setLineWidth(0.5)\n      doc.rect(boxX, yPos, boxWidth, 25, 'S')\n\n      doc.setTextColor(...primaryColor)\n      doc.setFontSize(16)\n      doc.setFont('helvetica', 'bold')\n      doc.text(item.value, boxX + boxWidth / 2, yPos + 12, { align: 'center' })\n\n      doc.setTextColor(100, 116, 139)\n      doc.setFontSize(8)\n      doc.setFont('helvetica', 'normal')\n      doc.text(item.label, boxX + boxWidth / 2, yPos + 20, { align: 'center' })\n    })\n\n    yPos += 35\n\n    // Collect workers by type\n    const supervisionData = []\n    const operatorsData = []\n    const laborersData = []\n    let supervisionRegHours = 0, supervisionOTHours = 0\n    let operatorsRegHours = 0, operatorsOTHours = 0\n    let laborersRegHours = 0, laborersOTHours = 0\n\n    exportTickets.forEach(ticket => {\n      if (ticket.t_and_m_workers) {\n        ticket.t_and_m_workers.forEach(worker => {\n          const regHrs = parseFloat(worker.hours) || 0\n          const otHrs = parseFloat(worker.overtime_hours) || 0\n          const role = worker.role || 'Laborer'\n          const rowData = [\n            formatDate(ticket.work_date),\n            worker.name,\n            regHrs.toString(),\n            otHrs > 0 ? otHrs.toString() : '-',\n            (regHrs + otHrs).toString()\n          ]\n\n          if (role === 'Foreman' || role === 'Superintendent') {\n            supervisionData.push(rowData)\n            supervisionRegHours += regHrs\n            supervisionOTHours += otHrs\n          } else if (role === 'Operator') {\n            operatorsData.push(rowData)\n            operatorsRegHours += regHrs\n            operatorsOTHours += otHrs\n          } else {\n            laborersData.push(rowData)\n            laborersRegHours += regHrs\n            laborersOTHours += otHrs\n          }\n        })\n      }\n    })\n\n    // Helper function to render a labor table\n    const renderLaborTable = (title, data, regHours, otHours) => {\n      if (data.length === 0) return\n\n      // Check if we need a new page\n      if (yPos > pageHeight - 80) {\n        doc.addPage()\n        yPos = margin\n      }\n\n      doc.setTextColor(...primaryColor)\n      doc.setFontSize(11)\n      doc.setFont('helvetica', 'bold')\n      doc.text(title, margin, yPos)\n      yPos += 5\n\n      autoTable(doc, {\n        startY: yPos,\n        head: [['Date', 'Name', 'Reg Hrs', 'OT Hrs', 'Total']],\n        body: data,\n        margin: { left: margin, right: margin },\n        headStyles: {\n          fillColor: primaryColor,\n          textColor: [255, 255, 255],\n          fontStyle: 'bold',\n          fontSize: 9\n        },\n        bodyStyles: {\n          fontSize: 9,\n          textColor: [51, 65, 85]\n        },\n        alternateRowStyles: {\n          fillColor: [248, 250, 252]\n        },\n        columnStyles: {\n          0: { cellWidth: 30 },\n          2: { halign: 'center', cellWidth: 22 },\n          3: { halign: 'center', cellWidth: 22 },\n          4: { halign: 'center', cellWidth: 22 }\n        },\n        foot: [[\n          '', 'SUBTOTAL:', regHours.toString(), otHours > 0 ? otHours.toString() : '-', (regHours + otHours).toString()\n        ]],\n        footStyles: {\n          fillColor: secondaryColor,\n          textColor: [255, 255, 255],\n          fontStyle: 'bold',\n          fontSize: 9\n        }\n      })\n\n      yPos = doc.lastAutoTable.finalY + 10\n    }\n\n    // Render each labor category\n    if (supervisionData.length > 0 || operatorsData.length > 0 || laborersData.length > 0) {\n      doc.setTextColor(...primaryColor)\n      doc.setFontSize(12)\n      doc.setFont('helvetica', 'bold')\n      doc.text('LABOR', margin, yPos)\n      yPos += 8\n\n      renderLaborTable('SUPERVISION', supervisionData, supervisionRegHours, supervisionOTHours)\n      renderLaborTable('OPERATORS', operatorsData, operatorsRegHours, operatorsOTHours)\n      renderLaborTable('LABORERS', laborersData, laborersRegHours, laborersOTHours)\n\n      // Grand total for all labor\n      const totalRegHours = supervisionRegHours + operatorsRegHours + laborersRegHours\n      const totalOTHours = supervisionOTHours + operatorsOTHours + laborersOTHours\n\n      doc.setFillColor(...primaryColor)\n      doc.rect(margin, yPos, pageWidth - margin * 2, 12, 'F')\n      doc.setTextColor(255, 255, 255)\n      doc.setFontSize(10)\n      doc.setFont('helvetica', 'bold')\n      doc.text('LABOR TOTAL:', margin + 5, yPos + 8)\n      doc.text(`${totalRegHours} Reg + ${totalOTHours} OT = ${totalRegHours + totalOTHours} Hours`, pageWidth - margin - 5, yPos + 8, { align: 'right' })\n\n      yPos += 20\n    }\n\n    // Check if we need a new page\n    if (yPos > pageHeight - 100) {\n      doc.addPage()\n      yPos = margin\n    }\n\n    // Collect materials by category\n    const categoryData = {}\n    const categoryTotals = {}\n    const categoryOrder = ['Containment', 'PPE', 'Disposal', 'Equipment', 'Other']\n\n    exportTickets.forEach(ticket => {\n      if (ticket.t_and_m_items) {\n        ticket.t_and_m_items.forEach(item => {\n          const itemName = item.custom_name || item.materials_equipment?.name || 'Unknown'\n          const category = item.custom_category || item.materials_equipment?.category || 'Other'\n          const unit = item.materials_equipment?.unit || 'each'\n          const costPer = item.materials_equipment?.cost_per_unit || 0\n          const total = item.quantity * costPer\n\n          if (!categoryData[category]) {\n            categoryData[category] = []\n            categoryTotals[category] = 0\n          }\n\n          categoryData[category].push([\n            formatDate(ticket.work_date),\n            itemName,\n            item.quantity.toString(),\n            unit,\n            `$${costPer.toFixed(2)}`,\n            `$${total.toFixed(2)}`\n          ])\n          categoryTotals[category] += total\n        })\n      }\n    })\n\n    // Helper function to render a materials table for a category\n    const renderMaterialsTable = (category, data, subtotal) => {\n      if (!data || data.length === 0) return\n\n      // Check if we need a new page\n      if (yPos > pageHeight - 80) {\n        doc.addPage()\n        yPos = margin\n      }\n\n      doc.setTextColor(...primaryColor)\n      doc.setFontSize(11)\n      doc.setFont('helvetica', 'bold')\n      doc.text(category.toUpperCase(), margin, yPos)\n      yPos += 5\n\n      autoTable(doc, {\n        startY: yPos,\n        head: [['Date', 'Item', 'Qty', 'Unit', 'Rate', 'Total']],\n        body: data,\n        margin: { left: margin, right: margin },\n        headStyles: {\n          fillColor: primaryColor,\n          textColor: [255, 255, 255],\n          fontStyle: 'bold',\n          fontSize: 9\n        },\n        bodyStyles: {\n          fontSize: 9,\n          textColor: [51, 65, 85]\n        },\n        alternateRowStyles: {\n          fillColor: [248, 250, 252]\n        },\n        columnStyles: {\n          2: { halign: 'center', cellWidth: 20 },\n          3: { halign: 'center', cellWidth: 25 },\n          4: { halign: 'right', cellWidth: 25 },\n          5: { halign: 'right', cellWidth: 30 }\n        },\n        foot: [[\n          '', '', '', '', 'Subtotal:', `$${subtotal.toFixed(2)}`\n        ]],\n        footStyles: {\n          fillColor: secondaryColor,\n          textColor: [255, 255, 255],\n          fontStyle: 'bold',\n          fontSize: 9\n        }\n      })\n\n      yPos = doc.lastAutoTable.finalY + 10\n    }\n\n    // Render each category\n    const hasItems = Object.keys(categoryData).length > 0\n\n    if (hasItems) {\n      doc.setTextColor(...primaryColor)\n      doc.setFontSize(12)\n      doc.setFont('helvetica', 'bold')\n      doc.text('MATERIALS & EQUIPMENT', margin, yPos)\n      yPos += 8\n\n      // Render in order\n      categoryOrder.forEach(cat => {\n        if (categoryData[cat]) {\n          renderMaterialsTable(cat, categoryData[cat], categoryTotals[cat])\n        }\n      })\n\n      // Render any other categories not in order\n      Object.keys(categoryData).forEach(cat => {\n        if (!categoryOrder.includes(cat)) {\n          renderMaterialsTable(cat, categoryData[cat], categoryTotals[cat])\n        }\n      })\n\n      // Grand total for all materials\n      doc.setFillColor(...primaryColor)\n      doc.rect(margin, yPos, pageWidth - margin * 2, 12, 'F')\n      doc.setTextColor(255, 255, 255)\n      doc.setFontSize(10)\n      doc.setFont('helvetica', 'bold')\n      doc.text('MATERIALS TOTAL:', margin + 5, yPos + 8)\n      doc.text(`$${grandTotalMaterials.toFixed(2)}`, pageWidth - margin - 5, yPos + 8, { align: 'right' })\n\n      yPos += 20\n    }\n\n    // Check if we need a new page for signature section\n    if (yPos > pageHeight - 80) {\n      doc.addPage()\n      yPos = margin\n    }\n\n    // Authorization Signature Section (Dual Signatures)\n    yPos += 10\n    doc.setDrawColor(...primaryColor)\n    doc.setLineWidth(1)\n    doc.line(margin, yPos, pageWidth - margin, yPos)\n    yPos += 15\n\n    doc.setTextColor(...primaryColor)\n    doc.setFontSize(12)\n    doc.setFont('helvetica', 'bold')\n    doc.text('AUTHORIZATION', margin, yPos)\n    yPos += 10\n\n    doc.setFontSize(10)\n    doc.setFont('helvetica', 'normal')\n    doc.setTextColor(71, 85, 105)\n    doc.text('I hereby authorize the above time and materials charges as accurate and approved for billing.', margin, yPos)\n    yPos += 20\n\n    // Helper to get first ticket's signature data (for single-ticket exports)\n    // For multi-ticket exports, signatures would be per-ticket\n    const firstTicket = exportTickets[0] || {}\n\n    // Helper function to render a signature block\n    const renderSignatureBlock = (startY, label, signatureData, signerName, signerTitle, signerCompany, signedDate) => {\n      // Label\n      doc.setFont('helvetica', 'bold')\n      doc.setFontSize(8)\n      doc.setTextColor(...primaryColor)\n      doc.text(label, margin, startY)\n      doc.setFont('helvetica', 'normal')\n      doc.setFontSize(9)\n      doc.setTextColor(100, 116, 139)\n\n      const sigLineY = startY + 18\n\n      // Signature line\n      doc.setDrawColor(...secondaryColor)\n      doc.setLineWidth(0.5)\n      doc.line(margin, sigLineY, margin + 70, sigLineY)\n      doc.text('Signature', margin, sigLineY + 8)\n\n      // Title/Company line\n      doc.line(margin + 85, sigLineY, margin + 145, sigLineY)\n      doc.text('Title / Company', margin + 85, sigLineY + 8)\n\n      // Date line\n      doc.line(pageWidth - margin - 40, sigLineY, pageWidth - margin, sigLineY)\n      doc.text('Date', pageWidth - margin - 40, sigLineY + 8)\n\n      // If signature exists, add it\n      if (signatureData) {\n        try {\n          doc.addImage(signatureData, 'PNG', margin, sigLineY - 16, 60, 16)\n          if (signerName) {\n            doc.setFontSize(8)\n            doc.text(signerName, margin, sigLineY + 15)\n          }\n          if (signerTitle || signerCompany) {\n            const titleCompany = [signerTitle, signerCompany].filter(Boolean).join(' - ')\n            doc.text(titleCompany, margin + 85, sigLineY - 5)\n          }\n          if (signedDate) {\n            const formattedDate = new Date(signedDate).toLocaleDateString()\n            doc.text(formattedDate, pageWidth - margin - 40, sigLineY - 5)\n          }\n        } catch (e) {\n          console.error('Error adding signature to PDF:', e)\n        }\n      }\n\n      return sigLineY + 25\n    }\n\n    // GC Signature (Signature 1)\n    yPos = renderSignatureBlock(\n      yPos,\n      'GC AUTHORIZATION',\n      firstTicket.gc_signature_data,\n      firstTicket.gc_signature_name,\n      firstTicket.gc_signature_title,\n      firstTicket.gc_signature_company,\n      firstTicket.gc_signature_date\n    )\n\n    yPos += 8\n\n    // Client Signature (Signature 2)\n    yPos = renderSignatureBlock(\n      yPos,\n      'CLIENT AUTHORIZATION',\n      firstTicket.client_signature_data,\n      firstTicket.client_signature_name,\n      firstTicket.client_signature_title,\n      firstTicket.client_signature_company,\n      firstTicket.client_signature_date\n    )\n\n    // Add page numbers to all pages\n    const totalPages = doc.internal.getNumberOfPages()\n    for (let i = 1; i <= totalPages; i++) {\n      doc.setPage(i)\n      const footerY = pageHeight - 15\n      doc.setFontSize(8)\n      doc.setTextColor(148, 163, 184)\n      doc.text(`${company?.name || 'Company'} - T&M Report - ${project.name}`, margin, footerY)\n      doc.text(`Page ${i} of ${totalPages}`, pageWidth - margin, footerY, { align: 'right' })\n    }\n\n    // Download\n    const fileName = `${project.name}_TM_Report_${new Date().toISOString().split('T')[0]}.pdf`\n    doc.save(fileName)\n    onShowToast('PDF exported!', 'success')\n  }\n\n  // Filter tickets by status, view mode, and date range\n  const filteredTickets = useMemo(() => {\n    let filtered = filter === 'all'\n      ? [...tickets]\n      : tickets.filter(t => t.status === filter)\n\n    // Apply date filter if set\n    if (dateFilter.start) {\n      const startDate = new Date(dateFilter.start)\n      startDate.setHours(0, 0, 0, 0)\n      filtered = filtered.filter(t => {\n        const ticketDate = new Date(t.work_date)\n        return ticketDate >= startDate\n      })\n    }\n    if (dateFilter.end) {\n      const endDate = new Date(dateFilter.end)\n      endDate.setHours(23, 59, 59, 999)\n      filtered = filtered.filter(t => {\n        const ticketDate = new Date(t.work_date)\n        return ticketDate <= endDate\n      })\n    }\n\n    // In preview mode, show only current month's tickets\n    if (previewMode) {\n      const now = new Date()\n      const currentMonth = now.getMonth()\n      const currentYear = now.getFullYear()\n      filtered = filtered.filter(t => {\n        const ticketDate = new Date(t.work_date)\n        return ticketDate.getMonth() === currentMonth && ticketDate.getFullYear() === currentYear\n      })\n    }\n    // In recent mode (not preview), show only last 7 days\n    else if (viewMode === 'recent') {\n      const sevenDaysAgo = new Date()\n      sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7)\n      sevenDaysAgo.setHours(0, 0, 0, 0)\n      filtered = filtered.filter(t => {\n        const ticketDate = new Date(t.work_date)\n        return ticketDate >= sevenDaysAgo\n      })\n    }\n\n    return filtered\n  }, [tickets, filter, viewMode, dateFilter, previewMode])\n\n  // Group tickets by month for 'all' view\n  const ticketsByMonth = useMemo(() => {\n    if (viewMode !== 'all') return null\n\n    const groups = {}\n    filteredTickets.forEach(ticket => {\n      const date = new Date(ticket.work_date)\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`\n      const monthLabel = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' })\n\n      if (!groups[monthKey]) {\n        groups[monthKey] = { label: monthLabel, tickets: [], hours: 0, cost: 0 }\n      }\n      groups[monthKey].tickets.push(ticket)\n      groups[monthKey].hours += calculateTotalHours(ticket)\n      groups[monthKey].cost += calculateTicketTotal(ticket)\n    })\n\n    return Object.entries(groups).sort((a, b) => b[0].localeCompare(a[0]))\n  }, [filteredTickets, viewMode])\n\n  // Auto-expand current month\n  useEffect(() => {\n    if (ticketsByMonth && ticketsByMonth.length > 0) {\n      const currentMonthKey = ticketsByMonth[0][0]\n      setExpandedMonths(new Set([currentMonthKey]))\n    }\n  }, [ticketsByMonth])\n\n  const toggleMonthExpand = (monthKey) => {\n    const newExpanded = new Set(expandedMonths)\n    if (newExpanded.has(monthKey)) {\n      newExpanded.delete(monthKey)\n    } else {\n      newExpanded.add(monthKey)\n    }\n    setExpandedMonths(newExpanded)\n  }\n\n  // Calculate totals for summary\n  const totalHours = filteredTickets.reduce((sum, t) => sum + calculateTotalHours(t), 0)\n  const totalCost = filteredTickets.reduce((sum, t) => sum + calculateTicketTotal(t), 0)\n  const totalTicketsCount = filter === 'all' ? tickets.length : tickets.filter(t => t.status === filter).length\n\n  if (loading) {\n    return (\n      <div className={`tm-list ${compact ? 'tm-list-compact' : ''}`}>\n        <div className=\"tm-loading-skeletons\">\n          {[1, 2, 3].map(i => (\n            <TicketSkeleton key={i} />\n          ))}\n        </div>\n      </div>\n    )\n  }\n\n  // Check if all filtered tickets are selected\n  const allFilteredSelected = filteredTickets.length > 0 && filteredTickets.every(t => selectedTickets.has(t.id))\n  const someSelected = selectedTickets.size > 0\n\n  // Helper function to render a single ticket card using memoized component\n  const renderTicketCard = (ticket) => (\n    <TMTicketCard\n      key={ticket.id}\n      ticket={ticket}\n      isExpanded={expandedTicket === ticket.id}\n      isSelected={selectedTickets.has(ticket.id)}\n      isLocked={!!lockedTickets[ticket.id]}\n      lockInfo={lockedTickets[ticket.id]}\n      hasFailedImport={!!failedImports[ticket.id]}\n      isRetrying={retryingImport === ticket.id}\n      onToggleExpand={handleToggleExpand}\n      onToggleSelect={toggleTicketSelection}\n      onApprove={handleApprove}\n      onUpdateStatus={updateStatus}\n      onDelete={deleteTicket}\n      onOpenCorAssign={openCorAssignModal}\n      onRetryImport={handleRetryImport}\n      onShowSignatureLink={handleShowSignatureLink}\n      formatDate={formatDate}\n      calculateTotalHours={calculateTotalHours}\n      calculateTicketTotal={calculateTicketTotal}\n    />\n  )\n\n  return (\n    <div className={`tm-list ${compact ? 'tm-list-compact' : ''}`}>\n      {/* Header with export buttons - always visible */}\n      <div className=\"tm-list-header\">\n        <div className=\"tm-list-title\">\n          <h3>T&M Tickets</h3>\n          <div className=\"tm-header-controls\">\n            {/* Display Mode Toggle */}\n            {!compact && (\n              <div className=\"tm-display-toggle\">\n                <button\n                  className={`tm-display-btn ${displayMode === 'dashboard' ? 'active' : ''}`}\n                  onClick={() => setDisplayMode('dashboard')}\n                  title=\"Dashboard View\"\n                >\n                  <BarChart3 size={16} /> Dashboard\n                </button>\n                <button\n                  className={`tm-display-btn ${displayMode === 'list' ? 'active' : ''}`}\n                  onClick={() => setDisplayMode('list')}\n                  title=\"List View\"\n                >\n                  <List size={16} /> List\n                </button>\n              </div>\n            )}\n            <div className=\"tm-export-buttons\">\n              {!compact && someSelected && (\n                <button className=\"btn btn-ghost btn-small\" onClick={clearSelection}>\n                  Clear ({selectedTickets.size})\n                </button>\n              )}\n              <button className=\"btn btn-ghost btn-small\" onClick={() => exportTMTicketsCSV(tickets, project)} disabled={tickets.length === 0}>\n                <FileSpreadsheet size={14} /> CSV\n              </button>\n              <button className=\"btn btn-secondary btn-small\" onClick={exportToExcel} disabled={tickets.length === 0}>\n                <FileSpreadsheet size={14} /> Excel {!compact && someSelected ? `(${selectedTickets.size})` : ''}\n              </button>\n              <button className=\"btn btn-secondary btn-small\" onClick={exportToPDF} disabled={tickets.length === 0}>\n                <FileText size={14} /> PDF {!compact && someSelected ? `(${selectedTickets.size})` : ''}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      {!compact && (\n      <div className=\"tm-list-filters\">\n\n        <div className=\"tm-filter-tabs\">\n          {['all', 'pending', 'approved', 'billed', 'rejected'].map(status => (\n            <button\n              key={status}\n              className={`tm-filter-tab ${filter === status ? 'active' : ''}`}\n              onClick={() => { setFilter(status); clearSelection(); }}\n            >\n              {status.charAt(0).toUpperCase() + status.slice(1)}\n              <span className=\"tm-filter-count\">\n                {status === 'all' ? tickets.length : tickets.filter(t => t.status === status).length}\n              </span>\n            </button>\n          ))}\n        </div>\n\n        {/* View Mode Bar */}\n        <div className=\"view-mode-bar\">\n          <div className=\"view-mode-tabs\">\n            <button\n              className={`view-mode-tab ${viewMode === 'recent' ? 'active' : ''}`}\n              onClick={() => { setViewMode('recent'); setDateFilter({ start: '', end: '' }); }}\n            >\n              Recent (7 days)\n            </button>\n            <button\n              className={`view-mode-tab ${viewMode === 'all' ? 'active' : ''}`}\n              onClick={() => setViewMode('all')}\n            >\n              All ({totalTicketsCount})\n            </button>\n          </div>\n\n          {viewMode === 'all' && (\n            <div className=\"date-filter\">\n              <Calendar size={16} />\n              <input\n                type=\"date\"\n                value={dateFilter.start}\n                onChange={(e) => setDateFilter(prev => ({ ...prev, start: e.target.value }))}\n                placeholder=\"Start date\"\n              />\n              <span>to</span>\n              <input\n                type=\"date\"\n                value={dateFilter.end}\n                onChange={(e) => setDateFilter(prev => ({ ...prev, end: e.target.value }))}\n                placeholder=\"End date\"\n              />\n              {(dateFilter.start || dateFilter.end) && (\n                <button\n                  className=\"btn btn-ghost btn-small\"\n                  onClick={() => setDateFilter({ start: '', end: '' })}\n                >\n                  Clear\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n      )}\n\n      {/* Dashboard View */}\n      {!compact && displayMode === 'dashboard' && (\n        <TMDashboard tickets={tickets} />\n      )}\n\n      {/* List View Content */}\n      {displayMode === 'list' && (\n        <>\n          {/* Summary Bar - hidden in compact mode */}\n          {!compact && filteredTickets.length > 0 && (\n            <div className=\"tm-summary-bar\">\n              <div className=\"tm-summary-stat\">\n                <span className=\"tm-summary-label\">Tickets</span>\n                <span className=\"tm-summary-value\">{filteredTickets.length}</span>\n              </div>\n              <div className=\"tm-summary-stat\">\n                <span className=\"tm-summary-label\">Total Hours</span>\n                <span className=\"tm-summary-value\">{totalHours.toFixed(1)}</span>\n              </div>\n              <div className=\"tm-summary-stat\">\n                <span className=\"tm-summary-label\">Materials Cost</span>\n                <span className=\"tm-summary-value\">${totalCost.toFixed(2)}</span>\n              </div>\n            </div>\n          )}\n\n          {filteredTickets.length === 0 ? (\n        <div className=\"tm-empty-state\">\n          <p>No {filter === 'all' ? '' : filter} T&M tickets{viewMode === 'recent' ? ' in the last 7 days' : ''}</p>\n          {viewMode === 'recent' && totalTicketsCount > 0 && (\n            <button className=\"btn btn-secondary btn-small\" onClick={() => setViewMode('all')}>\n              View All Tickets\n            </button>\n          )}\n        </div>\n      ) : (\n        <div className=\"tm-tickets stagger-children\">\n          {/* Select All Row */}\n          <div className=\"tm-select-all-row\">\n            <label className=\"tm-checkbox-label\" onClick={toggleSelectAll}>\n              <input\n                type=\"checkbox\"\n                checked={allFilteredSelected}\n                onChange={toggleSelectAll}\n                className=\"tm-checkbox\"\n              />\n              <span>Select All ({filteredTickets.length})</span>\n            </label>\n          </div>\n\n          {/* Render tickets - with month grouping in 'all' mode */}\n          {viewMode === 'all' && ticketsByMonth ? (\n            ticketsByMonth.map(([monthKey, monthData]) => (\n              <div key={monthKey} className=\"month-group animate-fade-in\">\n                <div\n                  className=\"month-header\"\n                  onClick={() => toggleMonthExpand(monthKey)}\n                >\n                  <div className=\"month-header-left\">\n                    {expandedMonths.has(monthKey) ? (\n                      <ChevronDown size={18} />\n                    ) : (\n                      <ChevronRight size={18} />\n                    )}\n                    <span className=\"month-label\">{monthData.label}</span>\n                    <CountBadge count={monthData.tickets.length} label=\"tickets\" size=\"small\" />\n                  </div>\n                  <div className=\"month-header-right\">\n                    <span className=\"month-stat\">{monthData.hours.toFixed(1)} hrs</span>\n                    <span className=\"month-stat\">${monthData.cost.toFixed(2)}</span>\n                  </div>\n                </div>\n                {expandedMonths.has(monthKey) && (\n                  <div className=\"month-tickets stagger-children\">\n                    {monthData.tickets.map(ticket => renderTicketCard(ticket))}\n                  </div>\n                )}\n              </div>\n            ))\n          ) : (\n            // Recent view - simple list\n            filteredTickets.map(ticket => renderTicketCard(ticket))\n          )}\n          </div>\n          )}\n\n          {/* Load More Button - for pagination */}\n          {!previewMode && hasMore && !loading && tickets.length > 0 && (\n            <div className=\"tm-load-more\">\n              <button\n                className=\"btn btn-secondary\"\n                onClick={loadMore}\n                disabled={loadingMore}\n              >\n                {loadingMore ? 'Loading...' : `Load More (${tickets.length} of ${totalCount})`}\n              </button>\n            </div>\n          )}\n\n          {/* See All Footer - only in preview mode */}\n          {previewMode && tickets.length > 0 && (\n            <button className=\"tm-see-all-btn\" onClick={onViewAll}>\n              See all {totalCount || tickets.length} T&M tickets\n              <ChevronRight size={16} />\n            </button>\n          )}\n        </>\n      )}\n\n      {/* Change Order Approval Modal */}\n      {showChangeOrderModal && pendingApprovalTicket && (\n        <div className=\"modal-overlay\" onClick={() => setShowChangeOrderModal(false)}>\n          <div className=\"modal change-order-modal\" onClick={(e) => e.stopPropagation()}>\n            <h3>Approve Change Order Work</h3>\n            <p className=\"modal-subtitle\">\n              This T&M ticket is associated with <strong>{pendingApprovalTicket.ce_pco_number}</strong>\n            </p>\n\n            <div className=\"form-group\">\n              <label>Change Order Value ($)</label>\n              <input\n                type=\"number\"\n                value={changeOrderValue}\n                onChange={(e) => setChangeOrderValue(e.target.value)}\n                placeholder=\"Enter the change order amount\"\n                autoFocus\n              />\n              <p className=\"form-help\">\n                This amount will be added to the project's total contract value.\n              </p>\n            </div>\n\n            <div className=\"modal-actions\">\n              <button\n                className=\"btn btn-secondary\"\n                onClick={() => setShowChangeOrderModal(false)}\n              >\n                Cancel\n              </button>\n              <button\n                className=\"btn btn-success\"\n                onClick={confirmChangeOrderApproval}\n              >\n                Approve with ${parseFloat(changeOrderValue || 0).toLocaleString()}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Signature Link Generator Modal */}\n      {showSignatureLink && signatureLinkTicket && (\n        <SignatureLinkGenerator\n          documentType=\"tm_ticket\"\n          documentId={signatureLinkTicket.id}\n          companyId={company?.id}\n          projectId={project?.id}\n          documentTitle={`T&M Ticket - ${new Date(signatureLinkTicket.work_date).toLocaleDateString()}${signatureLinkTicket.ce_pco_number ? ` (${signatureLinkTicket.ce_pco_number})` : ''}`}\n          onClose={() => {\n            setShowSignatureLink(false)\n            setSignatureLinkTicket(null)\n          }}\n          onShowToast={onShowToast}\n        />\n      )}\n\n      {/* COR Association Modal */}\n      {showCorAssignModal && pendingCorAssignTicket && (\n        <div className=\"modal-overlay\" onClick={() => setShowCorAssignModal(false)}>\n          <div className=\"modal cor-assign-modal\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>Link Ticket to Change Order</h3>\n              <button className=\"close-btn\" onClick={() => setShowCorAssignModal(false)}>\n                <X size={20} />\n              </button>\n            </div>\n\n            <div className=\"modal-body\">\n              <p className=\"modal-subtitle\">\n                Ticket: <strong>{new Date(pendingCorAssignTicket.work_date).toLocaleDateString()}</strong>\n                {pendingCorAssignTicket.ce_pco_number && ` (${pendingCorAssignTicket.ce_pco_number})`}\n              </p>\n\n              {loadingCors ? (\n                <div className=\"loading\">Loading change orders...</div>\n              ) : availableCors.length === 0 ? (\n                <div className=\"empty-state\">\n                  <p>No change orders found for this project.</p>\n                  <p className=\"text-muted\">Create a COR first, then link tickets to it.</p>\n                </div>\n              ) : (\n                <div className=\"cor-select-wrapper\">\n                  <label>Select Change Order:</label>\n                  <select\n                    value={selectedCorForAssign}\n                    onChange={(e) => setSelectedCorForAssign(e.target.value)}\n                    className=\"cor-select\"\n                  >\n                    <option value=\"\">-- No COR (unlink) --</option>\n                    {availableCors.map(cor => (\n                      <option key={cor.id} value={cor.id}>\n                        {cor.cor_number} - {cor.title || 'Untitled'} ({cor.status})\n                      </option>\n                    ))}\n                  </select>\n                </div>\n              )}\n            </div>\n\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-secondary\"\n                onClick={() => setShowCorAssignModal(false)}\n              >\n                Cancel\n              </button>\n              <button\n                className=\"btn btn-primary\"\n                onClick={handleAssignToCor}\n                disabled={loadingCors || (availableCors.length === 0)}\n              >\n                {pendingCorAssignTicket.assigned_cor_id && !selectedCorForAssign\n                  ? 'Unlink from COR'\n                  : 'Link to COR'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"file":"TMList-CHvAwVa1.js"}