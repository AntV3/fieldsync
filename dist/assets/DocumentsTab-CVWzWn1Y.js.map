{"version":3,"file":"DocumentsTab-CVWzWn1Y.js","sources":["../../src/components/documents/DocumentDetail.jsx","../../src/components/documents/FolderManager.jsx","../../src/components/documents/DocumentsTab.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { ArrowLeft, Download, Archive, CheckCircle, XCircle, Clock, FileText, User, Calendar, Folder, Eye, Link2, Loader2 } from 'lucide-react'\nimport { db } from '../../lib/supabase'\nimport { DOCUMENT_CATEGORIES, DOCUMENT_VISIBILITY_LABELS } from '../../lib/constants'\n\n// Format file size\nconst formatFileSize = (bytes) => {\n  if (!bytes) return '0 B'\n  const units = ['B', 'KB', 'MB', 'GB']\n  let size = bytes\n  let unitIndex = 0\n  while (size >= 1024 && unitIndex < units.length - 1) {\n    size /= 1024\n    unitIndex++\n  }\n  return `${size.toFixed(size < 10 ? 1 : 0)} ${units[unitIndex]}`\n}\n\n// Format date\nconst formatDate = (dateString) => {\n  if (!dateString) return ''\n  const date = new Date(dateString)\n  return date.toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n    hour: 'numeric',\n    minute: '2-digit'\n  })\n}\n\nexport default function DocumentDetail({ document: initialDocument, onBack, onUpdate, onShowToast, isOfficeOrAdmin }) {\n  const [document, setDocument] = useState(initialDocument)\n  const [versions, setVersions] = useState([])\n  const [loadingVersions, setLoadingVersions] = useState(true)\n  const [showRejectModal, setShowRejectModal] = useState(false)\n  const [rejectReason, setRejectReason] = useState('')\n  const [processing, setProcessing] = useState(false)\n\n  const category = DOCUMENT_CATEGORIES.find(c => c.id === document.category)\n  const visibilityInfo = DOCUMENT_VISIBILITY_LABELS[document.visibility]\n  const isPending = document.approval_status === 'pending'\n  const isRejected = document.approval_status === 'rejected'\n  const isAdmin = isOfficeOrAdmin // Simplified - in real app, check for admin specifically\n\n  // Load versions\n  useEffect(() => {\n    loadVersions()\n  }, [document.id])\n\n  const loadVersions = async () => {\n    setLoadingVersions(true)\n    try {\n      const versionList = await db.getDocumentVersions(document.id)\n      setVersions(versionList)\n    } catch (error) {\n      console.error('Error loading versions:', error)\n    } finally {\n      setLoadingVersions(false)\n    }\n  }\n\n  // Handle download\n  const handleDownload = async () => {\n    await db.logDocumentAccess(document.id, 'downloaded')\n    const url = `${import.meta.env.VITE_SUPABASE_URL}/storage/v1/object/public/project-documents/${document.storage_path}`\n    window.open(url, '_blank')\n  }\n\n  // Handle approve\n  const handleApprove = async () => {\n    setProcessing(true)\n    try {\n      await db.approveDocument(document.id)\n      setDocument(prev => ({ ...prev, approval_status: 'approved' }))\n      onShowToast?.('Document approved', 'success')\n      onUpdate?.()\n    } catch (error) {\n      console.error('Error approving document:', error)\n      onShowToast?.('Failed to approve document', 'error')\n    } finally {\n      setProcessing(false)\n    }\n  }\n\n  // Handle reject\n  const handleReject = async () => {\n    if (!rejectReason.trim()) {\n      onShowToast?.('Please provide a reason for rejection', 'error')\n      return\n    }\n\n    setProcessing(true)\n    try {\n      await db.rejectDocument(document.id, rejectReason.trim())\n      setDocument(prev => ({ ...prev, approval_status: 'rejected', rejection_reason: rejectReason.trim() }))\n      setShowRejectModal(false)\n      setRejectReason('')\n      onShowToast?.('Document rejected', 'success')\n      onUpdate?.()\n    } catch (error) {\n      console.error('Error rejecting document:', error)\n      onShowToast?.('Failed to reject document', 'error')\n    } finally {\n      setProcessing(false)\n    }\n  }\n\n  // Handle archive\n  const handleArchive = async () => {\n    if (!confirm('Are you sure you want to archive this document?')) return\n\n    setProcessing(true)\n    try {\n      await db.archiveDocument(document.id)\n      onShowToast?.('Document archived', 'success')\n      onBack()\n      onUpdate?.()\n    } catch (error) {\n      console.error('Error archiving document:', error)\n      onShowToast?.('Failed to archive document', 'error')\n    } finally {\n      setProcessing(false)\n    }\n  }\n\n  return (\n    <div className=\"document-detail\">\n      {/* Header */}\n      <div className=\"document-detail-header\">\n        <button className=\"back-btn\" onClick={onBack}>\n          <ArrowLeft size={20} />\n          Back\n        </button>\n\n        <div className=\"document-detail-actions\">\n          <button className=\"btn btn-secondary\" onClick={handleDownload}>\n            <Download size={18} />\n            Download\n          </button>\n          {isOfficeOrAdmin && (\n            <button className=\"btn btn-secondary btn-danger\" onClick={handleArchive} disabled={processing}>\n              <Archive size={18} />\n              Archive\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Document info */}\n      <div className=\"document-detail-content\">\n        <div className=\"document-detail-main\">\n          {/* Title and status */}\n          <div className=\"document-detail-title\">\n            <h2>{document.name}</h2>\n            {document.version > 1 && (\n              <span className=\"version-badge\">v{document.version}</span>\n            )}\n          </div>\n\n          {/* Status badges */}\n          {(isPending || isRejected) && (\n            <div className=\"document-detail-status\">\n              {isPending && (\n                <div className=\"status-banner pending\">\n                  <Clock size={18} />\n                  <span>Pending Approval</span>\n                  {isAdmin && (\n                    <div className=\"status-actions\">\n                      <button\n                        className=\"btn btn-sm btn-success\"\n                        onClick={handleApprove}\n                        disabled={processing}\n                      >\n                        <CheckCircle size={16} />\n                        Approve\n                      </button>\n                      <button\n                        className=\"btn btn-sm btn-danger\"\n                        onClick={() => setShowRejectModal(true)}\n                        disabled={processing}\n                      >\n                        <XCircle size={16} />\n                        Reject\n                      </button>\n                    </div>\n                  )}\n                </div>\n              )}\n              {isRejected && (\n                <div className=\"status-banner rejected\">\n                  <XCircle size={18} />\n                  <div className=\"rejected-info\">\n                    <span>Rejected</span>\n                    {document.rejection_reason && (\n                      <p className=\"rejection-reason\">{document.rejection_reason}</p>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Metadata */}\n          <div className=\"document-detail-meta\">\n            <div className=\"meta-item\">\n              <FileText size={16} />\n              <span>{document.file_name}</span>\n            </div>\n            <div className=\"meta-item\">\n              <Folder size={16} />\n              <span>{category?.label || document.category}</span>\n            </div>\n            <div className=\"meta-item\">\n              <span className=\"meta-size\">{formatFileSize(document.file_size_bytes)}</span>\n            </div>\n            <div className=\"meta-item\">\n              <Calendar size={16} />\n              <span>{formatDate(document.uploaded_at)}</span>\n            </div>\n            <div className=\"meta-item\">\n              <User size={16} />\n              <span>{document.uploaded_by_user?.email || 'Unknown'}</span>\n            </div>\n            <div className=\"meta-item\">\n              <Eye size={16} />\n              <span>{visibilityInfo?.label || document.visibility}</span>\n            </div>\n          </div>\n\n          {/* Description */}\n          {document.description && (\n            <div className=\"document-detail-description\">\n              <h3>Description</h3>\n              <p>{document.description}</p>\n            </div>\n          )}\n\n          {/* Linked resource */}\n          {document.resource_type && document.resource_id && (\n            <div className=\"document-detail-linked\">\n              <h3>\n                <Link2 size={16} />\n                Linked To\n              </h3>\n              <p>\n                {document.resource_type === 'cor' && 'Change Order Request'}\n                {document.resource_type === 'tm_ticket' && 'T&M Ticket'}\n                {document.resource_type === 'daily_report' && 'Daily Report'}\n              </p>\n            </div>\n          )}\n        </div>\n\n        {/* Version history */}\n        <div className=\"document-detail-sidebar\">\n          <h3>Version History</h3>\n          {loadingVersions ? (\n            <div className=\"versions-loading\">\n              <Loader2 size={20} className=\"spinner\" />\n              Loading versions...\n            </div>\n          ) : versions.length === 0 ? (\n            <p className=\"versions-empty\">No version history</p>\n          ) : (\n            <div className=\"versions-list\">\n              {versions.map(version => (\n                <div\n                  key={version.id}\n                  className={`version-item ${version.id === document.id ? 'current' : ''}`}\n                >\n                  <div className=\"version-info\">\n                    <span className=\"version-number\">\n                      v{version.version}\n                      {version.is_current && <span className=\"current-badge\">Current</span>}\n                    </span>\n                    <span className=\"version-date\">{formatDate(version.uploaded_at)}</span>\n                    <span className=\"version-user\">{version.uploaded_by_user?.email}</span>\n                  </div>\n                  <button\n                    className=\"version-download\"\n                    onClick={async () => {\n                      await db.logDocumentAccess(version.id, 'downloaded')\n                      window.open(`${import.meta.env.VITE_SUPABASE_URL}/storage/v1/object/public/project-documents/${version.storage_path}`, '_blank')\n                    }}\n                    title=\"Download this version\"\n                  >\n                    <Download size={16} />\n                  </button>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Upload new version */}\n          {isOfficeOrAdmin && (\n            <div className=\"upload-version\">\n              <p className=\"upload-version-hint\">\n                To upload a new version, use the main upload button and select \"Replace existing document\"\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Reject Modal */}\n      {showRejectModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowRejectModal(false)}>\n          <div className=\"reject-modal\" onClick={e => e.stopPropagation()}>\n            <h3>Reject Document</h3>\n            <p>Please provide a reason for rejection:</p>\n            <textarea\n              value={rejectReason}\n              onChange={(e) => setRejectReason(e.target.value)}\n              placeholder=\"Enter reason...\"\n              rows={4}\n            />\n            <div className=\"modal-actions\">\n              <button className=\"btn btn-secondary\" onClick={() => setShowRejectModal(false)}>\n                Cancel\n              </button>\n              <button\n                className=\"btn btn-danger\"\n                onClick={handleReject}\n                disabled={!rejectReason.trim() || processing}\n              >\n                {processing ? <Loader2 size={16} className=\"spinner\" /> : <XCircle size={16} />}\n                Reject Document\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","import { useState } from 'react'\nimport { X, Plus, Folder, FileText, Map, Shield, FileSignature, Camera, ClipboardList, AlertTriangle, HelpCircle, Send, Trash2, Edit2, GripVertical, Loader2 } from 'lucide-react'\nimport { db } from '../../lib/supabase'\n\n// Available icons for folders\nconst FOLDER_ICON_OPTIONS = [\n  { id: 'folder', label: 'Folder', icon: Folder },\n  { id: 'plans', label: 'Plans', icon: Map },\n  { id: 'specs', label: 'Specs', icon: FileText },\n  { id: 'permits', label: 'Permits', icon: Shield },\n  { id: 'contracts', label: 'Contracts', icon: FileSignature },\n  { id: 'submittals', label: 'Submittals', icon: Send },\n  { id: 'rfis', label: 'RFIs', icon: HelpCircle },\n  { id: 'photos', label: 'Photos', icon: Camera },\n  { id: 'reports', label: 'Reports', icon: ClipboardList },\n  { id: 'safety', label: 'Safety', icon: AlertTriangle }\n]\n\n// Available colors for folders\nconst FOLDER_COLOR_OPTIONS = [\n  { id: 'blue', label: 'Blue', hex: '#3b82f6' },\n  { id: 'green', label: 'Green', hex: '#10b981' },\n  { id: 'yellow', label: 'Yellow', hex: '#f59e0b' },\n  { id: 'red', label: 'Red', hex: '#ef4444' },\n  { id: 'purple', label: 'Purple', hex: '#8b5cf6' },\n  { id: 'pink', label: 'Pink', hex: '#ec4899' },\n  { id: 'orange', label: 'Orange', hex: '#f97316' },\n  { id: 'gray', label: 'Gray', hex: '#6b7280' }\n]\n\nexport default function FolderManager({\n  projectId,\n  companyId,\n  folders,\n  onFoldersChange,\n  onClose,\n  onShowToast\n}) {\n  const [showCreateModal, setShowCreateModal] = useState(false)\n  const [editingFolder, setEditingFolder] = useState(null)\n  const [deleting, setDeleting] = useState(null)\n  const [saving, setSaving] = useState(false)\n\n  // Form state\n  const [folderName, setFolderName] = useState('')\n  const [folderIcon, setFolderIcon] = useState('folder')\n  const [folderColor, setFolderColor] = useState('blue')\n  const [folderDescription, setFolderDescription] = useState('')\n\n  const resetForm = () => {\n    setFolderName('')\n    setFolderIcon('folder')\n    setFolderColor('blue')\n    setFolderDescription('')\n    setEditingFolder(null)\n  }\n\n  const openCreateModal = () => {\n    resetForm()\n    setShowCreateModal(true)\n  }\n\n  const openEditModal = (folder) => {\n    setFolderName(folder.name)\n    setFolderIcon(folder.icon || 'folder')\n    setFolderColor(folder.color || 'blue')\n    setFolderDescription(folder.description || '')\n    setEditingFolder(folder)\n    setShowCreateModal(true)\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    if (!folderName.trim()) {\n      onShowToast?.('Please enter a folder name', 'error')\n      return\n    }\n\n    setSaving(true)\n    try {\n      if (editingFolder) {\n        // Update existing folder\n        await db.updateFolder(editingFolder.id, {\n          name: folderName.trim(),\n          icon: folderIcon,\n          color: folderColor,\n          description: folderDescription.trim() || null\n        })\n        onShowToast?.('Folder updated', 'success')\n      } else {\n        // Create new folder\n        const maxOrder = Math.max(0, ...folders.map(f => f.sort_order || 0))\n        await db.createFolder(companyId, projectId, {\n          name: folderName.trim(),\n          icon: folderIcon,\n          color: folderColor,\n          description: folderDescription.trim() || null,\n          sort_order: maxOrder + 1\n        })\n        onShowToast?.('Folder created', 'success')\n      }\n      setShowCreateModal(false)\n      resetForm()\n      onFoldersChange?.()\n    } catch (error) {\n      console.error('Error saving folder:', error)\n      if (error.message?.includes('duplicate key') || error.code === '23505') {\n        onShowToast?.('A folder with this name already exists', 'error')\n      } else {\n        onShowToast?.('Failed to save folder', 'error')\n      }\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handleDelete = async (folder) => {\n    if (!confirm(`Delete \"${folder.name}\"? Documents in this folder will be moved to Unfiled.`)) {\n      return\n    }\n\n    setDeleting(folder.id)\n    try {\n      await db.deleteFolder(folder.id)\n      onShowToast?.('Folder deleted', 'success')\n      onFoldersChange?.()\n    } catch (error) {\n      console.error('Error deleting folder:', error)\n      onShowToast?.('Failed to delete folder', 'error')\n    } finally {\n      setDeleting(null)\n    }\n  }\n\n  const selectedIconData = FOLDER_ICON_OPTIONS.find(i => i.id === folderIcon)\n  const selectedColorData = FOLDER_COLOR_OPTIONS.find(c => c.id === folderColor)\n\n  return (\n    <div className=\"folder-manager\">\n      {/* Header */}\n      <div className=\"folder-manager-header\">\n        <h3>Manage Folders</h3>\n        <button className=\"btn btn-primary btn-sm\" onClick={openCreateModal}>\n          <Plus size={16} />\n          New Folder\n        </button>\n      </div>\n\n      {/* Folder list */}\n      <div className=\"folder-manager-list\">\n        {folders.length === 0 ? (\n          <div className=\"folder-manager-empty\">\n            <Folder size={40} />\n            <p>No folders created yet</p>\n            <button className=\"btn btn-secondary\" onClick={openCreateModal}>\n              Create First Folder\n            </button>\n          </div>\n        ) : (\n          folders.map(folder => {\n            const IconComp = FOLDER_ICON_OPTIONS.find(i => i.id === folder.icon)?.icon || Folder\n            const colorHex = FOLDER_COLOR_OPTIONS.find(c => c.id === folder.color)?.hex || '#3b82f6'\n            return (\n              <div key={folder.id} className=\"folder-manager-item\">\n                <div className=\"folder-manager-item-drag\">\n                  <GripVertical size={16} />\n                </div>\n                <div\n                  className=\"folder-manager-item-icon\"\n                  style={{ backgroundColor: `${colorHex}15` }}\n                >\n                  <IconComp size={20} style={{ color: colorHex }} />\n                </div>\n                <div className=\"folder-manager-item-info\">\n                  <span className=\"folder-manager-item-name\">{folder.name}</span>\n                  <span className=\"folder-manager-item-count\">\n                    {folder.document_count || 0} documents\n                  </span>\n                </div>\n                <div className=\"folder-manager-item-actions\">\n                  <button\n                    className=\"folder-action-btn\"\n                    onClick={() => openEditModal(folder)}\n                    title=\"Edit folder\"\n                  >\n                    <Edit2 size={16} />\n                  </button>\n                  <button\n                    className=\"folder-action-btn danger\"\n                    onClick={() => handleDelete(folder)}\n                    disabled={deleting === folder.id}\n                    title=\"Delete folder\"\n                  >\n                    {deleting === folder.id ? (\n                      <Loader2 size={16} className=\"spinner\" />\n                    ) : (\n                      <Trash2 size={16} />\n                    )}\n                  </button>\n                </div>\n              </div>\n            )\n          })\n        )}\n      </div>\n\n      {/* Create/Edit Modal */}\n      {showCreateModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowCreateModal(false)}>\n          <div className=\"folder-modal\" onClick={e => e.stopPropagation()}>\n            <div className=\"folder-modal-header\">\n              <h3>{editingFolder ? 'Edit Folder' : 'Create Folder'}</h3>\n              <button className=\"modal-close\" onClick={() => setShowCreateModal(false)}>\n                <X size={20} />\n              </button>\n            </div>\n\n            <form onSubmit={handleSubmit}>\n              <div className=\"folder-modal-content\">\n                {/* Preview */}\n                <div className=\"folder-preview\">\n                  <div\n                    className=\"folder-preview-icon\"\n                    style={{ backgroundColor: `${selectedColorData?.hex}15` }}\n                  >\n                    {selectedIconData && (\n                      <selectedIconData.icon\n                        size={40}\n                        style={{ color: selectedColorData?.hex }}\n                      />\n                    )}\n                  </div>\n                  <span className=\"folder-preview-name\">\n                    {folderName || 'Folder Name'}\n                  </span>\n                </div>\n\n                {/* Name input */}\n                <div className=\"form-group\">\n                  <label htmlFor=\"folder-name\">Folder Name *</label>\n                  <input\n                    id=\"folder-name\"\n                    type=\"text\"\n                    value={folderName}\n                    onChange={(e) => setFolderName(e.target.value)}\n                    placeholder=\"e.g., Site Plans, Safety Documents\"\n                    autoFocus\n                  />\n                </div>\n\n                {/* Icon selection */}\n                <div className=\"form-group\">\n                  <label>Icon</label>\n                  <div className=\"folder-icon-grid\">\n                    {FOLDER_ICON_OPTIONS.map(opt => (\n                      <button\n                        key={opt.id}\n                        type=\"button\"\n                        className={`folder-icon-option ${folderIcon === opt.id ? 'selected' : ''}`}\n                        onClick={() => setFolderIcon(opt.id)}\n                        title={opt.label}\n                      >\n                        <opt.icon size={20} />\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Color selection */}\n                <div className=\"form-group\">\n                  <label>Color</label>\n                  <div className=\"folder-color-grid\">\n                    {FOLDER_COLOR_OPTIONS.map(opt => (\n                      <button\n                        key={opt.id}\n                        type=\"button\"\n                        className={`folder-color-option ${folderColor === opt.id ? 'selected' : ''}`}\n                        onClick={() => setFolderColor(opt.id)}\n                        style={{ backgroundColor: opt.hex }}\n                        title={opt.label}\n                      />\n                    ))}\n                  </div>\n                </div>\n\n                {/* Description */}\n                <div className=\"form-group\">\n                  <label htmlFor=\"folder-desc\">Description (optional)</label>\n                  <input\n                    id=\"folder-desc\"\n                    type=\"text\"\n                    value={folderDescription}\n                    onChange={(e) => setFolderDescription(e.target.value)}\n                    placeholder=\"Brief description of folder contents\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"folder-modal-footer\">\n                <button\n                  type=\"button\"\n                  className=\"btn btn-secondary\"\n                  onClick={() => setShowCreateModal(false)}\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary\"\n                  disabled={!folderName.trim() || saving}\n                >\n                  {saving ? (\n                    <>\n                      <Loader2 size={16} className=\"spinner\" />\n                      Saving...\n                    </>\n                  ) : editingFolder ? (\n                    'Save Changes'\n                  ) : (\n                    'Create Folder'\n                  )}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n","import { useState, useEffect, useCallback, useRef } from 'react'\nimport { Upload, Search, FolderOpen, Loader2, X, ArrowLeft, Folder, FileText, Download, File, Image, FileSpreadsheet, Plus, Eye, Archive, CheckCircle, Settings2 } from 'lucide-react'\nimport { db } from '../../lib/supabase'\nimport { DOCUMENTS_PER_PAGE } from '../../lib/constants'\nimport DocumentUploadModal from './DocumentUploadModal'\nimport DocumentDetail from './DocumentDetail'\nimport FolderGrid from './FolderGrid'\nimport FolderManager from './FolderManager'\n\n// Get file type icon\nconst getFileIcon = (mimeType) => {\n  if (mimeType?.startsWith('image/')) return Image\n  if (mimeType?.includes('spreadsheet') || mimeType?.includes('excel')) return FileSpreadsheet\n  if (mimeType?.includes('pdf')) return FileText\n  return File\n}\n\n// Format file size\nconst formatFileSize = (bytes) => {\n  if (!bytes) return '0 B'\n  const units = ['B', 'KB', 'MB', 'GB']\n  let size = bytes\n  let unitIndex = 0\n  while (size >= 1024 && unitIndex < units.length - 1) {\n    size /= 1024\n    unitIndex++\n  }\n  return `${size.toFixed(size < 10 ? 1 : 0)} ${units[unitIndex]}`\n}\n\n// Format date\nconst formatDate = (dateString) => {\n  if (!dateString) return ''\n  const date = new Date(dateString)\n  return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })\n}\n\n// Folder color mapping\nconst FOLDER_COLORS = {\n  blue: '#3b82f6',\n  green: '#10b981',\n  yellow: '#f59e0b',\n  red: '#ef4444',\n  purple: '#8b5cf6',\n  pink: '#ec4899',\n  gray: '#6b7280',\n  orange: '#f97316'\n}\n\nexport default function DocumentsTab({ project, companyId, onShowToast, userRole }) {\n  const [folders, setFolders] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [selectedFolder, setSelectedFolder] = useState(null)\n  const [documents, setDocuments] = useState([])\n  const [loadingDocs, setLoadingDocs] = useState(false)\n  const [hasMore, setHasMore] = useState(false)\n  const [page, setPage] = useState(0)\n  const [totalCount, setTotalCount] = useState(0)\n\n  // Search\n  const [searchQuery, setSearchQuery] = useState('')\n  const [searchResults, setSearchResults] = useState(null)\n  const [searching, setSearching] = useState(false)\n\n  // Modals\n  const [showUploadModal, setShowUploadModal] = useState(false)\n  const [showFolderManager, setShowFolderManager] = useState(false)\n  const [selectedDocument, setSelectedDocument] = useState(null)\n  const [uploadToFolder, setUploadToFolder] = useState(null)\n\n  const isOfficeOrAdmin = userRole === 'office' || userRole === 'administrator'\n  const isFieldUser = userRole === 'foreman'\n\n  // Track selected folder for real-time updates\n  const selectedFolderRef = useRef(null)\n\n  // Load folders\n  const loadFolders = useCallback(async () => {\n    setLoading(true)\n    try {\n      const folderList = await db.getProjectFolders(project.id)\n      setFolders(folderList)\n    } catch (error) {\n      console.error('Error loading folders:', error)\n      onShowToast?.('Failed to load folders', 'error')\n    } finally {\n      setLoading(false)\n    }\n  }, [project.id, onShowToast])\n\n  // Initial load and real-time subscriptions\n  useEffect(() => {\n    loadFolders()\n\n    // Subscribe to real-time document and folder changes\n    const folderSub = db.subscribeToDocumentFolders?.(project.id, () => {\n      loadFolders()\n    })\n    const docSub = db.subscribeToDocuments?.(project.id, () => {\n      // Refresh folder counts when documents change\n      loadFolders()\n      // If a folder is open, refresh its documents\n      if (selectedFolderRef.current) {\n        loadFolderDocuments(selectedFolderRef.current, true)\n      }\n    })\n\n    return () => {\n      folderSub?.unsubscribe?.()\n      docSub?.unsubscribe?.()\n    }\n  }, [loadFolders, project.id])\n\n  // Load documents in folder\n  const loadFolderDocuments = async (folder, reset = false) => {\n    if (reset) {\n      setPage(0)\n      setLoadingDocs(true)\n    }\n\n    try {\n      const currentPage = reset ? 0 : page\n      const result = await db.getFolderDocuments(folder.id, {\n        page: currentPage,\n        limit: DOCUMENTS_PER_PAGE\n      })\n\n      if (reset) {\n        setDocuments(result.documents)\n      } else {\n        setDocuments(prev => [...prev, ...result.documents])\n      }\n      setTotalCount(result.totalCount)\n      setHasMore(result.hasMore)\n    } catch (error) {\n      console.error('Error loading documents:', error)\n      onShowToast?.('Failed to load documents', 'error')\n    } finally {\n      setLoadingDocs(false)\n    }\n  }\n\n  // Open folder\n  const openFolder = (folder) => {\n    setSelectedFolder(folder)\n    selectedFolderRef.current = folder\n    setSearchQuery('')\n    setSearchResults(null)\n    loadFolderDocuments(folder, true)\n  }\n\n  // Go back to folder list\n  const goBack = () => {\n    setSelectedFolder(null)\n    selectedFolderRef.current = null\n    setDocuments([])\n    setSearchResults(null)\n    setSearchQuery('')\n  }\n\n  // Search documents\n  const performSearch = useCallback(async (query) => {\n    if (!query.trim()) {\n      setSearchResults(null)\n      return\n    }\n\n    setSearching(true)\n    try {\n      const results = await db.searchDocuments(project.id, query.trim())\n      setSearchResults(results)\n    } catch (error) {\n      console.error('Error searching documents:', error)\n    } finally {\n      setSearching(false)\n    }\n  }, [project.id])\n\n  // Debounced search\n  const searchTimeoutRef = useRef(null)\n  const handleSearch = useCallback((query) => {\n    setSearchQuery(query)\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current)\n    }\n    searchTimeoutRef.current = setTimeout(() => {\n      performSearch(query)\n    }, 300)\n  }, [performSearch])\n\n  useEffect(() => {\n    return () => {\n      if (searchTimeoutRef.current) {\n        clearTimeout(searchTimeoutRef.current)\n      }\n    }\n  }, [])\n\n  // Handle upload complete\n  const handleUploadComplete = () => {\n    setShowUploadModal(false)\n    setUploadToFolder(null)\n    loadFolders()\n    if (selectedFolder) {\n      loadFolderDocuments(selectedFolder, true)\n    }\n    onShowToast?.('Document uploaded successfully', 'success')\n  }\n\n  // Handle document action\n  const handleDocumentAction = async (action, document) => {\n    try {\n      switch (action) {\n        case 'view':\n          setSelectedDocument(document)\n          break\n        case 'download':\n          await db.logDocumentAccess(document.id, 'downloaded')\n          window.open(document.url || `${import.meta.env.VITE_SUPABASE_URL}/storage/v1/object/public/project-documents/${document.storage_path}`, '_blank')\n          break\n        case 'archive':\n          await db.archiveDocument(document.id)\n          if (selectedFolder) {\n            loadFolderDocuments(selectedFolder, true)\n          }\n          loadFolders()\n          onShowToast?.('Document archived', 'success')\n          break\n        case 'approve':\n          await db.approveDocument(document.id)\n          if (selectedFolder) {\n            loadFolderDocuments(selectedFolder, true)\n          }\n          onShowToast?.('Document approved', 'success')\n          break\n        default:\n          break\n      }\n    } catch (error) {\n      console.error('Error performing action:', error)\n      onShowToast?.('Action failed', 'error')\n    }\n  }\n\n  // Start upload to specific folder\n  const startUploadToFolder = (folder) => {\n    setUploadToFolder(folder)\n    setShowUploadModal(true)\n  }\n\n  // Field user view - clean folder grid with upload capability\n  if (isFieldUser) {\n    return (\n      <FolderGrid\n        projectId={project.id}\n        companyId={companyId}\n        onShowToast={onShowToast}\n        allowUpload={true}\n      />\n    )\n  }\n\n  // Document detail view\n  if (selectedDocument) {\n    return (\n      <DocumentDetail\n        document={selectedDocument}\n        onBack={() => setSelectedDocument(null)}\n        onUpdate={() => {\n          if (selectedFolder) {\n            loadFolderDocuments(selectedFolder, true)\n          }\n          loadFolders()\n        }}\n        onShowToast={onShowToast}\n        isOfficeOrAdmin={isOfficeOrAdmin}\n      />\n    )\n  }\n\n  // Loading state\n  if (loading) {\n    return (\n      <div className=\"docs-container\">\n        <div className=\"docs-loading\">\n          <Loader2 size={24} className=\"spinner\" />\n          <span>Loading documents...</span>\n        </div>\n      </div>\n    )\n  }\n\n  // Inside folder view\n  if (selectedFolder) {\n    const folderColor = FOLDER_COLORS[selectedFolder.color] || FOLDER_COLORS.blue\n    const displayDocs = searchResults !== null ? searchResults : documents\n\n    return (\n      <div className=\"docs-container\">\n        {/* Folder Header */}\n        <div className=\"docs-folder-header\">\n          <button className=\"docs-back-btn\" onClick={goBack}>\n            <ArrowLeft size={18} />\n            <span>Back</span>\n          </button>\n\n          <div className=\"docs-folder-info\">\n            <div className=\"docs-folder-icon\" style={{ backgroundColor: `${folderColor}15` }}>\n              <Folder size={20} style={{ color: folderColor }} />\n            </div>\n            <div>\n              <h2 className=\"docs-folder-name\">{selectedFolder.name}</h2>\n              <span className=\"docs-folder-count\">{totalCount} files</span>\n            </div>\n          </div>\n\n          <button className=\"docs-upload-btn\" onClick={() => startUploadToFolder(selectedFolder)}>\n            <Upload size={18} />\n            <span>Upload</span>\n          </button>\n        </div>\n\n        {/* Search Bar */}\n        <div className=\"docs-search-wrapper\">\n          <div className=\"docs-search\">\n            <Search size={16} />\n            <input\n              type=\"text\"\n              placeholder=\"Search in folder...\"\n              value={searchQuery}\n              onChange={(e) => handleSearch(e.target.value)}\n            />\n            {searchQuery && (\n              <button onClick={() => { setSearchQuery(''); setSearchResults(null) }}>\n                <X size={16} />\n              </button>\n            )}\n            {searching && <Loader2 size={16} className=\"spinner\" />}\n          </div>\n        </div>\n\n        {/* Search Results Info */}\n        {searchResults !== null && (\n          <div className=\"docs-search-info\">\n            <span>{searchResults.length} result{searchResults.length !== 1 ? 's' : ''} for \"{searchQuery}\"</span>\n            <button onClick={() => { setSearchQuery(''); setSearchResults(null) }}>Clear</button>\n          </div>\n        )}\n\n        {/* Document List */}\n        <div className=\"docs-list\">\n          {loadingDocs ? (\n            <div className=\"docs-loading\">\n              <Loader2 size={24} className=\"spinner\" />\n              <span>Loading...</span>\n            </div>\n          ) : displayDocs.length === 0 ? (\n            <div className=\"docs-empty\">\n              <Folder size={48} style={{ color: folderColor, opacity: 0.3 }} />\n              <h3>{searchResults !== null ? 'No results' : 'Empty folder'}</h3>\n              <p>{searchResults !== null ? 'Try a different search term.' : 'Upload your first document.'}</p>\n              {searchResults === null && (\n                <button className=\"docs-empty-btn\" onClick={() => startUploadToFolder(selectedFolder)}>\n                  <Upload size={16} />\n                  Upload Document\n                </button>\n              )}\n            </div>\n          ) : (\n            <>\n              {displayDocs.map(doc => {\n                const FileIcon = getFileIcon(doc.mime_type)\n                const isPending = doc.approval_status === 'pending'\n                return (\n                  <div key={doc.id} className={`docs-item ${isPending ? 'pending' : ''}`}>\n                    <div className=\"docs-item-icon\">\n                      <FileIcon size={20} />\n                    </div>\n                    <div className=\"docs-item-info\">\n                      <span className=\"docs-item-name\">\n                        {doc.name}\n                        {doc.version > 1 && <span className=\"docs-item-version\">v{doc.version}</span>}\n                      </span>\n                      <span className=\"docs-item-meta\">\n                        {formatFileSize(doc.file_size_bytes)} · {formatDate(doc.uploaded_at)}\n                      </span>\n                    </div>\n                    {isPending && <span className=\"docs-badge pending\">Pending</span>}\n                    <div className=\"docs-item-actions\">\n                      <button onClick={() => handleDocumentAction('view', doc)} title=\"View\">\n                        <Eye size={16} />\n                      </button>\n                      <button onClick={() => handleDocumentAction('download', doc)} title=\"Download\">\n                        <Download size={16} />\n                      </button>\n                      {isPending && (\n                        <button className=\"approve\" onClick={() => handleDocumentAction('approve', doc)} title=\"Approve\">\n                          <CheckCircle size={16} />\n                        </button>\n                      )}\n                      <button className=\"danger\" onClick={() => handleDocumentAction('archive', doc)} title=\"Archive\">\n                        <Archive size={16} />\n                      </button>\n                    </div>\n                  </div>\n                )\n              })}\n\n              {/* Load More */}\n              {hasMore && searchResults === null && (\n                <button\n                  className=\"docs-load-more\"\n                  onClick={() => {\n                    setPage(prev => prev + 1)\n                    loadFolderDocuments(selectedFolder, false)\n                  }}\n                  disabled={loadingDocs}\n                >\n                  Load More ({documents.length} of {totalCount})\n                </button>\n              )}\n            </>\n          )}\n        </div>\n\n        {/* Upload Modal */}\n        {showUploadModal && (\n          <DocumentUploadModal\n            projectId={project.id}\n            companyId={companyId}\n            folderId={uploadToFolder?.id}\n            folderName={uploadToFolder?.name}\n            onClose={() => { setShowUploadModal(false); setUploadToFolder(null) }}\n            onUploadComplete={handleUploadComplete}\n            onShowToast={onShowToast}\n          />\n        )}\n      </div>\n    )\n  }\n\n  // Main folder list view\n  return (\n    <div className=\"docs-container\">\n      {/* Header */}\n      <div className=\"docs-header\">\n        <div className=\"docs-search\">\n          <Search size={16} />\n          <input\n            type=\"text\"\n            placeholder=\"Search documents...\"\n            value={searchQuery}\n            onChange={(e) => handleSearch(e.target.value)}\n          />\n          {searchQuery && (\n            <button onClick={() => { setSearchQuery(''); setSearchResults(null) }}>\n              <X size={16} />\n            </button>\n          )}\n          {searching && <Loader2 size={16} className=\"spinner\" />}\n        </div>\n\n        <button className=\"docs-manage-btn\" onClick={() => setShowFolderManager(true)}>\n          <Settings2 size={18} />\n          <span>Manage</span>\n        </button>\n      </div>\n\n      {/* Search Results */}\n      {searchResults !== null ? (\n        <>\n          <div className=\"docs-search-info\">\n            <span>{searchResults.length} result{searchResults.length !== 1 ? 's' : ''}</span>\n            <button onClick={() => { setSearchQuery(''); setSearchResults(null) }}>Clear</button>\n          </div>\n          <div className=\"docs-list\">\n            {searchResults.map(doc => {\n              const FileIcon = getFileIcon(doc.mime_type)\n              return (\n                <div key={doc.id} className=\"docs-item\">\n                  <div className=\"docs-item-icon\">\n                    <FileIcon size={20} />\n                  </div>\n                  <div className=\"docs-item-info\">\n                    <span className=\"docs-item-name\">{doc.name}</span>\n                    <span className=\"docs-item-meta\">\n                      {formatFileSize(doc.file_size_bytes)} · {formatDate(doc.uploaded_at)}\n                    </span>\n                  </div>\n                  <div className=\"docs-item-actions\">\n                    <button onClick={() => handleDocumentAction('view', doc)}>\n                      <Eye size={16} />\n                    </button>\n                    <button onClick={() => handleDocumentAction('download', doc)}>\n                      <Download size={16} />\n                    </button>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        </>\n      ) : (\n        /* Folder Grid */\n        <div className=\"docs-grid\">\n          {folders.length === 0 ? (\n            <div className=\"docs-empty-state\">\n              <FolderOpen size={56} />\n              <h3>No folders yet</h3>\n              <p>Create folders to organize your documents</p>\n              <button onClick={() => setShowFolderManager(true)}>\n                <Plus size={18} />\n                Create Folder\n              </button>\n            </div>\n          ) : (\n            folders.map(folder => {\n              const color = FOLDER_COLORS[folder.color] || FOLDER_COLORS.blue\n              return (\n                <div key={folder.id} className=\"docs-folder-card\" onClick={() => openFolder(folder)}>\n                  <div className=\"docs-folder-card-icon\" style={{ backgroundColor: `${color}12` }}>\n                    <Folder size={28} style={{ color }} />\n                  </div>\n                  <div className=\"docs-folder-card-content\">\n                    <span className=\"docs-folder-card-name\">{folder.name}</span>\n                    <span className=\"docs-folder-card-count\">\n                      {folder.document_count || 0} {folder.document_count === 1 ? 'file' : 'files'}\n                    </span>\n                  </div>\n                  <button\n                    className=\"docs-folder-card-upload\"\n                    onClick={(e) => { e.stopPropagation(); startUploadToFolder(folder) }}\n                    title=\"Upload\"\n                  >\n                    <Plus size={18} />\n                  </button>\n                </div>\n              )\n            })\n          )}\n        </div>\n      )}\n\n      {/* Folder Manager Modal */}\n      {showFolderManager && (\n        <div className=\"modal-overlay\" onClick={() => setShowFolderManager(false)}>\n          <div className=\"docs-manager-modal\" onClick={e => e.stopPropagation()}>\n            <div className=\"docs-manager-header\">\n              <h2>Manage Folders</h2>\n              <button onClick={() => setShowFolderManager(false)}>\n                <X size={20} />\n              </button>\n            </div>\n            <FolderManager\n              projectId={project.id}\n              companyId={companyId}\n              folders={folders}\n              onFoldersChange={loadFolders}\n              onClose={() => setShowFolderManager(false)}\n              onShowToast={onShowToast}\n            />\n          </div>\n        </div>\n      )}\n\n      {/* Upload Modal */}\n      {showUploadModal && (\n        <DocumentUploadModal\n          projectId={project.id}\n          companyId={companyId}\n          folderId={uploadToFolder?.id}\n          folderName={uploadToFolder?.name}\n          onClose={() => { setShowUploadModal(false); setUploadToFolder(null) }}\n          onUploadComplete={handleUploadComplete}\n          onShowToast={onShowToast}\n        />\n      )}\n    </div>\n  )\n}\n"],"names":["formatFileSize","bytes","units","size","unitIndex","formatDate","dateString","DocumentDetail","initialDocument","onBack","onUpdate","onShowToast","isOfficeOrAdmin","document","setDocument","useState","versions","setVersions","loadingVersions","setLoadingVersions","showRejectModal","setShowRejectModal","rejectReason","setRejectReason","processing","setProcessing","category","DOCUMENT_CATEGORIES","c","visibilityInfo","DOCUMENT_VISIBILITY_LABELS","isPending","isRejected","isAdmin","useEffect","loadVersions","versionList","db","error","handleDownload","url","handleApprove","prev","handleReject","handleArchive","jsxs","jsx","ArrowLeft","Download","Archive","Clock","CheckCircle","XCircle","FileText","Folder","Calendar","User","Eye","Link2","Loader2","version","e","FOLDER_ICON_OPTIONS","Map","Shield","FileSignature","Send","HelpCircle","Camera","ClipboardList","AlertTriangle","FOLDER_COLOR_OPTIONS","FolderManager","projectId","companyId","folders","onFoldersChange","onClose","showCreateModal","setShowCreateModal","editingFolder","setEditingFolder","deleting","setDeleting","saving","setSaving","folderName","setFolderName","folderIcon","setFolderIcon","folderColor","setFolderColor","folderDescription","setFolderDescription","resetForm","openCreateModal","openEditModal","folder","handleSubmit","maxOrder","f","handleDelete","selectedIconData","i","selectedColorData","Plus","IconComp","colorHex","GripVertical","Edit2","Trash2","X","opt","Fragment","getFileIcon","mimeType","Image","FileSpreadsheet","File","FOLDER_COLORS","DocumentsTab","project","userRole","setFolders","loading","setLoading","selectedFolder","setSelectedFolder","documents","setDocuments","loadingDocs","setLoadingDocs","hasMore","setHasMore","page","setPage","totalCount","setTotalCount","searchQuery","setSearchQuery","searchResults","setSearchResults","searching","setSearching","showUploadModal","setShowUploadModal","showFolderManager","setShowFolderManager","selectedDocument","setSelectedDocument","uploadToFolder","setUploadToFolder","isFieldUser","selectedFolderRef","useRef","loadFolders","useCallback","folderList","folderSub","docSub","loadFolderDocuments","reset","currentPage","result","DOCUMENTS_PER_PAGE","openFolder","goBack","performSearch","query","results","searchTimeoutRef","handleSearch","handleUploadComplete","handleDocumentAction","action","startUploadToFolder","FolderGrid","displayDocs","Upload","Search","doc","FileIcon","DocumentUploadModal","Settings2","FolderOpen","color"],"mappings":"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"}