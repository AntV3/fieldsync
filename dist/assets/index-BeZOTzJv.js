const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ForemanView-DTcTdzw_.js","assets/InjuryReportForm-PaxMohwK.js","assets/x-wNUVREcU.js","assets/imageUtils--Fs5bf5h.js","assets/wrench-DQwNK8mU.js","assets/user-C-hucWXu.js","assets/chevron-down-DSXxSEl0.js","assets/react-DXGY7bZi.js","assets/pdf-ChZ1zkDw.js","assets/supabase-VuevzHjS.js","assets/Dashboard-Dpf9Ke66.js","assets/users-BnA3PFkN.js","assets/pencil-BYES5siF.js","assets/xlsx-BvJTHLik.js","assets/corCalculations-Dl2af7Zj.js","assets/chevron-right-E4X9oLAy.js","assets/user-minus-im4yi6g1.js","assets/Setup-CTIZm3Vk.js","assets/BrandingSettings-C2u3HBl_.js","assets/PricingManager-BD0BFm3k.js","assets/PublicView-CgUo1YwD.js","assets/SignaturePage-QKvOhkup.js","assets/MembershipManager-B9x3z-i8.js"])))=>i.map(i=>d[i]);
import{r as ym,a as vm,b as eh}from"./react-DXGY7bZi.js";import{_ as Qa}from"./pdf-ChZ1zkDw.js";import{c as bm}from"./supabase-VuevzHjS.js";function th(r,l){for(var c=0;c<l.length;c++){const o=l[c];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in r)){const f=Object.getOwnPropertyDescriptor(o,s);f&&Object.defineProperty(r,s,f.get?f:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const p of f.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function c(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function o(s){if(s.ep)return;s.ep=!0;const f=c(s);fetch(s.href,f)}})();var Ho={exports:{}},Kr={};var nm;function ah(){if(nm)return Kr;nm=1;var r=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function c(o,s,f){var p=null;if(f!==void 0&&(p=""+f),s.key!==void 0&&(p=""+s.key),"key"in s){f={};for(var y in s)y!=="key"&&(f[y]=s[y])}else f=s;return s=f.ref,{$$typeof:r,type:o,key:p,ref:s!==void 0?s:null,props:f}}return Kr.Fragment=l,Kr.jsx=c,Kr.jsxs=c,Kr}var rm;function nh(){return rm||(rm=1,Ho.exports=ah()),Ho.exports}var g=nh(),U=ym();const Sm=vm(U),Ih=th({__proto__:null,default:Sm},[U]);var ko={exports:{}},Jr={},Lo={exports:{}},Yo={};var lm;function rh(){return lm||(lm=1,(function(r){function l(C,x){var V=C.length;C.push(x);e:for(;0<V;){var he=V-1>>>1,W=C[he];if(0<s(W,x))C[he]=x,C[V]=W,V=he;else break e}}function c(C){return C.length===0?null:C[0]}function o(C){if(C.length===0)return null;var x=C[0],V=C.pop();if(V!==x){C[0]=V;e:for(var he=0,W=C.length,Re=W>>>1;he<Re;){var ge=2*(he+1)-1,le=C[ge],Ae=ge+1,z=C[Ae];if(0>s(le,V))Ae<W&&0>s(z,le)?(C[he]=z,C[Ae]=V,he=Ae):(C[he]=le,C[ge]=V,he=ge);else if(Ae<W&&0>s(z,V))C[he]=z,C[Ae]=V,he=Ae;else break e}}return x}function s(C,x){var V=C.sortIndex-x.sortIndex;return V!==0?V:C.id-x.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var p=Date,y=p.now();r.unstable_now=function(){return p.now()-y}}var w=[],N=[],B=1,M=null,Q=3,Z=!1,L=!1,H=!1,ce=!1,se=typeof setTimeout=="function"?setTimeout:null,_e=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function J(C){for(var x=c(N);x!==null;){if(x.callback===null)o(N);else if(x.startTime<=C)o(N),x.sortIndex=x.expirationTime,l(w,x);else break;x=c(N)}}function be(C){if(H=!1,J(C),!L)if(c(w)!==null)L=!0,at||(at=!0,Xe());else{var x=c(N);x!==null&&lt(be,x.startTime-C)}}var at=!1,We=-1,ke=5,Ce=-1;function ha(){return ce?!0:!(r.unstable_now()-Ce<ke)}function mt(){if(ce=!1,at){var C=r.unstable_now();Ce=C;var x=!0;try{e:{L=!1,H&&(H=!1,_e(We),We=-1),Z=!0;var V=Q;try{t:{for(J(C),M=c(w);M!==null&&!(M.expirationTime>C&&ha());){var he=M.callback;if(typeof he=="function"){M.callback=null,Q=M.priorityLevel;var W=he(M.expirationTime<=C);if(C=r.unstable_now(),typeof W=="function"){M.callback=W,J(C),x=!0;break t}M===c(w)&&o(w),J(C)}else o(w);M=c(w)}if(M!==null)x=!0;else{var Re=c(N);Re!==null&&lt(be,Re.startTime-C),x=!1}}break e}finally{M=null,Q=V,Z=!1}x=void 0}}finally{x?Xe():at=!1}}}var Xe;if(typeof F=="function")Xe=function(){F(mt)};else if(typeof MessageChannel<"u"){var Yt=new MessageChannel,Gt=Yt.port2;Yt.port1.onmessage=mt,Xe=function(){Gt.postMessage(null)}}else Xe=function(){se(mt,0)};function lt(C,x){We=se(function(){C(r.unstable_now())},x)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(C){C.callback=null},r.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<C?Math.floor(1e3/C):5},r.unstable_getCurrentPriorityLevel=function(){return Q},r.unstable_next=function(C){switch(Q){case 1:case 2:case 3:var x=3;break;default:x=Q}var V=Q;Q=x;try{return C()}finally{Q=V}},r.unstable_requestPaint=function(){ce=!0},r.unstable_runWithPriority=function(C,x){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var V=Q;Q=C;try{return x()}finally{Q=V}},r.unstable_scheduleCallback=function(C,x,V){var he=r.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?he+V:he):V=he,C){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=V+W,C={id:B++,callback:x,priorityLevel:C,startTime:V,expirationTime:W,sortIndex:-1},V>he?(C.sortIndex=V,l(N,C),c(w)===null&&C===c(N)&&(H?(_e(We),We=-1):H=!0,lt(be,V-he))):(C.sortIndex=W,l(w,C),L||Z||(L=!0,at||(at=!0,Xe()))),C},r.unstable_shouldYield=ha,r.unstable_wrapCallback=function(C){var x=Q;return function(){var V=Q;Q=x;try{return C.apply(this,arguments)}finally{Q=V}}}})(Yo)),Yo}var im;function lh(){return im||(im=1,Lo.exports=rh()),Lo.exports}var cm;function ih(){if(cm)return Jr;cm=1;var r=lh(),l=ym(),c=eh();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function w(e){if(f(e)!==e)throw Error(o(188))}function N(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(o(188));return t!==e?null:e}for(var a=e,n=t;;){var i=a.return;if(i===null)break;var u=i.alternate;if(u===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===u.child){for(u=i.child;u;){if(u===a)return w(i),e;if(u===n)return w(i),t;u=u.sibling}throw Error(o(188))}if(a.return!==n.return)a=i,n=u;else{for(var d=!1,m=i.child;m;){if(m===a){d=!0,a=i,n=u;break}if(m===n){d=!0,n=i,a=u;break}m=m.sibling}if(!d){for(m=u.child;m;){if(m===a){d=!0,a=u,n=i;break}if(m===n){d=!0,n=u,a=i;break}m=m.sibling}if(!d)throw Error(o(189))}}if(a.alternate!==n)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?e:t}function B(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=B(e),t!==null)return t;e=e.sibling}return null}var M=Object.assign,Q=Symbol.for("react.element"),Z=Symbol.for("react.transitional.element"),L=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),_e=Symbol.for("react.consumer"),F=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),at=Symbol.for("react.suspense_list"),We=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),Ce=Symbol.for("react.activity"),ha=Symbol.for("react.memo_cache_sentinel"),mt=Symbol.iterator;function Xe(e){return e===null||typeof e!="object"?null:(e=mt&&e[mt]||e["@@iterator"],typeof e=="function"?e:null)}var Yt=Symbol.for("react.client.reference");function Gt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Yt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case se:return"Profiler";case ce:return"StrictMode";case be:return"Suspense";case at:return"SuspenseList";case Ce:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case L:return"Portal";case F:return e.displayName||"Context";case _e:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case We:return t=e.displayName||null,t!==null?t:Gt(e.type)||"Memo";case ke:t=e._payload,e=e._init;try{return Gt(e(t))}catch{}}return null}var lt=Array.isArray,C=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},he=[],W=-1;function Re(e){return{current:e}}function ge(e){0>W||(e.current=he[W],he[W]=null,W--)}function le(e,t){W++,he[W]=e.current,e.current=t}var Ae=Re(null),z=Re(null),oe=Re(null),Me=Re(null);function G(e,t){switch(le(oe,t),le(z,e),le(Ae,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Td(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Td(t),e=Dd(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ge(Ae),le(Ae,e)}function ue(){ge(Ae),ge(z),ge(oe)}function Oe(e){e.memoizedState!==null&&le(Me,e);var t=Ae.current,a=Dd(t,e.type);t!==a&&(le(z,e),le(Ae,a))}function Ue(e){z.current===e&&(ge(Ae),ge(z)),Me.current===e&&(ge(Me),Qr._currentValue=V)}var $e,_t;function Ne(e){if($e===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);$e=t&&t[1]||"",_t=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+e+_t}var Xa=!1;function ga(e,t){if(!e||Xa)return"";Xa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var O=function(){throw Error()};if(Object.defineProperty(O.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(O,[])}catch(T){var q=T}Reflect.construct(e,[],O)}else{try{O.call()}catch(T){q=T}e.call(O.prototype)}}else{try{throw Error()}catch(T){q=T}(O=e())&&typeof O.catch=="function"&&O.catch(function(){})}}catch(T){if(T&&q&&typeof T.stack=="string")return[T.stack,q.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=n.DetermineComponentFrameRoot(),d=u[0],m=u[1];if(d&&m){var v=d.split(`
`),E=m.split(`
`);for(i=n=0;n<v.length&&!v[n].includes("DetermineComponentFrameRoot");)n++;for(;i<E.length&&!E[i].includes("DetermineComponentFrameRoot");)i++;if(n===v.length||i===E.length)for(n=v.length-1,i=E.length-1;1<=n&&0<=i&&v[n]!==E[i];)i--;for(;1<=n&&0<=i;n--,i--)if(v[n]!==E[i]){if(n!==1||i!==1)do if(n--,i--,0>i||v[n]!==E[i]){var D=`
`+v[n].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=n&&0<=i);break}}}finally{Xa=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ne(a):""}function $t(e,t){switch(e.tag){case 26:case 27:case 5:return Ne(e.type);case 16:return Ne("Lazy");case 13:return e.child!==t&&t!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return ga(e.type,!1);case 11:return ga(e.type.render,!1);case 1:return ga(e.type,!0);case 31:return Ne("Activity");default:return""}}function au(e){try{var t="",a=null;do t+=$t(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var wi=Object.prototype.hasOwnProperty,ji=r.unstable_scheduleCallback,Ei=r.unstable_cancelCallback,Mm=r.unstable_shouldYield,xm=r.unstable_requestPaint,pt=r.unstable_now,zm=r.unstable_getCurrentPriorityLevel,nu=r.unstable_ImmediatePriority,ru=r.unstable_UserBlockingPriority,Ir=r.unstable_NormalPriority,Rm=r.unstable_LowPriority,lu=r.unstable_IdlePriority,Um=r.log,Bm=r.unstable_setDisableYieldValue,tr=null,ht=null;function ya(e){if(typeof Um=="function"&&Bm(e),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(tr,e)}catch{}}var gt=Math.clz32?Math.clz32:Lm,Hm=Math.log,km=Math.LN2;function Lm(e){return e>>>=0,e===0?32:31-(Hm(e)/km|0)|0}var el=256,tl=262144,al=4194304;function Va(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function nl(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var i=0,u=e.suspendedLanes,d=e.pingedLanes;e=e.warmLanes;var m=n&134217727;return m!==0?(n=m&~u,n!==0?i=Va(n):(d&=m,d!==0?i=Va(d):a||(a=m&~e,a!==0&&(i=Va(a))))):(m=n&~u,m!==0?i=Va(m):d!==0?i=Va(d):a||(a=n&~e,a!==0&&(i=Va(a)))),i===0?0:t!==0&&t!==i&&(t&u)===0&&(u=i&-i,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:i}function ar(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ym(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iu(){var e=al;return al<<=1,(al&62914560)===0&&(al=4194304),e}function qi(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function nr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Gm(e,t,a,n,i,u){var d=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,v=e.expirationTimes,E=e.hiddenUpdates;for(a=d&~a;0<a;){var D=31-gt(a),O=1<<D;m[D]=0,v[D]=-1;var q=E[D];if(q!==null)for(E[D]=null,D=0;D<q.length;D++){var T=q[D];T!==null&&(T.lane&=-536870913)}a&=~O}n!==0&&cu(e,n,0),u!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=u&~(d&~t))}function cu(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-gt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function ou(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-gt(a),i=1<<n;i&t|e[n]&t&&(e[n]|=t),a&=~i}}function uu(e,t){var a=t&-t;return a=(a&42)!==0?1:Ti(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ti(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Di(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function su(){var e=x.p;return e!==0?e:(e=window.event,e===void 0?32:$d(e.type))}function fu(e,t){var a=x.p;try{return x.p=e,t()}finally{x.p=a}}var va=Math.random().toString(36).slice(2),Fe="__reactFiber$"+va,it="__reactProps$"+va,_n="__reactContainer$"+va,Ci="__reactEvents$"+va,Qm="__reactListeners$"+va,Xm="__reactHandles$"+va,du="__reactResources$"+va,rr="__reactMarker$"+va;function Ai(e){delete e[Fe],delete e[it],delete e[Ci],delete e[Qm],delete e[Xm]}function pn(e){var t=e[Fe];if(t)return t;for(var a=e.parentNode;a;){if(t=a[_n]||a[Fe]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=zd(e);e!==null;){if(a=e[Fe])return a;e=zd(e)}return t}e=a,a=e.parentNode}return null}function hn(e){if(e=e[Fe]||e[_n]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function lr(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function gn(e){var t=e[du];return t||(t=e[du]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ze(e){e[rr]=!0}var mu=new Set,_u={};function Za(e,t){yn(e,t),yn(e+"Capture",t)}function yn(e,t){for(_u[e]=t,e=0;e<t.length;e++)mu.add(t[e])}var Vm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pu={},hu={};function Zm(e){return wi.call(hu,e)?!0:wi.call(pu,e)?!1:Vm.test(e)?hu[e]=!0:(pu[e]=!0,!1)}function rl(e,t,a){if(Zm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function ll(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Ft(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function Ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Km(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(d){a=""+d,u.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(d){a=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Oi(e){if(!e._valueTracker){var t=gu(e)?"checked":"value";e._valueTracker=Km(e,t,""+e[t])}}function yu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=gu(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function il(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Jm=/[\n"\\]/g;function At(e){return e.replace(Jm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ni(e,t,a,n,i,u,d,m){e.name="",d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"?e.type=d:e.removeAttribute("type"),t!=null?d==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ct(t)):e.value!==""+Ct(t)&&(e.value=""+Ct(t)):d!=="submit"&&d!=="reset"||e.removeAttribute("value"),t!=null?Mi(e,d,Ct(t)):a!=null?Mi(e,d,Ct(a)):n!=null&&e.removeAttribute("value"),i==null&&u!=null&&(e.defaultChecked=!!u),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+Ct(m):e.removeAttribute("name")}function vu(e,t,a,n,i,u,d,m){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Oi(e);return}a=a!=null?""+Ct(a):"",t=t!=null?""+Ct(t):a,m||t===e.value||(e.value=t),e.defaultValue=t}n=n??i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=m?e.checked:!!n,e.defaultChecked=!!n,d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.name=d),Oi(e)}function Mi(e,t,a){t==="number"&&il(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function vn(e,t,a,n){if(e=e.options,t){t={};for(var i=0;i<a.length;i++)t["$"+a[i]]=!0;for(a=0;a<e.length;a++)i=t.hasOwnProperty("$"+e[a].value),e[a].selected!==i&&(e[a].selected=i),i&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Ct(a),t=null,i=0;i<e.length;i++){if(e[i].value===a){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function bu(e,t,a){if(t!=null&&(t=""+Ct(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Ct(a):""}function Su(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(o(92));if(lt(n)){if(1<n.length)throw Error(o(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Ct(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),Oi(e)}function bn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Wm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wu(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Wm.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function ju(e,t,a){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&a[i]!==n&&wu(e,i,n)}else for(var u in t)t.hasOwnProperty(u)&&wu(e,u,t[u])}function xi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $m=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Fm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cl(e){return Fm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var zi=null;function Ri(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sn=null,wn=null;function Eu(e){var t=hn(e);if(t&&(e=t.stateNode)){var a=e[it]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ni(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+At(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var i=n[it]||null;if(!i)throw Error(o(90));Ni(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&yu(n)}break e;case"textarea":bu(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&vn(e,!!a.multiple,t,!1)}}}var Ui=!1;function qu(e,t,a){if(Ui)return e(t,a);Ui=!0;try{var n=e(t);return n}finally{if(Ui=!1,(Sn!==null||wn!==null)&&(Jl(),Sn&&(t=Sn,e=wn,wn=Sn=null,Eu(t),e)))for(t=0;t<e.length;t++)Eu(e[t])}}function ir(e,t){var a=e.stateNode;if(a===null)return null;var n=a[it]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(o(231,t,typeof a));return a}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bi=!1;if(It)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){Bi=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{Bi=!1}var ba=null,Hi=null,ol=null;function Tu(){if(ol)return ol;var e,t=Hi,a=t.length,n,i="value"in ba?ba.value:ba.textContent,u=i.length;for(e=0;e<a&&t[e]===i[e];e++);var d=a-e;for(n=1;n<=d&&t[a-n]===i[u-n];n++);return ol=i.slice(e,1<n?1-n:void 0)}function ul(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sl(){return!0}function Du(){return!1}function ct(e){function t(a,n,i,u,d){this._reactName=a,this._targetInst=i,this.type=n,this.nativeEvent=u,this.target=d,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?sl:Du,this.isPropagationStopped=Du,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sl)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sl)},persist:function(){},isPersistent:sl}),t}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fl=ct(Ka),or=M({},Ka,{view:0,detail:0}),Pm=ct(or),ki,Li,ur,dl=M({},or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&e.type==="mousemove"?(ki=e.screenX-ur.screenX,Li=e.screenY-ur.screenY):Li=ki=0,ur=e),ki)},movementY:function(e){return"movementY"in e?e.movementY:Li}}),Cu=ct(dl),Im=M({},dl,{dataTransfer:0}),e_=ct(Im),t_=M({},or,{relatedTarget:0}),Yi=ct(t_),a_=M({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),n_=ct(a_),r_=M({},Ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),l_=ct(r_),i_=M({},Ka,{data:0}),Au=ct(i_),c_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=u_[e])?!!t[e]:!1}function Gi(){return s_}var f_=M({},or,{key:function(e){if(e.key){var t=c_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ul(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?o_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gi,charCode:function(e){return e.type==="keypress"?ul(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ul(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),d_=ct(f_),m_=M({},dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ou=ct(m_),__=M({},or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gi}),p_=ct(__),h_=M({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),g_=ct(h_),y_=M({},dl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),v_=ct(y_),b_=M({},Ka,{newState:0,oldState:0}),S_=ct(b_),w_=[9,13,27,32],Qi=It&&"CompositionEvent"in window,sr=null;It&&"documentMode"in document&&(sr=document.documentMode);var j_=It&&"TextEvent"in window&&!sr,Nu=It&&(!Qi||sr&&8<sr&&11>=sr),Mu=" ",xu=!1;function zu(e,t){switch(e){case"keyup":return w_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ru(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jn=!1;function E_(e,t){switch(e){case"compositionend":return Ru(t);case"keypress":return t.which!==32?null:(xu=!0,Mu);case"textInput":return e=t.data,e===Mu&&xu?null:e;default:return null}}function q_(e,t){if(jn)return e==="compositionend"||!Qi&&zu(e,t)?(e=Tu(),ol=Hi=ba=null,jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nu&&t.locale!=="ko"?null:t.data;default:return null}}var T_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!T_[e.type]:t==="textarea"}function Bu(e,t,a,n){Sn?wn?wn.push(n):wn=[n]:Sn=n,t=ti(t,"onChange"),0<t.length&&(a=new fl("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var fr=null,dr=null;function D_(e){bd(e,0)}function ml(e){var t=lr(e);if(yu(t))return e}function Hu(e,t){if(e==="change")return t}var ku=!1;if(It){var Xi;if(It){var Vi="oninput"in document;if(!Vi){var Lu=document.createElement("div");Lu.setAttribute("oninput","return;"),Vi=typeof Lu.oninput=="function"}Xi=Vi}else Xi=!1;ku=Xi&&(!document.documentMode||9<document.documentMode)}function Yu(){fr&&(fr.detachEvent("onpropertychange",Gu),dr=fr=null)}function Gu(e){if(e.propertyName==="value"&&ml(dr)){var t=[];Bu(t,dr,e,Ri(e)),qu(D_,t)}}function C_(e,t,a){e==="focusin"?(Yu(),fr=t,dr=a,fr.attachEvent("onpropertychange",Gu)):e==="focusout"&&Yu()}function A_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ml(dr)}function O_(e,t){if(e==="click")return ml(t)}function N_(e,t){if(e==="input"||e==="change")return ml(t)}function M_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yt=typeof Object.is=="function"?Object.is:M_;function mr(e,t){if(yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!wi.call(t,i)||!yt(e[i],t[i]))return!1}return!0}function Qu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xu(e,t){var a=Qu(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Qu(a)}}function Vu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Zu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=il(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=il(e.document)}return t}function Zi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var x_=It&&"documentMode"in document&&11>=document.documentMode,En=null,Ki=null,_r=null,Ji=!1;function Ku(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Ji||En==null||En!==il(n)||(n=En,"selectionStart"in n&&Zi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_r&&mr(_r,n)||(_r=n,n=ti(Ki,"onSelect"),0<n.length&&(t=new fl("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=En)))}function Ja(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var qn={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionrun:Ja("Transition","TransitionRun"),transitionstart:Ja("Transition","TransitionStart"),transitioncancel:Ja("Transition","TransitionCancel"),transitionend:Ja("Transition","TransitionEnd")},Wi={},Ju={};It&&(Ju=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function Wa(e){if(Wi[e])return Wi[e];if(!qn[e])return e;var t=qn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Ju)return Wi[e]=t[a];return e}var Wu=Wa("animationend"),$u=Wa("animationiteration"),Fu=Wa("animationstart"),z_=Wa("transitionrun"),R_=Wa("transitionstart"),U_=Wa("transitioncancel"),Pu=Wa("transitionend"),Iu=new Map,$i="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$i.push("scrollEnd");function Qt(e,t){Iu.set(e,t),Za(t,[e])}var _l=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ot=[],Tn=0,Fi=0;function pl(){for(var e=Tn,t=Fi=Tn=0;t<e;){var a=Ot[t];Ot[t++]=null;var n=Ot[t];Ot[t++]=null;var i=Ot[t];Ot[t++]=null;var u=Ot[t];if(Ot[t++]=null,n!==null&&i!==null){var d=n.pending;d===null?i.next=i:(i.next=d.next,d.next=i),n.pending=i}u!==0&&es(a,i,u)}}function hl(e,t,a,n){Ot[Tn++]=e,Ot[Tn++]=t,Ot[Tn++]=a,Ot[Tn++]=n,Fi|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Pi(e,t,a,n){return hl(e,t,a,n),gl(e)}function $a(e,t){return hl(e,null,null,t),gl(e)}function es(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var i=!1,u=e.return;u!==null;)u.childLanes|=a,n=u.alternate,n!==null&&(n.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(i=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,i&&t!==null&&(i=31-gt(a),e=u.hiddenUpdates,n=e[i],n===null?e[i]=[t]:n.push(t),t.lane=a|536870912),u):null}function gl(e){if(50<Ur)throw Ur=0,co=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Dn={};function B_(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(e,t,a,n){return new B_(e,t,a,n)}function Ii(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ea(e,t){var a=e.alternate;return a===null?(a=vt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ts(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function yl(e,t,a,n,i,u){var d=0;if(n=e,typeof e=="function")Ii(e)&&(d=1);else if(typeof e=="string")d=Gp(e,a,Ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ce:return e=vt(31,a,t,i),e.elementType=Ce,e.lanes=u,e;case H:return Fa(a.children,i,u,t);case ce:d=8,i|=24;break;case se:return e=vt(12,a,t,i|2),e.elementType=se,e.lanes=u,e;case be:return e=vt(13,a,t,i),e.elementType=be,e.lanes=u,e;case at:return e=vt(19,a,t,i),e.elementType=at,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F:d=10;break e;case _e:d=9;break e;case J:d=11;break e;case We:d=14;break e;case ke:d=16,n=null;break e}d=29,a=Error(o(130,e===null?"null":typeof e,"")),n=null}return t=vt(d,a,t,i),t.elementType=e,t.type=n,t.lanes=u,t}function Fa(e,t,a,n){return e=vt(7,e,n,t),e.lanes=a,e}function ec(e,t,a){return e=vt(6,e,null,t),e.lanes=a,e}function as(e){var t=vt(18,null,null,0);return t.stateNode=e,t}function tc(e,t,a){return t=vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ns=new WeakMap;function Nt(e,t){if(typeof e=="object"&&e!==null){var a=ns.get(e);return a!==void 0?a:(t={value:e,source:t,stack:au(t)},ns.set(e,t),t)}return{value:e,source:t,stack:au(t)}}var Cn=[],An=0,vl=null,pr=0,Mt=[],xt=0,Sa=null,Zt=1,Kt="";function ta(e,t){Cn[An++]=pr,Cn[An++]=vl,vl=e,pr=t}function rs(e,t,a){Mt[xt++]=Zt,Mt[xt++]=Kt,Mt[xt++]=Sa,Sa=e;var n=Zt;e=Kt;var i=32-gt(n)-1;n&=~(1<<i),a+=1;var u=32-gt(t)+i;if(30<u){var d=i-i%5;u=(n&(1<<d)-1).toString(32),n>>=d,i-=d,Zt=1<<32-gt(t)+i|a<<i|n,Kt=u+e}else Zt=1<<u|a<<i|n,Kt=e}function ac(e){e.return!==null&&(ta(e,1),rs(e,1,0))}function nc(e){for(;e===vl;)vl=Cn[--An],Cn[An]=null,pr=Cn[--An],Cn[An]=null;for(;e===Sa;)Sa=Mt[--xt],Mt[xt]=null,Kt=Mt[--xt],Mt[xt]=null,Zt=Mt[--xt],Mt[xt]=null}function ls(e,t){Mt[xt++]=Zt,Mt[xt++]=Kt,Mt[xt++]=Sa,Zt=t.id,Kt=t.overflow,Sa=e}var Pe=null,qe=null,ie=!1,wa=null,zt=!1,rc=Error(o(519));function ja(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hr(Nt(t,e)),rc}function is(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[Fe]=e,t[it]=n,a){case"dialog":ae("cancel",t),ae("close",t);break;case"iframe":case"object":case"embed":ae("load",t);break;case"video":case"audio":for(a=0;a<Hr.length;a++)ae(Hr[a],t);break;case"source":ae("error",t);break;case"img":case"image":case"link":ae("error",t),ae("load",t);break;case"details":ae("toggle",t);break;case"input":ae("invalid",t),vu(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":ae("invalid",t);break;case"textarea":ae("invalid",t),Su(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||Ed(t.textContent,a)?(n.popover!=null&&(ae("beforetoggle",t),ae("toggle",t)),n.onScroll!=null&&ae("scroll",t),n.onScrollEnd!=null&&ae("scrollend",t),n.onClick!=null&&(t.onclick=Pt),t=!0):t=!1,t||ja(e,!0)}function cs(e){for(Pe=e.return;Pe;)switch(Pe.tag){case 5:case 31:case 13:zt=!1;return;case 27:case 3:zt=!0;return;default:Pe=Pe.return}}function On(e){if(e!==Pe)return!1;if(!ie)return cs(e),ie=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||jo(e.type,e.memoizedProps)),a=!a),a&&qe&&ja(e),cs(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));qe=xd(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));qe=xd(e)}else t===27?(t=qe,Ba(e.type)?(e=Co,Co=null,qe=e):qe=t):qe=Pe?Ut(e.stateNode.nextSibling):null;return!0}function Pa(){qe=Pe=null,ie=!1}function lc(){var e=wa;return e!==null&&(ft===null?ft=e:ft.push.apply(ft,e),wa=null),e}function hr(e){wa===null?wa=[e]:wa.push(e)}var ic=Re(null),Ia=null,aa=null;function Ea(e,t,a){le(ic,t._currentValue),t._currentValue=a}function na(e){e._currentValue=ic.current,ge(ic)}function cc(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function oc(e,t,a,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){var d=i.child;u=u.firstContext;e:for(;u!==null;){var m=u;u=i;for(var v=0;v<t.length;v++)if(m.context===t[v]){u.lanes|=a,m=u.alternate,m!==null&&(m.lanes|=a),cc(u.return,a,e),n||(d=null);break e}u=m.next}}else if(i.tag===18){if(d=i.return,d===null)throw Error(o(341));d.lanes|=a,u=d.alternate,u!==null&&(u.lanes|=a),cc(d,a,e),d=null}else d=i.child;if(d!==null)d.return=i;else for(d=i;d!==null;){if(d===e){d=null;break}if(i=d.sibling,i!==null){i.return=d.return,d=i;break}d=d.return}i=d}}function Nn(e,t,a,n){e=null;for(var i=t,u=!1;i!==null;){if(!u){if((i.flags&524288)!==0)u=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var d=i.alternate;if(d===null)throw Error(o(387));if(d=d.memoizedProps,d!==null){var m=i.type;yt(i.pendingProps.value,d.value)||(e!==null?e.push(m):e=[m])}}else if(i===Me.current){if(d=i.alternate,d===null)throw Error(o(387));d.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Qr):e=[Qr])}i=i.return}e!==null&&oc(t,e,a,n),t.flags|=262144}function bl(e){for(e=e.firstContext;e!==null;){if(!yt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function en(e){Ia=e,aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ie(e){return os(Ia,e)}function Sl(e,t){return Ia===null&&en(e),os(e,t)}function os(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},aa===null){if(e===null)throw Error(o(308));aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else aa=aa.next=t;return a}var H_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},k_=r.unstable_scheduleCallback,L_=r.unstable_NormalPriority,Le={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uc(){return{controller:new H_,data:new Map,refCount:0}}function gr(e){e.refCount--,e.refCount===0&&k_(L_,function(){e.controller.abort()})}var yr=null,sc=0,Mn=0,xn=null;function Y_(e,t){if(yr===null){var a=yr=[];sc=0,Mn=_o(),xn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return sc++,t.then(us,us),t}function us(){if(--sc===0&&yr!==null){xn!==null&&(xn.status="fulfilled");var e=yr;yr=null,Mn=0,xn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function G_(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}var ss=C.S;C.S=function(e,t){Jf=pt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Y_(e,t),ss!==null&&ss(e,t)};var tn=Re(null);function fc(){var e=tn.current;return e!==null?e:Ee.pooledCache}function wl(e,t){t===null?le(tn,tn.current):le(tn,t.pool)}function fs(){var e=fc();return e===null?null:{parent:Le._currentValue,pool:e}}var zn=Error(o(460)),dc=Error(o(474)),jl=Error(o(542)),El={then:function(){}};function ds(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ms(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Pt,Pt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ps(e),e;default:if(typeof t.status=="string")t.then(Pt,Pt);else{if(e=Ee,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=n}},function(n){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ps(e),e}throw nn=t,zn}}function an(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(nn=a,zn):a}}var nn=null;function _s(){if(nn===null)throw Error(o(459));var e=nn;return nn=null,e}function ps(e){if(e===zn||e===jl)throw Error(o(483))}var Rn=null,vr=0;function ql(e){var t=vr;return vr+=1,Rn===null&&(Rn=[]),ms(Rn,e,t)}function br(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Tl(e,t){throw t.$$typeof===Q?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function hs(e){function t(S,b){if(e){var j=S.deletions;j===null?(S.deletions=[b],S.flags|=16):j.push(b)}}function a(S,b){if(!e)return null;for(;b!==null;)t(S,b),b=b.sibling;return null}function n(S){for(var b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(S,b){return S=ea(S,b),S.index=0,S.sibling=null,S}function u(S,b,j){return S.index=j,e?(j=S.alternate,j!==null?(j=j.index,j<b?(S.flags|=67108866,b):j):(S.flags|=67108866,b)):(S.flags|=1048576,b)}function d(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function m(S,b,j,A){return b===null||b.tag!==6?(b=ec(j,S.mode,A),b.return=S,b):(b=i(b,j),b.return=S,b)}function v(S,b,j,A){var X=j.type;return X===H?D(S,b,j.props.children,A,j.key):b!==null&&(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ke&&an(X)===b.type)?(b=i(b,j.props),br(b,j),b.return=S,b):(b=yl(j.type,j.key,j.props,null,S.mode,A),br(b,j),b.return=S,b)}function E(S,b,j,A){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=tc(j,S.mode,A),b.return=S,b):(b=i(b,j.children||[]),b.return=S,b)}function D(S,b,j,A,X){return b===null||b.tag!==7?(b=Fa(j,S.mode,A,X),b.return=S,b):(b=i(b,j),b.return=S,b)}function O(S,b,j){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=ec(""+b,S.mode,j),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Z:return j=yl(b.type,b.key,b.props,null,S.mode,j),br(j,b),j.return=S,j;case L:return b=tc(b,S.mode,j),b.return=S,b;case ke:return b=an(b),O(S,b,j)}if(lt(b)||Xe(b))return b=Fa(b,S.mode,j,null),b.return=S,b;if(typeof b.then=="function")return O(S,ql(b),j);if(b.$$typeof===F)return O(S,Sl(S,b),j);Tl(S,b)}return null}function q(S,b,j,A){var X=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return X!==null?null:m(S,b,""+j,A);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:return j.key===X?v(S,b,j,A):null;case L:return j.key===X?E(S,b,j,A):null;case ke:return j=an(j),q(S,b,j,A)}if(lt(j)||Xe(j))return X!==null?null:D(S,b,j,A,null);if(typeof j.then=="function")return q(S,b,ql(j),A);if(j.$$typeof===F)return q(S,b,Sl(S,j),A);Tl(S,j)}return null}function T(S,b,j,A,X){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return S=S.get(j)||null,m(b,S,""+A,X);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Z:return S=S.get(A.key===null?j:A.key)||null,v(b,S,A,X);case L:return S=S.get(A.key===null?j:A.key)||null,E(b,S,A,X);case ke:return A=an(A),T(S,b,j,A,X)}if(lt(A)||Xe(A))return S=S.get(j)||null,D(b,S,A,X,null);if(typeof A.then=="function")return T(S,b,j,ql(A),X);if(A.$$typeof===F)return T(S,b,j,Sl(b,A),X);Tl(b,A)}return null}function k(S,b,j,A){for(var X=null,fe=null,Y=b,P=b=0,re=null;Y!==null&&P<j.length;P++){Y.index>P?(re=Y,Y=null):re=Y.sibling;var de=q(S,Y,j[P],A);if(de===null){Y===null&&(Y=re);break}e&&Y&&de.alternate===null&&t(S,Y),b=u(de,b,P),fe===null?X=de:fe.sibling=de,fe=de,Y=re}if(P===j.length)return a(S,Y),ie&&ta(S,P),X;if(Y===null){for(;P<j.length;P++)Y=O(S,j[P],A),Y!==null&&(b=u(Y,b,P),fe===null?X=Y:fe.sibling=Y,fe=Y);return ie&&ta(S,P),X}for(Y=n(Y);P<j.length;P++)re=T(Y,S,P,j[P],A),re!==null&&(e&&re.alternate!==null&&Y.delete(re.key===null?P:re.key),b=u(re,b,P),fe===null?X=re:fe.sibling=re,fe=re);return e&&Y.forEach(function(Ga){return t(S,Ga)}),ie&&ta(S,P),X}function K(S,b,j,A){if(j==null)throw Error(o(151));for(var X=null,fe=null,Y=b,P=b=0,re=null,de=j.next();Y!==null&&!de.done;P++,de=j.next()){Y.index>P?(re=Y,Y=null):re=Y.sibling;var Ga=q(S,Y,de.value,A);if(Ga===null){Y===null&&(Y=re);break}e&&Y&&Ga.alternate===null&&t(S,Y),b=u(Ga,b,P),fe===null?X=Ga:fe.sibling=Ga,fe=Ga,Y=re}if(de.done)return a(S,Y),ie&&ta(S,P),X;if(Y===null){for(;!de.done;P++,de=j.next())de=O(S,de.value,A),de!==null&&(b=u(de,b,P),fe===null?X=de:fe.sibling=de,fe=de);return ie&&ta(S,P),X}for(Y=n(Y);!de.done;P++,de=j.next())de=T(Y,S,P,de.value,A),de!==null&&(e&&de.alternate!==null&&Y.delete(de.key===null?P:de.key),b=u(de,b,P),fe===null?X=de:fe.sibling=de,fe=de);return e&&Y.forEach(function(Ip){return t(S,Ip)}),ie&&ta(S,P),X}function je(S,b,j,A){if(typeof j=="object"&&j!==null&&j.type===H&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:e:{for(var X=j.key;b!==null;){if(b.key===X){if(X=j.type,X===H){if(b.tag===7){a(S,b.sibling),A=i(b,j.props.children),A.return=S,S=A;break e}}else if(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===ke&&an(X)===b.type){a(S,b.sibling),A=i(b,j.props),br(A,j),A.return=S,S=A;break e}a(S,b);break}else t(S,b);b=b.sibling}j.type===H?(A=Fa(j.props.children,S.mode,A,j.key),A.return=S,S=A):(A=yl(j.type,j.key,j.props,null,S.mode,A),br(A,j),A.return=S,S=A)}return d(S);case L:e:{for(X=j.key;b!==null;){if(b.key===X)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){a(S,b.sibling),A=i(b,j.children||[]),A.return=S,S=A;break e}else{a(S,b);break}else t(S,b);b=b.sibling}A=tc(j,S.mode,A),A.return=S,S=A}return d(S);case ke:return j=an(j),je(S,b,j,A)}if(lt(j))return k(S,b,j,A);if(Xe(j)){if(X=Xe(j),typeof X!="function")throw Error(o(150));return j=X.call(j),K(S,b,j,A)}if(typeof j.then=="function")return je(S,b,ql(j),A);if(j.$$typeof===F)return je(S,b,Sl(S,j),A);Tl(S,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,b!==null&&b.tag===6?(a(S,b.sibling),A=i(b,j),A.return=S,S=A):(a(S,b),A=ec(j,S.mode,A),A.return=S,S=A),d(S)):a(S,b)}return function(S,b,j,A){try{vr=0;var X=je(S,b,j,A);return Rn=null,X}catch(Y){if(Y===zn||Y===jl)throw Y;var fe=vt(29,Y,null,S.mode);return fe.lanes=A,fe.return=S,fe}finally{}}}var rn=hs(!0),gs=hs(!1),qa=!1;function mc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _c(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ta(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Da(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(pe&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=gl(e),es(e,null,a),t}return hl(e,n,t,a),gl(e)}function Sr(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,ou(e,a)}}function pc(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var d={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?i=u=d:u=u.next=d,a=a.next}while(a!==null);u===null?i=u=t:u=u.next=t}else i=u=t;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:u,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var hc=!1;function wr(){if(hc){var e=xn;if(e!==null)throw e}}function jr(e,t,a,n){hc=!1;var i=e.updateQueue;qa=!1;var u=i.firstBaseUpdate,d=i.lastBaseUpdate,m=i.shared.pending;if(m!==null){i.shared.pending=null;var v=m,E=v.next;v.next=null,d===null?u=E:d.next=E,d=v;var D=e.alternate;D!==null&&(D=D.updateQueue,m=D.lastBaseUpdate,m!==d&&(m===null?D.firstBaseUpdate=E:m.next=E,D.lastBaseUpdate=v))}if(u!==null){var O=i.baseState;d=0,D=E=v=null,m=u;do{var q=m.lane&-536870913,T=q!==m.lane;if(T?(ne&q)===q:(n&q)===q){q!==0&&q===Mn&&(hc=!0),D!==null&&(D=D.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var k=e,K=m;q=t;var je=a;switch(K.tag){case 1:if(k=K.payload,typeof k=="function"){O=k.call(je,O,q);break e}O=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=K.payload,q=typeof k=="function"?k.call(je,O,q):k,q==null)break e;O=M({},O,q);break e;case 2:qa=!0}}q=m.callback,q!==null&&(e.flags|=64,T&&(e.flags|=8192),T=i.callbacks,T===null?i.callbacks=[q]:T.push(q))}else T={lane:q,tag:m.tag,payload:m.payload,callback:m.callback,next:null},D===null?(E=D=T,v=O):D=D.next=T,d|=q;if(m=m.next,m===null){if(m=i.shared.pending,m===null)break;T=m,m=T.next,T.next=null,i.lastBaseUpdate=T,i.shared.pending=null}}while(!0);D===null&&(v=O),i.baseState=v,i.firstBaseUpdate=E,i.lastBaseUpdate=D,u===null&&(i.shared.lanes=0),Ma|=d,e.lanes=d,e.memoizedState=O}}function ys(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function vs(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)ys(a[e],t)}var Un=Re(null),Dl=Re(0);function bs(e,t){e=da,le(Dl,e),le(Un,t),da=e|t.baseLanes}function gc(){le(Dl,da),le(Un,Un.current)}function yc(){da=Dl.current,ge(Un),ge(Dl)}var bt=Re(null),Rt=null;function Ca(e){var t=e.alternate;le(Be,Be.current&1),le(bt,e),Rt===null&&(t===null||Un.current!==null||t.memoizedState!==null)&&(Rt=e)}function vc(e){le(Be,Be.current),le(bt,e),Rt===null&&(Rt=e)}function Ss(e){e.tag===22?(le(Be,Be.current),le(bt,e),Rt===null&&(Rt=e)):Aa()}function Aa(){le(Be,Be.current),le(bt,bt.current)}function St(e){ge(bt),Rt===e&&(Rt=null),ge(Be)}var Be=Re(0);function Cl(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||To(a)||Do(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=0,$=null,Se=null,Ye=null,Al=!1,Bn=!1,ln=!1,Ol=0,Er=0,Hn=null,Q_=0;function xe(){throw Error(o(321))}function bc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!yt(e[a],t[a]))return!1;return!0}function Sc(e,t,a,n,i,u){return ra=u,$=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,C.H=e===null||e.memoizedState===null?rf:Uc,ln=!1,u=a(n,i),ln=!1,Bn&&(u=js(t,a,n,i)),ws(e),u}function ws(e){C.H=Dr;var t=Se!==null&&Se.next!==null;if(ra=0,Ye=Se=$=null,Al=!1,Er=0,Hn=null,t)throw Error(o(300));e===null||Ge||(e=e.dependencies,e!==null&&bl(e)&&(Ge=!0))}function js(e,t,a,n){$=e;var i=0;do{if(Bn&&(Hn=null),Er=0,Bn=!1,25<=i)throw Error(o(301));if(i+=1,Ye=Se=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}C.H=lf,u=t(a,n)}while(Bn);return u}function X_(){var e=C.H,t=e.useState()[0];return t=typeof t.then=="function"?qr(t):t,e=e.useState()[0],(Se!==null?Se.memoizedState:null)!==e&&($.flags|=1024),t}function wc(){var e=Ol!==0;return Ol=0,e}function jc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Ec(e){if(Al){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Al=!1}ra=0,Ye=Se=$=null,Bn=!1,Er=Ol=0,Hn=null}function nt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?$.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function He(){if(Se===null){var e=$.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Ye===null?$.memoizedState:Ye.next;if(t!==null)Ye=t,Se=e;else{if(e===null)throw $.alternate===null?Error(o(467)):Error(o(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ye===null?$.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Nl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qr(e){var t=Er;return Er+=1,Hn===null&&(Hn=[]),e=ms(Hn,e,t),t=$,(Ye===null?t.memoizedState:Ye.next)===null&&(t=t.alternate,C.H=t===null||t.memoizedState===null?rf:Uc),e}function Ml(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return qr(e);if(e.$$typeof===F)return Ie(e)}throw Error(o(438,String(e)))}function qc(e){var t=null,a=$.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=$.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Nl(),$.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=ha;return t.index++,a}function la(e,t){return typeof t=="function"?t(e):t}function xl(e){var t=He();return Tc(t,Se,e)}function Tc(e,t,a){var n=e.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=a;var i=e.baseQueue,u=n.pending;if(u!==null){if(i!==null){var d=i.next;i.next=u.next,u.next=d}t.baseQueue=i=u,n.pending=null}if(u=e.baseState,i===null)e.memoizedState=u;else{t=i.next;var m=d=null,v=null,E=t,D=!1;do{var O=E.lane&-536870913;if(O!==E.lane?(ne&O)===O:(ra&O)===O){var q=E.revertLane;if(q===0)v!==null&&(v=v.next={lane:0,revertLane:0,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),O===Mn&&(D=!0);else if((ra&q)===q){E=E.next,q===Mn&&(D=!0);continue}else O={lane:0,revertLane:E.revertLane,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},v===null?(m=v=O,d=u):v=v.next=O,$.lanes|=q,Ma|=q;O=E.action,ln&&a(u,O),u=E.hasEagerState?E.eagerState:a(u,O)}else q={lane:O,revertLane:E.revertLane,gesture:E.gesture,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},v===null?(m=v=q,d=u):v=v.next=q,$.lanes|=O,Ma|=O;E=E.next}while(E!==null&&E!==t);if(v===null?d=u:v.next=m,!yt(u,e.memoizedState)&&(Ge=!0,D&&(a=xn,a!==null)))throw a;e.memoizedState=u,e.baseState=d,e.baseQueue=v,n.lastRenderedState=u}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function Dc(e){var t=He(),a=t.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,u=t.memoizedState;if(i!==null){a.pending=null;var d=i=i.next;do u=e(u,d.action),d=d.next;while(d!==i);yt(u,t.memoizedState)||(Ge=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,n]}function Es(e,t,a){var n=$,i=He(),u=ie;if(u){if(a===void 0)throw Error(o(407));a=a()}else a=t();var d=!yt((Se||i).memoizedState,a);if(d&&(i.memoizedState=a,Ge=!0),i=i.queue,Oc(Ds.bind(null,n,i,e),[e]),i.getSnapshot!==t||d||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,kn(9,{destroy:void 0},Ts.bind(null,n,i,a,t),null),Ee===null)throw Error(o(349));u||(ra&127)!==0||qs(n,t,a)}return a}function qs(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=$.updateQueue,t===null?(t=Nl(),$.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Ts(e,t,a,n){t.value=a,t.getSnapshot=n,Cs(t)&&As(e)}function Ds(e,t,a){return a(function(){Cs(t)&&As(e)})}function Cs(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!yt(e,a)}catch{return!0}}function As(e){var t=$a(e,2);t!==null&&dt(t,e,2)}function Cc(e){var t=nt();if(typeof e=="function"){var a=e;if(e=a(),ln){ya(!0);try{a()}finally{ya(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:e},t}function Os(e,t,a,n){return e.baseState=a,Tc(e,Se,typeof n=="function"?n:la)}function V_(e,t,a,n,i){if(Ul(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(d){u.listeners.push(d)}};C.T!==null?a(!0):u.isTransition=!1,n(u),a=t.pending,a===null?(u.next=t.pending=u,Ns(t,u)):(u.next=a.next,t.pending=a.next=u)}}function Ns(e,t){var a=t.action,n=t.payload,i=e.state;if(t.isTransition){var u=C.T,d={};C.T=d;try{var m=a(i,n),v=C.S;v!==null&&v(d,m),Ms(e,t,m)}catch(E){Ac(e,t,E)}finally{u!==null&&d.types!==null&&(u.types=d.types),C.T=u}}else try{u=a(i,n),Ms(e,t,u)}catch(E){Ac(e,t,E)}}function Ms(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){xs(e,t,n)},function(n){return Ac(e,t,n)}):xs(e,t,a)}function xs(e,t,a){t.status="fulfilled",t.value=a,zs(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Ns(e,a)))}function Ac(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,zs(t),t=t.next;while(t!==n)}e.action=null}function zs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Rs(e,t){return t}function Us(e,t){if(ie){var a=Ee.formState;if(a!==null){e:{var n=$;if(ie){if(qe){t:{for(var i=qe,u=zt;i.nodeType!==8;){if(!u){i=null;break t}if(i=Ut(i.nextSibling),i===null){i=null;break t}}u=i.data,i=u==="F!"||u==="F"?i:null}if(i){qe=Ut(i.nextSibling),n=i.data==="F!";break e}}ja(n)}n=!1}n&&(t=a[0])}}return a=nt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Rs,lastRenderedState:t},a.queue=n,a=tf.bind(null,$,n),n.dispatch=a,n=Cc(!1),u=Rc.bind(null,$,!1,n.queue),n=nt(),i={state:t,dispatch:null,action:e,pending:null},n.queue=i,a=V_.bind(null,$,i,u,a),i.dispatch=a,n.memoizedState=e,[t,a,!1]}function Bs(e){var t=He();return Hs(t,Se,e)}function Hs(e,t,a){if(t=Tc(e,t,Rs)[0],e=xl(la)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=qr(t)}catch(d){throw d===zn?jl:d}else n=t;t=He();var i=t.queue,u=i.dispatch;return a!==t.memoizedState&&($.flags|=2048,kn(9,{destroy:void 0},Z_.bind(null,i,a),null)),[n,u,e]}function Z_(e,t){e.action=t}function ks(e){var t=He(),a=Se;if(a!==null)return Hs(t,a,e);He(),t=t.memoizedState,a=He();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function kn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=$.updateQueue,t===null&&(t=Nl(),$.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Ls(){return He().memoizedState}function zl(e,t,a,n){var i=nt();$.flags|=e,i.memoizedState=kn(1|t,{destroy:void 0},a,n===void 0?null:n)}function Rl(e,t,a,n){var i=He();n=n===void 0?null:n;var u=i.memoizedState.inst;Se!==null&&n!==null&&bc(n,Se.memoizedState.deps)?i.memoizedState=kn(t,u,a,n):($.flags|=e,i.memoizedState=kn(1|t,u,a,n))}function Ys(e,t){zl(8390656,8,e,t)}function Oc(e,t){Rl(2048,8,e,t)}function K_(e){$.flags|=4;var t=$.updateQueue;if(t===null)t=Nl(),$.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Gs(e){var t=He().memoizedState;return K_({ref:t,nextImpl:e}),function(){if((pe&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Qs(e,t){return Rl(4,2,e,t)}function Xs(e,t){return Rl(4,4,e,t)}function Vs(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zs(e,t,a){a=a!=null?a.concat([e]):null,Rl(4,4,Vs.bind(null,t,e),a)}function Nc(){}function Ks(e,t){var a=He();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&bc(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Js(e,t){var a=He();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&bc(t,n[1]))return n[0];if(n=e(),ln){ya(!0);try{e()}finally{ya(!1)}}return a.memoizedState=[n,t],n}function Mc(e,t,a){return a===void 0||(ra&1073741824)!==0&&(ne&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=$f(),$.lanes|=e,Ma|=e,a)}function Ws(e,t,a,n){return yt(a,t)?a:Un.current!==null?(e=Mc(e,a,n),yt(e,t)||(Ge=!0),e):(ra&42)===0||(ra&1073741824)!==0&&(ne&261930)===0?(Ge=!0,e.memoizedState=a):(e=$f(),$.lanes|=e,Ma|=e,t)}function $s(e,t,a,n,i){var u=x.p;x.p=u!==0&&8>u?u:8;var d=C.T,m={};C.T=m,Rc(e,!1,t,a);try{var v=i(),E=C.S;if(E!==null&&E(m,v),v!==null&&typeof v=="object"&&typeof v.then=="function"){var D=G_(v,n);Tr(e,t,D,Et(e))}else Tr(e,t,n,Et(e))}catch(O){Tr(e,t,{then:function(){},status:"rejected",reason:O},Et())}finally{x.p=u,d!==null&&m.types!==null&&(d.types=m.types),C.T=d}}function J_(){}function xc(e,t,a,n){if(e.tag!==5)throw Error(o(476));var i=Fs(e).queue;$s(e,i,t,V,a===null?J_:function(){return Ps(e),a(n)})}function Fs(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:V},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ps(e){var t=Fs(e);t.next===null&&(t=e.alternate.memoizedState),Tr(e,t.next.queue,{},Et())}function zc(){return Ie(Qr)}function Is(){return He().memoizedState}function ef(){return He().memoizedState}function W_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Et();e=Ta(a);var n=Da(t,e,a);n!==null&&(dt(n,t,a),Sr(n,t,a)),t={cache:uc()},e.payload=t;return}t=t.return}}function $_(e,t,a){var n=Et();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ul(e)?af(t,a):(a=Pi(e,t,a,n),a!==null&&(dt(a,e,n),nf(a,t,n)))}function tf(e,t,a){var n=Et();Tr(e,t,a,n)}function Tr(e,t,a,n){var i={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ul(e))af(t,i);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var d=t.lastRenderedState,m=u(d,a);if(i.hasEagerState=!0,i.eagerState=m,yt(m,d))return hl(e,t,i,0),Ee===null&&pl(),!1}catch{}finally{}if(a=Pi(e,t,i,n),a!==null)return dt(a,e,n),nf(a,t,n),!0}return!1}function Rc(e,t,a,n){if(n={lane:2,revertLane:_o(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ul(e)){if(t)throw Error(o(479))}else t=Pi(e,a,n,2),t!==null&&dt(t,e,2)}function Ul(e){var t=e.alternate;return e===$||t!==null&&t===$}function af(e,t){Bn=Al=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function nf(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,ou(e,a)}}var Dr={readContext:Ie,use:Ml,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe};Dr.useEffectEvent=xe;var rf={readContext:Ie,use:Ml,useCallback:function(e,t){return nt().memoizedState=[e,t===void 0?null:t],e},useContext:Ie,useEffect:Ys,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,zl(4194308,4,Vs.bind(null,t,e),a)},useLayoutEffect:function(e,t){return zl(4194308,4,e,t)},useInsertionEffect:function(e,t){zl(4,2,e,t)},useMemo:function(e,t){var a=nt();t=t===void 0?null:t;var n=e();if(ln){ya(!0);try{e()}finally{ya(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=nt();if(a!==void 0){var i=a(t);if(ln){ya(!0);try{a(t)}finally{ya(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=$_.bind(null,$,e),[n.memoizedState,e]},useRef:function(e){var t=nt();return e={current:e},t.memoizedState=e},useState:function(e){e=Cc(e);var t=e.queue,a=tf.bind(null,$,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Nc,useDeferredValue:function(e,t){var a=nt();return Mc(a,e,t)},useTransition:function(){var e=Cc(!1);return e=$s.bind(null,$,e.queue,!0,!1),nt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=$,i=nt();if(ie){if(a===void 0)throw Error(o(407));a=a()}else{if(a=t(),Ee===null)throw Error(o(349));(ne&127)!==0||qs(n,t,a)}i.memoizedState=a;var u={value:a,getSnapshot:t};return i.queue=u,Ys(Ds.bind(null,n,u,e),[e]),n.flags|=2048,kn(9,{destroy:void 0},Ts.bind(null,n,u,a,t),null),a},useId:function(){var e=nt(),t=Ee.identifierPrefix;if(ie){var a=Kt,n=Zt;a=(n&~(1<<32-gt(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Ol++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Q_++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:zc,useFormState:Us,useActionState:Us,useOptimistic:function(e){var t=nt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Rc.bind(null,$,!0,a),a.dispatch=t,[e,t]},useMemoCache:qc,useCacheRefresh:function(){return nt().memoizedState=W_.bind(null,$)},useEffectEvent:function(e){var t=nt(),a={impl:e};return t.memoizedState=a,function(){if((pe&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Uc={readContext:Ie,use:Ml,useCallback:Ks,useContext:Ie,useEffect:Oc,useImperativeHandle:Zs,useInsertionEffect:Qs,useLayoutEffect:Xs,useMemo:Js,useReducer:xl,useRef:Ls,useState:function(){return xl(la)},useDebugValue:Nc,useDeferredValue:function(e,t){var a=He();return Ws(a,Se.memoizedState,e,t)},useTransition:function(){var e=xl(la)[0],t=He().memoizedState;return[typeof e=="boolean"?e:qr(e),t]},useSyncExternalStore:Es,useId:Is,useHostTransitionStatus:zc,useFormState:Bs,useActionState:Bs,useOptimistic:function(e,t){var a=He();return Os(a,Se,e,t)},useMemoCache:qc,useCacheRefresh:ef};Uc.useEffectEvent=Gs;var lf={readContext:Ie,use:Ml,useCallback:Ks,useContext:Ie,useEffect:Oc,useImperativeHandle:Zs,useInsertionEffect:Qs,useLayoutEffect:Xs,useMemo:Js,useReducer:Dc,useRef:Ls,useState:function(){return Dc(la)},useDebugValue:Nc,useDeferredValue:function(e,t){var a=He();return Se===null?Mc(a,e,t):Ws(a,Se.memoizedState,e,t)},useTransition:function(){var e=Dc(la)[0],t=He().memoizedState;return[typeof e=="boolean"?e:qr(e),t]},useSyncExternalStore:Es,useId:Is,useHostTransitionStatus:zc,useFormState:ks,useActionState:ks,useOptimistic:function(e,t){var a=He();return Se!==null?Os(a,Se,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:qc,useCacheRefresh:ef};lf.useEffectEvent=Gs;function Bc(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:M({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Hc={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Et(),i=Ta(n);i.payload=t,a!=null&&(i.callback=a),t=Da(e,i,n),t!==null&&(dt(t,e,n),Sr(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Et(),i=Ta(n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=Da(e,i,n),t!==null&&(dt(t,e,n),Sr(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Et(),n=Ta(a);n.tag=2,t!=null&&(n.callback=t),t=Da(e,n,a),t!==null&&(dt(t,e,a),Sr(t,e,a))}};function cf(e,t,a,n,i,u,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,u,d):t.prototype&&t.prototype.isPureReactComponent?!mr(a,n)||!mr(i,u):!0}function of(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Hc.enqueueReplaceState(t,t.state,null)}function cn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=M({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}function uf(e){_l(e)}function sf(e){console.error(e)}function ff(e){_l(e)}function Bl(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function df(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function kc(e,t,a){return a=Ta(a),a.tag=3,a.payload={element:null},a.callback=function(){Bl(e,t)},a}function mf(e){return e=Ta(e),e.tag=3,e}function _f(e,t,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var u=n.value;e.payload=function(){return i(u)},e.callback=function(){df(t,a,n)}}var d=a.stateNode;d!==null&&typeof d.componentDidCatch=="function"&&(e.callback=function(){df(t,a,n),typeof i!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})})}function F_(e,t,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Nn(t,a,i,!0),a=bt.current,a!==null){switch(a.tag){case 31:case 13:return Rt===null?Wl():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===El?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),so(e,n,i)),!1;case 22:return a.flags|=65536,n===El?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),so(e,n,i)),!1}throw Error(o(435,a.tag))}return so(e,n,i),Wl(),!1}if(ie)return t=bt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==rc&&(e=Error(o(422),{cause:n}),hr(Nt(e,a)))):(n!==rc&&(t=Error(o(423),{cause:n}),hr(Nt(t,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=Nt(n,a),i=kc(e.stateNode,n,i),pc(e,i),ze!==4&&(ze=2)),!1;var u=Error(o(520),{cause:n});if(u=Nt(u,a),Rr===null?Rr=[u]:Rr.push(u),ze!==4&&(ze=2),t===null)return!0;n=Nt(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=kc(a.stateNode,n,e),pc(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(xa===null||!xa.has(u))))return a.flags|=65536,i&=-i,a.lanes|=i,i=mf(i),_f(i,e,a,n),pc(a,i),!1}a=a.return}while(a!==null);return!1}var Lc=Error(o(461)),Ge=!1;function et(e,t,a,n){t.child=e===null?gs(t,null,a,n):rn(t,e.child,a,n)}function pf(e,t,a,n,i){a=a.render;var u=t.ref;if("ref"in n){var d={};for(var m in n)m!=="ref"&&(d[m]=n[m])}else d=n;return en(t),n=Sc(e,t,a,d,u,i),m=wc(),e!==null&&!Ge?(jc(e,t,i),ia(e,t,i)):(ie&&m&&ac(t),t.flags|=1,et(e,t,n,i),t.child)}function hf(e,t,a,n,i){if(e===null){var u=a.type;return typeof u=="function"&&!Ii(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,gf(e,t,u,n,i)):(e=yl(a.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Jc(e,i)){var d=u.memoizedProps;if(a=a.compare,a=a!==null?a:mr,a(d,n)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,e=ea(u,n),e.ref=t.ref,e.return=t,t.child=e}function gf(e,t,a,n,i){if(e!==null){var u=e.memoizedProps;if(mr(u,n)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=n=u,Jc(e,i))(e.flags&131072)!==0&&(Ge=!0);else return t.lanes=e.lanes,ia(e,t,i)}return Yc(e,t,a,n,i)}function yf(e,t,a,n){var i=n.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(n=t.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;n=i&~u}else n=0,t.child=null;return vf(e,t,u,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wl(t,u!==null?u.cachePool:null),u!==null?bs(t,u):gc(),Ss(t);else return n=t.lanes=536870912,vf(e,t,u!==null?u.baseLanes|a:a,a,n)}else u!==null?(wl(t,u.cachePool),bs(t,u),Aa(),t.memoizedState=null):(e!==null&&wl(t,null),gc(),Aa());return et(e,t,i,a),t.child}function Cr(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function vf(e,t,a,n,i){var u=fc();return u=u===null?null:{parent:Le._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&wl(t,null),gc(),Ss(t),e!==null&&Nn(e,t,n,!0),t.childLanes=i,null}function Hl(e,t){return t=Ll({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function bf(e,t,a){return rn(t,e.child,null,a),e=Hl(t,t.pendingProps),e.flags|=2,St(t),t.memoizedState=null,e}function P_(e,t,a){var n=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ie){if(n.mode==="hidden")return e=Hl(t,n),t.lanes=536870912,Cr(null,e);if(vc(t),(e=qe)?(e=Md(e,zt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Sa!==null?{id:Zt,overflow:Kt}:null,retryLane:536870912,hydrationErrors:null},a=as(e),a.return=t,t.child=a,Pe=t,qe=null)):e=null,e===null)throw ja(t);return t.lanes=536870912,null}return Hl(t,n)}var u=e.memoizedState;if(u!==null){var d=u.dehydrated;if(vc(t),i)if(t.flags&256)t.flags&=-257,t=bf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Ge||Nn(e,t,a,!1),i=(a&e.childLanes)!==0,Ge||i){if(n=Ee,n!==null&&(d=uu(n,a),d!==0&&d!==u.retryLane))throw u.retryLane=d,$a(e,d),dt(n,e,d),Lc;Wl(),t=bf(e,t,a)}else e=u.treeContext,qe=Ut(d.nextSibling),Pe=t,ie=!0,wa=null,zt=!1,e!==null&&ls(t,e),t=Hl(t,n),t.flags|=4096;return t}return e=ea(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function kl(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Yc(e,t,a,n,i){return en(t),a=Sc(e,t,a,n,void 0,i),n=wc(),e!==null&&!Ge?(jc(e,t,i),ia(e,t,i)):(ie&&n&&ac(t),t.flags|=1,et(e,t,a,i),t.child)}function Sf(e,t,a,n,i,u){return en(t),t.updateQueue=null,a=js(t,n,a,i),ws(e),n=wc(),e!==null&&!Ge?(jc(e,t,u),ia(e,t,u)):(ie&&n&&ac(t),t.flags|=1,et(e,t,a,u),t.child)}function wf(e,t,a,n,i){if(en(t),t.stateNode===null){var u=Dn,d=a.contextType;typeof d=="object"&&d!==null&&(u=Ie(d)),u=new a(n,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Hc,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=n,u.state=t.memoizedState,u.refs={},mc(t),d=a.contextType,u.context=typeof d=="object"&&d!==null?Ie(d):Dn,u.state=t.memoizedState,d=a.getDerivedStateFromProps,typeof d=="function"&&(Bc(t,a,d,n),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(d=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),d!==u.state&&Hc.enqueueReplaceState(u,u.state,null),jr(t,n,u,i),wr(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){u=t.stateNode;var m=t.memoizedProps,v=cn(a,m);u.props=v;var E=u.context,D=a.contextType;d=Dn,typeof D=="object"&&D!==null&&(d=Ie(D));var O=a.getDerivedStateFromProps;D=typeof O=="function"||typeof u.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,D||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m||E!==d)&&of(t,u,n,d),qa=!1;var q=t.memoizedState;u.state=q,jr(t,n,u,i),wr(),E=t.memoizedState,m||q!==E||qa?(typeof O=="function"&&(Bc(t,a,O,n),E=t.memoizedState),(v=qa||cf(t,a,v,n,q,E,d))?(D||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=E),u.props=n,u.state=E,u.context=d,n=v):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,_c(e,t),d=t.memoizedProps,D=cn(a,d),u.props=D,O=t.pendingProps,q=u.context,E=a.contextType,v=Dn,typeof E=="object"&&E!==null&&(v=Ie(E)),m=a.getDerivedStateFromProps,(E=typeof m=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==O||q!==v)&&of(t,u,n,v),qa=!1,q=t.memoizedState,u.state=q,jr(t,n,u,i),wr();var T=t.memoizedState;d!==O||q!==T||qa||e!==null&&e.dependencies!==null&&bl(e.dependencies)?(typeof m=="function"&&(Bc(t,a,m,n),T=t.memoizedState),(D=qa||cf(t,a,D,n,q,T,v)||e!==null&&e.dependencies!==null&&bl(e.dependencies))?(E||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,T,v),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,T,v)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=T),u.props=n,u.state=T,u.context=v,n=D):(typeof u.componentDidUpdate!="function"||d===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),n=!1)}return u=n,kl(e,t),n=(t.flags&128)!==0,u||n?(u=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&n?(t.child=rn(t,e.child,null,i),t.child=rn(t,null,a,i)):et(e,t,a,i),t.memoizedState=u.state,e=t.child):e=ia(e,t,i),e}function jf(e,t,a,n){return Pa(),t.flags|=256,et(e,t,a,n),t.child}var Gc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qc(e){return{baseLanes:e,cachePool:fs()}}function Xc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=jt),e}function Ef(e,t,a){var n=t.pendingProps,i=!1,u=(t.flags&128)!==0,d;if((d=u)||(d=e!==null&&e.memoizedState===null?!1:(Be.current&2)!==0),d&&(i=!0,t.flags&=-129),d=(t.flags&32)!==0,t.flags&=-33,e===null){if(ie){if(i?Ca(t):Aa(),(e=qe)?(e=Md(e,zt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Sa!==null?{id:Zt,overflow:Kt}:null,retryLane:536870912,hydrationErrors:null},a=as(e),a.return=t,t.child=a,Pe=t,qe=null)):e=null,e===null)throw ja(t);return Do(e)?t.lanes=32:t.lanes=536870912,null}var m=n.children;return n=n.fallback,i?(Aa(),i=t.mode,m=Ll({mode:"hidden",children:m},i),n=Fa(n,i,a,null),m.return=t,n.return=t,m.sibling=n,t.child=m,n=t.child,n.memoizedState=Qc(a),n.childLanes=Xc(e,d,a),t.memoizedState=Gc,Cr(null,n)):(Ca(t),Vc(t,m))}var v=e.memoizedState;if(v!==null&&(m=v.dehydrated,m!==null)){if(u)t.flags&256?(Ca(t),t.flags&=-257,t=Zc(e,t,a)):t.memoizedState!==null?(Aa(),t.child=e.child,t.flags|=128,t=null):(Aa(),m=n.fallback,i=t.mode,n=Ll({mode:"visible",children:n.children},i),m=Fa(m,i,a,null),m.flags|=2,n.return=t,m.return=t,n.sibling=m,t.child=n,rn(t,e.child,null,a),n=t.child,n.memoizedState=Qc(a),n.childLanes=Xc(e,d,a),t.memoizedState=Gc,t=Cr(null,n));else if(Ca(t),Do(m)){if(d=m.nextSibling&&m.nextSibling.dataset,d)var E=d.dgst;d=E,n=Error(o(419)),n.stack="",n.digest=d,hr({value:n,source:null,stack:null}),t=Zc(e,t,a)}else if(Ge||Nn(e,t,a,!1),d=(a&e.childLanes)!==0,Ge||d){if(d=Ee,d!==null&&(n=uu(d,a),n!==0&&n!==v.retryLane))throw v.retryLane=n,$a(e,n),dt(d,e,n),Lc;To(m)||Wl(),t=Zc(e,t,a)}else To(m)?(t.flags|=192,t.child=e.child,t=null):(e=v.treeContext,qe=Ut(m.nextSibling),Pe=t,ie=!0,wa=null,zt=!1,e!==null&&ls(t,e),t=Vc(t,n.children),t.flags|=4096);return t}return i?(Aa(),m=n.fallback,i=t.mode,v=e.child,E=v.sibling,n=ea(v,{mode:"hidden",children:n.children}),n.subtreeFlags=v.subtreeFlags&65011712,E!==null?m=ea(E,m):(m=Fa(m,i,a,null),m.flags|=2),m.return=t,n.return=t,n.sibling=m,t.child=n,Cr(null,n),n=t.child,m=e.child.memoizedState,m===null?m=Qc(a):(i=m.cachePool,i!==null?(v=Le._currentValue,i=i.parent!==v?{parent:v,pool:v}:i):i=fs(),m={baseLanes:m.baseLanes|a,cachePool:i}),n.memoizedState=m,n.childLanes=Xc(e,d,a),t.memoizedState=Gc,Cr(e.child,n)):(Ca(t),a=e.child,e=a.sibling,a=ea(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(d=t.deletions,d===null?(t.deletions=[e],t.flags|=16):d.push(e)),t.child=a,t.memoizedState=null,a)}function Vc(e,t){return t=Ll({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ll(e,t){return e=vt(22,e,null,t),e.lanes=0,e}function Zc(e,t,a){return rn(t,e.child,null,a),e=Vc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qf(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),cc(e.return,t,a)}function Kc(e,t,a,n,i,u){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i,treeForkCount:u}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=n,d.tail=a,d.tailMode=i,d.treeForkCount=u)}function Tf(e,t,a){var n=t.pendingProps,i=n.revealOrder,u=n.tail;n=n.children;var d=Be.current,m=(d&2)!==0;if(m?(d=d&1|2,t.flags|=128):d&=1,le(Be,d),et(e,t,n,a),n=ie?pr:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qf(e,a,t);else if(e.tag===19)qf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(a=t.child,i=null;a!==null;)e=a.alternate,e!==null&&Cl(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),Kc(t,!1,i,a,u,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Cl(e)===null){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}Kc(t,!0,a,null,u,n);break;case"together":Kc(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function ia(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ma|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Nn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,a=ea(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ea(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Jc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&bl(e)))}function I_(e,t,a){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),Ea(t,Le,e.memoizedState.cache),Pa();break;case 27:case 5:Oe(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:Ea(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,vc(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ca(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Ef(e,t,a):(Ca(t),e=ia(e,t,a),e!==null?e.sibling:null);Ca(t);break;case 19:var i=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Nn(e,t,a,!1),n=(a&t.childLanes)!==0),i){if(n)return Tf(e,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),le(Be,Be.current),n)break;return null;case 22:return t.lanes=0,yf(e,t,a,t.pendingProps);case 24:Ea(t,Le,e.memoizedState.cache)}return ia(e,t,a)}function Df(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ge=!0;else{if(!Jc(e,a)&&(t.flags&128)===0)return Ge=!1,I_(e,t,a);Ge=(e.flags&131072)!==0}else Ge=!1,ie&&(t.flags&1048576)!==0&&rs(t,pr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=an(t.elementType),t.type=e,typeof e=="function")Ii(e)?(n=cn(e,n),t.tag=1,t=wf(null,t,e,n,a)):(t.tag=0,t=Yc(null,t,e,n,a));else{if(e!=null){var i=e.$$typeof;if(i===J){t.tag=11,t=pf(null,t,e,n,a);break e}else if(i===We){t.tag=14,t=hf(null,t,e,n,a);break e}}throw t=Gt(e)||e,Error(o(306,t,""))}}return t;case 0:return Yc(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,i=cn(n,t.pendingProps),wf(e,t,n,i,a);case 3:e:{if(G(t,t.stateNode.containerInfo),e===null)throw Error(o(387));n=t.pendingProps;var u=t.memoizedState;i=u.element,_c(e,t),jr(t,n,null,a);var d=t.memoizedState;if(n=d.cache,Ea(t,Le,n),n!==u.cache&&oc(t,[Le],a,!0),wr(),n=d.element,u.isDehydrated)if(u={element:n,isDehydrated:!1,cache:d.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=jf(e,t,n,a);break e}else if(n!==i){i=Nt(Error(o(424)),t),hr(i),t=jf(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(qe=Ut(e.firstChild),Pe=t,ie=!0,wa=null,zt=!0,a=gs(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Pa(),n===i){t=ia(e,t,a);break e}et(e,t,n,a)}t=t.child}return t;case 26:return kl(e,t),e===null?(a=Hd(t.type,null,t.pendingProps,null))?t.memoizedState=a:ie||(a=t.type,e=t.pendingProps,n=ai(oe.current).createElement(a),n[Fe]=t,n[it]=e,tt(n,a,e),Ze(n),t.stateNode=n):t.memoizedState=Hd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Oe(t),e===null&&ie&&(n=t.stateNode=Rd(t.type,t.pendingProps,oe.current),Pe=t,zt=!0,i=qe,Ba(t.type)?(Co=i,qe=Ut(n.firstChild)):qe=i),et(e,t,t.pendingProps.children,a),kl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ie&&((i=n=qe)&&(n=Ap(n,t.type,t.pendingProps,zt),n!==null?(t.stateNode=n,Pe=t,qe=Ut(n.firstChild),zt=!1,i=!0):i=!1),i||ja(t)),Oe(t),i=t.type,u=t.pendingProps,d=e!==null?e.memoizedProps:null,n=u.children,jo(i,u)?n=null:d!==null&&jo(i,d)&&(t.flags|=32),t.memoizedState!==null&&(i=Sc(e,t,X_,null,null,a),Qr._currentValue=i),kl(e,t),et(e,t,n,a),t.child;case 6:return e===null&&ie&&((e=a=qe)&&(a=Op(a,t.pendingProps,zt),a!==null?(t.stateNode=a,Pe=t,qe=null,e=!0):e=!1),e||ja(t)),null;case 13:return Ef(e,t,a);case 4:return G(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=rn(t,null,n,a):et(e,t,n,a),t.child;case 11:return pf(e,t,t.type,t.pendingProps,a);case 7:return et(e,t,t.pendingProps,a),t.child;case 8:return et(e,t,t.pendingProps.children,a),t.child;case 12:return et(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,Ea(t,t.type,n.value),et(e,t,n.children,a),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,en(t),i=Ie(i),n=n(i),t.flags|=1,et(e,t,n,a),t.child;case 14:return hf(e,t,t.type,t.pendingProps,a);case 15:return gf(e,t,t.type,t.pendingProps,a);case 19:return Tf(e,t,a);case 31:return P_(e,t,a);case 22:return yf(e,t,a,t.pendingProps);case 24:return en(t),n=Ie(Le),e===null?(i=fc(),i===null&&(i=Ee,u=uc(),i.pooledCache=u,u.refCount++,u!==null&&(i.pooledCacheLanes|=a),i=u),t.memoizedState={parent:n,cache:i},mc(t),Ea(t,Le,i)):((e.lanes&a)!==0&&(_c(e,t),jr(t,null,null,a),wr()),i=e.memoizedState,u=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),Ea(t,Le,n)):(n=u.cache,Ea(t,Le,n),n!==i.cache&&oc(t,[Le],a,!0))),et(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ca(e){e.flags|=4}function Wc(e,t,a,n,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(ed())e.flags|=8192;else throw nn=El,dc}else e.flags&=-16777217}function Cf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Qd(t))if(ed())e.flags|=8192;else throw nn=El,dc}function Yl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?iu():536870912,e.lanes|=t,Qn|=t)}function Ar(e,t){if(!ie)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Te(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function ep(e,t,a){var n=t.pendingProps;switch(nc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Te(t),null;case 1:return Te(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),na(Le),ue(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(On(t)?ca(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,lc())),Te(t),null;case 26:var i=t.type,u=t.memoizedState;return e===null?(ca(t),u!==null?(Te(t),Cf(t,u)):(Te(t),Wc(t,i,null,n,a))):u?u!==e.memoizedState?(ca(t),Te(t),Cf(t,u)):(Te(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&ca(t),Te(t),Wc(t,i,e,n,a)),null;case 27:if(Ue(t),a=oe.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(!n){if(t.stateNode===null)throw Error(o(166));return Te(t),null}e=Ae.current,On(t)?is(t):(e=Rd(i,n,a),t.stateNode=e,ca(t))}return Te(t),null;case 5:if(Ue(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(!n){if(t.stateNode===null)throw Error(o(166));return Te(t),null}if(u=Ae.current,On(t))is(t);else{var d=ai(oe.current);switch(u){case 1:u=d.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:u=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":u=d.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":u=d.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":u=d.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof n.is=="string"?d.createElement("select",{is:n.is}):d.createElement("select"),n.multiple?u.multiple=!0:n.size&&(u.size=n.size);break;default:u=typeof n.is=="string"?d.createElement(i,{is:n.is}):d.createElement(i)}}u[Fe]=t,u[it]=n;e:for(d=t.child;d!==null;){if(d.tag===5||d.tag===6)u.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}t.stateNode=u;e:switch(tt(u,i,n),i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ca(t)}}return Te(t),Wc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(o(166));if(e=oe.current,On(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,i=Pe,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}e[Fe]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||Ed(e.nodeValue,a)),e||ja(t,!0)}else e=ai(e).createTextNode(n),e[Fe]=t,t.stateNode=e}return Te(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=On(t),a!==null){if(e===null){if(!n)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Fe]=t}else Pa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Te(t),e=!1}else a=lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(St(t),t):(St(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Te(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=On(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(o(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));i[Fe]=t}else Pa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Te(t),i=!1}else i=lc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(St(t),t):(St(t),null)}return St(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool),u=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),u!==i&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Yl(t,t.updateQueue),Te(t),null);case 4:return ue(),e===null&&yo(t.stateNode.containerInfo),Te(t),null;case 10:return na(t.type),Te(t),null;case 19:if(ge(Be),n=t.memoizedState,n===null)return Te(t),null;if(i=(t.flags&128)!==0,u=n.rendering,u===null)if(i)Ar(n,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Cl(e),u!==null){for(t.flags|=128,Ar(n,!1),e=u.updateQueue,t.updateQueue=e,Yl(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)ts(a,e),a=a.sibling;return le(Be,Be.current&1|2),ie&&ta(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&pt()>Zl&&(t.flags|=128,i=!0,Ar(n,!1),t.lanes=4194304)}else{if(!i)if(e=Cl(u),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Yl(t,e),Ar(n,!0),n.tail===null&&n.tailMode==="hidden"&&!u.alternate&&!ie)return Te(t),null}else 2*pt()-n.renderingStartTime>Zl&&a!==536870912&&(t.flags|=128,i=!0,Ar(n,!1),t.lanes=4194304);n.isBackwards?(u.sibling=t.child,t.child=u):(e=n.last,e!==null?e.sibling=u:t.child=u,n.last=u)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=pt(),e.sibling=null,a=Be.current,le(Be,i?a&1|2:a&1),ie&&ta(t,n.treeForkCount),e):(Te(t),null);case 22:case 23:return St(t),yc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Te(t),t.subtreeFlags&6&&(t.flags|=8192)):Te(t),a=t.updateQueue,a!==null&&Yl(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&ge(tn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),na(Le),Te(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function tp(e,t){switch(nc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return na(Le),ue(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ue(t),null;case 31:if(t.memoizedState!==null){if(St(t),t.alternate===null)throw Error(o(340));Pa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(St(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Pa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ge(Be),null;case 4:return ue(),null;case 10:return na(t.type),null;case 22:case 23:return St(t),yc(),e!==null&&ge(tn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return na(Le),null;case 25:return null;default:return null}}function Af(e,t){switch(nc(t),t.tag){case 3:na(Le),ue();break;case 26:case 27:case 5:Ue(t);break;case 4:ue();break;case 31:t.memoizedState!==null&&St(t);break;case 13:St(t);break;case 19:ge(Be);break;case 10:na(t.type);break;case 22:case 23:St(t),yc(),e!==null&&ge(tn);break;case 24:na(Le)}}function Or(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&e)===e){n=void 0;var u=a.create,d=a.inst;n=u(),d.destroy=n}a=a.next}while(a!==i)}}catch(m){ve(t,t.return,m)}}function Oa(e,t,a){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var u=i.next;n=u;do{if((n.tag&e)===e){var d=n.inst,m=d.destroy;if(m!==void 0){d.destroy=void 0,i=t;var v=a,E=m;try{E()}catch(D){ve(i,v,D)}}}n=n.next}while(n!==u)}}catch(D){ve(t,t.return,D)}}function Of(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{vs(t,a)}catch(n){ve(e,e.return,n)}}}function Nf(e,t,a){a.props=cn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){ve(e,t,n)}}function Nr(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(i){ve(e,t,i)}}function Jt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){ve(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){ve(e,t,i)}else a.current=null}function Mf(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(i){ve(e,e.return,i)}}function $c(e,t,a){try{var n=e.stateNode;jp(n,e.type,a,t),n[it]=t}catch(i){ve(e,e.return,i)}}function xf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ba(e.type)||e.tag===4}function Fc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ba(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Pc(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Pt));else if(n!==4&&(n===27&&Ba(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Pc(e,t,a),e=e.sibling;e!==null;)Pc(e,t,a),e=e.sibling}function Gl(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Ba(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Gl(e,t,a),e=e.sibling;e!==null;)Gl(e,t,a),e=e.sibling}function zf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);tt(t,n,a),t[Fe]=e,t[it]=a}catch(u){ve(e,e.return,u)}}var oa=!1,Qe=!1,Ic=!1,Rf=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function ap(e,t){if(e=e.containerInfo,So=ui,e=Zu(e),Zi(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var i=n.anchorOffset,u=n.focusNode;n=n.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var d=0,m=-1,v=-1,E=0,D=0,O=e,q=null;t:for(;;){for(var T;O!==a||i!==0&&O.nodeType!==3||(m=d+i),O!==u||n!==0&&O.nodeType!==3||(v=d+n),O.nodeType===3&&(d+=O.nodeValue.length),(T=O.firstChild)!==null;)q=O,O=T;for(;;){if(O===e)break t;if(q===a&&++E===i&&(m=d),q===u&&++D===n&&(v=d),(T=O.nextSibling)!==null)break;O=q,q=O.parentNode}O=T}a=m===-1||v===-1?null:{start:m,end:v}}else a=null}a=a||{start:0,end:0}}else a=null;for(wo={focusedElem:e,selectionRange:a},ui=!1,Ke=t;Ke!==null;)if(t=Ke,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ke=e;else for(;Ke!==null;){switch(t=Ke,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)i=e[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,i=u.memoizedProps,u=u.memoizedState,n=a.stateNode;try{var k=cn(a.type,i);e=n.getSnapshotBeforeUpdate(k,u),n.__reactInternalSnapshotBeforeUpdate=e}catch(K){ve(a,a.return,K)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)qo(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":qo(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Ke=e;break}Ke=t.return}}function Uf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:sa(e,a),n&4&&Or(5,a);break;case 1:if(sa(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(d){ve(a,a.return,d)}else{var i=cn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(d){ve(a,a.return,d)}}n&64&&Of(a),n&512&&Nr(a,a.return);break;case 3:if(sa(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{vs(e,t)}catch(d){ve(a,a.return,d)}}break;case 27:t===null&&n&4&&zf(a);case 26:case 5:sa(e,a),t===null&&n&4&&Mf(a),n&512&&Nr(a,a.return);break;case 12:sa(e,a);break;case 31:sa(e,a),n&4&&kf(e,a);break;case 13:sa(e,a),n&4&&Lf(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=fp.bind(null,a),Np(e,a))));break;case 22:if(n=a.memoizedState!==null||oa,!n){t=t!==null&&t.memoizedState!==null||Qe,i=oa;var u=Qe;oa=n,(Qe=t)&&!u?fa(e,a,(a.subtreeFlags&8772)!==0):sa(e,a),oa=i,Qe=u}break;case 30:break;default:sa(e,a)}}function Bf(e){var t=e.alternate;t!==null&&(e.alternate=null,Bf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ai(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var De=null,ot=!1;function ua(e,t,a){for(a=a.child;a!==null;)Hf(e,t,a),a=a.sibling}function Hf(e,t,a){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(tr,a)}catch{}switch(a.tag){case 26:Qe||Jt(a,t),ua(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qe||Jt(a,t);var n=De,i=ot;Ba(a.type)&&(De=a.stateNode,ot=!1),ua(e,t,a),Lr(a.stateNode),De=n,ot=i;break;case 5:Qe||Jt(a,t);case 6:if(n=De,i=ot,De=null,ua(e,t,a),De=n,ot=i,De!==null)if(ot)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(a.stateNode)}catch(u){ve(a,t,u)}else try{De.removeChild(a.stateNode)}catch(u){ve(a,t,u)}break;case 18:De!==null&&(ot?(e=De,Od(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Fn(e)):Od(De,a.stateNode));break;case 4:n=De,i=ot,De=a.stateNode.containerInfo,ot=!0,ua(e,t,a),De=n,ot=i;break;case 0:case 11:case 14:case 15:Oa(2,a,t),Qe||Oa(4,a,t),ua(e,t,a);break;case 1:Qe||(Jt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Nf(a,t,n)),ua(e,t,a);break;case 21:ua(e,t,a);break;case 22:Qe=(n=Qe)||a.memoizedState!==null,ua(e,t,a),Qe=n;break;default:ua(e,t,a)}}function kf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Fn(e)}catch(a){ve(t,t.return,a)}}}function Lf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Fn(e)}catch(a){ve(t,t.return,a)}}function np(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Rf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Rf),t;default:throw Error(o(435,e.tag))}}function Ql(e,t){var a=np(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var i=dp.bind(null,e,n);n.then(i,i)}})}function ut(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],u=e,d=t,m=d;e:for(;m!==null;){switch(m.tag){case 27:if(Ba(m.type)){De=m.stateNode,ot=!1;break e}break;case 5:De=m.stateNode,ot=!1;break e;case 3:case 4:De=m.stateNode.containerInfo,ot=!0;break e}m=m.return}if(De===null)throw Error(o(160));Hf(u,d,i),De=null,ot=!1,u=i.alternate,u!==null&&(u.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Yf(t,e),t=t.sibling}var Xt=null;function Yf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ut(t,e),st(e),n&4&&(Oa(3,e,e.return),Or(3,e),Oa(5,e,e.return));break;case 1:ut(t,e),st(e),n&512&&(Qe||a===null||Jt(a,a.return)),n&64&&oa&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var i=Xt;if(ut(t,e),st(e),n&512&&(Qe||a===null||Jt(a,a.return)),n&4){var u=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":u=i.getElementsByTagName("title")[0],(!u||u[rr]||u[Fe]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=i.createElement(n),i.head.insertBefore(u,i.querySelector("head > title"))),tt(u,n,a),u[Fe]=e,Ze(u),n=u;break e;case"link":var d=Yd("link","href",i).get(n+(a.href||""));if(d){for(var m=0;m<d.length;m++)if(u=d[m],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){d.splice(m,1);break t}}u=i.createElement(n),tt(u,n,a),i.head.appendChild(u);break;case"meta":if(d=Yd("meta","content",i).get(n+(a.content||""))){for(m=0;m<d.length;m++)if(u=d[m],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){d.splice(m,1);break t}}u=i.createElement(n),tt(u,n,a),i.head.appendChild(u);break;default:throw Error(o(468,n))}u[Fe]=e,Ze(u),n=u}e.stateNode=n}else Gd(i,e.type,e.stateNode);else e.stateNode=Ld(i,n,e.memoizedProps);else u!==n?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,n===null?Gd(i,e.type,e.stateNode):Ld(i,n,e.memoizedProps)):n===null&&e.stateNode!==null&&$c(e,e.memoizedProps,a.memoizedProps)}break;case 27:ut(t,e),st(e),n&512&&(Qe||a===null||Jt(a,a.return)),a!==null&&n&4&&$c(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ut(t,e),st(e),n&512&&(Qe||a===null||Jt(a,a.return)),e.flags&32){i=e.stateNode;try{bn(i,"")}catch(k){ve(e,e.return,k)}}n&4&&e.stateNode!=null&&(i=e.memoizedProps,$c(e,i,a!==null?a.memoizedProps:i)),n&1024&&(Ic=!0);break;case 6:if(ut(t,e),st(e),n&4){if(e.stateNode===null)throw Error(o(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(k){ve(e,e.return,k)}}break;case 3:if(li=null,i=Xt,Xt=ni(t.containerInfo),ut(t,e),Xt=i,st(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Fn(t.containerInfo)}catch(k){ve(e,e.return,k)}Ic&&(Ic=!1,Gf(e));break;case 4:n=Xt,Xt=ni(e.stateNode.containerInfo),ut(t,e),st(e),Xt=n;break;case 12:ut(t,e),st(e);break;case 31:ut(t,e),st(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ql(e,n)));break;case 13:ut(t,e),st(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Vl=pt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ql(e,n)));break;case 22:i=e.memoizedState!==null;var v=a!==null&&a.memoizedState!==null,E=oa,D=Qe;if(oa=E||i,Qe=D||v,ut(t,e),Qe=D,oa=E,st(e),n&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(a===null||v||oa||Qe||on(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){v=a=t;try{if(u=v.stateNode,i)d=u.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none";else{m=v.stateNode;var O=v.memoizedProps.style,q=O!=null&&O.hasOwnProperty("display")?O.display:null;m.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(k){ve(v,v.return,k)}}}else if(t.tag===6){if(a===null){v=t;try{v.stateNode.nodeValue=i?"":v.memoizedProps}catch(k){ve(v,v.return,k)}}}else if(t.tag===18){if(a===null){v=t;try{var T=v.stateNode;i?Nd(T,!0):Nd(v.stateNode,!1)}catch(k){ve(v,v.return,k)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Ql(e,a))));break;case 19:ut(t,e),st(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Ql(e,n)));break;case 30:break;case 21:break;default:ut(t,e),st(e)}}function st(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(xf(n)){a=n;break}n=n.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var i=a.stateNode,u=Fc(e);Gl(e,u,i);break;case 5:var d=a.stateNode;a.flags&32&&(bn(d,""),a.flags&=-33);var m=Fc(e);Gl(e,m,d);break;case 3:case 4:var v=a.stateNode.containerInfo,E=Fc(e);Pc(e,E,v);break;default:throw Error(o(161))}}catch(D){ve(e,e.return,D)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Gf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Gf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function sa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Uf(e,t.alternate,t),t=t.sibling}function on(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Oa(4,t,t.return),on(t);break;case 1:Jt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Nf(t,t.return,a),on(t);break;case 27:Lr(t.stateNode);case 26:case 5:Jt(t,t.return),on(t);break;case 22:t.memoizedState===null&&on(t);break;case 30:on(t);break;default:on(t)}e=e.sibling}}function fa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,i=e,u=t,d=u.flags;switch(u.tag){case 0:case 11:case 15:fa(i,u,a),Or(4,u);break;case 1:if(fa(i,u,a),n=u,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(E){ve(n,n.return,E)}if(n=u,i=n.updateQueue,i!==null){var m=n.stateNode;try{var v=i.shared.hiddenCallbacks;if(v!==null)for(i.shared.hiddenCallbacks=null,i=0;i<v.length;i++)ys(v[i],m)}catch(E){ve(n,n.return,E)}}a&&d&64&&Of(u),Nr(u,u.return);break;case 27:zf(u);case 26:case 5:fa(i,u,a),a&&n===null&&d&4&&Mf(u),Nr(u,u.return);break;case 12:fa(i,u,a);break;case 31:fa(i,u,a),a&&d&4&&kf(i,u);break;case 13:fa(i,u,a),a&&d&4&&Lf(i,u);break;case 22:u.memoizedState===null&&fa(i,u,a),Nr(u,u.return);break;case 30:break;default:fa(i,u,a)}t=t.sibling}}function eo(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&gr(a))}function to(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gr(e))}function Vt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Qf(e,t,a,n),t=t.sibling}function Qf(e,t,a,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Vt(e,t,a,n),i&2048&&Or(9,t);break;case 1:Vt(e,t,a,n);break;case 3:Vt(e,t,a,n),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gr(e)));break;case 12:if(i&2048){Vt(e,t,a,n),e=t.stateNode;try{var u=t.memoizedProps,d=u.id,m=u.onPostCommit;typeof m=="function"&&m(d,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(v){ve(t,t.return,v)}}else Vt(e,t,a,n);break;case 31:Vt(e,t,a,n);break;case 13:Vt(e,t,a,n);break;case 23:break;case 22:u=t.stateNode,d=t.alternate,t.memoizedState!==null?u._visibility&2?Vt(e,t,a,n):Mr(e,t):u._visibility&2?Vt(e,t,a,n):(u._visibility|=2,Ln(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),i&2048&&eo(d,t);break;case 24:Vt(e,t,a,n),i&2048&&to(t.alternate,t);break;default:Vt(e,t,a,n)}}function Ln(e,t,a,n,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,d=t,m=a,v=n,E=d.flags;switch(d.tag){case 0:case 11:case 15:Ln(u,d,m,v,i),Or(8,d);break;case 23:break;case 22:var D=d.stateNode;d.memoizedState!==null?D._visibility&2?Ln(u,d,m,v,i):Mr(u,d):(D._visibility|=2,Ln(u,d,m,v,i)),i&&E&2048&&eo(d.alternate,d);break;case 24:Ln(u,d,m,v,i),i&&E&2048&&to(d.alternate,d);break;default:Ln(u,d,m,v,i)}t=t.sibling}}function Mr(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,i=n.flags;switch(n.tag){case 22:Mr(a,n),i&2048&&eo(n.alternate,n);break;case 24:Mr(a,n),i&2048&&to(n.alternate,n);break;default:Mr(a,n)}t=t.sibling}}var xr=8192;function Yn(e,t,a){if(e.subtreeFlags&xr)for(e=e.child;e!==null;)Xf(e,t,a),e=e.sibling}function Xf(e,t,a){switch(e.tag){case 26:Yn(e,t,a),e.flags&xr&&e.memoizedState!==null&&Qp(a,Xt,e.memoizedState,e.memoizedProps);break;case 5:Yn(e,t,a);break;case 3:case 4:var n=Xt;Xt=ni(e.stateNode.containerInfo),Yn(e,t,a),Xt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=xr,xr=16777216,Yn(e,t,a),xr=n):Yn(e,t,a));break;default:Yn(e,t,a)}}function Vf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function zr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Ke=n,Kf(n,e)}Vf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Zf(e),e=e.sibling}function Zf(e){switch(e.tag){case 0:case 11:case 15:zr(e),e.flags&2048&&Oa(9,e,e.return);break;case 3:zr(e);break;case 12:zr(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Xl(e)):zr(e);break;default:zr(e)}}function Xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Ke=n,Kf(n,e)}Vf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Oa(8,t,t.return),Xl(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Xl(t));break;default:Xl(t)}e=e.sibling}}function Kf(e,t){for(;Ke!==null;){var a=Ke;switch(a.tag){case 0:case 11:case 15:Oa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:gr(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Ke=n;else e:for(a=e;Ke!==null;){n=Ke;var i=n.sibling,u=n.return;if(Bf(n),n===a){Ke=null;break e}if(i!==null){i.return=u,Ke=i;break e}Ke=u}}}var rp={getCacheForType:function(e){var t=Ie(Le),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return Ie(Le).controller.signal}},lp=typeof WeakMap=="function"?WeakMap:Map,pe=0,Ee=null,te=null,ne=0,ye=0,wt=null,Na=!1,Gn=!1,ao=!1,da=0,ze=0,Ma=0,un=0,no=0,jt=0,Qn=0,Rr=null,ft=null,ro=!1,Vl=0,Jf=0,Zl=1/0,Kl=null,xa=null,Ve=0,za=null,Xn=null,ma=0,lo=0,io=null,Wf=null,Ur=0,co=null;function Et(){return(pe&2)!==0&&ne!==0?ne&-ne:C.T!==null?_o():su()}function $f(){if(jt===0)if((ne&536870912)===0||ie){var e=tl;tl<<=1,(tl&3932160)===0&&(tl=262144),jt=e}else jt=536870912;return e=bt.current,e!==null&&(e.flags|=32),jt}function dt(e,t,a){(e===Ee&&(ye===2||ye===9)||e.cancelPendingCommit!==null)&&(Vn(e,0),Ra(e,ne,jt,!1)),nr(e,a),((pe&2)===0||e!==Ee)&&(e===Ee&&((pe&2)===0&&(un|=a),ze===4&&Ra(e,ne,jt,!1)),Wt(e))}function Ff(e,t,a){if((pe&6)!==0)throw Error(o(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||ar(e,t),i=n?op(e,t):uo(e,t,!0),u=n;do{if(i===0){Gn&&!n&&Ra(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!ip(a)){i=uo(e,t,!1),u=!1;continue}if(i===2){if(u=t,e.errorRecoveryDisabledLanes&u)var d=0;else d=e.pendingLanes&-536870913,d=d!==0?d:d&536870912?536870912:0;if(d!==0){t=d;e:{var m=e;i=Rr;var v=m.current.memoizedState.isDehydrated;if(v&&(Vn(m,d).flags|=256),d=uo(m,d,!1),d!==2){if(ao&&!v){m.errorRecoveryDisabledLanes|=u,un|=u,i=4;break e}u=ft,ft=i,u!==null&&(ft===null?ft=u:ft.push.apply(ft,u))}i=d}if(u=!1,i!==2)continue}}if(i===1){Vn(e,0),Ra(e,t,0,!0);break}e:{switch(n=e,u=i,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Ra(n,t,jt,!Na);break e;case 2:ft=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(i=Vl+300-pt(),10<i)){if(Ra(n,t,jt,!Na),nl(n,0,!0)!==0)break e;ma=t,n.timeoutHandle=Cd(Pf.bind(null,n,a,ft,Kl,ro,t,jt,un,Qn,Na,u,"Throttled",-0,0),i);break e}Pf(n,a,ft,Kl,ro,t,jt,un,Qn,Na,u,null,-0,0)}}break}while(!0);Wt(e)}function Pf(e,t,a,n,i,u,d,m,v,E,D,O,q,T){if(e.timeoutHandle=-1,O=t.subtreeFlags,O&8192||(O&16785408)===16785408){O={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt},Xf(t,u,O);var k=(u&62914560)===u?Vl-pt():(u&4194048)===u?Jf-pt():0;if(k=Xp(O,k),k!==null){ma=u,e.cancelPendingCommit=k(id.bind(null,e,t,u,a,n,i,d,m,v,D,O,null,q,T)),Ra(e,u,d,!E);return}}id(e,t,u,a,n,i,d,m,v)}function ip(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],u=i.getSnapshot;i=i.value;try{if(!yt(u(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ra(e,t,a,n){t&=~no,t&=~un,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var u=31-gt(i),d=1<<u;n[u]=-1,i&=~d}a!==0&&cu(e,a,t)}function Jl(){return(pe&6)===0?(Br(0),!1):!0}function oo(){if(te!==null){if(ye===0)var e=te.return;else e=te,aa=Ia=null,Ec(e),Rn=null,vr=0,e=te;for(;e!==null;)Af(e.alternate,e),e=e.return;te=null}}function Vn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Tp(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ma=0,oo(),Ee=e,te=a=ea(e.current,null),ne=t,ye=0,wt=null,Na=!1,Gn=ar(e,t),ao=!1,Qn=jt=no=un=Ma=ze=0,ft=Rr=null,ro=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var i=31-gt(n),u=1<<i;t|=e[i],n&=~u}return da=t,pl(),a}function If(e,t){$=null,C.H=Dr,t===zn||t===jl?(t=_s(),ye=3):t===dc?(t=_s(),ye=4):ye=t===Lc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,wt=t,te===null&&(ze=1,Bl(e,Nt(t,e.current)))}function ed(){var e=bt.current;return e===null?!0:(ne&4194048)===ne?Rt===null:(ne&62914560)===ne||(ne&536870912)!==0?e===Rt:!1}function td(){var e=C.H;return C.H=Dr,e===null?Dr:e}function ad(){var e=C.A;return C.A=rp,e}function Wl(){ze=4,Na||(ne&4194048)!==ne&&bt.current!==null||(Gn=!0),(Ma&134217727)===0&&(un&134217727)===0||Ee===null||Ra(Ee,ne,jt,!1)}function uo(e,t,a){var n=pe;pe|=2;var i=td(),u=ad();(Ee!==e||ne!==t)&&(Kl=null,Vn(e,t)),t=!1;var d=ze;e:do try{if(ye!==0&&te!==null){var m=te,v=wt;switch(ye){case 8:oo(),d=6;break e;case 3:case 2:case 9:case 6:bt.current===null&&(t=!0);var E=ye;if(ye=0,wt=null,Zn(e,m,v,E),a&&Gn){d=0;break e}break;default:E=ye,ye=0,wt=null,Zn(e,m,v,E)}}cp(),d=ze;break}catch(D){If(e,D)}while(!0);return t&&e.shellSuspendCounter++,aa=Ia=null,pe=n,C.H=i,C.A=u,te===null&&(Ee=null,ne=0,pl()),d}function cp(){for(;te!==null;)nd(te)}function op(e,t){var a=pe;pe|=2;var n=td(),i=ad();Ee!==e||ne!==t?(Kl=null,Zl=pt()+500,Vn(e,t)):Gn=ar(e,t);e:do try{if(ye!==0&&te!==null){t=te;var u=wt;t:switch(ye){case 1:ye=0,wt=null,Zn(e,t,u,1);break;case 2:case 9:if(ds(u)){ye=0,wt=null,rd(t);break}t=function(){ye!==2&&ye!==9||Ee!==e||(ye=7),Wt(e)},u.then(t,t);break e;case 3:ye=7;break e;case 4:ye=5;break e;case 7:ds(u)?(ye=0,wt=null,rd(t)):(ye=0,wt=null,Zn(e,t,u,7));break;case 5:var d=null;switch(te.tag){case 26:d=te.memoizedState;case 5:case 27:var m=te;if(d?Qd(d):m.stateNode.complete){ye=0,wt=null;var v=m.sibling;if(v!==null)te=v;else{var E=m.return;E!==null?(te=E,$l(E)):te=null}break t}}ye=0,wt=null,Zn(e,t,u,5);break;case 6:ye=0,wt=null,Zn(e,t,u,6);break;case 8:oo(),ze=6;break e;default:throw Error(o(462))}}up();break}catch(D){If(e,D)}while(!0);return aa=Ia=null,C.H=n,C.A=i,pe=a,te!==null?0:(Ee=null,ne=0,pl(),ze)}function up(){for(;te!==null&&!Mm();)nd(te)}function nd(e){var t=Df(e.alternate,e,da);e.memoizedProps=e.pendingProps,t===null?$l(e):te=t}function rd(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=Sf(a,t,t.pendingProps,t.type,void 0,ne);break;case 11:t=Sf(a,t,t.pendingProps,t.type.render,t.ref,ne);break;case 5:Ec(t);default:Af(a,t),t=te=ts(t,da),t=Df(a,t,da)}e.memoizedProps=e.pendingProps,t===null?$l(e):te=t}function Zn(e,t,a,n){aa=Ia=null,Ec(t),Rn=null,vr=0;var i=t.return;try{if(F_(e,i,t,a,ne)){ze=1,Bl(e,Nt(a,e.current)),te=null;return}}catch(u){if(i!==null)throw te=i,u;ze=1,Bl(e,Nt(a,e.current)),te=null;return}t.flags&32768?(ie||n===1?e=!0:Gn||(ne&536870912)!==0?e=!1:(Na=e=!0,(n===2||n===9||n===3||n===6)&&(n=bt.current,n!==null&&n.tag===13&&(n.flags|=16384))),ld(t,e)):$l(t)}function $l(e){var t=e;do{if((t.flags&32768)!==0){ld(t,Na);return}e=t.return;var a=ep(t.alternate,t,da);if(a!==null){te=a;return}if(t=t.sibling,t!==null){te=t;return}te=t=e}while(t!==null);ze===0&&(ze=5)}function ld(e,t){do{var a=tp(e.alternate,e);if(a!==null){a.flags&=32767,te=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){te=e;return}te=e=a}while(e!==null);ze=6,te=null}function id(e,t,a,n,i,u,d,m,v){e.cancelPendingCommit=null;do Fl();while(Ve!==0);if((pe&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=Fi,Gm(e,a,u,d,m,v),e===Ee&&(te=Ee=null,ne=0),Xn=t,za=e,ma=a,lo=u,io=i,Wf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,mp(Ir,function(){return fd(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=C.T,C.T=null,i=x.p,x.p=2,d=pe,pe|=4;try{ap(e,t,a)}finally{pe=d,x.p=i,C.T=n}}Ve=1,cd(),od(),ud()}}function cd(){if(Ve===1){Ve=0;var e=za,t=Xn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=C.T,C.T=null;var n=x.p;x.p=2;var i=pe;pe|=4;try{Yf(t,e);var u=wo,d=Zu(e.containerInfo),m=u.focusedElem,v=u.selectionRange;if(d!==m&&m&&m.ownerDocument&&Vu(m.ownerDocument.documentElement,m)){if(v!==null&&Zi(m)){var E=v.start,D=v.end;if(D===void 0&&(D=E),"selectionStart"in m)m.selectionStart=E,m.selectionEnd=Math.min(D,m.value.length);else{var O=m.ownerDocument||document,q=O&&O.defaultView||window;if(q.getSelection){var T=q.getSelection(),k=m.textContent.length,K=Math.min(v.start,k),je=v.end===void 0?K:Math.min(v.end,k);!T.extend&&K>je&&(d=je,je=K,K=d);var S=Xu(m,K),b=Xu(m,je);if(S&&b&&(T.rangeCount!==1||T.anchorNode!==S.node||T.anchorOffset!==S.offset||T.focusNode!==b.node||T.focusOffset!==b.offset)){var j=O.createRange();j.setStart(S.node,S.offset),T.removeAllRanges(),K>je?(T.addRange(j),T.extend(b.node,b.offset)):(j.setEnd(b.node,b.offset),T.addRange(j))}}}}for(O=[],T=m;T=T.parentNode;)T.nodeType===1&&O.push({element:T,left:T.scrollLeft,top:T.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<O.length;m++){var A=O[m];A.element.scrollLeft=A.left,A.element.scrollTop=A.top}}ui=!!So,wo=So=null}finally{pe=i,x.p=n,C.T=a}}e.current=t,Ve=2}}function od(){if(Ve===2){Ve=0;var e=za,t=Xn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=C.T,C.T=null;var n=x.p;x.p=2;var i=pe;pe|=4;try{Uf(e,t.alternate,t)}finally{pe=i,x.p=n,C.T=a}}Ve=3}}function ud(){if(Ve===4||Ve===3){Ve=0,xm();var e=za,t=Xn,a=ma,n=Wf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ve=5:(Ve=0,Xn=za=null,sd(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(xa=null),Di(a),t=t.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(tr,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=C.T,i=x.p,x.p=2,C.T=null;try{for(var u=e.onRecoverableError,d=0;d<n.length;d++){var m=n[d];u(m.value,{componentStack:m.stack})}}finally{C.T=t,x.p=i}}(ma&3)!==0&&Fl(),Wt(e),i=e.pendingLanes,(a&261930)!==0&&(i&42)!==0?e===co?Ur++:(Ur=0,co=e):Ur=0,Br(0)}}function sd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gr(t)))}function Fl(){return cd(),od(),ud(),fd()}function fd(){if(Ve!==5)return!1;var e=za,t=lo;lo=0;var a=Di(ma),n=C.T,i=x.p;try{x.p=32>a?32:a,C.T=null,a=io,io=null;var u=za,d=ma;if(Ve=0,Xn=za=null,ma=0,(pe&6)!==0)throw Error(o(331));var m=pe;if(pe|=4,Zf(u.current),Qf(u,u.current,d,a),pe=m,Br(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(tr,u)}catch{}return!0}finally{x.p=i,C.T=n,sd(e,t)}}function dd(e,t,a){t=Nt(a,t),t=kc(e.stateNode,t,2),e=Da(e,t,2),e!==null&&(nr(e,2),Wt(e))}function ve(e,t,a){if(e.tag===3)dd(e,e,a);else for(;t!==null;){if(t.tag===3){dd(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xa===null||!xa.has(n))){e=Nt(a,e),a=mf(2),n=Da(t,a,2),n!==null&&(_f(a,n,t,e),nr(n,2),Wt(n));break}}t=t.return}}function so(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new lp;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(a)||(ao=!0,i.add(a),e=sp.bind(null,e,t,a),t.then(e,e))}function sp(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ee===e&&(ne&a)===a&&(ze===4||ze===3&&(ne&62914560)===ne&&300>pt()-Vl?(pe&2)===0&&Vn(e,0):no|=a,Qn===ne&&(Qn=0)),Wt(e)}function md(e,t){t===0&&(t=iu()),e=$a(e,t),e!==null&&(nr(e,t),Wt(e))}function fp(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),md(e,a)}function dp(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}n!==null&&n.delete(t),md(e,a)}function mp(e,t){return ji(e,t)}var Pl=null,Kn=null,fo=!1,Il=!1,mo=!1,Ua=0;function Wt(e){e!==Kn&&e.next===null&&(Kn===null?Pl=Kn=e:Kn=Kn.next=e),Il=!0,fo||(fo=!0,pp())}function Br(e,t){if(!mo&&Il){mo=!0;do for(var a=!1,n=Pl;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var u=0;else{var d=n.suspendedLanes,m=n.pingedLanes;u=(1<<31-gt(42|e)+1)-1,u&=i&~(d&~m),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,gd(n,u))}else u=ne,u=nl(n,n===Ee?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(u&3)===0||ar(n,u)||(a=!0,gd(n,u));n=n.next}while(a);mo=!1}}function _p(){_d()}function _d(){Il=fo=!1;var e=0;Ua!==0&&qp()&&(e=Ua);for(var t=pt(),a=null,n=Pl;n!==null;){var i=n.next,u=pd(n,t);u===0?(n.next=null,a===null?Pl=i:a.next=i,i===null&&(Kn=a)):(a=n,(e!==0||(u&3)!==0)&&(Il=!0)),n=i}Ve!==0&&Ve!==5||Br(e),Ua!==0&&(Ua=0)}function pd(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var d=31-gt(u),m=1<<d,v=i[d];v===-1?((m&a)===0||(m&n)!==0)&&(i[d]=Ym(m,t)):v<=t&&(e.expiredLanes|=m),u&=~m}if(t=Ee,a=ne,a=nl(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(ye===2||ye===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&Ei(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ar(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&Ei(n),Di(a)){case 2:case 8:a=ru;break;case 32:a=Ir;break;case 268435456:a=lu;break;default:a=Ir}return n=hd.bind(null,e),a=ji(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&Ei(n),e.callbackPriority=2,e.callbackNode=null,2}function hd(e,t){if(Ve!==0&&Ve!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Fl()&&e.callbackNode!==a)return null;var n=ne;return n=nl(e,e===Ee?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Ff(e,n,t),pd(e,pt()),e.callbackNode!=null&&e.callbackNode===a?hd.bind(null,e):null)}function gd(e,t){if(Fl())return null;Ff(e,t,!0)}function pp(){Dp(function(){(pe&6)!==0?ji(nu,_p):_d()})}function _o(){if(Ua===0){var e=Mn;e===0&&(e=el,el<<=1,(el&261888)===0&&(el=256)),Ua=e}return Ua}function yd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:cl(""+e)}function vd(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function hp(e,t,a,n,i){if(t==="submit"&&a&&a.stateNode===i){var u=yd((i[it]||null).action),d=n.submitter;d&&(t=(t=d[it]||null)?yd(t.formAction):d.getAttribute("formAction"),t!==null&&(u=t,d=null));var m=new fl("action","action",null,n,i);e.push({event:m,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ua!==0){var v=d?vd(i,d):new FormData(i);xc(a,{pending:!0,data:v,method:i.method,action:u},null,v)}}else typeof u=="function"&&(m.preventDefault(),v=d?vd(i,d):new FormData(i),xc(a,{pending:!0,data:v,method:i.method,action:u},u,v))},currentTarget:i}]})}}for(var po=0;po<$i.length;po++){var ho=$i[po],gp=ho.toLowerCase(),yp=ho[0].toUpperCase()+ho.slice(1);Qt(gp,"on"+yp)}Qt(Wu,"onAnimationEnd"),Qt($u,"onAnimationIteration"),Qt(Fu,"onAnimationStart"),Qt("dblclick","onDoubleClick"),Qt("focusin","onFocus"),Qt("focusout","onBlur"),Qt(z_,"onTransitionRun"),Qt(R_,"onTransitionStart"),Qt(U_,"onTransitionCancel"),Qt(Pu,"onTransitionEnd"),yn("onMouseEnter",["mouseout","mouseover"]),yn("onMouseLeave",["mouseout","mouseover"]),yn("onPointerEnter",["pointerout","pointerover"]),yn("onPointerLeave",["pointerout","pointerover"]),Za("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Za("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Za("onBeforeInput",["compositionend","keypress","textInput","paste"]),Za("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Za("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Za("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hr));function bd(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],i=n.event;n=n.listeners;e:{var u=void 0;if(t)for(var d=n.length-1;0<=d;d--){var m=n[d],v=m.instance,E=m.currentTarget;if(m=m.listener,v!==u&&i.isPropagationStopped())break e;u=m,i.currentTarget=E;try{u(i)}catch(D){_l(D)}i.currentTarget=null,u=v}else for(d=0;d<n.length;d++){if(m=n[d],v=m.instance,E=m.currentTarget,m=m.listener,v!==u&&i.isPropagationStopped())break e;u=m,i.currentTarget=E;try{u(i)}catch(D){_l(D)}i.currentTarget=null,u=v}}}}function ae(e,t){var a=t[Ci];a===void 0&&(a=t[Ci]=new Set);var n=e+"__bubble";a.has(n)||(Sd(t,e,2,!1),a.add(n))}function go(e,t,a){var n=0;t&&(n|=4),Sd(a,e,n,t)}var ei="_reactListening"+Math.random().toString(36).slice(2);function yo(e){if(!e[ei]){e[ei]=!0,mu.forEach(function(a){a!=="selectionchange"&&(vp.has(a)||go(a,!1,e),go(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ei]||(t[ei]=!0,go("selectionchange",!1,t))}}function Sd(e,t,a,n){switch($d(t)){case 2:var i=Kp;break;case 8:i=Jp;break;default:i=xo}a=i.bind(null,t,a,e),i=void 0,!Bi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,a,{capture:!0,passive:i}):e.addEventListener(t,a,!0):i!==void 0?e.addEventListener(t,a,{passive:i}):e.addEventListener(t,a,!1)}function vo(e,t,a,n,i){var u=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var m=n.stateNode.containerInfo;if(m===i)break;if(d===4)for(d=n.return;d!==null;){var v=d.tag;if((v===3||v===4)&&d.stateNode.containerInfo===i)return;d=d.return}for(;m!==null;){if(d=pn(m),d===null)return;if(v=d.tag,v===5||v===6||v===26||v===27){n=u=d;continue e}m=m.parentNode}}n=n.return}qu(function(){var E=u,D=Ri(a),O=[];e:{var q=Iu.get(e);if(q!==void 0){var T=fl,k=e;switch(e){case"keypress":if(ul(a)===0)break e;case"keydown":case"keyup":T=d_;break;case"focusin":k="focus",T=Yi;break;case"focusout":k="blur",T=Yi;break;case"beforeblur":case"afterblur":T=Yi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Cu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=e_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=p_;break;case Wu:case $u:case Fu:T=n_;break;case Pu:T=g_;break;case"scroll":case"scrollend":T=Pm;break;case"wheel":T=v_;break;case"copy":case"cut":case"paste":T=l_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Ou;break;case"toggle":case"beforetoggle":T=S_}var K=(t&4)!==0,je=!K&&(e==="scroll"||e==="scrollend"),S=K?q!==null?q+"Capture":null:q;K=[];for(var b=E,j;b!==null;){var A=b;if(j=A.stateNode,A=A.tag,A!==5&&A!==26&&A!==27||j===null||S===null||(A=ir(b,S),A!=null&&K.push(kr(b,A,j))),je)break;b=b.return}0<K.length&&(q=new T(q,k,null,a,D),O.push({event:q,listeners:K}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",q&&a!==zi&&(k=a.relatedTarget||a.fromElement)&&(pn(k)||k[_n]))break e;if((T||q)&&(q=D.window===D?D:(q=D.ownerDocument)?q.defaultView||q.parentWindow:window,T?(k=a.relatedTarget||a.toElement,T=E,k=k?pn(k):null,k!==null&&(je=f(k),K=k.tag,k!==je||K!==5&&K!==27&&K!==6)&&(k=null)):(T=null,k=E),T!==k)){if(K=Cu,A="onMouseLeave",S="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(K=Ou,A="onPointerLeave",S="onPointerEnter",b="pointer"),je=T==null?q:lr(T),j=k==null?q:lr(k),q=new K(A,b+"leave",T,a,D),q.target=je,q.relatedTarget=j,A=null,pn(D)===E&&(K=new K(S,b+"enter",k,a,D),K.target=j,K.relatedTarget=je,A=K),je=A,T&&k)t:{for(K=bp,S=T,b=k,j=0,A=S;A;A=K(A))j++;A=0;for(var X=b;X;X=K(X))A++;for(;0<j-A;)S=K(S),j--;for(;0<A-j;)b=K(b),A--;for(;j--;){if(S===b||b!==null&&S===b.alternate){K=S;break t}S=K(S),b=K(b)}K=null}else K=null;T!==null&&wd(O,q,T,K,!1),k!==null&&je!==null&&wd(O,je,k,K,!0)}}e:{if(q=E?lr(E):window,T=q.nodeName&&q.nodeName.toLowerCase(),T==="select"||T==="input"&&q.type==="file")var fe=Hu;else if(Uu(q))if(ku)fe=N_;else{fe=A_;var Y=C_}else T=q.nodeName,!T||T.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?E&&xi(E.elementType)&&(fe=Hu):fe=O_;if(fe&&(fe=fe(e,E))){Bu(O,fe,a,D);break e}Y&&Y(e,q,E),e==="focusout"&&E&&q.type==="number"&&E.memoizedProps.value!=null&&Mi(q,"number",q.value)}switch(Y=E?lr(E):window,e){case"focusin":(Uu(Y)||Y.contentEditable==="true")&&(En=Y,Ki=E,_r=null);break;case"focusout":_r=Ki=En=null;break;case"mousedown":Ji=!0;break;case"contextmenu":case"mouseup":case"dragend":Ji=!1,Ku(O,a,D);break;case"selectionchange":if(x_)break;case"keydown":case"keyup":Ku(O,a,D)}var P;if(Qi)e:{switch(e){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else jn?zu(e,a)&&(re="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(re="onCompositionStart");re&&(Nu&&a.locale!=="ko"&&(jn||re!=="onCompositionStart"?re==="onCompositionEnd"&&jn&&(P=Tu()):(ba=D,Hi="value"in ba?ba.value:ba.textContent,jn=!0)),Y=ti(E,re),0<Y.length&&(re=new Au(re,e,null,a,D),O.push({event:re,listeners:Y}),P?re.data=P:(P=Ru(a),P!==null&&(re.data=P)))),(P=j_?E_(e,a):q_(e,a))&&(re=ti(E,"onBeforeInput"),0<re.length&&(Y=new Au("onBeforeInput","beforeinput",null,a,D),O.push({event:Y,listeners:re}),Y.data=P)),hp(O,e,E,a,D)}bd(O,t)})}function kr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ti(e,t){for(var a=t+"Capture",n=[];e!==null;){var i=e,u=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||u===null||(i=ir(e,a),i!=null&&n.unshift(kr(e,i,u)),i=ir(e,t),i!=null&&n.push(kr(e,i,u))),e.tag===3)return n;e=e.return}return[]}function bp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function wd(e,t,a,n,i){for(var u=t._reactName,d=[];a!==null&&a!==n;){var m=a,v=m.alternate,E=m.stateNode;if(m=m.tag,v!==null&&v===n)break;m!==5&&m!==26&&m!==27||E===null||(v=E,i?(E=ir(a,u),E!=null&&d.unshift(kr(a,E,v))):i||(E=ir(a,u),E!=null&&d.push(kr(a,E,v)))),a=a.return}d.length!==0&&e.push({event:t,listeners:d})}var Sp=/\r\n?/g,wp=/\u0000|\uFFFD/g;function jd(e){return(typeof e=="string"?e:""+e).replace(Sp,`
`).replace(wp,"")}function Ed(e,t){return t=jd(t),jd(e)===t}function we(e,t,a,n,i,u){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||bn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&bn(e,""+n);break;case"className":ll(e,"class",n);break;case"tabIndex":ll(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":ll(e,a,n);break;case"style":ju(e,n,u);break;case"data":if(t!=="object"){ll(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=cl(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&we(e,t,"name",i.name,i,null),we(e,t,"formEncType",i.formEncType,i,null),we(e,t,"formMethod",i.formMethod,i,null),we(e,t,"formTarget",i.formTarget,i,null)):(we(e,t,"encType",i.encType,i,null),we(e,t,"method",i.method,i,null),we(e,t,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=cl(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=Pt);break;case"onScroll":n!=null&&ae("scroll",e);break;case"onScrollEnd":n!=null&&ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=cl(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":ae("beforetoggle",e),ae("toggle",e),rl(e,"popover",n);break;case"xlinkActuate":Ft(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ft(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ft(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ft(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ft(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ft(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":rl(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$m.get(a)||a,rl(e,a,n))}}function bo(e,t,a,n,i,u){switch(a){case"style":ju(e,n,u);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(o(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(o(60));e.innerHTML=a}}break;case"children":typeof n=="string"?bn(e,n):(typeof n=="number"||typeof n=="bigint")&&bn(e,""+n);break;case"onScroll":n!=null&&ae("scroll",e);break;case"onScrollEnd":n!=null&&ae("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_u.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),t=a.slice(2,i?a.length-7:void 0),u=e[it]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,i),typeof n=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,i);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):rl(e,a,n)}}}function tt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ae("error",e),ae("load",e);var n=!1,i=!1,u;for(u in a)if(a.hasOwnProperty(u)){var d=a[u];if(d!=null)switch(u){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:we(e,t,u,d,a,null)}}i&&we(e,t,"srcSet",a.srcSet,a,null),n&&we(e,t,"src",a.src,a,null);return;case"input":ae("invalid",e);var m=u=d=i=null,v=null,E=null;for(n in a)if(a.hasOwnProperty(n)){var D=a[n];if(D!=null)switch(n){case"name":i=D;break;case"type":d=D;break;case"checked":v=D;break;case"defaultChecked":E=D;break;case"value":u=D;break;case"defaultValue":m=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(o(137,t));break;default:we(e,t,n,D,a,null)}}vu(e,u,m,v,E,d,i,!1);return;case"select":ae("invalid",e),n=d=u=null;for(i in a)if(a.hasOwnProperty(i)&&(m=a[i],m!=null))switch(i){case"value":u=m;break;case"defaultValue":d=m;break;case"multiple":n=m;default:we(e,t,i,m,a,null)}t=u,a=d,e.multiple=!!n,t!=null?vn(e,!!n,t,!1):a!=null&&vn(e,!!n,a,!0);return;case"textarea":ae("invalid",e),u=i=n=null;for(d in a)if(a.hasOwnProperty(d)&&(m=a[d],m!=null))switch(d){case"value":n=m;break;case"defaultValue":i=m;break;case"children":u=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(o(91));break;default:we(e,t,d,m,a,null)}Su(e,n,i,u);return;case"option":for(v in a)if(a.hasOwnProperty(v)&&(n=a[v],n!=null))switch(v){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:we(e,t,v,n,a,null)}return;case"dialog":ae("beforetoggle",e),ae("toggle",e),ae("cancel",e),ae("close",e);break;case"iframe":case"object":ae("load",e);break;case"video":case"audio":for(n=0;n<Hr.length;n++)ae(Hr[n],e);break;case"image":ae("error",e),ae("load",e);break;case"details":ae("toggle",e);break;case"embed":case"source":case"link":ae("error",e),ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in a)if(a.hasOwnProperty(E)&&(n=a[E],n!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:we(e,t,E,n,a,null)}return;default:if(xi(t)){for(D in a)a.hasOwnProperty(D)&&(n=a[D],n!==void 0&&bo(e,t,D,n,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(n=a[m],n!=null&&we(e,t,m,n,a,null))}function jp(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,u=null,d=null,m=null,v=null,E=null,D=null;for(T in a){var O=a[T];if(a.hasOwnProperty(T)&&O!=null)switch(T){case"checked":break;case"value":break;case"defaultValue":v=O;default:n.hasOwnProperty(T)||we(e,t,T,null,n,O)}}for(var q in n){var T=n[q];if(O=a[q],n.hasOwnProperty(q)&&(T!=null||O!=null))switch(q){case"type":u=T;break;case"name":i=T;break;case"checked":E=T;break;case"defaultChecked":D=T;break;case"value":d=T;break;case"defaultValue":m=T;break;case"children":case"dangerouslySetInnerHTML":if(T!=null)throw Error(o(137,t));break;default:T!==O&&we(e,t,q,T,n,O)}}Ni(e,d,m,v,E,D,u,i);return;case"select":T=d=m=q=null;for(u in a)if(v=a[u],a.hasOwnProperty(u)&&v!=null)switch(u){case"value":break;case"multiple":T=v;default:n.hasOwnProperty(u)||we(e,t,u,null,n,v)}for(i in n)if(u=n[i],v=a[i],n.hasOwnProperty(i)&&(u!=null||v!=null))switch(i){case"value":q=u;break;case"defaultValue":m=u;break;case"multiple":d=u;default:u!==v&&we(e,t,i,u,n,v)}t=m,a=d,n=T,q!=null?vn(e,!!a,q,!1):!!n!=!!a&&(t!=null?vn(e,!!a,t,!0):vn(e,!!a,a?[]:"",!1));return;case"textarea":T=q=null;for(m in a)if(i=a[m],a.hasOwnProperty(m)&&i!=null&&!n.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:we(e,t,m,null,n,i)}for(d in n)if(i=n[d],u=a[d],n.hasOwnProperty(d)&&(i!=null||u!=null))switch(d){case"value":q=i;break;case"defaultValue":T=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(o(91));break;default:i!==u&&we(e,t,d,i,n,u)}bu(e,q,T);return;case"option":for(var k in a)if(q=a[k],a.hasOwnProperty(k)&&q!=null&&!n.hasOwnProperty(k))switch(k){case"selected":e.selected=!1;break;default:we(e,t,k,null,n,q)}for(v in n)if(q=n[v],T=a[v],n.hasOwnProperty(v)&&q!==T&&(q!=null||T!=null))switch(v){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:we(e,t,v,q,n,T)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var K in a)q=a[K],a.hasOwnProperty(K)&&q!=null&&!n.hasOwnProperty(K)&&we(e,t,K,null,n,q);for(E in n)if(q=n[E],T=a[E],n.hasOwnProperty(E)&&q!==T&&(q!=null||T!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(o(137,t));break;default:we(e,t,E,q,n,T)}return;default:if(xi(t)){for(var je in a)q=a[je],a.hasOwnProperty(je)&&q!==void 0&&!n.hasOwnProperty(je)&&bo(e,t,je,void 0,n,q);for(D in n)q=n[D],T=a[D],!n.hasOwnProperty(D)||q===T||q===void 0&&T===void 0||bo(e,t,D,q,n,T);return}}for(var S in a)q=a[S],a.hasOwnProperty(S)&&q!=null&&!n.hasOwnProperty(S)&&we(e,t,S,null,n,q);for(O in n)q=n[O],T=a[O],!n.hasOwnProperty(O)||q===T||q==null&&T==null||we(e,t,O,q,n,T)}function qd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ep(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var i=a[n],u=i.transferSize,d=i.initiatorType,m=i.duration;if(u&&m&&qd(d)){for(d=0,m=i.responseEnd,n+=1;n<a.length;n++){var v=a[n],E=v.startTime;if(E>m)break;var D=v.transferSize,O=v.initiatorType;D&&qd(O)&&(v=v.responseEnd,d+=D*(v<m?1:(m-E)/(v-E)))}if(--n,t+=8*(u+d)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var So=null,wo=null;function ai(e){return e.nodeType===9?e:e.ownerDocument}function Td(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dd(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function jo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Eo=null;function qp(){var e=window.event;return e&&e.type==="popstate"?e===Eo?!1:(Eo=e,!0):(Eo=null,!1)}var Cd=typeof setTimeout=="function"?setTimeout:void 0,Tp=typeof clearTimeout=="function"?clearTimeout:void 0,Ad=typeof Promise=="function"?Promise:void 0,Dp=typeof queueMicrotask=="function"?queueMicrotask:typeof Ad<"u"?function(e){return Ad.resolve(null).then(e).catch(Cp)}:Cd;function Cp(e){setTimeout(function(){throw e})}function Ba(e){return e==="head"}function Od(e,t){var a=t,n=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(i),Fn(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Lr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Lr(a);for(var u=a.firstChild;u;){var d=u.nextSibling,m=u.nodeName;u[rr]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=d}}else a==="body"&&Lr(e.ownerDocument.body);a=i}while(a);Fn(t)}function Nd(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function qo(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":qo(a),Ai(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Ap(e,t,a,n){for(;e.nodeType===1;){var i=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[rr])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Ut(e.nextSibling),e===null)break}return null}function Op(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ut(e.nextSibling),e===null))return null;return e}function Md(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ut(e.nextSibling),e===null))return null;return e}function To(e){return e.data==="$?"||e.data==="$~"}function Do(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Np(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Ut(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Co=null;function xd(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Ut(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function zd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Rd(e,t,a){switch(t=ai(a),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Lr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ai(e)}var Bt=new Map,Ud=new Set;function ni(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _a=x.d;x.d={f:Mp,r:xp,D:zp,C:Rp,L:Up,m:Bp,X:kp,S:Hp,M:Lp};function Mp(){var e=_a.f(),t=Jl();return e||t}function xp(e){var t=hn(e);t!==null&&t.tag===5&&t.type==="form"?Ps(t):_a.r(e)}var Jn=typeof document>"u"?null:document;function Bd(e,t,a){var n=Jn;if(n&&typeof t=="string"&&t){var i=At(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),Ud.has(i)||(Ud.add(i),e={rel:e,crossOrigin:a,href:t},n.querySelector(i)===null&&(t=n.createElement("link"),tt(t,"link",e),Ze(t),n.head.appendChild(t)))}}function zp(e){_a.D(e),Bd("dns-prefetch",e,null)}function Rp(e,t){_a.C(e,t),Bd("preconnect",e,t)}function Up(e,t,a){_a.L(e,t,a);var n=Jn;if(n&&e&&t){var i='link[rel="preload"][as="'+At(t)+'"]';t==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+At(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+At(a.imageSizes)+'"]')):i+='[href="'+At(e)+'"]';var u=i;switch(t){case"style":u=Wn(e);break;case"script":u=$n(e)}Bt.has(u)||(e=M({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Bt.set(u,e),n.querySelector(i)!==null||t==="style"&&n.querySelector(Yr(u))||t==="script"&&n.querySelector(Gr(u))||(t=n.createElement("link"),tt(t,"link",e),Ze(t),n.head.appendChild(t)))}}function Bp(e,t){_a.m(e,t);var a=Jn;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+At(n)+'"][href="'+At(e)+'"]',u=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=$n(e)}if(!Bt.has(u)&&(e=M({rel:"modulepreload",href:e},t),Bt.set(u,e),a.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Gr(u)))return}n=a.createElement("link"),tt(n,"link",e),Ze(n),a.head.appendChild(n)}}}function Hp(e,t,a){_a.S(e,t,a);var n=Jn;if(n&&e){var i=gn(n).hoistableStyles,u=Wn(e);t=t||"default";var d=i.get(u);if(!d){var m={loading:0,preload:null};if(d=n.querySelector(Yr(u)))m.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Bt.get(u))&&Ao(e,a);var v=d=n.createElement("link");Ze(v),tt(v,"link",e),v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),v.addEventListener("load",function(){m.loading|=1}),v.addEventListener("error",function(){m.loading|=2}),m.loading|=4,ri(d,t,n)}d={type:"stylesheet",instance:d,count:1,state:m},i.set(u,d)}}}function kp(e,t){_a.X(e,t);var a=Jn;if(a&&e){var n=gn(a).hoistableScripts,i=$n(e),u=n.get(i);u||(u=a.querySelector(Gr(i)),u||(e=M({src:e,async:!0},t),(t=Bt.get(i))&&Oo(e,t),u=a.createElement("script"),Ze(u),tt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(i,u))}}function Lp(e,t){_a.M(e,t);var a=Jn;if(a&&e){var n=gn(a).hoistableScripts,i=$n(e),u=n.get(i);u||(u=a.querySelector(Gr(i)),u||(e=M({src:e,async:!0,type:"module"},t),(t=Bt.get(i))&&Oo(e,t),u=a.createElement("script"),Ze(u),tt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(i,u))}}function Hd(e,t,a,n){var i=(i=oe.current)?ni(i):null;if(!i)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Wn(a.href),a=gn(i).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Wn(a.href);var u=gn(i).hoistableStyles,d=u.get(e);if(d||(i=i.ownerDocument||i,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=i.querySelector(Yr(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Bt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bt.set(e,a),u||Yp(i,e,a,d.state))),t&&n===null)throw Error(o(528,""));return d}if(t&&n!==null)throw Error(o(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=$n(a),a=gn(i).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Wn(e){return'href="'+At(e)+'"'}function Yr(e){return'link[rel="stylesheet"]['+e+"]"}function kd(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function Yp(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),tt(t,"link",a),Ze(t),e.head.appendChild(t))}function $n(e){return'[src="'+At(e)+'"]'}function Gr(e){return"script[async]"+e}function Ld(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+At(a.href)+'"]');if(n)return t.instance=n,Ze(n),n;var i=M({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Ze(n),tt(n,"style",i),ri(n,a.precedence,e),t.instance=n;case"stylesheet":i=Wn(a.href);var u=e.querySelector(Yr(i));if(u)return t.state.loading|=4,t.instance=u,Ze(u),u;n=kd(a),(i=Bt.get(i))&&Ao(n,i),u=(e.ownerDocument||e).createElement("link"),Ze(u);var d=u;return d._p=new Promise(function(m,v){d.onload=m,d.onerror=v}),tt(u,"link",n),t.state.loading|=4,ri(u,a.precedence,e),t.instance=u;case"script":return u=$n(a.src),(i=e.querySelector(Gr(u)))?(t.instance=i,Ze(i),i):(n=a,(i=Bt.get(u))&&(n=M({},a),Oo(n,i)),e=e.ownerDocument||e,i=e.createElement("script"),Ze(i),tt(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ri(n,a.precedence,e));return t.instance}function ri(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,u=i,d=0;d<n.length;d++){var m=n[d];if(m.dataset.precedence===t)u=m;else if(u!==i)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Ao(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Oo(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var li=null;function Yd(e,t,a){if(li===null){var n=new Map,i=li=new Map;i.set(a,n)}else i=li,n=i.get(a),n||(n=new Map,i.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),i=0;i<a.length;i++){var u=a[i];if(!(u[rr]||u[Fe]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var d=u.getAttribute(t)||"";d=e+d;var m=n.get(d);m?m.push(u):n.set(d,[u])}}return n}function Gd(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Gp(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Qd(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Qp(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=Wn(n.href),u=t.querySelector(Yr(i));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ii.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,Ze(u);return}u=t.ownerDocument||t,n=kd(n),(i=Bt.get(i))&&Ao(n,i),u=u.createElement("link"),Ze(u);var d=u;d._p=new Promise(function(m,v){d.onload=m,d.onerror=v}),tt(u,"link",n),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ii.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var No=0;function Xp(e,t){return e.stylesheets&&e.count===0&&oi(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&oi(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&No===0&&(No=62500*Ep());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&oi(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>No?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(i)}}:null}function ii(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)oi(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ci=null;function oi(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ci=new Map,t.forEach(Vp,e),ci=null,ii.call(e))}function Vp(e,t){if(!(t.state.loading&4)){var a=ci.get(e);if(a)var n=a.get(null);else{a=new Map,ci.set(e,a);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<i.length;u++){var d=i[u];(d.nodeName==="LINK"||d.getAttribute("media")!=="not all")&&(a.set(d.dataset.precedence,d),n=d)}n&&a.set(null,n)}i=t.instance,d=i.getAttribute("data-precedence"),u=a.get(d)||n,u===n&&a.set(null,i),a.set(d,i),this.count++,n=ii.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),u?u.parentNode.insertBefore(i,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Qr={$$typeof:F,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Zp(e,t,a,n,i,u,d,m,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=u,this.onRecoverableError=d,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Xd(e,t,a,n,i,u,d,m,v,E,D,O){return e=new Zp(e,t,a,d,v,E,D,O,m),t=1,u===!0&&(t|=24),u=vt(3,null,null,t),e.current=u,u.stateNode=e,t=uc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:n,isDehydrated:a,cache:t},mc(u),e}function Vd(e){return e?(e=Dn,e):Dn}function Zd(e,t,a,n,i,u){i=Vd(i),n.context===null?n.context=i:n.pendingContext=i,n=Ta(t),n.payload={element:a},u=u===void 0?null:u,u!==null&&(n.callback=u),a=Da(e,n,t),a!==null&&(dt(a,e,t),Sr(a,e,t))}function Kd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Mo(e,t){Kd(e,t),(e=e.alternate)&&Kd(e,t)}function Jd(e){if(e.tag===13||e.tag===31){var t=$a(e,67108864);t!==null&&dt(t,e,67108864),Mo(e,67108864)}}function Wd(e){if(e.tag===13||e.tag===31){var t=Et();t=Ti(t);var a=$a(e,t);a!==null&&dt(a,e,t),Mo(e,t)}}var ui=!0;function Kp(e,t,a,n){var i=C.T;C.T=null;var u=x.p;try{x.p=2,xo(e,t,a,n)}finally{x.p=u,C.T=i}}function Jp(e,t,a,n){var i=C.T;C.T=null;var u=x.p;try{x.p=8,xo(e,t,a,n)}finally{x.p=u,C.T=i}}function xo(e,t,a,n){if(ui){var i=zo(n);if(i===null)vo(e,t,n,si,a),Fd(e,n);else if($p(i,e,t,a,n))n.stopPropagation();else if(Fd(e,n),t&4&&-1<Wp.indexOf(e)){for(;i!==null;){var u=hn(i);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var d=Va(u.pendingLanes);if(d!==0){var m=u;for(m.pendingLanes|=2,m.entangledLanes|=2;d;){var v=1<<31-gt(d);m.entanglements[1]|=v,d&=~v}Wt(u),(pe&6)===0&&(Zl=pt()+500,Br(0))}}break;case 31:case 13:m=$a(u,2),m!==null&&dt(m,u,2),Jl(),Mo(u,2)}if(u=zo(n),u===null&&vo(e,t,n,si,a),u===i)break;i=u}i!==null&&n.stopPropagation()}else vo(e,t,n,null,a)}}function zo(e){return e=Ri(e),Ro(e)}var si=null;function Ro(e){if(si=null,e=pn(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=p(t),e!==null)return e;e=null}else if(a===31){if(e=y(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return si=e,null}function $d(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zm()){case nu:return 2;case ru:return 8;case Ir:case Rm:return 32;case lu:return 268435456;default:return 32}default:return 32}}var Uo=!1,Ha=null,ka=null,La=null,Xr=new Map,Vr=new Map,Ya=[],Wp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fd(e,t){switch(e){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":ka=null;break;case"mouseover":case"mouseout":La=null;break;case"pointerover":case"pointerout":Xr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(t.pointerId)}}function Zr(e,t,a,n,i,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:u,targetContainers:[i]},t!==null&&(t=hn(t),t!==null&&Jd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function $p(e,t,a,n,i){switch(t){case"focusin":return Ha=Zr(Ha,e,t,a,n,i),!0;case"dragenter":return ka=Zr(ka,e,t,a,n,i),!0;case"mouseover":return La=Zr(La,e,t,a,n,i),!0;case"pointerover":var u=i.pointerId;return Xr.set(u,Zr(Xr.get(u)||null,e,t,a,n,i)),!0;case"gotpointercapture":return u=i.pointerId,Vr.set(u,Zr(Vr.get(u)||null,e,t,a,n,i)),!0}return!1}function Pd(e){var t=pn(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=p(a),t!==null){e.blockedOn=t,fu(e.priority,function(){Wd(a)});return}}else if(t===31){if(t=y(a),t!==null){e.blockedOn=t,fu(e.priority,function(){Wd(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=zo(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);zi=n,a.target.dispatchEvent(n),zi=null}else return t=hn(a),t!==null&&Jd(t),e.blockedOn=a,!1;t.shift()}return!0}function Id(e,t,a){fi(e)&&a.delete(t)}function Fp(){Uo=!1,Ha!==null&&fi(Ha)&&(Ha=null),ka!==null&&fi(ka)&&(ka=null),La!==null&&fi(La)&&(La=null),Xr.forEach(Id),Vr.forEach(Id)}function di(e,t){e.blockedOn===t&&(e.blockedOn=null,Uo||(Uo=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fp)))}var mi=null;function em(e){mi!==e&&(mi=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){mi===e&&(mi=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],i=e[t+2];if(typeof n!="function"){if(Ro(n||a)===null)continue;break}var u=hn(a);u!==null&&(e.splice(t,3),t-=3,xc(u,{pending:!0,data:i,method:a.method,action:n},n,i))}}))}function Fn(e){function t(v){return di(v,e)}Ha!==null&&di(Ha,e),ka!==null&&di(ka,e),La!==null&&di(La,e),Xr.forEach(t),Vr.forEach(t);for(var a=0;a<Ya.length;a++){var n=Ya[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ya.length&&(a=Ya[0],a.blockedOn===null);)Pd(a),a.blockedOn===null&&Ya.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var i=a[n],u=a[n+1],d=i[it]||null;if(typeof u=="function")d||em(a);else if(d){var m=null;if(u&&u.hasAttribute("formAction")){if(i=u,d=u[it]||null)m=d.formAction;else if(Ro(i)!==null)continue}else m=d.action;typeof m=="function"?a[n+1]=m:(a.splice(n,3),n-=3),em(a)}}}function tm(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(d){return i=d})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function Bo(e){this._internalRoot=e}_i.prototype.render=Bo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var a=t.current,n=Et();Zd(a,n,e,t,null,null)},_i.prototype.unmount=Bo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),Jl(),t[_n]=null}};function _i(e){this._internalRoot=e}_i.prototype.unstable_scheduleHydration=function(e){if(e){var t=su();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ya.length&&t!==0&&t<Ya[a].priority;a++);Ya.splice(a,0,e),a===0&&Pd(e)}};var am=l.version;if(am!=="19.2.0")throw Error(o(527,am,"19.2.0"));x.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=N(t),e=e!==null?B(e):null,e=e===null?null:e.stateNode,e};var Pp={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:C,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pi.isDisabled&&pi.supportsFiber)try{tr=pi.inject(Pp),ht=pi}catch{}}return Jr.createRoot=function(e,t){if(!s(e))throw Error(o(299));var a=!1,n="",i=uf,u=sf,d=ff;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=Xd(e,1,!1,null,null,a,n,null,i,u,d,tm),e[_n]=t.current,yo(e),new Bo(t)},Jr.hydrateRoot=function(e,t,a){if(!s(e))throw Error(o(299));var n=!1,i="",u=uf,d=sf,m=ff,v=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.formState!==void 0&&(v=a.formState)),t=Xd(e,1,!0,t,a??null,n,i,v,u,d,m,tm),t.context=Vd(null),a=t.current,n=Et(),n=Ti(n),i=Ta(n),i.callback=null,Da(a,i,n),a=n,t.current.lanes=a,nr(t,a),Wt(t),e[_n]=t.current,yo(e),new _i(t)},Jr.version="19.2.0",Jr}var om;function ch(){if(om)return ko.exports;om=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(l){console.error(l)}}return r(),ko.exports=ih(),ko.exports}var oh=ch();const uh=vm(oh),sh="fieldsync-offline",fh=2,me={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let dn=null;const pa=()=>new Promise((r,l)=>{if(dn){r(dn);return}const c=indexedDB.open(sh,fh);c.onerror=()=>{console.error("Failed to open offline database"),l(c.error)},c.onsuccess=()=>{dn=c.result,r(dn)},c.onupgradeneeded=o=>{const s=o.target.result;if(s.objectStoreNames.contains(me.PROJECTS)||s.createObjectStore(me.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),s.objectStoreNames.contains(me.AREAS)||s.createObjectStore(me.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(me.CREW_CHECKINS)||s.createObjectStore(me.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(me.TM_TICKETS)||s.createObjectStore(me.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(me.DAILY_REPORTS)||s.createObjectStore(me.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(me.MESSAGES)||s.createObjectStore(me.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!s.objectStoreNames.contains(me.PENDING_ACTIONS)){const f=s.createObjectStore(me.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});f.createIndex("type","type",{unique:!1}),f.createIndex("created_at","created_at",{unique:!1})}s.objectStoreNames.contains(me.CACHED_DATA)||s.createObjectStore(me.CACHED_DATA,{keyPath:"key"})}}),mn=(r,l="readonly")=>{if(!dn)throw new Error("Database not initialized");return dn.transaction(r,l).objectStore(r)},Fr=async(r,l)=>(await pa(),new Promise((c,o)=>{const f=mn(r,"readwrite").put(l);f.onsuccess=()=>c(f.result),f.onerror=()=>o(f.error)})),wm=async(r,l)=>(await pa(),new Promise((c,o)=>{const s=dn.transaction(r,"readwrite"),f=s.objectStore(r);l.forEach(p=>f.put(p)),s.oncomplete=()=>c(),s.onerror=()=>o(s.error)})),dh=async(r,l)=>(await pa(),new Promise((c,o)=>{const f=mn(r).get(l);f.onsuccess=()=>c(f.result),f.onerror=()=>o(f.error)})),jm=async r=>(await pa(),new Promise((l,c)=>{const s=mn(r).getAll();s.onsuccess=()=>l(s.result||[]),s.onerror=()=>c(s.error)})),Fo=async(r,l,c)=>(await pa(),new Promise((o,s)=>{const y=mn(r).index(l).getAll(c);y.onsuccess=()=>o(y.result||[]),y.onerror=()=>s(y.error)})),mh=async(r,l)=>(await pa(),new Promise((c,o)=>{const f=mn(r,"readwrite").delete(l);f.onsuccess=()=>c(),f.onerror=()=>o(f.error)})),Je={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},Ht=async(r,l,c={})=>{await pa();const o={type:r,payload:l,metadata:c,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((s,f)=>{const y=mn(me.PENDING_ACTIONS,"readwrite").add(o);y.onsuccess=()=>{s(y.result)},y.onerror=()=>f(y.error)})},Em=async()=>jm(me.PENDING_ACTIONS),bi=async()=>(await Em()).length,_h=async r=>mh(me.PENDING_ACTIONS,r),ph=async(r,l)=>(await pa(),new Promise((c,o)=>{const s=mn(me.PENDING_ACTIONS,"readwrite"),f=s.get(r);f.onsuccess=()=>{const p=f.result;if(p){const y={...p,...l},w=s.put(y);w.onsuccess=()=>c(y),w.onerror=()=>o(w.error)}else o(new Error("Action not found"))},f.onerror=()=>o(f.error)})),hh=async r=>wm(me.PROJECTS,r),um=async r=>r?Fo(me.PROJECTS,"company_id",r):jm(me.PROJECTS),gh=async r=>wm(me.AREAS,r),sm=async r=>Fo(me.AREAS,"project_id",r),Go=async(r,l)=>{const c=await dh(me.AREAS,r);return c&&(c.status=l,c.updated_at=new Date().toISOString(),await Fr(me.AREAS,c)),c},Qo=async r=>Fr(me.CREW_CHECKINS,r),fm=async r=>Fr(me.TM_TICKETS,r),qt=()=>{const r=new Uint8Array(6);crypto.getRandomValues(r);const l=Array.from(r,c=>c.toString(36)).join("");return`temp_${Date.now()}_${l}`},Pn=async r=>Fr(me.DAILY_REPORTS,r),yh=async(r,l)=>(await Fo(me.DAILY_REPORTS,"project_id",r)).find(o=>o.report_date===l)||null,dm=async r=>Fr(me.MESSAGES,r);let Po=typeof navigator<"u"?navigator.onLine:!0;const Zo=new Set,Io=r=>(Zo.add(r),()=>Zo.delete(r)),kt=()=>Po,mm=r=>{Po=r,Zo.forEach(l=>l(r))};typeof window<"u"&&(window.addEventListener("online",()=>{mm(!0)}),window.addEventListener("offline",()=>{mm(!1)}));let Xo=!1;const qm=async r=>{if(Xo||!Po)return{synced:0,failed:0};Xo=!0;const l={synced:0,failed:0};try{const c=await Em();for(const o of c)try{await vh(o,r),await _h(o.id),l.synced++}catch(s){console.error(`Failed to sync action ${o.type}:`,s),l.failed++,await ph(o.id,{attempts:(o.attempts||0)+1,last_error:s.message,last_attempt:new Date().toISOString()})}}finally{Xo=!1}return l},vh=async(r,l)=>{const{type:c,payload:o}=r;switch(c){case Je.UPDATE_AREA_STATUS:return l.updateAreaStatus(o.areaId,o.status);case Je.CREATE_TM_TICKET:const s=await l.createTMTicket(o.ticket);return o.workers?.length>0&&await l.addTMWorkers(s.id,o.workers),o.items?.length>0&&await l.addTMItems(s.id,o.items),s;case Je.SAVE_CREW_CHECKIN:return l.saveCrewCheckin(o.projectId,o.workers,o.checkInDate);case Je.SUBMIT_DAILY_REPORT:return await l.saveDailyReport(o.projectId,o.reportData),l.submitDailyReport(o.projectId,o.submittedBy);case Je.SEND_MESSAGE:return l.sendMessage(o.projectId,o.senderType,o.senderName,o.content);case Je.CREATE_MATERIAL_REQUEST:return l.createMaterialRequest(o.projectId,o.items,o.requestedBy,o.neededBy,o.priority,o.notes);default:throw new Error(`Unknown action type: ${c}`)}},eu="",Tm="",h=!!eu,_=h?bm(eu,Tm):null,hi={slowQueryThreshold:200,enableSupabase:h},ee={query(r,l){const c={type:"query",operation:r,duration_ms:l.duration,rows_returned:l.rows,company_id:l.company_id||null,project_id:l.project_id||null,user_id:l.user_id||null,timestamp:new Date().toISOString()};hi.enableSupabase&&l.duration>=hi.slowQueryThreshold&&Vo("query",c)},error(r,l){const c={type:"error",category:r,severity:l.severity||"error",error_code:l.code||null,message:l.message,company_id:l.company_id||null,user_id:l.user_id||null,project_id:l.project_id||null,operation:l.operation||null,context:l.extra||{},timestamp:new Date().toISOString()};hi.enableSupabase&&Vo("error",c)},storage(r,l){const c={type:"storage",operation:r,company_id:l.company_id||null,project_id:l.project_id||null,file_size_bytes:l.size||0,duration_ms:l.duration||0,success:l.success!==!1,error_message:l.error||null,timestamp:new Date().toISOString()};hi.enableSupabase&&(!c.success||c.duration_ms>5e3)&&Vo("storage",c)},activity(r,l){}};async function Vo(r,l){if(_)try{r==="error"?await _.rpc("log_error",{p_severity:l.severity,p_category:l.category,p_message:l.message,p_company_id:l.company_id,p_user_id:l.user_id,p_project_id:l.project_id,p_operation:l.operation,p_error_code:l.error_code,p_context:l.context||{}}):r==="query"&&await _.rpc("log_query_metric",{p_operation:l.operation,p_duration_ms:l.duration_ms,p_rows_returned:l.rows_returned,p_company_id:l.company_id,p_project_id:l.project_id,p_user_id:l.user_id,p_context:{}})}catch{}}ee.wrapQuery=function(r,l){return async function(...c){const o=performance.now();try{const s=await l.apply(this,c),p={duration:Math.round(performance.now()-o),rows:Array.isArray(s)?s.length:void 0};return ee.query(r,p),s}catch(s){const f=Math.round(performance.now()-o);throw ee.error("database",{message:s.message,operation:r,severity:"error",extra:{duration:f}}),s}}};ee.time=async function(r,l){const c=performance.now();try{const o=await l(),s=Math.round(performance.now()-c);return ee.query(r,{duration:s}),o}catch(o){throw ee.error("general",{message:o.message,operation:r}),o}};typeof window<"u"&&pa().catch(r=>console.error("Failed to init offline DB:",r));const Ko="fieldsync_field_session";let $r=null;const tu=()=>{if($r)return $r;try{const r=sessionStorage.getItem(Ko);if(r)return $r=JSON.parse(r),$r}catch{}return null},Jo=r=>{$r=r,r?sessionStorage.setItem(Ko,JSON.stringify(r)):sessionStorage.removeItem(Ko)},Dm=async()=>{const r=tu();if(r?.token&&h)try{await _.rpc("invalidate_field_session",{p_session_token:r.token})}catch{}Jo(null)};let Wr=null;const Cm=()=>{const r=tu();return!r?.token||!h?_:((!Wr||Wr._sessionToken!==r.token)&&(Wr=bm(eu,Tm,{global:{headers:{"x-field-session":r.token}}}),Wr._sessionToken=r.token),Wr)},Tt=()=>h?tu()?.token?Cm():_:null,Wo="fieldsync_data",Si="fieldsync_user",bh=()=>{const r="fieldsync_device_id";let l=localStorage.getItem(r);return l||(l=crypto.randomUUID(),localStorage.setItem(r,l)),l},_m={projects:[],areas:[],users:[],assignments:[]},R=()=>{try{const r=localStorage.getItem(Wo);return r?JSON.parse(r):_m}catch{return localStorage.removeItem(Wo),_m}},I=r=>{localStorage.setItem(Wo,JSON.stringify(r))},gi=()=>{try{const r=localStorage.getItem(Si);return r?JSON.parse(r):null}catch{return localStorage.removeItem(Si),null}},yi=r=>{r?localStorage.setItem(Si,JSON.stringify(r)):localStorage.removeItem(Si)},$o={async signUp(r,l,c,o){if(h){const{data:s,error:f}=await _.auth.signUp({email:r,password:l,options:{data:{name:c,role:o}}});if(f)throw f;return s}else{const s=R(),f={id:crypto.randomUUID(),email:r,name:c,role:o,created_at:new Date().toISOString()};return s.users.push(f),I(s),yi(f),{user:f}}},async signIn(r,l){if(h){const{data:c,error:o}=await _.auth.signInWithPassword({email:r,password:l});if(o)throw o;return c}else{const o=R().users.find(s=>s.email===r);if(!o)throw new Error("User not found");return yi(o),{user:o}}},async signOut(){if(h){const{error:r}=await _.auth.signOut();if(r)throw r}else yi(null)},async getUser(){if(h){const{data:{user:r}}=await _.auth.getUser();return r}else return gi()},async getProfile(){if(h){const{data:{user:r}}=await _.auth.getUser();if(!r)return null;const{data:l,error:c}=await _.from("users").select("*").eq("id",r.id).single();return c?{id:r.id,email:r.email,name:r.user_metadata?.name||"",role:r.user_metadata?.role||"foreman"}:l}else return gi()},async updateRole(r,l){if(h){const{data:c,error:o}=await _.from("users").update({role:l}).eq("id",r).select().single();if(o)throw o;return c}else{const c=R(),o=c.users.find(s=>s.id===r);return o&&(o.role=l,I(c),gi()?.id===r&&yi(o)),o}},onAuthStateChange(r){if(h)return _.auth.onAuthStateChange(r);{const l=gi();return r(l?"SIGNED_IN":"SIGNED_OUT",{user:l}),{data:{subscription:{unsubscribe:()=>{}}}}}}},rt={async getProjects(r=null,l=!1){if(h){if(!kt()){const o=await um(r);return l?o:o.filter(s=>s.status!=="archived")}const c=performance.now();try{let o=_.from("projects").select("*").order("created_at",{ascending:!1});r&&(o=o.eq("company_id",r)),l||(o=o.eq("status","active"));const{data:s,error:f}=await o,p=Math.round(performance.now()-c);if(ee.query("getProjects",{duration:p,rows:s?.length,company_id:r}),f){ee.error("database",{message:f.message,operation:"getProjects",company_id:r});const y=await um(r);if(y.length>0)return y;throw f}return s?.length>0&&hh(s).catch(y=>console.error("Failed to cache projects:",y)),s}catch(o){throw ee.error("database",{message:o.message,operation:"getProjects",company_id:r}),o}}else{const c=R().projects;return l?c:c.filter(o=>o.status!=="archived")}},async getProjectsPaginated(r,{page:l=0,limit:c=25,status:o="active"}={}){if(h){const p=performance.now();try{let y=_.from("projects").select("*",{count:"exact"}).eq("company_id",r).order("created_at",{ascending:!1}).range(l*c,(l+1)*c-1);o!=="all"&&(y=y.eq("status",o));const{data:w,error:N,count:B}=await y,M=Math.round(performance.now()-p);if(ee.query("getProjectsPaginated",{duration:M,rows:w?.length,page:l,company_id:r}),N)throw N;return{projects:w||[],totalCount:B||0,hasMore:(l+1)*c<(B||0),page:l,limit:c}}catch(y){throw ee.error("database",{message:y.message,operation:"getProjectsPaginated",company_id:r}),y}}const s=R().projects.filter(p=>p.company_id===r&&(o==="all"||p.status===o)),f=l*c;return{projects:s.slice(f,f+c),totalCount:s.length,hasMore:f+c<s.length,page:l,limit:c}},async getProjectsWithSummary(r){if(h){const l=performance.now();try{const{data:c,error:o}=await _.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            pending_tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",r).eq("status","active").eq("pending_tickets.status","pending").order("created_at",{ascending:!1}),s=Math.round(performance.now()-l);if(ee.query("getProjectsWithSummary",{duration:s,rows:c?.length,company_id:r}),o)throw o;return(c||[]).map(f=>({...f,areaCount:f.areas?.[0]?.count||0,ticketCount:f.tickets?.[0]?.count||0,pendingTicketCount:f.pending_tickets?.[0]?.count||0,reportCount:f.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,pending_tickets:void 0,daily_reports:void 0}))}catch(c){return ee.error("database",{message:c.message,operation:"getProjectsWithSummary",company_id:r}),this.getProjects(r)}}return R().projects.filter(l=>l.company_id===r&&l.status==="active")},async getProjectDashboardSummary(r){if(h){const l=performance.now();try{const{data:c,error:o}=await _.rpc("get_project_dashboard_summary",{p_company_id:r}),s=Math.round(performance.now()-l);if(ee.query("getProjectDashboardSummary",{duration:s,rows:c?.length,company_id:r}),o){if(o.message?.includes("function")||o.code==="42883")return this.getProjectsWithSummary(r);throw o}return(c||[]).map(f=>({id:f.project_id,name:f.project_name,status:f.project_status,job_number:f.project_number,address:f.project_address,pin:f.project_pin,created_at:f.created_at,start_date:f.start_date,end_date:f.end_date,contract_value:Number(f.contract_value)||0,work_type:f.work_type||"demolition",job_type:f.job_type||"standard",general_contractor:f.general_contractor||"",areaCount:Number(f.total_areas)||0,completedAreas:Number(f.completed_areas)||0,inProgressAreas:Number(f.in_progress_areas)||0,pendingAreas:Number(f.pending_areas)||0,ticketCount:Number(f.total_tickets)||0,pendingTicketCount:Number(f.pending_tickets)||0,submittedTicketCount:Number(f.submitted_tickets)||0,approvedTicketCount:Number(f.approved_tickets)||0,totalLaborHours:Number(f.total_labor_hours)||0,todayLaborHours:Number(f.today_labor_hours)||0,todayWorkerCount:Number(f.today_worker_count)||0,lastActivityAt:f.last_activity_at,dailyReportsThisWeek:Number(f.daily_reports_this_week)||0,corCount:Number(f.cor_count)||0,pendingCorCount:Number(f.pending_cor_count)||0,disposalLoadsToday:Number(f.disposal_loads_today)||0}))}catch(c){return ee.error("database",{message:c.message,operation:"getProjectDashboardSummary",company_id:r}),this.getProjectsWithSummary(r)}}return R().projects.filter(l=>l.company_id===r&&l.status==="active")},async getArchivedProjects(r){if(h){const{data:l,error:c}=await _.from("projects").select("*").eq("company_id",r).eq("status","archived").order("archived_at",{ascending:!1});if(c)throw c;return l}else return R().projects.filter(l=>l.status==="archived")},async getProjectCount(r){if(h){const{count:l,error:c}=await _.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",r).in("status",["active","archived"]);if(c)throw c;return l||0}else return R().projects.filter(c=>c.company_id===r&&c.status!=="deleted").length},async archiveProject(r){if(h){const{data:l,error:c}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",r).select().single();if(c)throw c;return l}else{const l=R(),c=l.projects.find(o=>o.id===r);return c&&(c.status="archived",c.archived_at=new Date().toISOString(),I(l)),c}},async getProjectStorageStats(r){if(!h)return{photoCount:0,estimatedMB:0};const{data:l,error:c}=await _.from("t_and_m_tickets").select("photos").eq("project_id",r);if(c)throw c;let o=0;const s=[];l?.forEach(p=>{p.photos&&Array.isArray(p.photos)&&(o+=p.photos.length,s.push(...p.photos))});const f=o*1.5;return{photoCount:o,estimatedMB:f,photoUrls:s}},async archiveProjectDeep(r,l){if(!h)return null;const{photoUrls:c}=await this.getProjectStorageStats(r);if(c.length>0){const f=c.map(p=>{try{const w=new URL(p).pathname.match(/\/tm-photos\/(.+)$/);return w?w[1]:null}catch{return null}}).filter(Boolean);if(f.length>0)for(let p=0;p<f.length;p+=100){const y=f.slice(p,p+100);await _.storage.from("tm-photos").remove(y)}}await _.from("t_and_m_tickets").update({photos:[]}).eq("project_id",r);const{data:o,error:s}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",r).select().single();if(s)throw s;return{...o,photosDeleted:c.length}},async restoreProject(r){if(h){const{data:l,error:c}=await _.from("projects").update({status:"active",archived_at:null}).eq("id",r).select().single();if(c)throw c;return l}else{const l=R(),c=l.projects.find(o=>o.id===r);return c&&(c.status="active",c.archived_at=null,I(l)),c}},async getProject(r){if(h){const{data:l,error:c}=await _.from("projects").select("*").eq("id",r).single();if(c)throw c;return l}else return R().projects.find(l=>l.id===r)},async createProject(r){if(h){const{data:l,error:c}=await _.from("projects").insert({...r,status:"active"}).select().single();if(c)throw console.error("Supabase createProject error:",c.message,c.details,c.hint),c;return l}else{const l=R(),c={...r,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return l.projects.push(c),I(l),c}},async getProjectByPin(r){if(h){const{data:l,error:c}=await _.from("projects").select("*").eq("pin",r).eq("status","active").single();return c?null:l}else return R().projects.find(c=>c.pin===r&&c.status==="active")||null},async getProjectByPinAndCompany(r,l){if(h){const{data:c,error:o}=await _.from("projects").select("*").eq("pin",r).eq("company_id",l).eq("status","active").single();return o?null:c}else return R().projects.find(o=>o.pin===r&&o.company_id===l&&o.status==="active")||null},async getProjectByPinSecure(r,l){if(h){const c=bh(),{data:o,error:s}=await _.rpc("validate_pin_and_create_session",{p_pin:r,p_company_code:l,p_device_id:c,p_ip_address:null});if(console.log("[PIN Validation] RPC Response:",{data:o,error:s,pin:r,companyCode:l}),s)return console.error("[PIN Validation] RPC Error:",s),{success:!1,rateLimited:!1,project:null,error:s.message,errorType:"rpc_error"};if(!o||o.length===0)return console.warn("[PIN Validation] No data returned from RPC"),{success:!1,rateLimited:!1,project:null,errorType:"no_data"};const f=o[0];if(console.log("[PIN Validation] Result:",f),f.error_code==="RATE_LIMITED")return console.warn("[PIN Validation] Rate limited"),{success:!1,rateLimited:!0,project:null,errorType:"rate_limited"};if(f.error_code==="INVALID_COMPANY")return console.warn("[PIN Validation] Invalid company code:",l),{success:!1,rateLimited:!1,project:null,errorType:"invalid_company"};if(f.error_code==="INVALID_PIN")return console.warn("[PIN Validation] Invalid PIN for company:",l),{success:!1,rateLimited:!1,project:null,errorType:"invalid_pin"};if(!f.success||!f.project_id)return console.warn("[PIN Validation] Validation failed:",f),{success:!1,rateLimited:!1,project:null,errorType:"validation_failed"};console.log("[PIN Validation] Success! Creating session for project:",f.project_id),Jo({token:f.session_token,projectId:f.project_id,companyId:f.company_id,projectName:f.project_name,companyName:f.company_name,createdAt:new Date().toISOString()});const p=Cm(),{data:y,error:w}=await p.from("projects").select("*").eq("id",f.project_id).single();return w&&console.error("[PIN Validation] Error fetching project details:",w),console.log("[PIN Validation] Project data fetched:",y),{success:!0,rateLimited:!1,sessionToken:f.session_token,project:y||{id:f.project_id,name:f.project_name,company_id:f.company_id,status:"active"}}}else{const c=R(),s=(c.companies||[]).find(p=>p.code===l);if(!s)return{success:!1,rateLimited:!1,project:null};const f=c.projects.find(p=>p.pin===r&&p.company_id===s.id&&p.status==="active");if(f){const p=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;Jo({token:p,projectId:f.id,companyId:s.id,projectName:f.name,companyName:s.name,createdAt:new Date().toISOString()})}return{success:!!f,rateLimited:!1,project:f||null}}},async isPinAvailable(r,l=null){if(h){let c=_.from("projects").select("id").eq("pin",r);l&&(c=c.neq("id",l));const{data:o,error:s}=await c;if(s)throw s;return o.length===0}else return!R().projects.some(o=>o.pin===r&&o.id!==l)},async updateProjectPin(r,l){if(h){const{data:c,error:o}=await _.from("projects").update({pin:l}).eq("id",r).select().single();if(o)throw o;return c}else{const c=R(),o=c.projects.find(s=>s.id===r);return o&&(o.pin=l,I(c)),o}},async updateProject(r,l){if(h){const{data:c,error:o}=await _.from("projects").update(l).eq("id",r).select().single();if(o)throw console.error("Error updating project:",o),o;return c}else{const c=R(),o=c.projects.find(s=>s.id===r);return o&&(Object.assign(o,l),I(c)),o}},async deleteProject(r){if(h){const{error:l}=await _.from("projects").delete().eq("id",r);if(l)throw l}else{const l=R();l.projects=l.projects.filter(c=>c.id!==r),l.areas=l.areas.filter(c=>c.project_id!==r),I(l)}},async getAreas(r){if(h){if(!kt())return sm(r);const l=Tt(),{data:c,error:o}=await l.from("areas").select("*").eq("project_id",r).order("sort_order",{ascending:!0});if(o){const s=await sm(r);if(s.length>0)return s;throw o}return c?.length>0&&gh(c).catch(s=>console.error("Failed to cache areas:",s)),c}else return R().areas.filter(l=>l.project_id===r)},async createArea(r){if(h){const l=Tt(),{data:c,error:o}=await l.from("areas").insert(r).select().single();if(o)throw o;return c}else{const l=R(),c={...r,id:crypto.randomUUID(),created_at:new Date().toISOString()};return l.areas.push(c),I(l),c}},async updateAreaStatus(r,l){if(h){if(!kt()){const f=await Go(r,l);return await Ht(Je.UPDATE_AREA_STATUS,{areaId:r,status:l}),f}const c=Tt(),{data:o,error:s}=await c.from("areas").update({status:l}).eq("id",r).select().single();if(s){if(s.message?.includes("fetch")||s.message?.includes("network")){const f=await Go(r,l);return await Ht(Je.UPDATE_AREA_STATUS,{areaId:r,status:l}),f}throw s}return o&&Go(r,l).catch(f=>console.error("Failed to update cached area:",f)),o}else{const c=R(),o=c.areas.find(s=>s.id===r);return o&&(o.status=l,o.updated_at=new Date().toISOString()),I(c),o}},async updateArea(r,l){if(h){const{data:c,error:o}=await _.from("areas").update(l).eq("id",r).select().single();if(o)throw o;return c}else{const c=R(),o=c.areas.find(s=>s.id===r);return o&&(Object.assign(o,l),o.updated_at=new Date().toISOString()),I(c),o}},async deleteArea(r){if(h){const{error:l}=await _.from("areas").delete().eq("id",r);if(l)throw l}else{const l=R();l.areas=l.areas.filter(c=>c.id!==r),I(l)}},subscribeToAreas(r,l){return h?_.channel(`areas:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToMessages(r,l){return h?_.channel(`messages:${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToMaterialRequests(r,l){return h?_.channel(`material_requests:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToDailyReports(r,l){return h?_.channel(`daily_reports:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToCrewCheckins(r,l){return h?_.channel(`crew_checkins:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToInjuryReports(r,l){return h?_.channel(`injury_reports:${r}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${r}`},l).subscribe():null},subscribeToTMTickets(r,l){return h?_.channel(`tm_tickets:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToCompanyActivity(r,l,c){if(!h||!l||l.length===0)return null;const o=_.channel(`company_activity:${r}`);return l.forEach(s=>{o.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${s}`},f=>c.onMessage?.(f)),o.on("postgres_changes",{event:"INSERT",schema:"public",table:"material_requests",filter:`project_id=eq.${s}`},f=>c.onMaterialRequest?.(f)),o.on("postgres_changes",{event:"INSERT",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${s}`},f=>c.onTMTicket?.(f)),o.on("postgres_changes",{event:"UPDATE",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${s}`},f=>c.onTMTicket?.(f)),o.on("postgres_changes",{event:"INSERT",schema:"public",table:"crew_checkins",filter:`project_id=eq.${s}`},f=>c.onCrewCheckin?.(f)),o.on("postgres_changes",{event:"UPDATE",schema:"public",table:"crew_checkins",filter:`project_id=eq.${s}`},f=>c.onCrewCheckin?.(f)),o.on("postgres_changes",{event:"UPDATE",schema:"public",table:"areas",filter:`project_id=eq.${s}`},f=>c.onAreaUpdate?.(f)),o.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${s}`},f=>c.onCORChange?.(f))}),o.on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${r}`},s=>c.onInjuryReport?.(s)),o.subscribe()},unsubscribe(r){r&&h&&_.removeChannel(r)},async getAssignedProjects(r){if(h){const{data:l,error:c}=await _.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",r);if(c)throw c;return l.map(o=>o.projects)}else{const l=R();return(l.assignments?.filter(o=>o.user_id===r)||[]).map(o=>l.projects.find(s=>s.id===o.project_id)).filter(Boolean)}},async assignUserToProject(r,l,c){if(h){const{data:o,error:s}=await _.from("project_assignments").insert({project_id:r,user_id:l,assigned_by:c}).select().single();if(s)throw s;return o}else{const o=R();o.assignments||(o.assignments=[]);const s={id:crypto.randomUUID(),project_id:r,user_id:l,assigned_by:c,assigned_at:new Date().toISOString()};return o.assignments.push(s),I(o),s}},async removeUserFromProject(r,l){if(h){const{error:c}=await _.from("project_assignments").delete().eq("project_id",r).eq("user_id",l);if(c)throw c}else{const c=R();c.assignments=c.assignments?.filter(o=>!(o.project_id===r&&o.user_id===l))||[],I(c)}},async getProjectAssignments(r){if(h){const{data:l,error:c}=await _.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",r);if(c)throw c;return l.map(o=>o.users)}else{const l=R();return(l.assignments?.filter(o=>o.project_id===r)||[]).map(o=>l.users.find(s=>s.id===o.user_id)).filter(Boolean)}},async getAllUsers(){if(h){const{data:r,error:l}=await _.from("users").select("*").order("name");if(l)throw l;return r}else return R().users||[]},async getForemen(){if(h){const{data:r,error:l}=await _.from("users").select("*").eq("role","foreman").order("name");if(l)throw l;return r}else return(R().users||[]).filter(r=>r.role==="foreman")},async logActivity(r,l,c,o,s,f){if(h){const{error:p}=await _.from("activity_log").insert({user_id:r,project_id:l,area_id:c,action:o,old_value:s,new_value:f});p&&console.error("Error logging activity:",p)}},async getProjectActivity(r,l=50){if(h){const{data:c,error:o}=await _.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",r).order("created_at",{ascending:!1}).limit(l);if(o)throw o;return c}return[]},async getMaterialsEquipment(r){if(h){const{data:l,error:c}=await _.from("materials_equipment").select("*").eq("company_id",r).eq("active",!0).order("category").order("name");if(c)throw c;return l}return[]},async getMaterialsEquipmentByCategory(r,l){if(h){const{data:c,error:o}=await _.from("materials_equipment").select("*").eq("company_id",r).eq("category",l).eq("active",!0).order("name");if(o)throw o;return c}return[]},async getAllMaterialsEquipment(r){if(h){const{data:l,error:c}=await _.from("materials_equipment").select("*").eq("company_id",r).order("category").order("name");if(c)throw c;return l}return[]},async createMaterialEquipment(r){if(h){const{data:l,error:c}=await _.from("materials_equipment").insert(r).select().single();if(c)throw c;return l}return null},async updateMaterialEquipment(r,l){if(h){const{data:c,error:o}=await _.from("materials_equipment").update(l).eq("id",r).select().single();if(o)throw o;return c}return null},async deleteMaterialEquipment(r){if(h){const{error:l}=await _.from("materials_equipment").update({active:!1}).eq("id",r);if(l)throw l}},async getLaborCategories(r){if(h){const{data:l,error:c}=await _.from("labor_categories").select("*").eq("company_id",r).eq("active",!0).order("sort_order").order("name");if(c)throw c;return l||[]}return[]},async createLaborCategory(r,l,c=0){if(h){const{data:o,error:s}=await _.from("labor_categories").insert({company_id:r,name:l,sort_order:c}).select().single();if(s)throw s;return o}return null},async updateLaborCategory(r,l){if(h){const{data:c,error:o}=await _.from("labor_categories").update(l).eq("id",r).select().single();if(o)throw o;return c}return null},async deleteLaborCategory(r){if(h){const{error:l}=await _.from("labor_categories").update({active:!1}).eq("id",r);if(l)throw l}},async getLaborClasses(r){if(h){const{data:l,error:c}=await _.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",r).eq("active",!0).order("sort_order").order("name");if(c)throw c;return l||[]}return[]},async getLaborClassesWithCategories(r){if(h){const[l,c]=await Promise.all([_.from("labor_categories").select("*").eq("company_id",r).eq("active",!0).order("sort_order").order("name"),_.from("labor_classes").select("*").eq("company_id",r).eq("active",!0).order("sort_order").order("name")]);if(l.error)throw l.error;if(c.error)throw c.error;return{categories:l.data||[],classes:c.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(r){if(h){const{data:l,error:c}=await _.rpc("get_labor_classes_for_field",{p_company_id:r});if(c){console.error("Error loading field labor classes:",c);const[f,p]=await Promise.all([_.from("labor_categories").select("id, name").eq("company_id",r).eq("active",!0).order("name"),_.from("labor_classes").select("id, name, category_id").eq("company_id",r).eq("active",!0).order("name")]);return{categories:f.data||[],classes:p.data||[]}}const o=new Map,s=[];for(const f of l||[])f.category_id&&f.category_name&&!o.has(f.category_id)&&o.set(f.category_id,{id:f.category_id,name:f.category_name}),s.push({id:f.id,name:f.name,category_id:f.category_id});return{categories:Array.from(o.values()),classes:s}}return{categories:[],classes:[]}},async createLaborClass(r,l,c,o=0){if(h){const{data:s,error:f}=await _.from("labor_classes").insert({company_id:r,category_id:l,name:c,sort_order:o}).select().single();if(f)throw f;return s}return null},async updateLaborClass(r,l){if(h){const{data:c,error:o}=await _.from("labor_classes").update(l).eq("id",r).select().single();if(o)throw o;return c}return null},async deleteLaborClass(r){if(h){const{error:l}=await _.from("labor_classes").update({active:!1}).eq("id",r);if(l)throw l}},async getLaborClassRates(r){if(h){const{data:l,error:c}=await _.from("labor_class_rates").select("*").eq("labor_class_id",r);if(c)throw c;return l||[]}return[]},async getAllLaborClassRates(r){if(h){const{data:l,error:c}=await _.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",r).eq("active",!0);if(c)throw c;return l||[]}return[]},async saveLaborClassRates(r,l){if(h){const c=l.map(s=>({...s,labor_class_id:r})),{error:o}=await _.from("labor_class_rates").upsert(c,{onConflict:"labor_class_id,work_type,job_type"});if(o)throw o}},async getLaborClassRate(r,l,c){if(h){const{data:o,error:s}=await _.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",r).eq("work_type",l).eq("job_type",c).single();if(s&&s.code!=="PGRST116")throw s;return o||null}return null},async getTMTickets(r){if(h){const l=performance.now(),c=Tt();try{const{data:o,error:s}=await c.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `).eq("project_id",r).order("created_at",{ascending:!1}),f=Math.round(performance.now()-l);if(ee.query("getTMTickets",{duration:f,rows:o?.length,project_id:r}),s)throw s;return o}catch(o){throw ee.error("database",{message:o.message,operation:"getTMTickets",project_id:r}),o}}return[]},async getTMTicketsPaginated(r,{page:l=0,limit:c=25,status:o=null}={}){if(h){const s=performance.now(),f=Tt();try{let p=f.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `,{count:"exact"}).eq("project_id",r).order("created_at",{ascending:!1}).range(l*c,(l+1)*c-1);o&&(p=p.eq("status",o));const{data:y,error:w,count:N}=await p,B=Math.round(performance.now()-s);if(ee.query("getTMTicketsPaginated",{duration:B,rows:y?.length,page:l,project_id:r}),w)throw w;return{tickets:y||[],totalCount:N||0,hasMore:(l+1)*c<(N||0),page:l,limit:c}}catch(p){throw ee.error("database",{message:p.message,operation:"getTMTicketsPaginated",project_id:r}),p}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(r){if(h){const{data:l,error:c}=await _.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",r).not("ce_pco_number","is",null).neq("ce_pco_number","");if(c)throw c;const o={};let s=0,f=0;return l?.forEach(p=>{const y=p.ce_pco_number;if(o[y]||(o[y]={approved:0,pending:0,count:0}),o[y].count++,p.status==="approved"||p.status==="billed"){const w=parseFloat(p.change_order_value)||0;o[y].approved+=w,s+=w}else p.status==="pending"&&f++}),{changeOrders:o,totalApprovedValue:s,pendingCount:f}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(r,l){if(h){const{data:c,error:o}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",r).eq("status",l).order("created_at",{ascending:!1});if(o)throw o;return c}return[]},async getCORTickets(r){if(h){const{data:l,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",r).order("work_date",{ascending:!0});if(c)throw c;return l||[]}return[]},async createTMTicket(r){if(h){if(!kt()){const o={id:qt(),project_id:r.project_id,work_date:r.work_date,ce_pco_number:r.ce_pco_number||null,assigned_cor_id:r.assigned_cor_id||null,notes:r.notes,photos:r.photos||[],status:"pending_sync",created_by_name:r.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await fm(o),await Ht(Je.CREATE_TM_TICKET,{ticket:o,workers:r._workers||[],items:r._items||[]}),o}const{data:l,error:c}=await _.from("t_and_m_tickets").insert({project_id:r.project_id,work_date:r.work_date,ce_pco_number:r.ce_pco_number||null,assigned_cor_id:r.assigned_cor_id||null,notes:r.notes,photos:r.photos||[],status:"pending",created_by_name:r.created_by_name||"Field User"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const o={id:qt(),...r,status:"pending_sync",_offline:!0};return await fm(o),await Ht(Je.CREATE_TM_TICKET,{ticket:o,workers:r._workers||[],items:r._items||[]}),o}throw c}return l}return null},async addTMWorkers(r,l){if(h){const c=l.map(s=>({ticket_id:r,name:s.name,hours:s.hours,overtime_hours:s.overtime_hours||0,time_started:s.time_started||null,time_ended:s.time_ended||null,role:s.role||"Laborer"})),{error:o}=await _.from("t_and_m_workers").insert(c);if(o)throw o}},async addTMItems(r,l){if(h){const c=l.map(s=>({ticket_id:r,material_equipment_id:s.material_equipment_id||null,custom_name:s.custom_name||null,custom_category:s.custom_category||null,quantity:s.quantity})),{error:o}=await _.from("t_and_m_items").insert(c);if(o)throw o}},async getPreviousTicketCrew(r,l){if(!h)return null;const{data:c,error:o}=await _.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",r).lt("work_date",l).order("work_date",{ascending:!1}).limit(1).single();if(o||!c)return null;const s=c.t_and_m_workers||[],f=s.filter(w=>["Foreman","General Foreman","Superintendent"].includes(w.role)).map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||"",role:w.role})),p=s.filter(w=>w.role==="Operator").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""})),y=s.filter(w=>w.role==="Laborer").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""}));return{workDate:c.work_date,supervision:f.length>0?f:null,operators:p.length>0?p:null,laborers:y.length>0?y:null,totalWorkers:s.length}},async updateTMTicketStatus(r,l){if(h){const{data:c,error:o}=await _.from("t_and_m_tickets").update({status:l}).eq("id",r).select().single();if(o)throw o;return c}return null},async approveTMTicket(r,l,c,o=null){if(h){const s={status:"approved",approved_by_user_id:l,approved_by_name:c,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};o!==null&&(s.change_order_value=parseFloat(o)||0);const{data:f,error:p}=await _.from("t_and_m_tickets").update(s).eq("id",r).select().single();if(p)throw p;return f}return null},async rejectTMTicket(r,l,c,o=""){if(h){const{data:s,error:f}=await _.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:l,rejected_by_name:c,rejected_at:new Date().toISOString(),rejection_reason:o,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",r).select().single();if(f)throw f;return s}return null},canApproveTickets(r){return["owner","admin","manager"].includes(r)},async updateTMTicketPhotos(r,l){if(h){const{data:c,error:o}=await _.from("t_and_m_tickets").update({photos:l}).eq("id",r).select().single();if(o)throw o;return c}return null},async saveTMClientSignature(r,l){if(h){const{data:c,error:o}=await _.from("t_and_m_tickets").update({client_signature_data:l.signature,client_signature_name:l.signerName,client_signature_title:l.signerTitle,client_signature_company:l.signerCompany,client_signature_date:l.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",r).select().single();if(o)throw o;return c}return null},async deleteTMTicket(r){if(h){const{error:l}=await _.from("t_and_m_tickets").delete().eq("id",r);if(l)throw l}},async isTicketEditable(r){if(!r?.assigned_cor_id)return{editable:!0};if(h)try{const{data:l,error:c}=await _.from("change_orders").select("id, status, cor_number").eq("id",r.assigned_cor_id).single();if(c||!l)return{editable:!0};const s=["draft","pending_approval"].includes(l.status);return{editable:s,lockedBy:s?null:l,reason:s?null:`This ticket is linked to ${l.cor_number} which has been ${l.status==="approved"?"approved":l.status}`}}catch(l){return console.error("Error checking ticket editability:",l),{editable:!0}}return{editable:!0}},async getCompanyByCode(r){if(h){const{data:l,error:c}=await _.from("companies").select("*").eq("code",r).single();return c?null:l}return null},async getCompany(r){if(h){const{data:l,error:c}=await _.from("companies").select("*").eq("id",r).single();if(c)throw c;return l}return null},async getUserCompanies(r){if(h){const{data:l,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",r).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching user companies:",c),[]):l.map(o=>({id:o.companies.id,name:o.companies.name,code:o.companies.code,access_level:o.access_level}))}return[]},async getUserPendingMemberships(r){if(h){const{count:l,error:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",r).eq("status","pending");return c?(console.error("Error fetching pending memberships:",c),0):l||0}return 0},async getCompanyMemberships(r){if(h){const{data:l,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",r).order("created_at",{ascending:!1});return c?(console.error("Error fetching company memberships:",c),[]):l||[]}return[]},async approveMembership(r,l){if(h){const{error:c}=await _.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:l}).eq("id",r);if(c)throw c}},async approveMembershipWithRole(r,l,c="member"){if(h){const{error:o}=await _.rpc("approve_membership_with_role",{membership_id:r,approved_by_user:l,new_access_level:c});if(o)throw o}},async rejectMembership(r){if(h){const{error:l}=await _.from("user_companies").delete().eq("id",r);if(l)throw l}},async removeMember(r,l){if(h){const{error:c}=await _.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:l}).eq("id",r);if(c)throw c}},async getProjectTeam(r){if(h){const{data:l,error:c}=await _.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",r).order("assigned_at",{ascending:!0});return c?(console.error("Error fetching project team:",c),[]):l||[]}return[]},async getCompanyMembers(r){if(h){const{data:l,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",r).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching company members:",c),[]):l||[]}return[]},async addProjectMember(r,l,c,o){if(h){const{data:s,error:f}=await _.from("project_users").insert({project_id:r,user_id:l,project_role:c,assigned_by:o}).select().single();if(f)throw f;return s}return null},async updateProjectMemberRole(r,l,c){if(h){const{error:o}=await _.from("project_users").update({project_role:c}).eq("project_id",r).eq("user_id",l);if(o)throw o}},async removeProjectMember(r,l){if(h){const{error:c}=await _.from("project_users").delete().eq("project_id",r).eq("user_id",l);if(c)throw c}},async updateMemberAccessLevel(r,l){if(h){const{error:c}=await _.from("user_companies").update({access_level:l}).eq("id",r);if(c)throw c}},async updateMemberCompanyRole(r,l){if(h){const{error:c}=await _.from("user_companies").update({company_role:l}).eq("id",r);if(c)throw c}},async repairLegacyUser(r,l,c="member"){if(!h||!r||!l)return!1;try{const{data:o,error:s}=await _.rpc("repair_legacy_user",{p_user_id:r,p_company_id:l,p_role:c});return s?(console.error("RPC repair_legacy_user failed:",s),!1):o===!0}catch(o){return console.error("Error repairing legacy user:",o),!1}},async isLegacyUser(r){if(!h)return!1;try{const{data:l}=await _.from("users").select("company_id, role").eq("id",r).single();if(!l?.company_id)return!1;const{count:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",r);return c===0}catch(l){return console.error("Error checking legacy user:",l),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(r,l){if(!h)return[];const c=performance.now();try{const{data:o,error:s}=await _.from("disposal_loads").select("*").eq("project_id",r).eq("work_date",l).order("created_at",{ascending:!1}),f=Math.round(performance.now()-c);if(ee.query("getDisposalLoads",{duration:f,rows:o?.length,project_id:r}),s)throw s;return o||[]}catch(o){throw ee.error("database",{message:o.message,operation:"getDisposalLoads",project_id:r}),o}},async getDisposalLoadsHistory(r,l=14){if(!h)return[];const c=performance.now();try{const o=new Date,s=new Date;s.setDate(s.getDate()-l);const{data:f,error:p}=await _.from("disposal_loads").select("*").eq("project_id",r).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",o.toISOString().split("T")[0]).order("work_date",{ascending:!1}),y=Math.round(performance.now()-c);if(ee.query("getDisposalLoadsHistory",{duration:y,rows:f?.length,project_id:r}),p)throw p;return(f||[]).map(w=>({...w,load_date:w.work_date}))}catch(o){throw ee.error("database",{message:o.message,operation:"getDisposalLoadsHistory",project_id:r}),o}},async addDisposalLoad(r,l,c,o,s,f=null){if(!h)return null;const{data:p,error:y}=await _.from("disposal_loads").insert({project_id:r,user_id:l,work_date:c,load_type:o,load_count:s,notes:f}).select().single();if(y)throw ee.error("database",{message:y.message,operation:"addDisposalLoad",project_id:r}),y;return p},async updateDisposalLoad(r,l,c,o=null){if(!h)return null;const{data:s,error:f}=await _.from("disposal_loads").update({load_type:l,load_count:c,notes:o}).eq("id",r).select().single();if(f)throw ee.error("database",{message:f.message,operation:"updateDisposalLoad"}),f;return s},async deleteDisposalLoad(r){if(!h)return!1;const{error:l}=await _.from("disposal_loads").delete().eq("id",r);if(l)throw ee.error("database",{message:l.message,operation:"deleteDisposalLoad"}),l;return!0},async getDisposalSummary(r,l=null,c=null){if(!h)return[];const o=performance.now();try{const{data:s,error:f}=await _.rpc("get_disposal_summary",{p_project_id:r,p_start_date:l,p_end_date:c}),p=Math.round(performance.now()-o);if(ee.query("getDisposalSummary",{duration:p,rows:s?.length,project_id:r}),f)throw f;return s||[]}catch(s){return ee.error("database",{message:s.message,operation:"getDisposalSummary",project_id:r}),this.getDisposalSummaryFallback(r,l,c)}},async getDisposalSummaryFallback(r,l,c){let o=_.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",r);l&&(o=o.gte("work_date",l)),c&&(o=o.lte("work_date",c));const{data:s,error:f}=await o;if(f)throw f;const p={};return s?.forEach(y=>{p[y.load_type]||(p[y.load_type]={load_type:y.load_type,total_loads:0,days:new Set}),p[y.load_type].total_loads+=y.load_count,p[y.load_type].days.add(y.work_date)}),Object.values(p).map(y=>({load_type:y.load_type,total_loads:y.total_loads,days_with_activity:y.days.size}))},async getWeeklyDisposalSummary(r,l=4){if(!h)return[];const c=new Date,o=new Date;o.setDate(o.getDate()-l*7);const{data:s,error:f}=await _.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",r).gte("work_date",o.toISOString().split("T")[0]).lte("work_date",c.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(f)throw f;const p={};return s?.forEach(y=>{const w=new Date(y.work_date),N=new Date(w);N.setDate(w.getDate()-w.getDay());const B=N.toISOString().split("T")[0];p[B]||(p[B]={week:B,concrete:0,trash:0,metals:0,hazardous_waste:0}),p[B][y.load_type]+=y.load_count}),Object.values(p).sort((y,w)=>y.week.localeCompare(w.week))},async uploadPhoto(r,l,c,o){if(!h)return null;const s=performance.now(),f=o.size||0,p=Date.now(),y=new Uint8Array(6);crypto.getRandomValues(y);const w=Array.from(y,Q=>Q.toString(36)).join(""),N=o.name?.split(".").pop()||"jpg",B=`${p}-${w}.${N}`,M=`${r}/${l}/${c}/${B}`;try{const{data:Q,error:Z}=await _.storage.from("tm-photos").upload(M,o,{cacheControl:"3600",upsert:!1}),L=Math.round(performance.now()-s);if(ee.storage("upload",{company_id:r,project_id:l,size:f,duration:L,success:!Z}),Z)throw Z;const{data:H}=_.storage.from("tm-photos").getPublicUrl(M);return H.publicUrl}catch(Q){throw ee.error("storage",{message:Q.message,operation:"uploadPhoto",company_id:r,project_id:l}),Q}},async uploadPhotoBase64(r,l,c,o,s="photo.jpg"){if(!h)return null;const p=await(await fetch(o)).blob(),y=Date.now(),w=new Uint8Array(6);crypto.getRandomValues(w);const N=Array.from(w,ce=>ce.toString(36)).join(""),B=s.split(".").pop()||"jpg",M=`${y}-${N}.${B}`,Q=`${r}/${l}/${c}/${M}`,{data:Z,error:L}=await _.storage.from("tm-photos").upload(Q,p,{cacheControl:"3600",upsert:!1,contentType:p.type});if(L)throw L;const{data:H}=_.storage.from("tm-photos").getPublicUrl(Q);return H.publicUrl},async deletePhoto(r){if(!h)return;const c=new URL(r).pathname.match(/\/tm-photos\/(.+)$/);if(!c)return;const o=c[1],{error:s}=await _.storage.from("tm-photos").remove([o]);if(s)throw s},async verifyPhotoAccessible(r){if(!h||!r)return{accessible:!1,error:"Invalid URL"};try{const l=await fetch(r,{method:"HEAD"});return{accessible:l.ok,status:l.status,error:l.ok?null:`HTTP ${l.status}`}}catch(l){return{accessible:!1,error:l.message||"Network error"}}},async verifyTicketPhotos(r){if(!h)return{verified:!1,issues:[]};try{const{data:l,error:c}=await _.from("t_and_m_tickets").select("photos").eq("id",r).single();if(c)throw c;if(!l?.photos||l.photos.length===0)return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",r),{verified:!0,status:"empty",issues:[]};const o=[];for(const f of l.photos){const p=await this.verifyPhotoAccessible(f);p.accessible||o.push({url:f,error:p.error})}const s=o.length===0?"verified":"issues";return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:s,photos_issue_count:o.length}).eq("id",r),{verified:o.length===0,status:s,totalPhotos:l.photos.length,issues:o}}catch(l){return console.error("Error verifying ticket photos:",l),{verified:!1,error:l.message,issues:[]}}},async queuePhotoUpload(r,l,c,o){if(!h)return null;const{data:s,error:f}=await _.from("photo_upload_queue").insert({ticket_id:r,temp_id:l,file_name:c,file_size_bytes:o,status:"pending"}).select().single();return f?(console.error("Error queueing photo upload:",f),null):s},async confirmQueuedUpload(r,l,c){if(!h)return!1;const{data:o,error:s}=await _.rpc("confirm_photo_upload",{p_queue_id:r,p_uploaded_url:l,p_storage_path:c});return s?(console.error("Error confirming photo upload:",s),!1):o===!0},async markQueuedUploadFailed(r,l){if(!h)return!1;const{data:c,error:o}=await _.rpc("mark_photo_upload_failed",{p_queue_id:r,p_error:l});return o?(console.error("Error marking photo upload failed:",o),!1):c===!0},async getPendingPhotoUploads(r){if(!h)return[];const{data:l,error:c}=await _.rpc("get_pending_photo_uploads",{p_ticket_id:r});return c?(console.error("Error getting pending photo uploads:",c),[]):l||[]},async logPhotoOperation(r,l,c={}){if(h)try{await _.from("photo_audit_log").insert({ticket_id:r,cor_id:c.corId||null,operation:l,photo_url:c.photoUrl||null,storage_path:c.storagePath||null,details:c.metadata?c.metadata:null,error_message:c.error||null,triggered_by:c.triggeredBy||"system"})}catch(o){console.error("Error logging photo operation:",o)}},async saveExportSnapshot(r,l,c={}){if(!h)return null;const{exportType:o="pdf",exportReason:s=null,clientEmail:f=null,clientName:p=null}=c;try{const{data:y,error:w}=await _.from("cor_export_snapshots").insert({cor_id:r,export_type:o,export_reason:s,cor_data:l.cor_data,tickets_data:l.tickets_data,photos_manifest:l.photos_manifest,totals_snapshot:l.totals_snapshot,checksum:l.checksum,client_email:f,client_name:p}).select().single();if(w)throw w;return y}catch(y){return console.error("Error saving export snapshot:",y),null}},async getExportSnapshots(r){if(!h)return[];const{data:l,error:c}=await _.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",r).order("exported_at",{ascending:!1});return c?(console.error("Error fetching export snapshots:",c),[]):l||[]},async getExportSnapshot(r){if(!h)return null;const{data:l,error:c}=await _.from("cor_export_snapshots").select("*").eq("id",r).single();return c?(console.error("Error fetching export snapshot:",c),null):l},async requestCORExport(r,l,c={}){if(!h)return null;try{const o=await _.auth.getUser(),{data:s,error:f}=await _.rpc("request_cor_export",{p_cor_id:r,p_idempotency_key:l,p_options:c,p_requested_by:o?.data?.user?.id||null});if(f)throw f;return s?.[0]||null}catch(o){throw ee.error("database",{message:o.message,operation:"requestCORExport",extra:{corId:r}}),o}},async getExportJob(r){if(!h)return null;const{data:l,error:c}=await _.from("cor_export_jobs").select("*").eq("id",r).single();return c?(console.error("Error fetching export job:",c),null):l},async getExportJobs(r,l=10){if(!h)return[];const{data:c,error:o}=await _.from("cor_export_jobs").select("*").eq("cor_id",r).order("created_at",{ascending:!1}).limit(l);return o?(console.error("Error fetching export jobs:",o),[]):c||[]},async updateExportJobStatus(r,l,c={}){if(!h)return null;try{const{data:o,error:s}=await _.rpc("update_export_job_status",{p_job_id:r,p_status:l,p_snapshot_id:c.snapshotId||null,p_pdf_url:c.pdfUrl||null,p_error:c.error||null,p_error_details:c.errorDetails||null,p_metrics:c.metrics||null});if(s)throw s;return o}catch(o){throw ee.error("database",{message:o.message,operation:"updateExportJobStatus",extra:{jobId:r,status:l}}),o}},async getCurrentCORSnapshot(r){if(!h)return null;const{data:l}=await _.from("change_orders").select("version, last_snapshot_version").eq("id",r).single();if(!l||l.version!==l.last_snapshot_version)return null;const{data:c}=await _.from("cor_export_snapshots").select("*").eq("cor_id",r).eq("is_current",!0).single();return c||null},async saveCORSnapshot(r,l){if(!h)return null;try{await _.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",r.corId);const c=await _.auth.getUser(),{data:o,error:s}=await _.from("cor_export_snapshots").insert({id:r.snapshotId,cor_id:r.corId,job_id:l,cor_version:r.corVersion,cor_data:r.corData,tickets_data:r.ticketsData,photos_manifest:r.photoManifest,totals_snapshot:r.totals,checksum:r.checksum,is_current:!0,exported_by:c?.data?.user?.id||null}).select().single();if(s)throw s;return await _.from("change_orders").update({last_snapshot_version:r.corVersion}).eq("id",r.corId),o}catch(c){throw ee.error("database",{message:c.message,operation:"saveCORSnapshot",extra:{corId:r.corId}}),c}},async updateCORAggregatedStats(r){if(h)try{await _.rpc("update_cor_aggregated_stats",{p_cor_id:r})}catch(l){console.error("Error updating COR aggregated stats:",l)}},async getCrewCheckin(r,l=null){if(!h)return null;const c=l||new Date().toISOString().split("T")[0],o=Tt(),{data:s,error:f}=await o.from("crew_checkins").select("*").eq("project_id",r).eq("check_in_date",c).single();return f&&f.code,s},async saveCrewCheckin(r,l,c=null,o=null){if(!h)return null;const s=o||new Date().toISOString().split("T")[0];if(!kt()){const w={id:qt(),project_id:r,check_in_date:s,workers:l,created_by:c,updated_at:new Date().toISOString(),_offline:!0};return await Qo(w),await Ht(Je.SAVE_CREW_CHECKIN,{projectId:r,workers:l,checkInDate:s}),w}const f=Tt(),{data:p,error:y}=await f.from("crew_checkins").upsert({project_id:r,check_in_date:s,workers:l,created_by:c,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(y){if(y.message?.includes("fetch")||y.message?.includes("network")){const w={id:qt(),project_id:r,check_in_date:s,workers:l,_offline:!0};return await Qo(w),await Ht(Je.SAVE_CREW_CHECKIN,{projectId:r,workers:l,checkInDate:s}),w}throw console.error("Error saving crew checkin:",y),y}return p&&Qo(p).catch(w=>console.error("Failed to cache checkin:",w)),p},async addCrewMember(r,l,c=null){if(!h)return null;const o=await this.getCrewCheckin(r),s=o?.workers||[];return s.find(f=>f.name.toLowerCase()===l.name.toLowerCase())?o:(s.push(l),await this.saveCrewCheckin(r,s,c))},async removeCrewMember(r,l){if(!h)return null;const c=await this.getCrewCheckin(r);if(!c)return null;const o=c.workers.filter(s=>s.name.toLowerCase()!==l.toLowerCase());return await this.saveCrewCheckin(r,o,c.created_by)},async getCrewCheckinHistory(r,l=30){if(!h)return[];const{data:c,error:o}=await _.from("crew_checkins").select("*").eq("project_id",r).order("check_in_date",{ascending:!1}).limit(l);return o?(console.error("Error fetching crew history:",o),[]):c||[]},async getLaborRates(r,l=null,c=null){if(!h)return[];let o=_.from("labor_rates").select("*").eq("company_id",r);l&&(o=o.eq("work_type",l)),c&&(o=o.eq("job_type",c));const{data:s,error:f}=await o;return f?(console.error("Error fetching labor rates:",f),[]):s||[]},async calculateManDayCosts(r,l,c,o){if(!h)return{totalCost:0,totalManDays:0,breakdown:[]};const s=await this.getCrewCheckinHistory(r,365),f=await this.getLaborRates(l,c,o),p={};f.forEach(M=>{p[M.role.toLowerCase()]=parseFloat(M.regular_rate)||0});let y=0,w=0;const N={},B=[];return s.forEach(M=>{const Q=M.workers||[];let Z=0;const L={};Q.forEach(H=>{const ce=(H.role||"laborer").toLowerCase(),se=p[ce]||0;L[ce]||(L[ce]={count:0,cost:0}),L[ce].count++,L[ce].cost+=se,Z+=se,N[ce]||(N[ce]={count:0,cost:0,rate:se}),N[ce].count++,N[ce].cost+=se}),y+=Z,w+=Q.length,B.push({date:M.check_in_date,workers:Q.length,cost:Z,breakdown:L})}),{totalCost:y,totalManDays:w,byRole:N,byDate:B,daysWorked:s.length}},async getDailyReport(r,l=null){if(!h)return null;const c=l||new Date().toISOString().split("T")[0],o=Tt(),{data:s,error:f}=await o.from("daily_reports").select("*").eq("project_id",r).eq("report_date",c).single();return f&&f.code,s},async compileDailyReport(r,l=null){if(!h)return null;const c=l||new Date().toISOString().split("T")[0],o=Tt(),s=await this.getCrewCheckin(r,c),{data:f}=await o.from("areas").select("*").eq("project_id",r),p=f?.filter(N=>N.status==="done"&&N.completed_at?.startsWith(c))||[],{data:y}=await o.from("t_and_m_tickets").select("*").eq("project_id",r).eq("work_date",c),w=y?.reduce((N,B)=>N+(B.photos?.length||0),0)||0;return{crew_count:s?.workers?.length||0,crew_list:s?.workers||[],tasks_completed:p.length,tasks_total:f?.length||0,completed_tasks:p.map(N=>({name:N.name,group:N.group_name})),tm_tickets_count:y?.length||0,photos_count:w}},async saveDailyReport(r,l,c=null){if(!h)return null;const o=c||new Date().toISOString().split("T")[0];if(!kt()){const y={id:qt(),project_id:r,report_date:o,...l,updated_at:new Date().toISOString(),_offline:!0};return await Pn(y),y}const s=Tt(),{data:f,error:p}=await s.from("daily_reports").upsert({project_id:r,report_date:o,...l,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(p){if(p.message?.includes("fetch")||p.message?.includes("network")){const y={id:qt(),project_id:r,report_date:o,...l,_offline:!0};return await Pn(y),y}throw console.error("Error saving daily report:",p),p}return f&&Pn(f).catch(y=>console.error("Failed to cache report:",y)),f},async submitDailyReport(r,l,c=null){if(!h)return null;const o=c||new Date().toISOString().split("T")[0];if(!kt()){const y=await yh(r,o),w={id:qt(),project_id:r,report_date:o,...y||{},status:"pending_sync",submitted_by:l,submitted_at:new Date().toISOString(),_offline:!0};return await Pn(w),await Ht(Je.SUBMIT_DAILY_REPORT,{projectId:r,reportData:y||{},submittedBy:l}),w}const s=await this.compileDailyReport(r,o),{data:f,error:p}=await _.from("daily_reports").upsert({project_id:r,report_date:o,...s,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:l,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(p){if(p.message?.includes("fetch")||p.message?.includes("network")){const y={id:qt(),project_id:r,report_date:o,...s,status:"pending_sync",submitted_by:l,_offline:!0};return await Pn(y),await Ht(Je.SUBMIT_DAILY_REPORT,{projectId:r,reportData:s,submittedBy:l}),y}throw console.error("Error submitting daily report:",p),p}return f&&Pn(f).catch(y=>console.error("Failed to cache report:",y)),f},async getDailyReports(r,l=30){if(!h)return[];const{data:c,error:o}=await _.from("daily_reports").select("*").eq("project_id",r).order("report_date",{ascending:!1}).limit(l);return o?(console.error("Error fetching daily reports:",o),[]):c||[]},async sendMessage(r,l,c,o,s=null,f=null,p="general",y=null){if(!h)return null;if(!kt()){const B={id:qt(),project_id:r,sender_type:c,sender_name:o,sender_user_id:s,message:l,photo_url:f,message_type:p,parent_message_id:y,created_at:new Date().toISOString(),_offline:!0};return await dm(B),await Ht(Je.SEND_MESSAGE,{projectId:r,senderType:c,senderName:o,content:l}),B}const{data:w,error:N}=await _.from("messages").insert({project_id:r,sender_type:c,sender_name:o,sender_user_id:s,message:l,photo_url:f,message_type:p,parent_message_id:y}).select().single();if(N){if(N.message?.includes("fetch")||N.message?.includes("network")){const B={id:qt(),project_id:r,sender_type:c,sender_name:o,message:l,created_at:new Date().toISOString(),_offline:!0};return await dm(B),await Ht(Je.SEND_MESSAGE,{projectId:r,senderType:c,senderName:o,content:l}),B}throw console.error("Error sending message:",N),N}return w},async getMessages(r,l=50){if(!h)return[];const c=Tt(),{data:o,error:s}=await c.from("messages").select("*").eq("project_id",r).order("created_at",{ascending:!1}).limit(l);return s?[]:o||[]},async getUnreadCount(r,l){if(!h)return 0;const c=Tt(),o=l==="field"?"office":"field",{count:s,error:f}=await c.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",r).eq("sender_type",o).eq("is_read",!1);return f?0:s||0},async markMessagesRead(r,l){if(!h)return;const c=Tt(),o=l==="field"?"office":"field";await c.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",r).eq("sender_type",o).eq("is_read",!1)},async createMaterialRequest(r,l,c,o=null,s="normal",f=null){if(!h)return null;if(!kt()){const w={id:qt(),project_id:r,items:l,requested_by:c,needed_by:o,priority:s,notes:f,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await Ht(Je.CREATE_MATERIAL_REQUEST,{projectId:r,items:l,requestedBy:c,neededBy:o,priority:s,notes:f}),w}const{data:p,error:y}=await _.from("material_requests").insert({project_id:r,items:l,requested_by:c,needed_by:o,priority:s,notes:f}).select().single();if(y){if(y.message?.includes("fetch")||y.message?.includes("network")){const w={id:qt(),project_id:r,items:l,requested_by:c,status:"pending_sync",_offline:!0};return await Ht(Je.CREATE_MATERIAL_REQUEST,{projectId:r,items:l,requestedBy:c,neededBy:o,priority:s,notes:f}),w}throw console.error("Error creating material request:",y),y}return p},async getMaterialRequests(r,l=null){if(!h)return[];let c=_.from("material_requests").select("*").eq("project_id",r).order("created_at",{ascending:!1});l&&(c=c.eq("status",l));const{data:o,error:s}=await c;return s?(console.error("Error fetching material requests:",s),[]):o||[]},async getPendingRequestsCount(r){if(!h)return 0;const{count:l,error:c}=await _.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",r).eq("status","pending");return c?0:l||0},async updateMaterialRequest(r,l,c,o=null,s=null){if(!h)return null;const f={status:l,responded_by:c,responded_at:new Date().toISOString(),response_notes:o,updated_at:new Date().toISOString()};s&&(f.expected_delivery=s),l==="delivered"&&(f.delivered_at=new Date().toISOString());const{data:p,error:y}=await _.from("material_requests").update(f).eq("id",r).select().single();if(y)throw console.error("Error updating material request:",y),y;return p},generateShareToken(){const r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l=new Uint8Array(12);return crypto.getRandomValues(l),Array.from(l,c=>r[c%r.length]).join("")},async createProjectShare(r,l,c,o=null){if(!h){const w=R();w.projectShares||(w.projectShares=[]);const N={id:crypto.randomUUID(),project_id:r,share_token:this.generateShareToken(),created_by:l,expires_at:o,is_active:!0,permissions:c,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return w.projectShares.push(N),I(w),N}const{data:s,error:f}=await _.rpc("generate_share_token");if(f)throw console.error("Error generating share token:",f),f;const{data:p,error:y}=await _.from("project_shares").insert({project_id:r,share_token:s,created_by:l,expires_at:o,permissions:c}).select().single();if(y)throw console.error("Error creating project share:",y),y;return p},async getShareByToken(r){if(!h){const o=R();if(!o.projectShares)return null;const s=o.projectShares.find(f=>f.share_token===r&&f.is_active&&(!f.expires_at||new Date(f.expires_at)>new Date));return s&&(s.view_count++,s.last_viewed_at=new Date().toISOString(),I(o)),s}const{data:l,error:c}=await _.from("project_shares").select("*, projects(*)").eq("share_token",r).eq("is_active",!0).single();return c?(console.error("Error fetching share by token:",c),null):l.expires_at&&new Date(l.expires_at)<new Date?null:(await _.rpc("increment_share_view_count",{token:r}),l)},async getProjectShares(r){if(!h){const o=R();return o.projectShares?o.projectShares.filter(s=>s.project_id===r):[]}const{data:l,error:c}=await _.from("project_shares").select("*, users(name, email)").eq("project_id",r).order("created_at",{ascending:!1});return c?(console.error("Error fetching project shares:",c),[]):l||[]},async updateProjectShare(r,l){if(!h){const s=R();if(!s.projectShares)return null;const f=s.projectShares.findIndex(p=>p.id===r);return f===-1?null:(s.projectShares[f]={...s.projectShares[f],...l,updated_at:new Date().toISOString()},I(s),s.projectShares[f])}const{data:c,error:o}=await _.from("project_shares").update(l).eq("id",r).select().single();if(o)throw console.error("Error updating project share:",o),o;return c},async revokeProjectShare(r){return this.updateProjectShare(r,{is_active:!1})},async deleteProjectShare(r){if(!h){const c=R();if(!c.projectShares)return;c.projectShares=c.projectShares.filter(o=>o.id!==r),I(c);return}const{error:l}=await _.from("project_shares").delete().eq("id",r);if(l)throw console.error("Error deleting project share:",l),l},async getPublicProjectData(r){const l=await this.getShareByToken(r);if(!l)return null;const c=l.project_id||l.projects?.id;if(!h){const f=R(),p=f.projects.find(M=>M.id===c);if(!p)return null;const y=f.areas.filter(M=>M.project_id===c),w=y.reduce((M,Q)=>M+parseFloat(Q.weight||0),0),N=y.filter(M=>M.status==="done").reduce((M,Q)=>M+parseFloat(Q.weight||0),0),B=w>0?Math.round(N/w*100):0;return{share:l,project:p,progress:B,areas:l.permissions.progress?y:[],photos:[],dailyReports:[],tmTickets:[]}}const o=l.projects||await this.getProject(c);if(!o)return null;const s={share:l,project:o,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(l.permissions.progress){s.areas=await this.getAreas(c);const f=s.areas.reduce((y,w)=>y+parseFloat(w.weight||0),0),p=s.areas.filter(y=>y.status==="done").reduce((y,w)=>y+parseFloat(w.weight||0),0);s.progress=f>0?Math.round(p/f*100):0}if(l.permissions.photos){const{data:f}=await _.from("t_and_m_tickets").select("photos, work_date").eq("project_id",c).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);s.photos=f?.flatMap(p=>(p.photos||[]).map(y=>({url:y,date:p.work_date})))||[]}if(l.permissions.daily_reports){const{data:f}=await _.from("daily_reports").select("*").eq("project_id",c).order("report_date",{ascending:!1}).limit(10);s.dailyReports=f||[]}return l.permissions.tm_tickets&&(s.tmTickets=await this.getTMTickets(c)),s},async createInjuryReport(r){if(!h){const o=R();o.injuryReports||(o.injuryReports=[]);const s={id:crypto.randomUUID(),...r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return o.injuryReports.push(s),I(o),s}const{data:l,error:c}=await _.from("injury_reports").insert(r).select().single();if(c)throw console.error("Error creating injury report:",c),c;return l},async getInjuryReports(r){if(!h){const o=R();return o.injuryReports?o.injuryReports.filter(s=>s.project_id===r).sort((s,f)=>new Date(f.incident_date)-new Date(s.incident_date)):[]}const{data:l,error:c}=await _.from("injury_reports").select("*").eq("project_id",r).order("incident_date",{ascending:!1});return c?(console.error("Error fetching injury reports:",c),[]):l||[]},async getCompanyInjuryReports(r,l=null){if(!h){const f=R();if(!f.injuryReports)return[];let p=f.injuryReports.filter(y=>y.company_id===r);return l&&(p=p.filter(y=>y.status===l)),p.sort((y,w)=>new Date(w.incident_date)-new Date(y.incident_date))}let c=_.from("injury_reports").select("*, projects(name)").eq("company_id",r).order("incident_date",{ascending:!1});l&&(c=c.eq("status",l));const{data:o,error:s}=await c;return s?(console.error("Error fetching company injury reports:",s),[]):o||[]},async getInjuryReport(r){if(!h){const o=R();return o.injuryReports?o.injuryReports.find(s=>s.id===r):null}const{data:l,error:c}=await _.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",r).single();return c?(console.error("Error fetching injury report:",c),null):l},async updateInjuryReport(r,l){if(!h){const s=R();if(!s.injuryReports)return null;const f=s.injuryReports.findIndex(p=>p.id===r);return f===-1?null:(s.injuryReports[f]={...s.injuryReports[f],...l,updated_at:new Date().toISOString()},I(s),s.injuryReports[f])}const{data:c,error:o}=await _.from("injury_reports").update(l).eq("id",r).select().single();if(o)throw console.error("Error updating injury report:",o),o;return c},async closeInjuryReport(r,l){return this.updateInjuryReport(r,{status:"closed",closed_at:new Date().toISOString(),closed_by:l})},async deleteInjuryReport(r){if(!h){const c=R();if(!c.injuryReports)return;c.injuryReports=c.injuryReports.filter(o=>o.id!==r),I(c);return}const{error:l}=await _.from("injury_reports").delete().eq("id",r);if(l)throw console.error("Error deleting injury report:",l),l},async getInjuryStatistics(r,l=null,c=null){if(!h){const f=R();if(!f.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let p=f.injuryReports.filter(y=>y.company_id===r);return l&&(p=p.filter(y=>new Date(y.incident_date)>=new Date(l))),c&&(p=p.filter(y=>new Date(y.incident_date)<=new Date(c))),{total_incidents:p.length,minor_injuries:p.filter(y=>y.injury_type==="minor").length,serious_injuries:p.filter(y=>y.injury_type==="serious").length,critical_injuries:p.filter(y=>y.injury_type==="critical").length,near_misses:p.filter(y=>y.injury_type==="near_miss").length,osha_recordable:p.filter(y=>y.osha_recordable).length,total_days_away:p.reduce((y,w)=>y+(w.days_away_from_work||0),0),total_restricted_days:p.reduce((y,w)=>y+(w.restricted_work_days||0),0)}}const{data:o,error:s}=await _.rpc("get_injury_statistics",{comp_id:r,start_date:l,end_date:c});return s?(console.error("Error fetching injury statistics:",s),null):o[0]||null},async addWitness(r,l){if(!h){const s=R();if(!s.injuryReports)return null;const f=s.injuryReports.findIndex(w=>w.id===r);if(f===-1)return null;const p=s.injuryReports[f],y=p.witnesses||[];return y.push(l),s.injuryReports[f]={...p,witnesses:y,updated_at:new Date().toISOString()},I(s),s.injuryReports[f]}const c=await this.getInjuryReport(r);if(!c)return null;const o=c.witnesses||[];return o.push(l),this.updateInjuryReport(r,{witnesses:o})},async removeWitness(r,l){if(!h){const s=R();if(!s.injuryReports)return null;const f=s.injuryReports.findIndex(w=>w.id===r);if(f===-1)return null;const p=s.injuryReports[f],y=p.witnesses||[];return y.splice(l,1),s.injuryReports[f]={...p,witnesses:y,updated_at:new Date().toISOString()},I(s),s.injuryReports[f]}const c=await this.getInjuryReport(r);if(!c)return null;const o=c.witnesses||[];return o.splice(l,1),this.updateInjuryReport(r,{witnesses:o})},async getCompanyUsers(r){if(h){const{data:l,error:c}=await _.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",r);return c?(console.error("Error fetching company users:",c),[]):l?.map(o=>({id:o.user_id,name:o.users?.name||o.users?.email,email:o.users?.email,role:o.role}))||[]}return[]},async getProjectNotificationPreferences(r){if(h){const{data:c,error:o}=await _.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",r);return o?(console.error("Error fetching notification preferences:",o),[]):c||[]}const l=R();return l.notificationPreferences?l.notificationPreferences.filter(c=>c.project_id===r):[]},async getUserNotificationPreferences(r){if(h){const{data:c,error:o}=await _.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",r);return o?(console.error("Error fetching user notification preferences:",o),[]):c||[]}const l=R();return l.notificationPreferences?l.notificationPreferences.filter(c=>c.user_id===r):[]},async setNotificationPreference(r,l,c){if(h){const{data:p,error:y}=await _.from("notification_preferences").upsert({project_id:r,user_id:l,notification_types:c,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(y)throw console.error("Error setting notification preference:",y),y;return p}const o=R();o.notificationPreferences||(o.notificationPreferences=[]);const s=o.notificationPreferences.findIndex(p=>p.project_id===r&&p.user_id===l),f={id:s>=0?o.notificationPreferences[s].id:crypto.randomUUID(),project_id:r,user_id:l,notification_types:c,created_at:s>=0?o.notificationPreferences[s].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s>=0?o.notificationPreferences[s]=f:o.notificationPreferences.push(f),I(o),f},async removeNotificationPreference(r,l){if(h){const{error:o}=await _.from("notification_preferences").delete().eq("project_id",r).eq("user_id",l);if(o)throw console.error("Error removing notification preference:",o),o;return!0}const c=R();return c.notificationPreferences&&(c.notificationPreferences=c.notificationPreferences.filter(o=>!(o.project_id===r&&o.user_id===l)),I(c)),!0},async setProjectNotificationPreferences(r,l){const c=[];for(const o of l)if(o.notificationTypes&&o.notificationTypes.length>0){const s=await this.setNotificationPreference(r,o.userId,o.notificationTypes);c.push(s)}else await this.removeNotificationPreference(r,o.userId);return c},async getNotificationPresets(r){if(h){const{data:c,error:o}=await _.from("notification_presets").select("*").eq("company_id",r).order("name");return o?(console.error("Error fetching notification presets:",o),[]):c||[]}const l=R();return l.notificationPresets?l.notificationPresets.filter(c=>c.company_id===r):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:r},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:r},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:r},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:r}]},async createNotificationPreset(r,l,c){if(h){const{data:f,error:p}=await _.from("notification_presets").insert({company_id:r,name:l,notification_types:c}).select().single();if(p)throw console.error("Error creating notification preset:",p),p;return f}const o=R();o.notificationPresets||(o.notificationPresets=[]);const s={id:crypto.randomUUID(),company_id:r,name:l,notification_types:c,created_at:new Date().toISOString()};return o.notificationPresets.push(s),I(o),s},async updateNotificationPreset(r,l,c){if(h){const{data:f,error:p}=await _.from("notification_presets").update({name:l,notification_types:c,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(p)throw console.error("Error updating notification preset:",p),p;return f}const o=R();if(!o.notificationPresets)return null;const s=o.notificationPresets.findIndex(f=>f.id===r);return s===-1?null:(o.notificationPresets[s]={...o.notificationPresets[s],name:l,notification_types:c,updated_at:new Date().toISOString()},I(o),o.notificationPresets[s])},async deleteNotificationPreset(r){if(h){const{error:c}=await _.from("notification_presets").delete().eq("id",r);if(c)throw console.error("Error deleting notification preset:",c),c;return!0}const l=R();return l.notificationPresets&&(l.notificationPresets=l.notificationPresets.filter(c=>c.id!==r),I(l)),!0},async getDumpSites(r){if(h){const{data:c,error:o}=await _.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",r).eq("active",!0).order("name");return o?(console.error("Error fetching dump sites:",o),[]):c||[]}return(R().dumpSites||[]).filter(c=>c.company_id===r&&c.active)},async createDumpSite(r,l,c="",o=""){if(h){const{data:p,error:y}=await _.from("dump_sites").insert({company_id:r,name:l,address:c,notes:o,active:!0}).select().single();if(y)throw console.error("Error creating dump site:",y),y;return p}const s=R();s.dumpSites||(s.dumpSites=[]);const f={id:crypto.randomUUID(),company_id:r,name:l,address:c,notes:o,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return s.dumpSites.push(f),I(s),f},async updateDumpSite(r,l){if(h){const{data:s,error:f}=await _.from("dump_sites").update({...l,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(f)throw console.error("Error updating dump site:",f),f;return s}const c=R();if(!c.dumpSites)return null;const o=c.dumpSites.findIndex(s=>s.id===r);return o===-1?null:(c.dumpSites[o]={...c.dumpSites[o],...l},I(c),c.dumpSites[o])},async deleteDumpSite(r){return this.updateDumpSite(r,{active:!1})},async setDumpSiteRate(r,l,c,o="load"){if(h){const{data:y}=await _.from("dump_site_rates").select("id").eq("dump_site_id",r).eq("waste_type",l).maybeSingle();if(y){const{data:w,error:N}=await _.from("dump_site_rates").update({estimated_cost_per_load:c,unit:o}).eq("id",y.id).select().single();if(N)throw console.error("Error updating dump site rate:",N),N;return w}else{const{data:w,error:N}=await _.from("dump_site_rates").insert({dump_site_id:r,waste_type:l,estimated_cost_per_load:c,unit:o}).select().single();if(N)throw console.error("Error inserting dump site rate:",N),N;return w}}const s=R();s.dumpSiteRates||(s.dumpSiteRates=[]);const f=s.dumpSiteRates.findIndex(y=>y.dump_site_id===r&&y.waste_type===l),p={id:f>=0?s.dumpSiteRates[f].id:crypto.randomUUID(),dump_site_id:r,waste_type:l,estimated_cost_per_load:c,unit:o,created_at:new Date().toISOString()};return f>=0?s.dumpSiteRates[f]=p:s.dumpSiteRates.push(p),I(s),p},async getDumpSiteRates(r){if(h){const{data:c,error:o}=await _.from("dump_site_rates").select("*").eq("dump_site_id",r);return o?(console.error("Error fetching dump site rates:",o),[]):c||[]}return(R().dumpSiteRates||[]).filter(c=>c.dump_site_id===r)},async getHaulOffs(r){if(h){const{data:c,error:o}=await _.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",r).order("work_date",{ascending:!1});return o?(console.error("Error fetching haul-offs:",o),[]):c||[]}return(R().haulOffs||[]).filter(c=>c.project_id===r).sort((c,o)=>new Date(o.work_date)-new Date(c.work_date))},async createHaulOff(r,l){const c={project_id:r,dump_site_id:l.dumpSiteId,waste_type:l.wasteType,loads:l.loads,hauling_company:l.haulingCompany||"",work_date:l.workDate,notes:l.notes||"",estimated_cost:l.estimatedCost||0,created_by:l.createdBy||""};if(h){const{data:f,error:p}=await _.from("haul_offs").insert(c).select().single();if(p)throw console.error("Error creating haul-off:",p),p;return f}const o=R();o.haulOffs||(o.haulOffs=[]);const s={...c,id:crypto.randomUUID(),created_at:new Date().toISOString()};return o.haulOffs.push(s),I(o),s},async calculateHaulOffCosts(r){const l=await this.getHaulOffs(r);let c=0,o=0;const s={},f=[],p={};l.forEach(w=>{const N=parseFloat(w.estimated_cost)||0,B=parseInt(w.loads)||0;c+=N,o+=B,s[w.waste_type]||(s[w.waste_type]={loads:0,cost:0}),s[w.waste_type].loads+=B,s[w.waste_type].cost+=N,p[w.work_date]||(p[w.work_date]={date:w.work_date,loads:0,cost:0}),p[w.work_date].loads+=B,p[w.work_date].cost+=N}),Object.values(p).sort((w,N)=>new Date(N.date)-new Date(w.date)).forEach(w=>f.push(w));const y=f.length;return{totalCost:c,totalLoads:o,byWasteType:s,byDate:f,daysWithHaulOff:y,avgDailyHaulOffCost:y>0?c/y:0}},subscribeToHaulOffs(r,l){return h?_.channel(`haul_offs:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${r}`},l).subscribe():null},async createCOR(r,l=0){if(h){let c=r.cor_number;l>0&&(c=await this.getNextCORNumber(r.project_id));const{data:o,error:s}=await _.from("change_orders").insert({company_id:r.company_id,project_id:r.project_id,area_id:r.area_id||null,cor_number:c,title:r.title,description:r.description||"",scope_of_work:r.scope_of_work,period_start:r.period_start,period_end:r.period_end,status:"draft",labor_markup_percent:r.labor_markup_percent??1500,materials_markup_percent:r.materials_markup_percent??1500,equipment_markup_percent:r.equipment_markup_percent??1500,subcontractors_markup_percent:r.subcontractors_markup_percent??500,liability_insurance_percent:r.liability_insurance_percent??144,bond_percent:r.bond_percent??100,license_fee_percent:r.license_fee_percent??10,created_by:r.created_by||null}).select().single();if((s?.code==="23505"||s?.code==="PGRST116"||s?.status===409||s?.message?.includes("duplicate")||s?.message?.includes("unique_cor_number"))&&l<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${l+1})`),this.createCOR(r,l+1);if(s)throw s;return o}return null},async updateCOR(r,l){if(h){const{data:c,error:o}=await _.from("change_orders").update({...l,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(o)throw o;return c}return null},async deleteCOR(r){if(h){const{error:l}=await _.from("change_orders").delete().eq("id",r);if(l)throw l}},async bulkUpdateCORGroup(r,l){if(h){const{error:c}=await _.from("change_orders").update({group_name:l,updated_at:new Date().toISOString()}).in("id",r);if(c)throw c.message?.includes("group_name")||c.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):c}},async getCORs(r,l={}){if(h){let c=_.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",r);l.status&&(c=c.eq("status",l.status)),l.area_id&&(c=c.eq("area_id",l.area_id)),l.date_start&&(c=c.gte("period_start",l.date_start)),l.date_end&&(c=c.lte("period_end",l.date_end)),c=c.order("created_at",{ascending:!1});const{data:o,error:s}=await c;if(s)throw s;return o}return[]},async getCORById(r){if(h){const{data:l,error:c}=await _.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",r).single();if(c)throw c;return l}return null},async getCORsByArea(r,l){if(h){const{data:c,error:o}=await _.from("change_orders").select("*").eq("project_id",r).eq("area_id",l).order("created_at",{ascending:!1});if(o)throw o;return c}return[]},async getAssignableCORs(r){if(h){const{data:l,error:c}=await _.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",r).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(c)throw c;return l||[]}return[]},async getNextCORNumber(r){if(h){const{data:l,error:c}=await _.from("change_orders").select("cor_number").eq("project_id",r);if(c)throw c;if(l&&l.length>0){let o=0;for(const s of l){const f=s.cor_number?.match(/COR #(\d+)/);if(f){const p=parseInt(f[1]);p>o&&(o=p)}}return`COR #${o+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(r,l){if(h){const c=Math.round(l.regular_hours*l.regular_rate),o=Math.round(l.overtime_hours*l.overtime_rate),s=c+o,{data:f,error:p}=await _.from("change_order_labor").insert({change_order_id:r,labor_class:l.labor_class,wage_type:l.wage_type||"standard",regular_hours:l.regular_hours||0,overtime_hours:l.overtime_hours||0,regular_rate:l.regular_rate||0,overtime_rate:l.overtime_rate||0,regular_total:c,overtime_total:o,total:s,sort_order:l.sort_order||0,source_ticket_id:l.source_ticket_id||null}).select().single();if(p)throw p;return f}return null},async updateCORLaborItem(r,l){if(h){let c={...l};if(l.regular_hours!==void 0||l.regular_rate!==void 0||l.overtime_hours!==void 0||l.overtime_rate!==void 0){const{data:f}=await _.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",r).single(),p=l.regular_hours??f?.regular_hours??0,y=l.overtime_hours??f?.overtime_hours??0,w=l.regular_rate??f?.regular_rate??0,N=l.overtime_rate??f?.overtime_rate??0;c.regular_total=Math.round(p*w),c.overtime_total=Math.round(y*N),c.total=c.regular_total+c.overtime_total}const{data:o,error:s}=await _.from("change_order_labor").update(c).eq("id",r).select().single();if(s)throw s;return o}return null},async deleteCORLaborItem(r){if(h){const{error:l}=await _.from("change_order_labor").delete().eq("id",r);if(l)throw l}},async addCORMaterialItem(r,l){if(h){const o=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(l.source_type)?l.source_type:"custom",s=Math.round(Number(l.unit_cost)||0),f=Number(l.quantity)||1,p=Math.round(f*s),{data:y,error:w}=await _.from("change_order_materials").insert({change_order_id:r,description:l.description||"",quantity:f,unit:l.unit||"each",unit_cost:s,total:p,source_type:o,source_reference:l.source_reference||null,source_ticket_id:l.source_ticket_id||null,sort_order:l.sort_order||0}).select().single();if(w)throw w;return y}return null},async updateCORMaterialItem(r,l){if(h){let c={...l};if(l.quantity!==void 0||l.unit_cost!==void 0){const{data:f}=await _.from("change_order_materials").select("quantity, unit_cost").eq("id",r).single(),p=l.quantity??f?.quantity??1,y=l.unit_cost??f?.unit_cost??0;c.total=Math.round(p*y)}const{data:o,error:s}=await _.from("change_order_materials").update(c).eq("id",r).select().single();if(s)throw s;return o}return null},async deleteCORMaterialItem(r){if(h){const{error:l}=await _.from("change_order_materials").delete().eq("id",r);if(l)throw l}},async addCOREquipmentItem(r,l){if(h){const o=["backup_sheet","invoice","custom","field_ticket","rental"].includes(l.source_type)?l.source_type:"custom",s=Math.round(Number(l.unit_cost)||0),f=Number(l.quantity)||1,p=Math.round(f*s),{data:y,error:w}=await _.from("change_order_equipment").insert({change_order_id:r,description:l.description||"",quantity:f,unit:l.unit||"day",unit_cost:s,total:p,source_type:o,source_reference:l.source_reference||null,source_ticket_id:l.source_ticket_id||null,sort_order:l.sort_order||0}).select().single();if(w)throw w;return y}return null},async updateCOREquipmentItem(r,l){if(h){let c={...l};if(l.quantity!==void 0||l.unit_cost!==void 0){const{data:f}=await _.from("change_order_equipment").select("quantity, unit_cost").eq("id",r).single(),p=l.quantity??f?.quantity??1,y=l.unit_cost??f?.unit_cost??0;c.total=Math.round(p*y)}const{data:o,error:s}=await _.from("change_order_equipment").update(c).eq("id",r).select().single();if(s)throw s;return o}return null},async deleteCOREquipmentItem(r){if(h){const{error:l}=await _.from("change_order_equipment").delete().eq("id",r);if(l)throw l}},async addCORSubcontractorItem(r,l){if(h){const c=Math.round(l.quantity*l.unit_cost),{data:o,error:s}=await _.from("change_order_subcontractors").insert({change_order_id:r,description:l.description,quantity:l.quantity||1,unit:l.unit||"lump sum",unit_cost:l.unit_cost||0,total:c,source_type:l.source_type||"custom",source_reference:l.source_reference||null,sort_order:l.sort_order||0}).select().single();if(s)throw s;return o}return null},async updateCORSubcontractorItem(r,l){if(h){let c={...l};if(l.quantity!==void 0||l.unit_cost!==void 0){const{data:f}=await _.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",r).single(),p=l.quantity??f?.quantity??1,y=l.unit_cost??f?.unit_cost??0;c.total=Math.round(p*y)}const{data:o,error:s}=await _.from("change_order_subcontractors").update(c).eq("id",r).select().single();if(s)throw s;return o}return null},async deleteCORSubcontractorItem(r){if(h){const{error:l}=await _.from("change_order_subcontractors").delete().eq("id",r);if(l)throw l}},async addBulkLaborItems(r,l){if(h&&l.length>0){const c=l.map((f,p)=>{const y=Math.round(f.regular_hours*f.regular_rate),w=Math.round(f.overtime_hours*f.overtime_rate);return{change_order_id:r,labor_class:f.labor_class,wage_type:f.wage_type||"standard",regular_hours:f.regular_hours||0,overtime_hours:f.overtime_hours||0,regular_rate:f.regular_rate||0,overtime_rate:f.overtime_rate||0,regular_total:y,overtime_total:w,total:y+w,sort_order:f.sort_order??p,source_ticket_id:f.source_ticket_id||null}}),{data:o,error:s}=await _.from("change_order_labor").insert(c).select();if(s)throw s;return o}return[]},async addBulkMaterialItems(r,l){if(h&&l.length>0){const c=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],o=l.map((p,y)=>{const w=c.includes(p.source_type)?p.source_type:"custom",N=Math.round(Number(p.unit_cost)||0),B=Number(p.quantity)||1;return{change_order_id:r,description:p.description||"",quantity:B,unit:p.unit||"each",unit_cost:N,total:Math.round(B*N),source_type:w,source_reference:p.source_reference||null,source_ticket_id:p.source_ticket_id||null,sort_order:p.sort_order??y}}),{data:s,error:f}=await _.from("change_order_materials").insert(o).select();if(f)throw f;return s}return[]},async addBulkEquipmentItems(r,l){if(h&&l.length>0){const c=["backup_sheet","invoice","custom","field_ticket","rental"],o=l.map((p,y)=>{const w=c.includes(p.source_type)?p.source_type:"custom",N=Math.round(Number(p.unit_cost)||0),B=Number(p.quantity)||1;return{change_order_id:r,description:p.description||"",quantity:B,unit:p.unit||"day",unit_cost:N,total:Math.round(B*N),source_type:w,source_reference:p.source_reference||null,source_ticket_id:p.source_ticket_id||null,sort_order:p.sort_order??y}}),{data:s,error:f}=await _.from("change_order_equipment").insert(o).select();if(f)throw f;return s}return[]},async addBulkSubcontractorItems(r,l){if(h&&l.length>0){const c=l.map((f,p)=>({change_order_id:r,company_name:f.company_name||"",description:f.description||"",quantity:f.quantity||1,unit:f.unit||"lump sum",unit_cost:f.unit_cost||f.total||f.amount||0,total:f.total||f.amount||0,source_type:f.source_type||"invoice",source_reference:f.source_reference||null,sort_order:f.sort_order??p})),{data:o,error:s}=await _.from("change_order_subcontractors").insert(c).select();if(s)throw s;return o}return[]},async clearCORLineItems(r){h&&(await _.from("change_order_labor").delete().eq("change_order_id",r),await _.from("change_order_materials").delete().eq("change_order_id",r),await _.from("change_order_equipment").delete().eq("change_order_id",r),await _.from("change_order_subcontractors").delete().eq("change_order_id",r))},async saveCORLineItems(r,{laborItems:l,materialItems:c,equipmentItems:o,subcontractorItems:s}){if(h){await this.clearCORLineItems(r);const f=await Promise.all([l?.length>0?this.addBulkLaborItems(r,l):[],c?.length>0?this.addBulkMaterialItems(r,c):[],o?.length>0?this.addBulkEquipmentItems(r,o):[],s?.length>0?this.addBulkSubcontractorItems(r,s):[]]);return{labor:f[0],materials:f[1],equipment:f[2],subcontractors:f[3]}}return null},async assignTicketToCOR(r,l){if(h){const{error:c}=await _.rpc("assign_ticket_to_cor",{p_ticket_id:r,p_cor_id:l});if(c)throw ee.error("database",{message:c.message,operation:"assignTicketToCOR",extra:{ticketId:r,corId:l}}),c;return{ticket_id:r,change_order_id:l}}return null},async unassignTicketFromCOR(r,l){if(h){const{error:c}=await _.rpc("unassign_ticket_from_cor",{p_ticket_id:r,p_cor_id:l});if(c)throw ee.error("database",{message:c.message,operation:"unassignTicketFromCOR",extra:{ticketId:r,corId:l}}),c}},async checkTicketCORIntegrity(){if(h){const{data:r,error:l}=await _.rpc("check_ticket_cor_integrity");if(l)throw l;return r||[]}return[]},async fixTicketCORIntegrity(){if(h){const{data:r,error:l}=await _.rpc("fix_ticket_cor_integrity");if(l)throw l;return r}return 0},async getTicketsForCOR(r){if(h){const{data:l,error:c}=await _.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",r);if(c)throw c;return l}return[]},async getUnassignedTickets(r){if(h){const{data:l,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",r).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(c)throw c;return l}return[]},async importTicketDataToCOR(r,l,c,o,s){if(h){const{data:f,error:p}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",r).single();if(p)throw p;const{data:y,error:w}=await _.from("labor_rates").select("*").eq("company_id",c).eq("work_type",o||"demolition").eq("job_type",s||"standard");if(w)throw w;const N={};y?.forEach(H=>{N[H.role.toLowerCase()]=H});const B={};f.t_and_m_workers?.forEach(H=>{const ce=(H.role||"laborer").toLowerCase();B[ce]||(B[ce]={regular_hours:0,overtime_hours:0}),B[ce].regular_hours+=parseFloat(H.hours)||0,B[ce].overtime_hours+=parseFloat(H.overtime_hours)||0});const M=Object.entries(B).map(([H,ce])=>{const se=N[H]||{regular_rate:0,overtime_rate:0},_e=Math.round((parseFloat(se.regular_rate)||0)*100),F=Math.round((parseFloat(se.overtime_rate)||0)*100);return{labor_class:H.charAt(0).toUpperCase()+H.slice(1),wage_type:s||"standard",regular_hours:ce.regular_hours,overtime_hours:ce.overtime_hours,regular_rate:_e,overtime_rate:F,source_ticket_id:r}});M.length>0&&await this.addBulkLaborItems(l,M);const Q=[],Z=[];f.t_and_m_items?.forEach(H=>{const ce=H.custom_name||H.materials_equipment?.name||"Unknown Item",se=H.custom_category||H.materials_equipment?.category||"Other",_e=H.materials_equipment?.unit||"each",F=Math.round((parseFloat(H.materials_equipment?.cost_per_unit)||0)*100),J={description:ce,quantity:H.quantity||1,unit:_e,unit_cost:F,source_type:"backup_sheet",source_ticket_id:r};se==="Equipment"?Z.push(J):Q.push(J)}),Q.length>0&&await this.addBulkMaterialItems(l,Q),Z.length>0&&await this.addBulkEquipmentItems(l,Z);const{error:L}=await _.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",l).eq("ticket_id",r);if(L)throw L;return ee.activity("cor_import_success",{ticket_id:r,cor_id:l,labor_count:M.length,material_count:Q.length,equipment_count:Z.length}),{laborItems:M,materialItems:Q,equipmentItems:Z}}return null},async reimportTicketDataToCOR(r,l,c,o,s){return h?(await _.from("change_order_labor").delete().eq("change_order_id",l).eq("source_ticket_id",r),await _.from("change_order_materials").delete().eq("change_order_id",l).eq("source_ticket_id",r),await _.from("change_order_equipment").delete().eq("change_order_id",l).eq("source_ticket_id",r),this.importTicketDataToCOR(r,l,c,o,s)):null},async markImportFailed(r,l,c="Import failed"){if(h){const{error:o}=await _.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:c}).eq("change_order_id",l).eq("ticket_id",r);if(o)throw ee.error("database",{message:o.message,operation:"markImportFailed",extra:{ticketId:r,corId:l}}),o;ee.error("cor_import_failed",{ticket_id:r,cor_id:l,error:c})}},async getTicketsNeedingImport(r){if(h){const{data:l,error:c}=await _.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",r).eq("change_order_ticket_associations.import_status","failed");if(c)throw c;return l||[]}return[]},async getTicketImportStatus(r,l){if(h){const{data:c,error:o}=await _.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",r).eq("change_order_id",l).single();if(o&&o.code!=="PGRST116")throw o;return c}return null},async recalculateCOR(r){if(h){const{error:l}=await _.rpc("recalculate_cor_totals",{cor_id:r});if(l)throw l;return this.getCORById(r)}return null},async updateCORMarkupPercentages(r,l){if(h){const c={};l.labor!==void 0&&(c.labor_markup_percent=l.labor),l.materials!==void 0&&(c.materials_markup_percent=l.materials),l.equipment!==void 0&&(c.equipment_markup_percent=l.equipment),l.subcontractors!==void 0&&(c.subcontractors_markup_percent=l.subcontractors);const{data:o,error:s}=await _.from("change_orders").update(c).eq("id",r).select().single();if(s)throw s;return o}return null},async updateCORFeePercentages(r,l){if(h){const c={};l.liabilityInsurance!==void 0&&(c.liability_insurance_percent=l.liabilityInsurance),l.bond!==void 0&&(c.bond_percent=l.bond),l.licenseFee!==void 0&&(c.license_fee_percent=l.licenseFee);const{data:o,error:s}=await _.from("change_orders").update(c).eq("id",r).select().single();if(s)throw s;return o}return null},async submitCORForApproval(r){if(h){const{data:l,error:c}=await _.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",r).select().single();if(c)throw c;return l}return null},async approveCOR(r,l){if(h){const{data:c,error:o}=await _.from("change_orders").update({status:"approved",approved_by:l,approved_at:new Date().toISOString()}).eq("id",r).select().single();if(o)throw o;return c}return null},async rejectCOR(r,l=null){if(h){const{data:c,error:o}=await _.from("change_orders").update({status:"rejected",rejection_reason:l}).eq("id",r).select().single();if(o)throw o;return c}return null},async markCORAsBilled(r){if(h){const{data:l,error:c}=await _.from("change_orders").update({status:"billed"}).eq("id",r).select().single();if(c)throw c;return l}return null},async closeCOR(r){if(h){const{data:l,error:c}=await _.from("change_orders").update({status:"closed"}).eq("id",r).select().single();if(c)throw c;return l}return null},async saveCORSignature(r,l,c){if(h){const{data:o,error:s}=await _.from("change_orders").update({gc_signature_data:l,gc_signature_name:c,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",r).select().single();if(s)throw s;return o}return null},async getCORStats(r){if(h){const{data:l,error:c}=await _.from("change_orders").select("status, cor_total").eq("project_id",r);if(c)throw c;const o={total_cors:l.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return l.forEach(s=>{switch(s.status){case"draft":o.draft_count++;break;case"pending_approval":o.pending_count++,o.total_pending_value+=s.cor_total||0;break;case"approved":o.approved_count++,o.total_approved_value+=s.cor_total||0;break;case"rejected":o.rejected_count++;break;case"billed":case"closed":o.billed_count++,o.total_billed_value+=s.cor_total||0;break}}),o}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(r,l){return h?_.channel(`change_orders:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${r}`},l).subscribe():null},subscribeToCorTickets(r,l){return h?_.channel(`cor-tickets:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${r}`},l).subscribe():null},async getCORLog(r){if(h){const{data:l,error:c}=await _.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",r).order("log_number",{ascending:!0});if(c)throw console.error("Error fetching COR log:",c),c;return(l||[]).map(o=>({id:o.id,logNumber:o.log_number,dateSentToClient:o.date_sent_to_client,ceNumber:o.ce_number,comments:o.comments,createdAt:o.created_at,updatedAt:o.updated_at,changeOrder:{id:o.change_order?.id,corNumber:o.change_order?.cor_number,title:o.change_order?.title,corTotal:o.change_order?.cor_total,status:o.change_order?.status,createdAt:o.change_order?.created_at,approvedAt:o.change_order?.approved_at,approvedBy:o.change_order?.approved_by}}))}return[]},async updateCORLogEntry(r,l){if(h){const c={updated_at:new Date().toISOString()};l.dateSentToClient!==void 0&&(c.date_sent_to_client=l.dateSentToClient||null),l.ceNumber!==void 0&&(c.ce_number=l.ceNumber||null),l.comments!==void 0&&(c.comments=l.comments||null);const{data:o,error:s}=await _.from("cor_log_entries").update(c).eq("id",r).select().single();if(s)throw console.error("Error updating COR log entry:",s),s;return o}return null},async updateChangeOrderStatus(r,l){if(h){const{data:c,error:o}=await _.from("change_orders").update({status:l,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(o)throw console.error("Error updating change order status:",o),o;return c}return null},subscribeToCORLog(r,l){return h?_.channel(`cor-log:${r}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${r}`},l).subscribe():null},async createSignatureRequest(r,l,c,o,s=null,f=null){if(h){const{data:p,error:y}=await _.rpc("generate_signature_token");if(y)throw y;const{data:w,error:N}=await _.from("signature_requests").insert({document_type:r,document_id:l,company_id:c,project_id:o,signature_token:p,expires_at:f,created_by:s}).select().single();if(N)throw N;return w}return null},async getSignatureRequestByToken(r){if(h){await _.rpc("increment_signature_view_count",{token:r});const{data:l,error:c}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",r).single();if(c)throw c;return l}return null},async getSignatureRequestsForDocument(r,l){if(h){const{data:c,error:o}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",r).eq("document_id",l).order("created_at",{ascending:!1});if(o)throw o;return c||[]}return[]},async addSignature(r,l,c){if(h){const{data:o,error:s}=await _.from("signatures").insert({signature_request_id:r,signature_slot:l,signature_image:c.signature,signer_name:c.signerName,signer_title:c.signerTitle||null,signer_company:c.signerCompany||null,signed_at:c.signedAt||new Date().toISOString(),ip_address:c.ipAddress||null,user_agent:c.userAgent||null}).select().single();if(s)throw s;return o}return null},async syncSignatureToDocument(r,l){if(!h)return null;const{document_type:c,document_id:o}=l,s=r.signature_slot,f={};s===1?(f.gc_signature_data=r.signature_image,f.gc_signature_name=r.signer_name,f.gc_signature_title=r.signer_title,f.gc_signature_company=r.signer_company,f.gc_signature_date=r.signed_at,f.gc_signature_ip=r.ip_address):s===2&&(f.client_signature_data=r.signature_image,f.client_signature_name=r.signer_name,f.client_signature_title=r.signer_title,f.client_signature_company=r.signer_company,f.client_signature_date=r.signed_at,f.client_signature_ip=r.ip_address);const p=c==="cor"?"change_orders":"t_and_m_tickets",{data:y,error:w}=await _.from(p).update(f).eq("id",o).select().single();if(w)throw w;return y},async revokeSignatureRequest(r){if(h){const{data:l,error:c}=await _.from("signature_requests").update({status:"revoked"}).eq("id",r).select().single();if(c)throw c;return l}return null},async getDocumentForSigning(r,l){if(!h)return null;if(r==="cor"){const{data:c,error:o}=await _.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",l).single();if(o)throw o;return c}else if(r==="tm_ticket"){const{data:c,error:o}=await _.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (*)
        `).eq("id",l).single();if(o)throw o;return c}return null},async getProjectCosts(r){if(h){const{data:c,error:o}=await _.from("project_costs").select("*").eq("project_id",r).order("cost_date",{ascending:!1});return o?(console.error("Error fetching project costs:",o),[]):c||[]}return(R().projectCosts||[]).filter(c=>c.project_id===r).sort((c,o)=>new Date(o.cost_date)-new Date(c.cost_date))},async addProjectCost(r,l,c){const o={project_id:r,company_id:l,category:c.category,description:c.description,amount:parseFloat(c.amount),cost_date:c.cost_date||new Date().toISOString().split("T")[0],notes:c.notes||null,created_by:c.created_by||null};if(h){const{data:p,error:y}=await _.from("project_costs").insert(o).select().single();if(y)throw console.error("Error adding project cost:",y),y;return p}const s=R();s.projectCosts||(s.projectCosts=[]);const f={...o,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s.projectCosts.push(f),I(s),f},async updateProjectCost(r,l){const c={category:l.category,description:l.description,amount:parseFloat(l.amount),cost_date:l.cost_date,notes:l.notes||null,updated_at:new Date().toISOString()};if(h){const{data:f,error:p}=await _.from("project_costs").update(c).eq("id",r).select().single();if(p)throw console.error("Error updating project cost:",p),p;return f}const o=R();if(!o.projectCosts)return null;const s=o.projectCosts.findIndex(f=>f.id===r);return s===-1?null:(o.projectCosts[s]={...o.projectCosts[s],...c},I(o),o.projectCosts[s])},async deleteProjectCost(r){if(h){const{error:c}=await _.from("project_costs").delete().eq("id",r);if(c)throw console.error("Error deleting project cost:",c),c;return!0}const l=R();return l.projectCosts&&(l.projectCosts=l.projectCosts.filter(c=>c.id!==r),I(l)),!0},async getProjectCostsSummary(r){const l=await this.getProjectCosts(r),c={};let o=0;return l.forEach(s=>{const f=parseFloat(s.amount)||0;o+=f,c[s.category]||(c[s.category]={category:s.category,total:0,count:0,items:[]}),c[s.category].total+=f,c[s.category].count++,c[s.category].items.push(s)}),Object.values(c).forEach(s=>{s.percentage=o>0?s.total/o*100:0}),{totalCost:o,byCategory:c,itemCount:l.length}},async getNextInvoiceNumber(r){if(h){const{data:l,error:c}=await _.rpc("get_next_invoice_number",{p_company_id:r});return c?(console.error("Error getting next invoice number:",c),this._generateLocalInvoiceNumber(r)):l}return this._generateLocalInvoiceNumber(r)},async _generateLocalInvoiceNumber(r){const c=(await this.getCompanyInvoices(r)).reduce((o,s)=>{const f=s.invoice_number?.match(/^INV-(\d+)$/);if(f){const p=parseInt(f[1],10);return p>o?p:o}return o},0);return`INV-${String(c+1).padStart(4,"0")}`},async getBillableItems(r){if(h){const{data:l,error:c}=await _.from("change_orders").select("id, cor_number, title, cor_total, status, approved_at").eq("project_id",r).eq("status","approved").order("cor_number",{ascending:!0});c&&console.error("Error fetching billable CORs:",c);const{data:o,error:s}=await _.from("t_and_m_tickets").select("id, work_date, ce_pco_number, change_order_value, status, client_signature_date").eq("project_id",r).eq("status","approved").not("client_signature_data","is",null).order("work_date",{ascending:!0});return s&&console.error("Error fetching billable T&M tickets:",s),{cors:l||[],tickets:o||[]}}return{cors:[],tickets:[]}},async getProjectInvoices(r){if(h){const{data:c,error:o}=await _.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("project_id",r).order("invoice_date",{ascending:!1});if(o)throw console.error("Error fetching project invoices:",o),o;return c||[]}return(R().invoices||[]).filter(c=>c.project_id===r)},async getCompanyInvoices(r){if(h){const{data:c,error:o}=await _.from("invoices").select("*").eq("company_id",r).order("invoice_date",{ascending:!1});if(o)throw console.error("Error fetching company invoices:",o),o;return c||[]}return(R().invoices||[]).filter(c=>c.company_id===r)},async createInvoice(r,l){if(h){const{data:s,error:f}=await _.from("invoices").insert({project_id:r.project_id,company_id:r.company_id,invoice_number:r.invoice_number,invoice_date:r.invoice_date,due_date:r.due_date,status:r.status||"draft",retention_percent:r.retention_percent||0,bill_to_name:r.bill_to_name,bill_to_address:r.bill_to_address,bill_to_contact:r.bill_to_contact,notes:r.notes,terms:r.terms||"Net 30",created_by:r.created_by}).select().single();if(f)throw console.error("Error creating invoice:",f),f;if(l&&l.length>0){const p=l.map((w,N)=>({invoice_id:s.id,item_type:w.item_type,reference_id:w.reference_id,reference_number:w.reference_number,description:w.description,amount:w.amount,sort_order:N})),{error:y}=await _.from("invoice_items").insert(p);if(y)throw console.error("Error creating invoice items:",y),await _.from("invoices").delete().eq("id",s.id),y}return this.getInvoice(s.id)}const c=R();c.invoices||(c.invoices=[]);const o={...r,id:qt(),created_at:new Date().toISOString(),invoice_items:l||[]};return c.invoices.push(o),I(c),o},async getInvoice(r){if(h){const{data:c,error:o}=await _.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",r).single();if(o)throw console.error("Error fetching invoice:",o),o;return c}return(R().invoices||[]).find(c=>c.id===r)},async updateInvoice(r,l){if(h){const{data:s,error:f}=await _.from("invoices").update(l).eq("id",r).select().single();if(f)throw console.error("Error updating invoice:",f),f;return s}const c=R(),o=(c.invoices||[]).findIndex(s=>s.id===r);return o>=0?(c.invoices[o]={...c.invoices[o],...l},I(c),c.invoices[o]):null},async markInvoiceSent(r){return this.updateInvoice(r,{status:"sent",sent_at:new Date().toISOString()})},async recordInvoicePayment(r,l){const c=await this.getInvoice(r);if(!c)throw new Error("Invoice not found");const o=(c.amount_paid||0)+l,s=o>=c.total;return this.updateInvoice(r,{amount_paid:o,status:s?"paid":"partial",paid_at:s?new Date().toISOString():null})},async deleteInvoice(r){if(h){const{error:c}=await _.from("invoices").delete().eq("id",r).eq("status","draft");if(c)throw console.error("Error deleting invoice:",c),c;return!0}const l=R();return l.invoices=(l.invoices||[]).filter(c=>c.id!==r),I(l),!0},async markItemsBilled(r=[],l=[]){if(h){if(r.length>0){const{error:c}=await _.from("change_orders").update({status:"billed"}).in("id",r);c&&console.error("Error marking CORs as billed:",c)}if(l.length>0){const{error:c}=await _.from("t_and_m_tickets").update({status:"billed"}).in("id",l);c&&console.error("Error marking T&M tickets as billed:",c)}}}},Sh={async getCompanyEquipment(r,l=!0){if(!h)return console.warn("Supabase not configured"),[];let c=_.from("equipment").select("*").eq("company_id",r).order("name");l&&(c=c.eq("is_active",!0));const{data:o,error:s}=await c;return s?(console.error("Error fetching company equipment:",s),[]):o||[]},async createEquipment(r){if(!h)return console.warn("Supabase not configured"),null;const{data:l,error:c}=await _.from("equipment").insert(r).select().single();if(c)throw console.error("Error creating equipment:",c),c;return l},async updateEquipment(r,l){if(!h)return console.warn("Supabase not configured"),null;const{data:c,error:o}=await _.from("equipment").update(l).eq("id",r).select().single();if(o)throw console.error("Error updating equipment:",o),o;return c},async deactivateEquipment(r){return this.updateEquipment(r,{is_active:!1})},async getProjectEquipment(r){if(!h)return console.warn("Supabase not configured"),[];const{data:l,error:c}=await _.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",r).order("start_date",{ascending:!1});return c?(console.error("Error fetching project equipment:",c),[]):l||[]},async getActiveProjectEquipment(r){if(!h)return console.warn("Supabase not configured"),[];const{data:l,error:c}=await _.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",r).is("end_date",null).order("start_date",{ascending:!1});return c?(console.error("Error fetching active project equipment:",c),[]):l||[]},async addEquipmentToProject(r){if(!h)return console.warn("Supabase not configured"),null;const{data:l,error:c}=await _.from("project_equipment").insert(r).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(c)throw console.error("Error adding equipment to project:",c),c;return l},async updateProjectEquipment(r,l){if(!h)return console.warn("Supabase not configured"),null;const{data:c,error:o}=await _.from("project_equipment").update(l).eq("id",r).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(o)throw console.error("Error updating project equipment:",o),o;return c},async markEquipmentReturned(r,l=null){return this.updateProjectEquipment(r,{end_date:l||new Date().toISOString().split("T")[0]})},async removeEquipmentFromProject(r){if(!h)return console.warn("Supabase not configured"),!1;const{error:l}=await _.from("project_equipment").delete().eq("id",r);if(l)throw console.error("Error removing project equipment:",l),l;return!0},calculateProjectEquipmentCost(r){const l=new Date;return l.setHours(0,0,0,0),r.reduce((c,o)=>{const s=new Date(o.start_date);s.setHours(0,0,0,0);let f;o.end_date?(f=new Date(o.end_date),f.setHours(0,0,0,0)):f=l;const p=Math.max(1,Math.floor((f-s)/(1e3*60*60*24))+1);return c+o.daily_rate*p},0)},calculateDaysOnSite(r,l=null){const c=new Date(r);c.setHours(0,0,0,0);let o;return l?o=new Date(l):o=new Date,o.setHours(0,0,0,0),Math.max(1,Math.floor((o-c)/(1e3*60*60*24))+1)}},wh={async getNextDrawNumber(r){if(!h)return console.warn("Supabase not configured"),1;const{data:l,error:c}=await _.from("draw_requests").select("draw_number").eq("project_id",r).order("draw_number",{ascending:!1}).limit(1).single();return c&&c.code!=="PGRST116"&&console.error("Error getting next draw number:",c),(l?.draw_number||0)+1},async getPreviousBillingTotals(r){if(!h)return console.warn("Supabase not configured"),{totalBilled:0,totalRetention:0};const{data:l,error:c}=await _.from("draw_requests").select("current_billing, retention_held").eq("project_id",r).in("status",["submitted","approved","paid"]);if(c)return console.error("Error getting previous billing totals:",c),{totalBilled:0,totalRetention:0};const o=(l||[]).reduce((f,p)=>f+(p.current_billing||0),0),s=l?.length>0?Math.max(...l.map(f=>f.retention_held||0)):0;return{totalBilled:o,totalRetention:s}},async getProjectDrawRequests(r){if(!h)return console.warn("Supabase not configured"),[];const{data:l,error:c}=await _.from("draw_requests").select("*").eq("project_id",r).order("draw_number",{ascending:!1});return c?(console.error("Error fetching draw requests:",c),[]):l||[]},async getDrawRequest(r){if(!h)return console.warn("Supabase not configured"),null;const{data:l,error:c}=await _.from("draw_requests").select(`
        *,
        draw_request_items (
          *
        )
      `).eq("id",r).single();return c?(console.error("Error fetching draw request:",c),null):l},async createDrawRequest(r,l){if(!h)return console.warn("Supabase not configured"),null;const{data:c,error:o}=await _.from("draw_requests").insert(r).select().single();if(o)throw console.error("Error creating draw request:",o),o;if(l&&l.length>0){const s=l.map((p,y)=>({...p,draw_request_id:c.id,sort_order:y})),{error:f}=await _.from("draw_request_items").insert(s);f&&console.error("Error creating draw request items:",f)}return this.getDrawRequest(c.id)},async updateDrawRequest(r,l){if(!h)return console.warn("Supabase not configured"),null;const{data:c,error:o}=await _.from("draw_requests").update(l).eq("id",r).select().single();if(o)throw console.error("Error updating draw request:",o),o;return c},async updateDrawRequestStatus(r,l){const c={status:l};return l==="submitted"?c.submitted_at=new Date().toISOString():l==="approved"?c.approved_at=new Date().toISOString():l==="paid"&&(c.paid_at=new Date().toISOString()),this.updateDrawRequest(r,c)},async updateDrawRequestItems(r,l){if(!h)return console.warn("Supabase not configured"),!1;const{error:c}=await _.from("draw_request_items").delete().eq("draw_request_id",r);if(c)throw console.error("Error deleting old draw request items:",c),c;if(l&&l.length>0){const o=l.map((f,p)=>({...f,draw_request_id:r,sort_order:p})),{error:s}=await _.from("draw_request_items").insert(o);if(s)throw console.error("Error inserting draw request items:",s),s}return!0},async deleteDrawRequest(r){if(!h)return console.warn("Supabase not configured"),!1;const{error:l}=await _.from("draw_requests").delete().eq("id",r);if(l)throw console.error("Error deleting draw request:",l),l;return!0},async getScheduleOfValues(r){if(!h)return console.warn("Supabase not configured"),[];const{data:l,error:c}=await _.from("areas").select("id, name, square_footage, price_per_sqft").eq("project_id",r).order("created_at");return c?(console.error("Error fetching schedule of values:",c),[]):(l||[]).map((o,s)=>({area_id:o.id,item_number:String(s+1),description:o.name,scheduled_value:Math.round((o.square_footage||0)*(o.price_per_sqft||0)*100)}))},async getPreviousDrawItems(r){if(!h)return console.warn("Supabase not configured"),{};const{data:l,error:c}=await _.from("draw_requests").select("id").eq("project_id",r).in("status",["submitted","approved","paid"]).order("draw_number",{ascending:!1}).limit(1).single();if(c&&c.code!=="PGRST116")return console.error("Error fetching latest draw:",c),{};if(!l)return{};const{data:o,error:s}=await _.from("draw_request_items").select("area_id, total_percent, total_amount").eq("draw_request_id",l.id);return s?(console.error("Error fetching previous draw items:",s),{}):(o||[]).reduce((f,p)=>(p.area_id&&(f[p.area_id]={previous_percent:p.total_percent||0,previous_amount:p.total_amount||0}),f),{})},calculatePercentFromAmount(r,l){return!l||l===0?0:Math.round(r/l*1e4)},calculateAmountFromPercent(r,l){return Math.round(r/1e4*l)}};Io(async r=>{if(r&&h)try{await qm(rt)}catch(l){console.error("Error syncing pending actions:",l)}});const eg=Object.freeze(Object.defineProperty({__proto__:null,auth:$o,clearFieldSession:Dm,db:rt,drawRequestOps:wh,equipmentOps:Sh,getConnectionStatus:kt,getPendingActionCount:bi,isSupabaseConfigured:h,onConnectionChange:Io,supabase:_,syncPendingActions:qm},Symbol.toStringTag,{value:"Module"})),Am=U.createContext(),Dt={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function sn({children:r,companyId:l}){const[c,o]=U.useState(Dt),[s,f]=U.useState(!0);U.useEffect(()=>{l?p(l):y()},[l]),U.useEffect(()=>{B(c)},[c]);const p=async Z=>{try{if(f(!0),!h){o(Dt),f(!1);return}const{data:L,error:H}=await _.from("company_branding").select("*").eq("company_id",Z).single();H?(H.code==="PGRST116"?await w(Z):console.error("Error loading branding:",H),o(Dt)):o({...Dt,...L})}catch(L){console.error("Error in loadBranding:",L),o(Dt)}finally{f(!1)}},y=async()=>{try{f(!0);const Z=window.location.hostname;if(Z==="localhost"||Z==="127.0.0.1"){o(Dt),f(!1);return}if(!h){o(Dt),f(!1);return}const{data:L,error:H}=await _.rpc("get_branding_by_domain",{domain_name:Z});H||!L||L.length===0?o(Dt):o({...Dt,...L[0]})}catch(Z){console.error("Error loading branding by domain:",Z),o(Dt)}finally{f(!1)}},w=async Z=>{try{const{data:L,error:H}=await _.from("company_branding").insert({company_id:Z,...Dt}).select().single();H&&console.error("Error creating default branding:",H)}catch(L){console.error("Error in createDefaultBranding:",L)}},N=async Z=>{try{if(!h)return o(J=>({...J,...Z})),{success:!0};if(!l)return{success:!1,error:"No company ID"};const L={},H=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const J of H)Z[J]!==void 0&&(L[J]=Z[J]);const{data:ce,error:se}=await _.from("company_branding").select("id").eq("company_id",l).single();if(se&&se.code==="PGRST116"){const{data:J,error:be}=await _.from("company_branding").insert({company_id:l,...L}).select().single();return be?(console.error("Error creating branding:",be),{success:!1,error:be.message}):(o({...Dt,...J}),{success:!0,data:J})}const{data:_e,error:F}=await _.from("company_branding").update(L).eq("company_id",l).select().single();return F?(console.error("Error updating branding:",F),{success:!1,error:F.message}):(o({...Dt,..._e}),{success:!0,data:_e})}catch(L){return console.error("Error in updateBranding:",L),{success:!1,error:L.message}}},B=Z=>{const L=document.documentElement;if(L.style.setProperty("--primary-color",Z.primary_color),L.style.setProperty("--secondary-color",Z.secondary_color),Z.favicon_url){let H=document.querySelector("link[rel*='icon']");H||(H=document.createElement("link"),H.rel="icon",document.head.appendChild(H)),H.href=Z.favicon_url}document.title=Z.custom_app_name||"FieldSync"},Q={branding:c,loading:s,updateBranding:N,uploadBrandingImage:async(Z,L)=>{try{if(!h)return{success:!0,url:URL.createObjectURL(Z)};const H=Z.name.split(".").pop(),se=`branding/${`${l}/${L}-${Date.now()}.${H}`}`,{data:_e,error:F}=await _.storage.from("public").upload(se,Z,{cacheControl:"3600",upsert:!0});if(F)return console.error("Error uploading image:",F),{success:!1,error:F.message};const{data:{publicUrl:J}}=_.storage.from("public").getPublicUrl(se);return{success:!0,url:J}}catch(H){return console.error("Error in uploadBrandingImage:",H),{success:!1,error:H.message}}},refreshBranding:()=>l?p(l):y()};return g.jsx(Am.Provider,{value:Q,children:r})}function jh(){const r=U.useContext(Am);if(!r)throw new Error("useBranding must be used within a BrandingProvider");return r}const Om=U.createContext();function fn({children:r}){const[l,c]=U.useState(()=>{const s=localStorage.getItem("fieldsync-theme");return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});U.useEffect(()=>{document.documentElement.setAttribute("data-theme",l),localStorage.setItem("fieldsync-theme",l)},[l]),U.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: light)"),f=p=>{localStorage.getItem("fieldsync-theme")||c(p.matches?"light":"dark")};return s.addEventListener("change",f),()=>s.removeEventListener("change",f)},[]);const o=()=>{c(s=>s==="dark"?"light":"dark")};return g.jsx(Om.Provider,{value:{theme:l,setTheme:c,toggleTheme:o},children:r})}function Eh(){const r=U.useContext(Om);if(!r)throw new Error("useTheme must be used within a ThemeProvider");return r}const qh=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Th=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(l,c,o)=>o?o.toUpperCase():c.toLowerCase()),pm=r=>{const l=Th(r);return l.charAt(0).toUpperCase()+l.slice(1)},Nm=(...r)=>r.filter((l,c,o)=>!!l&&l.trim()!==""&&o.indexOf(l)===c).join(" ").trim(),Dh=r=>{for(const l in r)if(l.startsWith("aria-")||l==="role"||l==="title")return!0};var Ch={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ah=U.forwardRef(({color:r="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:o,className:s="",children:f,iconNode:p,...y},w)=>U.createElement("svg",{ref:w,...Ch,width:l,height:l,stroke:r,strokeWidth:o?Number(c)*24/Number(l):c,className:Nm("lucide",s),...!f&&!Dh(y)&&{"aria-hidden":"true"},...y},[...p.map(([N,B])=>U.createElement(N,B)),...Array.isArray(f)?f:[f]]));const Pr=(r,l)=>{const c=U.forwardRef(({className:o,...s},f)=>U.createElement(Ah,{ref:f,iconNode:l,className:Nm(`lucide-${qh(pm(r))}`,`lucide-${r}`,o),...s}));return c.displayName=pm(r),c};const Oh=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Nh=Pr("briefcase",Oh);const Mh=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],xh=Pr("hard-hat",Mh);const zh=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Rh=Pr("moon",zh);const Uh=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Bh=Pr("sun",Uh);const Hh=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],kh=Pr("triangle-alert",Hh);function Lt({className:r="",showPoweredBy:l=!1}){const{branding:c}=jh();return g.jsxs("div",{className:`app-logo ${r}`,children:[c.logo_url?g.jsx("img",{src:c.logo_url,alt:c.custom_app_name||"Logo",className:"custom-logo"}):g.jsxs("div",{className:"logo",children:[c.custom_app_name||"Field",g.jsx("span",{children:"Sync"})]}),l&&!c.hide_fieldsync_branding&&g.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function Lh({onForemanAccess:r,onOfficeLogin:l,onShowToast:c}){const[o,s]=U.useState(null),[f,p]=U.useState(""),[y,w]=U.useState(null),[N,B]=U.useState(""),[M,Q]=U.useState(!1),[Z,L]=U.useState(""),[H,ce]=U.useState(""),[se,_e]=U.useState(""),[F,J]=U.useState(1),[be,at]=U.useState(null),[We,ke]=U.useState(""),[Ce,ha]=U.useState(""),[mt,Xe]=U.useState(""),[Yt,Gt]=U.useState(""),lt=z=>{const oe=z.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);p(oe)},C=async()=>{if(f.length<2){c("Enter company code","error");return}Q(!0);try{const z=await rt.getCompanyByCode(f);z?w(z):(c("Invalid company code","error"),p(""))}catch{c("Error checking code","error")}finally{Q(!1)}},x=async z=>{if(z.length===4){Q(!0),L("");try{const oe=await rt.getProjectByPinSecure(z,y.code);if(oe.rateLimited){L("error"),c("Too many attempts. Please wait 15 minutes.","error"),setTimeout(()=>{B(""),L("")},800);return}if(oe.success&&oe.project)L("success"),setTimeout(()=>{r(oe.project)},400);else{L("error");let Me="Invalid PIN";oe.errorType==="invalid_company"?Me="Company not found":oe.errorType==="invalid_pin"?Me="Invalid PIN":oe.errorType==="rpc_error"?Me=`Error: ${oe.error||"Unable to validate PIN"}`:oe.errorType==="no_data"?Me="No response from server":oe.errorType==="validation_failed"&&(Me="Validation failed"),c(Me,"error"),setTimeout(()=>{B(""),L("")},800)}}catch{L("error"),c("Error checking PIN","error"),setTimeout(()=>{B(""),L("")},800)}finally{Q(!1)}}},V=z=>{if(N.length<4&&!M){const oe=N+z;B(oe),L(""),oe.length===4&&setTimeout(()=>x(oe),150)}},he=()=>{M||(B(z=>z.slice(0,-1)),L(""))},W=()=>{w(null),B(""),L("")},Re=()=>{if(!H.trim()||!se.trim()){c("Enter email and password","error");return}l(H,se)},ge=async()=>{if(f.length<2){c("Enter company code","error");return}Q(!0);try{const z=await rt.getCompanyByCode(f);z?(at(z),J(2)):(c("Invalid company code","error"),p(""))}catch{c("Error checking code","error")}finally{Q(!1)}},le=async()=>{if(!We.trim()){c("Enter office code","error");return}Q(!0);try{const{data:z,error:oe}=await _.rpc("verify_office_code",{company_id:be.id,code:We.trim()});if(oe)throw oe;z===!0?J(3):(c("Invalid office code","error"),ke(""))}catch{c("Error verifying code","error")}finally{Q(!1)}},Ae=async()=>{if(!Ce.trim()){c("Enter your name","error");return}if(!mt.trim()||!mt.includes("@")){c("Enter valid email","error");return}if(Yt.length<6){c("Password must be 6+ characters","error");return}Q(!0);try{const z=mt.toLowerCase().trim(),{data:oe,error:Me}=await _.auth.signUp({email:z,password:Yt});let G;if(Me?.message?.includes("already registered")||oe?.user&&oe.user.identities?.length===0){const{data:Oe,error:Ue}=await _.auth.signInWithPassword({email:z,password:Yt});if(Ue){c("Account exists with different password. Use your existing password.","error"),Q(!1);return}G=Oe.user.id;const{data:$e}=await _.from("user_companies").select("id, status").eq("user_id",G).eq("company_id",be.id).maybeSingle();if($e){$e.status==="active"?(c("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):$e.status==="pending"?(c("Your request is still pending approval.","error"),await _.auth.signOut()):(c("Your membership was removed. Contact the company admin.","error"),await _.auth.signOut());return}const{error:_t}=await _.from("user_companies").insert({user_id:G,company_id:be.id,role:"member",status:"pending"});if(_t)throw console.error("Error adding to user_companies:",_t),await _.auth.signOut(),new Error("Failed to submit join request");await _.auth.signOut(),c("Request to join submitted! Awaiting admin approval.","success")}else{if(Me)throw Me;{if(G=oe.user?.id,!G)throw new Error("Failed to create user");const{error:Oe}=await _.from("users").insert({id:G,email:z,password_hash:"managed_by_supabase_auth",name:Ce.trim(),company_id:be.id,role:"member",is_active:!0});if(Oe)throw Oe;const{error:Ue}=await _.from("user_companies").insert({user_id:G,company_id:be.id,role:"member",status:"pending"});if(Ue)throw console.error("Error adding to user_companies:",Ue),new Error("Failed to submit join request");await _.auth.signOut(),c("Account created! Awaiting admin approval.","success")}}}catch(z){console.error("Join error:",z),c(z.message||"Error creating account","error")}finally{Q(!1)}};if(o===null)return g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx(Lt,{className:"entry-logo",showPoweredBy:!1}),g.jsxs("div",{className:"entry-buttons",children:[g.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>s("foreman"),children:[g.jsx("span",{className:"entry-mode-icon",children:g.jsx(xh,{size:32})}),g.jsx("span",{className:"entry-mode-title",children:"Foreman"}),g.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),g.jsxs("button",{className:"entry-mode-btn office",onClick:()=>s("office"),children:[g.jsx("span",{className:"entry-mode-icon",children:g.jsx(Nh,{size:32})}),g.jsx("span",{className:"entry-mode-title",children:"Office"}),g.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(o==="foreman")return y?g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:W,children:""}),g.jsx(Lt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("div",{className:"entry-company-badge",children:y.name}),g.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),g.jsx("div",{className:`pin-display ${Z==="error"?"shake":""}`,children:[0,1,2,3].map(z=>g.jsx("div",{className:`pin-dot ${N.length>z?"filled":""} ${Z}`,children:N.length>z?"":""},z))}),g.jsxs("div",{className:"number-pad",children:[[1,2,3,4,5,6,7,8,9].map(z=>g.jsx("button",{className:"num-btn",onClick:()=>V(z.toString()),disabled:M,children:z},z)),g.jsx("button",{className:"num-btn empty",disabled:!0}),g.jsx("button",{className:"num-btn",onClick:()=>V("0"),disabled:M,children:"0"}),g.jsx("button",{className:"num-btn backspace",onClick:he,disabled:M||N.length===0,children:""})]}),M&&g.jsx("div",{className:"entry-loading",children:g.jsx("div",{className:"spinner"})})]})}):g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>s(null),children:""}),g.jsx(Lt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),g.jsxs("div",{className:"entry-input-group",children:[g.jsx("input",{type:"text",value:f,onChange:z=>lt(z.target.value),placeholder:"Company Code",disabled:M,autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&C()}}),g.jsx("button",{className:"entry-submit-btn",onClick:C,disabled:M||f.length<2,children:M?"...":""})]})]})});if(o==="office")return g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>s(null),children:""}),g.jsx(Lt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),g.jsxs("div",{className:"entry-form",children:[g.jsx("input",{type:"email",value:H,onChange:z=>ce(z.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&Re()}}),g.jsx("input",{type:"password",value:se,onChange:z=>_e(z.target.value),placeholder:"Password",onKeyDown:z=>{z.key==="Enter"&&Re()}}),g.jsx("button",{className:"entry-login-btn",onClick:Re,children:"Sign In"})]}),g.jsxs("div",{className:"entry-signup-hint",children:[g.jsx("p",{children:"New employee?"}),g.jsx("button",{className:"entry-join-link",onClick:()=>s("join"),children:"Join your company"})]})]})});if(o==="join")return F===1?g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>s("office"),children:""}),g.jsx(Lt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),g.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),g.jsxs("div",{className:"entry-input-group",children:[g.jsx("input",{type:"text",value:f,onChange:z=>lt(z.target.value),placeholder:"Company Code",disabled:M,autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&ge()}}),g.jsx("button",{className:"entry-submit-btn",onClick:ge,disabled:M||f.length<2,children:M?"...":""})]})]})}):F===2?g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>{J(1),at(null),ke("")},children:""}),g.jsx(Lt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("div",{className:"entry-company-badge",children:be?.name}),g.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),g.jsx("p",{className:"entry-hint",children:"This code is only for office staff"}),g.jsxs("div",{className:"entry-input-group",children:[g.jsx("input",{type:"password",value:We,onChange:z=>ke(z.target.value),placeholder:"Office Code",disabled:M,autoFocus:!0,onKeyDown:z=>{z.key==="Enter"&&le()}}),g.jsx("button",{className:"entry-submit-btn",onClick:le,disabled:M||!We.trim(),children:M?"...":""})]})]})}):g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>{J(2),ke("")},children:""}),g.jsx(Lt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("div",{className:"entry-company-badge",children:be?.name}),g.jsx("p",{className:"entry-subtitle",children:"Create your account"}),g.jsxs("div",{className:"entry-form",children:[g.jsx("input",{type:"text",value:Ce,onChange:z=>ha(z.target.value),placeholder:"Your Name",autoFocus:!0}),g.jsx("input",{type:"email",value:mt,onChange:z=>Xe(z.target.value),placeholder:"Email"}),g.jsx("input",{type:"password",value:Yt,onChange:z=>Gt(z.target.value),placeholder:"Password (6+ characters)",onKeyDown:z=>{z.key==="Enter"&&Ae()}}),g.jsx("button",{className:"entry-login-btn",onClick:Ae,disabled:M,children:M?"Creating...":"Join Company"})]}),g.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})})}function In({message:r,type:l="",onClose:c}){return U.useEffect(()=>{const o=setTimeout(c,3e3);return()=>clearTimeout(o)},[c]),g.jsx("div",{className:"toast-container",children:g.jsx("div",{className:`toast ${l}`,children:r})})}function hm({compact:r=!1}){const{theme:l,toggleTheme:c}=Eh();return g.jsx("button",{className:`theme-toggle ${r?"theme-toggle-compact":""}`,onClick:c,title:`Switch to ${l==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${l==="dark"?"light":"dark"} mode`,children:l==="dark"?g.jsxs(g.Fragment,{children:[g.jsx(Bh,{size:r?18:16}),!r&&g.jsx("span",{children:"Light"})]}):g.jsxs(g.Fragment,{children:[g.jsx(Rh,{size:r?18:16}),!r&&g.jsx("span",{children:"Dark"})]})})}class er extends U.Component{constructor(l){super(l),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(l){return{hasError:!0}}componentDidCatch(l,c){this.setState({error:l,errorInfo:c}),console.error("ErrorBoundary caught an error:",l,c)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?g.jsx("div",{className:"error-boundary",children:g.jsxs("div",{className:"error-boundary-content",children:[g.jsx("div",{className:"error-icon",children:g.jsx(kh,{size:48})}),g.jsx("h2",{children:"Something went wrong"}),g.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),g.jsxs("div",{className:"error-actions",children:[g.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),g.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function gm(){const[r,l]=U.useState(kt()),[c,o]=U.useState(0),[s,f]=U.useState(!1),[p,y]=U.useState(!1);return U.useEffect(()=>{const w=Io(async B=>{l(B),B&&p&&(f(!0),setTimeout(()=>f(!1),3e3)),B||y(!0);const M=await bi();o(M)});bi().then(o);const N=setInterval(async()=>{if(!kt()){const B=await bi();o(B)}},5e3);return()=>{w(),clearInterval(N)}},[p]),r&&c===0&&!s?null:g.jsxs("div",{className:`offline-indicator ${r?"online":"offline"} ${s?"synced":""}`,children:[g.jsx("div",{className:"offline-indicator-content",children:r?s?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"online-icon",children:g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("polyline",{points:"20 6 9 17 4 12"})})}),g.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):c>0?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"syncing-icon",children:g.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("polyline",{points:"23 4 23 10 17 10"}),g.jsx("polyline",{points:"1 20 1 14 7 14"}),g.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),g.jsxs("span",{className:"offline-text",children:["Syncing ",c,"..."]})]}):null:g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"offline-icon",children:g.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),g.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),g.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),g.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),g.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),g.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),g.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),g.jsxs("span",{className:"offline-text",children:["Offline",c>0&&g.jsxs("span",{className:"pending-badge",children:[c," pending"]})]})]})}),g.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}const Yh=U.lazy(()=>Qa(()=>import("./ForemanView-DTcTdzw_.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Gh=U.lazy(()=>Qa(()=>import("./Dashboard-Dpf9Ke66.js"),__vite__mapDeps([10,1,2,3,4,11,12,7,13,8,14,6,15,16,9]))),Qh=U.lazy(()=>Qa(()=>import("./Setup-CTIZm3Vk.js"),__vite__mapDeps([17,13,7,8,9]))),Xh=U.lazy(()=>Qa(()=>import("./BrandingSettings-C2u3HBl_.js"),__vite__mapDeps([18,7,8,9]))),Vh=U.lazy(()=>Qa(()=>import("./PricingManager-BD0BFm3k.js"),__vite__mapDeps([19,4,2,6,15,12,7,8,9]))),Zh=U.lazy(()=>Qa(()=>import("./PublicView-CgUo1YwD.js"),__vite__mapDeps([20,7,8,9]))),Kh=U.lazy(()=>Qa(()=>import("./SignaturePage-QKvOhkup.js"),__vite__mapDeps([21,14,8,3,2,11,6,15,7,9]))),Jh=U.lazy(()=>Qa(()=>import("./MembershipManager-B9x3z-i8.js"),__vite__mapDeps([22,11,5,6,16,7,8,9])));function vi(){return g.jsxs("div",{className:"page-loader",children:[g.jsx(Lt,{className:"loading-logo"}),g.jsx("div",{className:"spinner"})]})}function Wh(){const[r,l]=U.useState("entry"),[c,o]=U.useState(null),[s,f]=U.useState(null),[p,y]=U.useState([]),[w,N]=U.useState([]),[B,M]=U.useState(null),[Q,Z]=U.useState(null),[L,H]=U.useState(null),[ce,se]=U.useState(!0),[_e,F]=U.useState("dashboard"),[J,be]=U.useState(null),[at,We]=U.useState(!1),[ke,Ce]=U.useState(!1),[ha,mt]=U.useState(null),[Xe,Yt]=U.useState(0);U.useEffect(()=>{const G=window.location.pathname,ue=G.match(/^\/view\/([a-zA-Z0-9_-]+)$/),Oe=G.match(/^\/sign\/([a-zA-Z0-9_-]+)$/);ue?(Z(ue[1]),l("public"),se(!1)):Oe?(H(Oe[1]),l("signature"),se(!1)):Gt()},[]),U.useEffect(()=>{if(!h)return;const{data:{subscription:G}}=_.auth.onAuthStateChange(async(ue,Oe)=>{ue==="SIGNED_OUT"||ue==="USER_DELETED"?(o(null),f(null),y([]),l("entry")):ue==="TOKEN_REFRESHED"||ue==="SIGNED_IN"&&!c&&Gt()});return()=>{G?.unsubscribe()}},[c]);const Gt=async()=>{try{if(!h){se(!1);return}const{data:{user:G}}=await _.auth.getUser();if(!G){se(!1);return}const{data:ue,error:Oe}=await _.from("users").select("*").eq("id",G.id).single();if(ue){o(ue);let Ue=await rt.getUserCompanies(G.id);if(Ue.length===0&&ue.company_id&&await rt.repairLegacyUser(G.id,ue.company_id,ue.role||"member")&&(Ue=await rt.getUserCompanies(G.id)),y(Ue),Ue.length===0){if(await rt.getUserPendingMemberships(G.id)>0){l("pending");return}W("No company access. Join a company to continue.","error"),await $o.signOut();return}const $e=localStorage.getItem("selectedCompanyId");let _t=null;if($e&&Ue.find(Ne=>Ne.id===$e)?_t=Ue.find(Ne=>Ne.id===$e):Ue.length>0&&(_t=Ue[0]),_t){const{data:Ne}=await _.from("companies").select("*").eq("id",_t.id).single();f(Ne),l("office")}}}catch(G){console.error("Auth check error:",G)}finally{se(!1)}},lt=G=>{M(G),l("foreman")},C=async(G,ue)=>{try{const{data:Oe,error:Ue}=await _.auth.signInWithPassword({email:G,password:ue});if(Ue){W(Ue.message||"Invalid credentials","error");return}const{data:$e,error:_t}=await _.from("users").select("*").eq("id",Oe.user.id).single();if(_t){console.error("User fetch error:",_t),W("Error loading profile","error");return}if($e){o($e);let Ne=await rt.getUserCompanies(Oe.user.id);Ne.length===0&&$e.company_id&&await rt.repairLegacyUser(Oe.user.id,$e.company_id,$e.role||"member")&&(Ne=await rt.getUserCompanies(Oe.user.id)),y(Ne);const Xa=localStorage.getItem("selectedCompanyId");let ga=null;if(Xa&&Ne.find($t=>$t.id===Xa)?ga=Ne.find($t=>$t.id===Xa):Ne.length>0&&(ga=Ne[0]),ga){const{data:$t}=await _.from("companies").select("*").eq("id",ga.id).single();f($t),l("office")}else await rt.getUserPendingMemberships(Oe.user.id)>0?l("pending"):W("No company access. Please contact admin.","error")}else W("Profile not found. Please contact admin.","error")}catch(Oe){console.error("Login error:",Oe),W("Login failed","error")}},x=async G=>{try{const{data:ue}=await _.from("companies").select("*").eq("id",G).single();ue&&(f(ue),localStorage.setItem("selectedCompanyId",G),We(!1),F("dashboard"),W(`Switched to ${ue.name}`,"success"))}catch(ue){console.error("Switch company error:",ue),W("Error switching company","error")}},V=async()=>{try{await $o.signOut(),o(null),f(null),y([]),l("entry"),F("dashboard"),localStorage.removeItem("selectedCompanyId")}catch(G){console.error("Logout error:",G),W("Error signing out","error")}},he=async()=>{await Dm(),M(null),l("entry")},W=U.useCallback((G,ue="")=>{be({message:G,type:ue})},[]),Re=()=>{F("dashboard"),s?.id&&ge()},ge=async()=>{if(s?.id)try{const G=await rt.getProjects(s.id);N(G)}catch(G){console.error("Error loading projects:",G)}};U.useEffect(()=>{s?.id&&r==="office"&&(ge(),le())},[s?.id,r]);const le=async()=>{if(s?.id)try{const ue=(await rt.getCompanyMemberships(s.id)).filter(Oe=>Oe.status==="pending").length;Yt(ue)}catch(G){console.error("Error loading pending count:",G)}},Ae=U.useCallback(()=>{mt(null)},[]);if(ce)return g.jsx(fn,{children:g.jsx(sn,{companyId:s?.id,children:g.jsxs("div",{className:"loading-screen",children:[g.jsx(Lt,{className:"loading-logo"}),g.jsx("div",{className:"spinner"})]})})});if(r==="entry")return g.jsx(fn,{children:g.jsxs(sn,{children:[g.jsx(er,{children:g.jsx(Lh,{onForemanAccess:lt,onOfficeLogin:C,onShowToast:W})}),J&&g.jsx(In,{message:J.message,type:J.type,onClose:()=>be(null)})]})});if(r==="public"&&Q)return g.jsx(fn,{children:g.jsxs(sn,{children:[g.jsx(er,{children:g.jsx(U.Suspense,{fallback:g.jsx(vi,{}),children:g.jsx(Zh,{shareToken:Q})})}),J&&g.jsx(In,{message:J.message,type:J.type,onClose:()=>be(null)})]})});if(r==="signature"&&L)return g.jsx(fn,{children:g.jsxs(sn,{children:[g.jsx(er,{children:g.jsx(U.Suspense,{fallback:g.jsx(vi,{}),children:g.jsx(Kh,{signatureToken:L})})}),J&&g.jsx(In,{message:J.message,type:J.type,onClose:()=>be(null)})]})});if(r==="pending")return g.jsx(fn,{children:g.jsxs(sn,{children:[g.jsx(er,{children:g.jsxs("div",{className:"pending-approval-screen",children:[g.jsx(Lt,{className:"pending-logo"}),g.jsx("h2",{children:"Awaiting Approval"}),g.jsx("p",{children:"Your membership request has been submitted."}),g.jsx("p",{children:"A company admin will review your request."}),g.jsxs("div",{className:"pending-actions",children:[g.jsx("button",{className:"btn btn-secondary",onClick:V,children:"Sign Out"}),g.jsx("button",{className:"btn btn-primary",onClick:Gt,children:"Check Status"})]})]})}),J&&g.jsx(In,{message:J.message,type:J.type,onClose:()=>be(null)})]})});if(r==="foreman"&&B)return g.jsx(fn,{children:g.jsxs(sn,{companyId:B.company_id,children:[g.jsx(er,{children:g.jsx(U.Suspense,{fallback:g.jsx(vi,{}),children:g.jsx(Yh,{project:B,companyId:B.company_id,onShowToast:W,onExit:he})})}),g.jsx(gm,{}),J&&g.jsx(In,{message:J.message,type:J.type,onClose:()=>be(null)})]})});const Me=p.find(G=>G.id===s?.id)?.access_level==="administrator"||s?.owner_user_id===c?.id;return g.jsx(fn,{children:g.jsx(sn,{companyId:s?.id,children:g.jsxs("div",{children:[!h&&g.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),g.jsx("nav",{className:"nav",children:g.jsxs("div",{className:"nav-content",children:[g.jsx(Lt,{}),g.jsxs("div",{className:"nav-tabs nav-tabs-desktop",children:[g.jsx("button",{className:`nav-tab ${_e==="dashboard"?"active":""}`,onClick:()=>F("dashboard"),children:"Dashboard"}),g.jsx("button",{className:`nav-tab ${_e==="setup"?"active":""}`,onClick:()=>F("setup"),children:"+ New Project"}),g.jsx("button",{className:`nav-tab ${_e==="pricing"?"active":""}`,onClick:()=>F("pricing"),children:"Pricing"}),Me&&g.jsx("button",{className:`nav-tab ${_e==="branding"?"active":""}`,onClick:()=>F("branding"),children:"Branding"}),Me&&g.jsxs("button",{className:`nav-tab ${_e==="team"?"active":""}`,onClick:()=>F("team"),children:["Team",Xe>0&&g.jsx("span",{className:"nav-tab-badge",children:Xe})]})]}),g.jsxs("div",{className:"nav-user nav-user-desktop",children:[g.jsx(hm,{compact:!0}),g.jsxs("div",{className:"mobile-menu",children:[g.jsx("button",{className:"mobile-menu-btn",onClick:()=>Ce(!ke),"aria-label":"User menu",children:""}),ke&&g.jsxs("div",{className:"mobile-menu-dropdown",children:[g.jsxs("div",{className:"mobile-menu-info",children:[g.jsx("div",{className:"mobile-menu-user",children:c?.name||c?.email}),s&&g.jsx("div",{className:"mobile-menu-company",children:s.name})]}),g.jsx("button",{className:"mobile-menu-logout",onClick:()=>{Ce(!1),V()},children:"Sign Out"})]})]}),p.length>1&&g.jsxs("div",{className:"company-switcher",children:[g.jsxs("button",{className:"company-switcher-btn",onClick:()=>We(!at),children:[s?.name||"Select Company",g.jsx("span",{className:"switcher-arrow",children:""})]}),at&&g.jsx("div",{className:"company-dropdown",children:p.map(G=>g.jsxs("button",{className:`company-option ${G.id===s?.id?"active":""}`,onClick:()=>x(G.id),children:[G.name,G.id===s?.id&&g.jsx("span",{className:"check",children:""})]},G.id))})]}),p.length<=1&&s&&g.jsx("span",{className:"nav-company-name",children:s.name}),g.jsx("span",{className:"nav-user-name",children:c?.name||c?.email}),g.jsx("button",{className:"nav-logout",onClick:V,children:"Sign Out"})]}),g.jsx("button",{className:"mobile-menu-btn",onClick:()=>Ce(!0),"aria-label":"Open menu",children:g.jsxs("span",{className:"hamburger-icon",children:[g.jsx("span",{}),g.jsx("span",{}),g.jsx("span",{})]})})]})}),ke&&g.jsx("div",{className:"mobile-drawer-overlay",onClick:()=>Ce(!1),children:g.jsxs("div",{className:"mobile-drawer",onClick:G=>G.stopPropagation(),children:[g.jsxs("div",{className:"mobile-drawer-header",children:[g.jsx(Lt,{}),g.jsx("button",{className:"mobile-drawer-close",onClick:()=>Ce(!1),"aria-label":"Close menu",children:""})]}),g.jsxs("div",{className:"mobile-drawer-user",children:[g.jsx("div",{className:"mobile-user-avatar",children:(c?.name||c?.email||"U")[0].toUpperCase()}),g.jsxs("div",{className:"mobile-user-info",children:[g.jsx("span",{className:"mobile-user-name",children:c?.name||c?.email}),g.jsx("span",{className:"mobile-user-company",children:s?.name})]})]}),p.length>1&&g.jsxs("div",{className:"mobile-drawer-section",children:[g.jsx("div",{className:"mobile-section-title",children:"Switch Company"}),g.jsx("div",{className:"mobile-company-list",children:p.map(G=>g.jsxs("button",{className:`mobile-company-option ${G.id===s?.id?"active":""}`,onClick:()=>{x(G.id),Ce(!1)},children:[g.jsx("span",{className:"mobile-company-name",children:G.name}),G.id===s?.id&&g.jsx("span",{className:"mobile-company-check",children:""})]},G.id))})]}),g.jsxs("div",{className:"mobile-drawer-section",children:[g.jsx("div",{className:"mobile-section-title",children:"Navigation"}),g.jsxs("div",{className:"mobile-nav-list",children:[g.jsx("button",{className:`mobile-nav-item ${_e==="dashboard"?"active":""}`,onClick:()=>{F("dashboard"),Ce(!1)},children:"Dashboard"}),g.jsx("button",{className:`mobile-nav-item ${_e==="setup"?"active":""}`,onClick:()=>{F("setup"),Ce(!1)},children:"+ New Project"}),g.jsx("button",{className:`mobile-nav-item ${_e==="pricing"?"active":""}`,onClick:()=>{F("pricing"),Ce(!1)},children:"Pricing"}),Me&&g.jsx("button",{className:`mobile-nav-item ${_e==="branding"?"active":""}`,onClick:()=>{F("branding"),Ce(!1)},children:"Branding"}),Me&&g.jsxs("button",{className:`mobile-nav-item ${_e==="team"?"active":""}`,onClick:()=>{F("team"),Ce(!1)},children:["Team",Xe>0&&g.jsx("span",{className:"mobile-nav-badge",children:Xe})]})]})]}),g.jsxs("div",{className:"mobile-drawer-section",children:[g.jsx("div",{className:"mobile-section-title",children:"Appearance"}),g.jsx("div",{className:"mobile-theme-toggle",children:g.jsx(hm,{})})]}),g.jsx("div",{className:"mobile-drawer-footer",children:g.jsx("button",{className:"mobile-logout-btn",onClick:()=>{V(),Ce(!1)},children:"Sign Out"})})]})}),g.jsx(er,{children:g.jsx(U.Suspense,{fallback:g.jsx(vi,{}),children:g.jsxs("div",{className:"container",children:[_e==="dashboard"&&g.jsx(Gh,{company:s,user:c,isAdmin:Me,onShowToast:W,navigateToProjectId:ha,onProjectNavigated:Ae}),_e==="setup"&&g.jsx(Qh,{company:s,user:c,onProjectCreated:Re,onShowToast:W}),_e==="pricing"&&g.jsx(Vh,{company:s,onShowToast:W}),_e==="branding"&&g.jsx(Xh,{company:s,onShowToast:W}),_e==="team"&&Me&&g.jsx(Jh,{company:s,user:c,onShowToast:W})]},s?.id)})}),g.jsx(gm,{}),J&&g.jsx(In,{message:J.message,type:J.type,onClose:()=>be(null)})]})})})}uh.createRoot(document.getElementById("root")).render(g.jsx(Sm.StrictMode,{children:g.jsx(Wh,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>{setInterval(()=>{r.update().catch(()=>{})},3e5)}).catch(()=>{})});export{Nh as B,xh as H,Lt as L,Ih as R,kh as T,hm as a,In as b,Pr as c,rt as d,wh as e,Sh as f,eg as g,h as i,g as j,ee as o,U as r,_ as s,jh as u};
