const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ForemanView-BX6fSioS.js","assets/InjuryReportForm-DASlF64T.js","assets/x-R33Pq5j0.js","assets/imageUtils-BwjL4ear.js","assets/wrench-75z8w6f6.js","assets/user-BemvuemF.js","assets/chevron-down-Xtq9k4K5.js","assets/react-DXGY7bZi.js","assets/pdf-ChZ1zkDw.js","assets/supabase-VuevzHjS.js","assets/Dashboard-nrWs3bja.js","assets/users-DnuI3fUs.js","assets/pencil-BrAJPwRS.js","assets/xlsx-BvJTHLik.js","assets/corCalculations-Cv3TGUcZ.js","assets/chevron-right-CCKD9zcb.js","assets/user-minus-BqRz1HI9.js","assets/Setup-BZyKabFb.js","assets/BrandingSettings-BQ_UfdQ2.js","assets/PricingManager-sgAJO4_t.js","assets/PublicView-DrhoyZAY.js","assets/SignaturePage-DNwiwgzn.js","assets/MembershipManager-DJ1m3DSF.js"])))=>i.map(i=>d[i]);
import{r as hm,a as pm,b as Ph}from"./react-DXGY7bZi.js";import{_ as Ya}from"./pdf-ChZ1zkDw.js";import{c as gm}from"./supabase-VuevzHjS.js";function Ih(l,r){for(var c=0;c<r.length;c++){const u=r[c];if(typeof u!="string"&&!Array.isArray(u)){for(const s in u)if(s!=="default"&&!(s in l)){const d=Object.getOwnPropertyDescriptor(u,s);d&&Object.defineProperty(l,s,d.get?d:{enumerable:!0,get:()=>u[s]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))u(s);new MutationObserver(s=>{for(const d of s)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function c(s){const d={};return s.integrity&&(d.integrity=s.integrity),s.referrerPolicy&&(d.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?d.credentials="include":s.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function u(s){if(s.ep)return;s.ep=!0;const d=c(s);fetch(s.href,d)}})();var Ru={exports:{}},Zl={};var tm;function ep(){if(tm)return Zl;tm=1;var l=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function c(u,s,d){var h=null;if(d!==void 0&&(h=""+d),s.key!==void 0&&(h=""+s.key),"key"in s){d={};for(var g in s)g!=="key"&&(d[g]=s[g])}else d=s;return s=d.ref,{$$typeof:l,type:u,key:h,ref:s!==void 0?s:null,props:d}}return Zl.Fragment=r,Zl.jsx=c,Zl.jsxs=c,Zl}var am;function tp(){return am||(am=1,Ru.exports=ep()),Ru.exports}var v=tp(),B=hm();const ym=pm(B),Pp=Ih({__proto__:null,default:ym},[B]);var Uu={exports:{}},Vl={},Bu={exports:{}},Hu={};var nm;function ap(){return nm||(nm=1,(function(l){function r(A,x){var k=A.length;A.push(x);e:for(;0<k;){var se=k-1>>>1,fe=A[se];if(0<s(fe,x))A[se]=x,A[k]=fe,k=se;else break e}}function c(A){return A.length===0?null:A[0]}function u(A){if(A.length===0)return null;var x=A[0],k=A.pop();if(k!==x){A[0]=k;e:for(var se=0,fe=A.length,Ne=fe>>>1;se<Ne;){var ye=2*(se+1)-1,M=A[ye],P=ye+1,He=A[P];if(0>s(M,k))P<fe&&0>s(He,M)?(A[se]=He,A[P]=k,se=P):(A[se]=M,A[ye]=k,se=ye);else if(P<fe&&0>s(He,k))A[se]=He,A[P]=k,se=P;else break e}}return x}function s(A,x){var k=A.sortIndex-x.sortIndex;return k!==0?k:A.id-x.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;l.unstable_now=function(){return d.now()}}else{var h=Date,g=h.now();l.unstable_now=function(){return h.now()-g}}var w=[],z=[],U=1,N=null,G=3,Z=!1,V=!1,H=!1,ie=!1,_e=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function J(A){for(var x=c(z);x!==null;){if(x.callback===null)u(z);else if(x.startTime<=A)u(z),x.sortIndex=x.expirationTime,r(w,x);else break;x=c(z)}}function je(A){if(H=!1,J(A),!V)if(c(w)!==null)V=!0,Ye||(Ye=!0,Ge());else{var x=c(z);x!==null&&dt(je,x.startTime-A)}}var Ye=!1,Pe=-1,Ie=5,st=-1;function Wt(){return ie?!0:!(l.unstable_now()-st<Ie)}function ft(){if(ie=!1,Ye){var A=l.unstable_now();st=A;var x=!0;try{e:{V=!1,H&&(H=!1,he(Pe),Pe=-1),Z=!0;var k=G;try{t:{for(J(A),N=c(w);N!==null&&!(N.expirationTime>A&&Wt());){var se=N.callback;if(typeof se=="function"){N.callback=null,G=N.priorityLevel;var fe=se(N.expirationTime<=A);if(A=l.unstable_now(),typeof fe=="function"){N.callback=fe,J(A),x=!0;break t}N===c(w)&&u(w),J(A)}else u(w);N=c(w)}if(N!==null)x=!0;else{var Ne=c(z);Ne!==null&&dt(je,Ne.startTime-A),x=!1}}break e}finally{N=null,G=k,Z=!1}x=void 0}}finally{x?Ge():Ye=!1}}}var Ge;if(typeof $=="function")Ge=function(){$(ft)};else if(typeof MessageChannel<"u"){var $t=new MessageChannel,Xt=$t.port2;$t.port1.onmessage=ft,Ge=function(){Xt.postMessage(null)}}else Ge=function(){_e(ft,0)};function dt(A,x){Pe=_e(function(){A(l.unstable_now())},x)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(A){A.callback=null},l.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<A?Math.floor(1e3/A):5},l.unstable_getCurrentPriorityLevel=function(){return G},l.unstable_next=function(A){switch(G){case 1:case 2:case 3:var x=3;break;default:x=G}var k=G;G=x;try{return A()}finally{G=k}},l.unstable_requestPaint=function(){ie=!0},l.unstable_runWithPriority=function(A,x){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var k=G;G=A;try{return x()}finally{G=k}},l.unstable_scheduleCallback=function(A,x,k){var se=l.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?se+k:se):k=se,A){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=k+fe,A={id:U++,callback:x,priorityLevel:A,startTime:k,expirationTime:fe,sortIndex:-1},k>se?(A.sortIndex=k,r(z,A),c(w)===null&&A===c(z)&&(H?(he(Pe),Pe=-1):H=!0,dt(je,k-se))):(A.sortIndex=fe,r(w,A),V||Z||(V=!0,Ye||(Ye=!0,Ge()))),A},l.unstable_shouldYield=Wt,l.unstable_wrapCallback=function(A){var x=G;return function(){var k=G;G=x;try{return A.apply(this,arguments)}finally{G=k}}}})(Hu)),Hu}var lm;function np(){return lm||(lm=1,Bu.exports=ap()),Bu.exports}var rm;function lp(){if(rm)return Vl;rm=1;var l=np(),r=hm(),c=Ph();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function w(e){if(d(e)!==e)throw Error(u(188))}function z(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(u(188));return t!==e?null:e}for(var a=e,n=t;;){var i=a.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===a)return w(i),e;if(o===n)return w(i),t;o=o.sibling}throw Error(u(188))}if(a.return!==n.return)a=i,n=o;else{for(var f=!1,m=i.child;m;){if(m===a){f=!0,a=i,n=o;break}if(m===n){f=!0,n=i,a=o;break}m=m.sibling}if(!f){for(m=o.child;m;){if(m===a){f=!0,a=o,n=i;break}if(m===n){f=!0,n=o,a=i;break}m=m.sibling}if(!f)throw Error(u(189))}}if(a.alternate!==n)throw Error(u(190))}if(a.tag!==3)throw Error(u(188));return a.stateNode.current===a?e:t}function U(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=U(e),t!==null)return t;e=e.sibling}return null}var N=Object.assign,G=Symbol.for("react.element"),Z=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),ie=Symbol.for("react.strict_mode"),_e=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),$=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),je=Symbol.for("react.suspense"),Ye=Symbol.for("react.suspense_list"),Pe=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),st=Symbol.for("react.activity"),Wt=Symbol.for("react.memo_cache_sentinel"),ft=Symbol.iterator;function Ge(e){return e===null||typeof e!="object"?null:(e=ft&&e[ft]||e["@@iterator"],typeof e=="function"?e:null)}var $t=Symbol.for("react.client.reference");function Xt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===$t?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case _e:return"Profiler";case ie:return"StrictMode";case je:return"Suspense";case Ye:return"SuspenseList";case st:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case $:return e.displayName||"Context";case he:return(e._context.displayName||"Context")+".Consumer";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pe:return t=e.displayName||null,t!==null?t:Xt(e.type)||"Memo";case Ie:t=e._payload,e=e._init;try{return Xt(e(t))}catch{}}return null}var dt=Array.isArray,A=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,x=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},se=[],fe=-1;function Ne(e){return{current:e}}function ye(e){0>fe||(e.current=se[fe],se[fe]=null,fe--)}function M(e,t){fe++,se[fe]=e.current,e.current=t}var P=Ne(null),He=Ne(null),Q=Ne(null),de=Ne(null);function Te(e,t){switch(M(Q,t),M(He,e),M(P,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ed(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ed(t),e=qd(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ye(P),M(P,e)}function Ae(){ye(P),ye(He),ye(Q)}function Ve(e){e.memoizedState!==null&&M(de,e);var t=P.current,a=qd(t,e.type);t!==a&&(M(He,e),M(P,a))}function et(e){He.current===e&&(ye(P),ye(He)),de.current===e&&(ye(de),Yl._currentValue=k)}var ke,fn;function Tt(e){if(ke===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);ke=t&&t[1]||"",fn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ke+e+fn}var kt=!1;function vi(e,t){if(!e||kt)return"";kt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var O=function(){throw Error()};if(Object.defineProperty(O.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(O,[])}catch(T){var q=T}Reflect.construct(e,[],O)}else{try{O.call()}catch(T){q=T}e.call(O.prototype)}}else{try{throw Error()}catch(T){q=T}(O=e())&&typeof O.catch=="function"&&O.catch(function(){})}}catch(T){if(T&&q&&typeof T.stack=="string")return[T.stack,q.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=n.DetermineComponentFrameRoot(),f=o[0],m=o[1];if(f&&m){var y=f.split(`
`),E=m.split(`
`);for(i=n=0;n<y.length&&!y[n].includes("DetermineComponentFrameRoot");)n++;for(;i<E.length&&!E[i].includes("DetermineComponentFrameRoot");)i++;if(n===y.length||i===E.length)for(n=y.length-1,i=E.length-1;1<=n&&0<=i&&y[n]!==E[i];)i--;for(;1<=n&&0<=i;n--,i--)if(y[n]!==E[i]){if(n!==1||i!==1)do if(n--,i--,0>i||y[n]!==E[i]){var D=`
`+y[n].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=n&&0<=i);break}}}finally{kt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Tt(a):""}function Cm(e,t){switch(e.tag){case 26:case 27:case 5:return Tt(e.type);case 16:return Tt("Lazy");case 13:return e.child!==t&&t!==null?Tt("Suspense Fallback"):Tt("Suspense");case 19:return Tt("SuspenseList");case 0:case 15:return vi(e.type,!1);case 11:return vi(e.type.render,!1);case 1:return vi(e.type,!0);case 31:return Tt("Activity");default:return""}}function Iu(e){try{var t="",a=null;do t+=Cm(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var bi=Object.prototype.hasOwnProperty,Si=l.unstable_scheduleCallback,wi=l.unstable_cancelCallback,Om=l.unstable_shouldYield,Mm=l.unstable_requestPaint,mt=l.unstable_now,zm=l.unstable_getCurrentPriorityLevel,eo=l.unstable_ImmediatePriority,to=l.unstable_UserBlockingPriority,Fl=l.unstable_NormalPriority,Nm=l.unstable_LowPriority,ao=l.unstable_IdlePriority,xm=l.log,Rm=l.unstable_setDisableYieldValue,In=null,_t=null;function pa(e){if(typeof xm=="function"&&Rm(e),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(In,e)}catch{}}var ht=Math.clz32?Math.clz32:Hm,Um=Math.log,Bm=Math.LN2;function Hm(e){return e>>>=0,e===0?32:31-(Um(e)/Bm|0)|0}var Pl=256,Il=262144,er=4194304;function Ga(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function tr(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var i=0,o=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var m=n&134217727;return m!==0?(n=m&~o,n!==0?i=Ga(n):(f&=m,f!==0?i=Ga(f):a||(a=m&~e,a!==0&&(i=Ga(a))))):(m=n&~o,m!==0?i=Ga(m):f!==0?i=Ga(f):a||(a=n&~e,a!==0&&(i=Ga(a)))),i===0?0:t!==0&&t!==i&&(t&o)===0&&(o=i&-i,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:i}function el(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function km(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function no(){var e=er;return er<<=1,(er&62914560)===0&&(er=4194304),e}function ji(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function tl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Lm(e,t,a,n,i,o){var f=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,y=e.expirationTimes,E=e.hiddenUpdates;for(a=f&~a;0<a;){var D=31-ht(a),O=1<<D;m[D]=0,y[D]=-1;var q=E[D];if(q!==null)for(E[D]=null,D=0;D<q.length;D++){var T=q[D];T!==null&&(T.lane&=-536870913)}a&=~O}n!==0&&lo(e,n,0),o!==0&&i===0&&e.tag!==0&&(e.suspendedLanes|=o&~(f&~t))}function lo(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-ht(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function ro(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-ht(a),i=1<<n;i&t|e[n]&t&&(e[n]|=t),a&=~i}}function io(e,t){var a=t&-t;return a=(a&42)!==0?1:Ei(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ei(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function qi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function co(){var e=x.p;return e!==0?e:(e=window.event,e===void 0?32:Jd(e.type))}function uo(e,t){var a=x.p;try{return x.p=e,t()}finally{x.p=a}}var ga=Math.random().toString(36).slice(2),Ke="__reactFiber$"+ga,nt="__reactProps$"+ga,dn="__reactContainer$"+ga,Ti="__reactEvents$"+ga,Ym="__reactListeners$"+ga,Gm="__reactHandles$"+ga,oo="__reactResources$"+ga,al="__reactMarker$"+ga;function Di(e){delete e[Ke],delete e[nt],delete e[Ti],delete e[Ym],delete e[Gm]}function mn(e){var t=e[Ke];if(t)return t;for(var a=e.parentNode;a;){if(t=a[dn]||a[Ke]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=zd(e);e!==null;){if(a=e[Ke])return a;e=zd(e)}return t}e=a,a=e.parentNode}return null}function _n(e){if(e=e[Ke]||e[dn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function nl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function hn(e){var t=e[oo];return t||(t=e[oo]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qe(e){e[al]=!0}var so=new Set,fo={};function Qa(e,t){pn(e,t),pn(e+"Capture",t)}function pn(e,t){for(fo[e]=t,e=0;e<t.length;e++)so.add(t[e])}var Qm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mo={},_o={};function Xm(e){return bi.call(_o,e)?!0:bi.call(mo,e)?!1:Qm.test(e)?_o[e]=!0:(mo[e]=!0,!1)}function ar(e,t,a){if(Xm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function nr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Ft(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function Dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ho(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zm(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(f){a=""+f,o.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ai(e){if(!e._valueTracker){var t=ho(e)?"checked":"value";e._valueTracker=Zm(e,t,""+e[t])}}function po(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=ho(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function lr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vm=/[\n"\\]/g;function At(e){return e.replace(Vm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ci(e,t,a,n,i,o,f,m){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dt(t)):e.value!==""+Dt(t)&&(e.value=""+Dt(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Oi(e,f,Dt(t)):a!=null?Oi(e,f,Dt(a)):n!=null&&e.removeAttribute("value"),i==null&&o!=null&&(e.defaultChecked=!!o),i!=null&&(e.checked=i&&typeof i!="function"&&typeof i!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+Dt(m):e.removeAttribute("name")}function go(e,t,a,n,i,o,f,m){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null)){Ai(e);return}a=a!=null?""+Dt(a):"",t=t!=null?""+Dt(t):a,m||t===e.value||(e.value=t),e.defaultValue=t}n=n??i,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=m?e.checked:!!n,e.defaultChecked=!!n,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Ai(e)}function Oi(e,t,a){t==="number"&&lr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function gn(e,t,a,n){if(e=e.options,t){t={};for(var i=0;i<a.length;i++)t["$"+a[i]]=!0;for(a=0;a<e.length;a++)i=t.hasOwnProperty("$"+e[a].value),e[a].selected!==i&&(e[a].selected=i),i&&n&&(e[a].defaultSelected=!0)}else{for(a=""+Dt(a),t=null,i=0;i<e.length;i++){if(e[i].value===a){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function yo(e,t,a){if(t!=null&&(t=""+Dt(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+Dt(a):""}function vo(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(u(92));if(dt(n)){if(1<n.length)throw Error(u(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=Dt(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),Ai(e)}function yn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Km=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bo(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Km.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function So(e,t,a){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var i in t)n=t[i],t.hasOwnProperty(i)&&a[i]!==n&&bo(e,i,n)}else for(var o in t)t.hasOwnProperty(o)&&bo(e,o,t[o])}function Mi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rr(e){return Wm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var zi=null;function Ni(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vn=null,bn=null;function wo(e){var t=_n(e);if(t&&(e=t.stateNode)){var a=e[nt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ci(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+At(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var i=n[nt]||null;if(!i)throw Error(u(90));Ci(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&po(n)}break e;case"textarea":yo(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&gn(e,!!a.multiple,t,!1)}}}var xi=!1;function jo(e,t,a){if(xi)return e(t,a);xi=!0;try{var n=e(t);return n}finally{if(xi=!1,(vn!==null||bn!==null)&&(Vr(),vn&&(t=vn,e=bn,bn=vn=null,wo(t),e)))for(t=0;t<e.length;t++)wo(e[t])}}function ll(e,t){var a=e.stateNode;if(a===null)return null;var n=a[nt]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(u(231,t,typeof a));return a}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ri=!1;if(It)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{Ri=!1}var ya=null,Ui=null,ir=null;function Eo(){if(ir)return ir;var e,t=Ui,a=t.length,n,i="value"in ya?ya.value:ya.textContent,o=i.length;for(e=0;e<a&&t[e]===i[e];e++);var f=a-e;for(n=1;n<=f&&t[a-n]===i[o-n];n++);return ir=i.slice(e,1<n?1-n:void 0)}function cr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ur(){return!0}function qo(){return!1}function lt(e){function t(a,n,i,o,f){this._reactName=a,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=f,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(o):o[m]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ur:qo,this.isPropagationStopped=qo,this}return N(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ur)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ur)},persist:function(){},isPersistent:ur}),t}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},or=lt(Xa),il=N({},Xa,{view:0,detail:0}),$m=lt(il),Bi,Hi,cl,sr=N({},il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cl&&(cl&&e.type==="mousemove"?(Bi=e.screenX-cl.screenX,Hi=e.screenY-cl.screenY):Hi=Bi=0,cl=e),Bi)},movementY:function(e){return"movementY"in e?e.movementY:Hi}}),To=lt(sr),Fm=N({},sr,{dataTransfer:0}),Pm=lt(Fm),Im=N({},il,{relatedTarget:0}),ki=lt(Im),e_=N({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),t_=lt(e_),a_=N({},Xa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),n_=lt(a_),l_=N({},Xa,{data:0}),Do=lt(l_),r_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=c_[e])?!!t[e]:!1}function Li(){return u_}var o_=N({},il,{key:function(e){if(e.key){var t=r_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?cr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),s_=lt(o_),f_=N({},sr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ao=lt(f_),d_=N({},il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),m_=lt(d_),__=N({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),h_=lt(__),p_=N({},sr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g_=lt(p_),y_=N({},Xa,{newState:0,oldState:0}),v_=lt(y_),b_=[9,13,27,32],Yi=It&&"CompositionEvent"in window,ul=null;It&&"documentMode"in document&&(ul=document.documentMode);var S_=It&&"TextEvent"in window&&!ul,Co=It&&(!Yi||ul&&8<ul&&11>=ul),Oo=" ",Mo=!1;function zo(e,t){switch(e){case"keyup":return b_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function No(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Sn=!1;function w_(e,t){switch(e){case"compositionend":return No(t);case"keypress":return t.which!==32?null:(Mo=!0,Oo);case"textInput":return e=t.data,e===Oo&&Mo?null:e;default:return null}}function j_(e,t){if(Sn)return e==="compositionend"||!Yi&&zo(e,t)?(e=Eo(),ir=Ui=ya=null,Sn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Co&&t.locale!=="ko"?null:t.data;default:return null}}var E_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!E_[e.type]:t==="textarea"}function Ro(e,t,a,n){vn?bn?bn.push(n):bn=[n]:vn=n,t=Ir(t,"onChange"),0<t.length&&(a=new or("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var ol=null,sl=null;function q_(e){yd(e,0)}function fr(e){var t=nl(e);if(po(t))return e}function Uo(e,t){if(e==="change")return t}var Bo=!1;if(It){var Gi;if(It){var Qi="oninput"in document;if(!Qi){var Ho=document.createElement("div");Ho.setAttribute("oninput","return;"),Qi=typeof Ho.oninput=="function"}Gi=Qi}else Gi=!1;Bo=Gi&&(!document.documentMode||9<document.documentMode)}function ko(){ol&&(ol.detachEvent("onpropertychange",Lo),sl=ol=null)}function Lo(e){if(e.propertyName==="value"&&fr(sl)){var t=[];Ro(t,sl,e,Ni(e)),jo(q_,t)}}function T_(e,t,a){e==="focusin"?(ko(),ol=t,sl=a,ol.attachEvent("onpropertychange",Lo)):e==="focusout"&&ko()}function D_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fr(sl)}function A_(e,t){if(e==="click")return fr(t)}function C_(e,t){if(e==="input"||e==="change")return fr(t)}function O_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var pt=typeof Object.is=="function"?Object.is:O_;function fl(e,t){if(pt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!bi.call(t,i)||!pt(e[i],t[i]))return!1}return!0}function Yo(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Go(e,t){var a=Yo(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Yo(a)}}function Qo(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qo(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xo(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=lr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=lr(e.document)}return t}function Xi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var M_=It&&"documentMode"in document&&11>=document.documentMode,wn=null,Zi=null,dl=null,Vi=!1;function Zo(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vi||wn==null||wn!==lr(n)||(n=wn,"selectionStart"in n&&Xi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),dl&&fl(dl,n)||(dl=n,n=Ir(Zi,"onSelect"),0<n.length&&(t=new or("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=wn)))}function Za(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var jn={animationend:Za("Animation","AnimationEnd"),animationiteration:Za("Animation","AnimationIteration"),animationstart:Za("Animation","AnimationStart"),transitionrun:Za("Transition","TransitionRun"),transitionstart:Za("Transition","TransitionStart"),transitioncancel:Za("Transition","TransitionCancel"),transitionend:Za("Transition","TransitionEnd")},Ki={},Vo={};It&&(Vo=document.createElement("div").style,"AnimationEvent"in window||(delete jn.animationend.animation,delete jn.animationiteration.animation,delete jn.animationstart.animation),"TransitionEvent"in window||delete jn.transitionend.transition);function Va(e){if(Ki[e])return Ki[e];if(!jn[e])return e;var t=jn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Vo)return Ki[e]=t[a];return e}var Ko=Va("animationend"),Jo=Va("animationiteration"),Wo=Va("animationstart"),z_=Va("transitionrun"),N_=Va("transitionstart"),x_=Va("transitioncancel"),$o=Va("transitionend"),Fo=new Map,Ji="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ji.push("scrollEnd");function Lt(e,t){Fo.set(e,t),Qa(t,[e])}var dr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ct=[],En=0,Wi=0;function mr(){for(var e=En,t=Wi=En=0;t<e;){var a=Ct[t];Ct[t++]=null;var n=Ct[t];Ct[t++]=null;var i=Ct[t];Ct[t++]=null;var o=Ct[t];if(Ct[t++]=null,n!==null&&i!==null){var f=n.pending;f===null?i.next=i:(i.next=f.next,f.next=i),n.pending=i}o!==0&&Po(a,i,o)}}function _r(e,t,a,n){Ct[En++]=e,Ct[En++]=t,Ct[En++]=a,Ct[En++]=n,Wi|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function $i(e,t,a,n){return _r(e,t,a,n),hr(e)}function Ka(e,t){return _r(e,null,null,t),hr(e)}function Po(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var i=!1,o=e.return;o!==null;)o.childLanes|=a,n=o.alternate,n!==null&&(n.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(i=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,i&&t!==null&&(i=31-ht(a),e=o.hiddenUpdates,n=e[i],n===null?e[i]=[t]:n.push(t),t.lane=a|536870912),o):null}function hr(e){if(50<xl)throw xl=0,ru=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var qn={};function R_(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,a,n){return new R_(e,t,a,n)}function Fi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ea(e,t){var a=e.alternate;return a===null?(a=gt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Io(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function pr(e,t,a,n,i,o){var f=0;if(n=e,typeof e=="function")Fi(e)&&(f=1);else if(typeof e=="string")f=Lh(e,a,P.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case st:return e=gt(31,a,t,i),e.elementType=st,e.lanes=o,e;case H:return Ja(a.children,i,o,t);case ie:f=8,i|=24;break;case _e:return e=gt(12,a,t,i|2),e.elementType=_e,e.lanes=o,e;case je:return e=gt(13,a,t,i),e.elementType=je,e.lanes=o,e;case Ye:return e=gt(19,a,t,i),e.elementType=Ye,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $:f=10;break e;case he:f=9;break e;case J:f=11;break e;case Pe:f=14;break e;case Ie:f=16,n=null;break e}f=29,a=Error(u(130,e===null?"null":typeof e,"")),n=null}return t=gt(f,a,t,i),t.elementType=e,t.type=n,t.lanes=o,t}function Ja(e,t,a,n){return e=gt(7,e,n,t),e.lanes=a,e}function Pi(e,t,a){return e=gt(6,e,null,t),e.lanes=a,e}function es(e){var t=gt(18,null,null,0);return t.stateNode=e,t}function Ii(e,t,a){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ts=new WeakMap;function Ot(e,t){if(typeof e=="object"&&e!==null){var a=ts.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Iu(t)},ts.set(e,t),t)}return{value:e,source:t,stack:Iu(t)}}var Tn=[],Dn=0,gr=null,ml=0,Mt=[],zt=0,va=null,Zt=1,Vt="";function ta(e,t){Tn[Dn++]=ml,Tn[Dn++]=gr,gr=e,ml=t}function as(e,t,a){Mt[zt++]=Zt,Mt[zt++]=Vt,Mt[zt++]=va,va=e;var n=Zt;e=Vt;var i=32-ht(n)-1;n&=~(1<<i),a+=1;var o=32-ht(t)+i;if(30<o){var f=i-i%5;o=(n&(1<<f)-1).toString(32),n>>=f,i-=f,Zt=1<<32-ht(t)+i|a<<i|n,Vt=o+e}else Zt=1<<o|a<<i|n,Vt=e}function ec(e){e.return!==null&&(ta(e,1),as(e,1,0))}function tc(e){for(;e===gr;)gr=Tn[--Dn],Tn[Dn]=null,ml=Tn[--Dn],Tn[Dn]=null;for(;e===va;)va=Mt[--zt],Mt[zt]=null,Vt=Mt[--zt],Mt[zt]=null,Zt=Mt[--zt],Mt[zt]=null}function ns(e,t){Mt[zt++]=Zt,Mt[zt++]=Vt,Mt[zt++]=va,Zt=t.id,Vt=t.overflow,va=e}var Je=null,Ee=null,re=!1,ba=null,Nt=!1,ac=Error(u(519));function Sa(e){var t=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(Ot(t,e)),ac}function ls(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[Ke]=e,t[nt]=n,a){case"dialog":ae("cancel",t),ae("close",t);break;case"iframe":case"object":case"embed":ae("load",t);break;case"video":case"audio":for(a=0;a<Ul.length;a++)ae(Ul[a],t);break;case"source":ae("error",t);break;case"img":case"image":case"link":ae("error",t),ae("load",t);break;case"details":ae("toggle",t);break;case"input":ae("invalid",t),go(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":ae("invalid",t);break;case"textarea":ae("invalid",t),vo(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||wd(t.textContent,a)?(n.popover!=null&&(ae("beforetoggle",t),ae("toggle",t)),n.onScroll!=null&&ae("scroll",t),n.onScrollEnd!=null&&ae("scrollend",t),n.onClick!=null&&(t.onclick=Pt),t=!0):t=!1,t||Sa(e,!0)}function rs(e){for(Je=e.return;Je;)switch(Je.tag){case 5:case 31:case 13:Nt=!1;return;case 27:case 3:Nt=!0;return;default:Je=Je.return}}function An(e){if(e!==Je)return!1;if(!re)return rs(e),re=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||bu(e.type,e.memoizedProps)),a=!a),a&&Ee&&Sa(e),rs(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ee=Md(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));Ee=Md(e)}else t===27?(t=Ee,Ra(e.type)?(e=qu,qu=null,Ee=e):Ee=t):Ee=Je?Rt(e.stateNode.nextSibling):null;return!0}function Wa(){Ee=Je=null,re=!1}function nc(){var e=ba;return e!==null&&(ut===null?ut=e:ut.push.apply(ut,e),ba=null),e}function _l(e){ba===null?ba=[e]:ba.push(e)}var lc=Ne(null),$a=null,aa=null;function wa(e,t,a){M(lc,t._currentValue),t._currentValue=a}function na(e){e._currentValue=lc.current,ye(lc)}function rc(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function ic(e,t,a,n){var i=e.child;for(i!==null&&(i.return=e);i!==null;){var o=i.dependencies;if(o!==null){var f=i.child;o=o.firstContext;e:for(;o!==null;){var m=o;o=i;for(var y=0;y<t.length;y++)if(m.context===t[y]){o.lanes|=a,m=o.alternate,m!==null&&(m.lanes|=a),rc(o.return,a,e),n||(f=null);break e}o=m.next}}else if(i.tag===18){if(f=i.return,f===null)throw Error(u(341));f.lanes|=a,o=f.alternate,o!==null&&(o.lanes|=a),rc(f,a,e),f=null}else f=i.child;if(f!==null)f.return=i;else for(f=i;f!==null;){if(f===e){f=null;break}if(i=f.sibling,i!==null){i.return=f.return,f=i;break}f=f.return}i=f}}function Cn(e,t,a,n){e=null;for(var i=t,o=!1;i!==null;){if(!o){if((i.flags&524288)!==0)o=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var f=i.alternate;if(f===null)throw Error(u(387));if(f=f.memoizedProps,f!==null){var m=i.type;pt(i.pendingProps.value,f.value)||(e!==null?e.push(m):e=[m])}}else if(i===de.current){if(f=i.alternate,f===null)throw Error(u(387));f.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(e!==null?e.push(Yl):e=[Yl])}i=i.return}e!==null&&ic(t,e,a,n),t.flags|=262144}function yr(e){for(e=e.firstContext;e!==null;){if(!pt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fa(e){$a=e,aa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function We(e){return is($a,e)}function vr(e,t){return $a===null&&Fa(e),is(e,t)}function is(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},aa===null){if(e===null)throw Error(u(308));aa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else aa=aa.next=t;return a}var U_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},B_=l.unstable_scheduleCallback,H_=l.unstable_NormalPriority,xe={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cc(){return{controller:new U_,data:new Map,refCount:0}}function hl(e){e.refCount--,e.refCount===0&&B_(H_,function(){e.controller.abort()})}var pl=null,uc=0,On=0,Mn=null;function k_(e,t){if(pl===null){var a=pl=[];uc=0,On=fu(),Mn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return uc++,t.then(cs,cs),t}function cs(){if(--uc===0&&pl!==null){Mn!==null&&(Mn.status="fulfilled");var e=pl;pl=null,On=0,Mn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function L_(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var i=0;i<a.length;i++)(0,a[i])(t)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}var us=A.S;A.S=function(e,t){Vf=mt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&k_(e,t),us!==null&&us(e,t)};var Pa=Ne(null);function oc(){var e=Pa.current;return e!==null?e:we.pooledCache}function br(e,t){t===null?M(Pa,Pa.current):M(Pa,t.pool)}function os(){var e=oc();return e===null?null:{parent:xe._currentValue,pool:e}}var zn=Error(u(460)),sc=Error(u(474)),Sr=Error(u(542)),wr={then:function(){}};function ss(e){return e=e.status,e==="fulfilled"||e==="rejected"}function fs(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Pt,Pt),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ms(e),e;default:if(typeof t.status=="string")t.then(Pt,Pt);else{if(e=we,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var i=t;i.status="fulfilled",i.value=n}},function(n){if(t.status==="pending"){var i=t;i.status="rejected",i.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,ms(e),e}throw en=t,zn}}function Ia(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(en=a,zn):a}}var en=null;function ds(){if(en===null)throw Error(u(459));var e=en;return en=null,e}function ms(e){if(e===zn||e===Sr)throw Error(u(483))}var Nn=null,gl=0;function jr(e){var t=gl;return gl+=1,Nn===null&&(Nn=[]),fs(Nn,e,t)}function yl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Er(e,t){throw t.$$typeof===G?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _s(e){function t(S,b){if(e){var j=S.deletions;j===null?(S.deletions=[b],S.flags|=16):j.push(b)}}function a(S,b){if(!e)return null;for(;b!==null;)t(S,b),b=b.sibling;return null}function n(S){for(var b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function i(S,b){return S=ea(S,b),S.index=0,S.sibling=null,S}function o(S,b,j){return S.index=j,e?(j=S.alternate,j!==null?(j=j.index,j<b?(S.flags|=67108866,b):j):(S.flags|=67108866,b)):(S.flags|=1048576,b)}function f(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function m(S,b,j,C){return b===null||b.tag!==6?(b=Pi(j,S.mode,C),b.return=S,b):(b=i(b,j),b.return=S,b)}function y(S,b,j,C){var X=j.type;return X===H?D(S,b,j.props.children,C,j.key):b!==null&&(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ie&&Ia(X)===b.type)?(b=i(b,j.props),yl(b,j),b.return=S,b):(b=pr(j.type,j.key,j.props,null,S.mode,C),yl(b,j),b.return=S,b)}function E(S,b,j,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Ii(j,S.mode,C),b.return=S,b):(b=i(b,j.children||[]),b.return=S,b)}function D(S,b,j,C,X){return b===null||b.tag!==7?(b=Ja(j,S.mode,C,X),b.return=S,b):(b=i(b,j),b.return=S,b)}function O(S,b,j){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Pi(""+b,S.mode,j),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Z:return j=pr(b.type,b.key,b.props,null,S.mode,j),yl(j,b),j.return=S,j;case V:return b=Ii(b,S.mode,j),b.return=S,b;case Ie:return b=Ia(b),O(S,b,j)}if(dt(b)||Ge(b))return b=Ja(b,S.mode,j,null),b.return=S,b;if(typeof b.then=="function")return O(S,jr(b),j);if(b.$$typeof===$)return O(S,vr(S,b),j);Er(S,b)}return null}function q(S,b,j,C){var X=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return X!==null?null:m(S,b,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:return j.key===X?y(S,b,j,C):null;case V:return j.key===X?E(S,b,j,C):null;case Ie:return j=Ia(j),q(S,b,j,C)}if(dt(j)||Ge(j))return X!==null?null:D(S,b,j,C,null);if(typeof j.then=="function")return q(S,b,jr(j),C);if(j.$$typeof===$)return q(S,b,vr(S,j),C);Er(S,j)}return null}function T(S,b,j,C,X){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return S=S.get(j)||null,m(b,S,""+C,X);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Z:return S=S.get(C.key===null?j:C.key)||null,y(b,S,C,X);case V:return S=S.get(C.key===null?j:C.key)||null,E(b,S,C,X);case Ie:return C=Ia(C),T(S,b,j,C,X)}if(dt(C)||Ge(C))return S=S.get(j)||null,D(b,S,C,X,null);if(typeof C.then=="function")return T(S,b,j,jr(C),X);if(C.$$typeof===$)return T(S,b,j,vr(b,C),X);Er(b,C)}return null}function L(S,b,j,C){for(var X=null,ce=null,Y=b,F=b=0,le=null;Y!==null&&F<j.length;F++){Y.index>F?(le=Y,Y=null):le=Y.sibling;var ue=q(S,Y,j[F],C);if(ue===null){Y===null&&(Y=le);break}e&&Y&&ue.alternate===null&&t(S,Y),b=o(ue,b,F),ce===null?X=ue:ce.sibling=ue,ce=ue,Y=le}if(F===j.length)return a(S,Y),re&&ta(S,F),X;if(Y===null){for(;F<j.length;F++)Y=O(S,j[F],C),Y!==null&&(b=o(Y,b,F),ce===null?X=Y:ce.sibling=Y,ce=Y);return re&&ta(S,F),X}for(Y=n(Y);F<j.length;F++)le=T(Y,S,F,j[F],C),le!==null&&(e&&le.alternate!==null&&Y.delete(le.key===null?F:le.key),b=o(le,b,F),ce===null?X=le:ce.sibling=le,ce=le);return e&&Y.forEach(function(La){return t(S,La)}),re&&ta(S,F),X}function K(S,b,j,C){if(j==null)throw Error(u(151));for(var X=null,ce=null,Y=b,F=b=0,le=null,ue=j.next();Y!==null&&!ue.done;F++,ue=j.next()){Y.index>F?(le=Y,Y=null):le=Y.sibling;var La=q(S,Y,ue.value,C);if(La===null){Y===null&&(Y=le);break}e&&Y&&La.alternate===null&&t(S,Y),b=o(La,b,F),ce===null?X=La:ce.sibling=La,ce=La,Y=le}if(ue.done)return a(S,Y),re&&ta(S,F),X;if(Y===null){for(;!ue.done;F++,ue=j.next())ue=O(S,ue.value,C),ue!==null&&(b=o(ue,b,F),ce===null?X=ue:ce.sibling=ue,ce=ue);return re&&ta(S,F),X}for(Y=n(Y);!ue.done;F++,ue=j.next())ue=T(Y,S,F,ue.value,C),ue!==null&&(e&&ue.alternate!==null&&Y.delete(ue.key===null?F:ue.key),b=o(ue,b,F),ce===null?X=ue:ce.sibling=ue,ce=ue);return e&&Y.forEach(function(Fh){return t(S,Fh)}),re&&ta(S,F),X}function Se(S,b,j,C){if(typeof j=="object"&&j!==null&&j.type===H&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:e:{for(var X=j.key;b!==null;){if(b.key===X){if(X=j.type,X===H){if(b.tag===7){a(S,b.sibling),C=i(b,j.props.children),C.return=S,S=C;break e}}else if(b.elementType===X||typeof X=="object"&&X!==null&&X.$$typeof===Ie&&Ia(X)===b.type){a(S,b.sibling),C=i(b,j.props),yl(C,j),C.return=S,S=C;break e}a(S,b);break}else t(S,b);b=b.sibling}j.type===H?(C=Ja(j.props.children,S.mode,C,j.key),C.return=S,S=C):(C=pr(j.type,j.key,j.props,null,S.mode,C),yl(C,j),C.return=S,S=C)}return f(S);case V:e:{for(X=j.key;b!==null;){if(b.key===X)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){a(S,b.sibling),C=i(b,j.children||[]),C.return=S,S=C;break e}else{a(S,b);break}else t(S,b);b=b.sibling}C=Ii(j,S.mode,C),C.return=S,S=C}return f(S);case Ie:return j=Ia(j),Se(S,b,j,C)}if(dt(j))return L(S,b,j,C);if(Ge(j)){if(X=Ge(j),typeof X!="function")throw Error(u(150));return j=X.call(j),K(S,b,j,C)}if(typeof j.then=="function")return Se(S,b,jr(j),C);if(j.$$typeof===$)return Se(S,b,vr(S,j),C);Er(S,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,b!==null&&b.tag===6?(a(S,b.sibling),C=i(b,j),C.return=S,S=C):(a(S,b),C=Pi(j,S.mode,C),C.return=S,S=C),f(S)):a(S,b)}return function(S,b,j,C){try{gl=0;var X=Se(S,b,j,C);return Nn=null,X}catch(Y){if(Y===zn||Y===Sr)throw Y;var ce=gt(29,Y,null,S.mode);return ce.lanes=C,ce.return=S,ce}finally{}}}var tn=_s(!0),hs=_s(!1),ja=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ea(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function qa(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(me&2)!==0){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,t=hr(e),Po(e,null,a),t}return _r(e,n,t,a),hr(e)}function vl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,ro(e,a)}}function mc(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var f={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?i=o=f:o=o.next=f,a=a.next}while(a!==null);o===null?i=o=t:o=o.next=t}else i=o=t;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var _c=!1;function bl(){if(_c){var e=Mn;if(e!==null)throw e}}function Sl(e,t,a,n){_c=!1;var i=e.updateQueue;ja=!1;var o=i.firstBaseUpdate,f=i.lastBaseUpdate,m=i.shared.pending;if(m!==null){i.shared.pending=null;var y=m,E=y.next;y.next=null,f===null?o=E:f.next=E,f=y;var D=e.alternate;D!==null&&(D=D.updateQueue,m=D.lastBaseUpdate,m!==f&&(m===null?D.firstBaseUpdate=E:m.next=E,D.lastBaseUpdate=y))}if(o!==null){var O=i.baseState;f=0,D=E=y=null,m=o;do{var q=m.lane&-536870913,T=q!==m.lane;if(T?(ne&q)===q:(n&q)===q){q!==0&&q===On&&(_c=!0),D!==null&&(D=D.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var L=e,K=m;q=t;var Se=a;switch(K.tag){case 1:if(L=K.payload,typeof L=="function"){O=L.call(Se,O,q);break e}O=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=K.payload,q=typeof L=="function"?L.call(Se,O,q):L,q==null)break e;O=N({},O,q);break e;case 2:ja=!0}}q=m.callback,q!==null&&(e.flags|=64,T&&(e.flags|=8192),T=i.callbacks,T===null?i.callbacks=[q]:T.push(q))}else T={lane:q,tag:m.tag,payload:m.payload,callback:m.callback,next:null},D===null?(E=D=T,y=O):D=D.next=T,f|=q;if(m=m.next,m===null){if(m=i.shared.pending,m===null)break;T=m,m=T.next,T.next=null,i.lastBaseUpdate=T,i.shared.pending=null}}while(!0);D===null&&(y=O),i.baseState=y,i.firstBaseUpdate=E,i.lastBaseUpdate=D,o===null&&(i.shared.lanes=0),Oa|=f,e.lanes=f,e.memoizedState=O}}function ps(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function gs(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)ps(a[e],t)}var xn=Ne(null),qr=Ne(0);function ys(e,t){e=da,M(qr,e),M(xn,t),da=e|t.baseLanes}function hc(){M(qr,da),M(xn,xn.current)}function pc(){da=qr.current,ye(xn),ye(qr)}var yt=Ne(null),xt=null;function Ta(e){var t=e.alternate;M(Me,Me.current&1),M(yt,e),xt===null&&(t===null||xn.current!==null||t.memoizedState!==null)&&(xt=e)}function gc(e){M(Me,Me.current),M(yt,e),xt===null&&(xt=e)}function vs(e){e.tag===22?(M(Me,Me.current),M(yt,e),xt===null&&(xt=e)):Da()}function Da(){M(Me,Me.current),M(yt,yt.current)}function vt(e){ye(yt),xt===e&&(xt=null),ye(Me)}var Me=Ne(0);function Tr(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ju(a)||Eu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=0,W=null,ve=null,Re=null,Dr=!1,Rn=!1,an=!1,Ar=0,wl=0,Un=null,Y_=0;function Ce(){throw Error(u(321))}function yc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!pt(e[a],t[a]))return!1;return!0}function vc(e,t,a,n,i,o){return la=o,W=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,A.H=e===null||e.memoizedState===null?af:xc,an=!1,o=a(n,i),an=!1,Rn&&(o=Ss(t,a,n,i)),bs(e),o}function bs(e){A.H=ql;var t=ve!==null&&ve.next!==null;if(la=0,Re=ve=W=null,Dr=!1,wl=0,Un=null,t)throw Error(u(300));e===null||Ue||(e=e.dependencies,e!==null&&yr(e)&&(Ue=!0))}function Ss(e,t,a,n){W=e;var i=0;do{if(Rn&&(Un=null),wl=0,Rn=!1,25<=i)throw Error(u(301));if(i+=1,Re=ve=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}A.H=nf,o=t(a,n)}while(Rn);return o}function G_(){var e=A.H,t=e.useState()[0];return t=typeof t.then=="function"?jl(t):t,e=e.useState()[0],(ve!==null?ve.memoizedState:null)!==e&&(W.flags|=1024),t}function bc(){var e=Ar!==0;return Ar=0,e}function Sc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function wc(e){if(Dr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Dr=!1}la=0,Re=ve=W=null,Rn=!1,wl=Ar=0,Un=null}function tt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?W.memoizedState=Re=e:Re=Re.next=e,Re}function ze(){if(ve===null){var e=W.alternate;e=e!==null?e.memoizedState:null}else e=ve.next;var t=Re===null?W.memoizedState:Re.next;if(t!==null)Re=t,ve=e;else{if(e===null)throw W.alternate===null?Error(u(467)):Error(u(310));ve=e,e={memoizedState:ve.memoizedState,baseState:ve.baseState,baseQueue:ve.baseQueue,queue:ve.queue,next:null},Re===null?W.memoizedState=Re=e:Re=Re.next=e}return Re}function Cr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function jl(e){var t=wl;return wl+=1,Un===null&&(Un=[]),e=fs(Un,e,t),t=W,(Re===null?t.memoizedState:Re.next)===null&&(t=t.alternate,A.H=t===null||t.memoizedState===null?af:xc),e}function Or(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return jl(e);if(e.$$typeof===$)return We(e)}throw Error(u(438,String(e)))}function jc(e){var t=null,a=W.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=W.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(i){return i.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Cr(),W.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=Wt;return t.index++,a}function ra(e,t){return typeof t=="function"?t(e):t}function Mr(e){var t=ze();return Ec(t,ve,e)}function Ec(e,t,a){var n=e.queue;if(n===null)throw Error(u(311));n.lastRenderedReducer=a;var i=e.baseQueue,o=n.pending;if(o!==null){if(i!==null){var f=i.next;i.next=o.next,o.next=f}t.baseQueue=i=o,n.pending=null}if(o=e.baseState,i===null)e.memoizedState=o;else{t=i.next;var m=f=null,y=null,E=t,D=!1;do{var O=E.lane&-536870913;if(O!==E.lane?(ne&O)===O:(la&O)===O){var q=E.revertLane;if(q===0)y!==null&&(y=y.next={lane:0,revertLane:0,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),O===On&&(D=!0);else if((la&q)===q){E=E.next,q===On&&(D=!0);continue}else O={lane:0,revertLane:E.revertLane,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},y===null?(m=y=O,f=o):y=y.next=O,W.lanes|=q,Oa|=q;O=E.action,an&&a(o,O),o=E.hasEagerState?E.eagerState:a(o,O)}else q={lane:O,revertLane:E.revertLane,gesture:E.gesture,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},y===null?(m=y=q,f=o):y=y.next=q,W.lanes|=O,Oa|=O;E=E.next}while(E!==null&&E!==t);if(y===null?f=o:y.next=m,!pt(o,e.memoizedState)&&(Ue=!0,D&&(a=Mn,a!==null)))throw a;e.memoizedState=o,e.baseState=f,e.baseQueue=y,n.lastRenderedState=o}return i===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function qc(e){var t=ze(),a=t.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=e;var n=a.dispatch,i=a.pending,o=t.memoizedState;if(i!==null){a.pending=null;var f=i=i.next;do o=e(o,f.action),f=f.next;while(f!==i);pt(o,t.memoizedState)||(Ue=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,n]}function ws(e,t,a){var n=W,i=ze(),o=re;if(o){if(a===void 0)throw Error(u(407));a=a()}else a=t();var f=!pt((ve||i).memoizedState,a);if(f&&(i.memoizedState=a,Ue=!0),i=i.queue,Ac(qs.bind(null,n,i,e),[e]),i.getSnapshot!==t||f||Re!==null&&Re.memoizedState.tag&1){if(n.flags|=2048,Bn(9,{destroy:void 0},Es.bind(null,n,i,a,t),null),we===null)throw Error(u(349));o||(la&127)!==0||js(n,t,a)}return a}function js(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=W.updateQueue,t===null?(t=Cr(),W.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Es(e,t,a,n){t.value=a,t.getSnapshot=n,Ts(t)&&Ds(e)}function qs(e,t,a){return a(function(){Ts(t)&&Ds(e)})}function Ts(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!pt(e,a)}catch{return!0}}function Ds(e){var t=Ka(e,2);t!==null&&ot(t,e,2)}function Tc(e){var t=tt();if(typeof e=="function"){var a=e;if(e=a(),an){pa(!0);try{a()}finally{pa(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:e},t}function As(e,t,a,n){return e.baseState=a,Ec(e,ve,typeof n=="function"?n:ra)}function Q_(e,t,a,n,i){if(xr(e))throw Error(u(485));if(e=t.action,e!==null){var o={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){o.listeners.push(f)}};A.T!==null?a(!0):o.isTransition=!1,n(o),a=t.pending,a===null?(o.next=t.pending=o,Cs(t,o)):(o.next=a.next,t.pending=a.next=o)}}function Cs(e,t){var a=t.action,n=t.payload,i=e.state;if(t.isTransition){var o=A.T,f={};A.T=f;try{var m=a(i,n),y=A.S;y!==null&&y(f,m),Os(e,t,m)}catch(E){Dc(e,t,E)}finally{o!==null&&f.types!==null&&(o.types=f.types),A.T=o}}else try{o=a(i,n),Os(e,t,o)}catch(E){Dc(e,t,E)}}function Os(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){Ms(e,t,n)},function(n){return Dc(e,t,n)}):Ms(e,t,a)}function Ms(e,t,a){t.status="fulfilled",t.value=a,zs(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Cs(e,a)))}function Dc(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,zs(t),t=t.next;while(t!==n)}e.action=null}function zs(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ns(e,t){return t}function xs(e,t){if(re){var a=we.formState;if(a!==null){e:{var n=W;if(re){if(Ee){t:{for(var i=Ee,o=Nt;i.nodeType!==8;){if(!o){i=null;break t}if(i=Rt(i.nextSibling),i===null){i=null;break t}}o=i.data,i=o==="F!"||o==="F"?i:null}if(i){Ee=Rt(i.nextSibling),n=i.data==="F!";break e}}Sa(n)}n=!1}n&&(t=a[0])}}return a=tt(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ns,lastRenderedState:t},a.queue=n,a=Is.bind(null,W,n),n.dispatch=a,n=Tc(!1),o=Nc.bind(null,W,!1,n.queue),n=tt(),i={state:t,dispatch:null,action:e,pending:null},n.queue=i,a=Q_.bind(null,W,i,o,a),i.dispatch=a,n.memoizedState=e,[t,a,!1]}function Rs(e){var t=ze();return Us(t,ve,e)}function Us(e,t,a){if(t=Ec(e,t,Ns)[0],e=Mr(ra)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=jl(t)}catch(f){throw f===zn?Sr:f}else n=t;t=ze();var i=t.queue,o=i.dispatch;return a!==t.memoizedState&&(W.flags|=2048,Bn(9,{destroy:void 0},X_.bind(null,i,a),null)),[n,o,e]}function X_(e,t){e.action=t}function Bs(e){var t=ze(),a=ve;if(a!==null)return Us(t,a,e);ze(),t=t.memoizedState,a=ze();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Bn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=W.updateQueue,t===null&&(t=Cr(),W.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function Hs(){return ze().memoizedState}function zr(e,t,a,n){var i=tt();W.flags|=e,i.memoizedState=Bn(1|t,{destroy:void 0},a,n===void 0?null:n)}function Nr(e,t,a,n){var i=ze();n=n===void 0?null:n;var o=i.memoizedState.inst;ve!==null&&n!==null&&yc(n,ve.memoizedState.deps)?i.memoizedState=Bn(t,o,a,n):(W.flags|=e,i.memoizedState=Bn(1|t,o,a,n))}function ks(e,t){zr(8390656,8,e,t)}function Ac(e,t){Nr(2048,8,e,t)}function Z_(e){W.flags|=4;var t=W.updateQueue;if(t===null)t=Cr(),W.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Ls(e){var t=ze().memoizedState;return Z_({ref:t,nextImpl:e}),function(){if((me&2)!==0)throw Error(u(440));return t.impl.apply(void 0,arguments)}}function Ys(e,t){return Nr(4,2,e,t)}function Gs(e,t){return Nr(4,4,e,t)}function Qs(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xs(e,t,a){a=a!=null?a.concat([e]):null,Nr(4,4,Qs.bind(null,t,e),a)}function Cc(){}function Zs(e,t){var a=ze();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&yc(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Vs(e,t){var a=ze();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&yc(t,n[1]))return n[0];if(n=e(),an){pa(!0);try{e()}finally{pa(!1)}}return a.memoizedState=[n,t],n}function Oc(e,t,a){return a===void 0||(la&1073741824)!==0&&(ne&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Jf(),W.lanes|=e,Oa|=e,a)}function Ks(e,t,a,n){return pt(a,t)?a:xn.current!==null?(e=Oc(e,a,n),pt(e,t)||(Ue=!0),e):(la&42)===0||(la&1073741824)!==0&&(ne&261930)===0?(Ue=!0,e.memoizedState=a):(e=Jf(),W.lanes|=e,Oa|=e,t)}function Js(e,t,a,n,i){var o=x.p;x.p=o!==0&&8>o?o:8;var f=A.T,m={};A.T=m,Nc(e,!1,t,a);try{var y=i(),E=A.S;if(E!==null&&E(m,y),y!==null&&typeof y=="object"&&typeof y.then=="function"){var D=L_(y,n);El(e,t,D,wt(e))}else El(e,t,n,wt(e))}catch(O){El(e,t,{then:function(){},status:"rejected",reason:O},wt())}finally{x.p=o,f!==null&&m.types!==null&&(f.types=m.types),A.T=f}}function V_(){}function Mc(e,t,a,n){if(e.tag!==5)throw Error(u(476));var i=Ws(e).queue;Js(e,i,t,k,a===null?V_:function(){return $s(e),a(n)})}function Ws(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:k},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function $s(e){var t=Ws(e);t.next===null&&(t=e.alternate.memoizedState),El(e,t.next.queue,{},wt())}function zc(){return We(Yl)}function Fs(){return ze().memoizedState}function Ps(){return ze().memoizedState}function K_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=wt();e=Ea(a);var n=qa(t,e,a);n!==null&&(ot(n,t,a),vl(n,t,a)),t={cache:cc()},e.payload=t;return}t=t.return}}function J_(e,t,a){var n=wt();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},xr(e)?ef(t,a):(a=$i(e,t,a,n),a!==null&&(ot(a,e,n),tf(a,t,n)))}function Is(e,t,a){var n=wt();El(e,t,a,n)}function El(e,t,a,n){var i={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(xr(e))ef(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var f=t.lastRenderedState,m=o(f,a);if(i.hasEagerState=!0,i.eagerState=m,pt(m,f))return _r(e,t,i,0),we===null&&mr(),!1}catch{}finally{}if(a=$i(e,t,i,n),a!==null)return ot(a,e,n),tf(a,t,n),!0}return!1}function Nc(e,t,a,n){if(n={lane:2,revertLane:fu(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},xr(e)){if(t)throw Error(u(479))}else t=$i(e,a,n,2),t!==null&&ot(t,e,2)}function xr(e){var t=e.alternate;return e===W||t!==null&&t===W}function ef(e,t){Rn=Dr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function tf(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,ro(e,a)}}var ql={readContext:We,use:Or,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useLayoutEffect:Ce,useInsertionEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useSyncExternalStore:Ce,useId:Ce,useHostTransitionStatus:Ce,useFormState:Ce,useActionState:Ce,useOptimistic:Ce,useMemoCache:Ce,useCacheRefresh:Ce};ql.useEffectEvent=Ce;var af={readContext:We,use:Or,useCallback:function(e,t){return tt().memoizedState=[e,t===void 0?null:t],e},useContext:We,useEffect:ks,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,zr(4194308,4,Qs.bind(null,t,e),a)},useLayoutEffect:function(e,t){return zr(4194308,4,e,t)},useInsertionEffect:function(e,t){zr(4,2,e,t)},useMemo:function(e,t){var a=tt();t=t===void 0?null:t;var n=e();if(an){pa(!0);try{e()}finally{pa(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=tt();if(a!==void 0){var i=a(t);if(an){pa(!0);try{a(t)}finally{pa(!1)}}}else i=t;return n.memoizedState=n.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=J_.bind(null,W,e),[n.memoizedState,e]},useRef:function(e){var t=tt();return e={current:e},t.memoizedState=e},useState:function(e){e=Tc(e);var t=e.queue,a=Is.bind(null,W,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Cc,useDeferredValue:function(e,t){var a=tt();return Oc(a,e,t)},useTransition:function(){var e=Tc(!1);return e=Js.bind(null,W,e.queue,!0,!1),tt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=W,i=tt();if(re){if(a===void 0)throw Error(u(407));a=a()}else{if(a=t(),we===null)throw Error(u(349));(ne&127)!==0||js(n,t,a)}i.memoizedState=a;var o={value:a,getSnapshot:t};return i.queue=o,ks(qs.bind(null,n,o,e),[e]),n.flags|=2048,Bn(9,{destroy:void 0},Es.bind(null,n,o,a,t),null),a},useId:function(){var e=tt(),t=we.identifierPrefix;if(re){var a=Vt,n=Zt;a=(n&~(1<<32-ht(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Ar++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Y_++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:zc,useFormState:xs,useActionState:xs,useOptimistic:function(e){var t=tt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=Nc.bind(null,W,!0,a),a.dispatch=t,[e,t]},useMemoCache:jc,useCacheRefresh:function(){return tt().memoizedState=K_.bind(null,W)},useEffectEvent:function(e){var t=tt(),a={impl:e};return t.memoizedState=a,function(){if((me&2)!==0)throw Error(u(440));return a.impl.apply(void 0,arguments)}}},xc={readContext:We,use:Or,useCallback:Zs,useContext:We,useEffect:Ac,useImperativeHandle:Xs,useInsertionEffect:Ys,useLayoutEffect:Gs,useMemo:Vs,useReducer:Mr,useRef:Hs,useState:function(){return Mr(ra)},useDebugValue:Cc,useDeferredValue:function(e,t){var a=ze();return Ks(a,ve.memoizedState,e,t)},useTransition:function(){var e=Mr(ra)[0],t=ze().memoizedState;return[typeof e=="boolean"?e:jl(e),t]},useSyncExternalStore:ws,useId:Fs,useHostTransitionStatus:zc,useFormState:Rs,useActionState:Rs,useOptimistic:function(e,t){var a=ze();return As(a,ve,e,t)},useMemoCache:jc,useCacheRefresh:Ps};xc.useEffectEvent=Ls;var nf={readContext:We,use:Or,useCallback:Zs,useContext:We,useEffect:Ac,useImperativeHandle:Xs,useInsertionEffect:Ys,useLayoutEffect:Gs,useMemo:Vs,useReducer:qc,useRef:Hs,useState:function(){return qc(ra)},useDebugValue:Cc,useDeferredValue:function(e,t){var a=ze();return ve===null?Oc(a,e,t):Ks(a,ve.memoizedState,e,t)},useTransition:function(){var e=qc(ra)[0],t=ze().memoizedState;return[typeof e=="boolean"?e:jl(e),t]},useSyncExternalStore:ws,useId:Fs,useHostTransitionStatus:zc,useFormState:Bs,useActionState:Bs,useOptimistic:function(e,t){var a=ze();return ve!==null?As(a,ve,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jc,useCacheRefresh:Ps};nf.useEffectEvent=Ls;function Rc(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:N({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Uc={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=wt(),i=Ea(n);i.payload=t,a!=null&&(i.callback=a),t=qa(e,i,n),t!==null&&(ot(t,e,n),vl(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=wt(),i=Ea(n);i.tag=1,i.payload=t,a!=null&&(i.callback=a),t=qa(e,i,n),t!==null&&(ot(t,e,n),vl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=wt(),n=Ea(a);n.tag=2,t!=null&&(n.callback=t),t=qa(e,n,a),t!==null&&(ot(t,e,a),vl(t,e,a))}};function lf(e,t,a,n,i,o,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,o,f):t.prototype&&t.prototype.isPureReactComponent?!fl(a,n)||!fl(i,o):!0}function rf(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Uc.enqueueReplaceState(t,t.state,null)}function nn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=N({},a));for(var i in e)a[i]===void 0&&(a[i]=e[i])}return a}function cf(e){dr(e)}function uf(e){console.error(e)}function of(e){dr(e)}function Rr(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function sf(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function Bc(e,t,a){return a=Ea(a),a.tag=3,a.payload={element:null},a.callback=function(){Rr(e,t)},a}function ff(e){return e=Ea(e),e.tag=3,e}function df(e,t,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var o=n.value;e.payload=function(){return i(o)},e.callback=function(){sf(t,a,n)}}var f=a.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){sf(t,a,n),typeof i!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})})}function W_(e,t,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Cn(t,a,i,!0),a=yt.current,a!==null){switch(a.tag){case 31:case 13:return xt===null?Kr():a.alternate===null&&Oe===0&&(Oe=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===wr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),uu(e,n,i)),!1;case 22:return a.flags|=65536,n===wr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),uu(e,n,i)),!1}throw Error(u(435,a.tag))}return uu(e,n,i),Kr(),!1}if(re)return t=yt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=i,n!==ac&&(e=Error(u(422),{cause:n}),_l(Ot(e,a)))):(n!==ac&&(t=Error(u(423),{cause:n}),_l(Ot(t,a))),e=e.current.alternate,e.flags|=65536,i&=-i,e.lanes|=i,n=Ot(n,a),i=Bc(e.stateNode,n,i),mc(e,i),Oe!==4&&(Oe=2)),!1;var o=Error(u(520),{cause:n});if(o=Ot(o,a),Nl===null?Nl=[o]:Nl.push(o),Oe!==4&&(Oe=2),t===null)return!0;n=Ot(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=i&-i,a.lanes|=e,e=Bc(a.stateNode,n,e),mc(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(Ma===null||!Ma.has(o))))return a.flags|=65536,i&=-i,a.lanes|=i,i=ff(i),df(i,e,a,n),mc(a,i),!1}a=a.return}while(a!==null);return!1}var Hc=Error(u(461)),Ue=!1;function $e(e,t,a,n){t.child=e===null?hs(t,null,a,n):tn(t,e.child,a,n)}function mf(e,t,a,n,i){a=a.render;var o=t.ref;if("ref"in n){var f={};for(var m in n)m!=="ref"&&(f[m]=n[m])}else f=n;return Fa(t),n=vc(e,t,a,f,o,i),m=bc(),e!==null&&!Ue?(Sc(e,t,i),ia(e,t,i)):(re&&m&&ec(t),t.flags|=1,$e(e,t,n,i),t.child)}function _f(e,t,a,n,i){if(e===null){var o=a.type;return typeof o=="function"&&!Fi(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,hf(e,t,o,n,i)):(e=pr(a.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Vc(e,i)){var f=o.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(f,n)&&e.ref===t.ref)return ia(e,t,i)}return t.flags|=1,e=ea(o,n),e.ref=t.ref,e.return=t,t.child=e}function hf(e,t,a,n,i){if(e!==null){var o=e.memoizedProps;if(fl(o,n)&&e.ref===t.ref)if(Ue=!1,t.pendingProps=n=o,Vc(e,i))(e.flags&131072)!==0&&(Ue=!0);else return t.lanes=e.lanes,ia(e,t,i)}return kc(e,t,a,n,i)}function pf(e,t,a,n){var i=n.children,o=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,e!==null){for(n=t.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;n=i&~o}else n=0,t.child=null;return gf(e,t,o,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&br(t,o!==null?o.cachePool:null),o!==null?ys(t,o):hc(),vs(t);else return n=t.lanes=536870912,gf(e,t,o!==null?o.baseLanes|a:a,a,n)}else o!==null?(br(t,o.cachePool),ys(t,o),Da(),t.memoizedState=null):(e!==null&&br(t,null),hc(),Da());return $e(e,t,i,a),t.child}function Tl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gf(e,t,a,n,i){var o=oc();return o=o===null?null:{parent:xe._currentValue,pool:o},t.memoizedState={baseLanes:a,cachePool:o},e!==null&&br(t,null),hc(),vs(t),e!==null&&Cn(e,t,n,!0),t.childLanes=i,null}function Ur(e,t){return t=Hr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function yf(e,t,a){return tn(t,e.child,null,a),e=Ur(t,t.pendingProps),e.flags|=2,vt(t),t.memoizedState=null,e}function $_(e,t,a){var n=t.pendingProps,i=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(re){if(n.mode==="hidden")return e=Ur(t,n),t.lanes=536870912,Tl(null,e);if(gc(t),(e=Ee)?(e=Od(e,Nt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Zt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},a=es(e),a.return=t,t.child=a,Je=t,Ee=null)):e=null,e===null)throw Sa(t);return t.lanes=536870912,null}return Ur(t,n)}var o=e.memoizedState;if(o!==null){var f=o.dehydrated;if(gc(t),i)if(t.flags&256)t.flags&=-257,t=yf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(u(558));else if(Ue||Cn(e,t,a,!1),i=(a&e.childLanes)!==0,Ue||i){if(n=we,n!==null&&(f=io(n,a),f!==0&&f!==o.retryLane))throw o.retryLane=f,Ka(e,f),ot(n,e,f),Hc;Kr(),t=yf(e,t,a)}else e=o.treeContext,Ee=Rt(f.nextSibling),Je=t,re=!0,ba=null,Nt=!1,e!==null&&ns(t,e),t=Ur(t,n),t.flags|=4096;return t}return e=ea(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Br(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(u(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function kc(e,t,a,n,i){return Fa(t),a=vc(e,t,a,n,void 0,i),n=bc(),e!==null&&!Ue?(Sc(e,t,i),ia(e,t,i)):(re&&n&&ec(t),t.flags|=1,$e(e,t,a,i),t.child)}function vf(e,t,a,n,i,o){return Fa(t),t.updateQueue=null,a=Ss(t,n,a,i),bs(e),n=bc(),e!==null&&!Ue?(Sc(e,t,o),ia(e,t,o)):(re&&n&&ec(t),t.flags|=1,$e(e,t,a,o),t.child)}function bf(e,t,a,n,i){if(Fa(t),t.stateNode===null){var o=qn,f=a.contextType;typeof f=="object"&&f!==null&&(o=We(f)),o=new a(n,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Uc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=n,o.state=t.memoizedState,o.refs={},fc(t),f=a.contextType,o.context=typeof f=="object"&&f!==null?We(f):qn,o.state=t.memoizedState,f=a.getDerivedStateFromProps,typeof f=="function"&&(Rc(t,a,f,n),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(f=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),f!==o.state&&Uc.enqueueReplaceState(o,o.state,null),Sl(t,n,o,i),bl(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){o=t.stateNode;var m=t.memoizedProps,y=nn(a,m);o.props=y;var E=o.context,D=a.contextType;f=qn,typeof D=="object"&&D!==null&&(f=We(D));var O=a.getDerivedStateFromProps;D=typeof O=="function"||typeof o.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,D||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(m||E!==f)&&rf(t,o,n,f),ja=!1;var q=t.memoizedState;o.state=q,Sl(t,n,o,i),bl(),E=t.memoizedState,m||q!==E||ja?(typeof O=="function"&&(Rc(t,a,O,n),E=t.memoizedState),(y=ja||lf(t,a,y,n,q,E,f))?(D||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=E),o.props=n,o.state=E,o.context=f,n=y):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,dc(e,t),f=t.memoizedProps,D=nn(a,f),o.props=D,O=t.pendingProps,q=o.context,E=a.contextType,y=qn,typeof E=="object"&&E!==null&&(y=We(E)),m=a.getDerivedStateFromProps,(E=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(f!==O||q!==y)&&rf(t,o,n,y),ja=!1,q=t.memoizedState,o.state=q,Sl(t,n,o,i),bl();var T=t.memoizedState;f!==O||q!==T||ja||e!==null&&e.dependencies!==null&&yr(e.dependencies)?(typeof m=="function"&&(Rc(t,a,m,n),T=t.memoizedState),(D=ja||lf(t,a,D,n,q,T,y)||e!==null&&e.dependencies!==null&&yr(e.dependencies))?(E||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,T,y),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,T,y)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=T),o.props=n,o.state=T,o.context=y,n=D):(typeof o.componentDidUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),n=!1)}return o=n,Br(e,t),n=(t.flags&128)!==0,o||n?(o=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&n?(t.child=tn(t,e.child,null,i),t.child=tn(t,null,a,i)):$e(e,t,a,i),t.memoizedState=o.state,e=t.child):e=ia(e,t,i),e}function Sf(e,t,a,n){return Wa(),t.flags|=256,$e(e,t,a,n),t.child}var Lc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yc(e){return{baseLanes:e,cachePool:os()}}function Gc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=St),e}function wf(e,t,a){var n=t.pendingProps,i=!1,o=(t.flags&128)!==0,f;if((f=o)||(f=e!==null&&e.memoizedState===null?!1:(Me.current&2)!==0),f&&(i=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(re){if(i?Ta(t):Da(),(e=Ee)?(e=Od(e,Nt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:va!==null?{id:Zt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},a=es(e),a.return=t,t.child=a,Je=t,Ee=null)):e=null,e===null)throw Sa(t);return Eu(e)?t.lanes=32:t.lanes=536870912,null}var m=n.children;return n=n.fallback,i?(Da(),i=t.mode,m=Hr({mode:"hidden",children:m},i),n=Ja(n,i,a,null),m.return=t,n.return=t,m.sibling=n,t.child=m,n=t.child,n.memoizedState=Yc(a),n.childLanes=Gc(e,f,a),t.memoizedState=Lc,Tl(null,n)):(Ta(t),Qc(t,m))}var y=e.memoizedState;if(y!==null&&(m=y.dehydrated,m!==null)){if(o)t.flags&256?(Ta(t),t.flags&=-257,t=Xc(e,t,a)):t.memoizedState!==null?(Da(),t.child=e.child,t.flags|=128,t=null):(Da(),m=n.fallback,i=t.mode,n=Hr({mode:"visible",children:n.children},i),m=Ja(m,i,a,null),m.flags|=2,n.return=t,m.return=t,n.sibling=m,t.child=n,tn(t,e.child,null,a),n=t.child,n.memoizedState=Yc(a),n.childLanes=Gc(e,f,a),t.memoizedState=Lc,t=Tl(null,n));else if(Ta(t),Eu(m)){if(f=m.nextSibling&&m.nextSibling.dataset,f)var E=f.dgst;f=E,n=Error(u(419)),n.stack="",n.digest=f,_l({value:n,source:null,stack:null}),t=Xc(e,t,a)}else if(Ue||Cn(e,t,a,!1),f=(a&e.childLanes)!==0,Ue||f){if(f=we,f!==null&&(n=io(f,a),n!==0&&n!==y.retryLane))throw y.retryLane=n,Ka(e,n),ot(f,e,n),Hc;ju(m)||Kr(),t=Xc(e,t,a)}else ju(m)?(t.flags|=192,t.child=e.child,t=null):(e=y.treeContext,Ee=Rt(m.nextSibling),Je=t,re=!0,ba=null,Nt=!1,e!==null&&ns(t,e),t=Qc(t,n.children),t.flags|=4096);return t}return i?(Da(),m=n.fallback,i=t.mode,y=e.child,E=y.sibling,n=ea(y,{mode:"hidden",children:n.children}),n.subtreeFlags=y.subtreeFlags&65011712,E!==null?m=ea(E,m):(m=Ja(m,i,a,null),m.flags|=2),m.return=t,n.return=t,n.sibling=m,t.child=n,Tl(null,n),n=t.child,m=e.child.memoizedState,m===null?m=Yc(a):(i=m.cachePool,i!==null?(y=xe._currentValue,i=i.parent!==y?{parent:y,pool:y}:i):i=os(),m={baseLanes:m.baseLanes|a,cachePool:i}),n.memoizedState=m,n.childLanes=Gc(e,f,a),t.memoizedState=Lc,Tl(e.child,n)):(Ta(t),a=e.child,e=a.sibling,a=ea(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=a,t.memoizedState=null,a)}function Qc(e,t){return t=Hr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Hr(e,t){return e=gt(22,e,null,t),e.lanes=0,e}function Xc(e,t,a){return tn(t,e.child,null,a),e=Qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jf(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rc(e.return,t,a)}function Zc(e,t,a,n,i,o){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i,treeForkCount:o}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=n,f.tail=a,f.tailMode=i,f.treeForkCount=o)}function Ef(e,t,a){var n=t.pendingProps,i=n.revealOrder,o=n.tail;n=n.children;var f=Me.current,m=(f&2)!==0;if(m?(f=f&1|2,t.flags|=128):f&=1,M(Me,f),$e(e,t,n,a),n=re?ml:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jf(e,a,t);else if(e.tag===19)jf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(a=t.child,i=null;a!==null;)e=a.alternate,e!==null&&Tr(e)===null&&(i=a),a=a.sibling;a=i,a===null?(i=t.child,t.child=null):(i=a.sibling,a.sibling=null),Zc(t,!1,i,a,o,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Tr(e)===null){t.child=i;break}e=i.sibling,i.sibling=a,a=i,i=e}Zc(t,!0,a,null,o,n);break;case"together":Zc(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function ia(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Oa|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Cn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,a=ea(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ea(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Vc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&yr(e)))}function F_(e,t,a){switch(t.tag){case 3:Te(t,t.stateNode.containerInfo),wa(t,xe,e.memoizedState.cache),Wa();break;case 27:case 5:Ve(t);break;case 4:Te(t,t.stateNode.containerInfo);break;case 10:wa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,gc(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ta(t),t.flags|=128,null):(a&t.child.childLanes)!==0?wf(e,t,a):(Ta(t),e=ia(e,t,a),e!==null?e.sibling:null);Ta(t);break;case 19:var i=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Cn(e,t,a,!1),n=(a&t.childLanes)!==0),i){if(n)return Ef(e,t,a);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),M(Me,Me.current),n)break;return null;case 22:return t.lanes=0,pf(e,t,a,t.pendingProps);case 24:wa(t,xe,e.memoizedState.cache)}return ia(e,t,a)}function qf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ue=!0;else{if(!Vc(e,a)&&(t.flags&128)===0)return Ue=!1,F_(e,t,a);Ue=(e.flags&131072)!==0}else Ue=!1,re&&(t.flags&1048576)!==0&&as(t,ml,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=Ia(t.elementType),t.type=e,typeof e=="function")Fi(e)?(n=nn(e,n),t.tag=1,t=bf(null,t,e,n,a)):(t.tag=0,t=kc(null,t,e,n,a));else{if(e!=null){var i=e.$$typeof;if(i===J){t.tag=11,t=mf(null,t,e,n,a);break e}else if(i===Pe){t.tag=14,t=_f(null,t,e,n,a);break e}}throw t=Xt(e)||e,Error(u(306,t,""))}}return t;case 0:return kc(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,i=nn(n,t.pendingProps),bf(e,t,n,i,a);case 3:e:{if(Te(t,t.stateNode.containerInfo),e===null)throw Error(u(387));n=t.pendingProps;var o=t.memoizedState;i=o.element,dc(e,t),Sl(t,n,null,a);var f=t.memoizedState;if(n=f.cache,wa(t,xe,n),n!==o.cache&&ic(t,[xe],a,!0),bl(),n=f.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Sf(e,t,n,a);break e}else if(n!==i){i=Ot(Error(u(424)),t),_l(i),t=Sf(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ee=Rt(e.firstChild),Je=t,re=!0,ba=null,Nt=!0,a=hs(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Wa(),n===i){t=ia(e,t,a);break e}$e(e,t,n,a)}t=t.child}return t;case 26:return Br(e,t),e===null?(a=Ud(t.type,null,t.pendingProps,null))?t.memoizedState=a:re||(a=t.type,e=t.pendingProps,n=ei(Q.current).createElement(a),n[Ke]=t,n[nt]=e,Fe(n,a,e),Qe(n),t.stateNode=n):t.memoizedState=Ud(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ve(t),e===null&&re&&(n=t.stateNode=Nd(t.type,t.pendingProps,Q.current),Je=t,Nt=!0,i=Ee,Ra(t.type)?(qu=i,Ee=Rt(n.firstChild)):Ee=i),$e(e,t,t.pendingProps.children,a),Br(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&re&&((i=n=Ee)&&(n=Dh(n,t.type,t.pendingProps,Nt),n!==null?(t.stateNode=n,Je=t,Ee=Rt(n.firstChild),Nt=!1,i=!0):i=!1),i||Sa(t)),Ve(t),i=t.type,o=t.pendingProps,f=e!==null?e.memoizedProps:null,n=o.children,bu(i,o)?n=null:f!==null&&bu(i,f)&&(t.flags|=32),t.memoizedState!==null&&(i=vc(e,t,G_,null,null,a),Yl._currentValue=i),Br(e,t),$e(e,t,n,a),t.child;case 6:return e===null&&re&&((e=a=Ee)&&(a=Ah(a,t.pendingProps,Nt),a!==null?(t.stateNode=a,Je=t,Ee=null,e=!0):e=!1),e||Sa(t)),null;case 13:return wf(e,t,a);case 4:return Te(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=tn(t,null,n,a):$e(e,t,n,a),t.child;case 11:return mf(e,t,t.type,t.pendingProps,a);case 7:return $e(e,t,t.pendingProps,a),t.child;case 8:return $e(e,t,t.pendingProps.children,a),t.child;case 12:return $e(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,wa(t,t.type,n.value),$e(e,t,n.children,a),t.child;case 9:return i=t.type._context,n=t.pendingProps.children,Fa(t),i=We(i),n=n(i),t.flags|=1,$e(e,t,n,a),t.child;case 14:return _f(e,t,t.type,t.pendingProps,a);case 15:return hf(e,t,t.type,t.pendingProps,a);case 19:return Ef(e,t,a);case 31:return $_(e,t,a);case 22:return pf(e,t,a,t.pendingProps);case 24:return Fa(t),n=We(xe),e===null?(i=oc(),i===null&&(i=we,o=cc(),i.pooledCache=o,o.refCount++,o!==null&&(i.pooledCacheLanes|=a),i=o),t.memoizedState={parent:n,cache:i},fc(t),wa(t,xe,i)):((e.lanes&a)!==0&&(dc(e,t),Sl(t,null,null,a),bl()),i=e.memoizedState,o=t.memoizedState,i.parent!==n?(i={parent:n,cache:n},t.memoizedState=i,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=i),wa(t,xe,n)):(n=o.cache,wa(t,xe,n),n!==i.cache&&ic(t,[xe],a,!0))),$e(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function ca(e){e.flags|=4}function Kc(e,t,a,n,i){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(i&335544128)===i)if(e.stateNode.complete)e.flags|=8192;else if(Pf())e.flags|=8192;else throw en=wr,sc}else e.flags&=-16777217}function Tf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yd(t))if(Pf())e.flags|=8192;else throw en=wr,sc}function kr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?no():536870912,e.lanes|=t,Yn|=t)}function Dl(e,t){if(!re)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function P_(e,t,a){var n=t.pendingProps;switch(tc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),na(xe),Ae(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(An(t)?ca(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,nc())),qe(t),null;case 26:var i=t.type,o=t.memoizedState;return e===null?(ca(t),o!==null?(qe(t),Tf(t,o)):(qe(t),Kc(t,i,null,n,a))):o?o!==e.memoizedState?(ca(t),qe(t),Tf(t,o)):(qe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&ca(t),qe(t),Kc(t,i,e,n,a)),null;case 27:if(et(t),a=Q.current,i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return qe(t),null}e=P.current,An(t)?ls(t):(e=Nd(i,n,a),t.stateNode=e,ca(t))}return qe(t),null;case 5:if(et(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(!n){if(t.stateNode===null)throw Error(u(166));return qe(t),null}if(o=P.current,An(t))ls(t);else{var f=ei(Q.current);switch(o){case 1:o=f.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:o=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":o=f.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":o=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":o=f.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof n.is=="string"?f.createElement("select",{is:n.is}):f.createElement("select"),n.multiple?o.multiple=!0:n.size&&(o.size=n.size);break;default:o=typeof n.is=="string"?f.createElement(i,{is:n.is}):f.createElement(i)}}o[Ke]=t,o[nt]=n;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)o.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=o;e:switch(Fe(o,i,n),i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ca(t)}}return qe(t),Kc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&ca(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(u(166));if(e=Q.current,An(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,i=Je,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}e[Ke]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||wd(e.nodeValue,a)),e||Sa(t,!0)}else e=ei(e).createTextNode(n),e[Ke]=t,t.stateNode=e}return qe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=An(t),a!==null){if(e===null){if(!n)throw Error(u(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(557));e[Ke]=t}else Wa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),e=!1}else a=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(vt(t),t):(vt(t),null);if((t.flags&128)!==0)throw Error(u(558))}return qe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(i=An(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(u(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(u(317));i[Ke]=t}else Wa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),i=!1}else i=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return t.flags&256?(vt(t),t):(vt(t),null)}return vt(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),kr(t,t.updateQueue),qe(t),null);case 4:return Ae(),e===null&&hu(t.stateNode.containerInfo),qe(t),null;case 10:return na(t.type),qe(t),null;case 19:if(ye(Me),n=t.memoizedState,n===null)return qe(t),null;if(i=(t.flags&128)!==0,o=n.rendering,o===null)if(i)Dl(n,!1);else{if(Oe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Tr(e),o!==null){for(t.flags|=128,Dl(n,!1),e=o.updateQueue,t.updateQueue=e,kr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Io(a,e),a=a.sibling;return M(Me,Me.current&1|2),re&&ta(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&mt()>Xr&&(t.flags|=128,i=!0,Dl(n,!1),t.lanes=4194304)}else{if(!i)if(e=Tr(o),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,kr(t,e),Dl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!re)return qe(t),null}else 2*mt()-n.renderingStartTime>Xr&&a!==536870912&&(t.flags|=128,i=!0,Dl(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(e=n.last,e!==null?e.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=mt(),e.sibling=null,a=Me.current,M(Me,i?a&1|2:a&1),re&&ta(t,n.treeForkCount),e):(qe(t),null);case 22:case 23:return vt(t),pc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),a=t.updateQueue,a!==null&&kr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&ye(Pa),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),na(xe),qe(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function I_(e,t){switch(tc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return na(xe),Ae(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return et(t),null;case 31:if(t.memoizedState!==null){if(vt(t),t.alternate===null)throw Error(u(340));Wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(vt(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));Wa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ye(Me),null;case 4:return Ae(),null;case 10:return na(t.type),null;case 22:case 23:return vt(t),pc(),e!==null&&ye(Pa),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return na(xe),null;case 25:return null;default:return null}}function Df(e,t){switch(tc(t),t.tag){case 3:na(xe),Ae();break;case 26:case 27:case 5:et(t);break;case 4:Ae();break;case 31:t.memoizedState!==null&&vt(t);break;case 13:vt(t);break;case 19:ye(Me);break;case 10:na(t.type);break;case 22:case 23:vt(t),pc(),e!==null&&ye(Pa);break;case 24:na(xe)}}function Al(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&e)===e){n=void 0;var o=a.create,f=a.inst;n=o(),f.destroy=n}a=a.next}while(a!==i)}}catch(m){ge(t,t.return,m)}}function Aa(e,t,a){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){var f=n.inst,m=f.destroy;if(m!==void 0){f.destroy=void 0,i=t;var y=a,E=m;try{E()}catch(D){ge(i,y,D)}}}n=n.next}while(n!==o)}}catch(D){ge(t,t.return,D)}}function Af(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{gs(t,a)}catch(n){ge(e,e.return,n)}}}function Cf(e,t,a){a.props=nn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){ge(e,t,n)}}function Cl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(i){ge(e,t,i)}}function Kt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){ge(e,t,i)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){ge(e,t,i)}else a.current=null}function Of(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(i){ge(e,e.return,i)}}function Jc(e,t,a){try{var n=e.stateNode;Sh(n,e.type,a,t),n[nt]=t}catch(i){ge(e,e.return,i)}}function Mf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ra(e.type)||e.tag===4}function Wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Mf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ra(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $c(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=Pt));else if(n!==4&&(n===27&&Ra(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for($c(e,t,a),e=e.sibling;e!==null;)$c(e,t,a),e=e.sibling}function Lr(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&Ra(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Lr(e,t,a),e=e.sibling;e!==null;)Lr(e,t,a),e=e.sibling}function zf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Fe(t,n,a),t[Ke]=e,t[nt]=a}catch(o){ge(e,e.return,o)}}var ua=!1,Be=!1,Fc=!1,Nf=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function eh(e,t){if(e=e.containerInfo,yu=ci,e=Xo(e),Xi(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var f=0,m=-1,y=-1,E=0,D=0,O=e,q=null;t:for(;;){for(var T;O!==a||i!==0&&O.nodeType!==3||(m=f+i),O!==o||n!==0&&O.nodeType!==3||(y=f+n),O.nodeType===3&&(f+=O.nodeValue.length),(T=O.firstChild)!==null;)q=O,O=T;for(;;){if(O===e)break t;if(q===a&&++E===i&&(m=f),q===o&&++D===n&&(y=f),(T=O.nextSibling)!==null)break;O=q,q=O.parentNode}O=T}a=m===-1||y===-1?null:{start:m,end:y}}else a=null}a=a||{start:0,end:0}}else a=null;for(vu={focusedElem:e,selectionRange:a},ci=!1,Xe=t;Xe!==null;)if(t=Xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Xe=e;else for(;Xe!==null;){switch(t=Xe,o=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)i=e[a],i.ref.impl=i.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,a=t,i=o.memoizedProps,o=o.memoizedState,n=a.stateNode;try{var L=nn(a.type,i);e=n.getSnapshotBeforeUpdate(L,o),n.__reactInternalSnapshotBeforeUpdate=e}catch(K){ge(a,a.return,K)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)wu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":wu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,Xe=e;break}Xe=t.return}}function xf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:sa(e,a),n&4&&Al(5,a);break;case 1:if(sa(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(f){ge(a,a.return,f)}else{var i=nn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){ge(a,a.return,f)}}n&64&&Af(a),n&512&&Cl(a,a.return);break;case 3:if(sa(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{gs(e,t)}catch(f){ge(a,a.return,f)}}break;case 27:t===null&&n&4&&zf(a);case 26:case 5:sa(e,a),t===null&&n&4&&Of(a),n&512&&Cl(a,a.return);break;case 12:sa(e,a);break;case 31:sa(e,a),n&4&&Bf(e,a);break;case 13:sa(e,a),n&4&&Hf(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=oh.bind(null,a),Ch(e,a))));break;case 22:if(n=a.memoizedState!==null||ua,!n){t=t!==null&&t.memoizedState!==null||Be,i=ua;var o=Be;ua=n,(Be=t)&&!o?fa(e,a,(a.subtreeFlags&8772)!==0):sa(e,a),ua=i,Be=o}break;case 30:break;default:sa(e,a)}}function Rf(e){var t=e.alternate;t!==null&&(e.alternate=null,Rf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Di(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var De=null,rt=!1;function oa(e,t,a){for(a=a.child;a!==null;)Uf(e,t,a),a=a.sibling}function Uf(e,t,a){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(In,a)}catch{}switch(a.tag){case 26:Be||Kt(a,t),oa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Be||Kt(a,t);var n=De,i=rt;Ra(a.type)&&(De=a.stateNode,rt=!1),oa(e,t,a),Hl(a.stateNode),De=n,rt=i;break;case 5:Be||Kt(a,t);case 6:if(n=De,i=rt,De=null,oa(e,t,a),De=n,rt=i,De!==null)if(rt)try{(De.nodeType===9?De.body:De.nodeName==="HTML"?De.ownerDocument.body:De).removeChild(a.stateNode)}catch(o){ge(a,t,o)}else try{De.removeChild(a.stateNode)}catch(o){ge(a,t,o)}break;case 18:De!==null&&(rt?(e=De,Ad(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Wn(e)):Ad(De,a.stateNode));break;case 4:n=De,i=rt,De=a.stateNode.containerInfo,rt=!0,oa(e,t,a),De=n,rt=i;break;case 0:case 11:case 14:case 15:Aa(2,a,t),Be||Aa(4,a,t),oa(e,t,a);break;case 1:Be||(Kt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Cf(a,t,n)),oa(e,t,a);break;case 21:oa(e,t,a);break;case 22:Be=(n=Be)||a.memoizedState!==null,oa(e,t,a),Be=n;break;default:oa(e,t,a)}}function Bf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Wn(e)}catch(a){ge(t,t.return,a)}}}function Hf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wn(e)}catch(a){ge(t,t.return,a)}}function th(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Nf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Nf),t;default:throw Error(u(435,e.tag))}}function Yr(e,t){var a=th(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var i=sh.bind(null,e,n);n.then(i,i)}})}function it(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],o=e,f=t,m=f;e:for(;m!==null;){switch(m.tag){case 27:if(Ra(m.type)){De=m.stateNode,rt=!1;break e}break;case 5:De=m.stateNode,rt=!1;break e;case 3:case 4:De=m.stateNode.containerInfo,rt=!0;break e}m=m.return}if(De===null)throw Error(u(160));Uf(o,f,i),De=null,rt=!1,o=i.alternate,o!==null&&(o.return=null),i.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)kf(t,e),t=t.sibling}var Yt=null;function kf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:it(t,e),ct(e),n&4&&(Aa(3,e,e.return),Al(3,e),Aa(5,e,e.return));break;case 1:it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),n&64&&ua&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var i=Yt;if(it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),n&4){var o=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,i=i.ownerDocument||i;t:switch(n){case"title":o=i.getElementsByTagName("title")[0],(!o||o[al]||o[Ke]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=i.createElement(n),i.head.insertBefore(o,i.querySelector("head > title"))),Fe(o,n,a),o[Ke]=e,Qe(o),n=o;break e;case"link":var f=kd("link","href",i).get(n+(a.href||""));if(f){for(var m=0;m<f.length;m++)if(o=f[m],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){f.splice(m,1);break t}}o=i.createElement(n),Fe(o,n,a),i.head.appendChild(o);break;case"meta":if(f=kd("meta","content",i).get(n+(a.content||""))){for(m=0;m<f.length;m++)if(o=f[m],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){f.splice(m,1);break t}}o=i.createElement(n),Fe(o,n,a),i.head.appendChild(o);break;default:throw Error(u(468,n))}o[Ke]=e,Qe(o),n=o}e.stateNode=n}else Ld(i,e.type,e.stateNode);else e.stateNode=Hd(i,n,e.memoizedProps);else o!==n?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,n===null?Ld(i,e.type,e.stateNode):Hd(i,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Jc(e,e.memoizedProps,a.memoizedProps)}break;case 27:it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),a!==null&&n&4&&Jc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(it(t,e),ct(e),n&512&&(Be||a===null||Kt(a,a.return)),e.flags&32){i=e.stateNode;try{yn(i,"")}catch(L){ge(e,e.return,L)}}n&4&&e.stateNode!=null&&(i=e.memoizedProps,Jc(e,i,a!==null?a.memoizedProps:i)),n&1024&&(Fc=!0);break;case 6:if(it(t,e),ct(e),n&4){if(e.stateNode===null)throw Error(u(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(L){ge(e,e.return,L)}}break;case 3:if(ni=null,i=Yt,Yt=ti(t.containerInfo),it(t,e),Yt=i,ct(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Wn(t.containerInfo)}catch(L){ge(e,e.return,L)}Fc&&(Fc=!1,Lf(e));break;case 4:n=Yt,Yt=ti(e.stateNode.containerInfo),it(t,e),ct(e),Yt=n;break;case 12:it(t,e),ct(e);break;case 31:it(t,e),ct(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Yr(e,n)));break;case 13:it(t,e),ct(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Qr=mt()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Yr(e,n)));break;case 22:i=e.memoizedState!==null;var y=a!==null&&a.memoizedState!==null,E=ua,D=Be;if(ua=E||i,Be=D||y,it(t,e),Be=D,ua=E,ct(e),n&8192)e:for(t=e.stateNode,t._visibility=i?t._visibility&-2:t._visibility|1,i&&(a===null||y||ua||Be||ln(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){y=a=t;try{if(o=y.stateNode,i)f=o.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{m=y.stateNode;var O=y.memoizedProps.style,q=O!=null&&O.hasOwnProperty("display")?O.display:null;m.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(L){ge(y,y.return,L)}}}else if(t.tag===6){if(a===null){y=t;try{y.stateNode.nodeValue=i?"":y.memoizedProps}catch(L){ge(y,y.return,L)}}}else if(t.tag===18){if(a===null){y=t;try{var T=y.stateNode;i?Cd(T,!0):Cd(y.stateNode,!1)}catch(L){ge(y,y.return,L)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Yr(e,a))));break;case 19:it(t,e),ct(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Yr(e,n)));break;case 30:break;case 21:break;default:it(t,e),ct(e)}}function ct(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Mf(n)){a=n;break}n=n.return}if(a==null)throw Error(u(160));switch(a.tag){case 27:var i=a.stateNode,o=Wc(e);Lr(e,o,i);break;case 5:var f=a.stateNode;a.flags&32&&(yn(f,""),a.flags&=-33);var m=Wc(e);Lr(e,m,f);break;case 3:case 4:var y=a.stateNode.containerInfo,E=Wc(e);$c(e,E,y);break;default:throw Error(u(161))}}catch(D){ge(e,e.return,D)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Lf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function sa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xf(e,t.alternate,t),t=t.sibling}function ln(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Aa(4,t,t.return),ln(t);break;case 1:Kt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Cf(t,t.return,a),ln(t);break;case 27:Hl(t.stateNode);case 26:case 5:Kt(t,t.return),ln(t);break;case 22:t.memoizedState===null&&ln(t);break;case 30:ln(t);break;default:ln(t)}e=e.sibling}}function fa(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,i=e,o=t,f=o.flags;switch(o.tag){case 0:case 11:case 15:fa(i,o,a),Al(4,o);break;case 1:if(fa(i,o,a),n=o,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(E){ge(n,n.return,E)}if(n=o,i=n.updateQueue,i!==null){var m=n.stateNode;try{var y=i.shared.hiddenCallbacks;if(y!==null)for(i.shared.hiddenCallbacks=null,i=0;i<y.length;i++)ps(y[i],m)}catch(E){ge(n,n.return,E)}}a&&f&64&&Af(o),Cl(o,o.return);break;case 27:zf(o);case 26:case 5:fa(i,o,a),a&&n===null&&f&4&&Of(o),Cl(o,o.return);break;case 12:fa(i,o,a);break;case 31:fa(i,o,a),a&&f&4&&Bf(i,o);break;case 13:fa(i,o,a),a&&f&4&&Hf(i,o);break;case 22:o.memoizedState===null&&fa(i,o,a),Cl(o,o.return);break;case 30:break;default:fa(i,o,a)}t=t.sibling}}function Pc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&hl(a))}function Ic(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hl(e))}function Gt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yf(e,t,a,n),t=t.sibling}function Yf(e,t,a,n){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Gt(e,t,a,n),i&2048&&Al(9,t);break;case 1:Gt(e,t,a,n);break;case 3:Gt(e,t,a,n),i&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hl(e)));break;case 12:if(i&2048){Gt(e,t,a,n),e=t.stateNode;try{var o=t.memoizedProps,f=o.id,m=o.onPostCommit;typeof m=="function"&&m(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(y){ge(t,t.return,y)}}else Gt(e,t,a,n);break;case 31:Gt(e,t,a,n);break;case 13:Gt(e,t,a,n);break;case 23:break;case 22:o=t.stateNode,f=t.alternate,t.memoizedState!==null?o._visibility&2?Gt(e,t,a,n):Ol(e,t):o._visibility&2?Gt(e,t,a,n):(o._visibility|=2,Hn(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),i&2048&&Pc(f,t);break;case 24:Gt(e,t,a,n),i&2048&&Ic(t.alternate,t);break;default:Gt(e,t,a,n)}}function Hn(e,t,a,n,i){for(i=i&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var o=e,f=t,m=a,y=n,E=f.flags;switch(f.tag){case 0:case 11:case 15:Hn(o,f,m,y,i),Al(8,f);break;case 23:break;case 22:var D=f.stateNode;f.memoizedState!==null?D._visibility&2?Hn(o,f,m,y,i):Ol(o,f):(D._visibility|=2,Hn(o,f,m,y,i)),i&&E&2048&&Pc(f.alternate,f);break;case 24:Hn(o,f,m,y,i),i&&E&2048&&Ic(f.alternate,f);break;default:Hn(o,f,m,y,i)}t=t.sibling}}function Ol(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,i=n.flags;switch(n.tag){case 22:Ol(a,n),i&2048&&Pc(n.alternate,n);break;case 24:Ol(a,n),i&2048&&Ic(n.alternate,n);break;default:Ol(a,n)}t=t.sibling}}var Ml=8192;function kn(e,t,a){if(e.subtreeFlags&Ml)for(e=e.child;e!==null;)Gf(e,t,a),e=e.sibling}function Gf(e,t,a){switch(e.tag){case 26:kn(e,t,a),e.flags&Ml&&e.memoizedState!==null&&Yh(a,Yt,e.memoizedState,e.memoizedProps);break;case 5:kn(e,t,a);break;case 3:case 4:var n=Yt;Yt=ti(e.stateNode.containerInfo),kn(e,t,a),Yt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Ml,Ml=16777216,kn(e,t,a),Ml=n):kn(e,t,a));break;default:kn(e,t,a)}}function Qf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function zl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Xe=n,Zf(n,e)}Qf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xf(e),e=e.sibling}function Xf(e){switch(e.tag){case 0:case 11:case 15:zl(e),e.flags&2048&&Aa(9,e,e.return);break;case 3:zl(e);break;case 12:zl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Gr(e)):zl(e);break;default:zl(e)}}function Gr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];Xe=n,Zf(n,e)}Qf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Aa(8,t,t.return),Gr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Gr(t));break;default:Gr(t)}e=e.sibling}}function Zf(e,t){for(;Xe!==null;){var a=Xe;switch(a.tag){case 0:case 11:case 15:Aa(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:hl(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,Xe=n;else e:for(a=e;Xe!==null;){n=Xe;var i=n.sibling,o=n.return;if(Rf(n),n===a){Xe=null;break e}if(i!==null){i.return=o,Xe=i;break e}Xe=o}}}var ah={getCacheForType:function(e){var t=We(xe),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return We(xe).controller.signal}},nh=typeof WeakMap=="function"?WeakMap:Map,me=0,we=null,te=null,ne=0,pe=0,bt=null,Ca=!1,Ln=!1,eu=!1,da=0,Oe=0,Oa=0,rn=0,tu=0,St=0,Yn=0,Nl=null,ut=null,au=!1,Qr=0,Vf=0,Xr=1/0,Zr=null,Ma=null,Le=0,za=null,Gn=null,ma=0,nu=0,lu=null,Kf=null,xl=0,ru=null;function wt(){return(me&2)!==0&&ne!==0?ne&-ne:A.T!==null?fu():co()}function Jf(){if(St===0)if((ne&536870912)===0||re){var e=Il;Il<<=1,(Il&3932160)===0&&(Il=262144),St=e}else St=536870912;return e=yt.current,e!==null&&(e.flags|=32),St}function ot(e,t,a){(e===we&&(pe===2||pe===9)||e.cancelPendingCommit!==null)&&(Qn(e,0),Na(e,ne,St,!1)),tl(e,a),((me&2)===0||e!==we)&&(e===we&&((me&2)===0&&(rn|=a),Oe===4&&Na(e,ne,St,!1)),Jt(e))}function Wf(e,t,a){if((me&6)!==0)throw Error(u(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||el(e,t),i=n?ih(e,t):cu(e,t,!0),o=n;do{if(i===0){Ln&&!n&&Na(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!lh(a)){i=cu(e,t,!1),o=!1;continue}if(i===2){if(o=t,e.errorRecoveryDisabledLanes&o)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var m=e;i=Nl;var y=m.current.memoizedState.isDehydrated;if(y&&(Qn(m,f).flags|=256),f=cu(m,f,!1),f!==2){if(eu&&!y){m.errorRecoveryDisabledLanes|=o,rn|=o,i=4;break e}o=ut,ut=i,o!==null&&(ut===null?ut=o:ut.push.apply(ut,o))}i=f}if(o=!1,i!==2)continue}}if(i===1){Qn(e,0),Na(e,t,0,!0);break}e:{switch(n=e,o=i,o){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:Na(n,t,St,!Ca);break e;case 2:ut=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(i=Qr+300-mt(),10<i)){if(Na(n,t,St,!Ca),tr(n,0,!0)!==0)break e;ma=t,n.timeoutHandle=Td($f.bind(null,n,a,ut,Zr,au,t,St,rn,Yn,Ca,o,"Throttled",-0,0),i);break e}$f(n,a,ut,Zr,au,t,St,rn,Yn,Ca,o,null,-0,0)}}break}while(!0);Jt(e)}function $f(e,t,a,n,i,o,f,m,y,E,D,O,q,T){if(e.timeoutHandle=-1,O=t.subtreeFlags,O&8192||(O&16785408)===16785408){O={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt},Gf(t,o,O);var L=(o&62914560)===o?Qr-mt():(o&4194048)===o?Vf-mt():0;if(L=Gh(O,L),L!==null){ma=o,e.cancelPendingCommit=L(ld.bind(null,e,t,o,a,n,i,f,m,y,D,O,null,q,T)),Na(e,o,f,!E);return}}ld(e,t,o,a,n,i,f,m,y)}function lh(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],o=i.getSnapshot;i=i.value;try{if(!pt(o(),i))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Na(e,t,a,n){t&=~tu,t&=~rn,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var i=t;0<i;){var o=31-ht(i),f=1<<o;n[o]=-1,i&=~f}a!==0&&lo(e,a,t)}function Vr(){return(me&6)===0?(Rl(0),!1):!0}function iu(){if(te!==null){if(pe===0)var e=te.return;else e=te,aa=$a=null,wc(e),Nn=null,gl=0,e=te;for(;e!==null;)Df(e.alternate,e),e=e.return;te=null}}function Qn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Eh(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ma=0,iu(),we=e,te=a=ea(e.current,null),ne=t,pe=0,bt=null,Ca=!1,Ln=el(e,t),eu=!1,Yn=St=tu=rn=Oa=Oe=0,ut=Nl=null,au=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var i=31-ht(n),o=1<<i;t|=e[i],n&=~o}return da=t,mr(),a}function Ff(e,t){W=null,A.H=ql,t===zn||t===Sr?(t=ds(),pe=3):t===sc?(t=ds(),pe=4):pe=t===Hc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,bt=t,te===null&&(Oe=1,Rr(e,Ot(t,e.current)))}function Pf(){var e=yt.current;return e===null?!0:(ne&4194048)===ne?xt===null:(ne&62914560)===ne||(ne&536870912)!==0?e===xt:!1}function If(){var e=A.H;return A.H=ql,e===null?ql:e}function ed(){var e=A.A;return A.A=ah,e}function Kr(){Oe=4,Ca||(ne&4194048)!==ne&&yt.current!==null||(Ln=!0),(Oa&134217727)===0&&(rn&134217727)===0||we===null||Na(we,ne,St,!1)}function cu(e,t,a){var n=me;me|=2;var i=If(),o=ed();(we!==e||ne!==t)&&(Zr=null,Qn(e,t)),t=!1;var f=Oe;e:do try{if(pe!==0&&te!==null){var m=te,y=bt;switch(pe){case 8:iu(),f=6;break e;case 3:case 2:case 9:case 6:yt.current===null&&(t=!0);var E=pe;if(pe=0,bt=null,Xn(e,m,y,E),a&&Ln){f=0;break e}break;default:E=pe,pe=0,bt=null,Xn(e,m,y,E)}}rh(),f=Oe;break}catch(D){Ff(e,D)}while(!0);return t&&e.shellSuspendCounter++,aa=$a=null,me=n,A.H=i,A.A=o,te===null&&(we=null,ne=0,mr()),f}function rh(){for(;te!==null;)td(te)}function ih(e,t){var a=me;me|=2;var n=If(),i=ed();we!==e||ne!==t?(Zr=null,Xr=mt()+500,Qn(e,t)):Ln=el(e,t);e:do try{if(pe!==0&&te!==null){t=te;var o=bt;t:switch(pe){case 1:pe=0,bt=null,Xn(e,t,o,1);break;case 2:case 9:if(ss(o)){pe=0,bt=null,ad(t);break}t=function(){pe!==2&&pe!==9||we!==e||(pe=7),Jt(e)},o.then(t,t);break e;case 3:pe=7;break e;case 4:pe=5;break e;case 7:ss(o)?(pe=0,bt=null,ad(t)):(pe=0,bt=null,Xn(e,t,o,7));break;case 5:var f=null;switch(te.tag){case 26:f=te.memoizedState;case 5:case 27:var m=te;if(f?Yd(f):m.stateNode.complete){pe=0,bt=null;var y=m.sibling;if(y!==null)te=y;else{var E=m.return;E!==null?(te=E,Jr(E)):te=null}break t}}pe=0,bt=null,Xn(e,t,o,5);break;case 6:pe=0,bt=null,Xn(e,t,o,6);break;case 8:iu(),Oe=6;break e;default:throw Error(u(462))}}ch();break}catch(D){Ff(e,D)}while(!0);return aa=$a=null,A.H=n,A.A=i,me=a,te!==null?0:(we=null,ne=0,mr(),Oe)}function ch(){for(;te!==null&&!Om();)td(te)}function td(e){var t=qf(e.alternate,e,da);e.memoizedProps=e.pendingProps,t===null?Jr(e):te=t}function ad(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=vf(a,t,t.pendingProps,t.type,void 0,ne);break;case 11:t=vf(a,t,t.pendingProps,t.type.render,t.ref,ne);break;case 5:wc(t);default:Df(a,t),t=te=Io(t,da),t=qf(a,t,da)}e.memoizedProps=e.pendingProps,t===null?Jr(e):te=t}function Xn(e,t,a,n){aa=$a=null,wc(t),Nn=null,gl=0;var i=t.return;try{if(W_(e,i,t,a,ne)){Oe=1,Rr(e,Ot(a,e.current)),te=null;return}}catch(o){if(i!==null)throw te=i,o;Oe=1,Rr(e,Ot(a,e.current)),te=null;return}t.flags&32768?(re||n===1?e=!0:Ln||(ne&536870912)!==0?e=!1:(Ca=e=!0,(n===2||n===9||n===3||n===6)&&(n=yt.current,n!==null&&n.tag===13&&(n.flags|=16384))),nd(t,e)):Jr(t)}function Jr(e){var t=e;do{if((t.flags&32768)!==0){nd(t,Ca);return}e=t.return;var a=P_(t.alternate,t,da);if(a!==null){te=a;return}if(t=t.sibling,t!==null){te=t;return}te=t=e}while(t!==null);Oe===0&&(Oe=5)}function nd(e,t){do{var a=I_(e.alternate,e);if(a!==null){a.flags&=32767,te=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){te=e;return}te=e=a}while(e!==null);Oe=6,te=null}function ld(e,t,a,n,i,o,f,m,y){e.cancelPendingCommit=null;do Wr();while(Le!==0);if((me&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(o=t.lanes|t.childLanes,o|=Wi,Lm(e,a,o,f,m,y),e===we&&(te=we=null,ne=0),Gn=t,za=e,ma=a,nu=o,lu=i,Kf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fh(Fl,function(){return od(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=A.T,A.T=null,i=x.p,x.p=2,f=me,me|=4;try{eh(e,t,a)}finally{me=f,x.p=i,A.T=n}}Le=1,rd(),id(),cd()}}function rd(){if(Le===1){Le=0;var e=za,t=Gn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=A.T,A.T=null;var n=x.p;x.p=2;var i=me;me|=4;try{kf(t,e);var o=vu,f=Xo(e.containerInfo),m=o.focusedElem,y=o.selectionRange;if(f!==m&&m&&m.ownerDocument&&Qo(m.ownerDocument.documentElement,m)){if(y!==null&&Xi(m)){var E=y.start,D=y.end;if(D===void 0&&(D=E),"selectionStart"in m)m.selectionStart=E,m.selectionEnd=Math.min(D,m.value.length);else{var O=m.ownerDocument||document,q=O&&O.defaultView||window;if(q.getSelection){var T=q.getSelection(),L=m.textContent.length,K=Math.min(y.start,L),Se=y.end===void 0?K:Math.min(y.end,L);!T.extend&&K>Se&&(f=Se,Se=K,K=f);var S=Go(m,K),b=Go(m,Se);if(S&&b&&(T.rangeCount!==1||T.anchorNode!==S.node||T.anchorOffset!==S.offset||T.focusNode!==b.node||T.focusOffset!==b.offset)){var j=O.createRange();j.setStart(S.node,S.offset),T.removeAllRanges(),K>Se?(T.addRange(j),T.extend(b.node,b.offset)):(j.setEnd(b.node,b.offset),T.addRange(j))}}}}for(O=[],T=m;T=T.parentNode;)T.nodeType===1&&O.push({element:T,left:T.scrollLeft,top:T.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<O.length;m++){var C=O[m];C.element.scrollLeft=C.left,C.element.scrollTop=C.top}}ci=!!yu,vu=yu=null}finally{me=i,x.p=n,A.T=a}}e.current=t,Le=2}}function id(){if(Le===2){Le=0;var e=za,t=Gn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=A.T,A.T=null;var n=x.p;x.p=2;var i=me;me|=4;try{xf(e,t.alternate,t)}finally{me=i,x.p=n,A.T=a}}Le=3}}function cd(){if(Le===4||Le===3){Le=0,Mm();var e=za,t=Gn,a=ma,n=Kf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Le=5:(Le=0,Gn=za=null,ud(e,e.pendingLanes));var i=e.pendingLanes;if(i===0&&(Ma=null),qi(a),t=t.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(In,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=A.T,i=x.p,x.p=2,A.T=null;try{for(var o=e.onRecoverableError,f=0;f<n.length;f++){var m=n[f];o(m.value,{componentStack:m.stack})}}finally{A.T=t,x.p=i}}(ma&3)!==0&&Wr(),Jt(e),i=e.pendingLanes,(a&261930)!==0&&(i&42)!==0?e===ru?xl++:(xl=0,ru=e):xl=0,Rl(0)}}function ud(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,hl(t)))}function Wr(){return rd(),id(),cd(),od()}function od(){if(Le!==5)return!1;var e=za,t=nu;nu=0;var a=qi(ma),n=A.T,i=x.p;try{x.p=32>a?32:a,A.T=null,a=lu,lu=null;var o=za,f=ma;if(Le=0,Gn=za=null,ma=0,(me&6)!==0)throw Error(u(331));var m=me;if(me|=4,Xf(o.current),Yf(o,o.current,f,a),me=m,Rl(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(In,o)}catch{}return!0}finally{x.p=i,A.T=n,ud(e,t)}}function sd(e,t,a){t=Ot(a,t),t=Bc(e.stateNode,t,2),e=qa(e,t,2),e!==null&&(tl(e,2),Jt(e))}function ge(e,t,a){if(e.tag===3)sd(e,e,a);else for(;t!==null;){if(t.tag===3){sd(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ma===null||!Ma.has(n))){e=Ot(a,e),a=ff(2),n=qa(t,a,2),n!==null&&(df(a,n,t,e),tl(n,2),Jt(n));break}}t=t.return}}function uu(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new nh;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(a)||(eu=!0,i.add(a),e=uh.bind(null,e,t,a),t.then(e,e))}function uh(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,we===e&&(ne&a)===a&&(Oe===4||Oe===3&&(ne&62914560)===ne&&300>mt()-Qr?(me&2)===0&&Qn(e,0):tu|=a,Yn===ne&&(Yn=0)),Jt(e)}function fd(e,t){t===0&&(t=no()),e=Ka(e,t),e!==null&&(tl(e,t),Jt(e))}function oh(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),fd(e,a)}function sh(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(u(314))}n!==null&&n.delete(t),fd(e,a)}function fh(e,t){return Si(e,t)}var $r=null,Zn=null,ou=!1,Fr=!1,su=!1,xa=0;function Jt(e){e!==Zn&&e.next===null&&(Zn===null?$r=Zn=e:Zn=Zn.next=e),Fr=!0,ou||(ou=!0,mh())}function Rl(e,t){if(!su&&Fr){su=!0;do for(var a=!1,n=$r;n!==null;){if(e!==0){var i=n.pendingLanes;if(i===0)var o=0;else{var f=n.suspendedLanes,m=n.pingedLanes;o=(1<<31-ht(42|e)+1)-1,o&=i&~(f&~m),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,hd(n,o))}else o=ne,o=tr(n,n===we?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(o&3)===0||el(n,o)||(a=!0,hd(n,o));n=n.next}while(a);su=!1}}function dh(){dd()}function dd(){Fr=ou=!1;var e=0;xa!==0&&jh()&&(e=xa);for(var t=mt(),a=null,n=$r;n!==null;){var i=n.next,o=md(n,t);o===0?(n.next=null,a===null?$r=i:a.next=i,i===null&&(Zn=a)):(a=n,(e!==0||(o&3)!==0)&&(Fr=!0)),n=i}Le!==0&&Le!==5||Rl(e),xa!==0&&(xa=0)}function md(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var f=31-ht(o),m=1<<f,y=i[f];y===-1?((m&a)===0||(m&n)!==0)&&(i[f]=km(m,t)):y<=t&&(e.expiredLanes|=m),o&=~m}if(t=we,a=ne,a=tr(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(pe===2||pe===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&wi(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||el(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&wi(n),qi(a)){case 2:case 8:a=to;break;case 32:a=Fl;break;case 268435456:a=ao;break;default:a=Fl}return n=_d.bind(null,e),a=Si(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&wi(n),e.callbackPriority=2,e.callbackNode=null,2}function _d(e,t){if(Le!==0&&Le!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Wr()&&e.callbackNode!==a)return null;var n=ne;return n=tr(e,e===we?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:(Wf(e,n,t),md(e,mt()),e.callbackNode!=null&&e.callbackNode===a?_d.bind(null,e):null)}function hd(e,t){if(Wr())return null;Wf(e,t,!0)}function mh(){qh(function(){(me&6)!==0?Si(eo,dh):dd()})}function fu(){if(xa===0){var e=On;e===0&&(e=Pl,Pl<<=1,(Pl&261888)===0&&(Pl=256)),xa=e}return xa}function pd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:rr(""+e)}function gd(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function _h(e,t,a,n,i){if(t==="submit"&&a&&a.stateNode===i){var o=pd((i[nt]||null).action),f=n.submitter;f&&(t=(t=f[nt]||null)?pd(t.formAction):f.getAttribute("formAction"),t!==null&&(o=t,f=null));var m=new or("action","action",null,n,i);e.push({event:m,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(xa!==0){var y=f?gd(i,f):new FormData(i);Mc(a,{pending:!0,data:y,method:i.method,action:o},null,y)}}else typeof o=="function"&&(m.preventDefault(),y=f?gd(i,f):new FormData(i),Mc(a,{pending:!0,data:y,method:i.method,action:o},o,y))},currentTarget:i}]})}}for(var du=0;du<Ji.length;du++){var mu=Ji[du],hh=mu.toLowerCase(),ph=mu[0].toUpperCase()+mu.slice(1);Lt(hh,"on"+ph)}Lt(Ko,"onAnimationEnd"),Lt(Jo,"onAnimationIteration"),Lt(Wo,"onAnimationStart"),Lt("dblclick","onDoubleClick"),Lt("focusin","onFocus"),Lt("focusout","onBlur"),Lt(z_,"onTransitionRun"),Lt(N_,"onTransitionStart"),Lt(x_,"onTransitionCancel"),Lt($o,"onTransitionEnd"),pn("onMouseEnter",["mouseout","mouseover"]),pn("onMouseLeave",["mouseout","mouseover"]),pn("onPointerEnter",["pointerout","pointerover"]),pn("onPointerLeave",["pointerout","pointerover"]),Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ul));function yd(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var f=n.length-1;0<=f;f--){var m=n[f],y=m.instance,E=m.currentTarget;if(m=m.listener,y!==o&&i.isPropagationStopped())break e;o=m,i.currentTarget=E;try{o(i)}catch(D){dr(D)}i.currentTarget=null,o=y}else for(f=0;f<n.length;f++){if(m=n[f],y=m.instance,E=m.currentTarget,m=m.listener,y!==o&&i.isPropagationStopped())break e;o=m,i.currentTarget=E;try{o(i)}catch(D){dr(D)}i.currentTarget=null,o=y}}}}function ae(e,t){var a=t[Ti];a===void 0&&(a=t[Ti]=new Set);var n=e+"__bubble";a.has(n)||(vd(t,e,2,!1),a.add(n))}function _u(e,t,a){var n=0;t&&(n|=4),vd(a,e,n,t)}var Pr="_reactListening"+Math.random().toString(36).slice(2);function hu(e){if(!e[Pr]){e[Pr]=!0,so.forEach(function(a){a!=="selectionchange"&&(gh.has(a)||_u(a,!1,e),_u(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pr]||(t[Pr]=!0,_u("selectionchange",!1,t))}}function vd(e,t,a,n){switch(Jd(t)){case 2:var i=Zh;break;case 8:i=Vh;break;default:i=Ou}a=i.bind(null,t,a,e),i=void 0,!Ri||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,a,{capture:!0,passive:i}):e.addEventListener(t,a,!0):i!==void 0?e.addEventListener(t,a,{passive:i}):e.addEventListener(t,a,!1)}function pu(e,t,a,n,i){var o=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var f=n.tag;if(f===3||f===4){var m=n.stateNode.containerInfo;if(m===i)break;if(f===4)for(f=n.return;f!==null;){var y=f.tag;if((y===3||y===4)&&f.stateNode.containerInfo===i)return;f=f.return}for(;m!==null;){if(f=mn(m),f===null)return;if(y=f.tag,y===5||y===6||y===26||y===27){n=o=f;continue e}m=m.parentNode}}n=n.return}jo(function(){var E=o,D=Ni(a),O=[];e:{var q=Fo.get(e);if(q!==void 0){var T=or,L=e;switch(e){case"keypress":if(cr(a)===0)break e;case"keydown":case"keyup":T=s_;break;case"focusin":L="focus",T=ki;break;case"focusout":L="blur",T=ki;break;case"beforeblur":case"afterblur":T=ki;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=To;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=m_;break;case Ko:case Jo:case Wo:T=t_;break;case $o:T=h_;break;case"scroll":case"scrollend":T=$m;break;case"wheel":T=g_;break;case"copy":case"cut":case"paste":T=n_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Ao;break;case"toggle":case"beforetoggle":T=v_}var K=(t&4)!==0,Se=!K&&(e==="scroll"||e==="scrollend"),S=K?q!==null?q+"Capture":null:q;K=[];for(var b=E,j;b!==null;){var C=b;if(j=C.stateNode,C=C.tag,C!==5&&C!==26&&C!==27||j===null||S===null||(C=ll(b,S),C!=null&&K.push(Bl(b,C,j))),Se)break;b=b.return}0<K.length&&(q=new T(q,L,null,a,D),O.push({event:q,listeners:K}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",q&&a!==zi&&(L=a.relatedTarget||a.fromElement)&&(mn(L)||L[dn]))break e;if((T||q)&&(q=D.window===D?D:(q=D.ownerDocument)?q.defaultView||q.parentWindow:window,T?(L=a.relatedTarget||a.toElement,T=E,L=L?mn(L):null,L!==null&&(Se=d(L),K=L.tag,L!==Se||K!==5&&K!==27&&K!==6)&&(L=null)):(T=null,L=E),T!==L)){if(K=To,C="onMouseLeave",S="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(K=Ao,C="onPointerLeave",S="onPointerEnter",b="pointer"),Se=T==null?q:nl(T),j=L==null?q:nl(L),q=new K(C,b+"leave",T,a,D),q.target=Se,q.relatedTarget=j,C=null,mn(D)===E&&(K=new K(S,b+"enter",L,a,D),K.target=j,K.relatedTarget=Se,C=K),Se=C,T&&L)t:{for(K=yh,S=T,b=L,j=0,C=S;C;C=K(C))j++;C=0;for(var X=b;X;X=K(X))C++;for(;0<j-C;)S=K(S),j--;for(;0<C-j;)b=K(b),C--;for(;j--;){if(S===b||b!==null&&S===b.alternate){K=S;break t}S=K(S),b=K(b)}K=null}else K=null;T!==null&&bd(O,q,T,K,!1),L!==null&&Se!==null&&bd(O,Se,L,K,!0)}}e:{if(q=E?nl(E):window,T=q.nodeName&&q.nodeName.toLowerCase(),T==="select"||T==="input"&&q.type==="file")var ce=Uo;else if(xo(q))if(Bo)ce=C_;else{ce=D_;var Y=T_}else T=q.nodeName,!T||T.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?E&&Mi(E.elementType)&&(ce=Uo):ce=A_;if(ce&&(ce=ce(e,E))){Ro(O,ce,a,D);break e}Y&&Y(e,q,E),e==="focusout"&&E&&q.type==="number"&&E.memoizedProps.value!=null&&Oi(q,"number",q.value)}switch(Y=E?nl(E):window,e){case"focusin":(xo(Y)||Y.contentEditable==="true")&&(wn=Y,Zi=E,dl=null);break;case"focusout":dl=Zi=wn=null;break;case"mousedown":Vi=!0;break;case"contextmenu":case"mouseup":case"dragend":Vi=!1,Zo(O,a,D);break;case"selectionchange":if(M_)break;case"keydown":case"keyup":Zo(O,a,D)}var F;if(Yi)e:{switch(e){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else Sn?zo(e,a)&&(le="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(le="onCompositionStart");le&&(Co&&a.locale!=="ko"&&(Sn||le!=="onCompositionStart"?le==="onCompositionEnd"&&Sn&&(F=Eo()):(ya=D,Ui="value"in ya?ya.value:ya.textContent,Sn=!0)),Y=Ir(E,le),0<Y.length&&(le=new Do(le,e,null,a,D),O.push({event:le,listeners:Y}),F?le.data=F:(F=No(a),F!==null&&(le.data=F)))),(F=S_?w_(e,a):j_(e,a))&&(le=Ir(E,"onBeforeInput"),0<le.length&&(Y=new Do("onBeforeInput","beforeinput",null,a,D),O.push({event:Y,listeners:le}),Y.data=F)),_h(O,e,E,a,D)}yd(O,t)})}function Bl(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Ir(e,t){for(var a=t+"Capture",n=[];e!==null;){var i=e,o=i.stateNode;if(i=i.tag,i!==5&&i!==26&&i!==27||o===null||(i=ll(e,a),i!=null&&n.unshift(Bl(e,i,o)),i=ll(e,t),i!=null&&n.push(Bl(e,i,o))),e.tag===3)return n;e=e.return}return[]}function yh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bd(e,t,a,n,i){for(var o=t._reactName,f=[];a!==null&&a!==n;){var m=a,y=m.alternate,E=m.stateNode;if(m=m.tag,y!==null&&y===n)break;m!==5&&m!==26&&m!==27||E===null||(y=E,i?(E=ll(a,o),E!=null&&f.unshift(Bl(a,E,y))):i||(E=ll(a,o),E!=null&&f.push(Bl(a,E,y)))),a=a.return}f.length!==0&&e.push({event:t,listeners:f})}var vh=/\r\n?/g,bh=/\u0000|\uFFFD/g;function Sd(e){return(typeof e=="string"?e:""+e).replace(vh,`
`).replace(bh,"")}function wd(e,t){return t=Sd(t),Sd(e)===t}function be(e,t,a,n,i,o){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||yn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&yn(e,""+n);break;case"className":nr(e,"class",n);break;case"tabIndex":nr(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":nr(e,a,n);break;case"style":So(e,n,o);break;case"data":if(t!=="object"){nr(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=rr(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&be(e,t,"name",i.name,i,null),be(e,t,"formEncType",i.formEncType,i,null),be(e,t,"formMethod",i.formMethod,i,null),be(e,t,"formTarget",i.formTarget,i,null)):(be(e,t,"encType",i.encType,i,null),be(e,t,"method",i.method,i,null),be(e,t,"target",i.target,i,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=rr(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=Pt);break;case"onScroll":n!=null&&ae("scroll",e);break;case"onScrollEnd":n!=null&&ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=rr(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":ae("beforetoggle",e),ae("toggle",e),ar(e,"popover",n);break;case"xlinkActuate":Ft(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ft(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ft(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ft(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ft(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ft(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ar(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jm.get(a)||a,ar(e,a,n))}}function gu(e,t,a,n,i,o){switch(a){case"style":So(e,n,o);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(u(61));if(a=n.__html,a!=null){if(i.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"children":typeof n=="string"?yn(e,n):(typeof n=="number"||typeof n=="bigint")&&yn(e,""+n);break;case"onScroll":n!=null&&ae("scroll",e);break;case"onScrollEnd":n!=null&&ae("scrollend",e);break;case"onClick":n!=null&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(i=a.endsWith("Capture"),t=a.slice(2,i?a.length-7:void 0),o=e[nt]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,i),typeof n=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,i);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):ar(e,a,n)}}}function Fe(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ae("error",e),ae("load",e);var n=!1,i=!1,o;for(o in a)if(a.hasOwnProperty(o)){var f=a[o];if(f!=null)switch(o){case"src":n=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:be(e,t,o,f,a,null)}}i&&be(e,t,"srcSet",a.srcSet,a,null),n&&be(e,t,"src",a.src,a,null);return;case"input":ae("invalid",e);var m=o=f=i=null,y=null,E=null;for(n in a)if(a.hasOwnProperty(n)){var D=a[n];if(D!=null)switch(n){case"name":i=D;break;case"type":f=D;break;case"checked":y=D;break;case"defaultChecked":E=D;break;case"value":o=D;break;case"defaultValue":m=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(u(137,t));break;default:be(e,t,n,D,a,null)}}go(e,o,m,y,E,f,i,!1);return;case"select":ae("invalid",e),n=f=o=null;for(i in a)if(a.hasOwnProperty(i)&&(m=a[i],m!=null))switch(i){case"value":o=m;break;case"defaultValue":f=m;break;case"multiple":n=m;default:be(e,t,i,m,a,null)}t=o,a=f,e.multiple=!!n,t!=null?gn(e,!!n,t,!1):a!=null&&gn(e,!!n,a,!0);return;case"textarea":ae("invalid",e),o=i=n=null;for(f in a)if(a.hasOwnProperty(f)&&(m=a[f],m!=null))switch(f){case"value":n=m;break;case"defaultValue":i=m;break;case"children":o=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(u(91));break;default:be(e,t,f,m,a,null)}vo(e,n,i,o);return;case"option":for(y in a)if(a.hasOwnProperty(y)&&(n=a[y],n!=null))switch(y){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:be(e,t,y,n,a,null)}return;case"dialog":ae("beforetoggle",e),ae("toggle",e),ae("cancel",e),ae("close",e);break;case"iframe":case"object":ae("load",e);break;case"video":case"audio":for(n=0;n<Ul.length;n++)ae(Ul[n],e);break;case"image":ae("error",e),ae("load",e);break;case"details":ae("toggle",e);break;case"embed":case"source":case"link":ae("error",e),ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in a)if(a.hasOwnProperty(E)&&(n=a[E],n!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:be(e,t,E,n,a,null)}return;default:if(Mi(t)){for(D in a)a.hasOwnProperty(D)&&(n=a[D],n!==void 0&&gu(e,t,D,n,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(n=a[m],n!=null&&be(e,t,m,n,a,null))}function Sh(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,o=null,f=null,m=null,y=null,E=null,D=null;for(T in a){var O=a[T];if(a.hasOwnProperty(T)&&O!=null)switch(T){case"checked":break;case"value":break;case"defaultValue":y=O;default:n.hasOwnProperty(T)||be(e,t,T,null,n,O)}}for(var q in n){var T=n[q];if(O=a[q],n.hasOwnProperty(q)&&(T!=null||O!=null))switch(q){case"type":o=T;break;case"name":i=T;break;case"checked":E=T;break;case"defaultChecked":D=T;break;case"value":f=T;break;case"defaultValue":m=T;break;case"children":case"dangerouslySetInnerHTML":if(T!=null)throw Error(u(137,t));break;default:T!==O&&be(e,t,q,T,n,O)}}Ci(e,f,m,y,E,D,o,i);return;case"select":T=f=m=q=null;for(o in a)if(y=a[o],a.hasOwnProperty(o)&&y!=null)switch(o){case"value":break;case"multiple":T=y;default:n.hasOwnProperty(o)||be(e,t,o,null,n,y)}for(i in n)if(o=n[i],y=a[i],n.hasOwnProperty(i)&&(o!=null||y!=null))switch(i){case"value":q=o;break;case"defaultValue":m=o;break;case"multiple":f=o;default:o!==y&&be(e,t,i,o,n,y)}t=m,a=f,n=T,q!=null?gn(e,!!a,q,!1):!!n!=!!a&&(t!=null?gn(e,!!a,t,!0):gn(e,!!a,a?[]:"",!1));return;case"textarea":T=q=null;for(m in a)if(i=a[m],a.hasOwnProperty(m)&&i!=null&&!n.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:be(e,t,m,null,n,i)}for(f in n)if(i=n[f],o=a[f],n.hasOwnProperty(f)&&(i!=null||o!=null))switch(f){case"value":q=i;break;case"defaultValue":T=i;break;case"children":break;case"dangerouslySetInnerHTML":if(i!=null)throw Error(u(91));break;default:i!==o&&be(e,t,f,i,n,o)}yo(e,q,T);return;case"option":for(var L in a)if(q=a[L],a.hasOwnProperty(L)&&q!=null&&!n.hasOwnProperty(L))switch(L){case"selected":e.selected=!1;break;default:be(e,t,L,null,n,q)}for(y in n)if(q=n[y],T=a[y],n.hasOwnProperty(y)&&q!==T&&(q!=null||T!=null))switch(y){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:be(e,t,y,q,n,T)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var K in a)q=a[K],a.hasOwnProperty(K)&&q!=null&&!n.hasOwnProperty(K)&&be(e,t,K,null,n,q);for(E in n)if(q=n[E],T=a[E],n.hasOwnProperty(E)&&q!==T&&(q!=null||T!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(u(137,t));break;default:be(e,t,E,q,n,T)}return;default:if(Mi(t)){for(var Se in a)q=a[Se],a.hasOwnProperty(Se)&&q!==void 0&&!n.hasOwnProperty(Se)&&gu(e,t,Se,void 0,n,q);for(D in n)q=n[D],T=a[D],!n.hasOwnProperty(D)||q===T||q===void 0&&T===void 0||gu(e,t,D,q,n,T);return}}for(var S in a)q=a[S],a.hasOwnProperty(S)&&q!=null&&!n.hasOwnProperty(S)&&be(e,t,S,null,n,q);for(O in n)q=n[O],T=a[O],!n.hasOwnProperty(O)||q===T||q==null&&T==null||be(e,t,O,q,n,T)}function jd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var i=a[n],o=i.transferSize,f=i.initiatorType,m=i.duration;if(o&&m&&jd(f)){for(f=0,m=i.responseEnd,n+=1;n<a.length;n++){var y=a[n],E=y.startTime;if(E>m)break;var D=y.transferSize,O=y.initiatorType;D&&jd(O)&&(y=y.responseEnd,f+=D*(y<m?1:(m-E)/(y-E)))}if(--n,t+=8*(o+f)/(i.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yu=null,vu=null;function ei(e){return e.nodeType===9?e:e.ownerDocument}function Ed(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qd(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Su=null;function jh(){var e=window.event;return e&&e.type==="popstate"?e===Su?!1:(Su=e,!0):(Su=null,!1)}var Td=typeof setTimeout=="function"?setTimeout:void 0,Eh=typeof clearTimeout=="function"?clearTimeout:void 0,Dd=typeof Promise=="function"?Promise:void 0,qh=typeof queueMicrotask=="function"?queueMicrotask:typeof Dd<"u"?function(e){return Dd.resolve(null).then(e).catch(Th)}:Td;function Th(e){setTimeout(function(){throw e})}function Ra(e){return e==="head"}function Ad(e,t){var a=t,n=0;do{var i=a.nextSibling;if(e.removeChild(a),i&&i.nodeType===8)if(a=i.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(i),Wn(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Hl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Hl(a);for(var o=a.firstChild;o;){var f=o.nextSibling,m=o.nodeName;o[al]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=f}}else a==="body"&&Hl(e.ownerDocument.body);a=i}while(a);Wn(t)}function Cd(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function wu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":wu(a),Di(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Dh(e,t,a,n){for(;e.nodeType===1;){var i=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[al])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(i.href==null||i.href===""?null:i.href)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin)||e.getAttribute("title")!==(i.title==null?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(i.src==null?null:i.src)||e.getAttribute("type")!==(i.type==null?null:i.type)||e.getAttribute("crossorigin")!==(i.crossOrigin==null?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=i.name==null?null:""+i.name;if(i.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=Rt(e.nextSibling),e===null)break}return null}function Ah(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Rt(e.nextSibling),e===null))return null;return e}function Od(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Rt(e.nextSibling),e===null))return null;return e}function ju(e){return e.data==="$?"||e.data==="$~"}function Eu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ch(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Rt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var qu=null;function Md(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Rt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function zd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function Nd(e,t,a){switch(t=ei(a),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Hl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Di(e)}var Ut=new Map,xd=new Set;function ti(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var _a=x.d;x.d={f:Oh,r:Mh,D:zh,C:Nh,L:xh,m:Rh,X:Bh,S:Uh,M:Hh};function Oh(){var e=_a.f(),t=Vr();return e||t}function Mh(e){var t=_n(e);t!==null&&t.tag===5&&t.type==="form"?$s(t):_a.r(e)}var Vn=typeof document>"u"?null:document;function Rd(e,t,a){var n=Vn;if(n&&typeof t=="string"&&t){var i=At(t);i='link[rel="'+e+'"][href="'+i+'"]',typeof a=="string"&&(i+='[crossorigin="'+a+'"]'),xd.has(i)||(xd.add(i),e={rel:e,crossOrigin:a,href:t},n.querySelector(i)===null&&(t=n.createElement("link"),Fe(t,"link",e),Qe(t),n.head.appendChild(t)))}}function zh(e){_a.D(e),Rd("dns-prefetch",e,null)}function Nh(e,t){_a.C(e,t),Rd("preconnect",e,t)}function xh(e,t,a){_a.L(e,t,a);var n=Vn;if(n&&e&&t){var i='link[rel="preload"][as="'+At(t)+'"]';t==="image"&&a&&a.imageSrcSet?(i+='[imagesrcset="'+At(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(i+='[imagesizes="'+At(a.imageSizes)+'"]')):i+='[href="'+At(e)+'"]';var o=i;switch(t){case"style":o=Kn(e);break;case"script":o=Jn(e)}Ut.has(o)||(e=N({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ut.set(o,e),n.querySelector(i)!==null||t==="style"&&n.querySelector(kl(o))||t==="script"&&n.querySelector(Ll(o))||(t=n.createElement("link"),Fe(t,"link",e),Qe(t),n.head.appendChild(t)))}}function Rh(e,t){_a.m(e,t);var a=Vn;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",i='link[rel="modulepreload"][as="'+At(n)+'"][href="'+At(e)+'"]',o=i;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Jn(e)}if(!Ut.has(o)&&(e=N({rel:"modulepreload",href:e},t),Ut.set(o,e),a.querySelector(i)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(o)))return}n=a.createElement("link"),Fe(n,"link",e),Qe(n),a.head.appendChild(n)}}}function Uh(e,t,a){_a.S(e,t,a);var n=Vn;if(n&&e){var i=hn(n).hoistableStyles,o=Kn(e);t=t||"default";var f=i.get(o);if(!f){var m={loading:0,preload:null};if(f=n.querySelector(kl(o)))m.loading=5;else{e=N({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ut.get(o))&&Tu(e,a);var y=f=n.createElement("link");Qe(y),Fe(y,"link",e),y._p=new Promise(function(E,D){y.onload=E,y.onerror=D}),y.addEventListener("load",function(){m.loading|=1}),y.addEventListener("error",function(){m.loading|=2}),m.loading|=4,ai(f,t,n)}f={type:"stylesheet",instance:f,count:1,state:m},i.set(o,f)}}}function Bh(e,t){_a.X(e,t);var a=Vn;if(a&&e){var n=hn(a).hoistableScripts,i=Jn(e),o=n.get(i);o||(o=a.querySelector(Ll(i)),o||(e=N({src:e,async:!0},t),(t=Ut.get(i))&&Du(e,t),o=a.createElement("script"),Qe(o),Fe(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},n.set(i,o))}}function Hh(e,t){_a.M(e,t);var a=Vn;if(a&&e){var n=hn(a).hoistableScripts,i=Jn(e),o=n.get(i);o||(o=a.querySelector(Ll(i)),o||(e=N({src:e,async:!0,type:"module"},t),(t=Ut.get(i))&&Du(e,t),o=a.createElement("script"),Qe(o),Fe(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},n.set(i,o))}}function Ud(e,t,a,n){var i=(i=Q.current)?ti(i):null;if(!i)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Kn(a.href),a=hn(i).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Kn(a.href);var o=hn(i).hoistableStyles,f=o.get(e);if(f||(i=i.ownerDocument||i,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,f),(o=i.querySelector(kl(e)))&&!o._p&&(f.instance=o,f.state.loading=5),Ut.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ut.set(e,a),o||kh(i,e,a,f.state))),t&&n===null)throw Error(u(528,""));return f}if(t&&n!==null)throw Error(u(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Jn(a),a=hn(i).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Kn(e){return'href="'+At(e)+'"'}function kl(e){return'link[rel="stylesheet"]['+e+"]"}function Bd(e){return N({},e,{"data-precedence":e.precedence,precedence:null})}function kh(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),Fe(t,"link",a),Qe(t),e.head.appendChild(t))}function Jn(e){return'[src="'+At(e)+'"]'}function Ll(e){return"script[async]"+e}function Hd(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+At(a.href)+'"]');if(n)return t.instance=n,Qe(n),n;var i=N({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Qe(n),Fe(n,"style",i),ai(n,a.precedence,e),t.instance=n;case"stylesheet":i=Kn(a.href);var o=e.querySelector(kl(i));if(o)return t.state.loading|=4,t.instance=o,Qe(o),o;n=Bd(a),(i=Ut.get(i))&&Tu(n,i),o=(e.ownerDocument||e).createElement("link"),Qe(o);var f=o;return f._p=new Promise(function(m,y){f.onload=m,f.onerror=y}),Fe(o,"link",n),t.state.loading|=4,ai(o,a.precedence,e),t.instance=o;case"script":return o=Jn(a.src),(i=e.querySelector(Ll(o)))?(t.instance=i,Qe(i),i):(n=a,(i=Ut.get(o))&&(n=N({},a),Du(n,i)),e=e.ownerDocument||e,i=e.createElement("script"),Qe(i),Fe(i,"link",n),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ai(n,a.precedence,e));return t.instance}function ai(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=n.length?n[n.length-1]:null,o=i,f=0;f<n.length;f++){var m=n[f];if(m.dataset.precedence===t)o=m;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Tu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ni=null;function kd(e,t,a){if(ni===null){var n=new Map,i=ni=new Map;i.set(a,n)}else i=ni,n=i.get(a),n||(n=new Map,i.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),i=0;i<a.length;i++){var o=a[i];if(!(o[al]||o[Ke]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var f=o.getAttribute(t)||"";f=e+f;var m=n.get(f);m?m.push(o):n.set(f,[o])}}return n}function Ld(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Lh(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Yd(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Yh(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var i=Kn(n.href),o=t.querySelector(kl(i));if(o){t=o._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=li.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=o,Qe(o);return}o=t.ownerDocument||t,n=Bd(n),(i=Ut.get(i))&&Tu(n,i),o=o.createElement("link"),Qe(o);var f=o;f._p=new Promise(function(m,y){f.onload=m,f.onerror=y}),Fe(o,"link",n),a.instance=o}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=li.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Au=0;function Gh(e,t){return e.stylesheets&&e.count===0&&ii(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&ii(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4+t);0<e.imgBytes&&Au===0&&(Au=62500*wh());var i=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ii(e,e.stylesheets),e.unsuspend)){var o=e.unsuspend;e.unsuspend=null,o()}},(e.imgBytes>Au?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(i)}}:null}function li(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ii(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ri=null;function ii(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ri=new Map,t.forEach(Qh,e),ri=null,li.call(e))}function Qh(e,t){if(!(t.state.loading&4)){var a=ri.get(e);if(a)var n=a.get(null);else{a=new Map,ri.set(e,a);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var f=i[o];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(a.set(f.dataset.precedence,f),n=f)}n&&a.set(null,n)}i=t.instance,f=i.getAttribute("data-precedence"),o=a.get(f)||n,o===n&&a.set(null,i),a.set(f,i),this.count++,n=li.bind(this),i.addEventListener("load",n),i.addEventListener("error",n),o?o.parentNode.insertBefore(i,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(i,e.firstChild)),t.state.loading|=4}}var Yl={$$typeof:$,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function Xh(e,t,a,n,i,o,f,m,y){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.hiddenUpdates=ji(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function Gd(e,t,a,n,i,o,f,m,y,E,D,O){return e=new Xh(e,t,a,f,y,E,D,O,m),t=1,o===!0&&(t|=24),o=gt(3,null,null,t),e.current=o,o.stateNode=e,t=cc(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:n,isDehydrated:a,cache:t},fc(o),e}function Qd(e){return e?(e=qn,e):qn}function Xd(e,t,a,n,i,o){i=Qd(i),n.context===null?n.context=i:n.pendingContext=i,n=Ea(t),n.payload={element:a},o=o===void 0?null:o,o!==null&&(n.callback=o),a=qa(e,n,t),a!==null&&(ot(a,e,t),vl(a,e,t))}function Zd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Cu(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function Vd(e){if(e.tag===13||e.tag===31){var t=Ka(e,67108864);t!==null&&ot(t,e,67108864),Cu(e,67108864)}}function Kd(e){if(e.tag===13||e.tag===31){var t=wt();t=Ei(t);var a=Ka(e,t);a!==null&&ot(a,e,t),Cu(e,t)}}var ci=!0;function Zh(e,t,a,n){var i=A.T;A.T=null;var o=x.p;try{x.p=2,Ou(e,t,a,n)}finally{x.p=o,A.T=i}}function Vh(e,t,a,n){var i=A.T;A.T=null;var o=x.p;try{x.p=8,Ou(e,t,a,n)}finally{x.p=o,A.T=i}}function Ou(e,t,a,n){if(ci){var i=Mu(n);if(i===null)pu(e,t,n,ui,a),Wd(e,n);else if(Jh(i,e,t,a,n))n.stopPropagation();else if(Wd(e,n),t&4&&-1<Kh.indexOf(e)){for(;i!==null;){var o=_n(i);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var f=Ga(o.pendingLanes);if(f!==0){var m=o;for(m.pendingLanes|=2,m.entangledLanes|=2;f;){var y=1<<31-ht(f);m.entanglements[1]|=y,f&=~y}Jt(o),(me&6)===0&&(Xr=mt()+500,Rl(0))}}break;case 31:case 13:m=Ka(o,2),m!==null&&ot(m,o,2),Vr(),Cu(o,2)}if(o=Mu(n),o===null&&pu(e,t,n,ui,a),o===i)break;i=o}i!==null&&n.stopPropagation()}else pu(e,t,n,null,a)}}function Mu(e){return e=Ni(e),zu(e)}var ui=null;function zu(e){if(ui=null,e=mn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=g(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ui=e,null}function Jd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zm()){case eo:return 2;case to:return 8;case Fl:case Nm:return 32;case ao:return 268435456;default:return 32}default:return 32}}var Nu=!1,Ua=null,Ba=null,Ha=null,Gl=new Map,Ql=new Map,ka=[],Kh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Wd(e,t){switch(e){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Gl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(t.pointerId)}}function Xl(e,t,a,n,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},t!==null&&(t=_n(t),t!==null&&Vd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Jh(e,t,a,n,i){switch(t){case"focusin":return Ua=Xl(Ua,e,t,a,n,i),!0;case"dragenter":return Ba=Xl(Ba,e,t,a,n,i),!0;case"mouseover":return Ha=Xl(Ha,e,t,a,n,i),!0;case"pointerover":var o=i.pointerId;return Gl.set(o,Xl(Gl.get(o)||null,e,t,a,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Ql.set(o,Xl(Ql.get(o)||null,e,t,a,n,i)),!0}return!1}function $d(e){var t=mn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,uo(e.priority,function(){Kd(a)});return}}else if(t===31){if(t=g(a),t!==null){e.blockedOn=t,uo(e.priority,function(){Kd(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Mu(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);zi=n,a.target.dispatchEvent(n),zi=null}else return t=_n(a),t!==null&&Vd(t),e.blockedOn=a,!1;t.shift()}return!0}function Fd(e,t,a){oi(e)&&a.delete(t)}function Wh(){Nu=!1,Ua!==null&&oi(Ua)&&(Ua=null),Ba!==null&&oi(Ba)&&(Ba=null),Ha!==null&&oi(Ha)&&(Ha=null),Gl.forEach(Fd),Ql.forEach(Fd)}function si(e,t){e.blockedOn===t&&(e.blockedOn=null,Nu||(Nu=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Wh)))}var fi=null;function Pd(e){fi!==e&&(fi=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){fi===e&&(fi=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],i=e[t+2];if(typeof n!="function"){if(zu(n||a)===null)continue;break}var o=_n(a);o!==null&&(e.splice(t,3),t-=3,Mc(o,{pending:!0,data:i,method:a.method,action:n},n,i))}}))}function Wn(e){function t(y){return si(y,e)}Ua!==null&&si(Ua,e),Ba!==null&&si(Ba,e),Ha!==null&&si(Ha,e),Gl.forEach(t),Ql.forEach(t);for(var a=0;a<ka.length;a++){var n=ka[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ka.length&&(a=ka[0],a.blockedOn===null);)$d(a),a.blockedOn===null&&ka.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var i=a[n],o=a[n+1],f=i[nt]||null;if(typeof o=="function")f||Pd(a);else if(f){var m=null;if(o&&o.hasAttribute("formAction")){if(i=o,f=o[nt]||null)m=f.formAction;else if(zu(i)!==null)continue}else m=f.action;typeof m=="function"?a[n+1]=m:(a.splice(n,3),n-=3),Pd(a)}}}function Id(){function e(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(f){return i=f})},focusReset:"manual",scroll:"manual"})}function t(){i!==null&&(i(),i=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),i!==null&&(i(),i=null)}}}function xu(e){this._internalRoot=e}di.prototype.render=xu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var a=t.current,n=wt();Xd(a,n,e,t,null,null)},di.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xd(e.current,2,null,e,null,null),Vr(),t[dn]=null}};function di(e){this._internalRoot=e}di.prototype.unstable_scheduleHydration=function(e){if(e){var t=co();e={blockedOn:null,target:e,priority:t};for(var a=0;a<ka.length&&t!==0&&t<ka[a].priority;a++);ka.splice(a,0,e),a===0&&$d(e)}};var em=r.version;if(em!=="19.2.0")throw Error(u(527,em,"19.2.0"));x.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=z(t),e=e!==null?U(e):null,e=e===null?null:e.stateNode,e};var $h={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:A,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mi.isDisabled&&mi.supportsFiber)try{In=mi.inject($h),_t=mi}catch{}}return Vl.createRoot=function(e,t){if(!s(e))throw Error(u(299));var a=!1,n="",i=cf,o=uf,f=of;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(i=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Gd(e,1,!1,null,null,a,n,null,i,o,f,Id),e[dn]=t.current,hu(e),new xu(t)},Vl.hydrateRoot=function(e,t,a){if(!s(e))throw Error(u(299));var n=!1,i="",o=cf,f=uf,m=of,y=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(i=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.formState!==void 0&&(y=a.formState)),t=Gd(e,1,!0,t,a??null,n,i,y,o,f,m,Id),t.context=Qd(null),a=t.current,n=wt(),n=Ei(n),i=Ea(n),i.callback=null,qa(a,i,n),a=n,t.current.lanes=a,tl(t,a),Jt(t),e[dn]=t.current,hu(e),new di(t)},Vl.version="19.2.0",Vl}var im;function rp(){if(im)return Uu.exports;im=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(r){console.error(r)}}return l(),Uu.exports=lp(),Uu.exports}var ip=rp();const cp=pm(ip),up="fieldsync-offline",op=2,oe={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let on=null;const ha=()=>new Promise((l,r)=>{if(on){l(on);return}const c=indexedDB.open(up,op);c.onerror=()=>{console.error("Failed to open offline database"),r(c.error)},c.onsuccess=()=>{on=c.result,l(on)},c.onupgradeneeded=u=>{const s=u.target.result;if(s.objectStoreNames.contains(oe.PROJECTS)||s.createObjectStore(oe.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),s.objectStoreNames.contains(oe.AREAS)||s.createObjectStore(oe.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(oe.CREW_CHECKINS)||s.createObjectStore(oe.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(oe.TM_TICKETS)||s.createObjectStore(oe.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(oe.DAILY_REPORTS)||s.createObjectStore(oe.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),s.objectStoreNames.contains(oe.MESSAGES)||s.createObjectStore(oe.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!s.objectStoreNames.contains(oe.PENDING_ACTIONS)){const d=s.createObjectStore(oe.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});d.createIndex("type","type",{unique:!1}),d.createIndex("created_at","created_at",{unique:!1})}s.objectStoreNames.contains(oe.CACHED_DATA)||s.createObjectStore(oe.CACHED_DATA,{keyPath:"key"})}}),sn=(l,r="readonly")=>{if(!on)throw new Error("Database not initialized");return on.transaction(l,r).objectStore(l)},Wl=async(l,r)=>(await ha(),new Promise((c,u)=>{const d=sn(l,"readwrite").put(r);d.onsuccess=()=>c(d.result),d.onerror=()=>u(d.error)})),vm=async(l,r)=>(await ha(),new Promise((c,u)=>{const s=on.transaction(l,"readwrite"),d=s.objectStore(l);r.forEach(h=>d.put(h)),s.oncomplete=()=>c(),s.onerror=()=>u(s.error)})),sp=async(l,r)=>(await ha(),new Promise((c,u)=>{const d=sn(l).get(r);d.onsuccess=()=>c(d.result),d.onerror=()=>u(d.error)})),bm=async l=>(await ha(),new Promise((r,c)=>{const s=sn(l).getAll();s.onsuccess=()=>r(s.result||[]),s.onerror=()=>c(s.error)})),Ju=async(l,r,c)=>(await ha(),new Promise((u,s)=>{const g=sn(l).index(r).getAll(c);g.onsuccess=()=>u(g.result||[]),g.onerror=()=>s(g.error)})),fp=async(l,r)=>(await ha(),new Promise((c,u)=>{const d=sn(l,"readwrite").delete(r);d.onsuccess=()=>c(),d.onerror=()=>u(d.error)})),Ze={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},Bt=async(l,r,c={})=>{await ha();const u={type:l,payload:r,metadata:c,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((s,d)=>{const g=sn(oe.PENDING_ACTIONS,"readwrite").add(u);g.onsuccess=()=>{s(g.result)},g.onerror=()=>d(g.error)})},Sm=async()=>bm(oe.PENDING_ACTIONS),gi=async()=>(await Sm()).length,dp=async l=>fp(oe.PENDING_ACTIONS,l),mp=async(l,r)=>(await ha(),new Promise((c,u)=>{const s=sn(oe.PENDING_ACTIONS,"readwrite"),d=s.get(l);d.onsuccess=()=>{const h=d.result;if(h){const g={...h,...r},w=s.put(g);w.onsuccess=()=>c(g),w.onerror=()=>u(w.error)}else u(new Error("Action not found"))},d.onerror=()=>u(d.error)})),_p=async l=>vm(oe.PROJECTS,l),cm=async l=>l?Ju(oe.PROJECTS,"company_id",l):bm(oe.PROJECTS),hp=async l=>vm(oe.AREAS,l),um=async l=>Ju(oe.AREAS,"project_id",l),ku=async(l,r)=>{const c=await sp(oe.AREAS,l);return c&&(c.status=r,c.updated_at=new Date().toISOString(),await Wl(oe.AREAS,c)),c},Lu=async l=>Wl(oe.CREW_CHECKINS,l),om=async l=>Wl(oe.TM_TICKETS,l),jt=()=>{const l=new Uint8Array(6);crypto.getRandomValues(l);const r=Array.from(l,c=>c.toString(36)).join("");return`temp_${Date.now()}_${r}`},$n=async l=>Wl(oe.DAILY_REPORTS,l),pp=async(l,r)=>(await Ju(oe.DAILY_REPORTS,"project_id",l)).find(u=>u.report_date===r)||null,sm=async l=>Wl(oe.MESSAGES,l);let Wu=navigator.onLine;const Qu=new Set,$u=l=>(Qu.add(l),()=>Qu.delete(l)),Ht=()=>Wu,fm=l=>{Wu=l,Qu.forEach(r=>r(l))};typeof window<"u"&&(window.addEventListener("online",()=>{fm(!0)}),window.addEventListener("offline",()=>{fm(!1)}));let Yu=!1;const wm=async l=>{if(Yu||!Wu)return{synced:0,failed:0};Yu=!0;const r={synced:0,failed:0};try{const c=await Sm();for(const u of c)try{await gp(u,l),await dp(u.id),r.synced++}catch(s){console.error(`Failed to sync action ${u.type}:`,s),r.failed++,await mp(u.id,{attempts:(u.attempts||0)+1,last_error:s.message,last_attempt:new Date().toISOString()})}}finally{Yu=!1}return r},gp=async(l,r)=>{const{type:c,payload:u}=l;switch(c){case Ze.UPDATE_AREA_STATUS:return r.updateAreaStatus(u.areaId,u.status);case Ze.CREATE_TM_TICKET:const s=await r.createTMTicket(u.ticket);return u.workers?.length>0&&await r.addTMWorkers(s.id,u.workers),u.items?.length>0&&await r.addTMItems(s.id,u.items),s;case Ze.SAVE_CREW_CHECKIN:return r.saveCrewCheckin(u.projectId,u.workers,u.checkInDate);case Ze.SUBMIT_DAILY_REPORT:return await r.saveDailyReport(u.projectId,u.reportData),r.submitDailyReport(u.projectId,u.submittedBy);case Ze.SEND_MESSAGE:return r.sendMessage(u.projectId,u.senderType,u.senderName,u.content);case Ze.CREATE_MATERIAL_REQUEST:return r.createMaterialRequest(u.projectId,u.items,u.requestedBy,u.neededBy,u.priority,u.notes);default:throw new Error(`Unknown action type: ${c}`)}},yp={slowQueryThreshold:200},ee={query(l,r){const c={type:"query",operation:l,duration_ms:r.duration,rows_returned:r.rows,company_id:r.company_id||null,project_id:r.project_id||null,user_id:r.user_id||null,timestamp:new Date().toISOString()};r.duration>=yp.slowQueryThreshold&&Gu("query",c)},error(l,r){const c={type:"error",category:l,severity:r.severity||"error",error_code:r.code||null,message:r.message,company_id:r.company_id||null,user_id:r.user_id||null,project_id:r.project_id||null,operation:r.operation||null,context:r.extra||{},timestamp:new Date().toISOString()};Gu("error",c)},storage(l,r){const c={type:"storage",operation:l,company_id:r.company_id||null,project_id:r.project_id||null,file_size_bytes:r.size||0,duration_ms:r.duration||0,success:r.success!==!1,error_message:r.error||null,timestamp:new Date().toISOString()};(!c.success||c.duration_ms>5e3)&&Gu("storage",c)},activity(l,r){}};async function Gu(l,r){try{l==="error"?await _.rpc("log_error",{p_severity:r.severity,p_category:r.category,p_message:r.message,p_company_id:r.company_id,p_user_id:r.user_id,p_project_id:r.project_id,p_operation:r.operation,p_error_code:r.error_code,p_context:r.context||{}}):l==="query"&&await _.rpc("log_query_metric",{p_operation:r.operation,p_duration_ms:r.duration_ms,p_rows_returned:r.rows_returned,p_company_id:r.company_id,p_project_id:r.project_id,p_user_id:r.user_id,p_context:{}})}catch{}}ee.wrapQuery=function(l,r){return async function(...c){const u=performance.now();try{const s=await r.apply(this,c),h={duration:Math.round(performance.now()-u),rows:Array.isArray(s)?s.length:void 0};return ee.query(l,h),s}catch(s){const d=Math.round(performance.now()-u);throw ee.error("database",{message:s.message,operation:l,severity:"error",extra:{duration:d}}),s}}};ee.time=async function(l,r){const c=performance.now();try{const u=await r(),s=Math.round(performance.now()-c);return ee.query(l,{duration:s}),u}catch(u){throw ee.error("general",{message:u.message,operation:l}),u}};const jm="https://cegifnrcwdilromcyouq.supabase.co",Fu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNlZ2lmbnJjd2RpbHJvbWN5b3VxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NTQ5OTAsImV4cCI6MjA4MDIzMDk5MH0.qAiBG5XaB0C1E0U2tQbQkrhpm1iUhM6A2MXngEHhX4A",p=!!Fu;ha().catch(l=>console.error("Failed to init offline DB:",l));const _=p?gm(jm,Fu):null,Xu="fieldsync_field_session";let Jl=null;const Pu=()=>{if(Jl)return Jl;try{const l=sessionStorage.getItem(Xu);if(l)return Jl=JSON.parse(l),Jl}catch{}return null},Zu=l=>{Jl=l,l?sessionStorage.setItem(Xu,JSON.stringify(l)):sessionStorage.removeItem(Xu)},Em=async()=>{const l=Pu();if(l?.token&&p)try{await _.rpc("invalidate_field_session",{p_session_token:l.token})}catch{}Zu(null)};let Kl=null;const qm=()=>{const l=Pu();return!l?.token||!p?_:((!Kl||Kl._sessionToken!==l.token)&&(Kl=gm(jm,Fu,{global:{headers:{"x-field-session":l.token}}}),Kl._sessionToken=l.token),Kl)},Et=()=>p?Pu()?.token?qm():_:null,Vu="fieldsync_data",yi="fieldsync_user",vp=()=>{const l="fieldsync_device_id";let r=localStorage.getItem(l);return r||(r=crypto.randomUUID(),localStorage.setItem(l,r)),r},dm={projects:[],areas:[],users:[],assignments:[]},R=()=>{try{const l=localStorage.getItem(Vu);return l?JSON.parse(l):dm}catch{return localStorage.removeItem(Vu),dm}},I=l=>{localStorage.setItem(Vu,JSON.stringify(l))},_i=()=>{try{const l=localStorage.getItem(yi);return l?JSON.parse(l):null}catch{return localStorage.removeItem(yi),null}},hi=l=>{l?localStorage.setItem(yi,JSON.stringify(l)):localStorage.removeItem(yi)},Ku={async signUp(l,r,c,u){if(p){const{data:s,error:d}=await _.auth.signUp({email:l,password:r,options:{data:{name:c,role:u}}});if(d)throw d;return s}else{const s=R(),d={id:crypto.randomUUID(),email:l,name:c,role:u,created_at:new Date().toISOString()};return s.users.push(d),I(s),hi(d),{user:d}}},async signIn(l,r){if(p){const{data:c,error:u}=await _.auth.signInWithPassword({email:l,password:r});if(u)throw u;return c}else{const u=R().users.find(s=>s.email===l);if(!u)throw new Error("User not found");return hi(u),{user:u}}},async signOut(){if(p){const{error:l}=await _.auth.signOut();if(l)throw l}else hi(null)},async getUser(){if(p){const{data:{user:l}}=await _.auth.getUser();return l}else return _i()},async getProfile(){if(p){const{data:{user:l}}=await _.auth.getUser();if(!l)return null;const{data:r,error:c}=await _.from("users").select("*").eq("id",l.id).single();return c?{id:l.id,email:l.email,name:l.user_metadata?.name||"",role:l.user_metadata?.role||"foreman"}:r}else return _i()},async updateRole(l,r){if(p){const{data:c,error:u}=await _.from("users").update({role:r}).eq("id",l).select().single();if(u)throw u;return c}else{const c=R(),u=c.users.find(s=>s.id===l);return u&&(u.role=r,I(c),_i()?.id===l&&hi(u)),u}},onAuthStateChange(l){if(p)return _.auth.onAuthStateChange(l);{const r=_i();return l(r?"SIGNED_IN":"SIGNED_OUT",{user:r}),{data:{subscription:{unsubscribe:()=>{}}}}}}},at={async getProjects(l=null,r=!1){if(p){if(!Ht()){const u=await cm(l);return r?u:u.filter(s=>s.status!=="archived")}const c=performance.now();try{let u=_.from("projects").select("*").order("created_at",{ascending:!1});l&&(u=u.eq("company_id",l)),r||(u=u.eq("status","active"));const{data:s,error:d}=await u,h=Math.round(performance.now()-c);if(ee.query("getProjects",{duration:h,rows:s?.length,company_id:l}),d){ee.error("database",{message:d.message,operation:"getProjects",company_id:l});const g=await cm(l);if(g.length>0)return g;throw d}return s?.length>0&&_p(s).catch(g=>console.error("Failed to cache projects:",g)),s}catch(u){throw ee.error("database",{message:u.message,operation:"getProjects",company_id:l}),u}}else{const c=R().projects;return r?c:c.filter(u=>u.status!=="archived")}},async getProjectsPaginated(l,{page:r=0,limit:c=25,status:u="active"}={}){if(p){const h=performance.now();try{let g=_.from("projects").select("*",{count:"exact"}).eq("company_id",l).order("created_at",{ascending:!1}).range(r*c,(r+1)*c-1);u!=="all"&&(g=g.eq("status",u));const{data:w,error:z,count:U}=await g,N=Math.round(performance.now()-h);if(ee.query("getProjectsPaginated",{duration:N,rows:w?.length,page:r,company_id:l}),z)throw z;return{projects:w||[],totalCount:U||0,hasMore:(r+1)*c<(U||0),page:r,limit:c}}catch(g){throw ee.error("database",{message:g.message,operation:"getProjectsPaginated",company_id:l}),g}}const s=R().projects.filter(h=>h.company_id===l&&(u==="all"||h.status===u)),d=r*c;return{projects:s.slice(d,d+c),totalCount:s.length,hasMore:d+c<s.length,page:r,limit:c}},async getProjectsWithSummary(l){if(p){const r=performance.now();try{const{data:c,error:u}=await _.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            pending_tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",l).eq("status","active").eq("pending_tickets.status","pending").order("created_at",{ascending:!1}),s=Math.round(performance.now()-r);if(ee.query("getProjectsWithSummary",{duration:s,rows:c?.length,company_id:l}),u)throw u;return(c||[]).map(d=>({...d,areaCount:d.areas?.[0]?.count||0,ticketCount:d.tickets?.[0]?.count||0,pendingTicketCount:d.pending_tickets?.[0]?.count||0,reportCount:d.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,pending_tickets:void 0,daily_reports:void 0}))}catch(c){return ee.error("database",{message:c.message,operation:"getProjectsWithSummary",company_id:l}),this.getProjects(l)}}return R().projects.filter(r=>r.company_id===l&&r.status==="active")},async getProjectDashboardSummary(l){if(p){const r=performance.now();try{const{data:c,error:u}=await _.rpc("get_project_dashboard_summary",{p_company_id:l}),s=Math.round(performance.now()-r);if(ee.query("getProjectDashboardSummary",{duration:s,rows:c?.length,company_id:l}),u){if(u.message?.includes("function")||u.code==="42883")return this.getProjectsWithSummary(l);throw u}return(c||[]).map(d=>({id:d.project_id,name:d.project_name,status:d.project_status,job_number:d.project_number,address:d.project_address,pin:d.project_pin,created_at:d.created_at,start_date:d.start_date,end_date:d.end_date,contract_value:Number(d.contract_value)||0,work_type:d.work_type||"demolition",job_type:d.job_type||"standard",general_contractor:d.general_contractor||"",areaCount:Number(d.total_areas)||0,completedAreas:Number(d.completed_areas)||0,inProgressAreas:Number(d.in_progress_areas)||0,pendingAreas:Number(d.pending_areas)||0,ticketCount:Number(d.total_tickets)||0,pendingTicketCount:Number(d.pending_tickets)||0,submittedTicketCount:Number(d.submitted_tickets)||0,approvedTicketCount:Number(d.approved_tickets)||0,totalLaborHours:Number(d.total_labor_hours)||0,todayLaborHours:Number(d.today_labor_hours)||0,todayWorkerCount:Number(d.today_worker_count)||0,lastActivityAt:d.last_activity_at,dailyReportsThisWeek:Number(d.daily_reports_this_week)||0,corCount:Number(d.cor_count)||0,pendingCorCount:Number(d.pending_cor_count)||0,disposalLoadsToday:Number(d.disposal_loads_today)||0}))}catch(c){return ee.error("database",{message:c.message,operation:"getProjectDashboardSummary",company_id:l}),this.getProjectsWithSummary(l)}}return R().projects.filter(r=>r.company_id===l&&r.status==="active")},async getArchivedProjects(l){if(p){const{data:r,error:c}=await _.from("projects").select("*").eq("company_id",l).eq("status","archived").order("archived_at",{ascending:!1});if(c)throw c;return r}else return R().projects.filter(r=>r.status==="archived")},async getProjectCount(l){if(p){const{count:r,error:c}=await _.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",l).in("status",["active","archived"]);if(c)throw c;return r||0}else return R().projects.filter(c=>c.company_id===l&&c.status!=="deleted").length},async archiveProject(l){if(p){const{data:r,error:c}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",l).select().single();if(c)throw c;return r}else{const r=R(),c=r.projects.find(u=>u.id===l);return c&&(c.status="archived",c.archived_at=new Date().toISOString(),I(r)),c}},async getProjectStorageStats(l){if(!p)return{photoCount:0,estimatedMB:0};const{data:r,error:c}=await _.from("t_and_m_tickets").select("photos").eq("project_id",l);if(c)throw c;let u=0;const s=[];r?.forEach(h=>{h.photos&&Array.isArray(h.photos)&&(u+=h.photos.length,s.push(...h.photos))});const d=u*1.5;return{photoCount:u,estimatedMB:d,photoUrls:s}},async archiveProjectDeep(l,r){if(!p)return null;const{photoUrls:c}=await this.getProjectStorageStats(l);if(c.length>0){const d=c.map(h=>{try{const w=new URL(h).pathname.match(/\/tm-photos\/(.+)$/);return w?w[1]:null}catch{return null}}).filter(Boolean);if(d.length>0)for(let h=0;h<d.length;h+=100){const g=d.slice(h,h+100);await _.storage.from("tm-photos").remove(g)}}await _.from("t_and_m_tickets").update({photos:[]}).eq("project_id",l);const{data:u,error:s}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",l).select().single();if(s)throw s;return{...u,photosDeleted:c.length}},async restoreProject(l){if(p){const{data:r,error:c}=await _.from("projects").update({status:"active",archived_at:null}).eq("id",l).select().single();if(c)throw c;return r}else{const r=R(),c=r.projects.find(u=>u.id===l);return c&&(c.status="active",c.archived_at=null,I(r)),c}},async getProject(l){if(p){const{data:r,error:c}=await _.from("projects").select("*").eq("id",l).single();if(c)throw c;return r}else return R().projects.find(r=>r.id===l)},async createProject(l){if(p){const{data:r,error:c}=await _.from("projects").insert({...l,status:"active"}).select().single();if(c)throw console.error("Supabase createProject error:",c.message,c.details,c.hint),c;return r}else{const r=R(),c={...l,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return r.projects.push(c),I(r),c}},async getProjectByPin(l){if(p){const{data:r,error:c}=await _.from("projects").select("*").eq("pin",l).eq("status","active").single();return c?null:r}else return R().projects.find(c=>c.pin===l&&c.status==="active")||null},async getProjectByPinAndCompany(l,r){if(p){const{data:c,error:u}=await _.from("projects").select("*").eq("pin",l).eq("company_id",r).eq("status","active").single();return u?null:c}else return R().projects.find(u=>u.pin===l&&u.company_id===r&&u.status==="active")||null},async getProjectByPinSecure(l,r){if(p){const c=vp(),{data:u,error:s}=await _.rpc("validate_pin_and_create_session",{p_pin:l,p_company_code:r,p_device_id:c,p_ip_address:null});if(s)return{success:!1,rateLimited:!1,project:null,error:s.message};if(!u||u.length===0)return{success:!1,rateLimited:!1,project:null};const d=u[0];if(d.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(d.error_code==="INVALID_COMPANY"||d.error_code==="INVALID_PIN")return{success:!1,rateLimited:!1,project:null};if(!d.success||!d.project_id)return{success:!1,rateLimited:!1,project:null};Zu({token:d.session_token,projectId:d.project_id,companyId:d.company_id,projectName:d.project_name,companyName:d.company_name,createdAt:new Date().toISOString()});const h=qm(),{data:g}=await h.from("projects").select("*").eq("id",d.project_id).single();return{success:!0,rateLimited:!1,sessionToken:d.session_token,project:g||{id:d.project_id,name:d.project_name,company_id:d.company_id,status:"active"}}}else{const c=R(),s=(c.companies||[]).find(h=>h.code===r);if(!s)return{success:!1,rateLimited:!1,project:null};const d=c.projects.find(h=>h.pin===l&&h.company_id===s.id&&h.status==="active");if(d){const h=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;Zu({token:h,projectId:d.id,companyId:s.id,projectName:d.name,companyName:s.name,createdAt:new Date().toISOString()})}return{success:!!d,rateLimited:!1,project:d||null}}},async isPinAvailable(l,r=null){if(p){let c=_.from("projects").select("id").eq("pin",l);r&&(c=c.neq("id",r));const{data:u,error:s}=await c;if(s)throw s;return u.length===0}else return!R().projects.some(u=>u.pin===l&&u.id!==r)},async updateProjectPin(l,r){if(p){const{data:c,error:u}=await _.from("projects").update({pin:r}).eq("id",l).select().single();if(u)throw u;return c}else{const c=R(),u=c.projects.find(s=>s.id===l);return u&&(u.pin=r,I(c)),u}},async updateProject(l,r){if(p){const{data:c,error:u}=await _.from("projects").update(r).eq("id",l).select().single();if(u)throw console.error("Error updating project:",u),u;return c}else{const c=R(),u=c.projects.find(s=>s.id===l);return u&&(Object.assign(u,r),I(c)),u}},async deleteProject(l){if(p){const{error:r}=await _.from("projects").delete().eq("id",l);if(r)throw r}else{const r=R();r.projects=r.projects.filter(c=>c.id!==l),r.areas=r.areas.filter(c=>c.project_id!==l),I(r)}},async getAreas(l){if(p){if(!Ht())return um(l);const r=Et(),{data:c,error:u}=await r.from("areas").select("*").eq("project_id",l).order("sort_order",{ascending:!0});if(u){const s=await um(l);if(s.length>0)return s;throw u}return c?.length>0&&hp(c).catch(s=>console.error("Failed to cache areas:",s)),c}else return R().areas.filter(r=>r.project_id===l)},async createArea(l){if(p){const r=Et(),{data:c,error:u}=await r.from("areas").insert(l).select().single();if(u)throw u;return c}else{const r=R(),c={...l,id:crypto.randomUUID(),created_at:new Date().toISOString()};return r.areas.push(c),I(r),c}},async updateAreaStatus(l,r){if(p){if(!Ht()){const d=await ku(l,r);return await Bt(Ze.UPDATE_AREA_STATUS,{areaId:l,status:r}),d}const c=Et(),{data:u,error:s}=await c.from("areas").update({status:r}).eq("id",l).select().single();if(s){if(s.message?.includes("fetch")||s.message?.includes("network")){const d=await ku(l,r);return await Bt(Ze.UPDATE_AREA_STATUS,{areaId:l,status:r}),d}throw s}return u&&ku(l,r).catch(d=>console.error("Failed to update cached area:",d)),u}else{const c=R(),u=c.areas.find(s=>s.id===l);return u&&(u.status=r,u.updated_at=new Date().toISOString()),I(c),u}},async updateArea(l,r){if(p){const{data:c,error:u}=await _.from("areas").update(r).eq("id",l).select().single();if(u)throw u;return c}else{const c=R(),u=c.areas.find(s=>s.id===l);return u&&(Object.assign(u,r),u.updated_at=new Date().toISOString()),I(c),u}},async deleteArea(l){if(p){const{error:r}=await _.from("areas").delete().eq("id",l);if(r)throw r}else{const r=R();r.areas=r.areas.filter(c=>c.id!==l),I(r)}},subscribeToAreas(l,r){return p?_.channel(`areas:${l}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${l}`},r).subscribe():null},subscribeToMessages(l,r){return p?_.channel(`messages:${l}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${l}`},r).subscribe():null},subscribeToMaterialRequests(l,r){return p?_.channel(`material_requests:${l}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${l}`},r).subscribe():null},subscribeToDailyReports(l,r){return p?_.channel(`daily_reports:${l}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${l}`},r).subscribe():null},subscribeToCrewCheckins(l,r){return p?_.channel(`crew_checkins:${l}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${l}`},r).subscribe():null},subscribeToInjuryReports(l,r){return p?_.channel(`injury_reports:${l}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${l}`},r).subscribe():null},subscribeToTMTickets(l,r){return p?_.channel(`tm_tickets:${l}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${l}`},r).subscribe():null},subscribeToCompanyActivity(l,r,c){if(!p||!r||r.length===0)return null;const u=_.channel(`company_activity:${l}`);return r.forEach(s=>{u.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${s}`},d=>c.onMessage?.(d)),u.on("postgres_changes",{event:"INSERT",schema:"public",table:"material_requests",filter:`project_id=eq.${s}`},d=>c.onMaterialRequest?.(d)),u.on("postgres_changes",{event:"INSERT",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${s}`},d=>c.onTMTicket?.(d)),u.on("postgres_changes",{event:"UPDATE",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${s}`},d=>c.onTMTicket?.(d)),u.on("postgres_changes",{event:"INSERT",schema:"public",table:"crew_checkins",filter:`project_id=eq.${s}`},d=>c.onCrewCheckin?.(d)),u.on("postgres_changes",{event:"UPDATE",schema:"public",table:"crew_checkins",filter:`project_id=eq.${s}`},d=>c.onCrewCheckin?.(d)),u.on("postgres_changes",{event:"UPDATE",schema:"public",table:"areas",filter:`project_id=eq.${s}`},d=>c.onAreaUpdate?.(d)),u.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${s}`},d=>c.onCORChange?.(d))}),u.on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${l}`},s=>c.onInjuryReport?.(s)),u.subscribe()},unsubscribe(l){l&&p&&_.removeChannel(l)},async getAssignedProjects(l){if(p){const{data:r,error:c}=await _.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",l);if(c)throw c;return r.map(u=>u.projects)}else{const r=R();return(r.assignments?.filter(u=>u.user_id===l)||[]).map(u=>r.projects.find(s=>s.id===u.project_id)).filter(Boolean)}},async assignUserToProject(l,r,c){if(p){const{data:u,error:s}=await _.from("project_assignments").insert({project_id:l,user_id:r,assigned_by:c}).select().single();if(s)throw s;return u}else{const u=R();u.assignments||(u.assignments=[]);const s={id:crypto.randomUUID(),project_id:l,user_id:r,assigned_by:c,assigned_at:new Date().toISOString()};return u.assignments.push(s),I(u),s}},async removeUserFromProject(l,r){if(p){const{error:c}=await _.from("project_assignments").delete().eq("project_id",l).eq("user_id",r);if(c)throw c}else{const c=R();c.assignments=c.assignments?.filter(u=>!(u.project_id===l&&u.user_id===r))||[],I(c)}},async getProjectAssignments(l){if(p){const{data:r,error:c}=await _.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",l);if(c)throw c;return r.map(u=>u.users)}else{const r=R();return(r.assignments?.filter(u=>u.project_id===l)||[]).map(u=>r.users.find(s=>s.id===u.user_id)).filter(Boolean)}},async getAllUsers(){if(p){const{data:l,error:r}=await _.from("users").select("*").order("name");if(r)throw r;return l}else return R().users||[]},async getForemen(){if(p){const{data:l,error:r}=await _.from("users").select("*").eq("role","foreman").order("name");if(r)throw r;return l}else return(R().users||[]).filter(l=>l.role==="foreman")},async logActivity(l,r,c,u,s,d){if(p){const{error:h}=await _.from("activity_log").insert({user_id:l,project_id:r,area_id:c,action:u,old_value:s,new_value:d});h&&console.error("Error logging activity:",h)}},async getProjectActivity(l,r=50){if(p){const{data:c,error:u}=await _.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",l).order("created_at",{ascending:!1}).limit(r);if(u)throw u;return c}return[]},async getMaterialsEquipment(l){if(p){const{data:r,error:c}=await _.from("materials_equipment").select("*").eq("company_id",l).eq("active",!0).order("category").order("name");if(c)throw c;return r}return[]},async getMaterialsEquipmentByCategory(l,r){if(p){const{data:c,error:u}=await _.from("materials_equipment").select("*").eq("company_id",l).eq("category",r).eq("active",!0).order("name");if(u)throw u;return c}return[]},async getAllMaterialsEquipment(l){if(p){const{data:r,error:c}=await _.from("materials_equipment").select("*").eq("company_id",l).order("category").order("name");if(c)throw c;return r}return[]},async createMaterialEquipment(l){if(p){const{data:r,error:c}=await _.from("materials_equipment").insert(l).select().single();if(c)throw c;return r}return null},async updateMaterialEquipment(l,r){if(p){const{data:c,error:u}=await _.from("materials_equipment").update(r).eq("id",l).select().single();if(u)throw u;return c}return null},async deleteMaterialEquipment(l){if(p){const{error:r}=await _.from("materials_equipment").update({active:!1}).eq("id",l);if(r)throw r}},async getLaborCategories(l){if(p){const{data:r,error:c}=await _.from("labor_categories").select("*").eq("company_id",l).eq("active",!0).order("sort_order").order("name");if(c)throw c;return r||[]}return[]},async createLaborCategory(l,r,c=0){if(p){const{data:u,error:s}=await _.from("labor_categories").insert({company_id:l,name:r,sort_order:c}).select().single();if(s)throw s;return u}return null},async updateLaborCategory(l,r){if(p){const{data:c,error:u}=await _.from("labor_categories").update(r).eq("id",l).select().single();if(u)throw u;return c}return null},async deleteLaborCategory(l){if(p){const{error:r}=await _.from("labor_categories").update({active:!1}).eq("id",l);if(r)throw r}},async getLaborClasses(l){if(p){const{data:r,error:c}=await _.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",l).eq("active",!0).order("sort_order").order("name");if(c)throw c;return r||[]}return[]},async getLaborClassesWithCategories(l){if(p){const[r,c]=await Promise.all([_.from("labor_categories").select("*").eq("company_id",l).eq("active",!0).order("sort_order").order("name"),_.from("labor_classes").select("*").eq("company_id",l).eq("active",!0).order("sort_order").order("name")]);if(r.error)throw r.error;if(c.error)throw c.error;return{categories:r.data||[],classes:c.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(l){if(p){const{data:r,error:c}=await _.rpc("get_labor_classes_for_field",{p_company_id:l});if(c){console.error("Error loading field labor classes:",c);const[d,h]=await Promise.all([_.from("labor_categories").select("id, name").eq("company_id",l).eq("active",!0).order("name"),_.from("labor_classes").select("id, name, category_id").eq("company_id",l).eq("active",!0).order("name")]);return{categories:d.data||[],classes:h.data||[]}}const u=new Map,s=[];for(const d of r||[])d.category_id&&d.category_name&&!u.has(d.category_id)&&u.set(d.category_id,{id:d.category_id,name:d.category_name}),s.push({id:d.id,name:d.name,category_id:d.category_id});return{categories:Array.from(u.values()),classes:s}}return{categories:[],classes:[]}},async createLaborClass(l,r,c,u=0){if(p){const{data:s,error:d}=await _.from("labor_classes").insert({company_id:l,category_id:r,name:c,sort_order:u}).select().single();if(d)throw d;return s}return null},async updateLaborClass(l,r){if(p){const{data:c,error:u}=await _.from("labor_classes").update(r).eq("id",l).select().single();if(u)throw u;return c}return null},async deleteLaborClass(l){if(p){const{error:r}=await _.from("labor_classes").update({active:!1}).eq("id",l);if(r)throw r}},async getLaborClassRates(l){if(p){const{data:r,error:c}=await _.from("labor_class_rates").select("*").eq("labor_class_id",l);if(c)throw c;return r||[]}return[]},async getAllLaborClassRates(l){if(p){const{data:r,error:c}=await _.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",l).eq("active",!0);if(c)throw c;return r||[]}return[]},async saveLaborClassRates(l,r){if(p){const c=r.map(s=>({...s,labor_class_id:l})),{error:u}=await _.from("labor_class_rates").upsert(c,{onConflict:"labor_class_id,work_type,job_type"});if(u)throw u}},async getLaborClassRate(l,r,c){if(p){const{data:u,error:s}=await _.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",l).eq("work_type",r).eq("job_type",c).single();if(s&&s.code!=="PGRST116")throw s;return u||null}return null},async getTMTickets(l){if(p){const r=performance.now(),c=Et();try{const{data:u,error:s}=await c.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `).eq("project_id",l).order("created_at",{ascending:!1}),d=Math.round(performance.now()-r);if(ee.query("getTMTickets",{duration:d,rows:u?.length,project_id:l}),s)throw s;return u}catch(u){throw ee.error("database",{message:u.message,operation:"getTMTickets",project_id:l}),u}}return[]},async getTMTicketsPaginated(l,{page:r=0,limit:c=25,status:u=null}={}){if(p){const s=performance.now(),d=Et();try{let h=d.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `,{count:"exact"}).eq("project_id",l).order("created_at",{ascending:!1}).range(r*c,(r+1)*c-1);u&&(h=h.eq("status",u));const{data:g,error:w,count:z}=await h,U=Math.round(performance.now()-s);if(ee.query("getTMTicketsPaginated",{duration:U,rows:g?.length,page:r,project_id:l}),w)throw w;return{tickets:g||[],totalCount:z||0,hasMore:(r+1)*c<(z||0),page:r,limit:c}}catch(h){throw ee.error("database",{message:h.message,operation:"getTMTicketsPaginated",project_id:l}),h}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(l){if(p){const{data:r,error:c}=await _.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",l).not("ce_pco_number","is",null).neq("ce_pco_number","");if(c)throw c;const u={};let s=0,d=0;return r?.forEach(h=>{const g=h.ce_pco_number;if(u[g]||(u[g]={approved:0,pending:0,count:0}),u[g].count++,h.status==="approved"||h.status==="billed"){const w=parseFloat(h.change_order_value)||0;u[g].approved+=w,s+=w}else h.status==="pending"&&d++}),{changeOrders:u,totalApprovedValue:s,pendingCount:d}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(l,r){if(p){const{data:c,error:u}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",l).eq("status",r).order("created_at",{ascending:!1});if(u)throw u;return c}return[]},async getCORTickets(l){if(p){const{data:r,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",l).order("work_date",{ascending:!0});if(c)throw c;return r||[]}return[]},async createTMTicket(l){if(p){if(!Ht()){const u={id:jt(),project_id:l.project_id,work_date:l.work_date,ce_pco_number:l.ce_pco_number||null,assigned_cor_id:l.assigned_cor_id||null,notes:l.notes,photos:l.photos||[],status:"pending_sync",created_by_name:l.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await om(u),await Bt(Ze.CREATE_TM_TICKET,{ticket:u,workers:l._workers||[],items:l._items||[]}),u}const{data:r,error:c}=await _.from("t_and_m_tickets").insert({project_id:l.project_id,work_date:l.work_date,ce_pco_number:l.ce_pco_number||null,assigned_cor_id:l.assigned_cor_id||null,notes:l.notes,photos:l.photos||[],status:"pending",created_by_name:l.created_by_name||"Field User"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u={id:jt(),...l,status:"pending_sync",_offline:!0};return await om(u),await Bt(Ze.CREATE_TM_TICKET,{ticket:u,workers:l._workers||[],items:l._items||[]}),u}throw c}return r}return null},async addTMWorkers(l,r){if(p){const c=r.map(s=>({ticket_id:l,name:s.name,hours:s.hours,overtime_hours:s.overtime_hours||0,time_started:s.time_started||null,time_ended:s.time_ended||null,role:s.role||"Laborer"})),{error:u}=await _.from("t_and_m_workers").insert(c);if(u)throw u}},async addTMItems(l,r){if(p){const c=r.map(s=>({ticket_id:l,material_equipment_id:s.material_equipment_id||null,custom_name:s.custom_name||null,custom_category:s.custom_category||null,quantity:s.quantity})),{error:u}=await _.from("t_and_m_items").insert(c);if(u)throw u}},async getPreviousTicketCrew(l,r){if(!p)return null;const{data:c,error:u}=await _.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",l).lt("work_date",r).order("work_date",{ascending:!1}).limit(1).single();if(u||!c)return null;const s=c.t_and_m_workers||[],d=s.filter(w=>["Foreman","General Foreman","Superintendent"].includes(w.role)).map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||"",role:w.role})),h=s.filter(w=>w.role==="Operator").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""})),g=s.filter(w=>w.role==="Laborer").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""}));return{workDate:c.work_date,supervision:d.length>0?d:null,operators:h.length>0?h:null,laborers:g.length>0?g:null,totalWorkers:s.length}},async updateTMTicketStatus(l,r){if(p){const{data:c,error:u}=await _.from("t_and_m_tickets").update({status:r}).eq("id",l).select().single();if(u)throw u;return c}return null},async approveTMTicket(l,r,c,u=null){if(p){const s={status:"approved",approved_by_user_id:r,approved_by_name:c,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};u!==null&&(s.change_order_value=parseFloat(u)||0);const{data:d,error:h}=await _.from("t_and_m_tickets").update(s).eq("id",l).select().single();if(h)throw h;return d}return null},async rejectTMTicket(l,r,c,u=""){if(p){const{data:s,error:d}=await _.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:r,rejected_by_name:c,rejected_at:new Date().toISOString(),rejection_reason:u,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",l).select().single();if(d)throw d;return s}return null},canApproveTickets(l){return["owner","admin","manager"].includes(l)},async updateTMTicketPhotos(l,r){if(p){const{data:c,error:u}=await _.from("t_and_m_tickets").update({photos:r}).eq("id",l).select().single();if(u)throw u;return c}return null},async saveTMClientSignature(l,r){if(p){const{data:c,error:u}=await _.from("t_and_m_tickets").update({client_signature_data:r.signature,client_signature_name:r.signerName,client_signature_title:r.signerTitle,client_signature_company:r.signerCompany,client_signature_date:r.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",l).select().single();if(u)throw u;return c}return null},async deleteTMTicket(l){if(p){const{error:r}=await _.from("t_and_m_tickets").delete().eq("id",l);if(r)throw r}},async isTicketEditable(l){if(!l?.assigned_cor_id)return{editable:!0};if(p)try{const{data:r,error:c}=await _.from("change_orders").select("id, status, cor_number").eq("id",l.assigned_cor_id).single();if(c||!r)return{editable:!0};const s=["draft","pending_approval"].includes(r.status);return{editable:s,lockedBy:s?null:r,reason:s?null:`This ticket is linked to ${r.cor_number} which has been ${r.status==="approved"?"approved":r.status}`}}catch(r){return console.error("Error checking ticket editability:",r),{editable:!0}}return{editable:!0}},async getCompanyByCode(l){if(p){const{data:r,error:c}=await _.from("companies").select("*").eq("code",l).single();return c?null:r}return null},async getCompany(l){if(p){const{data:r,error:c}=await _.from("companies").select("*").eq("id",l).single();if(c)throw c;return r}return null},async getUserCompanies(l){if(p){const{data:r,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",l).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching user companies:",c),[]):r.map(u=>({id:u.companies.id,name:u.companies.name,code:u.companies.code,access_level:u.access_level}))}return[]},async getUserPendingMemberships(l){if(p){const{count:r,error:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",l).eq("status","pending");return c?(console.error("Error fetching pending memberships:",c),0):r||0}return 0},async getCompanyMemberships(l){if(p){const{data:r,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",l).order("created_at",{ascending:!1});return c?(console.error("Error fetching company memberships:",c),[]):r||[]}return[]},async approveMembership(l,r){if(p){const{error:c}=await _.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:r}).eq("id",l);if(c)throw c}},async approveMembershipWithRole(l,r,c="member"){if(p){const{error:u}=await _.rpc("approve_membership_with_role",{membership_id:l,approved_by_user:r,new_access_level:c});if(u)throw u}},async rejectMembership(l){if(p){const{error:r}=await _.from("user_companies").delete().eq("id",l);if(r)throw r}},async removeMember(l,r){if(p){const{error:c}=await _.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:r}).eq("id",l);if(c)throw c}},async getProjectTeam(l){if(p){const{data:r,error:c}=await _.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",l).order("assigned_at",{ascending:!0});return c?(console.error("Error fetching project team:",c),[]):r||[]}return[]},async getCompanyMembers(l){if(p){const{data:r,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",l).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching company members:",c),[]):r||[]}return[]},async addProjectMember(l,r,c,u){if(p){const{data:s,error:d}=await _.from("project_users").insert({project_id:l,user_id:r,project_role:c,assigned_by:u}).select().single();if(d)throw d;return s}return null},async updateProjectMemberRole(l,r,c){if(p){const{error:u}=await _.from("project_users").update({project_role:c}).eq("project_id",l).eq("user_id",r);if(u)throw u}},async removeProjectMember(l,r){if(p){const{error:c}=await _.from("project_users").delete().eq("project_id",l).eq("user_id",r);if(c)throw c}},async updateMemberAccessLevel(l,r){if(p){const{error:c}=await _.from("user_companies").update({access_level:r}).eq("id",l);if(c)throw c}},async updateMemberCompanyRole(l,r){if(p){const{error:c}=await _.from("user_companies").update({company_role:r}).eq("id",l);if(c)throw c}},async repairLegacyUser(l,r,c="member"){if(!p||!l||!r)return!1;try{const{data:u,error:s}=await _.rpc("repair_legacy_user",{p_user_id:l,p_company_id:r,p_role:c});return s?(console.error("RPC repair_legacy_user failed:",s),!1):u===!0}catch(u){return console.error("Error repairing legacy user:",u),!1}},async isLegacyUser(l){if(!p)return!1;try{const{data:r}=await _.from("users").select("company_id, role").eq("id",l).single();if(!r?.company_id)return!1;const{count:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",l);return c===0}catch(r){return console.error("Error checking legacy user:",r),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(l,r){if(!p)return[];const c=performance.now();try{const{data:u,error:s}=await _.from("disposal_loads").select("*").eq("project_id",l).eq("work_date",r).order("created_at",{ascending:!1}),d=Math.round(performance.now()-c);if(ee.query("getDisposalLoads",{duration:d,rows:u?.length,project_id:l}),s)throw s;return u||[]}catch(u){throw ee.error("database",{message:u.message,operation:"getDisposalLoads",project_id:l}),u}},async getDisposalLoadsHistory(l,r=14){if(!p)return[];const c=performance.now();try{const u=new Date,s=new Date;s.setDate(s.getDate()-r);const{data:d,error:h}=await _.from("disposal_loads").select("*").eq("project_id",l).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",u.toISOString().split("T")[0]).order("work_date",{ascending:!1}),g=Math.round(performance.now()-c);if(ee.query("getDisposalLoadsHistory",{duration:g,rows:d?.length,project_id:l}),h)throw h;return(d||[]).map(w=>({...w,load_date:w.work_date}))}catch(u){throw ee.error("database",{message:u.message,operation:"getDisposalLoadsHistory",project_id:l}),u}},async addDisposalLoad(l,r,c,u,s,d=null){if(!p)return null;const{data:h,error:g}=await _.from("disposal_loads").insert({project_id:l,user_id:r,work_date:c,load_type:u,load_count:s,notes:d}).select().single();if(g)throw ee.error("database",{message:g.message,operation:"addDisposalLoad",project_id:l}),g;return h},async updateDisposalLoad(l,r,c,u=null){if(!p)return null;const{data:s,error:d}=await _.from("disposal_loads").update({load_type:r,load_count:c,notes:u}).eq("id",l).select().single();if(d)throw ee.error("database",{message:d.message,operation:"updateDisposalLoad"}),d;return s},async deleteDisposalLoad(l){if(!p)return!1;const{error:r}=await _.from("disposal_loads").delete().eq("id",l);if(r)throw ee.error("database",{message:r.message,operation:"deleteDisposalLoad"}),r;return!0},async getDisposalSummary(l,r=null,c=null){if(!p)return[];const u=performance.now();try{const{data:s,error:d}=await _.rpc("get_disposal_summary",{p_project_id:l,p_start_date:r,p_end_date:c}),h=Math.round(performance.now()-u);if(ee.query("getDisposalSummary",{duration:h,rows:s?.length,project_id:l}),d)throw d;return s||[]}catch(s){return ee.error("database",{message:s.message,operation:"getDisposalSummary",project_id:l}),this.getDisposalSummaryFallback(l,r,c)}},async getDisposalSummaryFallback(l,r,c){let u=_.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",l);r&&(u=u.gte("work_date",r)),c&&(u=u.lte("work_date",c));const{data:s,error:d}=await u;if(d)throw d;const h={};return s?.forEach(g=>{h[g.load_type]||(h[g.load_type]={load_type:g.load_type,total_loads:0,days:new Set}),h[g.load_type].total_loads+=g.load_count,h[g.load_type].days.add(g.work_date)}),Object.values(h).map(g=>({load_type:g.load_type,total_loads:g.total_loads,days_with_activity:g.days.size}))},async getWeeklyDisposalSummary(l,r=4){if(!p)return[];const c=new Date,u=new Date;u.setDate(u.getDate()-r*7);const{data:s,error:d}=await _.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",l).gte("work_date",u.toISOString().split("T")[0]).lte("work_date",c.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(d)throw d;const h={};return s?.forEach(g=>{const w=new Date(g.work_date),z=new Date(w);z.setDate(w.getDate()-w.getDay());const U=z.toISOString().split("T")[0];h[U]||(h[U]={week:U,concrete:0,trash:0,metals:0,hazardous_waste:0}),h[U][g.load_type]+=g.load_count}),Object.values(h).sort((g,w)=>g.week.localeCompare(w.week))},async uploadPhoto(l,r,c,u){if(!p)return null;const s=performance.now(),d=u.size||0,h=Date.now(),g=new Uint8Array(6);crypto.getRandomValues(g);const w=Array.from(g,G=>G.toString(36)).join(""),z=u.name?.split(".").pop()||"jpg",U=`${h}-${w}.${z}`,N=`${l}/${r}/${c}/${U}`;try{const{data:G,error:Z}=await _.storage.from("tm-photos").upload(N,u,{cacheControl:"3600",upsert:!1}),V=Math.round(performance.now()-s);if(ee.storage("upload",{company_id:l,project_id:r,size:d,duration:V,success:!Z}),Z)throw Z;const{data:H}=_.storage.from("tm-photos").getPublicUrl(N);return H.publicUrl}catch(G){throw ee.error("storage",{message:G.message,operation:"uploadPhoto",company_id:l,project_id:r}),G}},async uploadPhotoBase64(l,r,c,u,s="photo.jpg"){if(!p)return null;const h=await(await fetch(u)).blob(),g=Date.now(),w=new Uint8Array(6);crypto.getRandomValues(w);const z=Array.from(w,ie=>ie.toString(36)).join(""),U=s.split(".").pop()||"jpg",N=`${g}-${z}.${U}`,G=`${l}/${r}/${c}/${N}`,{data:Z,error:V}=await _.storage.from("tm-photos").upload(G,h,{cacheControl:"3600",upsert:!1,contentType:h.type});if(V)throw V;const{data:H}=_.storage.from("tm-photos").getPublicUrl(G);return H.publicUrl},async deletePhoto(l){if(!p)return;const c=new URL(l).pathname.match(/\/tm-photos\/(.+)$/);if(!c)return;const u=c[1],{error:s}=await _.storage.from("tm-photos").remove([u]);if(s)throw s},async verifyPhotoAccessible(l){if(!p||!l)return{accessible:!1,error:"Invalid URL"};try{const r=await fetch(l,{method:"HEAD"});return{accessible:r.ok,status:r.status,error:r.ok?null:`HTTP ${r.status}`}}catch(r){return{accessible:!1,error:r.message||"Network error"}}},async verifyTicketPhotos(l){if(!p)return{verified:!1,issues:[]};try{const{data:r,error:c}=await _.from("t_and_m_tickets").select("photos").eq("id",l).single();if(c)throw c;if(!r?.photos||r.photos.length===0)return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",l),{verified:!0,status:"empty",issues:[]};const u=[];for(const d of r.photos){const h=await this.verifyPhotoAccessible(d);h.accessible||u.push({url:d,error:h.error})}const s=u.length===0?"verified":"issues";return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:s,photos_issue_count:u.length}).eq("id",l),{verified:u.length===0,status:s,totalPhotos:r.photos.length,issues:u}}catch(r){return console.error("Error verifying ticket photos:",r),{verified:!1,error:r.message,issues:[]}}},async queuePhotoUpload(l,r,c,u){if(!p)return null;const{data:s,error:d}=await _.from("photo_upload_queue").insert({ticket_id:l,temp_id:r,file_name:c,file_size_bytes:u,status:"pending"}).select().single();return d?(console.error("Error queueing photo upload:",d),null):s},async confirmQueuedUpload(l,r,c){if(!p)return!1;const{data:u,error:s}=await _.rpc("confirm_photo_upload",{p_queue_id:l,p_uploaded_url:r,p_storage_path:c});return s?(console.error("Error confirming photo upload:",s),!1):u===!0},async markQueuedUploadFailed(l,r){if(!p)return!1;const{data:c,error:u}=await _.rpc("mark_photo_upload_failed",{p_queue_id:l,p_error:r});return u?(console.error("Error marking photo upload failed:",u),!1):c===!0},async getPendingPhotoUploads(l){if(!p)return[];const{data:r,error:c}=await _.rpc("get_pending_photo_uploads",{p_ticket_id:l});return c?(console.error("Error getting pending photo uploads:",c),[]):r||[]},async logPhotoOperation(l,r,c={}){if(p)try{await _.from("photo_audit_log").insert({ticket_id:l,cor_id:c.corId||null,operation:r,photo_url:c.photoUrl||null,storage_path:c.storagePath||null,details:c.metadata?c.metadata:null,error_message:c.error||null,triggered_by:c.triggeredBy||"system"})}catch(u){console.error("Error logging photo operation:",u)}},async saveExportSnapshot(l,r,c={}){if(!p)return null;const{exportType:u="pdf",exportReason:s=null,clientEmail:d=null,clientName:h=null}=c;try{const{data:g,error:w}=await _.from("cor_export_snapshots").insert({cor_id:l,export_type:u,export_reason:s,cor_data:r.cor_data,tickets_data:r.tickets_data,photos_manifest:r.photos_manifest,totals_snapshot:r.totals_snapshot,checksum:r.checksum,client_email:d,client_name:h}).select().single();if(w)throw w;return g}catch(g){return console.error("Error saving export snapshot:",g),null}},async getExportSnapshots(l){if(!p)return[];const{data:r,error:c}=await _.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",l).order("exported_at",{ascending:!1});return c?(console.error("Error fetching export snapshots:",c),[]):r||[]},async getExportSnapshot(l){if(!p)return null;const{data:r,error:c}=await _.from("cor_export_snapshots").select("*").eq("id",l).single();return c?(console.error("Error fetching export snapshot:",c),null):r},async requestCORExport(l,r,c={}){if(!p)return null;try{const u=await _.auth.getUser(),{data:s,error:d}=await _.rpc("request_cor_export",{p_cor_id:l,p_idempotency_key:r,p_options:c,p_requested_by:u?.data?.user?.id||null});if(d)throw d;return s?.[0]||null}catch(u){throw ee.error("database",{message:u.message,operation:"requestCORExport",extra:{corId:l}}),u}},async getExportJob(l){if(!p)return null;const{data:r,error:c}=await _.from("cor_export_jobs").select("*").eq("id",l).single();return c?(console.error("Error fetching export job:",c),null):r},async getExportJobs(l,r=10){if(!p)return[];const{data:c,error:u}=await _.from("cor_export_jobs").select("*").eq("cor_id",l).order("created_at",{ascending:!1}).limit(r);return u?(console.error("Error fetching export jobs:",u),[]):c||[]},async updateExportJobStatus(l,r,c={}){if(!p)return null;try{const{data:u,error:s}=await _.rpc("update_export_job_status",{p_job_id:l,p_status:r,p_snapshot_id:c.snapshotId||null,p_pdf_url:c.pdfUrl||null,p_error:c.error||null,p_error_details:c.errorDetails||null,p_metrics:c.metrics||null});if(s)throw s;return u}catch(u){throw ee.error("database",{message:u.message,operation:"updateExportJobStatus",extra:{jobId:l,status:r}}),u}},async getCurrentCORSnapshot(l){if(!p)return null;const{data:r}=await _.from("change_orders").select("version, last_snapshot_version").eq("id",l).single();if(!r||r.version!==r.last_snapshot_version)return null;const{data:c}=await _.from("cor_export_snapshots").select("*").eq("cor_id",l).eq("is_current",!0).single();return c||null},async saveCORSnapshot(l,r){if(!p)return null;try{await _.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",l.corId);const c=await _.auth.getUser(),{data:u,error:s}=await _.from("cor_export_snapshots").insert({id:l.snapshotId,cor_id:l.corId,job_id:r,cor_version:l.corVersion,cor_data:l.corData,tickets_data:l.ticketsData,photos_manifest:l.photoManifest,totals_snapshot:l.totals,checksum:l.checksum,is_current:!0,exported_by:c?.data?.user?.id||null}).select().single();if(s)throw s;return await _.from("change_orders").update({last_snapshot_version:l.corVersion}).eq("id",l.corId),u}catch(c){throw ee.error("database",{message:c.message,operation:"saveCORSnapshot",extra:{corId:l.corId}}),c}},async updateCORAggregatedStats(l){if(p)try{await _.rpc("update_cor_aggregated_stats",{p_cor_id:l})}catch(r){console.error("Error updating COR aggregated stats:",r)}},async getCrewCheckin(l,r=null){if(!p)return null;const c=r||new Date().toISOString().split("T")[0],u=Et(),{data:s,error:d}=await u.from("crew_checkins").select("*").eq("project_id",l).eq("check_in_date",c).single();return d&&d.code,s},async saveCrewCheckin(l,r,c=null,u=null){if(!p)return null;const s=u||new Date().toISOString().split("T")[0];if(!Ht()){const w={id:jt(),project_id:l,check_in_date:s,workers:r,created_by:c,updated_at:new Date().toISOString(),_offline:!0};return await Lu(w),await Bt(Ze.SAVE_CREW_CHECKIN,{projectId:l,workers:r,checkInDate:s}),w}const d=Et(),{data:h,error:g}=await d.from("crew_checkins").upsert({project_id:l,check_in_date:s,workers:r,created_by:c,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(g){if(g.message?.includes("fetch")||g.message?.includes("network")){const w={id:jt(),project_id:l,check_in_date:s,workers:r,_offline:!0};return await Lu(w),await Bt(Ze.SAVE_CREW_CHECKIN,{projectId:l,workers:r,checkInDate:s}),w}throw console.error("Error saving crew checkin:",g),g}return h&&Lu(h).catch(w=>console.error("Failed to cache checkin:",w)),h},async addCrewMember(l,r,c=null){if(!p)return null;const u=await this.getCrewCheckin(l),s=u?.workers||[];return s.find(d=>d.name.toLowerCase()===r.name.toLowerCase())?u:(s.push(r),await this.saveCrewCheckin(l,s,c))},async removeCrewMember(l,r){if(!p)return null;const c=await this.getCrewCheckin(l);if(!c)return null;const u=c.workers.filter(s=>s.name.toLowerCase()!==r.toLowerCase());return await this.saveCrewCheckin(l,u,c.created_by)},async getCrewCheckinHistory(l,r=30){if(!p)return[];const{data:c,error:u}=await _.from("crew_checkins").select("*").eq("project_id",l).order("check_in_date",{ascending:!1}).limit(r);return u?(console.error("Error fetching crew history:",u),[]):c||[]},async getLaborRates(l,r=null,c=null){if(!p)return[];let u=_.from("labor_rates").select("*").eq("company_id",l);r&&(u=u.eq("work_type",r)),c&&(u=u.eq("job_type",c));const{data:s,error:d}=await u;return d?(console.error("Error fetching labor rates:",d),[]):s||[]},async calculateManDayCosts(l,r,c,u){if(!p)return{totalCost:0,totalManDays:0,breakdown:[]};const s=await this.getCrewCheckinHistory(l,365),d=await this.getLaborRates(r,c,u),h={};d.forEach(N=>{h[N.role.toLowerCase()]=parseFloat(N.regular_rate)||0});let g=0,w=0;const z={},U=[];return s.forEach(N=>{const G=N.workers||[];let Z=0;const V={};G.forEach(H=>{const ie=(H.role||"laborer").toLowerCase(),_e=h[ie]||0;V[ie]||(V[ie]={count:0,cost:0}),V[ie].count++,V[ie].cost+=_e,Z+=_e,z[ie]||(z[ie]={count:0,cost:0,rate:_e}),z[ie].count++,z[ie].cost+=_e}),g+=Z,w+=G.length,U.push({date:N.check_in_date,workers:G.length,cost:Z,breakdown:V})}),{totalCost:g,totalManDays:w,byRole:z,byDate:U,daysWorked:s.length}},async getDailyReport(l,r=null){if(!p)return null;const c=r||new Date().toISOString().split("T")[0],u=Et(),{data:s,error:d}=await u.from("daily_reports").select("*").eq("project_id",l).eq("report_date",c).single();return d&&d.code,s},async compileDailyReport(l,r=null){if(!p)return null;const c=r||new Date().toISOString().split("T")[0],u=Et(),s=await this.getCrewCheckin(l,c),{data:d}=await u.from("areas").select("*").eq("project_id",l),h=d?.filter(z=>z.status==="done"&&z.completed_at?.startsWith(c))||[],{data:g}=await u.from("t_and_m_tickets").select("*").eq("project_id",l).eq("work_date",c),w=g?.reduce((z,U)=>z+(U.photos?.length||0),0)||0;return{crew_count:s?.workers?.length||0,crew_list:s?.workers||[],tasks_completed:h.length,tasks_total:d?.length||0,completed_tasks:h.map(z=>({name:z.name,group:z.group_name})),tm_tickets_count:g?.length||0,photos_count:w}},async saveDailyReport(l,r,c=null){if(!p)return null;const u=c||new Date().toISOString().split("T")[0];if(!Ht()){const g={id:jt(),project_id:l,report_date:u,...r,updated_at:new Date().toISOString(),_offline:!0};return await $n(g),g}const s=Et(),{data:d,error:h}=await s.from("daily_reports").upsert({project_id:l,report_date:u,...r,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const g={id:jt(),project_id:l,report_date:u,...r,_offline:!0};return await $n(g),g}throw console.error("Error saving daily report:",h),h}return d&&$n(d).catch(g=>console.error("Failed to cache report:",g)),d},async submitDailyReport(l,r,c=null){if(!p)return null;const u=c||new Date().toISOString().split("T")[0];if(!Ht()){const g=await pp(l,u),w={id:jt(),project_id:l,report_date:u,...g||{},status:"pending_sync",submitted_by:r,submitted_at:new Date().toISOString(),_offline:!0};return await $n(w),await Bt(Ze.SUBMIT_DAILY_REPORT,{projectId:l,reportData:g||{},submittedBy:r}),w}const s=await this.compileDailyReport(l,u),{data:d,error:h}=await _.from("daily_reports").upsert({project_id:l,report_date:u,...s,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:r,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const g={id:jt(),project_id:l,report_date:u,...s,status:"pending_sync",submitted_by:r,_offline:!0};return await $n(g),await Bt(Ze.SUBMIT_DAILY_REPORT,{projectId:l,reportData:s,submittedBy:r}),g}throw console.error("Error submitting daily report:",h),h}return d&&$n(d).catch(g=>console.error("Failed to cache report:",g)),d},async getDailyReports(l,r=30){if(!p)return[];const{data:c,error:u}=await _.from("daily_reports").select("*").eq("project_id",l).order("report_date",{ascending:!1}).limit(r);return u?(console.error("Error fetching daily reports:",u),[]):c||[]},async sendMessage(l,r,c,u,s=null,d=null,h="general",g=null){if(!p)return null;if(!Ht()){const U={id:jt(),project_id:l,sender_type:c,sender_name:u,sender_user_id:s,message:r,photo_url:d,message_type:h,parent_message_id:g,created_at:new Date().toISOString(),_offline:!0};return await sm(U),await Bt(Ze.SEND_MESSAGE,{projectId:l,senderType:c,senderName:u,content:r}),U}const{data:w,error:z}=await _.from("messages").insert({project_id:l,sender_type:c,sender_name:u,sender_user_id:s,message:r,photo_url:d,message_type:h,parent_message_id:g}).select().single();if(z){if(z.message?.includes("fetch")||z.message?.includes("network")){const U={id:jt(),project_id:l,sender_type:c,sender_name:u,message:r,created_at:new Date().toISOString(),_offline:!0};return await sm(U),await Bt(Ze.SEND_MESSAGE,{projectId:l,senderType:c,senderName:u,content:r}),U}throw console.error("Error sending message:",z),z}return w},async getMessages(l,r=50){if(!p)return[];const c=Et(),{data:u,error:s}=await c.from("messages").select("*").eq("project_id",l).order("created_at",{ascending:!1}).limit(r);return s?[]:u||[]},async getUnreadCount(l,r){if(!p)return 0;const c=Et(),u=r==="field"?"office":"field",{count:s,error:d}=await c.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",l).eq("sender_type",u).eq("is_read",!1);return d?0:s||0},async markMessagesRead(l,r){if(!p)return;const c=Et(),u=r==="field"?"office":"field";await c.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",l).eq("sender_type",u).eq("is_read",!1)},async createMaterialRequest(l,r,c,u=null,s="normal",d=null){if(!p)return null;if(!Ht()){const w={id:jt(),project_id:l,items:r,requested_by:c,needed_by:u,priority:s,notes:d,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await Bt(Ze.CREATE_MATERIAL_REQUEST,{projectId:l,items:r,requestedBy:c,neededBy:u,priority:s,notes:d}),w}const{data:h,error:g}=await _.from("material_requests").insert({project_id:l,items:r,requested_by:c,needed_by:u,priority:s,notes:d}).select().single();if(g){if(g.message?.includes("fetch")||g.message?.includes("network")){const w={id:jt(),project_id:l,items:r,requested_by:c,status:"pending_sync",_offline:!0};return await Bt(Ze.CREATE_MATERIAL_REQUEST,{projectId:l,items:r,requestedBy:c,neededBy:u,priority:s,notes:d}),w}throw console.error("Error creating material request:",g),g}return h},async getMaterialRequests(l,r=null){if(!p)return[];let c=_.from("material_requests").select("*").eq("project_id",l).order("created_at",{ascending:!1});r&&(c=c.eq("status",r));const{data:u,error:s}=await c;return s?(console.error("Error fetching material requests:",s),[]):u||[]},async getPendingRequestsCount(l){if(!p)return 0;const{count:r,error:c}=await _.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",l).eq("status","pending");return c?0:r||0},async updateMaterialRequest(l,r,c,u=null,s=null){if(!p)return null;const d={status:r,responded_by:c,responded_at:new Date().toISOString(),response_notes:u,updated_at:new Date().toISOString()};s&&(d.expected_delivery=s),r==="delivered"&&(d.delivered_at=new Date().toISOString());const{data:h,error:g}=await _.from("material_requests").update(d).eq("id",l).select().single();if(g)throw console.error("Error updating material request:",g),g;return h},generateShareToken(){const l="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=new Uint8Array(12);return crypto.getRandomValues(r),Array.from(r,c=>l[c%l.length]).join("")},async createProjectShare(l,r,c,u=null){if(!p){const w=R();w.projectShares||(w.projectShares=[]);const z={id:crypto.randomUUID(),project_id:l,share_token:this.generateShareToken(),created_by:r,expires_at:u,is_active:!0,permissions:c,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return w.projectShares.push(z),I(w),z}const{data:s,error:d}=await _.rpc("generate_share_token");if(d)throw console.error("Error generating share token:",d),d;const{data:h,error:g}=await _.from("project_shares").insert({project_id:l,share_token:s,created_by:r,expires_at:u,permissions:c}).select().single();if(g)throw console.error("Error creating project share:",g),g;return h},async getShareByToken(l){if(!p){const u=R();if(!u.projectShares)return null;const s=u.projectShares.find(d=>d.share_token===l&&d.is_active&&(!d.expires_at||new Date(d.expires_at)>new Date));return s&&(s.view_count++,s.last_viewed_at=new Date().toISOString(),I(u)),s}const{data:r,error:c}=await _.from("project_shares").select("*, projects(*)").eq("share_token",l).eq("is_active",!0).single();return c?(console.error("Error fetching share by token:",c),null):r.expires_at&&new Date(r.expires_at)<new Date?null:(await _.rpc("increment_share_view_count",{token:l}),r)},async getProjectShares(l){if(!p){const u=R();return u.projectShares?u.projectShares.filter(s=>s.project_id===l):[]}const{data:r,error:c}=await _.from("project_shares").select("*, users(name, email)").eq("project_id",l).order("created_at",{ascending:!1});return c?(console.error("Error fetching project shares:",c),[]):r||[]},async updateProjectShare(l,r){if(!p){const s=R();if(!s.projectShares)return null;const d=s.projectShares.findIndex(h=>h.id===l);return d===-1?null:(s.projectShares[d]={...s.projectShares[d],...r,updated_at:new Date().toISOString()},I(s),s.projectShares[d])}const{data:c,error:u}=await _.from("project_shares").update(r).eq("id",l).select().single();if(u)throw console.error("Error updating project share:",u),u;return c},async revokeProjectShare(l){return this.updateProjectShare(l,{is_active:!1})},async deleteProjectShare(l){if(!p){const c=R();if(!c.projectShares)return;c.projectShares=c.projectShares.filter(u=>u.id!==l),I(c);return}const{error:r}=await _.from("project_shares").delete().eq("id",l);if(r)throw console.error("Error deleting project share:",r),r},async getPublicProjectData(l){const r=await this.getShareByToken(l);if(!r)return null;const c=r.project_id||r.projects?.id;if(!p){const d=R(),h=d.projects.find(N=>N.id===c);if(!h)return null;const g=d.areas.filter(N=>N.project_id===c),w=g.reduce((N,G)=>N+parseFloat(G.weight||0),0),z=g.filter(N=>N.status==="done").reduce((N,G)=>N+parseFloat(G.weight||0),0),U=w>0?Math.round(z/w*100):0;return{share:r,project:h,progress:U,areas:r.permissions.progress?g:[],photos:[],dailyReports:[],tmTickets:[]}}const u=r.projects||await this.getProject(c);if(!u)return null;const s={share:r,project:u,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(r.permissions.progress){s.areas=await this.getAreas(c);const d=s.areas.reduce((g,w)=>g+parseFloat(w.weight||0),0),h=s.areas.filter(g=>g.status==="done").reduce((g,w)=>g+parseFloat(w.weight||0),0);s.progress=d>0?Math.round(h/d*100):0}if(r.permissions.photos){const{data:d}=await _.from("t_and_m_tickets").select("photos, work_date").eq("project_id",c).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);s.photos=d?.flatMap(h=>(h.photos||[]).map(g=>({url:g,date:h.work_date})))||[]}if(r.permissions.daily_reports){const{data:d}=await _.from("daily_reports").select("*").eq("project_id",c).order("report_date",{ascending:!1}).limit(10);s.dailyReports=d||[]}return r.permissions.tm_tickets&&(s.tmTickets=await this.getTMTickets(c)),s},async createInjuryReport(l){if(!p){const u=R();u.injuryReports||(u.injuryReports=[]);const s={id:crypto.randomUUID(),...l,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return u.injuryReports.push(s),I(u),s}const{data:r,error:c}=await _.from("injury_reports").insert(l).select().single();if(c)throw console.error("Error creating injury report:",c),c;return r},async getInjuryReports(l){if(!p){const u=R();return u.injuryReports?u.injuryReports.filter(s=>s.project_id===l).sort((s,d)=>new Date(d.incident_date)-new Date(s.incident_date)):[]}const{data:r,error:c}=await _.from("injury_reports").select("*").eq("project_id",l).order("incident_date",{ascending:!1});return c?(console.error("Error fetching injury reports:",c),[]):r||[]},async getCompanyInjuryReports(l,r=null){if(!p){const d=R();if(!d.injuryReports)return[];let h=d.injuryReports.filter(g=>g.company_id===l);return r&&(h=h.filter(g=>g.status===r)),h.sort((g,w)=>new Date(w.incident_date)-new Date(g.incident_date))}let c=_.from("injury_reports").select("*, projects(name)").eq("company_id",l).order("incident_date",{ascending:!1});r&&(c=c.eq("status",r));const{data:u,error:s}=await c;return s?(console.error("Error fetching company injury reports:",s),[]):u||[]},async getInjuryReport(l){if(!p){const u=R();return u.injuryReports?u.injuryReports.find(s=>s.id===l):null}const{data:r,error:c}=await _.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",l).single();return c?(console.error("Error fetching injury report:",c),null):r},async updateInjuryReport(l,r){if(!p){const s=R();if(!s.injuryReports)return null;const d=s.injuryReports.findIndex(h=>h.id===l);return d===-1?null:(s.injuryReports[d]={...s.injuryReports[d],...r,updated_at:new Date().toISOString()},I(s),s.injuryReports[d])}const{data:c,error:u}=await _.from("injury_reports").update(r).eq("id",l).select().single();if(u)throw console.error("Error updating injury report:",u),u;return c},async closeInjuryReport(l,r){return this.updateInjuryReport(l,{status:"closed",closed_at:new Date().toISOString(),closed_by:r})},async deleteInjuryReport(l){if(!p){const c=R();if(!c.injuryReports)return;c.injuryReports=c.injuryReports.filter(u=>u.id!==l),I(c);return}const{error:r}=await _.from("injury_reports").delete().eq("id",l);if(r)throw console.error("Error deleting injury report:",r),r},async getInjuryStatistics(l,r=null,c=null){if(!p){const d=R();if(!d.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let h=d.injuryReports.filter(g=>g.company_id===l);return r&&(h=h.filter(g=>new Date(g.incident_date)>=new Date(r))),c&&(h=h.filter(g=>new Date(g.incident_date)<=new Date(c))),{total_incidents:h.length,minor_injuries:h.filter(g=>g.injury_type==="minor").length,serious_injuries:h.filter(g=>g.injury_type==="serious").length,critical_injuries:h.filter(g=>g.injury_type==="critical").length,near_misses:h.filter(g=>g.injury_type==="near_miss").length,osha_recordable:h.filter(g=>g.osha_recordable).length,total_days_away:h.reduce((g,w)=>g+(w.days_away_from_work||0),0),total_restricted_days:h.reduce((g,w)=>g+(w.restricted_work_days||0),0)}}const{data:u,error:s}=await _.rpc("get_injury_statistics",{comp_id:l,start_date:r,end_date:c});return s?(console.error("Error fetching injury statistics:",s),null):u[0]||null},async addWitness(l,r){if(!p){const s=R();if(!s.injuryReports)return null;const d=s.injuryReports.findIndex(w=>w.id===l);if(d===-1)return null;const h=s.injuryReports[d],g=h.witnesses||[];return g.push(r),s.injuryReports[d]={...h,witnesses:g,updated_at:new Date().toISOString()},I(s),s.injuryReports[d]}const c=await this.getInjuryReport(l);if(!c)return null;const u=c.witnesses||[];return u.push(r),this.updateInjuryReport(l,{witnesses:u})},async removeWitness(l,r){if(!p){const s=R();if(!s.injuryReports)return null;const d=s.injuryReports.findIndex(w=>w.id===l);if(d===-1)return null;const h=s.injuryReports[d],g=h.witnesses||[];return g.splice(r,1),s.injuryReports[d]={...h,witnesses:g,updated_at:new Date().toISOString()},I(s),s.injuryReports[d]}const c=await this.getInjuryReport(l);if(!c)return null;const u=c.witnesses||[];return u.splice(r,1),this.updateInjuryReport(l,{witnesses:u})},async getCompanyUsers(l){if(p){const{data:r,error:c}=await _.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",l);return c?(console.error("Error fetching company users:",c),[]):r?.map(u=>({id:u.user_id,name:u.users?.name||u.users?.email,email:u.users?.email,role:u.role}))||[]}return[]},async getProjectNotificationPreferences(l){if(p){const{data:c,error:u}=await _.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",l);return u?(console.error("Error fetching notification preferences:",u),[]):c||[]}const r=R();return r.notificationPreferences?r.notificationPreferences.filter(c=>c.project_id===l):[]},async getUserNotificationPreferences(l){if(p){const{data:c,error:u}=await _.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",l);return u?(console.error("Error fetching user notification preferences:",u),[]):c||[]}const r=R();return r.notificationPreferences?r.notificationPreferences.filter(c=>c.user_id===l):[]},async setNotificationPreference(l,r,c){if(p){const{data:h,error:g}=await _.from("notification_preferences").upsert({project_id:l,user_id:r,notification_types:c,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(g)throw console.error("Error setting notification preference:",g),g;return h}const u=R();u.notificationPreferences||(u.notificationPreferences=[]);const s=u.notificationPreferences.findIndex(h=>h.project_id===l&&h.user_id===r),d={id:s>=0?u.notificationPreferences[s].id:crypto.randomUUID(),project_id:l,user_id:r,notification_types:c,created_at:s>=0?u.notificationPreferences[s].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s>=0?u.notificationPreferences[s]=d:u.notificationPreferences.push(d),I(u),d},async removeNotificationPreference(l,r){if(p){const{error:u}=await _.from("notification_preferences").delete().eq("project_id",l).eq("user_id",r);if(u)throw console.error("Error removing notification preference:",u),u;return!0}const c=R();return c.notificationPreferences&&(c.notificationPreferences=c.notificationPreferences.filter(u=>!(u.project_id===l&&u.user_id===r)),I(c)),!0},async setProjectNotificationPreferences(l,r){const c=[];for(const u of r)if(u.notificationTypes&&u.notificationTypes.length>0){const s=await this.setNotificationPreference(l,u.userId,u.notificationTypes);c.push(s)}else await this.removeNotificationPreference(l,u.userId);return c},async getNotificationPresets(l){if(p){const{data:c,error:u}=await _.from("notification_presets").select("*").eq("company_id",l).order("name");return u?(console.error("Error fetching notification presets:",u),[]):c||[]}const r=R();return r.notificationPresets?r.notificationPresets.filter(c=>c.company_id===l):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:l},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:l},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:l},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:l}]},async createNotificationPreset(l,r,c){if(p){const{data:d,error:h}=await _.from("notification_presets").insert({company_id:l,name:r,notification_types:c}).select().single();if(h)throw console.error("Error creating notification preset:",h),h;return d}const u=R();u.notificationPresets||(u.notificationPresets=[]);const s={id:crypto.randomUUID(),company_id:l,name:r,notification_types:c,created_at:new Date().toISOString()};return u.notificationPresets.push(s),I(u),s},async updateNotificationPreset(l,r,c){if(p){const{data:d,error:h}=await _.from("notification_presets").update({name:r,notification_types:c,updated_at:new Date().toISOString()}).eq("id",l).select().single();if(h)throw console.error("Error updating notification preset:",h),h;return d}const u=R();if(!u.notificationPresets)return null;const s=u.notificationPresets.findIndex(d=>d.id===l);return s===-1?null:(u.notificationPresets[s]={...u.notificationPresets[s],name:r,notification_types:c,updated_at:new Date().toISOString()},I(u),u.notificationPresets[s])},async deleteNotificationPreset(l){if(p){const{error:c}=await _.from("notification_presets").delete().eq("id",l);if(c)throw console.error("Error deleting notification preset:",c),c;return!0}const r=R();return r.notificationPresets&&(r.notificationPresets=r.notificationPresets.filter(c=>c.id!==l),I(r)),!0},async getDumpSites(l){if(p){const{data:c,error:u}=await _.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",l).eq("active",!0).order("name");return u?(console.error("Error fetching dump sites:",u),[]):c||[]}return(R().dumpSites||[]).filter(c=>c.company_id===l&&c.active)},async createDumpSite(l,r,c="",u=""){if(p){const{data:h,error:g}=await _.from("dump_sites").insert({company_id:l,name:r,address:c,notes:u,active:!0}).select().single();if(g)throw console.error("Error creating dump site:",g),g;return h}const s=R();s.dumpSites||(s.dumpSites=[]);const d={id:crypto.randomUUID(),company_id:l,name:r,address:c,notes:u,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return s.dumpSites.push(d),I(s),d},async updateDumpSite(l,r){if(p){const{data:s,error:d}=await _.from("dump_sites").update({...r,updated_at:new Date().toISOString()}).eq("id",l).select().single();if(d)throw console.error("Error updating dump site:",d),d;return s}const c=R();if(!c.dumpSites)return null;const u=c.dumpSites.findIndex(s=>s.id===l);return u===-1?null:(c.dumpSites[u]={...c.dumpSites[u],...r},I(c),c.dumpSites[u])},async deleteDumpSite(l){return this.updateDumpSite(l,{active:!1})},async setDumpSiteRate(l,r,c,u="load"){if(p){const{data:g}=await _.from("dump_site_rates").select("id").eq("dump_site_id",l).eq("waste_type",r).maybeSingle();if(g){const{data:w,error:z}=await _.from("dump_site_rates").update({estimated_cost_per_load:c,unit:u}).eq("id",g.id).select().single();if(z)throw console.error("Error updating dump site rate:",z),z;return w}else{const{data:w,error:z}=await _.from("dump_site_rates").insert({dump_site_id:l,waste_type:r,estimated_cost_per_load:c,unit:u}).select().single();if(z)throw console.error("Error inserting dump site rate:",z),z;return w}}const s=R();s.dumpSiteRates||(s.dumpSiteRates=[]);const d=s.dumpSiteRates.findIndex(g=>g.dump_site_id===l&&g.waste_type===r),h={id:d>=0?s.dumpSiteRates[d].id:crypto.randomUUID(),dump_site_id:l,waste_type:r,estimated_cost_per_load:c,unit:u,created_at:new Date().toISOString()};return d>=0?s.dumpSiteRates[d]=h:s.dumpSiteRates.push(h),I(s),h},async getDumpSiteRates(l){if(p){const{data:c,error:u}=await _.from("dump_site_rates").select("*").eq("dump_site_id",l);return u?(console.error("Error fetching dump site rates:",u),[]):c||[]}return(R().dumpSiteRates||[]).filter(c=>c.dump_site_id===l)},async getHaulOffs(l){if(p){const{data:c,error:u}=await _.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",l).order("work_date",{ascending:!1});return u?(console.error("Error fetching haul-offs:",u),[]):c||[]}return(R().haulOffs||[]).filter(c=>c.project_id===l).sort((c,u)=>new Date(u.work_date)-new Date(c.work_date))},async createHaulOff(l,r){const c={project_id:l,dump_site_id:r.dumpSiteId,waste_type:r.wasteType,loads:r.loads,hauling_company:r.haulingCompany||"",work_date:r.workDate,notes:r.notes||"",estimated_cost:r.estimatedCost||0,created_by:r.createdBy||""};if(p){const{data:d,error:h}=await _.from("haul_offs").insert(c).select().single();if(h)throw console.error("Error creating haul-off:",h),h;return d}const u=R();u.haulOffs||(u.haulOffs=[]);const s={...c,id:crypto.randomUUID(),created_at:new Date().toISOString()};return u.haulOffs.push(s),I(u),s},async calculateHaulOffCosts(l){const r=await this.getHaulOffs(l);let c=0,u=0;const s={},d=[],h={};r.forEach(w=>{const z=parseFloat(w.estimated_cost)||0,U=parseInt(w.loads)||0;c+=z,u+=U,s[w.waste_type]||(s[w.waste_type]={loads:0,cost:0}),s[w.waste_type].loads+=U,s[w.waste_type].cost+=z,h[w.work_date]||(h[w.work_date]={date:w.work_date,loads:0,cost:0}),h[w.work_date].loads+=U,h[w.work_date].cost+=z}),Object.values(h).sort((w,z)=>new Date(z.date)-new Date(w.date)).forEach(w=>d.push(w));const g=d.length;return{totalCost:c,totalLoads:u,byWasteType:s,byDate:d,daysWithHaulOff:g,avgDailyHaulOffCost:g>0?c/g:0}},subscribeToHaulOffs(l,r){return p?_.channel(`haul_offs:${l}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${l}`},r).subscribe():null},async createCOR(l,r=0){if(p){let c=l.cor_number;r>0&&(c=await this.getNextCORNumber(l.project_id));const{data:u,error:s}=await _.from("change_orders").insert({company_id:l.company_id,project_id:l.project_id,area_id:l.area_id||null,cor_number:c,title:l.title,description:l.description||"",scope_of_work:l.scope_of_work,period_start:l.period_start,period_end:l.period_end,status:"draft",labor_markup_percent:l.labor_markup_percent??1500,materials_markup_percent:l.materials_markup_percent??1500,equipment_markup_percent:l.equipment_markup_percent??1500,subcontractors_markup_percent:l.subcontractors_markup_percent??500,liability_insurance_percent:l.liability_insurance_percent??144,bond_percent:l.bond_percent??100,license_fee_percent:l.license_fee_percent??10,created_by:l.created_by||null}).select().single();if((s?.code==="23505"||s?.code==="PGRST116"||s?.status===409||s?.message?.includes("duplicate")||s?.message?.includes("unique_cor_number"))&&r<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${r+1})`),this.createCOR(l,r+1);if(s)throw s;return u}return null},async updateCOR(l,r){if(p){const{data:c,error:u}=await _.from("change_orders").update({...r,updated_at:new Date().toISOString()}).eq("id",l).select().single();if(u)throw u;return c}return null},async deleteCOR(l){if(p){const{error:r}=await _.from("change_orders").delete().eq("id",l);if(r)throw r}},async bulkUpdateCORGroup(l,r){if(p){const{error:c}=await _.from("change_orders").update({group_name:r,updated_at:new Date().toISOString()}).in("id",l);if(c)throw c.message?.includes("group_name")||c.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):c}},async getCORs(l,r={}){if(p){let c=_.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",l);r.status&&(c=c.eq("status",r.status)),r.area_id&&(c=c.eq("area_id",r.area_id)),r.date_start&&(c=c.gte("period_start",r.date_start)),r.date_end&&(c=c.lte("period_end",r.date_end)),c=c.order("created_at",{ascending:!1});const{data:u,error:s}=await c;if(s)throw s;return u}return[]},async getCORById(l){if(p){const{data:r,error:c}=await _.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",l).single();if(c)throw c;return r}return null},async getCORsByArea(l,r){if(p){const{data:c,error:u}=await _.from("change_orders").select("*").eq("project_id",l).eq("area_id",r).order("created_at",{ascending:!1});if(u)throw u;return c}return[]},async getAssignableCORs(l){if(p){const{data:r,error:c}=await _.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",l).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(c)throw c;return r||[]}return[]},async getNextCORNumber(l){if(p){const{data:r,error:c}=await _.from("change_orders").select("cor_number").eq("project_id",l);if(c)throw c;if(r&&r.length>0){let u=0;for(const s of r){const d=s.cor_number?.match(/COR #(\d+)/);if(d){const h=parseInt(d[1]);h>u&&(u=h)}}return`COR #${u+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(l,r){if(p){const c=Math.round(r.regular_hours*r.regular_rate),u=Math.round(r.overtime_hours*r.overtime_rate),s=c+u,{data:d,error:h}=await _.from("change_order_labor").insert({change_order_id:l,labor_class:r.labor_class,wage_type:r.wage_type||"standard",regular_hours:r.regular_hours||0,overtime_hours:r.overtime_hours||0,regular_rate:r.regular_rate||0,overtime_rate:r.overtime_rate||0,regular_total:c,overtime_total:u,total:s,sort_order:r.sort_order||0,source_ticket_id:r.source_ticket_id||null}).select().single();if(h)throw h;return d}return null},async updateCORLaborItem(l,r){if(p){let c={...r};if(r.regular_hours!==void 0||r.regular_rate!==void 0||r.overtime_hours!==void 0||r.overtime_rate!==void 0){const{data:d}=await _.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",l).single(),h=r.regular_hours??d?.regular_hours??0,g=r.overtime_hours??d?.overtime_hours??0,w=r.regular_rate??d?.regular_rate??0,z=r.overtime_rate??d?.overtime_rate??0;c.regular_total=Math.round(h*w),c.overtime_total=Math.round(g*z),c.total=c.regular_total+c.overtime_total}const{data:u,error:s}=await _.from("change_order_labor").update(c).eq("id",l).select().single();if(s)throw s;return u}return null},async deleteCORLaborItem(l){if(p){const{error:r}=await _.from("change_order_labor").delete().eq("id",l);if(r)throw r}},async addCORMaterialItem(l,r){if(p){const u=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(r.source_type)?r.source_type:"custom",s=Math.round(Number(r.unit_cost)||0),d=Number(r.quantity)||1,h=Math.round(d*s),{data:g,error:w}=await _.from("change_order_materials").insert({change_order_id:l,description:r.description||"",quantity:d,unit:r.unit||"each",unit_cost:s,total:h,source_type:u,source_reference:r.source_reference||null,source_ticket_id:r.source_ticket_id||null,sort_order:r.sort_order||0}).select().single();if(w)throw w;return g}return null},async updateCORMaterialItem(l,r){if(p){let c={...r};if(r.quantity!==void 0||r.unit_cost!==void 0){const{data:d}=await _.from("change_order_materials").select("quantity, unit_cost").eq("id",l).single(),h=r.quantity??d?.quantity??1,g=r.unit_cost??d?.unit_cost??0;c.total=Math.round(h*g)}const{data:u,error:s}=await _.from("change_order_materials").update(c).eq("id",l).select().single();if(s)throw s;return u}return null},async deleteCORMaterialItem(l){if(p){const{error:r}=await _.from("change_order_materials").delete().eq("id",l);if(r)throw r}},async addCOREquipmentItem(l,r){if(p){const u=["backup_sheet","invoice","custom","field_ticket","rental"].includes(r.source_type)?r.source_type:"custom",s=Math.round(Number(r.unit_cost)||0),d=Number(r.quantity)||1,h=Math.round(d*s),{data:g,error:w}=await _.from("change_order_equipment").insert({change_order_id:l,description:r.description||"",quantity:d,unit:r.unit||"day",unit_cost:s,total:h,source_type:u,source_reference:r.source_reference||null,source_ticket_id:r.source_ticket_id||null,sort_order:r.sort_order||0}).select().single();if(w)throw w;return g}return null},async updateCOREquipmentItem(l,r){if(p){let c={...r};if(r.quantity!==void 0||r.unit_cost!==void 0){const{data:d}=await _.from("change_order_equipment").select("quantity, unit_cost").eq("id",l).single(),h=r.quantity??d?.quantity??1,g=r.unit_cost??d?.unit_cost??0;c.total=Math.round(h*g)}const{data:u,error:s}=await _.from("change_order_equipment").update(c).eq("id",l).select().single();if(s)throw s;return u}return null},async deleteCOREquipmentItem(l){if(p){const{error:r}=await _.from("change_order_equipment").delete().eq("id",l);if(r)throw r}},async addCORSubcontractorItem(l,r){if(p){const c=Math.round(r.quantity*r.unit_cost),{data:u,error:s}=await _.from("change_order_subcontractors").insert({change_order_id:l,description:r.description,quantity:r.quantity||1,unit:r.unit||"lump sum",unit_cost:r.unit_cost||0,total:c,source_type:r.source_type||"custom",source_reference:r.source_reference||null,sort_order:r.sort_order||0}).select().single();if(s)throw s;return u}return null},async updateCORSubcontractorItem(l,r){if(p){let c={...r};if(r.quantity!==void 0||r.unit_cost!==void 0){const{data:d}=await _.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",l).single(),h=r.quantity??d?.quantity??1,g=r.unit_cost??d?.unit_cost??0;c.total=Math.round(h*g)}const{data:u,error:s}=await _.from("change_order_subcontractors").update(c).eq("id",l).select().single();if(s)throw s;return u}return null},async deleteCORSubcontractorItem(l){if(p){const{error:r}=await _.from("change_order_subcontractors").delete().eq("id",l);if(r)throw r}},async addBulkLaborItems(l,r){if(p&&r.length>0){const c=r.map((d,h)=>{const g=Math.round(d.regular_hours*d.regular_rate),w=Math.round(d.overtime_hours*d.overtime_rate);return{change_order_id:l,labor_class:d.labor_class,wage_type:d.wage_type||"standard",regular_hours:d.regular_hours||0,overtime_hours:d.overtime_hours||0,regular_rate:d.regular_rate||0,overtime_rate:d.overtime_rate||0,regular_total:g,overtime_total:w,total:g+w,sort_order:d.sort_order??h,source_ticket_id:d.source_ticket_id||null}}),{data:u,error:s}=await _.from("change_order_labor").insert(c).select();if(s)throw s;return u}return[]},async addBulkMaterialItems(l,r){if(p&&r.length>0){const c=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],u=r.map((h,g)=>{const w=c.includes(h.source_type)?h.source_type:"custom",z=Math.round(Number(h.unit_cost)||0),U=Number(h.quantity)||1;return{change_order_id:l,description:h.description||"",quantity:U,unit:h.unit||"each",unit_cost:z,total:Math.round(U*z),source_type:w,source_reference:h.source_reference||null,source_ticket_id:h.source_ticket_id||null,sort_order:h.sort_order??g}}),{data:s,error:d}=await _.from("change_order_materials").insert(u).select();if(d)throw d;return s}return[]},async addBulkEquipmentItems(l,r){if(p&&r.length>0){const c=["backup_sheet","invoice","custom","field_ticket","rental"],u=r.map((h,g)=>{const w=c.includes(h.source_type)?h.source_type:"custom",z=Math.round(Number(h.unit_cost)||0),U=Number(h.quantity)||1;return{change_order_id:l,description:h.description||"",quantity:U,unit:h.unit||"day",unit_cost:z,total:Math.round(U*z),source_type:w,source_reference:h.source_reference||null,source_ticket_id:h.source_ticket_id||null,sort_order:h.sort_order??g}}),{data:s,error:d}=await _.from("change_order_equipment").insert(u).select();if(d)throw d;return s}return[]},async addBulkSubcontractorItems(l,r){if(p&&r.length>0){const c=r.map((d,h)=>({change_order_id:l,company_name:d.company_name||"",description:d.description||"",quantity:d.quantity||1,unit:d.unit||"lump sum",unit_cost:d.unit_cost||d.total||d.amount||0,total:d.total||d.amount||0,source_type:d.source_type||"invoice",source_reference:d.source_reference||null,sort_order:d.sort_order??h})),{data:u,error:s}=await _.from("change_order_subcontractors").insert(c).select();if(s)throw s;return u}return[]},async clearCORLineItems(l){p&&(await _.from("change_order_labor").delete().eq("change_order_id",l),await _.from("change_order_materials").delete().eq("change_order_id",l),await _.from("change_order_equipment").delete().eq("change_order_id",l),await _.from("change_order_subcontractors").delete().eq("change_order_id",l))},async saveCORLineItems(l,{laborItems:r,materialItems:c,equipmentItems:u,subcontractorItems:s}){if(p){await this.clearCORLineItems(l);const d=await Promise.all([r?.length>0?this.addBulkLaborItems(l,r):[],c?.length>0?this.addBulkMaterialItems(l,c):[],u?.length>0?this.addBulkEquipmentItems(l,u):[],s?.length>0?this.addBulkSubcontractorItems(l,s):[]]);return{labor:d[0],materials:d[1],equipment:d[2],subcontractors:d[3]}}return null},async assignTicketToCOR(l,r){if(p){const{error:c}=await _.rpc("assign_ticket_to_cor",{p_ticket_id:l,p_cor_id:r});if(c)throw ee.error("database",{message:c.message,operation:"assignTicketToCOR",extra:{ticketId:l,corId:r}}),c;return{ticket_id:l,change_order_id:r}}return null},async unassignTicketFromCOR(l,r){if(p){const{error:c}=await _.rpc("unassign_ticket_from_cor",{p_ticket_id:l,p_cor_id:r});if(c)throw ee.error("database",{message:c.message,operation:"unassignTicketFromCOR",extra:{ticketId:l,corId:r}}),c}},async checkTicketCORIntegrity(){if(p){const{data:l,error:r}=await _.rpc("check_ticket_cor_integrity");if(r)throw r;return l||[]}return[]},async fixTicketCORIntegrity(){if(p){const{data:l,error:r}=await _.rpc("fix_ticket_cor_integrity");if(r)throw r;return l}return 0},async getTicketsForCOR(l){if(p){const{data:r,error:c}=await _.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",l);if(c)throw c;return r}return[]},async getUnassignedTickets(l){if(p){const{data:r,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",l).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(c)throw c;return r}return[]},async importTicketDataToCOR(l,r,c,u,s){if(p){const{data:d,error:h}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",l).single();if(h)throw h;const{data:g,error:w}=await _.from("labor_rates").select("*").eq("company_id",c).eq("work_type",u||"demolition").eq("job_type",s||"standard");if(w)throw w;const z={};g?.forEach(H=>{z[H.role.toLowerCase()]=H});const U={};d.t_and_m_workers?.forEach(H=>{const ie=(H.role||"laborer").toLowerCase();U[ie]||(U[ie]={regular_hours:0,overtime_hours:0}),U[ie].regular_hours+=parseFloat(H.hours)||0,U[ie].overtime_hours+=parseFloat(H.overtime_hours)||0});const N=Object.entries(U).map(([H,ie])=>{const _e=z[H]||{regular_rate:0,overtime_rate:0},he=Math.round((parseFloat(_e.regular_rate)||0)*100),$=Math.round((parseFloat(_e.overtime_rate)||0)*100);return{labor_class:H.charAt(0).toUpperCase()+H.slice(1),wage_type:s||"standard",regular_hours:ie.regular_hours,overtime_hours:ie.overtime_hours,regular_rate:he,overtime_rate:$,source_ticket_id:l}});N.length>0&&await this.addBulkLaborItems(r,N);const G=[],Z=[];d.t_and_m_items?.forEach(H=>{const ie=H.custom_name||H.materials_equipment?.name||"Unknown Item",_e=H.custom_category||H.materials_equipment?.category||"Other",he=H.materials_equipment?.unit||"each",$=Math.round((parseFloat(H.materials_equipment?.cost_per_unit)||0)*100),J={description:ie,quantity:H.quantity||1,unit:he,unit_cost:$,source_type:"backup_sheet",source_ticket_id:l};_e==="Equipment"?Z.push(J):G.push(J)}),G.length>0&&await this.addBulkMaterialItems(r,G),Z.length>0&&await this.addBulkEquipmentItems(r,Z);const{error:V}=await _.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",r).eq("ticket_id",l);if(V)throw V;return ee.activity("cor_import_success",{ticket_id:l,cor_id:r,labor_count:N.length,material_count:G.length,equipment_count:Z.length}),{laborItems:N,materialItems:G,equipmentItems:Z}}return null},async reimportTicketDataToCOR(l,r,c,u,s){return p?(await _.from("change_order_labor").delete().eq("change_order_id",r).eq("source_ticket_id",l),await _.from("change_order_materials").delete().eq("change_order_id",r).eq("source_ticket_id",l),await _.from("change_order_equipment").delete().eq("change_order_id",r).eq("source_ticket_id",l),this.importTicketDataToCOR(l,r,c,u,s)):null},async markImportFailed(l,r,c="Import failed"){if(p){const{error:u}=await _.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:c}).eq("change_order_id",r).eq("ticket_id",l);if(u)throw ee.error("database",{message:u.message,operation:"markImportFailed",extra:{ticketId:l,corId:r}}),u;ee.error("cor_import_failed",{ticket_id:l,cor_id:r,error:c})}},async getTicketsNeedingImport(l){if(p){const{data:r,error:c}=await _.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",l).eq("change_order_ticket_associations.import_status","failed");if(c)throw c;return r||[]}return[]},async getTicketImportStatus(l,r){if(p){const{data:c,error:u}=await _.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",l).eq("change_order_id",r).single();if(u&&u.code!=="PGRST116")throw u;return c}return null},async recalculateCOR(l){if(p){const{error:r}=await _.rpc("recalculate_cor_totals",{cor_id:l});if(r)throw r;return this.getCORById(l)}return null},async updateCORMarkupPercentages(l,r){if(p){const c={};r.labor!==void 0&&(c.labor_markup_percent=r.labor),r.materials!==void 0&&(c.materials_markup_percent=r.materials),r.equipment!==void 0&&(c.equipment_markup_percent=r.equipment),r.subcontractors!==void 0&&(c.subcontractors_markup_percent=r.subcontractors);const{data:u,error:s}=await _.from("change_orders").update(c).eq("id",l).select().single();if(s)throw s;return u}return null},async updateCORFeePercentages(l,r){if(p){const c={};r.liabilityInsurance!==void 0&&(c.liability_insurance_percent=r.liabilityInsurance),r.bond!==void 0&&(c.bond_percent=r.bond),r.licenseFee!==void 0&&(c.license_fee_percent=r.licenseFee);const{data:u,error:s}=await _.from("change_orders").update(c).eq("id",l).select().single();if(s)throw s;return u}return null},async submitCORForApproval(l){if(p){const{data:r,error:c}=await _.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",l).select().single();if(c)throw c;return r}return null},async approveCOR(l,r){if(p){const{data:c,error:u}=await _.from("change_orders").update({status:"approved",approved_by:r,approved_at:new Date().toISOString()}).eq("id",l).select().single();if(u)throw u;return c}return null},async rejectCOR(l,r=null){if(p){const{data:c,error:u}=await _.from("change_orders").update({status:"rejected",rejection_reason:r}).eq("id",l).select().single();if(u)throw u;return c}return null},async markCORAsBilled(l){if(p){const{data:r,error:c}=await _.from("change_orders").update({status:"billed"}).eq("id",l).select().single();if(c)throw c;return r}return null},async closeCOR(l){if(p){const{data:r,error:c}=await _.from("change_orders").update({status:"closed"}).eq("id",l).select().single();if(c)throw c;return r}return null},async saveCORSignature(l,r,c){if(p){const{data:u,error:s}=await _.from("change_orders").update({gc_signature_data:r,gc_signature_name:c,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",l).select().single();if(s)throw s;return u}return null},async getCORStats(l){if(p){const{data:r,error:c}=await _.from("change_orders").select("status, cor_total").eq("project_id",l);if(c)throw c;const u={total_cors:r.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return r.forEach(s=>{switch(s.status){case"draft":u.draft_count++;break;case"pending_approval":u.pending_count++,u.total_pending_value+=s.cor_total||0;break;case"approved":u.approved_count++,u.total_approved_value+=s.cor_total||0;break;case"rejected":u.rejected_count++;break;case"billed":case"closed":u.billed_count++,u.total_billed_value+=s.cor_total||0;break}}),u}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(l,r){return p?_.channel(`change_orders:${l}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${l}`},r).subscribe():null},subscribeToCorTickets(l,r){return p?_.channel(`cor-tickets:${l}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${l}`},r).subscribe():null},async getCORLog(l){if(p){const{data:r,error:c}=await _.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",l).order("log_number",{ascending:!0});if(c)throw console.error("Error fetching COR log:",c),c;return(r||[]).map(u=>({id:u.id,logNumber:u.log_number,dateSentToClient:u.date_sent_to_client,ceNumber:u.ce_number,comments:u.comments,createdAt:u.created_at,updatedAt:u.updated_at,changeOrder:{id:u.change_order?.id,corNumber:u.change_order?.cor_number,title:u.change_order?.title,corTotal:u.change_order?.cor_total,status:u.change_order?.status,createdAt:u.change_order?.created_at,approvedAt:u.change_order?.approved_at,approvedBy:u.change_order?.approved_by}}))}return[]},async updateCORLogEntry(l,r){if(p){const c={updated_at:new Date().toISOString()};r.dateSentToClient!==void 0&&(c.date_sent_to_client=r.dateSentToClient||null),r.ceNumber!==void 0&&(c.ce_number=r.ceNumber||null),r.comments!==void 0&&(c.comments=r.comments||null);const{data:u,error:s}=await _.from("cor_log_entries").update(c).eq("id",l).select().single();if(s)throw console.error("Error updating COR log entry:",s),s;return u}return null},async updateChangeOrderStatus(l,r){if(p){const{data:c,error:u}=await _.from("change_orders").update({status:r,updated_at:new Date().toISOString()}).eq("id",l).select().single();if(u)throw console.error("Error updating change order status:",u),u;return c}return null},subscribeToCORLog(l,r){return p?_.channel(`cor-log:${l}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${l}`},r).subscribe():null},async createSignatureRequest(l,r,c,u,s=null,d=null){if(p){const{data:h,error:g}=await _.rpc("generate_signature_token");if(g)throw g;const{data:w,error:z}=await _.from("signature_requests").insert({document_type:l,document_id:r,company_id:c,project_id:u,signature_token:h,expires_at:d,created_by:s}).select().single();if(z)throw z;return w}return null},async getSignatureRequestByToken(l){if(p){await _.rpc("increment_signature_view_count",{token:l});const{data:r,error:c}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",l).single();if(c)throw c;return r}return null},async getSignatureRequestsForDocument(l,r){if(p){const{data:c,error:u}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",l).eq("document_id",r).order("created_at",{ascending:!1});if(u)throw u;return c||[]}return[]},async addSignature(l,r,c){if(p){const{data:u,error:s}=await _.from("signatures").insert({signature_request_id:l,signature_slot:r,signature_image:c.signature,signer_name:c.signerName,signer_title:c.signerTitle||null,signer_company:c.signerCompany||null,signed_at:c.signedAt||new Date().toISOString(),ip_address:c.ipAddress||null,user_agent:c.userAgent||null}).select().single();if(s)throw s;return u}return null},async syncSignatureToDocument(l,r){if(!p)return null;const{document_type:c,document_id:u}=r,s=l.signature_slot,d={};s===1?(d.gc_signature_data=l.signature_image,d.gc_signature_name=l.signer_name,d.gc_signature_title=l.signer_title,d.gc_signature_company=l.signer_company,d.gc_signature_date=l.signed_at,d.gc_signature_ip=l.ip_address):s===2&&(d.client_signature_data=l.signature_image,d.client_signature_name=l.signer_name,d.client_signature_title=l.signer_title,d.client_signature_company=l.signer_company,d.client_signature_date=l.signed_at,d.client_signature_ip=l.ip_address);const h=c==="cor"?"change_orders":"t_and_m_tickets",{data:g,error:w}=await _.from(h).update(d).eq("id",u).select().single();if(w)throw w;return g},async revokeSignatureRequest(l){if(p){const{data:r,error:c}=await _.from("signature_requests").update({status:"revoked"}).eq("id",l).select().single();if(c)throw c;return r}return null},async getDocumentForSigning(l,r){if(!p)return null;if(l==="cor"){const{data:c,error:u}=await _.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",r).single();if(u)throw u;return c}else if(l==="tm_ticket"){const{data:c,error:u}=await _.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (*)
        `).eq("id",r).single();if(u)throw u;return c}return null},async getProjectCosts(l){if(p){const{data:c,error:u}=await _.from("project_costs").select("*").eq("project_id",l).order("cost_date",{ascending:!1});return u?(console.error("Error fetching project costs:",u),[]):c||[]}return(R().projectCosts||[]).filter(c=>c.project_id===l).sort((c,u)=>new Date(u.cost_date)-new Date(c.cost_date))},async addProjectCost(l,r,c){const u={project_id:l,company_id:r,category:c.category,description:c.description,amount:parseFloat(c.amount),cost_date:c.cost_date||new Date().toISOString().split("T")[0],notes:c.notes||null,created_by:c.created_by||null};if(p){const{data:h,error:g}=await _.from("project_costs").insert(u).select().single();if(g)throw console.error("Error adding project cost:",g),g;return h}const s=R();s.projectCosts||(s.projectCosts=[]);const d={...u,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s.projectCosts.push(d),I(s),d},async updateProjectCost(l,r){const c={category:r.category,description:r.description,amount:parseFloat(r.amount),cost_date:r.cost_date,notes:r.notes||null,updated_at:new Date().toISOString()};if(p){const{data:d,error:h}=await _.from("project_costs").update(c).eq("id",l).select().single();if(h)throw console.error("Error updating project cost:",h),h;return d}const u=R();if(!u.projectCosts)return null;const s=u.projectCosts.findIndex(d=>d.id===l);return s===-1?null:(u.projectCosts[s]={...u.projectCosts[s],...c},I(u),u.projectCosts[s])},async deleteProjectCost(l){if(p){const{error:c}=await _.from("project_costs").delete().eq("id",l);if(c)throw console.error("Error deleting project cost:",c),c;return!0}const r=R();return r.projectCosts&&(r.projectCosts=r.projectCosts.filter(c=>c.id!==l),I(r)),!0},async getProjectCostsSummary(l){const r=await this.getProjectCosts(l),c={};let u=0;return r.forEach(s=>{const d=parseFloat(s.amount)||0;u+=d,c[s.category]||(c[s.category]={category:s.category,total:0,count:0,items:[]}),c[s.category].total+=d,c[s.category].count++,c[s.category].items.push(s)}),Object.values(c).forEach(s=>{s.percentage=u>0?s.total/u*100:0}),{totalCost:u,byCategory:c,itemCount:r.length}},async getNextInvoiceNumber(l){if(p){const{data:r,error:c}=await _.rpc("get_next_invoice_number",{p_company_id:l});return c?(console.error("Error getting next invoice number:",c),this._generateLocalInvoiceNumber(l)):r}return this._generateLocalInvoiceNumber(l)},async _generateLocalInvoiceNumber(l){const c=(await this.getCompanyInvoices(l)).reduce((u,s)=>{const d=s.invoice_number?.match(/^INV-(\d+)$/);if(d){const h=parseInt(d[1],10);return h>u?h:u}return u},0);return`INV-${String(c+1).padStart(4,"0")}`},async getBillableItems(l){if(p){const{data:r,error:c}=await _.from("change_orders").select("id, cor_number, title, cor_total, status, approved_at").eq("project_id",l).eq("status","approved").order("cor_number",{ascending:!0});c&&console.error("Error fetching billable CORs:",c);const{data:u,error:s}=await _.from("t_and_m_tickets").select("id, work_date, ce_pco_number, change_order_value, status, client_signature_date").eq("project_id",l).eq("status","approved").not("client_signature_data","is",null).order("work_date",{ascending:!0});return s&&console.error("Error fetching billable T&M tickets:",s),{cors:r||[],tickets:u||[]}}return{cors:[],tickets:[]}},async getProjectInvoices(l){if(p){const{data:c,error:u}=await _.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("project_id",l).order("invoice_date",{ascending:!1});if(u)throw console.error("Error fetching project invoices:",u),u;return c||[]}return(R().invoices||[]).filter(c=>c.project_id===l)},async getCompanyInvoices(l){if(p){const{data:c,error:u}=await _.from("invoices").select("*").eq("company_id",l).order("invoice_date",{ascending:!1});if(u)throw console.error("Error fetching company invoices:",u),u;return c||[]}return(R().invoices||[]).filter(c=>c.company_id===l)},async createInvoice(l,r){if(p){const{data:s,error:d}=await _.from("invoices").insert({project_id:l.project_id,company_id:l.company_id,invoice_number:l.invoice_number,invoice_date:l.invoice_date,due_date:l.due_date,status:l.status||"draft",retention_percent:l.retention_percent||0,bill_to_name:l.bill_to_name,bill_to_address:l.bill_to_address,bill_to_contact:l.bill_to_contact,notes:l.notes,terms:l.terms||"Net 30",created_by:l.created_by}).select().single();if(d)throw console.error("Error creating invoice:",d),d;if(r&&r.length>0){const h=r.map((w,z)=>({invoice_id:s.id,item_type:w.item_type,reference_id:w.reference_id,reference_number:w.reference_number,description:w.description,amount:w.amount,sort_order:z})),{error:g}=await _.from("invoice_items").insert(h);if(g)throw console.error("Error creating invoice items:",g),await _.from("invoices").delete().eq("id",s.id),g}return this.getInvoice(s.id)}const c=R();c.invoices||(c.invoices=[]);const u={...l,id:jt(),created_at:new Date().toISOString(),invoice_items:r||[]};return c.invoices.push(u),I(c),u},async getInvoice(l){if(p){const{data:c,error:u}=await _.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",l).single();if(u)throw console.error("Error fetching invoice:",u),u;return c}return(R().invoices||[]).find(c=>c.id===l)},async updateInvoice(l,r){if(p){const{data:s,error:d}=await _.from("invoices").update(r).eq("id",l).select().single();if(d)throw console.error("Error updating invoice:",d),d;return s}const c=R(),u=(c.invoices||[]).findIndex(s=>s.id===l);return u>=0?(c.invoices[u]={...c.invoices[u],...r},I(c),c.invoices[u]):null},async markInvoiceSent(l){return this.updateInvoice(l,{status:"sent",sent_at:new Date().toISOString()})},async recordInvoicePayment(l,r){const c=await this.getInvoice(l);if(!c)throw new Error("Invoice not found");const u=(c.amount_paid||0)+r,s=u>=c.total;return this.updateInvoice(l,{amount_paid:u,status:s?"paid":"partial",paid_at:s?new Date().toISOString():null})},async deleteInvoice(l){if(p){const{error:c}=await _.from("invoices").delete().eq("id",l).eq("status","draft");if(c)throw console.error("Error deleting invoice:",c),c;return!0}const r=R();return r.invoices=(r.invoices||[]).filter(c=>c.id!==l),I(r),!0},async markItemsBilled(l=[],r=[]){if(p){if(l.length>0){const{error:c}=await _.from("change_orders").update({status:"billed"}).in("id",l);c&&console.error("Error marking CORs as billed:",c)}if(r.length>0){const{error:c}=await _.from("t_and_m_tickets").update({status:"billed"}).in("id",r);c&&console.error("Error marking T&M tickets as billed:",c)}}}},bp={async getCompanyEquipment(l,r=!0){if(!p)return console.warn("Supabase not configured"),[];let c=_.from("equipment").select("*").eq("company_id",l).order("name");r&&(c=c.eq("is_active",!0));const{data:u,error:s}=await c;return s?(console.error("Error fetching company equipment:",s),[]):u||[]},async createEquipment(l){if(!p)return console.warn("Supabase not configured"),null;const{data:r,error:c}=await _.from("equipment").insert(l).select().single();if(c)throw console.error("Error creating equipment:",c),c;return r},async updateEquipment(l,r){if(!p)return console.warn("Supabase not configured"),null;const{data:c,error:u}=await _.from("equipment").update(r).eq("id",l).select().single();if(u)throw console.error("Error updating equipment:",u),u;return c},async deactivateEquipment(l){return this.updateEquipment(l,{is_active:!1})},async getProjectEquipment(l){if(!p)return console.warn("Supabase not configured"),[];const{data:r,error:c}=await _.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",l).order("start_date",{ascending:!1});return c?(console.error("Error fetching project equipment:",c),[]):r||[]},async getActiveProjectEquipment(l){if(!p)return console.warn("Supabase not configured"),[];const{data:r,error:c}=await _.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",l).is("end_date",null).order("start_date",{ascending:!1});return c?(console.error("Error fetching active project equipment:",c),[]):r||[]},async addEquipmentToProject(l){if(!p)return console.warn("Supabase not configured"),null;const{data:r,error:c}=await _.from("project_equipment").insert(l).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(c)throw console.error("Error adding equipment to project:",c),c;return r},async updateProjectEquipment(l,r){if(!p)return console.warn("Supabase not configured"),null;const{data:c,error:u}=await _.from("project_equipment").update(r).eq("id",l).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(u)throw console.error("Error updating project equipment:",u),u;return c},async markEquipmentReturned(l,r=null){return this.updateProjectEquipment(l,{end_date:r||new Date().toISOString().split("T")[0]})},async removeEquipmentFromProject(l){if(!p)return console.warn("Supabase not configured"),!1;const{error:r}=await _.from("project_equipment").delete().eq("id",l);if(r)throw console.error("Error removing project equipment:",r),r;return!0},calculateProjectEquipmentCost(l){const r=new Date;return r.setHours(0,0,0,0),l.reduce((c,u)=>{const s=new Date(u.start_date);s.setHours(0,0,0,0);let d;u.end_date?(d=new Date(u.end_date),d.setHours(0,0,0,0)):d=r;const h=Math.max(1,Math.floor((d-s)/(1e3*60*60*24))+1);return c+u.daily_rate*h},0)},calculateDaysOnSite(l,r=null){const c=new Date(l);c.setHours(0,0,0,0);let u;return r?u=new Date(r):u=new Date,u.setHours(0,0,0,0),Math.max(1,Math.floor((u-c)/(1e3*60*60*24))+1)}};$u(async l=>{if(l&&p)try{await wm(at)}catch(r){console.error("Error syncing pending actions:",r)}});const Ip=Object.freeze(Object.defineProperty({__proto__:null,auth:Ku,clearFieldSession:Em,db:at,equipmentOps:bp,getConnectionStatus:Ht,getPendingActionCount:gi,isSupabaseConfigured:p,onConnectionChange:$u,supabase:_,syncPendingActions:wm},Symbol.toStringTag,{value:"Module"})),Tm=B.createContext(),qt={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function cn({children:l,companyId:r}){const[c,u]=B.useState(qt),[s,d]=B.useState(!0);B.useEffect(()=>{r?h(r):g()},[r]),B.useEffect(()=>{U(c)},[c]);const h=async Z=>{try{if(d(!0),!p){u(qt),d(!1);return}const{data:V,error:H}=await _.from("company_branding").select("*").eq("company_id",Z).single();H?(H.code==="PGRST116"?await w(Z):console.error("Error loading branding:",H),u(qt)):u({...qt,...V})}catch(V){console.error("Error in loadBranding:",V),u(qt)}finally{d(!1)}},g=async()=>{try{d(!0);const Z=window.location.hostname;if(Z==="localhost"||Z==="127.0.0.1"){u(qt),d(!1);return}if(!p){u(qt),d(!1);return}const{data:V,error:H}=await _.rpc("get_branding_by_domain",{domain_name:Z});H||!V||V.length===0?u(qt):u({...qt,...V[0]})}catch(Z){console.error("Error loading branding by domain:",Z),u(qt)}finally{d(!1)}},w=async Z=>{try{const{data:V,error:H}=await _.from("company_branding").insert({company_id:Z,...qt}).select().single();H&&console.error("Error creating default branding:",H)}catch(V){console.error("Error in createDefaultBranding:",V)}},z=async Z=>{try{if(!p)return u(J=>({...J,...Z})),{success:!0};if(!r)return{success:!1,error:"No company ID"};const V={},H=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const J of H)Z[J]!==void 0&&(V[J]=Z[J]);const{data:ie,error:_e}=await _.from("company_branding").select("id").eq("company_id",r).single();if(_e&&_e.code==="PGRST116"){const{data:J,error:je}=await _.from("company_branding").insert({company_id:r,...V}).select().single();return je?(console.error("Error creating branding:",je),{success:!1,error:je.message}):(u({...qt,...J}),{success:!0,data:J})}const{data:he,error:$}=await _.from("company_branding").update(V).eq("company_id",r).select().single();return $?(console.error("Error updating branding:",$),{success:!1,error:$.message}):(u({...qt,...he}),{success:!0,data:he})}catch(V){return console.error("Error in updateBranding:",V),{success:!1,error:V.message}}},U=Z=>{const V=document.documentElement;if(V.style.setProperty("--primary-color",Z.primary_color),V.style.setProperty("--secondary-color",Z.secondary_color),Z.favicon_url){let H=document.querySelector("link[rel*='icon']");H||(H=document.createElement("link"),H.rel="icon",document.head.appendChild(H)),H.href=Z.favicon_url}document.title=Z.custom_app_name||"FieldSync"},G={branding:c,loading:s,updateBranding:z,uploadBrandingImage:async(Z,V)=>{try{if(!p)return{success:!0,url:URL.createObjectURL(Z)};const H=Z.name.split(".").pop(),_e=`branding/${`${r}/${V}-${Date.now()}.${H}`}`,{data:he,error:$}=await _.storage.from("public").upload(_e,Z,{cacheControl:"3600",upsert:!0});if($)return console.error("Error uploading image:",$),{success:!1,error:$.message};const{data:{publicUrl:J}}=_.storage.from("public").getPublicUrl(_e);return{success:!0,url:J}}catch(H){return console.error("Error in uploadBrandingImage:",H),{success:!1,error:H.message}}},refreshBranding:()=>r?h(r):g()};return v.jsx(Tm.Provider,{value:G,children:l})}function Sp(){const l=B.useContext(Tm);if(!l)throw new Error("useBranding must be used within a BrandingProvider");return l}const Dm=B.createContext();function un({children:l}){const[r,c]=B.useState(()=>{const s=localStorage.getItem("fieldsync-theme");return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});B.useEffect(()=>{document.documentElement.setAttribute("data-theme",r),localStorage.setItem("fieldsync-theme",r)},[r]),B.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: light)"),d=h=>{localStorage.getItem("fieldsync-theme")||c(h.matches?"light":"dark")};return s.addEventListener("change",d),()=>s.removeEventListener("change",d)},[]);const u=()=>{c(s=>s==="dark"?"light":"dark")};return v.jsx(Dm.Provider,{value:{theme:r,setTheme:c,toggleTheme:u},children:l})}function wp(){const l=B.useContext(Dm);if(!l)throw new Error("useTheme must be used within a ThemeProvider");return l}const jp=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ep=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,c,u)=>u?u.toUpperCase():c.toLowerCase()),mm=l=>{const r=Ep(l);return r.charAt(0).toUpperCase()+r.slice(1)},Am=(...l)=>l.filter((r,c,u)=>!!r&&r.trim()!==""&&u.indexOf(r)===c).join(" ").trim(),qp=l=>{for(const r in l)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var Tp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Dp=B.forwardRef(({color:l="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:s="",children:d,iconNode:h,...g},w)=>B.createElement("svg",{ref:w,...Tp,width:r,height:r,stroke:l,strokeWidth:u?Number(c)*24/Number(r):c,className:Am("lucide",s),...!d&&!qp(g)&&{"aria-hidden":"true"},...g},[...h.map(([z,U])=>B.createElement(z,U)),...Array.isArray(d)?d:[d]]));const $l=(l,r)=>{const c=B.forwardRef(({className:u,...s},d)=>B.createElement(Dp,{ref:d,iconNode:r,className:Am(`lucide-${jp(mm(l))}`,`lucide-${l}`,u),...s}));return c.displayName=mm(l),c};const Ap=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Cp=$l("briefcase",Ap);const Op=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],Mp=$l("hard-hat",Op);const zp=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Np=$l("moon",zp);const xp=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Rp=$l("sun",xp);const Up=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bp=$l("triangle-alert",Up);function Qt({className:l="",showPoweredBy:r=!1}){const{branding:c}=Sp();return v.jsxs("div",{className:`app-logo ${l}`,children:[c.logo_url?v.jsx("img",{src:c.logo_url,alt:c.custom_app_name||"Logo",className:"custom-logo"}):v.jsxs("div",{className:"logo",children:[c.custom_app_name||"Field",v.jsx("span",{children:"Sync"})]}),r&&!c.hide_fieldsync_branding&&v.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function Hp({onForemanAccess:l,onOfficeLogin:r,onShowToast:c}){const[u,s]=B.useState(null),[d,h]=B.useState(""),[g,w]=B.useState(null),[z,U]=B.useState(""),[N,G]=B.useState(!1),[Z,V]=B.useState(""),[H,ie]=B.useState(""),[_e,he]=B.useState(1),[$,J]=B.useState(null),[je,Ye]=B.useState(""),[Pe,Ie]=B.useState(""),[st,Wt]=B.useState(""),[ft,Ge]=B.useState(""),$t=M=>{const P=M.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);h(P)},Xt=async()=>{if(d.length<2){c("Enter company code","error");return}G(!0);try{const M=await at.getCompanyByCode(d);M?w(M):(c("Invalid company code","error"),h(""))}catch{c("Error checking code","error")}finally{G(!1)}},dt=async M=>{if(M.length===4){G(!0);try{const P=await at.getProjectByPinSecure(M,g.code);if(P.rateLimited){c("Too many attempts. Please wait 15 minutes.","error"),U("");return}P.success&&P.project?l(P.project):(c("Invalid PIN","error"),U(""))}catch{c("Error checking PIN","error")}finally{G(!1)}}},A=M=>{if(z.length<4){const P=z+M;U(P),P.length===4&&setTimeout(()=>dt(P),200)}},x=()=>{U(M=>M.slice(0,-1))},k=()=>{w(null),U("")},se=()=>{if(!Z.trim()||!H.trim()){c("Enter email and password","error");return}r(Z,H)},fe=async()=>{if(d.length<2){c("Enter company code","error");return}G(!0);try{const M=await at.getCompanyByCode(d);M?(J(M),he(2)):(c("Invalid company code","error"),h(""))}catch{c("Error checking code","error")}finally{G(!1)}},Ne=async()=>{if(!je.trim()){c("Enter office code","error");return}G(!0);try{const{data:M,error:P}=await _.rpc("verify_office_code",{company_id:$.id,code:je.trim()});if(P)throw P;M===!0?he(3):(c("Invalid office code","error"),Ye(""))}catch{c("Error verifying code","error")}finally{G(!1)}},ye=async()=>{if(!Pe.trim()){c("Enter your name","error");return}if(!st.trim()||!st.includes("@")){c("Enter valid email","error");return}if(ft.length<6){c("Password must be 6+ characters","error");return}G(!0);try{const M=st.toLowerCase().trim(),{data:P,error:He}=await _.auth.signUp({email:M,password:ft});let Q;if(He?.message?.includes("already registered")||P?.user&&P.user.identities?.length===0){const{data:Te,error:Ae}=await _.auth.signInWithPassword({email:M,password:ft});if(Ae){c("Account exists with different password. Use your existing password.","error"),G(!1);return}Q=Te.user.id;const{data:Ve}=await _.from("user_companies").select("id, status").eq("user_id",Q).eq("company_id",$.id).maybeSingle();if(Ve){Ve.status==="active"?(c("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):Ve.status==="pending"?(c("Your request is still pending approval.","error"),await _.auth.signOut()):(c("Your membership was removed. Contact the company admin.","error"),await _.auth.signOut());return}const{error:et}=await _.from("user_companies").insert({user_id:Q,company_id:$.id,role:"member",status:"pending"});if(et)throw console.error("Error adding to user_companies:",et),await _.auth.signOut(),new Error("Failed to submit join request");await _.auth.signOut(),c("Request to join submitted! Awaiting admin approval.","success")}else{if(He)throw He;{if(Q=P.user?.id,!Q)throw new Error("Failed to create user");const{error:Te}=await _.from("users").insert({id:Q,email:M,password_hash:"managed_by_supabase_auth",name:Pe.trim(),company_id:$.id,role:"member",is_active:!0});if(Te)throw Te;const{error:Ae}=await _.from("user_companies").insert({user_id:Q,company_id:$.id,role:"member",status:"pending"});if(Ae)throw console.error("Error adding to user_companies:",Ae),new Error("Failed to submit join request");await _.auth.signOut(),c("Account created! Awaiting admin approval.","success")}}}catch(M){console.error("Join error:",M),c(M.message||"Error creating account","error")}finally{G(!1)}};if(u===null)return v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsxs("div",{className:"entry-buttons",children:[v.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>s("foreman"),children:[v.jsx("span",{className:"entry-mode-icon",children:v.jsx(Mp,{size:32})}),v.jsx("span",{className:"entry-mode-title",children:"Foreman"}),v.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),v.jsxs("button",{className:"entry-mode-btn office",onClick:()=>s("office"),children:[v.jsx("span",{className:"entry-mode-icon",children:v.jsx(Cp,{size:32})}),v.jsx("span",{className:"entry-mode-title",children:"Office"}),v.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(u==="foreman")return g?v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:k,children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("div",{className:"entry-company-badge",children:g.name}),v.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),v.jsx("div",{className:"pin-display",children:[0,1,2,3].map(M=>v.jsx("div",{className:`pin-dot ${z.length>M?"filled":""}`,children:z.length>M?"":""},M))}),v.jsxs("div",{className:"number-pad",children:[[1,2,3,4,5,6,7,8,9].map(M=>v.jsx("button",{className:"num-btn",onClick:()=>A(M.toString()),disabled:N,children:M},M)),v.jsx("button",{className:"num-btn empty",disabled:!0}),v.jsx("button",{className:"num-btn",onClick:()=>A("0"),disabled:N,children:"0"}),v.jsx("button",{className:"num-btn backspace",onClick:x,disabled:N||z.length===0,children:""})]}),N&&v.jsx("div",{className:"entry-loading",children:v.jsx("div",{className:"spinner"})})]})}):v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>s(null),children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),v.jsxs("div",{className:"entry-input-group",children:[v.jsx("input",{type:"text",value:d,onChange:M=>$t(M.target.value),placeholder:"Company Code",disabled:N,autoFocus:!0,onKeyDown:M=>{M.key==="Enter"&&Xt()}}),v.jsx("button",{className:"entry-submit-btn",onClick:Xt,disabled:N||d.length<2,children:N?"...":""})]})]})});if(u==="office")return v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>s(null),children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),v.jsxs("div",{className:"entry-form",children:[v.jsx("input",{type:"email",value:Z,onChange:M=>V(M.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:M=>{M.key==="Enter"&&se()}}),v.jsx("input",{type:"password",value:H,onChange:M=>ie(M.target.value),placeholder:"Password",onKeyDown:M=>{M.key==="Enter"&&se()}}),v.jsx("button",{className:"entry-login-btn",onClick:se,children:"Sign In"})]}),v.jsxs("div",{className:"entry-signup-hint",children:[v.jsx("p",{children:"New employee?"}),v.jsx("button",{className:"entry-join-link",onClick:()=>s("join"),children:"Join your company"})]})]})});if(u==="join")return _e===1?v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>s("office"),children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),v.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),v.jsxs("div",{className:"entry-input-group",children:[v.jsx("input",{type:"text",value:d,onChange:M=>$t(M.target.value),placeholder:"Company Code",disabled:N,autoFocus:!0,onKeyDown:M=>{M.key==="Enter"&&fe()}}),v.jsx("button",{className:"entry-submit-btn",onClick:fe,disabled:N||d.length<2,children:N?"...":""})]})]})}):_e===2?v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>{he(1),J(null),Ye("")},children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("div",{className:"entry-company-badge",children:$?.name}),v.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),v.jsx("p",{className:"entry-hint",children:"This code is only for office staff"}),v.jsxs("div",{className:"entry-input-group",children:[v.jsx("input",{type:"password",value:je,onChange:M=>Ye(M.target.value),placeholder:"Office Code",disabled:N,autoFocus:!0,onKeyDown:M=>{M.key==="Enter"&&Ne()}}),v.jsx("button",{className:"entry-submit-btn",onClick:Ne,disabled:N||!je.trim(),children:N?"...":""})]})]})}):v.jsx("div",{className:"entry-container",children:v.jsxs("div",{className:"entry-card",children:[v.jsx("button",{className:"entry-back",onClick:()=>{he(2),Ye("")},children:""}),v.jsx(Qt,{className:"entry-logo",showPoweredBy:!1}),v.jsx("div",{className:"entry-company-badge",children:$?.name}),v.jsx("p",{className:"entry-subtitle",children:"Create your account"}),v.jsxs("div",{className:"entry-form",children:[v.jsx("input",{type:"text",value:Pe,onChange:M=>Ie(M.target.value),placeholder:"Your Name",autoFocus:!0}),v.jsx("input",{type:"email",value:st,onChange:M=>Wt(M.target.value),placeholder:"Email"}),v.jsx("input",{type:"password",value:ft,onChange:M=>Ge(M.target.value),placeholder:"Password (6+ characters)",onKeyDown:M=>{M.key==="Enter"&&ye()}}),v.jsx("button",{className:"entry-login-btn",onClick:ye,disabled:N,children:N?"Creating...":"Join Company"})]}),v.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})})}function Fn({message:l,type:r="",onClose:c}){return B.useEffect(()=>{const u=setTimeout(c,3e3);return()=>clearTimeout(u)},[c]),v.jsx("div",{className:"toast-container",children:v.jsx("div",{className:`toast ${r}`,children:l})})}function kp({compact:l=!1}){const{theme:r,toggleTheme:c}=wp();return v.jsx("button",{className:`theme-toggle ${l?"theme-toggle-compact":""}`,onClick:c,title:`Switch to ${r==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${r==="dark"?"light":"dark"} mode`,children:r==="dark"?v.jsxs(v.Fragment,{children:[v.jsx(Rp,{size:l?18:16}),!l&&v.jsx("span",{children:"Light"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Np,{size:l?18:16}),!l&&v.jsx("span",{children:"Dark"})]})})}class Pn extends B.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,c){this.setState({error:r,errorInfo:c}),console.error("ErrorBoundary caught an error:",r,c)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?v.jsx("div",{className:"error-boundary",children:v.jsxs("div",{className:"error-boundary-content",children:[v.jsx("div",{className:"error-icon",children:v.jsx(Bp,{size:48})}),v.jsx("h2",{children:"Something went wrong"}),v.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),v.jsxs("div",{className:"error-actions",children:[v.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),v.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function _m(){const[l,r]=B.useState(Ht()),[c,u]=B.useState(0),[s,d]=B.useState(!1),[h,g]=B.useState(!1);return B.useEffect(()=>{const w=$u(async U=>{r(U),U&&h&&(d(!0),setTimeout(()=>d(!1),3e3)),U||g(!0);const N=await gi();u(N)});gi().then(u);const z=setInterval(async()=>{if(!Ht()){const U=await gi();u(U)}},5e3);return()=>{w(),clearInterval(z)}},[h]),l&&c===0&&!s?null:v.jsxs("div",{className:`offline-indicator ${l?"online":"offline"} ${s?"synced":""}`,children:[v.jsx("div",{className:"offline-indicator-content",children:l?s?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"online-icon",children:v.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:v.jsx("polyline",{points:"20 6 9 17 4 12"})})}),v.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):c>0?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"syncing-icon",children:v.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("polyline",{points:"23 4 23 10 17 10"}),v.jsx("polyline",{points:"1 20 1 14 7 14"}),v.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),v.jsxs("span",{className:"offline-text",children:["Syncing ",c,"..."]})]}):null:v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"offline-icon",children:v.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[v.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),v.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),v.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),v.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),v.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),v.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),v.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),v.jsxs("span",{className:"offline-text",children:["Offline",c>0&&v.jsxs("span",{className:"pending-badge",children:[c," pending"]})]})]})}),v.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}const Lp=B.lazy(()=>Ya(()=>import("./ForemanView-BX6fSioS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Yp=B.lazy(()=>Ya(()=>import("./Dashboard-nrWs3bja.js"),__vite__mapDeps([10,1,2,3,4,11,12,7,13,8,14,6,15,16,9]))),Gp=B.lazy(()=>Ya(()=>import("./Setup-BZyKabFb.js"),__vite__mapDeps([17,13,7,8,9]))),Qp=B.lazy(()=>Ya(()=>import("./BrandingSettings-BQ_UfdQ2.js"),__vite__mapDeps([18,7,8,9]))),Xp=B.lazy(()=>Ya(()=>import("./PricingManager-sgAJO4_t.js"),__vite__mapDeps([19,4,2,6,15,12,7,8,9]))),Zp=B.lazy(()=>Ya(()=>import("./PublicView-DrhoyZAY.js"),__vite__mapDeps([20,7,8,9]))),Vp=B.lazy(()=>Ya(()=>import("./SignaturePage-DNwiwgzn.js"),__vite__mapDeps([21,14,8,3,2,11,6,15,7,9]))),Kp=B.lazy(()=>Ya(()=>import("./MembershipManager-DJ1m3DSF.js"),__vite__mapDeps([22,11,5,6,16,7,8,9])));function pi(){return v.jsxs("div",{className:"page-loader",children:[v.jsx(Qt,{className:"loading-logo"}),v.jsx("div",{className:"spinner"})]})}function Jp(){const[l,r]=B.useState("entry"),[c,u]=B.useState(null),[s,d]=B.useState(null),[h,g]=B.useState([]),[w,z]=B.useState([]),[U,N]=B.useState(null),[G,Z]=B.useState(null),[V,H]=B.useState(null),[ie,_e]=B.useState(!0),[he,$]=B.useState("dashboard"),[J,je]=B.useState(null),[Ye,Pe]=B.useState(!1),[Ie,st]=B.useState(null),[Wt,ft]=B.useState(0);B.useEffect(()=>{const Q=window.location.pathname,de=Q.match(/^\/view\/([a-zA-Z0-9_-]+)$/),Te=Q.match(/^\/sign\/([a-zA-Z0-9_-]+)$/);de?(Z(de[1]),r("public"),_e(!1)):Te?(H(Te[1]),r("signature"),_e(!1)):Ge()},[]),B.useEffect(()=>{if(!p)return;const{data:{subscription:Q}}=_.auth.onAuthStateChange(async(de,Te)=>{de==="SIGNED_OUT"||de==="USER_DELETED"?(u(null),d(null),g([]),r("entry")):de==="TOKEN_REFRESHED"||de==="SIGNED_IN"&&!c&&Ge()});return()=>{Q?.unsubscribe()}},[c]);const Ge=async()=>{try{const{data:{user:Q}}=await _.auth.getUser();if(!Q){_e(!1);return}const{data:de,error:Te}=await _.from("users").select("*").eq("id",Q.id).single();if(de){u(de);let Ae=await at.getUserCompanies(Q.id);if(Ae.length===0&&de.company_id&&await at.repairLegacyUser(Q.id,de.company_id,de.role||"member")&&(Ae=await at.getUserCompanies(Q.id)),g(Ae),Ae.length===0){if(await at.getUserPendingMemberships(Q.id)>0){r("pending");return}k("No company access. Join a company to continue.","error"),await Ku.signOut();return}const Ve=localStorage.getItem("selectedCompanyId");let et=null;if(Ve&&Ae.find(ke=>ke.id===Ve)?et=Ae.find(ke=>ke.id===Ve):Ae.length>0&&(et=Ae[0]),et){const{data:ke}=await _.from("companies").select("*").eq("id",et.id).single();d(ke),r("office")}}}catch(Q){console.error("Auth check error:",Q)}finally{_e(!1)}},$t=Q=>{N(Q),r("foreman")},Xt=async(Q,de)=>{try{const{data:Te,error:Ae}=await _.auth.signInWithPassword({email:Q,password:de});if(Ae){k(Ae.message||"Invalid credentials","error");return}const{data:Ve,error:et}=await _.from("users").select("*").eq("id",Te.user.id).single();if(et){console.error("User fetch error:",et),k("Error loading profile","error");return}if(Ve){u(Ve);let ke=await at.getUserCompanies(Te.user.id);ke.length===0&&Ve.company_id&&await at.repairLegacyUser(Te.user.id,Ve.company_id,Ve.role||"member")&&(ke=await at.getUserCompanies(Te.user.id)),g(ke);const fn=localStorage.getItem("selectedCompanyId");let Tt=null;if(fn&&ke.find(kt=>kt.id===fn)?Tt=ke.find(kt=>kt.id===fn):ke.length>0&&(Tt=ke[0]),Tt){const{data:kt}=await _.from("companies").select("*").eq("id",Tt.id).single();d(kt),r("office")}else await at.getUserPendingMemberships(Te.user.id)>0?r("pending"):k("No company access. Please contact admin.","error")}else k("Profile not found. Please contact admin.","error")}catch(Te){console.error("Login error:",Te),k("Login failed","error")}},dt=async Q=>{try{const{data:de}=await _.from("companies").select("*").eq("id",Q).single();de&&(d(de),localStorage.setItem("selectedCompanyId",Q),Pe(!1),$("dashboard"),k(`Switched to ${de.name}`,"success"))}catch(de){console.error("Switch company error:",de),k("Error switching company","error")}},A=async()=>{try{await Ku.signOut(),u(null),d(null),g([]),r("entry"),$("dashboard"),localStorage.removeItem("selectedCompanyId")}catch(Q){console.error("Logout error:",Q),k("Error signing out","error")}},x=async()=>{await Em(),N(null),r("entry")},k=(Q,de="")=>{je({message:Q,type:de})},se=()=>{$("dashboard"),s?.id&&fe()},fe=async()=>{if(s?.id)try{const Q=await at.getProjects(s.id);z(Q)}catch(Q){console.error("Error loading projects:",Q)}};B.useEffect(()=>{s?.id&&l==="office"&&(fe(),Ne())},[s?.id,l]);const Ne=async()=>{if(s?.id)try{const de=(await at.getCompanyMemberships(s.id)).filter(Te=>Te.status==="pending").length;ft(de)}catch(Q){console.error("Error loading pending count:",Q)}},ye=()=>{st(null)};if(ie)return v.jsx(un,{children:v.jsx(cn,{companyId:s?.id,children:v.jsxs("div",{className:"loading-screen",children:[v.jsx(Qt,{className:"loading-logo"}),v.jsx("div",{className:"spinner"})]})})});if(l==="entry")return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsx(Hp,{onForemanAccess:$t,onOfficeLogin:Xt,onShowToast:k})}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(l==="public"&&G)return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsx(B.Suspense,{fallback:v.jsx(pi,{}),children:v.jsx(Zp,{shareToken:G})})}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(l==="signature"&&V)return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsx(B.Suspense,{fallback:v.jsx(pi,{}),children:v.jsx(Vp,{signatureToken:V})})}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(l==="pending")return v.jsx(un,{children:v.jsxs(cn,{children:[v.jsx(Pn,{children:v.jsxs("div",{className:"pending-approval-screen",children:[v.jsx(Qt,{className:"pending-logo"}),v.jsx("h2",{children:"Awaiting Approval"}),v.jsx("p",{children:"Your membership request has been submitted."}),v.jsx("p",{children:"A company admin will review your request."}),v.jsxs("div",{className:"pending-actions",children:[v.jsx("button",{className:"btn btn-secondary",onClick:A,children:"Sign Out"}),v.jsx("button",{className:"btn btn-primary",onClick:Ge,children:"Check Status"})]})]})}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});if(l==="foreman"&&U)return v.jsx(un,{children:v.jsxs(cn,{companyId:U.company_id,children:[v.jsx(Pn,{children:v.jsx(B.Suspense,{fallback:v.jsx(pi,{}),children:v.jsx(Lp,{project:U,companyId:U.company_id,onShowToast:k,onExit:x})})}),v.jsx(_m,{}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})});const He=h.find(Q=>Q.id===s?.id)?.access_level==="administrator"||s?.owner_user_id===c?.id;return v.jsx(un,{children:v.jsx(cn,{companyId:s?.id,children:v.jsxs("div",{children:[!p&&v.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),v.jsx("nav",{className:"nav",children:v.jsxs("div",{className:"nav-content",children:[v.jsx(Qt,{}),v.jsxs("div",{className:"nav-tabs",children:[v.jsx("button",{className:`nav-tab ${he==="dashboard"?"active":""}`,onClick:()=>$("dashboard"),children:"Dashboard"}),v.jsx("button",{className:`nav-tab ${he==="setup"?"active":""}`,onClick:()=>$("setup"),children:"+ New Project"}),v.jsx("button",{className:`nav-tab ${he==="pricing"?"active":""}`,onClick:()=>$("pricing"),children:"Pricing"}),He&&v.jsx("button",{className:`nav-tab ${he==="branding"?"active":""}`,onClick:()=>$("branding"),children:"Branding"}),He&&v.jsxs("button",{className:`nav-tab ${he==="team"?"active":""}`,onClick:()=>$("team"),children:["Team",Wt>0&&v.jsx("span",{className:"nav-tab-badge",children:Wt})]})]}),v.jsxs("div",{className:"nav-user",children:[v.jsx(kp,{compact:!0}),h.length>1&&v.jsxs("div",{className:"company-switcher",children:[v.jsxs("button",{className:"company-switcher-btn",onClick:()=>Pe(!Ye),children:[s?.name||"Select Company",v.jsx("span",{className:"switcher-arrow",children:""})]}),Ye&&v.jsx("div",{className:"company-dropdown",children:h.map(Q=>v.jsxs("button",{className:`company-option ${Q.id===s?.id?"active":""}`,onClick:()=>dt(Q.id),children:[Q.name,Q.id===s?.id&&v.jsx("span",{className:"check",children:""})]},Q.id))})]}),h.length<=1&&s&&v.jsx("span",{className:"nav-company-name",children:s.name}),v.jsx("span",{className:"nav-user-name",children:c?.name||c?.email}),v.jsx("button",{className:"nav-logout",onClick:A,children:"Sign Out"})]})]})}),v.jsx(Pn,{children:v.jsx(B.Suspense,{fallback:v.jsx(pi,{}),children:v.jsxs("div",{className:"container",children:[he==="dashboard"&&v.jsx(Yp,{company:s,user:c,isAdmin:He,onShowToast:k,navigateToProjectId:Ie,onProjectNavigated:ye}),he==="setup"&&v.jsx(Gp,{company:s,user:c,onProjectCreated:se,onShowToast:k}),he==="pricing"&&v.jsx(Xp,{company:s,onShowToast:k}),he==="branding"&&v.jsx(Qp,{company:s,onShowToast:k}),he==="team"&&He&&v.jsx(Kp,{company:s,user:c,onShowToast:k})]},s?.id)})}),v.jsx(_m,{}),J&&v.jsx(Fn,{message:J.message,type:J.type,onClose:()=>je(null)})]})})})}cp.createRoot(document.getElementById("root")).render(v.jsx(ym.StrictMode,{children:v.jsx(Jp,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(l=>{setInterval(()=>{l.update().catch(()=>{})},3e5)}).catch(()=>{})});export{Cp as B,Mp as H,Qt as L,Pp as R,Bp as T,kp as a,Fn as b,$l as c,at as d,bp as e,Ip as f,p as i,v as j,ee as o,B as r,_ as s,Sp as u};
