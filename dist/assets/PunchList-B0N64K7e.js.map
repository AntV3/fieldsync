{"version":3,"file":"PunchList-B0N64K7e.js","sources":["../../src/components/PunchList.jsx"],"sourcesContent":["import { useState, useEffect, useCallback, useMemo } from 'react'\nimport { CheckCircle2, Circle, Clock, Plus, X, MapPin, User, Filter, Trash2, Edit3, Save } from 'lucide-react'\nimport { supabase, isSupabaseConfigured, getSupabaseClient } from '../lib/supabase'\n\nconst PRIORITY_OPTIONS = [\n  { value: 'high', label: 'High', color: '#ef4444' },\n  { value: 'medium', label: 'Medium', color: '#f59e0b' },\n  { value: 'low', label: 'Low', color: '#6b7280' }\n]\n\nconst STATUS_OPTIONS = [\n  { value: 'open', label: 'Open', icon: Circle, color: '#ef4444' },\n  { value: 'in_progress', label: 'In Progress', icon: Clock, color: '#f59e0b' },\n  { value: 'complete', label: 'Complete', icon: CheckCircle2, color: '#10b981' }\n]\n\n/**\n * PunchList - Tracks deficiency items that need resolution before project closeout.\n * Items are linked to work areas and can include photos, assignees, and priorities.\n */\nexport default function PunchList({ projectId, areas = [], companyId, onShowToast }) {\n  const [items, setItems] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [showForm, setShowForm] = useState(false)\n  const [editingItem, setEditingItem] = useState(null)\n  const [filterStatus, setFilterStatus] = useState('all')\n  const [filterArea, setFilterArea] = useState('all')\n  const [saving, setSaving] = useState(false)\n  const [formData, setFormData] = useState({\n    description: '',\n    area_id: '',\n    assigned_to: '',\n    priority: 'medium',\n    notes: '',\n    photo_url: ''\n  })\n\n  const loadItems = useCallback(async () => {\n    if (!projectId || !isSupabaseConfigured) {\n      setLoading(false)\n      return\n    }\n\n    try {\n      const client = getSupabaseClient()\n      const { data, error } = await client\n        .from('punch_list_items')\n        .select('*')\n        .eq('project_id', projectId)\n        .order('created_at', { ascending: false })\n\n      if (error) throw error\n      setItems(data || [])\n    } catch (err) {\n      console.error('Error loading punch list:', err)\n      // Table might not exist yet - that's OK\n      setItems([])\n    } finally {\n      setLoading(false)\n    }\n  }, [projectId])\n\n  useEffect(() => {\n    loadItems()\n  }, [loadItems])\n\n  // Subscribe to real-time updates\n  useEffect(() => {\n    if (!projectId || !isSupabaseConfigured) return\n\n    // Use base supabase client for realtime channel (WebSocket does not carry\n    // custom headers, so use the anon client; RLS on the anon role allows\n    // field users to receive events via the field-session policies we added)\n    const channel = supabase\n      .channel(`punch_list:${projectId}`)\n      .on('postgres_changes',\n        { event: '*', schema: 'public', table: 'punch_list_items', filter: `project_id=eq.${projectId}` },\n        () => loadItems()\n      )\n      .subscribe()\n\n    return () => { supabase.removeChannel(channel) }\n  }, [projectId, loadItems])\n\n  const filteredItems = useMemo(() => {\n    return items.filter(item => {\n      if (filterStatus !== 'all' && item.status !== filterStatus) return false\n      if (filterArea !== 'all' && item.area_id !== filterArea) return false\n      return true\n    })\n  }, [items, filterStatus, filterArea])\n\n  const stats = useMemo(() => {\n    const open = items.filter(i => i.status === 'open').length\n    const inProgress = items.filter(i => i.status === 'in_progress').length\n    const complete = items.filter(i => i.status === 'complete').length\n    return { open, inProgress, complete, total: items.length }\n  }, [items])\n\n  const resetForm = () => {\n    setFormData({ description: '', area_id: '', assigned_to: '', priority: 'medium', notes: '', photo_url: '' })\n    setEditingItem(null)\n    setShowForm(false)\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n\n    if (!formData.description.trim()) {\n      onShowToast?.('Please enter a description', 'error')\n      return\n    }\n\n    setSaving(true)\n    try {\n      const client = getSupabaseClient()\n      if (editingItem) {\n        const { error } = await client\n          .from('punch_list_items')\n          .update({\n            description: formData.description.trim(),\n            area_id: formData.area_id || null,\n            assigned_to: formData.assigned_to.trim() || null,\n            priority: formData.priority,\n            notes: formData.notes.trim() || null,\n            photo_url: formData.photo_url || null,\n            updated_at: new Date().toISOString()\n          })\n          .eq('id', editingItem.id)\n\n        if (error) throw error\n        onShowToast?.('Punch item updated', 'success')\n      } else {\n        const { error } = await client\n          .from('punch_list_items')\n          .insert({\n            project_id: projectId,\n            company_id: companyId,\n            description: formData.description.trim(),\n            area_id: formData.area_id || null,\n            assigned_to: formData.assigned_to.trim() || null,\n            priority: formData.priority,\n            notes: formData.notes.trim() || null,\n            photo_url: formData.photo_url || null,\n            status: 'open'\n          })\n\n        if (error) throw error\n        onShowToast?.('Punch item added', 'success')\n      }\n\n      resetForm()\n      loadItems()\n    } catch (err) {\n      console.error('Error saving punch item:', err)\n      onShowToast?.(err.message || 'Error saving item', 'error')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handleStatusChange = async (itemId, newStatus) => {\n    try {\n      const updates = {\n        status: newStatus,\n        updated_at: new Date().toISOString()\n      }\n      if (newStatus === 'complete') {\n        updates.completed_at = new Date().toISOString()\n      } else {\n        updates.completed_at = null\n      }\n\n      const { error } = await getSupabaseClient()\n        .from('punch_list_items')\n        .update(updates)\n        .eq('id', itemId)\n\n      if (error) throw error\n      loadItems()\n    } catch (err) {\n      console.error('Error updating status:', err)\n      onShowToast?.('Error updating status', 'error')\n    }\n  }\n\n  const handleDelete = async (itemId) => {\n    if (!confirm('Delete this punch item?')) return\n\n    try {\n      const { error } = await getSupabaseClient()\n        .from('punch_list_items')\n        .delete()\n        .eq('id', itemId)\n\n      if (error) throw error\n      onShowToast?.('Item deleted', 'success')\n      loadItems()\n    } catch (err) {\n      console.error('Error deleting item:', err)\n      onShowToast?.('Error deleting item', 'error')\n    }\n  }\n\n  const handleEdit = (item) => {\n    setFormData({\n      description: item.description,\n      area_id: item.area_id || '',\n      assigned_to: item.assigned_to || '',\n      priority: item.priority || 'medium',\n      notes: item.notes || '',\n      photo_url: item.photo_url || ''\n    })\n    setEditingItem(item)\n    setShowForm(true)\n  }\n\n  const getAreaName = (areaId) => {\n    if (!areaId) return null\n    const area = areas.find(a => a.id === areaId)\n    return area?.name || null\n  }\n\n  const getPriorityConfig = (priority) =>\n    PRIORITY_OPTIONS.find(p => p.value === priority) || PRIORITY_OPTIONS[1]\n\n  const getStatusConfig = (status) =>\n    STATUS_OPTIONS.find(s => s.value === status) || STATUS_OPTIONS[0]\n\n  return (\n    <div className=\"punch-list-card\">\n      {/* Header */}\n      <div className=\"punch-list-header\">\n        <div className=\"punch-list-title\">\n          <CheckCircle2 size={18} />\n          <h3>Punch List</h3>\n          {stats.total > 0 && (\n            <span className=\"punch-stats-inline\">\n              <span className=\"punch-stat-open\">{stats.open} open</span>\n              {stats.inProgress > 0 && <span className=\"punch-stat-progress\">{stats.inProgress} in progress</span>}\n              <span className=\"punch-stat-complete\">{stats.complete}/{stats.total} complete</span>\n            </span>\n          )}\n        </div>\n        <button className=\"punch-add-btn\" onClick={() => { resetForm(); setShowForm(true) }}>\n          <Plus size={16} />\n          Add Item\n        </button>\n      </div>\n\n      {/* Progress bar */}\n      {stats.total > 0 && (\n        <div className=\"punch-progress-bar\">\n          <div\n            className=\"punch-progress-fill\"\n            style={{ width: `${(stats.complete / stats.total) * 100}%` }}\n          />\n          <span className=\"punch-progress-label\">\n            {Math.round((stats.complete / stats.total) * 100)}% complete\n          </span>\n        </div>\n      )}\n\n      {/* Filters */}\n      {stats.total > 0 && (\n        <div className=\"punch-filters\">\n          <div className=\"punch-filter-group\">\n            <Filter size={14} />\n            <select value={filterStatus} onChange={e => setFilterStatus(e.target.value)} className=\"punch-filter-select\">\n              <option value=\"all\">All Status</option>\n              {STATUS_OPTIONS.map(s => (\n                <option key={s.value} value={s.value}>{s.label}</option>\n              ))}\n            </select>\n          </div>\n          {areas.length > 0 && (\n            <div className=\"punch-filter-group\">\n              <MapPin size={14} />\n              <select value={filterArea} onChange={e => setFilterArea(e.target.value)} className=\"punch-filter-select\">\n                <option value=\"all\">All Areas</option>\n                {areas.map(a => (\n                  <option key={a.id} value={a.id}>{a.name}</option>\n                ))}\n              </select>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Add/Edit Form */}\n      {showForm && (\n        <form className=\"punch-form\" onSubmit={handleSubmit}>\n          <div className=\"punch-form-header\">\n            <h4>{editingItem ? 'Edit Item' : 'New Punch Item'}</h4>\n            <button type=\"button\" className=\"punch-form-close\" onClick={resetForm}>\n              <X size={16} />\n            </button>\n          </div>\n\n          <div className=\"punch-form-field\">\n            <label>Description *</label>\n            <textarea\n              value={formData.description}\n              onChange={e => setFormData(prev => ({ ...prev, description: e.target.value }))}\n              placeholder=\"What needs to be fixed or completed?\"\n              rows={2}\n              required\n            />\n          </div>\n\n          <div className=\"punch-form-row\">\n            <div className=\"punch-form-field\">\n              <label>Area</label>\n              <select\n                value={formData.area_id}\n                onChange={e => setFormData(prev => ({ ...prev, area_id: e.target.value }))}\n              >\n                <option value=\"\">No area</option>\n                {areas.map(a => (\n                  <option key={a.id} value={a.id}>{a.name}</option>\n                ))}\n              </select>\n            </div>\n\n            <div className=\"punch-form-field\">\n              <label>Assigned To</label>\n              <input\n                type=\"text\"\n                value={formData.assigned_to}\n                onChange={e => setFormData(prev => ({ ...prev, assigned_to: e.target.value }))}\n                placeholder=\"Name or company\"\n              />\n            </div>\n\n            <div className=\"punch-form-field\">\n              <label>Priority</label>\n              <select\n                value={formData.priority}\n                onChange={e => setFormData(prev => ({ ...prev, priority: e.target.value }))}\n              >\n                {PRIORITY_OPTIONS.map(p => (\n                  <option key={p.value} value={p.value}>{p.label}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div className=\"punch-form-field\">\n            <label>Notes</label>\n            <textarea\n              value={formData.notes}\n              onChange={e => setFormData(prev => ({ ...prev, notes: e.target.value }))}\n              placeholder=\"Additional details...\"\n              rows={2}\n            />\n          </div>\n\n          <div className=\"punch-form-actions\">\n            <button type=\"button\" className=\"punch-btn-cancel\" onClick={resetForm}>Cancel</button>\n            <button type=\"submit\" className=\"punch-btn-save\" disabled={saving}>\n              <Save size={14} />\n              {saving ? 'Saving...' : editingItem ? 'Update' : 'Add Item'}\n            </button>\n          </div>\n        </form>\n      )}\n\n      {/* Items List */}\n      {loading ? (\n        <div className=\"punch-loading\">Loading punch list...</div>\n      ) : filteredItems.length === 0 ? (\n        <div className=\"punch-empty\">\n          <CheckCircle2 size={32} style={{ opacity: 0.3 }} />\n          <p>{items.length === 0 ? 'No punch items yet' : 'No items match filters'}</p>\n          {items.length === 0 && <span>Add items that need attention before project closeout</span>}\n        </div>\n      ) : (\n        <div className=\"punch-items-list\">\n          {filteredItems.map(item => {\n            const statusConfig = getStatusConfig(item.status)\n            const priorityConfig = getPriorityConfig(item.priority)\n            const StatusIcon = statusConfig.icon\n\n            return (\n              <div key={item.id} className={`punch-item punch-item-${item.status}`}>\n                <button\n                  className=\"punch-item-status-btn\"\n                  onClick={() => {\n                    const nextStatus = item.status === 'open' ? 'in_progress' :\n                                       item.status === 'in_progress' ? 'complete' : 'open'\n                    handleStatusChange(item.id, nextStatus)\n                  }}\n                  title={`Click to change status (current: ${statusConfig.label})`}\n                >\n                  <StatusIcon size={18} style={{ color: statusConfig.color }} />\n                </button>\n\n                <div className=\"punch-item-content\">\n                  <div className=\"punch-item-top\">\n                    <span className={`punch-item-desc ${item.status === 'complete' ? 'completed' : ''}`}>\n                      {item.description}\n                    </span>\n                    <div className=\"punch-item-badges\">\n                      <span className=\"punch-priority-badge\" style={{ color: priorityConfig.color, borderColor: `${priorityConfig.color}40` }}>\n                        {priorityConfig.label}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"punch-item-meta\">\n                    {getAreaName(item.area_id) && (\n                      <span className=\"punch-meta-tag\">\n                        <MapPin size={11} />\n                        {getAreaName(item.area_id)}\n                      </span>\n                    )}\n                    {item.assigned_to && (\n                      <span className=\"punch-meta-tag\">\n                        <User size={11} />\n                        {item.assigned_to}\n                      </span>\n                    )}\n                    {item.completed_at && (\n                      <span className=\"punch-meta-tag completed\">\n                        <CheckCircle2 size={11} />\n                        Done {new Date(item.completed_at).toLocaleDateString()}\n                      </span>\n                    )}\n                  </div>\n\n                  {item.notes && (\n                    <div className=\"punch-item-notes\">{item.notes}</div>\n                  )}\n                </div>\n\n                <div className=\"punch-item-actions\">\n                  <button className=\"punch-action-btn\" onClick={() => handleEdit(item)} title=\"Edit\">\n                    <Edit3 size={14} />\n                  </button>\n                  <button className=\"punch-action-btn delete\" onClick={() => handleDelete(item.id)} title=\"Delete\">\n                    <Trash2 size={14} />\n                  </button>\n                </div>\n              </div>\n            )\n          })}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":["PRIORITY_OPTIONS","STATUS_OPTIONS","Circle","Clock","CheckCircle2","PunchList","projectId","areas","companyId","onShowToast","items","setItems","useState","loading","setLoading","showForm","setShowForm","editingItem","setEditingItem","filterStatus","setFilterStatus","filterArea","setFilterArea","saving","setSaving","formData","setFormData","loadItems","useCallback","isSupabaseConfigured","client","getSupabaseClient","data","error","err","useEffect","channel","supabase","filteredItems","useMemo","item","stats","open","inProgress","complete","resetForm","handleSubmit","handleStatusChange","itemId","newStatus","updates","handleDelete","handleEdit","getAreaName","areaId","getPriorityConfig","priority","p","getStatusConfig","status","s","jsxs","jsx","Plus","Filter","MapPin","a","X","prev","Save","statusConfig","priorityConfig","StatusIcon","nextStatus","User","Edit3","Trash2"],"mappings":"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"}