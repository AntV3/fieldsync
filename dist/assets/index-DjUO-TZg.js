const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SignatureLinkGenerator-D9ZJ1BYo.js","assets/icons-DsFyWu_8.js","assets/react-DXGY7bZi.js","assets/pdf-aQqpMATS.js","assets/supabase-VuevzHjS.js","assets/TMClientSignature-BBlgMF31.js","assets/Dashboard-CORJdl17.js","assets/corCalculations-vdJc_BOT.js","assets/Setup-CqC2AejZ.js","assets/BrandingSettings-B2bTlVgF.js","assets/PricingManager-BvoKd7jc.js","assets/PublicView-Bf4fyExW.js","assets/SignaturePage-BBIQrUMA.js","assets/SignatureCanvas-BDflhfsQ.js","assets/MembershipManager-CbmY_8Tf.js"])))=>i.map(i=>d[i]);
import{r as y,H as To,B as YR,A as sr,C as yc,U as HA,a as GR,b as $i,E as VR,c as WR,S as FA,M as KA,T as om,D as YA,X as wb,d as GA,L as Bs,F as Ho,e as Po,f as jb,g as XR,h as ZR,i as cy,j as uy,k as QR,l as Wn,R as bS,P as bc,m as JR,W as eq,Z as tq,G as rq,n as nq,o as aq,p as uf,q as _S,s as Zd,t as iq,u as VA,v as df,w as WA,x as oq,y as sq,z as lq,I as cq,J as hc,K as uq,N as dq,O as fq,Q as mq,V as XA,Y as ZA,_ as hq,$ as pq,a0 as gq,a1 as vq,a2 as yq,a3 as QA,a4 as bq,a5 as _q,a6 as xq,a7 as wq,a8 as jq,a9 as Sq,aa as Eq,ab as Oq,ac as Cq,ad as Aq}from"./icons-DsFyWu_8.js";import{r as sm,b as JA,a as Qa}from"./react-DXGY7bZi.js";import{_ as Ja}from"./pdf-aQqpMATS.js";import{c as eN}from"./supabase-VuevzHjS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var fg={exports:{}},ec={};var xS;function Nq(){if(xS)return ec;xS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,s){var c=null;if(s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:n,key:c,ref:i!==void 0?i:null,props:s}}return ec.Fragment=t,ec.jsx=r,ec.jsxs=r,ec}var wS;function kq(){return wS||(wS=1,fg.exports=Nq()),fg.exports}var f=kq(),mg={exports:{}},tc={},hg={exports:{}},pg={};var jS;function Dq(){return jS||(jS=1,(function(e){function t(R,I){var ee=R.length;R.push(I);e:for(;0<ee;){var U=ee-1>>>1,me=R[U];if(0<i(me,I))R[U]=I,R[ee]=me,ee=U;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var I=R[0],ee=R.pop();if(ee!==I){R[0]=ee;e:for(var U=0,me=R.length,je=me>>>1;U<je;){var J=2*(U+1)-1,H=R[J],Se=J+1,Te=R[Se];if(0>i(H,ee))Se<me&&0>i(Te,H)?(R[U]=Te,R[Se]=ee,U=Se):(R[U]=H,R[J]=ee,U=J);else if(Se<me&&0>i(Te,ee))R[U]=Te,R[Se]=ee,U=Se;else break e}}return I}function i(R,I){var ee=R.sortIndex-I.sortIndex;return ee!==0?ee:R.id-I.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var m=[],h=[],p=1,g=null,_=3,x=!1,w=!1,j=!1,S=!1,O=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(R){for(var I=r(h);I!==null;){if(I.callback===null)n(h);else if(I.startTime<=R)n(h),I.sortIndex=I.expirationTime,t(m,I);else break;I=r(h)}}function D(R){if(j=!1,k(R),!w)if(r(m)!==null)w=!0,M||(M=!0,B());else{var I=r(h);I!==null&&q(D,I.startTime-R)}}var M=!1,L=-1,X=5,ne=-1;function ae(){return S?!0:!(e.unstable_now()-ne<X)}function G(){if(S=!1,M){var R=e.unstable_now();ne=R;var I=!0;try{e:{w=!1,j&&(j=!1,C(L),L=-1),x=!0;var ee=_;try{t:{for(k(R),g=r(m);g!==null&&!(g.expirationTime>R&&ae());){var U=g.callback;if(typeof U=="function"){g.callback=null,_=g.priorityLevel;var me=U(g.expirationTime<=R);if(R=e.unstable_now(),typeof me=="function"){g.callback=me,k(R),I=!0;break t}g===r(m)&&n(m),k(R)}else n(m);g=r(m)}if(g!==null)I=!0;else{var je=r(h);je!==null&&q(D,je.startTime-R),I=!1}}break e}finally{g=null,_=ee,x=!1}I=void 0}}finally{I?B():M=!1}}}var B;if(typeof A=="function")B=function(){A(G)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,ge=ce.port2;ce.port1.onmessage=G,B=function(){ge.postMessage(null)}}else B=function(){O(G,0)};function q(R,I){L=O(function(){R(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(R){switch(_){case 1:case 2:case 3:var I=3;break;default:I=_}var ee=_;_=I;try{return R()}finally{_=ee}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,I){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var ee=_;_=R;try{return I()}finally{_=ee}},e.unstable_scheduleCallback=function(R,I,ee){var U=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?U+ee:U):ee=U,R){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=ee+me,R={id:p++,callback:I,priorityLevel:R,startTime:ee,expirationTime:me,sortIndex:-1},ee>U?(R.sortIndex=ee,t(h,R),r(m)===null&&R===r(h)&&(j?(C(L),L=-1):j=!0,q(D,ee-U))):(R.sortIndex=me,t(m,R),w||x||(w=!0,M||(M=!0,B()))),R},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(R){var I=_;return function(){var ee=_;_=I;try{return R.apply(this,arguments)}finally{_=ee}}}})(pg)),pg}var SS;function Tq(){return SS||(SS=1,hg.exports=Dq()),hg.exports}var ES;function Pq(){if(ES)return tc;ES=1;var e=Tq(),t=sm(),r=JA();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,l=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(l=o.return),a=o.return;while(a)}return o.tag===3?l:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function m(a){if(s(a)!==a)throw Error(n(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(n(188));return o!==a?null:a}for(var l=a,d=o;;){var v=l.return;if(v===null)break;var b=v.alternate;if(b===null){if(d=v.return,d!==null){l=d;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===l)return m(v),a;if(b===d)return m(v),o;b=b.sibling}throw Error(n(188))}if(l.return!==d.return)l=v,d=b;else{for(var E=!1,N=v.child;N;){if(N===l){E=!0,l=v,d=b;break}if(N===d){E=!0,d=v,l=b;break}N=N.sibling}if(!E){for(N=b.child;N;){if(N===l){E=!0,l=b,d=v;break}if(N===d){E=!0,d=b,l=v;break}N=N.sibling}if(!E)throw Error(n(189))}}if(l.alternate!==d)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var g=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),ne=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function B(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Symbol.for("react.client.reference");function ge(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ce?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case j:return"Fragment";case O:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case ne:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case A:return a.displayName||"Context";case C:return(a._context.displayName||"Context")+".Consumer";case k:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return o=a.displayName||null,o!==null?o:ge(a.type)||"Memo";case X:o=a._payload,a=a._init;try{return ge(a(o))}catch{}}return null}var q=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},U=[],me=-1;function je(a){return{current:a}}function J(a){0>me||(a.current=U[me],U[me]=null,me--)}function H(a,o){me++,U[me]=a.current,a.current=o}var Se=je(null),Te=je(null),Ue=je(null),pe=je(null);function Ie(a,o){switch(H(Ue,o),H(Te,a),H(Se,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?$j(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=$j(o),a=Hj(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}J(Se),H(Se,a)}function Q(){J(Se),J(Te),J(Ue)}function Ee(a){a.memoizedState!==null&&H(pe,a);var o=Se.current,l=Hj(o,a.type);o!==l&&(H(Te,a),H(Se,l))}function xe(a){Te.current===a&&(J(Se),J(Te)),pe.current===a&&(J(pe),Xl._currentValue=ee)}var ie,Be;function ve(a){if(ie===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);ie=o&&o[1]||"",Be=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+a+Be}var Ne=!1;function Me(a,o){if(!a||Ne)return"";Ne=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(te){var Z=te}Reflect.construct(a,[],de)}else{try{de.call()}catch(te){Z=te}a.call(de.prototype)}}else{try{throw Error()}catch(te){Z=te}(de=a())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),E=b[0],N=b[1];if(E&&N){var z=E.split(`
`),V=N.split(`
`);for(v=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;v<V.length&&!V[v].includes("DetermineComponentFrameRoot");)v++;if(d===z.length||v===V.length)for(d=z.length-1,v=V.length-1;1<=d&&0<=v&&z[d]!==V[v];)v--;for(;1<=d&&0<=v;d--,v--)if(z[d]!==V[v]){if(d!==1||v!==1)do if(d--,v--,0>v||z[d]!==V[v]){var oe=`
`+z[d].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=d&&0<=v);break}}}finally{Ne=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?ve(l):""}function Ct(a,o){switch(a.tag){case 26:case 27:case 5:return ve(a.type);case 16:return ve("Lazy");case 13:return a.child!==o&&o!==null?ve("Suspense Fallback"):ve("Suspense");case 19:return ve("SuspenseList");case 0:case 15:return Me(a.type,!1);case 11:return Me(a.type.render,!1);case 1:return Me(a.type,!0);case 31:return ve("Activity");default:return""}}function Re(a){try{var o="",l=null;do o+=Ct(a,l),l=a,a=a.return;while(a);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var It=Object.prototype.hasOwnProperty,_t=e.unstable_scheduleCallback,At=e.unstable_cancelCallback,Cr=e.unstable_shouldYield,jt=e.unstable_requestPaint,Ye=e.unstable_now,$r=e.unstable_getCurrentPriorityLevel,bn=e.unstable_ImmediatePriority,Pr=e.unstable_UserBlockingPriority,Ar=e.unstable_NormalPriority,fe=e.unstable_LowPriority,st=e.unstable_IdlePriority,Jr=e.log,Mr=e.unstable_setDisableYieldValue,Rr=null,gt=null;function Ut(a){if(typeof Jr=="function"&&Mr(a),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(Rr,a)}catch{}}var xt=Math.clz32?Math.clz32:Zi,_n=Math.log,li=Math.LN2;function Zi(a){return a>>>=0,a===0?32:31-(_n(a)/li|0)|0}var ci=256,ui=262144,ga=4194304;function xn(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function di(a,o,l){var d=a.pendingLanes;if(d===0)return 0;var v=0,b=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var N=d&134217727;return N!==0?(d=N&~b,d!==0?v=xn(d):(E&=N,E!==0?v=xn(E):l||(l=N&~a,l!==0&&(v=xn(l))))):(N=d&~b,N!==0?v=xn(N):E!==0?v=xn(E):l||(l=d&~a,l!==0&&(v=xn(l)))),v===0?0:o!==0&&o!==v&&(o&b)===0&&(b=v&-v,l=o&-o,b>=l||b===32&&(l&4194048)!==0)?o:v}function va(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function sl(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ye(){var a=ga;return ga<<=1,(ga&62914560)===0&&(ga=4194304),a}function Un(a){for(var o=[],l=0;31>l;l++)o.push(a);return o}function ya(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ll(a,o,l,d,v,b){var E=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var N=a.entanglements,z=a.expirationTimes,V=a.hiddenUpdates;for(l=E&~l;0<l;){var oe=31-xt(l),de=1<<oe;N[oe]=0,z[oe]=-1;var Z=V[oe];if(Z!==null)for(V[oe]=null,oe=0;oe<Z.length;oe++){var te=Z[oe];te!==null&&(te.lane&=-536870913)}l&=~de}d!==0&&du(a,d,0),b!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=b&~(E&~o))}function du(a,o,l){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-xt(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|l&261930}function fu(a,o){var l=a.entangledLanes|=o;for(a=a.entanglements;l;){var d=31-xt(l),v=1<<d;v&o|a[d]&o&&(a[d]|=o),l&=~v}}function Bn(a,o){var l=o&-o;return l=(l&42)!==0?1:cl(l),(l&(a.suspendedLanes|o))!==0?0:l}function cl(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ul(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Qi(){var a=I.p;return a!==0?a:(a=window.event,a===void 0?32:fS(a.type))}function Ji(a,o){var l=I.p;try{return I.p=a,o()}finally{I.p=l}}var en=Math.random().toString(36).slice(2),Bt="__reactFiber$"+en,ar="__reactProps$"+en,ra="__reactContainer$"+en,eo="__reactEvents$"+en,mu="__reactListeners$"+en,dl="__reactHandles$"+en,fl="__reactResources$"+en,Xo="__reactMarker$"+en;function Zo(a){delete a[Bt],delete a[ar],delete a[eo],delete a[mu],delete a[dl]}function $n(a){var o=a[Bt];if(o)return o;for(var l=a.parentNode;l;){if(o=l[ra]||l[Bt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(a=Xj(a);a!==null;){if(l=a[Bt])return l;a=Xj(a)}return o}a=l,l=a.parentNode}return null}function fi(a){if(a=a[Bt]||a[ra]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function to(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function K(a){var o=a[fl];return o||(o=a[fl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function le(a){a[Xo]=!0}var he=new Set,se={};function re(a,o){we(a,o),we(a+"Capture",o)}function we(a,o){for(se[a]=o,a=0;a<o.length;a++)he.add(o[a])}var ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},vt={};function et(a){return It.call(vt,a)?!0:It.call($e,a)?!1:ze.test(a)?vt[a]=!0:($e[a]=!0,!1)}function ir(a,o,l){if(et(o))if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+l)}}function hu(a,o,l){if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+l)}}function ba(a,o,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(o,l,""+d)}}function wn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function M_(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function IM(a,o,l){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,b=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return v.call(this)},set:function(E){l=""+E,b.call(this,E)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function ih(a){if(!a._valueTracker){var o=M_(a)?"checked":"value";a._valueTracker=IM(a,o,""+a[o])}}function R_(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return a&&(d=M_(a)?a.checked?"true":"false":a.value),a=d,a!==l?(o.setValue(a),!0):!1}function pu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var UM=/[\n"\\]/g;function jn(a){return a.replace(UM,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function oh(a,o,l,d,v,b,E,N){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),o!=null?E==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+wn(o)):a.value!==""+wn(o)&&(a.value=""+wn(o)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),o!=null?sh(a,E,wn(o)):l!=null?sh(a,E,wn(l)):d!=null&&a.removeAttribute("value"),v==null&&b!=null&&(a.defaultChecked=!!b),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+wn(N):a.removeAttribute("name")}function q_(a,o,l,d,v,b,E,N){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){ih(a);return}l=l!=null?""+wn(l):"",o=o!=null?""+wn(o):l,N||o===a.value||(a.value=o),a.defaultValue=o}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=N?a.checked:!!d,a.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E),ih(a)}function sh(a,o,l){o==="number"&&pu(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function Qo(a,o,l,d){if(a=a.options,o){o={};for(var v=0;v<l.length;v++)o["$"+l[v]]=!0;for(l=0;l<a.length;l++)v=o.hasOwnProperty("$"+a[l].value),a[l].selected!==v&&(a[l].selected=v),v&&d&&(a[l].defaultSelected=!0)}else{for(l=""+wn(l),o=null,v=0;v<a.length;v++){if(a[v].value===l){a[v].selected=!0,d&&(a[v].defaultSelected=!0);return}o!==null||a[v].disabled||(o=a[v])}o!==null&&(o.selected=!0)}}function z_(a,o,l){if(o!=null&&(o=""+wn(o),o!==a.value&&(a.value=o),l==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=l!=null?""+wn(l):""}function L_(a,o,l,d){if(o==null){if(d!=null){if(l!=null)throw Error(n(92));if(q(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),o=l}l=wn(o),a.defaultValue=l,d=a.textContent,d===l&&d!==""&&d!==null&&(a.value=d),ih(a)}function Jo(a,o){if(o){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=o;return}}a.textContent=o}var BM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function I_(a,o,l){var d=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,l):typeof l!="number"||l===0||BM.has(o)?o==="float"?a.cssFloat=l:a[o]=(""+l).trim():a[o]=l+"px"}function U_(a,o,l){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var v in o)d=o[v],o.hasOwnProperty(v)&&l[v]!==d&&I_(a,v,d)}else for(var b in o)o.hasOwnProperty(b)&&I_(a,b,o[b])}function lh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $M=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HM=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gu(a){return HM.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function _a(){}var ch=null;function uh(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var es=null,ts=null;function B_(a){var o=fi(a);if(o&&(a=o.stateNode)){var l=a[ar]||null;e:switch(a=o.stateNode,o.type){case"input":if(oh(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+jn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==a&&d.form===a.form){var v=d[ar]||null;if(!v)throw Error(n(90));oh(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<l.length;o++)d=l[o],d.form===a.form&&R_(d)}break e;case"textarea":z_(a,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Qo(a,!!l.multiple,o,!1)}}}var dh=!1;function $_(a,o,l){if(dh)return a(o,l);dh=!0;try{var d=a(o);return d}finally{if(dh=!1,(es!==null||ts!==null)&&(nd(),es&&(o=es,a=ts,ts=es=null,B_(o),a)))for(o=0;o<a.length;o++)B_(a[o])}}function ml(a,o){var l=a.stateNode;if(l===null)return null;var d=l[ar]||null;if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fh=!1;if(xa)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){fh=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{fh=!1}var mi=null,mh=null,vu=null;function H_(){if(vu)return vu;var a,o=mh,l=o.length,d,v="value"in mi?mi.value:mi.textContent,b=v.length;for(a=0;a<l&&o[a]===v[a];a++);var E=l-a;for(d=1;d<=E&&o[l-d]===v[b-d];d++);return vu=v.slice(a,1<d?1-d:void 0)}function yu(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function bu(){return!0}function F_(){return!1}function Hr(a){function o(l,d,v,b,E){this._reactName=l,this._targetInst=v,this.type=d,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(l=a[N],this[N]=l?l(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?bu:F_,this.isPropagationStopped=F_,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bu)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bu)},persist:function(){},isPersistent:bu}),o}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_u=Hr(ro),pl=g({},ro,{view:0,detail:0}),FM=Hr(pl),hh,ph,gl,xu=g({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==gl&&(gl&&a.type==="mousemove"?(hh=a.screenX-gl.screenX,ph=a.screenY-gl.screenY):ph=hh=0,gl=a),hh)},movementY:function(a){return"movementY"in a?a.movementY:ph}}),K_=Hr(xu),KM=g({},xu,{dataTransfer:0}),YM=Hr(KM),GM=g({},pl,{relatedTarget:0}),gh=Hr(GM),VM=g({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),WM=Hr(VM),XM=g({},ro,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),ZM=Hr(XM),QM=g({},ro,{data:0}),Y_=Hr(QM),JM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=t2[a])?!!o[a]:!1}function vh(){return r2}var n2=g({},pl,{key:function(a){if(a.key){var o=JM[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=yu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?e2[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vh,charCode:function(a){return a.type==="keypress"?yu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?yu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),a2=Hr(n2),i2=g({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G_=Hr(i2),o2=g({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vh}),s2=Hr(o2),l2=g({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),c2=Hr(l2),u2=g({},xu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),d2=Hr(u2),f2=g({},ro,{newState:0,oldState:0}),m2=Hr(f2),h2=[9,13,27,32],yh=xa&&"CompositionEvent"in window,vl=null;xa&&"documentMode"in document&&(vl=document.documentMode);var p2=xa&&"TextEvent"in window&&!vl,V_=xa&&(!yh||vl&&8<vl&&11>=vl),W_=" ",X_=!1;function Z_(a,o){switch(a){case"keyup":return h2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q_(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var rs=!1;function g2(a,o){switch(a){case"compositionend":return Q_(o);case"keypress":return o.which!==32?null:(X_=!0,W_);case"textInput":return a=o.data,a===W_&&X_?null:a;default:return null}}function v2(a,o){if(rs)return a==="compositionend"||!yh&&Z_(a,o)?(a=H_(),vu=mh=mi=null,rs=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return V_&&o.locale!=="ko"?null:o.data;default:return null}}var y2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J_(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!y2[a.type]:o==="textarea"}function ex(a,o,l,d){es?ts?ts.push(d):ts=[d]:es=d,o=ud(o,"onChange"),0<o.length&&(l=new _u("onChange","change",null,l,d),a.push({event:l,listeners:o}))}var yl=null,bl=null;function b2(a){qj(a,0)}function wu(a){var o=to(a);if(R_(o))return a}function tx(a,o){if(a==="change")return o}var rx=!1;if(xa){var bh;if(xa){var _h="oninput"in document;if(!_h){var nx=document.createElement("div");nx.setAttribute("oninput","return;"),_h=typeof nx.oninput=="function"}bh=_h}else bh=!1;rx=bh&&(!document.documentMode||9<document.documentMode)}function ax(){yl&&(yl.detachEvent("onpropertychange",ix),bl=yl=null)}function ix(a){if(a.propertyName==="value"&&wu(bl)){var o=[];ex(o,bl,a,uh(a)),$_(b2,o)}}function _2(a,o,l){a==="focusin"?(ax(),yl=o,bl=l,yl.attachEvent("onpropertychange",ix)):a==="focusout"&&ax()}function x2(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return wu(bl)}function w2(a,o){if(a==="click")return wu(o)}function j2(a,o){if(a==="input"||a==="change")return wu(o)}function S2(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var tn=typeof Object.is=="function"?Object.is:S2;function _l(a,o){if(tn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var l=Object.keys(a),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var v=l[d];if(!It.call(o,v)||!tn(a[v],o[v]))return!1}return!0}function ox(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function sx(a,o){var l=ox(a);a=0;for(var d;l;){if(l.nodeType===3){if(d=a+l.textContent.length,a<=o&&d>=o)return{node:l,offset:o-a};a=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ox(l)}}function lx(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?lx(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function cx(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=pu(a.document);o instanceof a.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)a=o.contentWindow;else break;o=pu(a.document)}return o}function xh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var E2=xa&&"documentMode"in document&&11>=document.documentMode,ns=null,wh=null,xl=null,jh=!1;function ux(a,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jh||ns==null||ns!==pu(d)||(d=ns,"selectionStart"in d&&xh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),xl&&_l(xl,d)||(xl=d,d=ud(wh,"onSelect"),0<d.length&&(o=new _u("onSelect","select",null,o,l),a.push({event:o,listeners:d}),o.target=ns)))}function no(a,o){var l={};return l[a.toLowerCase()]=o.toLowerCase(),l["Webkit"+a]="webkit"+o,l["Moz"+a]="moz"+o,l}var as={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},Sh={},dx={};xa&&(dx=document.createElement("div").style,"AnimationEvent"in window||(delete as.animationend.animation,delete as.animationiteration.animation,delete as.animationstart.animation),"TransitionEvent"in window||delete as.transitionend.transition);function ao(a){if(Sh[a])return Sh[a];if(!as[a])return a;var o=as[a],l;for(l in o)if(o.hasOwnProperty(l)&&l in dx)return Sh[a]=o[l];return a}var fx=ao("animationend"),mx=ao("animationiteration"),hx=ao("animationstart"),O2=ao("transitionrun"),C2=ao("transitionstart"),A2=ao("transitioncancel"),px=ao("transitionend"),gx=new Map,Eh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Eh.push("scrollEnd");function Hn(a,o){gx.set(a,o),re(o,[a])}var ju=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Sn=[],is=0,Oh=0;function Su(){for(var a=is,o=Oh=is=0;o<a;){var l=Sn[o];Sn[o++]=null;var d=Sn[o];Sn[o++]=null;var v=Sn[o];Sn[o++]=null;var b=Sn[o];if(Sn[o++]=null,d!==null&&v!==null){var E=d.pending;E===null?v.next=v:(v.next=E.next,E.next=v),d.pending=v}b!==0&&vx(l,v,b)}}function Eu(a,o,l,d){Sn[is++]=a,Sn[is++]=o,Sn[is++]=l,Sn[is++]=d,Oh|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Ch(a,o,l,d){return Eu(a,o,l,d),Ou(a)}function io(a,o){return Eu(a,null,null,o),Ou(a)}function vx(a,o,l){a.lanes|=l;var d=a.alternate;d!==null&&(d.lanes|=l);for(var v=!1,b=a.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(v=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,v&&o!==null&&(v=31-xt(l),a=b.hiddenUpdates,d=a[v],d===null?a[v]=[o]:d.push(o),o.lane=l|536870912),b):null}function Ou(a){if(50<Hl)throw Hl=0,qp=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var os={};function N2(a,o,l,d){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(a,o,l,d){return new N2(a,o,l,d)}function Ah(a){return a=a.prototype,!(!a||!a.isReactComponent)}function wa(a,o){var l=a.alternate;return l===null?(l=rn(a.tag,o,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=o,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,o=a.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function yx(a,o){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,o=l.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Cu(a,o,l,d,v,b){var E=0;if(d=a,typeof a=="function")Ah(a)&&(E=1);else if(typeof a=="string")E=MR(a,l,Se.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case ne:return a=rn(31,l,o,v),a.elementType=ne,a.lanes=b,a;case j:return oo(l.children,v,b,o);case S:E=8,v|=24;break;case O:return a=rn(12,l,o,v|2),a.elementType=O,a.lanes=b,a;case D:return a=rn(13,l,o,v),a.elementType=D,a.lanes=b,a;case M:return a=rn(19,l,o,v),a.elementType=M,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:E=10;break e;case C:E=9;break e;case k:E=11;break e;case L:E=14;break e;case X:E=16,d=null;break e}E=29,l=Error(n(130,a===null?"null":typeof a,"")),d=null}return o=rn(E,l,o,v),o.elementType=a,o.type=d,o.lanes=b,o}function oo(a,o,l,d){return a=rn(7,a,d,o),a.lanes=l,a}function Nh(a,o,l){return a=rn(6,a,null,o),a.lanes=l,a}function bx(a){var o=rn(18,null,null,0);return o.stateNode=a,o}function kh(a,o,l){return o=rn(4,a.children!==null?a.children:[],a.key,o),o.lanes=l,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var _x=new WeakMap;function En(a,o){if(typeof a=="object"&&a!==null){var l=_x.get(a);return l!==void 0?l:(o={value:a,source:o,stack:Re(o)},_x.set(a,o),o)}return{value:a,source:o,stack:Re(o)}}var ss=[],ls=0,Au=null,wl=0,On=[],Cn=0,hi=null,na=1,aa="";function ja(a,o){ss[ls++]=wl,ss[ls++]=Au,Au=a,wl=o}function xx(a,o,l){On[Cn++]=na,On[Cn++]=aa,On[Cn++]=hi,hi=a;var d=na;a=aa;var v=32-xt(d)-1;d&=~(1<<v),l+=1;var b=32-xt(o)+v;if(30<b){var E=v-v%5;b=(d&(1<<E)-1).toString(32),d>>=E,v-=E,na=1<<32-xt(o)+v|l<<v|d,aa=b+a}else na=1<<b|l<<v|d,aa=a}function Dh(a){a.return!==null&&(ja(a,1),xx(a,1,0))}function Th(a){for(;a===Au;)Au=ss[--ls],ss[ls]=null,wl=ss[--ls],ss[ls]=null;for(;a===hi;)hi=On[--Cn],On[Cn]=null,aa=On[--Cn],On[Cn]=null,na=On[--Cn],On[Cn]=null}function wx(a,o){On[Cn++]=na,On[Cn++]=aa,On[Cn++]=hi,na=o.id,aa=o.overflow,hi=a}var xr=null,St=null,Qe=!1,pi=null,An=!1,Ph=Error(n(519));function gi(a){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(En(o,a)),Ph}function jx(a){var o=a.stateNode,l=a.type,d=a.memoizedProps;switch(o[Bt]=a,o[ar]=d,l){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(l=0;l<Kl.length;l++)We(Kl[l],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),q_(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),L_(o,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||d.suppressHydrationWarning===!0||Uj(o.textContent,l)?(d.popover!=null&&(We("beforetoggle",o),We("toggle",o)),d.onScroll!=null&&We("scroll",o),d.onScrollEnd!=null&&We("scrollend",o),d.onClick!=null&&(o.onclick=_a),o=!0):o=!1,o||gi(a,!0)}function Sx(a){for(xr=a.return;xr;)switch(xr.tag){case 5:case 31:case 13:An=!1;return;case 27:case 3:An=!0;return;default:xr=xr.return}}function cs(a){if(a!==xr)return!1;if(!Qe)return Sx(a),Qe=!0,!1;var o=a.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||Zp(a.type,a.memoizedProps)),l=!l),l&&St&&gi(a),Sx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=Wj(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=Wj(a)}else o===27?(o=St,ki(a.type)?(a=rg,rg=null,St=a):St=o):St=xr?kn(a.stateNode.nextSibling):null;return!0}function so(){St=xr=null,Qe=!1}function Mh(){var a=pi;return a!==null&&(Gr===null?Gr=a:Gr.push.apply(Gr,a),pi=null),a}function jl(a){pi===null?pi=[a]:pi.push(a)}var Rh=je(null),lo=null,Sa=null;function vi(a,o,l){H(Rh,o._currentValue),o._currentValue=l}function Ea(a){a._currentValue=Rh.current,J(Rh)}function qh(a,o,l){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===l)break;a=a.return}}function zh(a,o,l,d){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var b=v.dependencies;if(b!==null){var E=v.child;b=b.firstContext;e:for(;b!==null;){var N=b;b=v;for(var z=0;z<o.length;z++)if(N.context===o[z]){b.lanes|=l,N=b.alternate,N!==null&&(N.lanes|=l),qh(b.return,l,a),d||(E=null);break e}b=N.next}}else if(v.tag===18){if(E=v.return,E===null)throw Error(n(341));E.lanes|=l,b=E.alternate,b!==null&&(b.lanes|=l),qh(E,l,a),E=null}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===a){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}}function us(a,o,l,d){a=null;for(var v=o,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var E=v.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var N=v.type;tn(v.pendingProps.value,E.value)||(a!==null?a.push(N):a=[N])}}else if(v===pe.current){if(E=v.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Xl):a=[Xl])}v=v.return}a!==null&&zh(o,a,l,d),o.flags|=262144}function Nu(a){for(a=a.firstContext;a!==null;){if(!tn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function co(a){lo=a,Sa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function wr(a){return Ex(lo,a)}function ku(a,o){return lo===null&&co(a),Ex(a,o)}function Ex(a,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Sa===null){if(a===null)throw Error(n(308));Sa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Sa=Sa.next=o;return l}var k2=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(l,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(l){return l()})}},D2=e.unstable_scheduleCallback,T2=e.unstable_NormalPriority,Xt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lh(){return{controller:new k2,data:new Map,refCount:0}}function Sl(a){a.refCount--,a.refCount===0&&D2(T2,function(){a.controller.abort()})}var El=null,Ih=0,ds=0,fs=null;function P2(a,o){if(El===null){var l=El=[];Ih=0,ds=$p(),fs={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Ih++,o.then(Ox,Ox),o}function Ox(){if(--Ih===0&&El!==null){fs!==null&&(fs.status="fulfilled");var a=El;El=null,ds=0,fs=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function M2(a,o){var l=[],d={status:"pending",value:null,reason:null,then:function(v){l.push(v)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var v=0;v<l.length;v++)(0,l[v])(o)},function(v){for(d.status="rejected",d.reason=v,v=0;v<l.length;v++)(0,l[v])(void 0)}),d}var Cx=R.S;R.S=function(a,o){uj=Ye(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&P2(a,o),Cx!==null&&Cx(a,o)};var uo=je(null);function Uh(){var a=uo.current;return a!==null?a:yt.pooledCache}function Du(a,o){o===null?H(uo,uo.current):H(uo,o.pool)}function Ax(){var a=Uh();return a===null?null:{parent:Xt._currentValue,pool:a}}var ms=Error(n(460)),Bh=Error(n(474)),Tu=Error(n(542)),Pu={then:function(){}};function Nx(a){return a=a.status,a==="fulfilled"||a==="rejected"}function kx(a,o,l){switch(l=a[l],l===void 0?a.push(o):l!==o&&(o.then(_a,_a),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Tx(a),a;default:if(typeof o.status=="string")o.then(_a,_a);else{if(a=yt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=d}},function(d){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Tx(a),a}throw mo=o,ms}}function fo(a){try{var o=a._init;return o(a._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(mo=l,ms):l}}var mo=null;function Dx(){if(mo===null)throw Error(n(459));var a=mo;return mo=null,a}function Tx(a){if(a===ms||a===Tu)throw Error(n(483))}var hs=null,Ol=0;function Mu(a){var o=Ol;return Ol+=1,hs===null&&(hs=[]),kx(hs,a,o)}function Cl(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Ru(a,o){throw o.$$typeof===_?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Px(a){function o(F,$){if(a){var Y=F.deletions;Y===null?(F.deletions=[$],F.flags|=16):Y.push($)}}function l(F,$){if(!a)return null;for(;$!==null;)o(F,$),$=$.sibling;return null}function d(F){for(var $=new Map;F!==null;)F.key!==null?$.set(F.key,F):$.set(F.index,F),F=F.sibling;return $}function v(F,$){return F=wa(F,$),F.index=0,F.sibling=null,F}function b(F,$,Y){return F.index=Y,a?(Y=F.alternate,Y!==null?(Y=Y.index,Y<$?(F.flags|=67108866,$):Y):(F.flags|=67108866,$)):(F.flags|=1048576,$)}function E(F){return a&&F.alternate===null&&(F.flags|=67108866),F}function N(F,$,Y,ue){return $===null||$.tag!==6?($=Nh(Y,F.mode,ue),$.return=F,$):($=v($,Y),$.return=F,$)}function z(F,$,Y,ue){var qe=Y.type;return qe===j?oe(F,$,Y.props.children,ue,Y.key):$!==null&&($.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===X&&fo(qe)===$.type)?($=v($,Y.props),Cl($,Y),$.return=F,$):($=Cu(Y.type,Y.key,Y.props,null,F.mode,ue),Cl($,Y),$.return=F,$)}function V(F,$,Y,ue){return $===null||$.tag!==4||$.stateNode.containerInfo!==Y.containerInfo||$.stateNode.implementation!==Y.implementation?($=kh(Y,F.mode,ue),$.return=F,$):($=v($,Y.children||[]),$.return=F,$)}function oe(F,$,Y,ue,qe){return $===null||$.tag!==7?($=oo(Y,F.mode,ue,qe),$.return=F,$):($=v($,Y),$.return=F,$)}function de(F,$,Y){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Nh(""+$,F.mode,Y),$.return=F,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case x:return Y=Cu($.type,$.key,$.props,null,F.mode,Y),Cl(Y,$),Y.return=F,Y;case w:return $=kh($,F.mode,Y),$.return=F,$;case X:return $=fo($),de(F,$,Y)}if(q($)||B($))return $=oo($,F.mode,Y,null),$.return=F,$;if(typeof $.then=="function")return de(F,Mu($),Y);if($.$$typeof===A)return de(F,ku(F,$),Y);Ru(F,$)}return null}function Z(F,$,Y,ue){var qe=$!==null?$.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return qe!==null?null:N(F,$,""+Y,ue);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Y.key===qe?z(F,$,Y,ue):null;case w:return Y.key===qe?V(F,$,Y,ue):null;case X:return Y=fo(Y),Z(F,$,Y,ue)}if(q(Y)||B(Y))return qe!==null?null:oe(F,$,Y,ue,null);if(typeof Y.then=="function")return Z(F,$,Mu(Y),ue);if(Y.$$typeof===A)return Z(F,$,ku(F,Y),ue);Ru(F,Y)}return null}function te(F,$,Y,ue,qe){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return F=F.get(Y)||null,N($,F,""+ue,qe);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case x:return F=F.get(ue.key===null?Y:ue.key)||null,z($,F,ue,qe);case w:return F=F.get(ue.key===null?Y:ue.key)||null,V($,F,ue,qe);case X:return ue=fo(ue),te(F,$,Y,ue,qe)}if(q(ue)||B(ue))return F=F.get(Y)||null,oe($,F,ue,qe,null);if(typeof ue.then=="function")return te(F,$,Y,Mu(ue),qe);if(ue.$$typeof===A)return te(F,$,Y,ku($,ue),qe);Ru($,ue)}return null}function Ae(F,$,Y,ue){for(var qe=null,rt=null,Pe=$,Fe=$=0,Ze=null;Pe!==null&&Fe<Y.length;Fe++){Pe.index>Fe?(Ze=Pe,Pe=null):Ze=Pe.sibling;var nt=Z(F,Pe,Y[Fe],ue);if(nt===null){Pe===null&&(Pe=Ze);break}a&&Pe&&nt.alternate===null&&o(F,Pe),$=b(nt,$,Fe),rt===null?qe=nt:rt.sibling=nt,rt=nt,Pe=Ze}if(Fe===Y.length)return l(F,Pe),Qe&&ja(F,Fe),qe;if(Pe===null){for(;Fe<Y.length;Fe++)Pe=de(F,Y[Fe],ue),Pe!==null&&($=b(Pe,$,Fe),rt===null?qe=Pe:rt.sibling=Pe,rt=Pe);return Qe&&ja(F,Fe),qe}for(Pe=d(Pe);Fe<Y.length;Fe++)Ze=te(Pe,F,Fe,Y[Fe],ue),Ze!==null&&(a&&Ze.alternate!==null&&Pe.delete(Ze.key===null?Fe:Ze.key),$=b(Ze,$,Fe),rt===null?qe=Ze:rt.sibling=Ze,rt=Ze);return a&&Pe.forEach(function(Ri){return o(F,Ri)}),Qe&&ja(F,Fe),qe}function Le(F,$,Y,ue){if(Y==null)throw Error(n(151));for(var qe=null,rt=null,Pe=$,Fe=$=0,Ze=null,nt=Y.next();Pe!==null&&!nt.done;Fe++,nt=Y.next()){Pe.index>Fe?(Ze=Pe,Pe=null):Ze=Pe.sibling;var Ri=Z(F,Pe,nt.value,ue);if(Ri===null){Pe===null&&(Pe=Ze);break}a&&Pe&&Ri.alternate===null&&o(F,Pe),$=b(Ri,$,Fe),rt===null?qe=Ri:rt.sibling=Ri,rt=Ri,Pe=Ze}if(nt.done)return l(F,Pe),Qe&&ja(F,Fe),qe;if(Pe===null){for(;!nt.done;Fe++,nt=Y.next())nt=de(F,nt.value,ue),nt!==null&&($=b(nt,$,Fe),rt===null?qe=nt:rt.sibling=nt,rt=nt);return Qe&&ja(F,Fe),qe}for(Pe=d(Pe);!nt.done;Fe++,nt=Y.next())nt=te(Pe,F,Fe,nt.value,ue),nt!==null&&(a&&nt.alternate!==null&&Pe.delete(nt.key===null?Fe:nt.key),$=b(nt,$,Fe),rt===null?qe=nt:rt.sibling=nt,rt=nt);return a&&Pe.forEach(function(KR){return o(F,KR)}),Qe&&ja(F,Fe),qe}function mt(F,$,Y,ue){if(typeof Y=="object"&&Y!==null&&Y.type===j&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:e:{for(var qe=Y.key;$!==null;){if($.key===qe){if(qe=Y.type,qe===j){if($.tag===7){l(F,$.sibling),ue=v($,Y.props.children),ue.return=F,F=ue;break e}}else if($.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===X&&fo(qe)===$.type){l(F,$.sibling),ue=v($,Y.props),Cl(ue,Y),ue.return=F,F=ue;break e}l(F,$);break}else o(F,$);$=$.sibling}Y.type===j?(ue=oo(Y.props.children,F.mode,ue,Y.key),ue.return=F,F=ue):(ue=Cu(Y.type,Y.key,Y.props,null,F.mode,ue),Cl(ue,Y),ue.return=F,F=ue)}return E(F);case w:e:{for(qe=Y.key;$!==null;){if($.key===qe)if($.tag===4&&$.stateNode.containerInfo===Y.containerInfo&&$.stateNode.implementation===Y.implementation){l(F,$.sibling),ue=v($,Y.children||[]),ue.return=F,F=ue;break e}else{l(F,$);break}else o(F,$);$=$.sibling}ue=kh(Y,F.mode,ue),ue.return=F,F=ue}return E(F);case X:return Y=fo(Y),mt(F,$,Y,ue)}if(q(Y))return Ae(F,$,Y,ue);if(B(Y)){if(qe=B(Y),typeof qe!="function")throw Error(n(150));return Y=qe.call(Y),Le(F,$,Y,ue)}if(typeof Y.then=="function")return mt(F,$,Mu(Y),ue);if(Y.$$typeof===A)return mt(F,$,ku(F,Y),ue);Ru(F,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,$!==null&&$.tag===6?(l(F,$.sibling),ue=v($,Y),ue.return=F,F=ue):(l(F,$),ue=Nh(Y,F.mode,ue),ue.return=F,F=ue),E(F)):l(F,$)}return function(F,$,Y,ue){try{Ol=0;var qe=mt(F,$,Y,ue);return hs=null,qe}catch(Pe){if(Pe===ms||Pe===Tu)throw Pe;var rt=rn(29,Pe,null,F.mode);return rt.lanes=ue,rt.return=F,rt}finally{}}}var ho=Px(!0),Mx=Px(!1),yi=!1;function $h(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function bi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function _i(a,o,l){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(it&2)!==0){var v=d.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),d.pending=o,o=Ou(a),vx(a,null,l),o}return Eu(a,d,o,l),Ou(a)}function Al(a,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,l|=d,o.lanes=l,fu(a,l)}}function Fh(a,o){var l=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var v=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?v=b=E:b=b.next=E,l=l.next}while(l!==null);b===null?v=b=o:b=b.next=o}else v=b=o;l={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=o:a.next=o,l.lastBaseUpdate=o}var Kh=!1;function Nl(){if(Kh){var a=fs;if(a!==null)throw a}}function kl(a,o,l,d){Kh=!1;var v=a.updateQueue;yi=!1;var b=v.firstBaseUpdate,E=v.lastBaseUpdate,N=v.shared.pending;if(N!==null){v.shared.pending=null;var z=N,V=z.next;z.next=null,E===null?b=V:E.next=V,E=z;var oe=a.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==E&&(N===null?oe.firstBaseUpdate=V:N.next=V,oe.lastBaseUpdate=z))}if(b!==null){var de=v.baseState;E=0,oe=V=z=null,N=b;do{var Z=N.lane&-536870913,te=Z!==N.lane;if(te?(Xe&Z)===Z:(d&Z)===Z){Z!==0&&Z===ds&&(Kh=!0),oe!==null&&(oe=oe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ae=a,Le=N;Z=o;var mt=l;switch(Le.tag){case 1:if(Ae=Le.payload,typeof Ae=="function"){de=Ae.call(mt,de,Z);break e}de=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Le.payload,Z=typeof Ae=="function"?Ae.call(mt,de,Z):Ae,Z==null)break e;de=g({},de,Z);break e;case 2:yi=!0}}Z=N.callback,Z!==null&&(a.flags|=64,te&&(a.flags|=8192),te=v.callbacks,te===null?v.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(V=oe=te,z=de):oe=oe.next=te,E|=Z;if(N=N.next,N===null){if(N=v.shared.pending,N===null)break;te=N,N=te.next,te.next=null,v.lastBaseUpdate=te,v.shared.pending=null}}while(!0);oe===null&&(z=de),v.baseState=z,v.firstBaseUpdate=V,v.lastBaseUpdate=oe,b===null&&(v.shared.lanes=0),Ei|=E,a.lanes=E,a.memoizedState=de}}function Rx(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function qx(a,o){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)Rx(l[a],o)}var ps=je(null),qu=je(0);function zx(a,o){a=Ma,H(qu,a),H(ps,o),Ma=a|o.baseLanes}function Yh(){H(qu,Ma),H(ps,ps.current)}function Gh(){Ma=qu.current,J(ps),J(qu)}var nn=je(null),Nn=null;function xi(a){var o=a.alternate;H(Yt,Yt.current&1),H(nn,a),Nn===null&&(o===null||ps.current!==null||o.memoizedState!==null)&&(Nn=a)}function Vh(a){H(Yt,Yt.current),H(nn,a),Nn===null&&(Nn=a)}function Lx(a){a.tag===22?(H(Yt,Yt.current),H(nn,a),Nn===null&&(Nn=a)):wi()}function wi(){H(Yt,Yt.current),H(nn,nn.current)}function an(a){J(nn),Nn===a&&(Nn=null),J(Yt)}var Yt=je(0);function zu(a){for(var o=a;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||eg(l)||tg(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Oa=0,He=null,dt=null,Zt=null,Lu=!1,gs=!1,po=!1,Iu=0,Dl=0,vs=null,R2=0;function $t(){throw Error(n(321))}function Wh(a,o){if(o===null)return!1;for(var l=0;l<o.length&&l<a.length;l++)if(!tn(a[l],o[l]))return!1;return!0}function Xh(a,o,l,d,v,b){return Oa=b,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=a===null||a.memoizedState===null?xw:dp,po=!1,b=l(d,v),po=!1,gs&&(b=Ux(o,l,d,v)),Ix(a),b}function Ix(a){R.H=Ml;var o=dt!==null&&dt.next!==null;if(Oa=0,Zt=dt=He=null,Lu=!1,Dl=0,vs=null,o)throw Error(n(300));a===null||Qt||(a=a.dependencies,a!==null&&Nu(a)&&(Qt=!0))}function Ux(a,o,l,d){He=a;var v=0;do{if(gs&&(vs=null),Dl=0,gs=!1,25<=v)throw Error(n(301));if(v+=1,Zt=dt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}R.H=ww,b=o(l,d)}while(gs);return b}function q2(){var a=R.H,o=a.useState()[0];return o=typeof o.then=="function"?Tl(o):o,a=a.useState()[0],(dt!==null?dt.memoizedState:null)!==a&&(He.flags|=1024),o}function Zh(){var a=Iu!==0;return Iu=0,a}function Qh(a,o,l){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~l}function Jh(a){if(Lu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Lu=!1}Oa=0,Zt=dt=He=null,gs=!1,Dl=Iu=0,vs=null}function qr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?He.memoizedState=Zt=a:Zt=Zt.next=a,Zt}function Gt(){if(dt===null){var a=He.alternate;a=a!==null?a.memoizedState:null}else a=dt.next;var o=Zt===null?He.memoizedState:Zt.next;if(o!==null)Zt=o,dt=a;else{if(a===null)throw He.alternate===null?Error(n(467)):Error(n(310));dt=a,a={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Zt===null?He.memoizedState=Zt=a:Zt=Zt.next=a}return Zt}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(a){var o=Dl;return Dl+=1,vs===null&&(vs=[]),a=kx(vs,a,o),o=He,(Zt===null?o.memoizedState:Zt.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?xw:dp),a}function Bu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Tl(a);if(a.$$typeof===A)return wr(a)}throw Error(n(438,String(a)))}function ep(a){var o=null,l=He.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var d=He.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Uu(),He.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(a),d=0;d<a;d++)l[d]=ae;return o.index++,l}function Ca(a,o){return typeof o=="function"?o(a):o}function $u(a){var o=Gt();return tp(o,dt,a)}function tp(a,o,l){var d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=l;var v=a.baseQueue,b=d.pending;if(b!==null){if(v!==null){var E=v.next;v.next=b.next,b.next=E}o.baseQueue=v=b,d.pending=null}if(b=a.baseState,v===null)a.memoizedState=b;else{o=v.next;var N=E=null,z=null,V=o,oe=!1;do{var de=V.lane&-536870913;if(de!==V.lane?(Xe&de)===de:(Oa&de)===de){var Z=V.revertLane;if(Z===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),de===ds&&(oe=!0);else if((Oa&Z)===Z){V=V.next,Z===ds&&(oe=!0);continue}else de={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},z===null?(N=z=de,E=b):z=z.next=de,He.lanes|=Z,Ei|=Z;de=V.action,po&&l(b,de),b=V.hasEagerState?V.eagerState:l(b,de)}else Z={lane:de,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},z===null?(N=z=Z,E=b):z=z.next=Z,He.lanes|=de,Ei|=de;V=V.next}while(V!==null&&V!==o);if(z===null?E=b:z.next=N,!tn(b,a.memoizedState)&&(Qt=!0,oe&&(l=fs,l!==null)))throw l;a.memoizedState=b,a.baseState=E,a.baseQueue=z,d.lastRenderedState=b}return v===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function rp(a){var o=Gt(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var d=l.dispatch,v=l.pending,b=o.memoizedState;if(v!==null){l.pending=null;var E=v=v.next;do b=a(b,E.action),E=E.next;while(E!==v);tn(b,o.memoizedState)||(Qt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),l.lastRenderedState=b}return[b,d]}function Bx(a,o,l){var d=He,v=Gt(),b=Qe;if(b){if(l===void 0)throw Error(n(407));l=l()}else l=o();var E=!tn((dt||v).memoizedState,l);if(E&&(v.memoizedState=l,Qt=!0),v=v.queue,ip(Fx.bind(null,d,v,a),[a]),v.getSnapshot!==o||E||Zt!==null&&Zt.memoizedState.tag&1){if(d.flags|=2048,ys(9,{destroy:void 0},Hx.bind(null,d,v,l,o),null),yt===null)throw Error(n(349));b||(Oa&127)!==0||$x(d,o,l)}return l}function $x(a,o,l){a.flags|=16384,a={getSnapshot:o,value:l},o=He.updateQueue,o===null?(o=Uu(),He.updateQueue=o,o.stores=[a]):(l=o.stores,l===null?o.stores=[a]:l.push(a))}function Hx(a,o,l,d){o.value=l,o.getSnapshot=d,Kx(o)&&Yx(a)}function Fx(a,o,l){return l(function(){Kx(o)&&Yx(a)})}function Kx(a){var o=a.getSnapshot;a=a.value;try{var l=o();return!tn(a,l)}catch{return!0}}function Yx(a){var o=io(a,2);o!==null&&Vr(o,a,2)}function np(a){var o=qr();if(typeof a=="function"){var l=a;if(a=l(),po){Ut(!0);try{l()}finally{Ut(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:a},o}function Gx(a,o,l,d){return a.baseState=l,tp(a,dt,typeof d=="function"?d:Ca)}function z2(a,o,l,d,v){if(Ku(a))throw Error(n(485));if(a=o.action,a!==null){var b={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};R.T!==null?l(!0):b.isTransition=!1,d(b),l=o.pending,l===null?(b.next=o.pending=b,Vx(o,b)):(b.next=l.next,o.pending=l.next=b)}}function Vx(a,o){var l=o.action,d=o.payload,v=a.state;if(o.isTransition){var b=R.T,E={};R.T=E;try{var N=l(v,d),z=R.S;z!==null&&z(E,N),Wx(a,o,N)}catch(V){ap(a,o,V)}finally{b!==null&&E.types!==null&&(b.types=E.types),R.T=b}}else try{b=l(v,d),Wx(a,o,b)}catch(V){ap(a,o,V)}}function Wx(a,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Xx(a,o,d)},function(d){return ap(a,o,d)}):Xx(a,o,l)}function Xx(a,o,l){o.status="fulfilled",o.value=l,Zx(o),a.state=l,o=a.pending,o!==null&&(l=o.next,l===o?a.pending=null:(l=l.next,o.next=l,Vx(a,l)))}function ap(a,o,l){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=l,Zx(o),o=o.next;while(o!==d)}a.action=null}function Zx(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Qx(a,o){return o}function Jx(a,o){if(Qe){var l=yt.formState;if(l!==null){e:{var d=He;if(Qe){if(St){t:{for(var v=St,b=An;v.nodeType!==8;){if(!b){v=null;break t}if(v=kn(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){St=kn(v.nextSibling),d=v.data==="F!";break e}}gi(d)}d=!1}d&&(o=l[0])}}return l=qr(),l.memoizedState=l.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qx,lastRenderedState:o},l.queue=d,l=yw.bind(null,He,d),d.dispatch=l,d=np(!1),b=up.bind(null,He,!1,d.queue),d=qr(),v={state:o,dispatch:null,action:a,pending:null},d.queue=v,l=z2.bind(null,He,v,b,l),v.dispatch=l,d.memoizedState=a,[o,l,!1]}function ew(a){var o=Gt();return tw(o,dt,a)}function tw(a,o,l){if(o=tp(a,o,Qx)[0],a=$u(Ca)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Tl(o)}catch(E){throw E===ms?Tu:E}else d=o;o=Gt();var v=o.queue,b=v.dispatch;return l!==o.memoizedState&&(He.flags|=2048,ys(9,{destroy:void 0},L2.bind(null,v,l),null)),[d,b,a]}function L2(a,o){a.action=o}function rw(a){var o=Gt(),l=dt;if(l!==null)return tw(o,l,a);Gt(),o=o.memoizedState,l=Gt();var d=l.queue.dispatch;return l.memoizedState=a,[o,d,!1]}function ys(a,o,l,d){return a={tag:a,create:l,deps:d,inst:o,next:null},o=He.updateQueue,o===null&&(o=Uu(),He.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=a.next=a:(d=l.next,l.next=a,a.next=d,o.lastEffect=a),a}function nw(){return Gt().memoizedState}function Hu(a,o,l,d){var v=qr();He.flags|=a,v.memoizedState=ys(1|o,{destroy:void 0},l,d===void 0?null:d)}function Fu(a,o,l,d){var v=Gt();d=d===void 0?null:d;var b=v.memoizedState.inst;dt!==null&&d!==null&&Wh(d,dt.memoizedState.deps)?v.memoizedState=ys(o,b,l,d):(He.flags|=a,v.memoizedState=ys(1|o,b,l,d))}function aw(a,o){Hu(8390656,8,a,o)}function ip(a,o){Fu(2048,8,a,o)}function I2(a){He.flags|=4;var o=He.updateQueue;if(o===null)o=Uu(),He.updateQueue=o,o.events=[a];else{var l=o.events;l===null?o.events=[a]:l.push(a)}}function iw(a){var o=Gt().memoizedState;return I2({ref:o,nextImpl:a}),function(){if((it&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function ow(a,o){return Fu(4,2,a,o)}function sw(a,o){return Fu(4,4,a,o)}function lw(a,o){if(typeof o=="function"){a=a();var l=o(a);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function cw(a,o,l){l=l!=null?l.concat([a]):null,Fu(4,4,lw.bind(null,o,a),l)}function op(){}function uw(a,o){var l=Gt();o=o===void 0?null:o;var d=l.memoizedState;return o!==null&&Wh(o,d[1])?d[0]:(l.memoizedState=[a,o],a)}function dw(a,o){var l=Gt();o=o===void 0?null:o;var d=l.memoizedState;if(o!==null&&Wh(o,d[1]))return d[0];if(d=a(),po){Ut(!0);try{a()}finally{Ut(!1)}}return l.memoizedState=[d,o],d}function sp(a,o,l){return l===void 0||(Oa&1073741824)!==0&&(Xe&261930)===0?a.memoizedState=o:(a.memoizedState=l,a=fj(),He.lanes|=a,Ei|=a,l)}function fw(a,o,l,d){return tn(l,o)?l:ps.current!==null?(a=sp(a,l,d),tn(a,o)||(Qt=!0),a):(Oa&42)===0||(Oa&1073741824)!==0&&(Xe&261930)===0?(Qt=!0,a.memoizedState=l):(a=fj(),He.lanes|=a,Ei|=a,o)}function mw(a,o,l,d,v){var b=I.p;I.p=b!==0&&8>b?b:8;var E=R.T,N={};R.T=N,up(a,!1,o,l);try{var z=v(),V=R.S;if(V!==null&&V(N,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var oe=M2(z,d);Pl(a,o,oe,ln(a))}else Pl(a,o,d,ln(a))}catch(de){Pl(a,o,{then:function(){},status:"rejected",reason:de},ln())}finally{I.p=b,E!==null&&N.types!==null&&(E.types=N.types),R.T=E}}function U2(){}function lp(a,o,l,d){if(a.tag!==5)throw Error(n(476));var v=hw(a).queue;mw(a,v,o,ee,l===null?U2:function(){return pw(a),l(d)})}function hw(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:ee},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:l},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function pw(a){var o=hw(a);o.next===null&&(o=a.alternate.memoizedState),Pl(a,o.next.queue,{},ln())}function cp(){return wr(Xl)}function gw(){return Gt().memoizedState}function vw(){return Gt().memoizedState}function B2(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var l=ln();a=bi(l);var d=_i(o,a,l);d!==null&&(Vr(d,o,l),Al(d,o,l)),o={cache:Lh()},a.payload=o;return}o=o.return}}function $2(a,o,l){var d=ln();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ku(a)?bw(o,l):(l=Ch(a,o,l,d),l!==null&&(Vr(l,a,d),_w(l,o,d)))}function yw(a,o,l){var d=ln();Pl(a,o,l,d)}function Pl(a,o,l,d){var v={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ku(a))bw(o,v);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var E=o.lastRenderedState,N=b(E,l);if(v.hasEagerState=!0,v.eagerState=N,tn(N,E))return Eu(a,o,v,0),yt===null&&Su(),!1}catch{}finally{}if(l=Ch(a,o,v,d),l!==null)return Vr(l,a,d),_w(l,o,d),!0}return!1}function up(a,o,l,d){if(d={lane:2,revertLane:$p(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ku(a)){if(o)throw Error(n(479))}else o=Ch(a,l,d,2),o!==null&&Vr(o,a,2)}function Ku(a){var o=a.alternate;return a===He||o!==null&&o===He}function bw(a,o){gs=Lu=!0;var l=a.pending;l===null?o.next=o:(o.next=l.next,l.next=o),a.pending=o}function _w(a,o,l){if((l&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,l|=d,o.lanes=l,fu(a,l)}}var Ml={readContext:wr,use:Bu,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};Ml.useEffectEvent=$t;var xw={readContext:wr,use:Bu,useCallback:function(a,o){return qr().memoizedState=[a,o===void 0?null:o],a},useContext:wr,useEffect:aw,useImperativeHandle:function(a,o,l){l=l!=null?l.concat([a]):null,Hu(4194308,4,lw.bind(null,o,a),l)},useLayoutEffect:function(a,o){return Hu(4194308,4,a,o)},useInsertionEffect:function(a,o){Hu(4,2,a,o)},useMemo:function(a,o){var l=qr();o=o===void 0?null:o;var d=a();if(po){Ut(!0);try{a()}finally{Ut(!1)}}return l.memoizedState=[d,o],d},useReducer:function(a,o,l){var d=qr();if(l!==void 0){var v=l(o);if(po){Ut(!0);try{l(o)}finally{Ut(!1)}}}else v=o;return d.memoizedState=d.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},d.queue=a,a=a.dispatch=$2.bind(null,He,a),[d.memoizedState,a]},useRef:function(a){var o=qr();return a={current:a},o.memoizedState=a},useState:function(a){a=np(a);var o=a.queue,l=yw.bind(null,He,o);return o.dispatch=l,[a.memoizedState,l]},useDebugValue:op,useDeferredValue:function(a,o){var l=qr();return sp(l,a,o)},useTransition:function(){var a=np(!1);return a=mw.bind(null,He,a.queue,!0,!1),qr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,l){var d=He,v=qr();if(Qe){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),yt===null)throw Error(n(349));(Xe&127)!==0||$x(d,o,l)}v.memoizedState=l;var b={value:l,getSnapshot:o};return v.queue=b,aw(Fx.bind(null,d,b,a),[a]),d.flags|=2048,ys(9,{destroy:void 0},Hx.bind(null,d,b,l,o),null),l},useId:function(){var a=qr(),o=yt.identifierPrefix;if(Qe){var l=aa,d=na;l=(d&~(1<<32-xt(d)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Iu++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=R2++,o="_"+o+"r_"+l.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:cp,useFormState:Jx,useActionState:Jx,useOptimistic:function(a){var o=qr();o.memoizedState=o.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=up.bind(null,He,!0,l),l.dispatch=o,[a,o]},useMemoCache:ep,useCacheRefresh:function(){return qr().memoizedState=B2.bind(null,He)},useEffectEvent:function(a){var o=qr(),l={impl:a};return o.memoizedState=l,function(){if((it&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},dp={readContext:wr,use:Bu,useCallback:uw,useContext:wr,useEffect:ip,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:sw,useMemo:dw,useReducer:$u,useRef:nw,useState:function(){return $u(Ca)},useDebugValue:op,useDeferredValue:function(a,o){var l=Gt();return fw(l,dt.memoizedState,a,o)},useTransition:function(){var a=$u(Ca)[0],o=Gt().memoizedState;return[typeof a=="boolean"?a:Tl(a),o]},useSyncExternalStore:Bx,useId:gw,useHostTransitionStatus:cp,useFormState:ew,useActionState:ew,useOptimistic:function(a,o){var l=Gt();return Gx(l,dt,a,o)},useMemoCache:ep,useCacheRefresh:vw};dp.useEffectEvent=iw;var ww={readContext:wr,use:Bu,useCallback:uw,useContext:wr,useEffect:ip,useImperativeHandle:cw,useInsertionEffect:ow,useLayoutEffect:sw,useMemo:dw,useReducer:rp,useRef:nw,useState:function(){return rp(Ca)},useDebugValue:op,useDeferredValue:function(a,o){var l=Gt();return dt===null?sp(l,a,o):fw(l,dt.memoizedState,a,o)},useTransition:function(){var a=rp(Ca)[0],o=Gt().memoizedState;return[typeof a=="boolean"?a:Tl(a),o]},useSyncExternalStore:Bx,useId:gw,useHostTransitionStatus:cp,useFormState:rw,useActionState:rw,useOptimistic:function(a,o){var l=Gt();return dt!==null?Gx(l,dt,a,o):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:ep,useCacheRefresh:vw};ww.useEffectEvent=iw;function fp(a,o,l,d){o=a.memoizedState,l=l(d,o),l=l==null?o:g({},o,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var mp={enqueueSetState:function(a,o,l){a=a._reactInternals;var d=ln(),v=bi(d);v.payload=o,l!=null&&(v.callback=l),o=_i(a,v,d),o!==null&&(Vr(o,a,d),Al(o,a,d))},enqueueReplaceState:function(a,o,l){a=a._reactInternals;var d=ln(),v=bi(d);v.tag=1,v.payload=o,l!=null&&(v.callback=l),o=_i(a,v,d),o!==null&&(Vr(o,a,d),Al(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var l=ln(),d=bi(l);d.tag=2,o!=null&&(d.callback=o),o=_i(a,d,l),o!==null&&(Vr(o,a,l),Al(o,a,l))}};function jw(a,o,l,d,v,b,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,b,E):o.prototype&&o.prototype.isPureReactComponent?!_l(l,d)||!_l(v,b):!0}function Sw(a,o,l,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==a&&mp.enqueueReplaceState(o,o.state,null)}function go(a,o){var l=o;if("ref"in o){l={};for(var d in o)d!=="ref"&&(l[d]=o[d])}if(a=a.defaultProps){l===o&&(l=g({},l));for(var v in a)l[v]===void 0&&(l[v]=a[v])}return l}function Ew(a){ju(a)}function Ow(a){console.error(a)}function Cw(a){ju(a)}function Yu(a,o){try{var l=a.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Aw(a,o,l){try{var d=a.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function hp(a,o,l){return l=bi(l),l.tag=3,l.payload={element:null},l.callback=function(){Yu(a,o)},l}function Nw(a){return a=bi(a),a.tag=3,a}function kw(a,o,l,d){var v=l.type.getDerivedStateFromError;if(typeof v=="function"){var b=d.value;a.payload=function(){return v(b)},a.callback=function(){Aw(o,l,d)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){Aw(o,l,d),typeof v!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function H2(a,o,l,d,v){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=l.alternate,o!==null&&us(o,l,v,!0),l=nn.current,l!==null){switch(l.tag){case 31:case 13:return Nn===null?ad():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=v,d===Pu?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([d]):o.add(d),Ip(a,d,v)),!1;case 22:return l.flags|=65536,d===Pu?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([d]):l.add(d)),Ip(a,d,v)),!1}throw Error(n(435,l.tag))}return Ip(a,d,v),ad(),!1}if(Qe)return o=nn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,d!==Ph&&(a=Error(n(422),{cause:d}),jl(En(a,l)))):(d!==Ph&&(o=Error(n(423),{cause:d}),jl(En(o,l))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,d=En(d,l),v=hp(a.stateNode,d,v),Fh(a,v),Ht!==4&&(Ht=2)),!1;var b=Error(n(520),{cause:d});if(b=En(b,l),$l===null?$l=[b]:$l.push(b),Ht!==4&&(Ht=2),o===null)return!0;d=En(d,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,a=v&-v,l.lanes|=a,a=hp(l.stateNode,d,a),Fh(l,a),!1;case 1:if(o=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Oi===null||!Oi.has(b))))return l.flags|=65536,v&=-v,l.lanes|=v,v=Nw(v),kw(v,a,l,d),Fh(l,v),!1}l=l.return}while(l!==null);return!1}var pp=Error(n(461)),Qt=!1;function jr(a,o,l,d){o.child=a===null?Mx(o,null,l,d):ho(o,a.child,l,d)}function Dw(a,o,l,d,v){l=l.render;var b=o.ref;if("ref"in d){var E={};for(var N in d)N!=="ref"&&(E[N]=d[N])}else E=d;return co(o),d=Xh(a,o,l,E,b,v),N=Zh(),a!==null&&!Qt?(Qh(a,o,v),Aa(a,o,v)):(Qe&&N&&Dh(o),o.flags|=1,jr(a,o,d,v),o.child)}function Tw(a,o,l,d,v){if(a===null){var b=l.type;return typeof b=="function"&&!Ah(b)&&b.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=b,Pw(a,o,b,d,v)):(a=Cu(l.type,null,d,o,o.mode,v),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!jp(a,v)){var E=b.memoizedProps;if(l=l.compare,l=l!==null?l:_l,l(E,d)&&a.ref===o.ref)return Aa(a,o,v)}return o.flags|=1,a=wa(b,d),a.ref=o.ref,a.return=o,o.child=a}function Pw(a,o,l,d,v){if(a!==null){var b=a.memoizedProps;if(_l(b,d)&&a.ref===o.ref)if(Qt=!1,o.pendingProps=d=b,jp(a,v))(a.flags&131072)!==0&&(Qt=!0);else return o.lanes=a.lanes,Aa(a,o,v)}return gp(a,o,l,d,v)}function Mw(a,o,l,d){var v=d.children,b=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,a!==null){for(d=o.child=a.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~b}else d=0,o.child=null;return Rw(a,o,b,l,d)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Du(o,b!==null?b.cachePool:null),b!==null?zx(o,b):Yh(),Lx(o);else return d=o.lanes=536870912,Rw(a,o,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Du(o,b.cachePool),zx(o,b),wi(),o.memoizedState=null):(a!==null&&Du(o,null),Yh(),wi());return jr(a,o,v,l),o.child}function Rl(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Rw(a,o,l,d,v){var b=Uh();return b=b===null?null:{parent:Xt._currentValue,pool:b},o.memoizedState={baseLanes:l,cachePool:b},a!==null&&Du(o,null),Yh(),Lx(o),a!==null&&us(a,o,d,!0),o.childLanes=v,null}function Gu(a,o){return o=Wu({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function qw(a,o,l){return ho(o,a.child,null,l),a=Gu(o,o.pendingProps),a.flags|=2,an(o),o.memoizedState=null,a}function F2(a,o,l){var d=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Qe){if(d.mode==="hidden")return a=Gu(o,d),o.lanes=536870912,Rl(null,a);if(Vh(o),(a=St)?(a=Vj(a,An),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:hi!==null?{id:na,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},l=bx(a),l.return=o,o.child=l,xr=o,St=null)):a=null,a===null)throw gi(o);return o.lanes=536870912,null}return Gu(o,d)}var b=a.memoizedState;if(b!==null){var E=b.dehydrated;if(Vh(o),v)if(o.flags&256)o.flags&=-257,o=qw(a,o,l);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(n(558));else if(Qt||us(a,o,l,!1),v=(l&a.childLanes)!==0,Qt||v){if(d=yt,d!==null&&(E=Bn(d,l),E!==0&&E!==b.retryLane))throw b.retryLane=E,io(a,E),Vr(d,a,E),pp;ad(),o=qw(a,o,l)}else a=b.treeContext,St=kn(E.nextSibling),xr=o,Qe=!0,pi=null,An=!1,a!==null&&wx(o,a),o=Gu(o,d),o.flags|=4096;return o}return a=wa(a.child,{mode:d.mode,children:d.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Vu(a,o){var l=o.ref;if(l===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(a===null||a.ref!==l)&&(o.flags|=4194816)}}function gp(a,o,l,d,v){return co(o),l=Xh(a,o,l,d,void 0,v),d=Zh(),a!==null&&!Qt?(Qh(a,o,v),Aa(a,o,v)):(Qe&&d&&Dh(o),o.flags|=1,jr(a,o,l,v),o.child)}function zw(a,o,l,d,v,b){return co(o),o.updateQueue=null,l=Ux(o,d,l,v),Ix(a),d=Zh(),a!==null&&!Qt?(Qh(a,o,b),Aa(a,o,b)):(Qe&&d&&Dh(o),o.flags|=1,jr(a,o,l,b),o.child)}function Lw(a,o,l,d,v){if(co(o),o.stateNode===null){var b=os,E=l.contextType;typeof E=="object"&&E!==null&&(b=wr(E)),b=new l(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=mp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},$h(o),E=l.contextType,b.context=typeof E=="object"&&E!==null?wr(E):os,b.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(fp(o,l,E,d),b.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&mp.enqueueReplaceState(b,b.state,null),kl(o,d,b,v),Nl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){b=o.stateNode;var N=o.memoizedProps,z=go(l,N);b.props=z;var V=b.context,oe=l.contextType;E=os,typeof oe=="object"&&oe!==null&&(E=wr(oe));var de=l.getDerivedStateFromProps;oe=typeof de=="function"||typeof b.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,oe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N||V!==E)&&Sw(o,b,d,E),yi=!1;var Z=o.memoizedState;b.state=Z,kl(o,d,b,v),Nl(),V=o.memoizedState,N||Z!==V||yi?(typeof de=="function"&&(fp(o,l,de,d),V=o.memoizedState),(z=yi||jw(o,l,z,d,Z,V,E))?(oe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=V),b.props=d,b.state=V,b.context=E,d=z):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,Hh(a,o),E=o.memoizedProps,oe=go(l,E),b.props=oe,de=o.pendingProps,Z=b.context,V=l.contextType,z=os,typeof V=="object"&&V!==null&&(z=wr(V)),N=l.getDerivedStateFromProps,(V=typeof N=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==de||Z!==z)&&Sw(o,b,d,z),yi=!1,Z=o.memoizedState,b.state=Z,kl(o,d,b,v),Nl();var te=o.memoizedState;E!==de||Z!==te||yi||a!==null&&a.dependencies!==null&&Nu(a.dependencies)?(typeof N=="function"&&(fp(o,l,N,d),te=o.memoizedState),(oe=yi||jw(o,l,oe,d,Z,te,z)||a!==null&&a.dependencies!==null&&Nu(a.dependencies))?(V||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,te,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,te,z)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=te),b.props=d,b.state=te,b.context=z,d=oe):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),d=!1)}return b=d,Vu(a,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&d?(o.child=ho(o,a.child,null,v),o.child=ho(o,null,l,v)):jr(a,o,l,v),o.memoizedState=b.state,a=o.child):a=Aa(a,o,v),a}function Iw(a,o,l,d){return so(),o.flags|=256,jr(a,o,l,d),o.child}var vp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yp(a){return{baseLanes:a,cachePool:Ax()}}function bp(a,o,l){return a=a!==null?a.childLanes&~l:0,o&&(a|=sn),a}function Uw(a,o,l){var d=o.pendingProps,v=!1,b=(o.flags&128)!==0,E;if((E=b)||(E=a!==null&&a.memoizedState===null?!1:(Yt.current&2)!==0),E&&(v=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,a===null){if(Qe){if(v?xi(o):wi(),(a=St)?(a=Vj(a,An),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:hi!==null?{id:na,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},l=bx(a),l.return=o,o.child=l,xr=o,St=null)):a=null,a===null)throw gi(o);return tg(a)?o.lanes=32:o.lanes=536870912,null}var N=d.children;return d=d.fallback,v?(wi(),v=o.mode,N=Wu({mode:"hidden",children:N},v),d=oo(d,v,l,null),N.return=o,d.return=o,N.sibling=d,o.child=N,d=o.child,d.memoizedState=yp(l),d.childLanes=bp(a,E,l),o.memoizedState=vp,Rl(null,d)):(xi(o),_p(o,N))}var z=a.memoizedState;if(z!==null&&(N=z.dehydrated,N!==null)){if(b)o.flags&256?(xi(o),o.flags&=-257,o=xp(a,o,l)):o.memoizedState!==null?(wi(),o.child=a.child,o.flags|=128,o=null):(wi(),N=d.fallback,v=o.mode,d=Wu({mode:"visible",children:d.children},v),N=oo(N,v,l,null),N.flags|=2,d.return=o,N.return=o,d.sibling=N,o.child=d,ho(o,a.child,null,l),d=o.child,d.memoizedState=yp(l),d.childLanes=bp(a,E,l),o.memoizedState=vp,o=Rl(null,d));else if(xi(o),tg(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var V=E.dgst;E=V,d=Error(n(419)),d.stack="",d.digest=E,jl({value:d,source:null,stack:null}),o=xp(a,o,l)}else if(Qt||us(a,o,l,!1),E=(l&a.childLanes)!==0,Qt||E){if(E=yt,E!==null&&(d=Bn(E,l),d!==0&&d!==z.retryLane))throw z.retryLane=d,io(a,d),Vr(E,a,d),pp;eg(N)||ad(),o=xp(a,o,l)}else eg(N)?(o.flags|=192,o.child=a.child,o=null):(a=z.treeContext,St=kn(N.nextSibling),xr=o,Qe=!0,pi=null,An=!1,a!==null&&wx(o,a),o=_p(o,d.children),o.flags|=4096);return o}return v?(wi(),N=d.fallback,v=o.mode,z=a.child,V=z.sibling,d=wa(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,V!==null?N=wa(V,N):(N=oo(N,v,l,null),N.flags|=2),N.return=o,d.return=o,d.sibling=N,o.child=d,Rl(null,d),d=o.child,N=a.child.memoizedState,N===null?N=yp(l):(v=N.cachePool,v!==null?(z=Xt._currentValue,v=v.parent!==z?{parent:z,pool:z}:v):v=Ax(),N={baseLanes:N.baseLanes|l,cachePool:v}),d.memoizedState=N,d.childLanes=bp(a,E,l),o.memoizedState=vp,Rl(a.child,d)):(xi(o),l=a.child,a=l.sibling,l=wa(l,{mode:"visible",children:d.children}),l.return=o,l.sibling=null,a!==null&&(E=o.deletions,E===null?(o.deletions=[a],o.flags|=16):E.push(a)),o.child=l,o.memoizedState=null,l)}function _p(a,o){return o=Wu({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Wu(a,o){return a=rn(22,a,null,o),a.lanes=0,a}function xp(a,o,l){return ho(o,a.child,null,l),a=_p(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Bw(a,o,l){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),qh(a.return,o,l)}function wp(a,o,l,d,v,b){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:v,treeForkCount:b}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=d,E.tail=l,E.tailMode=v,E.treeForkCount=b)}function $w(a,o,l){var d=o.pendingProps,v=d.revealOrder,b=d.tail;d=d.children;var E=Yt.current,N=(E&2)!==0;if(N?(E=E&1|2,o.flags|=128):E&=1,H(Yt,E),jr(a,o,d,l),d=Qe?wl:0,!N&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Bw(a,l,o);else if(a.tag===19)Bw(a,l,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(v){case"forwards":for(l=o.child,v=null;l!==null;)a=l.alternate,a!==null&&zu(a)===null&&(v=l),l=l.sibling;l=v,l===null?(v=o.child,o.child=null):(v=l.sibling,l.sibling=null),wp(o,!1,v,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,v=o.child,o.child=null;v!==null;){if(a=v.alternate,a!==null&&zu(a)===null){o.child=v;break}a=v.sibling,v.sibling=l,l=v,v=a}wp(o,!0,l,null,b,d);break;case"together":wp(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Aa(a,o,l){if(a!==null&&(o.dependencies=a.dependencies),Ei|=o.lanes,(l&o.childLanes)===0)if(a!==null){if(us(a,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,l=wa(a,a.pendingProps),o.child=l,l.return=o;a.sibling!==null;)a=a.sibling,l=l.sibling=wa(a,a.pendingProps),l.return=o;l.sibling=null}return o.child}function jp(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Nu(a)))}function K2(a,o,l){switch(o.tag){case 3:Ie(o,o.stateNode.containerInfo),vi(o,Xt,a.memoizedState.cache),so();break;case 27:case 5:Ee(o);break;case 4:Ie(o,o.stateNode.containerInfo);break;case 10:vi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Vh(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(xi(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Uw(a,o,l):(xi(o),a=Aa(a,o,l),a!==null?a.sibling:null);xi(o);break;case 19:var v=(a.flags&128)!==0;if(d=(l&o.childLanes)!==0,d||(us(a,o,l,!1),d=(l&o.childLanes)!==0),v){if(d)return $w(a,o,l);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),H(Yt,Yt.current),d)break;return null;case 22:return o.lanes=0,Mw(a,o,l,o.pendingProps);case 24:vi(o,Xt,a.memoizedState.cache)}return Aa(a,o,l)}function Hw(a,o,l){if(a!==null)if(a.memoizedProps!==o.pendingProps)Qt=!0;else{if(!jp(a,l)&&(o.flags&128)===0)return Qt=!1,K2(a,o,l);Qt=(a.flags&131072)!==0}else Qt=!1,Qe&&(o.flags&1048576)!==0&&xx(o,wl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(a=fo(o.elementType),o.type=a,typeof a=="function")Ah(a)?(d=go(a,d),o.tag=1,o=Lw(null,o,a,d,l)):(o.tag=0,o=gp(null,o,a,d,l));else{if(a!=null){var v=a.$$typeof;if(v===k){o.tag=11,o=Dw(null,o,a,d,l);break e}else if(v===L){o.tag=14,o=Tw(null,o,a,d,l);break e}}throw o=ge(a)||a,Error(n(306,o,""))}}return o;case 0:return gp(a,o,o.type,o.pendingProps,l);case 1:return d=o.type,v=go(d,o.pendingProps),Lw(a,o,d,v,l);case 3:e:{if(Ie(o,o.stateNode.containerInfo),a===null)throw Error(n(387));d=o.pendingProps;var b=o.memoizedState;v=b.element,Hh(a,o),kl(o,d,null,l);var E=o.memoizedState;if(d=E.cache,vi(o,Xt,d),d!==b.cache&&zh(o,[Xt],l,!0),Nl(),d=E.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Iw(a,o,d,l);break e}else if(d!==v){v=En(Error(n(424)),o),jl(v),o=Iw(a,o,d,l);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(St=kn(a.firstChild),xr=o,Qe=!0,pi=null,An=!0,l=Mx(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(so(),d===v){o=Aa(a,o,l);break e}jr(a,o,d,l)}o=o.child}return o;case 26:return Vu(a,o),a===null?(l=eS(o.type,null,o.pendingProps,null))?o.memoizedState=l:Qe||(l=o.type,a=o.pendingProps,d=dd(Ue.current).createElement(l),d[Bt]=o,d[ar]=a,Sr(d,l,a),le(d),o.stateNode=d):o.memoizedState=eS(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Ee(o),a===null&&Qe&&(d=o.stateNode=Zj(o.type,o.pendingProps,Ue.current),xr=o,An=!0,v=St,ki(o.type)?(rg=v,St=kn(d.firstChild)):St=v),jr(a,o,o.pendingProps.children,l),Vu(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Qe&&((v=d=St)&&(d=xR(d,o.type,o.pendingProps,An),d!==null?(o.stateNode=d,xr=o,St=kn(d.firstChild),An=!1,v=!0):v=!1),v||gi(o)),Ee(o),v=o.type,b=o.pendingProps,E=a!==null?a.memoizedProps:null,d=b.children,Zp(v,b)?d=null:E!==null&&Zp(v,E)&&(o.flags|=32),o.memoizedState!==null&&(v=Xh(a,o,q2,null,null,l),Xl._currentValue=v),Vu(a,o),jr(a,o,d,l),o.child;case 6:return a===null&&Qe&&((a=l=St)&&(l=wR(l,o.pendingProps,An),l!==null?(o.stateNode=l,xr=o,St=null,a=!0):a=!1),a||gi(o)),null;case 13:return Uw(a,o,l);case 4:return Ie(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=ho(o,null,d,l):jr(a,o,d,l),o.child;case 11:return Dw(a,o,o.type,o.pendingProps,l);case 7:return jr(a,o,o.pendingProps,l),o.child;case 8:return jr(a,o,o.pendingProps.children,l),o.child;case 12:return jr(a,o,o.pendingProps.children,l),o.child;case 10:return d=o.pendingProps,vi(o,o.type,d.value),jr(a,o,d.children,l),o.child;case 9:return v=o.type._context,d=o.pendingProps.children,co(o),v=wr(v),d=d(v),o.flags|=1,jr(a,o,d,l),o.child;case 14:return Tw(a,o,o.type,o.pendingProps,l);case 15:return Pw(a,o,o.type,o.pendingProps,l);case 19:return $w(a,o,l);case 31:return F2(a,o,l);case 22:return Mw(a,o,l,o.pendingProps);case 24:return co(o),d=wr(Xt),a===null?(v=Uh(),v===null&&(v=yt,b=Lh(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=l),v=b),o.memoizedState={parent:d,cache:v},$h(o),vi(o,Xt,v)):((a.lanes&l)!==0&&(Hh(a,o),kl(o,null,null,l),Nl()),v=a.memoizedState,b=o.memoizedState,v.parent!==d?(v={parent:d,cache:d},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),vi(o,Xt,d)):(d=b.cache,vi(o,Xt,d),d!==v.cache&&zh(o,[Xt],l,!0))),jr(a,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Na(a){a.flags|=4}function Sp(a,o,l,d,v){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(v&335544128)===v)if(a.stateNode.complete)a.flags|=8192;else if(gj())a.flags|=8192;else throw mo=Pu,Bh}else a.flags&=-16777217}function Fw(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!iS(o))if(gj())a.flags|=8192;else throw mo=Pu,Bh}function Xu(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?ye():536870912,a.lanes|=o,ws|=o)}function ql(a,o){if(!Qe)switch(a.tailMode){case"hidden":o=a.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Et(a){var o=a.alternate!==null&&a.alternate.child===a.child,l=0,d=0;if(o)for(var v=a.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)l|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=d,a.childLanes=l,o}function Y2(a,o,l){var d=o.pendingProps;switch(Th(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return l=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Ea(Xt),Q(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(cs(o)?Na(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Mh())),Et(o),null;case 26:var v=o.type,b=o.memoizedState;return a===null?(Na(o),b!==null?(Et(o),Fw(o,b)):(Et(o),Sp(o,v,null,d,l))):b?b!==a.memoizedState?(Na(o),Et(o),Fw(o,b)):(Et(o),o.flags&=-16777217):(a=a.memoizedProps,a!==d&&Na(o),Et(o),Sp(o,v,a,d,l)),null;case 27:if(xe(o),l=Ue.current,v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Na(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Et(o),null}a=Se.current,cs(o)?jx(o):(a=Zj(v,d,l),o.stateNode=a,Na(o))}return Et(o),null;case 5:if(xe(o),v=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Na(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Et(o),null}if(b=Se.current,cs(o))jx(o);else{var E=dd(Ue.current);switch(b){case 1:b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=E.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=E.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=E.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?E.createElement("select",{is:d.is}):E.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?E.createElement(v,{is:d.is}):E.createElement(v)}}b[Bt]=o,b[ar]=d;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)b.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=b;e:switch(Sr(b,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Na(o)}}return Et(o),Sp(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,l),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Na(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(a=Ue.current,cs(o)){if(a=o.stateNode,l=o.memoizedProps,d=null,v=xr,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}a[Bt]=o,a=!!(a.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Uj(a.nodeValue,l)),a||gi(o,!0)}else a=dd(a).createTextNode(d),a[Bt]=o,o.stateNode=a}return Et(o),null;case 31:if(l=o.memoizedState,a===null||a.memoizedState!==null){if(d=cs(o),l!==null){if(a===null){if(!d)throw Error(n(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Bt]=o}else so(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),a=!1}else l=Mh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=l),a=!0;if(!a)return o.flags&256?(an(o),o):(an(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Et(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=cs(o),d!==null&&d.dehydrated!==null){if(a===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[Bt]=o}else so(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),v=!1}else v=Mh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(an(o),o):(an(o),null)}return an(o),(o.flags&128)!==0?(o.lanes=l,o):(l=d!==null,a=a!==null&&a.memoizedState!==null,l&&(d=o.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==v&&(d.flags|=2048)),l!==a&&l&&(o.child.flags|=8192),Xu(o,o.updateQueue),Et(o),null);case 4:return Q(),a===null&&Yp(o.stateNode.containerInfo),Et(o),null;case 10:return Ea(o.type),Et(o),null;case 19:if(J(Yt),d=o.memoizedState,d===null)return Et(o),null;if(v=(o.flags&128)!==0,b=d.rendering,b===null)if(v)ql(d,!1);else{if(Ht!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=zu(a),b!==null){for(o.flags|=128,ql(d,!1),a=b.updateQueue,o.updateQueue=a,Xu(o,a),o.subtreeFlags=0,a=l,l=o.child;l!==null;)yx(l,a),l=l.sibling;return H(Yt,Yt.current&1|2),Qe&&ja(o,d.treeForkCount),o.child}a=a.sibling}d.tail!==null&&Ye()>td&&(o.flags|=128,v=!0,ql(d,!1),o.lanes=4194304)}else{if(!v)if(a=zu(b),a!==null){if(o.flags|=128,v=!0,a=a.updateQueue,o.updateQueue=a,Xu(o,a),ql(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Qe)return Et(o),null}else 2*Ye()-d.renderingStartTime>td&&l!==536870912&&(o.flags|=128,v=!0,ql(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(a=d.last,a!==null?a.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Ye(),a.sibling=null,l=Yt.current,H(Yt,v?l&1|2:l&1),Qe&&ja(o,d.treeForkCount),a):(Et(o),null);case 22:case 23:return an(o),Gh(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(l&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),l=o.updateQueue,l!==null&&Xu(o,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==l&&(o.flags|=2048),a!==null&&J(uo),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Ea(Xt),Et(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function G2(a,o){switch(Th(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Ea(Xt),Q(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return xe(o),null;case 31:if(o.memoizedState!==null){if(an(o),o.alternate===null)throw Error(n(340));so()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(an(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));so()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return J(Yt),null;case 4:return Q(),null;case 10:return Ea(o.type),null;case 22:case 23:return an(o),Gh(),a!==null&&J(uo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Ea(Xt),null;case 25:return null;default:return null}}function Kw(a,o){switch(Th(o),o.tag){case 3:Ea(Xt),Q();break;case 26:case 27:case 5:xe(o);break;case 4:Q();break;case 31:o.memoizedState!==null&&an(o);break;case 13:an(o);break;case 19:J(Yt);break;case 10:Ea(o.type);break;case 22:case 23:an(o),Gh(),a!==null&&J(uo);break;case 24:Ea(Xt)}}function zl(a,o){try{var l=o.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var v=d.next;l=v;do{if((l.tag&a)===a){d=void 0;var b=l.create,E=l.inst;d=b(),E.destroy=d}l=l.next}while(l!==v)}}catch(N){ct(o,o.return,N)}}function ji(a,o,l){try{var d=o.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var b=v.next;d=b;do{if((d.tag&a)===a){var E=d.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,v=o;var z=l,V=N;try{V()}catch(oe){ct(v,z,oe)}}}d=d.next}while(d!==b)}}catch(oe){ct(o,o.return,oe)}}function Yw(a){var o=a.updateQueue;if(o!==null){var l=a.stateNode;try{qx(o,l)}catch(d){ct(a,a.return,d)}}}function Gw(a,o,l){l.props=go(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(d){ct(a,o,d)}}function Ll(a,o){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof l=="function"?a.refCleanup=l(d):l.current=d}}catch(v){ct(a,o,v)}}function ia(a,o){var l=a.ref,d=a.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(v){ct(a,o,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(v){ct(a,o,v)}else l.current=null}function Vw(a){var o=a.type,l=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(v){ct(a,a.return,v)}}function Ep(a,o,l){try{var d=a.stateNode;pR(d,a.type,l,o),d[ar]=o}catch(v){ct(a,a.return,v)}}function Ww(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ki(a.type)||a.tag===4}function Op(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Ww(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ki(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Cp(a,o,l){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(a),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=_a));else if(d!==4&&(d===27&&ki(a.type)&&(l=a.stateNode,o=null),a=a.child,a!==null))for(Cp(a,o,l),a=a.sibling;a!==null;)Cp(a,o,l),a=a.sibling}function Zu(a,o,l){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?l.insertBefore(a,o):l.appendChild(a);else if(d!==4&&(d===27&&ki(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Zu(a,o,l),a=a.sibling;a!==null;)Zu(a,o,l),a=a.sibling}function Xw(a){var o=a.stateNode,l=a.memoizedProps;try{for(var d=a.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Sr(o,d,l),o[Bt]=a,o[ar]=l}catch(b){ct(a,a.return,b)}}var ka=!1,Jt=!1,Ap=!1,Zw=typeof WeakSet=="function"?WeakSet:Set,mr=null;function V2(a,o){if(a=a.containerInfo,Wp=yd,a=cx(a),xh(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var v=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var E=0,N=-1,z=-1,V=0,oe=0,de=a,Z=null;t:for(;;){for(var te;de!==l||v!==0&&de.nodeType!==3||(N=E+v),de!==b||d!==0&&de.nodeType!==3||(z=E+d),de.nodeType===3&&(E+=de.nodeValue.length),(te=de.firstChild)!==null;)Z=de,de=te;for(;;){if(de===a)break t;if(Z===l&&++V===v&&(N=E),Z===b&&++oe===d&&(z=E),(te=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=te}l=N===-1||z===-1?null:{start:N,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xp={focusedElem:a,selectionRange:l},yd=!1,mr=o;mr!==null;)if(o=mr,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,mr=a;else for(;mr!==null;){switch(o=mr,b=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(l=0;l<a.length;l++)v=a[l],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,l=o,v=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var Ae=go(l.type,v);a=d.getSnapshotBeforeUpdate(Ae,b),d.__reactInternalSnapshotBeforeUpdate=a}catch(Le){ct(l,l.return,Le)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,l=a.nodeType,l===9)Jp(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Jp(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,mr=a;break}mr=o.return}}function Qw(a,o,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Ta(a,l),d&4&&zl(5,l);break;case 1:if(Ta(a,l),d&4)if(a=l.stateNode,o===null)try{a.componentDidMount()}catch(E){ct(l,l.return,E)}else{var v=go(l.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(v,o,a.__reactInternalSnapshotBeforeUpdate)}catch(E){ct(l,l.return,E)}}d&64&&Yw(l),d&512&&Ll(l,l.return);break;case 3:if(Ta(a,l),d&64&&(a=l.updateQueue,a!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{qx(a,o)}catch(E){ct(l,l.return,E)}}break;case 27:o===null&&d&4&&Xw(l);case 26:case 5:Ta(a,l),o===null&&d&4&&Vw(l),d&512&&Ll(l,l.return);break;case 12:Ta(a,l);break;case 31:Ta(a,l),d&4&&tj(a,l);break;case 13:Ta(a,l),d&4&&rj(a,l),d&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=nR.bind(null,l),jR(a,l))));break;case 22:if(d=l.memoizedState!==null||ka,!d){o=o!==null&&o.memoizedState!==null||Jt,v=ka;var b=Jt;ka=d,(Jt=o)&&!b?Pa(a,l,(l.subtreeFlags&8772)!==0):Ta(a,l),ka=v,Jt=b}break;case 30:break;default:Ta(a,l)}}function Jw(a){var o=a.alternate;o!==null&&(a.alternate=null,Jw(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Zo(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Nt=null,Fr=!1;function Da(a,o,l){for(l=l.child;l!==null;)ej(a,o,l),l=l.sibling}function ej(a,o,l){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Rr,l)}catch{}switch(l.tag){case 26:Jt||ia(l,o),Da(a,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Jt||ia(l,o);var d=Nt,v=Fr;ki(l.type)&&(Nt=l.stateNode,Fr=!1),Da(a,o,l),Gl(l.stateNode),Nt=d,Fr=v;break;case 5:Jt||ia(l,o);case 6:if(d=Nt,v=Fr,Nt=null,Da(a,o,l),Nt=d,Fr=v,Nt!==null)if(Fr)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(l.stateNode)}catch(b){ct(l,o,b)}else try{Nt.removeChild(l.stateNode)}catch(b){ct(l,o,b)}break;case 18:Nt!==null&&(Fr?(a=Nt,Yj(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),ks(a)):Yj(Nt,l.stateNode));break;case 4:d=Nt,v=Fr,Nt=l.stateNode.containerInfo,Fr=!0,Da(a,o,l),Nt=d,Fr=v;break;case 0:case 11:case 14:case 15:ji(2,l,o),Jt||ji(4,l,o),Da(a,o,l);break;case 1:Jt||(ia(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Gw(l,o,d)),Da(a,o,l);break;case 21:Da(a,o,l);break;case 22:Jt=(d=Jt)||l.memoizedState!==null,Da(a,o,l),Jt=d;break;default:Da(a,o,l)}}function tj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{ks(a)}catch(l){ct(o,o.return,l)}}}function rj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{ks(a)}catch(l){ct(o,o.return,l)}}function W2(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new Zw),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new Zw),o;default:throw Error(n(435,a.tag))}}function Qu(a,o){var l=W2(a);o.forEach(function(d){if(!l.has(d)){l.add(d);var v=aR.bind(null,a,d);d.then(v,v)}})}function Kr(a,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var v=l[d],b=a,E=o,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(ki(N.type)){Nt=N.stateNode,Fr=!1;break e}break;case 5:Nt=N.stateNode,Fr=!1;break e;case 3:case 4:Nt=N.stateNode.containerInfo,Fr=!0;break e}N=N.return}if(Nt===null)throw Error(n(160));ej(b,E,v),Nt=null,Fr=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)nj(o,a),o=o.sibling}var Fn=null;function nj(a,o){var l=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Kr(o,a),Yr(a),d&4&&(ji(3,a,a.return),zl(3,a),ji(5,a,a.return));break;case 1:Kr(o,a),Yr(a),d&512&&(Jt||l===null||ia(l,l.return)),d&64&&ka&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var v=Fn;if(Kr(o,a),Yr(a),d&512&&(Jt||l===null||ia(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=a.memoizedState,l===null)if(d===null)if(a.stateNode===null){e:{d=a.type,l=a.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":b=v.getElementsByTagName("title")[0],(!b||b[Xo]||b[Bt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(d),v.head.insertBefore(b,v.querySelector("head > title"))),Sr(b,d,l),b[Bt]=a,le(b),d=b;break e;case"link":var E=nS("link","href",v).get(d+(l.href||""));if(E){for(var N=0;N<E.length;N++)if(b=E[N],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(N,1);break t}}b=v.createElement(d),Sr(b,d,l),v.head.appendChild(b);break;case"meta":if(E=nS("meta","content",v).get(d+(l.content||""))){for(N=0;N<E.length;N++)if(b=E[N],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(N,1);break t}}b=v.createElement(d),Sr(b,d,l),v.head.appendChild(b);break;default:throw Error(n(468,d))}b[Bt]=a,le(b),d=b}a.stateNode=d}else aS(v,a.type,a.stateNode);else a.stateNode=rS(v,d,a.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?aS(v,a.type,a.stateNode):rS(v,d,a.memoizedProps)):d===null&&a.stateNode!==null&&Ep(a,a.memoizedProps,l.memoizedProps)}break;case 27:Kr(o,a),Yr(a),d&512&&(Jt||l===null||ia(l,l.return)),l!==null&&d&4&&Ep(a,a.memoizedProps,l.memoizedProps);break;case 5:if(Kr(o,a),Yr(a),d&512&&(Jt||l===null||ia(l,l.return)),a.flags&32){v=a.stateNode;try{Jo(v,"")}catch(Ae){ct(a,a.return,Ae)}}d&4&&a.stateNode!=null&&(v=a.memoizedProps,Ep(a,v,l!==null?l.memoizedProps:v)),d&1024&&(Ap=!0);break;case 6:if(Kr(o,a),Yr(a),d&4){if(a.stateNode===null)throw Error(n(162));d=a.memoizedProps,l=a.stateNode;try{l.nodeValue=d}catch(Ae){ct(a,a.return,Ae)}}break;case 3:if(hd=null,v=Fn,Fn=fd(o.containerInfo),Kr(o,a),Fn=v,Yr(a),d&4&&l!==null&&l.memoizedState.isDehydrated)try{ks(o.containerInfo)}catch(Ae){ct(a,a.return,Ae)}Ap&&(Ap=!1,aj(a));break;case 4:d=Fn,Fn=fd(a.stateNode.containerInfo),Kr(o,a),Yr(a),Fn=d;break;case 12:Kr(o,a),Yr(a);break;case 31:Kr(o,a),Yr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Qu(a,d)));break;case 13:Kr(o,a),Yr(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ed=Ye()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Qu(a,d)));break;case 22:v=a.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,V=ka,oe=Jt;if(ka=V||v,Jt=oe||z,Kr(o,a),Jt=oe,ka=V,Yr(a),d&8192)e:for(o=a.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(l===null||z||ka||Jt||vo(a)),l=null,o=a;;){if(o.tag===5||o.tag===26){if(l===null){z=l=o;try{if(b=z.stateNode,v)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=z.stateNode;var de=z.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ae){ct(z,z.return,Ae)}}}else if(o.tag===6){if(l===null){z=o;try{z.stateNode.nodeValue=v?"":z.memoizedProps}catch(Ae){ct(z,z.return,Ae)}}}else if(o.tag===18){if(l===null){z=o;try{var te=z.stateNode;v?Gj(te,!0):Gj(z.stateNode,!1)}catch(Ae){ct(z,z.return,Ae)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Qu(a,l))));break;case 19:Kr(o,a),Yr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Qu(a,d)));break;case 30:break;case 21:break;default:Kr(o,a),Yr(a)}}function Yr(a){var o=a.flags;if(o&2){try{for(var l,d=a.return;d!==null;){if(Ww(d)){l=d;break}d=d.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var v=l.stateNode,b=Op(a);Zu(a,b,v);break;case 5:var E=l.stateNode;l.flags&32&&(Jo(E,""),l.flags&=-33);var N=Op(a);Zu(a,N,E);break;case 3:case 4:var z=l.stateNode.containerInfo,V=Op(a);Cp(a,V,z);break;default:throw Error(n(161))}}catch(oe){ct(a,a.return,oe)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function aj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;aj(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Ta(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Qw(a,o.alternate,o),o=o.sibling}function vo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:ji(4,o,o.return),vo(o);break;case 1:ia(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Gw(o,o.return,l),vo(o);break;case 27:Gl(o.stateNode);case 26:case 5:ia(o,o.return),vo(o);break;case 22:o.memoizedState===null&&vo(o);break;case 30:vo(o);break;default:vo(o)}a=a.sibling}}function Pa(a,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,v=a,b=o,E=b.flags;switch(b.tag){case 0:case 11:case 15:Pa(v,b,l),zl(4,b);break;case 1:if(Pa(v,b,l),d=b,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(V){ct(d,d.return,V)}if(d=b,v=d.updateQueue,v!==null){var N=d.stateNode;try{var z=v.shared.hiddenCallbacks;if(z!==null)for(v.shared.hiddenCallbacks=null,v=0;v<z.length;v++)Rx(z[v],N)}catch(V){ct(d,d.return,V)}}l&&E&64&&Yw(b),Ll(b,b.return);break;case 27:Xw(b);case 26:case 5:Pa(v,b,l),l&&d===null&&E&4&&Vw(b),Ll(b,b.return);break;case 12:Pa(v,b,l);break;case 31:Pa(v,b,l),l&&E&4&&tj(v,b);break;case 13:Pa(v,b,l),l&&E&4&&rj(v,b);break;case 22:b.memoizedState===null&&Pa(v,b,l),Ll(b,b.return);break;case 30:break;default:Pa(v,b,l)}o=o.sibling}}function Np(a,o){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&Sl(l))}function kp(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Sl(a))}function Kn(a,o,l,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ij(a,o,l,d),o=o.sibling}function ij(a,o,l,d){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Kn(a,o,l,d),v&2048&&zl(9,o);break;case 1:Kn(a,o,l,d);break;case 3:Kn(a,o,l,d),v&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Sl(a)));break;case 12:if(v&2048){Kn(a,o,l,d),a=o.stateNode;try{var b=o.memoizedProps,E=b.id,N=b.onPostCommit;typeof N=="function"&&N(E,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(z){ct(o,o.return,z)}}else Kn(a,o,l,d);break;case 31:Kn(a,o,l,d);break;case 13:Kn(a,o,l,d);break;case 23:break;case 22:b=o.stateNode,E=o.alternate,o.memoizedState!==null?b._visibility&2?Kn(a,o,l,d):Il(a,o):b._visibility&2?Kn(a,o,l,d):(b._visibility|=2,bs(a,o,l,d,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Np(E,o);break;case 24:Kn(a,o,l,d),v&2048&&kp(o.alternate,o);break;default:Kn(a,o,l,d)}}function bs(a,o,l,d,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=a,E=o,N=l,z=d,V=E.flags;switch(E.tag){case 0:case 11:case 15:bs(b,E,N,z,v),zl(8,E);break;case 23:break;case 22:var oe=E.stateNode;E.memoizedState!==null?oe._visibility&2?bs(b,E,N,z,v):Il(b,E):(oe._visibility|=2,bs(b,E,N,z,v)),v&&V&2048&&Np(E.alternate,E);break;case 24:bs(b,E,N,z,v),v&&V&2048&&kp(E.alternate,E);break;default:bs(b,E,N,z,v)}o=o.sibling}}function Il(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=a,d=o,v=d.flags;switch(d.tag){case 22:Il(l,d),v&2048&&Np(d.alternate,d);break;case 24:Il(l,d),v&2048&&kp(d.alternate,d);break;default:Il(l,d)}o=o.sibling}}var Ul=8192;function _s(a,o,l){if(a.subtreeFlags&Ul)for(a=a.child;a!==null;)oj(a,o,l),a=a.sibling}function oj(a,o,l){switch(a.tag){case 26:_s(a,o,l),a.flags&Ul&&a.memoizedState!==null&&RR(l,Fn,a.memoizedState,a.memoizedProps);break;case 5:_s(a,o,l);break;case 3:case 4:var d=Fn;Fn=fd(a.stateNode.containerInfo),_s(a,o,l),Fn=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=Ul,Ul=16777216,_s(a,o,l),Ul=d):_s(a,o,l));break;default:_s(a,o,l)}}function sj(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Bl(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];mr=d,cj(d,a)}sj(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)lj(a),a=a.sibling}function lj(a){switch(a.tag){case 0:case 11:case 15:Bl(a),a.flags&2048&&ji(9,a,a.return);break;case 3:Bl(a);break;case 12:Bl(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Ju(a)):Bl(a);break;default:Bl(a)}}function Ju(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];mr=d,cj(d,a)}sj(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:ji(8,o,o.return),Ju(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Ju(o));break;default:Ju(o)}a=a.sibling}}function cj(a,o){for(;mr!==null;){var l=mr;switch(l.tag){case 0:case 11:case 15:ji(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Sl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,mr=d;else e:for(l=a;mr!==null;){d=mr;var v=d.sibling,b=d.return;if(Jw(d),d===l){mr=null;break e}if(v!==null){v.return=b,mr=v;break e}mr=b}}}var X2={getCacheForType:function(a){var o=wr(Xt),l=o.data.get(a);return l===void 0&&(l=a(),o.data.set(a,l)),l},cacheSignal:function(){return wr(Xt).controller.signal}},Z2=typeof WeakMap=="function"?WeakMap:Map,it=0,yt=null,Ve=null,Xe=0,lt=0,on=null,Si=!1,xs=!1,Dp=!1,Ma=0,Ht=0,Ei=0,yo=0,Tp=0,sn=0,ws=0,$l=null,Gr=null,Pp=!1,ed=0,uj=0,td=1/0,rd=null,Oi=null,or=0,Ci=null,js=null,Ra=0,Mp=0,Rp=null,dj=null,Hl=0,qp=null;function ln(){return(it&2)!==0&&Xe!==0?Xe&-Xe:R.T!==null?$p():Qi()}function fj(){if(sn===0)if((Xe&536870912)===0||Qe){var a=ui;ui<<=1,(ui&3932160)===0&&(ui=262144),sn=a}else sn=536870912;return a=nn.current,a!==null&&(a.flags|=32),sn}function Vr(a,o,l){(a===yt&&(lt===2||lt===9)||a.cancelPendingCommit!==null)&&(Ss(a,0),Ai(a,Xe,sn,!1)),ya(a,l),((it&2)===0||a!==yt)&&(a===yt&&((it&2)===0&&(yo|=l),Ht===4&&Ai(a,Xe,sn,!1)),oa(a))}function mj(a,o,l){if((it&6)!==0)throw Error(n(327));var d=!l&&(o&127)===0&&(o&a.expiredLanes)===0||va(a,o),v=d?eR(a,o):Lp(a,o,!0),b=d;do{if(v===0){xs&&!d&&Ai(a,o,0,!1);break}else{if(l=a.current.alternate,b&&!Q2(l)){v=Lp(a,o,!1),b=!1;continue}if(v===2){if(b=o,a.errorRecoveryDisabledLanes&b)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var N=a;v=$l;var z=N.current.memoizedState.isDehydrated;if(z&&(Ss(N,E).flags|=256),E=Lp(N,E,!1),E!==2){if(Dp&&!z){N.errorRecoveryDisabledLanes|=b,yo|=b,v=4;break e}b=Gr,Gr=v,b!==null&&(Gr===null?Gr=b:Gr.push.apply(Gr,b))}v=E}if(b=!1,v!==2)continue}}if(v===1){Ss(a,0),Ai(a,o,0,!0);break}e:{switch(d=a,b=v,b){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Ai(d,o,sn,!Si);break e;case 2:Gr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(v=ed+300-Ye(),10<v)){if(Ai(d,o,sn,!Si),di(d,0,!0)!==0)break e;Ra=o,d.timeoutHandle=Fj(hj.bind(null,d,l,Gr,rd,Pp,o,sn,yo,ws,Si,b,"Throttled",-0,0),v);break e}hj(d,l,Gr,rd,Pp,o,sn,yo,ws,Si,b,null,-0,0)}}break}while(!0);oa(a)}function hj(a,o,l,d,v,b,E,N,z,V,oe,de,Z,te){if(a.timeoutHandle=-1,de=o.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_a},oj(o,b,de);var Ae=(b&62914560)===b?ed-Ye():(b&4194048)===b?uj-Ye():0;if(Ae=qR(de,Ae),Ae!==null){Ra=b,a.cancelPendingCommit=Ae(wj.bind(null,a,o,b,l,d,v,E,N,z,oe,de,null,Z,te)),Ai(a,b,E,!V);return}}wj(a,o,b,l,d,v,E,N,z)}function Q2(a){for(var o=a;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var v=l[d],b=v.getSnapshot;v=v.value;try{if(!tn(b(),v))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ai(a,o,l,d){o&=~Tp,o&=~yo,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var v=o;0<v;){var b=31-xt(v),E=1<<b;d[b]=-1,v&=~E}l!==0&&du(a,l,o)}function nd(){return(it&6)===0?(Fl(0),!1):!0}function zp(){if(Ve!==null){if(lt===0)var a=Ve.return;else a=Ve,Sa=lo=null,Jh(a),hs=null,Ol=0,a=Ve;for(;a!==null;)Kw(a.alternate,a),a=a.return;Ve=null}}function Ss(a,o){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,yR(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Ra=0,zp(),yt=a,Ve=l=wa(a.current,null),Xe=o,lt=0,on=null,Si=!1,xs=va(a,o),Dp=!1,ws=sn=Tp=yo=Ei=Ht=0,Gr=$l=null,Pp=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var v=31-xt(d),b=1<<v;o|=a[v],d&=~b}return Ma=o,Su(),l}function pj(a,o){He=null,R.H=Ml,o===ms||o===Tu?(o=Dx(),lt=3):o===Bh?(o=Dx(),lt=4):lt=o===pp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,on=o,Ve===null&&(Ht=1,Yu(a,En(o,a.current)))}function gj(){var a=nn.current;return a===null?!0:(Xe&4194048)===Xe?Nn===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?a===Nn:!1}function vj(){var a=R.H;return R.H=Ml,a===null?Ml:a}function yj(){var a=R.A;return R.A=X2,a}function ad(){Ht=4,Si||(Xe&4194048)!==Xe&&nn.current!==null||(xs=!0),(Ei&134217727)===0&&(yo&134217727)===0||yt===null||Ai(yt,Xe,sn,!1)}function Lp(a,o,l){var d=it;it|=2;var v=vj(),b=yj();(yt!==a||Xe!==o)&&(rd=null,Ss(a,o)),o=!1;var E=Ht;e:do try{if(lt!==0&&Ve!==null){var N=Ve,z=on;switch(lt){case 8:zp(),E=6;break e;case 3:case 2:case 9:case 6:nn.current===null&&(o=!0);var V=lt;if(lt=0,on=null,Es(a,N,z,V),l&&xs){E=0;break e}break;default:V=lt,lt=0,on=null,Es(a,N,z,V)}}J2(),E=Ht;break}catch(oe){pj(a,oe)}while(!0);return o&&a.shellSuspendCounter++,Sa=lo=null,it=d,R.H=v,R.A=b,Ve===null&&(yt=null,Xe=0,Su()),E}function J2(){for(;Ve!==null;)bj(Ve)}function eR(a,o){var l=it;it|=2;var d=vj(),v=yj();yt!==a||Xe!==o?(rd=null,td=Ye()+500,Ss(a,o)):xs=va(a,o);e:do try{if(lt!==0&&Ve!==null){o=Ve;var b=on;t:switch(lt){case 1:lt=0,on=null,Es(a,o,b,1);break;case 2:case 9:if(Nx(b)){lt=0,on=null,_j(o);break}o=function(){lt!==2&&lt!==9||yt!==a||(lt=7),oa(a)},b.then(o,o);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:Nx(b)?(lt=0,on=null,_j(o)):(lt=0,on=null,Es(a,o,b,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var N=Ve;if(E?iS(E):N.stateNode.complete){lt=0,on=null;var z=N.sibling;if(z!==null)Ve=z;else{var V=N.return;V!==null?(Ve=V,id(V)):Ve=null}break t}}lt=0,on=null,Es(a,o,b,5);break;case 6:lt=0,on=null,Es(a,o,b,6);break;case 8:zp(),Ht=6;break e;default:throw Error(n(462))}}tR();break}catch(oe){pj(a,oe)}while(!0);return Sa=lo=null,R.H=d,R.A=v,it=l,Ve!==null?0:(yt=null,Xe=0,Su(),Ht)}function tR(){for(;Ve!==null&&!Cr();)bj(Ve)}function bj(a){var o=Hw(a.alternate,a,Ma);a.memoizedProps=a.pendingProps,o===null?id(a):Ve=o}function _j(a){var o=a,l=o.alternate;switch(o.tag){case 15:case 0:o=zw(l,o,o.pendingProps,o.type,void 0,Xe);break;case 11:o=zw(l,o,o.pendingProps,o.type.render,o.ref,Xe);break;case 5:Jh(o);default:Kw(l,o),o=Ve=yx(o,Ma),o=Hw(l,o,Ma)}a.memoizedProps=a.pendingProps,o===null?id(a):Ve=o}function Es(a,o,l,d){Sa=lo=null,Jh(o),hs=null,Ol=0;var v=o.return;try{if(H2(a,v,o,l,Xe)){Ht=1,Yu(a,En(l,a.current)),Ve=null;return}}catch(b){if(v!==null)throw Ve=v,b;Ht=1,Yu(a,En(l,a.current)),Ve=null;return}o.flags&32768?(Qe||d===1?a=!0:xs||(Xe&536870912)!==0?a=!1:(Si=a=!0,(d===2||d===9||d===3||d===6)&&(d=nn.current,d!==null&&d.tag===13&&(d.flags|=16384))),xj(o,a)):id(o)}function id(a){var o=a;do{if((o.flags&32768)!==0){xj(o,Si);return}a=o.return;var l=Y2(o.alternate,o,Ma);if(l!==null){Ve=l;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=a}while(o!==null);Ht===0&&(Ht=5)}function xj(a,o){do{var l=G2(a.alternate,a);if(l!==null){l.flags&=32767,Ve=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(a=a.sibling,a!==null)){Ve=a;return}Ve=a=l}while(a!==null);Ht=6,Ve=null}function wj(a,o,l,d,v,b,E,N,z){a.cancelPendingCommit=null;do od();while(or!==0);if((it&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(b=o.lanes|o.childLanes,b|=Oh,ll(a,l,b,E,N,z),a===yt&&(Ve=yt=null,Xe=0),js=o,Ci=a,Ra=l,Mp=b,Rp=v,dj=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,iR(Ar,function(){return Cj(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=R.T,R.T=null,v=I.p,I.p=2,E=it,it|=4;try{V2(a,o,l)}finally{it=E,I.p=v,R.T=d}}or=1,jj(),Sj(),Ej()}}function jj(){if(or===1){or=0;var a=Ci,o=js,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var d=I.p;I.p=2;var v=it;it|=4;try{nj(o,a);var b=Xp,E=cx(a.containerInfo),N=b.focusedElem,z=b.selectionRange;if(E!==N&&N&&N.ownerDocument&&lx(N.ownerDocument.documentElement,N)){if(z!==null&&xh(N)){var V=z.start,oe=z.end;if(oe===void 0&&(oe=V),"selectionStart"in N)N.selectionStart=V,N.selectionEnd=Math.min(oe,N.value.length);else{var de=N.ownerDocument||document,Z=de&&de.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),Ae=N.textContent.length,Le=Math.min(z.start,Ae),mt=z.end===void 0?Le:Math.min(z.end,Ae);!te.extend&&Le>mt&&(E=mt,mt=Le,Le=E);var F=sx(N,Le),$=sx(N,mt);if(F&&$&&(te.rangeCount!==1||te.anchorNode!==F.node||te.anchorOffset!==F.offset||te.focusNode!==$.node||te.focusOffset!==$.offset)){var Y=de.createRange();Y.setStart(F.node,F.offset),te.removeAllRanges(),Le>mt?(te.addRange(Y),te.extend($.node,$.offset)):(Y.setEnd($.node,$.offset),te.addRange(Y))}}}}for(de=[],te=N;te=te.parentNode;)te.nodeType===1&&de.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<de.length;N++){var ue=de[N];ue.element.scrollLeft=ue.left,ue.element.scrollTop=ue.top}}yd=!!Wp,Xp=Wp=null}finally{it=v,I.p=d,R.T=l}}a.current=o,or=2}}function Sj(){if(or===2){or=0;var a=Ci,o=js,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var d=I.p;I.p=2;var v=it;it|=4;try{Qw(a,o.alternate,o)}finally{it=v,I.p=d,R.T=l}}or=3}}function Ej(){if(or===4||or===3){or=0,jt();var a=Ci,o=js,l=Ra,d=dj;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?or=5:(or=0,js=Ci=null,Oj(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(Oi=null),ul(l),o=o.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Rr,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=R.T,v=I.p,I.p=2,R.T=null;try{for(var b=a.onRecoverableError,E=0;E<d.length;E++){var N=d[E];b(N.value,{componentStack:N.stack})}}finally{R.T=o,I.p=v}}(Ra&3)!==0&&od(),oa(a),v=a.pendingLanes,(l&261930)!==0&&(v&42)!==0?a===qp?Hl++:(Hl=0,qp=a):Hl=0,Fl(0)}}function Oj(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Sl(o)))}function od(){return jj(),Sj(),Ej(),Cj()}function Cj(){if(or!==5)return!1;var a=Ci,o=Mp;Mp=0;var l=ul(Ra),d=R.T,v=I.p;try{I.p=32>l?32:l,R.T=null,l=Rp,Rp=null;var b=Ci,E=Ra;if(or=0,js=Ci=null,Ra=0,(it&6)!==0)throw Error(n(331));var N=it;if(it|=4,lj(b.current),ij(b,b.current,E,l),it=N,Fl(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Rr,b)}catch{}return!0}finally{I.p=v,R.T=d,Oj(a,o)}}function Aj(a,o,l){o=En(l,o),o=hp(a.stateNode,o,2),a=_i(a,o,2),a!==null&&(ya(a,2),oa(a))}function ct(a,o,l){if(a.tag===3)Aj(a,a,l);else for(;o!==null;){if(o.tag===3){Aj(o,a,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Oi===null||!Oi.has(d))){a=En(l,a),l=Nw(2),d=_i(o,l,2),d!==null&&(kw(l,d,o,a),ya(d,2),oa(d));break}}o=o.return}}function Ip(a,o,l){var d=a.pingCache;if(d===null){d=a.pingCache=new Z2;var v=new Set;d.set(o,v)}else v=d.get(o),v===void 0&&(v=new Set,d.set(o,v));v.has(l)||(Dp=!0,v.add(l),a=rR.bind(null,a,o,l),o.then(a,a))}function rR(a,o,l){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,yt===a&&(Xe&l)===l&&(Ht===4||Ht===3&&(Xe&62914560)===Xe&&300>Ye()-ed?(it&2)===0&&Ss(a,0):Tp|=l,ws===Xe&&(ws=0)),oa(a)}function Nj(a,o){o===0&&(o=ye()),a=io(a,o),a!==null&&(ya(a,o),oa(a))}function nR(a){var o=a.memoizedState,l=0;o!==null&&(l=o.retryLane),Nj(a,l)}function aR(a,o){var l=0;switch(a.tag){case 31:case 13:var d=a.stateNode,v=a.memoizedState;v!==null&&(l=v.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(o),Nj(a,l)}function iR(a,o){return _t(a,o)}var sd=null,Os=null,Up=!1,ld=!1,Bp=!1,Ni=0;function oa(a){a!==Os&&a.next===null&&(Os===null?sd=Os=a:Os=Os.next=a),ld=!0,Up||(Up=!0,sR())}function Fl(a,o){if(!Bp&&ld){Bp=!0;do for(var l=!1,d=sd;d!==null;){if(a!==0){var v=d.pendingLanes;if(v===0)var b=0;else{var E=d.suspendedLanes,N=d.pingedLanes;b=(1<<31-xt(42|a)+1)-1,b&=v&~(E&~N),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,Pj(d,b))}else b=Xe,b=di(d,d===yt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||va(d,b)||(l=!0,Pj(d,b));d=d.next}while(l);Bp=!1}}function oR(){kj()}function kj(){ld=Up=!1;var a=0;Ni!==0&&vR()&&(a=Ni);for(var o=Ye(),l=null,d=sd;d!==null;){var v=d.next,b=Dj(d,o);b===0?(d.next=null,l===null?sd=v:l.next=v,v===null&&(Os=l)):(l=d,(a!==0||(b&3)!==0)&&(ld=!0)),d=v}or!==0&&or!==5||Fl(a),Ni!==0&&(Ni=0)}function Dj(a,o){for(var l=a.suspendedLanes,d=a.pingedLanes,v=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var E=31-xt(b),N=1<<E,z=v[E];z===-1?((N&l)===0||(N&d)!==0)&&(v[E]=sl(N,o)):z<=o&&(a.expiredLanes|=N),b&=~N}if(o=yt,l=Xe,l=di(a,a===o?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,l===0||a===o&&(lt===2||lt===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&At(d),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||va(a,l)){if(o=l&-l,o===a.callbackPriority)return o;switch(d!==null&&At(d),ul(l)){case 2:case 8:l=Pr;break;case 32:l=Ar;break;case 268435456:l=st;break;default:l=Ar}return d=Tj.bind(null,a),l=_t(l,d),a.callbackPriority=o,a.callbackNode=l,o}return d!==null&&d!==null&&At(d),a.callbackPriority=2,a.callbackNode=null,2}function Tj(a,o){if(or!==0&&or!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(od()&&a.callbackNode!==l)return null;var d=Xe;return d=di(a,a===yt?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(mj(a,d,o),Dj(a,Ye()),a.callbackNode!=null&&a.callbackNode===l?Tj.bind(null,a):null)}function Pj(a,o){if(od())return null;mj(a,o,!0)}function sR(){bR(function(){(it&6)!==0?_t(bn,oR):kj()})}function $p(){if(Ni===0){var a=ds;a===0&&(a=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Ni=a}return Ni}function Mj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:gu(""+a)}function Rj(a,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,a.id&&l.setAttribute("form",a.id),o.parentNode.insertBefore(l,o),a=new FormData(a),l.parentNode.removeChild(l),a}function lR(a,o,l,d,v){if(o==="submit"&&l&&l.stateNode===v){var b=Mj((v[ar]||null).action),E=d.submitter;E&&(o=(o=E[ar]||null)?Mj(o.formAction):E.getAttribute("formAction"),o!==null&&(b=o,E=null));var N=new _u("action","action",null,d,v);a.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ni!==0){var z=E?Rj(v,E):new FormData(v);lp(l,{pending:!0,data:z,method:v.method,action:b},null,z)}}else typeof b=="function"&&(N.preventDefault(),z=E?Rj(v,E):new FormData(v),lp(l,{pending:!0,data:z,method:v.method,action:b},b,z))},currentTarget:v}]})}}for(var Hp=0;Hp<Eh.length;Hp++){var Fp=Eh[Hp],cR=Fp.toLowerCase(),uR=Fp[0].toUpperCase()+Fp.slice(1);Hn(cR,"on"+uR)}Hn(fx,"onAnimationEnd"),Hn(mx,"onAnimationIteration"),Hn(hx,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(O2,"onTransitionRun"),Hn(C2,"onTransitionStart"),Hn(A2,"onTransitionCancel"),Hn(px,"onTransitionEnd"),we("onMouseEnter",["mouseout","mouseover"]),we("onMouseLeave",["mouseout","mouseover"]),we("onPointerEnter",["pointerout","pointerover"]),we("onPointerLeave",["pointerout","pointerover"]),re("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),re("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),re("onBeforeInput",["compositionend","keypress","textInput","paste"]),re("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),re("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),re("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function qj(a,o){o=(o&4)!==0;for(var l=0;l<a.length;l++){var d=a[l],v=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var E=d.length-1;0<=E;E--){var N=d[E],z=N.instance,V=N.currentTarget;if(N=N.listener,z!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=V;try{b(v)}catch(oe){ju(oe)}v.currentTarget=null,b=z}else for(E=0;E<d.length;E++){if(N=d[E],z=N.instance,V=N.currentTarget,N=N.listener,z!==b&&v.isPropagationStopped())break e;b=N,v.currentTarget=V;try{b(v)}catch(oe){ju(oe)}v.currentTarget=null,b=z}}}}function We(a,o){var l=o[eo];l===void 0&&(l=o[eo]=new Set);var d=a+"__bubble";l.has(d)||(zj(o,a,2,!1),l.add(d))}function Kp(a,o,l){var d=0;o&&(d|=4),zj(l,a,d,o)}var cd="_reactListening"+Math.random().toString(36).slice(2);function Yp(a){if(!a[cd]){a[cd]=!0,he.forEach(function(l){l!=="selectionchange"&&(dR.has(l)||Kp(l,!1,a),Kp(l,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[cd]||(o[cd]=!0,Kp("selectionchange",!1,o))}}function zj(a,o,l,d){switch(fS(o)){case 2:var v=IR;break;case 8:v=UR;break;default:v=sg}l=v.bind(null,o,l,a),v=void 0,!fh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),d?v!==void 0?a.addEventListener(o,l,{capture:!0,passive:v}):a.addEventListener(o,l,!0):v!==void 0?a.addEventListener(o,l,{passive:v}):a.addEventListener(o,l,!1)}function Gp(a,o,l,d,v){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var N=d.stateNode.containerInfo;if(N===v)break;if(E===4)for(E=d.return;E!==null;){var z=E.tag;if((z===3||z===4)&&E.stateNode.containerInfo===v)return;E=E.return}for(;N!==null;){if(E=$n(N),E===null)return;if(z=E.tag,z===5||z===6||z===26||z===27){d=b=E;continue e}N=N.parentNode}}d=d.return}$_(function(){var V=b,oe=uh(l),de=[];e:{var Z=gx.get(a);if(Z!==void 0){var te=_u,Ae=a;switch(a){case"keypress":if(yu(l)===0)break e;case"keydown":case"keyup":te=a2;break;case"focusin":Ae="focus",te=gh;break;case"focusout":Ae="blur",te=gh;break;case"beforeblur":case"afterblur":te=gh;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=K_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=YM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=s2;break;case fx:case mx:case hx:te=WM;break;case px:te=c2;break;case"scroll":case"scrollend":te=FM;break;case"wheel":te=d2;break;case"copy":case"cut":case"paste":te=ZM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=G_;break;case"toggle":case"beforetoggle":te=m2}var Le=(o&4)!==0,mt=!Le&&(a==="scroll"||a==="scrollend"),F=Le?Z!==null?Z+"Capture":null:Z;Le=[];for(var $=V,Y;$!==null;){var ue=$;if(Y=ue.stateNode,ue=ue.tag,ue!==5&&ue!==26&&ue!==27||Y===null||F===null||(ue=ml($,F),ue!=null&&Le.push(Yl($,ue,Y))),mt)break;$=$.return}0<Le.length&&(Z=new te(Z,Ae,null,l,oe),de.push({event:Z,listeners:Le}))}}if((o&7)===0){e:{if(Z=a==="mouseover"||a==="pointerover",te=a==="mouseout"||a==="pointerout",Z&&l!==ch&&(Ae=l.relatedTarget||l.fromElement)&&($n(Ae)||Ae[ra]))break e;if((te||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(Ae=l.relatedTarget||l.toElement,te=V,Ae=Ae?$n(Ae):null,Ae!==null&&(mt=s(Ae),Le=Ae.tag,Ae!==mt||Le!==5&&Le!==27&&Le!==6)&&(Ae=null)):(te=null,Ae=V),te!==Ae)){if(Le=K_,ue="onMouseLeave",F="onMouseEnter",$="mouse",(a==="pointerout"||a==="pointerover")&&(Le=G_,ue="onPointerLeave",F="onPointerEnter",$="pointer"),mt=te==null?Z:to(te),Y=Ae==null?Z:to(Ae),Z=new Le(ue,$+"leave",te,l,oe),Z.target=mt,Z.relatedTarget=Y,ue=null,$n(oe)===V&&(Le=new Le(F,$+"enter",Ae,l,oe),Le.target=Y,Le.relatedTarget=mt,ue=Le),mt=ue,te&&Ae)t:{for(Le=fR,F=te,$=Ae,Y=0,ue=F;ue;ue=Le(ue))Y++;ue=0;for(var qe=$;qe;qe=Le(qe))ue++;for(;0<Y-ue;)F=Le(F),Y--;for(;0<ue-Y;)$=Le($),ue--;for(;Y--;){if(F===$||$!==null&&F===$.alternate){Le=F;break t}F=Le(F),$=Le($)}Le=null}else Le=null;te!==null&&Lj(de,Z,te,Le,!1),Ae!==null&&mt!==null&&Lj(de,mt,Ae,Le,!0)}}e:{if(Z=V?to(V):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var rt=tx;else if(J_(Z))if(rx)rt=j2;else{rt=x2;var Pe=_2}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?V&&lh(V.elementType)&&(rt=tx):rt=w2;if(rt&&(rt=rt(a,V))){ex(de,rt,l,oe);break e}Pe&&Pe(a,Z,V),a==="focusout"&&V&&Z.type==="number"&&V.memoizedProps.value!=null&&sh(Z,"number",Z.value)}switch(Pe=V?to(V):window,a){case"focusin":(J_(Pe)||Pe.contentEditable==="true")&&(ns=Pe,wh=V,xl=null);break;case"focusout":xl=wh=ns=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,ux(de,l,oe);break;case"selectionchange":if(E2)break;case"keydown":case"keyup":ux(de,l,oe)}var Fe;if(yh)e:{switch(a){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else rs?Z_(a,l)&&(Ze="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(V_&&l.locale!=="ko"&&(rs||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&rs&&(Fe=H_()):(mi=oe,mh="value"in mi?mi.value:mi.textContent,rs=!0)),Pe=ud(V,Ze),0<Pe.length&&(Ze=new Y_(Ze,a,null,l,oe),de.push({event:Ze,listeners:Pe}),Fe?Ze.data=Fe:(Fe=Q_(l),Fe!==null&&(Ze.data=Fe)))),(Fe=p2?g2(a,l):v2(a,l))&&(Ze=ud(V,"onBeforeInput"),0<Ze.length&&(Pe=new Y_("onBeforeInput","beforeinput",null,l,oe),de.push({event:Pe,listeners:Ze}),Pe.data=Fe)),lR(de,a,V,l,oe)}qj(de,o)})}function Yl(a,o,l){return{instance:a,listener:o,currentTarget:l}}function ud(a,o){for(var l=o+"Capture",d=[];a!==null;){var v=a,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=ml(a,l),v!=null&&d.unshift(Yl(a,v,b)),v=ml(a,o),v!=null&&d.push(Yl(a,v,b))),a.tag===3)return d;a=a.return}return[]}function fR(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Lj(a,o,l,d,v){for(var b=o._reactName,E=[];l!==null&&l!==d;){var N=l,z=N.alternate,V=N.stateNode;if(N=N.tag,z!==null&&z===d)break;N!==5&&N!==26&&N!==27||V===null||(z=V,v?(V=ml(l,b),V!=null&&E.unshift(Yl(l,V,z))):v||(V=ml(l,b),V!=null&&E.push(Yl(l,V,z)))),l=l.return}E.length!==0&&a.push({event:o,listeners:E})}var mR=/\r\n?/g,hR=/\u0000|\uFFFD/g;function Ij(a){return(typeof a=="string"?a:""+a).replace(mR,`
`).replace(hR,"")}function Uj(a,o){return o=Ij(o),Ij(a)===o}function ft(a,o,l,d,v,b){switch(l){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||Jo(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&Jo(a,""+d);break;case"className":hu(a,"class",d);break;case"tabIndex":hu(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":hu(a,l,d);break;case"style":U_(a,d,b);break;case"data":if(o!=="object"){hu(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||l!=="href")){a.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(l);break}d=gu(""+d),a.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(o!=="input"&&ft(a,o,"name",v.name,v,null),ft(a,o,"formEncType",v.formEncType,v,null),ft(a,o,"formMethod",v.formMethod,v,null),ft(a,o,"formTarget",v.formTarget,v,null)):(ft(a,o,"encType",v.encType,v,null),ft(a,o,"method",v.method,v,null),ft(a,o,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(l);break}d=gu(""+d),a.setAttribute(l,d);break;case"onClick":d!=null&&(a.onclick=_a);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}l=gu(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,""+d):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":d===!0?a.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,d):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(l,d):a.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(l):a.setAttribute(l,d);break;case"popover":We("beforetoggle",a),We("toggle",a),ir(a,"popover",d);break;case"xlinkActuate":ba(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ba(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ba(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ba(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ba(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ba(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ba(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ba(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ba(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ir(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=$M.get(l)||l,ir(a,l,d))}}function Vp(a,o,l,d,v,b){switch(l){case"style":U_(a,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(v.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"children":typeof d=="string"?Jo(a,d):(typeof d=="number"||typeof d=="bigint")&&Jo(a,""+d);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"onClick":d!=null&&(a.onclick=_a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!se.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(v=l.endsWith("Capture"),o=l.slice(2,v?l.length-7:void 0),b=a[ar]||null,b=b!=null?b[l]:null,typeof b=="function"&&a.removeEventListener(o,b,v),typeof d=="function")){typeof b!="function"&&b!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(o,d,v);break e}l in a?a[l]=d:d===!0?a.setAttribute(l,""):ir(a,l,d)}}}function Sr(a,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var d=!1,v=!1,b;for(b in l)if(l.hasOwnProperty(b)){var E=l[b];if(E!=null)switch(b){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ft(a,o,b,E,l,null)}}v&&ft(a,o,"srcSet",l.srcSet,l,null),d&&ft(a,o,"src",l.src,l,null);return;case"input":We("invalid",a);var N=b=E=v=null,z=null,V=null;for(d in l)if(l.hasOwnProperty(d)){var oe=l[d];if(oe!=null)switch(d){case"name":v=oe;break;case"type":E=oe;break;case"checked":z=oe;break;case"defaultChecked":V=oe;break;case"value":b=oe;break;case"defaultValue":N=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,o));break;default:ft(a,o,d,oe,l,null)}}q_(a,b,N,z,V,E,v,!1);return;case"select":We("invalid",a),d=E=b=null;for(v in l)if(l.hasOwnProperty(v)&&(N=l[v],N!=null))switch(v){case"value":b=N;break;case"defaultValue":E=N;break;case"multiple":d=N;default:ft(a,o,v,N,l,null)}o=b,l=E,a.multiple=!!d,o!=null?Qo(a,!!d,o,!1):l!=null&&Qo(a,!!d,l,!0);return;case"textarea":We("invalid",a),b=v=d=null;for(E in l)if(l.hasOwnProperty(E)&&(N=l[E],N!=null))switch(E){case"value":d=N;break;case"defaultValue":v=N;break;case"children":b=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:ft(a,o,E,N,l,null)}L_(a,d,v,b);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(d=l[z],d!=null))switch(z){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ft(a,o,z,d,l,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(d=0;d<Kl.length;d++)We(Kl[d],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in l)if(l.hasOwnProperty(V)&&(d=l[V],d!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ft(a,o,V,d,l,null)}return;default:if(lh(o)){for(oe in l)l.hasOwnProperty(oe)&&(d=l[oe],d!==void 0&&Vp(a,o,oe,d,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(d=l[N],d!=null&&ft(a,o,N,d,l,null))}function pR(a,o,l,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,E=null,N=null,z=null,V=null,oe=null;for(te in l){var de=l[te];if(l.hasOwnProperty(te)&&de!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":z=de;default:d.hasOwnProperty(te)||ft(a,o,te,null,d,de)}}for(var Z in d){var te=d[Z];if(de=l[Z],d.hasOwnProperty(Z)&&(te!=null||de!=null))switch(Z){case"type":b=te;break;case"name":v=te;break;case"checked":V=te;break;case"defaultChecked":oe=te;break;case"value":E=te;break;case"defaultValue":N=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,o));break;default:te!==de&&ft(a,o,Z,te,d,de)}}oh(a,E,N,z,V,oe,b,v);return;case"select":te=E=N=Z=null;for(b in l)if(z=l[b],l.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":te=z;default:d.hasOwnProperty(b)||ft(a,o,b,null,d,z)}for(v in d)if(b=d[v],z=l[v],d.hasOwnProperty(v)&&(b!=null||z!=null))switch(v){case"value":Z=b;break;case"defaultValue":N=b;break;case"multiple":E=b;default:b!==z&&ft(a,o,v,b,d,z)}o=N,l=E,d=te,Z!=null?Qo(a,!!l,Z,!1):!!d!=!!l&&(o!=null?Qo(a,!!l,o,!0):Qo(a,!!l,l?[]:"",!1));return;case"textarea":te=Z=null;for(N in l)if(v=l[N],l.hasOwnProperty(N)&&v!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ft(a,o,N,null,d,v)}for(E in d)if(v=d[E],b=l[E],d.hasOwnProperty(E)&&(v!=null||b!=null))switch(E){case"value":Z=v;break;case"defaultValue":te=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(n(91));break;default:v!==b&&ft(a,o,E,v,d,b)}z_(a,Z,te);return;case"option":for(var Ae in l)if(Z=l[Ae],l.hasOwnProperty(Ae)&&Z!=null&&!d.hasOwnProperty(Ae))switch(Ae){case"selected":a.selected=!1;break;default:ft(a,o,Ae,null,d,Z)}for(z in d)if(Z=d[z],te=l[z],d.hasOwnProperty(z)&&Z!==te&&(Z!=null||te!=null))switch(z){case"selected":a.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ft(a,o,z,Z,d,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Le in l)Z=l[Le],l.hasOwnProperty(Le)&&Z!=null&&!d.hasOwnProperty(Le)&&ft(a,o,Le,null,d,Z);for(V in d)if(Z=d[V],te=l[V],d.hasOwnProperty(V)&&Z!==te&&(Z!=null||te!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,o));break;default:ft(a,o,V,Z,d,te)}return;default:if(lh(o)){for(var mt in l)Z=l[mt],l.hasOwnProperty(mt)&&Z!==void 0&&!d.hasOwnProperty(mt)&&Vp(a,o,mt,void 0,d,Z);for(oe in d)Z=d[oe],te=l[oe],!d.hasOwnProperty(oe)||Z===te||Z===void 0&&te===void 0||Vp(a,o,oe,Z,d,te);return}}for(var F in l)Z=l[F],l.hasOwnProperty(F)&&Z!=null&&!d.hasOwnProperty(F)&&ft(a,o,F,null,d,Z);for(de in d)Z=d[de],te=l[de],!d.hasOwnProperty(de)||Z===te||Z==null&&te==null||ft(a,o,de,Z,d,te)}function Bj(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function gR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var v=l[d],b=v.transferSize,E=v.initiatorType,N=v.duration;if(b&&N&&Bj(E)){for(E=0,N=v.responseEnd,d+=1;d<l.length;d++){var z=l[d],V=z.startTime;if(V>N)break;var oe=z.transferSize,de=z.initiatorType;oe&&Bj(de)&&(z=z.responseEnd,E+=oe*(z<N?1:(N-V)/(z-V)))}if(--d,o+=8*(b+E)/(v.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Wp=null,Xp=null;function dd(a){return a.nodeType===9?a:a.ownerDocument}function $j(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hj(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Zp(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Qp=null;function vR(){var a=window.event;return a&&a.type==="popstate"?a===Qp?!1:(Qp=a,!0):(Qp=null,!1)}var Fj=typeof setTimeout=="function"?setTimeout:void 0,yR=typeof clearTimeout=="function"?clearTimeout:void 0,Kj=typeof Promise=="function"?Promise:void 0,bR=typeof queueMicrotask=="function"?queueMicrotask:typeof Kj<"u"?function(a){return Kj.resolve(null).then(a).catch(_R)}:Fj;function _R(a){setTimeout(function(){throw a})}function ki(a){return a==="head"}function Yj(a,o){var l=o,d=0;do{var v=l.nextSibling;if(a.removeChild(l),v&&v.nodeType===8)if(l=v.data,l==="/$"||l==="/&"){if(d===0){a.removeChild(v),ks(o);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Gl(a.ownerDocument.documentElement);else if(l==="head"){l=a.ownerDocument.head,Gl(l);for(var b=l.firstChild;b;){var E=b.nextSibling,N=b.nodeName;b[Xo]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=E}}else l==="body"&&Gl(a.ownerDocument.body);l=v}while(l);ks(o)}function Gj(a,o){var l=a;a=0;do{var d=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(a===0)break;a--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||a++;l=d}while(l)}function Jp(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Jp(l),Zo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function xR(a,o,l,d){for(;a.nodeType===1;){var v=l;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Xo])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=kn(a.nextSibling),a===null)break}return null}function wR(a,o,l){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=kn(a.nextSibling),a===null))return null;return a}function Vj(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=kn(a.nextSibling),a===null))return null;return a}function eg(a){return a.data==="$?"||a.data==="$~"}function tg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function jR(a,o){var l=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||l.readyState!=="loading")o();else{var d=function(){o(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function kn(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var rg=null;function Wj(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="/$"||l==="/&"){if(o===0)return kn(a.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}a=a.nextSibling}return null}function Xj(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return a;o--}else l!=="/$"&&l!=="/&"||o++}a=a.previousSibling}return null}function Zj(a,o,l){switch(o=dd(l),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Gl(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Zo(a)}var Dn=new Map,Qj=new Set;function fd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var qa=I.d;I.d={f:SR,r:ER,D:OR,C:CR,L:AR,m:NR,X:DR,S:kR,M:TR};function SR(){var a=qa.f(),o=nd();return a||o}function ER(a){var o=fi(a);o!==null&&o.tag===5&&o.type==="form"?pw(o):qa.r(a)}var Cs=typeof document>"u"?null:document;function Jj(a,o,l){var d=Cs;if(d&&typeof o=="string"&&o){var v=jn(o);v='link[rel="'+a+'"][href="'+v+'"]',typeof l=="string"&&(v+='[crossorigin="'+l+'"]'),Qj.has(v)||(Qj.add(v),a={rel:a,crossOrigin:l,href:o},d.querySelector(v)===null&&(o=d.createElement("link"),Sr(o,"link",a),le(o),d.head.appendChild(o)))}}function OR(a){qa.D(a),Jj("dns-prefetch",a,null)}function CR(a,o){qa.C(a,o),Jj("preconnect",a,o)}function AR(a,o,l){qa.L(a,o,l);var d=Cs;if(d&&a&&o){var v='link[rel="preload"][as="'+jn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(v+='[imagesrcset="'+jn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(v+='[imagesizes="'+jn(l.imageSizes)+'"]')):v+='[href="'+jn(a)+'"]';var b=v;switch(o){case"style":b=As(a);break;case"script":b=Ns(a)}Dn.has(b)||(a=g({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:a,as:o},l),Dn.set(b,a),d.querySelector(v)!==null||o==="style"&&d.querySelector(Vl(b))||o==="script"&&d.querySelector(Wl(b))||(o=d.createElement("link"),Sr(o,"link",a),le(o),d.head.appendChild(o)))}}function NR(a,o){qa.m(a,o);var l=Cs;if(l&&a){var d=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+jn(d)+'"][href="'+jn(a)+'"]',b=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ns(a)}if(!Dn.has(b)&&(a=g({rel:"modulepreload",href:a},o),Dn.set(b,a),l.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Wl(b)))return}d=l.createElement("link"),Sr(d,"link",a),le(d),l.head.appendChild(d)}}}function kR(a,o,l){qa.S(a,o,l);var d=Cs;if(d&&a){var v=K(d).hoistableStyles,b=As(a);o=o||"default";var E=v.get(b);if(!E){var N={loading:0,preload:null};if(E=d.querySelector(Vl(b)))N.loading=5;else{a=g({rel:"stylesheet",href:a,"data-precedence":o},l),(l=Dn.get(b))&&ng(a,l);var z=E=d.createElement("link");le(z),Sr(z,"link",a),z._p=new Promise(function(V,oe){z.onload=V,z.onerror=oe}),z.addEventListener("load",function(){N.loading|=1}),z.addEventListener("error",function(){N.loading|=2}),N.loading|=4,md(E,o,d)}E={type:"stylesheet",instance:E,count:1,state:N},v.set(b,E)}}}function DR(a,o){qa.X(a,o);var l=Cs;if(l&&a){var d=K(l).hoistableScripts,v=Ns(a),b=d.get(v);b||(b=l.querySelector(Wl(v)),b||(a=g({src:a,async:!0},o),(o=Dn.get(v))&&ag(a,o),b=l.createElement("script"),le(b),Sr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(v,b))}}function TR(a,o){qa.M(a,o);var l=Cs;if(l&&a){var d=K(l).hoistableScripts,v=Ns(a),b=d.get(v);b||(b=l.querySelector(Wl(v)),b||(a=g({src:a,async:!0,type:"module"},o),(o=Dn.get(v))&&ag(a,o),b=l.createElement("script"),le(b),Sr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(v,b))}}function eS(a,o,l,d){var v=(v=Ue.current)?fd(v):null;if(!v)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=As(l.href),l=K(v).hoistableStyles,d=l.get(o),d||(d={type:"style",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=As(l.href);var b=K(v).hoistableStyles,E=b.get(a);if(E||(v=v.ownerDocument||v,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,E),(b=v.querySelector(Vl(a)))&&!b._p&&(E.instance=b,E.state.loading=5),Dn.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Dn.set(a,l),b||PR(v,a,l,E.state))),o&&d===null)throw Error(n(528,""));return E}if(o&&d!==null)throw Error(n(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ns(l),l=K(v).hoistableScripts,d=l.get(o),d||(d={type:"script",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function As(a){return'href="'+jn(a)+'"'}function Vl(a){return'link[rel="stylesheet"]['+a+"]"}function tS(a){return g({},a,{"data-precedence":a.precedence,precedence:null})}function PR(a,o,l,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Sr(o,"link",l),le(o),a.head.appendChild(o))}function Ns(a){return'[src="'+jn(a)+'"]'}function Wl(a){return"script[async]"+a}function rS(a,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+jn(l.href)+'"]');if(d)return o.instance=d,le(d),d;var v=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),le(d),Sr(d,"style",v),md(d,l.precedence,a),o.instance=d;case"stylesheet":v=As(l.href);var b=a.querySelector(Vl(v));if(b)return o.state.loading|=4,o.instance=b,le(b),b;d=tS(l),(v=Dn.get(v))&&ng(d,v),b=(a.ownerDocument||a).createElement("link"),le(b);var E=b;return E._p=new Promise(function(N,z){E.onload=N,E.onerror=z}),Sr(b,"link",d),o.state.loading|=4,md(b,l.precedence,a),o.instance=b;case"script":return b=Ns(l.src),(v=a.querySelector(Wl(b)))?(o.instance=v,le(v),v):(d=l,(v=Dn.get(b))&&(d=g({},l),ag(d,v)),a=a.ownerDocument||a,v=a.createElement("script"),le(v),Sr(v,"link",d),a.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,md(d,l.precedence,a));return o.instance}function md(a,o,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,b=v,E=0;E<d.length;E++){var N=d[E];if(N.dataset.precedence===o)b=N;else if(b!==v)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(a,o.firstChild))}function ng(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function ag(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var hd=null;function nS(a,o,l){if(hd===null){var d=new Map,v=hd=new Map;v.set(l,d)}else v=hd,d=v.get(l),d||(d=new Map,v.set(l,d));if(d.has(a))return d;for(d.set(a,null),l=l.getElementsByTagName(a),v=0;v<l.length;v++){var b=l[v];if(!(b[Xo]||b[Bt]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(o)||"";E=a+E;var N=d.get(E);N?N.push(b):d.set(E,[b])}}return d}function aS(a,o,l){a=a.ownerDocument||a,a.head.insertBefore(l,o==="title"?a.querySelector("head > title"):null)}function MR(a,o,l){if(l===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function iS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function RR(a,o,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var v=As(d.href),b=o.querySelector(Vl(v));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=pd.bind(a),o.then(a,a)),l.state.loading|=4,l.instance=b,le(b);return}b=o.ownerDocument||o,d=tS(d),(v=Dn.get(v))&&ng(d,v),b=b.createElement("link"),le(b);var E=b;E._p=new Promise(function(N,z){E.onload=N,E.onerror=z}),Sr(b,"link",d),l.instance=b}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=pd.bind(a),o.addEventListener("load",l),o.addEventListener("error",l))}}var ig=0;function qR(a,o){return a.stylesheets&&a.count===0&&vd(a,a.stylesheets),0<a.count||0<a.imgCount?function(l){var d=setTimeout(function(){if(a.stylesheets&&vd(a,a.stylesheets),a.unsuspend){var b=a.unsuspend;a.unsuspend=null,b()}},6e4+o);0<a.imgBytes&&ig===0&&(ig=62500*gR());var v=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&vd(a,a.stylesheets),a.unsuspend)){var b=a.unsuspend;a.unsuspend=null,b()}},(a.imgBytes>ig?50:800)+o);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function pd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var gd=null;function vd(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,gd=new Map,o.forEach(zR,a),gd=null,pd.call(a))}function zR(a,o){if(!(o.state.loading&4)){var l=gd.get(a);if(l)var d=l.get(null);else{l=new Map,gd.set(a,l);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var E=v[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),d=E)}d&&l.set(null,d)}v=o.instance,E=v.getAttribute("data-precedence"),b=l.get(E)||d,b===d&&l.set(null,v),l.set(E,v),this.count++,d=pd.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),b?b.parentNode.insertBefore(v,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),o.state.loading|=4}}var Xl={$$typeof:A,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function LR(a,o,l,d,v,b,E,N,z){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Un(0),this.hiddenUpdates=Un(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function oS(a,o,l,d,v,b,E,N,z,V,oe,de){return a=new LR(a,o,l,E,z,V,oe,de,N),o=1,b===!0&&(o|=24),b=rn(3,null,null,o),a.current=b,b.stateNode=a,o=Lh(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:o},$h(b),a}function sS(a){return a?(a=os,a):os}function lS(a,o,l,d,v,b){v=sS(v),d.context===null?d.context=v:d.pendingContext=v,d=bi(o),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=_i(a,d,o),l!==null&&(Vr(l,a,o),Al(l,a,o))}function cS(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<o?l:o}}function og(a,o){cS(a,o),(a=a.alternate)&&cS(a,o)}function uS(a){if(a.tag===13||a.tag===31){var o=io(a,67108864);o!==null&&Vr(o,a,67108864),og(a,67108864)}}function dS(a){if(a.tag===13||a.tag===31){var o=ln();o=cl(o);var l=io(a,o);l!==null&&Vr(l,a,o),og(a,o)}}var yd=!0;function IR(a,o,l,d){var v=R.T;R.T=null;var b=I.p;try{I.p=2,sg(a,o,l,d)}finally{I.p=b,R.T=v}}function UR(a,o,l,d){var v=R.T;R.T=null;var b=I.p;try{I.p=8,sg(a,o,l,d)}finally{I.p=b,R.T=v}}function sg(a,o,l,d){if(yd){var v=lg(d);if(v===null)Gp(a,o,d,bd,l),mS(a,d);else if($R(v,a,o,l,d))d.stopPropagation();else if(mS(a,d),o&4&&-1<BR.indexOf(a)){for(;v!==null;){var b=fi(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=xn(b.pendingLanes);if(E!==0){var N=b;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var z=1<<31-xt(E);N.entanglements[1]|=z,E&=~z}oa(b),(it&6)===0&&(td=Ye()+500,Fl(0))}}break;case 31:case 13:N=io(b,2),N!==null&&Vr(N,b,2),nd(),og(b,2)}if(b=lg(d),b===null&&Gp(a,o,d,bd,l),b===v)break;v=b}v!==null&&d.stopPropagation()}else Gp(a,o,d,null,l)}}function lg(a){return a=uh(a),cg(a)}var bd=null;function cg(a){if(bd=null,a=$n(a),a!==null){var o=s(a);if(o===null)a=null;else{var l=o.tag;if(l===13){if(a=c(o),a!==null)return a;a=null}else if(l===31){if(a=u(o),a!==null)return a;a=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return bd=a,null}function fS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($r()){case bn:return 2;case Pr:return 8;case Ar:case fe:return 32;case st:return 268435456;default:return 32}default:return 32}}var ug=!1,Di=null,Ti=null,Pi=null,Zl=new Map,Ql=new Map,Mi=[],BR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mS(a,o){switch(a){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Zl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(o.pointerId)}}function Jl(a,o,l,d,v,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[v]},o!==null&&(o=fi(o),o!==null&&uS(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),a)}function $R(a,o,l,d,v){switch(o){case"focusin":return Di=Jl(Di,a,o,l,d,v),!0;case"dragenter":return Ti=Jl(Ti,a,o,l,d,v),!0;case"mouseover":return Pi=Jl(Pi,a,o,l,d,v),!0;case"pointerover":var b=v.pointerId;return Zl.set(b,Jl(Zl.get(b)||null,a,o,l,d,v)),!0;case"gotpointercapture":return b=v.pointerId,Ql.set(b,Jl(Ql.get(b)||null,a,o,l,d,v)),!0}return!1}function hS(a){var o=$n(a.target);if(o!==null){var l=s(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){a.blockedOn=o,Ji(a.priority,function(){dS(l)});return}}else if(o===31){if(o=u(l),o!==null){a.blockedOn=o,Ji(a.priority,function(){dS(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function _d(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var l=lg(a.nativeEvent);if(l===null){l=a.nativeEvent;var d=new l.constructor(l.type,l);ch=d,l.target.dispatchEvent(d),ch=null}else return o=fi(l),o!==null&&uS(o),a.blockedOn=l,!1;o.shift()}return!0}function pS(a,o,l){_d(a)&&l.delete(o)}function HR(){ug=!1,Di!==null&&_d(Di)&&(Di=null),Ti!==null&&_d(Ti)&&(Ti=null),Pi!==null&&_d(Pi)&&(Pi=null),Zl.forEach(pS),Ql.forEach(pS)}function xd(a,o){a.blockedOn===o&&(a.blockedOn=null,ug||(ug=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,HR)))}var wd=null;function gS(a){wd!==a&&(wd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){wd===a&&(wd=null);for(var o=0;o<a.length;o+=3){var l=a[o],d=a[o+1],v=a[o+2];if(typeof d!="function"){if(cg(d||l)===null)continue;break}var b=fi(l);b!==null&&(a.splice(o,3),o-=3,lp(b,{pending:!0,data:v,method:l.method,action:d},d,v))}}))}function ks(a){function o(z){return xd(z,a)}Di!==null&&xd(Di,a),Ti!==null&&xd(Ti,a),Pi!==null&&xd(Pi,a),Zl.forEach(o),Ql.forEach(o);for(var l=0;l<Mi.length;l++){var d=Mi[l];d.blockedOn===a&&(d.blockedOn=null)}for(;0<Mi.length&&(l=Mi[0],l.blockedOn===null);)hS(l),l.blockedOn===null&&Mi.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var v=l[d],b=l[d+1],E=v[ar]||null;if(typeof b=="function")E||gS(l);else if(E){var N=null;if(b&&b.hasAttribute("formAction")){if(v=b,E=b[ar]||null)N=E.formAction;else if(cg(v)!==null)continue}else N=E.action;typeof N=="function"?l[d+1]=N:(l.splice(d,3),d-=3),gS(l)}}}function vS(){function a(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(E){return v=E})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function dg(a){this._internalRoot=a}jd.prototype.render=dg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var l=o.current,d=ln();lS(l,d,a,o,null,null)},jd.prototype.unmount=dg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;lS(a.current,2,null,a,null,null),nd(),o[ra]=null}};function jd(a){this._internalRoot=a}jd.prototype.unstable_scheduleHydration=function(a){if(a){var o=Qi();a={blockedOn:null,target:a,priority:o};for(var l=0;l<Mi.length&&o!==0&&o<Mi[l].priority;l++);Mi.splice(l,0,a),l===0&&hS(a)}};var yS=t.version;if(yS!=="19.2.0")throw Error(n(527,yS,"19.2.0"));I.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var FR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{Rr=Sd.inject(FR),gt=Sd}catch{}}return tc.createRoot=function(a,o){if(!i(a))throw Error(n(299));var l=!1,d="",v=Ew,b=Ow,E=Cw;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=oS(a,1,!1,null,null,l,d,null,v,b,E,vS),a[ra]=o.current,Yp(a),new dg(o)},tc.hydrateRoot=function(a,o,l){if(!i(a))throw Error(n(299));var d=!1,v="",b=Ew,E=Ow,N=Cw,z=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(v=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),o=oS(a,1,!0,o,l??null,d,v,z,b,E,N,vS),o.context=sS(null),l=o.current,d=ln(),d=cl(d),v=bi(d),v.callback=null,_i(l,v,d),l=d,o.current.lanes=l,ya(o,l),oa(o),a[ra]=o.current,Yp(a),new jd(o)},tc.version="19.2.0",tc}var OS;function Mq(){if(OS)return mg.exports;OS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mg.exports=Pq(),mg.exports}var Rq=Mq();const qq=Qa(Rq);var CS="popstate";function AS(e){return typeof e=="object"&&e!=null&&"pathname"in e&&"search"in e&&"hash"in e&&"state"in e&&"key"in e}function zq(e={}){function t(n,i){let s=i.state?.masked,{pathname:c,search:u,hash:m}=s||n.location;return dy("",{pathname:c,search:u,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default",s?{pathname:n.location.pathname,search:n.location.search,hash:n.location.hash}:void 0)}function r(n,i){return typeof i=="string"?i:xc(i)}return Iq(t,r,null,e)}function Pt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Lq(){return Math.random().toString(36).substring(2,10)}function NS(e,t){return{usr:e.state,key:e.key,idx:t,masked:e.unstable_mask?{pathname:e.pathname,search:e.search,hash:e.hash}:void 0}}function dy(e,t,r=null,n,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Vs(t):t,state:r,key:t&&t.key||n||Lq(),unstable_mask:i}}function xc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vs(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Iq(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,c=i.history,u="POP",m=null,h=p();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function p(){return(c.state||{idx:null}).idx}function g(){u="POP";let S=p(),O=S==null?null:S-h;h=S,m&&m({action:u,location:j.location,delta:O})}function _(S,O){u="PUSH";let C=AS(S)?S:dy(j.location,S,O);h=p()+1;let A=NS(C,h),k=j.createHref(C.unstable_mask||C);try{c.pushState(A,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(k)}s&&m&&m({action:u,location:j.location,delta:1})}function x(S,O){u="REPLACE";let C=AS(S)?S:dy(j.location,S,O);h=p();let A=NS(C,h),k=j.createHref(C.unstable_mask||C);c.replaceState(A,"",k),s&&m&&m({action:u,location:j.location,delta:0})}function w(S){return Uq(S)}let j={get action(){return u},get location(){return e(i,c)},listen(S){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(CS,g),m=S,()=>{i.removeEventListener(CS,g),m=null}},createHref(S){return t(i,S)},createURL:w,encodeLocation(S){let O=w(S);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:x,go(S){return c.go(S)}};return j}function Uq(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Pt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:xc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function tN(e,t,r="/"){return Bq(e,t,r,!1)}function Bq(e,t,r,n){let i=typeof t=="string"?Vs(t):t,s=Fa(i.pathname||"/",r);if(s==null)return null;let c=rN(e);$q(c);let u=null;for(let m=0;u==null&&m<c.length;++m){let h=Jq(s);u=Zq(c[m],h,n)}return u}function rN(e,t=[],r=[],n="",i=!1){let s=(c,u,m=i,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&m)return;Pt(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let g=ua([n,p.relativePath]),_=r.concat(p);c.children&&c.children.length>0&&(Pt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),rN(c.children,t,_,g,m)),!(c.path==null&&!c.index)&&t.push({path:g,score:Wq(g,c.index),routesMeta:_})};return e.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))s(c,u);else for(let m of nN(c.path))s(c,u,!0,m)}),t}function nN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let c=nN(n.join("/")),u=[];return u.push(...c.map(m=>m===""?s:[s,m].join("/"))),i&&u.push(...c),u.map(m=>e.startsWith("/")&&m===""?"/":m)}function $q(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Xq(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Hq=/^:[\w-]+$/,Fq=3,Kq=2,Yq=1,Gq=10,Vq=-2,kS=e=>e==="*";function Wq(e,t){let r=e.split("/"),n=r.length;return r.some(kS)&&(n+=Vq),t&&(n+=Kq),r.filter(i=>!kS(i)).reduce((i,s)=>i+(Hq.test(s)?Fq:s===""?Yq:Gq),n)}function Xq(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Zq(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",c=[];for(let u=0;u<n.length;++u){let m=n[u],h=u===n.length-1,p=s==="/"?t:t.slice(s.length)||"/",g=ff({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},p),_=m.route;if(!g&&h&&r&&!n[n.length-1].route.index&&(g=ff({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:ua([s,g.pathname]),pathnameBase:nz(ua([s,g.pathnameBase])),route:_}),g.pathnameBase!=="/"&&(s=ua([s,g.pathnameBase]))}return c}function ff(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Qq(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],c=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:g},_)=>{if(p==="*"){let w=u[_]||"";c=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[_];return g&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:c,pattern:e}}function Qq(e,t=!1,r=!0){Zn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,m,h,p)=>{if(n.push({paramName:u,isOptional:m!=null}),m){let g=p.charAt(h+c.length);return g&&g!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Jq(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Fa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var ez=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function tz(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Vs(e):e,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=DS(r.substring(1),"/"):s=DS(r,t)):s=t,{pathname:s,search:az(n),hash:iz(i)}}function DS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function gg(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function rz(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Sb(e){let t=rz(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function lm(e,t,r,n=!1){let i;typeof e=="string"?i=Vs(e):(i={...e},Pt(!i.pathname||!i.pathname.includes("?"),gg("?","pathname","search",i)),Pt(!i.pathname||!i.pathname.includes("#"),gg("#","pathname","hash",i)),Pt(!i.search||!i.search.includes("#"),gg("#","search","hash",i)));let s=e===""||i.pathname==="",c=s?"/":i.pathname,u;if(c==null)u=r;else{let g=t.length-1;if(!n&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),g-=1;i.pathname=_.join("/")}u=g>=0?t[g]:"/"}let m=tz(i,u),h=c&&c!=="/"&&c.endsWith("/"),p=(s||c===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(h||p)&&(m.pathname+="/"),m}var ua=e=>e.join("/").replace(/\/\/+/g,"/"),nz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),az=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iz=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,oz=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function sz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function lz(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function iN(e,t){let r=e;if(typeof r!="string"||!ez.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(aN)try{let s=new URL(window.location.href),c=r.startsWith("//")?new URL(s.protocol+r):new URL(r),u=Fa(c.pathname,t);c.origin===s.origin&&u!=null?r=u+c.search+c.hash:i=!0}catch{Zn(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oN=["POST","PUT","PATCH","DELETE"];new Set(oN);var cz=["GET",...oN];new Set(cz);var Ws=y.createContext(null);Ws.displayName="DataRouter";var cm=y.createContext(null);cm.displayName="DataRouterState";var uz=y.createContext(!1),sN=y.createContext({isTransitioning:!1});sN.displayName="ViewTransition";var dz=y.createContext(new Map);dz.displayName="Fetchers";var fz=y.createContext(null);fz.displayName="Await";var yn=y.createContext(null);yn.displayName="Navigation";var Lc=y.createContext(null);Lc.displayName="Location";var ea=y.createContext({outlet:null,matches:[],isDataRoute:!1});ea.displayName="Route";var Eb=y.createContext(null);Eb.displayName="RouteError";var lN="REACT_ROUTER_ERROR",mz="REDIRECT",hz="ROUTE_ERROR_RESPONSE";function pz(e){if(e.startsWith(`${lN}:${mz}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function gz(e){if(e.startsWith(`${lN}:${hz}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new oz(t.status,t.statusText,t.data)}catch{}}function vz(e,{relative:t}={}){Pt(Xs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(yn),{hash:i,pathname:s,search:c}=Ic(e,{relative:t}),u=s;return r!=="/"&&(u=s==="/"?r:ua([r,s])),n.createHref({pathname:u,search:c,hash:i})}function Xs(){return y.useContext(Lc)!=null}function pa(){return Pt(Xs(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Lc).location}var cN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uN(e){y.useContext(yn).static||y.useLayoutEffect(e)}function Ob(){let{isDataRoute:e}=y.useContext(ea);return e?kz():yz()}function yz(){Pt(Xs(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(Ws),{basename:t,navigator:r}=y.useContext(yn),{matches:n}=y.useContext(ea),{pathname:i}=pa(),s=JSON.stringify(Sb(n)),c=y.useRef(!1);return uN(()=>{c.current=!0}),y.useCallback((m,h={})=>{if(Zn(c.current,cN),!c.current)return;if(typeof m=="number"){r.go(m);return}let p=lm(m,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ua([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,s,i,e])}y.createContext(null);function dN(){let{matches:e}=y.useContext(ea),t=e[e.length-1];return t?t.params:{}}function Ic(e,{relative:t}={}){let{matches:r}=y.useContext(ea),{pathname:n}=pa(),i=JSON.stringify(Sb(r));return y.useMemo(()=>lm(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function bz(e,t){return fN(e,t)}function fN(e,t,r){Pt(Xs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=y.useContext(yn),{matches:i}=y.useContext(ea),s=i[i.length-1],c=s?s.params:{},u=s?s.pathname:"/",m=s?s.pathnameBase:"/",h=s&&s.route;{let S=h&&h.path||"";hN(u,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=pa(),g;if(t){let S=typeof t=="string"?Vs(t):t;Pt(m==="/"||S.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=p;let _=g.pathname||"/",x=_;if(m!=="/"){let S=m.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=tN(e,{pathname:x});Zn(h||w!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Zn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=Sz(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:ua([m,n.encodeLocation?n.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:ua([m,n.encodeLocation?n.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),i,r);return t&&j?y.createElement(Lc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0,...g},navigationType:"POP"}},j):j}function _z(){let e=Nz(),t=sz(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:i},r):null,c)}var xz=y.createElement(_z,null),mN=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=gz(e.digest);r&&(e=r)}let t=e!==void 0?y.createElement(ea.Provider,{value:this.props.routeContext},y.createElement(Eb.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?y.createElement(wz,{error:e},t):t}};mN.contextType=uz;var vg=new WeakMap;function wz({children:e,error:t}){let{basename:r}=y.useContext(yn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=pz(t.digest);if(n){let i=vg.get(t);if(i)throw i;let s=iN(n.location,r);if(aN&&!vg.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw vg.set(t,c),c}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function jz({routeContext:e,match:t,children:r}){let n=y.useContext(Ws);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(ea.Provider,{value:e},r)}function Sz(e,t=[],r){let n=r?.state;if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n?.errors;if(s!=null){let p=i.findIndex(g=>g.route.id&&s?.[g.route.id]!==void 0);Pt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,u=-1;if(r&&n){c=n.renderFallback;for(let p=0;p<i.length;p++){let g=i[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=p),g.route.id){let{loaderData:_,errors:x}=n,w=g.route.loader&&!_.hasOwnProperty(g.route.id)&&(!x||x[g.route.id]===void 0);if(g.route.lazy||w){r.isStatic&&(c=!0),u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}}let m=r?.onError,h=n&&m?(p,g)=>{m(p,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:lz(n.matches),errorInfo:g})}:void 0;return i.reduceRight((p,g,_)=>{let x,w=!1,j=null,S=null;n&&(x=s&&g.route.id?s[g.route.id]:void 0,j=g.route.errorElement||xz,c&&(u<0&&_===0?(hN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===_&&(w=!0,S=g.route.hydrateFallbackElement||null)));let O=t.concat(i.slice(0,_+1)),C=()=>{let A;return x?A=j:w?A=S:g.route.Component?A=y.createElement(g.route.Component,null):g.route.element?A=g.route.element:A=p,y.createElement(jz,{match:g,routeContext:{outlet:p,matches:O,isDataRoute:n!=null},children:A})};return n&&(g.route.ErrorBoundary||g.route.errorElement||_===0)?y.createElement(mN,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:C(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:h}):C()},null)}function Cb(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ez(e){let t=y.useContext(Ws);return Pt(t,Cb(e)),t}function Oz(e){let t=y.useContext(cm);return Pt(t,Cb(e)),t}function Cz(e){let t=y.useContext(ea);return Pt(t,Cb(e)),t}function Ab(e){let t=Cz(e),r=t.matches[t.matches.length-1];return Pt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Az(){return Ab("useRouteId")}function Nz(){let e=y.useContext(Eb),t=Oz("useRouteError"),r=Ab("useRouteError");return e!==void 0?e:t.errors?.[r]}function kz(){let{router:e}=Ez("useNavigate"),t=Ab("useNavigate"),r=y.useRef(!1);return uN(()=>{r.current=!0}),y.useCallback(async(i,s={})=>{Zn(r.current,cN),r.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var TS={};function hN(e,t,r){!t&&!TS[e]&&(TS[e]=!0,Zn(!1,r))}y.memo(Dz);function Dz({routes:e,future:t,state:r,isStatic:n,onError:i}){return fN(e,void 0,{state:r,isStatic:n,onError:i})}function bo({to:e,replace:t,state:r,relative:n}){Pt(Xs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(yn);Zn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=y.useContext(ea),{pathname:c}=pa(),u=Ob(),m=lm(e,Sb(s),c,n==="path"),h=JSON.stringify(m);return y.useEffect(()=>{u(JSON.parse(h),{replace:t,state:r,relative:n})},[u,h,n,t,r]),null}function dn(e){Pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Tz({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:c}){Pt(!Xs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),m=y.useMemo(()=>({basename:u,navigator:i,static:s,unstable_useTransitions:c,future:{}}),[u,i,s,c]);typeof r=="string"&&(r=Vs(r));let{pathname:h="/",search:p="",hash:g="",state:_=null,key:x="default",unstable_mask:w}=r,j=y.useMemo(()=>{let S=Fa(h,u);return S==null?null:{location:{pathname:S,search:p,hash:g,state:_,key:x,unstable_mask:w},navigationType:n}},[u,h,p,g,_,x,n,w]);return Zn(j!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:y.createElement(yn.Provider,{value:m},y.createElement(Lc.Provider,{children:t,value:j}))}function Pz({children:e,location:t}){return bz(fy(e),t)}function fy(e,t=[]){let r=[];return y.Children.forEach(e,(n,i)=>{if(!y.isValidElement(n))return;let s=[...t,i];if(n.type===y.Fragment){r.push.apply(r,fy(n.props.children,s));return}Pt(n.type===dn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=fy(n.props.children,s)),r.push(c)}),r}var Qd="get",Jd="application/x-www-form-urlencoded";function um(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Mz(e){return um(e)&&e.tagName.toLowerCase()==="button"}function Rz(e){return um(e)&&e.tagName.toLowerCase()==="form"}function qz(e){return um(e)&&e.tagName.toLowerCase()==="input"}function zz(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Lz(e,t){return e.button===0&&(!t||t==="_self")&&!zz(e)}var Ed=null;function Iz(){if(Ed===null)try{new FormData(document.createElement("form"),0),Ed=!1}catch{Ed=!0}return Ed}var Uz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yg(e){return e!=null&&!Uz.has(e)?(Zn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jd}"`),null):e}function Bz(e,t){let r,n,i,s,c;if(Rz(e)){let u=e.getAttribute("action");n=u?Fa(u,t):null,r=e.getAttribute("method")||Qd,i=yg(e.getAttribute("enctype"))||Jd,s=new FormData(e)}else if(Mz(e)||qz(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||u.getAttribute("action");if(n=m?Fa(m,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Qd,i=yg(e.getAttribute("formenctype"))||yg(u.getAttribute("enctype"))||Jd,s=new FormData(u,e),!Iz()){let{name:h,type:p,value:g}=e;if(p==="image"){let _=h?`${h}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else h&&s.append(h,g)}}else{if(um(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Qd,n=null,i=Jd,c=e}return s&&i==="text/plain"&&(c=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nb(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function $z(e,t,r,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:t&&Fa(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function Hz(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Fz(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Kz(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let c=await Hz(s,r);return c.links?c.links():[]}return[]}));return Wz(n.flat(1).filter(Fz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function PS(e,t,r,n,i,s){let c=(m,h)=>r[h]?m.route.id!==r[h].route.id:!0,u=(m,h)=>r[h].pathname!==m.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==m.params["*"];return s==="assets"?t.filter((m,h)=>c(m,h)||u(m,h)):s==="data"?t.filter((m,h)=>{let p=n.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(c(m,h)||u(m,h))return!0;if(m.route.shouldRevalidate){let g=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function Yz(e,t,{includeHydrateFallback:r}={}){return Gz(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Gz(e){return[...new Set(e)]}function Vz(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Wz(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(Vz(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function pN(){let e=y.useContext(Ws);return Nb(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Xz(){let e=y.useContext(cm);return Nb(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var kb=y.createContext(void 0);kb.displayName="FrameworkContext";function gN(){let e=y.useContext(kb);return Nb(e,"You must render this element inside a <HydratedRouter> element"),e}function Zz(e,t){let r=y.useContext(kb),[n,i]=y.useState(!1),[s,c]=y.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:h,onMouseLeave:p,onTouchStart:g}=t,_=y.useRef(null);y.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let j=O=>{O.forEach(C=>{c(C.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[e]),y.useEffect(()=>{if(n){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{i(!0)},w=()=>{i(!1),c(!1)};return r?e!=="intent"?[s,_,{}]:[s,_,{onFocus:rc(u,x),onBlur:rc(m,w),onMouseEnter:rc(h,x),onMouseLeave:rc(p,w),onTouchStart:rc(g,x)}]:[!1,_,{}]}function rc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Qz({page:e,...t}){let{router:r}=pN(),n=y.useMemo(()=>tN(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(eL,{page:e,matches:n,...t}):null}function Jz(e){let{manifest:t,routeModules:r}=gN(),[n,i]=y.useState([]);return y.useEffect(()=>{let s=!1;return Kz(e,t,r).then(c=>{s||i(c)}),()=>{s=!0}},[e,t,r]),n}function eL({page:e,matches:t,...r}){let n=pa(),{future:i,manifest:s,routeModules:c}=gN(),{basename:u}=pN(),{loaderData:m,matches:h}=Xz(),p=y.useMemo(()=>PS(e,t,h,s,n,"data"),[e,t,h,s,n]),g=y.useMemo(()=>PS(e,t,h,s,n,"assets"),[e,t,h,s,n]),_=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,S=!1;if(t.forEach(C=>{let A=s.routes[C.route.id];!A||!A.hasLoader||(!p.some(k=>k.route.id===C.route.id)&&C.route.id in m&&c[C.route.id]?.shouldRevalidate||A.hasClientLoader?S=!0:j.add(C.route.id))}),j.size===0)return[];let O=$z(e,u,i.unstable_trailingSlashAwareDataRequests,"data");return S&&j.size>0&&O.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[O.pathname+O.search]},[u,i.unstable_trailingSlashAwareDataRequests,m,n,s,p,t,e,c]),x=y.useMemo(()=>Yz(g,s),[g,s]),w=Jz(g);return y.createElement(y.Fragment,null,_.map(j=>y.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>y.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),w.map(({key:j,link:S})=>y.createElement("link",{key:j,nonce:r.nonce,...S,crossOrigin:S.crossOrigin??r.crossOrigin})))}function tL(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var rL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{rL&&(window.__reactRouterVersion="7.13.1")}catch{}function nL({basename:e,children:t,unstable_useTransitions:r,window:n}){let i=y.useRef();i.current==null&&(i.current=zq({window:n,v5Compat:!0}));let s=i.current,[c,u]=y.useState({action:s.action,location:s.location}),m=y.useCallback(h=>{r===!1?u(h):y.startTransition(()=>u(h))},[r]);return y.useLayoutEffect(()=>s.listen(m),[s,m]),y.createElement(Tz,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:s,unstable_useTransitions:r})}var vN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yN=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:c,unstable_mask:u,state:m,target:h,to:p,preventScrollReset:g,viewTransition:_,unstable_defaultShouldRevalidate:x,...w},j){let{basename:S,navigator:O,unstable_useTransitions:C}=y.useContext(yn),A=typeof p=="string"&&vN.test(p),k=iN(p,S);p=k.to;let D=vz(p,{relative:i}),M=pa(),L=null;if(u){let q=lm(u,[],M.unstable_mask?M.unstable_mask.pathname:"/",!0);S!=="/"&&(q.pathname=q.pathname==="/"?S:ua([S,q.pathname])),L=O.createHref(q)}let[X,ne,ae]=Zz(n,w),G=sL(p,{replace:c,unstable_mask:u,state:m,target:h,preventScrollReset:g,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:x,unstable_useTransitions:C});function B(q){t&&t(q),q.defaultPrevented||G(q)}let ce=!(k.isExternal||s),ge=y.createElement("a",{...w,...ae,href:(ce?L:void 0)||k.absoluteURL||D,onClick:ce?B:t,ref:tL(j,ne),target:h,"data-discover":!A&&r==="render"?"true":void 0});return X&&!A?y.createElement(y.Fragment,null,ge,y.createElement(Qz,{page:D})):ge});yN.displayName="Link";var aL=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:c,viewTransition:u,children:m,...h},p){let g=Ic(c,{relative:h.relative}),_=pa(),x=y.useContext(cm),{navigator:w,basename:j}=y.useContext(yn),S=x!=null&&fL(g)&&u===!0,O=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,C=_.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),A=A?A.toLowerCase():null,O=O.toLowerCase()),A&&j&&(A=Fa(A,j)||A);const k=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let D=C===O||!i&&C.startsWith(O)&&C.charAt(k)==="/",M=A!=null&&(A===O||!i&&A.startsWith(O)&&A.charAt(O.length)==="/"),L={isActive:D,isPending:M,isTransitioning:S},X=D?t:void 0,ne;typeof n=="function"?ne=n(L):ne=[n,D?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ae=typeof s=="function"?s(L):s;return y.createElement(yN,{...h,"aria-current":X,className:ne,ref:p,style:ae,to:c,viewTransition:u},typeof m=="function"?m(L):m)});aL.displayName="NavLink";var iL=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:c=Qd,action:u,onSubmit:m,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:_,...x},w)=>{let{unstable_useTransitions:j}=y.useContext(yn),S=uL(),O=dL(u,{relative:h}),C=c.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&vN.test(u),k=D=>{if(m&&m(D),D.defaultPrevented)return;D.preventDefault();let M=D.nativeEvent.submitter,L=M?.getAttribute("formmethod")||c,X=()=>S(M||D.currentTarget,{fetcherKey:t,method:L,navigate:r,replace:i,state:s,relative:h,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:_});j&&r!==!1?y.startTransition(()=>X()):X()};return y.createElement("form",{ref:w,method:C,action:O,onSubmit:n?m:k,...x,"data-discover":!A&&e==="render"?"true":void 0})});iL.displayName="Form";function oL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bN(e){let t=y.useContext(Ws);return Pt(t,oL(e)),t}function sL(e,{target:t,replace:r,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m,unstable_useTransitions:h}={}){let p=Ob(),g=pa(),_=Ic(e,{relative:c});return y.useCallback(x=>{if(Lz(x,t)){x.preventDefault();let w=r!==void 0?r:xc(g)===xc(_),j=()=>p(e,{replace:w,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m});h?y.startTransition(()=>j()):j()}},[g,p,_,r,n,i,t,e,s,c,u,m,h])}var lL=0,cL=()=>`__${String(++lL)}__`;function uL(){let{router:e}=bN("useSubmit"),{basename:t}=y.useContext(yn),r=Az(),n=e.fetch,i=e.navigate;return y.useCallback(async(s,c={})=>{let{action:u,method:m,encType:h,formData:p,body:g}=Bz(s,t);if(c.navigate===!1){let _=c.fetcherKey||cL();await n(_,r,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||m,formEncType:c.encType||h,flushSync:c.flushSync})}else await i(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||m,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,i,t,r])}function dL(e,{relative:t}={}){let{basename:r}=y.useContext(yn),n=y.useContext(ea);Pt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Ic(e||".",{relative:t})},c=pa();if(e==null){s.search=c.search;let u=new URLSearchParams(s.search),m=u.getAll("index");if(m.some(p=>p==="")){u.delete("index"),m.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();s.search=p?`?${p}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:ua([r,s.pathname])),xc(s)}function fL(e,{relative:t}={}){let r=y.useContext(sN);Pt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=bN("useViewTransitionState"),i=Ic(e,{relative:t});if(!r.isTransitioning)return!1;let s=Fa(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=Fa(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ff(i.pathname,c)!=null||ff(i.pathname,s)!=null}var _N=JA();function mL(e,t,r=[]){if(!e||!t)return{hasConflict:!1,conflicts:[]};const n=new Date(e._offlineModifiedAt||e.updated_at||0),i=new Date(t.updated_at||0),s=new Date(e._cachedAt||0);if(i<=s)return{hasConflict:!1,conflicts:[]};const c=[],u=r.length>0?r:Object.keys(e).filter(m=>!m.startsWith("_")&&m!=="id"&&m!=="created_at");for(const m of u){const h=e[m],p=t[m];if(h!==void 0&&p!==void 0&&!ef(h,p)){const g=e._cachedValues?.[m],_=g!==void 0?!ef(h,g):!0,x=g!==void 0?!ef(p,g):!0;_&&x&&c.push({field:m,localValue:h,serverValue:p,cachedValue:g})}}return{hasConflict:c.length>0,conflicts:c,localModifiedAt:n,serverUpdatedAt:i}}function ef(e,t){if(e===t)return!0;if(e==null||t==null)return e===t;if(typeof e!=typeof t)return!1;if(typeof e!="object")return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;const r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(i=>ef(e[i],t[i]))}const hL={KEEP_LOCAL:"keep_local",KEEP_SERVER:"keep_server",MERGE:"merge"};function pL(e,t=[]){const r={...e,_cachedAt:new Date().toISOString()};if(t.length>0){r._cachedValues={};for(const n of t)e[n]!==void 0&&(r._cachedValues[n]=JSON.parse(JSON.stringify(e[n])))}return r}function gL(e,t="record"){if(!e.hasConflict)return null;if(e.deletedOnServer)return{title:`${MS(t)} was deleted`,description:`This ${t} was deleted by another user while you were offline.`,severity:"warning",conflictCount:1};const r=e.conflicts.map(n=>n.field).join(", ");return{title:`${MS(t)} was modified`,description:`The following fields were changed by another user: ${r}`,severity:e.conflicts.length>2?"warning":"info",conflictCount:e.conflicts.length,fields:e.conflicts}}function MS(e){return e.charAt(0).toUpperCase()+e.slice(1)}const vL="fieldsync-offline",yL=2,tt={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let So=null;const ei=()=>new Promise((e,t)=>{if(So){e(So);return}const r=indexedDB.open(vL,yL);r.onerror=()=>{console.error("Failed to open offline database"),t(r.error)},r.onsuccess=()=>{So=r.result,e(So)},r.onupgradeneeded=n=>{const i=n.target.result;if(i.objectStoreNames.contains(tt.PROJECTS)||i.createObjectStore(tt.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),i.objectStoreNames.contains(tt.AREAS)||i.createObjectStore(tt.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.CREW_CHECKINS)||i.createObjectStore(tt.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.TM_TICKETS)||i.createObjectStore(tt.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.DAILY_REPORTS)||i.createObjectStore(tt.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(tt.MESSAGES)||i.createObjectStore(tt.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!i.objectStoreNames.contains(tt.PENDING_ACTIONS)){const s=i.createObjectStore(tt.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});s.createIndex("type","type",{unique:!1}),s.createIndex("created_at","created_at",{unique:!1})}i.objectStoreNames.contains(tt.CACHED_DATA)||i.createObjectStore(tt.CACHED_DATA,{keyPath:"key"})}}),Fo=(e,t="readonly")=>{if(!So)throw new Error("Database not initialized");return So.transaction(e,t).objectStore(e)},Uc=async(e,t)=>(await ei(),new Promise((r,n)=>{const s=Fo(e,"readwrite").put(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),xN=async(e,t)=>(await ei(),new Promise((r,n)=>{const i=So.transaction(e,"readwrite"),s=i.objectStore(e);t.forEach(c=>s.put(c)),i.oncomplete=()=>r(),i.onerror=()=>n(i.error)})),wN=async(e,t)=>(await ei(),new Promise((r,n)=>{const s=Fo(e).get(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),jN=async e=>(await ei(),new Promise((t,r)=>{const i=Fo(e).getAll();i.onsuccess=()=>t(i.result||[]),i.onerror=()=>r(i.error)})),Db=async(e,t,r)=>(await ei(),new Promise((n,i)=>{const u=Fo(e).index(t).getAll(r);u.onsuccess=()=>n(u.result||[]),u.onerror=()=>i(u.error)})),bL=async(e,t)=>(await ei(),new Promise((r,n)=>{const s=Fo(e,"readwrite").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})),Wt={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},cn=async(e,t,r={})=>{await ei();const n={type:e,payload:t,metadata:r,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((i,s)=>{const u=Fo(tt.PENDING_ACTIONS,"readwrite").add(n);u.onsuccess=()=>{i(u.result)},u.onerror=()=>s(u.error)})},SN=async()=>jN(tt.PENDING_ACTIONS),tf=async()=>(await SN()).length,RS=async e=>bL(tt.PENDING_ACTIONS,e),_L=async(e,t)=>(await ei(),new Promise((r,n)=>{const i=Fo(tt.PENDING_ACTIONS,"readwrite"),s=i.get(e);s.onsuccess=()=>{const c=s.result;if(c){const u={...c,...t},m=i.put(u);m.onsuccess=()=>r(u),m.onerror=()=>n(m.error)}else n(new Error("Action not found"))},s.onerror=()=>n(s.error)})),xL=async e=>xN(tt.PROJECTS,e),qS=async e=>e?Db(tt.PROJECTS,"company_id",e):jN(tt.PROJECTS),wL=async e=>{const t=e.map(r=>pL(r,["status","weight","name"]));return xN(tt.AREAS,t)},zS=async e=>Db(tt.AREAS,"project_id",e),bg=async(e,t)=>{const r=await wN(tt.AREAS,e);return r&&(r.status=t,r.updated_at=new Date().toISOString(),r._offlineModifiedAt=new Date().toISOString(),await Uc(tt.AREAS,r)),r},Od=async e=>Uc(tt.CREW_CHECKINS,e),LS=async e=>Uc(tt.TM_TICKETS,e),Wr=()=>{const e=new Uint8Array(6);crypto.getRandomValues(e);const t=Array.from(e,r=>r.toString(36)).join("");return`temp_${Date.now()}_${t}`},Ds=async e=>Uc(tt.DAILY_REPORTS,e),jL=async(e,t)=>(await Db(tt.DAILY_REPORTS,"project_id",e)).find(n=>n.report_date===t)||null,IS=async e=>Uc(tt.MESSAGES,e);let Tb=typeof navigator<"u"?navigator.onLine:!0;const my=new Set,Pb=e=>(my.add(e),()=>my.delete(e)),Rn=()=>Tb,US=e=>{Tb=e,my.forEach(t=>t(e))};typeof window<"u"&&(window.addEventListener("online",()=>{US(!0)}),window.addEventListener("offline",()=>{US(!1)}));let _g=!1;const EN=async(e,t={})=>{if(_g||!Tb)return{synced:0,failed:0,conflicts:[]};const{onConflict:r}=t;_g=!0;const n={synced:0,failed:0,conflicts:[]};try{const i=await SN();for(const s of i)try{if(s.payload?.id&&s.type===Wt.UPDATE_AREA_STATUS){const c=await SL(e,s.type,s.payload);if(c){const u=await wN(tt.AREAS,s.payload.areaId||s.payload.id);if(u){const m=mL(u,c,["status"]);if(m.hasConflict){const h=gL(m,"area");if(n.conflicts.push({action:s,conflict:m,summary:h}),r&&await r({action:s,conflict:m,summary:h})===hL.KEEP_SERVER){await RS(s.id);continue}}}}}await EL(s,e),await RS(s.id),n.synced++}catch(c){n.failed++,await _L(s.id,{attempts:(s.attempts||0)+1,last_error:c.message,last_attempt:new Date().toISOString()})}}finally{_g=!1}return n},SL=async(e,t,r)=>{try{switch(t){case Wt.UPDATE_AREA_STATUS:return e.getArea?await e.getArea(r.areaId):null;default:return null}}catch{return null}},EL=async(e,t)=>{const{type:r,payload:n}=e;switch(r){case Wt.UPDATE_AREA_STATUS:return t.updateAreaStatus(n.areaId,n.status);case Wt.CREATE_TM_TICKET:{const i=await t.createTMTicket(n.ticket);return n.workers?.length>0&&await t.addTMWorkers(i.id,n.workers),n.items?.length>0&&await t.addTMItems(i.id,n.items),i}case Wt.SAVE_CREW_CHECKIN:return t.saveCrewCheckin(n.projectId,n.workers,n.checkInDate);case Wt.SUBMIT_DAILY_REPORT:return await t.saveDailyReport(n.projectId,n.reportData),t.submitDailyReport(n.projectId,n.submittedBy);case Wt.SEND_MESSAGE:return t.sendMessage(n.projectId,n.senderType,n.senderName,n.content);case Wt.CREATE_MATERIAL_REQUEST:return t.createMaterialRequest(n.projectId,n.items,n.requestedBy,n.neededBy,n.priority,n.notes);default:throw new Error(`Unknown action type: ${r}`)}},Mb="",ON="",P=!!Mb,T=P?eN(Mb,ON):null,Cd={slowQueryThreshold:200,enableSupabase:P},Ke={query(e,t){const r={type:"query",operation:e,duration_ms:t.duration,rows_returned:t.rows,company_id:t.company_id||null,project_id:t.project_id||null,user_id:t.user_id||null,timestamp:new Date().toISOString()};Cd.enableSupabase&&t.duration>=Cd.slowQueryThreshold&&xg("query",r)},error(e,t){const r={type:"error",category:e,severity:t.severity||"error",error_code:t.code||null,message:t.message,company_id:t.company_id||null,user_id:t.user_id||null,project_id:t.project_id||null,operation:t.operation||null,context:t.extra||{},timestamp:new Date().toISOString()};Cd.enableSupabase&&xg("error",r)},storage(e,t){const r={type:"storage",operation:e,company_id:t.company_id||null,project_id:t.project_id||null,file_size_bytes:t.size||0,duration_ms:t.duration||0,success:t.success!==!1,error_message:t.error||null,timestamp:new Date().toISOString()};Cd.enableSupabase&&(!r.success||r.duration_ms>5e3)&&xg("storage",r)},activity(e,t){}};async function xg(e,t){if(T)try{e==="error"?await T.rpc("log_error",{p_severity:t.severity,p_category:t.category,p_message:t.message,p_company_id:t.company_id,p_user_id:t.user_id,p_project_id:t.project_id,p_operation:t.operation,p_error_code:t.error_code,p_context:t.context||{}}):e==="query"&&await T.rpc("log_query_metric",{p_operation:t.operation,p_duration_ms:t.duration_ms,p_rows_returned:t.rows_returned,p_company_id:t.company_id,p_project_id:t.project_id,p_user_id:t.user_id,p_context:{}})}catch{}}Ke.wrapQuery=function(e,t){return async function(...r){const n=performance.now();try{const i=await t.apply(this,r),c={duration:Math.round(performance.now()-n),rows:Array.isArray(i)?i.length:void 0};return Ke.query(e,c),i}catch(i){const s=Math.round(performance.now()-n);throw Ke.error("database",{message:i.message,operation:e,severity:"error",extra:{duration:s}}),i}}};Ke.time=async function(e,t){const r=performance.now();try{const n=await t(),i=Math.round(performance.now()-r);return Ke.query(e,{duration:i}),n}catch(n){throw Ke.error("general",{message:n.message,operation:e}),n}};const hy="fieldsync_field_session";let pc=null;const Bc=()=>{if(pc)return pc;try{const e=sessionStorage.getItem(hy);if(e)return pc=JSON.parse(e),pc}catch{}return null},py=e=>{pc=e,e?sessionStorage.setItem(hy,JSON.stringify(e)):sessionStorage.removeItem(hy)},gy=async()=>{const e=Bc();if(e?.token&&P)try{await T.rpc("invalidate_field_session",{p_session_token:e.token})}catch{}py(null)};let nc=null;const Rb=()=>{const e=Bc();return!e?.token||!P?T:((!nc||nc._sessionToken!==e.token)&&(nc=eN(Mb,ON,{global:{headers:{"x-field-session":e.token}}}),nc._sessionToken=e.token),nc)},Ii=()=>Bc()?.token?Rb():T,_e=()=>P?Bc()?.token?Rb():T:null,vy=()=>{const e=Bc();return!!(e?.token&&e?.projectId)},yy="fieldsync_data",mf="fieldsync_user",BS={projects:[],areas:[],users:[],assignments:[]},Oe=()=>{try{const e=localStorage.getItem(yy);return e?JSON.parse(e):BS}catch{return localStorage.removeItem(yy),BS}},Ge=e=>{localStorage.setItem(yy,JSON.stringify(e))},Ad=()=>{try{const e=localStorage.getItem(mf);return e?JSON.parse(e):null}catch{return localStorage.removeItem(mf),null}},Nd=e=>{e?localStorage.setItem(mf,JSON.stringify(e)):localStorage.removeItem(mf)},OL={async createCOR(e,t=0){if(P){let r=e.cor_number;t>0&&(r=await this.getNextCORNumber(e.project_id));const{data:n,error:i}=await T.from("change_orders").insert({company_id:e.company_id,project_id:e.project_id,area_id:e.area_id||null,cor_number:r,title:e.title,description:e.description||"",scope_of_work:e.scope_of_work,period_start:e.period_start,period_end:e.period_end,status:"draft",labor_markup_percent:e.labor_markup_percent??1500,materials_markup_percent:e.materials_markup_percent??1500,equipment_markup_percent:e.equipment_markup_percent??1500,subcontractors_markup_percent:e.subcontractors_markup_percent??500,liability_insurance_percent:e.liability_insurance_percent??144,bond_percent:e.bond_percent??100,license_fee_percent:e.license_fee_percent??10,created_by:e.created_by||null}).select().single();if((i?.code==="23505"||i?.code==="PGRST116"||i?.status===409||i?.message?.includes("duplicate")||i?.message?.includes("unique_cor_number"))&&t<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${t+1})`),this.createCOR(e,t+1);if(i)throw i;return n}return null},async updateCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteCOR(e){if(P){const{error:t}=await T.from("change_orders").delete().eq("id",e);if(t)throw t}},async bulkUpdateCORGroup(e,t){if(P){const{error:r}=await T.from("change_orders").update({group_name:t,updated_at:new Date().toISOString()}).in("id",e);if(r)throw r.message?.includes("group_name")||r.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):r}},async getCORs(e,t={}){if(P){let r=T.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",e);t.status&&(r=r.eq("status",t.status)),t.area_id&&(r=r.eq("area_id",t.area_id)),t.date_start&&(r=r.gte("period_start",t.date_start)),t.date_end&&(r=r.lte("period_end",t.date_end)),r=r.order("created_at",{ascending:!1});const{data:n,error:i}=await r;if(i)throw i;return n}return[]},async getCORById(e){if(P){const{data:t,error:r}=await T.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",e).single();if(r)throw r;return t}return null},async getCORsByArea(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").select("*").eq("project_id",e).eq("area_id",t).order("created_at",{ascending:!1});if(n)throw n;return r}return[]},async getAssignableCORs(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",e).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(n)throw n;return r||[]}return[]},async getNextCORNumber(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("cor_number").eq("project_id",e);if(r)throw r;if(t&&t.length>0){let n=0;for(const i of t){const s=i.cor_number?.match(/COR #(\d+)/);if(s){const c=parseInt(s[1]);c>n&&(n=c)}}return`COR #${n+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(e,t){if(P){const r=Math.round(t.regular_hours*t.regular_rate),n=Math.round(t.overtime_hours*t.overtime_rate),i=r+n,{data:s,error:c}=await T.from("change_order_labor").insert({change_order_id:e,labor_class:t.labor_class,wage_type:t.wage_type||"standard",regular_hours:t.regular_hours||0,overtime_hours:t.overtime_hours||0,regular_rate:t.regular_rate||0,overtime_rate:t.overtime_rate||0,regular_total:r,overtime_total:n,total:i,sort_order:t.sort_order||0,source_ticket_id:t.source_ticket_id||null}).select().single();if(c)throw c;return s}return null},async updateCORLaborItem(e,t){if(P){let r={...t};if(t.regular_hours!==void 0||t.regular_rate!==void 0||t.overtime_hours!==void 0||t.overtime_rate!==void 0){const{data:s}=await T.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",e).single(),c=t.regular_hours??s?.regular_hours??0,u=t.overtime_hours??s?.overtime_hours??0,m=t.regular_rate??s?.regular_rate??0,h=t.overtime_rate??s?.overtime_rate??0;r.regular_total=Math.round(c*m),r.overtime_total=Math.round(u*h),r.total=r.regular_total+r.overtime_total}const{data:n,error:i}=await T.from("change_order_labor").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORLaborItem(e){if(P){const{error:t}=await T.from("change_order_labor").delete().eq("id",e);if(t)throw t}},async addCORMaterialItem(e,t){if(P){const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_materials").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"each",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCORMaterialItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_materials").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_materials").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORMaterialItem(e){if(P){const{error:t}=await T.from("change_order_materials").delete().eq("id",e);if(t)throw t}},async addCOREquipmentItem(e,t){if(P){const n=["backup_sheet","invoice","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_equipment").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"day",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCOREquipmentItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_equipment").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_equipment").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCOREquipmentItem(e){if(P){const{error:t}=await T.from("change_order_equipment").delete().eq("id",e);if(t)throw t}},async addCORSubcontractorItem(e,t){if(P){const r=Math.round(t.quantity*t.unit_cost),{data:n,error:i}=await T.from("change_order_subcontractors").insert({change_order_id:e,description:t.description,quantity:t.quantity||1,unit:t.unit||"lump sum",unit_cost:t.unit_cost||0,total:r,source_type:t.source_type||"custom",source_reference:t.source_reference||null,sort_order:t.sort_order||0}).select().single();if(i)throw i;return n}return null},async updateCORSubcontractorItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_subcontractors").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORSubcontractorItem(e){if(P){const{error:t}=await T.from("change_order_subcontractors").delete().eq("id",e);if(t)throw t}},async addBulkLaborItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>{const m=Math.round(c.regular_hours*c.regular_rate),h=Math.round(c.overtime_hours*c.overtime_rate);return{change_order_id:e,labor_class:c.labor_class,wage_type:c.wage_type||"standard",regular_hours:c.regular_hours||0,overtime_hours:c.overtime_hours||0,regular_rate:c.regular_rate||0,overtime_rate:c.overtime_rate||0,regular_total:m,overtime_total:h,total:m+h,sort_order:c.sort_order??u,source_ticket_id:c.source_ticket_id||null}}),{data:i,error:s}=await r.from("change_order_labor").insert(n).select();if(s)throw s;return i}return[]},async addBulkMaterialItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",p=Math.round(Number(u.unit_cost)||0),g=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:g,unit:u.unit||"each",unit_cost:p,total:Math.round(g*p),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_materials").insert(i).select();if(c)throw c;return s}return[]},async addBulkEquipmentItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",p=Math.round(Number(u.unit_cost)||0),g=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:g,unit:u.unit||"day",unit_cost:p,total:Math.round(g*p),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_equipment").insert(i).select();if(c)throw c;return s}return[]},async addBulkSubcontractorItems(e,t){if(P&&t.length>0){const r=_e();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>({change_order_id:e,company_name:c.company_name||"",description:c.description||"",quantity:c.quantity||1,unit:c.unit||"lump sum",unit_cost:c.unit_cost||c.total||c.amount||0,total:c.total||c.amount||0,source_type:c.source_type||"invoice",source_reference:c.source_reference||null,sort_order:c.sort_order??u})),{data:i,error:s}=await r.from("change_order_subcontractors").insert(n).select();if(s)throw s;return i}return[]},async clearCORLineItems(e){if(!P)return;const t=_e();if(!t)throw new Error("Database client not available");try{const r=await Promise.all([t.from("change_order_labor").delete().eq("change_order_id",e),t.from("change_order_materials").delete().eq("change_order_id",e),t.from("change_order_equipment").delete().eq("change_order_id",e),t.from("change_order_subcontractors").delete().eq("change_order_id",e)]);for(const n of r)if(n.error)throw n.error}catch(r){throw console.error("Error clearing COR line items:",r),r}},async saveCORLineItems(e,{laborItems:t,materialItems:r,equipmentItems:n,subcontractorItems:i}){if(P){await this.clearCORLineItems(e);const s=await Promise.all([t?.length>0?this.addBulkLaborItems(e,t):[],r?.length>0?this.addBulkMaterialItems(e,r):[],n?.length>0?this.addBulkEquipmentItems(e,n):[],i?.length>0?this.addBulkSubcontractorItems(e,i):[]]);return{labor:s[0],materials:s[1],equipment:s[2],subcontractors:s[3]}}return null},async assignTicketToCOR(e,t){if(P){const{error:r}=await T.rpc("assign_ticket_to_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"assignTicketToCOR",extra:{ticketId:e,corId:t}}),r;return{ticket_id:e,change_order_id:t}}return null},async unassignTicketFromCOR(e,t){if(P){const{error:r}=await T.rpc("unassign_ticket_from_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"unassignTicketFromCOR",extra:{ticketId:e,corId:t}}),r}},async checkTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("check_ticket_cor_integrity");if(t)throw t;return e||[]}return[]},async fixTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("fix_ticket_cor_integrity");if(t)throw t;return e}return 0},async getTicketsForCOR(e){if(P){const{data:t,error:r}=await T.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",e);if(r)throw r;return t}return[]},async getUnassignedTickets(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(r)throw r;return t}return[]},async importTicketDataToCOR(e,t,r,n,i){if(P){const s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",e).single();if(u)throw u;const{data:m,error:h}=await s.from("labor_rates").select("*").eq("company_id",r).eq("work_type",n||"demolition").eq("job_type",i||"standard");if(h)throw h;const p={};m?.forEach(S=>{p[S.role.toLowerCase()]=S});const g={};c.t_and_m_workers?.forEach(S=>{const O=(S.role||"laborer").toLowerCase();g[O]||(g[O]={regular_hours:0,overtime_hours:0}),g[O].regular_hours+=parseFloat(S.hours)||0,g[O].overtime_hours+=parseFloat(S.overtime_hours)||0});const _=Object.entries(g).map(([S,O])=>{const C=p[S]||{regular_rate:0,overtime_rate:0},A=Math.round((parseFloat(C.regular_rate)||0)*100),k=Math.round((parseFloat(C.overtime_rate)||0)*100);return{labor_class:S.charAt(0).toUpperCase()+S.slice(1),wage_type:i||"standard",regular_hours:O.regular_hours,overtime_hours:O.overtime_hours,regular_rate:A,overtime_rate:k,source_ticket_id:e}});_.length>0&&await this.addBulkLaborItems(t,_);const x=[],w=[];c.t_and_m_items?.forEach(S=>{const O=S.custom_name||S.materials_equipment?.name||"Unknown Item",C=S.custom_category||S.materials_equipment?.category||"Other",A=S.materials_equipment?.unit||"each",k=Math.round((parseFloat(S.materials_equipment?.cost_per_unit)||0)*100),D={description:O,quantity:S.quantity||1,unit:A,unit_cost:k,source_type:"backup_sheet",source_ticket_id:e};C==="Equipment"?w.push(D):x.push(D)}),x.length>0&&await this.addBulkMaterialItems(t,x),w.length>0&&await this.addBulkEquipmentItems(t,w);const{error:j}=await s.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",t).eq("ticket_id",e);if(j)throw j;return Ke.activity("cor_import_success",{ticket_id:e,cor_id:t,labor_count:_.length,material_count:x.length,equipment_count:w.length}),{laborItems:_,materialItems:x,equipmentItems:w}}return null},async reimportTicketDataToCOR(e,t,r,n,i){if(P){const s=_e();if(!s)throw new Error("Database client not available");return await s.from("change_order_labor").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_materials").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_equipment").delete().eq("change_order_id",t).eq("source_ticket_id",e),this.importTicketDataToCOR(e,t,r,n,i)}return null},async markImportFailed(e,t,r="Import failed"){if(P){const n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:r}).eq("change_order_id",t).eq("ticket_id",e);if(i)throw Ke.error("database",{message:i.message,operation:"markImportFailed",extra:{ticketId:e,corId:t}}),i;Ke.error("cor_import_failed",{ticket_id:e,cor_id:t,error:r})}},async getTicketsNeedingImport(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",e).eq("change_order_ticket_associations.import_status","failed");if(r)throw r;return t||[]}return[]},async getTicketImportStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",e).eq("change_order_id",t).single();if(n&&n.code!=="PGRST116")throw n;return r}return null},async recalculateCOR(e){if(P){const{error:t}=await T.rpc("recalculate_cor_totals",{cor_id:e});if(t)throw t;return this.getCORById(e)}return null},async updateCORMarkupPercentages(e,t){if(P){const r={};t.labor!==void 0&&(r.labor_markup_percent=t.labor),t.materials!==void 0&&(r.materials_markup_percent=t.materials),t.equipment!==void 0&&(r.equipment_markup_percent=t.equipment),t.subcontractors!==void 0&&(r.subcontractors_markup_percent=t.subcontractors);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async updateCORFeePercentages(e,t){if(P){const r={};t.liabilityInsurance!==void 0&&(r.liability_insurance_percent=t.liabilityInsurance),t.bond!==void 0&&(r.bond_percent=t.bond),t.licenseFee!==void 0&&(r.license_fee_percent=t.licenseFee);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async submitCORForApproval(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}return null},async approveCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"approved",approved_by:t,approved_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async rejectCOR(e,t=null){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"rejected",rejection_reason:t}).eq("id",e).select().single();if(n)throw n;return r}return null},async markCORAsBilled(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"billed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async closeCOR(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"closed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async saveCORSignature(e,t,r){if(P){const{data:n,error:i}=await T.from("change_orders").update({gc_signature_data:t,gc_signature_name:r,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",e).select().single();if(i)throw i;return n}return null},async getCORStats(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("status, cor_total").eq("project_id",e);if(r)throw r;const n={total_cors:t.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return t.forEach(i=>{switch(i.status){case"draft":n.draft_count++;break;case"pending_approval":n.pending_count++,n.total_pending_value+=i.cor_total||0;break;case"approved":n.approved_count++,n.total_approved_value+=i.cor_total||0;break;case"rejected":n.rejected_count++;break;case"billed":case"closed":n.billed_count++,n.total_billed_value+=i.cor_total||0;break}}),n}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(e,t){return P?T.channel(`change_orders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCorTickets(e,t){return P?T.channel(`cor-tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${e}`},t).subscribe():null},async getCORLog(e){if(P){const{data:t,error:r}=await T.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",e).order("log_number",{ascending:!0});if(r)throw console.error("Error fetching COR log:",r),r;return(t||[]).map(n=>({id:n.id,logNumber:n.log_number,dateSentToClient:n.date_sent_to_client,ceNumber:n.ce_number,comments:n.comments,createdAt:n.created_at,updatedAt:n.updated_at,changeOrder:{id:n.change_order?.id,corNumber:n.change_order?.cor_number,title:n.change_order?.title,corTotal:n.change_order?.cor_total,status:n.change_order?.status,createdAt:n.change_order?.created_at,approvedAt:n.change_order?.approved_at,approvedBy:n.change_order?.approved_by}}))}return[]},async updateCORLogEntry(e,t){if(P){const r={updated_at:new Date().toISOString()};t.dateSentToClient!==void 0&&(r.date_sent_to_client=t.dateSentToClient||null),t.ceNumber!==void 0&&(r.ce_number=t.ceNumber||null),t.comments!==void 0&&(r.comments=t.comments||null);const{data:n,error:i}=await T.from("cor_log_entries").update(r).eq("id",e).select().single();if(i)throw console.error("Error updating COR log entry:",i),i;return n}return null},async updateChangeOrderStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw console.error("Error updating change order status:",n),n;return r}return null},subscribeToCORLog(e,t){return P?T.channel(`cor-log:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocuments(e,t){return P?T.channel(`documents:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"documents",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocumentFolders(e,t){return P?T.channel(`document_folders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"document_folders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialsEquipment(e,t){return P?T.channel(`materials_equipment:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToLaborRates(e,t){return P?T.channel(`labor_rates:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToProject(e,t){return P?T.channel(`project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${e}`},t).subscribe():null},subscribeToPunchList(e,t){return P?T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},t).subscribe():null},async createSignatureRequest(e,t,r,n,i=null,s=null){if(P){const c=_e();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.rpc("generate_signature_token");if(m)throw m;const{data:h,error:p}=await c.from("signature_requests").insert({document_type:e,document_id:t,company_id:r,project_id:n,signature_token:u,expires_at:s,created_by:i}).select().single();if(p)throw p;return h}return null},async getSignatureRequestByToken(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");await t.rpc("increment_signature_view_count",{token:e});const{data:r,error:n}=await t.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",e).single();if(n)throw n;return r}return null},async getSignatureRequestsForDocument(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",e).eq("document_id",t).order("created_at",{ascending:!1});if(i)throw i;return n||[]}return[]},async addSignature(e,t,r){if(P){const n=_e();if(!n)throw new Error("Database client not available");const{data:i,error:s}=await n.from("signatures").insert({signature_request_id:e,signature_slot:t,signature_image:r.signature,signer_name:r.signerName,signer_title:r.signerTitle||null,signer_company:r.signerCompany||null,signed_at:r.signedAt||new Date().toISOString(),ip_address:r.ipAddress||null,user_agent:r.userAgent||null}).select().single();if(s)throw s;return i}return null},async syncSignatureToDocument(e,t){if(!P)return null;const r=_e();if(!r)throw new Error("Database client not available");const{document_type:n,document_id:i}=t,s=e.signature_slot,c={};s===1?(c.gc_signature_data=e.signature_image,c.gc_signature_name=e.signer_name,c.gc_signature_title=e.signer_title,c.gc_signature_company=e.signer_company,c.gc_signature_date=e.signed_at,c.gc_signature_ip=e.ip_address):s===2&&(c.client_signature_data=e.signature_image,c.client_signature_name=e.signer_name,c.client_signature_title=e.signer_title,c.client_signature_company=e.signer_company,c.client_signature_date=e.signed_at,c.client_signature_ip=e.ip_address);const u=n==="cor"?"change_orders":"t_and_m_tickets",{data:m,error:h}=await r.from(u).update(c).eq("id",i).select().single();if(h)throw h;return m},async revokeSignatureRequest(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("signature_requests").update({status:"revoked"}).eq("id",e).select().single();if(n)throw n;return r}return null},async getDocumentForSigning(e,t){if(!P)return null;const r=_e();if(!r)throw new Error("Database client not available");if(e==="cor"){const{data:n,error:i}=await r.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",t).single();if(i)throw i;return n}else if(e==="tm_ticket"){const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (
              id,
              name,
              unit,
              cost_per_unit,
              category
            )
          )
        `).eq("id",t).single();if(i)throw i;return n}return null},async getProjectCosts(e){if(P){const{data:r,error:n}=await T.from("project_costs").select("*").eq("project_id",e).order("cost_date",{ascending:!1});return n?(console.error("Error fetching project costs:",n),[]):r||[]}return(Oe().projectCosts||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.cost_date)-new Date(r.cost_date))},async addProjectCost(e,t,r){const n={project_id:e,company_id:t,category:r.category,description:r.description,amount:parseFloat(r.amount),cost_date:r.cost_date||new Date().toISOString().split("T")[0],notes:r.notes||null,created_by:r.created_by||null};if(P){const{data:c,error:u}=await T.from("project_costs").insert(n).select().single();if(u)throw console.error("Error adding project cost:",u),u;return c}const i=Oe();i.projectCosts||(i.projectCosts=[]);const s={...n,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i.projectCosts.push(s),Ge(i),s},async updateProjectCost(e,t){const r={category:t.category,description:t.description,amount:parseFloat(t.amount),cost_date:t.cost_date,notes:t.notes||null,updated_at:new Date().toISOString()};if(P){const{data:s,error:c}=await T.from("project_costs").update(r).eq("id",e).select().single();if(c)throw console.error("Error updating project cost:",c),c;return s}const n=Oe();if(!n.projectCosts)return null;const i=n.projectCosts.findIndex(s=>s.id===e);return i===-1?null:(n.projectCosts[i]={...n.projectCosts[i],...r},Ge(n),n.projectCosts[i])},async deleteProjectCost(e){if(P){const{error:r}=await T.from("project_costs").delete().eq("id",e);if(r)throw console.error("Error deleting project cost:",r),r;return!0}const t=Oe();return t.projectCosts&&(t.projectCosts=t.projectCosts.filter(r=>r.id!==e),Ge(t)),!0},async getProjectCostsSummary(e){const t=await this.getProjectCosts(e),r={};let n=0;return t.forEach(i=>{const s=parseFloat(i.amount)||0;n+=s,r[i.category]||(r[i.category]={category:i.category,total:0,count:0,items:[]}),r[i.category].total+=s,r[i.category].count++,r[i.category].items.push(i)}),Object.values(r).forEach(i=>{i.percentage=n>0?i.total/n*100:0}),{totalCost:n,byCategory:r,itemCount:t.length}},async getNextInvoiceNumber(e){if(P){const{data:t,error:r}=await T.rpc("get_next_invoice_number",{p_company_id:e});return r?(console.error("Error getting next invoice number:",r),this._generateLocalInvoiceNumber(e)):t}return this._generateLocalInvoiceNumber(e)},async _generateLocalInvoiceNumber(e){const r=(await this.getCompanyInvoices(e)).reduce((n,i)=>{const s=i.invoice_number?.match(/^INV-(\d+)$/);if(s){const c=parseInt(s[1],10);return c>n?c:n}return n},0);return`INV-${String(r+1).padStart(4,"0")}`},async getBillableItems(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("id, cor_number, title, cor_total, status, approved_at").eq("project_id",e).eq("status","approved").order("cor_number",{ascending:!0});r&&console.error("Error fetching billable CORs:",r);const{data:n,error:i}=await T.from("t_and_m_tickets").select("id, work_date, ce_pco_number, change_order_value, status, client_signature_date").eq("project_id",e).eq("status","approved").not("client_signature_data","is",null).order("work_date",{ascending:!0});return i&&console.error("Error fetching billable T&M tickets:",i),{cors:t||[],tickets:n||[]}}return{cors:[],tickets:[]}},async getProjectInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("project_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching project invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.project_id===e)},async getCompanyInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select("*").eq("company_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching company invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.company_id===e)},async createInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").insert({project_id:e.project_id,company_id:e.company_id,invoice_number:e.invoice_number,invoice_date:e.invoice_date,due_date:e.due_date,status:e.status||"draft",retention_percent:e.retention_percent||0,bill_to_name:e.bill_to_name,bill_to_address:e.bill_to_address,bill_to_contact:e.bill_to_contact,notes:e.notes,terms:e.terms||"Net 30",created_by:e.created_by}).select().single();if(s)throw console.error("Error creating invoice:",s),s;if(t&&t.length>0){const c=t.map((m,h)=>({invoice_id:i.id,item_type:m.item_type,reference_id:m.reference_id,reference_number:m.reference_number,description:m.description,amount:m.amount,sort_order:h})),{error:u}=await T.from("invoice_items").insert(c);if(u)throw console.error("Error creating invoice items:",u),await T.from("invoices").delete().eq("id",i.id),u}return this.getInvoice(i.id)}const r=Oe();r.invoices||(r.invoices=[]);const n={...e,id:Wr(),created_at:new Date().toISOString(),invoice_items:t||[]};return r.invoices.push(n),Ge(r),n},async getInvoice(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",e).single();if(n)throw console.error("Error fetching invoice:",n),n;return r}return(Oe().invoices||[]).find(r=>r.id===e)},async updateInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").update(t).eq("id",e).select().single();if(s)throw console.error("Error updating invoice:",s),s;return i}const r=Oe(),n=(r.invoices||[]).findIndex(i=>i.id===e);return n>=0?(r.invoices[n]={...r.invoices[n],...t},Ge(r),r.invoices[n]):null},async markInvoiceSent(e){return this.updateInvoice(e,{status:"sent",sent_at:new Date().toISOString()})},async recordInvoicePayment(e,t){const r=await this.getInvoice(e);if(!r)throw new Error("Invoice not found");const n=(r.amount_paid||0)+t,i=n>=r.total;return this.updateInvoice(e,{amount_paid:n,status:i?"paid":"partial",paid_at:i?new Date().toISOString():null})},async deleteInvoice(e){if(P){const{error:r}=await T.from("invoices").delete().eq("id",e).eq("status","draft");if(r)throw console.error("Error deleting invoice:",r),r;return!0}const t=Oe();return t.invoices=(t.invoices||[]).filter(r=>r.id!==e),Ge(t),!0},async markItemsBilled(e=[],t=[]){if(P){if(e.length>0){const{error:r}=await T.from("change_orders").update({status:"billed"}).in("id",e);r&&console.error("Error marking CORs as billed:",r)}if(t.length>0){const{error:r}=await T.from("t_and_m_tickets").update({status:"billed"}).in("id",t);r&&console.error("Error marking T&M tickets as billed:",r)}}}},CL={async getCompanyEquipment(e,t=!0){if(!P)return console.warn("Supabase not configured"),[];let r=T.from("equipment").select("*").eq("company_id",e).order("name");t&&(r=r.eq("is_active",!0));const{data:n,error:i}=await r;return i?(console.error("Error fetching company equipment:",i),[]):n||[]},async createEquipment(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("equipment").insert(e).select().single();if(r)throw console.error("Error creating equipment:",r),r;return t},async updateEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("equipment").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating equipment:",n),n;return r},async deactivateEquipment(e){return this.updateEquipment(e,{is_active:!1})},async getProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).order("start_date",{ascending:!1});return r?(console.error("Error fetching project equipment:",r),[]):t||[]},async getActiveProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).is("end_date",null).order("start_date",{ascending:!1});return r?(console.error("Error fetching active project equipment:",r),[]):t||[]},async addEquipmentToProject(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("project_equipment").insert(e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(r)throw console.error("Error adding equipment to project:",r),r;return t},async updateProjectEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("project_equipment").update(t).eq("id",e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(n)throw console.error("Error updating project equipment:",n),n;return r},async markEquipmentReturned(e,t=null){return this.updateProjectEquipment(e,{end_date:t||new Date().toISOString().split("T")[0]})},async removeEquipmentFromProject(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("project_equipment").delete().eq("id",e);if(t)throw console.error("Error removing project equipment:",t),t;return!0},calculateProjectEquipmentCost(e){const t=new Date;return t.setHours(0,0,0,0),e.reduce((r,n)=>{const i=new Date(n.start_date);i.setHours(0,0,0,0);let s;n.end_date?(s=new Date(n.end_date),s.setHours(0,0,0,0)):s=t;const c=Math.max(1,Math.floor((s-i)/(1e3*60*60*24))+1);return r+n.daily_rate*c},0)},calculateDaysOnSite(e,t=null){const r=new Date(e);r.setHours(0,0,0,0);let n;return t?n=new Date(t):n=new Date,n.setHours(0,0,0,0),Math.max(1,Math.floor((n-r)/(1e3*60*60*24))+1)}},AL={async getNextDrawNumber(e){if(!P)return console.warn("Supabase not configured"),1;const{data:t,error:r}=await T.from("draw_requests").select("draw_number").eq("project_id",e).order("draw_number",{ascending:!1}).limit(1).single();return r&&r.code!=="PGRST116"&&console.error("Error getting next draw number:",r),(t?.draw_number||0)+1},async getPreviousBillingTotals(e){if(!P)return console.warn("Supabase not configured"),{totalBilled:0,totalRetention:0};const{data:t,error:r}=await T.from("draw_requests").select("current_billing, retention_held").eq("project_id",e).in("status",["submitted","approved","paid"]);if(r)return console.error("Error getting previous billing totals:",r),{totalBilled:0,totalRetention:0};const n=(t||[]).reduce((s,c)=>s+(c.current_billing||0),0),i=t?.length>0?Math.max(...t.map(s=>s.retention_held||0)):0;return{totalBilled:n,totalRetention:i}},async getProjectDrawRequests(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("draw_requests").select("*").eq("project_id",e).order("draw_number",{ascending:!1});return r?(console.error("Error fetching draw requests:",r),[]):t||[]},async getDrawRequest(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("draw_requests").select(`
        *,
        draw_request_items (
          *
        )
      `).eq("id",e).single();return r?(console.error("Error fetching draw request:",r),null):t},async createDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").insert(e).select().single();if(n)throw console.error("Error creating draw request:",n),n;if(t&&t.length>0){const i=t.map((c,u)=>({...c,draw_request_id:r.id,sort_order:u})),{error:s}=await T.from("draw_request_items").insert(i);s&&console.error("Error creating draw request items:",s)}return this.getDrawRequest(r.id)},async updateDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating draw request:",n),n;return r},async updateDrawRequestStatus(e,t){const r={status:t};return t==="submitted"?r.submitted_at=new Date().toISOString():t==="approved"?r.approved_at=new Date().toISOString():t==="paid"&&(r.paid_at=new Date().toISOString()),this.updateDrawRequest(e,r)},async updateDrawRequestItems(e,t){if(!P)return console.warn("Supabase not configured"),!1;const{error:r}=await T.from("draw_request_items").delete().eq("draw_request_id",e);if(r)throw console.error("Error deleting old draw request items:",r),r;if(t&&t.length>0){const n=t.map((s,c)=>({...s,draw_request_id:e,sort_order:c})),{error:i}=await T.from("draw_request_items").insert(n);if(i)throw console.error("Error inserting draw request items:",i),i}return!0},async deleteDrawRequest(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("draw_requests").delete().eq("id",e);if(t)throw console.error("Error deleting draw request:",t),t;return!0},async getScheduleOfValues(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("areas").select("id, name, square_footage, price_per_sqft").eq("project_id",e).order("created_at");return r?(console.error("Error fetching schedule of values:",r),[]):(t||[]).map((n,i)=>({area_id:n.id,item_number:String(i+1),description:n.name,scheduled_value:Math.round((n.square_footage||0)*(n.price_per_sqft||0)*100)}))},async getPreviousDrawItems(e){if(!P)return console.warn("Supabase not configured"),{};const{data:t,error:r}=await T.from("draw_requests").select("id").eq("project_id",e).in("status",["submitted","approved","paid"]).order("draw_number",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")return console.error("Error fetching latest draw:",r),{};if(!t)return{};const{data:n,error:i}=await T.from("draw_request_items").select("area_id, total_percent, total_amount").eq("draw_request_id",t.id);return i?(console.error("Error fetching previous draw items:",i),{}):(n||[]).reduce((s,c)=>(c.area_id&&(s[c.area_id]={previous_percent:c.total_percent||0,previous_amount:c.total_amount||0}),s),{})},calculatePercentFromAmount(e,t){return!t||t===0?0:Math.round(e/t*1e4)},calculateAmountFromPercent(e,t){return Math.round(e/1e4*t)}};typeof window<"u"&&ei().catch(e=>console.error("Failed to init offline DB:",e));const NL=()=>{const e="fieldsync_device_id";let t=localStorage.getItem(e);return t||(t=crypto.randomUUID(),localStorage.setItem(e,t)),t},rf={async signUp(e,t,r,n){if(P){const{data:i,error:s}=await T.auth.signUp({email:e,password:t,options:{data:{name:r,role:n}}});if(s)throw s;return i}else{const i=Oe(),s={id:crypto.randomUUID(),email:e,name:r,role:n,created_at:new Date().toISOString()};return i.users.push(s),Ge(i),Nd(s),{user:s}}},async signIn(e,t){if(P){const{data:r,error:n}=await T.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r}else{const n=Oe().users.find(i=>i.email===e);if(!n)throw new Error("User not found");return Nd(n),{user:n}}},async signOut(){if(P){const{error:e}=await T.auth.signOut();if(e)throw e}else Nd(null)},async getUser(){if(P){const{data:{user:e}}=await T.auth.getUser();return e}else return Ad()},async getProfile(){if(P){const{data:{user:e}}=await T.auth.getUser();if(!e)return null;const{data:t,error:r}=await T.from("users").select("*").eq("id",e.id).single();return r?{id:e.id,email:e.email,name:e.user_metadata?.name||"",role:e.user_metadata?.role||"foreman"}:t}else return Ad()},async updateRole(e,t){if(P){const{data:r,error:n}=await T.from("users").update({role:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.users.find(i=>i.id===e);return n&&(n.role=t,Ge(r),Ad()?.id===e&&Nd(n)),n}},onAuthStateChange(e){if(P)return T.auth.onAuthStateChange(e);{const t=Ad();return e(t?"SIGNED_IN":"SIGNED_OUT",{user:t}),{data:{subscription:{unsubscribe:()=>{}}}}}}},be={async getProjects(e=null,t=!1){if(P){if(!Rn()){const n=await qS(e);return t?n:n.filter(i=>i.status!=="archived")}const r=performance.now();try{let n=T.from("projects").select("*").order("created_at",{ascending:!1});e&&(n=n.eq("company_id",e)),t||(n=n.eq("status","active"));const{data:i,error:s}=await n,c=Math.round(performance.now()-r);if(Ke.query("getProjects",{duration:c,rows:i?.length,company_id:e}),s){Ke.error("database",{message:s.message,operation:"getProjects",company_id:e});const u=await qS(e);if(u.length>0)return u;throw s}return i?.length>0&&xL(i).catch(u=>console.error("Failed to cache projects:",u)),i}catch(n){throw Ke.error("database",{message:n.message,operation:"getProjects",company_id:e}),n}}else{const r=Oe().projects;return t?r:r.filter(n=>n.status!=="archived")}},async getProjectsPaginated(e,{page:t=0,limit:r=25,status:n="active"}={}){if(P){const c=performance.now();try{let u=T.from("projects").select("*",{count:"exact"}).eq("company_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n!=="all"&&(u=u.eq("status",n));const{data:m,error:h,count:p}=await u,g=Math.round(performance.now()-c);if(Ke.query("getProjectsPaginated",{duration:g,rows:m?.length,page:t,company_id:e}),h)throw h;return{projects:m||[],totalCount:p||0,hasMore:(t+1)*r<(p||0),page:t,limit:r}}catch(u){throw Ke.error("database",{message:u.message,operation:"getProjectsPaginated",company_id:e}),u}}const i=Oe().projects.filter(c=>c.company_id===e&&(n==="all"||c.status===n)),s=t*r;return{projects:i.slice(s,s+r),totalCount:i.length,hasMore:s+r<i.length,page:t,limit:r}},async getProjectsWithSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!1}),i=Math.round(performance.now()-t);if(Ke.query("getProjectsWithSummary",{duration:i,rows:r?.length,company_id:e}),n)throw n;return(r||[]).map(s=>({...s,areaCount:s.areas?.[0]?.count||0,ticketCount:s.tickets?.[0]?.count||0,pendingTicketCount:0,reportCount:s.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,daily_reports:void 0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectsWithSummary",company_id:e}),this.getProjects(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getProjectDashboardSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.rpc("get_project_dashboard_summary",{p_company_id:e}),i=Math.round(performance.now()-t);if(Ke.query("getProjectDashboardSummary",{duration:i,rows:r?.length,company_id:e}),n){if(n.message?.includes("function")||n.code==="42883")return this.getProjectsWithSummary(e);throw n}return(r||[]).map(s=>({id:s.project_id,name:s.project_name,status:s.project_status,job_number:s.project_number,address:s.project_address,pin:s.project_pin,created_at:s.created_at,start_date:s.start_date,end_date:s.end_date,contract_value:Number(s.contract_value)||0,work_type:s.work_type||"demolition",job_type:s.job_type||"standard",general_contractor:s.general_contractor||"",areaCount:Number(s.total_areas)||0,completedAreas:Number(s.completed_areas)||0,inProgressAreas:Number(s.in_progress_areas)||0,pendingAreas:Number(s.pending_areas)||0,ticketCount:Number(s.total_tickets)||0,pendingTicketCount:Number(s.pending_tickets)||0,submittedTicketCount:Number(s.submitted_tickets)||0,approvedTicketCount:Number(s.approved_tickets)||0,totalLaborHours:Number(s.total_labor_hours)||0,todayLaborHours:Number(s.today_labor_hours)||0,todayWorkerCount:Number(s.today_worker_count)||0,lastActivityAt:s.last_activity_at,dailyReportsThisWeek:Number(s.daily_reports_this_week)||0,corCount:Number(s.cor_count)||0,pendingCorCount:Number(s.pending_cor_count)||0,disposalLoadsToday:Number(s.disposal_loads_today)||0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectDashboardSummary",company_id:e}),this.getProjectsWithSummary(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getArchivedProjects(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("company_id",e).eq("status","archived").order("archived_at",{ascending:!1});if(r)throw r;return t}else return Oe().projects.filter(t=>t.status==="archived")},async getProjectCount(e){if(P){const{count:t,error:r}=await T.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",e).in("status",["active","archived"]);if(r)throw r;return t||0}else return Oe().projects.filter(r=>r.company_id===e&&r.status!=="deleted").length},async universalSearch(e,t,r=10){if(!P||!t?.trim())return{projects:[],tickets:[],cors:[],workers:[]};const n=t.trim().toLowerCase(),i={projects:[],tickets:[],cors:[],workers:[]};try{const{data:s}=await T.from("projects").select("id, name, job_number, address, status").eq("company_id",e).eq("status","active").or(`name.ilike.%${n}%,job_number.ilike.%${n}%,address.ilike.%${n}%`).limit(r);i.projects=s||[];const{data:c}=await T.from("t_and_m_tickets").select(`
          id, notes, work_date, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).ilike("notes",`%${n}%`).order("work_date",{ascending:!1}).limit(r);i.tickets=(c||[]).map(p=>({...p,projectName:p.projects?.name||"Unknown Project"}));const{data:u}=await T.from("change_orders").select(`
          id, cor_number, title, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).or(`title.ilike.%${n}%,cor_number.ilike.%${n}%`).order("created_at",{ascending:!1}).limit(r);i.cors=(u||[]).map(p=>({...p,projectName:p.projects?.name||"Unknown Project"}));const{data:m}=await T.from("crew_checkins").select(`
          workers,
          project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).order("check_in_date",{ascending:!1}).limit(50),h=new Map;return(m||[]).forEach(p=>{(p.workers||[]).forEach(g=>{if(g.name.toLowerCase().includes(n)){const _=g.name.toLowerCase();h.has(_)||h.set(_,{name:g.name,role:g.role,projectName:p.projects?.name,lastProject:p.projects})}})}),i.workers=Array.from(h.values()).slice(0,r),i}catch(s){return console.error("Universal search error:",s),i}},async archiveProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="archived",r.archived_at=new Date().toISOString(),Ge(t)),r}},async getProjectStorageStats(e){if(!P)return{photoCount:0,estimatedMB:0};const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);if(r)throw r;let n=0;const i=[];t?.forEach(c=>{c.photos&&Array.isArray(c.photos)&&(n+=c.photos.length,i.push(...c.photos))});const s=n*1.5;return{photoCount:n,estimatedMB:s,photoUrls:i}},async archiveProjectDeep(e,t){if(!P)return null;const{photoUrls:r}=await this.getProjectStorageStats(e);if(r.length>0){const s=r.map(c=>{if(!c)return null;if(c.startsWith("http"))try{const m=new URL(c).pathname.match(/\/tm-photos\/(.+)$/);return m?m[1]:null}catch{return null}return c}).filter(Boolean);if(s.length>0)for(let c=0;c<s.length;c+=100){const u=s.slice(c,c+100);await T.storage.from("tm-photos").remove(u)}}await T.from("t_and_m_tickets").update({photos:[]}).eq("project_id",e);const{data:n,error:i}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",e).select().single();if(i)throw i;return{...n,photosDeleted:r.length}},async restoreProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"active",archived_at:null}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="active",r.archived_at=null,Ge(t)),r}},async getProject(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("id",e).single();if(r)throw r;return t}else return Oe().projects.find(t=>t.id===e)},async createProject(e){if(P){const{data:t,error:r}=await T.from("projects").insert({...e,status:"active"}).select().single();if(r)throw console.error("Supabase createProject error:",r.message,r.details,r.hint),r;return t}else{const t=Oe(),r={...e,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return t.projects.push(r),Ge(t),r}},async getProjectByPin(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("pin",e).eq("status","active").single();return r?null:t}else return Oe().projects.find(r=>r.pin===e&&r.status==="active")||null},async getProjectByPinAndCompany(e,t){if(P){const{data:r,error:n}=await T.from("projects").select("*").eq("pin",e).eq("company_id",t).eq("status","active").single();return n?null:r}else return Oe().projects.find(n=>n.pin===e&&n.company_id===t&&n.status==="active")||null},async getProjectByPinSecure(e,t){if(P){const r=`pin_attempts_${t}`,n=`pin_lockout_${t}`,i=5,s=300*1e3,c=localStorage.getItem(n);if(c&&Date.now()<parseInt(c)){const w=parseInt(c)-Date.now(),j=Math.ceil(w/6e4);return{success:!1,rateLimited:!0,project:null,error:`Too many attempts. Please try again in ${j} minute${j>1?"s":""}.`}}const u=NL(),{data:m,error:h}=await T.rpc("validate_pin_and_create_session",{p_pin:e,p_company_code:t,p_device_id:u,p_ip_address:null});if(h)return console.error("[PIN Auth] RPC error"),{success:!1,rateLimited:!1,project:null,error:h.message};if(!m||m.length===0)return{success:!1,rateLimited:!1,project:null};const p=m[0];if(p.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(p.error_code==="INVALID_COMPANY"||p.error_code==="INVALID_PIN"){let w=parseInt(localStorage.getItem(r)||"0");return w++,localStorage.setItem(r,w.toString()),w>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}if(!p.success||!p.project_id)return{success:!1,rateLimited:!1,project:null};localStorage.removeItem(`pin_attempts_${t}`),localStorage.removeItem(`pin_lockout_${t}`),py({token:p.session_token,projectId:p.project_id,companyId:p.company_id,projectName:p.project_name,companyName:p.company_name,createdAt:new Date().toISOString()});const g=Rb(),{data:_,error:x}=await g.from("projects").select("*").eq("id",p.project_id).single();return{success:!0,rateLimited:!1,sessionToken:p.session_token,project:_||{id:p.project_id,name:p.project_name,company_id:p.company_id,status:"active"}}}else{const r=Oe(),i=(r.companies||[]).find(c=>c.code===t);if(!i)return{success:!1,rateLimited:!1,project:null};const s=r.projects.find(c=>c.pin===e&&c.company_id===i.id&&c.status==="active");if(s){const c=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;py({token:c,projectId:s.id,companyId:i.id,projectName:s.name,companyName:i.name,createdAt:new Date().toISOString()})}return{success:!!s,rateLimited:!1,project:s||null}}},async isPinAvailable(e,t=null){if(P){let r=T.from("projects").select("id").eq("pin",e);t&&(r=r.neq("id",t));const{data:n,error:i}=await r;if(i)throw i;return n.length===0}else return!Oe().projects.some(n=>n.pin===e&&n.id!==t)},async updateProjectPin(e,t){if(P){const{data:r,error:n}=await T.from("projects").update({pin:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.projects.find(i=>i.id===e);return n&&(n.pin=t,Ge(r)),n}},async updateProject(e,t,r=null){if(P){if(!r)throw console.error("[Security] updateProject called without companyId - this is a security risk"),new Error("Company ID is required for security verification");const{data:n,error:i}=await T.from("projects").update(t).eq("id",e).eq("company_id",r).select().single();if(i)throw console.error("Error updating project"),i;return n}else{const n=Oe(),i=n.projects.find(s=>s.id===e);return i&&(Object.assign(i,t),Ge(n)),i}},async deleteProject(e,t=null){if(P){let r=[];try{const{data:c}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);c?.forEach(u=>{Array.isArray(u.photos)&&u.photos.forEach(m=>{if(m)if(m.startsWith("http"))try{const h=new URL(m).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);h&&r.push(decodeURIComponent(h[1]))}catch{}else r.push(m)})})}catch{}if(r.length>0)try{for(let c=0;c<r.length;c+=100)await T.storage.from("tm-photos").remove(r.slice(c,c+100))}catch{}await T.from("t_and_m_tickets").delete().eq("project_id",e),await T.from("daily_reports").delete().eq("project_id",e);let n=T.from("projects").delete({count:"exact"}).eq("id",e);t&&(n=n.eq("company_id",t));const{error:i,count:s}=await n;if(i)throw i;if(s===0)throw new Error("Project could not be deleted. You may not have permission (admin or owner role required).")}else{const r=Oe();r.projects=r.projects.filter(n=>n.id!==e),r.areas=r.areas.filter(n=>n.project_id!==e),Ge(r)}},async getAreas(e){if(P){if(!Rn())return zS(e);const t=_e(),{data:r,error:n}=await t.from("areas").select("*").eq("project_id",e).order("sort_order",{ascending:!0});if(n){const i=await zS(e);if(i.length>0)return i;throw n}return r?.length>0&&wL(r).catch(i=>console.error("Failed to cache areas:",i)),r}else return Oe().areas.filter(t=>t.project_id===e)},async createArea(e){if(P){const t=_e(),{data:r,error:n}=await t.from("areas").insert(e).select().single();if(n)throw n;return r}else{const t=Oe(),r={...e,id:crypto.randomUUID(),created_at:new Date().toISOString()};return t.areas.push(r),Ge(t),r}},async updateAreaStatus(e,t,r=null){if(P){if(!Rn()){const u=await bg(e,t);return await cn(Wt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}let i=_e().from("areas").update({status:t}).eq("id",e);r&&(i=i.eq("project_id",r));const{data:s,error:c}=await i.select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u=await bg(e,t);return await cn(Wt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}throw c}return s&&bg(e,t).catch(u=>console.error("Failed to update cached area status:",u)),s}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(i.status=t,i.updated_at=new Date().toISOString()),Ge(n),i}},async updateArea(e,t,r=null){if(P){let n=T.from("areas").update(t).eq("id",e);r&&(n=n.eq("project_id",r));const{data:i,error:s}=await n.select().single();if(s)throw s;return i}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(Object.assign(i,t),i.updated_at=new Date().toISOString()),Ge(n),i}},async deleteArea(e,t=null){if(P){let r=T.from("areas").delete().eq("id",e);t&&(r=r.eq("project_id",t));const{error:n}=await r;if(n)throw n}else{const r=Oe();r.areas=r.areas.filter(n=>n.id!==e),Ge(r)}},subscribeToAreas(e,t){return P?T.channel(`areas:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMessages(e,t){return P?T.channel(`messages:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialRequests(e,t){return P?T.channel(`material_requests:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDailyReports(e,t){return P?T.channel(`daily_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCrewCheckins(e,t){return P?T.channel(`crew_checkins:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToInjuryReports(e,t){return P?T.channel(`injury_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToTMTickets(e,t){return P?T.channel(`tm_tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCompanyActivity(e,t,r){if(!P||!t||t.length===0)return null;const n=T.channel(`company_activity:${e}`);return t.forEach(i=>{n.on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${i}`},s=>r.onMessage?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${i}`},s=>r.onMaterialRequest?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${i}`},s=>r.onTMTicket?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${i}`},s=>r.onCrewCheckin?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${i}`},s=>r.onAreaUpdate?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${i}`},s=>r.onCORChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${i}`},s=>r.onProjectChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${i}`},s=>r.onPunchListChange?.(s))}),n.on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},i=>r.onInjuryReport?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},i=>r.onMaterialsEquipmentChange?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},i=>r.onLaborRateChange?.(i)),n.subscribe()},unsubscribe(e){e&&P&&T.removeChannel(e)},async getAssignedProjects(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",e);if(r)throw r;return t.map(n=>n.projects)}else{const t=Oe();return(t.assignments?.filter(n=>n.user_id===e)||[]).map(n=>t.projects.find(i=>i.id===n.project_id)).filter(Boolean)}},async assignUserToProject(e,t,r){if(P){const{data:n,error:i}=await T.from("project_assignments").insert({project_id:e,user_id:t,assigned_by:r}).select().single();if(i)throw i;return n}else{const n=Oe();n.assignments||(n.assignments=[]);const i={id:crypto.randomUUID(),project_id:e,user_id:t,assigned_by:r,assigned_at:new Date().toISOString()};return n.assignments.push(i),Ge(n),i}},async removeUserFromProject(e,t){if(P){const{error:r}=await T.from("project_assignments").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}else{const r=Oe();r.assignments=r.assignments?.filter(n=>!(n.project_id===e&&n.user_id===t))||[],Ge(r)}},async getProjectAssignments(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",e);if(r)throw r;return t.map(n=>n.users)}else{const t=Oe();return(t.assignments?.filter(n=>n.project_id===e)||[]).map(n=>t.users.find(i=>i.id===n.user_id)).filter(Boolean)}},async getAllUsers(){if(P){const{data:e,error:t}=await T.from("users").select("*").order("name");if(t)throw t;return e}else return Oe().users||[]},async getForemen(){if(P){const{data:e,error:t}=await T.from("users").select("*").eq("role","foreman").order("name");if(t)throw t;return e}else return(Oe().users||[]).filter(e=>e.role==="foreman")},async logActivity(e,t,r,n,i,s){if(P){const{error:c}=await T.from("activity_log").insert({user_id:e,project_id:t,area_id:r,action:n,old_value:i,new_value:s});c&&console.error("Error logging activity:",c)}},async getProjectActivity(e,t=50){if(P){const{data:r,error:n}=await T.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r}return[]},async getMaterialsEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").select("*").eq("company_id",e).eq("active",!0).order("category").order("name");if(r)throw r;return t}return[]},async getMaterialsEquipmentByCategory(e,t){if(P){const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("materials_equipment").select("*").eq("company_id",e).eq("category",t).eq("active",!0).order("name");if(i)throw i;return n}return[]},async getAllMaterialsEquipment(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("materials_equipment").select("*").eq("company_id",e).order("category").order("name");if(n)throw n;return r}return[]},async createMaterialEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").insert(e).select().single();if(r)throw r;return t}return null},async updateMaterialEquipment(e,t){if(P){const{data:r,error:n}=await T.from("materials_equipment").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteMaterialEquipment(e){if(P){const{error:t}=await T.from("materials_equipment").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborCategories(e){if(P){const{data:t,error:r}=await T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async createLaborCategory(e,t,r=0){if(P){const{data:n,error:i}=await T.from("labor_categories").insert({company_id:e,name:t,sort_order:r}).select().single();if(i)throw i;return n}return null},async updateLaborCategory(e,t){if(P){const{data:r,error:n}=await T.from("labor_categories").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborCategory(e){if(P){const{error:t}=await T.from("labor_categories").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClasses(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async getLaborClassesWithCategories(e){if(P){const[t,r]=await Promise.all([T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name"),T.from("labor_classes").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;return{categories:t.data||[],classes:r.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(e){if(P){const t=_e();if(!t)return{categories:[],classes:[]};const{data:r,error:n}=await t.rpc("get_labor_classes_for_field",{p_company_id:e});if(n){console.error("Error loading field labor classes:",n);const[c,u]=await Promise.all([t.from("labor_categories").select("id, name").eq("company_id",e).eq("active",!0).order("name"),t.from("labor_classes").select("id, name, category_id").eq("company_id",e).eq("active",!0).order("name")]);return{categories:c.data||[],classes:u.data||[]}}const i=new Map,s=[];for(const c of r||[])c.category_id&&c.category_name&&!i.has(c.category_id)&&i.set(c.category_id,{id:c.category_id,name:c.category_name}),s.push({id:c.id,name:c.name,category_id:c.category_id});return{categories:Array.from(i.values()),classes:s}}return{categories:[],classes:[]}},async createLaborClass(e,t,r,n=0){if(P){const{data:i,error:s}=await T.from("labor_classes").insert({company_id:e,category_id:t,name:r,sort_order:n}).select().single();if(s)throw s;return i}return null},async updateLaborClass(e,t){if(P){const{data:r,error:n}=await T.from("labor_classes").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborClass(e){if(P){const{error:t}=await T.from("labor_classes").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_class_rates").select("*").eq("labor_class_id",e);if(r)throw r;return t||[]}return[]},async getAllLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",e).eq("active",!0);if(r)throw r;return t||[]}return[]},async saveLaborClassRates(e,t){if(P){const r=t.map(i=>({...i,labor_class_id:e})),{error:n}=await T.from("labor_class_rates").upsert(r,{onConflict:"labor_class_id,work_type,job_type"});if(n)throw n}},async getLaborClassRate(e,t,r){if(P){const{data:n,error:i}=await T.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",e).eq("work_type",t).eq("job_type",r).single();if(i&&i.code!=="PGRST116")throw i;return n||null}return null},async getTMTickets(e){if(P){const t=performance.now(),r=_e(),i=vy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{const{data:s,error:c}=await r.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${i}
            )
          `).eq("project_id",e).order("created_at",{ascending:!1}),u=Math.round(performance.now()-t);if(Ke.query("getTMTickets",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s}catch(s){throw Ke.error("database",{message:s.message,operation:"getTMTickets",project_id:e}),s}}return[]},async getTMTicketsPaginated(e,{page:t=0,limit:r=25,status:n=null}={}){if(P){const i=performance.now(),s=_e(),u=vy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{let m=s.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${u}
            )
          `,{count:"exact"}).eq("project_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n&&(m=m.eq("status",n));const{data:h,error:p,count:g}=await m,_=Math.round(performance.now()-i);if(Ke.query("getTMTicketsPaginated",{duration:_,rows:h?.length,page:t,project_id:e}),p)throw p;return{tickets:h||[],totalCount:g||0,hasMore:(t+1)*r<(g||0),page:t,limit:r}}catch(m){throw Ke.error("database",{message:m.message,operation:"getTMTicketsPaginated",project_id:e}),m}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",e).not("ce_pco_number","is",null).neq("ce_pco_number","");if(r)throw r;const n={};let i=0,s=0;return t?.forEach(c=>{const u=c.ce_pco_number;if(n[u]||(n[u]={approved:0,pending:0,count:0}),n[u].count++,c.status==="approved"||c.status==="billed"){const m=parseFloat(c.change_order_value)||0;n[u].approved+=m,i+=m}else c.status==="pending"&&s++}),{changeOrders:n,totalApprovedValue:i,pendingCount:s}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(e,t){if(P){const r=_e();if(!r)return[];const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).eq("status",t).order("created_at",{ascending:!1});if(i)throw i;return n}return[]},async getCORTickets(e){if(P){const t=_e();if(!t)return[];const{data:r,error:n}=await t.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",e).order("work_date",{ascending:!0});if(n)throw n;return r||[]}return[]},async createTMTicket(e){if(P){if(!Rn()){const i={id:Wr(),project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending_sync",created_by_name:e.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await LS(i),await cn(Wt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}const t=_e();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("t_and_m_tickets").insert({project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending",created_by_name:e.created_by_name||"Field User"}).select().single();if(n){if(n.message?.includes("fetch")||n.message?.includes("network")){const i={id:Wr(),...e,status:"pending_sync",_offline:!0};return await LS(i),await cn(Wt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}throw n}return r}return null},async addTMWorkers(e,t){if(P){const r=t.map(s=>({ticket_id:e,name:s.name,hours:s.hours,overtime_hours:s.overtime_hours||0,time_started:s.time_started||null,time_ended:s.time_ended||null,role:s.role||"Laborer"})),n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_workers").insert(r);if(i)throw i}},async addTMItems(e,t){if(P){const r=t.map(s=>({ticket_id:e,material_equipment_id:s.material_equipment_id||null,custom_name:s.custom_name||null,custom_category:s.custom_category||null,quantity:s.quantity})),n=_e();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_items").insert(r);if(i)throw i}},async getPreviousTicketCrew(e,t){if(!P)return null;const r=_e();if(!r)return null;const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",e).lt("work_date",t).order("work_date",{ascending:!1}).limit(1).maybeSingle();if(i||!n)return null;const s=n.t_and_m_workers||[],c=s.some(g=>g.labor_class_id),u={};c&&s.forEach(g=>{g.labor_class_id&&(u[g.labor_class_id]||(u[g.labor_class_id]=[]),u[g.labor_class_id].push({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||""}))});const m=s.filter(g=>["Foreman","General Foreman","Superintendent"].includes(g.role)).map(g=>({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||"",role:g.role})),h=s.filter(g=>g.role==="Operator").map(g=>({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||""})),p=s.filter(g=>g.role==="Laborer").map(g=>({name:g.name,hours:g.hours?.toString()||"",overtimeHours:g.overtime_hours?.toString()||"",timeStarted:g.time_started||"",timeEnded:g.time_ended||""}));return{workDate:n.work_date,supervision:m.length>0?m:null,operators:h.length>0?h:null,laborers:p.length>0?p:null,dynamicWorkers:Object.keys(u).length>0?u:null,totalWorkers:s.length}},async updateTMTicketStatus(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({status:t}).eq("id",e).select().single();if(i)throw i;return n}return null},async approveTMTicket(e,t,r,n=null){if(P){const i={status:"approved",approved_by_user_id:t,approved_by_name:r,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};n!==null&&(i.change_order_value=parseFloat(n)||0);const s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(u)throw u;return c}return null},async rejectTMTicket(e,t,r,n=""){if(P){const i=_e();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:t,rejected_by_name:r,rejected_at:new Date().toISOString(),rejection_reason:n,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",e).select().single();if(c)throw c;return s}return null},canApproveTickets(e){return["owner","admin","manager"].includes(e)},async updateTMTicketPhotos(e,t,r=null){if(P){const n=_e();if(!n)throw new Error("Database client not available");const i={photos:t};r&&(i.photo_locations=r);const{data:s,error:c}=await n.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(c)throw c;return s}return null},async saveTMClientSignature(e,t){if(P){const r=_e();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({client_signature_data:t.signature,client_signature_name:t.signerName,client_signature_title:t.signerTitle,client_signature_company:t.signerCompany,client_signature_date:t.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteTMTicket(e){if(P){const t=_e();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("t_and_m_tickets").delete().eq("id",e);if(r)throw r}},async isTicketEditable(e){if(!e?.assigned_cor_id)return{editable:!0};if(P)try{const{data:t,error:r}=await T.from("change_orders").select("id, status, cor_number").eq("id",e.assigned_cor_id).single();if(r||!t)return{editable:!0};const i=["draft","pending_approval"].includes(t.status);return{editable:i,lockedBy:i?null:t,reason:i?null:`This ticket is linked to ${t.cor_number} which has been ${t.status==="approved"?"approved":t.status}`}}catch(t){return console.error("Error checking ticket editability:",t),{editable:!0}}return{editable:!0}},async getCompanyByCode(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").eq("code",e).single();return r?null:t}return null},async getCompany(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").eq("id",e).single();if(r)throw r;return t}return null},async getUserCompanies(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching user companies:",r),[]):t.map(n=>({id:n.companies.id,name:n.companies.name,code:n.companies.code,access_level:n.access_level}))}return[]},async getUserPendingMemberships(e){if(P){const{count:t,error:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("status","pending");return r?(console.error("Error fetching pending memberships:",r),0):t||0}return 0},async getCompanyMemberships(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching company memberships:",r),[]):t||[]}return[]},async approveMembership(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:t}).eq("id",e);if(r)throw r}},async approveMembershipWithRole(e,t,r="member"){if(P){const{error:n}=await T.rpc("approve_membership_with_role",{membership_id:e,approved_by_user:t,new_access_level:r});if(n)throw n}},async rejectMembership(e){if(P){const{error:t}=await T.from("user_companies").delete().eq("id",e);if(t)throw t}},async removeMember(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:t}).eq("id",e);if(r)throw r}},async getProjectTeam(e){if(P){const{data:t,error:r}=await T.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",e).order("assigned_at",{ascending:!0});return r?(console.error("Error fetching project team:",r),[]):t||[]}return[]},async getCompanyMembers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching company members:",r),[]):t||[]}return[]},async addProjectMember(e,t,r,n){if(P){const{data:i,error:s}=await T.from("project_users").insert({project_id:e,user_id:t,project_role:r,assigned_by:n}).select().single();if(s)throw s;return i}return null},async updateProjectMemberRole(e,t,r){if(P){const{error:n}=await T.from("project_users").update({project_role:r}).eq("project_id",e).eq("user_id",t);if(n)throw n}},async removeProjectMember(e,t){if(P){const{error:r}=await T.from("project_users").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}},async updateMemberAccessLevel(e,t){if(P){const{error:r}=await T.from("user_companies").update({access_level:t}).eq("id",e);if(r)throw r}},async updateMemberCompanyRole(e,t){if(P){const{error:r}=await T.from("user_companies").update({company_role:t}).eq("id",e);if(r)throw r}},async repairLegacyUser(e,t,r="member"){if(!P||!e||!t)return!1;try{const{data:n,error:i}=await T.rpc("repair_legacy_user",{p_user_id:e,p_company_id:t,p_role:r});return i?(console.error("RPC repair_legacy_user failed:",i),!1):n===!0}catch(n){return console.error("Error repairing legacy user:",n),!1}},async isLegacyUser(e){if(!P)return!1;try{const{data:t}=await T.from("users").select("company_id, role").eq("id",e).single();if(!t?.company_id)return!1;const{count:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e);return r===0}catch(t){return console.error("Error checking legacy user:",t),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(e,t){if(!P)return[];const r=_e();if(!r)return[];const n=performance.now();try{const{data:i,error:s}=await r.from("disposal_loads").select("*").eq("project_id",e).eq("work_date",t).order("created_at",{ascending:!1}),c=Math.round(performance.now()-n);if(Ke.query("getDisposalLoads",{duration:c,rows:i?.length,project_id:e}),s)throw s;return i||[]}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoads",project_id:e}),i}},async getDisposalLoadsHistory(e,t=14){if(!P)return[];const r=_e();if(!r)return[];const n=performance.now();try{const i=new Date,s=new Date;s.setDate(s.getDate()-t);const{data:c,error:u}=await r.from("disposal_loads").select("*").eq("project_id",e).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",i.toISOString().split("T")[0]).order("work_date",{ascending:!1}),m=Math.round(performance.now()-n);if(Ke.query("getDisposalLoadsHistory",{duration:m,rows:c?.length,project_id:e}),u)throw u;return(c||[]).map(h=>({...h,load_date:h.work_date}))}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoadsHistory",project_id:e}),i}},async addDisposalLoad(e,t,r,n,i,s=null){if(!P)return null;const c=_e();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.from("disposal_loads").insert({project_id:e,user_id:t,work_date:r,load_type:n,load_count:i,notes:s}).select().single();if(m)throw Ke.error("database",{message:m.message,operation:"addDisposalLoad",project_id:e}),m;return u},async updateDisposalLoad(e,t,r,n=null){if(!P)return null;const i=_e();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("disposal_loads").update({load_type:t,load_count:r,notes:n}).eq("id",e).select().single();if(c)throw Ke.error("database",{message:c.message,operation:"updateDisposalLoad"}),c;return s},async deleteDisposalLoad(e){if(!P)return!1;const t=_e();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("disposal_loads").delete().eq("id",e);if(r)throw Ke.error("database",{message:r.message,operation:"deleteDisposalLoad"}),r;return!0},async getDisposalSummary(e,t=null,r=null){if(!P)return[];const n=_e();if(!n)return[];const i=performance.now();try{const{data:s,error:c}=await n.rpc("get_disposal_summary",{p_project_id:e,p_start_date:t,p_end_date:r}),u=Math.round(performance.now()-i);if(Ke.query("getDisposalSummary",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s||[]}catch(s){return Ke.error("database",{message:s.message,operation:"getDisposalSummary",project_id:e}),this.getDisposalSummaryFallback(e,t,r)}},async getDisposalSummaryFallback(e,t,r){let i=(_e()||T).from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e);t&&(i=i.gte("work_date",t)),r&&(i=i.lte("work_date",r));const{data:s,error:c}=await i;if(c)throw c;const u={};return s?.forEach(m=>{u[m.load_type]||(u[m.load_type]={load_type:m.load_type,total_loads:0,days:new Set}),u[m.load_type].total_loads+=m.load_count,u[m.load_type].days.add(m.work_date)}),Object.values(u).map(m=>({load_type:m.load_type,total_loads:m.total_loads,days_with_activity:m.days.size}))},async getWeeklyDisposalSummary(e,t=4){if(!P)return[];const r=_e();if(!r)return[];const n=new Date,i=new Date;i.setDate(i.getDate()-t*7);const{data:s,error:c}=await r.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e).gte("work_date",i.toISOString().split("T")[0]).lte("work_date",n.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(c)throw c;const u={};return s?.forEach(m=>{const h=new Date(m.work_date),p=new Date(h);p.setDate(h.getDate()-h.getDay());const g=p.toISOString().split("T")[0];u[g]||(u[g]={week:g,concrete:0,trash:0,metals:0,hazardous_waste:0}),u[g][m.load_type]+=m.load_count}),Object.values(u).sort((m,h)=>m.week.localeCompare(h.week))},async uploadPhoto(e,t,r,n){if(!P)return null;const i=_e();if(!i)throw new Error("Database client not available");const s=performance.now(),c=n.size||0,u=Date.now(),m=new Uint8Array(6);crypto.getRandomValues(m);const h=Array.from(m,x=>x.toString(36)).join(""),p=n.name?.split(".").pop()||"jpg",g=`${u}-${h}.${p}`,_=`${e}/${t}/${r}/${g}`;try{const{data:x,error:w}=await i.storage.from("tm-photos").upload(_,n,{cacheControl:"3600",upsert:!1}),j=Math.round(performance.now()-s);if(Ke.storage("upload",{company_id:e,project_id:t,size:c,duration:j,success:!w}),w)throw w;return _}catch(x){throw Ke.error("storage",{message:x.message,operation:"uploadPhoto",company_id:e,project_id:t}),x}},async uploadPhotoBase64(e,t,r,n,i="photo.jpg"){if(!P)return null;const s=_e();if(!s)throw new Error("Database client not available");const u=await(await fetch(n)).blob(),m=Date.now(),h=new Uint8Array(6);crypto.getRandomValues(h);const p=Array.from(h,S=>S.toString(36)).join(""),g=i.split(".").pop()||"jpg",_=`${m}-${p}.${g}`,x=`${e}/${t}/${r}/${_}`,{data:w,error:j}=await s.storage.from("tm-photos").upload(x,u,{cacheControl:"3600",upsert:!1,contentType:u.type});if(j)throw j;return x},async resolvePhotoUrl(e){if(!e||!P)return e;let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return e;t=decodeURIComponent(n[1])}catch{return e}else t=e;try{const r=Ii(),{data:n,error:i}=await r.storage.from("tm-photos").createSignedUrl(t,3600);return i||!n?.signedUrl?null:n.signedUrl}catch{return null}},async resolvePhotoUrls(e){if(!P||!e?.length)return e||[];const t=[],r=[];for(let n=0;n<e.length;n++){const i=e[n];if(!i)continue;let s;if(i.startsWith("http"))try{const u=new URL(i).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);u&&(s=decodeURIComponent(u[1]))}catch{}else s=i;s&&(t.push(s),r.push(n))}if(!t.length)return e;try{const n=Ii(),{data:i,error:s}=await n.storage.from("tm-photos").createSignedUrls(t,3600);if(s||!i)return e;const c=[...e];return i.forEach((u,m)=>{c[r[m]]=u.signedUrl||null}),c}catch{return e}},async deletePhoto(e){if(!P||!e)return;let t;if(e.startsWith("http"))try{const i=new URL(e).pathname.match(/\/tm-photos\/(.+)$/);if(!i)return;t=i[1]}catch{return}else t=e;const{error:r}=await T.storage.from("tm-photos").remove([t]);if(r)throw r},async verifyPhotoAccessible(e){if(!P||!e)return{accessible:!1,error:"Invalid input"};let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return{accessible:!1,error:"Not a tm-photos URL"};t=decodeURIComponent(n[1])}catch{return{accessible:!1,error:"Invalid URL"}}else t=e;try{const{data:r,error:n}=await T.storage.from("tm-photos").createSignedUrl(t,60);return n?{accessible:!1,error:n.message}:{accessible:!!r?.signedUrl,status:200}}catch(r){return{accessible:!1,error:r.message||"Verification failed"}}},async verifyTicketPhotos(e){if(!P)return{verified:!1,issues:[]};try{const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("id",e).single();if(r)throw r;if(!t?.photos||t.photos.length===0)return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",e),{verified:!0,status:"empty",issues:[]};const n=[];for(const s of t.photos){const c=await this.verifyPhotoAccessible(s);c.accessible||n.push({url:s,error:c.error})}const i=n.length===0?"verified":"issues";return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:i,photos_issue_count:n.length}).eq("id",e),{verified:n.length===0,status:i,totalPhotos:t.photos.length,issues:n}}catch(t){return console.error("Error verifying ticket photos:",t),{verified:!1,error:t.message,issues:[]}}},async queuePhotoUpload(e,t,r,n){if(!P)return null;const{data:i,error:s}=await T.from("photo_upload_queue").insert({ticket_id:e,temp_id:t,file_name:r,file_size_bytes:n,status:"pending"}).select().single();return s?(console.error("Error queueing photo upload:",s),null):i},async confirmQueuedUpload(e,t,r){if(!P)return!1;const{data:n,error:i}=await T.rpc("confirm_photo_upload",{p_queue_id:e,p_uploaded_url:t,p_storage_path:r});return i?(console.error("Error confirming photo upload:",i),!1):n===!0},async markQueuedUploadFailed(e,t){if(!P)return!1;const{data:r,error:n}=await T.rpc("mark_photo_upload_failed",{p_queue_id:e,p_error:t});return n?(console.error("Error marking photo upload failed:",n),!1):r===!0},async getPendingPhotoUploads(e){if(!P)return[];const{data:t,error:r}=await T.rpc("get_pending_photo_uploads",{p_ticket_id:e});return r?(console.error("Error getting pending photo uploads:",r),[]):t||[]},async logPhotoOperation(e,t,r={}){if(P)try{await T.from("photo_audit_log").insert({ticket_id:e,cor_id:r.corId||null,operation:t,photo_url:r.photoUrl||null,storage_path:r.storagePath||null,details:r.metadata?r.metadata:null,error_message:r.error||null,triggered_by:r.triggeredBy||"system"})}catch(n){console.error("Error logging photo operation:",n)}},async saveExportSnapshot(e,t,r={}){if(!P)return null;const{exportType:n="pdf",exportReason:i=null,clientEmail:s=null,clientName:c=null}=r;try{const{data:u,error:m}=await T.from("cor_export_snapshots").insert({cor_id:e,export_type:n,export_reason:i,cor_data:t.cor_data,tickets_data:t.tickets_data,photos_manifest:t.photos_manifest,totals_snapshot:t.totals_snapshot,checksum:t.checksum,client_email:s,client_name:c}).select().single();if(m)throw m;return u}catch(u){return console.error("Error saving export snapshot:",u),null}},async getExportSnapshots(e){if(!P)return[];const{data:t,error:r}=await T.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",e).order("exported_at",{ascending:!1});return r?(console.error("Error fetching export snapshots:",r),[]):t||[]},async getExportSnapshot(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_snapshots").select("*").eq("id",e).single();return r?(console.error("Error fetching export snapshot:",r),null):t},async requestCORExport(e,t,r={}){if(!P)return null;try{const n=await T.auth.getUser(),{data:i,error:s}=await T.rpc("request_cor_export",{p_cor_id:e,p_idempotency_key:t,p_options:r,p_requested_by:n?.data?.user?.id||null});if(s)throw s;return i?.[0]||null}catch(n){throw Ke.error("database",{message:n.message,operation:"requestCORExport",extra:{corId:e}}),n}},async getExportJob(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_jobs").select("*").eq("id",e).single();return r?(console.error("Error fetching export job:",r),null):t},async getExportJobs(e,t=10){if(!P)return[];const{data:r,error:n}=await T.from("cor_export_jobs").select("*").eq("cor_id",e).order("created_at",{ascending:!1}).limit(t);return n?(console.error("Error fetching export jobs:",n),[]):r||[]},async updateExportJobStatus(e,t,r={}){if(!P)return null;try{const{data:n,error:i}=await T.rpc("update_export_job_status",{p_job_id:e,p_status:t,p_snapshot_id:r.snapshotId||null,p_pdf_url:r.pdfUrl||null,p_error:r.error||null,p_error_details:r.errorDetails||null,p_metrics:r.metrics||null});if(i)throw i;return n}catch(n){throw Ke.error("database",{message:n.message,operation:"updateExportJobStatus",extra:{jobId:e,status:t}}),n}},async getCurrentCORSnapshot(e){if(!P)return null;const{data:t}=await T.from("change_orders").select("version, last_snapshot_version").eq("id",e).single();if(!t||t.version!==t.last_snapshot_version)return null;const{data:r}=await T.from("cor_export_snapshots").select("*").eq("cor_id",e).eq("is_current",!0).single();return r||null},async saveCORSnapshot(e,t){if(!P)return null;try{await T.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",e.corId);const r=await T.auth.getUser(),{data:n,error:i}=await T.from("cor_export_snapshots").insert({id:e.snapshotId,cor_id:e.corId,job_id:t,cor_version:e.corVersion,cor_data:e.corData,tickets_data:e.ticketsData,photos_manifest:e.photoManifest,totals_snapshot:e.totals,checksum:e.checksum,is_current:!0,exported_by:r?.data?.user?.id||null}).select().single();if(i)throw i;return await T.from("change_orders").update({last_snapshot_version:e.corVersion}).eq("id",e.corId),n}catch(r){throw Ke.error("database",{message:r.message,operation:"saveCORSnapshot",extra:{corId:e.corId}}),r}},async updateCORAggregatedStats(e){if(P)try{await T.rpc("update_cor_aggregated_stats",{p_cor_id:e})}catch(t){console.error("Error updating COR aggregated stats:",t)}},async getCrewCheckin(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),{data:i,error:s}=await n.from("crew_checkins").select("*").eq("project_id",e).eq("check_in_date",r).maybeSingle();return s&&console.error("Error fetching crew checkin:",s),i},async saveCrewCheckin(e,t,r=null,n=null){if(!P)return null;const i=n||new Date().toISOString().split("T")[0];if(!Rn()){const m={id:Wr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Od(m),await cn(Wt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const s=_e();if(!s){const m={id:Wr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Od(m),await cn(Wt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const{data:c,error:u}=await s.from("crew_checkins").upsert({project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Wr(),project_id:e,check_in_date:i,workers:t,_offline:!0};return await Od(m),await cn(Wt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}throw console.error("Error saving crew checkin:",u),u}return c&&Od(c).catch(m=>console.error("Failed to cache checkin:",m)),c},async addCrewMember(e,t,r=null){if(!P)return null;const n=await this.getCrewCheckin(e),i=n?.workers||[];return i.find(s=>s.name.toLowerCase()===t.name.toLowerCase())?n:(i.push(t),await this.saveCrewCheckin(e,i,r))},async removeCrewMember(e,t){if(!P)return null;const r=await this.getCrewCheckin(e);if(!r)return null;const n=r.workers.filter(i=>i.name.toLowerCase()!==t.toLowerCase());return await this.saveCrewCheckin(e,n,r.created_by)},async getCrewCheckinHistory(e,t=30){if(!P)return[];const{data:r,error:n}=await T.from("crew_checkins").select("*").eq("project_id",e).order("check_in_date",{ascending:!1}).limit(t);return n?(console.error("Error fetching crew history:",n),[]):r||[]},async getRecentWorkers(e,t=30){if(!P)return[];const r=await this.getCrewCheckinHistory(e,t),n=new Map;return r.forEach(i=>{(i.workers||[]).forEach(s=>{const c=s.name.toLowerCase();n.has(c)||n.set(c,{name:s.name,role:s.role,labor_class_id:s.labor_class_id||null,lastSeen:i.check_in_date})})}),Array.from(n.values()).sort((i,s)=>i.name.localeCompare(s.name))},async getLaborRates(e,t=null,r=null){if(!P)return[];let n=T.from("labor_rates").select("*").eq("company_id",e);t&&(n=n.eq("work_type",t)),r&&(n=n.eq("job_type",r));const{data:i,error:s}=await n;return s?(console.error("Error fetching labor rates:",s),[]):i||[]},async calculateManDayCosts(e,t,r,n){if(!P)return{totalCost:0,totalManDays:0,breakdown:[]};const i=await this.getCrewCheckinHistory(e,365),s=await this.getLaborRates(t,r,n),c={};s.forEach(g=>{c[g.role.toLowerCase()]=parseFloat(g.regular_rate)||0});let u=0,m=0;const h={},p=[];return i.forEach(g=>{const _=g.workers||[];let x=0;const w={};_.forEach(j=>{const S=(j.role||"laborer").toLowerCase(),O=c[S]||0;w[S]||(w[S]={count:0,cost:0}),w[S].count++,w[S].cost+=O,x+=O,h[S]||(h[S]={count:0,cost:0,rate:O}),h[S].count++,h[S].cost+=O}),u+=x,m+=_.length,p.push({date:g.check_in_date,workers:_.length,cost:x,breakdown:w})}),{totalCost:u,totalManDays:m,byRole:h,byDate:p,daysWorked:i.length}},async getDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),{data:i,error:s}=await n.from("daily_reports").select("*").eq("project_id",e).eq("report_date",r).maybeSingle();return s&&console.error("Error fetching daily report:",s),i},async compileDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=_e(),[i,s,c]=await Promise.all([this.getCrewCheckin(e,r),n.from("areas").select("*").eq("project_id",e),n.from("t_and_m_tickets").select("*").eq("project_id",e).eq("work_date",r)]),u=s?.data||[],m=c?.data||[],h=u.filter(g=>g.status==="done"&&g.completed_at?.startsWith(r)),p=m.reduce((g,_)=>g+(_.photos?.length||0),0);return{crew_count:i?.workers?.length||0,crew_list:i?.workers||[],tasks_completed:h.length,tasks_total:u.length,completed_tasks:h.map(g=>({name:g.name,group:g.group_name})),tm_tickets_count:m.length,photos_count:p}},async saveDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!Rn()){const u={id:Wr(),project_id:e,report_date:n,...t,updated_at:new Date().toISOString(),_offline:!0};return await Ds(u),u}const i=_e(),{data:s,error:c}=await i.from("daily_reports").upsert({project_id:e,report_date:n,...t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u={id:Wr(),project_id:e,report_date:n,...t,_offline:!0};return await Ds(u),u}throw console.error("Error saving daily report:",c),c}return s&&Ds(s).catch(u=>console.error("Failed to cache report:",u)),s},async submitDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!Rn()){const m=await jL(e,n),h={id:Wr(),project_id:e,report_date:n,...m||{},status:"pending_sync",submitted_by:t,submitted_at:new Date().toISOString(),_offline:!0};return await Ds(h),await cn(Wt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:m||{},submittedBy:t}),h}const i=await this.compileDailyReport(e,n),s=_e();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("daily_reports").upsert({project_id:e,report_date:n,...i,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Wr(),project_id:e,report_date:n,...i,status:"pending_sync",submitted_by:t,_offline:!0};return await Ds(m),await cn(Wt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:i,submittedBy:t}),m}throw console.error("Error submitting daily report:",u),u}return c&&Ds(c).catch(m=>console.error("Failed to cache report:",m)),c},async getDailyReports(e,t=30){if(!P)return[];const{data:r,error:n}=await T.from("daily_reports").select("*").eq("project_id",e).order("report_date",{ascending:!1}).limit(t);return n?(console.error("Error fetching daily reports:",n),[]):r||[]},async sendMessage(e,t,r,n,i=null,s=null,c="general",u=null){if(!P)return null;if(!Rn()){const p={id:Wr(),project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u,created_at:new Date().toISOString(),_offline:!0};return await IS(p),await cn(Wt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),p}const{data:m,error:h}=await T.from("messages").insert({project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const p={id:Wr(),project_id:e,sender_type:r,sender_name:n,message:t,created_at:new Date().toISOString(),_offline:!0};return await IS(p),await cn(Wt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),p}throw console.error("Error sending message:",h),h}return m},async getMessages(e,t=50){if(!P)return[];const r=_e(),{data:n,error:i}=await r.from("messages").select("*").eq("project_id",e).order("created_at",{ascending:!1}).limit(t);return i?[]:n||[]},async getUnreadCount(e,t){if(!P)return 0;const r=_e(),n=t==="field"?"office":"field",{count:i,error:s}=await r.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1);return s?0:i||0},async markMessagesRead(e,t){if(!P)return;const r=_e(),n=t==="field"?"office":"field";await r.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1)},async createMaterialRequest(e,t,r,n=null,i="normal",s=null){if(!P)return null;if(!Rn()){const m={id:Wr(),project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await cn(Wt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}const{data:c,error:u}=await T.from("material_requests").insert({project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Wr(),project_id:e,items:t,requested_by:r,status:"pending_sync",_offline:!0};return await cn(Wt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}throw console.error("Error creating material request:",u),u}return c},async getMaterialRequests(e,t=null){if(!P)return[];let r=T.from("material_requests").select("*").eq("project_id",e).order("created_at",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching material requests:",i),[]):n||[]},async getPendingRequestsCount(e){if(!P)return 0;const{count:t,error:r}=await T.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("status","pending");return r?0:t||0},async updateMaterialRequest(e,t,r,n=null,i=null){if(!P)return null;const s={status:t,responded_by:r,responded_at:new Date().toISOString(),response_notes:n,updated_at:new Date().toISOString()};i&&(s.expected_delivery=i),t==="delivered"&&(s.delivered_at=new Date().toISOString());const{data:c,error:u}=await T.from("material_requests").update(s).eq("id",e).select().single();if(u)throw console.error("Error updating material request:",u),u;return c},generateShareToken(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=new Uint8Array(12);return crypto.getRandomValues(t),Array.from(t,r=>e[r%e.length]).join("")},async createProjectShare(e,t,r,n=null){if(!P){const m=Oe();m.projectShares||(m.projectShares=[]);const h={id:crypto.randomUUID(),project_id:e,share_token:this.generateShareToken(),created_by:t,expires_at:n,is_active:!0,permissions:r,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return m.projectShares.push(h),Ge(m),h}const{data:i,error:s}=await T.rpc("generate_share_token");if(s)throw console.error("Error generating share token:",s),s;const{data:c,error:u}=await T.from("project_shares").insert({project_id:e,share_token:i,created_by:t,expires_at:n,permissions:r}).select().single();if(u)throw console.error("Error creating project share:",u),u;return c},async getShareByToken(e){if(!P){const n=Oe();if(!n.projectShares)return null;const i=n.projectShares.find(s=>s.share_token===e&&s.is_active&&(!s.expires_at||new Date(s.expires_at)>new Date));return i&&(i.view_count++,i.last_viewed_at=new Date().toISOString(),Ge(n)),i}const{data:t,error:r}=await T.from("project_shares").select("*, projects(*)").eq("share_token",e).eq("is_active",!0).single();return r?(console.error("Error fetching share by token:",r),null):t.expires_at&&new Date(t.expires_at)<new Date?null:(await T.rpc("increment_share_view_count",{token:e}),t)},async getProjectShares(e){if(!P){const n=Oe();return n.projectShares?n.projectShares.filter(i=>i.project_id===e):[]}const{data:t,error:r}=await T.from("project_shares").select("*, users(name, email)").eq("project_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching project shares:",r),[]):t||[]},async updateProjectShare(e,t){if(!P){const i=Oe();if(!i.projectShares)return null;const s=i.projectShares.findIndex(c=>c.id===e);return s===-1?null:(i.projectShares[s]={...i.projectShares[s],...t,updated_at:new Date().toISOString()},Ge(i),i.projectShares[s])}const{data:r,error:n}=await T.from("project_shares").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating project share:",n),n;return r},async revokeProjectShare(e){return this.updateProjectShare(e,{is_active:!1})},async deleteProjectShare(e){if(!P){const r=Oe();if(!r.projectShares)return;r.projectShares=r.projectShares.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("project_shares").delete().eq("id",e);if(t)throw console.error("Error deleting project share:",t),t},async getPublicProjectData(e){const t=await this.getShareByToken(e);if(!t)return null;const r=t.project_id||t.projects?.id;if(!P){const s=Oe(),c=s.projects.find(g=>g.id===r);if(!c)return null;const u=s.areas.filter(g=>g.project_id===r),m=u.reduce((g,_)=>g+parseFloat(_.weight||0),0),h=u.filter(g=>g.status==="done").reduce((g,_)=>g+parseFloat(_.weight||0),0),p=m>0?Math.round(h/m*100):0;return{share:t,project:c,progress:p,areas:t.permissions.progress?u:[],photos:[],dailyReports:[],tmTickets:[]}}const n=t.projects||await this.getProject(r);if(!n)return null;const i={share:t,project:n,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(t.permissions.progress){i.areas=await this.getAreas(r);const s=i.areas.reduce((u,m)=>u+parseFloat(m.weight||0),0),c=i.areas.filter(u=>u.status==="done").reduce((u,m)=>u+parseFloat(m.weight||0),0);i.progress=s>0?Math.round(c/s*100):0}if(t.permissions.photos){const{data:s}=await T.from("t_and_m_tickets").select("photos, work_date").eq("project_id",r).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);i.photos=s?.flatMap(c=>(c.photos||[]).map(u=>({url:u,date:c.work_date})))||[]}if(t.permissions.daily_reports){const{data:s}=await T.from("daily_reports").select("*").eq("project_id",r).order("report_date",{ascending:!1}).limit(10);i.dailyReports=s||[]}return t.permissions.tm_tickets&&(i.tmTickets=await this.getTMTickets(r)),i},async createInjuryReport(e){if(!P){const n=Oe();n.injuryReports||(n.injuryReports=[]);const i={id:crypto.randomUUID(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return n.injuryReports.push(i),Ge(n),i}const{data:t,error:r}=await T.from("injury_reports").insert(e).select().single();if(r)throw console.error("Error creating injury report:",r),r;return t},async getInjuryReports(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.filter(i=>i.project_id===e).sort((i,s)=>new Date(s.incident_date)-new Date(i.incident_date)):[]}const{data:t,error:r}=await T.from("injury_reports").select("*").eq("project_id",e).order("incident_date",{ascending:!1});return r?(console.error("Error fetching injury reports:",r),[]):t||[]},async getCompanyInjuryReports(e,t=null){if(!P){const s=Oe();if(!s.injuryReports)return[];let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>u.status===t)),c.sort((u,m)=>new Date(m.incident_date)-new Date(u.incident_date))}let r=T.from("injury_reports").select("*, projects(name)").eq("company_id",e).order("incident_date",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching company injury reports:",i),[]):n||[]},async getInjuryReport(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.find(i=>i.id===e):null}const{data:t,error:r}=await T.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",e).single();return r?(console.error("Error fetching injury report:",r),null):t},async updateInjuryReport(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(c=>c.id===e);return s===-1?null:(i.injuryReports[s]={...i.injuryReports[s],...t,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s])}const{data:r,error:n}=await T.from("injury_reports").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating injury report:",n),n;return r},async closeInjuryReport(e,t){return this.updateInjuryReport(e,{status:"closed",closed_at:new Date().toISOString(),closed_by:t})},async deleteInjuryReport(e){if(!P){const r=Oe();if(!r.injuryReports)return;r.injuryReports=r.injuryReports.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("injury_reports").delete().eq("id",e);if(t)throw console.error("Error deleting injury report:",t),t},async getInjuryStatistics(e,t=null,r=null){if(!P){const s=Oe();if(!s.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>new Date(u.incident_date)>=new Date(t))),r&&(c=c.filter(u=>new Date(u.incident_date)<=new Date(r))),{total_incidents:c.length,minor_injuries:c.filter(u=>u.injury_type==="minor").length,serious_injuries:c.filter(u=>u.injury_type==="serious").length,critical_injuries:c.filter(u=>u.injury_type==="critical").length,near_misses:c.filter(u=>u.injury_type==="near_miss").length,osha_recordable:c.filter(u=>u.osha_recordable).length,total_days_away:c.reduce((u,m)=>u+(m.days_away_from_work||0),0),total_restricted_days:c.reduce((u,m)=>u+(m.restricted_work_days||0),0)}}const{data:n,error:i}=await T.rpc("get_injury_statistics",{comp_id:e,start_date:t,end_date:r});return i?(console.error("Error fetching injury statistics:",i),null):n[0]||null},async addWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.push(t),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.push(t),this.updateInjuryReport(e,{witnesses:n})},async removeWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.splice(t,1),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.splice(t,1),this.updateInjuryReport(e,{witnesses:n})},async getCompanyUsers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",e);return r?(console.error("Error fetching company users:",r),[]):t?.map(n=>({id:n.user_id,name:n.users?.name||n.users?.email,email:n.users?.email,role:n.role}))||[]}return[]},async getProjectNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",e);return n?(console.error("Error fetching notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.project_id===e):[]},async getUserNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",e);return n?(console.error("Error fetching user notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.user_id===e):[]},async setNotificationPreference(e,t,r){if(P){const{data:c,error:u}=await T.from("notification_preferences").upsert({project_id:e,user_id:t,notification_types:r,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(u)throw console.error("Error setting notification preference:",u),u;return c}const n=Oe();n.notificationPreferences||(n.notificationPreferences=[]);const i=n.notificationPreferences.findIndex(c=>c.project_id===e&&c.user_id===t),s={id:i>=0?n.notificationPreferences[i].id:crypto.randomUUID(),project_id:e,user_id:t,notification_types:r,created_at:i>=0?n.notificationPreferences[i].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i>=0?n.notificationPreferences[i]=s:n.notificationPreferences.push(s),Ge(n),s},async removeNotificationPreference(e,t){if(P){const{error:n}=await T.from("notification_preferences").delete().eq("project_id",e).eq("user_id",t);if(n)throw console.error("Error removing notification preference:",n),n;return!0}const r=Oe();return r.notificationPreferences&&(r.notificationPreferences=r.notificationPreferences.filter(n=>!(n.project_id===e&&n.user_id===t)),Ge(r)),!0},async setProjectNotificationPreferences(e,t){const r=[];for(const n of t)if(n.notificationTypes&&n.notificationTypes.length>0){const i=await this.setNotificationPreference(e,n.userId,n.notificationTypes);r.push(i)}else await this.removeNotificationPreference(e,n.userId);return r},async getNotificationPresets(e){if(P){const{data:r,error:n}=await T.from("notification_presets").select("*").eq("company_id",e).order("name");return n?(console.error("Error fetching notification presets:",n),[]):r||[]}const t=Oe();return t.notificationPresets?t.notificationPresets.filter(r=>r.company_id===e):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:e},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:e},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:e},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:e}]},async createNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").insert({company_id:e,name:t,notification_types:r}).select().single();if(c)throw console.error("Error creating notification preset:",c),c;return s}const n=Oe();n.notificationPresets||(n.notificationPresets=[]);const i={id:crypto.randomUUID(),company_id:e,name:t,notification_types:r,created_at:new Date().toISOString()};return n.notificationPresets.push(i),Ge(n),i},async updateNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").update({name:t,notification_types:r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(c)throw console.error("Error updating notification preset:",c),c;return s}const n=Oe();if(!n.notificationPresets)return null;const i=n.notificationPresets.findIndex(s=>s.id===e);return i===-1?null:(n.notificationPresets[i]={...n.notificationPresets[i],name:t,notification_types:r,updated_at:new Date().toISOString()},Ge(n),n.notificationPresets[i])},async deleteNotificationPreset(e){if(P){const{error:r}=await T.from("notification_presets").delete().eq("id",e);if(r)throw console.error("Error deleting notification preset:",r),r;return!0}const t=Oe();return t.notificationPresets&&(t.notificationPresets=t.notificationPresets.filter(r=>r.id!==e),Ge(t)),!0},async getDumpSites(e){if(P){const{data:r,error:n}=await T.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",e).eq("active",!0).order("name");return n?(console.error("Error fetching dump sites:",n),[]):r||[]}return(Oe().dumpSites||[]).filter(r=>r.company_id===e&&r.active)},async createDumpSite(e,t,r="",n=""){if(P){const{data:c,error:u}=await T.from("dump_sites").insert({company_id:e,name:t,address:r,notes:n,active:!0}).select().single();if(u)throw console.error("Error creating dump site:",u),u;return c}const i=Oe();i.dumpSites||(i.dumpSites=[]);const s={id:crypto.randomUUID(),company_id:e,name:t,address:r,notes:n,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return i.dumpSites.push(s),Ge(i),s},async updateDumpSite(e,t){if(P){const{data:i,error:s}=await T.from("dump_sites").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error updating dump site:",s),s;return i}const r=Oe();if(!r.dumpSites)return null;const n=r.dumpSites.findIndex(i=>i.id===e);return n===-1?null:(r.dumpSites[n]={...r.dumpSites[n],...t},Ge(r),r.dumpSites[n])},async deleteDumpSite(e){return this.updateDumpSite(e,{active:!1})},async setDumpSiteRate(e,t,r,n="load"){if(P){const{data:u}=await T.from("dump_site_rates").select("id").eq("dump_site_id",e).eq("waste_type",t).maybeSingle();if(u){const{data:m,error:h}=await T.from("dump_site_rates").update({estimated_cost_per_load:r,unit:n}).eq("id",u.id).select().single();if(h)throw console.error("Error updating dump site rate:",h),h;return m}else{const{data:m,error:h}=await T.from("dump_site_rates").insert({dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n}).select().single();if(h)throw console.error("Error inserting dump site rate:",h),h;return m}}const i=Oe();i.dumpSiteRates||(i.dumpSiteRates=[]);const s=i.dumpSiteRates.findIndex(u=>u.dump_site_id===e&&u.waste_type===t),c={id:s>=0?i.dumpSiteRates[s].id:crypto.randomUUID(),dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n,created_at:new Date().toISOString()};return s>=0?i.dumpSiteRates[s]=c:i.dumpSiteRates.push(c),Ge(i),c},async getDumpSiteRates(e){if(P){const{data:r,error:n}=await T.from("dump_site_rates").select("*").eq("dump_site_id",e);return n?(console.error("Error fetching dump site rates:",n),[]):r||[]}return(Oe().dumpSiteRates||[]).filter(r=>r.dump_site_id===e)},async getHaulOffs(e){if(P){const{data:r,error:n}=await T.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",e).order("work_date",{ascending:!1});return n?(console.error("Error fetching haul-offs:",n),[]):r||[]}return(Oe().haulOffs||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.work_date)-new Date(r.work_date))},async createHaulOff(e,t){const r={project_id:e,dump_site_id:t.dumpSiteId,waste_type:t.wasteType,loads:t.loads,hauling_company:t.haulingCompany||"",work_date:t.workDate,notes:t.notes||"",estimated_cost:t.estimatedCost||0,created_by:t.createdBy||""};if(P){const{data:s,error:c}=await T.from("haul_offs").insert(r).select().single();if(c)throw console.error("Error creating haul-off:",c),c;return s}const n=Oe();n.haulOffs||(n.haulOffs=[]);const i={...r,id:crypto.randomUUID(),created_at:new Date().toISOString()};return n.haulOffs.push(i),Ge(n),i},async calculateHaulOffCosts(e){const t=await this.getHaulOffs(e);let r=0,n=0;const i={},s=[],c={};t.forEach(m=>{const h=parseFloat(m.estimated_cost)||0,p=parseInt(m.loads)||0;r+=h,n+=p,i[m.waste_type]||(i[m.waste_type]={loads:0,cost:0}),i[m.waste_type].loads+=p,i[m.waste_type].cost+=h,c[m.work_date]||(c[m.work_date]={date:m.work_date,loads:0,cost:0}),c[m.work_date].loads+=p,c[m.work_date].cost+=h}),Object.values(c).sort((m,h)=>new Date(h.date)-new Date(m.date)).forEach(m=>s.push(m));const u=s.length;return{totalCost:r,totalLoads:n,byWasteType:i,byDate:s,daysWithHaulOff:u,avgDailyHaulOffCost:u>0?r/u:0}},subscribeToHaulOffs(e,t){return P?T.channel(`haul_offs:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${e}`},t).subscribe():null},...OL,async createFolder(e,t,r){const n=_e(),{data:i,error:s}=await n.from("document_folders").insert({company_id:e,project_id:t,name:r.name,description:r.description||null,icon:r.icon||"folder",color:r.color||"blue",sort_order:r.sort_order||0,created_by:(await n.auth.getUser()).data.user?.id}).select().single();if(s)throw s;return i},async getProjectFolders(e){const t=_e(),{data:r,error:n}=await t.from("document_folders").select("*").eq("project_id",e).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(n)throw n;const i=r.map(s=>s.id);if(i.length>0){const{data:s,error:c}=await t.from("documents").select("folder_id").in("folder_id",i).is("archived_at",null).eq("is_current",!0);if(!c&&s){const u={};s.forEach(m=>{u[m.folder_id]=(u[m.folder_id]||0)+1}),r.forEach(m=>{m.document_count=u[m.id]||0})}}return r},async updateFolder(e,t){const r=_e(),{data:n,error:i}=await r.from("document_folders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n},async deleteFolder(e){const t=_e();await t.from("documents").update({folder_id:null}).eq("folder_id",e);const{error:r}=await t.from("document_folders").delete().eq("id",e);if(r)throw r;return!0},async reorderFolders(e,t){const r=_e(),n=t.map(({id:i,sort_order:s})=>r.from("document_folders").update({sort_order:s,updated_at:new Date().toISOString()}).eq("id",i).eq("project_id",e));return await Promise.all(n),!0},async getFolderDocuments(e,t={}){const r=_e(),{page:n=0,limit:i=25}=t;let s=r.from("documents").select("*",{count:"exact"}).eq("folder_id",e).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);const{data:c,error:u,count:m}=await s;if(u)throw u;return{documents:c||[],totalCount:m||0,hasMore:(m||0)>(n+1)*i}},async moveDocumentToFolder(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").update({folder_id:t}).eq("id",e).select().single();if(i)throw i;return n},async getUnfiledDocuments(e,t={}){const r=_e(),{page:n=0,limit:i=25}=t,{data:s,error:c,count:u}=await r.from("documents").select("*",{count:"exact"}).eq("project_id",e).is("folder_id",null).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);if(c)throw c;return{documents:s||[],totalCount:u||0,hasMore:(u||0)>(n+1)*i}},async uploadDocument(e,t,r,n={}){const i=_e(),s=Date.now(),c=250*1024*1024,{data:u}=await i.from("documents").select("file_size_bytes").eq("project_id",t).is("archived_at",null),m=u?.reduce((j,S)=>j+(S.file_size_bytes||0),0)||0;if(m+r.size>c){const j=Math.round(m/1024/1024),S=Math.round(c/1024/1024);throw new Error(`Project storage limit reached (${j}/${S} MB). Contact support to upgrade.`)}const h=Date.now(),p=new Uint8Array(6);crypto.getRandomValues(p);const g=Array.from(p,j=>j.toString(36)).join(""),_=r.name.split(".").pop()?.toLowerCase()||"bin",x=`${h}-${g}.${_}`,w=`${e}/${t}/documents/${x}`;try{const{data:j,error:S}=await i.storage.from("project-documents").upload(w,r,{cacheControl:"3600",upsert:!1});if(S)throw S;const{data:O}=i.storage.from("project-documents").getPublicUrl(w),C=O.publicUrl,A=n.category==="contracts"?"pending":"approved",{data:k,error:D}=await i.from("documents").insert({company_id:e,project_id:t,name:n.name||r.name.replace(/\.[^/.]+$/,""),description:n.description||null,file_name:r.name,file_size_bytes:r.size,mime_type:r.type,storage_path:w,folder_id:n.folderId||null,category:n.category||"general",tags:n.tags||[],visibility:n.visibility||"all",approval_status:A,resource_type:n.resourceType||null,resource_id:n.resourceId||null,uploaded_by:(await i.auth.getUser()).data?.user?.id}).select().single();if(D)throw D;const M=Date.now()-s;return Ke.storage("document_upload",{company_id:e,project_id:t,file_size:r.size,mime_type:r.type,duration:M,success:!0}),{...k,url:C}}catch(j){throw Ke.error("storage",{message:j.message,operation:"uploadDocument",company_id:e,project_id:t}),j}},async getProjectDocuments(e,{category:t=null,page:r=0,limit:n=25,includeArchived:i=!1}={}){let c=_e().from("documents").select("*",{count:"exact"}).eq("project_id",e).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(r*n,(r+1)*n-1);i||(c=c.is("archived_at",null)),t&&t!=="all"&&(c=c.eq("category",t));const{data:u,error:m,count:h}=await c;if(m)throw m;return{documents:u||[],totalCount:h||0,hasMore:(r+1)*n<(h||0),page:r,limit:n}},async getDocument(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("*").eq("id",e).single();if(n)throw n;return r},async getDocumentVersions(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("id, parent_document_id").eq("id",e).single();if(n)throw n;const i=r.parent_document_id||e,{data:s,error:c}=await t.from("documents").select("*").or(`id.eq.${i},parent_document_id.eq.${i}`).order("version",{ascending:!1});if(c)throw c;return s||[]},async uploadDocumentVersion(e,t,r,n,i={}){const s=_e(),{data:c,error:u}=await s.from("documents").select("*").eq("id",e).single();if(u)throw u;const{data:m}=await s.from("documents").select("version").or(`id.eq.${e},parent_document_id.eq.${e}`).order("version",{ascending:!1}).limit(1),h=(m?.[0]?.version||1)+1;await s.from("documents").update({is_current:!1}).or(`id.eq.${e},parent_document_id.eq.${e}`);const p=await this.uploadDocument(t,r,n,{name:i.name||c.name,description:i.description||c.description,category:c.category,visibility:c.visibility,tags:c.tags,resourceType:c.resource_type,resourceId:c.resource_id}),{data:g,error:_}=await s.from("documents").update({version:h,is_current:!0,parent_document_id:e}).eq("id",p.id).select().single();if(_)throw _;return await s.from("document_audit_log").insert({document_id:p.id,project_id:r,company_id:t,operation:"version_created",details:{version:h,parent_id:e},triggered_by:"user",user_id:(await s.auth.getUser()).data?.user?.id}),{...p,...g}},async updateDocument(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").update({name:t.name,description:t.description,category:t.category,visibility:t.visibility,tags:t.tags}).eq("id",e).select().single();if(i)throw i;return n},async archiveDocument(e){const t=_e(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:new Date().toISOString(),archived_by:r}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"deleted",triggered_by:"user",user_id:r}),n},async restoreDocument(e){const t=_e(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:null,archived_by:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"restored",triggered_by:"user",user_id:r}),n},async deleteDocumentPermanently(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("storage_path, company_id, project_id").eq("id",e).single();if(n)throw n;r.storage_path&&await t.storage.from("project-documents").remove([r.storage_path]);const{error:i}=await t.from("documents").delete().eq("id",e);if(i)throw i;return!0},async linkDocumentToResource(e,t,r){const n=_e(),{data:i,error:s}=await n.from("documents").update({resource_type:t,resource_id:r}).eq("id",e).select().single();if(s)throw s;return await n.from("document_audit_log").insert({document_id:e,project_id:i.project_id,company_id:i.company_id,operation:"linked",details:{resource_type:t,resource_id:r},triggered_by:"user",user_id:(await n.auth.getUser()).data?.user?.id}),i},async unlinkDocumentFromResource(e){const t=_e(),{data:r}=await t.from("documents").select("resource_type, resource_id, project_id, company_id").eq("id",e).single(),{data:n,error:i}=await t.from("documents").update({resource_type:null,resource_id:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:r.project_id,company_id:r.company_id,operation:"unlinked",details:{resource_type:r.resource_type,resource_id:r.resource_id},triggered_by:"user",user_id:(await t.auth.getUser()).data?.user?.id}),n},async getResourceDocuments(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").select("*").eq("resource_type",e).eq("resource_id",t).is("archived_at",null).order("uploaded_at",{ascending:!1});if(i)throw i;return n||[]},async approveDocument(e){const t=_e(),{data:r,error:n}=await t.rpc("approve_document",{p_document_id:e});if(n)throw n;return r},async rejectDocument(e,t){const r=_e(),{data:n,error:i}=await r.rpc("reject_document",{p_document_id:e,p_reason:t});if(i)throw i;return n},async getPendingDocuments(e){const t=_e(),{data:r,error:n}=await t.from("documents").select("*, project:projects(name)").eq("company_id",e).eq("approval_status","pending").is("archived_at",null).order("uploaded_at",{ascending:!1});if(n)throw n;return r||[]},async searchDocuments(e,t){const r=_e(),{data:n,error:i}=await r.from("documents").select("*").eq("project_id",e).eq("is_current",!0).is("archived_at",null).or(`name.ilike.%${t}%,description.ilike.%${t}%`).order("uploaded_at",{ascending:!1}).limit(20);if(i)throw i;return n||[]},async logDocumentAccess(e,t="downloaded"){const r=_e(),{data:n}=await r.from("documents").select("project_id, company_id").eq("id",e).single();n&&await r.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:t,triggered_by:"user",user_id:(await r.auth.getUser()).data?.user?.id})}};Pb(async e=>{if(e&&P)try{await EN(be)}catch(t){console.error("Error syncing pending actions:",t)}});const xZ=Object.freeze(Object.defineProperty({__proto__:null,auth:rf,clearFieldSession:gy,db:be,drawRequestOps:AL,equipmentOps:CL,getConnectionStatus:Rn,getPendingActionCount:tf,getSupabaseClient:Ii,isFieldMode:vy,isSupabaseConfigured:P,onConnectionChange:Pb,supabase:T,syncPendingActions:EN},Symbol.toStringTag,{value:"Module"})),CN=y.createContext(),un={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function kd({children:e,companyId:t}){const[r,n]=y.useState(un),[i,s]=y.useState(!0);y.useEffect(()=>{t?c(t):u()},[t]),y.useEffect(()=>{p(r)},[r]);const c=async w=>{try{if(s(!0),!P){n(un),s(!1);return}const{data:j,error:S}=await T.from("company_branding").select("*").eq("company_id",w).single();S?(S.code==="PGRST116"?await m(w):console.error("Error loading branding:",S),n(un)):n({...un,...j})}catch(j){console.error("Error in loadBranding:",j),n(un)}finally{s(!1)}},u=async()=>{try{s(!0);const w=window.location.hostname;if(w==="localhost"||w==="127.0.0.1"){n(un),s(!1);return}if(!P){n(un),s(!1);return}const{data:j,error:S}=await T.rpc("get_branding_by_domain",{domain_name:w});S||!j||j.length===0?n(un):n({...un,...j[0]})}catch(w){console.error("Error loading branding by domain:",w),n(un)}finally{s(!1)}},m=async w=>{try{const{data:j,error:S}=await T.from("company_branding").insert({company_id:w,...un}).select().single();S&&console.error("Error creating default branding:",S)}catch(j){console.error("Error in createDefaultBranding:",j)}},h=y.useCallback(async w=>{try{if(!P)return n(D=>({...D,...w})),{success:!0};if(!t)return{success:!1,error:"No company ID"};const j={},S=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const D of S)w[D]!==void 0&&(j[D]=w[D]);const{data:O,error:C}=await T.from("company_branding").select("id").eq("company_id",t).single();if(C&&C.code==="PGRST116"){const{data:D,error:M}=await T.from("company_branding").insert({company_id:t,...j}).select().single();return M?(console.error("Error creating branding:",M),{success:!1,error:M.message}):(n({...un,...D}),{success:!0,data:D})}const{data:A,error:k}=await T.from("company_branding").update(j).eq("company_id",t).select().single();return k?(console.error("Error updating branding:",k),{success:!1,error:k.message}):(n({...un,...A}),{success:!0,data:A})}catch(j){return console.error("Error in updateBranding:",j),{success:!1,error:j.message}}},[t]),p=w=>{const j=document.documentElement;if(j.style.setProperty("--primary-color",w.primary_color),j.style.setProperty("--secondary-color",w.secondary_color),w.favicon_url){let S=document.querySelector("link[rel*='icon']");S||(S=document.createElement("link"),S.rel="icon",document.head.appendChild(S)),S.href=w.favicon_url}document.title=w.custom_app_name||"FieldSync"},g=y.useCallback(async(w,j)=>{try{if(!P)return{success:!0,url:URL.createObjectURL(w)};const S=w.name.split(".").pop(),C=`branding/${`${t}/${j}-${Date.now()}.${S}`}`,{data:A,error:k}=await T.storage.from("public").upload(C,w,{cacheControl:"3600",upsert:!0});if(k)return console.error("Error uploading image:",k),{success:!1,error:k.message};const{data:{publicUrl:D}}=T.storage.from("public").getPublicUrl(C);return{success:!0,url:D}}catch(S){return console.error("Error in uploadBrandingImage:",S),{success:!1,error:S.message}}},[t]),_=y.useCallback(()=>{t?c(t):u()},[t]),x=y.useMemo(()=>({branding:r,loading:i,updateBranding:h,uploadBrandingImage:g,refreshBranding:_}),[r,i,h,g,_]);return f.jsx(CN.Provider,{value:x,children:e})}function kL(){const e=y.useContext(CN);if(!e)throw new Error("useBranding must be used within a BrandingProvider");return e}const AN=y.createContext();function wg({children:e}){const[t,r]=y.useState(()=>{const s=localStorage.getItem("fieldsync-theme");return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});y.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("fieldsync-theme",t)},[t]),y.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: light)"),c=u=>{localStorage.getItem("fieldsync-theme")||r(u.matches?"light":"dark")};return s.addEventListener("change",c),()=>s.removeEventListener("change",c)},[]);const n=y.useCallback(()=>{r(s=>s==="dark"?"light":"dark")},[]),i=y.useMemo(()=>({theme:t,setTheme:r,toggleTheme:n}),[t,n]);return f.jsx(AN.Provider,{value:i,children:e})}function DL(){const e=y.useContext(AN);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}const TL=y.createContext(null);function PL({children:e}){const[t,r]=y.useState(null),[n,i]=y.useState([]),s=y.useCallback(()=>{r(null)},[]),c=y.useCallback((w,j="info",S=3e3)=>{if(t){i(O=>[...O,{message:w,type:j,duration:S}]);return}r({message:w,type:j,duration:S}),S>0&&setTimeout(()=>{r(null)},S)},[t]),u=y.useCallback(()=>{if(n.length>0){const[w,...j]=n;i(j),setTimeout(()=>{c(w.message,w.type,w.duration)},300)}},[n,c]),m=y.useCallback(()=>{s(),u()},[s,u]),h=y.useCallback((w,j)=>{c(w,"success",j)},[c]),p=y.useCallback((w,j)=>{c(w,"error",j)},[c]),g=y.useCallback((w,j)=>{c(w,"warning",j)},[c]),_=y.useCallback((w,j)=>{c(w,"info",j)},[c]),x=y.useMemo(()=>({toast:t,showToast:c,hideToast:m,success:h,error:p,warning:g,info:_}),[t,c,m,h,p,g,_]);return f.jsxs(TL.Provider,{value:x,children:[e,t&&f.jsx("div",{className:"toast-container",children:f.jsx("div",{className:`toast ${t.type}`,onClick:m,children:t.message})})]})}function zr({className:e="",showPoweredBy:t=!1}){const{branding:r}=kL();return f.jsxs("div",{className:`app-logo ${e}`,children:[r.logo_url?f.jsx("img",{src:r.logo_url,alt:r.custom_app_name||"Logo",className:"custom-logo"}):f.jsxs("div",{className:"logo",children:[r.custom_app_name||"Field",f.jsx("span",{children:"Sync"})]}),t&&!r.hide_fieldsync_branding&&f.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function ML(e){if(!e)return{score:0,label:"",color:""};let t=0;return e.length>=6&&t++,e.length>=8&&t++,/[A-Z]/.test(e)&&/[a-z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t<=1?{score:1,label:"Weak",color:"var(--accent-red)"}:t<=2?{score:2,label:"Fair",color:"var(--accent-orange)"}:t<=3?{score:3,label:"Good",color:"var(--accent-amber)"}:t<=4?{score:4,label:"Strong",color:"var(--accent-green)"}:{score:5,label:"Very strong",color:"var(--accent-green)"}}function $S(e=6){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",r=new Uint32Array(e);return crypto.getRandomValues(r),Array.from(r,n=>t[n%t.length]).join("")}function Ts(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function ac({steps:e,currentStep:t}){return f.jsx("div",{className:"onboarding-step-indicator",children:e.map((r,n)=>{const i=n+1,s=i===t,c=i<t;return f.jsxs("div",{className:"onboarding-step-wrapper",children:[n>0&&f.jsx("div",{className:`onboarding-step-line ${c?"completed":""}`}),f.jsx("div",{className:`onboarding-step-circle ${s?"active":""} ${c?"completed":""}`,children:c?f.jsx($i,{size:14}):i}),f.jsx("span",{className:`onboarding-step-label ${s?"active":""} ${c?"completed":""}`,children:r})]},n)})})}function HS({value:e,onChange:t,placeholder:r,onKeyDown:n,autoFocus:i,showStrength:s}){const[c,u]=y.useState(!1),m=ML(e);return f.jsxs("div",{className:"password-field",children:[f.jsxs("div",{className:"password-input-wrapper",children:[f.jsx("input",{type:c?"text":"password",value:e,onChange:t,placeholder:r||"Password",onKeyDown:n,autoFocus:i}),f.jsx("button",{type:"button",className:"password-toggle",onClick:()=>u(!c),tabIndex:-1,"aria-label":c?"Hide password":"Show password",children:c?f.jsx(VR,{size:18}):f.jsx(WR,{size:18})})]}),s&&e&&f.jsxs("div",{className:"password-strength",children:[f.jsx("div",{className:"password-strength-bar",children:f.jsx("div",{className:"password-strength-fill",style:{width:`${m.score/5*100}%`,background:m.color}})}),f.jsx("span",{className:"password-strength-label",style:{color:m.color},children:m.label})]})]})}function RL({onForemanAccess:e,onOfficeLogin:t,onShowToast:r}){const[n,i]=y.useState(null),[s,c]=y.useState(""),[u,m]=y.useState(null),[h,p]=y.useState(""),[g,_]=y.useState(!1),[x,w]=y.useState(""),[j,S]=y.useState(null),[O,C]=y.useState(()=>{try{return localStorage.getItem("fieldsync_foreman_name")||""}catch{return""}}),A=y.useRef(null),k=y.useRef(null);y.useEffect(()=>()=>{A.current&&clearTimeout(A.current),k.current&&clearTimeout(k.current)},[]);const[D,M]=y.useState(""),[L,X]=y.useState(""),[ne,ae]=y.useState(1),[G,B]=y.useState(null),[ce,ge]=y.useState(""),[q,R]=y.useState(""),[I,ee]=y.useState(""),[U,me]=y.useState(""),[je,J]=y.useState(!1),[H,Se]=y.useState(1),[Te,Ue]=y.useState(""),[pe,Ie]=y.useState(""),[Q,Ee]=y.useState(""),[xe,ie]=y.useState(""),[Be,ve]=y.useState(null),Ne=fe=>{const st=fe.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);c(st)},Me=async()=>{if(s.length<2){r("Enter company code","error");return}_(!0);try{const fe=await be.getCompanyByCode(s);fe?m(fe):(r("Invalid company code","error"),c(""))}catch{r("Error checking code","error")}finally{_(!1)}},Ct=async fe=>{if(fe.length===4){_(!0),w("");try{const st=await be.getProjectByPinSecure(fe,u.code);if(st.rateLimited){w("error"),r("Too many attempts. Please wait 15 minutes.","error"),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{p(""),w("")},800);return}if(st.success&&st.project){S(st.project);return}if(st.error){r("Authentication error. Please try again or contact your administrator.","error"),p("");return}r("Invalid PIN","error"),p("")}catch{r("Error checking PIN. Please check your connection.","error"),p("")}finally{_(!1)}}},Re=()=>{if(!O.trim()){r("Enter your name to continue","error");return}try{localStorage.setItem("fieldsync_foreman_name",O.trim())}catch{}e(j,O.trim())},It=fe=>{if(h.length<4&&!g){const st=h+fe;p(st),w(""),st.length===4&&(k.current&&clearTimeout(k.current),k.current=setTimeout(()=>Ct(st),150))}},_t=()=>{g||(p(fe=>fe.slice(0,-1)),w(""))},At=()=>{m(null),p(""),w("")},Cr=()=>{if(!D.trim()||!L.trim()){r("Enter email and password","error");return}t(D,L)},jt=async()=>{if(s.length<2){r("Enter company code","error");return}_(!0);try{const fe=await be.getCompanyByCode(s);fe?(B(fe),ae(2)):(r("Invalid company code","error"),c(""))}catch{r("Error checking code","error")}finally{_(!1)}},Ye=async()=>{if(!ce.trim()){r("Enter office code","error");return}_(!0);try{const{data:fe,error:st}=await T.rpc("verify_office_code",{company_id:G.id,code:ce.trim()});if(st)throw st;fe===!0?ae(3):(r("Invalid office code","error"),ge(""))}catch{r("Error verifying code","error")}finally{_(!1)}},$r=async()=>{if(!g){if(!q.trim()){r("Enter your name","error");return}if(!I.trim()||!Ts(I)){r("Enter a valid email address","error");return}if(U.length<6){r("Password must be 6+ characters","error");return}_(!0);try{const fe=I.toLowerCase().trim(),{data:st,error:Jr}=await T.auth.signUp({email:fe,password:U});let Mr;if(Jr?.message?.includes("already registered")||st?.user&&st.user.identities?.length===0){const{data:gt,error:Ut}=await T.auth.signInWithPassword({email:fe,password:U});if(Ut){r("Account exists with different password. Use your existing password.","error"),_(!1);return}Mr=gt.user.id;const{data:xt}=await T.from("user_companies").select("id, status").eq("user_id",Mr).eq("company_id",G.id).maybeSingle();if(xt){xt.status==="active"?(r("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):xt.status==="pending"?(r("Your request is still pending approval.","error"),await T.auth.signOut()):(r("Your membership was removed. Contact the company admin.","error"),await T.auth.signOut());return}const{error:_n}=await T.from("user_companies").insert({user_id:Mr,company_id:G.id,role:"member",status:"pending"});if(_n)throw console.error("Error adding to user_companies:",_n),await T.auth.signOut(),new Error("Failed to submit join request");await T.auth.signOut(),J(!0)}else{if(Jr)throw Jr;{if(Mr=st.user?.id,!Mr)throw new Error("Failed to create user");const{error:gt}=await T.from("users").insert({id:Mr,email:fe,password_hash:"managed_by_supabase_auth",name:q.trim(),company_id:G.id,role:"member",is_active:!0});if(gt)throw gt;const{error:Ut}=await T.from("user_companies").insert({user_id:Mr,company_id:G.id,role:"member",status:"pending"});if(Ut)throw console.error("Error adding to user_companies:",Ut),new Error("Failed to submit join request");await T.auth.signOut(),J(!0)}}}catch(fe){console.error("Join error:",fe),r(fe.message||"Error creating account","error")}finally{_(!1)}}},bn=async()=>{if(!g){if(!pe.trim()){r("Enter your name","error");return}if(!Q.trim()||!Ts(Q)){r("Enter a valid email address","error");return}if(xe.length<6){r("Password must be 6+ characters","error");return}_(!0);try{const fe=Q.toLowerCase().trim(),st=$S(6),Jr=$S(6),{data:Mr,error:Rr}=await T.auth.signUp({email:fe,password:xe});if(Rr){if(Rr.message?.includes("already registered"))r("An account with this email already exists. Sign in instead.","error");else throw Rr;return}const gt=Mr.user?.id;if(!gt)throw new Error("Failed to create account");const{data:Ut,error:xt}=await T.from("companies").insert({name:Te.trim(),code:st,office_code:Jr,subscription_tier:"free",owner_user_id:gt}).select().single();if(xt)throw console.error("Company creation error:",xt),new Error("Failed to create company. Please try again.");const{error:_n}=await T.from("users").insert({id:gt,email:fe,password_hash:"managed_by_supabase_auth",name:pe.trim(),company_id:Ut.id,role:"admin",is_active:!0});if(_n)throw console.error("User record error:",_n),new Error("Failed to set up user profile");const{error:li}=await T.from("user_companies").insert({user_id:gt,company_id:Ut.id,role:"admin",access_level:"administrator",status:"active"});if(li)throw console.error("User-company link error:",li),new Error("Failed to link account to company");ve({name:Ut.name,code:st,officeCode:Jr}),Se(3)}catch(fe){console.error("Registration error:",fe),r(fe.message||"Error creating company","error")}finally{_(!1)}}},Pr=()=>{ae(1),B(null),ge(""),R(""),ee(""),me(""),J(!1),c("")},Ar=()=>{Se(1),Ue(""),Ie(""),Ee(""),ie(""),ve(null)};if(n===null)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in-up",children:[f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsxs("div",{className:"entry-buttons stagger-children",children:[f.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>i("foreman"),children:[f.jsx("span",{className:"entry-mode-icon",children:f.jsx(To,{size:32})}),f.jsx("span",{className:"entry-mode-title",children:"Foreman"}),f.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),f.jsxs("button",{className:"entry-mode-btn office",onClick:()=>i("office"),children:[f.jsx("span",{className:"entry-mode-icon",children:f.jsx(YR,{size:32})}),f.jsx("span",{className:"entry-mode-title",children:"Office"}),f.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(n==="foreman")return j?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("div",{className:"entry-company-badge",children:j.name}),f.jsx("p",{className:"entry-subtitle",children:"Who's checking in?"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:O,onChange:fe=>C(fe.target.value),placeholder:"Your name",autoFocus:!0,onKeyDown:fe=>{fe.key==="Enter"&&Re()},style:{fontSize:"1.1rem",textAlign:"center"}}),f.jsx("button",{className:"entry-login-btn",onClick:Re,disabled:!O.trim(),children:"Enter Site"})]}),f.jsx("p",{className:"entry-hint",style:{marginTop:"0.75rem"},children:"Your name will appear on reports and submissions"}),f.jsxs("button",{className:"entry-join-link",style:{marginTop:"0.5rem",display:"flex",alignSelf:"center"},onClick:()=>{S(null),p(""),w("")},children:[f.jsx(sr,{size:16}),f.jsx("span",{children:"Back"})]})]})}):u?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:At,children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("div",{className:"entry-company-badge",children:u.name}),f.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),f.jsx("div",{className:`pin-display ${x==="error"?"shake":""}`,children:[0,1,2,3].map(fe=>f.jsx("div",{className:`pin-dot ${h.length>fe?"filled":""} ${x}`,children:h.length>fe?"":""},fe))}),f.jsxs("div",{className:"number-pad",role:"group","aria-label":"PIN entry keypad",children:[[1,2,3,4,5,6,7,8,9].map(fe=>f.jsx("button",{className:"num-btn",onClick:()=>It(fe.toString()),disabled:g,"aria-label":String(fe),children:fe},fe)),f.jsx("button",{className:"num-btn empty",disabled:!0,"aria-hidden":"true"}),f.jsx("button",{className:"num-btn",onClick:()=>It("0"),disabled:g,"aria-label":"0",children:"0"}),f.jsx("button",{className:"num-btn backspace",onClick:_t,disabled:g||h.length===0,"aria-label":"Delete last digit",children:f.jsx(sr,{size:18})})]}),g&&f.jsx("div",{className:"entry-loading",children:f.jsx("div",{className:"spinner"})})]})}):f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>i(null),children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"text",value:s,onChange:fe=>Ne(fe.target.value),placeholder:"Company Code",disabled:g,autoFocus:!0,onKeyDown:fe=>{fe.key==="Enter"&&Me()}}),f.jsx("button",{className:"entry-submit-btn",onClick:Me,disabled:g||s.length<2,children:g?f.jsx("div",{className:"spinner-small"}):f.jsx(yc,{size:20})})]})]})});if(n==="office")return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>i(null),children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"email",value:D,onChange:fe=>M(fe.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:fe=>{fe.key==="Enter"&&Cr()}}),f.jsx("input",{type:"password",value:L,onChange:fe=>X(fe.target.value),placeholder:"Password",onKeyDown:fe=>{fe.key==="Enter"&&Cr()}}),f.jsx("button",{className:"entry-login-btn",onClick:Cr,children:"Sign In"})]}),f.jsx("div",{className:"entry-signup-hint",children:f.jsxs("div",{className:"entry-signup-options",children:[f.jsxs("button",{className:"entry-join-link",onClick:()=>{Pr(),i("join")},children:[f.jsx(HA,{size:16}),f.jsx("span",{children:"Join your company"})]}),f.jsxs("button",{className:"entry-join-link",onClick:()=>{Ar(),i("register")},children:[f.jsx(GR,{size:16}),f.jsx("span",{children:"Register a new company"})]})]})})]})});if(n==="join")return je?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-scale-in",children:[f.jsx("div",{className:"entry-success-icon",children:f.jsx($i,{size:32})}),f.jsx("h2",{className:"entry-success-title",children:"Request Submitted"}),f.jsxs("p",{className:"entry-success-message",children:["Your request to join ",f.jsx("strong",{children:G?.name})," has been submitted. A company admin will review and approve your access."]}),f.jsx("p",{className:"entry-success-detail",children:"You'll be able to sign in once approved."}),f.jsx("button",{className:"entry-login-btn",onClick:()=>{Pr(),i("office")},style:{marginTop:"1.5rem"},children:"Back to Sign In"})]})}):ne===1?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{Pr(),i("office")},children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Verify","Account"],currentStep:1}),f.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),f.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"text",value:s,onChange:fe=>Ne(fe.target.value),placeholder:"Company Code",disabled:g,autoFocus:!0,onKeyDown:fe=>{fe.key==="Enter"&&jt()}}),f.jsx("button",{className:"entry-submit-btn",onClick:jt,disabled:g||s.length<2,children:g?f.jsx("div",{className:"spinner-small"}):f.jsx(yc,{size:20})})]})]})}):ne===2?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{ae(1),B(null),ge("")},children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Verify","Account"],currentStep:2}),f.jsx("div",{className:"entry-company-badge",children:G?.name}),f.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),f.jsx("p",{className:"entry-hint",children:"This verifies your office access"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"password",value:ce,onChange:fe=>ge(fe.target.value),placeholder:"Office Code",disabled:g,autoFocus:!0,onKeyDown:fe=>{fe.key==="Enter"&&Ye()}}),f.jsx("button",{className:"entry-submit-btn",onClick:Ye,disabled:g||!ce.trim(),children:g?f.jsx("div",{className:"spinner-small"}):f.jsx(yc,{size:20})})]})]})}):f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{ae(2),ge("")},children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Verify","Account"],currentStep:3}),f.jsx("div",{className:"entry-company-badge",children:G?.name}),f.jsx("p",{className:"entry-subtitle",children:"Create your account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:q,onChange:fe=>R(fe.target.value),placeholder:"Your Name",autoFocus:!0}),f.jsx("input",{type:"email",value:I,onChange:fe=>ee(fe.target.value),placeholder:"Email",className:I&&!Ts(I)?"input-error":""}),f.jsx(HS,{value:U,onChange:fe=>me(fe.target.value),placeholder:"Password (6+ characters)",onKeyDown:fe=>{fe.key==="Enter"&&$r()},showStrength:!0}),f.jsx("button",{className:"entry-login-btn",onClick:$r,disabled:g||!q.trim()||!Ts(I)||U.length<6,children:g?f.jsxs("span",{className:"btn-loading",children:[f.jsx("div",{className:"spinner-small"}),"Creating account..."]}):"Join Company"})]}),f.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})});if(n==="register"){if(H===3&&Be)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card entry-card-wide animate-scale-in",children:[f.jsx("div",{className:"entry-success-icon",children:f.jsx($i,{size:32})}),f.jsx("h2",{className:"entry-success-title",children:"Company Created"}),f.jsxs("p",{className:"entry-success-message",children:[f.jsx("strong",{children:Be.name})," is ready to go. Save these codes to share with your team."]}),f.jsxs("div",{className:"entry-codes-grid",children:[f.jsxs("div",{className:"entry-code-card",children:[f.jsx("span",{className:"entry-code-label",children:"Company Code"}),f.jsx("span",{className:"entry-code-value",children:Be.code}),f.jsx("span",{className:"entry-code-hint",children:"Share with all employees"})]}),f.jsxs("div",{className:"entry-code-card",children:[f.jsx("span",{className:"entry-code-label",children:"Office Code"}),f.jsx("span",{className:"entry-code-value",children:Be.officeCode}),f.jsx("span",{className:"entry-code-hint",children:"Office staff only"})]})]}),f.jsx("p",{className:"entry-codes-warning",children:"Save these codes now. You can also find them in your company settings later."}),f.jsx("button",{className:"entry-login-btn",onClick:()=>{window.location.reload()},style:{marginTop:"0.5rem"},children:"Go to Dashboard"})]})});if(H===1)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{Ar(),i("office")},children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Your Account"],currentStep:1}),f.jsx("p",{className:"entry-subtitle",children:"Register your company"}),f.jsx("p",{className:"entry-hint",children:"Set up your company on FieldSync"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:Te,onChange:fe=>Ue(fe.target.value),placeholder:"Company Name",autoFocus:!0,onKeyDown:fe=>{fe.key==="Enter"&&Te.trim()&&Se(2)}}),f.jsx("button",{className:"entry-login-btn",onClick:()=>Se(2),disabled:!Te.trim(),children:"Continue"})]})]})});if(H===2)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>Se(1),children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Your Account"],currentStep:2}),f.jsx("div",{className:"entry-company-badge",children:Te}),f.jsx("p",{className:"entry-subtitle",children:"Create your admin account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:pe,onChange:fe=>Ie(fe.target.value),placeholder:"Your Name",autoFocus:!0}),f.jsx("input",{type:"email",value:Q,onChange:fe=>Ee(fe.target.value),placeholder:"Email",className:Q&&!Ts(Q)?"input-error":""}),f.jsx(HS,{value:xe,onChange:fe=>ie(fe.target.value),placeholder:"Password (6+ characters)",onKeyDown:fe=>{fe.key==="Enter"&&bn()},showStrength:!0}),f.jsx("button",{className:"entry-login-btn",onClick:bn,disabled:g||!pe.trim()||!Ts(Q)||xe.length<6,children:g?f.jsxs("span",{className:"btn-loading",children:[f.jsx("div",{className:"spinner-small"}),"Setting up company..."]}):"Create Company"})]}),f.jsx("p",{className:"entry-join-note",children:"You'll be the administrator. Company and office codes will be generated for you."})]})})}}function NN({message:e,type:t="",onClose:r}){return y.useEffect(()=>{const n=setTimeout(r,3e3);return()=>clearTimeout(n)},[r]),f.jsx("div",{className:"toast-container",children:f.jsx("div",{className:`toast ${t}`,children:e})})}function FS({compact:e=!1}){const{theme:t,toggleTheme:r}=DL();return f.jsx("button",{className:`theme-toggle ${e?"theme-toggle-compact":""}`,onClick:r,title:`Switch to ${t==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${t==="dark"?"light":"dark"} mode`,children:t==="dark"?f.jsxs(f.Fragment,{children:[f.jsx(FA,{size:e?18:16}),!e&&f.jsx("span",{children:"Light"})]}):f.jsxs(f.Fragment,{children:[f.jsx(KA,{size:e?18:16}),!e&&f.jsx("span",{children:"Dark"})]})})}class _o extends y.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("ErrorBoundary caught an error:",t,r),(t?.message?.includes("Failed to fetch dynamically imported module")||t?.message?.includes("Loading chunk")||t?.message?.includes("Loading CSS chunk"))&&(console.warn("[ErrorBoundary] Chunk load failure detected, clearing cache and reloading..."),"caches"in window?caches.keys().then(i=>{Promise.all(i.map(s=>caches.delete(s))).then(()=>{window.location.reload()})}).catch(i=>{console.warn("[ErrorBoundary] Cache clear failed, reloading anyway:",i.message),window.location.reload()}):window.location.reload())}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?f.jsx("div",{className:"error-boundary",children:f.jsxs("div",{className:"error-boundary-content",children:[f.jsx("div",{className:"error-icon",children:f.jsx(om,{size:48})}),f.jsx("h2",{children:"Something went wrong"}),f.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),f.jsxs("div",{className:"error-actions",children:[f.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),f.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function KS(){const[e,t]=y.useState(Rn()),[r,n]=y.useState(0),[i,s]=y.useState(!1),c=y.useRef(!1),u=y.useRef(null);return y.useEffect(()=>{const m=Pb(async p=>{t(p),p&&c.current&&(s(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>s(!1),3e3),c.current=!1),p||(c.current=!0);const g=await tf();n(g)});tf().then(n);const h=setInterval(async()=>{if(!Rn()){const p=await tf();n(p)}},5e3);return()=>{m(),clearInterval(h),u.current&&clearTimeout(u.current)}},[]),e&&r===0&&!i?null:f.jsxs("div",{className:`offline-indicator ${e?"online":"offline"} ${i?"synced":""}`,children:[f.jsx("div",{className:"offline-indicator-content",children:e?i?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"online-icon",children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f.jsx("polyline",{points:"20 6 9 17 4 12"})})}),f.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):r>0?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"syncing-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("polyline",{points:"23 4 23 10 17 10"}),f.jsx("polyline",{points:"1 20 1 14 7 14"}),f.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),f.jsxs("span",{className:"offline-text",children:["Syncing ",r,"..."]})]}):null:f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"offline-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),f.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),f.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),f.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),f.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),f.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),f.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),f.jsxs("span",{className:"offline-text",children:["Offline",r>0&&f.jsxs("span",{className:"pending-badge",children:[r," pending"]})]})]})}),f.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}function qL(){const[e,t]=y.useState(null),[r,n]=y.useState(!1);y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const c=localStorage.getItem("pwa-install-dismissed");if(c){const m=parseInt(c,10);if(Date.now()-m<10080*60*1e3)return}const u=m=>{m.preventDefault(),t(m),n(!0)};return window.addEventListener("beforeinstallprompt",u),()=>window.removeEventListener("beforeinstallprompt",u)},[]);const i=async()=>{if(!e)return;e.prompt();const{outcome:c}=await e.userChoice;c==="accepted"&&n(!1),t(null)},s=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return r?f.jsxs("div",{className:"install-prompt",children:[f.jsxs("div",{className:"install-prompt-content",children:[f.jsx(YA,{size:20}),f.jsxs("div",{className:"install-prompt-text",children:[f.jsx("strong",{children:"Install FieldSync"}),f.jsx("span",{children:"Add to home screen for quick access"})]})]}),f.jsxs("div",{className:"install-prompt-actions",children:[f.jsx("button",{className:"btn btn-primary btn-small",onClick:i,children:"Install"}),f.jsx("button",{className:"install-prompt-dismiss",onClick:s,"aria-label":"Dismiss",children:f.jsx(wb,{size:18})})]})]}):null}function zL({factorId:e,onVerified:t,onCancel:r}){const[n,i]=y.useState(""),[s,c]=y.useState(!1),[u,m]=y.useState(null),h=async()=>{if(n.length===6){c(!0),m(null);try{const{data:g,error:_}=await T.auth.mfa.challenge({factorId:e});if(_)throw _;const{error:x}=await T.auth.mfa.verify({factorId:e,challengeId:g.id,code:n});if(x)throw x;t()}catch{m("Invalid code. Please try again."),i("")}finally{c(!1)}}},p=g=>{g.key==="Enter"&&n.length===6&&h()};return f.jsxs("div",{className:"mfa-challenge",children:[f.jsx("div",{className:"mfa-challenge-icon",children:f.jsx(GA,{size:40})}),f.jsx("h2",{children:"Two-Factor Authentication"}),f.jsx("p",{children:"Enter the 6-digit code from your authenticator app"}),f.jsx("div",{className:"mfa-code-input",children:f.jsx("input",{type:"text",value:n,onChange:g=>i(g.target.value.replace(/\D/g,"").slice(0,6)),onKeyDown:p,placeholder:"000000",maxLength:6,autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*",className:"mfa-input-large","aria-label":"MFA verification code"})}),u&&f.jsx("p",{className:"mfa-error",children:u}),f.jsxs("div",{className:"mfa-challenge-actions",children:[f.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Cancel"}),f.jsx("button",{className:"btn btn-primary",onClick:h,disabled:n.length!==6||s,children:s?f.jsxs(f.Fragment,{children:[f.jsx(Bs,{size:14,className:"spinner"})," Verifying..."]}):"Verify"})]})]})}function wZ(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function LL(e){if(!e||e.length===0)return 0;let t=0;return e.forEach(r=>{r.status==="done"&&(t+=r.weight||0)}),Math.round(t)}function jZ(e){if(!e||e.length===0)return{progress:0,earnedValue:0,totalValue:0,isValueBased:!1};if(e.some(n=>n.scheduled_value>0)){const n=e.reduce((c,u)=>c+(u.scheduled_value||0),0),i=e.filter(c=>c.status==="done").reduce((c,u)=>c+(u.scheduled_value||0),0);return{progress:n>0?Math.round(i/n*100):0,earnedValue:i,totalValue:n,isValueBased:!0}}const r=e.filter(n=>n.status==="done").reduce((n,i)=>n+(i.weight||0),0);return{progress:Math.round(r),earnedValue:0,totalValue:0,isValueBased:!1}}function IL(e){if(!e||e.length===0)return"not_started";const t=e.some(i=>i.status==="working"),r=e.some(i=>i.status==="done");return e.every(i=>i.status==="done")?"done":t||r?"working":"not_started"}function SZ(e){const t=IL(e);return t==="done"?"Complete":t==="working"?"In Progress":"Not Started"}function EZ(e,t=0){const r=new Date;r.setHours(0,0,0,0);const n={scheduleStatus:"on_track",scheduleVariance:0,scheduleLabel:"On Track",laborStatus:"on_track",laborVariance:0,laborLabel:null,hasScheduleData:!1,hasLaborData:!1};if(e.start_date&&e.end_date){const i=new Date(e.start_date),s=new Date(e.end_date);i.setHours(0,0,0,0),s.setHours(0,0,0,0);const c=Math.max(1,Math.ceil((s-i)/(1e3*60*60*24))),u=Math.max(0,Math.ceil((r-i)/(1e3*60*60*24))),m=Math.min(100,u/c*100),p=(e.progress||0)-m;n.scheduleVariance=Math.round(p),n.hasScheduleData=!0,p>5?(n.scheduleStatus="ahead",n.scheduleLabel=`Ahead of Schedule (+${n.scheduleVariance}%)`):p<-5?(n.scheduleStatus="behind",n.scheduleLabel=`Behind Schedule (${n.scheduleVariance}%)`):(n.scheduleStatus="on_track",n.scheduleLabel="On Track")}if(e.planned_man_days&&e.planned_man_days>0){const s=(e.progress||0)/100*e.planned_man_days;if(s>0&&t>0){const c=(t-s)/s*100;n.laborVariance=Math.round(c),n.hasLaborData=!0,c>10?(n.laborStatus="over",n.laborLabel=`Over Planned (+${n.laborVariance}% man-days)`):c<-10?(n.laborStatus="under",n.laborLabel=`Under Planned (${n.laborVariance}% man-days)`):(n.laborStatus="on_track",n.laborLabel="Labor On Track")}else t>0&&(n.hasLaborData=!0,n.laborLabel=`${t} man-days used`)}return n}function OZ(e,t=30){if(e.status==="archived"||e.progress<100)return!1;const r=e.areas||[];if(r.length===0||!r.every(c=>c.status==="done"))return!1;const i=r.reduce((c,u)=>{const m=new Date(u.updated_at);return m>c?m:c},new Date(0));return i.getTime()===0?!1:Math.floor((Date.now()-i.getTime())/(1e3*60*60*24))>=t}const CZ=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[59,130,246]},UL=(e,t=5e3,r=.85)=>new Promise(n=>{if(!e){n(null);return}const i=new Image;i.crossOrigin="anonymous";const s=setTimeout(()=>{i.src="",n(null)},t);i.onload=()=>{clearTimeout(s);try{const c=document.createElement("canvas");c.width=i.width,c.height=i.height,c.getContext("2d").drawImage(i,0,0);const m=c.toDataURL("image/jpeg",r);n(m)}catch{n(null)}},i.onerror=()=>{clearTimeout(s),n(null)},i.src=e}),AZ=async(e,t=5e3,r=.85)=>!e||e.length===0?[]:await Promise.all(e.map(i=>UL(i,t,r)));async function YS(e,t=1920,r=.8){return!e.type.startsWith("image/")||e.size<500*1024?e:new Promise(n=>{const i=document.createElement("canvas"),s=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:m}=c;u>t&&(m=Math.round(m*t/u),u=t);const h=1920;m>h&&(u=Math.round(u*h/m),m=h),i.width=u,i.height=m,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(c,0,0,u,m),i.toBlob(p=>{if(p){const g=e.name.replace(/\.[^/.]+$/,""),_=new File([p],`${g}.jpg`,{type:"image/jpeg",lastModified:Date.now()});n(_)}else console.warn("Image compression failed, using original"),n(e)},"image/jpeg",r),URL.revokeObjectURL(c.src)},c.onerror=()=>{console.warn("Failed to load image for compression, using original"),URL.revokeObjectURL(c.src),n(e)},c.src=URL.createObjectURL(e)})}function BL(e=5e3){return new Promise(t=>{if(!navigator.geolocation){t(null);return}navigator.geolocation.getCurrentPosition(r=>{t({latitude:r.coords.latitude,longitude:r.coords.longitude,accuracy:Math.round(r.coords.accuracy)})},()=>t(null),{enableHighAccuracy:!0,timeout:e,maximumAge:6e4})})}const jg=["Containment","PPE","Disposal","Equipment"],kN={en:{workInfo:"Work Details",crewHours:"Crew & Hours",materialsEquipment:"Materials",evidence:"Evidence",review:"Review",quickActions:"Quick Actions",sameAsYesterday:"Same as Yesterday",setCrewHours:"Set Crew Hours",loading:"Loading...",supervision:"Supervision",operators:"Operators",laborers:"Laborers",addSupervision:"+ Add Supervision",addOperator:"+ Add Operator",addLaborer:"+ Add Laborer",foreman:"Foreman",superintendent:"Superintendent",firstLastName:"First & Last Name",start:"Start",end:"End",regHrs:"Reg Hrs",otHrs:"OT Hrs",selectCategory:"Select a category:",addCustomItem:"+ Add Custom Item",customItem:"Custom Item",itemName:"Item Name",category:"Category",quantity:"Quantity",addItem:"Add Item",cancel:"Cancel",noItemsCategory:"No items in this category yet",workDate:"Work Date",ceNumber:"CE/PCO #",optional:"optional",linkedCOR:"Link to Change Order",selectCOR:"Select COR (optional)",noCORs:"No pending CORs",laborSummary:"Labor Summary",worker:"worker",workers_plural:"workers",totalHours:"Total Hours",regular:"Regular",overtime:"Overtime",materials:"Materials",item:"item",items_plural:"items",noMaterials:"No materials added",notes:"Notes",addNotes:"Add notes about the work performed...",photos:"Photos",addPhotos:"Add Photos",maxPhotos:"max",noPhotos:"No photos added",certification:"Certification",certifyStatement:"I certify that this T&M ticket accurately reflects the work performed.",foremanSignature:"Foreman's Name (Signature)",yourName:"Your name",describeWork:"Describe the work performed",descriptionRequired:"Description is required",whatWorkPerformed:"What work was performed today?",searchMaterials:"Search materials & equipment...",noSearchResults:"No items found",orBrowse:"Or browse by category:",back:"Back",next:"Next",nextCrew:"Next: Crew",nextMaterials:"Next: Materials",reviewItems:"Review",skipNoMaterials:"Skip (no materials)",submitTM:"Submit T&M",submitting:"Submitting...",applySameHours:"Apply Same Hours",batchDescription:"Set start/end time and hours for all workers with names entered.",timeStarted:"Time Started",timeEnded:"Time Ended",regularHours:"Regular Hours",overtimeHours:"Overtime Hours",willApplyTo:"Will apply to",applyToAll:"Apply to All",preset8hr:"8hr Day",preset10hr:"10hr Day",preset4hr:"4hr Day",loadedWorkers:"Loaded {count} workers from {date}",noPreviousCrew:"No previous crew found for this project",appliedHours:"Applied hours to {count} worker(s)",assignedToCOR:"Assigned to COR",photoEvidence:"Photo Evidence",photosAdded:"photo(s) added",recommendedForBilling:"Recommended for billing",addMorePhotos:"Add More Photos",linkToChangeOrder:"Link to Change Order",linkedTo:"Linked to",optionalLinkCOR:"Optional - Link this T&M to a COR",selectCOROptional:"-- Select a COR (optional) --",noActiveCORs:"No active CORs available for this project",addWorkersFirst:"Add workers first",errorLoadingCrew:"Error loading previous crew",descriptionRecommended:"Description recommended",workersNoHours:"worker(s) have no hours entered",nameRequired:"Name required to submit",submitted:"Submitted",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Review & Submit",enterNameToSubmit:"Enter name to submit",done:"Done",skipSignature:"Skip signature for now",total:"total",needHours:"need hours",customHours:"Custom hours",selectTMWorkers:"Select T&M Workers",tapToAdd:"Tap to add",removeClass:"Remove this labor class",add:"Add",addLaborClass:"Add Labor Class...",other:"Other",noCustomClasses:"No custom labor classes set up for this company. Using default categories.",loadingLaborClasses:"Loading labor classes...",noLaborClassesYet:"No labor classes added yet. Select from crew check-in above or add manually:",tmSubmitted:"T&M Ticket Submitted!",ticketSavedReady:"Your ticket has been saved and is ready for client signature.",workersLabel:"Workers",retry:"Retry",retryAllPhotos:"Retry All Failed Photos",getClientSignature:"Get Client Signature",signatureDescription:"Have the client sign this T&M ticket to verify the work performed.",clientSignatureCollected:"Client signature collected!",signNowOnSite:"Sign Now (On-Site)",clientSignsDevice:"Client signs on this device",sendSignatureLink:"Send Signature Link",clientSignsLater:"Client signs later via link",ticketSummary:"Ticket Summary",edit:"Edit",submittedBy:"Submitted By",enterYourName:"Enter your name",certifyAccurate:"By submitting, you certify this T&M is accurate."},es:{workInfo:"Info del Trabajo",crewHours:"Cuadrilla y Horas",materialsEquipment:"Materiales",evidence:"Evidencia",review:"Revisar",quickActions:"Acciones Rapidas",sameAsYesterday:"Igual que Ayer",setCrewHours:"Poner Horas",loading:"Cargando...",supervision:"Supervision",operators:"Operadores",laborers:"Trabajadores",addSupervision:"+ Agregar Supervision",addOperator:"+ Agregar Operador",addLaborer:"+ Agregar Trabajador",foreman:"Capataz",superintendent:"Superintendente",firstLastName:"Nombre y Apellido",start:"Inicio",end:"Fin",regHrs:"Hrs Reg",otHrs:"Hrs Extra",selectCategory:"Seleccione una categoria:",addCustomItem:"+ Agregar Articulo",customItem:"Articulo Personalizado",itemName:"Nombre del Articulo",category:"Categoria",quantity:"Cantidad",addItem:"Agregar",cancel:"Cancelar",noItemsCategory:"No hay articulos en esta categoria",workDate:"Fecha de Trabajo",ceNumber:"CE/PCO #",optional:"opcional",linkedCOR:"Vincular a Orden de Cambio",selectCOR:"Seleccionar COR (opcional)",noCORs:"No hay CORs pendientes",laborSummary:"Resumen de Mano de Obra",worker:"trabajador",workers_plural:"trabajadores",totalHours:"Horas Totales",regular:"Regular",overtime:"Extra",materials:"Materiales",item:"articulo",items_plural:"articulos",noMaterials:"No se agregaron materiales",notes:"Notas",addNotes:"Agregar notas sobre el trabajo realizado...",photos:"Fotos",addPhotos:"Agregar Fotos",maxPhotos:"max",noPhotos:"No se agregaron fotos",certification:"Certificacion",certifyStatement:"Certifico que este ticket T&M refleja con precision el trabajo realizado.",foremanSignature:"Nombre del Capataz (Firma)",yourName:"Su nombre",describeWork:"Describir el trabajo realizado",descriptionRequired:"Descripcion es requerida",whatWorkPerformed:"Que trabajo se realizo hoy?",searchMaterials:"Buscar materiales y equipo...",noSearchResults:"No se encontraron articulos",orBrowse:"O navegar por categoria:",back:"Atras",next:"Siguiente",nextCrew:"Siguiente: Cuadrilla",nextMaterials:"Siguiente: Materiales",reviewItems:"Revisar",skipNoMaterials:"Saltar (sin materiales)",submitTM:"Enviar T&M",submitting:"Enviando...",applySameHours:"Aplicar Mismas Horas",batchDescription:"Establezca hora de inicio/fin y horas para todos los trabajadores.",timeStarted:"Hora de Inicio",timeEnded:"Hora de Fin",regularHours:"Horas Regulares",overtimeHours:"Horas Extra",willApplyTo:"Se aplicara a",applyToAll:"Aplicar a Todos",preset8hr:"Dia 8hr",preset10hr:"Dia 10hr",preset4hr:"Dia 4hr",loadedWorkers:"Se cargaron {count} trabajadores del {date}",noPreviousCrew:"No se encontro equipo anterior para este proyecto",appliedHours:"Horas aplicadas a {count} trabajador(es)",assignedToCOR:"Asignado a COR",photoEvidence:"Evidencia Fotogrfica",photosAdded:"foto(s) agregada(s)",recommendedForBilling:"Recomendado para facturacin",addMorePhotos:"Agregar Ms Fotos",linkToChangeOrder:"Vincular a Orden de Cambio",linkedTo:"Vinculado a",optionalLinkCOR:"Opcional - Vincular este T&M a un COR",selectCOROptional:"-- Seleccionar COR (opcional) --",noActiveCORs:"No hay CORs activos para este proyecto",addWorkersFirst:"Agregue trabajadores primero",errorLoadingCrew:"Error cargando equipo anterior",descriptionRecommended:"Descripcion recomendada",workersNoHours:"trabajador(es) sin horas",nameRequired:"Nombre requerido",submitted:"Enviado",switchToSpanish:"Cambiar a Espanol",switchToEnglish:"Switch to English",reviewAndSubmit:"Revisar y Enviar",enterNameToSubmit:"Ingrese nombre",done:"Listo",skipSignature:"Saltar firma por ahora",total:"total",needHours:"sin horas",customHours:"Horas personalizadas",selectTMWorkers:"Seleccionar Trabajadores T&M",tapToAdd:"Toca para agregar",removeClass:"Eliminar esta clase",add:"Agregar",addLaborClass:"Agregar Clase de Trabajo...",other:"Otros",noCustomClasses:"No hay clases de trabajo personalizadas. Usando categorias predeterminadas.",loadingLaborClasses:"Cargando clases de trabajo...",noLaborClassesYet:"No hay clases de trabajo agregadas. Seleccione del check-in o agregue manualmente:",tmSubmitted:"Ticket T&M Enviado!",ticketSavedReady:"Su ticket ha sido guardado y est listo para la firma del cliente.",workersLabel:"Trabajadores",retry:"Reintentar",retryAllPhotos:"Reintentar Todas las Fotos",getClientSignature:"Obtener Firma del Cliente",signatureDescription:"Haga que el cliente firme este ticket T&M para verificar el trabajo realizado.",clientSignatureCollected:"Firma del cliente recopilada!",signNowOnSite:"Firmar Ahora",clientSignsDevice:"Cliente firma en este dispositivo",sendSignatureLink:"Enviar Enlace",clientSignsLater:"Cliente firma despus va enlace",ticketSummary:"Resumen del Ticket",edit:"Editar",submittedBy:"Enviado Por",enterYourName:"Ingrese su nombre",certifyAccurate:"Al enviar, certifica que este T&M es preciso."}},$L=e=>t=>kN[e]?.[t]||t;function HL({project:e,workDate:t,setWorkDate:r,cePcoNumber:n,setCePcoNumber:i,notes:s,setNotes:c,t:u,lang:m}){return f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-project-info",children:[e.job_number&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Job #"}),f.jsx("span",{className:"tm-project-value",children:e.job_number})]}),f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Project"}),f.jsx("span",{className:"tm-project-value",children:e.name})]}),e.address&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Address"}),f.jsx("span",{className:"tm-project-value",children:e.address})]}),e.general_contractor&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"GC"}),f.jsx("span",{className:"tm-project-value",children:e.general_contractor})]})]}),f.jsxs("div",{className:"tm-field-row",children:[f.jsxs("div",{className:"tm-field tm-field-half",children:[f.jsx("label",{children:"Date"}),f.jsx("input",{type:"date",value:t,onChange:h=>r(h.target.value),className:"tm-date"})]}),f.jsxs("div",{className:"tm-field tm-field-half",children:[f.jsx("label",{children:"CE / PCO #"}),f.jsx("input",{type:"text",placeholder:"Change Event / PCO",value:n,onChange:h=>i(h.target.value),className:"tm-input"})]})]}),f.jsxs("div",{className:"tm-field tm-description-field",children:[f.jsxs("label",{children:[f.jsx(Ho,{size:16,className:"inline-icon"}),u("describeWork")," ",f.jsx("span",{className:"tm-required",children:"*"})]}),f.jsx("textarea",{placeholder:u("whatWorkPerformed"),value:s,onChange:h=>c(h.target.value),rows:4,className:`tm-description ${s.trim()?"":"tm-field-required"}`})]})]})}const FL=e=>{if(!e)return"empty";const t=e.name&&e.name.trim()!=="",r=parseFloat(e.hours)>0||parseFloat(e.overtimeHours)>0;return t?r?"complete":"incomplete":"empty"},GS=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function ic({worker:e,index:t,onUpdate:r,onRemove:n,t:i,roleSelect:s}){const c=FL(e);return f.jsxs("div",{className:`tm-worker-card-expanded ${c!=="empty"?`worker-${c}`:""}`,children:[f.jsxs("div",{className:"tm-worker-row-top",children:[c==="complete"&&f.jsx("span",{className:"tm-worker-check",children:f.jsx($i,{size:14})}),s,f.jsx("input",{type:"text",placeholder:i("firstLastName"),value:e.name,onChange:u=>r(t,"name",u.target.value),className:"tm-worker-input"}),f.jsx("button",{className:"tm-remove",onClick:()=>n(t),children:""})]}),f.jsxs("div",{className:"tm-worker-row-bottom",children:[f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("start")}),f.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>r(t,"timeStarted",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("end")}),f.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>r(t,"timeEnded",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("regHrs")}),f.jsx("input",{type:"number",placeholder:"0",value:e.hours,onChange:u=>r(t,"hours",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("otHrs")}),f.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>r(t,"overtimeHours",u.target.value)})]})]})]})}function KL({batchHours:e,setBatchHours:t,namedWorkerCount:r,onApply:n,onClose:i,t:s}){const c=u=>{let m,h,p,g;switch(u){case"full":m="07:00",h="15:30",p="8",g="";break;case"10hr":m="06:00",h="16:30",p="8",g="2";break;case"half":m="07:00",h="11:00",p="4",g="";break;default:return}t({timeStarted:m,timeEnded:h,hours:p,overtimeHours:g})};return f.jsx("div",{className:"tm-modal-overlay",onClick:i,children:f.jsxs("div",{className:"tm-batch-modal",onClick:u=>u.stopPropagation(),children:[f.jsxs("h3",{children:[f.jsx(Po,{size:18})," ",s("applySameHours")]}),f.jsx("p",{className:"tm-batch-description",children:s("batchDescription")}),f.jsxs("div",{className:"tm-time-presets",children:[f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("full"),children:s("preset8hr")}),f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("10hr"),children:s("preset10hr")}),f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("half"),children:s("preset4hr")})]}),f.jsxs("div",{className:"tm-batch-form",children:[f.jsxs("div",{className:"tm-batch-row",children:[f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("timeStarted")}),f.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>{const m=u.target.value,h=GS(m,e.timeEnded);t({...e,timeStarted:m,...h||{}})}})]}),f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("timeEnded")}),f.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>{const m=u.target.value,h=GS(e.timeStarted,m);t({...e,timeEnded:m,...h||{}})}})]})]}),f.jsxs("div",{className:"tm-batch-row",children:[f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("regularHours")}),f.jsx("input",{type:"number",placeholder:"8",value:e.hours,onChange:u=>t({...e,hours:u.target.value})})]}),f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("overtimeHours")}),f.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>t({...e,overtimeHours:u.target.value})})]})]})]}),f.jsxs("div",{className:"tm-batch-preview",children:[f.jsxs("strong",{children:[s("willApplyTo"),":"]}),f.jsxs("span",{children:[r," ",s("workers_plural")]})]}),f.jsxs("div",{className:"tm-batch-actions",children:[f.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:s("cancel")}),f.jsx("button",{type:"button",className:"btn btn-primary",onClick:n,disabled:!e.hours&&!e.overtimeHours,children:s("applyToAll")})]})]})})}function YL({supervision:e,operators:t,laborers:r,dynamicWorkers:n,activeLaborClassIds:i,setActiveLaborClassIds:s,laborCategories:c,laborClasses:u,hasCustomLaborClasses:m,loadingLaborClasses:h,todaysCrew:p,showBatchHoursModal:g,setShowBatchHoursModal:_,batchHours:x,setBatchHours:w,loadingPreviousCrew:j,namedWorkers:S,workersNeedingHours:O,totalRegHours:C,totalOTHours:A,onLoadPreviousCrew:k,onApplyBatchHours:D,onApplyInlinePreset:M,onAddCrewWorker:L,onActivateLaborClass:X,onDeactivateLaborClass:ne,addSupervision:ae,updateSupervision:G,removeSupervision:B,addOperator:ce,updateOperator:ge,removeOperator:q,addLaborer:R,updateLaborer:I,removeLaborer:ee,addDynamicWorker:U,updateDynamicWorker:me,removeDynamicWorker:je,getInactiveLaborClasses:J,t:H,lang:Se,onShowToast:Te}){const Ue=S.length;return f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-crew-summary-bar",children:[f.jsxs("div",{className:"tm-summary-left",children:[f.jsx("span",{className:"tm-summary-count",children:S.length}),f.jsx("span",{className:"tm-summary-label",children:S.length===1?H("worker"):H("workers_plural")})]}),f.jsxs("div",{className:"tm-summary-middle",children:[f.jsxs("span",{className:"tm-summary-hours",children:[C+A,"h"]}),f.jsx("span",{className:"tm-summary-label",children:H("total")})]}),O>0&&f.jsxs("div",{className:"tm-summary-warning",children:[f.jsx(jb,{size:14}),f.jsxs("span",{children:[O," ",H("needHours")]})]})]}),f.jsxs("div",{className:"tm-quick-actions-row",children:[f.jsxs("button",{className:"tm-quick-action",onClick:k,disabled:j,children:[f.jsx(XR,{size:16}),f.jsx("span",{children:H(j?"loading":"sameAsYesterday")})]}),S.length>0&&f.jsxs("div",{className:"tm-time-presets-inline",children:[f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("8hr"),children:"8h"}),f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("10hr"),children:"10h"}),f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("4hr"),children:"4h"}),f.jsx("button",{className:"tm-preset-chip more",onClick:()=>_(!0),title:H("customHours"),children:f.jsx(Po,{size:14})})]})]}),p.length>0&&f.jsxs("div",{className:"tm-crew-select-section",children:[f.jsxs("div",{className:"tm-section-header",children:[f.jsxs("h4",{children:[f.jsx(To,{size:16})," ",H("selectTMWorkers")]}),f.jsx("span",{className:"tm-section-hint",children:H("tapToAdd")})]}),f.jsx("div",{className:"tm-crew-grid",children:p.map((pe,Ie)=>{const Q=e.some(ie=>ie.name.toLowerCase()===pe.name.toLowerCase())||t.some(ie=>ie.name.toLowerCase()===pe.name.toLowerCase())||r.some(ie=>ie.name.toLowerCase()===pe.name.toLowerCase()),Ee=Object.values(n).some(ie=>ie.some(Be=>Be.name.toLowerCase()===pe.name.toLowerCase())),xe=Q||Ee;return f.jsxs("button",{className:`tm-crew-item ${xe?"added":""}`,onClick:()=>{xe||L(pe)},disabled:xe,children:[f.jsx("span",{className:"tm-crew-item-name",children:pe.name}),f.jsx("span",{className:`tm-crew-item-role ${(pe.role||"laborer").toLowerCase()}`,children:pe.role||"Laborer"}),xe&&f.jsx("span",{className:"tm-crew-item-check",children:""})]},Ie)})})]}),m&&!h&&f.jsxs(f.Fragment,{children:[c.map(pe=>{const Ie=u.filter(Q=>Q.category_id===pe.id&&i.has(Q.id));return Ie.length===0?null:f.jsxs("div",{className:"tm-labor-category-section",children:[f.jsx("div",{className:"tm-category-header",children:pe.name}),Ie.map(Q=>f.jsxs("div",{className:"tm-field",children:[f.jsxs("div",{className:"tm-field-header",children:[f.jsx("label",{children:Q.name}),f.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>ne(Q.id),title:H("removeClass"),children:""})]}),f.jsx("div",{className:"tm-workers-list",children:(n[Q.id]||[]).map((Ee,xe)=>f.jsx(ic,{worker:Ee,index:xe,onUpdate:(ie,Be,ve)=>me(Q.id,ie,Be,ve),onRemove:ie=>je(Q.id,ie),t:H},xe))}),f.jsxs("button",{className:"tm-add-btn",onClick:()=>U(Q.id),children:["+ ",H("add")," ",Q.name]})]},Q.id))]},pe.id)}),u.filter(pe=>!pe.category_id&&i.has(pe.id)).map(pe=>f.jsxs("div",{className:"tm-field",children:[f.jsxs("div",{className:"tm-field-header",children:[f.jsx("label",{children:pe.name}),f.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>ne(pe.id),title:H("removeClass"),children:""})]}),f.jsx("div",{className:"tm-workers-list",children:(n[pe.id]||[]).map((Ie,Q)=>f.jsx(ic,{worker:Ie,index:Q,onUpdate:(Ee,xe,ie)=>me(pe.id,Ee,xe,ie),onRemove:Ee=>je(pe.id,Ee),t:H},Q))}),f.jsxs("button",{className:"tm-add-btn",onClick:()=>U(pe.id),children:["+ ",H("add")," ",pe.name]})]},pe.id)),J().length>0&&f.jsx("div",{className:"tm-add-labor-class-section",children:f.jsxs("select",{className:"tm-add-labor-class-select",value:"",onChange:pe=>{pe.target.value&&X(pe.target.value)},children:[f.jsxs("option",{value:"",children:["+ ",H("addLaborClass")]}),c.map(pe=>{const Ie=J().filter(Q=>Q.category_id===pe.id);return Ie.length===0?null:f.jsx("optgroup",{label:pe.name,children:Ie.map(Q=>f.jsx("option",{value:Q.id,children:Q.name},Q.id))},pe.id)}),J().filter(pe=>!pe.category_id).length>0&&f.jsx("optgroup",{label:H("other"),children:J().filter(pe=>!pe.category_id).map(pe=>f.jsx("option",{value:pe.id,children:pe.name},pe.id))})]})}),i.size===0&&f.jsx("div",{className:"tm-no-labor-classes",children:f.jsx("p",{children:H("noLaborClassesYet")})})]}),h&&f.jsxs("div",{className:"tm-loading-labor-classes",children:[f.jsx(Bs,{size:20,className:"tm-spinner"}),f.jsx("span",{children:H("loadingLaborClasses")})]}),!m&&!h&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:H("supervision")}),f.jsx("div",{className:"tm-workers-list",children:e.map((pe,Ie)=>f.jsx(ic,{worker:pe,index:Ie,onUpdate:G,onRemove:B,t:H,roleSelect:f.jsx("div",{className:"tm-role-select",children:f.jsxs("select",{value:pe.role,onChange:Q=>G(Ie,"role",Q.target.value),children:[f.jsx("option",{value:"Foreman",children:H("foreman")}),f.jsx("option",{value:"Superintendent",children:H("superintendent")})]})})},Ie))}),f.jsx("button",{className:"tm-add-btn",onClick:ae,children:H("addSupervision")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:H("operators")}),f.jsx("div",{className:"tm-workers-list",children:t.map((pe,Ie)=>f.jsx(ic,{worker:pe,index:Ie,onUpdate:ge,onRemove:q,t:H},Ie))}),f.jsx("button",{className:"tm-add-btn",onClick:ce,children:H("addOperator")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:H("laborers")}),f.jsx("div",{className:"tm-workers-list",children:r.map((pe,Ie)=>f.jsx(ic,{worker:pe,index:Ie,onUpdate:I,onRemove:ee,t:H},Ie))}),f.jsx("button",{className:"tm-add-btn",onClick:R,children:H("addLaborer")})]})]}),g&&f.jsx(KL,{batchHours:x,setBatchHours:w,namedWorkerCount:Ue,onApply:D,onClose:()=>_(!1),t:H})]})}function GL({companyId:e,items:t,setItems:r,t:n,lang:i,onShowToast:s}){const[c,u]=y.useState(null),[m,h]=y.useState([]),[p,g]=y.useState(!1),[_,x]=y.useState(""),[w,j]=y.useState([]),[S,O]=y.useState([]),[C,A]=y.useState(!1),[k,D]=y.useState({name:"",category:"",quantity:""}),M=y.useRef(null),L=y.useRef(null);y.useEffect(()=>{c&&e&&X(c)},[c,e]),y.useEffect(()=>(!c&&M.current&&(L.current=setTimeout(()=>{M.current?.focus()},100)),()=>{L.current&&clearTimeout(L.current)}),[c]);const X=async q=>{g(!0);try{const R=await be.getMaterialsEquipmentByCategory(e,q);h(R)}catch(R){console.error("Error loading items:",R),s("Error loading items","error")}finally{g(!1)}},ne=async()=>{if(!(S.length>0))try{const q=[];for(const R of jg){const I=await be.getMaterialsEquipmentByCategory(e,R);q.push(...I.map(ee=>({...ee,category:R})))}O(q)}catch(q){console.error("Error loading all materials:",q)}},ae=q=>{if(x(q),!q.trim()){j([]);return}const R=q.toLowerCase(),I=S.filter(ee=>ee.name.toLowerCase().includes(R)||ee.category.toLowerCase().includes(R));j(I.slice(0,10))},G=q=>{const R=t.findIndex(I=>I.material_equipment_id===q.id);R>=0?r(t.map((I,ee)=>ee===R?{...I,quantity:I.quantity+1}:I)):r([...t,{material_equipment_id:q.id,name:q.name,unit:q.unit,category:q.category,quantity:1,isCustom:!1}]),s(`Added ${q.name}`,"success")},B=()=>{if(!k.name||!k.category||!k.quantity){s("Fill in all fields","error");return}r([...t,{material_equipment_id:null,custom_name:k.name,custom_category:k.category,name:k.name,category:k.category,quantity:parseFloat(k.quantity),unit:"each",isCustom:!0}]),D({name:"",category:"",quantity:""}),A(!1),u(null),s("Custom item added","success")},ce=(q,R)=>{const I=parseFloat(R)||0;I<=0?r(t.filter((ee,U)=>U!==q)):r(t.map((ee,U)=>U===q?{...ee,quantity:I}:ee))},ge=()=>{C?A(!1):c&&(u(null),A(!1))};return c||C?f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-wizard-header",style:{margin:"-1rem -1rem 1rem -1rem",padding:"0.75rem 1rem"},children:[f.jsx("button",{className:"tm-back-btn",onClick:ge,children:""}),f.jsx("h2",{children:C?"Add Custom Item":c}),f.jsxs("div",{className:"tm-item-count",children:[t.length," items"]})]}),C?f.jsxs("div",{className:"tm-custom-form",children:[f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Item Name"}),f.jsx("input",{type:"text",placeholder:"What did you use?",value:k.name,onChange:q=>D({...k,name:q.target.value}),autoFocus:!0})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Category"}),f.jsx("div",{className:"tm-category-select",children:jg.map(q=>f.jsx("button",{className:`tm-cat-chip ${k.category===q?"active":""}`,onClick:()=>D({...k,category:q}),children:q},q))})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Quantity"}),f.jsx("input",{type:"number",placeholder:"How many?",value:k.quantity,onChange:q=>D({...k,quantity:q.target.value})})]}),f.jsx("button",{className:"tm-big-btn primary",onClick:B,children:"Add Custom Item"})]}):f.jsx("div",{className:"tm-item-grid",children:p?f.jsx("div",{className:"tm-loading",children:"Loading..."}):f.jsxs(f.Fragment,{children:[m.map(q=>{const R=t.find(I=>I.material_equipment_id===q.id);return f.jsxs("button",{className:`tm-item-card ${R?"added":""}`,onClick:()=>G(q),children:[f.jsx("span",{className:"tm-item-name",children:q.name}),f.jsx("span",{className:"tm-item-unit",children:q.unit}),R&&f.jsx("span",{className:"tm-item-badge",children:R.quantity})]},q.id)}),f.jsxs("button",{className:"tm-item-card custom",onClick:()=>A(!0),children:[f.jsx("span",{className:"tm-item-name",children:"+ Add Other"}),f.jsx("span",{className:"tm-item-unit",children:"Not on list"})]})]})}),!C&&t.length>0&&f.jsx("div",{className:"tm-wizard-footer",children:f.jsxs("button",{className:"tm-big-btn primary",onClick:()=>u(null),children:["Done Adding (",t.length," items)"]})})]}):f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-field tm-search-field",children:[f.jsxs("div",{className:"tm-search-input-wrapper",children:[f.jsx(ZR,{size:18,className:"tm-search-icon"}),f.jsx("input",{ref:M,type:"text",placeholder:n("searchMaterials"),value:_,onChange:q=>ae(q.target.value),onFocus:()=>ne(),className:"tm-search-input"}),_&&f.jsx("button",{className:"tm-search-clear",onClick:()=>{x(""),j([])},children:""})]}),_&&w.length>0&&f.jsx("div",{className:"tm-search-results",children:w.map((q,R)=>{const I=t.find(ee=>ee.id===q.id);return f.jsxs("button",{className:`tm-search-result-item ${I?"added":""}`,onClick:()=>{I?ce(t.indexOf(I),I.quantity+1):r([...t,{...q,quantity:1,isCustom:!1}]),x(""),j([])},children:[f.jsx("span",{className:"tm-search-result-name",children:q.name}),f.jsx("span",{className:"tm-search-result-category",children:q.category}),I&&f.jsxs("span",{className:"tm-search-result-qty",children:["",I.quantity]})]},R)})}),_&&w.length===0&&f.jsx("div",{className:"tm-search-no-results",children:n("noSearchResults")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:n("orBrowse")}),f.jsx("div",{className:"tm-category-grid",children:jg.map(q=>{const R=t.filter(I=>I.category===q);return f.jsxs("button",{className:"tm-category-card",onClick:()=>u(q),children:[f.jsx("span",{className:"tm-cat-name",children:q}),R.length>0&&f.jsx("span",{className:"tm-cat-count",children:R.length})]},q)})})]}),t.length>0&&f.jsxs("div",{className:"tm-field",children:[f.jsxs("label",{children:["Added Items (",t.length,")"]}),f.jsx("div",{className:"tm-added-list",children:t.map((q,R)=>f.jsxs("div",{className:"tm-added-item",children:[f.jsxs("div",{className:"tm-added-info",children:[q.isCustom&&f.jsx("span",{className:"tm-custom-badge",children:"Custom"}),f.jsx("span",{className:"tm-added-name",children:q.name})]}),f.jsxs("div",{className:"tm-added-qty",children:[f.jsx("button",{onClick:()=>ce(R,q.quantity-1),children:""}),f.jsx("span",{children:q.quantity}),f.jsx("button",{onClick:()=>ce(R,q.quantity+1),children:"+"})]})]},R))})]})]})}function VL({photos:e,onPhotoAdd:t,onRemovePhoto:r,maxPhotos:n,selectedCorId:i,setSelectedCorId:s,assignableCORs:c,lang:u}){const m=$L(u);return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`tm-action-card-prominent ${e.length>0?"has-content":"needs-action"}`,children:[f.jsxs("div",{className:"tm-action-card-header",children:[f.jsx("div",{className:"tm-action-card-icon",children:f.jsx(cy,{size:24})}),f.jsxs("div",{className:"tm-action-card-title",children:[f.jsx("h4",{children:m("photoEvidence")}),f.jsx("span",{className:"tm-action-card-status",children:e.length>0?`${e.length} ${m("photosAdded")}`:m("recommendedForBilling")})]})]}),e.length>0&&f.jsx("div",{className:"tm-photo-preview-row",children:e.map(h=>f.jsxs("div",{className:"tm-photo-preview-thumb",children:[f.jsx("img",{src:h.previewUrl,alt:h.name}),h.latitude&&f.jsx("span",{className:"tm-photo-gps-badge",title:`${h.latitude.toFixed(4)}, ${h.longitude.toFixed(4)}`,children:f.jsx(uy,{size:10})}),f.jsx("button",{className:"tm-photo-remove-x",onClick:()=>r(h.id),children:""})]},h.id))}),f.jsxs("label",{className:`tm-action-card-btn ${e.length===0?"primary":""}`,children:[f.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t,style:{display:"none"}}),f.jsx(cy,{size:18}),f.jsx("span",{children:e.length>0?m("addMorePhotos"):m("addPhotos")})]})]}),f.jsxs("div",{className:`tm-action-card-prominent ${i?"has-content":""}`,children:[f.jsxs("div",{className:"tm-action-card-header",children:[f.jsx("div",{className:"tm-action-card-icon cor",children:f.jsx(QR,{size:24})}),f.jsxs("div",{className:"tm-action-card-title",children:[f.jsx("h4",{children:m("linkToChangeOrder")}),f.jsx("span",{className:"tm-action-card-status",children:i?`${m("linkedTo")}: ${c.find(h=>h.id===i)?.cor_number||""}`:m("optionalLinkCOR")})]})]}),f.jsxs("select",{value:i,onChange:h=>s(h.target.value),className:"tm-cor-select-prominent",children:[f.jsx("option",{value:"",children:m("selectCOROptional")}),c.map(h=>f.jsxs("option",{value:h.id,children:[h.cor_number,": ",h.title||"Untitled"," (",h.status,")"]},h.id))]}),c.length===0&&f.jsx("p",{className:"tm-cor-hint",children:m("noActiveCORs")})]})]})}const WL=y.lazy(()=>Ja(()=>import("./SignatureLinkGenerator-D9ZJ1BYo.js"),__vite__mapDeps([0,1,2,3,4]))),XL=y.lazy(()=>Ja(()=>import("./TMClientSignature-BBlgMF31.js"),__vite__mapDeps([5,1,2,3,4])));function ZL({step:e,setStep:t,project:r,companyId:n,workDate:i,cePcoNumber:s,notes:c,photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:p,selectedCorId:g,setSelectedCorId:_,assignableCORs:x,items:w,hasCustomLaborClasses:j,validDynamicWorkersList:S,validSupervision:O,validOperators:C,validLaborers:A,totalWorkers:k,totalRegHours:D,totalOTHours:M,submittedByName:L,setSubmittedByName:X,submittedTicket:ne,submitting:ae,submitProgress:G,clientSigned:B,setClientSigned:ce,showSignatureLinkModal:ge,setShowSignatureLinkModal:q,showOnSiteSignature:R,setShowOnSiteSignature:I,onRetryPhotoUpload:ee,t:U,lang:me,onShowToast:je}){return e===5&&ne?f.jsxs("div",{className:"tm-step-content tm-success-step",children:[f.jsxs("div",{className:"tm-success-header",children:[f.jsx("div",{className:"tm-success-icon",children:f.jsx(Wn,{size:48})}),f.jsx("h2",{children:U("tmSubmitted")}),f.jsx("p",{className:"tm-success-subtitle",children:U("ticketSavedReady")})]}),f.jsxs("div",{className:"tm-success-summary",children:[f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:k}),f.jsx("span",{className:"tm-success-stat-label",children:U("workersLabel")})]}),f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:D+M}),f.jsx("span",{className:"tm-success-stat-label",children:U("totalHours")})]}),f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),f.jsx("span",{className:"tm-success-stat-label",children:U("workDate")})]})]}),u.some(J=>J.status==="failed")&&f.jsxs("div",{className:"tm-failed-photos-section",children:[f.jsxs("div",{className:"tm-failed-photos-header",children:[f.jsx(jb,{size:18}),f.jsx("span",{children:me==="en"?`${u.filter(J=>J.status==="failed").length} photo(s) failed to upload`:`${u.filter(J=>J.status==="failed").length} foto(s) no se subieron`})]}),f.jsx("div",{className:"tm-failed-photos-grid",children:u.filter(J=>J.status==="failed").map(J=>f.jsxs("div",{className:"tm-failed-photo-item",children:[f.jsx("img",{src:J.previewUrl,alt:J.name}),f.jsx("div",{className:"tm-failed-photo-overlay",children:f.jsx("button",{className:"tm-retry-photo-btn",onClick:()=>ee(J.id,ne.id),disabled:J.status==="uploading"||J.status==="compressing",children:J.status==="uploading"||J.status==="compressing"?f.jsx(Bs,{size:16,className:"tm-spinner"}):f.jsxs(f.Fragment,{children:[f.jsx(bS,{size:16}),f.jsx("span",{children:U("retry")})]})})}),J.error&&f.jsxs("div",{className:"tm-failed-photo-error",title:J.error,children:[J.error.substring(0,20),J.error.length>20?"...":""]})]},J.id))}),f.jsxs("button",{className:"tm-retry-all-btn",onClick:async()=>{const J=u.filter(H=>H.status==="failed");for(const H of J)await ee(H.id,ne.id)},children:[f.jsx(bS,{size:16}),U("retryAllPhotos")]})]}),u.length>0&&u.every(J=>J.status==="confirmed")&&f.jsxs("div",{className:"tm-photos-success",children:[f.jsx($i,{size:16}),f.jsx("span",{children:me==="en"?`All ${u.length} photo(s) uploaded successfully`:`${u.length} foto(s) subidas exitosamente`})]}),f.jsxs("div",{className:"tm-signature-options",children:[f.jsx("h3",{children:U("getClientSignature")}),f.jsx("p",{className:"tm-signature-description",children:U("signatureDescription")}),B?f.jsxs("div",{className:"tm-signed-confirmation",children:[f.jsx(Wn,{size:32,className:"tm-signed-icon"}),f.jsx("span",{children:U("clientSignatureCollected")})]}):f.jsxs("div",{className:"tm-signature-buttons",children:[f.jsxs("button",{className:"tm-signature-option-btn primary",onClick:()=>I(!0),children:[f.jsx("div",{className:"tm-signature-option-icon",children:f.jsx(bc,{size:24})}),f.jsxs("div",{className:"tm-signature-option-text",children:[f.jsx("span",{className:"tm-signature-option-title",children:U("signNowOnSite")}),f.jsx("span",{className:"tm-signature-option-desc",children:U("clientSignsDevice")})]})]}),f.jsxs("button",{className:"tm-signature-option-btn",onClick:()=>q(!0),children:[f.jsx("div",{className:"tm-signature-option-icon",children:f.jsx(bc,{size:24})}),f.jsxs("div",{className:"tm-signature-option-text",children:[f.jsx("span",{className:"tm-signature-option-title",children:U("sendSignatureLink")}),f.jsx("span",{className:"tm-signature-option-desc",children:U("clientSignsLater")})]})]})]})]}),ge&&f.jsx(y.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading..."}),children:f.jsx(WL,{documentType:"tm_ticket",documentId:ne.id,companyId:n,projectId:r.id,project:r,documentTitle:`T&M - ${new Date(i).toLocaleDateString()}`,onClose:()=>q(!1),onShowToast:je})}),R&&f.jsx(y.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading..."}),children:f.jsx(XL,{ticketId:ne.id,ticketSummary:{workDate:i,workerCount:k,totalHours:D+M},lang:me,onSave:()=>{I(!1),ce(!0)},onClose:()=>I(!1),onShowToast:je})})]}):f.jsxs("div",{className:"tm-step-content",children:[f.jsx(VL,{photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:p,selectedCorId:g,setSelectedCorId:_,assignableCORs:x,lang:me}),f.jsx("div",{className:"tm-review-divider",children:f.jsx("span",{children:U("ticketSummary")})}),f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[""," ",U("workDate")]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:U("edit")})]}),f.jsxs("div",{className:"tm-review-row",children:[f.jsx("span",{children:new Date(i).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),s&&f.jsxs("span",{children:["CE/PCO: ",s]})]})]}),c&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(Ho,{size:16,className:"inline-icon"})," ",U("notes")]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:U("edit")})]}),f.jsx("div",{className:"tm-review-notes",children:c})]}),j&&S.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(To,{size:16,className:"inline-icon"})," ",U("workersLabel")," (",D+M," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:U("edit")})]}),f.jsx("div",{className:"tm-review-list",children:S.map((J,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsxs("div",{className:"tm-review-worker-name",children:[f.jsx("span",{className:"tm-role-badge",children:J.role})," ",J.name]}),f.jsxs("div",{className:"tm-review-worker-details",children:[J.time_started&&J.time_ended&&f.jsxs("span",{className:"tm-review-time",children:[J.time_started," - ",J.time_ended]}),f.jsxs("span",{className:"tm-review-hours",children:[J.hours||0," reg",J.overtime_hours>0?` + ${J.overtime_hours} OT`:""]})]})]},H))})]}),!j&&O.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(JR,{size:16,className:"inline-icon"})," Supervision (",O.reduce((J,H)=>J+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:U("edit")})]}),f.jsx("div",{className:"tm-review-list",children:O.map((J,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsxs("div",{className:"tm-review-worker-name",children:[f.jsx("span",{className:"tm-role-badge",children:J.role})," ",J.name]}),f.jsxs("div",{className:"tm-review-worker-details",children:[J.timeStarted&&J.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[J.timeStarted," - ",J.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[J.hours||0," reg",parseFloat(J.overtimeHours)>0?` + ${J.overtimeHours} OT`:""]})]})]},H))})]}),!j&&C.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[""," Operators (",C.reduce((J,H)=>J+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:U("edit")})]}),f.jsx("div",{className:"tm-review-list",children:C.map((J,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsx("div",{className:"tm-review-worker-name",children:J.name}),f.jsxs("div",{className:"tm-review-worker-details",children:[J.timeStarted&&J.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[J.timeStarted," - ",J.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[J.hours||0," reg",parseFloat(J.overtimeHours)>0?` + ${J.overtimeHours} OT`:""]})]})]},H))})]}),!j&&A.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(To,{size:16,className:"inline-icon"})," Laborers (",A.reduce((J,H)=>J+parseFloat(H.hours||0)+parseFloat(H.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:U("edit")})]}),f.jsx("div",{className:"tm-review-list",children:A.map((J,H)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsx("div",{className:"tm-review-worker-name",children:J.name}),f.jsxs("div",{className:"tm-review-worker-details",children:[J.timeStarted&&J.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[J.timeStarted," - ",J.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[J.hours||0," reg",parseFloat(J.overtimeHours)>0?` + ${J.overtimeHours} OT`:""]})]})]},H))})]}),w.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(eq,{size:16,className:"inline-icon"})," Materials & Equipment (",w.length," items)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(3),children:U("edit")})]}),f.jsx("div",{className:"tm-review-list",children:w.map((J,H)=>f.jsxs("div",{className:"tm-review-row",children:[f.jsxs("span",{children:[J.isCustom&&f.jsxs(f.Fragment,{children:[f.jsx(tq,{size:14,className:"inline-icon"})," "]}),J.name]}),f.jsxs("span",{children:[J.quantity," ",J.unit]})]},H))})]}),f.jsxs("div",{className:"tm-review-section tm-certification",children:[f.jsx("div",{className:"tm-review-header",children:f.jsxs("span",{children:[f.jsx(bc,{size:16,className:"inline-icon"})," ",U("submittedBy")]})}),f.jsx("input",{type:"text",className:"tm-certification-input",placeholder:U("enterYourName"),value:L,onChange:J=>X(J.target.value)}),f.jsx("p",{className:"tm-certification-note",children:U("certifyAccurate")})]})]})}const VS=()=>{const e=new Uint8Array(6);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(36)).join("")},Dd=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function QL({project:e,companyId:t,maxPhotos:r=10,onSubmit:n,onCancel:i,onShowToast:s}){const[c,u]=y.useState(1),[m,h]=y.useState(new Date().toISOString().split("T")[0]),[p,g]=y.useState(null),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState(!1),[C,A]=y.useState(""),[k,D]=y.useState(""),[M,L]=y.useState(""),[X,ne]=y.useState([]),[ae,G]=y.useState(!1),[B,ce]=y.useState(!1),[ge,q]=y.useState({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),[R,I]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}]),[ee,U]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[me,je]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[J,H]=y.useState([]),[Se,Te]=y.useState(""),[Ue,pe]=y.useState([]),[Ie,Q]=y.useState(!1),[Ee,xe]=y.useState(""),[ie,Be]=y.useState([]),[ve,Ne]=y.useState(!1),[Me,Ct]=y.useState("en"),Re=K=>kN[Me][K]||K,[It,_t]=y.useState([]),[At,Cr]=y.useState([]),[jt,Ye]=y.useState({}),[$r,bn]=y.useState(!0),[Pr,Ar]=y.useState(new Set),fe=At.length>0;y.useEffect(()=>{Rr(),st();const K=be.subscribeToCORs?.(e.id,()=>{st()});return()=>{K?.unsubscribe?.()}},[e.id]),y.useEffect(()=>{(async()=>{if(!t){bn(!1);return}try{const le=await be.getLaborClassesForField(t);_t(le.categories||[]),Cr(le.classes||[])}catch(le){console.error("Error loading labor classes:",le)}finally{bn(!1)}})()},[t]),y.useEffect(()=>{if($r||At.length===0)return;const K=new Set;ie.forEach(se=>{se.labor_class_id&&K.add(se.labor_class_id)});const le={},he=new Set;K.forEach(se=>{At.some(re=>re.id===se)&&(le[se]=[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}],he.add(se))}),Ye(se=>Object.keys(se).length===0?le:se),Ar(se=>se.size===0?he:se)},[At,ie,$r]);const st=async()=>{G(!0);try{const K=await be.getAssignableCORs(e.id);ne(K||[])}catch(K){console.error("Error loading assignable CORs:",K)}finally{G(!1)}},Jr=()=>{const{timeStarted:K,timeEnded:le,hours:he,overtimeHours:se}=ge;let re=0;if(fe){const we={};Object.entries(jt).forEach(([ze,$e])=>{we[ze]=$e.map(vt=>vt&&vt.name&&vt.name.trim()?(re++,{...vt,timeStarted:K,timeEnded:le,hours:he,overtimeHours:se}):vt)}),Ye(we)}else I(R.map(we=>we&&we.name&&we.name.trim()?(re++,{...we,timeStarted:K,timeEnded:le,hours:he,overtimeHours:se}):we)),U(ee.map(we=>we&&we.name&&we.name.trim()?(re++,{...we,timeStarted:K,timeEnded:le,hours:he,overtimeHours:se}):we)),je(me.map(we=>we&&we.name&&we.name.trim()?(re++,{...we,timeStarted:K,timeEnded:le,hours:he,overtimeHours:se}):we));ce(!1),q({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),re>0?s(Re("appliedHours").replace("{count}",re),"success"):s(Re("addWorkersFirst"),"info")},Mr=K=>{let le,he,se,re;switch(K){case"8hr":le="07:00",he="15:30",se="8",re="";break;case"10hr":le="06:00",he="16:30",se="8",re="2";break;case"4hr":le="07:00",he="11:00",se="4",re="";break;default:return}let we=0;if(fe){const ze={};Object.entries(jt).forEach(([$e,vt])=>{ze[$e]=vt.map(et=>et&&et.name&&et.name.trim()?(we++,{...et,timeStarted:le,timeEnded:he,hours:se,overtimeHours:re}):et)}),Ye(ze)}else I(ze=>ze.map($e=>$e&&$e.name&&$e.name.trim()?(we++,{...$e,timeStarted:le,timeEnded:he,hours:se,overtimeHours:re}):$e)),U(ze=>ze.map($e=>$e&&$e.name&&$e.name.trim()?(we++,{...$e,timeStarted:le,timeEnded:he,hours:se,overtimeHours:re}):$e)),je(ze=>ze.map($e=>$e&&$e.name&&$e.name.trim()?(we++,{...$e,timeStarted:le,timeEnded:he,hours:se,overtimeHours:re}):$e));we>0?s(Re("appliedHours").replace("{count}",we),"success"):s(Re("addWorkersFirst"),"info")},Rr=async()=>{try{const K=await be.getCrewCheckin(e.id);K?.workers&&Be(K.workers)}catch(K){console.error("Error loading crew:",K)}},gt=async()=>{Ne(!0);try{const K=await be.getPreviousTicketCrew(e.id,m);if(!K||K.totalWorkers===0){s(Re("noPreviousCrew"),"info");return}fe&&K.dynamicWorkers?Ye(K.dynamicWorkers):(K.supervision&&I(K.supervision),K.operators&&U(K.operators),K.laborers&&je(K.laborers));const le=new Date(K.workDate).toLocaleDateString();s(Re("loadedWorkers").replace("{count}",K.totalWorkers).replace("{date}",le),"success")}catch(K){console.error("Error loading previous crew:",K),s(Re("errorLoadingCrew"),"error")}finally{Ne(!1)}},Ut=()=>{I([...R,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},xt=(K,le,he)=>{I(R.map((se,re)=>{if(re!==K)return se;const we={...se,[le]:he};if(le==="timeStarted"||le==="timeEnded"){const ze=le==="timeStarted"?he:se.timeStarted,$e=le==="timeEnded"?he:se.timeEnded,vt=Dd(ze,$e);vt&&(we.hours=vt.hours,we.overtimeHours=vt.overtimeHours)}return we}))},_n=K=>{R.length>1?I(R.filter((le,he)=>he!==K)):I([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},li=()=>{je([...me,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},Zi=(K,le,he)=>{je(me.map((se,re)=>{if(re!==K)return se;const we={...se,[le]:he};if(le==="timeStarted"||le==="timeEnded"){const ze=le==="timeStarted"?he:se.timeStarted,$e=le==="timeEnded"?he:se.timeEnded,vt=Dd(ze,$e);vt&&(we.hours=vt.hours,we.overtimeHours=vt.overtimeHours)}return we}))},ci=K=>{me.length>1?je(me.filter((le,he)=>he!==K)):je([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},ui=()=>{U([...ee,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},ga=(K,le,he)=>{U(ee.map((se,re)=>{if(re!==K)return se;const we={...se,[le]:he};if(le==="timeStarted"||le==="timeEnded"){const ze=le==="timeStarted"?he:se.timeStarted,$e=le==="timeEnded"?he:se.timeEnded,vt=Dd(ze,$e);vt&&(we.hours=vt.hours,we.overtimeHours=vt.overtimeHours)}return we}))},xn=K=>{ee.length>1?U(ee.filter((le,he)=>he!==K)):U([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},di=K=>{Ye(le=>({...le,[K]:[...le[K]||[],{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))},va=(K,le,he,se)=>{Ye(re=>({...re,[K]:(re[K]||[]).map((we,ze)=>{if(ze!==le)return we;const $e={...we,[he]:se};if(he==="timeStarted"||he==="timeEnded"){const vt=he==="timeStarted"?se:we.timeStarted,et=he==="timeEnded"?se:we.timeEnded,ir=Dd(vt,et);ir&&($e.hours=ir.hours,$e.overtimeHours=ir.overtimeHours)}return $e})}))},sl=(K,le)=>{Ye(he=>{const se=he[K]||[];return se.length>1?{...he,[K]:se.filter((re,we)=>we!==le)}:{...he,[K]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}})},ye=K=>{K&&(Ar(le=>new Set([...le,K])),Ye(le=>!le[K]||le[K].length===0?{...le,[K]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}:le))},Un=K=>{Ar(le=>{const he=new Set(le);return he.delete(K),he}),Ye(le=>{const he={...le};return delete he[K],he})},ya=()=>At.filter(K=>!Pr.has(K.id)),ll=()=>{if(!jt||typeof jt!="object")return[];const K=[];return Object.entries(jt).forEach(([le,he])=>{if(!Array.isArray(he))return;const se=At.find(re=>re.id===le);he.forEach(re=>{re&&re.name&&re.name.trim()&&(parseFloat(re.hours)>0||parseFloat(re.overtimeHours)>0)&&K.push({name:re.name.trim(),hours:parseFloat(re.hours)||0,overtime_hours:parseFloat(re.overtimeHours)||0,time_started:re.timeStarted||null,time_ended:re.timeEnded||null,role:se?.name||"Worker",labor_class_id:le})})}),K},du=K=>{if(K.labor_class_id&&fe&&At.some(he=>he.id===K.labor_class_id)){Pr.has(K.labor_class_id)||Ar(re=>new Set([...re,K.labor_class_id]));const he=jt[K.labor_class_id]||[],se=he.findIndex(re=>!re||!re.name||!re.name.trim());if(se>=0){const re=[...he];re[se]={...re[se],name:K.name},Ye(we=>({...we,[K.labor_class_id]:re}))}else Ye(re=>({...re,[K.labor_class_id]:[...re[K.labor_class_id]||[],{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}else if(fe){const se=[...Pr][0]||At[0]?.id;if(se){Pr.has(se)||Ar(ze=>new Set([...ze,se]));const re=jt[se]||[],we=re.findIndex(ze=>!ze||!ze.name||!ze.name.trim());if(we>=0){const ze=[...re];ze[we]={...ze[we],name:K.name},Ye($e=>({...$e,[se]:ze}))}else Ye(ze=>({...ze,[se]:[...ze[se]||[],{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}}else{const he=(K.role||"").toLowerCase();if(he.includes("foreman")||he.includes("supervisor")||he.includes("superintendent")){const se=R.findIndex(re=>!re||!re.name||!re.name.trim());se>=0?(xt(se,"name",K.name),xt(se,"role",he.includes("superintendent")?"Superintendent":"Foreman")):I([...R,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:he.includes("superintendent")?"Superintendent":"Foreman"}])}else if(he.includes("operator")){const se=ee.findIndex(re=>!re||!re.name||!re.name.trim());se>=0?ga(se,"name",K.name):U([...ee,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}else{const se=me.findIndex(re=>!re||!re.name||!re.name.trim());se>=0?Zi(se,"name",K.name):je([...me,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}}s(`Added ${K.name}`,"success")},fu=async K=>{const le=Array.from(K.target.files);if(le.length===0)return;const he=r===-1?1/0:r-Ue.length;if(he<=0){s(`Photo limit reached (${r} max)`,"error"),K.target.value="";return}const se=le.slice(0,he);se.length<le.length&&s(`Only ${se.length} photo(s) added (${r} max)`,"error");const re=await BL(),we=10*1024*1024;se.forEach(ze=>{if(!ze.type.startsWith("image/")){s("Please select an image file","error");return}if(ze.size>we){s(`Photo too large: ${ze.name} (max 10MB)`,"error");return}const $e=URL.createObjectURL(ze),vt=`photo-${Date.now()}-${VS()}`;pe(et=>[...et,{id:`${Date.now()}-${VS()}`,tempId:vt,file:ze,previewUrl:$e,name:ze.name,status:"pending",attempts:0,error:null,uploadedUrl:null,latitude:re?.latitude||null,longitude:re?.longitude||null,gpsAccuracy:re?.accuracy||null}])}),K.target.value=""},Bn=(K,le)=>{pe(he=>he.map(se=>se.id===K?{...se,...le}:se))},cl=async(K,le)=>{const he=Ue.find(se=>se.id===K);if(!(!he||he.status!=="failed")){Bn(K,{status:"compressing",error:null});try{let se=he.file;try{se=await YS(he.file)}catch(we){console.warn("Compression failed, using original:",we)}Bn(K,{status:"uploading"});const re=await be.uploadPhoto(t,e.id,le,se);Bn(K,{status:"confirmed",uploadedUrl:re,attempts:he.attempts+1}),await be.updateTMTicketPhotos(le,[...Ue.filter(we=>we.uploadedUrl).map(we=>we.uploadedUrl),re]),s("Photo uploaded successfully","success")}catch(se){console.error("Retry failed:",se),Bn(K,{status:"failed",error:se.message||"Upload failed",attempts:he.attempts+1}),s("Photo retry failed","error")}}},ul=K=>{const le=Ue.find(he=>he.id===K);le?.previewUrl&&URL.revokeObjectURL(le.previewUrl),pe(Ue.filter(he=>he.id!==K))},Qi=R.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),Ji=ee.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),en=me.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),Bt=ll(),ar=fe?Bt.length:Qi.length+Ji.length+en.length,ra=fe?Bt.reduce((K,le)=>K+(le.hours||0),0):[...Qi,...Ji,...en].reduce((K,le)=>K+parseFloat(le.hours||0),0),eo=fe?Bt.reduce((K,le)=>K+(le.overtime_hours||0),0):[...Qi,...Ji,...en].reduce((K,le)=>K+parseFloat(le.overtimeHours||0),0),mu=fe?Object.values(jt||{}).flat().filter(K=>K&&K.name&&K.name.trim()):[...R.filter(K=>K&&K.name&&K.name.trim()),...ee.filter(K=>K&&K.name&&K.name.trim()),...me.filter(K=>K&&K.name&&K.name.trim())],dl=mu.length-ar,fl=()=>{if(c===1)return Se.trim().length>0;if(c===2){if(fe)return ll().length>0;const K=R.some(se=>se&&se.name&&se.name.trim()&&(parseFloat(se.hours)>0||parseFloat(se.overtimeHours)>0)),le=ee.some(se=>se&&se.name&&se.name.trim()&&(parseFloat(se.hours)>0||parseFloat(se.overtimeHours)>0)),he=me.some(se=>se&&se.name&&se.name.trim()&&(parseFloat(se.hours)>0||parseFloat(se.overtimeHours)>0));return K||le||he}return!0},Zo=(()=>{const K=[];return c===1&&!Se.trim()&&K.push(Re("descriptionRecommended")),c===2&&dl>0&&K.push(`${dl} ${Re("workersNoHours")}`),c===4&&!k.trim()&&K.push(Re("nameRequired")),K})(),$n=()=>{c<4&&u(c+1)},fi=()=>{c>1?u(c-1):i()},to=async()=>{if(!k.trim()){s("Enter your name to submit","error");return}let K=[];if(fe){if(K=ll(),K.length===0){s("Add at least one worker","error");return}}else{const le=R.filter(re=>re&&re.name&&re.name.trim()&&(parseFloat(re.hours)>0||parseFloat(re.overtimeHours)>0)),he=ee.filter(re=>re&&re.name&&re.name.trim()&&(parseFloat(re.hours)>0||parseFloat(re.overtimeHours)>0)),se=me.filter(re=>re&&re.name&&re.name.trim()&&(parseFloat(re.hours)>0||parseFloat(re.overtimeHours)>0));if(le.length===0&&he.length===0&&se.length===0){s("Add at least one worker","error");return}K=[...le.map(re=>({name:re.name.trim(),hours:parseFloat(re.hours)||0,overtime_hours:parseFloat(re.overtimeHours)||0,time_started:re.timeStarted||null,time_ended:re.timeEnded||null,role:re.role})),...he.map(re=>({name:re.name.trim(),hours:parseFloat(re.hours)||0,overtime_hours:parseFloat(re.overtimeHours)||0,time_started:re.timeStarted||null,time_ended:re.timeEnded||null,role:"Operator"})),...se.map(re=>({name:re.name.trim(),hours:parseFloat(re.hours)||0,overtime_hours:parseFloat(re.overtimeHours)||0,time_started:re.timeStarted||null,time_ended:re.timeEnded||null,role:"Laborer"}))]}Q(!0),xe("Creating ticket...");try{const le=await be.createTMTicket({project_id:e.id,work_date:m,ce_pco_number:C.trim()||null,assigned_cor_id:M||null,notes:Se.trim()||null,photos:[],created_by_name:k.trim()});if(!le||!le.id)throw new Error("Failed to create ticket - no ticket ID returned");let he=[];const se=Ue.filter(re=>re.status==="pending");if(se.length>0){xe(`Compressing ${se.length} photo${se.length>1?"s":""}...`),se.forEach(et=>Bn(et.id,{status:"compressing"}));const re=await Promise.all(se.map(async et=>{try{const ir=await YS(et.file);return{...et,file:ir}}catch(ir){return console.warn(`Failed to compress photo ${et.name}, using original:`,ir),et}}));xe(`Uploading ${se.length} photo${se.length>1?"s":""}...`),se.forEach(et=>Bn(et.id,{status:"uploading"}));let we=0,ze=0;const $e=re.map(async et=>{try{const ir=await be.uploadPhoto(t,e.id,le.id,et.file);return we++,xe(`Uploading ${we}/${se.length} photos...`),Bn(et.id,{status:"confirmed",uploadedUrl:ir,attempts:(et.attempts||0)+1}),{id:et.id,url:ir}}catch(ir){return console.error(`Photo ${et.name} upload failed:`,ir),ze++,Bn(et.id,{status:"failed",error:ir.message||"Upload failed",attempts:(et.attempts||0)+1}),{id:et.id,url:null,error:ir.message}}});he=(await Promise.all($e)).filter(et=>et.url!==null).map(et=>et.url),ze>0&&he.length>0?s(`${he.length}/${se.length} photos uploaded. ${ze} failed - can retry later.`,"warning"):ze>0&&he.length===0&&s(`All ${ze} photos failed to upload - can retry after submission.`,"error")}if(he.length>0){xe("Saving photos...");const re={};for(const we of results)if(we.url){const ze=se.find($e=>$e.id===we.id);ze?.latitude&&ze?.longitude&&(re[we.url]={lat:ze.latitude,lng:ze.longitude,accuracy:ze.gpsAccuracy})}await be.updateTMTicketPhotos(le.id,he,Object.keys(re).length>0?re:null)}if(xe("Saving workers..."),await be.addTMWorkers(le.id,K),J.length>0&&(xe("Saving materials..."),await be.addTMItems(le.id,J.map(re=>({material_equipment_id:re.material_equipment_id,custom_name:re.custom_name||null,custom_category:re.custom_category||null,quantity:re.quantity})))),M){xe("Importing to COR...");try{await be.importTicketDataToCOR(le.id,M,t,e.work_type||"demolition",e.job_type||"standard")}catch(re){console.error("Error importing to COR:",re);try{await be.markImportFailed(le.id,M,re?.message||"Import failed")}catch(we){console.error("Error marking import failed:",we)}s("T&M saved. COR data sync failed - retry from ticket list.","warning")}}Ue.forEach(re=>{re.previewUrl&&URL.revokeObjectURL(re.previewUrl)}),g(le),s("T&M submitted!","success"),u(5)}catch(le){console.error("Error submitting T&M:",le),s("Error submitting T&M","error")}finally{Q(!1),xe("")}};return f.jsxs("div",{className:"tm-wizard",children:[f.jsxs("div",{className:"tm-wizard-header",children:[c<5?f.jsx("button",{className:"tm-back-btn",onClick:fi,children:""}):f.jsx("div",{className:"tm-success-check",children:f.jsx(Wn,{size:24})}),f.jsxs("h2",{children:[c===1&&Re("workInfo"),c===2&&Re("crewHours"),c===3&&Re("materialsEquipment"),c===4&&Re("review"),c===5&&Re("submitted")]}),f.jsxs("div",{className:"tm-header-right",children:[c<4&&f.jsxs("button",{className:"tm-lang-toggle",onClick:()=>Ct(Me==="en"?"es":"en"),title:Re(Me==="en"?"switchToSpanish":"switchToEnglish"),children:[f.jsx(rq,{size:16}),Me==="en"?"ES":"EN"]}),c<5&&f.jsxs("div",{className:"tm-step-dots",children:[f.jsx("span",{className:`tm-dot ${c>=1?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=2?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=3?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=4?"active":""}`})]})]})]}),c===1&&f.jsx(HL,{project:e,workDate:m,setWorkDate:h,cePcoNumber:C,setCePcoNumber:A,notes:Se,setNotes:Te,t:Re,lang:Me}),c===2&&f.jsx(YL,{supervision:R,operators:ee,laborers:me,dynamicWorkers:jt,activeLaborClassIds:Pr,setActiveLaborClassIds:Ar,laborCategories:It,laborClasses:At,hasCustomLaborClasses:fe,loadingLaborClasses:$r,todaysCrew:ie,showBatchHoursModal:B,setShowBatchHoursModal:ce,batchHours:ge,setBatchHours:q,loadingPreviousCrew:ve,namedWorkers:mu,workersNeedingHours:dl,totalRegHours:ra,totalOTHours:eo,onLoadPreviousCrew:gt,onApplyBatchHours:Jr,onApplyInlinePreset:Mr,onAddCrewWorker:du,onActivateLaborClass:ye,onDeactivateLaborClass:Un,addSupervision:Ut,updateSupervision:xt,removeSupervision:_n,addOperator:ui,updateOperator:ga,removeOperator:xn,addLaborer:li,updateLaborer:Zi,removeLaborer:ci,addDynamicWorker:di,updateDynamicWorker:va,removeDynamicWorker:sl,getInactiveLaborClasses:ya,t:Re,lang:Me,onShowToast:s}),c===3&&f.jsx(GL,{companyId:t,items:J,setItems:H,t:Re,lang:Me,onShowToast:s}),(c===4||c===5)&&f.jsx(ZL,{step:c,setStep:u,project:e,companyId:t,workDate:m,cePcoNumber:C,notes:Se,photos:Ue,onPhotoAdd:fu,onRemovePhoto:ul,maxPhotos:r,selectedCorId:M,setSelectedCorId:L,assignableCORs:X,items:J,hasCustomLaborClasses:fe,validDynamicWorkersList:Bt,validSupervision:Qi,validOperators:Ji,validLaborers:en,totalWorkers:ar,totalRegHours:ra,totalOTHours:eo,submittedByName:k,setSubmittedByName:D,submittedTicket:p,submitting:Ie,submitProgress:Ee,clientSigned:S,setClientSigned:O,showSignatureLinkModal:_,setShowSignatureLinkModal:x,showOnSiteSignature:w,setShowOnSiteSignature:j,onRetryPhotoUpload:cl,t:Re,lang:Me,onShowToast:s}),c<5&&f.jsxs("div",{className:"tm-wizard-footer",children:[Zo.length>0&&f.jsxs("div",{className:"tm-validation-summary",children:[f.jsx(jb,{size:16}),f.jsx("span",{children:Zo[0]})]}),c===1&&f.jsx("button",{className:"tm-big-btn primary",onClick:$n,disabled:!fl(),children:Re("nextCrew")}),c===2&&f.jsxs("button",{className:"tm-big-btn primary",onClick:$n,disabled:!fl(),children:[Re("nextMaterials")," (",ar," ",Re(ar===1?"worker":"workers_plural"),", ",ra+eo," hrs)"]}),c===3&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"tm-big-btn primary",onClick:$n,children:[Re("reviewAndSubmit")," (",J.length," ",J.length===1?Re("item"):Re("items_plural"),")"]}),f.jsx("button",{className:"tm-skip-btn",onClick:$n,children:Re("skipNoMaterials")})]}),c===4&&f.jsx("button",{className:`tm-big-btn submit ${Ie?"submitting":""} ${k.trim()?"ready":"needs-name"}`,onClick:to,disabled:Ie||!k.trim(),children:Ie?f.jsxs(f.Fragment,{children:[f.jsx(Bs,{size:20,className:"tm-spinner"}),f.jsx("span",{className:"tm-submit-text",children:Ee||Re("submitting")})]}):k.trim()?f.jsxs(f.Fragment,{children:[f.jsx($i,{size:20}),f.jsx("span",{children:Re("submitTM")})]}):f.jsxs(f.Fragment,{children:[f.jsx(bc,{size:18}),f.jsx("span",{children:Re("enterNameToSubmit")})]})})]}),c===5&&f.jsxs("div",{className:"tm-wizard-footer",children:[f.jsxs("button",{className:"tm-big-btn primary",onClick:n,children:[f.jsx($i,{size:20}),f.jsx("span",{children:Re("done")})]}),f.jsx("button",{className:"tm-skip-btn",onClick:n,children:Re("skipSignature")})]})]})}function JL({project:e,companyId:t,onShowToast:r}){const[n,i]=y.useState([]),[s,c]=y.useState(!0),[u,m]=y.useState(!1),[h,p]=y.useState(!1),[g,_]=y.useState({name:"",role:"",labor_class_id:null}),[x,w]=y.useState([]),[j,S]=y.useState(!0),[O,C]=y.useState([]),[A,k]=y.useState([]),[D,M]=y.useState(!0),L=["Foreman","Laborer","Supervisor","Operator"],X=y.useCallback(async()=>{try{const U=await be.getCrewCheckin(e.id);U?.workers&&i(U.workers)}catch(U){console.error("Error loading crew:",U),r?.("Error loading today's crew","error")}finally{c(!1)}},[e?.id,r]),ne=y.useCallback(async()=>{try{const U=await be.getRecentWorkers(e.id,30);w(U)}catch(U){console.error("Error loading recent workers:",U)}finally{S(!1)}},[e?.id]),ae=y.useCallback(async()=>{try{const U=await be.getLaborClassesForField(t);C(U.categories||[]),k(U.classes||[]),U.classes&&U.classes.length>0&&_(me=>({...me,role:U.classes[0].name,labor_class_id:U.classes[0].id}))}catch(U){console.error("Error loading labor classes:",U),r?.("Using default roles - custom labor classes unavailable","info")}finally{M(!1)}},[t,r]);y.useEffect(()=>{e?.id&&(X(),ne(),t?ae():M(!1))},[e?.id,t,X,ne,ae]);const G=U=>{const me=A.find(je=>je.id===U);_(me?{...g,role:me.name,labor_class_id:me.id}:{...g,role:U,labor_class_id:null})},B=async()=>{if(!g.name.trim()){r("Enter worker name","error");return}if(!g.role){r("Select a role","error");return}if(n.find(U=>U.name.toLowerCase()===g.name.trim().toLowerCase())){r("Worker already added","error");return}m(!0);try{const U=[...n,{name:g.name.trim(),role:g.role,labor_class_id:g.labor_class_id}];await be.saveCrewCheckin(e.id,U),i(U),_({...g,name:""}),p(!1),r("Crew member added","success")}catch(U){console.error("Error adding worker:",U),r("Error adding crew member","error")}finally{m(!1)}},ce=async U=>{m(!0);try{const me=n.filter(je=>je.name.toLowerCase()!==U.toLowerCase());await be.saveCrewCheckin(e.id,me),i(me),r("Crew member removed","success")}catch(me){console.error("Error removing worker:",me),r("Error removing crew member","error")}finally{m(!1)}},ge=async U=>{if(n.find(me=>me.name.toLowerCase()===U.name.toLowerCase())){r("Already checked in","info");return}m(!0);try{const me=[...n,{name:U.name,role:U.role,labor_class_id:U.labor_class_id}];await be.saveCrewCheckin(e.id,me),i(me),r(`${U.name} checked in`,"success")}catch(me){console.error("Error adding worker:",me),r("Error adding crew member","error")}finally{m(!1)}},q=x.filter(U=>!n.find(me=>me.name.toLowerCase()===U.name.toLowerCase())),R=new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),I=()=>{const U={};O.forEach(je=>{U[je.id]={name:je.name,classes:A.filter(J=>J.category_id===je.id)}});const me=A.filter(je=>!je.category_id);return me.length>0&&(U.uncategorized={name:"Other",classes:me}),U},ee=A.length>0;return s||D?f.jsxs("div",{className:"crew-checkin",children:[f.jsxs("div",{className:"crew-header",children:[f.jsxs("h3",{children:[f.jsx(To,{size:18,className:"inline-icon"})," Today's Crew"]}),f.jsx("span",{className:"crew-date",children:R})]}),f.jsx("div",{className:"crew-loading",children:"Loading..."})]}):f.jsxs("div",{className:"crew-checkin",children:[f.jsxs("div",{className:"crew-header",children:[f.jsxs("h3",{children:[f.jsx(To,{size:18,className:"inline-icon"})," Today's Crew"]}),f.jsx("span",{className:"crew-date",children:R})]}),n.length===0?f.jsxs("div",{className:"crew-empty",children:[f.jsx("p",{children:"No crew checked in yet"}),f.jsx("p",{className:"crew-empty-hint",children:"Add your crew for the day"})]}):f.jsx("div",{className:"crew-list",children:n.map(U=>f.jsxs("div",{className:"crew-member",children:[f.jsxs("div",{className:"crew-member-info",children:[f.jsx("span",{className:"crew-member-name",children:U.name}),f.jsx("span",{className:`crew-member-role ${(U.role||"laborer").toLowerCase().replace(/\s+/g,"-")}`,children:U.role})]}),f.jsx("button",{className:"crew-remove-btn",onClick:()=>ce(U.name),disabled:u,children:""})]},U.name))}),!j&&q.length>0&&f.jsxs("div",{className:"crew-quick-add",children:[f.jsx("div",{className:"crew-quick-add-header",children:f.jsx("span",{children:"Tap to add"})}),f.jsx("div",{className:"crew-quick-add-grid",children:q.map(U=>f.jsxs("button",{className:"crew-quick-add-btn",onClick:()=>ge(U),disabled:u,children:[f.jsx("span",{className:"crew-quick-add-name",children:U.name}),f.jsx("span",{className:"crew-quick-add-role",children:U.role})]},U.name))})]}),h?f.jsxs("div",{className:"crew-add-form",children:[f.jsx("input",{type:"text",value:g.name,onChange:U=>_({...g,name:U.target.value}),placeholder:"Name",autoFocus:!0}),f.jsx("select",{value:g.labor_class_id||g.role,onChange:U=>G(U.target.value),children:ee?Object.entries(I()).map(([U,me])=>f.jsx("optgroup",{label:me.name,children:me.classes.map(je=>f.jsx("option",{value:je.id,children:je.name},je.id))},U)):L.map(U=>f.jsx("option",{value:U,children:U},U))}),f.jsxs("div",{className:"crew-add-buttons",children:[f.jsx("button",{className:"crew-add-confirm",onClick:B,disabled:u,children:u?"...":"Add"}),f.jsx("button",{className:"crew-add-cancel",onClick:()=>{p(!1),_({name:"",role:A[0]?.name||"Laborer",labor_class_id:A[0]?.id||null})},children:"Cancel"})]})]}):f.jsxs("button",{className:"crew-add-btn",onClick:()=>p(!0),children:[f.jsx(HA,{size:18}),f.jsx("span",{children:"Add New Person"})]}),f.jsxs("div",{className:"crew-count",children:[n.length," ",n.length===1?"person":"people"," on site"]})]})}function e3({project:e,onShowToast:t,onClose:r}){const[n,i]=y.useState(!0),[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(""),[g,_]=y.useState("");y.useEffect(()=>{e?.id&&x()},[e?.id]);const x=async()=>{try{const O=await be.getDailyReport(e.id);if(O)m(O),p(O.field_notes||""),_(O.issues||"");else{const C=await be.compileDailyReport(e.id);m({...C,status:"draft"})}}catch(O){console.error("Error loading report:",O),t("Error loading report","error")}finally{i(!1)}},w=async()=>{if(!P){t("Demo Mode: Report saved locally only - won't reach office","info"),r();return}c(!0);try{await be.saveDailyReport(e.id,{field_notes:h,issues:g}),await be.submitDailyReport(e.id,"Field")?(t("Daily report submitted!","success"),r()):t("Report not sent - check connection","error")}catch(O){console.error("Error submitting report:",O),t("Error submitting report","error")}finally{c(!1)}},j=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});if(n)return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsx("h2",{children:"Daily Report"})]}),f.jsx("div",{className:"daily-report-loading",children:"Compiling report..."})]});if(!u)return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsx("h2",{children:"Daily Report"})]}),f.jsxs("div",{className:"daily-report-error",children:[f.jsx("p",{children:"Unable to load report data."}),f.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Retry"})]})]});const S=u.status==="submitted";return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsxs("div",{children:[f.jsx("h2",{children:"Daily Report"}),f.jsx("p",{className:"daily-report-date",children:j})]})]}),S&&f.jsxs("div",{className:"daily-report-submitted-banner",children:[" Submitted ",new Date(u.submitted_at).toLocaleTimeString()]}),f.jsxs("div",{className:"daily-report-content",children:[f.jsxs("div",{className:"daily-report-summary",children:[f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.crew_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"Crew on Site"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.tasks_completed||0}),f.jsx("div",{className:"daily-report-card-label",children:"Tasks Done"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.tm_tickets_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"T&M Tickets"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.photos_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"Photos"})]})]}),u.crew_list?.length>0&&f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(To,{size:18,className:"inline-icon"})," Crew"]}),f.jsx("div",{className:"daily-report-crew",children:u.crew_list.map((O,C)=>f.jsxs("div",{className:"daily-report-crew-item",children:[f.jsx("span",{children:O.name}),f.jsx("span",{className:"daily-report-crew-role",children:O.role})]},C))})]}),u.completed_tasks?.length>0&&f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(nq,{size:18,className:"inline-icon"})," Completed Today"]}),f.jsx("ul",{className:"daily-report-tasks",children:u.completed_tasks.map((O,C)=>f.jsxs("li",{children:[O.name,O.group&&f.jsx("span",{className:"daily-report-task-group",children:O.group})]},C))})]}),f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(Ho,{size:18,className:"inline-icon"})," Notes"]}),f.jsx("textarea",{value:h,onChange:O=>p(O.target.value),placeholder:"Any notes about today's work...",rows:3,disabled:S})]}),f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(om,{size:18,className:"inline-icon"})," Issues / Concerns"]}),f.jsx("textarea",{value:g,onChange:O=>_(O.target.value),placeholder:"Any problems, delays, or concerns...",rows:3,disabled:S})]})]}),!S&&f.jsxs("div",{className:"daily-report-footer",children:[f.jsx("button",{className:"btn btn-primary daily-report-submit",onClick:w,disabled:s,children:s?"Submitting...":f.jsxs(f.Fragment,{children:[f.jsx(aq,{size:16,className:"inline-icon"})," Submit Report"]})}),f.jsx("p",{className:"daily-report-hint",children:"This will be sent to the office"})]})]})}function t3({project:e,companyId:t,user:r,onClose:n,onReportCreated:i}){const[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(1),[g,_]=y.useState(new Date().toISOString().split("T")[0]),[x,w]=y.useState(new Date().toTimeString().split(" ")[0].substring(0,5)),[j,S]=y.useState(""),[O,C]=y.useState(""),[A,k]=y.useState("minor"),[D,M]=y.useState(""),[L,X]=y.useState(""),[ne,ae]=y.useState(""),[G,B]=y.useState(""),[ce,ge]=y.useState(""),[q,R]=y.useState(""),[I,ee]=y.useState(""),[U,me]=y.useState(r?.name||""),[je,J]=y.useState(""),[H,Se]=y.useState(""),[Te,Ue]=y.useState(r?.email||""),[pe,Ie]=y.useState([]),[Q,Ee]=y.useState(""),[xe,ie]=y.useState(""),[Be,ve]=y.useState(""),[Ne,Me]=y.useState(""),[Ct,Re]=y.useState(!1),[It,_t]=y.useState(""),[At,Cr]=y.useState(""),[jt,Ye]=y.useState(!1),[$r,bn]=y.useState(""),[Pr,Ar]=y.useState(""),[fe,st]=y.useState(""),[Jr,Mr]=y.useState(""),[Rr,gt]=y.useState(!1),[Ut,xt]=y.useState(!1),[_n,li]=y.useState(0),[Zi,ci]=y.useState(0),ui=()=>{if(!Q.trim()){m({type:"error",message:"Please enter witness name"});return}const ye={name:Q,phone:xe,email:Be,testimony:Ne};Ie([...pe,ye]),Ee(""),ie(""),ve(""),Me(""),m({type:"success",message:"Witness added"})},ga=ye=>{Ie(pe.filter((Un,ya)=>ya!==ye))},xn=ye=>{switch(ye){case 1:if(!j.trim()||!O.trim())return m({type:"error",message:"Please fill in all incident details"}),!1;break;case 2:if(!L.trim()||!q.trim())return m({type:"error",message:"Please fill in employee name and job title"}),!1;break;case 3:if(!U.trim()||!je.trim())return m({type:"error",message:"Please fill in supervisor name and title"}),!1;break}return!0},di=()=>{xn(h)&&p(h+1)},va=()=>{p(h-1)},sl=async()=>{if(xn(h)){if(!P){m({type:"info",message:"Demo Mode: Report saved locally only - won't reach office"}),setTimeout(()=>{n()},1500);return}c(!0);try{const ye={project_id:e.id,company_id:t,incident_date:g,incident_time:x,incident_location:j,incident_description:O,injury_type:A,body_part_affected:D||null,employee_name:L,employee_phone:ne||null,employee_email:G||null,employee_address:ce||null,employee_job_title:q,employee_hire_date:I||null,medical_treatment_required:Ct,medical_facility_name:It||null,medical_facility_address:At||null,hospitalized:jt,reported_by_name:U,reported_by_title:je,reported_by_phone:H||null,reported_by_email:Te||null,witnesses:pe,immediate_actions_taken:$r||null,corrective_actions_planned:Pr||null,safety_equipment_used:fe||null,safety_equipment_failed:Jr||null,osha_recordable:Rr,workers_comp_claim:Ut,days_away_from_work:parseInt(_n)||0,restricted_work_days:parseInt(Zi)||0,status:"reported",created_by:r?.id},Un=await be.createInjuryReport(ye);m({type:"success",message:"Injury report submitted successfully"}),i&&i(Un),setTimeout(()=>{n()},1500)}catch(ye){console.error("Error submitting injury report:",ye),m({type:"error",message:"Failed to submit injury report"})}finally{c(!1)}}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"modal-overlay",onClick:n,children:f.jsxs("div",{className:"modal-content injury-report-modal",onClick:ye=>ye.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Workplace Injury/Incident Report"}),f.jsx("button",{className:"close-btn",onClick:n,children:""})]}),f.jsxs("div",{className:"progress-steps",children:[f.jsx("div",{className:`step ${h>=1?"active":""}`,children:"1. Incident"}),f.jsx("div",{className:`step ${h>=2?"active":""}`,children:"2. Employee"}),f.jsx("div",{className:`step ${h>=3?"active":""}`,children:"3. Supervisor"}),f.jsx("div",{className:`step ${h>=4?"active":""}`,children:"4. Witnesses"}),f.jsx("div",{className:`step ${h>=5?"active":""}`,children:"5. Medical & Safety"})]}),f.jsxs("div",{className:"modal-body",children:[h===1&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Incident Details"}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Date of Incident *"}),f.jsx("input",{type:"date",value:g,onChange:ye=>_(ye.target.value),max:new Date().toISOString().split("T")[0]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Time of Incident *"}),f.jsx("input",{type:"time",value:x,onChange:ye=>w(ye.target.value)})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Location on Site *"}),f.jsx("input",{type:"text",value:j,onChange:ye=>S(ye.target.value),placeholder:"e.g., Floor 2, near elevator shaft"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Incident Description *"}),f.jsx("textarea",{value:O,onChange:ye=>C(ye.target.value),rows:4,placeholder:"Describe what happened in detail..."})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Injury Type *"}),f.jsxs("select",{value:A,onChange:ye=>k(ye.target.value),children:[f.jsx("option",{value:"minor",children:"Minor Injury"}),f.jsx("option",{value:"serious",children:"Serious Injury"}),f.jsx("option",{value:"critical",children:"Critical Injury"}),f.jsx("option",{value:"near_miss",children:"Near Miss (No Injury)"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Body Part Affected"}),f.jsx("input",{type:"text",value:D,onChange:ye=>M(ye.target.value),placeholder:"e.g., Left hand, lower back"})]})]})]}),h===2&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Injured Employee Information"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Full Name *"}),f.jsx("input",{type:"text",value:L,onChange:ye=>X(ye.target.value),placeholder:"First and last name"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Phone Number"}),f.jsx("input",{type:"tel",value:ne,onChange:ye=>ae(ye.target.value),placeholder:"(555) 123-4567"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email Address"}),f.jsx("input",{type:"email",value:G,onChange:ye=>B(ye.target.value),placeholder:"email@example.com"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Home Address"}),f.jsx("input",{type:"text",value:ce,onChange:ye=>ge(ye.target.value),placeholder:"Street address, city, state, zip"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Job Title *"}),f.jsx("input",{type:"text",value:q,onChange:ye=>R(ye.target.value),placeholder:"e.g., Carpenter, Electrician"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Hire Date"}),f.jsx("input",{type:"date",value:I,onChange:ye=>ee(ye.target.value)})]})]})]}),h===3&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Foreman/Supervisor Making Report"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Name *"}),f.jsx("input",{type:"text",value:U,onChange:ye=>me(ye.target.value),placeholder:"Full name"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Title *"}),f.jsx("input",{type:"text",value:je,onChange:ye=>J(ye.target.value),placeholder:"e.g., Site Foreman, Project Manager"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Phone Number"}),f.jsx("input",{type:"tel",value:H,onChange:ye=>Se(ye.target.value),placeholder:"(555) 123-4567"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Email Address"}),f.jsx("input",{type:"email",value:Te,onChange:ye=>Ue(ye.target.value),placeholder:"email@example.com"})]})]}),h===4&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Witness Testimonies (Optional)"}),pe.length>0&&f.jsx("div",{className:"witnesses-list",children:pe.map((ye,Un)=>f.jsxs("div",{className:"witness-item",children:[f.jsxs("div",{className:"witness-info",children:[f.jsx("strong",{children:ye.name}),ye.phone&&f.jsxs("span",{children:["  ",ye.phone]}),ye.testimony&&f.jsxs("p",{className:"witness-testimony",children:['"',ye.testimony,'"']})]}),f.jsx("button",{className:"btn-danger btn-small",onClick:()=>ga(Un),children:"Remove"})]},Un))}),f.jsxs("div",{className:"add-witness-form",children:[f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Witness Name"}),f.jsx("input",{type:"text",value:Q,onChange:ye=>Ee(ye.target.value),placeholder:"Full name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Phone Number"}),f.jsx("input",{type:"tel",value:xe,onChange:ye=>ie(ye.target.value),placeholder:"(555) 123-4567"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email Address"}),f.jsx("input",{type:"email",value:Be,onChange:ye=>ve(ye.target.value),placeholder:"email@example.com"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Witness Testimony"}),f.jsx("textarea",{value:Ne,onChange:ye=>Me(ye.target.value),rows:3,placeholder:"What did the witness see or hear?"})]}),f.jsx("button",{className:"btn-secondary",onClick:ui,children:"+ Add Witness"})]})]}),h===5&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Medical Treatment & Safety"}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:Ct,onChange:ye=>Re(ye.target.checked)}),"Medical treatment required"]})}),Ct&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Medical Facility Name"}),f.jsx("input",{type:"text",value:It,onChange:ye=>_t(ye.target.value),placeholder:"Hospital or clinic name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Medical Facility Address"}),f.jsx("input",{type:"text",value:At,onChange:ye=>Cr(ye.target.value),placeholder:"Street address"})]}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:jt,onChange:ye=>Ye(ye.target.checked)}),"Employee was hospitalized"]})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Immediate Actions Taken"}),f.jsx("textarea",{value:$r,onChange:ye=>bn(ye.target.value),rows:2,placeholder:"What was done immediately after the incident?"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Corrective Actions Planned"}),f.jsx("textarea",{value:Pr,onChange:ye=>Ar(ye.target.value),rows:2,placeholder:"What will be done to prevent this in the future?"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Safety Equipment Used"}),f.jsx("input",{type:"text",value:fe,onChange:ye=>st(ye.target.value),placeholder:"e.g., Hard hat, gloves, harness"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Safety Equipment Failed"}),f.jsx("input",{type:"text",value:Jr,onChange:ye=>Mr(ye.target.value),placeholder:"Equipment that failed, if any"})]})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Days Away From Work"}),f.jsx("input",{type:"number",min:"0",value:_n,onChange:ye=>li(ye.target.value)})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Restricted Work Days"}),f.jsx("input",{type:"number",min:"0",value:Zi,onChange:ye=>ci(ye.target.value)})]})]}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:Rr,onChange:ye=>gt(ye.target.checked)}),"OSHA Recordable Incident"]})}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:Ut,onChange:ye=>xt(ye.target.checked)}),"Workers' Compensation Claim Filed"]})})]})]}),f.jsx("div",{className:"modal-footer",children:f.jsxs("div",{className:"form-actions",children:[h>1&&f.jsx("button",{className:"btn-secondary",onClick:va,children:" Back"}),f.jsx("button",{className:"btn-secondary",onClick:n,children:"Cancel"}),h<5?f.jsx("button",{className:"btn-primary",onClick:di,children:"Next "}):f.jsx("button",{className:"btn-primary",onClick:sl,disabled:s,children:s?"Submitting...":"Submit Report"})]})})]})}),u&&f.jsx(NN,{message:u.message,type:u.type,onClose:()=>m(null)}),f.jsx("style",{children:`
        .injury-report-modal {
          max-width: 800px;
          max-height: 90vh;
          overflow-y: auto;
        }

        .progress-steps {
          display: flex;
          justify-content: space-between;
          padding: 1rem 1.5rem;
          border-bottom: 1px solid var(--border-color);
          background-color: var(--bg-elevated);
          overflow-x: auto;
        }

        .progress-steps .step {
          font-size: 0.875rem;
          color: var(--text-muted);
          font-weight: 500;
          white-space: nowrap;
          padding: 0.5rem;
        }

        .progress-steps .step.active {
          color: var(--accent-primary);
          font-weight: 600;
        }

        .form-step h3 {
          margin-top: 0;
          margin-bottom: 1.5rem;
          color: var(--text-primary);
          font-size: 1.25rem;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1rem;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: block;
          margin-bottom: 0.5rem;
          font-weight: 500;
          color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          width: 100%;
          padding: 0.5rem;
          border: 1px solid var(--border-color);
          border-radius: 4px;
          font-size: 1rem;
          background: var(--bg-card);
          color: var(--text-primary);
        }

        .form-group textarea {
          resize: vertical;
        }

        .checkbox-group label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-weight: normal;
          cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
          width: auto;
          margin: 0;
        }

        .witnesses-list {
          margin-bottom: 1.5rem;
        }

        .witness-item {
          border: 1px solid var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          margin-bottom: 0.5rem;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .witness-info {
          flex: 1;
          color: var(--text-primary);
        }

        .witness-testimony {
          margin-top: 0.5rem;
          color: var(--text-secondary);
          font-style: italic;
          font-size: 0.875rem;
        }

        .add-witness-form {
          border: 2px dashed var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          background-color: var(--bg-elevated);
        }

        .modal-footer {
          border-top: 1px solid var(--border-color);
          padding: 1rem 1.5rem;
        }

        .form-actions {
          display: flex;
          justify-content: space-between;
          gap: 0.5rem;
        }

        .btn-primary,
        .btn-secondary,
        .btn-danger {
          padding: 0.5rem 1rem;
          border-radius: 6px;
          font-weight: 500;
          cursor: pointer;
          border: none;
        }

        .btn-primary {
          background-color: var(--primary-color, #3b82f6);
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          opacity: 0.9;
        }

        .btn-primary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .btn-secondary {
          background-color: var(--bg-elevated);
          color: var(--text-primary);
          border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
          background-color: var(--bg-tertiary);
        }

        .btn-danger {
          background-color: #ef4444;
          color: white;
        }

        .btn-danger:hover {
          background-color: #dc2626;
        }

        .btn-small {
          padding: 0.25rem 0.75rem;
          font-size: 0.875rem;
        }

        @media (max-width: 768px) {
          .injury-report-modal {
            max-width: 100%;
            height: 100vh;
            max-height: 100vh;
            border-radius: 0;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .progress-steps .step {
            font-size: 0.75rem;
            padding: 0.25rem;
          }
        }
      `})]})}const nf=[{value:"concrete",label:"Concrete",icon:""},{value:"trash",label:"Trash",icon:""},{value:"metals",label:"Metals",icon:""},{value:"hazardous_waste",label:"Hazardous",icon:""}],r3=e=>nf.find(t=>t.value===e)||{label:e,icon:""};function n3({project:e,user:t=null,date:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState([]),[m,h]=y.useState(!0),[p,g]=y.useState(!1),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState({type:"concrete",count:1}),C=new Date(r).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});y.useEffect(()=>{A(),k()},[e.id,r]);const A=async()=>{try{h(!0);const B=await be.getDisposalLoads(e.id,r);s(B||[])}catch(B){console.error("Error loading disposal loads:",B)}finally{h(!1)}},k=async()=>{try{const ce=(await be.getDisposalLoadsHistory(e.id,14)||[]).filter(q=>q.load_date!==r).reduce((q,R)=>(q[R.load_date]||(q[R.load_date]=[]),q[R.load_date].push(R),q),{}),ge=Object.entries(ce).map(([q,R])=>({date:q,loads:R,totalLoads:R.reduce((I,ee)=>I+ee.load_count,0)})).sort((q,R)=>new Date(R.date)-new Date(q.date));u(ge)}catch(B){console.error("Error loading disposal history:",B)}},D=async()=>{if(!(S.count<1)){g(!0);try{await be.addDisposalLoad(e.id,t?.id||null,r,S.type,S.count),await A(),O({type:"concrete",count:1}),x(!1),n?.("Disposal load added","success")}catch(B){console.error("Error adding disposal load:",B),n?.("Error adding load","error")}finally{g(!1)}}},M=async B=>{g(!0);try{await be.deleteDisposalLoad(B),await A(),n?.("Load removed","success")}catch(ce){console.error("Error deleting disposal load:",ce),n?.("Error removing load","error")}finally{g(!1)}},L=async B=>{g(!0);try{await be.addDisposalLoad(e.id,t?.id||null,r,B,1),await A(),n?.("Load added","success")}catch(ce){console.error("Error adding disposal load:",ce),n?.("Error adding load","error")}finally{g(!1)}},X=async B=>{g(!0);try{await be.updateDisposalLoad(B.id,B.load_type,B.load_count+1),await A()}catch(ce){console.error("Error updating load:",ce),n?.("Error updating load","error")}finally{g(!1)}},ne=async B=>{if(B.load_count<=1){await M(B.id);return}g(!0);try{await be.updateDisposalLoad(B.id,B.load_type,B.load_count-1),await A()}catch(ce){console.error("Error updating load:",ce),n?.("Error updating load","error")}finally{g(!1)}},ae=i.reduce((B,ce)=>(B[ce.load_type]||(B[ce.load_type]={items:[],total:0}),B[ce.load_type].items.push(ce),B[ce.load_type].total+=ce.load_count,B),{}),G=i.reduce((B,ce)=>B+ce.load_count,0);return m?f.jsxs("div",{className:"disposal-load-input",children:[f.jsxs("div",{className:"disposal-header",children:[f.jsx(uf,{size:20}),f.jsx("span",{children:"Disposal Loads"})]}),f.jsx("div",{className:"disposal-loading",children:"Loading..."})]}):f.jsxs("div",{className:"disposal-load-input",children:[f.jsxs("div",{className:"disposal-header",children:[f.jsxs("div",{className:"disposal-title",children:[f.jsx(uf,{size:20}),f.jsx("span",{children:"Disposal Loads"}),G>0&&f.jsx("span",{className:"disposal-badge",children:G})]}),f.jsx("span",{className:"disposal-date",children:C})]}),f.jsx("div",{className:"disposal-quick-add",children:nf.map(B=>f.jsxs("button",{className:"quick-add-btn",onClick:()=>L(B.value),disabled:p,children:[f.jsx("span",{className:"quick-add-icon",children:B.icon}),f.jsxs("span",{className:"quick-add-label",children:["+ ",B.label]})]},B.value))}),Object.keys(ae).length>0?f.jsx("div",{className:"disposal-loads-list",children:nf.map(B=>{const ce=ae[B.value];return ce?f.jsxs("div",{className:"disposal-load-row",children:[f.jsxs("div",{className:"load-info",children:[f.jsx("span",{className:"load-icon",children:B.icon}),f.jsx("span",{className:"load-label",children:B.label})]}),f.jsxs("div",{className:"load-controls",children:[f.jsx("button",{className:"load-btn decrement",onClick:()=>ne(ce.items[0]),disabled:p,children:f.jsx(_S,{size:16})}),f.jsx("span",{className:"load-count",children:ce.total}),f.jsx("button",{className:"load-btn increment",onClick:()=>X(ce.items[0]),disabled:p,children:f.jsx(Zd,{size:16})})]})]},B.value):null})}):f.jsxs("div",{className:"disposal-empty",children:[f.jsxs("p",{children:["No disposal loads recorded for ",C]}),f.jsx("p",{className:"disposal-hint",children:"Tap a button above to add loads"})]}),_&&f.jsxs("div",{className:"disposal-add-form",children:[f.jsxs("div",{className:"add-form-row",children:[f.jsx("select",{value:S.type,onChange:B=>O({...S,type:B.target.value}),className:"load-type-select",children:nf.map(B=>f.jsxs("option",{value:B.value,children:[B.icon," ",B.label]},B.value))}),f.jsxs("div",{className:"count-input-group",children:[f.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:Math.max(1,S.count-1)}),children:f.jsx(_S,{size:16})}),f.jsx("input",{type:"number",min:"1",value:S.count,onChange:B=>O({...S,count:parseInt(B.target.value)||1}),className:"count-input"}),f.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:S.count+1}),children:f.jsx(Zd,{size:16})})]})]}),f.jsxs("div",{className:"add-form-actions",children:[f.jsxs("button",{className:"btn btn-secondary btn-small",onClick:()=>x(!1),children:[f.jsx(wb,{size:16})," Cancel"]}),f.jsxs("button",{className:"btn btn-primary btn-small",onClick:D,disabled:p,children:[f.jsx($i,{size:16})," Add"]})]})]}),!_&&f.jsxs("button",{className:"disposal-add-custom",onClick:()=>x(!0),children:[f.jsx(Zd,{size:16}),"Add multiple loads"]}),G>0&&f.jsxs("div",{className:"disposal-summary",children:[f.jsx("strong",{children:G})," total load",G!==1?"s":""," today"]}),c.length>0&&f.jsxs("div",{className:"disposal-history-section",children:[f.jsxs("button",{className:"disposal-history-toggle",onClick:()=>j(!w),children:[f.jsx(iq,{size:16}),f.jsxs("span",{children:["View History (",c.length," days)"]}),w?f.jsx(VA,{size:16}):f.jsx(df,{size:16})]}),w&&f.jsx("div",{className:"disposal-history-list",children:c.map(B=>{const ce=new Date(B.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),ge=B.loads.reduce((q,R)=>(q[R.load_type]||(q[R.load_type]=0),q[R.load_type]+=R.load_count,q),{});return f.jsxs("div",{className:"disposal-history-day",children:[f.jsxs("div",{className:"disposal-history-header",children:[f.jsx("span",{className:"disposal-history-date",children:ce}),f.jsxs("span",{className:"disposal-history-total",children:[B.totalLoads," load",B.totalLoads!==1?"s":""]})]}),f.jsx("div",{className:"disposal-history-types",children:Object.entries(ge).map(([q,R])=>{const I=r3(q);return f.jsxs("span",{className:"disposal-history-type",children:[I.icon," ",R," ",I.label]},q)})})]},B.date)})})]})]})}const WS={folder:hc,plans:cq,specs:Ho,permits:GA,contracts:lq,submittals:sq,rfis:oq,photos:cy,reports:WA,safety:om},Td={blue:"#3b82f6",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",purple:"#8b5cf6",pink:"#ec4899",gray:"#6b7280",orange:"#f97316"},a3=e=>e?.startsWith("image/")?uq:e?.includes("spreadsheet")||e?.includes("excel")?dq:e?.includes("pdf")?Ho:fq,i3=e=>{if(!e)return"0 B";const t=["B","KB","MB","GB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(r<10?1:0)} ${t[n]}`};function o3({projectId:e,onShowToast:t}){const[r,n]=y.useState([]),[i,s]=y.useState(!0),[c,u]=y.useState(null),[m,h]=y.useState([]),[p,g]=y.useState(!1),_=y.useRef(null),x=y.useCallback(async()=>{s(!0);try{const C=await be.getProjectFolders(e);n(C)}catch(C){console.error("Error loading folders:",C),t?.("Failed to load folders","error")}finally{s(!1)}},[e,t]),w=y.useCallback(async C=>{if(C){g(!0);try{const A=await be.getFolderDocuments(C);h(A.documents)}catch(A){console.error("Error loading documents:",A),t?.("Failed to load documents","error")}finally{g(!1)}}},[t]);y.useEffect(()=>{x();const C=be.subscribeToDocumentFolders?.(e,()=>{x()}),A=be.subscribeToDocuments?.(e,()=>{x(),_.current&&w(_.current.id)});return()=>{C?.unsubscribe?.(),A?.unsubscribe?.()}},[e,x,w]);const j=async C=>{u(C),_.current=C,await w(C.id)},S=async C=>{try{await be.logDocumentAccess(C.id,"downloaded");const A=C.url||`/storage/v1/object/public/project-documents/${C.storage_path}`;window.open(A,"_blank")}catch(A){console.error("Download error:",A)}},O=()=>{u(null),_.current=null,h([])};if(i)return f.jsx("div",{className:"field-docs",children:f.jsxs("div",{className:"field-docs-loading",children:[f.jsx(Bs,{size:24,className:"spinner"}),f.jsx("span",{children:"Loading..."})]})});if(c){const C=WS[c.icon]||hc,A=Td[c.color]||Td.blue;return f.jsxs("div",{className:"field-docs",children:[f.jsxs("div",{className:"field-docs-header",children:[f.jsx("button",{className:"field-docs-back",onClick:O,children:f.jsx(sr,{size:20})}),f.jsxs("div",{className:"field-docs-title",children:[f.jsx("div",{className:"field-docs-title-icon",style:{backgroundColor:`${A}15`},children:f.jsx(C,{size:20,style:{color:A}})}),f.jsxs("div",{className:"field-docs-title-text",children:[f.jsx("h2",{children:c.name}),f.jsxs("span",{children:[m.length," files"]})]})]})]}),f.jsx("div",{className:"field-docs-list",children:p?f.jsxs("div",{className:"field-docs-loading",children:[f.jsx(Bs,{size:24,className:"spinner"}),f.jsx("span",{children:"Loading..."})]}):m.length===0?f.jsxs("div",{className:"field-docs-empty",children:[f.jsx(hc,{size:48,style:{color:A,opacity:.3}}),f.jsx("p",{children:"No documents yet"})]}):m.map(k=>{const D=a3(k.mime_type);return f.jsxs("button",{className:"field-doc-item",onClick:()=>S(k),children:[f.jsx("div",{className:"field-doc-icon",children:f.jsx(D,{size:22})}),f.jsxs("div",{className:"field-doc-info",children:[f.jsx("span",{className:"field-doc-name",children:k.name}),f.jsx("span",{className:"field-doc-size",children:i3(k.file_size_bytes)})]}),f.jsx(YA,{size:20,className:"field-doc-download"})]},k.id)})})]})}return f.jsx("div",{className:"field-docs",children:f.jsx("div",{className:"field-docs-grid",children:r.length===0?f.jsxs("div",{className:"field-docs-empty",children:[f.jsx(hc,{size:56}),f.jsx("h3",{children:"No documents"}),f.jsx("p",{children:"Documents will appear here when added"})]}):r.map(C=>{const A=WS[C.icon]||hc,k=Td[C.color]||Td.blue,D=C.document_count||0;return f.jsxs("button",{className:"field-folder-card",onClick:()=>j(C),children:[f.jsx("div",{className:"field-folder-icon",style:{backgroundColor:`${k}12`},children:f.jsx(A,{size:28,style:{color:k}})}),f.jsxs("div",{className:"field-folder-info",children:[f.jsx("span",{className:"field-folder-name",children:C.name}),f.jsxs("span",{className:"field-folder-count",children:[D," ",D===1?"file":"files"]})]}),f.jsx(yc,{size:20,className:"field-folder-arrow"})]},C.id)})})})}function DN(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=DN(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ot(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=DN(e))&&(n&&(n+=" "),n+=t);return n}var s3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function qb(e){if(typeof e!="string")return!1;var t=s3;return t.includes(e)}var l3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],c3=new Set(l3);function TN(e){return typeof e!="string"?!1:c3.has(e)}function PN(e){return typeof e=="string"&&e.startsWith("data-")}function gn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(TN(r)||PN(r))&&(t[r]=e[r]);return t}function Mo(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return gn(t)}return typeof e=="object"&&!Array.isArray(e)?gn(e):null}function Ur(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(TN(r)||PN(r)||qb(r))&&(t[r]=e[r]);return t}function u3(e){return e==null?null:y.isValidElement(e)?Ur(e.props):typeof e=="object"&&!Array.isArray(e)?Ur(e):null}var d3=["children","width","height","viewBox","className","style","title","desc"];function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},by.apply(null,arguments)}function f3(e,t){if(e==null)return{};var r,n,i=m3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function m3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MN=y.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:s,className:c,style:u,title:m,desc:h}=e,p=f3(e,d3),g=s||{width:n,height:i,x:0,y:0},_=ot("recharts-surface",c);return y.createElement("svg",by({},Ur(p),{className:_,width:n,height:i,style:u,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:t}),y.createElement("title",null,m),y.createElement("desc",null,h),r)}),h3=["children","className"];function _y(){return _y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_y.apply(null,arguments)}function p3(e,t){if(e==null)return{};var r,n,i=g3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function g3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yr=y.forwardRef((e,t)=>{var{children:r,className:n}=e,i=p3(e,h3),s=ot("recharts-layer",n);return y.createElement("g",_y({className:s},Ur(i),{ref:t}),r)}),RN=y.createContext(null),NZ=()=>y.useContext(RN);function wt(e){return function(){return e}}const qN=Math.cos,hf=Math.sin,ta=Math.sqrt,pf=Math.PI,dm=2*pf,xy=Math.PI,wy=2*xy,xo=1e-6,v3=wy-xo;function zN(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function y3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return zN;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class b3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?zN:y3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,c){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,u=this._y1,m=n-t,h=i-r,p=c-t,g=u-r,_=p*p+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(_>xo)if(!(Math.abs(g*m-h*p)>xo)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-c,w=i-u,j=m*m+h*h,S=x*x+w*w,O=Math.sqrt(j),C=Math.sqrt(_),A=s*Math.tan((xy-Math.acos((j+_-S)/(2*O*C)))/2),k=A/C,D=A/O;Math.abs(k-1)>xo&&this._append`L${t+k*p},${r+k*g}`,this._append`A${s},${s},0,0,${+(g*x>p*w)},${this._x1=t+D*m},${this._y1=r+D*h}`}}arc(t,r,n,i,s,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(i),m=n*Math.sin(i),h=t+u,p=r+m,g=1^c,_=c?i-s:s-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>xo||Math.abs(this._y1-p)>xo)&&this._append`L${h},${p}`,n&&(_<0&&(_=_%wy+wy),_>v3?this._append`A${n},${n},0,1,${g},${t-u},${r-m}A${n},${n},0,1,${g},${this._x1=h},${this._y1=p}`:_>xo&&this._append`A${n},${n},0,${+(_>=xy)},${g},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function zb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new b3(t)}function Lb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function LN(e){this._context=e}LN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fm(e){return new LN(e)}function IN(e){return e[0]}function UN(e){return e[1]}function BN(e,t){var r=wt(!0),n=null,i=fm,s=null,c=zb(u);e=typeof e=="function"?e:e===void 0?IN:wt(e),t=typeof t=="function"?t:t===void 0?UN:wt(t);function u(m){var h,p=(m=Lb(m)).length,g,_=!1,x;for(n==null&&(s=i(x=c())),h=0;h<=p;++h)!(h<p&&r(g=m[h],h,m))===_&&((_=!_)?s.lineStart():s.lineEnd()),_&&s.point(+e(g,h,m),+t(g,h,m));if(x)return s=null,x+""||null}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:wt(+m),u):e},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:wt(+m),u):t},u.defined=function(m){return arguments.length?(r=typeof m=="function"?m:wt(!!m),u):r},u.curve=function(m){return arguments.length?(i=m,n!=null&&(s=i(n)),u):i},u.context=function(m){return arguments.length?(m==null?n=s=null:s=i(n=m),u):n},u}function Pd(e,t,r){var n=null,i=wt(!0),s=null,c=fm,u=null,m=zb(h);e=typeof e=="function"?e:e===void 0?IN:wt(+e),t=typeof t=="function"?t:wt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?UN:wt(+r);function h(g){var _,x,w,j=(g=Lb(g)).length,S,O=!1,C,A=new Array(j),k=new Array(j);for(s==null&&(u=c(C=m())),_=0;_<=j;++_){if(!(_<j&&i(S=g[_],_,g))===O)if(O=!O)x=_,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=_-1;w>=x;--w)u.point(A[w],k[w]);u.lineEnd(),u.areaEnd()}O&&(A[_]=+e(S,_,g),k[_]=+t(S,_,g),u.point(n?+n(S,_,g):A[_],r?+r(S,_,g):k[_]))}if(C)return u=null,C+""||null}function p(){return BN().defined(i).curve(c).context(s)}return h.x=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),n=null,h):e},h.x0=function(g){return arguments.length?(e=typeof g=="function"?g:wt(+g),h):e},h.x1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:wt(+g),h):n},h.y=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),r=null,h):t},h.y0=function(g){return arguments.length?(t=typeof g=="function"?g:wt(+g),h):t},h.y1=function(g){return arguments.length?(r=g==null?null:typeof g=="function"?g:wt(+g),h):r},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(r)},h.lineX1=function(){return p().x(n).y(t)},h.defined=function(g){return arguments.length?(i=typeof g=="function"?g:wt(!!g),h):i},h.curve=function(g){return arguments.length?(c=g,s!=null&&(u=c(s)),h):c},h.context=function(g){return arguments.length?(g==null?s=u=null:u=c(s=g),h):s},h}class $N{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function _3(e){return new $N(e,!0)}function x3(e){return new $N(e,!1)}const Ib={draw(e,t){const r=ta(t/pf);e.moveTo(r,0),e.arc(0,0,r,0,dm)}},w3={draw(e,t){const r=ta(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},HN=ta(1/3),j3=HN*2,S3={draw(e,t){const r=ta(t/j3),n=r*HN;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},E3={draw(e,t){const r=ta(t),n=-r/2;e.rect(n,n,r,r)}},O3=.8908130915292852,FN=hf(pf/10)/hf(7*pf/10),C3=hf(dm/10)*FN,A3=-qN(dm/10)*FN,N3={draw(e,t){const r=ta(t*O3),n=C3*r,i=A3*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const c=dm*s/5,u=qN(c),m=hf(c);e.lineTo(m*r,-u*r),e.lineTo(u*n-m*i,m*n+u*i)}e.closePath()}},Sg=ta(3),k3={draw(e,t){const r=-ta(t/(Sg*3));e.moveTo(0,r*2),e.lineTo(-Sg*r,-r),e.lineTo(Sg*r,-r),e.closePath()}},Tn=-.5,Pn=ta(3)/2,jy=1/ta(12),D3=(jy/2+1)*3,T3={draw(e,t){const r=ta(t/D3),n=r/2,i=r*jy,s=n,c=r*jy+r,u=-s,m=c;e.moveTo(n,i),e.lineTo(s,c),e.lineTo(u,m),e.lineTo(Tn*n-Pn*i,Pn*n+Tn*i),e.lineTo(Tn*s-Pn*c,Pn*s+Tn*c),e.lineTo(Tn*u-Pn*m,Pn*u+Tn*m),e.lineTo(Tn*n+Pn*i,Tn*i-Pn*n),e.lineTo(Tn*s+Pn*c,Tn*c-Pn*s),e.lineTo(Tn*u+Pn*m,Tn*m-Pn*u),e.closePath()}};function P3(e,t){let r=null,n=zb(i);e=typeof e=="function"?e:wt(e||Ib),t=typeof t=="function"?t:wt(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:wt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:wt(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function gf(){}function vf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function KN(e){this._context=e}KN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function M3(e){return new KN(e)}function YN(e){this._context=e}YN.prototype={areaStart:gf,areaEnd:gf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function R3(e){return new YN(e)}function GN(e){this._context=e}GN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:vf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function q3(e){return new GN(e)}function VN(e){this._context=e}VN.prototype={areaStart:gf,areaEnd:gf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function z3(e){return new VN(e)}function XS(e){return e<0?-1:1}function ZS(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),c=(r-e._y1)/(i||n<0&&-0),u=(s*i+c*n)/(n+i);return(XS(s)+XS(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(u))||0}function QS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Eg(e,t,r){var n=e._x0,i=e._y0,s=e._x1,c=e._y1,u=(s-n)/3;e._context.bezierCurveTo(n+u,i+u*t,s-u,c-u*r,s,c)}function yf(e){this._context=e}yf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Eg(this,this._t0,QS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Eg(this,QS(this,r=ZS(this,e,t)),r);break;default:Eg(this,this._t0,r=ZS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function WN(e){this._context=new XN(e)}(WN.prototype=Object.create(yf.prototype)).point=function(e,t){yf.prototype.point.call(this,t,e)};function XN(e){this._context=e}XN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function L3(e){return new yf(e)}function I3(e){return new WN(e)}function ZN(e){this._context=e}ZN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=JS(e),i=JS(t),s=0,c=1;c<r;++s,++c)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function JS(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),c=new Array(r);for(i[0]=0,s[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,c[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,c[t]-=n*c[t-1];for(i[r-1]=c[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(c[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function U3(e){return new ZN(e)}function mm(e,t){this._context=e,this._t=t}mm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function B3(e){return new mm(e,.5)}function $3(e){return new mm(e,0)}function H3(e){return new mm(e,1)}function Ro(e,t){if((c=e.length)>1)for(var r=1,n,i,s=e[t[0]],c,u=s.length;r<c;++r)for(i=s,s=e[t[r]],n=0;n<u;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Sy(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function F3(e,t){return e[t]}function K3(e){const t=[];return t.key=e,t}function Y3(){var e=wt([]),t=Sy,r=Ro,n=F3;function i(s){var c=Array.from(e.apply(this,arguments),K3),u,m=c.length,h=-1,p;for(const g of s)for(u=0,++h;u<m;++u)(c[u][h]=[0,+n(g,c[u].key,h,s)]).data=g;for(u=0,p=Lb(t(c));u<m;++u)c[p[u]].index=u;return r(c,p),c}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:wt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:wt(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?Sy:typeof s=="function"?s:wt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??Ro,i):r},i}function G3(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,c;i<s;++i){for(c=r=0;r<n;++r)c+=e[r][i][1]||0;if(c)for(r=0;r<n;++r)e[r][i][1]/=c}Ro(e,t)}}function V3(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var c=0,u=0;c<i;++c)u+=e[c][r][1]||0;n[r][1]+=n[r][0]=-u/2}Ro(e,t)}}function W3(e,t){if(!(!((c=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,c;n<s;++n){for(var u=0,m=0,h=0;u<c;++u){for(var p=e[t[u]],g=p[n][1]||0,_=p[n-1][1]||0,x=(g-_)/2,w=0;w<u;++w){var j=e[t[w]],S=j[n][1]||0,O=j[n-1][1]||0;x+=S-O}m+=g,h+=x*g}i[n-1][1]+=i[n-1][0]=r,m&&(r-=h/m)}i[n-1][1]+=i[n-1][0]=r,Ro(e,t)}}var Og={},Cg={},e1;function X3(){return e1||(e1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Cg)),Cg}var Ag={},t1;function QN(){return t1||(t1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Ag)),Ag}var Ng={},r1;function Ub(){return r1||(r1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Ng)),Ng}var kg={},Dg={},n1;function Z3(){return n1||(n1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Dg)),Dg}var a1;function Bb(){return a1||(a1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Z3(),r=Ub();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],c=i.length;if(c===0)return s;let u=0,m="",h="",p=!1;for(i.charCodeAt(0)===46&&(s.push(""),u++);u<c;){const g=i[u];h?g==="\\"&&u+1<c?(u++,m+=i[u]):g===h?h="":m+=g:p?g==='"'||g==="'"?h=g:g==="]"?(p=!1,s.push(m),m=""):m+=g:g==="["?(p=!0,m&&(s.push(m),m="")):g==="."?m&&(s.push(m),m=""):m+=g,u++}return m&&s.push(m),s}e.toPath=n})(kg)),kg}var i1;function $b(){return i1||(i1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=X3(),r=QN(),n=Ub(),i=Bb();function s(u,m,h){if(u==null)return h;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return h;const p=u[m];return p===void 0?r.isDeepKey(m)?s(u,i.toPath(m),h):h:p}case"number":case"symbol":{typeof m=="number"&&(m=n.toKey(m));const p=u[m];return p===void 0?h:p}default:{if(Array.isArray(m))return c(u,m,h);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return h;const p=u[m];return p===void 0?h:p}}}function c(u,m,h){if(m.length===0)return h;let p=u;for(let g=0;g<m.length;g++){if(p==null||t.isUnsafeProperty(m[g]))return h;p=p[m[g]]}return p===void 0?h:p}e.get=s})(Og)),Og}var Tg,o1;function Q3(){return o1||(o1=1,Tg=$b().get),Tg}var J3=Q3();const qo=Qa(J3);var eI=4;function Ui(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eI,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Ft(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,s,c)=>{var u=r[c-1];return typeof u=="string"?i+u+s:u!==void 0?i+Ui(u)+s:i+s},"")}var vr=e=>e===0?0:e>0?1:-1,Qn=e=>typeof e=="number"&&e!=+e,Ka=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ke=e=>(typeof e=="number"||e instanceof Number)&&!Qn(e),fa=e=>ke(e)||typeof e=="string",tI=0,wc=e=>{var t=++tI;return"".concat(e||"").concat(t)},Dr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ke(t)&&typeof t!="string")return n;var s;if(Ka(t)){if(r==null)return n;var c=t.indexOf("%");s=r*parseFloat(t.slice(0,c))/100}else s=+t;return Qn(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},JN=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Dt(e,t,r){return ke(e)&&ke(t)?Ui(e+r*(t-e)):t}function ek(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):qo(n,t))===r)}var Mt=e=>e===null||typeof e>"u",$c=e=>Mt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function rI(e){return e!=null}function Hc(){}var nI=["type","size","sizeType"];function Ey(){return Ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ey.apply(null,arguments)}function s1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function l1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(r),!0).forEach(function(n){aI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aI(e,t,r){return(t=iI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iI(e){var t=oI(e,"string");return typeof t=="symbol"?t:t+""}function oI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function sI(e,t){if(e==null)return{};var r,n,i=lI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function lI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tk={symbolCircle:Ib,symbolCross:w3,symbolDiamond:S3,symbolSquare:E3,symbolStar:N3,symbolTriangle:k3,symbolWye:T3},cI=Math.PI/180,uI=e=>{var t="symbol".concat($c(e));return tk[t]||Ib},dI=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*cI;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},fI=(e,t)=>{tk["symbol".concat($c(e))]=t},rk=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=sI(e,nI),s=l1(l1({},i),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var u=()=>{var _=uI(c),x=P3().type(_).size(dI(r,n,c)),w=x();if(w!==null)return w},{className:m,cx:h,cy:p}=s,g=Ur(s);return ke(h)&&ke(p)&&ke(r)?y.createElement("path",Ey({},g,{className:ot("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};rk.registerSymbol=fI;var nk=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Hb=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{qb(i)&&(n[i]=(s=>r[i](r,s)))}),n},mI=(e,t,r)=>n=>(e(t,r,n),null),hm=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var s=e[i];qb(i)&&typeof s=="function"&&(n||(n={}),n[i]=mI(s,t,r))}),n};function c1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c1(Object(r),!0).forEach(function(n){pI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pI(e,t,r){return(t=gI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gI(e){var t=vI(e,"string");return typeof t=="symbol"?t:t+""}function vI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function br(e,t){var r=hI({},e),n=t,i=Object.keys(t),s=i.reduce((c,u)=>(c[u]===void 0&&n[u]!==void 0&&(c[u]=n[u]),c),r);return s}var Pg={},Mg={},u1;function yI(){return u1||(u1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let s=0;s<r.length;s++){const c=r[s],u=n(c);i.has(u)||i.set(u,c)}return Array.from(i.values())}e.uniqBy=t})(Mg)),Mg}var Rg={},d1;function ak(){return d1||(d1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Rg)),Rg}var qg={},zg={},Lg={},f1;function bI(){return f1||(f1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Lg)),Lg}var m1;function Fb(){return m1||(m1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bI();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(zg)),zg}var Ig={},h1;function _I(){return h1||(h1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Ig)),Ig}var p1;function xI(){return p1||(p1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fb(),r=_I();function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(qg)),qg}var Ug={},Bg={},g1;function wI(){return g1||(g1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$b();function r(n){return function(i){return t.get(i,n)}}e.property=r})(Bg)),Bg}var $g={},Hg={},Fg={},Kg={},v1;function ik(){return v1||(v1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Kg)),Kg}var Yg={},y1;function ok(){return y1||(y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Yg)),Yg}var Gg={},b1;function sk(){return b1||(b1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Gg)),Gg}var _1;function jI(){return _1||(_1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ik(),r=ok(),n=sk();function i(p,g,_){return typeof _!="function"?i(p,g,()=>{}):s(p,g,function x(w,j,S,O,C,A){const k=_(w,j,S,O,C,A);return k!==void 0?!!k:s(w,j,x,A)},new Map)}function s(p,g,_,x){if(g===p)return!0;switch(typeof g){case"object":return c(p,g,_,x);case"function":return Object.keys(g).length>0?s(p,{...g},_,x):n.eq(p,g);default:return t.isObject(p)?typeof g=="string"?g==="":!0:n.eq(p,g)}}function c(p,g,_,x){if(g==null)return!0;if(Array.isArray(g))return m(p,g,_,x);if(g instanceof Map)return u(p,g,_,x);if(g instanceof Set)return h(p,g,_,x);const w=Object.keys(g);if(p==null||r.isPrimitive(p))return w.length===0;if(w.length===0)return!0;if(x?.has(g))return x.get(g)===p;x?.set(g,p);try{for(let j=0;j<w.length;j++){const S=w[j];if(!r.isPrimitive(p)&&!(S in p)||g[S]===void 0&&p[S]!==void 0||g[S]===null&&p[S]!==null||!_(p[S],g[S],S,p,g,x))return!1}return!0}finally{x?.delete(g)}}function u(p,g,_,x){if(g.size===0)return!0;if(!(p instanceof Map))return!1;for(const[w,j]of g.entries()){const S=p.get(w);if(_(S,j,w,p,g,x)===!1)return!1}return!0}function m(p,g,_,x){if(g.length===0)return!0;if(!Array.isArray(p))return!1;const w=new Set;for(let j=0;j<g.length;j++){const S=g[j];let O=!1;for(let C=0;C<p.length;C++){if(w.has(C))continue;const A=p[C];let k=!1;if(_(A,S,j,p,g,x)&&(k=!0),k){w.add(C),O=!0;break}}if(!O)return!1}return!0}function h(p,g,_,x){return g.size===0?!0:p instanceof Set?m([...p],[...g],_,x):!1}e.isMatchWith=i,e.isSetMatch=h})(Fg)),Fg}var x1;function lk(){return x1||(x1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=jI();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(Hg)),Hg}var Vg={},Wg={},Xg={},w1;function SI(){return w1||(w1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Xg)),Xg}var Zg={},j1;function ck(){return j1||(j1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Zg)),Zg}var Qg={},S1;function uk(){return S1||(S1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",c="[object Symbol]",u="[object Date]",m="[object Map]",h="[object Set]",p="[object Array]",g="[object Function]",_="[object ArrayBuffer]",x="[object Object]",w="[object Error]",j="[object DataView]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",k="[object BigUint64Array]",D="[object Int8Array]",M="[object Int16Array]",L="[object Int32Array]",X="[object BigInt64Array]",ne="[object Float32Array]",ae="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=_,e.arrayTag=p,e.bigInt64ArrayTag=X,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=j,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=ne,e.float64ArrayTag=ae,e.functionTag=g,e.int16ArrayTag=M,e.int32ArrayTag=L,e.int8ArrayTag=D,e.mapTag=m,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=C,e.uint32ArrayTag=A,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=O})(Qg)),Qg}var Jg={},E1;function EI(){return E1||(E1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Jg)),Jg}var O1;function dk(){return O1||(O1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SI(),r=ck(),n=uk(),i=ok(),s=EI();function c(p,g){return u(p,void 0,p,new Map,g)}function u(p,g,_,x=new Map,w=void 0){const j=w?.(p,g,_,x);if(j!==void 0)return j;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const S=new Array(p.length);x.set(p,S);for(let O=0;O<p.length;O++)S[O]=u(p[O],O,_,x,w);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;x.set(p,S);for(const[O,C]of p)S.set(O,u(C,O,_,x,w));return S}if(p instanceof Set){const S=new Set;x.set(p,S);for(const O of p)S.add(u(O,void 0,_,x,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,S);for(let O=0;O<p.length;O++)S[O]=u(p[O],O,_,x,w);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,S),m(S,p,_,x,w),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return x.set(p,S),m(S,p,_,x,w),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof Error){const S=new p.constructor;return x.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,m(S,p,_,x,w),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof Number){const S=new Number(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof String){const S=new String(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(typeof p=="object"&&h(p)){const S=Object.create(Object.getPrototypeOf(p));return x.set(p,S),m(S,p,_,x,w),S}return p}function m(p,g,_=p,x,w){const j=[...Object.keys(g),...t.getSymbols(g)];for(let S=0;S<j.length;S++){const O=j[S],C=Object.getOwnPropertyDescriptor(p,O);(C==null||C.writable)&&(p[O]=u(g[O],O,_,x,w))}}function h(p){switch(r.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=u,e.copyProperties=m})(Wg)),Wg}var C1;function OI(){return C1||(C1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dk();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Vg)),Vg}var A1;function CI(){return A1||(A1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lk(),r=OI();function n(i){return i=r.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=n})($g)),$g}var ev={},tv={},rv={},N1;function AI(){return N1||(N1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dk(),r=uk();function n(i,s){return t.cloneDeepWith(i,(c,u,m,h)=>{const p=s?.(c,u,m,h);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new i.constructor(i?.valueOf());return t.copyProperties(g,i),g}case r.argumentsTag:{const g={};return t.copyProperties(g,i),g.length=i.length,g[Symbol.iterator]=i[Symbol.iterator],g}default:return}})}e.cloneDeepWith=n})(rv)),rv}var k1;function NI(){return k1||(k1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AI();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(tv)),tv}var nv={},av={},D1;function fk(){return D1||(D1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(av)),av}var iv={},T1;function kI(){return T1||(T1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ck();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(iv)),iv}var P1;function DI(){return P1||(P1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=QN(),r=fk(),n=kI(),i=Bb();function s(c,u){let m;if(Array.isArray(u)?m=u:typeof u=="string"&&t.isDeepKey(u)&&c?.[u]==null?m=i.toPath(u):m=[u],m.length===0)return!1;let h=c;for(let p=0;p<m.length;p++){const g=m[p];if((h==null||!Object.hasOwn(h,g))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(g)&&g<h.length))return!1;h=h[g]}return!0}e.has=s})(nv)),nv}var M1;function TI(){return M1||(M1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lk(),r=Ub(),n=NI(),i=$b(),s=DI();function c(u,m){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return m=n.cloneDeep(m),function(h){const p=i.get(h,u);return p===void 0?s.has(h,u):m===void 0?p===void 0:t.isMatch(p,m)}}e.matchesProperty=c})(ev)),ev}var R1;function PI(){return R1||(R1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ak(),r=wI(),n=CI(),i=TI();function s(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=s})(Ug)),Ug}var q1;function MI(){return q1||(q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yI(),r=ak(),n=xI(),i=PI();function s(c,u=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.iteratee(u)):[]}e.uniqBy=s})(Pg)),Pg}var ov,z1;function RI(){return z1||(z1=1,ov=MI().uniqBy),ov}var qI=RI();const L1=Qa(qI);function zI(e,t,r){return t===!0?L1(e,r):typeof t=="function"?L1(e,t):e}var sv={exports:{}},lv={},cv={exports:{}},uv={};var I1;function LI(){if(I1)return uv;I1=1;var e=sm();function t(g,_){return g===_&&(g!==0||1/g===1/_)||g!==g&&_!==_}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,s=e.useLayoutEffect,c=e.useDebugValue;function u(g,_){var x=_(),w=n({inst:{value:x,getSnapshot:_}}),j=w[0].inst,S=w[1];return s(function(){j.value=x,j.getSnapshot=_,m(j)&&S({inst:j})},[g,x,_]),i(function(){return m(j)&&S({inst:j}),g(function(){m(j)&&S({inst:j})})},[g]),c(x),x}function m(g){var _=g.getSnapshot;g=g.value;try{var x=_();return!r(g,x)}catch{return!0}}function h(g,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return uv.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,uv}var U1;function II(){return U1||(U1=1,cv.exports=LI()),cv.exports}var B1;function UI(){if(B1)return lv;B1=1;var e=sm(),t=II();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,s=e.useRef,c=e.useEffect,u=e.useMemo,m=e.useDebugValue;return lv.useSyncExternalStoreWithSelector=function(h,p,g,_,x){var w=s(null);if(w.current===null){var j={hasValue:!1,value:null};w.current=j}else j=w.current;w=u(function(){function O(M){if(!C){if(C=!0,A=M,M=_(M),x!==void 0&&j.hasValue){var L=j.value;if(x(L,M))return k=L}return k=M}if(L=k,n(A,M))return L;var X=_(M);return x!==void 0&&x(L,X)?(A=M,L):(A=M,k=X)}var C=!1,A,k,D=g===void 0?null:g;return[function(){return O(p())},D===null?void 0:function(){return O(D())}]},[p,g,_,x]);var S=i(h,w[0],w[1]);return c(function(){j.hasValue=!0,j.value=S},[S]),m(S),S},lv}var $1;function BI(){return $1||($1=1,sv.exports=UI()),sv.exports}var $I=BI(),Kb=y.createContext(null),HI=e=>e,Rt=()=>{var e=y.useContext(Kb);return e?e.store.dispatch:HI},af=()=>{},FI=()=>af,KI=(e,t)=>e===t;function De(e){var t=y.useContext(Kb);return $I.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:FI,t?t.store.getState:af,t?t.store.getState:af,t?e:af,KI)}function YI(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function GI(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function VI(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var H1=e=>Array.isArray(e)?e:[e];function WI(e){const t=Array.isArray(e[0])?e[0]:e;return VI(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function XI(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var ZI=class{constructor(e){this.value=e}deref(){return this.value}},QI=typeof WeakRef<"u"?WeakRef:ZI,JI=0,F1=1;function Md(){return{s:JI,v:void 0,o:null,p:null}}function mk(e,t={}){let r=Md();const{resultEqualityCheck:n}=t;let i,s=0;function c(){let u=r;const{length:m}=arguments;for(let g=0,_=m;g<_;g++){const x=arguments[g];if(typeof x=="function"||typeof x=="object"&&x!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const j=w.get(x);j===void 0?(u=Md(),w.set(x,u)):u=j}else{let w=u.p;w===null&&(u.p=w=new Map);const j=w.get(x);j===void 0?(u=Md(),w.set(x,u)):u=j}}const h=u;let p;if(u.s===F1)p=u.v;else if(p=e.apply(null,arguments),s++,n){const g=i?.deref?.()??i;g!=null&&n(g,p)&&(p=g,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new QI(p):p}return h.s=F1,h.v=p,p}return c.clearCache=()=>{r=Md(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function e4(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let s=0,c=0,u,m={},h=i.pop();typeof h=="object"&&(m=h,h=i.pop()),YI(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...r,...m},{memoize:g,memoizeOptions:_=[],argsMemoize:x=mk,argsMemoizeOptions:w=[]}=p,j=H1(_),S=H1(w),O=WI(i),C=g(function(){return s++,h.apply(null,arguments)},...j),A=x(function(){c++;const D=XI(O,arguments);return u=C.apply(null,D),u},...S);return Object.assign(A,{resultFunc:h,memoizedResultFunc:C,dependencies:O,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var W=e4(mk),t4=Object.assign((e,t=W)=>{GI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((c,u,m)=>(c[r[m]]=u,c),{}))},{withTypes:()=>t4}),dv={},fv={},mv={},K1;function r4(){return K1||(K1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const c=t(n),u=t(i);if(c===u&&c===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?u-c:c-u}return 0};e.compareValues=r})(mv)),mv}var hv={},pv={},Y1;function hk(){return Y1||(Y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(pv)),pv}var G1;function n4(){return G1||(G1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hk(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||c!=null&&Object.hasOwn(c,s)}e.isKey=i})(hv)),hv}var V1;function a4(){return V1||(V1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r4(),r=n4(),n=Bb();function i(s,c,u,m){if(s==null)return[];u=m?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,w)=>{let j=x;for(let S=0;S<w.length&&j!=null;++S)j=j[w[S]];return j},p=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:h(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?h(w,x):typeof w=="object"?w[x]:w,g=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return s.map(x=>({original:x,criteria:g.map(w=>p(w,x))})).slice().sort((x,w)=>{for(let j=0;j<g.length;j++){const S=t.compareValues(x.criteria[j],w.criteria[j],u[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(fv)),fv}var gv={},W1;function i4(){return W1||(W1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],s=Math.floor(n),c=(u,m)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&m<s?c(p,m+1):i.push(p)}};return c(r,0),i}e.flatten=t})(gv)),gv}var vv={},X1;function pk(){return X1||(X1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fk(),r=Fb(),n=ik(),i=sk();function s(c,u,m){return n.isObject(m)&&(typeof u=="number"&&r.isArrayLike(m)&&t.isIndex(u)&&u<m.length||typeof u=="string"&&u in m)?i.eq(m[u],c):!1}e.isIterateeCall=s})(vv)),vv}var Z1;function o4(){return Z1||(Z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a4(),r=i4(),n=pk();function i(s,...c){const u=c.length;return u>1&&n.isIterateeCall(s,c[0],c[1])?c=[]:u>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(s,r.flatten(c),["asc"])}e.sortBy=i})(dv)),dv}var yv,Q1;function s4(){return Q1||(Q1=1,yv=o4().sortBy),yv}var l4=s4();const pm=Qa(l4);var gk=e=>e.legend.settings,c4=e=>e.legend.size,u4=e=>e.legend.payload,kZ=W([u4,gk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?pm(n,r):n}),Rd=1;function d4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-t.height)>Rd||Math.abs(c.left-t.left)>Rd||Math.abs(c.top-t.top)>Rd||Math.abs(c.width-t.width)>Rd)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Er(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var f4=typeof Symbol=="function"&&Symbol.observable||"@@observable",J1=f4,bv=()=>Math.random().toString(36).substring(7).split("").join("."),m4={INIT:`@@redux/INIT${bv()}`,REPLACE:`@@redux/REPLACE${bv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bv()}`},bf=m4;function Yb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function vk(e,t,r){if(typeof e!="function")throw new Error(Er(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Er(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Er(1));return r(vk)(e,t)}let n=e,i=t,s=new Map,c=s,u=0,m=!1;function h(){c===s&&(c=new Map,s.forEach((S,O)=>{c.set(O,S)}))}function p(){if(m)throw new Error(Er(3));return i}function g(S){if(typeof S!="function")throw new Error(Er(4));if(m)throw new Error(Er(5));let O=!0;h();const C=u++;return c.set(C,S),function(){if(O){if(m)throw new Error(Er(6));O=!1,h(),c.delete(C),s=null}}}function _(S){if(!Yb(S))throw new Error(Er(7));if(typeof S.type>"u")throw new Error(Er(8));if(typeof S.type!="string")throw new Error(Er(17));if(m)throw new Error(Er(9));try{m=!0,i=n(i,S)}finally{m=!1}return(s=c).forEach(C=>{C()}),S}function x(S){if(typeof S!="function")throw new Error(Er(10));n=S,_({type:bf.REPLACE})}function w(){const S=g;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(Er(11));function C(){const k=O;k.next&&k.next(p())}return C(),{unsubscribe:S(C)}},[J1](){return this}}}return _({type:bf.INIT}),{dispatch:_,subscribe:g,getState:p,replaceReducer:x,[J1]:w}}function h4(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:bf.INIT})>"u")throw new Error(Er(12));if(typeof r(void 0,{type:bf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Er(13))})}function yk(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const c=t[s];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let i;try{h4(r)}catch(s){i=s}return function(c={},u){if(i)throw i;let m=!1;const h={};for(let p=0;p<n.length;p++){const g=n[p],_=r[g],x=c[g],w=_(x,u);if(typeof w>"u")throw u&&u.type,new Error(Er(14));h[g]=w,m=m||w!==x}return m=m||n.length!==Object.keys(c).length,m?h:c}}function _f(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function p4(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(Er(15))};const c={getState:i.getState,dispatch:(m,...h)=>s(m,...h)},u=e.map(m=>m(c));return s=_f(...u)(i.dispatch),{...i,dispatch:s}}}function bk(e){return Yb(e)&&"type"in e&&typeof e.type=="string"}var _k=Symbol.for("immer-nothing"),eE=Symbol.for("immer-draftable"),Br=Symbol.for("immer-state");function Yn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var hn=Object,$s=hn.getPrototypeOf,xf="constructor",gm="prototype",Oy="configurable",wf="enumerable",of="writable",jc="value",Ya=e=>!!e&&!!e[Br];function Jn(e){return e?xk(e)||ym(e)||!!e[eE]||!!e[xf]?.[eE]||bm(e)||_m(e):!1}var g4=hn[gm][xf].toString(),tE=new WeakMap;function xk(e){if(!e||!Gb(e))return!1;const t=$s(e);if(t===null||t===hn[gm])return!0;const r=hn.hasOwnProperty.call(t,xf)&&t[xf];if(r===Object)return!0;if(!qs(r))return!1;let n=tE.get(r);return n===void 0&&(n=Function.toString.call(r),tE.set(r,n)),n===g4}function vm(e,t,r=!0){Fc(e)===0?(r?Reflect.ownKeys(e):hn.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Fc(e){const t=e[Br];return t?t.type_:ym(e)?1:bm(e)?2:_m(e)?3:0}var rE=(e,t,r=Fc(e))=>r===2?e.has(t):hn[gm].hasOwnProperty.call(e,t),Cy=(e,t,r=Fc(e))=>r===2?e.get(t):e[t],jf=(e,t,r,n=Fc(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function v4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ym=Array.isArray,bm=e=>e instanceof Map,_m=e=>e instanceof Set,Gb=e=>typeof e=="object",qs=e=>typeof e=="function",_v=e=>typeof e=="boolean";function y4(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var za=e=>e.copy_||e.base_,Vb=e=>e.modified_?e.copy_:e.base_;function Ay(e,t){if(bm(e))return new Map(e);if(_m(e))return new Set(e);if(ym(e))return Array[gm].slice.call(e);const r=xk(e);if(t===!0||t==="class_only"&&!r){const n=hn.getOwnPropertyDescriptors(e);delete n[Br];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u[of]===!1&&(u[of]=!0,u[Oy]=!0),(u.get||u.set)&&(n[c]={[Oy]:!0,[of]:!0,[wf]:u[wf],[jc]:e[c]})}return hn.create($s(e),n)}else{const n=$s(e);if(n!==null&&r)return{...e};const i=hn.create(n);return hn.assign(i,e)}}function Wb(e,t=!1){return xm(e)||Ya(e)||!Jn(e)||(Fc(e)>1&&hn.defineProperties(e,{set:qd,add:qd,clear:qd,delete:qd}),hn.freeze(e),t&&vm(e,(r,n)=>{Wb(n,!0)},!1)),e}function b4(){Yn(2)}var qd={[jc]:b4};function xm(e){return e===null||!Gb(e)?!0:hn.isFrozen(e)}var Sf="MapSet",Ny="Patches",nE="ArrayMethods",wk={};function zo(e){const t=wk[e];return t||Yn(0,e),t}var aE=e=>!!wk[e],Sc,jk=()=>Sc,_4=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:aE(Sf)?zo(Sf):void 0,arrayMethodsPlugin_:aE(nE)?zo(nE):void 0});function iE(e,t){t&&(e.patchPlugin_=zo(Ny),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ky(e){Dy(e),e.drafts_.forEach(x4),e.drafts_=null}function Dy(e){e===Sc&&(Sc=e.parent_)}var oE=e=>Sc=_4(Sc,e);function x4(e){const t=e[Br];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function sE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Br].modified_&&(ky(t),Yn(4)),Jn(e)&&(e=lE(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[Br].base_,e,t)}else e=lE(t,r);return w4(t,e,!0),ky(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==_k?e:void 0}function lE(e,t){if(xm(t))return t;const r=t[Br];if(!r)return Ef(t,e.handledSet_,e);if(!wm(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);Ok(r,e)}return r.copy_}function w4(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Wb(t,r)}function Sk(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var wm=(e,t)=>e.scope_===t,j4=[];function Ek(e,t,r,n){const i=za(e),s=e.type_;if(n!==void 0&&Cy(i,n,s)===t){jf(i,n,r,s);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;vm(i,(m,h)=>{if(Ya(h)){const p=u.get(h)||[];p.push(m),u.set(h,p)}})}const c=e.draftLocations_.get(t)??j4;for(const u of c)jf(i,u,r,s)}function S4(e,t,r){e.callbacks_.push(function(i){const s=t;if(!s||!wm(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const c=Vb(s);Ek(e,s.draft_??s,c,r),Ok(s,i)})}function Ok(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}Sk(e)}}function E4(e,t,r){const{scope_:n}=e;if(Ya(r)){const i=r[Br];wm(i,n)&&i.callbacks_.push(function(){sf(e);const c=Vb(i);Ek(e,r,c,t)})}else Jn(r)&&e.callbacks_.push(function(){const s=za(e);e.type_===3?s.has(r)&&Ef(r,n.handledSet_,n):Cy(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Ef(Cy(e.copy_,t,e.type_),n.handledSet_,n)})}function Ef(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ya(e)||t.has(e)||!Jn(e)||xm(e)||(t.add(e),vm(e,(n,i)=>{if(Ya(i)){const s=i[Br];if(wm(s,r)){const c=Vb(s);jf(e,n,c,e.type_),Sk(s)}}else Jn(i)&&Ef(i,t,r)})),e}function O4(e,t){const r=ym(e),n={type_:r?1:0,scope_:t?t.scope_:jk(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=Of;r&&(i=[n],s=Ec);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,[u,n]}var Of={get(e,t){if(t===Br)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=za(e);if(!rE(i,t,e.type_))return C4(e,i,t);const s=i[t];if(e.finalized_||!Jn(s)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&y4(t))return s;if(s===xv(e.base_,t)){sf(e);const c=e.type_===1?+t:t,u=Py(e.scope_,s,e,c);return e.copy_[c]=u}return s},has(e,t){return t in za(e)},ownKeys(e){return Reflect.ownKeys(za(e))},set(e,t,r){const n=Ck(za(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=xv(za(e),t),s=i?.[Br];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(v4(r,i)&&(r!==void 0||rE(e.base_,t,e.type_)))return!0;sf(e),Ty(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),E4(e,t,r)),!0},deleteProperty(e,t){return sf(e),xv(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Ty(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=za(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[of]:!0,[Oy]:e.type_!==1||t!=="length",[wf]:n[wf],[jc]:r[t]}},defineProperty(){Yn(11)},getPrototypeOf(e){return $s(e.base_)},setPrototypeOf(){Yn(12)}},Ec={};for(let e in Of){let t=Of[e];Ec[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Ec.deleteProperty=function(e,t){return Ec.set.call(this,e,t,void 0)};Ec.set=function(e,t,r){return Of.set.call(this,e[0],t,r,e[0])};function xv(e,t){const r=e[Br];return(r?za(r):e)[t]}function C4(e,t,r){const n=Ck(t,r);return n?jc in n?n[jc]:n.get?.call(e.draft_):void 0}function Ck(e,t){if(!(t in e))return;let r=$s(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=$s(r)}}function Ty(e){e.modified_||(e.modified_=!0,e.parent_&&Ty(e.parent_))}function sf(e){e.copy_||(e.assigned_=new Map,e.copy_=Ay(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var A4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(qs(r)&&!qs(n)){const c=n;n=r;const u=this;return function(h=c,...p){return u.produce(h,g=>n.call(this,g,...p))}}qs(n)||Yn(6),i!==void 0&&!qs(i)&&Yn(7);let s;if(Jn(r)){const c=oE(this),u=Py(c,r,void 0);let m=!0;try{s=n(u),m=!1}finally{m?ky(c):Dy(c)}return iE(c,i),sE(s,c)}else if(!r||!Gb(r)){if(s=n(r),s===void 0&&(s=r),s===_k&&(s=void 0),this.autoFreeze_&&Wb(s,!0),i){const c=[],u=[];zo(Ny).generateReplacementPatches_(r,s,{patches_:c,inversePatches_:u}),i(c,u)}return s}else Yn(1,r)},this.produceWithPatches=(r,n)=>{if(qs(r))return(u,...m)=>this.produceWithPatches(u,h=>r(h,...m));let i,s;return[this.produce(r,n,(u,m)=>{i=u,s=m}),i,s]},_v(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),_v(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),_v(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Jn(t)||Yn(8),Ya(t)&&(t=Xn(t));const r=oE(this),n=Py(r,t,void 0);return n[Br].isManual_=!0,Dy(r),n}finishDraft(t,r){const n=t&&t[Br];(!n||!n.isManual_)&&Yn(9);const{scope_:i}=n;return iE(i,r),sE(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const i=zo(Ny).applyPatches_;return Ya(t)?i(t,r):this.produce(t,s=>i(s,r))}};function Py(e,t,r,n){const[i,s]=bm(t)?zo(Sf).proxyMap_(t,r):_m(t)?zo(Sf).proxySet_(t,r):O4(t,r);return(r?.scope_??jk()).drafts_.push(i),s.callbacks_=r?.callbacks_??[],s.key_=n,r&&n!==void 0?S4(r,s,n):s.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:h}=m;s.modified_&&h&&h.generatePatches_(s,[],m)}),i}function Xn(e){return Ya(e)||Yn(10,e),Ak(e)}function Ak(e){if(!Jn(e)||xm(e))return e;const t=e[Br];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ay(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ay(e,!0);return vm(r,(i,s)=>{jf(r,i,Ak(s))},n),t&&(t.finalized_=!1),r}var N4=new A4,Nk=N4.produce;function kk(e){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,e):i(s)}var k4=kk(),D4=kk,T4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_f:_f.apply(null,arguments)};function zn(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(pn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>bk(n)&&n.type===e,r}var Dk=class gc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,gc.prototype)}static get[Symbol.species](){return gc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new gc(...t[0].concat(this)):new gc(...t.concat(this))}};function cE(e){return Jn(e)?Nk(e,()=>{}):e}function zd(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function P4(e){return typeof e=="boolean"}var M4=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let c=new Dk;return r&&(P4(r)?c.push(k4):c.push(D4(r.extraArgument))),c},Tk="RTK_autoBatch",kt=()=>e=>({payload:e,meta:{[Tk]:!0}}),uE=e=>t=>{setTimeout(t,e)},Pk=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,c=!1;const u=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:uE(10):e.type==="callback"?e.queueNotification:uE(e.timeout),h=()=>{c=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const g=()=>i&&p(),_=n.subscribe(g);return u.add(p),()=>{_(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[Tk],s=!i,s&&(c||(c=!0,m(h))),n.dispatch(p)}finally{i=!0}}})},R4=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new Dk(e);return n&&i.push(Pk(typeof n=="object"?n:void 0)),i};function q4(e){const t=M4(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:c=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(Yb(r))u=yk(r);else throw new Error(pn(1));let m;typeof n=="function"?m=n(t):m=t();let h=_f;i&&(h=T4({trace:!1,...typeof i=="object"&&i}));const p=p4(...m),g=R4(p);let _=typeof c=="function"?c(g):g();const x=h(..._);return vk(u,s,x)}function Mk(e){const t={},r=[];let n;const i={addCase(s,c){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(pn(28));if(u in t)throw new Error(pn(29));return t[u]=c,i},addAsyncThunk(s,c){return c.pending&&(t[s.pending.type]=c.pending),c.rejected&&(t[s.rejected.type]=c.rejected),c.fulfilled&&(t[s.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:s.settled,reducer:c.settled}),i},addMatcher(s,c){return r.push({matcher:s,reducer:c}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function z4(e){return typeof e=="function"}function L4(e,t){let[r,n,i]=Mk(t),s;if(z4(e))s=()=>cE(e());else{const u=cE(e);s=()=>u}function c(u=s(),m){let h=[r[m.type],...n.filter(({matcher:p})=>p(m)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,g)=>{if(g)if(Ya(p)){const x=g(p,m);return x===void 0?p:x}else{if(Jn(p))return Nk(p,_=>g(_,m));{const _=g(p,m);if(_===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return p},u)}return c.getInitialState=s,c}var I4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",U4=(e=21)=>{let t="",r=e;for(;r--;)t+=I4[Math.random()*64|0];return t},B4=Symbol.for("rtk-slice-createasyncthunk");function $4(e,t){return`${e}/${t}`}function H4({creators:e}={}){const t=e?.asyncThunk?.[B4];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(pn(11));const c=(typeof n.reducers=="function"?n.reducers(K4()):n.reducers)||{},u=Object.keys(c),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(A,k){const D=typeof A=="string"?A:A.type;if(!D)throw new Error(pn(12));if(D in m.sliceCaseReducersByType)throw new Error(pn(13));return m.sliceCaseReducersByType[D]=k,h},addMatcher(A,k){return m.sliceMatchers.push({matcher:A,reducer:k}),h},exposeAction(A,k){return m.actionCreators[A]=k,h},exposeCaseReducer(A,k){return m.sliceCaseReducersByName[A]=k,h}};u.forEach(A=>{const k=c[A],D={reducerName:A,type:$4(i,A),createNotation:typeof n.reducers=="function"};G4(k)?W4(D,k,h,t):Y4(D,k,h)});function p(){const[A={},k=[],D=void 0]=typeof n.extraReducers=="function"?Mk(n.extraReducers):[n.extraReducers],M={...A,...m.sliceCaseReducersByType};return L4(n.initialState,L=>{for(let X in M)L.addCase(X,M[X]);for(let X of m.sliceMatchers)L.addMatcher(X.matcher,X.reducer);for(let X of k)L.addMatcher(X.matcher,X.reducer);D&&L.addDefaultCase(D)})}const g=A=>A,_=new Map,x=new WeakMap;let w;function j(A,k){return w||(w=p()),w(A,k)}function S(){return w||(w=p()),w.getInitialState()}function O(A,k=!1){function D(L){let X=L[A];return typeof X>"u"&&k&&(X=zd(x,D,S)),X}function M(L=g){const X=zd(_,k,()=>new WeakMap);return zd(X,L,()=>{const ne={};for(const[ae,G]of Object.entries(n.selectors??{}))ne[ae]=F4(G,L,()=>zd(x,L,S),k);return ne})}return{reducerPath:A,getSelectors:M,get selectors(){return M(D)},selectSlice:D}}const C={name:i,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...O(s),injectInto(A,{reducerPath:k,...D}={}){const M=k??s;return A.inject({reducerPath:M,reducer:j},D),{...C,...O(M,!0)}}};return C}}function F4(e,t,r,n){function i(s,...c){let u=t(s);return typeof u>"u"&&n&&(u=r()),e(u,...c)}return i.unwrapped=e,i}var Zr=H4();function K4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Y4({type:e,reducerName:t,createNotation:r},n,i){let s,c;if("reducer"in n){if(r&&!V4(n))throw new Error(pn(17));s=n.reducer,c=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,c?zn(e,c):zn(e))}function G4(e){return e._reducerDefinitionType==="asyncThunk"}function V4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function W4({type:e,reducerName:t},r,n,i){if(!i)throw new Error(pn(18));const{payloadCreator:s,fulfilled:c,pending:u,rejected:m,settled:h,options:p}=r,g=i(e,s,p);n.exposeAction(t,g),c&&n.addCase(g.fulfilled,c),u&&n.addCase(g.pending,u),m&&n.addCase(g.rejected,m),h&&n.addMatcher(g.settled,h),n.exposeCaseReducer(t,{fulfilled:c||Ld,pending:u||Ld,rejected:m||Ld,settled:h||Ld})}function Ld(){}var X4="task",Rk="listener",qk="completed",Xb="cancelled",Z4=`task-${Xb}`,Q4=`task-${qk}`,My=`${Rk}-${Xb}`,J4=`${Rk}-${qk}`,jm=class{constructor(e){this.code=e,this.message=`${X4} ${Xb} (reason: ${e})`}name="TaskAbortError";message},Zb=(e,t)=>{if(typeof e!="function")throw new TypeError(pn(32))},Cf=()=>{},zk=(e,t=Cf)=>(e.catch(t),e),Lk=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),No=e=>{if(e.aborted)throw new jm(e.reason)};function Ik(e,t){let r=Cf;return new Promise((n,i)=>{const s=()=>i(new jm(e.reason));if(e.aborted){s();return}r=Lk(e,s),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Cf})}var e5=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof jm?"cancelled":"rejected",error:r}}finally{t?.()}},Af=e=>t=>zk(Ik(e,t).then(r=>(No(e),r))),Uk=e=>{const t=Af(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Is}=Object,dE={},Sm="listenerMiddleware",t5=(e,t)=>{const r=n=>Lk(e,()=>n.abort(e.reason));return(n,i)=>{Zb(n);const s=new AbortController;r(s);const c=e5(async()=>{No(e),No(s.signal);const u=await n({pause:Af(s.signal),delay:Uk(s.signal),signal:s.signal});return No(s.signal),u},()=>s.abort(Q4));return i?.autoJoin&&t.push(c.catch(Cf)),{result:Af(e)(c),cancel(){s.abort(Z4)}}}},r5=(e,t)=>{const r=async(n,i)=>{No(t);let s=()=>{};const u=[new Promise((m,h)=>{let p=e({predicate:n,effect:(g,_)=>{_.unsubscribe(),m([g,_.getState(),_.getOriginalState()])}});s=()=>{p(),h()}})];i!=null&&u.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await Ik(t,Promise.race(u));return No(t),m}finally{s()}};return(n,i)=>zk(r(n,i))},Bk=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=zn(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(pn(21));return Zb(s),{predicate:i,type:t,effect:s}},$k=Is(e=>{const{type:t,predicate:r,effect:n}=Bk(e);return{id:U4(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(pn(22))}}},{withTypes:()=>$k}),fE=(e,t)=>{const{type:r,effect:n,predicate:i}=Bk(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},Ry=e=>{e.pending.forEach(t=>{t.abort(My)})},n5=(e,t)=>()=>{for(const r of t.keys())Ry(r);e.clear()},mE=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Hk=Is(zn(`${Sm}/add`),{withTypes:()=>Hk}),a5=zn(`${Sm}/removeAll`),Fk=Is(zn(`${Sm}/remove`),{withTypes:()=>Fk}),i5=(...e)=>{console.error(`${Sm}/error`,...e)},Kc=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},i=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:s,onError:c=i5}=e;Zb(c);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w?.cancelActive&&Ry(x)}),m=x=>{const w=fE(t,x)??$k(x);return u(w)};Is(m,{withTypes:()=>m});const h=x=>{const w=fE(t,x);return w&&(w.unsubscribe(),x.cancelActive&&Ry(w)),!!w};Is(h,{withTypes:()=>h});const p=async(x,w,j,S)=>{const O=new AbortController,C=r5(m,O.signal),A=[];try{x.pending.add(O),n(x),await Promise.resolve(x.effect(w,Is({},j,{getOriginalState:S,condition:(k,D)=>C(k,D).then(Boolean),take:C,delay:Uk(O.signal),pause:Af(O.signal),extra:s,signal:O.signal,fork:t5(O.signal,A),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((k,D,M)=>{k!==O&&(k.abort(My),M.delete(k))})},cancel:()=>{O.abort(My),x.pending.delete(O)},throwIfCancelled:()=>{No(O.signal)}})))}catch(k){k instanceof jm||mE(c,k,{raisedBy:"effect"})}finally{await Promise.all(A),O.abort(J4),i(x),x.pending.delete(O)}},g=n5(t,r);return{middleware:x=>w=>j=>{if(!bk(j))return w(j);if(Hk.match(j))return m(j.payload);if(a5.match(j)){g();return}if(Fk.match(j))return h(j.payload);let S=x.getState();const O=()=>{if(S===dE)throw new Error(pn(23));return S};let C;try{if(C=w(j),t.size>0){const A=x.getState(),k=Array.from(t.values());for(const D of k){let M=!1;try{M=D.predicate(j,A,S)}catch(L){M=!1,mE(c,L,{raisedBy:"predicate"})}M&&p(D,j,x,O)}}}finally{S=dE}return C},startListening:m,stopListening:h,clearListeners:g}};function pn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var o5={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Kk=Zr({name:"chartLayout",initialState:o5,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:s5,setLayout:l5,setChartSize:c5,setScale:u5}=Kk.actions,d5=Kk.reducer;function Yk(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function zt(e){return Number.isFinite(e)}function ma(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function hE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(r),!0).forEach(function(n){f5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f5(e,t,r){return(t=m5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m5(e){var t=h5(e,"string");return typeof t=="symbol"?t:t+""}function h5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pt(e,t,r){return Mt(e)||Mt(t)?r:fa(t)?qo(e,t,r):typeof t=="function"?t(e):r}var p5=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:s,verticalAlign:c,layout:u}=t;if((u==="vertical"||u==="horizontal"&&c==="middle")&&s!=="center"&&ke(e[s]))return zs(zs({},e),{},{[s]:e[s]+(n||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&c!=="middle"&&ke(e[c]))return zs(zs({},e),{},{[c]:e[c]+(i||0)})}return e},Vi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Gk=(e,t,r,n)=>{if(n)return e.map(u=>u.coordinate);var i,s,c=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===r&&(s=!0),u.coordinate));return i||c.push(t),s||c.push(r),c},Vk=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:s,scale:c,realScaleType:u,isCategorical:m,categoricalDomain:h,tickCount:p,ticks:g,niceTicks:_,axisType:x}=e;if(!c)return null;var w=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=i==="category"&&c.bandwidth?c.bandwidth()/w:0;if(j=x==="angleAxis"&&s&&s.length>=2?vr(s[0]-s[1])*2*j:j,g||_){var S=(g||_||[]).map((O,C)=>{var A=n?n.indexOf(O):O;return{coordinate:c(A)+j,value:O,offset:j,index:C}});return S.filter(O=>!Qn(O.coordinate))}return m&&h?h.map((O,C)=>({coordinate:c(O)+j,value:O,index:C,offset:j})):c.ticks&&p!=null?c.ticks(p).map((O,C)=>({coordinate:c(O)+j,value:O,offset:j,index:C})):c.domain().map((O,C)=>({coordinate:c(O)+j,value:n?n[O]:O,index:C,offset:j}))},pE=1e-4,g5=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-pE,s=Math.max(n[0],n[1])+pE,c=e(t[0]),u=e(t[r-1]);(c<i||c>s||u<i||u>s)&&e.domain([t[0],t[r-1]])}},v5=(e,t)=>{if(!t||t.length!==2||!ke(t[0])||!ke(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!ke(e[0])||e[0]<r)&&(i[0]=r),(!ke(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},y5=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0,u=0;u<r;++u){var m=e[u],h=m?.[i];if(h!=null){var p=h[1],g=h[0],_=Qn(p)?g:p;_>=0?(h[0]=s,h[1]=s+_,s=p):(h[0]=c,h[1]=c+_,c=p)}}}},b5=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0;c<r;++c){var u=e[c],m=u?.[i];if(m!=null){var h=Qn(m[1])?m[0]:m[1];h>=0?(m[0]=s,m[1]=s+h,s=m[1]):(m[0]=0,m[1]=0)}}}},_5={sign:y5,expand:G3,none:Ro,silhouette:V3,wiggle:W3,positive:b5},x5=(e,t,r)=>{var n,i=(n=_5[r])!==null&&n!==void 0?n:Ro,s=Y3().keys(t).value((u,m)=>Number(pt(u,m,0))).order(Sy).offset(i),c=s(e);return c.forEach((u,m)=>{u.forEach((h,p)=>{var g=pt(e[p],t[m],0);Array.isArray(g)&&g.length===2&&ke(g[0])&&ke(g[1])&&(h[0]=g[0],h[1]=g[1])})}),c};function w5(e){return e==null?void 0:String(e)}function gE(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:s,dataKey:c}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Mt(i[t.dataKey])){var u=ek(r,"value",i[t.dataKey]);if(u)return u.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var m=pt(i,Mt(c)?t.dataKey:c);return Mt(m)?null:t.scale(m)}var vE=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:s,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var u=pt(s,t.dataKey,t.scale.domain()[c]);return Mt(u)?null:t.scale(u)-i/2+n},j5=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},S5=e=>{var t=e.flat(2).filter(ke);return[Math.min(...t),Math.max(...t)]},E5=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],O5=(e,t,r)=>{if(e!=null)return E5(Object.keys(e).reduce((n,i)=>{var s=e[i];if(!s)return n;var{stackedData:c}=s,u=c.reduce((m,h)=>{var p=Yk(h,t,r),g=S5(p);return!zt(g[0])||!zt(g[1])?m:[Math.min(m[0],g[0]),Math.max(m[1],g[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},yE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hs=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=pm(t,p=>p.coordinate),s=1/0,c=1,u=i.length;c<u;c++){var m=i[c],h=i[c-1];s=Math.min((m?.coordinate||0)-(h?.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function _E(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:s}=e;return zs(zs({},t),{},{dataKey:r,payload:n,value:i,name:s})}function Zs(e,t){if(e)return String(e);if(typeof t=="string")return t}var C5=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},A5=(e,t)=>t==="centric"?e.angle:e.radius,ti=e=>e.layout.width,ri=e=>e.layout.height,N5=e=>e.layout.scale,Wk=e=>e.layout.margin,Em=W(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Om=W(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Xk="data-recharts-item-index",Zk="data-recharts-item-id",Yc=60;function xE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Id(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(r),!0).forEach(function(n){k5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k5(e,t,r){return(t=D5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D5(e){var t=T5(e,"string");return typeof t=="symbol"?t:t+""}function T5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var P5=e=>e.brush.height;function M5(e){var t=Om(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Yc;return r+i}return r},0)}function R5(e){var t=Om(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Yc;return r+i}return r},0)}function q5(e){var t=Em(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function z5(e){var t=Em(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var cr=W([ti,ri,Wk,P5,M5,R5,q5,z5,gk,c4],(e,t,r,n,i,s,c,u,m,h)=>{var p={left:(r.left||0)+i,right:(r.right||0)+s},g={top:(r.top||0)+c,bottom:(r.bottom||0)+u},_=Id(Id({},g),p),x=_.bottom;_.bottom+=n,_=p5(_,m,h);var w=e-_.left-_.right,j=t-_.top-_.bottom;return Id(Id({brushBottom:x},_),{},{width:Math.max(w,0),height:Math.max(j,0)})}),L5=W(cr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qb=W(ti,ri,(e,t)=>({x:0,y:0,width:e,height:t})),I5=y.createContext(null),Tr=()=>y.useContext(I5)!=null,Cm=e=>e.brush,Am=W([Cm,cr,Wk],(e,t,r)=>({height:e.height,x:ke(e.x)?e.x:t.left,y:ke(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:ke(e.width)?e.width:t.width})),wv={},jv={},Sv={},wE;function U5(){return wE||(wE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:s}={}){let c,u=null;const m=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{u!==null&&(r.apply(c,u),c=void 0,u=null)},g=()=>{h&&p(),j()};let _=null;const x=()=>{_!=null&&clearTimeout(_),_=setTimeout(()=>{_=null,g()},n)},w=()=>{_!==null&&(clearTimeout(_),_=null)},j=()=>{w(),c=void 0,u=null},S=()=>{p()},O=function(...C){if(i?.aborted)return;c=this,u=C;const A=_==null;x(),m&&A&&p()};return O.schedule=x,O.cancel=j,O.flush=S,i?.addEventListener("abort",j,{once:!0}),O}e.debounce=t})(Sv)),Sv}var jE;function B5(){return jE||(jE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U5();function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:u=!0,maxWait:m}=s,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let p,g=null;const _=t.debounce(function(...j){p=n.apply(this,j),g=null},i,{edges:h}),x=function(...j){return m!=null&&(g===null&&(g=Date.now()),Date.now()-g>=m)?(p=n.apply(this,j),g=Date.now(),_.cancel(),_.schedule(),p):(_.apply(this,j),p)},w=()=>(_.flush(),p);return x.cancel=_.cancel,x.flush=w,x}e.debounce=r})(jv)),jv}var SE;function $5(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=B5();function r(n,i=0,s={}){const{leading:c=!0,trailing:u=!0}=s;return t.debounce(n,i,{leading:c,maxWait:i,trailing:u})}e.throttle=r})(wv)),wv}var Ev,EE;function H5(){return EE||(EE=1,Ev=$5().throttle),Ev}var F5=H5();const K5=Qa(F5);var Nf=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(r.replace(/%s/g,()=>i[c++]))}},Qk=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:c}=r,u=Ka(n)?e:Number(n),m=Ka(i)?t:Number(i);return s&&s>0&&(u?m=u/s:m&&(u=m*s),c&&m!=null&&m>c&&(m=c)),{calculatedWidth:u,calculatedHeight:m}},Y5={width:0,height:0,overflow:"visible"},G5={width:0,overflowX:"visible"},V5={height:0,overflowY:"visible"},W5={},X5=e=>{var{width:t,height:r}=e,n=Ka(t),i=Ka(r);return n&&i?Y5:n?G5:i?V5:W5};function Z5(e){var{width:t,height:r,aspect:n}=e,i=t,s=r;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qy.apply(null,arguments)}function OE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function CE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(r),!0).forEach(function(n){Q5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Q5(e,t,r){return(t=J5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J5(e){var t=eU(e,"string");return typeof t=="symbol"?t:t+""}function eU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jk=y.createContext({width:-1,height:-1});function tU(e){return ma(e.width)&&ma(e.height)}function eD(e){var{children:t,width:r,height:n}=e,i=y.useMemo(()=>({width:r,height:n}),[r,n]);return tU(i)?y.createElement(Jk.Provider,{value:i},t):null}var Jb=()=>y.useContext(Jk),rU=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:c=0,minHeight:u,maxHeight:m,children:h,debounce:p=0,id:g,className:_,onResize:x,style:w={}}=e,j=y.useRef(null),S=y.useRef();S.current=x,y.useImperativeHandle(t,()=>j.current);var[O,C]=y.useState({containerWidth:n.width,containerHeight:n.height}),A=y.useCallback((X,ne)=>{C(ae=>{var G=Math.round(X),B=Math.round(ne);return ae.containerWidth===G&&ae.containerHeight===B?ae:{containerWidth:G,containerHeight:B}})},[]);y.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Hc;var X=B=>{var ce,{width:ge,height:q}=B[0].contentRect;A(ge,q),(ce=S.current)===null||ce===void 0||ce.call(S,ge,q)};p>0&&(X=K5(X,p,{trailing:!0,leading:!1}));var ne=new ResizeObserver(X),{width:ae,height:G}=j.current.getBoundingClientRect();return A(ae,G),ne.observe(j.current),()=>{ne.disconnect()}},[A,p]);var{containerWidth:k,containerHeight:D}=O;Nf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:M,calculatedHeight:L}=Qk(k,D,{width:i,height:s,aspect:r,maxHeight:m});return Nf(M!=null&&M>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,L,i,s,c,u,r),y.createElement("div",{id:g?"".concat(g):void 0,className:ot("recharts-responsive-container",_),style:CE(CE({},w),{},{width:i,height:s,minWidth:c,minHeight:u,maxHeight:m}),ref:j},y.createElement("div",{style:X5({width:i,height:s})},y.createElement(eD,{width:M,height:L},h)))}),Ov=y.forwardRef((e,t)=>{var r=Jb();if(ma(r.width)&&ma(r.height))return e.children;var{width:n,height:i}=Z5({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:c}=Qk(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return ke(s)&&ke(c)?y.createElement(eD,{width:s,height:c},e.children):y.createElement(rU,qy({},e,{width:n,height:i,ref:t}))});function tD(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Nm=()=>{var e,t=Tr(),r=De(L5),n=De(Am),i=(e=De(Cm))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},nU={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},rD=()=>{var e;return(e=De(cr))!==null&&e!==void 0?e:nU},nD=()=>De(ti),aD=()=>De(ri),TZ=()=>De(e=>e.layout.margin),Je=e=>e.layout.layoutType,Ko=()=>De(Je),PZ=()=>{var e=Ko();if(e==="horizontal"||e==="vertical")return e},aU=()=>{var e=Ko();return e!==void 0},km=e=>{var t=Rt(),r=Tr(),{width:n,height:i}=e,s=Jb(),c=n,u=i;return s&&(c=s.width>0?s.width:n,u=s.height>0?s.height:i),y.useEffect(()=>{!r&&ma(c)&&ma(u)&&t(c5({width:c,height:u}))},[t,r,c,u]),null},iD=Symbol.for("immer-nothing"),AE=Symbol.for("immer-draftable"),vn=Symbol.for("immer-state");function Gn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Oc=Object.getPrototypeOf;function Fs(e){return!!e&&!!e[vn]}function Lo(e){return e?oD(e)||Array.isArray(e)||!!e[AE]||!!e.constructor?.[AE]||Gc(e)||Tm(e):!1}var iU=Object.prototype.constructor.toString(),NE=new WeakMap;function oD(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=NE.get(r);return n===void 0&&(n=Function.toString.call(r),NE.set(r,n)),n===iU}function kf(e,t,r=!0){Dm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Dm(e){const t=e[vn];return t?t.type_:Array.isArray(e)?1:Gc(e)?2:Tm(e)?3:0}function zy(e,t){return Dm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function sD(e,t,r){const n=Dm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function oU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Gc(e){return e instanceof Map}function Tm(e){return e instanceof Set}function wo(e){return e.copy_||e.base_}function Ly(e,t){if(Gc(e))return new Map(e);if(Tm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=oD(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[vn];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[c]})}return Object.create(Oc(e),n)}else{const n=Oc(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function e0(e,t=!1){return Pm(e)||Fs(e)||!Lo(e)||(Dm(e)>1&&Object.defineProperties(e,{set:Ud,add:Ud,clear:Ud,delete:Ud}),Object.freeze(e),t&&Object.values(e).forEach(r=>e0(r,!0))),e}function sU(){Gn(2)}var Ud={value:sU};function Pm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var lU={};function Io(e){const t=lU[e];return t||Gn(0,e),t}var Cc;function lD(){return Cc}function cU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function kE(e,t){t&&(Io("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Iy(e){Uy(e),e.drafts_.forEach(uU),e.drafts_=null}function Uy(e){e===Cc&&(Cc=e.parent_)}function DE(e){return Cc=cU(Cc,e)}function uU(e){const t=e[vn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function TE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[vn].modified_&&(Iy(t),Gn(4)),Lo(e)&&(e=Df(t,e),t.parent_||Tf(t,e)),t.patches_&&Io("Patches").generateReplacementPatches_(r[vn].base_,e,t.patches_,t.inversePatches_)):e=Df(t,r,[]),Iy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==iD?e:void 0}function Df(e,t,r){if(Pm(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[vn];if(!i)return kf(t,(s,c)=>PE(e,i,t,s,c,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Tf(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let c=s,u=!1;i.type_===3&&(c=new Set(s),s.clear(),u=!0),kf(c,(m,h)=>PE(e,i,s,m,h,r,u),n),Tf(e,s,!1),r&&e.patches_&&Io("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function PE(e,t,r,n,i,s,c){if(i==null||typeof i!="object"&&!c)return;const u=Pm(i);if(!(u&&!c)){if(Fs(i)){const m=s&&t&&t.type_!==3&&!zy(t.assigned_,n)?s.concat(n):void 0,h=Df(e,i,m);if(sD(r,n,h),Fs(h))e.canAutoFreeze_=!1;else return}else c&&r.add(i);if(Lo(i)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&u)return;Df(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Gc(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Tf(e,i)}}}function Tf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&e0(t,r)}function dU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:lD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=t0;r&&(i=[n],s=Ac);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,u}var t0={get(e,t){if(t===vn)return e;const r=wo(e);if(!zy(r,t))return fU(e,r,t);const n=r[t];return e.finalized_||!Lo(n)?n:n===Cv(e.base_,t)?(Av(e),e.copy_[t]=$y(n,e)):n},has(e,t){return t in wo(e)},ownKeys(e){return Reflect.ownKeys(wo(e))},set(e,t,r){const n=cD(wo(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Cv(wo(e),t),s=i?.[vn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(oU(r,i)&&(r!==void 0||zy(e.base_,t)))return!0;Av(e),By(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Cv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Av(e),By(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=wo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Gn(11)},getPrototypeOf(e){return Oc(e.base_)},setPrototypeOf(){Gn(12)}},Ac={};kf(t0,(e,t)=>{Ac[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ac.deleteProperty=function(e,t){return Ac.set.call(this,e,t,void 0)};Ac.set=function(e,t,r){return t0.set.call(this,e[0],t,r,e[0])};function Cv(e,t){const r=e[vn];return(r?wo(r):e)[t]}function fU(e,t,r){const n=cD(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function cD(e,t){if(!(t in e))return;let r=Oc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Oc(r)}}function By(e){e.modified_||(e.modified_=!0,e.parent_&&By(e.parent_))}function Av(e){e.copy_||(e.copy_=Ly(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var mU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const c=this;return function(m=s,...h){return c.produce(m,p=>r.call(this,p,...h))}}typeof r!="function"&&Gn(6),n!==void 0&&typeof n!="function"&&Gn(7);let i;if(Lo(t)){const s=DE(this),c=$y(t,void 0);let u=!0;try{i=r(c),u=!1}finally{u?Iy(s):Uy(s)}return kE(s,n),TE(i,s)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===iD&&(i=void 0),this.autoFreeze_&&e0(i,!0),n){const s=[],c=[];Io("Patches").generateReplacementPatches_(t,i,s,c),n(s,c)}return i}else Gn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...u)=>this.produceWithPatches(c,m=>t(m,...u));let n,i;return[this.produce(t,r,(c,u)=>{n=c,i=u}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Lo(e)||Gn(8),Fs(e)&&(e=hU(e));const t=DE(this),r=$y(e,void 0);return r[vn].isManual_=!0,Uy(t),r}finishDraft(e,t){const r=e&&e[vn];(!r||!r.isManual_)&&Gn(9);const{scope_:n}=r;return kE(n,t),TE(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Io("Patches").applyPatches_;return Fs(e)?n(e,t):this.produce(e,i=>n(i,t))}};function $y(e,t){const r=Gc(e)?Io("MapSet").proxyMap_(e,t):Tm(e)?Io("MapSet").proxySet_(e,t):dU(e,t);return(t?t.scope_:lD()).drafts_.push(r),r}function hU(e){return Fs(e)||Gn(10,e),uD(e)}function uD(e){if(!Lo(e)||Pm(e))return e;const t=e[vn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ly(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Ly(e,!0);return kf(r,(i,s)=>{sD(r,i,uD(s))},n),t&&(t.finalized_=!1),r}var pU=new mU;pU.produce;var gU={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},dD=Zr({name:"legend",initialState:gU,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:kt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Xn(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:kt()},removeLegendPayload:{reducer(e,t){var r=Xn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:kt()}}}),{setLegendSize:MZ,setLegendSettings:RZ,addLegendPayload:fD,replaceLegendPayload:mD,removeLegendPayload:hD}=dD.actions,vU=dD.reducer;function Hy(){return Hy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hy.apply(null,arguments)}function ME(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(r),!0).forEach(function(n){yU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ME(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yU(e,t,r){return(t=bU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bU(e){var t=_U(e,"string");return typeof t=="symbol"?t:t+""}function _U(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xU(e){return Array.isArray(e)&&fa(e[0])&&fa(e[1])?e.join(" ~ "):e}var wU=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:s,formatter:c,itemSorter:u,wrapperClassName:m,labelClassName:h,label:p,labelFormatter:g,accessibilityLayer:_=!1}=e,x=()=>{if(s&&s.length){var D={padding:0,margin:0},M=(u?pm(s,u):s).map((L,X)=>{if(L.type==="none")return null;var ne=L.formatter||c||xU,{value:ae,name:G}=L,B=ae,ce=G;if(ne){var ge=ne(ae,G,L,X,s);if(Array.isArray(ge))[B,ce]=ge;else if(ge!=null)B=ge;else return null}var q=Nv({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:q},fa(ce)?y.createElement("span",{className:"recharts-tooltip-item-name"},ce):null,fa(ce)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},B),y.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:D},M)}return null},w=Nv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=Nv({margin:0},i),S=!Mt(p),O=S?p:"",C=ot("recharts-default-tooltip",m),A=ot("recharts-tooltip-label",h);S&&g&&s!==void 0&&s!==null&&(O=g(p,s));var k=_?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",Hy({className:C,style:w},k),y.createElement("p",{className:A,style:j},y.isValidElement(O)?O:"".concat(O)),x())},oc="recharts-tooltip-wrapper",jU={visibility:"hidden"};function SU(e){var{coordinate:t,translateX:r,translateY:n}=e;return ot(oc,{["".concat(oc,"-right")]:ke(r)&&t&&ke(t.x)&&r>=t.x,["".concat(oc,"-left")]:ke(r)&&t&&ke(t.x)&&r<t.x,["".concat(oc,"-bottom")]:ke(n)&&t&&ke(t.y)&&n>=t.y,["".concat(oc,"-top")]:ke(n)&&t&&ke(t.y)&&n<t.y})}function RE(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:s,reverseDirection:c,tooltipDimension:u,viewBox:m,viewBoxDimension:h}=e;if(s&&ke(s[n]))return s[n];var p=r[n]-u-(i>0?i:0),g=r[n]+i;if(t[n])return c[n]?p:g;var _=m[n];if(_==null)return 0;if(c[n]){var x=p,w=_;return x<w?Math.max(g,_):Math.max(p,_)}if(h==null)return 0;var j=g+u,S=_+h;return j>S?Math.max(p,_):Math.max(g,_)}function EU(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function OU(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:c,useTranslate3d:u,viewBox:m}=e,h,p,g;return c.height>0&&c.width>0&&r?(p=RE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.width,viewBox:m,viewBoxDimension:m.width}),g=RE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.height,viewBox:m,viewBoxDimension:m.height}),h=EU({translateX:p,translateY:g,useTranslate3d:u})):h=jU,{cssProperties:h,cssClasses:SU({translateX:p,translateY:g,coordinate:r})}}function qE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(r),!0).forEach(function(n){Fy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fy(e,t,r){return(t=CU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CU(e){var t=AU(e,"string");return typeof t=="symbol"?t:t+""}function AU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class NU extends y.PureComponent{constructor(){super(...arguments),Fy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Fy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:c,hasPayload:u,isAnimationActive:m,offset:h,position:p,reverseDirection:g,useTranslate3d:_,viewBox:x,wrapperStyle:w,lastBoundingBox:j,innerRef:S,hasPortalFromProps:O}=this.props,{cssClasses:C,cssProperties:A}=OU({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:h,position:p,reverseDirection:g,tooltipBox:{height:j.height,width:j.width},useTranslate3d:_,viewBox:x}),k=O?{}:Bd(Bd({transition:m&&t?"transform ".concat(n,"ms ").concat(i):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=Bd(Bd({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:D,ref:S},s)}}var pD=()=>{var e;return(e=De(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ky.apply(null,arguments)}function zE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function LE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(r),!0).forEach(function(n){kU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kU(e,t,r){return(t=DU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DU(e){var t=TU(e,"string");return typeof t=="symbol"?t:t+""}function TU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IE={curveBasisClosed:R3,curveBasisOpen:q3,curveBasis:M3,curveBumpX:_3,curveBumpY:x3,curveLinearClosed:z3,curveLinear:fm,curveMonotoneX:L3,curveMonotoneY:I3,curveNatural:U3,curveStep:B3,curveStepAfter:H3,curveStepBefore:$3},Pf=e=>zt(e.x)&&zt(e.y),UE=e=>e.base!=null&&Pf(e.base)&&Pf(e),sc=e=>e.x,lc=e=>e.y,PU=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat($c(e));return(r==="curveMonotone"||r==="curveBump")&&t?IE["".concat(r).concat(t==="vertical"?"Y":"X")]:IE[r]||fm},MU=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:s=!1}=e,c=PU(t,i),u=s?r.filter(Pf):r,m;if(Array.isArray(n)){var h=r.map((x,w)=>LE(LE({},x),{},{base:n[w]}));i==="vertical"?m=Pd().y(lc).x1(sc).x0(x=>x.base.x):m=Pd().x(sc).y1(lc).y0(x=>x.base.y);var p=m.defined(UE).curve(c),g=s?h.filter(UE):h;return p(g)}i==="vertical"&&ke(n)?m=Pd().y(lc).x1(sc).x0(n):ke(n)?m=Pd().x(sc).y1(lc).y0(n):m=BN().x(sc).y(lc);var _=m.defined(Pf).curve(c);return _(u)},r0=e=>{var{className:t,points:r,path:n,pathRef:i}=e,s=Ko();if((!r||!r.length)&&!n)return null;var c={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},u=r&&r.length?MU(c):n;return y.createElement("path",Ky({},gn(e),Hb(e),{className:ot("recharts-curve",t),d:u===null?void 0:u,ref:i}))},RU=["x","y","top","left","width","height","className"];function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yy.apply(null,arguments)}function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(r),!0).forEach(function(n){zU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zU(e,t,r){return(t=LU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LU(e){var t=IU(e,"string");return typeof t=="symbol"?t:t+""}function IU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function UU(e,t){if(e==null)return{};var r,n,i=BU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function BU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var $U=(e,t,r,n,i,s)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),HU=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:s=0,height:c=0,className:u}=e,m=UU(e,RU),h=qU({x:t,y:r,top:n,left:i,width:s,height:c},m);return!ke(t)||!ke(r)||!ke(s)||!ke(c)||!ke(n)||!ke(i)?null:y.createElement("path",Yy({},Ur(h),{className:ot("recharts-cross",u),d:$U(t,r,s,c,n,i)}))};function FU(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function HE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(n){KU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KU(e,t,r){return(t=YU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YU(e){var t=GU(e,"string");return typeof t=="symbol"?t:t+""}function GU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VU=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),gD=(e,t,r)=>e.map(n=>"".concat(VU(n)," ").concat(t,"ms ").concat(r)).join(","),WU=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),Nc=(e,t)=>Object.keys(t).reduce((r,n)=>HE(HE({},r),{},{[n]:e(n,t[n])}),{});function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(n){XU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XU(e,t,r){return(t=ZU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZU(e){var t=QU(e,"string");return typeof t=="symbol"?t:t+""}function QU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mf=(e,t,r)=>e+(t-e)*r,Gy=e=>{var{from:t,to:r}=e;return t!==r},vD=(e,t,r)=>{var n=Nc((i,s)=>{if(Gy(s)){var[c,u]=e(s.from,s.to,s.velocity);return lr(lr({},s),{},{from:c,velocity:u})}return s},t);return r<1?Nc((i,s)=>Gy(s)&&n[i]!=null?lr(lr({},s),{},{velocity:Mf(s.velocity,n[i].velocity,r),from:Mf(s.from,n[i].from,r)}):s,t):vD(e,n,r-1)};function JU(e,t,r,n,i,s){var c,u=n.reduce((_,x)=>lr(lr({},_),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),m=()=>Nc((_,x)=>x.from,u),h=()=>!Object.values(u).filter(Gy).length,p=null,g=_=>{c||(c=_);var x=_-c,w=x/r.dt;u=vD(r,u,w),i(lr(lr(lr({},e),t),m())),c=_,h()||(p=s.setTimeout(g))};return()=>(p=s.setTimeout(g),()=>{var _;(_=p)===null||_===void 0||_()})}function e6(e,t,r,n,i,s,c){var u=null,m=i.reduce((g,_)=>{var x=e[_],w=t[_];return x==null||w==null?g:lr(lr({},g),{},{[_]:[x,w]})},{}),h,p=g=>{h||(h=g);var _=(g-h)/n,x=Nc((j,S)=>Mf(...S,r(_)),m);if(s(lr(lr(lr({},e),t),x)),_<1)u=c.setTimeout(p);else{var w=Nc((j,S)=>Mf(...S,r(1)),m);s(lr(lr(lr({},e),t),w))}};return()=>(u=c.setTimeout(p),()=>{var g;(g=u)===null||g===void 0||g()})}const t6=(e,t,r,n,i,s)=>{var c=WU(e,t);return r==null?()=>(i(lr(lr({},e),t)),()=>{}):r.isStepper===!0?JU(e,t,r,c,i,s):e6(e,t,r,n,c,i,s)};var Rf=1e-4,yD=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],bD=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),KE=(e,t)=>r=>{var n=yD(e,t);return bD(n,r)},r6=(e,t)=>r=>{var n=yD(e,t),i=[...n.map((s,c)=>s*c).slice(1),0];return bD(i,r)},n6=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},a6=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=n6(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},i6=(e,t,r,n)=>{var i=KE(e,r),s=KE(t,n),c=r6(e,r),u=h=>h>1?1:h<0?0:h,m=h=>{for(var p=h>1?1:h,g=p,_=0;_<8;++_){var x=i(g)-p,w=c(g);if(Math.abs(x-p)<Rf||w<Rf)return s(g);g=u(g-x/w)}return s(g)};return m.isStepper=!1,m},YE=function(){return i6(...a6(...arguments))},o6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,s=(c,u,m)=>{var h=-(c-u)*r,p=m*n,g=m+(h-p)*i/1e3,_=m*i/1e3+c;return Math.abs(_-u)<Rf&&Math.abs(g)<Rf?[u,0]:[_,g]};return s.isStepper=!0,s.dt=i,s},s6=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return YE(e);case"spring":return o6();default:if(e.split("(")[0]==="cubic-bezier")return YE(e)}return typeof e=="function"?e:null};function l6(e){var t,r=()=>null,n=!1,i=null,s=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var u=c,[m,...h]=u;if(typeof m=="number"){i=e.setTimeout(s.bind(null,h),m);return}s(m),i=e.setTimeout(s.bind(null,h));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,i&&(i(),i=null),s(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class c6{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function u6(){return l6(new c6)}var d6=y.createContext(u6);function f6(e,t){var r=y.useContext(d6);return y.useMemo(()=>t??r(e),[e,t,r])}var m6=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Mm={isSsr:m6()},h6={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},GE={t:0},kv={t:1};function Vc(e){var t=br(e,h6),{isActive:r,canBegin:n,duration:i,easing:s,begin:c,onAnimationEnd:u,onAnimationStart:m,children:h}=t,p=r==="auto"?!Mm.isSsr:r,g=f6(t.animationId,t.animationManager),[_,x]=y.useState(p?GE:kv),w=y.useRef(null);return y.useEffect(()=>{p||x(kv)},[p]),y.useEffect(()=>{if(!p||!n)return Hc;var j=t6(GE,kv,s6(s),i,x,g.getTimeoutController()),S=()=>{w.current=j()};return g.start([m,c,S,i,u]),()=>{g.stop(),w.current&&w.current(),u()}},[p,n,i,s,c,m,u,g]),h(_.t)}function Wc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(wc(t)),n=y.useRef(e);return n.current!==e&&(r.current=wc(t),n.current=e),r.current}var p6=["radius"],g6=["radius"],VE,WE,XE,ZE,QE,JE,eO,tO,rO,nO;function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(r),!0).forEach(function(n){v6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function v6(e,t,r){return(t=y6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y6(e){var t=b6(e,"string");return typeof t=="symbol"?t:t+""}function b6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qf.apply(null,arguments)}function oO(e,t){if(e==null)return{};var r,n,i=_6(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var sO=(e,t,r,n,i)=>{var s=Ui(r),c=Ui(n),u=Math.min(Math.abs(s)/2,Math.abs(c)/2),m=c>=0?1:-1,h=s>=0?1:-1,p=c>=0&&s>=0||c<0&&s<0?1:0,g;if(u>0&&i instanceof Array){for(var _=[0,0,0,0],x=0,w=4;x<w;x++)_[x]=i[x]>u?u:i[x];g=Ft(VE||(VE=sa(["M",",",""])),e,t+m*_[0]),_[0]>0&&(g+=Ft(WE||(WE=sa(["A ",",",",0,0,",",",",",""])),_[0],_[0],p,e+h*_[0],t)),g+=Ft(XE||(XE=sa(["L ",",",""])),e+r-h*_[1],t),_[1]>0&&(g+=Ft(ZE||(ZE=sa(["A ",",",",0,0,",`,
        `,",",""])),_[1],_[1],p,e+r,t+m*_[1])),g+=Ft(QE||(QE=sa(["L ",",",""])),e+r,t+n-m*_[2]),_[2]>0&&(g+=Ft(JE||(JE=sa(["A ",",",",0,0,",`,
        `,",",""])),_[2],_[2],p,e+r-h*_[2],t+n)),g+=Ft(eO||(eO=sa(["L ",",",""])),e+h*_[3],t+n),_[3]>0&&(g+=Ft(tO||(tO=sa(["A ",",",",0,0,",`,
        `,",",""])),_[3],_[3],p,e,t+n-m*_[3])),g+="Z"}else if(u>0&&i===+i&&i>0){var j=Math.min(u,i);g=Ft(rO||(rO=sa(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*j,j,j,p,e+h*j,t,e+r-h*j,t,j,j,p,e+r,t+m*j,e+r,t+n-m*j,j,j,p,e+r-h*j,t+n,e+h*j,t+n,j,j,p,e,t+n-m*j)}else g=Ft(nO||(nO=sa(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return g},lO={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_D=e=>{var t=br(e,lO),r=y.useRef(null),[n,i]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var I=r.current.getTotalLength();I&&i(I)}catch{}},[]);var{x:s,y:c,width:u,height:m,radius:h,className:p}=t,{animationEasing:g,animationDuration:_,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:j}=t,S=y.useRef(u),O=y.useRef(m),C=y.useRef(s),A=y.useRef(c),k=y.useMemo(()=>({x:s,y:c,width:u,height:m,radius:h}),[s,c,u,m,h]),D=Wc(k,"rectangle-");if(s!==+s||c!==+c||u!==+u||m!==+m||u===0||m===0)return null;var M=ot("recharts-rectangle",p);if(!j){var L=Ur(t),{radius:X}=L,ne=oO(L,p6);return y.createElement("path",qf({},ne,{x:Ui(s),y:Ui(c),width:Ui(u),height:Ui(m),radius:typeof h=="number"?h:void 0,className:M,d:sO(s,c,u,m,h)}))}var ae=S.current,G=O.current,B=C.current,ce=A.current,ge="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),R=gD(["strokeDasharray"],_,typeof g=="string"?g:lO.animationEasing);return y.createElement(Vc,{animationId:D,key:D,canBegin:n>0,duration:_,easing:g,isActive:j,begin:x},I=>{var ee=Dt(ae,u,I),U=Dt(G,m,I),me=Dt(B,s,I),je=Dt(ce,c,I);r.current&&(S.current=ee,O.current=U,C.current=me,A.current=je);var J;w?I>0?J={transition:R,strokeDasharray:q}:J={strokeDasharray:ge}:J={strokeDasharray:q};var H=Ur(t),{radius:Se}=H,Te=oO(H,g6);return y.createElement("path",qf({},Te,{radius:typeof h=="number"?h:void 0,className:M,d:sO(me,je,ee,U,h),ref:r,style:iO(iO({},J),t.style)}))})};function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(n){x6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function x6(e,t,r){return(t=w6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w6(e){var t=j6(e,"string");return typeof t=="symbol"?t:t+""}function j6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zf=Math.PI/180,S6=e=>e*180/Math.PI,tr=(e,t,r,n)=>({x:e+Math.cos(-zf*n)*r,y:t+Math.sin(-zf*n)*r}),xD=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},E6=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return Math.sqrt((r-i)**2+(n-s)**2)},O6=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:s}=t,c=E6({x:r,y:n},{x:i,y:s});if(c<=0)return{radius:c,angle:0};var u=(r-i)/c,m=Math.acos(u);return n>s&&(m=2*Math.PI-m),{radius:c,angle:S6(m),angleInRadian:m}},C6=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:t-s*360,endAngle:r-s*360}},A6=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),s=Math.floor(n/360),c=Math.min(i,s);return e+c*360},N6=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:s}=O6({x:r,y:n},t),{innerRadius:c,outerRadius:u}=t;if(i<c||i>u||i===0)return null;var{startAngle:m,endAngle:h}=C6(t),p=s,g;if(m<=h){for(;p>h;)p-=360;for(;p<m;)p+=360;g=p>=m&&p<=h}else{for(;p>m;)p-=360;for(;p<h;)p+=360;g=p>=h&&p<=m}return g?uO(uO({},t),{},{radius:i,angle:A6(p,t)}):null};function wD(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:s}=e,c=tr(t,r,n,i),u=tr(t,r,n,s);return{points:[c,u],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}var dO,fO,mO,hO,pO,gO,vO;function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vy.apply(null,arguments)}function Eo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var k6=(e,t)=>{var r=vr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},$d=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:s,isExternal:c,cornerRadius:u,cornerIsExternal:m}=e,h=u*(c?1:-1)+n,p=Math.asin(u/h)/zf,g=m?i:i+s*p,_=tr(t,r,h,g),x=tr(t,r,n,g),w=m?i-s*p:i,j=tr(t,r,h*Math.cos(p*zf),w);return{center:_,circleTangency:x,lineTangency:j,theta:p}},jD=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:c}=e,u=k6(s,c),m=s+u,h=tr(t,r,i,s),p=tr(t,r,i,m),g=Ft(dO||(dO=Eo(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,i,i,+(Math.abs(u)>180),+(s>m),p.x,p.y);if(n>0){var _=tr(t,r,n,s),x=tr(t,r,n,m);g+=Ft(fO||(fO=Eo(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,n,n,+(Math.abs(u)>180),+(s<=m),_.x,_.y)}else g+=Ft(mO||(mO=Eo(["L ",","," Z"])),t,r);return g},D6=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:h}=e,p=vr(h-m),{circleTangency:g,lineTangency:_,theta:x}=$d({cx:t,cy:r,radius:i,angle:m,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:w,lineTangency:j,theta:S}=$d({cx:t,cy:r,radius:i,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:u}),O=u?Math.abs(m-h):Math.abs(m-h)-x-S;if(O<0)return c?Ft(hO||(hO=Eo(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),_.x,_.y,s,s,s*2,s,s,-s*2):jD({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:m,endAngle:h});var C=Ft(pO||(pO=Eo(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),_.x,_.y,s,s,+(p<0),g.x,g.y,i,i,+(O>180),+(p<0),w.x,w.y,s,s,+(p<0),j.x,j.y);if(n>0){var{circleTangency:A,lineTangency:k,theta:D}=$d({cx:t,cy:r,radius:n,angle:m,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:M,lineTangency:L,theta:X}=$d({cx:t,cy:r,radius:n,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),ne=u?Math.abs(m-h):Math.abs(m-h)-D-X;if(ne<0&&s===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+=Ft(gO||(gO=Eo(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),L.x,L.y,s,s,+(p<0),M.x,M.y,n,n,+(ne>180),+(p>0),A.x,A.y,s,s,+(p<0),k.x,k.y)}else C+=Ft(vO||(vO=Eo(["L",",","Z"])),t,r);return C},T6={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},SD=e=>{var t=br(e,T6),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:p,className:g}=t;if(s<i||h===p)return null;var _=ot("recharts-sector",g),x=s-i,w=Dr(c,x,0,!0),j;return w>0&&Math.abs(h-p)<360?j=D6({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(w,x/2),forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:p}):j=jD({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:h,endAngle:p}),y.createElement("path",Vy({},Ur(t),{className:_,d:j}))};function P6(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(nk(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:c,angle:u}=t,m=tr(n,i,s,u),h=tr(n,i,c,u);return[{x:m.x,y:m.y},{x:h.x,y:h.y}]}return wD(t)}}var Dv={},Tv={},Pv={},yO;function M6(){return yO||(yO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hk();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Pv)),Pv}var bO;function R6(){return bO||(bO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M6();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Tv)),Tv}var _O;function q6(){return _O||(_O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pk(),r=R6();function n(i,s,c){c&&typeof c!="number"&&t.isIterateeCall(i,s,c)&&(s=c=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),c=c===void 0?i<s?1:-1:r.toFinite(c);const u=Math.max(Math.ceil((s-i)/(c||1)),0),m=new Array(u);for(let h=0;h<u;h++)m[h]=i,i+=c;return m}e.range=n})(Dv)),Dv}var Mv,xO;function z6(){return xO||(xO=1,Mv=q6().range),Mv}var L6=z6();const ED=Qa(L6);function Bi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function I6(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function n0(e){let t,r,n;e.length!==2?(t=Bi,r=(u,m)=>Bi(e(u),m),n=(u,m)=>e(u)-m):(t=e===Bi||e===I6?e:U6,r=e,n=e);function i(u,m,h=0,p=u.length){if(h<p){if(t(m,m)!==0)return p;do{const g=h+p>>>1;r(u[g],m)<0?h=g+1:p=g}while(h<p)}return h}function s(u,m,h=0,p=u.length){if(h<p){if(t(m,m)!==0)return p;do{const g=h+p>>>1;r(u[g],m)<=0?h=g+1:p=g}while(h<p)}return h}function c(u,m,h=0,p=u.length){const g=i(u,m,h,p-1);return g>h&&n(u[g-1],m)>-n(u[g],m)?g-1:g}return{left:i,center:c,right:s}}function U6(){return 0}function OD(e){return e===null?NaN:+e}function*B6(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const $6=n0(Bi),Xc=$6.right;n0(OD).center;class wO extends Map{constructor(t,r=K6){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(jO(this,t))}has(t){return super.has(jO(this,t))}set(t,r){return super.set(H6(this,t),r)}delete(t){return super.delete(F6(this,t))}}function jO({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function H6({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function F6({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function K6(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Y6(e=Bi){if(e===Bi)return CD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function CD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const G6=Math.sqrt(50),V6=Math.sqrt(10),W6=Math.sqrt(2);function Lf(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),c=s>=G6?10:s>=V6?5:s>=W6?2:1;let u,m,h;return i<0?(h=Math.pow(10,-i)/c,u=Math.round(e*h),m=Math.round(t*h),u/h<e&&++u,m/h>t&&--m,h=-h):(h=Math.pow(10,i)*c,u=Math.round(e/h),m=Math.round(t/h),u*h<e&&++u,m*h>t&&--m),m<u&&.5<=r&&r<2?Lf(e,t,r*2):[u,m,h]}function Wy(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,c]=n?Lf(t,e,r):Lf(e,t,r);if(!(s>=i))return[];const u=s-i+1,m=new Array(u);if(n)if(c<0)for(let h=0;h<u;++h)m[h]=(s-h)/-c;else for(let h=0;h<u;++h)m[h]=(s-h)*c;else if(c<0)for(let h=0;h<u;++h)m[h]=(i+h)/-c;else for(let h=0;h<u;++h)m[h]=(i+h)*c;return m}function Xy(e,t,r){return t=+t,e=+e,r=+r,Lf(e,t,r)[2]}function Zy(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Xy(t,e,r):Xy(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function SO(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function EO(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function AD(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?CD:Y6(i);n>r;){if(n-r>600){const m=n-r+1,h=t-r+1,p=Math.log(m),g=.5*Math.exp(2*p/3),_=.5*Math.sqrt(p*g*(m-g)/m)*(h-m/2<0?-1:1),x=Math.max(r,Math.floor(t-h*g/m+_)),w=Math.min(n,Math.floor(t+(m-h)*g/m+_));AD(e,t,x,w,i)}const s=e[t];let c=r,u=n;for(cc(e,r,t),i(e[n],s)>0&&cc(e,r,n);c<u;){for(cc(e,c,u),++c,--u;i(e[c],s)<0;)++c;for(;i(e[u],s)>0;)--u}i(e[r],s)===0?cc(e,r,u):(++u,cc(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function cc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function X6(e,t,r){if(e=Float64Array.from(B6(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return EO(e);if(t>=1)return SO(e);var n,i=(n-1)*t,s=Math.floor(i),c=SO(AD(e,s).subarray(0,s+1)),u=EO(e.subarray(s+1));return c+(u-c)*(i-s)}}function Z6(e,t,r=OD){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),c=+r(e[s],s,e),u=+r(e[s+1],s+1,e);return c+(u-c)*(i-s)}}function Q6(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function In(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ni(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Qy=Symbol("implicit");function a0(){var e=new wO,t=[],r=[],n=Qy;function i(s){let c=e.get(s);if(c===void 0){if(n!==Qy)return n;e.set(s,c=t.push(s)-1)}return r[c%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new wO;for(const c of s)e.has(c)||e.set(c,t.push(c)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return a0(t,r).unknown(n)},In.apply(i,arguments),i}function i0(){var e=a0().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,c,u=!1,m=0,h=0,p=.5;delete e.unknown;function g(){var _=t().length,x=i<n,w=x?i:n,j=x?n:i;s=(j-w)/Math.max(1,_-m+h*2),u&&(s=Math.floor(s)),w+=(j-w-s*(_-m))*p,c=s*(1-m),u&&(w=Math.round(w),c=Math.round(c));var S=Q6(_).map(function(O){return w+s*O});return r(x?S.reverse():S)}return e.domain=function(_){return arguments.length?(t(_),g()):t()},e.range=function(_){return arguments.length?([n,i]=_,n=+n,i=+i,g()):[n,i]},e.rangeRound=function(_){return[n,i]=_,n=+n,i=+i,u=!0,g()},e.bandwidth=function(){return c},e.step=function(){return s},e.round=function(_){return arguments.length?(u=!!_,g()):u},e.padding=function(_){return arguments.length?(m=Math.min(1,h=+_),g()):m},e.paddingInner=function(_){return arguments.length?(m=Math.min(1,_),g()):m},e.paddingOuter=function(_){return arguments.length?(h=+_,g()):h},e.align=function(_){return arguments.length?(p=Math.max(0,Math.min(1,_)),g()):p},e.copy=function(){return i0(t(),[n,i]).round(u).paddingInner(m).paddingOuter(h).align(p)},In.apply(g(),arguments)}function ND(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ND(t())},e}function J6(){return ND(i0.apply(null,arguments).paddingInner(1))}function o0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function kD(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Zc(){}var kc=.7,If=1/kc,Us="\\s*([+-]?\\d+)\\s*",Dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eB=/^#([0-9a-f]{3,8})$/,tB=new RegExp(`^rgb\\(${Us},${Us},${Us}\\)$`),rB=new RegExp(`^rgb\\(${da},${da},${da}\\)$`),nB=new RegExp(`^rgba\\(${Us},${Us},${Us},${Dc}\\)$`),aB=new RegExp(`^rgba\\(${da},${da},${da},${Dc}\\)$`),iB=new RegExp(`^hsl\\(${Dc},${da},${da}\\)$`),oB=new RegExp(`^hsla\\(${Dc},${da},${da},${Dc}\\)$`),OO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};o0(Zc,Tc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:CO,formatHex:CO,formatHex8:sB,formatHsl:lB,formatRgb:AO,toString:AO});function CO(){return this.rgb().formatHex()}function sB(){return this.rgb().formatHex8()}function lB(){return DD(this).formatHsl()}function AO(){return this.rgb().formatRgb()}function Tc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=eB.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?NO(t):r===3?new Xr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Hd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Hd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tB.exec(e))?new Xr(t[1],t[2],t[3],1):(t=rB.exec(e))?new Xr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nB.exec(e))?Hd(t[1],t[2],t[3],t[4]):(t=aB.exec(e))?Hd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=iB.exec(e))?TO(t[1],t[2]/100,t[3]/100,1):(t=oB.exec(e))?TO(t[1],t[2]/100,t[3]/100,t[4]):OO.hasOwnProperty(e)?NO(OO[e]):e==="transparent"?new Xr(NaN,NaN,NaN,0):null}function NO(e){return new Xr(e>>16&255,e>>8&255,e&255,1)}function Hd(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xr(e,t,r,n)}function cB(e){return e instanceof Zc||(e=Tc(e)),e?(e=e.rgb(),new Xr(e.r,e.g,e.b,e.opacity)):new Xr}function Jy(e,t,r,n){return arguments.length===1?cB(e):new Xr(e,t,r,n??1)}function Xr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}o0(Xr,Jy,kD(Zc,{brighter(e){return e=e==null?If:Math.pow(If,e),new Xr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?kc:Math.pow(kc,e),new Xr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xr(ko(this.r),ko(this.g),ko(this.b),Uf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kO,formatHex:kO,formatHex8:uB,formatRgb:DO,toString:DO}));function kO(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}`}function uB(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}${Oo((isNaN(this.opacity)?1:this.opacity)*255)}`}function DO(){const e=Uf(this.opacity);return`${e===1?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${e===1?")":`, ${e})`}`}function Uf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ko(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Oo(e){return e=ko(e),(e<16?"0":"")+e.toString(16)}function TO(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Vn(e,t,r,n)}function DD(e){if(e instanceof Vn)return new Vn(e.h,e.s,e.l,e.opacity);if(e instanceof Zc||(e=Tc(e)),!e)return new Vn;if(e instanceof Vn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),c=NaN,u=s-i,m=(s+i)/2;return u?(t===s?c=(r-n)/u+(r<n)*6:r===s?c=(n-t)/u+2:c=(t-r)/u+4,u/=m<.5?s+i:2-s-i,c*=60):u=m>0&&m<1?0:c,new Vn(c,u,m,e.opacity)}function dB(e,t,r,n){return arguments.length===1?DD(e):new Vn(e,t,r,n??1)}function Vn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}o0(Vn,dB,kD(Zc,{brighter(e){return e=e==null?If:Math.pow(If,e),new Vn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kc:Math.pow(kc,e),new Vn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Xr(Rv(e>=240?e-240:e+120,i,n),Rv(e,i,n),Rv(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Vn(PO(this.h),Fd(this.s),Fd(this.l),Uf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uf(this.opacity);return`${e===1?"hsl(":"hsla("}${PO(this.h)}, ${Fd(this.s)*100}%, ${Fd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function PO(e){return e=(e||0)%360,e<0?e+360:e}function Fd(e){return Math.max(0,Math.min(1,e||0))}function Rv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const s0=e=>()=>e;function fB(e,t){return function(r){return e+r*t}}function mB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function hB(e){return(e=+e)==1?TD:function(t,r){return r-t?mB(t,r,e):s0(isNaN(t)?r:t)}}function TD(e,t){var r=t-e;return r?fB(e,r):s0(isNaN(e)?t:e)}const MO=(function e(t){var r=hB(t);function n(i,s){var c=r((i=Jy(i)).r,(s=Jy(s)).r),u=r(i.g,s.g),m=r(i.b,s.b),h=TD(i.opacity,s.opacity);return function(p){return i.r=c(p),i.g=u(p),i.b=m(p),i.opacity=h(p),i+""}}return n.gamma=e,n})(1);function pB(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function gB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vB(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),c;for(c=0;c<n;++c)i[c]=Qs(e[c],t[c]);for(;c<r;++c)s[c]=t[c];return function(u){for(c=0;c<n;++c)s[c]=i[c](u);return s}}function yB(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Bf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function bB(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Qs(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var eb=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qv=new RegExp(eb.source,"g");function _B(e){return function(){return e}}function xB(e){return function(t){return e(t)+""}}function wB(e,t){var r=eb.lastIndex=qv.lastIndex=0,n,i,s,c=-1,u=[],m=[];for(e=e+"",t=t+"";(n=eb.exec(e))&&(i=qv.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,m.push({i:c,x:Bf(n,i)})),r=qv.lastIndex;return r<t.length&&(s=t.slice(r),u[c]?u[c]+=s:u[++c]=s),u.length<2?m[0]?xB(m[0].x):_B(t):(t=m.length,function(h){for(var p=0,g;p<t;++p)u[(g=m[p]).i]=g.x(h);return u.join("")})}function Qs(e,t){var r=typeof t,n;return t==null||r==="boolean"?s0(t):(r==="number"?Bf:r==="string"?(n=Tc(t))?(t=n,MO):wB:t instanceof Tc?MO:t instanceof Date?yB:gB(t)?pB:Array.isArray(t)?vB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bB:Bf)(e,t)}function l0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function jB(e,t){t===void 0&&(t=e,e=Qs);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(c){var u=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return s[u](c-u)}}function SB(e){return function(){return e}}function $f(e){return+e}var RO=[0,1];function Ir(e){return e}function tb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:SB(isNaN(t)?NaN:.5)}function EB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function OB(e,t,r){var n=e[0],i=e[1],s=t[0],c=t[1];return i<n?(n=tb(i,n),s=r(c,s)):(n=tb(n,i),s=r(s,c)),function(u){return s(n(u))}}function CB(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)i[c]=tb(e[c],e[c+1]),s[c]=r(t[c],t[c+1]);return function(u){var m=Xc(e,u,1,n)-1;return s[m](i[m](u))}}function Qc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Rm(){var e=RO,t=RO,r=Qs,n,i,s,c=Ir,u,m,h;function p(){var _=Math.min(e.length,t.length);return c!==Ir&&(c=EB(e[0],e[_-1])),u=_>2?CB:OB,m=h=null,g}function g(_){return _==null||isNaN(_=+_)?s:(m||(m=u(e.map(n),t,r)))(n(c(_)))}return g.invert=function(_){return c(i((h||(h=u(t,e.map(n),Bf)))(_)))},g.domain=function(_){return arguments.length?(e=Array.from(_,$f),p()):e.slice()},g.range=function(_){return arguments.length?(t=Array.from(_),p()):t.slice()},g.rangeRound=function(_){return t=Array.from(_),r=l0,p()},g.clamp=function(_){return arguments.length?(c=_?!0:Ir,p()):c!==Ir},g.interpolate=function(_){return arguments.length?(r=_,p()):r},g.unknown=function(_){return arguments.length?(s=_,g):s},function(_,x){return n=_,i=x,p()}}function c0(){return Rm()(Ir,Ir)}function AB(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Hf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ks(e){return e=Hf(Math.abs(e)),e?e[1]:NaN}function NB(e,t){return function(r,n){for(var i=r.length,s=[],c=0,u=e[0],m=0;i>0&&u>0&&(m+u+1>n&&(u=Math.max(1,n-m)),s.push(r.substring(i-=u,i+u)),!((m+=u+1)>n));)u=e[c=(c+1)%e.length];return s.reverse().join(t)}}function kB(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var DB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pc(e){if(!(t=DB.exec(e)))throw new Error("invalid format: "+e);var t;return new u0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Pc.prototype=u0.prototype;function u0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}u0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TB(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var PD;function PB(e,t){var r=Hf(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(PD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=n.length;return s===c?n:s>c?n+new Array(s-c+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Hf(e,Math.max(0,t+s-1))[0]}function qO(e,t){var r=Hf(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const zO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:AB,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qO(e*100,t),r:qO,s:PB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function LO(e){return e}var IO=Array.prototype.map,UO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MB(e){var t=e.grouping===void 0||e.thousands===void 0?LO:NB(IO.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?LO:kB(IO.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function h(g){g=Pc(g);var _=g.fill,x=g.align,w=g.sign,j=g.symbol,S=g.zero,O=g.width,C=g.comma,A=g.precision,k=g.trim,D=g.type;D==="n"?(C=!0,D="g"):zO[D]||(A===void 0&&(A=12),k=!0,D="g"),(S||_==="0"&&x==="=")&&(S=!0,_="0",x="=");var M=j==="$"?r:j==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",L=j==="$"?n:/[%p]/.test(D)?c:"",X=zO[D],ne=/[defgprs%]/.test(D);A=A===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function ae(G){var B=M,ce=L,ge,q,R;if(D==="c")ce=X(G)+ce,G="";else{G=+G;var I=G<0||1/G<0;if(G=isNaN(G)?m:X(Math.abs(G),A),k&&(G=TB(G)),I&&+G==0&&w!=="+"&&(I=!1),B=(I?w==="("?w:u:w==="-"||w==="("?"":w)+B,ce=(D==="s"?UO[8+PD/3]:"")+ce+(I&&w==="("?")":""),ne){for(ge=-1,q=G.length;++ge<q;)if(R=G.charCodeAt(ge),48>R||R>57){ce=(R===46?i+G.slice(ge+1):G.slice(ge))+ce,G=G.slice(0,ge);break}}}C&&!S&&(G=t(G,1/0));var ee=B.length+G.length+ce.length,U=ee<O?new Array(O-ee+1).join(_):"";switch(C&&S&&(G=t(U+G,U.length?O-ce.length:1/0),U=""),x){case"<":G=B+G+ce+U;break;case"=":G=B+U+G+ce;break;case"^":G=U.slice(0,ee=U.length>>1)+B+G+ce+U.slice(ee);break;default:G=U+B+G+ce;break}return s(G)}return ae.toString=function(){return g+""},ae}function p(g,_){var x=h((g=Pc(g),g.type="f",g)),w=Math.max(-8,Math.min(8,Math.floor(Ks(_)/3)))*3,j=Math.pow(10,-w),S=UO[8+w/3];return function(O){return x(j*O)+S}}return{format:h,formatPrefix:p}}var Kd,d0,MD;RB({thousands:",",grouping:[3],currency:["$",""]});function RB(e){return Kd=MB(e),d0=Kd.format,MD=Kd.formatPrefix,Kd}function qB(e){return Math.max(0,-Ks(Math.abs(e)))}function zB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ks(t)/3)))*3-Ks(Math.abs(e)))}function LB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ks(t)-Ks(e))+1}function RD(e,t,r,n){var i=Zy(e,t,r),s;switch(n=Pc(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=zB(i,c))&&(n.precision=s),MD(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=LB(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=qB(i))&&(n.precision=s-(n.type==="%")*2);break}}return d0(n)}function Wi(e){var t=e.domain;return e.ticks=function(r){var n=t();return Wy(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return RD(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,c=n[i],u=n[s],m,h,p=10;for(u<c&&(h=c,c=u,u=h,h=i,i=s,s=h);p-- >0;){if(h=Xy(c,u,r),h===m)return n[i]=c,n[s]=u,t(n);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;m=h}return e},e}function qD(){var e=c0();return e.copy=function(){return Qc(e,qD())},In.apply(e,arguments),Wi(e)}function zD(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,$f),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return zD(e).unknown(t)},e=arguments.length?Array.from(e,$f):[0,1],Wi(r)}function LD(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],c;return s<i&&(c=r,r=n,n=c,c=i,i=s,s=c),e[r]=t.floor(i),e[n]=t.ceil(s),e}function BO(e){return Math.log(e)}function $O(e){return Math.exp(e)}function IB(e){return-Math.log(-e)}function UB(e){return-Math.exp(-e)}function BB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function $B(e){return e===10?BB:e===Math.E?Math.exp:t=>Math.pow(e,t)}function HB(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function HO(e){return(t,r)=>-e(-t,r)}function f0(e){const t=e(BO,$O),r=t.domain;let n=10,i,s;function c(){return i=HB(n),s=$B(n),r()[0]<0?(i=HO(i),s=HO(s),e(IB,UB)):e(BO,$O),t}return t.base=function(u){return arguments.length?(n=+u,c()):n},t.domain=function(u){return arguments.length?(r(u),c()):r()},t.ticks=u=>{const m=r();let h=m[0],p=m[m.length-1];const g=p<h;g&&([h,p]=[p,h]);let _=i(h),x=i(p),w,j;const S=u==null?10:+u;let O=[];if(!(n%1)&&x-_<S){if(_=Math.floor(_),x=Math.ceil(x),h>0){for(;_<=x;++_)for(w=1;w<n;++w)if(j=_<0?w/s(-_):w*s(_),!(j<h)){if(j>p)break;O.push(j)}}else for(;_<=x;++_)for(w=n-1;w>=1;--w)if(j=_>0?w/s(-_):w*s(_),!(j<h)){if(j>p)break;O.push(j)}O.length*2<S&&(O=Wy(h,p,S))}else O=Wy(_,x,Math.min(x-_,S)).map(s);return g?O.reverse():O},t.tickFormat=(u,m)=>{if(u==null&&(u=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Pc(m)).precision==null&&(m.trim=!0),m=d0(m)),u===1/0)return m;const h=Math.max(1,n*u/t.ticks().length);return p=>{let g=p/s(Math.round(i(p)));return g*n<n-.5&&(g*=n),g<=h?m(p):""}},t.nice=()=>r(LD(r(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function ID(){const e=f0(Rm()).domain([1,10]);return e.copy=()=>Qc(e,ID()).base(e.base()),In.apply(e,arguments),e}function FO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function KO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function m0(e){var t=1,r=e(FO(t),KO(t));return r.constant=function(n){return arguments.length?e(FO(t=+n),KO(t)):t},Wi(r)}function UD(){var e=m0(Rm());return e.copy=function(){return Qc(e,UD()).constant(e.constant())},In.apply(e,arguments)}function YO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function FB(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function KB(e){return e<0?-e*e:e*e}function h0(e){var t=e(Ir,Ir),r=1;function n(){return r===1?e(Ir,Ir):r===.5?e(FB,KB):e(YO(r),YO(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Wi(t)}function p0(){var e=h0(Rm());return e.copy=function(){return Qc(e,p0()).exponent(e.exponent())},In.apply(e,arguments),e}function YB(){return p0.apply(null,arguments).exponent(.5)}function GO(e){return Math.sign(e)*e*e}function GB(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function BD(){var e=c0(),t=[0,1],r=!1,n;function i(s){var c=GB(e(s));return isNaN(c)?n:r?Math.round(c):c}return i.invert=function(s){return e.invert(GO(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,$f)).map(GO)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return BD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},In.apply(i,arguments),Wi(i)}function $D(){var e=[],t=[],r=[],n;function i(){var c=0,u=Math.max(1,t.length);for(r=new Array(u-1);++c<u;)r[c-1]=Z6(e,c/u);return s}function s(c){return c==null||isNaN(c=+c)?n:t[Xc(r,c)]}return s.invertExtent=function(c){var u=t.indexOf(c);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},s.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let u of c)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Bi),i()},s.range=function(c){return arguments.length?(t=Array.from(c),i()):t.slice()},s.unknown=function(c){return arguments.length?(n=c,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return $D().domain(e).range(t).unknown(n)},In.apply(s,arguments)}function HD(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function c(m){return m!=null&&m<=m?i[Xc(n,m,0,r)]:s}function u(){var m=-1;for(n=new Array(r);++m<r;)n[m]=((m+1)*t-(m-r)*e)/(r+1);return c}return c.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,u()):[e,t]},c.range=function(m){return arguments.length?(r=(i=Array.from(m)).length-1,u()):i.slice()},c.invertExtent=function(m){var h=i.indexOf(m);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},c.unknown=function(m){return arguments.length&&(s=m),c},c.thresholds=function(){return n.slice()},c.copy=function(){return HD().domain([e,t]).range(i).unknown(s)},In.apply(Wi(c),arguments)}function FD(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[Xc(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var c=t.indexOf(s);return[e[c-1],e[c]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return FD().domain(e).range(t).unknown(r)},In.apply(i,arguments)}const zv=new Date,Lv=new Date;function ur(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const c=i(s),u=i.ceil(s);return s-c<u-s?c:u},i.offset=(s,c)=>(t(s=new Date(+s),c==null?1:Math.floor(c)),s),i.range=(s,c,u)=>{const m=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<c)||!(u>0))return m;let h;do m.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<c);return m},i.filter=s=>ur(c=>{if(c>=c)for(;e(c),!s(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;t(c,-1),!s(c););else for(;--u>=0;)for(;t(c,1),!s(c););}),r&&(i.count=(s,c)=>(zv.setTime(+s),Lv.setTime(+c),e(zv),e(Lv),Math.floor(r(zv,Lv))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?c=>n(c)%s===0:c=>i.count(0,c)%s===0):i)),i}const Ff=ur(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ff.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ur(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Ff);Ff.range;const Ua=1e3,qn=Ua*60,Ba=qn*60,Ga=Ba*24,g0=Ga*7,VO=Ga*30,Iv=Ga*365,Co=ur(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getUTCSeconds());Co.range;const v0=ur(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua)},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getMinutes());v0.range;const y0=ur(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getUTCMinutes());y0.range;const b0=ur(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua-e.getMinutes()*qn)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getHours());b0.range;const _0=ur(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCHours());_0.range;const Jc=ur(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qn)/Ga,e=>e.getDate()-1);Jc.range;const qm=ur(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ga,e=>e.getUTCDate()-1);qm.range;const KD=ur(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ga,e=>Math.floor(e/Ga));KD.range;function Yo(e){return ur(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*qn)/g0)}const zm=Yo(0),Kf=Yo(1),VB=Yo(2),WB=Yo(3),Ys=Yo(4),XB=Yo(5),ZB=Yo(6);zm.range;Kf.range;VB.range;WB.range;Ys.range;XB.range;ZB.range;function Go(e){return ur(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/g0)}const Lm=Go(0),Yf=Go(1),QB=Go(2),JB=Go(3),Gs=Go(4),e$=Go(5),t$=Go(6);Lm.range;Yf.range;QB.range;JB.range;Gs.range;e$.range;t$.range;const x0=ur(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());x0.range;const w0=ur(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());w0.range;const Va=ur(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Va.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ur(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Va.range;const Wa=ur(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ur(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Wa.range;function YD(e,t,r,n,i,s){const c=[[Co,1,Ua],[Co,5,5*Ua],[Co,15,15*Ua],[Co,30,30*Ua],[s,1,qn],[s,5,5*qn],[s,15,15*qn],[s,30,30*qn],[i,1,Ba],[i,3,3*Ba],[i,6,6*Ba],[i,12,12*Ba],[n,1,Ga],[n,2,2*Ga],[r,1,g0],[t,1,VO],[t,3,3*VO],[e,1,Iv]];function u(h,p,g){const _=p<h;_&&([h,p]=[p,h]);const x=g&&typeof g.range=="function"?g:m(h,p,g),w=x?x.range(h,+p+1):[];return _?w.reverse():w}function m(h,p,g){const _=Math.abs(p-h)/g,x=n0(([,,S])=>S).right(c,_);if(x===c.length)return e.every(Zy(h/Iv,p/Iv,g));if(x===0)return Ff.every(Math.max(Zy(h,p,g),1));const[w,j]=c[_/c[x-1][2]<c[x][2]/_?x-1:x];return w.every(j)}return[u,m]}const[r$,n$]=YD(Wa,w0,Lm,KD,_0,y0),[a$,i$]=YD(Va,x0,zm,Jc,b0,v0);function Uv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Bv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function o$(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,c=e.shortDays,u=e.months,m=e.shortMonths,h=dc(i),p=fc(i),g=dc(s),_=fc(s),x=dc(c),w=fc(c),j=dc(u),S=fc(u),O=dc(m),C=fc(m),A={a:I,A:ee,b:U,B:me,c:null,d:eC,e:eC,f:N$,g:I$,G:B$,H:O$,I:C$,j:A$,L:GD,m:k$,M:D$,p:je,q:J,Q:nC,s:aC,S:T$,u:P$,U:M$,V:R$,w:q$,W:z$,x:null,X:null,y:L$,Y:U$,Z:$$,"%":rC},k={a:H,A:Se,b:Te,B:Ue,c:null,d:tC,e:tC,f:Y$,g:r8,G:a8,H:H$,I:F$,j:K$,L:WD,m:G$,M:V$,p:pe,q:Ie,Q:nC,s:aC,S:W$,u:X$,U:Z$,V:Q$,w:J$,W:e8,x:null,X:null,y:t8,Y:n8,Z:i8,"%":rC},D={a:ae,A:G,b:B,B:ce,c:ge,d:QO,e:QO,f:w$,g:ZO,G:XO,H:JO,I:JO,j:y$,L:x$,m:v$,M:b$,p:ne,q:g$,Q:S$,s:E$,S:_$,u:d$,U:f$,V:m$,w:u$,W:h$,x:q,X:R,y:ZO,Y:XO,Z:p$,"%":j$};A.x=M(r,A),A.X=M(n,A),A.c=M(t,A),k.x=M(r,k),k.X=M(n,k),k.c=M(t,k);function M(Q,Ee){return function(xe){var ie=[],Be=-1,ve=0,Ne=Q.length,Me,Ct,Re;for(xe instanceof Date||(xe=new Date(+xe));++Be<Ne;)Q.charCodeAt(Be)===37&&(ie.push(Q.slice(ve,Be)),(Ct=WO[Me=Q.charAt(++Be)])!=null?Me=Q.charAt(++Be):Ct=Me==="e"?" ":"0",(Re=Ee[Me])&&(Me=Re(xe,Ct)),ie.push(Me),ve=Be+1);return ie.push(Q.slice(ve,Be)),ie.join("")}}function L(Q,Ee){return function(xe){var ie=uc(1900,void 0,1),Be=X(ie,Q,xe+="",0),ve,Ne;if(Be!=xe.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(Ee&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(ve=Bv(uc(ie.y,0,1)),Ne=ve.getUTCDay(),ve=Ne>4||Ne===0?Yf.ceil(ve):Yf(ve),ve=qm.offset(ve,(ie.V-1)*7),ie.y=ve.getUTCFullYear(),ie.m=ve.getUTCMonth(),ie.d=ve.getUTCDate()+(ie.w+6)%7):(ve=Uv(uc(ie.y,0,1)),Ne=ve.getDay(),ve=Ne>4||Ne===0?Kf.ceil(ve):Kf(ve),ve=Jc.offset(ve,(ie.V-1)*7),ie.y=ve.getFullYear(),ie.m=ve.getMonth(),ie.d=ve.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),Ne="Z"in ie?Bv(uc(ie.y,0,1)).getUTCDay():Uv(uc(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(Ne+5)%7:ie.w+ie.U*7-(Ne+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,Bv(ie)):Uv(ie)}}function X(Q,Ee,xe,ie){for(var Be=0,ve=Ee.length,Ne=xe.length,Me,Ct;Be<ve;){if(ie>=Ne)return-1;if(Me=Ee.charCodeAt(Be++),Me===37){if(Me=Ee.charAt(Be++),Ct=D[Me in WO?Ee.charAt(Be++):Me],!Ct||(ie=Ct(Q,xe,ie))<0)return-1}else if(Me!=xe.charCodeAt(ie++))return-1}return ie}function ne(Q,Ee,xe){var ie=h.exec(Ee.slice(xe));return ie?(Q.p=p.get(ie[0].toLowerCase()),xe+ie[0].length):-1}function ae(Q,Ee,xe){var ie=x.exec(Ee.slice(xe));return ie?(Q.w=w.get(ie[0].toLowerCase()),xe+ie[0].length):-1}function G(Q,Ee,xe){var ie=g.exec(Ee.slice(xe));return ie?(Q.w=_.get(ie[0].toLowerCase()),xe+ie[0].length):-1}function B(Q,Ee,xe){var ie=O.exec(Ee.slice(xe));return ie?(Q.m=C.get(ie[0].toLowerCase()),xe+ie[0].length):-1}function ce(Q,Ee,xe){var ie=j.exec(Ee.slice(xe));return ie?(Q.m=S.get(ie[0].toLowerCase()),xe+ie[0].length):-1}function ge(Q,Ee,xe){return X(Q,t,Ee,xe)}function q(Q,Ee,xe){return X(Q,r,Ee,xe)}function R(Q,Ee,xe){return X(Q,n,Ee,xe)}function I(Q){return c[Q.getDay()]}function ee(Q){return s[Q.getDay()]}function U(Q){return m[Q.getMonth()]}function me(Q){return u[Q.getMonth()]}function je(Q){return i[+(Q.getHours()>=12)]}function J(Q){return 1+~~(Q.getMonth()/3)}function H(Q){return c[Q.getUTCDay()]}function Se(Q){return s[Q.getUTCDay()]}function Te(Q){return m[Q.getUTCMonth()]}function Ue(Q){return u[Q.getUTCMonth()]}function pe(Q){return i[+(Q.getUTCHours()>=12)]}function Ie(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var Ee=M(Q+="",A);return Ee.toString=function(){return Q},Ee},parse:function(Q){var Ee=L(Q+="",!1);return Ee.toString=function(){return Q},Ee},utcFormat:function(Q){var Ee=M(Q+="",k);return Ee.toString=function(){return Q},Ee},utcParse:function(Q){var Ee=L(Q+="",!0);return Ee.toString=function(){return Q},Ee}}}var WO={"-":"",_:" ",0:"0"},_r=/^\s*\d+/,s$=/^%/,l$=/[\\^$*+?|[\]().{}]/g;function at(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function c$(e){return e.replace(l$,"\\$&")}function dc(e){return new RegExp("^(?:"+e.map(c$).join("|")+")","i")}function fc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function u$(e,t,r){var n=_r.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function d$(e,t,r){var n=_r.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function f$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function m$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function h$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function XO(e,t,r){var n=_r.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ZO(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function p$(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function g$(e,t,r){var n=_r.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function v$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function QO(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function y$(e,t,r){var n=_r.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function JO(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function b$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function _$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function x$(e,t,r){var n=_r.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function w$(e,t,r){var n=_r.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function j$(e,t,r){var n=s$.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function S$(e,t,r){var n=_r.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function E$(e,t,r){var n=_r.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function eC(e,t){return at(e.getDate(),t,2)}function O$(e,t){return at(e.getHours(),t,2)}function C$(e,t){return at(e.getHours()%12||12,t,2)}function A$(e,t){return at(1+Jc.count(Va(e),e),t,3)}function GD(e,t){return at(e.getMilliseconds(),t,3)}function N$(e,t){return GD(e,t)+"000"}function k$(e,t){return at(e.getMonth()+1,t,2)}function D$(e,t){return at(e.getMinutes(),t,2)}function T$(e,t){return at(e.getSeconds(),t,2)}function P$(e){var t=e.getDay();return t===0?7:t}function M$(e,t){return at(zm.count(Va(e)-1,e),t,2)}function VD(e){var t=e.getDay();return t>=4||t===0?Ys(e):Ys.ceil(e)}function R$(e,t){return e=VD(e),at(Ys.count(Va(e),e)+(Va(e).getDay()===4),t,2)}function q$(e){return e.getDay()}function z$(e,t){return at(Kf.count(Va(e)-1,e),t,2)}function L$(e,t){return at(e.getFullYear()%100,t,2)}function I$(e,t){return e=VD(e),at(e.getFullYear()%100,t,2)}function U$(e,t){return at(e.getFullYear()%1e4,t,4)}function B$(e,t){var r=e.getDay();return e=r>=4||r===0?Ys(e):Ys.ceil(e),at(e.getFullYear()%1e4,t,4)}function $$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function tC(e,t){return at(e.getUTCDate(),t,2)}function H$(e,t){return at(e.getUTCHours(),t,2)}function F$(e,t){return at(e.getUTCHours()%12||12,t,2)}function K$(e,t){return at(1+qm.count(Wa(e),e),t,3)}function WD(e,t){return at(e.getUTCMilliseconds(),t,3)}function Y$(e,t){return WD(e,t)+"000"}function G$(e,t){return at(e.getUTCMonth()+1,t,2)}function V$(e,t){return at(e.getUTCMinutes(),t,2)}function W$(e,t){return at(e.getUTCSeconds(),t,2)}function X$(e){var t=e.getUTCDay();return t===0?7:t}function Z$(e,t){return at(Lm.count(Wa(e)-1,e),t,2)}function XD(e){var t=e.getUTCDay();return t>=4||t===0?Gs(e):Gs.ceil(e)}function Q$(e,t){return e=XD(e),at(Gs.count(Wa(e),e)+(Wa(e).getUTCDay()===4),t,2)}function J$(e){return e.getUTCDay()}function e8(e,t){return at(Yf.count(Wa(e)-1,e),t,2)}function t8(e,t){return at(e.getUTCFullYear()%100,t,2)}function r8(e,t){return e=XD(e),at(e.getUTCFullYear()%100,t,2)}function n8(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function a8(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Gs(e):Gs.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function i8(){return"+0000"}function rC(){return"%"}function nC(e){return+e}function aC(e){return Math.floor(+e/1e3)}var Ps,ZD,QD;o8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function o8(e){return Ps=o$(e),ZD=Ps.format,Ps.parse,QD=Ps.utcFormat,Ps.utcParse,Ps}function s8(e){return new Date(e)}function l8(e){return e instanceof Date?+e:+new Date(+e)}function j0(e,t,r,n,i,s,c,u,m,h){var p=c0(),g=p.invert,_=p.domain,x=h(".%L"),w=h(":%S"),j=h("%I:%M"),S=h("%I %p"),O=h("%a %d"),C=h("%b %d"),A=h("%B"),k=h("%Y");function D(M){return(m(M)<M?x:u(M)<M?w:c(M)<M?j:s(M)<M?S:n(M)<M?i(M)<M?O:C:r(M)<M?A:k)(M)}return p.invert=function(M){return new Date(g(M))},p.domain=function(M){return arguments.length?_(Array.from(M,l8)):_().map(s8)},p.ticks=function(M){var L=_();return e(L[0],L[L.length-1],M??10)},p.tickFormat=function(M,L){return L==null?D:h(L)},p.nice=function(M){var L=_();return(!M||typeof M.range!="function")&&(M=t(L[0],L[L.length-1],M??10)),M?_(LD(L,M)):p},p.copy=function(){return Qc(p,j0(e,t,r,n,i,s,c,u,m,h))},p}function c8(){return In.apply(j0(a$,i$,Va,x0,zm,Jc,b0,v0,Co,ZD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function u8(){return In.apply(j0(r$,n$,Wa,w0,Lm,qm,_0,y0,Co,QD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Im(){var e=0,t=1,r,n,i,s,c=Ir,u=!1,m;function h(g){return g==null||isNaN(g=+g)?m:c(i===0?.5:(g=(s(g)-r)*i,u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t]=g,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(c=g,h):c};function p(g){return function(_){var x,w;return arguments.length?([x,w]=_,c=g(x,w),h):[c(0),c(1)]}}return h.range=p(Qs),h.rangeRound=p(l0),h.unknown=function(g){return arguments.length?(m=g,h):m},function(g){return s=g,r=g(e),n=g(t),i=r===n?0:1/(n-r),h}}function Xi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function JD(){var e=Wi(Im()(Ir));return e.copy=function(){return Xi(e,JD())},ni.apply(e,arguments)}function eT(){var e=f0(Im()).domain([1,10]);return e.copy=function(){return Xi(e,eT()).base(e.base())},ni.apply(e,arguments)}function tT(){var e=m0(Im());return e.copy=function(){return Xi(e,tT()).constant(e.constant())},ni.apply(e,arguments)}function S0(){var e=h0(Im());return e.copy=function(){return Xi(e,S0()).exponent(e.exponent())},ni.apply(e,arguments)}function d8(){return S0.apply(null,arguments).exponent(.5)}function rT(){var e=[],t=Ir;function r(n){if(n!=null&&!isNaN(n=+n))return t((Xc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Bi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>X6(e,s/n))},r.copy=function(){return rT(t).domain(e)},ni.apply(r,arguments)}function Um(){var e=0,t=.5,r=1,n=1,i,s,c,u,m,h=Ir,p,g=!1,_;function x(j){return isNaN(j=+j)?_:(j=.5+((j=+p(j))-s)*(n*j<n*s?u:m),h(g?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,i=p(e=+e),s=p(t=+t),c=p(r=+r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(g=!!j,x):g},x.interpolator=function(j){return arguments.length?(h=j,x):h};function w(j){return function(S){var O,C,A;return arguments.length?([O,C,A]=S,h=jB(j,[O,C,A]),x):[h(0),h(.5),h(1)]}}return x.range=w(Qs),x.rangeRound=w(l0),x.unknown=function(j){return arguments.length?(_=j,x):_},function(j){return p=j,i=j(e),s=j(t),c=j(r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x}}function nT(){var e=Wi(Um()(Ir));return e.copy=function(){return Xi(e,nT())},ni.apply(e,arguments)}function aT(){var e=f0(Um()).domain([.1,1,10]);return e.copy=function(){return Xi(e,aT()).base(e.base())},ni.apply(e,arguments)}function iT(){var e=m0(Um());return e.copy=function(){return Xi(e,iT()).constant(e.constant())},ni.apply(e,arguments)}function E0(){var e=h0(Um());return e.copy=function(){return Xi(e,E0()).exponent(e.exponent())},ni.apply(e,arguments)}function f8(){return E0.apply(null,arguments).exponent(.5)}const vc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:i0,scaleDiverging:nT,scaleDivergingLog:aT,scaleDivergingPow:E0,scaleDivergingSqrt:f8,scaleDivergingSymlog:iT,scaleIdentity:zD,scaleImplicit:Qy,scaleLinear:qD,scaleLog:ID,scaleOrdinal:a0,scalePoint:J6,scalePow:p0,scaleQuantile:$D,scaleQuantize:HD,scaleRadial:BD,scaleSequential:JD,scaleSequentialLog:eT,scaleSequentialPow:S0,scaleSequentialQuantile:rT,scaleSequentialSqrt:d8,scaleSequentialSymlog:tT,scaleSqrt:YB,scaleSymlog:UD,scaleThreshold:FD,scaleTime:c8,scaleUtc:u8,tickFormat:RD},Symbol.toStringTag,{value:"Module"}));var ai=e=>e.chartData,Bm=W([ai],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),O0=(e,t,r,n)=>n?Bm(e):ai(e),m8=(e,t,r)=>r?Bm(e):ai(e);function Hi(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zt(t)&&zt(r))return!0}return!1}function iC(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function oT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,s;if(zt(r))i=r;else if(typeof r=="function")return;if(zt(n))s=n;else if(typeof n=="function")return;var c=[i,s];if(Hi(c))return c}}function h8(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Hi(n))return iC(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,c,u;if(i==="auto")t!=null&&(c=Math.min(...t));else if(ke(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[0]))}catch{}else if(typeof i=="string"&&yE.test(i)){var m=yE.exec(i);if(m==null||m[1]==null||t==null)c=void 0;else{var h=+m[1];c=t[0]-h}}else c=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(ke(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&bE.test(s)){var p=bE.exec(s);if(p==null||p[1]==null||t==null)u=void 0;else{var g=+p[1];u=t[1]+g}}else u=t?.[1];var _=[c,u];if(Hi(_))return t==null?_:iC(_,t,r)}}}var Js=1e9,p8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},A0,Tt=!0,Ln="[DecimalError] ",Do=Ln+"Invalid argument: ",C0=Ln+"Exponent out of range: ",el=Math.floor,jo=Math.pow,g8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mn,gr=1e7,Ot=7,sT=9007199254740991,Gf=el(sT/Ot),Ce={};Ce.absoluteValue=Ce.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ce.comparedTo=Ce.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Ce.decimalPlaces=Ce.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ot;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ce.dividedBy=Ce.div=function(e){return $a(this,new this.constructor(e))};Ce.dividedToIntegerBy=Ce.idiv=function(e){var t=this,r=t.constructor;return bt($a(t,new r(e),0,1),r.precision)};Ce.equals=Ce.eq=function(e){return!this.cmp(e)};Ce.exponent=function(){return nr(this)};Ce.greaterThan=Ce.gt=function(e){return this.cmp(e)>0};Ce.greaterThanOrEqualTo=Ce.gte=function(e){return this.cmp(e)>=0};Ce.isInteger=Ce.isint=function(){return this.e>this.d.length-2};Ce.isNegative=Ce.isneg=function(){return this.s<0};Ce.isPositive=Ce.ispos=function(){return this.s>0};Ce.isZero=function(){return this.s===0};Ce.lessThan=Ce.lt=function(e){return this.cmp(e)<0};Ce.lessThanOrEqualTo=Ce.lte=function(e){return this.cmp(e)<1};Ce.logarithm=Ce.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(mn))throw Error(Ln+"NaN");if(r.s<1)throw Error(Ln+(r.s?"NaN":"-Infinity"));return r.eq(mn)?new n(0):(Tt=!1,t=$a(Mc(r,s),Mc(e,s),s),Tt=!0,bt(t,i))};Ce.minus=Ce.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?uT(t,e):lT(t,(e.s=-e.s,e))};Ce.modulo=Ce.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Ln+"NaN");return r.s?(Tt=!1,t=$a(r,e,0,1).times(e),Tt=!0,r.minus(t)):bt(new n(r),i)};Ce.naturalExponential=Ce.exp=function(){return cT(this)};Ce.naturalLogarithm=Ce.ln=function(){return Mc(this)};Ce.negated=Ce.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ce.plus=Ce.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?lT(t,e):uT(t,(e.s=-e.s,e))};Ce.precision=Ce.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Do+e);if(t=nr(i)+1,n=i.d.length-1,r=n*Ot+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ce.squareRoot=Ce.sqrt=function(){var e,t,r,n,i,s,c,u=this,m=u.constructor;if(u.s<1){if(!u.s)return new m(0);throw Error(Ln+"NaN")}for(e=nr(u),Tt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ca(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=el((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(i.toString()),r=m.precision,i=c=r+3;;)if(s=n,n=s.plus($a(u,s,c+2)).times(.5),ca(s.d).slice(0,c)===(t=ca(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),i==c&&t=="4999"){if(bt(s,r+1,0),s.times(s).eq(u)){n=s;break}}else if(t!="9999")break;c+=4}return Tt=!0,bt(n,r)};Ce.times=Ce.mul=function(e){var t,r,n,i,s,c,u,m,h,p=this,g=p.constructor,_=p.d,x=(e=new g(e)).d;if(!p.s||!e.s)return new g(0);for(e.s*=p.s,r=p.e+e.e,m=_.length,h=x.length,m<h&&(s=_,_=x,x=s,c=m,m=h,h=c),s=[],c=m+h,n=c;n--;)s.push(0);for(n=h;--n>=0;){for(t=0,i=m+n;i>n;)u=s[i]+x[n]*_[i-n-1]+t,s[i--]=u%gr|0,t=u/gr|0;s[i]=(s[i]+t)%gr|0}for(;!s[--c];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Tt?bt(e,g.precision):e};Ce.toDecimalPlaces=Ce.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ha(e,0,Js),t===void 0?t=n.rounding:ha(t,0,8),bt(r,e+nr(r)+1,t))};Ce.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Uo(n,!0):(ha(e,0,Js),t===void 0?t=i.rounding:ha(t,0,8),n=bt(new i(n),e+1,t),r=Uo(n,!0,e+1)),r};Ce.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?Uo(i):(ha(e,0,Js),t===void 0?t=s.rounding:ha(t,0,8),n=bt(new s(i),e+nr(i)+1,t),r=Uo(n.abs(),!1,e+nr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ce.toInteger=Ce.toint=function(){var e=this,t=e.constructor;return bt(new t(e),nr(e)+1,t.rounding)};Ce.toNumber=function(){return+this};Ce.toPower=Ce.pow=function(e){var t,r,n,i,s,c,u=this,m=u.constructor,h=12,p=+(e=new m(e));if(!e.s)return new m(mn);if(u=new m(u),!u.s){if(e.s<1)throw Error(Ln+"Infinity");return u}if(u.eq(mn))return u;if(n=m.precision,e.eq(mn))return bt(u,n);if(t=e.e,r=e.d.length-1,c=t>=r,s=u.s,c){if((r=p<0?-p:p)<=sT){for(i=new m(mn),t=Math.ceil(n/Ot+4),Tt=!1;r%2&&(i=i.times(u),sC(i.d,t)),r=el(r/2),r!==0;)u=u.times(u),sC(u.d,t);return Tt=!0,e.s<0?new m(mn).div(i):bt(i,n)}}else if(s<0)throw Error(Ln+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Tt=!1,i=e.times(Mc(u,n+h)),Tt=!0,i=cT(i),i.s=s,i};Ce.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=nr(i),n=Uo(i,r<=s.toExpNeg||r>=s.toExpPos)):(ha(e,1,Js),t===void 0?t=s.rounding:ha(t,0,8),i=bt(new s(i),e,t),r=nr(i),n=Uo(i,e<=r||r<=s.toExpNeg,e)),n};Ce.toSignificantDigits=Ce.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ha(e,1,Js),t===void 0?t=n.rounding:ha(t,0,8)),bt(new n(r),e,t)};Ce.toString=Ce.valueOf=Ce.val=Ce.toJSON=Ce[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=nr(e),r=e.constructor;return Uo(e,t<=r.toExpNeg||t>=r.toExpPos)};function lT(e,t){var r,n,i,s,c,u,m,h,p=e.constructor,g=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),Tt?bt(t,g):t;if(m=e.d,h=t.d,c=e.e,i=t.e,m=m.slice(),s=c-i,s){for(s<0?(n=m,s=-s,u=h.length):(n=h,i=c,u=m.length),c=Math.ceil(g/Ot),u=c>u?c+1:u+1,s>u&&(s=u,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(u=m.length,s=h.length,u-s<0&&(s=u,n=h,h=m,m=n),r=0;s;)r=(m[--s]=m[s]+h[s]+r)/gr|0,m[s]%=gr;for(r&&(m.unshift(r),++i),u=m.length;m[--u]==0;)m.pop();return t.d=m,t.e=i,Tt?bt(t,g):t}function ha(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Do+e)}function ca(e){var t,r,n,i=e.length-1,s="",c=e[0];if(i>0){for(s+=c,t=1;t<i;t++)n=e[t]+"",r=Ot-n.length,r&&(s+=qi(r)),s+=n;c=e[t],n=c+"",r=Ot-n.length,r&&(s+=qi(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var $a=(function(){function e(n,i){var s,c=0,u=n.length;for(n=n.slice();u--;)s=n[u]*i+c,n[u]=s%gr|0,c=s/gr|0;return c&&n.unshift(c),n}function t(n,i,s,c){var u,m;if(s!=c)m=s>c?1:-1;else for(u=m=0;u<s;u++)if(n[u]!=i[u]){m=n[u]>i[u]?1:-1;break}return m}function r(n,i,s){for(var c=0;s--;)n[s]-=c,c=n[s]<i[s]?1:0,n[s]=c*gr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,c){var u,m,h,p,g,_,x,w,j,S,O,C,A,k,D,M,L,X,ne=n.constructor,ae=n.s==i.s?1:-1,G=n.d,B=i.d;if(!n.s)return new ne(n);if(!i.s)throw Error(Ln+"Division by zero");for(m=n.e-i.e,L=B.length,D=G.length,x=new ne(ae),w=x.d=[],h=0;B[h]==(G[h]||0);)++h;if(B[h]>(G[h]||0)&&--m,s==null?C=s=ne.precision:c?C=s+(nr(n)-nr(i))+1:C=s,C<0)return new ne(0);if(C=C/Ot+2|0,h=0,L==1)for(p=0,B=B[0],C++;(h<D||p)&&C--;h++)A=p*gr+(G[h]||0),w[h]=A/B|0,p=A%B|0;else{for(p=gr/(B[0]+1)|0,p>1&&(B=e(B,p),G=e(G,p),L=B.length,D=G.length),k=L,j=G.slice(0,L),S=j.length;S<L;)j[S++]=0;X=B.slice(),X.unshift(0),M=B[0],B[1]>=gr/2&&++M;do p=0,u=t(B,j,L,S),u<0?(O=j[0],L!=S&&(O=O*gr+(j[1]||0)),p=O/M|0,p>1?(p>=gr&&(p=gr-1),g=e(B,p),_=g.length,S=j.length,u=t(g,j,_,S),u==1&&(p--,r(g,L<_?X:B,_))):(p==0&&(u=p=1),g=B.slice()),_=g.length,_<S&&g.unshift(0),r(j,g,S),u==-1&&(S=j.length,u=t(B,j,L,S),u<1&&(p++,r(j,L<S?X:B,S))),S=j.length):u===0&&(p++,j=[0]),w[h++]=p,u&&j[0]?j[S++]=G[k]||0:(j=[G[k]],S=1);while((k++<D||j[0]!==void 0)&&C--)}return w[0]||w.shift(),x.e=m,bt(x,c?s+nr(x)+1:s)}})();function cT(e,t){var r,n,i,s,c,u,m=0,h=0,p=e.constructor,g=p.precision;if(nr(e)>16)throw Error(C0+nr(e));if(!e.s)return new p(mn);for(Tt=!1,u=g,c=new p(.03125);e.abs().gte(.1);)e=e.times(c),h+=5;for(n=Math.log(jo(2,h))/Math.LN10*2+5|0,u+=n,r=i=s=new p(mn),p.precision=u;;){if(i=bt(i.times(e),u),r=r.times(++m),c=s.plus($a(i,r,u)),ca(c.d).slice(0,u)===ca(s.d).slice(0,u)){for(;h--;)s=bt(s.times(s),u);return p.precision=g,t==null?(Tt=!0,bt(s,g)):s}s=c}}function nr(e){for(var t=e.e*Ot,r=e.d[0];r>=10;r/=10)t++;return t}function $v(e,t,r){if(t>e.LN10.sd())throw Tt=!0,r&&(e.precision=r),Error(Ln+"LN10 precision limit exceeded");return bt(new e(e.LN10),t)}function qi(e){for(var t="";e--;)t+="0";return t}function Mc(e,t){var r,n,i,s,c,u,m,h,p,g=1,_=10,x=e,w=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(Ln+(x.s?"NaN":"-Infinity"));if(x.eq(mn))return new j(0);if(t==null?(Tt=!1,h=S):h=t,x.eq(10))return t==null&&(Tt=!0),$v(j,h);if(h+=_,j.precision=h,r=ca(w),n=r.charAt(0),s=nr(x),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=ca(x.d),n=r.charAt(0),g++;s=nr(x),n>1?(x=new j("0."+r),s++):x=new j(n+"."+r.slice(1))}else return m=$v(j,h+2,S).times(s+""),x=Mc(new j(n+"."+r.slice(1)),h-_).plus(m),j.precision=S,t==null?(Tt=!0,bt(x,S)):x;for(u=c=x=$a(x.minus(mn),x.plus(mn),h),p=bt(x.times(x),h),i=3;;){if(c=bt(c.times(p),h),m=u.plus($a(c,new j(i),h)),ca(m.d).slice(0,h)===ca(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus($v(j,h+2,S).times(s+""))),u=$a(u,new j(g),h),j.precision=S,t==null?(Tt=!0,bt(u,S)):u;u=m,i+=2}}function oC(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=el(r/Ot),e.d=[],n=(r+1)%Ot,r<0&&(n+=Ot),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ot;n<i;)e.d.push(+t.slice(n,n+=Ot));t=t.slice(n),n=Ot-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Tt&&(e.e>Gf||e.e<-Gf))throw Error(C0+r)}else e.s=0,e.e=0,e.d=[0];return e}function bt(e,t,r){var n,i,s,c,u,m,h,p,g=e.d;for(c=1,s=g[0];s>=10;s/=10)c++;if(n=t-c,n<0)n+=Ot,i=t,h=g[p=0];else{if(p=Math.ceil((n+1)/Ot),s=g.length,p>=s)return e;for(h=s=g[p],c=1;s>=10;s/=10)c++;n%=Ot,i=n-Ot+c}if(r!==void 0&&(s=jo(10,c-i-1),u=h/s%10|0,m=t<0||g[p+1]!==void 0||h%s,m=r<4?(u||m)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||m||r==6&&(n>0?i>0?h/jo(10,c-i):0:g[p-1])%10&1||r==(e.s<0?8:7))),t<1||!g[0])return m?(s=nr(e),g.length=1,t=t-s-1,g[0]=jo(10,(Ot-t%Ot)%Ot),e.e=el(-t/Ot)||0):(g.length=1,g[0]=e.e=e.s=0),e;if(n==0?(g.length=p,s=1,p--):(g.length=p+1,s=jo(10,Ot-n),g[p]=i>0?(h/jo(10,c-i)%jo(10,i)|0)*s:0),m)for(;;)if(p==0){(g[0]+=s)==gr&&(g[0]=1,++e.e);break}else{if(g[p]+=s,g[p]!=gr)break;g[p--]=0,s=1}for(n=g.length;g[--n]===0;)g.pop();if(Tt&&(e.e>Gf||e.e<-Gf))throw Error(C0+nr(e));return e}function uT(e,t){var r,n,i,s,c,u,m,h,p,g,_=e.constructor,x=_.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new _(e),Tt?bt(t,x):t;if(m=e.d,g=t.d,n=t.e,h=e.e,m=m.slice(),c=h-n,c){for(p=c<0,p?(r=m,c=-c,u=g.length):(r=g,n=h,u=m.length),i=Math.max(Math.ceil(x/Ot),u)+2,c>i&&(c=i,r.length=1),r.reverse(),i=c;i--;)r.push(0);r.reverse()}else{for(i=m.length,u=g.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(m[i]!=g[i]){p=m[i]<g[i];break}c=0}for(p&&(r=m,m=g,g=r,t.s=-t.s),u=m.length,i=g.length-u;i>0;--i)m[u++]=0;for(i=g.length;i>c;){if(m[--i]<g[i]){for(s=i;s&&m[--s]===0;)m[s]=gr-1;--m[s],m[i]+=gr}m[i]-=g[i]}for(;m[--u]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,Tt?bt(t,x):t):new _(0)}function Uo(e,t,r){var n,i=nr(e),s=ca(e.d),c=s.length;return t?(r&&(n=r-c)>0?s=s.charAt(0)+"."+s.slice(1)+qi(n):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+qi(-i-1)+s,r&&(n=r-c)>0&&(s+=qi(n))):i>=c?(s+=qi(i+1-c),r&&(n=r-i-1)>0&&(s=s+"."+qi(n))):((n=i+1)<c&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-c)>0&&(i+1===c&&(s+="."),s+=qi(n))),e.s<0?"-"+s:s}function sC(e,t){if(e.length>t)return e.length=t,!0}function dT(e){var t,r,n;function i(s){var c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,s instanceof i){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Do+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return oC(c,s.toString())}else if(typeof s!="string")throw Error(Do+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,g8.test(s))oC(c,s);else throw Error(Do+s)}if(i.prototype=Ce,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=dT,i.config=i.set=v8,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function v8(e){if(!e||typeof e!="object")throw Error(Ln+"Object expected");var t,r,n,i=["precision",1,Js,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(el(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Do+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Do+r+": "+n);return this}var A0=dT(p8);mn=new A0(1);const ut=A0;var y8=e=>e,fT={},mT=e=>e===fT,lC=e=>function t(){return arguments.length===0||arguments.length===1&&mT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},hT=(e,t)=>e===1?t:lC(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.filter(c=>c!==fT).length;return s>=e?t(...n):hT(e-s,lC(function(){for(var c=arguments.length,u=new Array(c),m=0;m<c;m++)u[m]=arguments[m];var h=n.map(p=>mT(p)?u.shift():p);return t(...h,...u)}))}),b8=e=>hT(e.length,e),rb=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},_8=b8((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),x8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return y8;var i=r.reverse(),s=i[0],c=i.slice(1);return function(){return c.reduce((u,m)=>m(u),s(...arguments))}};function pT(e){var t;return e===0?t=1:t=Math.floor(new ut(e).abs().log(10).toNumber())+1,t}function gT(e,t,r){for(var n=new ut(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var vT=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},yT=(e,t,r)=>{if(e.lte(0))return new ut(0);var n=pT(e.toNumber()),i=new ut(10).pow(n),s=e.div(i),c=n!==1?.05:.1,u=new ut(Math.ceil(s.div(c).toNumber())).add(r).mul(c),m=u.mul(i);return t?new ut(m.toNumber()):new ut(Math.ceil(m.toNumber()))},w8=(e,t,r)=>{var n=new ut(1),i=new ut(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new ut(10).pow(pT(e)-1),i=new ut(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new ut(Math.floor(e)))}else e===0?i=new ut(Math.floor((t-1)/2)):r||(i=new ut(Math.floor(e)));var c=Math.floor((t-1)/2),u=x8(_8(m=>i.add(new ut(m-c).mul(n)).toNumber()),rb);return u(0,t)},bT=function(t,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ut(0),tickMin:new ut(0),tickMax:new ut(0)};var c=yT(new ut(r).sub(t).div(n-1),i,s),u;t<=0&&r>=0?u=new ut(0):(u=new ut(t).add(r).div(2),u=u.sub(new ut(u).mod(c)));var m=Math.ceil(u.sub(t).div(c).toNumber()),h=Math.ceil(new ut(r).sub(u).div(c).toNumber()),p=m+h+1;return p>n?bT(t,r,n,i,s+1):(p<n&&(h=r>0?h+(n-p):h,m=r>0?m:m+(n-p)),{step:c,tickMin:u.sub(new ut(m).mul(c)),tickMax:u.add(new ut(h).mul(c))})},j8=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,m]=vT([r,n]);if(u===-1/0||m===1/0){var h=m===1/0?[u,...rb(0,i-1).map(()=>1/0)]:[...rb(0,i-1).map(()=>-1/0),m];return r>n?h.reverse():h}if(u===m)return w8(u,i,s);var{step:p,tickMin:g,tickMax:_}=bT(u,m,c,s,0),x=gT(g,_.add(new ut(.1).mul(p)),p);return r>n?x.reverse():x},S8=function(t,r){var[n,i]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=vT([n,i]);if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var m=Math.max(r,2),h=yT(new ut(u).sub(c).div(m-1),s,0),p=[...gT(new ut(c),new ut(u),h),u];return s===!1&&(p=p.map(g=>Math.round(g))),n>i?p.reverse():p},_T=e=>e.rootProps.maxBarSize,E8=e=>e.rootProps.barGap,xT=e=>e.rootProps.barCategoryGap,O8=e=>e.rootProps.barSize,eu=e=>e.rootProps.stackOffset,wT=e=>e.rootProps.reverseStackOrder,N0=e=>e.options.chartName,k0=e=>e.rootProps.syncId,jT=e=>e.rootProps.syncMethod,D0=e=>e.options.eventEmitter,qZ=e=>e.rootProps.baseValue,rr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},La={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},fn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},$m=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},C8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:La.angleAxisId,includeHidden:!1,name:void 0,reversed:La.reversed,scale:La.scale,tick:La.tick,tickCount:void 0,ticks:void 0,type:La.type,unit:void 0},A8={allowDataOverflow:fn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fn.scale,tick:fn.tick,tickCount:fn.tickCount,ticks:void 0,type:fn.type,unit:void 0},N8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:La.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:La.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:La.scale,tick:La.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},k8={allowDataOverflow:fn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fn.scale,tick:fn.tick,tickCount:fn.tickCount,ticks:void 0,type:"category",unit:void 0},T0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?N8:C8,P0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?k8:A8,Hm=e=>e.polarOptions,M0=W([ti,ri,cr],xD),ST=W([Hm,M0],(e,t)=>{if(e!=null)return Dr(e.innerRadius,t,0)}),ET=W([Hm,M0],(e,t)=>{if(e!=null)return Dr(e.outerRadius,t,t*.8)}),D8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},OT=W([Hm],D8);W([T0,OT],$m);var CT=W([M0,ST,ET],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});W([P0,CT],$m);var AT=W([Je,Hm,ST,ET,ti,ri],(e,t,r,n,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:u,startAngle:m,endAngle:h}=t;return{cx:Dr(c,i,i/2),cy:Dr(u,s,s/2),innerRadius:r,outerRadius:n,startAngle:m,endAngle:h,clockWise:!1}}}),qt=(e,t)=>t,tu=(e,t,r)=>r;function R0(e){return e?.id}function NT(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=r,c=new Map;return e.forEach(u=>{var m,h=(m=u.data)!==null&&m!==void 0?m:n;if(!(h==null||h.length===0)){var p=R0(u);h.forEach((g,_)=>{var x=s==null||i?_:String(pt(g,s,null)),w=pt(g,u.dataKey,0),j;c.has(x)?j=c.get(x):j={},Object.assign(j,{[p]:w}),c.set(x,j)})}}),Array.from(c.values())}function Fm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Km=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Ym(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function T8(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var dr=e=>{var t=Je(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},tl=e=>e.tooltip.settings.axisId;function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(n){P8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function P8(e,t,r){return(t=M8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M8(e){var t=R8(e,"string");return typeof t=="symbol"?t:t+""}function R8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nb=[0,"auto"],hr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},kT=(e,t)=>e.cartesianAxis.xAxis[t],ii=(e,t)=>{var r=kT(e,t);return r??hr},pr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:nb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Yc},DT=(e,t)=>e.cartesianAxis.yAxis[t],oi=(e,t)=>{var r=DT(e,t);return r??pr},q8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},q0=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??q8},Lt=(e,t,r)=>{switch(t){case"xAxis":return ii(e,r);case"yAxis":return oi(e,r);case"zAxis":return q0(e,r);case"angleAxis":return T0(e,r);case"radiusAxis":return P0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},z8=(e,t,r)=>{switch(t){case"xAxis":return ii(e,r);case"yAxis":return oi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ru=(e,t,r)=>{switch(t){case"xAxis":return ii(e,r);case"yAxis":return oi(e,r);case"angleAxis":return T0(e,r);case"radiusAxis":return P0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},TT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function z0(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Gm=e=>e.graphicalItems.cartesianItems,L8=W([qt,tu],z0),L0=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),nu=W([Gm,Lt,L8],L0,{memoizeOptions:{resultEqualityCheck:Ym}}),PT=W([nu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Fm)),MT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),I8=W([nu],MT),I0=e=>e.map(t=>t.data).filter(Boolean).flat(1),U8=W([nu],I0,{memoizeOptions:{resultEqualityCheck:Ym}}),U0=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},B0=W([U8,O0],U0),$0=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:pt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:pt(i,n)}))):e.map(n=>({value:n})),Vm=W([B0,Lt,nu],$0);function RT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function lf(e){if(fa(e)||e instanceof Date){var t=Number(e);if(zt(t))return t}}function uC(e){if(Array.isArray(e)){var t=[lf(e[0]),lf(e[1])];return Hi(t)?t:void 0}var r=lf(e);if(r!=null)return[r,r]}function Xa(e){return e.map(lf).filter(rI)}function B8(e,t,r){return!r||typeof t!="number"||Qn(t)?[]:r.length?Xa(r.flatMap(n=>{var i=pt(e,n.dataKey),s,c;if(Array.isArray(i)?[s,c]=i:s=c=i,!(!zt(s)||!zt(c)))return[t-s,t+c]})):[]}var fr=e=>{var t=dr(e),r=tl(e);return ru(e,t,r)},au=W([fr],e=>e?.dataKey),$8=W([PT,O0,fr],NT),qT=(e,t,r,n)=>{var i={},s=t.reduce((c,u)=>{if(u.stackId==null)return c;var m=c[u.stackId];return m==null&&(m=[]),m.push(u),c[u.stackId]=m,c},i);return Object.fromEntries(Object.entries(s).map(c=>{var[u,m]=c,h=n?[...m].reverse():m,p=h.map(R0);return[u,{stackedData:x5(e,p,r),graphicalItems:h}]}))},ab=W([$8,PT,eu,wT],qT),zT=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var c=O5(e,i,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},H8=W([Lt],e=>e.allowDataOverflow),H0=e=>{var t;if(e==null||!("domain"in e))return nb;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=Xa(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:nb},F0=W([Lt],H0),K0=W([F0,H8],oT),F8=W([ab,ai,qt,K0],zT,{memoizeOptions:{resultEqualityCheck:Km}}),Wm=e=>e.errorBars,K8=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>RT(r,n)),Wf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),c=Math.min(...s),u=Math.max(...s);return[c,u]}},Y0=(e,t,r,n,i)=>{var s,c;if(r.length>0&&e.forEach(u=>{r.forEach(m=>{var h,p,g=(h=n[m.id])===null||h===void 0?void 0:h.filter(O=>RT(i,O)),_=pt(u,(p=t.dataKey)!==null&&p!==void 0?p:m.dataKey),x=B8(u,_,g);if(x.length>=2){var w=Math.min(...x),j=Math.max(...x);(s==null||w<s)&&(s=w),(c==null||j>c)&&(c=j)}var S=uC(_);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),c=c==null?S[1]:Math.max(c,S[1]))})}),t?.dataKey!=null&&e.forEach(u=>{var m=uC(pt(u,t.dataKey));m!=null&&(s=s==null?m[0]:Math.min(s,m[0]),c=c==null?m[1]:Math.max(c,m[1]))}),zt(s)&&zt(c))return[s,c]},Y8=W([B0,Lt,I8,Wm,qt],Y0,{memoizeOptions:{resultEqualityCheck:Km}});function G8(e){var{value:t}=e;if(fa(t)||t instanceof Date)return t}var V8=(e,t,r)=>{var n=e.map(G8).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&JN(n))?ED(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},LT=e=>e.referenceElements.dots,rl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),W8=W([LT,qt,tu],rl),IT=e=>e.referenceElements.areas,X8=W([IT,qt,tu],rl),UT=e=>e.referenceElements.lines,Z8=W([UT,qt,tu],rl),BT=(e,t)=>{if(e!=null){var r=Xa(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Q8=W(W8,qt,BT),$T=(e,t)=>{if(e!=null){var r=Xa(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},J8=W([X8,qt],$T);function eH(e){var t;if(e.x!=null)return Xa([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Xa(r)}function tH(e){var t;if(e.y!=null)return Xa([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Xa(r)}var HT=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?eH(n):tH(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},rH=W([Z8,qt],HT),nH=W(Q8,rH,J8,(e,t,r)=>Wf(e,r,t)),G0=(e,t,r,n,i,s,c,u)=>{if(r!=null)return r;var m=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",h=m?Wf(n,s,i):Wf(s,i);return h8(t,h,e.allowDataOverflow)},aH=W([Lt,F0,K0,F8,Y8,nH,Je,qt],G0,{memoizeOptions:{resultEqualityCheck:Km}}),iH=[0,1],V0=(e,t,r,n,i,s,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:u,type:m}=e,h=Vi(t,s);if(h&&u==null){var p;return ED(0,(p=r?.length)!==null&&p!==void 0?p:0)}return m==="category"?V8(n,e,h):i==="expand"?iH:c}},W0=W([Lt,Je,B0,Vm,eu,qt,aH],V0),FT=(e,t,r,n,i)=>{if(e!=null){var{scale:s,type:c}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat($c(s));return u in vc?u:"point"}}},nl=W([Lt,Je,TT,N0,qt],FT);function oH(e){if(e!=null){if(e in vc)return vc[e]();var t="scale".concat($c(e));if(t in vc)return vc[t]()}}function X0(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=oH(t);if(i!=null){var s=i.domain(r).range(n);return g5(s),s}}}var Z0=(e,t,r)=>{var n=H0(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Hi(e))return j8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Hi(e))return S8(e,t.tickCount,t.allowDecimals)}},Q0=W([W0,ru,nl],Z0),J0=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Hi(t)&&Array.isArray(r)&&r.length>0){var i=t[0],s=r[0],c=t[1],u=r[r.length-1];return[Math.min(i,s),Math.max(c,u)]}return t},sH=W([Lt,W0,Q0,qt],J0),lH=W(Vm,Lt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Xa(e.map(g=>g.value))).sort((g,_)=>g-_),i=n[0],s=n[n.length-1];if(i==null||s==null)return 1/0;var c=s-i;if(c===0)return 1/0;for(var u=0;u<n.length-1;u++){var m=n[u],h=n[u+1];if(!(m==null||h==null)){var p=h-m;r=Math.min(r,p)}}return r/c}}),KT=W(lH,Je,xT,cr,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!zt(e))return 0;var s=t==="vertical"?n.height:n.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var c=Dr(r,e*s),u=e*s/2;return u-c-(u-c)/s*c}return 0}),cH=(e,t,r)=>{var n=ii(e,t);return n==null||typeof n.padding!="string"?0:KT(e,"xAxis",t,r,n.padding)},uH=(e,t,r)=>{var n=oi(e,t);return n==null||typeof n.padding!="string"?0:KT(e,"yAxis",t,r,n.padding)},dH=W(ii,cH,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),fH=W(oi,uH,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),mH=W([cr,dH,Am,Cm,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),hH=W([cr,Je,fH,Am,Cm,(e,t,r)=>r],(e,t,r,n,i,s)=>{var{padding:c}=i;return s?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),iu=(e,t,r,n)=>{var i;switch(t){case"xAxis":return mH(e,r,n);case"yAxis":return hH(e,r,n);case"zAxis":return(i=q0(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return OT(e);case"radiusAxis":return CT(e,r);default:return}},YT=W([Lt,iu],$m),Xm=W([Lt,nl,sH,YT],X0);W([nu,Wm,qt],K8);function GT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Zm=(e,t)=>t,Qm=(e,t,r)=>r,pH=W(Em,Zm,Qm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(GT)),gH=W(Om,Zm,Qm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(GT)),VT=(e,t)=>({width:e.width,height:t.height}),vH=(e,t)=>{var r=typeof t.width=="number"?t.width:Yc;return{width:r,height:e.height}},WT=W(cr,ii,VT),yH=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},bH=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},_H=W(ri,cr,pH,Zm,Qm,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=VT(t,u);c==null&&(c=yH(t,n,e));var h=n==="top"&&!i||n==="bottom"&&i;s[u.id]=c-Number(h)*m.height,c+=(h?-1:1)*m.height}),s}),xH=W(ti,cr,gH,Zm,Qm,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=vH(t,u);c==null&&(c=bH(t,n,e));var h=n==="left"&&!i||n==="right"&&i;s[u.id]=c-Number(h)*m.width,c+=(h?-1:1)*m.width}),s}),wH=(e,t)=>{var r=ii(e,t);if(r!=null)return _H(e,r.orientation,r.mirror)},jH=W([cr,ii,wH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),SH=(e,t)=>{var r=oi(e,t);if(r!=null)return xH(e,r.orientation,r.mirror)},EH=W([cr,oi,SH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),XT=W(cr,oi,(e,t)=>{var r=typeof t.width=="number"?t.width:Yc;return{width:r,height:e.height}}),dC=(e,t,r)=>{switch(t){case"xAxis":return WT(e,r).width;case"yAxis":return XT(e,r).height;default:return}},ZT=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:c}=r,u=Vi(e,n),m=t.map(h=>h.value);if(c&&u&&s==="category"&&i&&JN(m))return m}},e_=W([Je,Vm,Lt,qt],ZT),QT=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,c=Vi(e,n);if(c&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},t_=W([Je,Vm,ru,qt],QT),fC=W([Je,z8,nl,Xm,e_,t_,iu,Q0,qt],(e,t,r,n,i,s,c,u,m)=>{if(t!=null){var h=Vi(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:c,realScaleType:r,scale:n}}}),OH=(e,t,r,n,i,s,c,u,m)=>{if(!(t==null||n==null)){var h=Vi(e,m),{type:p,ticks:g,tickCount:_}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=p==="category"&&n.bandwidth?n.bandwidth()/x:0;w=m==="angleAxis"&&s!=null&&s.length>=2?vr(s[0]-s[1])*2*w:w;var j=g||i;if(j){var S=j.map((O,C)=>{var A=c?c.indexOf(O):O;return{index:C,coordinate:n(A)+w,value:O,offset:w}});return S.filter(O=>zt(O.coordinate))}return h&&u?u.map((O,C)=>({coordinate:n(O)+w,value:O,index:C,offset:w})).filter(O=>zt(O.coordinate)):n.ticks?n.ticks(_).map(O=>({coordinate:n(O)+w,value:O,offset:w})):n.domain().map((O,C)=>({coordinate:n(O)+w,value:c?c[O]:O,index:C,offset:w}))}},JT=W([Je,ru,nl,Xm,Q0,iu,e_,t_,qt],OH),CH=(e,t,r,n,i,s,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Vi(e,c),{tickCount:m}=t,h=0;return h=c==="angleAxis"&&n?.length>=2?vr(n[0]-n[1])*2*h:h,u&&s?s.map((p,g)=>({coordinate:r(p)+h,value:p,index:g,offset:h})):r.ticks?r.ticks(m).map(p=>({coordinate:r(p)+h,value:p,offset:h})):r.domain().map((p,g)=>({coordinate:r(p)+h,value:i?i[p]:p,index:g,offset:h}))}},Fi=W([Je,ru,Xm,iu,e_,t_,qt],CH),Ki=W(Lt,Xm,(e,t)=>{if(!(e==null||t==null))return Vf(Vf({},e),{},{scale:t})}),AH=W([Lt,nl,W0,YT],X0);W((e,t,r)=>q0(e,r),AH,(e,t)=>{if(!(e==null||t==null))return Vf(Vf({},e),{},{scale:t})});var NH=W([Je,Em,Om],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),eP=e=>e.options.defaultTooltipEventType,tP=e=>e.options.validateTooltipEventTypes;function rP(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function r_(e,t){var r=eP(e),n=tP(e);return rP(t,r,n)}function kH(e){return De(t=>r_(t,e))}var nP=(e,t)=>{var r,n=Number(t);if(!(Qn(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},DH=e=>e.tooltip.settings,Li={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},TH={itemInteraction:{click:Li,hover:Li},axisInteraction:{click:Li,hover:Li},keyboardInteraction:Li,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},aP=Zr({name:"tooltip",initialState:TH,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:kt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Xn(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:kt()},removeTooltipEntrySettings:{reducer(e,t){var r=Xn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:kt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:PH,replaceTooltipEntrySettings:MH,removeTooltipEntrySettings:RH,setTooltipSettingsState:qH,setActiveMouseOverItemIndex:iP,mouseLeaveItem:zH,mouseLeaveChart:oP,setActiveClickItemIndex:LH,setMouseOverAxisIndex:sP,setMouseClickAxisIndex:IH,setSyncInteraction:ib,setKeyboardInteraction:ob}=aP.actions,UH=aP.reducer;function mC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(r),!0).forEach(function(n){BH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BH(e,t,r){return(t=$H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $H(e){var t=HH(e,"string");return typeof t=="symbol"?t:t+""}function HH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FH(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function KH(e){return e.index!=null}var lP=(e,t,r,n)=>{if(t==null)return Li;var i=FH(e,t,r);if(i==null)return Li;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(KH(i)){if(s)return Yd(Yd({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Yd(Yd({},Li),{},{coordinate:i.coordinate})};function YH(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function GH(e,t){var r=YH(e),n=t[0],i=t[1];if(r===void 0)return!1;var s=Math.min(n,i),c=Math.max(n,i);return r>=s&&r<=c}function VH(e,t,r){if(r==null||t==null)return!0;var n=pt(e,t);return n==null||!Hi(r)?!0:GH(n,r)}var n_=(e,t,r,n)=>{var i=e?.index;if(i==null)return null;var s=Number(i);if(!zt(s))return i;var c=0,u=1/0;t.length>0&&(u=t.length-1);var m=Math.max(c,Math.min(s,u)),h=t[m];return h==null||VH(h,r,n)?String(m):null},cP=(e,t,r,n,i,s,c,u)=>{if(!(s==null||u==null)){var m=c[0],h=m==null?void 0:u(m.positions,s);if(h!=null)return h;var p=i?.[Number(s)];if(p)switch(r){case"horizontal":return{x:p.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:p.coordinate}}}},uP=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},ou=e=>e.options.tooltipPayloadSearcher,al=e=>e.tooltip;function hC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(r),!0).forEach(function(n){WH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WH(e,t,r){return(t=XH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XH(e){var t=ZH(e,"string");return typeof t=="symbol"?t:t+""}function ZH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QH(e,t){return e??t}var dP=(e,t,r,n,i,s,c)=>{if(!(t==null||s==null)){var{chartData:u,computedData:m,dataStartIndex:h,dataEndIndex:p}=r,g=[];return e.reduce((_,x)=>{var w,{dataDefinedOnItem:j,settings:S}=x,O=QH(j,u),C=Array.isArray(O)?Yk(O,h,p):O,A=(w=S?.dataKey)!==null&&w!==void 0?w:n,k=S?.nameKey,D;if(n&&Array.isArray(C)&&!Array.isArray(C[0])&&c==="axis"?D=ek(C,n,i):D=s(C,t,m,k),Array.isArray(D))D.forEach(L=>{var X=pC(pC({},S),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});_.push(_E({tooltipEntrySettings:X,dataKey:L.dataKey,payload:L.payload,value:pt(L.payload,L.dataKey),name:L.name}))});else{var M;_.push(_E({tooltipEntrySettings:S,dataKey:A,payload:D,value:pt(D,A),name:(M=pt(D,k))!==null&&M!==void 0?M:S?.name}))}return _},g)}},a_=W([fr,Je,TT,N0,dr],FT),JH=W([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),e9=W([dr,tl],z0),il=W([JH,fr,e9],L0,{memoizeOptions:{resultEqualityCheck:Ym}}),t9=W([il],e=>e.filter(Fm)),r9=W([il],I0,{memoizeOptions:{resultEqualityCheck:Ym}}),ol=W([r9,ai],U0),n9=W([t9,ai,fr],NT),i_=W([ol,fr,il],$0),fP=W([fr],H0),a9=W([fr],e=>e.allowDataOverflow),mP=W([fP,a9],oT),i9=W([il],e=>e.filter(Fm)),o9=W([n9,i9,eu,wT],qT),s9=W([o9,ai,dr,mP],zT),l9=W([il],MT),c9=W([ol,fr,l9,Wm,dr],Y0,{memoizeOptions:{resultEqualityCheck:Km}}),u9=W([LT,dr,tl],rl),d9=W([u9,dr],BT),f9=W([IT,dr,tl],rl),m9=W([f9,dr],$T),h9=W([UT,dr,tl],rl),p9=W([h9,dr],HT),g9=W([d9,p9,m9],Wf),v9=W([fr,fP,mP,s9,c9,g9,Je,dr],G0),su=W([fr,Je,ol,i_,eu,dr,v9],V0),y9=W([su,fr,a_],Z0),b9=W([fr,su,y9,dr],J0),hP=e=>{var t=dr(e),r=tl(e),n=!1;return iu(e,t,r,n)},pP=W([fr,hP],$m),gP=W([fr,a_,b9,pP],X0),_9=W([Je,i_,fr,dr],ZT),x9=W([Je,i_,fr,dr],QT),w9=(e,t,r,n,i,s,c,u)=>{if(t){var{type:m}=t,h=Vi(e,u);if(n){var p=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,g=m==="category"&&n.bandwidth?n.bandwidth()/p:0;return g=u==="angleAxis"&&i!=null&&i?.length>=2?vr(i[0]-i[1])*2*g:g,h&&c?c.map((_,x)=>({coordinate:n(_)+g,value:_,index:x,offset:g})):n.domain().map((_,x)=>({coordinate:n(_)+g,value:s?s[_]:_,index:x,offset:g}))}}},si=W([Je,fr,a_,gP,hP,_9,x9,dr],w9),o_=W([eP,tP,DH],(e,t,r)=>rP(r.shared,e,t)),vP=e=>e.tooltip.settings.trigger,s_=e=>e.tooltip.settings.defaultIndex,lu=W([al,o_,vP,s_],lP),Yi=W([lu,ol,au,su],n_),yP=W([si,Yi],nP),l_=W([lu],e=>{if(e)return e.dataKey}),j9=W([lu],e=>{if(e)return e.graphicalItemId}),bP=W([al,o_,vP,s_],uP),S9=W([ti,ri,Je,cr,si,s_,bP,ou],cP),E9=W([lu,S9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),O9=W([lu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),C9=W([bP,Yi,ai,au,yP,ou,o_],dP),A9=W([C9],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function gC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gC(Object(r),!0).forEach(function(n){N9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N9(e,t,r){return(t=k9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k9(e){var t=D9(e,"string");return typeof t=="symbol"?t:t+""}function D9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var T9=()=>De(fr),P9=()=>{var e=T9(),t=De(si),r=De(gP);return Hs(!e||!r?void 0:vC(vC({},e),{},{scale:r}),t)};function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(n){M9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M9(e,t,r){return(t=R9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R9(e){var t=q9(e,"string");return typeof t=="symbol"?t:t+""}function q9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var z9=(e,t,r,n)=>{var i=t.find(s=>s&&s.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},L9=(e,t,r,n)=>{var i=t.find(h=>h&&h.index===r);if(i){if(e==="centric"){var s=i.coordinate,{radius:c}=n;return Ms(Ms(Ms({},n),tr(n.cx,n.cy,c,s)),{},{angle:s,radius:c})}var u=i.coordinate,{angle:m}=n;return Ms(Ms(Ms({},n),tr(n.cx,n.cy,u,m)),{},{angle:m,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function I9(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var _P=(e,t,r,n,i)=>{var s,c=(s=t?.length)!==null&&s!==void 0?s:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var m,h,p,g,_,x=u>0?(m=r[u-1])===null||m===void 0?void 0:m.coordinate:(h=r[c-1])===null||h===void 0?void 0:h.coordinate,w=(p=r[u])===null||p===void 0?void 0:p.coordinate,j=u>=c-1?(g=r[0])===null||g===void 0?void 0:g.coordinate:(_=r[u+1])===null||_===void 0?void 0:_.coordinate,S=void 0;if(!(x==null||w==null||j==null))if(vr(w-x)!==vr(j-w)){var O=[];if(vr(j-w)===vr(i[1]-i[0])){S=j;var C=w+i[1]-i[0];O[0]=Math.min(C,(C+x)/2),O[1]=Math.max(C,(C+x)/2)}else{S=x;var A=j+i[1]-i[0];O[0]=Math.min(w,(A+w)/2),O[1]=Math.max(w,(A+w)/2)}var k=[Math.min(w,(S+w)/2),Math.max(w,(S+w)/2)];if(e>k[0]&&e<=k[1]||e>=O[0]&&e<=O[1]){var D;return(D=r[u])===null||D===void 0?void 0:D.index}}else{var M=Math.min(x,j),L=Math.max(x,j);if(e>(M+w)/2&&e<=(L+w)/2){var X;return(X=r[u])===null||X===void 0?void 0:X.index}}}else if(t)for(var ne=0;ne<c;ne++){var ae=t[ne];if(ae!=null){var G=t[ne+1],B=t[ne-1];if(ne===0&&G!=null&&e<=(ae.coordinate+G.coordinate)/2||ne===c-1&&B!=null&&e>(ae.coordinate+B.coordinate)/2||ne>0&&ne<c-1&&B!=null&&G!=null&&e>(ae.coordinate+B.coordinate)/2&&e<=(ae.coordinate+G.coordinate)/2)return ae.index}}return-1},U9=()=>De(N0),c_=(e,t)=>t,xP=(e,t,r)=>r,u_=(e,t,r,n)=>n,B9=W(si,e=>pm(e,t=>t.coordinate)),d_=W([al,c_,xP,u_],lP),f_=W([d_,ol,au,su],n_),$9=(e,t,r)=>{if(t!=null){var n=al(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},wP=W([al,c_,xP,u_],uP),Xf=W([ti,ri,Je,cr,si,u_,wP,ou],cP),H9=W([d_,Xf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),jP=W([si,f_],nP),F9=W([wP,f_,ai,au,jP,ou,c_],dP),K9=W([d_,f_],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),Y9=(e,t,r,n,i,s,c)=>{if(!(!e||!r||!n||!i)&&I9(e,c)){var u=C5(e,t),m=_P(u,s,i,r,n),h=z9(t,i,m,e);return{activeIndex:String(m),activeCoordinate:h}}},G9=(e,t,r,n,i,s,c)=>{if(!(!e||!n||!i||!s||!r)){var u=N6(e,r);if(u){var m=A5(u,t),h=_P(m,c,s,n,i),p=L9(t,s,h,u);return{activeIndex:String(h),activeCoordinate:p}}}},V9=(e,t,r,n,i,s,c,u)=>{if(!(!e||!t||!n||!i||!s))return t==="horizontal"||t==="vertical"?Y9(e,t,n,i,s,c,u):G9(e,t,r,n,i,s,c)},W9=W(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),X9=W(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(rr)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:T8}});function bC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(r),!0).forEach(function(n){Z9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Z9(e,t,r){return(t=Q9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q9(e){var t=J9(e,"string");return typeof t=="symbol"?t:t+""}function J9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e7={},t7={zIndexMap:Object.values(rr).reduce((e,t)=>_C(_C({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),e7)},r7=new Set(Object.values(rr));function n7(e){return r7.has(e)}var SP=Zr({name:"zIndex",initialState:t7,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:kt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!n7(r)&&delete e.zIndexMap[r])},prepare:kt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:kt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:kt()}}}),{registerZIndexPortal:a7,unregisterZIndexPortal:i7,registerZIndexPortalElement:o7,unregisterZIndexPortalElement:s7}=SP.actions,l7=SP.reducer;function Qr(e){var{zIndex:t,children:r}=e,n=aU(),i=n&&t!==void 0&&t!==0,s=Tr(),c=Rt();y.useLayoutEffect(()=>i?(c(a7({zIndex:t})),()=>{c(i7({zIndex:t}))}):Hc,[c,t,i]);var u=De(m=>W9(m,t,s));return i?u?_N.createPortal(r,u):null:r}function sb(){return sb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sb.apply(null,arguments)}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){c7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function c7(e,t,r){return(t=u7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u7(e){var t=d7(e,"string");return typeof t=="symbol"?t:t+""}function d7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f7(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function m7(e){var t,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:c,layout:u,cursor:m,tooltipEventType:h,chartName:p}=e,g=r,_=n,x=i;if(!m||!g||p!=="ScatterChart"&&h!=="axis")return null;var w,j,S;if(p==="ScatterChart")w=g,j=HU,S=rr.cursorLine;else if(p==="BarChart")w=FU(u,g,s,c),j=_D,S=rr.cursorRectangle;else if(u==="radial"&&nk(g)){var{cx:O,cy:C,radius:A,startAngle:k,endAngle:D}=wD(g);w={cx:O,cy:C,startAngle:k,endAngle:D,innerRadius:A,outerRadius:A},j=SD,S=rr.cursorLine}else w={points:P6(u,g,s)},j=r0,S=rr.cursorLine;var M=typeof m=="object"&&"className"in m?m.className:void 0,L=Gd(Gd(Gd(Gd({stroke:"#ccc",pointerEvents:"none"},s),w),Mo(m)),{},{payload:_,payloadIndex:x,className:ot("recharts-tooltip-cursor",M)});return y.createElement(Qr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},y.createElement(f7,{cursor:m,cursorComp:j,cursorProps:L}))}function h7(e){var t=P9(),r=rD(),n=Ko(),i=U9();return t==null||r==null||n==null||i==null?null:y.createElement(m7,sb({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var EP=y.createContext(null),p7=()=>y.useContext(EP),Hv={exports:{}},wC;function g7(){return wC||(wC=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(m,h,p){this.fn=m,this.context=h,this.once=p||!1}function s(m,h,p,g,_){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,g||m,_),w=r?r+h:h;return m._events[w]?m._events[w].fn?m._events[w]=[m._events[w],x]:m._events[w].push(x):(m._events[w]=x,m._eventsCount++),m}function c(m,h){--m._eventsCount===0?m._events=new n:delete m._events[h]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,g;if(this._eventsCount===0)return h;for(g in p=this._events)t.call(p,g)&&h.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=r?r+h:h,g=this._events[p];if(!g)return[];if(g.fn)return[g.fn];for(var _=0,x=g.length,w=new Array(x);_<x;_++)w[_]=g[_].fn;return w},u.prototype.listenerCount=function(h){var p=r?r+h:h,g=this._events[p];return g?g.fn?1:g.length:0},u.prototype.emit=function(h,p,g,_,x,w){var j=r?r+h:h;if(!this._events[j])return!1;var S=this._events[j],O=arguments.length,C,A;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),O){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,g),!0;case 4:return S.fn.call(S.context,p,g,_),!0;case 5:return S.fn.call(S.context,p,g,_,x),!0;case 6:return S.fn.call(S.context,p,g,_,x,w),!0}for(A=1,C=new Array(O-1);A<O;A++)C[A-1]=arguments[A];S.fn.apply(S.context,C)}else{var k=S.length,D;for(A=0;A<k;A++)switch(S[A].once&&this.removeListener(h,S[A].fn,void 0,!0),O){case 1:S[A].fn.call(S[A].context);break;case 2:S[A].fn.call(S[A].context,p);break;case 3:S[A].fn.call(S[A].context,p,g);break;case 4:S[A].fn.call(S[A].context,p,g,_);break;default:if(!C)for(D=1,C=new Array(O-1);D<O;D++)C[D-1]=arguments[D];S[A].fn.apply(S[A].context,C)}}return!0},u.prototype.on=function(h,p,g){return s(this,h,p,g,!1)},u.prototype.once=function(h,p,g){return s(this,h,p,g,!0)},u.prototype.removeListener=function(h,p,g,_){var x=r?r+h:h;if(!this._events[x])return this;if(!p)return c(this,x),this;var w=this._events[x];if(w.fn)w.fn===p&&(!_||w.once)&&(!g||w.context===g)&&c(this,x);else{for(var j=0,S=[],O=w.length;j<O;j++)(w[j].fn!==p||_&&!w[j].once||g&&w[j].context!==g)&&S.push(w[j]);S.length?this._events[x]=S.length===1?S[0]:S:c(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&c(this,p)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Hv)),Hv.exports}var v7=g7();const y7=Qa(v7);var Rc=new y7,lb="recharts.syncEvent.tooltip",jC="recharts.syncEvent.brush";function m_(e,t){if(t){var r=Number.parseInt(t,10);if(!Qn(r))return e?.[r]}}var b7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},OP=Zr({name:"options",initialState:b7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),_7=OP.reducer,{createEventEmitter:x7}=OP.actions;function w7(e){return e.tooltip.syncInteraction}var j7={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},CP=Zr({name:"chartData",initialState:j7,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:SC,setDataStartEndIndexes:S7,setComputedData:zZ}=CP.actions,E7=CP.reducer,O7=["x","y"];function EC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(r),!0).forEach(function(n){C7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C7(e,t,r){return(t=A7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A7(e){var t=N7(e,"string");return typeof t=="symbol"?t:t+""}function N7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k7(e,t){if(e==null)return{};var r,n,i=D7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function D7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function T7(){var e=De(k0),t=De(D0),r=Rt(),n=De(jT),i=De(si),s=Ko(),c=Nm(),u=De(m=>m.rootProps.className);y.useEffect(()=>{if(e==null)return Hc;var m=(h,p,g)=>{if(t!==g&&e===h){if(n==="index"){var _;if(c&&p!==null&&p!==void 0&&(_=p.payload)!==null&&_!==void 0&&_.coordinate&&p.payload.sourceViewBox){var x=p.payload.coordinate,{x:w,y:j}=x,S=k7(x,O7),{x:O,y:C,width:A,height:k}=p.payload.sourceViewBox,D=Rs(Rs({},S),{},{x:c.x+(A?(w-O)/A:0)*c.width,y:c.y+(k?(j-C)/k:0)*c.height});r(Rs(Rs({},p),{},{payload:Rs(Rs({},p.payload),{},{coordinate:D})}))}else r(p);return}if(i!=null){var M;if(typeof n=="function"){var L={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},X=n(i,L);M=i[X]}else n==="value"&&(M=i.find(R=>String(R.value)===p.payload.label));var{coordinate:ne}=p.payload;if(M==null||p.payload.active===!1||ne==null||c==null){r(ib({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:ae,y:G}=ne,B=Math.min(ae,c.x+c.width),ce=Math.min(G,c.y+c.height),ge={x:s==="horizontal"?M.coordinate:B,y:s==="horizontal"?ce:M.coordinate},q=ib({active:p.payload.active,coordinate:ge,dataKey:p.payload.dataKey,index:String(M.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});r(q)}}};return Rc.on(lb,m),()=>{Rc.off(lb,m)}},[u,r,t,e,n,i,s,c])}function P7(){var e=De(k0),t=De(D0),r=Rt();y.useEffect(()=>{if(e==null)return Hc;var n=(i,s,c)=>{t!==c&&e===i&&r(S7(s))};return Rc.on(jC,n),()=>{Rc.off(jC,n)}},[r,t,e])}function M7(){var e=Rt();y.useEffect(()=>{e(x7())},[e]),T7(),P7()}function R7(e,t,r,n,i,s){var c=De(x=>$9(x,e,t)),u=De(D0),m=De(k0),h=De(jT),p=De(w7),g=p?.active,_=Nm();y.useEffect(()=>{if(!g&&m!=null&&u!=null){var x=ib({active:s,coordinate:r,dataKey:c,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:_,graphicalItemId:void 0});Rc.emit(lb,m,x,u)}},[g,r,c,i,n,u,m,h,s,_])}function OC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function CC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(r),!0).forEach(function(n){q7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q7(e,t,r){return(t=z7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z7(e){var t=L7(e,"string");return typeof t=="symbol"?t:t+""}function L7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function I7(e){return e.dataKey}function U7(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(wU,t)}var AC=[],B7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Fv(e){var t,r,n=br(e,B7),{active:i,allowEscapeViewBox:s,animationDuration:c,animationEasing:u,content:m,filterNull:h,isAnimationActive:p,offset:g,payloadUniqBy:_,position:x,reverseDirection:w,useTranslate3d:j,wrapperStyle:S,cursor:O,shared:C,trigger:A,defaultIndex:k,portal:D,axisId:M}=n,L=Rt(),X=typeof k=="number"?String(k):k;y.useEffect(()=>{L(qH({shared:C,trigger:A,axisId:M,active:i,defaultIndex:X}))},[L,C,A,M,i,X]);var ne=Nm(),ae=pD(),G=kH(C),{activeIndex:B,isActive:ce}=(t=De(pe=>K9(pe,G,A,X)))!==null&&t!==void 0?t:{},ge=De(pe=>F9(pe,G,A,X)),q=De(pe=>jP(pe,G,A,X)),R=De(pe=>H9(pe,G,A,X)),I=ge,ee=p7(),U=(r=i??ce)!==null&&r!==void 0?r:!1,[me,je]=d4([I,U]),J=G==="axis"?q:void 0;R7(G,A,R,J,B,U);var H=D??ee;if(H==null||ne==null||G==null)return null;var Se=I??AC;U||(Se=AC),h&&Se.length&&(Se=zI(Se.filter(pe=>pe.value!=null&&(pe.hide!==!0||n.includeHidden)),_,I7));var Te=Se.length>0,Ue=y.createElement(NU,{allowEscapeViewBox:s,animationDuration:c,animationEasing:u,isAnimationActive:p,active:U,coordinate:R,hasPayload:Te,offset:g,position:x,reverseDirection:w,useTranslate3d:j,viewBox:ne,wrapperStyle:S,lastBoundingBox:me,innerRef:je,hasPortalFromProps:!!D},U7(m,CC(CC({},n),{},{payload:Se,label:J,active:U,activeIndex:B,coordinate:R,accessibilityLayer:ae})));return y.createElement(y.Fragment,null,_N.createPortal(Ue,H),U&&y.createElement(h7,{cursor:O,tooltipEventType:G,coordinate:R,payload:Se,index:B}))}var cu=e=>null;cu.displayName="Cell";function $7(e,t,r){return(t=H7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H7(e){var t=F7(e,"string");return typeof t=="symbol"?t:t+""}function F7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class K7{constructor(t){$7(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function NC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Y7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(r),!0).forEach(function(n){G7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function G7(e,t,r){return(t=V7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V7(e){var t=W7(e,"string");return typeof t=="symbol"?t:t+""}function W7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var X7={cacheSize:2e3,enableCache:!0},AP=Y7({},X7),kC=new K7(AP.cacheSize),Z7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},DC="recharts_measurement_span";function Q7(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",c=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(c,"|").concat(u)}var TC=(e,t)=>{try{var r=document.getElementById(DC);r||(r=document.createElement("span"),r.setAttribute("id",DC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,Z7,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},_c=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Mm.isSsr)return{width:0,height:0};if(!AP.enableCache)return TC(t,r);var n=Q7(t,r),i=kC.get(n);if(i)return i;var s=TC(t,r);return kC.set(n,s),s},NP;function J7(e,t,r){return(t=eF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eF(e){var t=tF(e,"string");return typeof t=="symbol"?t:t+""}function tF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,rF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,nF=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,aF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},iF=["cm","mm","pt","pc","in","Q","px"];function oF(e){return iF.includes(e)}var Ls="NaN";function sF(e,t){return e*aF[t]}class Or{static parse(t){var r,[,n,i]=(r=nF.exec(t))!==null&&r!==void 0?r:[];return n==null?Or.NaN:new Or(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Qn(t)&&(this.unit=""),r!==""&&!rF.test(r)&&(this.num=NaN,this.unit=""),oF(r)&&(this.num=sF(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Or(NaN,""):new Or(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Or(NaN,""):new Or(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Or(NaN,""):new Or(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Or(NaN,""):new Or(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qn(this.num)}}NP=Or;J7(Or,"NaN",new NP(NaN,""));function kP(e){if(e==null||e.includes(Ls))return Ls;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,s]=(r=PC.exec(t))!==null&&r!==void 0?r:[],c=Or.parse(n??""),u=Or.parse(s??""),m=i==="*"?c.multiply(u):c.divide(u);if(m.isNaN())return Ls;t=t.replace(PC,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,g,_]=(h=MC.exec(t))!==null&&h!==void 0?h:[],x=Or.parse(p??""),w=Or.parse(_??""),j=g==="+"?x.add(w):x.subtract(w);if(j.isNaN())return Ls;t=t.replace(MC,j.toString())}return t}var RC=/\(([^()]*)\)/;function lF(e){for(var t=e,r;(r=RC.exec(t))!=null;){var[,n]=r;t=t.replace(RC,kP(n))}return t}function cF(e){var t=e.replace(/\s+/g,"");return t=lF(t),t=kP(t),t}function uF(e){try{return cF(e)}catch{return Ls}}function Kv(e){var t=uF(e.slice(5,-1));return t===Ls?"":t}var dF=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],fF=["dx","dy","angle","className","breakAll"];function cb(){return cb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cb.apply(null,arguments)}function qC(e,t){if(e==null)return{};var r,n,i=mF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var DP=/[ \f\n\r\t\v\u2028\u2029]+/,TP=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];Mt(t)||(r?i=t.toString().split(""):i=t.toString().split(DP));var s=i.map(u=>({word:u,width:_c(u,n).width})),c=r?0:_c("",n).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function hF(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var PP=(e,t,r,n)=>e.reduce((i,s)=>{var{word:c,width:u}=s,m=i[i.length-1];if(m&&u!=null&&(t==null||n||m.width+u+r<Number(t)))m.words.push(c),m.width+=u+r;else{var h={words:[c],width:u};i.push(h)}return i},[]),MP=e=>e.reduce((t,r)=>t.width>r.width?t:r),pF="",zC=(e,t,r,n,i,s,c,u)=>{var m=e.slice(0,t),h=TP({breakAll:r,style:n,children:m+pF});if(!h)return[!1,[]];var p=PP(h.wordsWithComputedWidth,s,c,u),g=p.length>i||MP(p).width>Number(s);return[g,p]},gF=(e,t,r,n,i)=>{var{maxLines:s,children:c,style:u,breakAll:m}=e,h=ke(s),p=String(c),g=PP(t,n,r,i);if(!h||i)return g;var _=g.length>s||MP(g).width>Number(n);if(!_)return g;for(var x=0,w=p.length-1,j=0,S;x<=w&&j<=p.length-1;){var O=Math.floor((x+w)/2),C=O-1,[A,k]=zC(p,C,m,u,s,n,r,i),[D]=zC(p,O,m,u,s,n,r,i);if(!A&&!D&&(x=O+1),A&&D&&(w=O-1),!A&&D){S=k;break}j++}return S||g},LC=e=>{var t=Mt(e)?[]:e.toString().split(DP);return[{words:t,width:void 0}]},vF=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:c}=e;if((t||r)&&!Mm.isSsr){var u,m,h=TP({breakAll:s,children:n,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:g}=h;u=p,m=g}else return LC(n);return gF({breakAll:s,children:n,maxLines:c,style:i},u,m,t,!!r)}return LC(n)},RP="#808080",yF={angle:0,breakAll:!1,capHeight:"0.71em",fill:RP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Jm=y.forwardRef((e,t)=>{var r=br(e,yF),{x:n,y:i,lineHeight:s,capHeight:c,fill:u,scaleToFit:m,textAnchor:h,verticalAnchor:p}=r,g=qC(r,dF),_=y.useMemo(()=>vF({breakAll:g.breakAll,children:g.children,maxLines:g.maxLines,scaleToFit:m,style:g.style,width:g.width}),[g.breakAll,g.children,g.maxLines,m,g.style,g.width]),{dx:x,dy:w,angle:j,className:S,breakAll:O}=g,C=qC(g,fF);if(!fa(n)||!fa(i)||_.length===0)return null;var A=Number(n)+(ke(x)?x:0),k=Number(i)+(ke(w)?w:0);if(!zt(A)||!zt(k))return null;var D;switch(p){case"start":D=Kv("calc(".concat(c,")"));break;case"middle":D=Kv("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:D=Kv("calc(".concat(_.length-1," * -").concat(s,")"));break}var M=[];if(m){var L=_[0].width,{width:X}=g;M.push("scale(".concat(ke(X)&&ke(L)?X/L:1,")"))}return j&&M.push("rotate(".concat(j,", ").concat(A,", ").concat(k,")")),M.length&&(C.transform=M.join(" ")),y.createElement("text",cb({},Ur(C),{ref:t,x:A,y:k,className:ot("recharts-text",S),textAnchor:h,fill:u.includes("url")?RP:u}),_.map((ne,ae)=>{var G=ne.words.join(O?"":" ");return y.createElement("tspan",{x:A,dy:ae===0?D:s,key:"".concat(G,"-").concat(ae)},G)}))});Jm.displayName="Text";var bF=["labelRef"],_F=["content"];function IC(e,t){if(e==null)return{};var r,n,i=xF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(r),!0).forEach(function(n){wF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wF(e,t,r){return(t=jF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jF(e){var t=SF(e,"string");return typeof t=="symbol"?t:t+""}function SF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ia.apply(null,arguments)}var qP=y.createContext(null),EF=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c,children:u}=e,m=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c}),[t,r,n,i,s,c]);return y.createElement(qP.Provider,{value:m},u)},zP=()=>{var e=y.useContext(qP),t=Nm();return e||tD(t)},OF=y.createContext(null),CF=()=>{var e=y.useContext(OF),t=De(AT);return e||t},AF=e=>{var{value:t,formatter:r}=e,n=Mt(e.children)?t:e.children;return typeof r=="function"?r(n):n},h_=e=>e!=null&&typeof e=="function",NF=(e,t)=>{var r=vr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},kF=(e,t,r,n,i)=>{var{offset:s,className:c}=e,{cx:u,cy:m,innerRadius:h,outerRadius:p,startAngle:g,endAngle:_,clockWise:x}=i,w=(h+p)/2,j=NF(g,_),S=j>=0?1:-1,O,C;switch(t){case"insideStart":O=g+S*s,C=x;break;case"insideEnd":O=_-S*s,C=!x;break;case"end":O=_+S*s,C=x;break;default:throw new Error("Unsupported position ".concat(t))}C=j<=0?C:!C;var A=tr(u,m,w,O),k=tr(u,m,w,O+(C?1:-1)*359),D="M".concat(A.x,",").concat(A.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),M=Mt(e.id)?wc("recharts-radial-line-"):e.id;return y.createElement("text",Ia({},n,{dominantBaseline:"central",className:ot("recharts-radial-bar-label",c)}),y.createElement("defs",null,y.createElement("path",{id:M,d:D})),y.createElement("textPath",{xlinkHref:"#".concat(M)},r))},DF=(e,t,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:c,startAngle:u,endAngle:m}=e,h=(u+m)/2;if(r==="outside"){var{x:p,y:g}=tr(n,i,c+t,h);return{x:p,y:g,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var _=(s+c)/2,{x,y:w}=tr(n,i,_,h);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},ub=e=>"cx"in e&&ke(e.cx),TF=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,s;r!=null&&!ub(r)&&(s=r);var{x:c,y:u,upperWidth:m,lowerWidth:h,height:p}=t,g=c,_=c+(m-h)/2,x=(g+_)/2,w=(m+h)/2,j=g+m/2,S=p>=0?1:-1,O=S*n,C=S>0?"end":"start",A=S>0?"start":"end",k=m>=0?1:-1,D=k*n,M=k>0?"end":"start",L=k>0?"start":"end";if(i==="top"){var X={x:g+m/2,y:u-O,textAnchor:"middle",verticalAnchor:C};return Vt(Vt({},X),s?{height:Math.max(u-s.y,0),width:m}:{})}if(i==="bottom"){var ne={x:_+h/2,y:u+p+O,textAnchor:"middle",verticalAnchor:A};return Vt(Vt({},ne),s?{height:Math.max(s.y+s.height-(u+p),0),width:h}:{})}if(i==="left"){var ae={x:x-D,y:u+p/2,textAnchor:M,verticalAnchor:"middle"};return Vt(Vt({},ae),s?{width:Math.max(ae.x-s.x,0),height:p}:{})}if(i==="right"){var G={x:x+w+D,y:u+p/2,textAnchor:L,verticalAnchor:"middle"};return Vt(Vt({},G),s?{width:Math.max(s.x+s.width-G.x,0),height:p}:{})}var B=s?{width:w,height:p}:{};return i==="insideLeft"?Vt({x:x+D,y:u+p/2,textAnchor:L,verticalAnchor:"middle"},B):i==="insideRight"?Vt({x:x+w-D,y:u+p/2,textAnchor:M,verticalAnchor:"middle"},B):i==="insideTop"?Vt({x:g+m/2,y:u+O,textAnchor:"middle",verticalAnchor:A},B):i==="insideBottom"?Vt({x:_+h/2,y:u+p-O,textAnchor:"middle",verticalAnchor:C},B):i==="insideTopLeft"?Vt({x:g+D,y:u+O,textAnchor:L,verticalAnchor:A},B):i==="insideTopRight"?Vt({x:g+m-D,y:u+O,textAnchor:M,verticalAnchor:A},B):i==="insideBottomLeft"?Vt({x:_+D,y:u+p-O,textAnchor:L,verticalAnchor:C},B):i==="insideBottomRight"?Vt({x:_+h-D,y:u+p-O,textAnchor:M,verticalAnchor:C},B):i&&typeof i=="object"&&(ke(i.x)||Ka(i.x))&&(ke(i.y)||Ka(i.y))?Vt({x:c+Dr(i.x,w),y:u+Dr(i.y,p),textAnchor:"end",verticalAnchor:"end"},B):Vt({x:j,y:u+p/2,textAnchor:"middle",verticalAnchor:"middle"},B)},PF={angle:0,offset:5,zIndex:rr.label,position:"middle",textBreakAll:!1};function zi(e){var t=br(e,PF),{viewBox:r,position:n,value:i,children:s,content:c,className:u="",textBreakAll:m,labelRef:h}=t,p=CF(),g=zP(),_=n==="center"?g:p??g,x,w,j;if(r==null?x=_:ub(r)?x=r:x=tD(r),!x||Mt(i)&&Mt(s)&&!y.isValidElement(c)&&typeof c!="function")return null;var S=Vt(Vt({},t),{},{viewBox:x});if(y.isValidElement(c)){var{labelRef:O}=S,C=IC(S,bF);return y.cloneElement(c,C)}if(typeof c=="function"){var{content:A}=S,k=IC(S,_F);if(w=y.createElement(c,k),y.isValidElement(w))return w}else w=AF(t);var D=Ur(t);if(ub(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return kF(t,n,w,D,x);j=DF(x,t.offset,t.position)}else j=TF(t,x);return y.createElement(Qr,{zIndex:t.zIndex},y.createElement(Jm,Ia({ref:h,className:ot("recharts-label",u)},D,j,{textAnchor:hF(D.textAnchor)?D.textAnchor:j.textAnchor,breakAll:m}),w))}zi.displayName="Label";var MF=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(zi,Ia({key:"label-implicit"},n)):fa(e)?y.createElement(zi,Ia({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===zi?y.cloneElement(e,Vt({key:"label-implicit"},n)):y.createElement(zi,Ia({key:"label-implicit",content:e},n)):h_(e)?y.createElement(zi,Ia({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(zi,Ia({},e,{key:"label-implicit"},n)):null};function RF(e){var{label:t,labelRef:r}=e,n=zP();return MF(t,n,r)||null}var Yv={},Gv={},BC;function qF(){return BC||(BC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Gv)),Gv}var Vv={},$C;function zF(){return $C||($C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Vv)),Vv}var HC;function LF(){return HC||(HC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qF(),r=zF(),n=Fb();function i(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=i})(Yv)),Yv}var Wv,FC;function IF(){return FC||(FC=1,Wv=LF().last),Wv}var UF=IF();const BF=Qa(UF);var $F=["valueAccessor"],HF=["dataKey","clockWise","id","textBreakAll","zIndex"];function Zf(){return Zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zf.apply(null,arguments)}function KC(e,t){if(e==null)return{};var r,n,i=FF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function FF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KF=e=>Array.isArray(e.value)?BF(e.value):e.value,LP=y.createContext(void 0),IP=LP.Provider,UP=y.createContext(void 0),YF=UP.Provider;function GF(){return y.useContext(LP)}function VF(){return y.useContext(UP)}function cf(e){var{valueAccessor:t=KF}=e,r=KC(e,$F),{dataKey:n,clockWise:i,id:s,textBreakAll:c,zIndex:u}=r,m=KC(r,HF),h=GF(),p=VF(),g=h||p;return!g||!g.length?null:y.createElement(Qr,{zIndex:u??rr.label},y.createElement(yr,{className:"recharts-label-list"},g.map((_,x)=>{var w,j=Mt(n)?t(_,x):pt(_&&_.payload,n),S=Mt(s)?{}:{id:"".concat(s,"-").concat(x)};return y.createElement(zi,Zf({key:"label-".concat(x)},Ur(_),m,S,{fill:(w=r.fill)!==null&&w!==void 0?w:_.fill,parentViewBox:_.parentViewBox,value:j,textBreakAll:c,viewBox:_.viewBox,index:x,zIndex:0}))})))}cf.displayName="LabelList";function p_(e){var{label:t}=e;return t?t===!0?y.createElement(cf,{key:"labelList-implicit"}):y.isValidElement(t)||h_(t)?y.createElement(cf,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(cf,Zf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function db(){return db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},db.apply(null,arguments)}var BP=e=>{var{cx:t,cy:r,r:n,className:i}=e,s=ot("recharts-dot",i);return ke(t)&&ke(r)&&ke(n)?y.createElement("circle",db({},gn(e),Hb(e),{className:s,cx:t,cy:r,r:n})):null},$P=e=>e.graphicalItems.polarItems,WF=W([qt,tu],z0),eh=W([$P,Lt,WF],L0),XF=W([eh],I0),th=W([XF,Bm],U0),ZF=W([th,Lt,eh],$0);W([th,Lt,eh],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var s,c=pt(n,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:pt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var YC=()=>{},QF=W([th,Lt,eh,Wm,qt],Y0),JF=W([Lt,F0,K0,YC,QF,YC,Je,qt],G0),HP=W([Lt,Je,th,ZF,eu,qt,JF],V0),eK=W([HP,Lt,nl],Z0);W([Lt,HP,eK,qt],J0);var tK={radiusAxis:{},angleAxis:{}},FP=Zr({name:"polarAxis",initialState:tK,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:LZ,removeRadiusAxis:IZ,addAngleAxis:UZ,removeAngleAxis:BZ}=FP.actions,rK=FP.reducer;function GC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(r),!0).forEach(function(n){nK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nK(e,t,r){return(t=aK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aK(e){var t=iK(e,"string");return typeof t=="symbol"?t:t+""}function iK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oK=(e,t)=>t,g_=W([$P,oK],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),sK=[],v_=(e,t,r)=>r?.length===0?sK:r,KP=W([Bm,g_,v_],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(s=>VC(VC({},t.presentationProps),s.props))),i!=null)return i}}),lK=W([KP,g_,v_],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var s,c=pt(n,t.nameKey,t.name),u;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?u=n.fill:u=t.fill,{value:Zs(c,t.dataKey),color:u,payload:n,type:t.legendType}})}),cK=W([KP,g_,v_,cr],(e,t,r,n)=>{if(!(t==null||e==null))return dY({offset:n,pieSettings:t,displayedData:e,cells:r})}),Xv={exports:{}},ht={};var WC;function uK(){if(WC)return ht;WC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),_=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case r:case i:case n:case m:case h:case _:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case g:case p:return j;case s:return j;default:return S}}case t:return S}}}return ht.ContextConsumer=s,ht.ContextProvider=c,ht.Element=e,ht.ForwardRef=u,ht.Fragment=r,ht.Lazy=g,ht.Memo=p,ht.Portal=t,ht.Profiler=i,ht.StrictMode=n,ht.Suspense=m,ht.SuspenseList=h,ht.isContextConsumer=function(j){return w(j)===s},ht.isContextProvider=function(j){return w(j)===c},ht.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},ht.isForwardRef=function(j){return w(j)===u},ht.isFragment=function(j){return w(j)===r},ht.isLazy=function(j){return w(j)===g},ht.isMemo=function(j){return w(j)===p},ht.isPortal=function(j){return w(j)===t},ht.isProfiler=function(j){return w(j)===i},ht.isStrictMode=function(j){return w(j)===n},ht.isSuspense=function(j){return w(j)===m},ht.isSuspenseList=function(j){return w(j)===h},ht.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===i||j===n||j===m||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===g||j.$$typeof===p||j.$$typeof===c||j.$$typeof===s||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},ht.typeOf=w,ht}var XC;function dK(){return XC||(XC=1,Xv.exports=uK()),Xv.exports}var fK=dK(),ZC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",QC=null,Zv=null,YP=e=>{if(e===QC&&Array.isArray(Zv))return Zv;var t=[];return y.Children.forEach(e,r=>{Mt(r)||(fK.isFragment(r)?t=t.concat(YP(r.props.children)):t.push(r))}),Zv=t,QC=e,t};function y_(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>ZC(i)):n=[ZC(t)],YP(e).forEach(i=>{var s=qo(i,"type.displayName")||qo(i,"type.name");s&&n.indexOf(s)!==-1&&r.push(i)}),r}var GP=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Qv={},JC;function mK(){return JC||(JC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Qv)),Qv}var Jv,eA;function hK(){return eA||(eA=1,Jv=mK().isPlainObject),Jv}var pK=hK();const gK=Qa(pK);var tA,rA,nA,aA,iA;function oA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oA(Object(r),!0).forEach(function(n){vK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vK(e,t,r){return(t=yK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yK(e){var t=bK(e,"string");return typeof t=="symbol"?t:t+""}function bK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qf(){return Qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qf.apply(null,arguments)}function mc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var lA=(e,t,r,n,i)=>{var s=r-n,c;return c=Ft(tA||(tA=mc(["M ",",",""])),e,t),c+=Ft(rA||(rA=mc(["L ",",",""])),e+r,t),c+=Ft(nA||(nA=mc(["L ",",",""])),e+r-s/2,t+i),c+=Ft(aA||(aA=mc(["L ",",",""])),e+r-s/2-n,t+i),c+=Ft(iA||(iA=mc(["L ",","," Z"])),e,t),c},_K={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xK=e=>{var t=br(e,_K),{x:r,y:n,upperWidth:i,lowerWidth:s,height:c,className:u}=t,{animationEasing:m,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t,_=y.useRef(null),[x,w]=y.useState(-1),j=y.useRef(i),S=y.useRef(s),O=y.useRef(c),C=y.useRef(r),A=y.useRef(n),k=Wc(e,"trapezoid-");if(y.useEffect(()=>{if(_.current&&_.current.getTotalLength)try{var ge=_.current.getTotalLength();ge&&w(ge)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||c!==+c||i===0&&s===0||c===0)return null;var D=ot("recharts-trapezoid",u);if(!g)return y.createElement("g",null,y.createElement("path",Qf({},Ur(t),{className:D,d:lA(r,n,i,s,c)})));var M=j.current,L=S.current,X=O.current,ne=C.current,ae=A.current,G="0px ".concat(x===-1?1:x,"px"),B="".concat(x,"px 0px"),ce=gD(["strokeDasharray"],h,m);return y.createElement(Vc,{animationId:k,key:k,canBegin:x>0,duration:h,easing:m,isActive:g,begin:p},ge=>{var q=Dt(M,i,ge),R=Dt(L,s,ge),I=Dt(X,c,ge),ee=Dt(ne,r,ge),U=Dt(ae,n,ge);_.current&&(j.current=q,S.current=R,O.current=I,C.current=ee,A.current=U);var me=ge>0?{transition:ce,strokeDasharray:B}:{strokeDasharray:G};return y.createElement("path",Qf({},Ur(t),{className:D,d:lA(ee,U,q,R,I),ref:_,style:sA(sA({},me),t.style)}))})},wK=["option","shapeType","activeClassName"];function jK(e,t){if(e==null)return{};var r,n,i=SK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function SK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(r),!0).forEach(function(n){EK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EK(e,t,r){return(t=OK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OK(e){var t=CK(e,"string");return typeof t=="symbol"?t:t+""}function CK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AK(e,t){return Jf(Jf({},t),e)}function NK(e,t){return e==="symbols"}function uA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(_D,r);case"trapezoid":return y.createElement(xK,r);case"sector":return y.createElement(SD,r);case"symbols":if(NK(t))return y.createElement(rk,r);break;case"curve":return y.createElement(r0,r);default:return null}}function kK(e){return y.isValidElement(e)?e.props:e}function b_(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=jK(e,wK),s;if(y.isValidElement(t))s=y.cloneElement(t,Jf(Jf({},i),kK(t)));else if(typeof t=="function")s=t(i,i.index);else if(gK(t)&&typeof t!="boolean"){var c=AK(t,i);s=y.createElement(uA,{shapeType:r,elementProps:c})}else{var u=i;s=y.createElement(uA,{shapeType:r,elementProps:u})}return i.isActive?y.createElement(yr,{className:n},s):s}var __=(e,t,r)=>{var n=Rt();return(i,s)=>c=>{e?.(i,s,c),n(iP({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},x_=e=>{var t=Rt();return(r,n)=>i=>{e?.(r,n,i),t(zH())}},w_=(e,t,r)=>{var n=Rt();return(i,s)=>c=>{e?.(i,s,c),n(LH({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function j_(e){var{tooltipEntrySettings:t}=e,r=Rt(),n=Tr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(PH(t)):i.current!==t&&r(MH({prev:i.current,next:t})),i.current=t)},[t,r,n]),y.useLayoutEffect(()=>()=>{i.current&&(r(RH(i.current)),i.current=null)},[r]),null}function VP(e){var{legendPayload:t}=e,r=Rt(),n=Tr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(fD(t)):i.current!==t&&r(mD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(hD(i.current)),i.current=null)},[r]),null}function DK(e){var{legendPayload:t}=e,r=Rt(),n=De(Je),i=y.useRef(null);return y.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(fD(t)):i.current!==t&&r(mD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(hD(i.current)),i.current=null)},[r]),null}var ey,TK=()=>{var[e]=y.useState(()=>wc("uid-"));return e},PK=(ey=mq.useId)!==null&&ey!==void 0?ey:TK;function MK(e,t){var r=PK();return t||(e?"".concat(e,"-").concat(r):r)}var RK=y.createContext(void 0),S_=e=>{var{id:t,type:r,children:n}=e,i=MK("recharts-".concat(r),t);return y.createElement(RK.Provider,{value:i},n(i))},qK={cartesianItems:[],polarItems:[]},WP=Zr({name:"graphicalItems",initialState:qK,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:kt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Xn(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:kt()},removeCartesianGraphicalItem:{reducer(e,t){var r=Xn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:kt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:kt()},removePolarGraphicalItem:{reducer(e,t){var r=Xn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:kt()}}}),{addCartesianGraphicalItem:zK,replaceCartesianGraphicalItem:LK,removeCartesianGraphicalItem:IK,addPolarGraphicalItem:UK,removePolarGraphicalItem:BK}=WP.actions,$K=WP.reducer,HK=e=>{var t=Rt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(zK(e)):r.current!==e&&t(LK({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(IK(r.current)),r.current=null)},[t]),null},XP=y.memo(HK);function FK(e){var t=Rt();return y.useLayoutEffect(()=>(t(UK(e)),()=>{t(BK(e))}),[t,e]),null}var KK=["key"],YK=["onMouseEnter","onClick","onMouseLeave"],GK=["id"],VK=["id"];function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(r),!0).forEach(function(n){WK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WK(e,t,r){return(t=XK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XK(e){var t=ZK(e,"string");return typeof t=="symbol"?t:t+""}function ZK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gi.apply(null,arguments)}function rh(e,t){if(e==null)return{};var r,n,i=QK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JK(e){var t=y.useMemo(()=>y_(e.children,cu),[e.children]),r=De(n=>lK(n,e.id,t));return r==null?null:y.createElement(DK,{legendPayload:r})}var eY=y.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:c,name:u,hide:m,tooltipType:h,id:p}=e,g={dataDefinedOnItem:n.map(_=>_.tooltipPayload),positions:n.map(_=>_.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:c,dataKey:t,nameKey:r,name:Zs(u,t),hide:m,type:h,color:c,unit:"",graphicalItemId:p}};return y.createElement(j_,{tooltipEntrySettings:g})}),tY=(e,t)=>e>t?"start":e<t?"end":"middle",rY=(e,t,r)=>Dr(typeof t=="function"?t(e):t,r,r*.8),nY=(e,t,r)=>{var{top:n,left:i,width:s,height:c}=t,u=xD(s,c),m=i+Dr(e.cx,s,s/2),h=n+Dr(e.cy,c,c/2),p=Dr(e.innerRadius,u,0),g=rY(r,e.outerRadius,u),_=e.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:m,cy:h,innerRadius:p,outerRadius:g,maxRadius:_}},aY=(e,t)=>{var r=vr(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function iY(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var oY=(e,t)=>{if(y.isValidElement(e))return y.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ot("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=rh(t,KK);return y.createElement(r0,Gi({},i,{type:"linear",className:r}))},sY=(e,t,r)=>{if(y.isValidElement(e))return y.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),y.isValidElement(n)))return n;var i=ot("recharts-pie-label-text",iY(e));return y.createElement(Jm,Gi({},t,{alignmentBaseline:"middle",className:i}),n)};function lY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:s,dataKey:c}=r;if(!n||!i||!t)return null;var u=gn(r),m=Mo(i),h=Mo(s),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((_,x)=>{var w=(_.startAngle+_.endAngle)/2,j=tr(_.cx,_.cy,_.outerRadius+p,w),S=Kt(Kt(Kt(Kt({},u),_),{},{stroke:"none"},m),{},{index:x,textAnchor:tY(j.x,_.cx)},j),O=Kt(Kt(Kt(Kt({},u),_),{},{fill:"none",stroke:_.fill},h),{},{index:x,points:[tr(_.cx,_.cy,_.outerRadius,w),j],key:"line"});return y.createElement(Qr,{zIndex:rr.label,key:"label-".concat(_.startAngle,"-").concat(_.endAngle,"-").concat(_.midAngle,"-").concat(x)},y.createElement(yr,null,s&&oY(s,O),sY(i,S,pt(_,c))))});return y.createElement(yr,{className:"recharts-pie-labels"},g)}function cY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?y.createElement(p_,{label:i}):y.createElement(lY,{sectors:t,props:r,showLabels:n})}function uY(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:s,id:c}=e,u=De(Yi),m=De(l_),h=De(j9),{onMouseEnter:p,onClick:g,onMouseLeave:_}=i,x=rh(i,YK),w=__(p,i.dataKey,c),j=x_(_),S=w_(g,i.dataKey,c);return t==null||t.length===0?null:y.createElement(y.Fragment,null,t.map((O,C)=>{if(O?.startAngle===0&&O?.endAngle===0&&t.length!==1)return null;var A=h==null||h===c,k=String(C)===u&&(m==null||i.dataKey===m)&&A,D=u?n:null,M=r&&k?r:D,L=Kt(Kt({},O),{},{stroke:O.stroke,tabIndex:-1,[Xk]:C,[Zk]:c});return y.createElement(yr,Gi({key:"sector-".concat(O?.startAngle,"-").concat(O?.endAngle,"-").concat(O.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},hm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),y.createElement(b_,Gi({option:s??M,index:C,shapeType:"sector",isActive:k},L)))}))}function dY(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:s}=e,{cornerRadius:c,startAngle:u,endAngle:m,dataKey:h,nameKey:p,tooltipType:g}=r,_=Math.abs(r.minAngle),x=aY(u,m),w=Math.abs(x),j=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,S=n.filter(M=>pt(M,h,0)!==0).length,O=(w>=360?S:S-1)*j,C=w-S*_-O,A=n.reduce((M,L)=>{var X=pt(L,h,0);return M+(ke(X)?X:0)},0),k;if(A>0){var D;k=n.map((M,L)=>{var X=pt(M,h,0),ne=pt(M,p,L),ae=nY(r,s,M),G=(ke(X)?X:0)/A,B,ce=Kt(Kt({},M),i&&i[L]&&i[L].props);L?B=D.endAngle+vr(x)*j*(X!==0?1:0):B=u;var ge=B+vr(x)*((X!==0?_:0)+G*C),q=(B+ge)/2,R=(ae.innerRadius+ae.outerRadius)/2,I=[{name:ne,value:X,payload:ce,dataKey:h,type:g,graphicalItemId:r.id}],ee=tr(ae.cx,ae.cy,R,q);return D=Kt(Kt(Kt(Kt({},r.presentationProps),{},{percent:G,cornerRadius:typeof c=="string"?parseFloat(c):c,name:ne,tooltipPayload:I,midAngle:q,middleRadius:R,tooltipPosition:ee},ce),ae),{},{value:X,dataKey:h,startAngle:B,endAngle:ge,payload:ce,paddingAngle:vr(x)*j}),D})}return k}function fY(e){var{showLabels:t,sectors:r,children:n}=e,i=y.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return y.createElement(YF,{value:t?i:void 0},n)}function mY(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,activeShape:h,inactiveShape:p,onAnimationStart:g,onAnimationEnd:_}=t,x=Wc(t,"recharts-pie-"),w=r.current,[j,S]=y.useState(!1),O=y.useCallback(()=>{typeof _=="function"&&_(),S(!1)},[_]),C=y.useCallback(()=>{typeof g=="function"&&g(),S(!0)},[g]);return y.createElement(fY,{showLabels:!j,sectors:i},y.createElement(Vc,{animationId:x,begin:c,duration:u,isActive:s,easing:m,onAnimationStart:C,onAnimationEnd:O,key:x},A=>{var k=[],D=i&&i[0],M=D?.startAngle;return i?.forEach((L,X)=>{var ne=w&&w[X],ae=X>0?qo(L,"paddingAngle",0):0;if(ne){var G=Dt(ne.endAngle-ne.startAngle,L.endAngle-L.startAngle,A),B=Kt(Kt({},L),{},{startAngle:M+ae,endAngle:M+G+ae});k.push(B),M=B.endAngle}else{var{endAngle:ce,startAngle:ge}=L,q=Dt(0,ce-ge,A),R=Kt(Kt({},L),{},{startAngle:M+ae,endAngle:M+q+ae});k.push(R),M=R.endAngle}}),r.current=k,y.createElement(yr,null,y.createElement(uY,{sectors:k,activeShape:h,inactiveShape:p,allOtherPieProps:t,shape:t.shape,id:n}))}),y.createElement(cY,{showLabels:!j,sectors:i,props:t}),t.children)}var hY={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:rr.area};function pY(e){var{id:t}=e,r=rh(e,GK),{hide:n,className:i,rootTabIndex:s}=e,c=y.useMemo(()=>y_(e.children,cu),[e.children]),u=De(p=>cK(p,t,c)),m=y.useRef(null),h=ot("recharts-pie",i);return n||u==null?(m.current=null,y.createElement(yr,{tabIndex:s,className:h})):y.createElement(Qr,{zIndex:e.zIndex},y.createElement(eY,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:u,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),y.createElement(yr,{tabIndex:s,className:h},y.createElement(mY,{props:Kt(Kt({},r),{},{sectors:u}),previousSectorsRef:m,id:t})))}function ZP(e){var t=br(e,hY),{id:r}=t,n=rh(t,VK),i=gn(n);return y.createElement(S_,{id:r,type:"pie"},s=>y.createElement(y.Fragment,null,y.createElement(FK,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),y.createElement(JK,Gi({},n,{id:s})),y.createElement(pY,Gi({},n,{id:s}))))}ZP.displayName="Pie";var gY=["points"];function fA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ty(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(r),!0).forEach(function(n){vY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vY(e,t,r){return(t=yY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yY(e){var t=bY(e,"string");return typeof t=="symbol"?t:t+""}function bY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},em.apply(null,arguments)}function _Y(e,t){if(e==null)return{};var r,n,i=xY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wY(e){var{option:t,dotProps:r,className:n}=e;if(y.isValidElement(t))return y.cloneElement(t,r);if(typeof t=="function")return t(r);var i=ot(n,typeof t!="boolean"?t.className:""),s=r??{},{points:c}=s,u=_Y(s,gY);return y.createElement(BP,em({},u,{className:i}))}function jY(e,t){return e==null?!1:t?!0:e.length===1}function SY(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:s,baseProps:c,needClip:u,clipPathId:m,zIndex:h=rr.scatter}=e;if(!jY(t,r))return null;var p=GP(r),g=u3(r),_=t.map((w,j)=>{var S,O,C=ty(ty(ty({r:3},c),g),{},{index:j,cx:(S=w.x)!==null&&S!==void 0?S:void 0,cy:(O=w.y)!==null&&O!==void 0?O:void 0,dataKey:s,value:w.value,payload:w.payload,points:t});return y.createElement(wY,{key:"dot-".concat(j),option:r,dotProps:C,className:i})}),x={};return u&&m!=null&&(x.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(m,")")),y.createElement(Qr,{zIndex:h},y.createElement(yr,em({className:n},x),_))}function mA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(r),!0).forEach(function(n){EY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EY(e,t,r){return(t=OY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OY(e){var t=CY(e,"string");return typeof t=="symbol"?t:t+""}function CY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QP=0,AY={xAxis:{},yAxis:{},zAxis:{}},JP=Zr({name:"cartesianAxis",initialState:AY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:kt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:kt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:kt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:kt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:kt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:kt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:kt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:kt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:kt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var c=[...s,n].slice(-3);e.yAxis[r]=hA(hA({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:NY,replaceXAxis:kY,removeXAxis:DY,addYAxis:TY,replaceYAxis:PY,removeYAxis:MY,addZAxis:$Z,replaceZAxis:HZ,removeZAxis:FZ,updateYAxisWidth:RY}=JP.actions,qY=JP.reducer,zY=W([cr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),LY=W([zY,ti,ri],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),E_=()=>De(LY),IY=()=>De(A9);function pA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ry(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pA(Object(r),!0).forEach(function(n){UY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UY(e,t,r){return(t=BY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BY(e){var t=$Y(e,"string");return typeof t=="symbol"?t:t+""}function $Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var HY=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:s,clipPath:c}=e;if(i===!1||t.x==null||t.y==null)return null;var u={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=ry(ry(ry({},u),Mo(i)),Hb(i)),h;return y.isValidElement(i)?h=y.cloneElement(i,m):typeof i=="function"?h=i(m):h=y.createElement(BP,m),y.createElement(yr,{className:"recharts-active-dot",clipPath:c},h)};function FY(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:s,zIndex:c=rr.activeDot}=e,u=De(Yi),m=IY();if(t==null||m==null)return null;var h=t.find(p=>m.includes(p.payload));return Mt(h)?null:y.createElement(Qr,{zIndex:c},y.createElement(HY,{point:h,childIndex:Number(u),mainColor:r,dataKey:i,activeDot:n,clipPath:s}))}var gA=(e,t,r)=>{var n=r??e;if(!Mt(n))return Dr(n,t,0)},KY=(e,t,r)=>{var n={},i=e.filter(Fm),s=e.filter(h=>h.stackId==null),c=i.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),n),u=Object.entries(c).map(h=>{var[p,g]=h,_=g.map(w=>w.dataKey),x=gA(t,r,g[0].barSize);return{stackId:p,dataKeys:_,barSize:x}}),m=s.map(h=>{var p=[h.dataKey].filter(_=>_!=null),g=gA(t,r,h.barSize);return{stackId:void 0,dataKeys:p,barSize:g}});return[...u,...m]};function vA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vA(Object(r),!0).forEach(function(n){YY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YY(e,t,r){return(t=GY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GY(e){var t=VY(e,"string");return typeof t=="symbol"?t:t+""}function VY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WY(e,t,r,n,i){var s=n.length;if(!(s<1)){var c=Dr(e,r,0,!0),u,m=[];if(zt(n[0].barSize)){var h=!1,p=r/s,g=n.reduce((O,C)=>O+(C.barSize||0),0);g+=(s-1)*c,g>=r&&(g-=(s-1)*c,c=0),g>=r&&p>0&&(h=!0,p*=.9,g=s*p);var _=(r-g)/2>>0,x={offset:_-c,size:0};u=n.reduce((O,C)=>{var A,k={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:x.offset+x.size+c,size:h?p:(A=C.barSize)!==null&&A!==void 0?A:0}},D=[...O,k];return x=D[D.length-1].position,D},m)}else{var w=Dr(t,r,0,!0);r-2*w-(s-1)*c<=0&&(c=0);var j=(r-2*w-(s-1)*c)/s;j>1&&(j>>=0);var S=zt(i)?Math.min(j,i):j;u=n.reduce((O,C,A)=>[...O,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:w+(j+c)*A+(j-S)/2,size:S}}],m)}return u}}var XY=(e,t,r,n,i,s,c)=>{var u=Mt(c)?t:c,m=WY(r,n,i!==s?i:s,e,u);return i!==s&&m!=null&&(m=m.map(h=>Vd(Vd({},h),{},{position:Vd(Vd({},h.position),{},{offset:h.position.offset-i/2})}))),m},ZY=(e,t)=>{var r=R0(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===r)}}}};function QY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&zt(e.zIndex)?e.zIndex:t}var eM=e=>{var{chartData:t}=e,r=Rt(),n=Tr();return y.useEffect(()=>n?()=>{}:(r(SC(t)),()=>{r(SC(void 0))}),[t,r,n]),null},yA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},tM=Zr({name:"brush",initialState:yA,reducers:{setBrushSettings(e,t){return t.payload==null?yA:t.payload}}}),{setBrushSettings:KZ}=tM.actions,JY=tM.reducer;function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(n){rM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rM(e,t,r){return(t=eG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eG(e){var t=tG(e,"string");return typeof t=="symbol"?t:t+""}function tG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rG=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return{x:Math.min(r,i),y:Math.min(n,s),width:Math.abs(i-r),height:Math.abs(s-n)}},YZ=e=>{var{x1:t,y1:r,x2:n,y2:i}=e;return rG({x:t,y:r},{x:n,y:i})};class nh{static create(t){return new nh(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}rM(nh,"EPS",1e-4);var GZ=e=>{var t=Object.keys(e).reduce((r,n)=>Wd(Wd({},r),{},{[n]:nh.create(e[n])}),{});return Wd(Wd({},t),{},{apply(r){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(r).map(s=>{var[c,u]=s;return[c,t[c].apply(u,{bandAware:n,position:i})]}))},isInRange(r){return Object.keys(r).every(n=>t[n].isInRange(r[n]))}})};function nG(e){return(e%180+180)%180}var aG=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=nG(i),c=s*Math.PI/180,u=Math.atan(n/r),m=c>u&&c<Math.PI-u?n/Math.sin(c):r/Math.cos(c);return Math.abs(m)},iG={dots:[],areas:[],lines:[]},nM=Zr({name:"referenceElements",initialState:iG,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Xn(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Xn(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Xn(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:VZ,removeDot:WZ,addArea:XZ,removeArea:ZZ,addLine:QZ,removeLine:JZ}=nM.actions,oG=nM.reducer,aM=y.createContext(void 0),sG=e=>{var{children:t}=e,[r]=y.useState("".concat(wc("recharts"),"-clip")),n=E_();if(n==null)return null;var{x:i,y:s,width:c,height:u}=n;return y.createElement(aM.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:i,y:s,height:u,width:c}))),t)},eQ=()=>y.useContext(aM);function iM(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function lG(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return aG(n,r)}function cG(e,t,r){var n=r==="width",{x:i,y:s,width:c,height:u}=e;return t===1?{start:n?i:s,end:n?i+c:s+u}:{start:n?i+c:s+u,end:n?i:s}}function qc(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function uG(e,t){return iM(e,t+1)}function dG(e,t,r,n,i){for(var s=(n||[]).slice(),{start:c,end:u}=t,m=0,h=1,p=c,g=function(){var w=n?.[m];if(w===void 0)return{v:iM(n,h)};var j=m,S,O=()=>(S===void 0&&(S=r(w,j)),S),C=w.coordinate,A=m===0||qc(e,C,O,p,u);A||(m=0,p=c,h+=1),A&&(p=C+e*(O()/2+i),m+=h)},_;h<=s.length;)if(_=g(),_)return _.v;return[]}function fG(e,t,r,n,i){var s=(n||[]).slice(),c=s.length;if(c===0)return[];for(var{start:u,end:m}=t,h=1;h<=c;h++){for(var p=(c-1)%h,g=u,_=!0,x=function(){var C=n[w],A=w,k,D=()=>(k===void 0&&(k=r(C,A)),k),M=C.coordinate,L=w===p||qc(e,M,D,g,m);if(!L)return _=!1,1;L&&(g=M+e*(D()/2+i))},w=p;w<c&&!x();w+=h);if(_){for(var j=[],S=p;S<c;S+=h)j.push(n[S]);return j}}return[]}function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(n){mG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mG(e,t,r){return(t=hG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hG(e){var t=pG(e,"string");return typeof t=="symbol"?t:t+""}function pG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gG(e,t,r,n,i){for(var s=(n||[]).slice(),c=s.length,{start:u}=t,{end:m}=t,h=function(_){var x=s[_],w,j=()=>(w===void 0&&(w=r(x,_)),w);if(_===c-1){var S=e*(x.coordinate+e*j()/2-m);s[_]=x=Nr(Nr({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else s[_]=x=Nr(Nr({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var O=qc(e,x.tickCoord,j,u,m);O&&(m=x.tickCoord-e*(j()/2+i),s[_]=Nr(Nr({},x),{},{isShow:!0}))}},p=c-1;p>=0;p--)h(p);return s}function vG(e,t,r,n,i,s){var c=(n||[]).slice(),u=c.length,{start:m,end:h}=t;if(s){var p=n[u-1],g=r(p,u-1),_=e*(p.coordinate+e*g/2-h);if(c[u-1]=p=Nr(Nr({},p),{},{tickCoord:_>0?p.coordinate-_*e:p.coordinate}),p.tickCoord!=null){var x=qc(e,p.tickCoord,()=>g,m,h);x&&(h=p.tickCoord-e*(g/2+i),c[u-1]=Nr(Nr({},p),{},{isShow:!0}))}}for(var w=s?u-1:u,j=function(C){var A=c[C],k,D=()=>(k===void 0&&(k=r(A,C)),k);if(C===0){var M=e*(A.coordinate-e*D()/2-m);c[C]=A=Nr(Nr({},A),{},{tickCoord:M<0?A.coordinate-M*e:A.coordinate})}else c[C]=A=Nr(Nr({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var L=qc(e,A.tickCoord,D,m,h);L&&(m=A.tickCoord+e*(D()/2+i),c[C]=Nr(Nr({},A),{},{isShow:!0}))}},S=0;S<w;S++)j(S);return c}function O_(e,t,r){var{tick:n,ticks:i,viewBox:s,minTickGap:c,orientation:u,interval:m,tickFormatter:h,unit:p,angle:g}=e;if(!i||!i.length||!n)return[];if(ke(m)||Mm.isSsr){var _;return(_=uG(i,ke(m)?m:0))!==null&&_!==void 0?_:[]}var x=[],w=u==="top"||u==="bottom"?"width":"height",j=p&&w==="width"?_c(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(A,k)=>{var D=typeof h=="function"?h(A.value,k):A.value;return w==="width"?lG(_c(D,{fontSize:t,letterSpacing:r}),j,g):_c(D,{fontSize:t,letterSpacing:r})[w]},O=i.length>=2?vr(i[1].coordinate-i[0].coordinate):1,C=cG(s,O,w);return m==="equidistantPreserveStart"?dG(O,C,S,i,c):m==="equidistantPreserveEnd"?fG(O,C,S,i,c):(m==="preserveStart"||m==="preserveStartEnd"?x=vG(O,C,S,i,c,m==="preserveStartEnd"):x=gG(O,C,S,i,c),x.filter(A=>A.isShow))}var yG=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=e,c=0;if(t){Array.from(t).forEach(p=>{if(p){var g=p.getBoundingClientRect();g.width>c&&(c=g.width)}});var u=r?r.getBoundingClientRect().width:0,m=i+s,h=c+m+u+(r?n:0);return Math.round(h)}return 0},bG=["axisLine","width","height","className","hide","ticks","axisType"];function _G(e,t){if(e==null)return{};var r,n,i=xG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function xG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bo(){return Bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bo.apply(null,arguments)}function xA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(r),!0).forEach(function(n){wG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wG(e,t,r){return(t=jG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jG(e){var t=SG(e,"string");return typeof t=="symbol"?t:t+""}function SG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ha={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:rr.axis};function EG(e){var{x:t,y:r,width:n,height:i,orientation:s,mirror:c,axisLine:u,otherSvgProps:m}=e;if(!u)return null;var h=er(er(er({},m),gn(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!c||s==="bottom"&&c);h=er(er({},h),{},{x1:t,y1:r+p*i,x2:t+n,y2:r+p*i})}else{var g=+(s==="left"&&!c||s==="right"&&c);h=er(er({},h),{},{x1:t+g*n,y1:r,x2:t+g*n,y2:r+i})}return y.createElement("line",Bo({},h,{className:ot("recharts-cartesian-axis-line",qo(u,"className"))}))}function OG(e,t,r,n,i,s,c,u,m){var h,p,g,_,x,w,j=u?-1:1,S=e.tickSize||c,O=ke(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=p=e.coordinate,_=r+ +!u*i,g=_-j*S,w=g-j*m,x=O;break;case"left":g=_=e.coordinate,p=t+ +!u*n,h=p-j*S,x=h-j*m,w=O;break;case"right":g=_=e.coordinate,p=t+ +u*n,h=p+j*S,x=h+j*m,w=O;break;default:h=p=e.coordinate,_=r+ +u*i,g=_+j*S,w=g+j*m,x=O;break}return{line:{x1:h,y1:g,x2:p,y2:_},tick:{x,y:w}}}function CG(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function AG(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function NG(e){var{option:t,tickProps:r,value:n}=e,i,s=ot(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))i=y.cloneElement(t,er(er({},r),{},{className:s}));else if(typeof t=="function")i=t(er(er({},r),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=ot(c,t?.className)),i=y.createElement(Jm,Bo({},r,{className:c}),n)}return i}var kG=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:c,unit:u,padding:m,tickTextProps:h,orientation:p,mirror:g,x:_,y:x,width:w,height:j,tickSize:S,tickMargin:O,fontSize:C,letterSpacing:A,getTicksConfig:k,events:D,axisType:M}=e,L=O_(er(er({},k),{},{ticks:r}),C,A),X=CG(p,g),ne=AG(p,g),ae=gn(k),G=Mo(n),B={};typeof i=="object"&&(B=i);var ce=er(er({},ae),{},{fill:"none"},B),ge=L.map(I=>er({entry:I},OG(I,_,x,w,j,p,S,g,O))),q=ge.map(I=>{var{entry:ee,line:U}=I;return y.createElement(yr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},i&&y.createElement("line",Bo({},ce,U,{className:ot("recharts-cartesian-axis-tick-line",qo(i,"className"))})))}),R=ge.map((I,ee)=>{var{entry:U,tick:me}=I,je=er(er(er(er({textAnchor:X,verticalAnchor:ne},ae),{},{stroke:"none",fill:s},G),me),{},{index:ee,payload:U,visibleTicksCount:L.length,tickFormatter:c,padding:m},h);return y.createElement(yr,Bo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(U.value,"-").concat(U.coordinate,"-").concat(U.tickCoord)},hm(D,U,ee)),n&&y.createElement(NG,{option:n,tickProps:je,value:"".concat(typeof c=="function"?c(U.value,ee):U.value).concat(u||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},R.length>0&&y.createElement(Qr,{zIndex:rr.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:t},R)),q.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},q))}),DG=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:s,hide:c,ticks:u,axisType:m}=e,h=_G(e,bG),[p,g]=y.useState(""),[_,x]=y.useState(""),w=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return yG({ticks:w.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=y.useCallback(S=>{if(S){var O=S.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=O;var C=O[0];if(C){var A=window.getComputedStyle(C),k=A.fontSize,D=A.letterSpacing;(k!==p||D!==_)&&(g(k),x(D))}}},[p,_]);return c||n!=null&&n<=0||i!=null&&i<=0?null:y.createElement(Qr,{zIndex:e.zIndex},y.createElement(yr,{className:ot("recharts-cartesian-axis",s)},y.createElement(EG,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:gn(e)}),y.createElement(kG,{ref:j,axisType:m,events:h,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:_,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(EF,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(RF,{label:e.label,labelRef:e.labelRef}),e.children)))}),C_=y.forwardRef((e,t)=>{var r=br(e,Ha);return y.createElement(DG,Bo({},r,{ref:t}))});C_.displayName="CartesianAxis";var TG=["x1","y1","x2","y2","key"],PG=["offset"],MG=["xAxisId","yAxisId"],RG=["xAxisId","yAxisId"];function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){qG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qG(e,t,r){return(t=zG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zG(e){var t=LG(e,"string");return typeof t=="symbol"?t:t+""}function LG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ao.apply(null,arguments)}function tm(e,t){if(e==null)return{};var r,n,i=IG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function IG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var UG=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:c,ry:u}=e;return y.createElement("rect",{x:n,y:i,ry:u,width:s,height:c,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function oM(e){var{option:t,lineItemProps:r}=e,n;if(y.isValidElement(t))n=y.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:s,y1:c,x2:u,y2:m,key:h}=r,p=tm(r,TG),g=(i=gn(p))!==null&&i!==void 0?i:{},{offset:_}=g,x=tm(g,PG);n=y.createElement("line",Ao({},x,{x1:s,y1:c,x2:u,y2:m,fill:"none",key:h}))}return n}function BG(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=tm(e,MG),m=i.map((h,p)=>{var g=kr(kr({},u),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(p),index:p});return y.createElement(oM,{key:"line-".concat(p),option:n,lineItemProps:g})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function $G(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=tm(e,RG),m=i.map((h,p)=>{var g=kr(kr({},u),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(p),index:p});return y.createElement(oM,{option:n,lineItemProps:g,key:"line-".concat(p)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function HG(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:s,height:c,horizontalPoints:u,horizontal:m=!0}=e;if(!m||!t||!t.length||u==null)return null;var h=u.map(g=>Math.round(g+i-i)).sort((g,_)=>g-_);i!==h[0]&&h.unshift(0);var p=h.map((g,_)=>{var x=!h[_+1],w=x?i+c-g:h[_+1]-g;if(w<=0)return null;var j=_%t.length;return y.createElement("rect",{key:"react-".concat(_),y:g,x:n,height:w,width:s,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function FG(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:c,height:u,verticalPoints:m}=e;if(!t||!r||!r.length)return null;var h=m.map(g=>Math.round(g+i-i)).sort((g,_)=>g-_);i!==h[0]&&h.unshift(0);var p=h.map((g,_)=>{var x=!h[_+1],w=x?i+c-g:h[_+1]-g;if(w<=0)return null;var j=_%r.length;return y.createElement("rect",{key:"react-".concat(_),x:g,y:s,width:w,height:u,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var KG=(e,t)=>{var{xAxis:r,width:n,height:i,offset:s}=e;return Gk(O_(kr(kr(kr({},Ha),r),{},{ticks:Vk(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},YG=(e,t)=>{var{yAxis:r,width:n,height:i,offset:s}=e;return Gk(O_(kr(kr(kr({},Ha),r),{},{ticks:Vk(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},GG={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:rr.grid};function fb(e){var t=nD(),r=aD(),n=rD(),i=kr(kr({},br(e,GG)),{},{x:ke(e.x)?e.x:n.left,y:ke(e.y)?e.y:n.top,width:ke(e.width)?e.width:n.width,height:ke(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:c,x:u,y:m,width:h,height:p,syncWithTicks:g,horizontalValues:_,verticalValues:x}=i,w=Tr(),j=De(ne=>fC(ne,"xAxis",s,w)),S=De(ne=>fC(ne,"yAxis",c,w));if(!ma(h)||!ma(p)||!ke(u)||!ke(m))return null;var O=i.verticalCoordinatesGenerator||KG,C=i.horizontalCoordinatesGenerator||YG,{horizontalPoints:A,verticalPoints:k}=i;if((!A||!A.length)&&typeof C=="function"){var D=_&&_.length,M=C({yAxis:S?kr(kr({},S),{},{ticks:D?_:S.ticks}):void 0,width:t??h,height:r??p,offset:n},D?!0:g);Nf(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(A=M)}if((!k||!k.length)&&typeof O=="function"){var L=x&&x.length,X=O({xAxis:j?kr(kr({},j),{},{ticks:L?x:j.ticks}):void 0,width:t??h,height:r??p,offset:n},L?!0:g);Nf(Array.isArray(X),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof X,"]")),Array.isArray(X)&&(k=X)}return y.createElement(Qr,{zIndex:i.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(UG,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),y.createElement(HG,Ao({},i,{horizontalPoints:A})),y.createElement(FG,Ao({},i,{verticalPoints:k})),y.createElement(BG,Ao({},i,{offset:n,horizontalPoints:A,xAxis:j,yAxis:S})),y.createElement($G,Ao({},i,{offset:n,verticalPoints:k,xAxis:j,yAxis:S}))))}fb.displayName="CartesianGrid";var VG={},sM=Zr({name:"errorBars",initialState:VG,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:tQ,replaceErrorBar:rQ,removeErrorBar:nQ}=sM.actions,WG=sM.reducer,XG=["children"];function ZG(e,t){if(e==null)return{};var r,n,i=QG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function QG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var JG={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},eV=y.createContext(JG);function lM(e){var{children:t}=e,r=ZG(e,XG);return y.createElement(eV.Provider,{value:r},t)}function A_(e,t){var r,n,i=De(h=>ii(h,e)),s=De(h=>oi(h,t)),c=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:hr.allowDataOverflow,u=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:pr.allowDataOverflow,m=c||u;return{needClip:m,needClipX:c,needClipY:u}}function cM(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=E_(),{needClipX:s,needClipY:c,needClip:u}=A_(t,r);if(!u||!i)return null;var{x:m,y:h,width:p,height:g}=i;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:s?m:m-p/2,y:c?h:h-g/2,width:s?p:p*2,height:c?g:g*2}))}var uM=(e,t,r,n)=>Ki(e,"xAxis",t,n),dM=(e,t,r,n)=>Fi(e,"xAxis",t,n),fM=(e,t,r,n)=>Ki(e,"yAxis",r,n),mM=(e,t,r,n)=>Fi(e,"yAxis",r,n),tV=W([Je,uM,fM,dM,mM],(e,t,r,n,i)=>Vi(e,"xAxis")?Hs(t,n,!1):Hs(r,i,!1)),rV=(e,t,r,n,i)=>i;function nV(e){return e.type==="line"}var aV=W([Gm,rV],(e,t)=>e.filter(nV).find(r=>r.id===t)),iV=W([Je,uM,fM,dM,mM,aV,tV,O0],(e,t,r,n,i,s,c,u)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=u;if(!(s==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||c==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:g,data:_}=s,x;if(_!=null&&_.length>0?x=_:x=m?.slice(h,p+1),x!=null)return YV({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:g,bandSize:c,displayedData:x})}});function oV(e){var t=Mo(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:s}=t,c=Number(i),u=Number(s);return(Number.isNaN(c)||c<0)&&(c=r),(Number.isNaN(u)||u<0)&&(u=n),{r:c,strokeWidth:u}}return{r,strokeWidth:n}}var ny={exports:{}},ay={};var jA;function sV(){if(jA)return ay;jA=1;var e=sm();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,c=e.useMemo,u=e.useDebugValue;return ay.useSyncExternalStoreWithSelector=function(m,h,p,g,_){var x=i(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=c(function(){function S(D){if(!O){if(O=!0,C=D,D=g(D),_!==void 0&&w.hasValue){var M=w.value;if(_(M,D))return A=M}return A=D}if(M=A,r(C,D))return M;var L=g(D);return _!==void 0&&_(M,L)?(C=D,M):(C=D,A=L)}var O=!1,C,A,k=p===void 0?null:p;return[function(){return S(h())},k===null?void 0:function(){return S(k())}]},[h,p,g,_]);var j=n(m,x[0],x[1]);return s(function(){w.hasValue=!0,w.value=j},[j]),u(j),j},ay}var SA;function lV(){return SA||(SA=1,ny.exports=sV()),ny.exports}lV();function cV(e){e()}function uV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){cV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var EA={notify(){},get:()=>[]};function dV(e,t){let r,n=EA,i=0,s=!1;function c(j){p();const S=n.subscribe(j);let O=!1;return()=>{O||(O=!0,S(),g())}}function u(){n.notify()}function m(){w.onStateChange&&w.onStateChange()}function h(){return s}function p(){i++,r||(r=e.subscribe(m),n=uV())}function g(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=EA)}function _(){s||(s=!0,p())}function x(){s&&(s=!1,g())}const w={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:m,isSubscribed:h,trySubscribe:_,tryUnsubscribe:x,getListeners:()=>n};return w}var fV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mV=fV(),hV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",pV=hV(),gV=()=>mV||pV?y.useLayoutEffect:y.useEffect,vV=gV();function OA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function yV(e,t){if(OA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!OA(e[r[i]],t[r[i]]))return!1;return!0}var bV=Symbol.for("react-redux-context"),_V=typeof globalThis<"u"?globalThis:{};function xV(){if(!y.createContext)return{};const e=_V[bV]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var wV=xV();function jV(e){const{children:t,context:r,serverState:n,store:i}=e,s=y.useMemo(()=>{const m=dV(i);return{store:i,subscription:m,getServerState:n?()=>n:void 0}},[i,n]),c=y.useMemo(()=>i.getState(),[i]);vV(()=>{const{subscription:m}=s;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[s,c]);const u=r||wV;return y.createElement(u.Provider,{value:s},t)}var SV=jV,EV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function OV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function ah(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(EV.has(n)){if(e[n]==null&&t[n]==null)continue;if(!yV(e[n],t[n]))return!1}else if(!OV(e[n],t[n]))return!1;return!0}var CV=["id"],AV=["type","layout","connectNulls","needClip","shape"],NV=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zc.apply(null,arguments)}function CA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function la(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(r),!0).forEach(function(n){kV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kV(e,t,r){return(t=DV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DV(e){var t=TV(e,"string");return typeof t=="symbol"?t:t+""}function TV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N_(e,t){if(e==null)return{};var r,n,i=PV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function PV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MV=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Zs(r,t),payload:e}]},RV=y.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:s,name:c,hide:u,unit:m,tooltipType:h,id:p}=e,g={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:Zs(c,t),hide:u,type:h,color:n,unit:m,graphicalItemId:p}};return y.createElement(j_,{tooltipEntrySettings:g})}),hM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function qV(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var zV=(e,t,r)=>{var n=r.reduce((g,_)=>g+_);if(!n)return hM(t,e);for(var i=Math.floor(e/n),s=e%n,c=t-e,u=[],m=0,h=0;m<r.length;h+=r[m],++m)if(h+r[m]>s){u=[...r.slice(0,m),s-h];break}var p=u.length%2===0?[0,c]:[c];return[...qV(r,i),...u,...p].map(g=>"".concat(g,"px")).join(", ")};function LV(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:s,needClip:c}=n,{id:u}=n,m=N_(n,CV),h=gn(m);return y.createElement(SY,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:c,clipPathId:t})}function IV(e){var{showLabels:t,children:r,points:n}=e,i=y.useMemo(()=>n?.map(s=>{var c,u,m={x:(c=s.x)!==null&&c!==void 0?c:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return la(la({},m),{},{value:s.value,payload:s.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[n]);return y.createElement(IP,{value:t?i:void 0},r)}function AA(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:s}=e,{type:c,layout:u,connectNulls:m,needClip:h,shape:p}=s,g=N_(s,AV),_=la(la({},Ur(g)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:c,layout:u,connectNulls:m,strokeDasharray:i??s.strokeDasharray});return y.createElement(y.Fragment,null,n?.length>1&&y.createElement(b_,zc({shapeType:"curve",option:p},_,{pathRef:r})),y.createElement(LV,{points:n,clipPathId:t,props:s}))}function UV(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function BV(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:c,strokeDasharray:u,isAnimationActive:m,animationBegin:h,animationDuration:p,animationEasing:g,animateNewValues:_,width:x,height:w,onAnimationEnd:j,onAnimationStart:S}=r,O=i.current,C=Wc(c,"recharts-line-"),A=y.useRef(C),[k,D]=y.useState(!1),M=!k,L=y.useCallback(()=>{typeof j=="function"&&j(),D(!1)},[j]),X=y.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),ne=UV(n.current),ae=y.useRef(0);A.current!==C&&(ae.current=s.current,A.current=C);var G=ae.current;return y.createElement(IV,{points:c,showLabels:M},r.children,y.createElement(Vc,{animationId:C,begin:h,duration:p,isActive:m,easing:g,onAnimationEnd:L,onAnimationStart:X,key:C},B=>{var ce=Dt(G,ne+G,B),ge=Math.min(ce,ne),q;if(m)if(u){var R="".concat(u).split(/[,\s]+/gim).map(U=>parseFloat(U));q=zV(ge,ne,R)}else q=hM(ne,ge);else q=u==null?void 0:String(u);if(B>0&&ne>0&&(i.current=c,s.current=Math.max(s.current,ge)),O){var I=O.length/c.length,ee=B===1?c:c.map((U,me)=>{var je=Math.floor(me*I);if(O[je]){var J=O[je];return la(la({},U),{},{x:Dt(J.x,U.x,B),y:Dt(J.y,U.y,B)})}return _?la(la({},U),{},{x:Dt(x*2,U.x,B),y:Dt(w/2,U.y,B)}):la(la({},U),{},{x:U.x,y:U.y})});return i.current=ee,y.createElement(AA,{props:r,points:ee,clipPathId:t,pathRef:n,strokeDasharray:q})}return y.createElement(AA,{props:r,points:c,clipPathId:t,pathRef:n,strokeDasharray:q})}),y.createElement(p_,{label:r.label}))}function $V(e){var{clipPathId:t,props:r}=e,n=y.useRef(null),i=y.useRef(0),s=y.useRef(null);return y.createElement(BV,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var HV=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:pt(e.payload,t)}};class FV extends y.Component{render(){var{hide:t,dot:r,points:n,className:i,xAxisId:s,yAxisId:c,top:u,left:m,width:h,height:p,id:g,needClip:_,zIndex:x}=this.props;if(t)return null;var w=ot("recharts-line",i),j=g,{r:S,strokeWidth:O}=oV(r),C=GP(r),A=S*2+O,k=_?"url(#clipPath-".concat(C?"":"dots-").concat(j,")"):void 0;return y.createElement(Qr,{zIndex:x},y.createElement(yr,{className:w},_&&y.createElement("defs",null,y.createElement(cM,{clipPathId:j,xAxisId:s,yAxisId:c}),!C&&y.createElement("clipPath",{id:"clipPath-dots-".concat(j)},y.createElement("rect",{x:m-A/2,y:u-A/2,width:h+A,height:p+A}))),y.createElement(lM,{xAxisId:s,yAxisId:c,data:n,dataPointFormatter:HV,errorBarOffset:0},y.createElement($V,{props:this.props,clipPathId:j}))),y.createElement(FY,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var pM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:rr.line,type:"linear"};function KV(e){var t=br(e,pM),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,connectNulls:u,dot:m,hide:h,isAnimationActive:p,label:g,legendType:_,xAxisId:x,yAxisId:w,id:j}=t,S=N_(t,NV),{needClip:O}=A_(x,w),C=E_(),A=Ko(),k=Tr(),D=De(ae=>iV(ae,x,w,k,j));if(A!=="horizontal"&&A!=="vertical"||D==null||C==null)return null;var{height:M,width:L,x:X,y:ne}=C;return y.createElement(FV,zc({},S,{id:j,connectNulls:u,dot:m,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,isAnimationActive:p,hide:h,label:g,legendType:_,xAxisId:x,yAxisId:w,points:D,layout:A,height:M,width:L,left:X,top:ne,needClip:O}))}function YV(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:c,bandSize:u,displayedData:m}=e;return m.map((h,p)=>{var g=pt(h,c);if(t==="horizontal"){var _=gE({axis:r,ticks:i,bandSize:u,entry:h,index:p}),x=Mt(g)?null:n.scale(g);return{x:_,y:x,value:g,payload:h}}var w=Mt(g)?null:r.scale(g),j=gE({axis:n,ticks:s,bandSize:u,entry:h,index:p});return w==null||j==null?null:{x:w,y:j,value:g,payload:h}}).filter(Boolean)}function GV(e){var t=br(e,pM),r=Tr();return y.createElement(S_,{id:t.id,type:"line"},n=>y.createElement(y.Fragment,null,y.createElement(VP,{legendPayload:MV(t)}),y.createElement(RV,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),y.createElement(XP,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),y.createElement(KV,zc({},t,{id:n}))))}var gM=y.memo(GV,ah);gM.displayName="Line";function Vo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:QP}function Wo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:QP}var VV="Invariant failed";function WV(e,t){throw new Error(VV)}function mb(){return mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mb.apply(null,arguments)}function rm(e){return y.createElement(b_,mb({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var XV=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(ke(t))return t;var s=ke(n)||Mt(n);return s?t(n,i):(s||WV(),r)}},ZV=(e,t,r)=>r,QV=(e,t)=>t,uu=W([Gm,QV],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),JV=W([uu],e=>e?.maxBarSize),eW=(e,t,r,n)=>n,tW=W([Je,Gm,Vo,Wo,ZV],(e,t,r,n,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),rW=(e,t,r)=>{var n=Je(e),i=Vo(e,t),s=Wo(e,t);if(!(i==null||s==null))return n==="horizontal"?ab(e,"yAxis",s,r):ab(e,"xAxis",i,r)},nW=(e,t)=>{var r=Je(e),n=Vo(e,t),i=Wo(e,t);if(!(n==null||i==null))return r==="horizontal"?dC(e,"xAxis",n):dC(e,"yAxis",i)},aW=W([tW,O8,nW],KY),iW=(e,t,r)=>{var n,i,s=uu(e,t);if(s!=null){var c=Vo(e,t),u=Wo(e,t);if(!(c==null||u==null)){var m=Je(e),h=_T(e),{maxBarSize:p}=s,g=Mt(p)?h:p,_,x;return m==="horizontal"?(_=Ki(e,"xAxis",c,r),x=Fi(e,"xAxis",c,r)):(_=Ki(e,"yAxis",u,r),x=Fi(e,"yAxis",u,r)),(n=(i=Hs(_,x,!0))!==null&&i!==void 0?i:g)!==null&&n!==void 0?n:0}}},vM=(e,t,r)=>{var n=Je(e),i=Vo(e,t),s=Wo(e,t);if(!(i==null||s==null)){var c,u;return n==="horizontal"?(c=Ki(e,"xAxis",i,r),u=Fi(e,"xAxis",i,r)):(c=Ki(e,"yAxis",s,r),u=Fi(e,"yAxis",s,r)),Hs(c,u)}},oW=W([aW,_T,E8,xT,iW,vM,JV],XY),sW=(e,t,r)=>{var n=Vo(e,t);if(n!=null)return Ki(e,"xAxis",n,r)},lW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Ki(e,"yAxis",n,r)},cW=(e,t,r)=>{var n=Vo(e,t);if(n!=null)return Fi(e,"xAxis",n,r)},uW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Fi(e,"yAxis",n,r)},dW=W([oW,uu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),fW=W([rW,uu],ZY),mW=W([cr,Qb,sW,lW,cW,uW,dW,Je,m8,vM,fW,uu,eW],(e,t,r,n,i,s,c,u,m,h,p,g,_)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:j}=m;if(!(g==null||c==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||i==null||s==null||h==null)){var{data:S}=g,O;if(S!=null&&S.length>0?O=S:O=x?.slice(w,j+1),O!=null)return $W({layout:u,barSettings:g,pos:c,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:O,offset:e,cells:_,dataStartIndex:w})}}),hW=["index"];function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hb.apply(null,arguments)}function pW(e,t){if(e==null)return{};var r,n,i=gW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function gW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yM=y.createContext(void 0),vW=e=>{var t=y.useContext(yM);if(t!=null)return t.stackId;if(e!=null)return w5(e)},yW=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),bW=e=>{var t=y.useContext(yM);if(t!=null){var{stackId:r}=t;return"url(#".concat(yW(r,e),")")}},_W=e=>{var{index:t}=e,r=pW(e,hW),n=bW(t);return y.createElement(yr,hb({className:"recharts-bar-stack-layer",clipPath:n},r))},xW=["onMouseEnter","onMouseLeave","onClick"],wW=["value","background","tooltipPosition"],jW=["id"],SW=["onMouseEnter","onClick","onMouseLeave"];function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Za.apply(null,arguments)}function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){EW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EW(e,t,r){return(t=OW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OW(e){var t=CW(e,"string");return typeof t=="symbol"?t:t+""}function CW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nm(e,t){if(e==null)return{};var r,n,i=AW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function AW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var NW=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Zs(r,t),payload:e}]},kW=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:s,hide:c,unit:u,tooltipType:m,id:h}=e,p={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Zs(s,t),hide:c,type:m,color:i,unit:u,graphicalItemId:h}};return y.createElement(j_,{tooltipEntrySettings:p})});function DW(e){var t=De(Yi),{data:r,dataKey:n,background:i,allOtherBarProps:s}=e,{onMouseEnter:c,onMouseLeave:u,onClick:m}=s,h=nm(s,xW),p=__(c,n,s.id),g=x_(u),_=w_(m,n,s.id);if(!i||r==null)return null;var x=Mo(i);return y.createElement(Qr,{zIndex:QY(i,rr.barBackground)},r.map((w,j)=>{var{value:S,background:O,tooltipPosition:C}=w,A=nm(w,wW);if(!O)return null;var k=p(w,j),D=g(w,j),M=_(w,j),L=Lr(Lr(Lr(Lr(Lr({option:i,isActive:String(j)===t},A),{},{fill:"#eee"},O),x),hm(h,w,j)),{},{onMouseEnter:k,onMouseLeave:D,onClick:M,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return y.createElement(rm,Za({key:"background-bar-".concat(j)},L))}))}function TW(e){var{showLabels:t,children:r,rects:n}=e,i=n?.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Lr(Lr({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return y.createElement(IP,{value:t?i:void 0},r)}function PW(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:s,dataKey:c}=e,u=De(Yi),m=De(l_),h=r&&String(s)===u&&(m==null||c===m),p=h?r:t;return h?y.createElement(Qr,{zIndex:rr.activeBar},y.createElement(rm,Za({},n,{name:String(n.name)},i,{isActive:h,option:p,index:s,dataKey:c}))):y.createElement(rm,Za({},n,{name:String(n.name)},i,{isActive:h,option:p,index:s,dataKey:c}))}function MW(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:s}=e;return y.createElement(rm,Za({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:s}))}function RW(e){var t,{data:r,props:n}=e,i=(t=gn(n))!==null&&t!==void 0?t:{},{id:s}=i,c=nm(i,jW),{shape:u,dataKey:m,activeBar:h}=n,{onMouseEnter:p,onClick:g,onMouseLeave:_}=n,x=nm(n,SW),w=__(p,m,s),j=x_(_),S=w_(g,m,s);return r?y.createElement(y.Fragment,null,r.map((O,C)=>y.createElement(_W,Za({index:C,key:"rectangle-".concat(O?.x,"-").concat(O?.y,"-").concat(O?.value,"-").concat(C),className:"recharts-bar-rectangle"},hm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),h?y.createElement(PW,{shape:u,activeBar:h,baseProps:c,entry:O,index:C,dataKey:m}):y.createElement(MW,{shape:u,baseProps:c,entry:O,index:C,dataKey:m})))):null}function qW(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,onAnimationEnd:h,onAnimationStart:p}=t,g=r.current,_=Wc(t,"recharts-bar-"),[x,w]=y.useState(!1),j=!x,S=y.useCallback(()=>{typeof h=="function"&&h(),w(!1)},[h]),O=y.useCallback(()=>{typeof p=="function"&&p(),w(!0)},[p]);return y.createElement(TW,{showLabels:j,rects:n},y.createElement(Vc,{animationId:_,begin:c,duration:u,isActive:s,easing:m,onAnimationEnd:S,onAnimationStart:O,key:_},C=>{var A=C===1?n:n?.map((k,D)=>{var M=g&&g[D];if(M)return Lr(Lr({},k),{},{x:Dt(M.x,k.x,C),y:Dt(M.y,k.y,C),width:Dt(M.width,k.width,C),height:Dt(M.height,k.height,C)});if(i==="horizontal"){var L=Dt(0,k.height,C),X=Dt(k.stackedBarStart,k.y,C);return Lr(Lr({},k),{},{y:X,height:L})}var ne=Dt(0,k.width,C),ae=Dt(k.stackedBarStart,k.x,C);return Lr(Lr({},k),{},{width:ne,x:ae})});return C>0&&(r.current=A??null),A==null?null:y.createElement(yr,null,y.createElement(RW,{props:t,data:A}))}),y.createElement(p_,{label:t.label}),t.children)}function zW(e){var t=y.useRef(null);return y.createElement(qW,{previousRectanglesRef:t,props:e})}var bM=0,LW=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:pt(e,t)}};class IW extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:s,yAxisId:c,needClip:u,background:m,id:h}=this.props;if(t||r==null)return null;var p=ot("recharts-bar",i),g=h;return y.createElement(yr,{className:p,id:h},u&&y.createElement("defs",null,y.createElement(cM,{clipPathId:g,xAxisId:s,yAxisId:c})),y.createElement(yr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(g,")"):void 0},y.createElement(DW,{data:r,dataKey:n,background:m,allOtherBarProps:this.props}),y.createElement(zW,this.props)))}}var UW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:bM,xAxisId:0,yAxisId:0,zIndex:rr.bar};function BW(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:p}=e,{needClip:g}=A_(t,r),_=Ko(),x=Tr(),w=y_(e.children,cu),j=De(C=>mW(C,e.id,x,w));if(_!=="vertical"&&_!=="horizontal")return null;var S,O=j?.[0];return O==null||O.height==null||O.width==null?S=0:S=_==="vertical"?O.height/2:O.width/2,y.createElement(lM,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:LW,errorBarOffset:S},y.createElement(IW,Za({},e,{layout:_,needClip:g,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:p})))}function $W(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:c,yAxis:u,xAxisTicks:m,yAxisTicks:h,stackedData:p,displayedData:g,offset:_,cells:x,parentViewBox:w,dataStartIndex:j}=e,S=t==="horizontal"?u:c,O=p?S.scale.domain():null,C=j5({numericAxis:S}),A=S.scale(C);return g.map((k,D)=>{var M,L,X,ne,ae,G;if(p){var B=p[D+j];if(B==null)return null;M=v5(B,O)}else M=pt(k,r),Array.isArray(M)||(M=[C,M]);var ce=XV(n,bM)(M[1],D);if(t==="horizontal"){var ge,[q,R]=[u.scale(M[0]),u.scale(M[1])];L=vE({axis:c,ticks:m,bandSize:s,offset:i.offset,entry:k,index:D}),X=(ge=R??q)!==null&&ge!==void 0?ge:void 0,ne=i.size;var I=q-R;if(ae=Qn(I)?0:I,G={x:L,y:_.top,width:ne,height:_.height},Math.abs(ce)>0&&Math.abs(ae)<Math.abs(ce)){var ee=vr(ae||ce)*(Math.abs(ce)-Math.abs(ae));X-=ee,ae+=ee}}else{var[U,me]=[c.scale(M[0]),c.scale(M[1])];if(L=U,X=vE({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:k,index:D}),ne=me-U,ae=i.size,G={x:_.left,y:X,width:_.width,height:ae},Math.abs(ce)>0&&Math.abs(ne)<Math.abs(ce)){var je=vr(ne||ce)*(Math.abs(ce)-Math.abs(ne));ne+=je}}if(L==null||X==null||ne==null||ae==null)return null;var J=Lr(Lr({},k),{},{stackedBarStart:A,x:L,y:X,width:ne,height:ae,value:p?M:M[1],payload:k,background:G,tooltipPosition:{x:L+ne/2,y:X+ae/2},parentViewBox:w},x&&x[D]&&x[D].props);return J}).filter(Boolean)}function HW(e){var t=br(e,UW),r=vW(t.stackId),n=Tr();return y.createElement(S_,{id:t.id,type:"bar"},i=>y.createElement(y.Fragment,null,y.createElement(VP,{legendPayload:NW(t)}),y.createElement(kW,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),y.createElement(XP,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),y.createElement(Qr,{zIndex:t.zIndex},y.createElement(BW,Za({},t,{id:i})))))}var _M=y.memo(HW,ah);_M.displayName="Bar";var FW=["domain","range"],KW=["domain","range"];function kA(e,t){if(e==null)return{};var r,n,i=YW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function YW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function DA(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function xM(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=kA(e,FW),{domain:s,range:c}=t,u=kA(t,KW);return!DA(r,s)||!DA(n,c)?!1:ah(i,u)}var GW=["dangerouslySetInnerHTML","ticks","scale"],VW=["id","scale"];function pb(){return pb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pb.apply(null,arguments)}function TA(e,t){if(e==null)return{};var r,n,i=WW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function WW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function XW(e){var t=Rt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(NY(e)):r.current!==e&&t(kY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(DY(r.current)),r.current=null)},[t]),null}var ZW=e=>{var{xAxisId:t,className:r}=e,n=De(Qb),i=Tr(),s="xAxis",c=De(O=>JT(O,s,t,i)),u=De(O=>WT(O,t)),m=De(O=>jH(O,t)),h=De(O=>kT(O,t));if(u==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:g,scale:_}=e,x=TA(e,GW),{id:w,scale:j}=h,S=TA(h,VW);return y.createElement(C_,pb({},x,S,{x:m.x,y:m.y,width:u.width,height:u.height,className:ot("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:c,axisType:s}))},QW={allowDataOverflow:hr.allowDataOverflow,allowDecimals:hr.allowDecimals,allowDuplicatedCategory:hr.allowDuplicatedCategory,angle:hr.angle,axisLine:Ha.axisLine,height:hr.height,hide:!1,includeHidden:hr.includeHidden,interval:hr.interval,minTickGap:hr.minTickGap,mirror:hr.mirror,orientation:hr.orientation,padding:hr.padding,reversed:hr.reversed,scale:hr.scale,tick:hr.tick,tickCount:hr.tickCount,tickLine:Ha.tickLine,tickSize:Ha.tickSize,type:hr.type,xAxisId:0},JW=e=>{var t=br(e,QW);return y.createElement(y.Fragment,null,y.createElement(XW,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(ZW,t))},gb=y.memo(JW,xM);gb.displayName="XAxis";var eX=["dangerouslySetInnerHTML","ticks","scale"],tX=["id","scale"];function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vb.apply(null,arguments)}function PA(e,t){if(e==null)return{};var r,n,i=rX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function rX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nX(e){var t=Rt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(TY(e)):r.current!==e&&t(PY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(MY(r.current)),r.current=null)},[t]),null}var aX=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,s=y.useRef(null),c=y.useRef(null),u=De(Qb),m=Tr(),h=Rt(),p="yAxis",g=De(M=>XT(M,t)),_=De(M=>EH(M,t)),x=De(M=>JT(M,p,t,m)),w=De(M=>DT(M,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!g||h_(i)||y.isValidElement(i)||w==null)){var M=s.current;if(M){var L=M.getCalculatedWidth();Math.round(g.width)!==Math.round(L)&&h(RY({id:t,width:L}))}}},[x,g,h,i,t,n,w]),g==null||_==null||w==null)return null;var{dangerouslySetInnerHTML:j,ticks:S,scale:O}=e,C=PA(e,eX),{id:A,scale:k}=w,D=PA(w,tX);return y.createElement(C_,vb({},C,D,{ref:s,labelRef:c,x:_.x,y:_.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:g.width,height:g.height,className:ot("recharts-".concat(p," ").concat(p),r),viewBox:u,ticks:x,axisType:p}))},iX={allowDataOverflow:pr.allowDataOverflow,allowDecimals:pr.allowDecimals,allowDuplicatedCategory:pr.allowDuplicatedCategory,angle:pr.angle,axisLine:Ha.axisLine,hide:!1,includeHidden:pr.includeHidden,interval:pr.interval,minTickGap:pr.minTickGap,mirror:pr.mirror,orientation:pr.orientation,padding:pr.padding,reversed:pr.reversed,scale:pr.scale,tick:pr.tick,tickCount:pr.tickCount,tickLine:Ha.tickLine,tickSize:Ha.tickSize,type:pr.type,width:pr.width,yAxisId:0},oX=e=>{var t=br(e,iX);return y.createElement(y.Fragment,null,y.createElement(nX,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(aX,t))},yb=y.memo(oX,xM);yb.displayName="YAxis";var sX=(e,t)=>t,k_=W([sX,Je,AT,dr,pP,si,B9,cr],V9),D_=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},wM=zn("mouseClick"),jM=Kc();jM.startListening({actionCreator:wM,effect:(e,t)=>{var r=e.payload,n=k_(t.getState(),D_(r));n?.activeIndex!=null&&t.dispatch(IH({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var bb=zn("mouseMove"),SM=Kc(),Xd=null;SM.startListening({actionCreator:bb,effect:(e,t)=>{var r=e.payload;Xd!==null&&cancelAnimationFrame(Xd);var n=D_(r);Xd=requestAnimationFrame(()=>{var i=t.getState(),s=r_(i,i.tooltip.settings.shared);if(s==="axis"){var c=k_(i,n);c?.activeIndex!=null?t.dispatch(sP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):t.dispatch(oP())}Xd=null})}});function lX(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var MA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},EM=Zr({name:"rootProps",initialState:MA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:MA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),cX=EM.reducer,{updateOptions:uX}=EM.actions,OM=Zr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:dX}=OM.actions,fX=OM.reducer,CM=zn("keyDown"),AM=zn("focus"),T_=Kc();T_.startListening({actionCreator:CM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=n_(i,ol(r),au(r),su(r)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var m=si(r);if(s==="Enter"){var h=Xf(r,"axis","hover",String(i.index));t.dispatch(ob({active:!i.active,activeIndex:i.index,activeCoordinate:h}));return}var p=NH(r),g=p==="left-to-right"?1:-1,_=s==="ArrowRight"?1:-1,x=u+_*g;if(!(m==null||x>=m.length||x<0)){var w=Xf(r,"axis","hover",String(x));t.dispatch(ob({active:!0,activeIndex:x.toString(),activeCoordinate:w}))}}}}}});T_.startListening({actionCreator:AM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",c=Xf(r,"axis","hover",String(s));t.dispatch(ob({active:!0,activeIndex:s,activeCoordinate:c}))}}}});var Mn=zn("externalEvent"),NM=Kc(),iy=new Map;NM.startListening({actionCreator:Mn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,s=iy.get(i);s!==void 0&&cancelAnimationFrame(s);var c=requestAnimationFrame(()=>{try{var u=t.getState(),m={activeCoordinate:E9(u),activeDataKey:l_(u),activeIndex:Yi(u),activeLabel:yP(u),activeTooltipIndex:Yi(u),isTooltipActive:O9(u)};r(m,n)}finally{iy.delete(i)}});iy.set(i,c)}}});var mX=W([al],e=>e.tooltipItemPayloads),hX=W([mX,ou,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(u=>u.settings.graphicalItemId===n);if(i!=null){var{positions:s}=i;if(s!=null){var c=t(s,r);return c}}}),kM=zn("touchMove"),DM=Kc();DM.startListening({actionCreator:kM,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=r_(n,n.tooltip.settings.shared);if(i==="axis"){var s=r.touches[0];if(s==null)return;var c=k_(n,D_({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));c?.activeIndex!=null&&t.dispatch(sP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,m=r.touches[0];if(document.elementFromPoint==null||m==null)return;var h=document.elementFromPoint(m.clientX,m.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(Xk),g=(u=h.getAttribute(Zk))!==null&&u!==void 0?u:void 0,_=il(n).find(j=>j.id===g);if(p==null||_==null||g==null)return;var{dataKey:x}=_,w=hX(n,p,g);t.dispatch(iP({activeDataKey:x,activeIndex:p,activeCoordinate:w,activeGraphicalItemId:g}))}}}});var pX=yk({brush:JY,cartesianAxis:qY,chartData:E7,errorBars:WG,graphicalItems:$K,layout:d5,legend:vU,options:_7,polarAxis:rK,polarOptions:fX,referenceElements:oG,rootProps:cX,tooltip:UH,zIndex:l7}),gX=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return q4({reducer:pX,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([jM.middleware,SM.middleware,T_.middleware,NM.middleware,DM.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(Pk({type:"raf"}))},devTools:{serialize:{replacer:lX},name:"recharts-".concat(r)}})};function TM(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Tr(),s=y.useRef(null);if(i)return r;s.current==null&&(s.current=gX(t,n));var c=Kb;return y.createElement(SV,{context:c,store:s.current},r)}function vX(e){var{layout:t,margin:r}=e,n=Rt(),i=Tr();return y.useEffect(()=>{i||(n(l5(t)),n(s5(r)))},[n,i,t,r]),null}var PM=y.memo(vX,ah);function MM(e){var t=Rt();return y.useEffect(()=>{t(uX(e))},[t,e]),null}function RA(e){var{zIndex:t,isPanorama:r}=e,n=y.useRef(null),i=Rt();return y.useLayoutEffect(()=>(n.current&&i(o7({zIndex:t,element:n.current,isPanorama:r})),()=>{i(s7({zIndex:t,isPanorama:r}))}),[i,t,r]),y.createElement("g",{tabIndex:-1,ref:n})}function qA(e){var{children:t,isPanorama:r}=e,n=De(X9);if(!n||n.length===0)return t;var i=n.filter(c=>c<0),s=n.filter(c=>c>0);return y.createElement(y.Fragment,null,i.map(c=>y.createElement(RA,{key:c,zIndex:c,isPanorama:r})),t,s.map(c=>y.createElement(RA,{key:c,zIndex:c,isPanorama:r})))}var yX=["children"];function bX(e,t){if(e==null)return{};var r,n,i=_X(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function _X(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},am.apply(null,arguments)}var xX={width:"100%",height:"100%",display:"block"},wX=y.forwardRef((e,t)=>{var r=nD(),n=aD(),i=pD();if(!ma(r)||!ma(n))return null;var{children:s,otherAttributes:c,title:u,desc:m}=e,h,p;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=i?0:void 0,typeof c.role=="string"?p=c.role:p=i?"application":void 0),y.createElement(MN,am({},c,{title:u,desc:m,role:p,tabIndex:h,width:r,height:n,style:xX,ref:t}),s)}),jX=e=>{var{children:t}=e,r=De(Am);if(!r)return null;var{width:n,height:i,y:s,x:c}=r;return y.createElement(MN,{width:n,height:i,x:c,y:s},t)},zA=y.forwardRef((e,t)=>{var{children:r}=e,n=bX(e,yX),i=Tr();return i?y.createElement(jX,null,y.createElement(qA,{isPanorama:!0},r)):y.createElement(wX,am({ref:t},n),y.createElement(qA,{isPanorama:!1},r))});function SX(){var e=Rt(),[t,r]=y.useState(null),n=De(N5);return y.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;zt(s)&&s!==n&&e(u5(s))}},[t,e,n]),r}function LA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function EX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LA(Object(r),!0).forEach(function(n){OX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OX(e,t,r){return(t=CX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CX(e){var t=AX(e,"string");return typeof t=="symbol"?t:t+""}function AX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$o.apply(null,arguments)}var NX=()=>(M7(),null);function im(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var kX=y.forwardRef((e,t)=>{var r,n,i=y.useRef(null),[s,c]=y.useState({containerWidth:im((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:im((n=e.style)===null||n===void 0?void 0:n.height)}),u=y.useCallback((h,p)=>{c(g=>{var _=Math.round(h),x=Math.round(p);return g.containerWidth===_&&g.containerHeight===x?g:{containerWidth:_,containerHeight:x}})},[]),m=y.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:g}=h.getBoundingClientRect();u(p,g);var _=w=>{var{width:j,height:S}=w[0].contentRect;u(j,S)},x=new ResizeObserver(_);x.observe(h),i.current=x}},[t,u]);return y.useEffect(()=>()=>{var h=i.current;h?.disconnect()},[u]),y.createElement(y.Fragment,null,y.createElement(km,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",$o({ref:m},e)))}),DX=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,s]=y.useState({containerWidth:im(r),containerHeight:im(n)}),c=y.useCallback((m,h)=>{s(p=>{var g=Math.round(m),_=Math.round(h);return p.containerWidth===g&&p.containerHeight===_?p:{containerWidth:g,containerHeight:_}})},[]),u=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:h,height:p}=m.getBoundingClientRect();c(h,p)}},[t,c]);return y.createElement(y.Fragment,null,y.createElement(km,{width:i.containerWidth,height:i.containerHeight}),y.createElement("div",$o({ref:u},e)))}),TX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(km,{width:r,height:n}),y.createElement("div",$o({ref:t},e)))}),PX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ka(r)||Ka(n)?y.createElement(DX,$o({},e,{ref:t})):y.createElement(TX,$o({},e,{ref:t}))});function MX(e){return e===!0?kX:PX}var RX=y.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:c,onDoubleClick:u,onMouseDown:m,onMouseEnter:h,onMouseLeave:p,onMouseMove:g,onMouseUp:_,onTouchEnd:x,onTouchMove:w,onTouchStart:j,style:S,width:O,responsive:C,dispatchTouchEvents:A=!0}=e,k=y.useRef(null),D=Rt(),[M,L]=y.useState(null),[X,ne]=y.useState(null),ae=SX(),G=Jb(),B=G?.width>0?G.width:O,ce=G?.height>0?G.height:i,ge=y.useCallback(Q=>{ae(Q),typeof t=="function"&&t(Q),L(Q),ne(Q),Q!=null&&(k.current=Q)},[ae,t,L,ne]),q=y.useCallback(Q=>{D(wM(Q)),D(Mn({handler:s,reactEvent:Q}))},[D,s]),R=y.useCallback(Q=>{D(bb(Q)),D(Mn({handler:h,reactEvent:Q}))},[D,h]),I=y.useCallback(Q=>{D(oP()),D(Mn({handler:p,reactEvent:Q}))},[D,p]),ee=y.useCallback(Q=>{D(bb(Q)),D(Mn({handler:g,reactEvent:Q}))},[D,g]),U=y.useCallback(()=>{D(AM())},[D]),me=y.useCallback(Q=>{D(CM(Q.key))},[D]),je=y.useCallback(Q=>{D(Mn({handler:c,reactEvent:Q}))},[D,c]),J=y.useCallback(Q=>{D(Mn({handler:u,reactEvent:Q}))},[D,u]),H=y.useCallback(Q=>{D(Mn({handler:m,reactEvent:Q}))},[D,m]),Se=y.useCallback(Q=>{D(Mn({handler:_,reactEvent:Q}))},[D,_]),Te=y.useCallback(Q=>{D(Mn({handler:j,reactEvent:Q}))},[D,j]),Ue=y.useCallback(Q=>{A&&D(kM(Q)),D(Mn({handler:w,reactEvent:Q}))},[D,A,w]),pe=y.useCallback(Q=>{D(Mn({handler:x,reactEvent:Q}))},[D,x]),Ie=MX(C);return y.createElement(EP.Provider,{value:M},y.createElement(RN.Provider,{value:X},y.createElement(Ie,{width:B??S?.width,height:ce??S?.height,className:ot("recharts-wrapper",n),style:EX({position:"relative",cursor:"default",width:B,height:ce},S),onClick:q,onContextMenu:je,onDoubleClick:J,onFocus:U,onKeyDown:me,onMouseDown:H,onMouseEnter:R,onMouseLeave:I,onMouseMove:ee,onMouseUp:Se,onTouchEnd:pe,onTouchMove:Ue,onTouchStart:Te,ref:ge},y.createElement(NX,null),r)))}),qX=["width","height","responsive","children","className","style","compact","title","desc"];function zX(e,t){if(e==null)return{};var r,n,i=LX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function LX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RM=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:s,className:c,style:u,compact:m,title:h,desc:p}=e,g=zX(e,qX),_=gn(g);return m?y.createElement(y.Fragment,null,y.createElement(km,{width:r,height:n}),y.createElement(zA,{otherAttributes:_,title:h,desc:p},s)):y.createElement(RX,{className:c,style:u,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(zA,{otherAttributes:_,title:h,desc:p,ref:t},y.createElement(sG,null,s)))});function _b(){return _b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_b.apply(null,arguments)}var IX={top:5,right:5,bottom:5,left:5},UX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:IX,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},qM=y.forwardRef(function(t,r){var n,i=br(t.categoricalChartProps,UX),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,p={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(TM,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:s},y.createElement(eM,{chartData:h.data}),y.createElement(PM,{layout:i.layout,margin:i.margin}),y.createElement(MM,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(RM,_b({},i,{ref:r})))}),BX=["axis"],$X=y.forwardRef((e,t)=>y.createElement(qM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:BX,tooltipPayloadSearcher:m_,categoricalChartProps:e,ref:t})),HX=["axis","item"],FX=y.forwardRef((e,t)=>y.createElement(qM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:HX,tooltipPayloadSearcher:m_,categoricalChartProps:e,ref:t}));function KX(e){var t=Rt();return y.useEffect(()=>{t(dX(e))},[t,e]),null}var YX=["layout"];function xb(){return xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xb.apply(null,arguments)}function GX(e,t){if(e==null)return{};var r,n,i=VX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function VX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WX={top:5,right:5,bottom:5,left:5},zM={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:WX,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},XX=y.forwardRef(function(t,r){var n,i=br(t.categoricalChartProps,zM),{layout:s}=i,c=GX(i,YX),{chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p}=t,g={chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return y.createElement(TM,{preloadedState:{options:g},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:u},y.createElement(eM,{chartData:i.data}),y.createElement(PM,{layout:s,margin:i.margin}),y.createElement(MM,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(KX,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),y.createElement(RM,xb({},c,{ref:r})))});function IA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IA(Object(r),!0).forEach(function(n){ZX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZX(e,t,r){return(t=QX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QX(e){var t=JX(e,"string");return typeof t=="symbol"?t:t+""}function JX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eZ=["item"],tZ=UA(UA({},zM),{},{layout:"centric",startAngle:0,endAngle:360}),rZ=y.forwardRef((e,t)=>{var r=br(e,tZ);return y.createElement(XX,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:eZ,tooltipPayloadSearcher:m_,categoricalChartProps:r,ref:t})});function nZ({project:e,companyId:t,onBack:r}){const[n,i]=y.useState(!0),[s,c]=y.useState("week"),[u,m]=y.useState({areas:[],tickets:[],crewHistory:[],disposalLoads:[],dailyReports:[]});y.useEffect(()=>{e?.id&&h()},[e?.id,s]);const h=async()=>{i(!0);try{const C=new Date,A=new Date;s==="week"?A.setDate(C.getDate()-7):A.setDate(C.getDate()-30);const k=A.toISOString().split("T")[0],D=s==="week"?7:30,[M,L,X,ne]=await Promise.all([be.getAreas(e.id),be.getTMTickets?.(e.id)||[],be.getDisposalLoadsHistory?.(e.id,D)||[],be.getDailyReports?.(e.id)||[]]),ae=[],G=new Date(A);for(;G<=C;){const B=G.toISOString().split("T")[0];try{const ce=await be.getCrewCheckin(e.id,B);ae.push({date:B,count:ce?.workers?.length||0,dayName:G.toLocaleDateString("en-US",{weekday:"short"})})}catch{ae.push({date:B,count:0,dayName:G.toLocaleDateString("en-US",{weekday:"short"})})}G.setDate(G.getDate()+1)}m({areas:M,tickets:L.filter(B=>B.work_date>=k),crewHistory:ae,disposalLoads:X,dailyReports:ne.filter(B=>B.report_date>=k)})}catch(C){console.error("Error loading metrics:",C)}finally{i(!1)}},p=y.useRef(null),g=y.useCallback(()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{h()},300)},[e?.id,s]);y.useEffect(()=>{if(!e?.id)return;const C=[],A=be.subscribeToAreas?.(e.id,g);A&&C.push(A);const k=be.subscribeToCrewCheckins?.(e.id,g);k&&C.push(k);const D=be.subscribeToTMTickets?.(e.id,g);D&&C.push(D);const M=be.subscribeToHaulOffs?.(e.id,g);M&&C.push(M);const L=be.subscribeToDailyReports?.(e.id,g);return L&&C.push(L),()=>{p.current&&clearTimeout(p.current),C.forEach(X=>be.unsubscribe?.(X))}},[e?.id,g]);const _=y.useMemo(()=>{const{areas:C,tickets:A,crewHistory:k,disposalLoads:D,dailyReports:M}=u,L=C.length,X=C.filter(H=>H.status==="done").length,ne=C.filter(H=>H.status==="working").length,ae=C.filter(H=>H.status==="not_started").length,G=L>0?Math.round(X/L*100):0,B=k.reduce((H,Se)=>H+Se.count,0),ce=k.length>0&&Math.round(B/k.filter(H=>H.count>0).length*10)/10||0,ge=k.filter(H=>H.count>0).length,q=A.filter(H=>H.status==="pending"||H.status==="draft").length,R=A.filter(H=>H.status==="signed"||H.status==="approved").length,I=A.reduce((H,Se)=>H+(Se.total_amount||0),0),ee=D.reduce((H,Se)=>H+(Se.load_count||0),0),U=0,me=M.filter(H=>H.submitted).length,je=s==="week"?7:30,J=x(M);return{progress:{totalAreas:L,completedAreas:X,inProgressAreas:ne,notStartedAreas:ae,progressPercent:G},crew:{totalManDays:B,avgCrewSize:ce,daysWithCrew:ge,history:k},tickets:{total:A.length,pending:q,signed:R,totalValue:I},disposal:{totalLoads:ee,totalTonnage:U},reports:{submitted:me,due:je,streak:J}}},[u,s]);function x(C){if(!C.length)return 0;const A=[...new Set(C.filter(L=>L.submitted).map(L=>L.report_date))].sort().reverse();let k=0;const D=new Date().toISOString().split("T")[0];let M=new Date(D);for(let L=0;L<30;L++){const X=M.toISOString().split("T")[0];if(A.includes(X))k++,M.setDate(M.getDate()-1);else break}return k}const w={primary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",muted:"#6b7280",purple:"#8b5cf6"},j=[w.success,w.primary,w.muted],S=[{name:"Completed",value:_.progress.completedAreas},{name:"In Progress",value:_.progress.inProgressAreas},{name:"Not Started",value:_.progress.notStartedAreas}].filter(C=>C.value>0),O=y.useMemo(()=>{const C={};return u.tickets.forEach(A=>{const k=A.work_date;C[k]=(C[k]||0)+1}),_.crew.history.map(A=>({...A,tickets:C[A.date]||0}))},[u.tickets,_.crew.history]);return n?f.jsxs("div",{className:"foreman-metrics loading",children:[f.jsxs("div",{className:"metrics-header",children:[f.jsxs("button",{className:"back-btn",onClick:r,children:[f.jsx(sr,{size:20}),"Back"]}),f.jsx("h2",{children:"Project Metrics"})]}),f.jsxs("div",{className:"loading-state",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:"Loading metrics..."})]})]}):f.jsxs("div",{className:"foreman-metrics",children:[f.jsxs("div",{className:"metrics-header",children:[f.jsxs("button",{className:"back-btn",onClick:r,children:[f.jsx(sr,{size:20}),"Back"]}),f.jsx("h2",{children:"Project Metrics"}),f.jsxs("div",{className:"time-toggle",children:[f.jsx("button",{className:s==="week"?"active":"",onClick:()=>c("week"),children:"7 Days"}),f.jsx("button",{className:s==="month"?"active":"",onClick:()=>c("month"),children:"30 Days"})]})]}),f.jsxs("div",{className:"summary-cards",children:[f.jsxs("div",{className:"summary-card progress-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(XA,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsxs("span",{className:"card-value",children:[_.progress.progressPercent,"%"]}),f.jsx("span",{className:"card-label",children:"Complete"})]}),f.jsxs("div",{className:"card-detail",children:[_.progress.completedAreas,"/",_.progress.totalAreas," areas"]})]}),f.jsxs("div",{className:"summary-card crew-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(ZA,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.crew.totalManDays}),f.jsx("span",{className:"card-label",children:"Man-Days"})]}),f.jsxs("div",{className:"card-detail",children:["Avg ",_.crew.avgCrewSize," workers/day"]})]}),f.jsxs("div",{className:"summary-card tickets-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(Ho,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.tickets.total}),f.jsx("span",{className:"card-label",children:"T&M Tickets"})]}),f.jsxs("div",{className:"card-detail",children:[_.tickets.signed," signed, ",_.tickets.pending," pending"]})]}),f.jsxs("div",{className:"summary-card disposal-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(uf,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.disposal.totalLoads}),f.jsx("span",{className:"card-label",children:"Disposal Loads"})]}),f.jsxs("div",{className:"card-detail",children:[_.disposal.totalTonnage.toFixed(1)," tons"]})]})]}),f.jsxs("div",{className:"charts-grid",children:[f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"Area Progress"}),S.length>0?f.jsx(Ov,{width:"100%",height:200,children:f.jsxs(rZ,{children:[f.jsx(ZP,{data:S,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",label:({name:C,value:A})=>`${C}: ${A}`,labelLine:!1,children:S.map((C,A)=>f.jsx(cu,{fill:j[A%j.length]},`cell-${A}`))}),f.jsx(Fv,{})]})}):f.jsx("div",{className:"no-data",children:"No area data"})]}),f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"Daily Crew Size"}),f.jsx(Ov,{width:"100%",height:200,children:f.jsxs(FX,{data:_.crew.history,children:[f.jsx(fb,{strokeDasharray:"3 3",opacity:.3}),f.jsx(gb,{dataKey:"dayName",tick:{fontSize:12}}),f.jsx(yb,{tick:{fontSize:12}}),f.jsx(Fv,{formatter:C=>[C,"Workers"],labelFormatter:C=>`Day: ${C}`}),f.jsx(_M,{dataKey:"count",fill:w.primary,radius:[4,4,0,0]})]})})]}),f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"T&M Tickets by Day"}),f.jsx(Ov,{width:"100%",height:200,children:f.jsxs($X,{data:O,children:[f.jsx(fb,{strokeDasharray:"3 3",opacity:.3}),f.jsx(gb,{dataKey:"dayName",tick:{fontSize:12}}),f.jsx(yb,{tick:{fontSize:12}}),f.jsx(Fv,{formatter:C=>[C,"Tickets"]}),f.jsx(gM,{type:"monotone",dataKey:"tickets",stroke:w.success,strokeWidth:2,dot:{fill:w.success,strokeWidth:2}})]})})]}),f.jsxs("div",{className:"chart-card activity-card",children:[f.jsx("h3",{children:"Activity Summary"}),f.jsxs("div",{className:"activity-list",children:[f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.success}20`,color:w.success},children:f.jsx(Wn,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Days with Crew"}),f.jsxs("span",{className:"activity-value",children:[_.crew.daysWithCrew," of ",s==="week"?7:30]})]})]}),f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.primary}20`,color:w.primary},children:f.jsx(hq,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Reports Submitted"}),f.jsx("span",{className:"activity-value",children:_.reports.submitted})]})]}),f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.warning}20`,color:w.warning},children:f.jsx(Po,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Report Streak"}),f.jsxs("span",{className:"activity-value",children:[_.reports.streak," days"]})]})]}),_.tickets.totalValue>0&&f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.purple}20`,color:w.purple},children:f.jsx(pq,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"T&M Value"}),f.jsxs("span",{className:"activity-value",children:["$",_.tickets.totalValue.toLocaleString()]})]})]})]})]})]}),f.jsx("style",{children:`
        .foreman-metrics {
          padding: 1rem;
          max-width: 100%;
          overflow-x: hidden;
        }

        .foreman-metrics.loading {
          min-height: 400px;
        }

        .loading-state {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 3rem;
          color: var(--text-secondary);
        }

        .metrics-header {
          display: flex;
          align-items: center;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
        }

        .metrics-header h2 {
          flex: 1;
          margin: 0;
          font-size: 1.25rem;
          color: var(--text-primary);
        }

        .back-btn {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: var(--bg-elevated);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          color: var(--text-primary);
          cursor: pointer;
          font-size: 0.875rem;
        }

        .back-btn:hover {
          background: var(--bg-tertiary);
        }

        .time-toggle {
          display: flex;
          background: var(--bg-elevated);
          border-radius: 8px;
          padding: 4px;
          gap: 4px;
        }

        .time-toggle button {
          padding: 0.5rem 1rem;
          border: none;
          background: transparent;
          border-radius: 6px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.875rem;
          transition: all 0.2s;
        }

        .time-toggle button.active {
          background: var(--primary-color, #3b82f6);
          color: white;
        }

        .summary-cards {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        @media (min-width: 640px) {
          .summary-cards {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        .summary-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .card-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .progress-card .card-icon {
          background: #dbeafe;
          color: #3b82f6;
        }

        .crew-card .card-icon {
          background: #dcfce7;
          color: #22c55e;
        }

        .tickets-card .card-icon {
          background: #fef3c7;
          color: #f59e0b;
        }

        .disposal-card .card-icon {
          background: #f3e8ff;
          color: #8b5cf6;
        }

        [data-theme="dark"] .progress-card .card-icon {
          background: #1e3a5f;
        }

        [data-theme="dark"] .crew-card .card-icon {
          background: #14532d;
        }

        [data-theme="dark"] .tickets-card .card-icon {
          background: #451a03;
        }

        [data-theme="dark"] .disposal-card .card-icon {
          background: #3b0764;
        }

        .card-content {
          display: flex;
          flex-direction: column;
        }

        .card-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: var(--text-primary);
          line-height: 1.2;
        }

        .card-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .card-detail {
          font-size: 0.75rem;
          color: var(--text-secondary);
          margin-top: auto;
        }

        .charts-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        @media (min-width: 640px) {
          .charts-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }

        .chart-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
        }

        .chart-card h3 {
          margin: 0 0 1rem 0;
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        .no-data {
          height: 200px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: var(--text-secondary);
          font-size: 0.875rem;
        }

        .activity-card {
          grid-column: 1 / -1;
        }

        @media (min-width: 640px) {
          .activity-card {
            grid-column: auto;
          }
        }

        .activity-list {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
        }

        .activity-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .activity-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .activity-info {
          display: flex;
          flex-direction: column;
          flex: 1;
        }

        .activity-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
        }

        .activity-value {
          font-size: 1rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        /* Recharts customization */
        .recharts-cartesian-grid-horizontal line,
        .recharts-cartesian-grid-vertical line {
          stroke: var(--border-color);
        }

        .recharts-text {
          fill: var(--text-secondary);
        }

        .recharts-tooltip-wrapper {
          outline: none;
        }

        .recharts-default-tooltip {
          background: var(--bg-card) !important;
          border: 1px solid var(--border-color) !important;
          border-radius: 8px !important;
        }

        .recharts-tooltip-label {
          color: var(--text-primary) !important;
        }

        .recharts-tooltip-item {
          color: var(--text-secondary) !important;
        }
      `})]})}const oy={crew:{id:"crew",label:"Crew Check-in",icon:ZA,description:"Log who's on site today"},tm:{id:"tm",label:"T&M Ticket",icon:Ho,description:"Create time & materials ticket"},report:{id:"report",label:"Daily Report",icon:WA,description:"Submit end-of-day report"},progress:{id:"progress",label:"Update Progress",icon:QA,description:"Mark tasks complete"},disposal:{id:"disposal",label:"Disposal Loads",icon:uf,description:"Log haul-off loads"},docs:{id:"docs",label:"Documents",icon:yq,description:"View project files"},metrics:{id:"metrics",label:"Project Metrics",icon:vq,description:"View charts & trends"},punchlist:{id:"punchlist",label:"Punch List",icon:gq,description:"View & resolve punch items"},injury:{id:"injury",label:"Report Injury",icon:om,description:"Log safety incident",isDanger:!0}},BA=["crew","tm","report","progress"],$A=e=>`fm_pinned_${e}`;function aZ({project:e,todayStatus:t,progress:r,areasWorking:n,areasDone:i,areasRemaining:s,punchListOpenCount:c,onNavigate:u,onShowToast:m}){const[h,p]=y.useState(()=>{try{const k=localStorage.getItem($A(e?.id));return k?JSON.parse(k):BA}catch{return BA}}),[g,_]=y.useState(!1),[x,w]=y.useState(!0);y.useEffect(()=>{if(e?.id)try{localStorage.setItem($A(e.id),JSON.stringify(h))}catch{}},[h,e?.id]);const j=y.useCallback(k=>{p(D=>D.includes(k)?D.length<=1?(m?.("Keep at least one pinned action","info"),D):D.filter(M=>M!==k):D.length>=5?(m?.("Maximum 5 pinned actions","info"),D):[...D,k])},[m]),S=y.useMemo(()=>Object.keys(oy).filter(k=>!h.includes(k)),[h]),O=y.useCallback(k=>{switch(k){case"crew":return{done:t.crewCheckedIn,badge:t.crewCheckedIn?`${t.crewCount} on site`:null,status:t.crewCheckedIn?"Done today":"Not started"};case"tm":return{done:!1,badge:t.tmTicketsToday>0?`${t.tmTicketsToday} today`:null,status:t.tmTicketsToday>0?`${t.tmTicketsToday} created`:"Create new"};case"report":return{done:t.dailyReportDone,badge:null,status:t.dailyReportDone?"Submitted":"Not submitted"};case"progress":return{done:s===0,badge:s>0?`${s} left`:null,status:`${r}% complete`};case"disposal":return{done:!1,badge:t.disposalLoadsToday>0?`${t.disposalLoadsToday} today`:null,status:t.disposalLoadsToday>0?`${t.disposalLoadsToday} logged`:"Log loads"};case"punchlist":return{done:c===0&&c!==void 0,badge:c>0?`${c} open`:null,status:c>0?`${c} items open`:"All clear"};default:return{done:!1,badge:null,status:null}}},[t,r,s]),C=k=>{const D=oy[k];if(!D)return null;const M=D.icon,L=O(k);return f.jsxs("div",{className:"fm-pinned-card-wrapper",children:[f.jsxs("button",{className:`fm-pinned-card ${L.done?"completed":""} ${D.isDanger?"danger":""}`,onClick:()=>!g&&u(k),disabled:g,children:[f.jsx("div",{className:"fm-pinned-icon",children:f.jsx(M,{size:28})}),f.jsx("span",{className:"fm-pinned-label",children:D.label}),L.badge&&!g&&f.jsx("span",{className:"fm-pinned-badge",children:L.badge}),L.done&&!g&&f.jsx("div",{className:"fm-pinned-check",children:f.jsx(Wn,{size:18})})]}),g&&f.jsx("button",{className:"fm-pin-toggle pinned",onClick:()=>j(k),"aria-label":`Unpin ${D.label}`,children:f.jsx(_q,{size:16})})]},k)},A=k=>{const D=oy[k];if(!D)return null;const M=D.icon,L=O(k);return f.jsxs("div",{className:"fm-action-row-wrapper",children:[f.jsxs("button",{className:`fm-action-row ${D.isDanger?"danger":""}`,onClick:()=>!g&&u(k),disabled:g,children:[f.jsx(M,{size:20}),f.jsx("span",{className:"fm-action-label",children:D.label}),L.badge&&!g&&f.jsx("span",{className:"fm-action-badge",children:L.badge})]}),g&&f.jsx("button",{className:"fm-pin-toggle",onClick:()=>j(k),"aria-label":`Pin ${D.label}`,children:f.jsx(xq,{size:16})})]},k)};return f.jsxs("div",{className:"fm-landing",children:[f.jsxs("button",{className:"fm-metrics-snapshot",onClick:()=>u("metrics"),"aria-label":"View full project metrics",children:[f.jsxs("div",{className:"fm-snapshot-header",children:[f.jsx(XA,{size:18}),f.jsx("span",{children:"Project Overview"}),f.jsx(df,{size:16,className:"fm-snapshot-arrow"})]}),f.jsxs("div",{className:"fm-snapshot-stats",children:[f.jsxs("div",{className:"fm-snapshot-stat main",children:[f.jsxs("span",{className:"fm-snapshot-value",children:[r,"%"]}),f.jsx("span",{className:"fm-snapshot-label",children:"Complete"})]}),f.jsx("div",{className:"fm-snapshot-divider"}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:n}),f.jsx("span",{className:"fm-snapshot-label",children:"In Progress"})]}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:i}),f.jsx("span",{className:"fm-snapshot-label",children:"Done"})]}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:s}),f.jsx("span",{className:"fm-snapshot-label",children:"Remaining"})]})]}),t.crewCheckedIn&&f.jsxs("div",{className:"fm-snapshot-today",children:[f.jsx(Po,{size:14}),f.jsxs("span",{children:[t.crewCount," crew on site today"]})]})]}),f.jsxs("div",{className:"fm-section-header",children:[f.jsx("h2",{children:"Quick Actions"}),f.jsx("button",{className:`fm-edit-btn ${g?"active":""}`,onClick:()=>_(!g),"aria-label":g?"Done editing":"Customize actions",children:g?"Done":f.jsx(bq,{size:18})})]}),g&&f.jsx("p",{className:"fm-edit-hint",children:"Tap icons to pin/unpin actions"}),f.jsx("div",{className:"fm-pinned-grid",children:h.map(C)}),S.length>0&&f.jsxs("div",{className:"fm-more-section",children:[f.jsxs("button",{className:"fm-more-header",onClick:()=>w(!x),"aria-expanded":!x,children:[f.jsx("span",{children:"More Actions"}),x?f.jsx(df,{size:20}):f.jsx(VA,{size:20})]}),!x&&f.jsx("div",{className:"fm-more-content",children:S.map(A)})]}),f.jsx("style",{children:`
        .fm-landing {
          padding: 0 1rem 2rem;
        }

        /* Metrics Snapshot */
        .fm-metrics-snapshot {
          width: 100%;
          background: linear-gradient(135deg, var(--primary-color, #3b82f6) 0%, #2563eb 100%);
          border: none;
          border-radius: 16px;
          padding: 1rem;
          color: white;
          text-align: left;
          cursor: pointer;
          margin-bottom: 1.5rem;
          transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        .fm-metrics-snapshot:active {
          transform: scale(0.98);
        }

        .fm-snapshot-header {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          opacity: 0.9;
          margin-bottom: 0.75rem;
        }

        .fm-snapshot-arrow {
          margin-left: auto;
          opacity: 0.7;
        }

        .fm-snapshot-stats {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .fm-snapshot-stat {
          display: flex;
          flex-direction: column;
          align-items: center;
          flex: 1;
        }

        .fm-snapshot-stat.main {
          flex: 1.5;
          align-items: flex-start;
        }

        .fm-snapshot-value {
          font-size: 1.5rem;
          font-weight: 700;
          line-height: 1.2;
        }

        .fm-snapshot-stat.main .fm-snapshot-value {
          font-size: 2rem;
        }

        .fm-snapshot-label {
          font-size: 0.7rem;
          opacity: 0.85;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .fm-snapshot-divider {
          width: 1px;
          height: 40px;
          background: rgba(255,255,255,0.3);
        }

        .fm-snapshot-today {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-top: 0.75rem;
          padding-top: 0.75rem;
          border-top: 1px solid rgba(255,255,255,0.2);
          font-size: 0.8rem;
          opacity: 0.9;
        }

        /* Section Header */
        .fm-section-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.75rem;
        }

        .fm-section-header h2 {
          font-size: 1rem;
          font-weight: 600;
          color: var(--text-primary);
          margin: 0;
        }

        .fm-edit-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0.5rem;
          background: var(--bg-elevated);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.8rem;
          min-width: 36px;
          min-height: 36px;
          transition: all 0.15s ease;
        }

        .fm-edit-btn.active {
          background: var(--primary-color, #3b82f6);
          border-color: var(--primary-color, #3b82f6);
          color: white;
          padding: 0.5rem 1rem;
        }

        .fm-edit-hint {
          font-size: 0.8rem;
          color: var(--text-secondary);
          margin: 0 0 0.75rem;
          text-align: center;
        }

        /* Pinned Actions Grid */
        .fm-pinned-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 0.75rem;
          margin-bottom: 1.5rem;
        }

        .fm-pinned-card-wrapper {
          position: relative;
        }

        .fm-pinned-card {
          width: 100%;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 1.25rem 1rem;
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          cursor: pointer;
          transition: all 0.15s ease;
          min-height: 110px;
          position: relative;
        }

        .fm-pinned-card:active:not(:disabled) {
          transform: scale(0.97);
          background: var(--bg-elevated);
        }

        .fm-pinned-card:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-pinned-card.completed {
          border-color: #22c55e;
          background: rgba(34, 197, 94, 0.08);
        }

        .fm-pinned-card.danger {
          border-color: #f59e0b;
        }

        .fm-pinned-card.danger .fm-pinned-icon {
          color: #f59e0b;
        }

        .fm-pinned-icon {
          color: var(--primary-color, #3b82f6);
          margin-bottom: 0.5rem;
        }

        .fm-pinned-label {
          font-size: 0.875rem;
          font-weight: 500;
          color: var(--text-primary);
          text-align: center;
        }

        .fm-pinned-badge {
          position: absolute;
          top: 8px;
          right: 8px;
          background: var(--primary-color, #3b82f6);
          color: white;
          font-size: 0.7rem;
          font-weight: 600;
          padding: 0.2rem 0.5rem;
          border-radius: 10px;
        }

        .fm-pinned-check {
          position: absolute;
          top: 8px;
          right: 8px;
          color: #22c55e;
        }

        .fm-pin-toggle {
          position: absolute;
          top: -8px;
          right: -8px;
          width: 28px;
          height: 28px;
          border-radius: 50%;
          background: var(--bg-card);
          border: 2px solid var(--border-color);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          color: var(--text-secondary);
          transition: all 0.15s ease;
          z-index: 10;
        }

        .fm-pin-toggle:hover {
          background: var(--bg-elevated);
        }

        .fm-pin-toggle.pinned {
          background: #ef4444;
          border-color: #ef4444;
          color: white;
        }

        /* More Actions Section */
        .fm-more-section {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          overflow: hidden;
        }

        .fm-more-header {
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 1rem;
          background: transparent;
          border: none;
          cursor: pointer;
          font-size: 0.9rem;
          font-weight: 500;
          color: var(--text-primary);
        }

        .fm-more-header:active {
          background: var(--bg-elevated);
        }

        .fm-more-content {
          border-top: 1px solid var(--border-color);
        }

        .fm-action-row-wrapper {
          position: relative;
          display: flex;
          align-items: center;
        }

        .fm-action-row-wrapper .fm-pin-toggle {
          position: static;
          margin-right: 0.75rem;
          flex-shrink: 0;
        }

        .fm-action-row {
          flex: 1;
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 1rem;
          background: transparent;
          border: none;
          border-bottom: 1px solid var(--border-color);
          cursor: pointer;
          text-align: left;
          color: var(--text-primary);
          transition: background 0.15s ease;
        }

        .fm-action-row:last-child {
          border-bottom: none;
        }

        .fm-action-row:active:not(:disabled) {
          background: var(--bg-elevated);
        }

        .fm-action-row:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-action-row.danger {
          color: #f59e0b;
        }

        .fm-action-label {
          flex: 1;
          font-size: 0.9rem;
        }

        .fm-action-badge {
          font-size: 0.75rem;
          color: var(--text-secondary);
          background: var(--bg-elevated);
          padding: 0.25rem 0.5rem;
          border-radius: 6px;
        }

        /* Dark mode adjustments */
        [data-theme="dark"] .fm-metrics-snapshot {
          background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
        }

        [data-theme="dark"] .fm-pinned-card.completed {
          background: rgba(34, 197, 94, 0.15);
        }
      `})]})}const sy=[{value:"high",label:"High",color:"#ef4444"},{value:"medium",label:"Medium",color:"#f59e0b"},{value:"low",label:"Low",color:"#6b7280"}],ly=[{value:"open",label:"Open",icon:jq,color:"#ef4444"},{value:"in_progress",label:"In Progress",icon:Po,color:"#f59e0b"},{value:"complete",label:"Complete",icon:Wn,color:"#10b981"}];function LM({projectId:e,areas:t=[],companyId:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState(!0),[m,h]=y.useState(!1),[p,g]=y.useState(null),[_,x]=y.useState("all"),[w,j]=y.useState("all"),[S,O]=y.useState(!1),[C,A]=y.useState({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),k=y.useCallback(async()=>{if(!e||!P){u(!1);return}try{const q=Ii(),{data:R,error:I}=await q.from("punch_list_items").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(I)throw I;s(R||[])}catch(q){console.error("Error loading punch list:",q),s([])}finally{u(!1)}},[e]);y.useEffect(()=>{k()},[k]),y.useEffect(()=>{if(!e||!P)return;const q=T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},()=>k()).subscribe();return()=>{T.removeChannel(q)}},[e,k]);const D=y.useMemo(()=>i.filter(q=>!(_!=="all"&&q.status!==_||w!=="all"&&q.area_id!==w)),[i,_,w]),M=y.useMemo(()=>{const q=i.filter(ee=>ee.status==="open").length,R=i.filter(ee=>ee.status==="in_progress").length,I=i.filter(ee=>ee.status==="complete").length;return{open:q,inProgress:R,complete:I,total:i.length}},[i]),L=()=>{A({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),g(null),h(!1)},X=async q=>{if(q.preventDefault(),!C.description.trim()){n?.("Please enter a description","error");return}O(!0);try{const R=Ii();if(p){const{error:I}=await R.from("punch_list_items").update({description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,updated_at:new Date().toISOString()}).eq("id",p.id);if(I)throw I;n?.("Punch item updated","success")}else{const{error:I}=await R.from("punch_list_items").insert({project_id:e,company_id:r,description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,status:"open"});if(I)throw I;n?.("Punch item added","success")}L(),k()}catch(R){console.error("Error saving punch item:",R),n?.(R.message||"Error saving item","error")}finally{O(!1)}},ne=async(q,R)=>{try{const I={status:R,updated_at:new Date().toISOString()};R==="complete"?I.completed_at=new Date().toISOString():I.completed_at=null;const{error:ee}=await Ii().from("punch_list_items").update(I).eq("id",q);if(ee)throw ee;k()}catch(I){console.error("Error updating status:",I),n?.("Error updating status","error")}},ae=async q=>{if(confirm("Delete this punch item?"))try{const{error:R}=await Ii().from("punch_list_items").delete().eq("id",q);if(R)throw R;n?.("Item deleted","success"),k()}catch(R){console.error("Error deleting item:",R),n?.("Error deleting item","error")}},G=q=>{A({description:q.description,area_id:q.area_id||"",assigned_to:q.assigned_to||"",priority:q.priority||"medium",notes:q.notes||"",photo_url:q.photo_url||""}),g(q),h(!0)},B=q=>q&&t.find(I=>I.id===q)?.name||null,ce=q=>sy.find(R=>R.value===q)||sy[1],ge=q=>ly.find(R=>R.value===q)||ly[0];return f.jsxs("div",{className:"punch-list-card",children:[f.jsxs("div",{className:"punch-list-header",children:[f.jsxs("div",{className:"punch-list-title",children:[f.jsx(Wn,{size:18}),f.jsx("h3",{children:"Punch List"}),M.total>0&&f.jsxs("span",{className:"punch-stats-inline",children:[f.jsxs("span",{className:"punch-stat-open",children:[M.open," open"]}),M.inProgress>0&&f.jsxs("span",{className:"punch-stat-progress",children:[M.inProgress," in progress"]}),f.jsxs("span",{className:"punch-stat-complete",children:[M.complete,"/",M.total," complete"]})]})]}),f.jsxs("button",{className:"punch-add-btn",onClick:()=>{L(),h(!0)},children:[f.jsx(Zd,{size:16}),"Add Item"]})]}),M.total>0&&f.jsxs("div",{className:"punch-progress-bar",children:[f.jsx("div",{className:"punch-progress-fill",style:{width:`${M.complete/M.total*100}%`}}),f.jsxs("span",{className:"punch-progress-label",children:[Math.round(M.complete/M.total*100),"% complete"]})]}),M.total>0&&f.jsxs("div",{className:"punch-filters",children:[f.jsxs("div",{className:"punch-filter-group",children:[f.jsx(wq,{size:14}),f.jsxs("select",{value:_,onChange:q=>x(q.target.value),className:"punch-filter-select",children:[f.jsx("option",{value:"all",children:"All Status"}),ly.map(q=>f.jsx("option",{value:q.value,children:q.label},q.value))]})]}),t.length>0&&f.jsxs("div",{className:"punch-filter-group",children:[f.jsx(uy,{size:14}),f.jsxs("select",{value:w,onChange:q=>j(q.target.value),className:"punch-filter-select",children:[f.jsx("option",{value:"all",children:"All Areas"}),t.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]})]}),m&&f.jsxs("form",{className:"punch-form",onSubmit:X,children:[f.jsxs("div",{className:"punch-form-header",children:[f.jsx("h4",{children:p?"Edit Item":"New Punch Item"}),f.jsx("button",{type:"button",className:"punch-form-close",onClick:L,children:f.jsx(wb,{size:16})})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Description *"}),f.jsx("textarea",{value:C.description,onChange:q=>A(R=>({...R,description:q.target.value})),placeholder:"What needs to be fixed or completed?",rows:2,required:!0})]}),f.jsxs("div",{className:"punch-form-row",children:[f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Area"}),f.jsxs("select",{value:C.area_id,onChange:q=>A(R=>({...R,area_id:q.target.value})),children:[f.jsx("option",{value:"",children:"No area"}),t.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Assigned To"}),f.jsx("input",{type:"text",value:C.assigned_to,onChange:q=>A(R=>({...R,assigned_to:q.target.value})),placeholder:"Name or company"})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Priority"}),f.jsx("select",{value:C.priority,onChange:q=>A(R=>({...R,priority:q.target.value})),children:sy.map(q=>f.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Notes"}),f.jsx("textarea",{value:C.notes,onChange:q=>A(R=>({...R,notes:q.target.value})),placeholder:"Additional details...",rows:2})]}),f.jsxs("div",{className:"punch-form-actions",children:[f.jsx("button",{type:"button",className:"punch-btn-cancel",onClick:L,children:"Cancel"}),f.jsxs("button",{type:"submit",className:"punch-btn-save",disabled:S,children:[f.jsx(Sq,{size:14}),S?"Saving...":p?"Update":"Add Item"]})]})]}),c?f.jsx("div",{className:"punch-loading",children:"Loading punch list..."}):D.length===0?f.jsxs("div",{className:"punch-empty",children:[f.jsx(Wn,{size:32,style:{opacity:.3}}),f.jsx("p",{children:i.length===0?"No punch items yet":"No items match filters"}),i.length===0&&f.jsx("span",{children:"Add items that need attention before project closeout"})]}):f.jsx("div",{className:"punch-items-list",children:D.map(q=>{const R=ge(q.status),I=ce(q.priority),ee=R.icon;return f.jsxs("div",{className:`punch-item punch-item-${q.status}`,children:[f.jsx("button",{className:"punch-item-status-btn",onClick:()=>{const U=q.status==="open"?"in_progress":q.status==="in_progress"?"complete":"open";ne(q.id,U)},title:`Click to change status (current: ${R.label})`,children:f.jsx(ee,{size:18,style:{color:R.color}})}),f.jsxs("div",{className:"punch-item-content",children:[f.jsxs("div",{className:"punch-item-top",children:[f.jsx("span",{className:`punch-item-desc ${q.status==="complete"?"completed":""}`,children:q.description}),f.jsx("div",{className:"punch-item-badges",children:f.jsx("span",{className:"punch-priority-badge",style:{color:I.color,borderColor:`${I.color}40`},children:I.label})})]}),f.jsxs("div",{className:"punch-item-meta",children:[B(q.area_id)&&f.jsxs("span",{className:"punch-meta-tag",children:[f.jsx(uy,{size:11}),B(q.area_id)]}),q.assigned_to&&f.jsxs("span",{className:"punch-meta-tag",children:[f.jsx(Eq,{size:11}),q.assigned_to]}),q.completed_at&&f.jsxs("span",{className:"punch-meta-tag completed",children:[f.jsx(Wn,{size:11}),"Done ",new Date(q.completed_at).toLocaleDateString()]})]}),q.notes&&f.jsx("div",{className:"punch-item-notes",children:q.notes})]}),f.jsxs("div",{className:"punch-item-actions",children:[f.jsx("button",{className:"punch-action-btn",onClick:()=>G(q),title:"Edit",children:f.jsx(bc,{size:14})}),f.jsx("button",{className:"punch-action-btn delete",onClick:()=>ae(q.id),title:"Delete",children:f.jsx(Oq,{size:14})})]})]},q.id)})})]})}const aQ=Object.freeze(Object.defineProperty({__proto__:null,default:LM},Symbol.toStringTag,{value:"Module"}));function iZ({project:e,companyId:t,foremanName:r,onShowToast:n,onExit:i}){const[s,c]=y.useState([]),[u,m]=y.useState(!0),[h,p]=y.useState(null),[g,_]=y.useState({}),[x,w]=y.useState("home"),[j,S]=y.useState(!1),[O,C]=y.useState(0),[A,k]=y.useState({crewCheckedIn:!1,crewCount:0,tmTicketsToday:0,dailyReportDone:!1,disposalLoadsToday:0}),[D,M]=y.useState(()=>typeof window<"u"?document.documentElement.getAttribute("data-theme")==="dark":!1);new Date().getHours(),y.useEffect(()=>{e?.id&&(G(),L(),X())},[e?.id]);const L=async()=>{try{const H=new Date().toISOString().split("T")[0],Te=(await be.getCrewCheckin(e.id,H))?.workers||[],Ue=Te.length>0,Ie=(await be.getTMTickets?.(e.id)||[]).filter(Ee=>Ee.work_date===H),Q=await be.getDisposalLoads?.(e.id,H)||[];k({crewCheckedIn:Ue,crewCount:Te.length,tmTicketsToday:Ie.length,dailyReportDone:!1,disposalLoadsToday:Q.reduce((Ee,xe)=>Ee+(xe.load_count||1),0)})}catch(H){console.error("Error loading today status:",H)}},X=async()=>{if(!(!e?.id||!P))try{const{count:H}=await Ii().from("punch_list_items").select("*",{count:"exact",head:!0}).eq("project_id",e.id).eq("status","open");C(H||0)}catch{}},ne=y.useRef(null),ae=y.useCallback(()=>{ne.current&&clearTimeout(ne.current),ne.current=setTimeout(()=>{G(),L()},300)},[e?.id]);y.useEffect(()=>{if(!e?.id)return;const H=[],Se=be.subscribeToAreas?.(e.id,ae);Se&&H.push(Se);const Te=be.subscribeToCrewCheckins?.(e.id,ae);Te&&H.push(Te);const Ue=be.subscribeToTMTickets?.(e.id,ae);Ue&&H.push(Ue);const pe=be.subscribeToHaulOffs?.(e.id,ae);pe&&H.push(pe);const Ie=be.subscribeToDailyReports?.(e.id,ae);Ie&&H.push(Ie);const Q=be.subscribeToCORs?.(e.id,ae);Q&&H.push(Q);const Ee=be.subscribeToMaterialRequests?.(e.id,ae);Ee&&H.push(Ee);const xe=be.subscribeToProject?.(e.id,ae);xe&&H.push(xe);const ie=be.subscribeToPunchList?.(e.id,()=>{X(),ae()});if(ie&&H.push(ie),t){const Be=be.subscribeToMaterialsEquipment?.(t,ae);Be&&H.push(Be);const ve=be.subscribeToLaborRates?.(t,ae);ve&&H.push(ve)}return()=>{ne.current&&clearTimeout(ne.current),H.forEach(Be=>be.unsubscribe?.(Be))}},[e?.id,ae]);const G=async()=>{try{const H=await be.getAreas(e.id);c(H);const Se=[...new Set(H.map(Ue=>Ue.group_name||"General"))],Te={};Se.forEach(Ue=>Te[Ue]=!1),_(Te)}catch(H){console.error("Error loading areas:",H),n?.("Error loading areas","error")}finally{m(!1)}},B=async(H,Se)=>{const Te=s.find(pe=>pe.id===H);if(!Te)return;const Ue=Te.status===Se?"not_started":Se;p(H);try{await be.updateAreaStatus(H,Ue),c(pe=>pe.map(Ie=>Ie.id===H?{...Ie,status:Ue}:Ie))}catch(pe){console.error("Error updating status:",pe),n?.("Error updating","error")}finally{p(null)}},ce=H=>{_(Se=>({...Se,[H]:!Se[H]}))},ge=()=>{const H=D?"light":"dark";document.documentElement.setAttribute("data-theme",H),localStorage.setItem("theme",H),M(!D)},q=LL(s),R=s.filter(H=>H.status==="done").length,I=s.filter(H=>H.status==="working").length,ee=s.length-R,U=s.reduce((H,Se)=>{const Te=Se.group_name||"General";return H[Te]||(H[Te]=[]),H[Te].push(Se),H},{}),me=Object.keys(U).length>1||Object.keys(U).length===1&&!U.General,je=H=>`${H.filter(Te=>Te.status==="done").length}/${H.length}`,J=y.useCallback(H=>{w(H)},[]);return x==="tm"?f.jsx("div",{className:"fm-view",children:f.jsx(QL,{project:e,companyId:t,onSubmit:()=>w("home"),onCancel:()=>w("home"),onShowToast:n})}):x==="report"?f.jsx(e3,{project:e,onShowToast:n,onClose:()=>w("home")}):x==="injury"?f.jsx("div",{className:"fm-view",children:f.jsx(t3,{project:e,companyId:t,onClose:()=>w("home"),onReportCreated:()=>{w("home"),n?.("Injury report submitted","success")}})}):x==="crew"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Crew Check-in"})]}),f.jsx(JL,{project:e,companyId:t,onShowToast:n})]}):x==="disposal"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Disposal Loads"})]}),f.jsx(n3,{project:e,date:new Date().toISOString().split("T")[0],onShowToast:n})]}):x==="docs"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Documents"})]}),f.jsx(o3,{projectId:e.id,onShowToast:n})]}):x==="metrics"?f.jsx(nZ,{project:e,companyId:t,onBack:()=>w("home")}):x==="punchlist"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>{w("home"),X()},children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Punch List"})]}),f.jsx(LM,{projectId:e.id,areas:s,companyId:t,onShowToast:n})]}):x==="progress"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Progress"}),f.jsxs("span",{className:"fm-subheader-badge",children:[q,"%"]})]}),f.jsx("div",{className:"fm-progress-content",children:u?f.jsxs("div",{className:"fm-loading",children:[f.jsx("div",{className:"spinner"}),f.jsx("span",{children:"Loading..."})]}):s.length===0?f.jsxs("div",{className:"fm-empty",children:[f.jsx(QA,{size:48}),f.jsx("h3",{children:"No tasks yet"}),f.jsx("p",{children:"Office will add tasks to this project"})]}):me?Object.entries(U).map(([H,Se])=>f.jsxs("div",{className:"fm-group",children:[f.jsxs("button",{className:"fm-group-header",onClick:()=>ce(H),children:[f.jsxs("div",{className:"fm-group-left",children:[g[H]?f.jsx(df,{size:18}):f.jsx(yc,{size:18}),f.jsx("span",{children:H})]}),f.jsx("span",{className:"fm-group-count",children:je(Se)})]}),g[H]&&f.jsx("div",{className:"fm-group-items",children:Se.map(Te=>f.jsxs("div",{className:`fm-task ${Te.status}`,children:[f.jsx("span",{className:"fm-task-name",children:Te.name}),f.jsxs("div",{className:"fm-task-btns",children:[f.jsx("button",{className:`fm-status-btn working ${Te.status==="working"?"active":""}`,onClick:()=>B(Te.id,"working"),disabled:h===Te.id,children:f.jsx(Po,{size:14})}),f.jsx("button",{className:`fm-status-btn done ${Te.status==="done"?"active":""}`,onClick:()=>B(Te.id,"done"),disabled:h===Te.id,children:f.jsx(Wn,{size:14})})]})]},Te.id))})]},H)):f.jsx("div",{className:"fm-task-list",children:s.map(H=>f.jsxs("div",{className:`fm-task ${H.status}`,children:[f.jsx("span",{className:"fm-task-name",children:H.name}),f.jsxs("div",{className:"fm-task-btns",children:[f.jsx("button",{className:`fm-status-btn working ${H.status==="working"?"active":""}`,onClick:()=>B(H.id,"working"),disabled:h===H.id,children:f.jsx(Po,{size:14})}),f.jsx("button",{className:`fm-status-btn done ${H.status==="done"?"active":""}`,onClick:()=>B(H.id,"done"),disabled:h===H.id,children:f.jsx(Wn,{size:14})})]})]},H.id))})})]}):f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-header",children:[f.jsx("button",{className:"fm-exit",onClick:i,children:f.jsx(sr,{size:20})}),f.jsxs("div",{className:"fm-header-center",children:[f.jsx("h1",{className:"fm-project-name",children:e.name}),r&&f.jsx("span",{className:"fm-foreman-name",children:r}),f.jsx("button",{className:"fm-info-toggle",onClick:()=>S(!j),children:f.jsx(Cq,{size:16})})]}),f.jsx("button",{className:"fm-theme",onClick:ge,children:D?f.jsx(FA,{size:20}):f.jsx(KA,{size:20})})]}),j&&f.jsxs("div",{className:"fm-project-info",children:[e.job_number&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Job #"}),f.jsx("span",{children:e.job_number})]}),e.address&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Address"}),f.jsx("span",{children:e.address})]}),e.general_contractor&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"GC"}),f.jsx("span",{children:e.general_contractor})]}),e.client_phone&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Phone"}),f.jsx("a",{href:`tel:${e.client_phone}`,children:e.client_phone})]})]}),f.jsx(aZ,{project:e,todayStatus:A,progress:q,areasWorking:I,areasDone:R,areasRemaining:ee,punchListOpenCount:O,onNavigate:J,onShowToast:n})]})}const oZ=y.lazy(()=>Ja(()=>import("./Dashboard-CORJdl17.js").then(e=>e.D),__vite__mapDeps([6,3,1,2,7]))),sZ=y.lazy(()=>Ja(()=>import("./Setup-CqC2AejZ.js"),__vite__mapDeps([8,3,1,2,4]))),lZ=y.lazy(()=>Ja(()=>import("./BrandingSettings-B2bTlVgF.js"),__vite__mapDeps([9,1,2,3,4]))),cZ=y.lazy(()=>Ja(()=>import("./PricingManager-BvoKd7jc.js"),__vite__mapDeps([10,1,2,3,4]))),uZ=y.lazy(()=>Ja(()=>import("./PublicView-Bf4fyExW.js"),__vite__mapDeps([11,1,2,3,4]))),dZ=y.lazy(()=>Ja(()=>import("./SignaturePage-BBIQrUMA.js"),__vite__mapDeps([12,1,2,7,3,13,4]))),fZ=y.lazy(()=>Ja(()=>import("./MembershipManager-CbmY_8Tf.js"),__vite__mapDeps([14,1,2,3,4])));function P_(){return f.jsxs("div",{className:"page-loader",children:[f.jsx(zr,{className:"loading-logo"}),f.jsx("div",{className:"spinner"})]})}function mZ({pendingCompanyName:e,userName:t,onCheckStatus:r,onLogout:n}){const[i,s]=y.useState(!1);y.useEffect(()=>{const u=setInterval(()=>{r()},3e4);return()=>clearInterval(u)},[r]);const c=async()=>{s(!0),await r(),setTimeout(()=>s(!1),1e3)};return f.jsxs("div",{className:"pending-approval-screen",children:[f.jsx(zr,{className:"pending-logo"}),f.jsx("div",{className:"pending-pulse-ring",children:f.jsx("div",{className:"pending-pulse-dot"})}),f.jsx("h2",{children:"Awaiting Approval"}),e&&f.jsx("div",{className:"pending-company-name",children:e}),f.jsxs("p",{className:"pending-message",children:[t?`Hi ${t.split(" ")[0]}, your`:"Your"," membership request has been submitted. A company administrator will review and approve your access."]}),f.jsx("p",{className:"pending-auto-check",children:"We'll automatically check for updates"}),f.jsxs("div",{className:"pending-actions",children:[f.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Sign Out"}),f.jsx("button",{className:"btn btn-primary",onClick:c,disabled:i,children:i?"Checking...":"Check Status"})]})]})}function hZ(){const{token:e}=dN();return f.jsx(y.Suspense,{fallback:f.jsx(P_,{}),children:f.jsx(uZ,{shareToken:e})})}function pZ(){const{token:e}=dN();return f.jsx(y.Suspense,{fallback:f.jsx(P_,{}),children:f.jsx(dZ,{signatureToken:e})})}function gZ(){const e=Ob(),t=pa(),[r,n]=y.useState(null),[i,s]=y.useState(null),[c,u]=y.useState([]),[,m]=y.useState([]),[h,p]=y.useState(null),[g,_]=y.useState(""),[x,w]=y.useState(!0),[j,S]=y.useState(null),[O,C]=y.useState(!1),[A,k]=y.useState(!1),[D,M]=y.useState(null),[L,X]=y.useState(0),[ne,ae]=y.useState(!1),[G,B]=y.useState(null),[ce,ge]=y.useState(""),[q,R]=y.useState(!1),I=y.useCallback((ve,Ne="")=>{S({message:ve,type:Ne})},[]),ee=y.useCallback(async()=>{try{if(!P){w(!1);return}const{data:{user:ve}}=await T.auth.getUser();if(!ve){w(!1);return}const{data:Ne}=await T.from("users").select("*").eq("id",ve.id).single();if(Ne){n(Ne);let Me=await be.getUserCompanies(ve.id);if(Me.length===0&&Ne.company_id&&await be.repairLegacyUser(ve.id,Ne.company_id,Ne.role||"member")&&(Me=await be.getUserCompanies(ve.id)),u(Me),Me.length===0){if(await be.getUserPendingMemberships(ve.id)>0){try{const{data:_t}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",ve.id).eq("status","pending").limit(1);_t?.[0]?.companies?.name&&ge(_t[0].companies.name)}catch{}e("/pending",{replace:!0});return}S({message:"No company access. Join a company to continue.",type:"error"}),await rf.signOut();return}const Ct=localStorage.getItem("selectedCompanyId");let Re=null;if(Ct&&Me.find(It=>It.id===Ct)?Re=Me.find(It=>It.id===Ct):Me.length>0&&(Re=Me[0]),Re){const{data:It}=await T.from("companies").select("*").eq("id",Re.id).single();s(It),R(!0);const _t=t.pathname,At=_t.startsWith("/view/")||_t.startsWith("/sign/"),Cr=["/dashboard","/projects/new","/pricing","/branding","/team"].includes(_t);!At&&!Cr&&_t!=="/field"&&e("/dashboard",{replace:!0})}}}catch(ve){console.error("Auth check error:",ve)}finally{w(!1)}},[e,t.pathname]);y.useEffect(()=>{const ve=t.pathname;ve.startsWith("/view/")||ve.startsWith("/sign/")?w(!1):ee()},[]),y.useEffect(()=>{if(!P)return;const{data:{subscription:ve}}=T.auth.onAuthStateChange(async Ne=>{if(Ne==="SIGNED_OUT"||Ne==="USER_DELETED"){const Me=t.pathname;if(Me.startsWith("/sign/")||Me.startsWith("/view/"))return;n(null),s(null),u([]),R(!1),e("/login",{replace:!0})}else if(Ne==="SIGNED_IN"&&!r){const Me=t.pathname;!Me.startsWith("/sign/")&&!Me.startsWith("/view/")&&ee()}});return()=>{ve?.unsubscribe()}},[r,ee,e,t.pathname]);const U=(ve,Ne="")=>{p(ve),_(Ne),e("/field")},me=async(ve,Ne)=>{try{await gy();const{data:Me,error:Ct}=await T.auth.signInWithPassword({email:ve,password:Ne});if(Ct){I(Ct.message||"Invalid credentials","error");return}const{data:Re,error:It}=await T.from("users").select("*").eq("id",Me.user.id).single();if(It){console.error("User fetch error:",It),I("Error loading profile","error");return}if(Re){n(Re);let _t=await be.getUserCompanies(Me.user.id);_t.length===0&&Re.company_id&&await be.repairLegacyUser(Me.user.id,Re.company_id,Re.role||"member")&&(_t=await be.getUserCompanies(Me.user.id)),u(_t);const At=localStorage.getItem("selectedCompanyId");let Cr=null;if(At&&_t.find(jt=>jt.id===At)?Cr=_t.find(jt=>jt.id===At):_t.length>0&&(Cr=_t[0]),Cr){const{data:jt}=await T.from("companies").select("*").eq("id",Cr.id).single();s(jt),R(!0);const{data:Ye}=await T.auth.mfa.listFactors(),$r=Ye?.totp?.find(bn=>bn.status==="verified");$r?(B($r.id),ae(!0)):e("/dashboard")}else if(await be.getUserPendingMemberships(Me.user.id)>0){try{const{data:Ye}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",Me.user.id).eq("status","pending").limit(1);Ye?.[0]?.companies?.name&&ge(Ye[0].companies.name)}catch{}e("/pending")}else I("No company access. Please contact admin.","error")}else I("Profile not found. Please contact admin.","error")}catch(Me){console.error("Login error:",Me),I("Login failed","error")}},je=async ve=>{try{const{data:Ne}=await T.from("companies").select("*").eq("id",ve).single();Ne&&(s(Ne),localStorage.setItem("selectedCompanyId",ve),C(!1),e("/dashboard"),I(`Switched to ${Ne.name}`,"success"))}catch(Ne){console.error("Switch company error:",Ne),I("Error switching company","error")}},J=async()=>{try{await rf.signOut(),n(null),s(null),u([]),R(!1),localStorage.removeItem("selectedCompanyId"),e("/login")}catch(ve){console.error("Logout error:",ve),I("Error signing out","error")}},H=async()=>{await gy(),p(null),_(""),e("/login")},Se=()=>{e("/dashboard"),i?.id&&Te()},Te=async()=>{if(i?.id)try{const ve=await be.getProjects(i.id);m(ve)}catch(ve){console.error("Error loading projects:",ve)}};y.useEffect(()=>{i?.id&&q&&(Te(),Ue())},[i?.id,q]);const Ue=async()=>{if(i?.id)try{const Ne=(await be.getCompanyMemberships(i.id)).filter(Me=>Me.status==="pending").length;X(Ne)}catch(ve){console.error("Error loading pending count:",ve)}},pe=y.useCallback(()=>{M(null)},[]),Ee=c.find(ve=>ve.id===i?.id)?.access_level==="administrator"||i?.owner_user_id===r?.id,xe=j&&f.jsx(NN,{message:j.message,type:j.type,onClose:()=>S(null)});if(x)return f.jsx(wg,{children:f.jsx(kd,{companyId:i?.id,children:f.jsxs("div",{className:"loading-screen",children:[f.jsx(zr,{className:"loading-logo"}),f.jsx("div",{className:"spinner"})]})})});if(ne)return f.jsx(wg,{children:f.jsxs(kd,{companyId:i?.id,children:[f.jsx(_o,{children:f.jsx(zL,{factorId:G,onVerified:()=>{ae(!1),e("/dashboard")},onCancel:async()=>{ae(!1),B(null),await rf.signOut(),n(null),s(null),u([]),R(!1),e("/login")}})}),xe]})});const ie=ve=>!r||!i||!q?f.jsx(bo,{to:"/login",replace:!0}):ve,Be=ve=>f.jsx(PL,{children:f.jsxs("div",{children:[!P&&f.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),f.jsx("nav",{className:"nav",children:f.jsxs("div",{className:"nav-content",children:[f.jsx(zr,{}),f.jsxs("div",{className:"nav-tabs nav-tabs-desktop",children:[f.jsx("button",{className:`nav-tab ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>e("/dashboard"),children:"Dashboard"}),f.jsx("button",{className:`nav-tab ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>e("/projects/new"),children:"+ New Project"}),f.jsx("button",{className:`nav-tab ${t.pathname==="/pricing"?"active":""}`,onClick:()=>e("/pricing"),children:"Pricing"}),Ee&&f.jsx("button",{className:`nav-tab ${t.pathname==="/branding"?"active":""}`,onClick:()=>e("/branding"),children:"Branding"}),Ee&&f.jsxs("button",{className:`nav-tab ${t.pathname==="/team"?"active":""}`,onClick:()=>e("/team"),children:["Team",L>0&&f.jsx("span",{className:"nav-tab-badge",children:L})]})]}),f.jsxs("div",{className:"nav-user nav-user-desktop",children:[f.jsx(FS,{compact:!0}),f.jsxs("div",{className:"mobile-menu",children:[f.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!A),"aria-label":"User menu",children:""}),A&&f.jsxs("div",{className:"mobile-menu-dropdown",children:[f.jsxs("div",{className:"mobile-menu-info",children:[f.jsx("div",{className:"mobile-menu-user",children:r?.name||r?.email}),i&&f.jsx("div",{className:"mobile-menu-company",children:i.name})]}),f.jsx("button",{className:"mobile-menu-logout",onClick:()=>{k(!1),J()},children:"Sign Out"})]})]}),c.length>1&&f.jsxs("div",{className:"company-switcher",children:[f.jsxs("button",{className:"company-switcher-btn",onClick:()=>C(!O),children:[i?.name||"Select Company",f.jsx("span",{className:"switcher-arrow",children:""})]}),O&&f.jsx("div",{className:"company-dropdown",children:c.map(Ne=>f.jsxs("button",{className:`company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>je(Ne.id),children:[Ne.name,Ne.id===i?.id&&f.jsx("span",{className:"check",children:""})]},Ne.id))})]}),c.length<=1&&i&&f.jsx("span",{className:"nav-company-name",children:i.name}),f.jsx("span",{className:"nav-user-name",children:r?.name||r?.email}),f.jsx("button",{className:"nav-logout",onClick:J,children:"Sign Out"})]}),f.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!0),"aria-label":"Open menu",children:f.jsxs("span",{className:"hamburger-icon",children:[f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{})]})})]})}),A&&f.jsx("div",{className:"mobile-drawer-overlay",onClick:()=>k(!1),children:f.jsxs("div",{className:"mobile-drawer",onClick:Ne=>Ne.stopPropagation(),children:[f.jsxs("div",{className:"mobile-drawer-header",children:[f.jsx(zr,{}),f.jsx("button",{className:"mobile-drawer-close",onClick:()=>k(!1),"aria-label":"Close menu",children:""})]}),f.jsxs("div",{className:"mobile-drawer-user",children:[f.jsx("div",{className:"mobile-user-avatar",children:(r?.name||r?.email||"U")[0].toUpperCase()}),f.jsxs("div",{className:"mobile-user-info",children:[f.jsx("span",{className:"mobile-user-name",children:r?.name||r?.email}),f.jsx("span",{className:"mobile-user-company",children:i?.name})]})]}),c.length>1&&f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Switch Company"}),f.jsx("div",{className:"mobile-company-list",children:c.map(Ne=>f.jsxs("button",{className:`mobile-company-option ${Ne.id===i?.id?"active":""}`,onClick:()=>{je(Ne.id),k(!1)},children:[f.jsx("span",{className:"mobile-company-name",children:Ne.name}),Ne.id===i?.id&&f.jsx("span",{className:"mobile-company-check",children:""})]},Ne.id))})]}),f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Navigation"}),f.jsxs("div",{className:"mobile-nav-list",children:[f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>{e("/dashboard"),k(!1)},children:"Dashboard"}),f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>{e("/projects/new"),k(!1)},children:"+ New Project"}),f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/pricing"?"active":""}`,onClick:()=>{e("/pricing"),k(!1)},children:"Pricing"}),Ee&&f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/branding"?"active":""}`,onClick:()=>{e("/branding"),k(!1)},children:"Branding"}),Ee&&f.jsxs("button",{className:`mobile-nav-item ${t.pathname==="/team"?"active":""}`,onClick:()=>{e("/team"),k(!1)},children:["Team",L>0&&f.jsx("span",{className:"mobile-nav-badge",children:L})]})]})]}),f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Appearance"}),f.jsx("div",{className:"mobile-theme-toggle",children:f.jsx(FS,{})})]}),f.jsx("div",{className:"mobile-drawer-footer",children:f.jsx("button",{className:"mobile-logout-btn",onClick:()=>{J(),k(!1)},children:"Sign Out"})})]})}),f.jsx(_o,{children:f.jsx(y.Suspense,{fallback:f.jsx(P_,{}),children:f.jsx("div",{className:"container",children:ve},i?.id)})}),f.jsx(KS,{}),xe,f.jsx(qL,{})]})});return f.jsx(wg,{children:f.jsx(kd,{companyId:i?.id,children:f.jsxs(Pz,{children:[f.jsx(dn,{path:"/view/:token",element:f.jsxs(_o,{children:[f.jsx(hZ,{}),xe]})}),f.jsx(dn,{path:"/sign/:token",element:f.jsxs(_o,{children:[f.jsx(pZ,{}),xe]})}),f.jsx(dn,{path:"/login",element:r&&i&&q?f.jsx(bo,{to:"/dashboard",replace:!0}):f.jsxs(_o,{children:[f.jsx(RL,{onForemanAccess:U,onOfficeLogin:me,onShowToast:I}),xe]})}),f.jsx(dn,{path:"/pending",element:f.jsxs(_o,{children:[f.jsx(mZ,{pendingCompanyName:ce,userName:r?.name,onCheckStatus:ee,onLogout:J}),xe]})}),f.jsx(dn,{path:"/field",element:h?f.jsxs(kd,{companyId:h.company_id,children:[f.jsx(_o,{children:f.jsx(iZ,{project:h,companyId:h.company_id,foremanName:g,onShowToast:I,onExit:H})}),f.jsx(KS,{}),xe]}):f.jsx(bo,{to:"/login",replace:!0})}),f.jsx(dn,{path:"/dashboard",element:ie(Be(f.jsx(oZ,{company:i,user:r,isAdmin:Ee,onShowToast:I,navigateToProjectId:D,onProjectNavigated:pe})))}),f.jsx(dn,{path:"/projects/new",element:ie(Be(f.jsx(sZ,{company:i,user:r,onProjectCreated:Se,onShowToast:I})))}),f.jsx(dn,{path:"/pricing",element:ie(Be(f.jsx(cZ,{company:i,onShowToast:I})))}),f.jsx(dn,{path:"/branding",element:ie(Be(f.jsx(lZ,{company:i,onShowToast:I})))}),f.jsx(dn,{path:"/team",element:ie(Ee?Be(f.jsx(fZ,{company:i,user:r,onShowToast:I})):f.jsx(bo,{to:"/dashboard",replace:!0}))}),f.jsx(dn,{path:"/",element:r&&i&&q?f.jsx(bo,{to:"/dashboard",replace:!0}):f.jsx(bo,{to:"/login",replace:!0})}),f.jsx(dn,{path:"*",element:f.jsx(bo,{to:"/",replace:!0})})]})})})}qq.createRoot(document.getElementById("root")).render(f.jsx(Aq.StrictMode,{children:f.jsx(nL,{children:f.jsx(gZ,{})})}));"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{setInterval(()=>{e.update().catch(t=>console.debug("[SW] Update check failed:",t.message))},3e5)}).catch(e=>{console.debug("[SW] Registration failed:",e.message)})}),navigator.serviceWorker.addEventListener("message",e=>{e.data?.type==="SW_UPDATED"&&(console.log("[App] Service worker updated, reloading for fresh assets..."),window.location.reload()),e.data?.type==="ASSET_NOT_FOUND"&&(console.warn("[App] Asset not found:",e.data.url,"- reloading..."),"caches"in window?caches.keys().then(t=>{t.forEach(r=>caches.delete(r))}).finally(()=>{window.location.reload()}):window.location.reload())}));export{XP as $,Ur as A,RF as B,EF as C,rr as D,zt as E,fa as F,Qn as G,YZ as H,W as I,Je as J,Ki as K,yr as L,Fi as M,m8 as N,qZ as O,Vo as P,Wo as Q,ab as R,MN as S,R0 as T,Vi as U,Hs as V,Gm as W,ah as X,S_ as Y,Qr as Z,VP as _,hm as a,w5 as a0,Zs as a1,j_ as a2,Ko as a3,U9 as a4,A_ as a5,E_ as a6,oV as a7,GP as a8,cM as a9,rZ as aA,ZP as aB,cu as aC,CL as aD,AL as aE,kL as aF,CZ as aG,UL as aH,t3 as aI,NN as aJ,T as aK,wZ as aL,$X as aM,gM as aN,jZ as aO,OZ as aP,IL as aQ,SZ as aR,EZ as aS,zr as aT,AZ as aU,o3 as aV,P as aW,xZ as aX,aQ as aY,FY as aa,pt as ab,gE as ac,Wc as ad,PZ as ae,Vc as af,Dt as ag,Mt as ah,p_ as ai,IP as aj,gn as ak,r0 as al,SY as am,Mm as an,qM as ao,m_ as ap,Ke as aq,be as ar,f as as,Ov as at,FX as au,fb as av,gb as aw,yb as ax,Fv as ay,_M as az,rk as b,ot as c,NZ as d,TZ as e,d4 as f,nD as g,aD as h,_N as i,ke as j,Rt as k,RZ as l,MZ as m,zI as n,QZ as o,JZ as p,Tr as q,br as r,kZ as s,eQ as t,De as u,ii as v,oi as w,Xm as x,Nm as y,GZ as z};
//# sourceMappingURL=index-DjUO-TZg.js.map
