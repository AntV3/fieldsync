const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SignatureLinkGenerator-DYhfqHgl.js","assets/icons-DMGr8_f4.js","assets/react-DXGY7bZi.js","assets/pdf-aQqpMATS.js","assets/supabase-VuevzHjS.js","assets/TMClientSignature-BrpIy0SU.js","assets/Dashboard-BOjW6Ixi.js","assets/corCalculations-vdJc_BOT.js","assets/Setup-BRIgrYsL.js","assets/BrandingSettings-B9YY2xa0.js","assets/PricingManager-DgKmgLQO.js","assets/PublicView-C6_x2TPn.js","assets/SignaturePage-Cc8lbkQN.js","assets/SignatureCanvas-CqmhUd5M.js","assets/MembershipManager-DdxclAoc.js"])))=>i.map(i=>d[i]);
import{r as y,H as To,B as KR,A as sr,C as yc,U as HA,a as YR,b as $i,E as GR,c as VR,S as FA,M as KA,T as om,D as YA,X as xb,d as GA,L as $s,F as Ho,e as Po,f as wb,g as WR,h as XR,i as cy,j as ZR,k as Wn,R as yS,P as bc,l as QR,W as JR,Z as eq,G as tq,m as rq,n as nq,o as uf,p as bS,q as Zd,s as aq,t as VA,u as df,v as WA,w as iq,x as oq,y as sq,z as lq,I as hc,J as cq,K as uq,N as dq,O as fq,Q as XA,V as ZA,Y as mq,_ as hq,$ as pq,a0 as vq,a1 as gq,a2 as QA,a3 as yq,a4 as bq,a5 as _q,a6 as xq,a7 as wq,a8 as _S,a9 as jq,aa as Sq,ab as Eq,ac as Oq,ad as Cq}from"./icons-DMGr8_f4.js";import{r as sm,b as JA,a as Qa}from"./react-DXGY7bZi.js";import{_ as Ja}from"./pdf-aQqpMATS.js";import{c as eN}from"./supabase-VuevzHjS.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var fv={exports:{}},ec={};var xS;function Aq(){if(xS)return ec;xS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,i,s){var c=null;if(s!==void 0&&(c=""+s),i.key!==void 0&&(c=""+i.key),"key"in i){s={};for(var u in i)u!=="key"&&(s[u]=i[u])}else s=i;return i=s.ref,{$$typeof:e,type:n,key:c,ref:i!==void 0?i:null,props:s}}return ec.Fragment=t,ec.jsx=r,ec.jsxs=r,ec}var wS;function Nq(){return wS||(wS=1,fv.exports=Aq()),fv.exports}var f=Nq(),mv={exports:{}},tc={},hv={exports:{}},pv={};var jS;function kq(){return jS||(jS=1,(function(e){function t(R,I){var ee=R.length;R.push(I);e:for(;0<ee;){var H=ee-1>>>1,se=R[H];if(0<i(se,I))R[H]=I,R[ee]=se,ee=H;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var I=R[0],ee=R.pop();if(ee!==I){R[0]=ee;e:for(var H=0,se=R.length,Se=se>>>1;H<Se;){var J=2*(H+1)-1,$=R[J],ge=J+1,Pe=R[ge];if(0>i($,ee))ge<se&&0>i(Pe,$)?(R[H]=Pe,R[ge]=ee,H=ge):(R[H]=$,R[J]=ee,H=J);else if(ge<se&&0>i(Pe,ee))R[H]=Pe,R[ge]=ee,H=ge;else break e}}return I}function i(R,I){var ee=R.sortIndex-I.sortIndex;return ee!==0?ee:R.id-I.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var c=Date,u=c.now();e.unstable_now=function(){return c.now()-u}}var m=[],h=[],p=1,v=null,_=3,x=!1,w=!1,j=!1,S=!1,O=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function k(R){for(var I=r(h);I!==null;){if(I.callback===null)n(h);else if(I.startTime<=R)n(h),I.sortIndex=I.expirationTime,t(m,I);else break;I=r(h)}}function D(R){if(j=!1,k(R),!w)if(r(m)!==null)w=!0,M||(M=!0,U());else{var I=r(h);I!==null&&q(D,I.startTime-R)}}var M=!1,L=-1,X=5,re=-1;function ae(){return S?!0:!(e.unstable_now()-re<X)}function G(){if(S=!1,M){var R=e.unstable_now();re=R;var I=!0;try{e:{w=!1,j&&(j=!1,C(L),L=-1),x=!0;var ee=_;try{t:{for(k(R),v=r(m);v!==null&&!(v.expirationTime>R&&ae());){var H=v.callback;if(typeof H=="function"){v.callback=null,_=v.priorityLevel;var se=H(v.expirationTime<=R);if(R=e.unstable_now(),typeof se=="function"){v.callback=se,k(R),I=!0;break t}v===r(m)&&n(m),k(R)}else n(m);v=r(m)}if(v!==null)I=!0;else{var Se=r(h);Se!==null&&q(D,Se.startTime-R),I=!1}}break e}finally{v=null,_=ee,x=!1}I=void 0}}finally{I?U():M=!1}}}var U;if(typeof A=="function")U=function(){A(G)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,ve=ue.port2;ue.port1.onmessage=G,U=function(){ve.postMessage(null)}}else U=function(){O(G,0)};function q(R,I){L=O(function(){R(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(R){switch(_){case 1:case 2:case 3:var I=3;break;default:I=_}var ee=_;_=I;try{return R()}finally{_=ee}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,I){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var ee=_;_=R;try{return I()}finally{_=ee}},e.unstable_scheduleCallback=function(R,I,ee){var H=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?H+ee:H):ee=H,R){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ee+se,R={id:p++,callback:I,priorityLevel:R,startTime:ee,expirationTime:se,sortIndex:-1},ee>H?(R.sortIndex=ee,t(h,R),r(m)===null&&R===r(h)&&(j?(C(L),L=-1):j=!0,q(D,ee-H))):(R.sortIndex=se,t(m,R),w||x||(w=!0,M||(M=!0,U()))),R},e.unstable_shouldYield=ae,e.unstable_wrapCallback=function(R){var I=_;return function(){var ee=_;_=I;try{return R.apply(this,arguments)}finally{_=ee}}}})(pv)),pv}var SS;function Dq(){return SS||(SS=1,hv.exports=kq()),hv.exports}var ES;function Tq(){if(ES)return tc;ES=1;var e=Dq(),t=sm(),r=JA();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var o=a,l=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(l=o.return),a=o.return;while(a)}return o.tag===3?l:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function m(a){if(s(a)!==a)throw Error(n(188))}function h(a){var o=a.alternate;if(!o){if(o=s(a),o===null)throw Error(n(188));return o!==a?null:a}for(var l=a,d=o;;){var g=l.return;if(g===null)break;var b=g.alternate;if(b===null){if(d=g.return,d!==null){l=d;continue}break}if(g.child===b.child){for(b=g.child;b;){if(b===l)return m(g),a;if(b===d)return m(g),o;b=b.sibling}throw Error(n(188))}if(l.return!==d.return)l=g,d=b;else{for(var E=!1,N=g.child;N;){if(N===l){E=!0,l=g,d=b;break}if(N===d){E=!0,d=g,l=b;break}N=N.sibling}if(!E){for(N=b.child;N;){if(N===l){E=!0,l=b,d=g;break}if(N===d){E=!0,d=b,l=g;break}N=N.sibling}if(!E)throw Error(n(189))}}if(l.alternate!==d)throw Error(n(190))}if(l.tag!==3)throw Error(n(188));return l.stateNode.current===l?a:o}function p(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=p(a),o!==null)return o;a=a.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),re=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:(a=G&&a[G]||a["@@iterator"],typeof a=="function"?a:null)}var ue=Symbol.for("react.client.reference");function ve(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ue?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case j:return"Fragment";case O:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case re:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case w:return"Portal";case A:return a.displayName||"Context";case C:return(a._context.displayName||"Context")+".Consumer";case k:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case L:return o=a.displayName||null,o!==null?o:ve(a.type)||"Memo";case X:o=a._payload,a=a._init;try{return ve(a(o))}catch{}}return null}var q=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},H=[],se=-1;function Se(a){return{current:a}}function J(a){0>se||(a.current=H[se],H[se]=null,se--)}function $(a,o){se++,H[se]=a.current,a.current=o}var ge=Se(null),Pe=Se(null),Le=Se(null),pe=Se(null);function ze(a,o){switch($(Le,o),$(Pe,a),$(ge,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?Bj(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=Bj(o),a=$j(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}J(ge),$(ge,a)}function Q(){J(ge),J(Pe),J(Le)}function Ee(a){a.memoizedState!==null&&$(pe,a);var o=ge.current,l=$j(o,a.type);o!==l&&($(Pe,a),$(ge,l))}function we(a){Pe.current===a&&(J(ge),J(Pe)),pe.current===a&&(J(pe),Xl._currentValue=ee)}var ie,Ue;function ye(a){if(ie===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);ie=o&&o[1]||"",Ue=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ie+a+Ue}var ke=!1;function Ce(a,o){if(!a||ke)return"";ke=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(te){var Z=te}Reflect.construct(a,[],fe)}else{try{fe.call()}catch(te){Z=te}a.call(fe.prototype)}}else{try{throw Error()}catch(te){Z=te}(fe=a())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),E=b[0],N=b[1];if(E&&N){var z=E.split(`
`),V=N.split(`
`);for(g=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;g<V.length&&!V[g].includes("DetermineComponentFrameRoot");)g++;if(d===z.length||g===V.length)for(d=z.length-1,g=V.length-1;1<=d&&0<=g&&z[d]!==V[g];)g--;for(;1<=d&&0<=g;d--,g--)if(z[d]!==V[g]){if(d!==1||g!==1)do if(d--,g--,0>g||z[d]!==V[g]){var oe=`
`+z[d].replace(" at new "," at ");return a.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",a.displayName)),oe}while(1<=d&&0<=g);break}}}finally{ke=!1,Error.prepareStackTrace=l}return(l=a?a.displayName||a.name:"")?ye(l):""}function Ct(a,o){switch(a.tag){case 26:case 27:case 5:return ye(a.type);case 16:return ye("Lazy");case 13:return a.child!==o&&o!==null?ye("Suspense Fallback"):ye("Suspense");case 19:return ye("SuspenseList");case 0:case 15:return Ce(a.type,!1);case 11:return Ce(a.type.render,!1);case 1:return Ce(a.type,!0);case 31:return ye("Activity");default:return""}}function Ie(a){try{var o="",l=null;do o+=Ct(a,l),l=a,a=a.return;while(a);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var It=Object.prototype.hasOwnProperty,_t=e.unstable_scheduleCallback,At=e.unstable_cancelCallback,Cr=e.unstable_shouldYield,jt=e.unstable_requestPaint,Ye=e.unstable_now,$r=e.unstable_getCurrentPriorityLevel,bn=e.unstable_ImmediatePriority,Pr=e.unstable_UserBlockingPriority,Ar=e.unstable_NormalPriority,me=e.unstable_LowPriority,st=e.unstable_IdlePriority,Jr=e.log,Mr=e.unstable_setDisableYieldValue,Rr=null,vt=null;function Ut(a){if(typeof Jr=="function"&&Mr(a),vt&&typeof vt.setStrictMode=="function")try{vt.setStrictMode(Rr,a)}catch{}}var xt=Math.clz32?Math.clz32:Zi,_n=Math.log,li=Math.LN2;function Zi(a){return a>>>=0,a===0?32:31-(_n(a)/li|0)|0}var ci=256,ui=262144,va=4194304;function xn(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function di(a,o,l){var d=a.pendingLanes;if(d===0)return 0;var g=0,b=a.suspendedLanes,E=a.pingedLanes;a=a.warmLanes;var N=d&134217727;return N!==0?(d=N&~b,d!==0?g=xn(d):(E&=N,E!==0?g=xn(E):l||(l=N&~a,l!==0&&(g=xn(l))))):(N=d&~b,N!==0?g=xn(N):E!==0?g=xn(E):l||(l=d&~a,l!==0&&(g=xn(l)))),g===0?0:o!==0&&o!==g&&(o&b)===0&&(b=g&-g,l=o&-o,b>=l||b===32&&(l&4194048)!==0)?o:g}function ga(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function ll(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function be(){var a=va;return va<<=1,(va&62914560)===0&&(va=4194304),a}function Un(a){for(var o=[],l=0;31>l;l++)o.push(a);return o}function ya(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function cl(a,o,l,d,g,b){var E=a.pendingLanes;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=l,a.entangledLanes&=l,a.errorRecoveryDisabledLanes&=l,a.shellSuspendCounter=0;var N=a.entanglements,z=a.expirationTimes,V=a.hiddenUpdates;for(l=E&~l;0<l;){var oe=31-xt(l),fe=1<<oe;N[oe]=0,z[oe]=-1;var Z=V[oe];if(Z!==null)for(V[oe]=null,oe=0;oe<Z.length;oe++){var te=Z[oe];te!==null&&(te.lane&=-536870913)}l&=~fe}d!==0&&du(a,d,0),b!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=b&~(E&~o))}function du(a,o,l){a.pendingLanes|=o,a.suspendedLanes&=~o;var d=31-xt(o);a.entangledLanes|=o,a.entanglements[d]=a.entanglements[d]|1073741824|l&261930}function fu(a,o){var l=a.entangledLanes|=o;for(a=a.entanglements;l;){var d=31-xt(l),g=1<<d;g&o|a[d]&o&&(a[d]|=o),l&=~g}}function Bn(a,o){var l=o&-o;return l=(l&42)!==0?1:ul(l),(l&(a.suspendedLanes|o))!==0?0:l}function ul(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function dl(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Qi(){var a=I.p;return a!==0?a:(a=window.event,a===void 0?32:dS(a.type))}function Ji(a,o){var l=I.p;try{return I.p=a,o()}finally{I.p=l}}var en=Math.random().toString(36).slice(2),Bt="__reactFiber$"+en,ar="__reactProps$"+en,ra="__reactContainer$"+en,eo="__reactEvents$"+en,mu="__reactListeners$"+en,Xo="__reactHandles$"+en,fl="__reactResources$"+en,Zo="__reactMarker$"+en;function Qo(a){delete a[Bt],delete a[ar],delete a[eo],delete a[mu],delete a[Xo]}function $n(a){var o=a[Bt];if(o)return o;for(var l=a.parentNode;l;){if(o=l[ra]||l[Bt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(a=Wj(a);a!==null;){if(l=a[Bt])return l;a=Wj(a)}return o}a=l,l=a.parentNode}return null}function fi(a){if(a=a[Bt]||a[ra]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function to(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function K(a){var o=a[fl];return o||(o=a[fl]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ce(a){a[Zo]=!0}var he=new Set,le={};function ne(a,o){je(a,o),je(a+"Capture",o)}function je(a,o){for(le[a]=o,a=0;a<o.length;a++)he.add(o[a])}var $e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Fe={},gt={};function at(a){return It.call(gt,a)?!0:It.call(Fe,a)?!1:$e.test(a)?gt[a]=!0:(Fe[a]=!0,!1)}function ir(a,o,l){if(at(o))if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+l)}}function hu(a,o,l){if(l===null)a.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+l)}}function ba(a,o,l,d){if(d===null)a.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(l);return}a.setAttributeNS(o,l,""+d)}}function wn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function P_(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function LM(a,o,l){var d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,b=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return g.call(this)},set:function(E){l=""+E,b.call(this,E)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function ih(a){if(!a._valueTracker){var o=P_(a)?"checked":"value";a._valueTracker=LM(a,o,""+a[o])}}function M_(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var l=o.getValue(),d="";return a&&(d=P_(a)?a.checked?"true":"false":a.value),a=d,a!==l?(o.setValue(a),!0):!1}function pu(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var IM=/[\n"\\]/g;function jn(a){return a.replace(IM,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function oh(a,o,l,d,g,b,E,N){a.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.type=E:a.removeAttribute("type"),o!=null?E==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+wn(o)):a.value!==""+wn(o)&&(a.value=""+wn(o)):E!=="submit"&&E!=="reset"||a.removeAttribute("value"),o!=null?sh(a,E,wn(o)):l!=null?sh(a,E,wn(l)):d!=null&&a.removeAttribute("value"),g==null&&b!=null&&(a.defaultChecked=!!b),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.name=""+wn(N):a.removeAttribute("name")}function R_(a,o,l,d,g,b,E,N){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(a.type=b),o!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||o!=null)){ih(a);return}l=l!=null?""+wn(l):"",o=o!=null?""+wn(o):l,N||o===a.value||(a.value=o),a.defaultValue=o}d=d??g,d=typeof d!="function"&&typeof d!="symbol"&&!!d,a.checked=N?a.checked:!!d,a.defaultChecked=!!d,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.name=E),ih(a)}function sh(a,o,l){o==="number"&&pu(a.ownerDocument)===a||a.defaultValue===""+l||(a.defaultValue=""+l)}function Jo(a,o,l,d){if(a=a.options,o){o={};for(var g=0;g<l.length;g++)o["$"+l[g]]=!0;for(l=0;l<a.length;l++)g=o.hasOwnProperty("$"+a[l].value),a[l].selected!==g&&(a[l].selected=g),g&&d&&(a[l].defaultSelected=!0)}else{for(l=""+wn(l),o=null,g=0;g<a.length;g++){if(a[g].value===l){a[g].selected=!0,d&&(a[g].defaultSelected=!0);return}o!==null||a[g].disabled||(o=a[g])}o!==null&&(o.selected=!0)}}function q_(a,o,l){if(o!=null&&(o=""+wn(o),o!==a.value&&(a.value=o),l==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=l!=null?""+wn(l):""}function z_(a,o,l,d){if(o==null){if(d!=null){if(l!=null)throw Error(n(92));if(q(d)){if(1<d.length)throw Error(n(93));d=d[0]}l=d}l==null&&(l=""),o=l}l=wn(o),a.defaultValue=l,d=a.textContent,d===l&&d!==""&&d!==null&&(a.value=d),ih(a)}function es(a,o){if(o){var l=a.firstChild;if(l&&l===a.lastChild&&l.nodeType===3){l.nodeValue=o;return}}a.textContent=o}var UM=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function L_(a,o,l){var d=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":d?a.setProperty(o,l):typeof l!="number"||l===0||UM.has(o)?o==="float"?a.cssFloat=l:a[o]=(""+l).trim():a[o]=l+"px"}function I_(a,o,l){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?a.setProperty(d,""):d==="float"?a.cssFloat="":a[d]="");for(var g in o)d=o[g],o.hasOwnProperty(g)&&l[g]!==d&&L_(a,g,d)}else for(var b in o)o.hasOwnProperty(b)&&L_(a,b,o[b])}function lh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BM=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$M=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vu(a){return $M.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function _a(){}var ch=null;function uh(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ts=null,rs=null;function U_(a){var o=fi(a);if(o&&(a=o.stateNode)){var l=a[ar]||null;e:switch(a=o.stateNode,o.type){case"input":if(oh(a,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=a;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+jn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var d=l[o];if(d!==a&&d.form===a.form){var g=d[ar]||null;if(!g)throw Error(n(90));oh(d,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<l.length;o++)d=l[o],d.form===a.form&&M_(d)}break e;case"textarea":q_(a,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Jo(a,!!l.multiple,o,!1)}}}var dh=!1;function B_(a,o,l){if(dh)return a(o,l);dh=!0;try{var d=a(o);return d}finally{if(dh=!1,(ts!==null||rs!==null)&&(nd(),ts&&(o=ts,a=rs,rs=ts=null,U_(o),a)))for(o=0;o<a.length;o++)U_(a[o])}}function ml(a,o){var l=a.stateNode;if(l===null)return null;var d=l[ar]||null;if(d===null)return null;l=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(a=a.type,d=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!d;break e;default:a=!1}if(a)return null;if(l&&typeof l!="function")throw Error(n(231,o,typeof l));return l}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fh=!1;if(xa)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){fh=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{fh=!1}var mi=null,mh=null,gu=null;function $_(){if(gu)return gu;var a,o=mh,l=o.length,d,g="value"in mi?mi.value:mi.textContent,b=g.length;for(a=0;a<l&&o[a]===g[a];a++);var E=l-a;for(d=1;d<=E&&o[l-d]===g[b-d];d++);return gu=g.slice(a,1<d?1-d:void 0)}function yu(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function bu(){return!0}function H_(){return!1}function Hr(a){function o(l,d,g,b,E){this._reactName=l,this._targetInst=g,this.type=d,this.nativeEvent=b,this.target=E,this.currentTarget=null;for(var N in a)a.hasOwnProperty(N)&&(l=a[N],this[N]=l?l(b):b[N]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?bu:H_,this.isPropagationStopped=H_,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bu)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bu)},persist:function(){},isPersistent:bu}),o}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_u=Hr(ro),pl=v({},ro,{view:0,detail:0}),HM=Hr(pl),hh,ph,vl,xu=v({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gh,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==vl&&(vl&&a.type==="mousemove"?(hh=a.screenX-vl.screenX,ph=a.screenY-vl.screenY):ph=hh=0,vl=a),hh)},movementY:function(a){return"movementY"in a?a.movementY:ph}}),F_=Hr(xu),FM=v({},xu,{dataTransfer:0}),KM=Hr(FM),YM=v({},pl,{relatedTarget:0}),vh=Hr(YM),GM=v({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),VM=Hr(GM),WM=v({},ro,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),XM=Hr(WM),ZM=v({},ro,{data:0}),K_=Hr(ZM),QM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t2(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=e2[a])?!!o[a]:!1}function gh(){return t2}var r2=v({},pl,{key:function(a){if(a.key){var o=QM[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=yu(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?JM[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gh,charCode:function(a){return a.type==="keypress"?yu(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?yu(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),n2=Hr(r2),a2=v({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y_=Hr(a2),i2=v({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gh}),o2=Hr(i2),s2=v({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),l2=Hr(s2),c2=v({},xu,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),u2=Hr(c2),d2=v({},ro,{newState:0,oldState:0}),f2=Hr(d2),m2=[9,13,27,32],yh=xa&&"CompositionEvent"in window,gl=null;xa&&"documentMode"in document&&(gl=document.documentMode);var h2=xa&&"TextEvent"in window&&!gl,G_=xa&&(!yh||gl&&8<gl&&11>=gl),V_=" ",W_=!1;function X_(a,o){switch(a){case"keyup":return m2.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z_(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ns=!1;function p2(a,o){switch(a){case"compositionend":return Z_(o);case"keypress":return o.which!==32?null:(W_=!0,V_);case"textInput":return a=o.data,a===V_&&W_?null:a;default:return null}}function v2(a,o){if(ns)return a==="compositionend"||!yh&&X_(a,o)?(a=$_(),gu=mh=mi=null,ns=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return G_&&o.locale!=="ko"?null:o.data;default:return null}}var g2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q_(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!g2[a.type]:o==="textarea"}function J_(a,o,l,d){ts?rs?rs.push(d):rs=[d]:ts=d,o=ud(o,"onChange"),0<o.length&&(l=new _u("onChange","change",null,l,d),a.push({event:l,listeners:o}))}var yl=null,bl=null;function y2(a){Rj(a,0)}function wu(a){var o=to(a);if(M_(o))return a}function ex(a,o){if(a==="change")return o}var tx=!1;if(xa){var bh;if(xa){var _h="oninput"in document;if(!_h){var rx=document.createElement("div");rx.setAttribute("oninput","return;"),_h=typeof rx.oninput=="function"}bh=_h}else bh=!1;tx=bh&&(!document.documentMode||9<document.documentMode)}function nx(){yl&&(yl.detachEvent("onpropertychange",ax),bl=yl=null)}function ax(a){if(a.propertyName==="value"&&wu(bl)){var o=[];J_(o,bl,a,uh(a)),B_(y2,o)}}function b2(a,o,l){a==="focusin"?(nx(),yl=o,bl=l,yl.attachEvent("onpropertychange",ax)):a==="focusout"&&nx()}function _2(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return wu(bl)}function x2(a,o){if(a==="click")return wu(o)}function w2(a,o){if(a==="input"||a==="change")return wu(o)}function j2(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var tn=typeof Object.is=="function"?Object.is:j2;function _l(a,o){if(tn(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var l=Object.keys(a),d=Object.keys(o);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var g=l[d];if(!It.call(o,g)||!tn(a[g],o[g]))return!1}return!0}function ix(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ox(a,o){var l=ix(a);a=0;for(var d;l;){if(l.nodeType===3){if(d=a+l.textContent.length,a<=o&&d>=o)return{node:l,offset:o-a};a=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ix(l)}}function sx(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?sx(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function lx(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=pu(a.document);o instanceof a.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)a=o.contentWindow;else break;o=pu(a.document)}return o}function xh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var S2=xa&&"documentMode"in document&&11>=document.documentMode,as=null,wh=null,xl=null,jh=!1;function cx(a,o,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jh||as==null||as!==pu(d)||(d=as,"selectionStart"in d&&xh(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),xl&&_l(xl,d)||(xl=d,d=ud(wh,"onSelect"),0<d.length&&(o=new _u("onSelect","select",null,o,l),a.push({event:o,listeners:d}),o.target=as)))}function no(a,o){var l={};return l[a.toLowerCase()]=o.toLowerCase(),l["Webkit"+a]="webkit"+o,l["Moz"+a]="moz"+o,l}var is={animationend:no("Animation","AnimationEnd"),animationiteration:no("Animation","AnimationIteration"),animationstart:no("Animation","AnimationStart"),transitionrun:no("Transition","TransitionRun"),transitionstart:no("Transition","TransitionStart"),transitioncancel:no("Transition","TransitionCancel"),transitionend:no("Transition","TransitionEnd")},Sh={},ux={};xa&&(ux=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function ao(a){if(Sh[a])return Sh[a];if(!is[a])return a;var o=is[a],l;for(l in o)if(o.hasOwnProperty(l)&&l in ux)return Sh[a]=o[l];return a}var dx=ao("animationend"),fx=ao("animationiteration"),mx=ao("animationstart"),E2=ao("transitionrun"),O2=ao("transitionstart"),C2=ao("transitioncancel"),hx=ao("transitionend"),px=new Map,Eh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Eh.push("scrollEnd");function Hn(a,o){px.set(a,o),ne(o,[a])}var ju=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Sn=[],os=0,Oh=0;function Su(){for(var a=os,o=Oh=os=0;o<a;){var l=Sn[o];Sn[o++]=null;var d=Sn[o];Sn[o++]=null;var g=Sn[o];Sn[o++]=null;var b=Sn[o];if(Sn[o++]=null,d!==null&&g!==null){var E=d.pending;E===null?g.next=g:(g.next=E.next,E.next=g),d.pending=g}b!==0&&vx(l,g,b)}}function Eu(a,o,l,d){Sn[os++]=a,Sn[os++]=o,Sn[os++]=l,Sn[os++]=d,Oh|=d,a.lanes|=d,a=a.alternate,a!==null&&(a.lanes|=d)}function Ch(a,o,l,d){return Eu(a,o,l,d),Ou(a)}function io(a,o){return Eu(a,null,null,o),Ou(a)}function vx(a,o,l){a.lanes|=l;var d=a.alternate;d!==null&&(d.lanes|=l);for(var g=!1,b=a.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(a=b.stateNode,a===null||a._visibility&1||(g=!0)),a=b,b=b.return;return a.tag===3?(b=a.stateNode,g&&o!==null&&(g=31-xt(l),a=b.hiddenUpdates,d=a[g],d===null?a[g]=[o]:d.push(o),o.lane=l|536870912),b):null}function Ou(a){if(50<Hl)throw Hl=0,qp=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ss={};function A2(a,o,l,d){this.tag=a,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(a,o,l,d){return new A2(a,o,l,d)}function Ah(a){return a=a.prototype,!(!a||!a.isReactComponent)}function wa(a,o){var l=a.alternate;return l===null?(l=rn(a.tag,o,a.key,a.mode),l.elementType=a.elementType,l.type=a.type,l.stateNode=a.stateNode,l.alternate=a,a.alternate=l):(l.pendingProps=o,l.type=a.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=a.flags&65011712,l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,o=a.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=a.sibling,l.index=a.index,l.ref=a.ref,l.refCleanup=a.refCleanup,l}function gx(a,o){a.flags&=65011714;var l=a.alternate;return l===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,o=l.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Cu(a,o,l,d,g,b){var E=0;if(d=a,typeof a=="function")Ah(a)&&(E=1);else if(typeof a=="string")E=PR(a,l,ge.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case re:return a=rn(31,l,o,g),a.elementType=re,a.lanes=b,a;case j:return oo(l.children,g,b,o);case S:E=8,g|=24;break;case O:return a=rn(12,l,o,g|2),a.elementType=O,a.lanes=b,a;case D:return a=rn(13,l,o,g),a.elementType=D,a.lanes=b,a;case M:return a=rn(19,l,o,g),a.elementType=M,a.lanes=b,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case A:E=10;break e;case C:E=9;break e;case k:E=11;break e;case L:E=14;break e;case X:E=16,d=null;break e}E=29,l=Error(n(130,a===null?"null":typeof a,"")),d=null}return o=rn(E,l,o,g),o.elementType=a,o.type=d,o.lanes=b,o}function oo(a,o,l,d){return a=rn(7,a,d,o),a.lanes=l,a}function Nh(a,o,l){return a=rn(6,a,null,o),a.lanes=l,a}function yx(a){var o=rn(18,null,null,0);return o.stateNode=a,o}function kh(a,o,l){return o=rn(4,a.children!==null?a.children:[],a.key,o),o.lanes=l,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var bx=new WeakMap;function En(a,o){if(typeof a=="object"&&a!==null){var l=bx.get(a);return l!==void 0?l:(o={value:a,source:o,stack:Ie(o)},bx.set(a,o),o)}return{value:a,source:o,stack:Ie(o)}}var ls=[],cs=0,Au=null,wl=0,On=[],Cn=0,hi=null,na=1,aa="";function ja(a,o){ls[cs++]=wl,ls[cs++]=Au,Au=a,wl=o}function _x(a,o,l){On[Cn++]=na,On[Cn++]=aa,On[Cn++]=hi,hi=a;var d=na;a=aa;var g=32-xt(d)-1;d&=~(1<<g),l+=1;var b=32-xt(o)+g;if(30<b){var E=g-g%5;b=(d&(1<<E)-1).toString(32),d>>=E,g-=E,na=1<<32-xt(o)+g|l<<g|d,aa=b+a}else na=1<<b|l<<g|d,aa=a}function Dh(a){a.return!==null&&(ja(a,1),_x(a,1,0))}function Th(a){for(;a===Au;)Au=ls[--cs],ls[cs]=null,wl=ls[--cs],ls[cs]=null;for(;a===hi;)hi=On[--Cn],On[Cn]=null,aa=On[--Cn],On[Cn]=null,na=On[--Cn],On[Cn]=null}function xx(a,o){On[Cn++]=na,On[Cn++]=aa,On[Cn++]=hi,na=o.id,aa=o.overflow,hi=a}var xr=null,St=null,Qe=!1,pi=null,An=!1,Ph=Error(n(519));function vi(a){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jl(En(o,a)),Ph}function wx(a){var o=a.stateNode,l=a.type,d=a.memoizedProps;switch(o[Bt]=a,o[ar]=d,l){case"dialog":We("cancel",o),We("close",o);break;case"iframe":case"object":case"embed":We("load",o);break;case"video":case"audio":for(l=0;l<Kl.length;l++)We(Kl[l],o);break;case"source":We("error",o);break;case"img":case"image":case"link":We("error",o),We("load",o);break;case"details":We("toggle",o);break;case"input":We("invalid",o),R_(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":We("invalid",o);break;case"textarea":We("invalid",o),z_(o,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||d.suppressHydrationWarning===!0||Ij(o.textContent,l)?(d.popover!=null&&(We("beforetoggle",o),We("toggle",o)),d.onScroll!=null&&We("scroll",o),d.onScrollEnd!=null&&We("scrollend",o),d.onClick!=null&&(o.onclick=_a),o=!0):o=!1,o||vi(a,!0)}function jx(a){for(xr=a.return;xr;)switch(xr.tag){case 5:case 31:case 13:An=!1;return;case 27:case 3:An=!0;return;default:xr=xr.return}}function us(a){if(a!==xr)return!1;if(!Qe)return jx(a),Qe=!0,!1;var o=a.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=a.type,l=!(l!=="form"&&l!=="button")||Zp(a.type,a.memoizedProps)),l=!l),l&&St&&vi(a),jx(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=Vj(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));St=Vj(a)}else o===27?(o=St,ki(a.type)?(a=rv,rv=null,St=a):St=o):St=xr?kn(a.stateNode.nextSibling):null;return!0}function so(){St=xr=null,Qe=!1}function Mh(){var a=pi;return a!==null&&(Gr===null?Gr=a:Gr.push.apply(Gr,a),pi=null),a}function jl(a){pi===null?pi=[a]:pi.push(a)}var Rh=Se(null),lo=null,Sa=null;function gi(a,o,l){$(Rh,o._currentValue),o._currentValue=l}function Ea(a){a._currentValue=Rh.current,J(Rh)}function qh(a,o,l){for(;a!==null;){var d=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),a===l)break;a=a.return}}function zh(a,o,l,d){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var b=g.dependencies;if(b!==null){var E=g.child;b=b.firstContext;e:for(;b!==null;){var N=b;b=g;for(var z=0;z<o.length;z++)if(N.context===o[z]){b.lanes|=l,N=b.alternate,N!==null&&(N.lanes|=l),qh(b.return,l,a),d||(E=null);break e}b=N.next}}else if(g.tag===18){if(E=g.return,E===null)throw Error(n(341));E.lanes|=l,b=E.alternate,b!==null&&(b.lanes|=l),qh(E,l,a),E=null}else E=g.child;if(E!==null)E.return=g;else for(E=g;E!==null;){if(E===a){E=null;break}if(g=E.sibling,g!==null){g.return=E.return,E=g;break}E=E.return}g=E}}function ds(a,o,l,d){a=null;for(var g=o,b=!1;g!==null;){if(!b){if((g.flags&524288)!==0)b=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var E=g.alternate;if(E===null)throw Error(n(387));if(E=E.memoizedProps,E!==null){var N=g.type;tn(g.pendingProps.value,E.value)||(a!==null?a.push(N):a=[N])}}else if(g===pe.current){if(E=g.alternate,E===null)throw Error(n(387));E.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(Xl):a=[Xl])}g=g.return}a!==null&&zh(o,a,l,d),o.flags|=262144}function Nu(a){for(a=a.firstContext;a!==null;){if(!tn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function co(a){lo=a,Sa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function wr(a){return Sx(lo,a)}function ku(a,o){return lo===null&&co(a),Sx(a,o)}function Sx(a,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},Sa===null){if(a===null)throw Error(n(308));Sa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Sa=Sa.next=o;return l}var N2=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(l,d){a.push(d)}};this.abort=function(){o.aborted=!0,a.forEach(function(l){return l()})}},k2=e.unstable_scheduleCallback,D2=e.unstable_NormalPriority,Xt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lh(){return{controller:new N2,data:new Map,refCount:0}}function Sl(a){a.refCount--,a.refCount===0&&k2(D2,function(){a.controller.abort()})}var El=null,Ih=0,fs=0,ms=null;function T2(a,o){if(El===null){var l=El=[];Ih=0,fs=$p(),ms={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Ih++,o.then(Ex,Ex),o}function Ex(){if(--Ih===0&&El!==null){ms!==null&&(ms.status="fulfilled");var a=El;El=null,fs=0,ms=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function P2(a,o){var l=[],d={status:"pending",value:null,reason:null,then:function(g){l.push(g)}};return a.then(function(){d.status="fulfilled",d.value=o;for(var g=0;g<l.length;g++)(0,l[g])(o)},function(g){for(d.status="rejected",d.reason=g,g=0;g<l.length;g++)(0,l[g])(void 0)}),d}var Ox=R.S;R.S=function(a,o){cj=Ye(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&T2(a,o),Ox!==null&&Ox(a,o)};var uo=Se(null);function Uh(){var a=uo.current;return a!==null?a:yt.pooledCache}function Du(a,o){o===null?$(uo,uo.current):$(uo,o.pool)}function Cx(){var a=Uh();return a===null?null:{parent:Xt._currentValue,pool:a}}var hs=Error(n(460)),Bh=Error(n(474)),Tu=Error(n(542)),Pu={then:function(){}};function Ax(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Nx(a,o,l){switch(l=a[l],l===void 0?a.push(o):l!==o&&(o.then(_a,_a),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Dx(a),a;default:if(typeof o.status=="string")o.then(_a,_a);else{if(a=yt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(d){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=d}},function(d){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Dx(a),a}throw mo=o,hs}}function fo(a){try{var o=a._init;return o(a._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(mo=l,hs):l}}var mo=null;function kx(){if(mo===null)throw Error(n(459));var a=mo;return mo=null,a}function Dx(a){if(a===hs||a===Tu)throw Error(n(483))}var ps=null,Ol=0;function Mu(a){var o=Ol;return Ol+=1,ps===null&&(ps=[]),Nx(ps,a,o)}function Cl(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Ru(a,o){throw o.$$typeof===_?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Tx(a){function o(F,B){if(a){var Y=F.deletions;Y===null?(F.deletions=[B],F.flags|=16):Y.push(B)}}function l(F,B){if(!a)return null;for(;B!==null;)o(F,B),B=B.sibling;return null}function d(F){for(var B=new Map;F!==null;)F.key!==null?B.set(F.key,F):B.set(F.index,F),F=F.sibling;return B}function g(F,B){return F=wa(F,B),F.index=0,F.sibling=null,F}function b(F,B,Y){return F.index=Y,a?(Y=F.alternate,Y!==null?(Y=Y.index,Y<B?(F.flags|=67108866,B):Y):(F.flags|=67108866,B)):(F.flags|=1048576,B)}function E(F){return a&&F.alternate===null&&(F.flags|=67108866),F}function N(F,B,Y,de){return B===null||B.tag!==6?(B=Nh(Y,F.mode,de),B.return=F,B):(B=g(B,Y),B.return=F,B)}function z(F,B,Y,de){var Re=Y.type;return Re===j?oe(F,B,Y.props.children,de,Y.key):B!==null&&(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===X&&fo(Re)===B.type)?(B=g(B,Y.props),Cl(B,Y),B.return=F,B):(B=Cu(Y.type,Y.key,Y.props,null,F.mode,de),Cl(B,Y),B.return=F,B)}function V(F,B,Y,de){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=kh(Y,F.mode,de),B.return=F,B):(B=g(B,Y.children||[]),B.return=F,B)}function oe(F,B,Y,de,Re){return B===null||B.tag!==7?(B=oo(Y,F.mode,de,Re),B.return=F,B):(B=g(B,Y),B.return=F,B)}function fe(F,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Nh(""+B,F.mode,Y),B.return=F,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case x:return Y=Cu(B.type,B.key,B.props,null,F.mode,Y),Cl(Y,B),Y.return=F,Y;case w:return B=kh(B,F.mode,Y),B.return=F,B;case X:return B=fo(B),fe(F,B,Y)}if(q(B)||U(B))return B=oo(B,F.mode,Y,null),B.return=F,B;if(typeof B.then=="function")return fe(F,Mu(B),Y);if(B.$$typeof===A)return fe(F,ku(F,B),Y);Ru(F,B)}return null}function Z(F,B,Y,de){var Re=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Re!==null?null:N(F,B,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:return Y.key===Re?z(F,B,Y,de):null;case w:return Y.key===Re?V(F,B,Y,de):null;case X:return Y=fo(Y),Z(F,B,Y,de)}if(q(Y)||U(Y))return Re!==null?null:oe(F,B,Y,de,null);if(typeof Y.then=="function")return Z(F,B,Mu(Y),de);if(Y.$$typeof===A)return Z(F,B,ku(F,Y),de);Ru(F,Y)}return null}function te(F,B,Y,de,Re){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return F=F.get(Y)||null,N(B,F,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case x:return F=F.get(de.key===null?Y:de.key)||null,z(B,F,de,Re);case w:return F=F.get(de.key===null?Y:de.key)||null,V(B,F,de,Re);case X:return de=fo(de),te(F,B,Y,de,Re)}if(q(de)||U(de))return F=F.get(Y)||null,oe(B,F,de,Re,null);if(typeof de.then=="function")return te(F,B,Y,Mu(de),Re);if(de.$$typeof===A)return te(F,B,Y,ku(B,de),Re);Ru(B,de)}return null}function Ne(F,B,Y,de){for(var Re=null,tt=null,Me=B,He=B=0,Ze=null;Me!==null&&He<Y.length;He++){Me.index>He?(Ze=Me,Me=null):Ze=Me.sibling;var rt=Z(F,Me,Y[He],de);if(rt===null){Me===null&&(Me=Ze);break}a&&Me&&rt.alternate===null&&o(F,Me),B=b(rt,B,He),tt===null?Re=rt:tt.sibling=rt,tt=rt,Me=Ze}if(He===Y.length)return l(F,Me),Qe&&ja(F,He),Re;if(Me===null){for(;He<Y.length;He++)Me=fe(F,Y[He],de),Me!==null&&(B=b(Me,B,He),tt===null?Re=Me:tt.sibling=Me,tt=Me);return Qe&&ja(F,He),Re}for(Me=d(Me);He<Y.length;He++)Ze=te(Me,F,He,Y[He],de),Ze!==null&&(a&&Ze.alternate!==null&&Me.delete(Ze.key===null?He:Ze.key),B=b(Ze,B,He),tt===null?Re=Ze:tt.sibling=Ze,tt=Ze);return a&&Me.forEach(function(Ri){return o(F,Ri)}),Qe&&ja(F,He),Re}function qe(F,B,Y,de){if(Y==null)throw Error(n(151));for(var Re=null,tt=null,Me=B,He=B=0,Ze=null,rt=Y.next();Me!==null&&!rt.done;He++,rt=Y.next()){Me.index>He?(Ze=Me,Me=null):Ze=Me.sibling;var Ri=Z(F,Me,rt.value,de);if(Ri===null){Me===null&&(Me=Ze);break}a&&Me&&Ri.alternate===null&&o(F,Me),B=b(Ri,B,He),tt===null?Re=Ri:tt.sibling=Ri,tt=Ri,Me=Ze}if(rt.done)return l(F,Me),Qe&&ja(F,He),Re;if(Me===null){for(;!rt.done;He++,rt=Y.next())rt=fe(F,rt.value,de),rt!==null&&(B=b(rt,B,He),tt===null?Re=rt:tt.sibling=rt,tt=rt);return Qe&&ja(F,He),Re}for(Me=d(Me);!rt.done;He++,rt=Y.next())rt=te(Me,F,He,rt.value,de),rt!==null&&(a&&rt.alternate!==null&&Me.delete(rt.key===null?He:rt.key),B=b(rt,B,He),tt===null?Re=rt:tt.sibling=rt,tt=rt);return a&&Me.forEach(function(FR){return o(F,FR)}),Qe&&ja(F,He),Re}function mt(F,B,Y,de){if(typeof Y=="object"&&Y!==null&&Y.type===j&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case x:e:{for(var Re=Y.key;B!==null;){if(B.key===Re){if(Re=Y.type,Re===j){if(B.tag===7){l(F,B.sibling),de=g(B,Y.props.children),de.return=F,F=de;break e}}else if(B.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===X&&fo(Re)===B.type){l(F,B.sibling),de=g(B,Y.props),Cl(de,Y),de.return=F,F=de;break e}l(F,B);break}else o(F,B);B=B.sibling}Y.type===j?(de=oo(Y.props.children,F.mode,de,Y.key),de.return=F,F=de):(de=Cu(Y.type,Y.key,Y.props,null,F.mode,de),Cl(de,Y),de.return=F,F=de)}return E(F);case w:e:{for(Re=Y.key;B!==null;){if(B.key===Re)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){l(F,B.sibling),de=g(B,Y.children||[]),de.return=F,F=de;break e}else{l(F,B);break}else o(F,B);B=B.sibling}de=kh(Y,F.mode,de),de.return=F,F=de}return E(F);case X:return Y=fo(Y),mt(F,B,Y,de)}if(q(Y))return Ne(F,B,Y,de);if(U(Y)){if(Re=U(Y),typeof Re!="function")throw Error(n(150));return Y=Re.call(Y),qe(F,B,Y,de)}if(typeof Y.then=="function")return mt(F,B,Mu(Y),de);if(Y.$$typeof===A)return mt(F,B,ku(F,Y),de);Ru(F,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,B!==null&&B.tag===6?(l(F,B.sibling),de=g(B,Y),de.return=F,F=de):(l(F,B),de=Nh(Y,F.mode,de),de.return=F,F=de),E(F)):l(F,B)}return function(F,B,Y,de){try{Ol=0;var Re=mt(F,B,Y,de);return ps=null,Re}catch(Me){if(Me===hs||Me===Tu)throw Me;var tt=rn(29,Me,null,F.mode);return tt.lanes=de,tt.return=F,tt}finally{}}}var ho=Tx(!0),Px=Tx(!1),yi=!1;function $h(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hh(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function bi(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function _i(a,o,l){var d=a.updateQueue;if(d===null)return null;if(d=d.shared,(it&2)!==0){var g=d.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),d.pending=o,o=Ou(a),vx(a,null,l),o}return Eu(a,d,o,l),Ou(a)}function Al(a,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var d=o.lanes;d&=a.pendingLanes,l|=d,o.lanes=l,fu(a,l)}}function Fh(a,o){var l=a.updateQueue,d=a.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var g=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var E={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?g=b=E:b=b.next=E,l=l.next}while(l!==null);b===null?g=b=o:b=b.next=o}else g=b=o;l={baseState:d.baseState,firstBaseUpdate:g,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},a.updateQueue=l;return}a=l.lastBaseUpdate,a===null?l.firstBaseUpdate=o:a.next=o,l.lastBaseUpdate=o}var Kh=!1;function Nl(){if(Kh){var a=ms;if(a!==null)throw a}}function kl(a,o,l,d){Kh=!1;var g=a.updateQueue;yi=!1;var b=g.firstBaseUpdate,E=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var z=N,V=z.next;z.next=null,E===null?b=V:E.next=V,E=z;var oe=a.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==E&&(N===null?oe.firstBaseUpdate=V:N.next=V,oe.lastBaseUpdate=z))}if(b!==null){var fe=g.baseState;E=0,oe=V=z=null,N=b;do{var Z=N.lane&-536870913,te=Z!==N.lane;if(te?(Xe&Z)===Z:(d&Z)===Z){Z!==0&&Z===fs&&(Kh=!0),oe!==null&&(oe=oe.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Ne=a,qe=N;Z=o;var mt=l;switch(qe.tag){case 1:if(Ne=qe.payload,typeof Ne=="function"){fe=Ne.call(mt,fe,Z);break e}fe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=qe.payload,Z=typeof Ne=="function"?Ne.call(mt,fe,Z):Ne,Z==null)break e;fe=v({},fe,Z);break e;case 2:yi=!0}}Z=N.callback,Z!==null&&(a.flags|=64,te&&(a.flags|=8192),te=g.callbacks,te===null?g.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(V=oe=te,z=fe):oe=oe.next=te,E|=Z;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;te=N,N=te.next,te.next=null,g.lastBaseUpdate=te,g.shared.pending=null}}while(!0);oe===null&&(z=fe),g.baseState=z,g.firstBaseUpdate=V,g.lastBaseUpdate=oe,b===null&&(g.shared.lanes=0),Ei|=E,a.lanes=E,a.memoizedState=fe}}function Mx(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function Rx(a,o){var l=a.callbacks;if(l!==null)for(a.callbacks=null,a=0;a<l.length;a++)Mx(l[a],o)}var vs=Se(null),qu=Se(0);function qx(a,o){a=Ma,$(qu,a),$(vs,o),Ma=a|o.baseLanes}function Yh(){$(qu,Ma),$(vs,vs.current)}function Gh(){Ma=qu.current,J(vs),J(qu)}var nn=Se(null),Nn=null;function xi(a){var o=a.alternate;$(Yt,Yt.current&1),$(nn,a),Nn===null&&(o===null||vs.current!==null||o.memoizedState!==null)&&(Nn=a)}function Vh(a){$(Yt,Yt.current),$(nn,a),Nn===null&&(Nn=a)}function zx(a){a.tag===22?($(Yt,Yt.current),$(nn,a),Nn===null&&(Nn=a)):wi()}function wi(){$(Yt,Yt.current),$(nn,nn.current)}function an(a){J(nn),Nn===a&&(Nn=null),J(Yt)}var Yt=Se(0);function zu(a){for(var o=a;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||ev(l)||tv(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Oa=0,Be=null,dt=null,Zt=null,Lu=!1,gs=!1,po=!1,Iu=0,Dl=0,ys=null,M2=0;function $t(){throw Error(n(321))}function Wh(a,o){if(o===null)return!1;for(var l=0;l<o.length&&l<a.length;l++)if(!tn(a[l],o[l]))return!1;return!0}function Xh(a,o,l,d,g,b){return Oa=b,Be=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,R.H=a===null||a.memoizedState===null?_w:dp,po=!1,b=l(d,g),po=!1,gs&&(b=Ix(o,l,d,g)),Lx(a),b}function Lx(a){R.H=Ml;var o=dt!==null&&dt.next!==null;if(Oa=0,Zt=dt=Be=null,Lu=!1,Dl=0,ys=null,o)throw Error(n(300));a===null||Qt||(a=a.dependencies,a!==null&&Nu(a)&&(Qt=!0))}function Ix(a,o,l,d){Be=a;var g=0;do{if(gs&&(ys=null),Dl=0,gs=!1,25<=g)throw Error(n(301));if(g+=1,Zt=dt=null,a.updateQueue!=null){var b=a.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}R.H=xw,b=o(l,d)}while(gs);return b}function R2(){var a=R.H,o=a.useState()[0];return o=typeof o.then=="function"?Tl(o):o,a=a.useState()[0],(dt!==null?dt.memoizedState:null)!==a&&(Be.flags|=1024),o}function Zh(){var a=Iu!==0;return Iu=0,a}function Qh(a,o,l){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~l}function Jh(a){if(Lu){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Lu=!1}Oa=0,Zt=dt=Be=null,gs=!1,Dl=Iu=0,ys=null}function qr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Be.memoizedState=Zt=a:Zt=Zt.next=a,Zt}function Gt(){if(dt===null){var a=Be.alternate;a=a!==null?a.memoizedState:null}else a=dt.next;var o=Zt===null?Be.memoizedState:Zt.next;if(o!==null)Zt=o,dt=a;else{if(a===null)throw Be.alternate===null?Error(n(467)):Error(n(310));dt=a,a={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},Zt===null?Be.memoizedState=Zt=a:Zt=Zt.next=a}return Zt}function Uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(a){var o=Dl;return Dl+=1,ys===null&&(ys=[]),a=Nx(ys,a,o),o=Be,(Zt===null?o.memoizedState:Zt.next)===null&&(o=o.alternate,R.H=o===null||o.memoizedState===null?_w:dp),a}function Bu(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Tl(a);if(a.$$typeof===A)return wr(a)}throw Error(n(438,String(a)))}function ep(a){var o=null,l=Be.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var d=Be.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Uu(),Be.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(a),d=0;d<a;d++)l[d]=ae;return o.index++,l}function Ca(a,o){return typeof o=="function"?o(a):o}function $u(a){var o=Gt();return tp(o,dt,a)}function tp(a,o,l){var d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=l;var g=a.baseQueue,b=d.pending;if(b!==null){if(g!==null){var E=g.next;g.next=b.next,b.next=E}o.baseQueue=g=b,d.pending=null}if(b=a.baseState,g===null)a.memoizedState=b;else{o=g.next;var N=E=null,z=null,V=o,oe=!1;do{var fe=V.lane&-536870913;if(fe!==V.lane?(Xe&fe)===fe:(Oa&fe)===fe){var Z=V.revertLane;if(Z===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),fe===fs&&(oe=!0);else if((Oa&Z)===Z){V=V.next,Z===fs&&(oe=!0);continue}else fe={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},z===null?(N=z=fe,E=b):z=z.next=fe,Be.lanes|=Z,Ei|=Z;fe=V.action,po&&l(b,fe),b=V.hasEagerState?V.eagerState:l(b,fe)}else Z={lane:fe,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},z===null?(N=z=Z,E=b):z=z.next=Z,Be.lanes|=fe,Ei|=fe;V=V.next}while(V!==null&&V!==o);if(z===null?E=b:z.next=N,!tn(b,a.memoizedState)&&(Qt=!0,oe&&(l=ms,l!==null)))throw l;a.memoizedState=b,a.baseState=E,a.baseQueue=z,d.lastRenderedState=b}return g===null&&(d.lanes=0),[a.memoizedState,d.dispatch]}function rp(a){var o=Gt(),l=o.queue;if(l===null)throw Error(n(311));l.lastRenderedReducer=a;var d=l.dispatch,g=l.pending,b=o.memoizedState;if(g!==null){l.pending=null;var E=g=g.next;do b=a(b,E.action),E=E.next;while(E!==g);tn(b,o.memoizedState)||(Qt=!0),o.memoizedState=b,o.baseQueue===null&&(o.baseState=b),l.lastRenderedState=b}return[b,d]}function Ux(a,o,l){var d=Be,g=Gt(),b=Qe;if(b){if(l===void 0)throw Error(n(407));l=l()}else l=o();var E=!tn((dt||g).memoizedState,l);if(E&&(g.memoizedState=l,Qt=!0),g=g.queue,ip(Hx.bind(null,d,g,a),[a]),g.getSnapshot!==o||E||Zt!==null&&Zt.memoizedState.tag&1){if(d.flags|=2048,bs(9,{destroy:void 0},$x.bind(null,d,g,l,o),null),yt===null)throw Error(n(349));b||(Oa&127)!==0||Bx(d,o,l)}return l}function Bx(a,o,l){a.flags|=16384,a={getSnapshot:o,value:l},o=Be.updateQueue,o===null?(o=Uu(),Be.updateQueue=o,o.stores=[a]):(l=o.stores,l===null?o.stores=[a]:l.push(a))}function $x(a,o,l,d){o.value=l,o.getSnapshot=d,Fx(o)&&Kx(a)}function Hx(a,o,l){return l(function(){Fx(o)&&Kx(a)})}function Fx(a){var o=a.getSnapshot;a=a.value;try{var l=o();return!tn(a,l)}catch{return!0}}function Kx(a){var o=io(a,2);o!==null&&Vr(o,a,2)}function np(a){var o=qr();if(typeof a=="function"){var l=a;if(a=l(),po){Ut(!0);try{l()}finally{Ut(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:a},o}function Yx(a,o,l,d){return a.baseState=l,tp(a,dt,typeof d=="function"?d:Ca)}function q2(a,o,l,d,g){if(Ku(a))throw Error(n(485));if(a=o.action,a!==null){var b={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){b.listeners.push(E)}};R.T!==null?l(!0):b.isTransition=!1,d(b),l=o.pending,l===null?(b.next=o.pending=b,Gx(o,b)):(b.next=l.next,o.pending=l.next=b)}}function Gx(a,o){var l=o.action,d=o.payload,g=a.state;if(o.isTransition){var b=R.T,E={};R.T=E;try{var N=l(g,d),z=R.S;z!==null&&z(E,N),Vx(a,o,N)}catch(V){ap(a,o,V)}finally{b!==null&&E.types!==null&&(b.types=E.types),R.T=b}}else try{b=l(g,d),Vx(a,o,b)}catch(V){ap(a,o,V)}}function Vx(a,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Wx(a,o,d)},function(d){return ap(a,o,d)}):Wx(a,o,l)}function Wx(a,o,l){o.status="fulfilled",o.value=l,Xx(o),a.state=l,o=a.pending,o!==null&&(l=o.next,l===o?a.pending=null:(l=l.next,o.next=l,Gx(a,l)))}function ap(a,o,l){var d=a.pending;if(a.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=l,Xx(o),o=o.next;while(o!==d)}a.action=null}function Xx(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Zx(a,o){return o}function Qx(a,o){if(Qe){var l=yt.formState;if(l!==null){e:{var d=Be;if(Qe){if(St){t:{for(var g=St,b=An;g.nodeType!==8;){if(!b){g=null;break t}if(g=kn(g.nextSibling),g===null){g=null;break t}}b=g.data,g=b==="F!"||b==="F"?g:null}if(g){St=kn(g.nextSibling),d=g.data==="F!";break e}}vi(d)}d=!1}d&&(o=l[0])}}return l=qr(),l.memoizedState=l.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zx,lastRenderedState:o},l.queue=d,l=gw.bind(null,Be,d),d.dispatch=l,d=np(!1),b=up.bind(null,Be,!1,d.queue),d=qr(),g={state:o,dispatch:null,action:a,pending:null},d.queue=g,l=q2.bind(null,Be,g,b,l),g.dispatch=l,d.memoizedState=a,[o,l,!1]}function Jx(a){var o=Gt();return ew(o,dt,a)}function ew(a,o,l){if(o=tp(a,o,Zx)[0],a=$u(Ca)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Tl(o)}catch(E){throw E===hs?Tu:E}else d=o;o=Gt();var g=o.queue,b=g.dispatch;return l!==o.memoizedState&&(Be.flags|=2048,bs(9,{destroy:void 0},z2.bind(null,g,l),null)),[d,b,a]}function z2(a,o){a.action=o}function tw(a){var o=Gt(),l=dt;if(l!==null)return ew(o,l,a);Gt(),o=o.memoizedState,l=Gt();var d=l.queue.dispatch;return l.memoizedState=a,[o,d,!1]}function bs(a,o,l,d){return a={tag:a,create:l,deps:d,inst:o,next:null},o=Be.updateQueue,o===null&&(o=Uu(),Be.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=a.next=a:(d=l.next,l.next=a,a.next=d,o.lastEffect=a),a}function rw(){return Gt().memoizedState}function Hu(a,o,l,d){var g=qr();Be.flags|=a,g.memoizedState=bs(1|o,{destroy:void 0},l,d===void 0?null:d)}function Fu(a,o,l,d){var g=Gt();d=d===void 0?null:d;var b=g.memoizedState.inst;dt!==null&&d!==null&&Wh(d,dt.memoizedState.deps)?g.memoizedState=bs(o,b,l,d):(Be.flags|=a,g.memoizedState=bs(1|o,b,l,d))}function nw(a,o){Hu(8390656,8,a,o)}function ip(a,o){Fu(2048,8,a,o)}function L2(a){Be.flags|=4;var o=Be.updateQueue;if(o===null)o=Uu(),Be.updateQueue=o,o.events=[a];else{var l=o.events;l===null?o.events=[a]:l.push(a)}}function aw(a){var o=Gt().memoizedState;return L2({ref:o,nextImpl:a}),function(){if((it&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function iw(a,o){return Fu(4,2,a,o)}function ow(a,o){return Fu(4,4,a,o)}function sw(a,o){if(typeof o=="function"){a=a();var l=o(a);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function lw(a,o,l){l=l!=null?l.concat([a]):null,Fu(4,4,sw.bind(null,o,a),l)}function op(){}function cw(a,o){var l=Gt();o=o===void 0?null:o;var d=l.memoizedState;return o!==null&&Wh(o,d[1])?d[0]:(l.memoizedState=[a,o],a)}function uw(a,o){var l=Gt();o=o===void 0?null:o;var d=l.memoizedState;if(o!==null&&Wh(o,d[1]))return d[0];if(d=a(),po){Ut(!0);try{a()}finally{Ut(!1)}}return l.memoizedState=[d,o],d}function sp(a,o,l){return l===void 0||(Oa&1073741824)!==0&&(Xe&261930)===0?a.memoizedState=o:(a.memoizedState=l,a=dj(),Be.lanes|=a,Ei|=a,l)}function dw(a,o,l,d){return tn(l,o)?l:vs.current!==null?(a=sp(a,l,d),tn(a,o)||(Qt=!0),a):(Oa&42)===0||(Oa&1073741824)!==0&&(Xe&261930)===0?(Qt=!0,a.memoizedState=l):(a=dj(),Be.lanes|=a,Ei|=a,o)}function fw(a,o,l,d,g){var b=I.p;I.p=b!==0&&8>b?b:8;var E=R.T,N={};R.T=N,up(a,!1,o,l);try{var z=g(),V=R.S;if(V!==null&&V(N,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var oe=P2(z,d);Pl(a,o,oe,ln(a))}else Pl(a,o,d,ln(a))}catch(fe){Pl(a,o,{then:function(){},status:"rejected",reason:fe},ln())}finally{I.p=b,E!==null&&N.types!==null&&(E.types=N.types),R.T=E}}function I2(){}function lp(a,o,l,d){if(a.tag!==5)throw Error(n(476));var g=mw(a).queue;fw(a,g,o,ee,l===null?I2:function(){return hw(a),l(d)})}function mw(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:ee},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:l},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function hw(a){var o=mw(a);o.next===null&&(o=a.alternate.memoizedState),Pl(a,o.next.queue,{},ln())}function cp(){return wr(Xl)}function pw(){return Gt().memoizedState}function vw(){return Gt().memoizedState}function U2(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var l=ln();a=bi(l);var d=_i(o,a,l);d!==null&&(Vr(d,o,l),Al(d,o,l)),o={cache:Lh()},a.payload=o;return}o=o.return}}function B2(a,o,l){var d=ln();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ku(a)?yw(o,l):(l=Ch(a,o,l,d),l!==null&&(Vr(l,a,d),bw(l,o,d)))}function gw(a,o,l){var d=ln();Pl(a,o,l,d)}function Pl(a,o,l,d){var g={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ku(a))yw(o,g);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=o.lastRenderedReducer,b!==null))try{var E=o.lastRenderedState,N=b(E,l);if(g.hasEagerState=!0,g.eagerState=N,tn(N,E))return Eu(a,o,g,0),yt===null&&Su(),!1}catch{}finally{}if(l=Ch(a,o,g,d),l!==null)return Vr(l,a,d),bw(l,o,d),!0}return!1}function up(a,o,l,d){if(d={lane:2,revertLane:$p(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ku(a)){if(o)throw Error(n(479))}else o=Ch(a,l,d,2),o!==null&&Vr(o,a,2)}function Ku(a){var o=a.alternate;return a===Be||o!==null&&o===Be}function yw(a,o){gs=Lu=!0;var l=a.pending;l===null?o.next=o:(o.next=l.next,l.next=o),a.pending=o}function bw(a,o,l){if((l&4194048)!==0){var d=o.lanes;d&=a.pendingLanes,l|=d,o.lanes=l,fu(a,l)}}var Ml={readContext:wr,use:Bu,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};Ml.useEffectEvent=$t;var _w={readContext:wr,use:Bu,useCallback:function(a,o){return qr().memoizedState=[a,o===void 0?null:o],a},useContext:wr,useEffect:nw,useImperativeHandle:function(a,o,l){l=l!=null?l.concat([a]):null,Hu(4194308,4,sw.bind(null,o,a),l)},useLayoutEffect:function(a,o){return Hu(4194308,4,a,o)},useInsertionEffect:function(a,o){Hu(4,2,a,o)},useMemo:function(a,o){var l=qr();o=o===void 0?null:o;var d=a();if(po){Ut(!0);try{a()}finally{Ut(!1)}}return l.memoizedState=[d,o],d},useReducer:function(a,o,l){var d=qr();if(l!==void 0){var g=l(o);if(po){Ut(!0);try{l(o)}finally{Ut(!1)}}}else g=o;return d.memoizedState=d.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},d.queue=a,a=a.dispatch=B2.bind(null,Be,a),[d.memoizedState,a]},useRef:function(a){var o=qr();return a={current:a},o.memoizedState=a},useState:function(a){a=np(a);var o=a.queue,l=gw.bind(null,Be,o);return o.dispatch=l,[a.memoizedState,l]},useDebugValue:op,useDeferredValue:function(a,o){var l=qr();return sp(l,a,o)},useTransition:function(){var a=np(!1);return a=fw.bind(null,Be,a.queue,!0,!1),qr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,l){var d=Be,g=qr();if(Qe){if(l===void 0)throw Error(n(407));l=l()}else{if(l=o(),yt===null)throw Error(n(349));(Xe&127)!==0||Bx(d,o,l)}g.memoizedState=l;var b={value:l,getSnapshot:o};return g.queue=b,nw(Hx.bind(null,d,b,a),[a]),d.flags|=2048,bs(9,{destroy:void 0},$x.bind(null,d,b,l,o),null),l},useId:function(){var a=qr(),o=yt.identifierPrefix;if(Qe){var l=aa,d=na;l=(d&~(1<<32-xt(d)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Iu++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=M2++,o="_"+o+"r_"+l.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:cp,useFormState:Qx,useActionState:Qx,useOptimistic:function(a){var o=qr();o.memoizedState=o.baseState=a;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=up.bind(null,Be,!0,l),l.dispatch=o,[a,o]},useMemoCache:ep,useCacheRefresh:function(){return qr().memoizedState=U2.bind(null,Be)},useEffectEvent:function(a){var o=qr(),l={impl:a};return o.memoizedState=l,function(){if((it&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}},dp={readContext:wr,use:Bu,useCallback:cw,useContext:wr,useEffect:ip,useImperativeHandle:lw,useInsertionEffect:iw,useLayoutEffect:ow,useMemo:uw,useReducer:$u,useRef:rw,useState:function(){return $u(Ca)},useDebugValue:op,useDeferredValue:function(a,o){var l=Gt();return dw(l,dt.memoizedState,a,o)},useTransition:function(){var a=$u(Ca)[0],o=Gt().memoizedState;return[typeof a=="boolean"?a:Tl(a),o]},useSyncExternalStore:Ux,useId:pw,useHostTransitionStatus:cp,useFormState:Jx,useActionState:Jx,useOptimistic:function(a,o){var l=Gt();return Yx(l,dt,a,o)},useMemoCache:ep,useCacheRefresh:vw};dp.useEffectEvent=aw;var xw={readContext:wr,use:Bu,useCallback:cw,useContext:wr,useEffect:ip,useImperativeHandle:lw,useInsertionEffect:iw,useLayoutEffect:ow,useMemo:uw,useReducer:rp,useRef:rw,useState:function(){return rp(Ca)},useDebugValue:op,useDeferredValue:function(a,o){var l=Gt();return dt===null?sp(l,a,o):dw(l,dt.memoizedState,a,o)},useTransition:function(){var a=rp(Ca)[0],o=Gt().memoizedState;return[typeof a=="boolean"?a:Tl(a),o]},useSyncExternalStore:Ux,useId:pw,useHostTransitionStatus:cp,useFormState:tw,useActionState:tw,useOptimistic:function(a,o){var l=Gt();return dt!==null?Yx(l,dt,a,o):(l.baseState=a,[a,l.queue.dispatch])},useMemoCache:ep,useCacheRefresh:vw};xw.useEffectEvent=aw;function fp(a,o,l,d){o=a.memoizedState,l=l(d,o),l=l==null?o:v({},o,l),a.memoizedState=l,a.lanes===0&&(a.updateQueue.baseState=l)}var mp={enqueueSetState:function(a,o,l){a=a._reactInternals;var d=ln(),g=bi(d);g.payload=o,l!=null&&(g.callback=l),o=_i(a,g,d),o!==null&&(Vr(o,a,d),Al(o,a,d))},enqueueReplaceState:function(a,o,l){a=a._reactInternals;var d=ln(),g=bi(d);g.tag=1,g.payload=o,l!=null&&(g.callback=l),o=_i(a,g,d),o!==null&&(Vr(o,a,d),Al(o,a,d))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var l=ln(),d=bi(l);d.tag=2,o!=null&&(d.callback=o),o=_i(a,d,l),o!==null&&(Vr(o,a,l),Al(o,a,l))}};function ww(a,o,l,d,g,b,E){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(d,b,E):o.prototype&&o.prototype.isPureReactComponent?!_l(l,d)||!_l(g,b):!0}function jw(a,o,l,d){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,d),o.state!==a&&mp.enqueueReplaceState(o,o.state,null)}function vo(a,o){var l=o;if("ref"in o){l={};for(var d in o)d!=="ref"&&(l[d]=o[d])}if(a=a.defaultProps){l===o&&(l=v({},l));for(var g in a)l[g]===void 0&&(l[g]=a[g])}return l}function Sw(a){ju(a)}function Ew(a){console.error(a)}function Ow(a){ju(a)}function Yu(a,o){try{var l=a.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Cw(a,o,l){try{var d=a.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function hp(a,o,l){return l=bi(l),l.tag=3,l.payload={element:null},l.callback=function(){Yu(a,o)},l}function Aw(a){return a=bi(a),a.tag=3,a}function Nw(a,o,l,d){var g=l.type.getDerivedStateFromError;if(typeof g=="function"){var b=d.value;a.payload=function(){return g(b)},a.callback=function(){Cw(o,l,d)}}var E=l.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(a.callback=function(){Cw(o,l,d),typeof g!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function $2(a,o,l,d,g){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=l.alternate,o!==null&&ds(o,l,g,!0),l=nn.current,l!==null){switch(l.tag){case 31:case 13:return Nn===null?ad():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=g,d===Pu?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([d]):o.add(d),Ip(a,d,g)),!1;case 22:return l.flags|=65536,d===Pu?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([d]):l.add(d)),Ip(a,d,g)),!1}throw Error(n(435,l.tag))}return Ip(a,d,g),ad(),!1}if(Qe)return o=nn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,d!==Ph&&(a=Error(n(422),{cause:d}),jl(En(a,l)))):(d!==Ph&&(o=Error(n(423),{cause:d}),jl(En(o,l))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,d=En(d,l),g=hp(a.stateNode,d,g),Fh(a,g),Ht!==4&&(Ht=2)),!1;var b=Error(n(520),{cause:d});if(b=En(b,l),$l===null?$l=[b]:$l.push(b),Ht!==4&&(Ht=2),o===null)return!0;d=En(d,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,a=g&-g,l.lanes|=a,a=hp(l.stateNode,d,a),Fh(l,a),!1;case 1:if(o=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Oi===null||!Oi.has(b))))return l.flags|=65536,g&=-g,l.lanes|=g,g=Aw(g),Nw(g,a,l,d),Fh(l,g),!1}l=l.return}while(l!==null);return!1}var pp=Error(n(461)),Qt=!1;function jr(a,o,l,d){o.child=a===null?Px(o,null,l,d):ho(o,a.child,l,d)}function kw(a,o,l,d,g){l=l.render;var b=o.ref;if("ref"in d){var E={};for(var N in d)N!=="ref"&&(E[N]=d[N])}else E=d;return co(o),d=Xh(a,o,l,E,b,g),N=Zh(),a!==null&&!Qt?(Qh(a,o,g),Aa(a,o,g)):(Qe&&N&&Dh(o),o.flags|=1,jr(a,o,d,g),o.child)}function Dw(a,o,l,d,g){if(a===null){var b=l.type;return typeof b=="function"&&!Ah(b)&&b.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=b,Tw(a,o,b,d,g)):(a=Cu(l.type,null,d,o,o.mode,g),a.ref=o.ref,a.return=o,o.child=a)}if(b=a.child,!jp(a,g)){var E=b.memoizedProps;if(l=l.compare,l=l!==null?l:_l,l(E,d)&&a.ref===o.ref)return Aa(a,o,g)}return o.flags|=1,a=wa(b,d),a.ref=o.ref,a.return=o,o.child=a}function Tw(a,o,l,d,g){if(a!==null){var b=a.memoizedProps;if(_l(b,d)&&a.ref===o.ref)if(Qt=!1,o.pendingProps=d=b,jp(a,g))(a.flags&131072)!==0&&(Qt=!0);else return o.lanes=a.lanes,Aa(a,o,g)}return vp(a,o,l,d,g)}function Pw(a,o,l,d){var g=d.children,b=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,a!==null){for(d=o.child=a.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;d=g&~b}else d=0,o.child=null;return Mw(a,o,b,l,d)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Du(o,b!==null?b.cachePool:null),b!==null?qx(o,b):Yh(),zx(o);else return d=o.lanes=536870912,Mw(a,o,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Du(o,b.cachePool),qx(o,b),wi(),o.memoizedState=null):(a!==null&&Du(o,null),Yh(),wi());return jr(a,o,g,l),o.child}function Rl(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Mw(a,o,l,d,g){var b=Uh();return b=b===null?null:{parent:Xt._currentValue,pool:b},o.memoizedState={baseLanes:l,cachePool:b},a!==null&&Du(o,null),Yh(),zx(o),a!==null&&ds(a,o,d,!0),o.childLanes=g,null}function Gu(a,o){return o=Wu({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function Rw(a,o,l){return ho(o,a.child,null,l),a=Gu(o,o.pendingProps),a.flags|=2,an(o),o.memoizedState=null,a}function H2(a,o,l){var d=o.pendingProps,g=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(Qe){if(d.mode==="hidden")return a=Gu(o,d),o.lanes=536870912,Rl(null,a);if(Vh(o),(a=St)?(a=Gj(a,An),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:hi!==null?{id:na,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},l=yx(a),l.return=o,o.child=l,xr=o,St=null)):a=null,a===null)throw vi(o);return o.lanes=536870912,null}return Gu(o,d)}var b=a.memoizedState;if(b!==null){var E=b.dehydrated;if(Vh(o),g)if(o.flags&256)o.flags&=-257,o=Rw(a,o,l);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(n(558));else if(Qt||ds(a,o,l,!1),g=(l&a.childLanes)!==0,Qt||g){if(d=yt,d!==null&&(E=Bn(d,l),E!==0&&E!==b.retryLane))throw b.retryLane=E,io(a,E),Vr(d,a,E),pp;ad(),o=Rw(a,o,l)}else a=b.treeContext,St=kn(E.nextSibling),xr=o,Qe=!0,pi=null,An=!1,a!==null&&xx(o,a),o=Gu(o,d),o.flags|=4096;return o}return a=wa(a.child,{mode:d.mode,children:d.children}),a.ref=o.ref,o.child=a,a.return=o,a}function Vu(a,o){var l=o.ref;if(l===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(n(284));(a===null||a.ref!==l)&&(o.flags|=4194816)}}function vp(a,o,l,d,g){return co(o),l=Xh(a,o,l,d,void 0,g),d=Zh(),a!==null&&!Qt?(Qh(a,o,g),Aa(a,o,g)):(Qe&&d&&Dh(o),o.flags|=1,jr(a,o,l,g),o.child)}function qw(a,o,l,d,g,b){return co(o),o.updateQueue=null,l=Ix(o,d,l,g),Lx(a),d=Zh(),a!==null&&!Qt?(Qh(a,o,b),Aa(a,o,b)):(Qe&&d&&Dh(o),o.flags|=1,jr(a,o,l,b),o.child)}function zw(a,o,l,d,g){if(co(o),o.stateNode===null){var b=ss,E=l.contextType;typeof E=="object"&&E!==null&&(b=wr(E)),b=new l(d,b),o.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=mp,o.stateNode=b,b._reactInternals=o,b=o.stateNode,b.props=d,b.state=o.memoizedState,b.refs={},$h(o),E=l.contextType,b.context=typeof E=="object"&&E!==null?wr(E):ss,b.state=o.memoizedState,E=l.getDerivedStateFromProps,typeof E=="function"&&(fp(o,l,E,d),b.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(E=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),E!==b.state&&mp.enqueueReplaceState(b,b.state,null),kl(o,d,b,g),Nl(),b.state=o.memoizedState),typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(a===null){b=o.stateNode;var N=o.memoizedProps,z=vo(l,N);b.props=z;var V=b.context,oe=l.contextType;E=ss,typeof oe=="object"&&oe!==null&&(E=wr(oe));var fe=l.getDerivedStateFromProps;oe=typeof fe=="function"||typeof b.getSnapshotBeforeUpdate=="function",N=o.pendingProps!==N,oe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(N||V!==E)&&jw(o,b,d,E),yi=!1;var Z=o.memoizedState;b.state=Z,kl(o,d,b,g),Nl(),V=o.memoizedState,N||Z!==V||yi?(typeof fe=="function"&&(fp(o,l,fe,d),V=o.memoizedState),(z=yi||ww(o,l,z,d,Z,V,E))?(oe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(o.flags|=4194308)):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=V),b.props=d,b.state=V,b.context=E,d=z):(typeof b.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{b=o.stateNode,Hh(a,o),E=o.memoizedProps,oe=vo(l,E),b.props=oe,fe=o.pendingProps,Z=b.context,V=l.contextType,z=ss,typeof V=="object"&&V!==null&&(z=wr(V)),N=l.getDerivedStateFromProps,(V=typeof N=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(E!==fe||Z!==z)&&jw(o,b,d,z),yi=!1,Z=o.memoizedState,b.state=Z,kl(o,d,b,g),Nl();var te=o.memoizedState;E!==fe||Z!==te||yi||a!==null&&a.dependencies!==null&&Nu(a.dependencies)?(typeof N=="function"&&(fp(o,l,N,d),te=o.memoizedState),(oe=yi||ww(o,l,oe,d,Z,te,z)||a!==null&&a.dependencies!==null&&Nu(a.dependencies))?(V||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,te,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,te,z)),typeof b.componentDidUpdate=="function"&&(o.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=te),b.props=d,b.state=te,b.context=z,d=oe):(typeof b.componentDidUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||E===a.memoizedProps&&Z===a.memoizedState||(o.flags|=1024),d=!1)}return b=d,Vu(a,o),d=(o.flags&128)!==0,b||d?(b=o.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),o.flags|=1,a!==null&&d?(o.child=ho(o,a.child,null,g),o.child=ho(o,null,l,g)):jr(a,o,l,g),o.memoizedState=b.state,a=o.child):a=Aa(a,o,g),a}function Lw(a,o,l,d){return so(),o.flags|=256,jr(a,o,l,d),o.child}var gp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yp(a){return{baseLanes:a,cachePool:Cx()}}function bp(a,o,l){return a=a!==null?a.childLanes&~l:0,o&&(a|=sn),a}function Iw(a,o,l){var d=o.pendingProps,g=!1,b=(o.flags&128)!==0,E;if((E=b)||(E=a!==null&&a.memoizedState===null?!1:(Yt.current&2)!==0),E&&(g=!0,o.flags&=-129),E=(o.flags&32)!==0,o.flags&=-33,a===null){if(Qe){if(g?xi(o):wi(),(a=St)?(a=Gj(a,An),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:hi!==null?{id:na,overflow:aa}:null,retryLane:536870912,hydrationErrors:null},l=yx(a),l.return=o,o.child=l,xr=o,St=null)):a=null,a===null)throw vi(o);return tv(a)?o.lanes=32:o.lanes=536870912,null}var N=d.children;return d=d.fallback,g?(wi(),g=o.mode,N=Wu({mode:"hidden",children:N},g),d=oo(d,g,l,null),N.return=o,d.return=o,N.sibling=d,o.child=N,d=o.child,d.memoizedState=yp(l),d.childLanes=bp(a,E,l),o.memoizedState=gp,Rl(null,d)):(xi(o),_p(o,N))}var z=a.memoizedState;if(z!==null&&(N=z.dehydrated,N!==null)){if(b)o.flags&256?(xi(o),o.flags&=-257,o=xp(a,o,l)):o.memoizedState!==null?(wi(),o.child=a.child,o.flags|=128,o=null):(wi(),N=d.fallback,g=o.mode,d=Wu({mode:"visible",children:d.children},g),N=oo(N,g,l,null),N.flags|=2,d.return=o,N.return=o,d.sibling=N,o.child=d,ho(o,a.child,null,l),d=o.child,d.memoizedState=yp(l),d.childLanes=bp(a,E,l),o.memoizedState=gp,o=Rl(null,d));else if(xi(o),tv(N)){if(E=N.nextSibling&&N.nextSibling.dataset,E)var V=E.dgst;E=V,d=Error(n(419)),d.stack="",d.digest=E,jl({value:d,source:null,stack:null}),o=xp(a,o,l)}else if(Qt||ds(a,o,l,!1),E=(l&a.childLanes)!==0,Qt||E){if(E=yt,E!==null&&(d=Bn(E,l),d!==0&&d!==z.retryLane))throw z.retryLane=d,io(a,d),Vr(E,a,d),pp;ev(N)||ad(),o=xp(a,o,l)}else ev(N)?(o.flags|=192,o.child=a.child,o=null):(a=z.treeContext,St=kn(N.nextSibling),xr=o,Qe=!0,pi=null,An=!1,a!==null&&xx(o,a),o=_p(o,d.children),o.flags|=4096);return o}return g?(wi(),N=d.fallback,g=o.mode,z=a.child,V=z.sibling,d=wa(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,V!==null?N=wa(V,N):(N=oo(N,g,l,null),N.flags|=2),N.return=o,d.return=o,d.sibling=N,o.child=d,Rl(null,d),d=o.child,N=a.child.memoizedState,N===null?N=yp(l):(g=N.cachePool,g!==null?(z=Xt._currentValue,g=g.parent!==z?{parent:z,pool:z}:g):g=Cx(),N={baseLanes:N.baseLanes|l,cachePool:g}),d.memoizedState=N,d.childLanes=bp(a,E,l),o.memoizedState=gp,Rl(a.child,d)):(xi(o),l=a.child,a=l.sibling,l=wa(l,{mode:"visible",children:d.children}),l.return=o,l.sibling=null,a!==null&&(E=o.deletions,E===null?(o.deletions=[a],o.flags|=16):E.push(a)),o.child=l,o.memoizedState=null,l)}function _p(a,o){return o=Wu({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Wu(a,o){return a=rn(22,a,null,o),a.lanes=0,a}function xp(a,o,l){return ho(o,a.child,null,l),a=_p(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function Uw(a,o,l){a.lanes|=o;var d=a.alternate;d!==null&&(d.lanes|=o),qh(a.return,o,l)}function wp(a,o,l,d,g,b){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:g,treeForkCount:b}:(E.isBackwards=o,E.rendering=null,E.renderingStartTime=0,E.last=d,E.tail=l,E.tailMode=g,E.treeForkCount=b)}function Bw(a,o,l){var d=o.pendingProps,g=d.revealOrder,b=d.tail;d=d.children;var E=Yt.current,N=(E&2)!==0;if(N?(E=E&1|2,o.flags|=128):E&=1,$(Yt,E),jr(a,o,d,l),d=Qe?wl:0,!N&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&Uw(a,l,o);else if(a.tag===19)Uw(a,l,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(g){case"forwards":for(l=o.child,g=null;l!==null;)a=l.alternate,a!==null&&zu(a)===null&&(g=l),l=l.sibling;l=g,l===null?(g=o.child,o.child=null):(g=l.sibling,l.sibling=null),wp(o,!1,g,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,g=o.child,o.child=null;g!==null;){if(a=g.alternate,a!==null&&zu(a)===null){o.child=g;break}a=g.sibling,g.sibling=l,l=g,g=a}wp(o,!0,l,null,b,d);break;case"together":wp(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Aa(a,o,l){if(a!==null&&(o.dependencies=a.dependencies),Ei|=o.lanes,(l&o.childLanes)===0)if(a!==null){if(ds(a,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,l=wa(a,a.pendingProps),o.child=l,l.return=o;a.sibling!==null;)a=a.sibling,l=l.sibling=wa(a,a.pendingProps),l.return=o;l.sibling=null}return o.child}function jp(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&Nu(a)))}function F2(a,o,l){switch(o.tag){case 3:ze(o,o.stateNode.containerInfo),gi(o,Xt,a.memoizedState.cache),so();break;case 27:case 5:Ee(o);break;case 4:ze(o,o.stateNode.containerInfo);break;case 10:gi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Vh(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(xi(o),o.flags|=128,null):(l&o.child.childLanes)!==0?Iw(a,o,l):(xi(o),a=Aa(a,o,l),a!==null?a.sibling:null);xi(o);break;case 19:var g=(a.flags&128)!==0;if(d=(l&o.childLanes)!==0,d||(ds(a,o,l,!1),d=(l&o.childLanes)!==0),g){if(d)return Bw(a,o,l);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),$(Yt,Yt.current),d)break;return null;case 22:return o.lanes=0,Pw(a,o,l,o.pendingProps);case 24:gi(o,Xt,a.memoizedState.cache)}return Aa(a,o,l)}function $w(a,o,l){if(a!==null)if(a.memoizedProps!==o.pendingProps)Qt=!0;else{if(!jp(a,l)&&(o.flags&128)===0)return Qt=!1,F2(a,o,l);Qt=(a.flags&131072)!==0}else Qt=!1,Qe&&(o.flags&1048576)!==0&&_x(o,wl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(a=fo(o.elementType),o.type=a,typeof a=="function")Ah(a)?(d=vo(a,d),o.tag=1,o=zw(null,o,a,d,l)):(o.tag=0,o=vp(null,o,a,d,l));else{if(a!=null){var g=a.$$typeof;if(g===k){o.tag=11,o=kw(null,o,a,d,l);break e}else if(g===L){o.tag=14,o=Dw(null,o,a,d,l);break e}}throw o=ve(a)||a,Error(n(306,o,""))}}return o;case 0:return vp(a,o,o.type,o.pendingProps,l);case 1:return d=o.type,g=vo(d,o.pendingProps),zw(a,o,d,g,l);case 3:e:{if(ze(o,o.stateNode.containerInfo),a===null)throw Error(n(387));d=o.pendingProps;var b=o.memoizedState;g=b.element,Hh(a,o),kl(o,d,null,l);var E=o.memoizedState;if(d=E.cache,gi(o,Xt,d),d!==b.cache&&zh(o,[Xt],l,!0),Nl(),d=E.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:E.cache},o.updateQueue.baseState=b,o.memoizedState=b,o.flags&256){o=Lw(a,o,d,l);break e}else if(d!==g){g=En(Error(n(424)),o),jl(g),o=Lw(a,o,d,l);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(St=kn(a.firstChild),xr=o,Qe=!0,pi=null,An=!0,l=Px(o,null,d,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(so(),d===g){o=Aa(a,o,l);break e}jr(a,o,d,l)}o=o.child}return o;case 26:return Vu(a,o),a===null?(l=Jj(o.type,null,o.pendingProps,null))?o.memoizedState=l:Qe||(l=o.type,a=o.pendingProps,d=dd(Le.current).createElement(l),d[Bt]=o,d[ar]=a,Sr(d,l,a),ce(d),o.stateNode=d):o.memoizedState=Jj(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Ee(o),a===null&&Qe&&(d=o.stateNode=Xj(o.type,o.pendingProps,Le.current),xr=o,An=!0,g=St,ki(o.type)?(rv=g,St=kn(d.firstChild)):St=g),jr(a,o,o.pendingProps.children,l),Vu(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&Qe&&((g=d=St)&&(d=_R(d,o.type,o.pendingProps,An),d!==null?(o.stateNode=d,xr=o,St=kn(d.firstChild),An=!1,g=!0):g=!1),g||vi(o)),Ee(o),g=o.type,b=o.pendingProps,E=a!==null?a.memoizedProps:null,d=b.children,Zp(g,b)?d=null:E!==null&&Zp(g,E)&&(o.flags|=32),o.memoizedState!==null&&(g=Xh(a,o,R2,null,null,l),Xl._currentValue=g),Vu(a,o),jr(a,o,d,l),o.child;case 6:return a===null&&Qe&&((a=l=St)&&(l=xR(l,o.pendingProps,An),l!==null?(o.stateNode=l,xr=o,St=null,a=!0):a=!1),a||vi(o)),null;case 13:return Iw(a,o,l);case 4:return ze(o,o.stateNode.containerInfo),d=o.pendingProps,a===null?o.child=ho(o,null,d,l):jr(a,o,d,l),o.child;case 11:return kw(a,o,o.type,o.pendingProps,l);case 7:return jr(a,o,o.pendingProps,l),o.child;case 8:return jr(a,o,o.pendingProps.children,l),o.child;case 12:return jr(a,o,o.pendingProps.children,l),o.child;case 10:return d=o.pendingProps,gi(o,o.type,d.value),jr(a,o,d.children,l),o.child;case 9:return g=o.type._context,d=o.pendingProps.children,co(o),g=wr(g),d=d(g),o.flags|=1,jr(a,o,d,l),o.child;case 14:return Dw(a,o,o.type,o.pendingProps,l);case 15:return Tw(a,o,o.type,o.pendingProps,l);case 19:return Bw(a,o,l);case 31:return H2(a,o,l);case 22:return Pw(a,o,l,o.pendingProps);case 24:return co(o),d=wr(Xt),a===null?(g=Uh(),g===null&&(g=yt,b=Lh(),g.pooledCache=b,b.refCount++,b!==null&&(g.pooledCacheLanes|=l),g=b),o.memoizedState={parent:d,cache:g},$h(o),gi(o,Xt,g)):((a.lanes&l)!==0&&(Hh(a,o),kl(o,null,null,l),Nl()),g=a.memoizedState,b=o.memoizedState,g.parent!==d?(g={parent:d,cache:d},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),gi(o,Xt,d)):(d=b.cache,gi(o,Xt,d),d!==g.cache&&zh(o,[Xt],l,!0))),jr(a,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Na(a){a.flags|=4}function Sp(a,o,l,d,g){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(g&335544128)===g)if(a.stateNode.complete)a.flags|=8192;else if(pj())a.flags|=8192;else throw mo=Pu,Bh}else a.flags&=-16777217}function Hw(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!aS(o))if(pj())a.flags|=8192;else throw mo=Pu,Bh}function Xu(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?be():536870912,a.lanes|=o,js|=o)}function ql(a,o){if(!Qe)switch(a.tailMode){case"hidden":o=a.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?a.tail=null:l.sibling=null;break;case"collapsed":l=a.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:d.sibling=null}}function Et(a){var o=a.alternate!==null&&a.alternate.child===a.child,l=0,d=0;if(o)for(var g=a.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags&65011712,d|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)l|=g.lanes|g.childLanes,d|=g.subtreeFlags,d|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=d,a.childLanes=l,o}function K2(a,o,l){var d=o.pendingProps;switch(Th(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(o),null;case 1:return Et(o),null;case 3:return l=o.stateNode,d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Ea(Xt),Q(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(a===null||a.child===null)&&(us(o)?Na(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Mh())),Et(o),null;case 26:var g=o.type,b=o.memoizedState;return a===null?(Na(o),b!==null?(Et(o),Hw(o,b)):(Et(o),Sp(o,g,null,d,l))):b?b!==a.memoizedState?(Na(o),Et(o),Hw(o,b)):(Et(o),o.flags&=-16777217):(a=a.memoizedProps,a!==d&&Na(o),Et(o),Sp(o,g,a,d,l)),null;case 27:if(we(o),l=Le.current,g=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Na(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Et(o),null}a=ge.current,us(o)?wx(o):(a=Xj(g,d,l),o.stateNode=a,Na(o))}return Et(o),null;case 5:if(we(o),g=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==d&&Na(o);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Et(o),null}if(b=ge.current,us(o))wx(o);else{var E=dd(Le.current);switch(b){case 1:b=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:b=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":b=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":b=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":b=E.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?E.createElement("select",{is:d.is}):E.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?E.createElement(g,{is:d.is}):E.createElement(g)}}b[Bt]=o,b[ar]=d;e:for(E=o.child;E!==null;){if(E.tag===5||E.tag===6)b.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===o)break e;for(;E.sibling===null;){if(E.return===null||E.return===o)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o.stateNode=b;e:switch(Sr(b,g,d),g){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Na(o)}}return Et(o),Sp(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,l),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==d&&Na(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(a=Le.current,us(o)){if(a=o.stateNode,l=o.memoizedProps,d=null,g=xr,g!==null)switch(g.tag){case 27:case 5:d=g.memoizedProps}a[Bt]=o,a=!!(a.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||Ij(a.nodeValue,l)),a||vi(o,!0)}else a=dd(a).createTextNode(d),a[Bt]=o,o.stateNode=a}return Et(o),null;case 31:if(l=o.memoizedState,a===null||a.memoizedState!==null){if(d=us(o),l!==null){if(a===null){if(!d)throw Error(n(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(557));a[Bt]=o}else so(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),a=!1}else l=Mh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=l),a=!0;if(!a)return o.flags&256?(an(o),o):(an(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Et(o),null;case 13:if(d=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=us(o),d!==null&&d.dehydrated!==null){if(a===null){if(!g)throw Error(n(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[Bt]=o}else so(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Et(o),g=!1}else g=Mh(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(an(o),o):(an(o),null)}return an(o),(o.flags&128)!==0?(o.lanes=l,o):(l=d!==null,a=a!==null&&a.memoizedState!==null,l&&(d=o.child,g=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(g=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==g&&(d.flags|=2048)),l!==a&&l&&(o.child.flags|=8192),Xu(o,o.updateQueue),Et(o),null);case 4:return Q(),a===null&&Yp(o.stateNode.containerInfo),Et(o),null;case 10:return Ea(o.type),Et(o),null;case 19:if(J(Yt),d=o.memoizedState,d===null)return Et(o),null;if(g=(o.flags&128)!==0,b=d.rendering,b===null)if(g)ql(d,!1);else{if(Ht!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(b=zu(a),b!==null){for(o.flags|=128,ql(d,!1),a=b.updateQueue,o.updateQueue=a,Xu(o,a),o.subtreeFlags=0,a=l,l=o.child;l!==null;)gx(l,a),l=l.sibling;return $(Yt,Yt.current&1|2),Qe&&ja(o,d.treeForkCount),o.child}a=a.sibling}d.tail!==null&&Ye()>td&&(o.flags|=128,g=!0,ql(d,!1),o.lanes=4194304)}else{if(!g)if(a=zu(b),a!==null){if(o.flags|=128,g=!0,a=a.updateQueue,o.updateQueue=a,Xu(o,a),ql(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Qe)return Et(o),null}else 2*Ye()-d.renderingStartTime>td&&l!==536870912&&(o.flags|=128,g=!0,ql(d,!1),o.lanes=4194304);d.isBackwards?(b.sibling=o.child,o.child=b):(a=d.last,a!==null?a.sibling=b:o.child=b,d.last=b)}return d.tail!==null?(a=d.tail,d.rendering=a,d.tail=a.sibling,d.renderingStartTime=Ye(),a.sibling=null,l=Yt.current,$(Yt,g?l&1|2:l&1),Qe&&ja(o,d.treeForkCount),a):(Et(o),null);case 22:case 23:return an(o),Gh(),d=o.memoizedState!==null,a!==null?a.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(l&536870912)!==0&&(o.flags&128)===0&&(Et(o),o.subtreeFlags&6&&(o.flags|=8192)):Et(o),l=o.updateQueue,l!==null&&Xu(o,l.retryQueue),l=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==l&&(o.flags|=2048),a!==null&&J(uo),null;case 24:return l=null,a!==null&&(l=a.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),Ea(Xt),Et(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function Y2(a,o){switch(Th(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Ea(Xt),Q(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return we(o),null;case 31:if(o.memoizedState!==null){if(an(o),o.alternate===null)throw Error(n(340));so()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(an(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));so()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return J(Yt),null;case 4:return Q(),null;case 10:return Ea(o.type),null;case 22:case 23:return an(o),Gh(),a!==null&&J(uo),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Ea(Xt),null;case 25:return null;default:return null}}function Fw(a,o){switch(Th(o),o.tag){case 3:Ea(Xt),Q();break;case 26:case 27:case 5:we(o);break;case 4:Q();break;case 31:o.memoizedState!==null&&an(o);break;case 13:an(o);break;case 19:J(Yt);break;case 10:Ea(o.type);break;case 22:case 23:an(o),Gh(),a!==null&&J(uo);break;case 24:Ea(Xt)}}function zl(a,o){try{var l=o.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&a)===a){d=void 0;var b=l.create,E=l.inst;d=b(),E.destroy=d}l=l.next}while(l!==g)}}catch(N){ct(o,o.return,N)}}function ji(a,o,l){try{var d=o.updateQueue,g=d!==null?d.lastEffect:null;if(g!==null){var b=g.next;d=b;do{if((d.tag&a)===a){var E=d.inst,N=E.destroy;if(N!==void 0){E.destroy=void 0,g=o;var z=l,V=N;try{V()}catch(oe){ct(g,z,oe)}}}d=d.next}while(d!==b)}}catch(oe){ct(o,o.return,oe)}}function Kw(a){var o=a.updateQueue;if(o!==null){var l=a.stateNode;try{Rx(o,l)}catch(d){ct(a,a.return,d)}}}function Yw(a,o,l){l.props=vo(a.type,a.memoizedProps),l.state=a.memoizedState;try{l.componentWillUnmount()}catch(d){ct(a,o,d)}}function Ll(a,o){try{var l=a.ref;if(l!==null){switch(a.tag){case 26:case 27:case 5:var d=a.stateNode;break;case 30:d=a.stateNode;break;default:d=a.stateNode}typeof l=="function"?a.refCleanup=l(d):l.current=d}}catch(g){ct(a,o,g)}}function ia(a,o){var l=a.ref,d=a.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(g){ct(a,o,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(g){ct(a,o,g)}else l.current=null}function Gw(a){var o=a.type,l=a.memoizedProps,d=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(g){ct(a,a.return,g)}}function Ep(a,o,l){try{var d=a.stateNode;hR(d,a.type,l,o),d[ar]=o}catch(g){ct(a,a.return,g)}}function Vw(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&ki(a.type)||a.tag===4}function Op(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Vw(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&ki(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Cp(a,o,l){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(a,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(a),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=_a));else if(d!==4&&(d===27&&ki(a.type)&&(l=a.stateNode,o=null),a=a.child,a!==null))for(Cp(a,o,l),a=a.sibling;a!==null;)Cp(a,o,l),a=a.sibling}function Zu(a,o,l){var d=a.tag;if(d===5||d===6)a=a.stateNode,o?l.insertBefore(a,o):l.appendChild(a);else if(d!==4&&(d===27&&ki(a.type)&&(l=a.stateNode),a=a.child,a!==null))for(Zu(a,o,l),a=a.sibling;a!==null;)Zu(a,o,l),a=a.sibling}function Ww(a){var o=a.stateNode,l=a.memoizedProps;try{for(var d=a.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);Sr(o,d,l),o[Bt]=a,o[ar]=l}catch(b){ct(a,a.return,b)}}var ka=!1,Jt=!1,Ap=!1,Xw=typeof WeakSet=="function"?WeakSet:Set,mr=null;function G2(a,o){if(a=a.containerInfo,Wp=yd,a=lx(a),xh(a)){if("selectionStart"in a)var l={start:a.selectionStart,end:a.selectionEnd};else e:{l=(l=a.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var g=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var E=0,N=-1,z=-1,V=0,oe=0,fe=a,Z=null;t:for(;;){for(var te;fe!==l||g!==0&&fe.nodeType!==3||(N=E+g),fe!==b||d!==0&&fe.nodeType!==3||(z=E+d),fe.nodeType===3&&(E+=fe.nodeValue.length),(te=fe.firstChild)!==null;)Z=fe,fe=te;for(;;){if(fe===a)break t;if(Z===l&&++V===g&&(N=E),Z===b&&++oe===d&&(z=E),(te=fe.nextSibling)!==null)break;fe=Z,Z=fe.parentNode}fe=te}l=N===-1||z===-1?null:{start:N,end:z}}else l=null}l=l||{start:0,end:0}}else l=null;for(Xp={focusedElem:a,selectionRange:l},yd=!1,mr=o;mr!==null;)if(o=mr,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,mr=a;else for(;mr!==null;){switch(o=mr,b=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(l=0;l<a.length;l++)g=a[l],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&b!==null){a=void 0,l=o,g=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var Ne=vo(l.type,g);a=d.getSnapshotBeforeUpdate(Ne,b),d.__reactInternalSnapshotBeforeUpdate=a}catch(qe){ct(l,l.return,qe)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,l=a.nodeType,l===9)Jp(a);else if(l===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Jp(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,mr=a;break}mr=o.return}}function Zw(a,o,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Ta(a,l),d&4&&zl(5,l);break;case 1:if(Ta(a,l),d&4)if(a=l.stateNode,o===null)try{a.componentDidMount()}catch(E){ct(l,l.return,E)}else{var g=vo(l.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(g,o,a.__reactInternalSnapshotBeforeUpdate)}catch(E){ct(l,l.return,E)}}d&64&&Kw(l),d&512&&Ll(l,l.return);break;case 3:if(Ta(a,l),d&64&&(a=l.updateQueue,a!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{Rx(a,o)}catch(E){ct(l,l.return,E)}}break;case 27:o===null&&d&4&&Ww(l);case 26:case 5:Ta(a,l),o===null&&d&4&&Gw(l),d&512&&Ll(l,l.return);break;case 12:Ta(a,l);break;case 31:Ta(a,l),d&4&&ej(a,l);break;case 13:Ta(a,l),d&4&&tj(a,l),d&64&&(a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(l=rR.bind(null,l),wR(a,l))));break;case 22:if(d=l.memoizedState!==null||ka,!d){o=o!==null&&o.memoizedState!==null||Jt,g=ka;var b=Jt;ka=d,(Jt=o)&&!b?Pa(a,l,(l.subtreeFlags&8772)!==0):Ta(a,l),ka=g,Jt=b}break;case 30:break;default:Ta(a,l)}}function Qw(a){var o=a.alternate;o!==null&&(a.alternate=null,Qw(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Qo(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Nt=null,Fr=!1;function Da(a,o,l){for(l=l.child;l!==null;)Jw(a,o,l),l=l.sibling}function Jw(a,o,l){if(vt&&typeof vt.onCommitFiberUnmount=="function")try{vt.onCommitFiberUnmount(Rr,l)}catch{}switch(l.tag){case 26:Jt||ia(l,o),Da(a,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Jt||ia(l,o);var d=Nt,g=Fr;ki(l.type)&&(Nt=l.stateNode,Fr=!1),Da(a,o,l),Gl(l.stateNode),Nt=d,Fr=g;break;case 5:Jt||ia(l,o);case 6:if(d=Nt,g=Fr,Nt=null,Da(a,o,l),Nt=d,Fr=g,Nt!==null)if(Fr)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(l.stateNode)}catch(b){ct(l,o,b)}else try{Nt.removeChild(l.stateNode)}catch(b){ct(l,o,b)}break;case 18:Nt!==null&&(Fr?(a=Nt,Kj(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,l.stateNode),Ds(a)):Kj(Nt,l.stateNode));break;case 4:d=Nt,g=Fr,Nt=l.stateNode.containerInfo,Fr=!0,Da(a,o,l),Nt=d,Fr=g;break;case 0:case 11:case 14:case 15:ji(2,l,o),Jt||ji(4,l,o),Da(a,o,l);break;case 1:Jt||(ia(l,o),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Yw(l,o,d)),Da(a,o,l);break;case 21:Da(a,o,l);break;case 22:Jt=(d=Jt)||l.memoizedState!==null,Da(a,o,l),Jt=d;break;default:Da(a,o,l)}}function ej(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Ds(a)}catch(l){ct(o,o.return,l)}}}function tj(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Ds(a)}catch(l){ct(o,o.return,l)}}function V2(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new Xw),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new Xw),o;default:throw Error(n(435,a.tag))}}function Qu(a,o){var l=V2(a);o.forEach(function(d){if(!l.has(d)){l.add(d);var g=nR.bind(null,a,d);d.then(g,g)}})}function Kr(a,o){var l=o.deletions;if(l!==null)for(var d=0;d<l.length;d++){var g=l[d],b=a,E=o,N=E;e:for(;N!==null;){switch(N.tag){case 27:if(ki(N.type)){Nt=N.stateNode,Fr=!1;break e}break;case 5:Nt=N.stateNode,Fr=!1;break e;case 3:case 4:Nt=N.stateNode.containerInfo,Fr=!0;break e}N=N.return}if(Nt===null)throw Error(n(160));Jw(b,E,g),Nt=null,Fr=!1,b=g.alternate,b!==null&&(b.return=null),g.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)rj(o,a),o=o.sibling}var Fn=null;function rj(a,o){var l=a.alternate,d=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Kr(o,a),Yr(a),d&4&&(ji(3,a,a.return),zl(3,a),ji(5,a,a.return));break;case 1:Kr(o,a),Yr(a),d&512&&(Jt||l===null||ia(l,l.return)),d&64&&ka&&(a=a.updateQueue,a!==null&&(d=a.callbacks,d!==null&&(l=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var g=Fn;if(Kr(o,a),Yr(a),d&512&&(Jt||l===null||ia(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=a.memoizedState,l===null)if(d===null)if(a.stateNode===null){e:{d=a.type,l=a.memoizedProps,g=g.ownerDocument||g;t:switch(d){case"title":b=g.getElementsByTagName("title")[0],(!b||b[Zo]||b[Bt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=g.createElement(d),g.head.insertBefore(b,g.querySelector("head > title"))),Sr(b,d,l),b[Bt]=a,ce(b),d=b;break e;case"link":var E=rS("link","href",g).get(d+(l.href||""));if(E){for(var N=0;N<E.length;N++)if(b=E[N],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){E.splice(N,1);break t}}b=g.createElement(d),Sr(b,d,l),g.head.appendChild(b);break;case"meta":if(E=rS("meta","content",g).get(d+(l.content||""))){for(N=0;N<E.length;N++)if(b=E[N],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){E.splice(N,1);break t}}b=g.createElement(d),Sr(b,d,l),g.head.appendChild(b);break;default:throw Error(n(468,d))}b[Bt]=a,ce(b),d=b}a.stateNode=d}else nS(g,a.type,a.stateNode);else a.stateNode=tS(g,d,a.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?nS(g,a.type,a.stateNode):tS(g,d,a.memoizedProps)):d===null&&a.stateNode!==null&&Ep(a,a.memoizedProps,l.memoizedProps)}break;case 27:Kr(o,a),Yr(a),d&512&&(Jt||l===null||ia(l,l.return)),l!==null&&d&4&&Ep(a,a.memoizedProps,l.memoizedProps);break;case 5:if(Kr(o,a),Yr(a),d&512&&(Jt||l===null||ia(l,l.return)),a.flags&32){g=a.stateNode;try{es(g,"")}catch(Ne){ct(a,a.return,Ne)}}d&4&&a.stateNode!=null&&(g=a.memoizedProps,Ep(a,g,l!==null?l.memoizedProps:g)),d&1024&&(Ap=!0);break;case 6:if(Kr(o,a),Yr(a),d&4){if(a.stateNode===null)throw Error(n(162));d=a.memoizedProps,l=a.stateNode;try{l.nodeValue=d}catch(Ne){ct(a,a.return,Ne)}}break;case 3:if(hd=null,g=Fn,Fn=fd(o.containerInfo),Kr(o,a),Fn=g,Yr(a),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Ds(o.containerInfo)}catch(Ne){ct(a,a.return,Ne)}Ap&&(Ap=!1,nj(a));break;case 4:d=Fn,Fn=fd(a.stateNode.containerInfo),Kr(o,a),Yr(a),Fn=d;break;case 12:Kr(o,a),Yr(a);break;case 31:Kr(o,a),Yr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Qu(a,d)));break;case 13:Kr(o,a),Yr(a),a.child.flags&8192&&a.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ed=Ye()),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Qu(a,d)));break;case 22:g=a.memoizedState!==null;var z=l!==null&&l.memoizedState!==null,V=ka,oe=Jt;if(ka=V||g,Jt=oe||z,Kr(o,a),Jt=oe,ka=V,Yr(a),d&8192)e:for(o=a.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(l===null||z||ka||Jt||go(a)),l=null,o=a;;){if(o.tag===5||o.tag===26){if(l===null){z=l=o;try{if(b=z.stateNode,g)E=b.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{N=z.stateNode;var fe=z.memoizedProps.style,Z=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;N.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ne){ct(z,z.return,Ne)}}}else if(o.tag===6){if(l===null){z=o;try{z.stateNode.nodeValue=g?"":z.memoizedProps}catch(Ne){ct(z,z.return,Ne)}}}else if(o.tag===18){if(l===null){z=o;try{var te=z.stateNode;g?Yj(te,!0):Yj(z.stateNode,!1)}catch(Ne){ct(z,z.return,Ne)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=a.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,Qu(a,l))));break;case 19:Kr(o,a),Yr(a),d&4&&(d=a.updateQueue,d!==null&&(a.updateQueue=null,Qu(a,d)));break;case 30:break;case 21:break;default:Kr(o,a),Yr(a)}}function Yr(a){var o=a.flags;if(o&2){try{for(var l,d=a.return;d!==null;){if(Vw(d)){l=d;break}d=d.return}if(l==null)throw Error(n(160));switch(l.tag){case 27:var g=l.stateNode,b=Op(a);Zu(a,b,g);break;case 5:var E=l.stateNode;l.flags&32&&(es(E,""),l.flags&=-33);var N=Op(a);Zu(a,N,E);break;case 3:case 4:var z=l.stateNode.containerInfo,V=Op(a);Cp(a,V,z);break;default:throw Error(n(161))}}catch(oe){ct(a,a.return,oe)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function nj(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;nj(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Ta(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Zw(a,o.alternate,o),o=o.sibling}function go(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:ji(4,o,o.return),go(o);break;case 1:ia(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Yw(o,o.return,l),go(o);break;case 27:Gl(o.stateNode);case 26:case 5:ia(o,o.return),go(o);break;case 22:o.memoizedState===null&&go(o);break;case 30:go(o);break;default:go(o)}a=a.sibling}}function Pa(a,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,g=a,b=o,E=b.flags;switch(b.tag){case 0:case 11:case 15:Pa(g,b,l),zl(4,b);break;case 1:if(Pa(g,b,l),d=b,g=d.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(V){ct(d,d.return,V)}if(d=b,g=d.updateQueue,g!==null){var N=d.stateNode;try{var z=g.shared.hiddenCallbacks;if(z!==null)for(g.shared.hiddenCallbacks=null,g=0;g<z.length;g++)Mx(z[g],N)}catch(V){ct(d,d.return,V)}}l&&E&64&&Kw(b),Ll(b,b.return);break;case 27:Ww(b);case 26:case 5:Pa(g,b,l),l&&d===null&&E&4&&Gw(b),Ll(b,b.return);break;case 12:Pa(g,b,l);break;case 31:Pa(g,b,l),l&&E&4&&ej(g,b);break;case 13:Pa(g,b,l),l&&E&4&&tj(g,b);break;case 22:b.memoizedState===null&&Pa(g,b,l),Ll(b,b.return);break;case 30:break;default:Pa(g,b,l)}o=o.sibling}}function Np(a,o){var l=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(l=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==l&&(a!=null&&a.refCount++,l!=null&&Sl(l))}function kp(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Sl(a))}function Kn(a,o,l,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)aj(a,o,l,d),o=o.sibling}function aj(a,o,l,d){var g=o.flags;switch(o.tag){case 0:case 11:case 15:Kn(a,o,l,d),g&2048&&zl(9,o);break;case 1:Kn(a,o,l,d);break;case 3:Kn(a,o,l,d),g&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Sl(a)));break;case 12:if(g&2048){Kn(a,o,l,d),a=o.stateNode;try{var b=o.memoizedProps,E=b.id,N=b.onPostCommit;typeof N=="function"&&N(E,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(z){ct(o,o.return,z)}}else Kn(a,o,l,d);break;case 31:Kn(a,o,l,d);break;case 13:Kn(a,o,l,d);break;case 23:break;case 22:b=o.stateNode,E=o.alternate,o.memoizedState!==null?b._visibility&2?Kn(a,o,l,d):Il(a,o):b._visibility&2?Kn(a,o,l,d):(b._visibility|=2,_s(a,o,l,d,(o.subtreeFlags&10256)!==0||!1)),g&2048&&Np(E,o);break;case 24:Kn(a,o,l,d),g&2048&&kp(o.alternate,o);break;default:Kn(a,o,l,d)}}function _s(a,o,l,d,g){for(g=g&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var b=a,E=o,N=l,z=d,V=E.flags;switch(E.tag){case 0:case 11:case 15:_s(b,E,N,z,g),zl(8,E);break;case 23:break;case 22:var oe=E.stateNode;E.memoizedState!==null?oe._visibility&2?_s(b,E,N,z,g):Il(b,E):(oe._visibility|=2,_s(b,E,N,z,g)),g&&V&2048&&Np(E.alternate,E);break;case 24:_s(b,E,N,z,g),g&&V&2048&&kp(E.alternate,E);break;default:_s(b,E,N,z,g)}o=o.sibling}}function Il(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=a,d=o,g=d.flags;switch(d.tag){case 22:Il(l,d),g&2048&&Np(d.alternate,d);break;case 24:Il(l,d),g&2048&&kp(d.alternate,d);break;default:Il(l,d)}o=o.sibling}}var Ul=8192;function xs(a,o,l){if(a.subtreeFlags&Ul)for(a=a.child;a!==null;)ij(a,o,l),a=a.sibling}function ij(a,o,l){switch(a.tag){case 26:xs(a,o,l),a.flags&Ul&&a.memoizedState!==null&&MR(l,Fn,a.memoizedState,a.memoizedProps);break;case 5:xs(a,o,l);break;case 3:case 4:var d=Fn;Fn=fd(a.stateNode.containerInfo),xs(a,o,l),Fn=d;break;case 22:a.memoizedState===null&&(d=a.alternate,d!==null&&d.memoizedState!==null?(d=Ul,Ul=16777216,xs(a,o,l),Ul=d):xs(a,o,l));break;default:xs(a,o,l)}}function oj(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Bl(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];mr=d,lj(d,a)}oj(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)sj(a),a=a.sibling}function sj(a){switch(a.tag){case 0:case 11:case 15:Bl(a),a.flags&2048&&ji(9,a,a.return);break;case 3:Bl(a);break;case 12:Bl(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Ju(a)):Bl(a);break;default:Bl(a)}}function Ju(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var d=o[l];mr=d,lj(d,a)}oj(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:ji(8,o,o.return),Ju(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,Ju(o));break;default:Ju(o)}a=a.sibling}}function lj(a,o){for(;mr!==null;){var l=mr;switch(l.tag){case 0:case 11:case 15:ji(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Sl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,mr=d;else e:for(l=a;mr!==null;){d=mr;var g=d.sibling,b=d.return;if(Qw(d),d===l){mr=null;break e}if(g!==null){g.return=b,mr=g;break e}mr=b}}}var W2={getCacheForType:function(a){var o=wr(Xt),l=o.data.get(a);return l===void 0&&(l=a(),o.data.set(a,l)),l},cacheSignal:function(){return wr(Xt).controller.signal}},X2=typeof WeakMap=="function"?WeakMap:Map,it=0,yt=null,Ve=null,Xe=0,lt=0,on=null,Si=!1,ws=!1,Dp=!1,Ma=0,Ht=0,Ei=0,yo=0,Tp=0,sn=0,js=0,$l=null,Gr=null,Pp=!1,ed=0,cj=0,td=1/0,rd=null,Oi=null,or=0,Ci=null,Ss=null,Ra=0,Mp=0,Rp=null,uj=null,Hl=0,qp=null;function ln(){return(it&2)!==0&&Xe!==0?Xe&-Xe:R.T!==null?$p():Qi()}function dj(){if(sn===0)if((Xe&536870912)===0||Qe){var a=ui;ui<<=1,(ui&3932160)===0&&(ui=262144),sn=a}else sn=536870912;return a=nn.current,a!==null&&(a.flags|=32),sn}function Vr(a,o,l){(a===yt&&(lt===2||lt===9)||a.cancelPendingCommit!==null)&&(Es(a,0),Ai(a,Xe,sn,!1)),ya(a,l),((it&2)===0||a!==yt)&&(a===yt&&((it&2)===0&&(yo|=l),Ht===4&&Ai(a,Xe,sn,!1)),oa(a))}function fj(a,o,l){if((it&6)!==0)throw Error(n(327));var d=!l&&(o&127)===0&&(o&a.expiredLanes)===0||ga(a,o),g=d?J2(a,o):Lp(a,o,!0),b=d;do{if(g===0){ws&&!d&&Ai(a,o,0,!1);break}else{if(l=a.current.alternate,b&&!Z2(l)){g=Lp(a,o,!1),b=!1;continue}if(g===2){if(b=o,a.errorRecoveryDisabledLanes&b)var E=0;else E=a.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){o=E;e:{var N=a;g=$l;var z=N.current.memoizedState.isDehydrated;if(z&&(Es(N,E).flags|=256),E=Lp(N,E,!1),E!==2){if(Dp&&!z){N.errorRecoveryDisabledLanes|=b,yo|=b,g=4;break e}b=Gr,Gr=g,b!==null&&(Gr===null?Gr=b:Gr.push.apply(Gr,b))}g=E}if(b=!1,g!==2)continue}}if(g===1){Es(a,0),Ai(a,o,0,!0);break}e:{switch(d=a,b=g,b){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:Ai(d,o,sn,!Si);break e;case 2:Gr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(g=ed+300-Ye(),10<g)){if(Ai(d,o,sn,!Si),di(d,0,!0)!==0)break e;Ra=o,d.timeoutHandle=Hj(mj.bind(null,d,l,Gr,rd,Pp,o,sn,yo,js,Si,b,"Throttled",-0,0),g);break e}mj(d,l,Gr,rd,Pp,o,sn,yo,js,Si,b,null,-0,0)}}break}while(!0);oa(a)}function mj(a,o,l,d,g,b,E,N,z,V,oe,fe,Z,te){if(a.timeoutHandle=-1,fe=o.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_a},ij(o,b,fe);var Ne=(b&62914560)===b?ed-Ye():(b&4194048)===b?cj-Ye():0;if(Ne=RR(fe,Ne),Ne!==null){Ra=b,a.cancelPendingCommit=Ne(xj.bind(null,a,o,b,l,d,g,E,N,z,oe,fe,null,Z,te)),Ai(a,b,E,!V);return}}xj(a,o,b,l,d,g,E,N,z)}function Z2(a){for(var o=a;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var g=l[d],b=g.getSnapshot;g=g.value;try{if(!tn(b(),g))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ai(a,o,l,d){o&=~Tp,o&=~yo,a.suspendedLanes|=o,a.pingedLanes&=~o,d&&(a.warmLanes|=o),d=a.expirationTimes;for(var g=o;0<g;){var b=31-xt(g),E=1<<b;d[b]=-1,g&=~E}l!==0&&du(a,l,o)}function nd(){return(it&6)===0?(Fl(0),!1):!0}function zp(){if(Ve!==null){if(lt===0)var a=Ve.return;else a=Ve,Sa=lo=null,Jh(a),ps=null,Ol=0,a=Ve;for(;a!==null;)Fw(a.alternate,a),a=a.return;Ve=null}}function Es(a,o){var l=a.timeoutHandle;l!==-1&&(a.timeoutHandle=-1,gR(l)),l=a.cancelPendingCommit,l!==null&&(a.cancelPendingCommit=null,l()),Ra=0,zp(),yt=a,Ve=l=wa(a.current,null),Xe=o,lt=0,on=null,Si=!1,ws=ga(a,o),Dp=!1,js=sn=Tp=yo=Ei=Ht=0,Gr=$l=null,Pp=!1,(o&8)!==0&&(o|=o&32);var d=a.entangledLanes;if(d!==0)for(a=a.entanglements,d&=o;0<d;){var g=31-xt(d),b=1<<g;o|=a[g],d&=~b}return Ma=o,Su(),l}function hj(a,o){Be=null,R.H=Ml,o===hs||o===Tu?(o=kx(),lt=3):o===Bh?(o=kx(),lt=4):lt=o===pp?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,on=o,Ve===null&&(Ht=1,Yu(a,En(o,a.current)))}function pj(){var a=nn.current;return a===null?!0:(Xe&4194048)===Xe?Nn===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?a===Nn:!1}function vj(){var a=R.H;return R.H=Ml,a===null?Ml:a}function gj(){var a=R.A;return R.A=W2,a}function ad(){Ht=4,Si||(Xe&4194048)!==Xe&&nn.current!==null||(ws=!0),(Ei&134217727)===0&&(yo&134217727)===0||yt===null||Ai(yt,Xe,sn,!1)}function Lp(a,o,l){var d=it;it|=2;var g=vj(),b=gj();(yt!==a||Xe!==o)&&(rd=null,Es(a,o)),o=!1;var E=Ht;e:do try{if(lt!==0&&Ve!==null){var N=Ve,z=on;switch(lt){case 8:zp(),E=6;break e;case 3:case 2:case 9:case 6:nn.current===null&&(o=!0);var V=lt;if(lt=0,on=null,Os(a,N,z,V),l&&ws){E=0;break e}break;default:V=lt,lt=0,on=null,Os(a,N,z,V)}}Q2(),E=Ht;break}catch(oe){hj(a,oe)}while(!0);return o&&a.shellSuspendCounter++,Sa=lo=null,it=d,R.H=g,R.A=b,Ve===null&&(yt=null,Xe=0,Su()),E}function Q2(){for(;Ve!==null;)yj(Ve)}function J2(a,o){var l=it;it|=2;var d=vj(),g=gj();yt!==a||Xe!==o?(rd=null,td=Ye()+500,Es(a,o)):ws=ga(a,o);e:do try{if(lt!==0&&Ve!==null){o=Ve;var b=on;t:switch(lt){case 1:lt=0,on=null,Os(a,o,b,1);break;case 2:case 9:if(Ax(b)){lt=0,on=null,bj(o);break}o=function(){lt!==2&&lt!==9||yt!==a||(lt=7),oa(a)},b.then(o,o);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:Ax(b)?(lt=0,on=null,bj(o)):(lt=0,on=null,Os(a,o,b,7));break;case 5:var E=null;switch(Ve.tag){case 26:E=Ve.memoizedState;case 5:case 27:var N=Ve;if(E?aS(E):N.stateNode.complete){lt=0,on=null;var z=N.sibling;if(z!==null)Ve=z;else{var V=N.return;V!==null?(Ve=V,id(V)):Ve=null}break t}}lt=0,on=null,Os(a,o,b,5);break;case 6:lt=0,on=null,Os(a,o,b,6);break;case 8:zp(),Ht=6;break e;default:throw Error(n(462))}}eR();break}catch(oe){hj(a,oe)}while(!0);return Sa=lo=null,R.H=d,R.A=g,it=l,Ve!==null?0:(yt=null,Xe=0,Su(),Ht)}function eR(){for(;Ve!==null&&!Cr();)yj(Ve)}function yj(a){var o=$w(a.alternate,a,Ma);a.memoizedProps=a.pendingProps,o===null?id(a):Ve=o}function bj(a){var o=a,l=o.alternate;switch(o.tag){case 15:case 0:o=qw(l,o,o.pendingProps,o.type,void 0,Xe);break;case 11:o=qw(l,o,o.pendingProps,o.type.render,o.ref,Xe);break;case 5:Jh(o);default:Fw(l,o),o=Ve=gx(o,Ma),o=$w(l,o,Ma)}a.memoizedProps=a.pendingProps,o===null?id(a):Ve=o}function Os(a,o,l,d){Sa=lo=null,Jh(o),ps=null,Ol=0;var g=o.return;try{if($2(a,g,o,l,Xe)){Ht=1,Yu(a,En(l,a.current)),Ve=null;return}}catch(b){if(g!==null)throw Ve=g,b;Ht=1,Yu(a,En(l,a.current)),Ve=null;return}o.flags&32768?(Qe||d===1?a=!0:ws||(Xe&536870912)!==0?a=!1:(Si=a=!0,(d===2||d===9||d===3||d===6)&&(d=nn.current,d!==null&&d.tag===13&&(d.flags|=16384))),_j(o,a)):id(o)}function id(a){var o=a;do{if((o.flags&32768)!==0){_j(o,Si);return}a=o.return;var l=K2(o.alternate,o,Ma);if(l!==null){Ve=l;return}if(o=o.sibling,o!==null){Ve=o;return}Ve=o=a}while(o!==null);Ht===0&&(Ht=5)}function _j(a,o){do{var l=Y2(a.alternate,a);if(l!==null){l.flags&=32767,Ve=l;return}if(l=a.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(a=a.sibling,a!==null)){Ve=a;return}Ve=a=l}while(a!==null);Ht=6,Ve=null}function xj(a,o,l,d,g,b,E,N,z){a.cancelPendingCommit=null;do od();while(or!==0);if((it&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(b=o.lanes|o.childLanes,b|=Oh,cl(a,l,b,E,N,z),a===yt&&(Ve=yt=null,Xe=0),Ss=o,Ci=a,Ra=l,Mp=b,Rp=g,uj=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,aR(Ar,function(){return Oj(),null})):(a.callbackNode=null,a.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=R.T,R.T=null,g=I.p,I.p=2,E=it,it|=4;try{G2(a,o,l)}finally{it=E,I.p=g,R.T=d}}or=1,wj(),jj(),Sj()}}function wj(){if(or===1){or=0;var a=Ci,o=Ss,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=R.T,R.T=null;var d=I.p;I.p=2;var g=it;it|=4;try{rj(o,a);var b=Xp,E=lx(a.containerInfo),N=b.focusedElem,z=b.selectionRange;if(E!==N&&N&&N.ownerDocument&&sx(N.ownerDocument.documentElement,N)){if(z!==null&&xh(N)){var V=z.start,oe=z.end;if(oe===void 0&&(oe=V),"selectionStart"in N)N.selectionStart=V,N.selectionEnd=Math.min(oe,N.value.length);else{var fe=N.ownerDocument||document,Z=fe&&fe.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),Ne=N.textContent.length,qe=Math.min(z.start,Ne),mt=z.end===void 0?qe:Math.min(z.end,Ne);!te.extend&&qe>mt&&(E=mt,mt=qe,qe=E);var F=ox(N,qe),B=ox(N,mt);if(F&&B&&(te.rangeCount!==1||te.anchorNode!==F.node||te.anchorOffset!==F.offset||te.focusNode!==B.node||te.focusOffset!==B.offset)){var Y=fe.createRange();Y.setStart(F.node,F.offset),te.removeAllRanges(),qe>mt?(te.addRange(Y),te.extend(B.node,B.offset)):(Y.setEnd(B.node,B.offset),te.addRange(Y))}}}}for(fe=[],te=N;te=te.parentNode;)te.nodeType===1&&fe.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<fe.length;N++){var de=fe[N];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}yd=!!Wp,Xp=Wp=null}finally{it=g,I.p=d,R.T=l}}a.current=o,or=2}}function jj(){if(or===2){or=0;var a=Ci,o=Ss,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=R.T,R.T=null;var d=I.p;I.p=2;var g=it;it|=4;try{Zw(a,o.alternate,o)}finally{it=g,I.p=d,R.T=l}}or=3}}function Sj(){if(or===4||or===3){or=0,jt();var a=Ci,o=Ss,l=Ra,d=uj;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?or=5:(or=0,Ss=Ci=null,Ej(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(Oi=null),dl(l),o=o.stateNode,vt&&typeof vt.onCommitFiberRoot=="function")try{vt.onCommitFiberRoot(Rr,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=R.T,g=I.p,I.p=2,R.T=null;try{for(var b=a.onRecoverableError,E=0;E<d.length;E++){var N=d[E];b(N.value,{componentStack:N.stack})}}finally{R.T=o,I.p=g}}(Ra&3)!==0&&od(),oa(a),g=a.pendingLanes,(l&261930)!==0&&(g&42)!==0?a===qp?Hl++:(Hl=0,qp=a):Hl=0,Fl(0)}}function Ej(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Sl(o)))}function od(){return wj(),jj(),Sj(),Oj()}function Oj(){if(or!==5)return!1;var a=Ci,o=Mp;Mp=0;var l=dl(Ra),d=R.T,g=I.p;try{I.p=32>l?32:l,R.T=null,l=Rp,Rp=null;var b=Ci,E=Ra;if(or=0,Ss=Ci=null,Ra=0,(it&6)!==0)throw Error(n(331));var N=it;if(it|=4,sj(b.current),aj(b,b.current,E,l),it=N,Fl(0,!1),vt&&typeof vt.onPostCommitFiberRoot=="function")try{vt.onPostCommitFiberRoot(Rr,b)}catch{}return!0}finally{I.p=g,R.T=d,Ej(a,o)}}function Cj(a,o,l){o=En(l,o),o=hp(a.stateNode,o,2),a=_i(a,o,2),a!==null&&(ya(a,2),oa(a))}function ct(a,o,l){if(a.tag===3)Cj(a,a,l);else for(;o!==null;){if(o.tag===3){Cj(o,a,l);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Oi===null||!Oi.has(d))){a=En(l,a),l=Aw(2),d=_i(o,l,2),d!==null&&(Nw(l,d,o,a),ya(d,2),oa(d));break}}o=o.return}}function Ip(a,o,l){var d=a.pingCache;if(d===null){d=a.pingCache=new X2;var g=new Set;d.set(o,g)}else g=d.get(o),g===void 0&&(g=new Set,d.set(o,g));g.has(l)||(Dp=!0,g.add(l),a=tR.bind(null,a,o,l),o.then(a,a))}function tR(a,o,l){var d=a.pingCache;d!==null&&d.delete(o),a.pingedLanes|=a.suspendedLanes&l,a.warmLanes&=~l,yt===a&&(Xe&l)===l&&(Ht===4||Ht===3&&(Xe&62914560)===Xe&&300>Ye()-ed?(it&2)===0&&Es(a,0):Tp|=l,js===Xe&&(js=0)),oa(a)}function Aj(a,o){o===0&&(o=be()),a=io(a,o),a!==null&&(ya(a,o),oa(a))}function rR(a){var o=a.memoizedState,l=0;o!==null&&(l=o.retryLane),Aj(a,l)}function nR(a,o){var l=0;switch(a.tag){case 31:case 13:var d=a.stateNode,g=a.memoizedState;g!==null&&(l=g.retryLane);break;case 19:d=a.stateNode;break;case 22:d=a.stateNode._retryCache;break;default:throw Error(n(314))}d!==null&&d.delete(o),Aj(a,l)}function aR(a,o){return _t(a,o)}var sd=null,Cs=null,Up=!1,ld=!1,Bp=!1,Ni=0;function oa(a){a!==Cs&&a.next===null&&(Cs===null?sd=Cs=a:Cs=Cs.next=a),ld=!0,Up||(Up=!0,oR())}function Fl(a,o){if(!Bp&&ld){Bp=!0;do for(var l=!1,d=sd;d!==null;){if(a!==0){var g=d.pendingLanes;if(g===0)var b=0;else{var E=d.suspendedLanes,N=d.pingedLanes;b=(1<<31-xt(42|a)+1)-1,b&=g&~(E&~N),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,Tj(d,b))}else b=Xe,b=di(d,d===yt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||ga(d,b)||(l=!0,Tj(d,b));d=d.next}while(l);Bp=!1}}function iR(){Nj()}function Nj(){ld=Up=!1;var a=0;Ni!==0&&vR()&&(a=Ni);for(var o=Ye(),l=null,d=sd;d!==null;){var g=d.next,b=kj(d,o);b===0?(d.next=null,l===null?sd=g:l.next=g,g===null&&(Cs=l)):(l=d,(a!==0||(b&3)!==0)&&(ld=!0)),d=g}or!==0&&or!==5||Fl(a),Ni!==0&&(Ni=0)}function kj(a,o){for(var l=a.suspendedLanes,d=a.pingedLanes,g=a.expirationTimes,b=a.pendingLanes&-62914561;0<b;){var E=31-xt(b),N=1<<E,z=g[E];z===-1?((N&l)===0||(N&d)!==0)&&(g[E]=ll(N,o)):z<=o&&(a.expiredLanes|=N),b&=~N}if(o=yt,l=Xe,l=di(a,a===o?l:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d=a.callbackNode,l===0||a===o&&(lt===2||lt===9)||a.cancelPendingCommit!==null)return d!==null&&d!==null&&At(d),a.callbackNode=null,a.callbackPriority=0;if((l&3)===0||ga(a,l)){if(o=l&-l,o===a.callbackPriority)return o;switch(d!==null&&At(d),dl(l)){case 2:case 8:l=Pr;break;case 32:l=Ar;break;case 268435456:l=st;break;default:l=Ar}return d=Dj.bind(null,a),l=_t(l,d),a.callbackPriority=o,a.callbackNode=l,o}return d!==null&&d!==null&&At(d),a.callbackPriority=2,a.callbackNode=null,2}function Dj(a,o){if(or!==0&&or!==5)return a.callbackNode=null,a.callbackPriority=0,null;var l=a.callbackNode;if(od()&&a.callbackNode!==l)return null;var d=Xe;return d=di(a,a===yt?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),d===0?null:(fj(a,d,o),kj(a,Ye()),a.callbackNode!=null&&a.callbackNode===l?Dj.bind(null,a):null)}function Tj(a,o){if(od())return null;fj(a,o,!0)}function oR(){yR(function(){(it&6)!==0?_t(bn,iR):Nj()})}function $p(){if(Ni===0){var a=fs;a===0&&(a=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Ni=a}return Ni}function Pj(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:vu(""+a)}function Mj(a,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,a.id&&l.setAttribute("form",a.id),o.parentNode.insertBefore(l,o),a=new FormData(a),l.parentNode.removeChild(l),a}function sR(a,o,l,d,g){if(o==="submit"&&l&&l.stateNode===g){var b=Pj((g[ar]||null).action),E=d.submitter;E&&(o=(o=E[ar]||null)?Pj(o.formAction):E.getAttribute("formAction"),o!==null&&(b=o,E=null));var N=new _u("action","action",null,d,g);a.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ni!==0){var z=E?Mj(g,E):new FormData(g);lp(l,{pending:!0,data:z,method:g.method,action:b},null,z)}}else typeof b=="function"&&(N.preventDefault(),z=E?Mj(g,E):new FormData(g),lp(l,{pending:!0,data:z,method:g.method,action:b},b,z))},currentTarget:g}]})}}for(var Hp=0;Hp<Eh.length;Hp++){var Fp=Eh[Hp],lR=Fp.toLowerCase(),cR=Fp[0].toUpperCase()+Fp.slice(1);Hn(lR,"on"+cR)}Hn(dx,"onAnimationEnd"),Hn(fx,"onAnimationIteration"),Hn(mx,"onAnimationStart"),Hn("dblclick","onDoubleClick"),Hn("focusin","onFocus"),Hn("focusout","onBlur"),Hn(E2,"onTransitionRun"),Hn(O2,"onTransitionStart"),Hn(C2,"onTransitionCancel"),Hn(hx,"onTransitionEnd"),je("onMouseEnter",["mouseout","mouseover"]),je("onMouseLeave",["mouseout","mouseover"]),je("onPointerEnter",["pointerout","pointerover"]),je("onPointerLeave",["pointerout","pointerover"]),ne("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ne("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ne("onBeforeInput",["compositionend","keypress","textInput","paste"]),ne("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ne("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ne("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kl));function Rj(a,o){o=(o&4)!==0;for(var l=0;l<a.length;l++){var d=a[l],g=d.event;d=d.listeners;e:{var b=void 0;if(o)for(var E=d.length-1;0<=E;E--){var N=d[E],z=N.instance,V=N.currentTarget;if(N=N.listener,z!==b&&g.isPropagationStopped())break e;b=N,g.currentTarget=V;try{b(g)}catch(oe){ju(oe)}g.currentTarget=null,b=z}else for(E=0;E<d.length;E++){if(N=d[E],z=N.instance,V=N.currentTarget,N=N.listener,z!==b&&g.isPropagationStopped())break e;b=N,g.currentTarget=V;try{b(g)}catch(oe){ju(oe)}g.currentTarget=null,b=z}}}}function We(a,o){var l=o[eo];l===void 0&&(l=o[eo]=new Set);var d=a+"__bubble";l.has(d)||(qj(o,a,2,!1),l.add(d))}function Kp(a,o,l){var d=0;o&&(d|=4),qj(l,a,d,o)}var cd="_reactListening"+Math.random().toString(36).slice(2);function Yp(a){if(!a[cd]){a[cd]=!0,he.forEach(function(l){l!=="selectionchange"&&(uR.has(l)||Kp(l,!1,a),Kp(l,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[cd]||(o[cd]=!0,Kp("selectionchange",!1,o))}}function qj(a,o,l,d){switch(dS(o)){case 2:var g=LR;break;case 8:g=IR;break;default:g=sv}l=g.bind(null,o,l,a),g=void 0,!fh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),d?g!==void 0?a.addEventListener(o,l,{capture:!0,passive:g}):a.addEventListener(o,l,!0):g!==void 0?a.addEventListener(o,l,{passive:g}):a.addEventListener(o,l,!1)}function Gp(a,o,l,d,g){var b=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var N=d.stateNode.containerInfo;if(N===g)break;if(E===4)for(E=d.return;E!==null;){var z=E.tag;if((z===3||z===4)&&E.stateNode.containerInfo===g)return;E=E.return}for(;N!==null;){if(E=$n(N),E===null)return;if(z=E.tag,z===5||z===6||z===26||z===27){d=b=E;continue e}N=N.parentNode}}d=d.return}B_(function(){var V=b,oe=uh(l),fe=[];e:{var Z=px.get(a);if(Z!==void 0){var te=_u,Ne=a;switch(a){case"keypress":if(yu(l)===0)break e;case"keydown":case"keyup":te=n2;break;case"focusin":Ne="focus",te=vh;break;case"focusout":Ne="blur",te=vh;break;case"beforeblur":case"afterblur":te=vh;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=F_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=KM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=o2;break;case dx:case fx:case mx:te=VM;break;case hx:te=l2;break;case"scroll":case"scrollend":te=HM;break;case"wheel":te=u2;break;case"copy":case"cut":case"paste":te=XM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=Y_;break;case"toggle":case"beforetoggle":te=f2}var qe=(o&4)!==0,mt=!qe&&(a==="scroll"||a==="scrollend"),F=qe?Z!==null?Z+"Capture":null:Z;qe=[];for(var B=V,Y;B!==null;){var de=B;if(Y=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||Y===null||F===null||(de=ml(B,F),de!=null&&qe.push(Yl(B,de,Y))),mt)break;B=B.return}0<qe.length&&(Z=new te(Z,Ne,null,l,oe),fe.push({event:Z,listeners:qe}))}}if((o&7)===0){e:{if(Z=a==="mouseover"||a==="pointerover",te=a==="mouseout"||a==="pointerout",Z&&l!==ch&&(Ne=l.relatedTarget||l.fromElement)&&($n(Ne)||Ne[ra]))break e;if((te||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(Ne=l.relatedTarget||l.toElement,te=V,Ne=Ne?$n(Ne):null,Ne!==null&&(mt=s(Ne),qe=Ne.tag,Ne!==mt||qe!==5&&qe!==27&&qe!==6)&&(Ne=null)):(te=null,Ne=V),te!==Ne)){if(qe=F_,de="onMouseLeave",F="onMouseEnter",B="mouse",(a==="pointerout"||a==="pointerover")&&(qe=Y_,de="onPointerLeave",F="onPointerEnter",B="pointer"),mt=te==null?Z:to(te),Y=Ne==null?Z:to(Ne),Z=new qe(de,B+"leave",te,l,oe),Z.target=mt,Z.relatedTarget=Y,de=null,$n(oe)===V&&(qe=new qe(F,B+"enter",Ne,l,oe),qe.target=Y,qe.relatedTarget=mt,de=qe),mt=de,te&&Ne)t:{for(qe=dR,F=te,B=Ne,Y=0,de=F;de;de=qe(de))Y++;de=0;for(var Re=B;Re;Re=qe(Re))de++;for(;0<Y-de;)F=qe(F),Y--;for(;0<de-Y;)B=qe(B),de--;for(;Y--;){if(F===B||B!==null&&F===B.alternate){qe=F;break t}F=qe(F),B=qe(B)}qe=null}else qe=null;te!==null&&zj(fe,Z,te,qe,!1),Ne!==null&&mt!==null&&zj(fe,mt,Ne,qe,!0)}}e:{if(Z=V?to(V):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var tt=ex;else if(Q_(Z))if(tx)tt=w2;else{tt=_2;var Me=b2}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?V&&lh(V.elementType)&&(tt=ex):tt=x2;if(tt&&(tt=tt(a,V))){J_(fe,tt,l,oe);break e}Me&&Me(a,Z,V),a==="focusout"&&V&&Z.type==="number"&&V.memoizedProps.value!=null&&sh(Z,"number",Z.value)}switch(Me=V?to(V):window,a){case"focusin":(Q_(Me)||Me.contentEditable==="true")&&(as=Me,wh=V,xl=null);break;case"focusout":xl=wh=as=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,cx(fe,l,oe);break;case"selectionchange":if(S2)break;case"keydown":case"keyup":cx(fe,l,oe)}var He;if(yh)e:{switch(a){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else ns?X_(a,l)&&(Ze="onCompositionEnd"):a==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(G_&&l.locale!=="ko"&&(ns||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&ns&&(He=$_()):(mi=oe,mh="value"in mi?mi.value:mi.textContent,ns=!0)),Me=ud(V,Ze),0<Me.length&&(Ze=new K_(Ze,a,null,l,oe),fe.push({event:Ze,listeners:Me}),He?Ze.data=He:(He=Z_(l),He!==null&&(Ze.data=He)))),(He=h2?p2(a,l):v2(a,l))&&(Ze=ud(V,"onBeforeInput"),0<Ze.length&&(Me=new K_("onBeforeInput","beforeinput",null,l,oe),fe.push({event:Me,listeners:Ze}),Me.data=He)),sR(fe,a,V,l,oe)}Rj(fe,o)})}function Yl(a,o,l){return{instance:a,listener:o,currentTarget:l}}function ud(a,o){for(var l=o+"Capture",d=[];a!==null;){var g=a,b=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||b===null||(g=ml(a,l),g!=null&&d.unshift(Yl(a,g,b)),g=ml(a,o),g!=null&&d.push(Yl(a,g,b))),a.tag===3)return d;a=a.return}return[]}function dR(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function zj(a,o,l,d,g){for(var b=o._reactName,E=[];l!==null&&l!==d;){var N=l,z=N.alternate,V=N.stateNode;if(N=N.tag,z!==null&&z===d)break;N!==5&&N!==26&&N!==27||V===null||(z=V,g?(V=ml(l,b),V!=null&&E.unshift(Yl(l,V,z))):g||(V=ml(l,b),V!=null&&E.push(Yl(l,V,z)))),l=l.return}E.length!==0&&a.push({event:o,listeners:E})}var fR=/\r\n?/g,mR=/\u0000|\uFFFD/g;function Lj(a){return(typeof a=="string"?a:""+a).replace(fR,`
`).replace(mR,"")}function Ij(a,o){return o=Lj(o),Lj(a)===o}function ft(a,o,l,d,g,b){switch(l){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||es(a,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&es(a,""+d);break;case"className":hu(a,"class",d);break;case"tabIndex":hu(a,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":hu(a,l,d);break;case"style":I_(a,d,b);break;case"data":if(o!=="object"){hu(a,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||l!=="href")){a.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(l);break}d=vu(""+d),a.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){a.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(o!=="input"&&ft(a,o,"name",g.name,g,null),ft(a,o,"formEncType",g.formEncType,g,null),ft(a,o,"formMethod",g.formMethod,g,null),ft(a,o,"formTarget",g.formTarget,g,null)):(ft(a,o,"encType",g.encType,g,null),ft(a,o,"method",g.method,g,null),ft(a,o,"target",g.target,g,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){a.removeAttribute(l);break}d=vu(""+d),a.setAttribute(l,d);break;case"onClick":d!=null&&(a.onclick=_a);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"multiple":a.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":a.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){a.removeAttribute("xlink:href");break}l=vu(""+d),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,""+d):a.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,""):a.removeAttribute(l);break;case"capture":case"download":d===!0?a.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?a.setAttribute(l,d):a.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?a.setAttribute(l,d):a.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?a.removeAttribute(l):a.setAttribute(l,d);break;case"popover":We("beforetoggle",a),We("toggle",a),ir(a,"popover",d);break;case"xlinkActuate":ba(a,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":ba(a,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":ba(a,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":ba(a,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":ba(a,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":ba(a,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":ba(a,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":ba(a,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":ba(a,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ir(a,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=BM.get(l)||l,ir(a,l,d))}}function Vp(a,o,l,d,g,b){switch(l){case"style":I_(a,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(n(61));if(l=d.__html,l!=null){if(g.children!=null)throw Error(n(60));a.innerHTML=l}}break;case"children":typeof d=="string"?es(a,d):(typeof d=="number"||typeof d=="bigint")&&es(a,""+d);break;case"onScroll":d!=null&&We("scroll",a);break;case"onScrollEnd":d!=null&&We("scrollend",a);break;case"onClick":d!=null&&(a.onclick=_a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!le.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(g=l.endsWith("Capture"),o=l.slice(2,g?l.length-7:void 0),b=a[ar]||null,b=b!=null?b[l]:null,typeof b=="function"&&a.removeEventListener(o,b,g),typeof d=="function")){typeof b!="function"&&b!==null&&(l in a?a[l]=null:a.hasAttribute(l)&&a.removeAttribute(l)),a.addEventListener(o,d,g);break e}l in a?a[l]=d:d===!0?a.setAttribute(l,""):ir(a,l,d)}}}function Sr(a,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var d=!1,g=!1,b;for(b in l)if(l.hasOwnProperty(b)){var E=l[b];if(E!=null)switch(b){case"src":d=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ft(a,o,b,E,l,null)}}g&&ft(a,o,"srcSet",l.srcSet,l,null),d&&ft(a,o,"src",l.src,l,null);return;case"input":We("invalid",a);var N=b=E=g=null,z=null,V=null;for(d in l)if(l.hasOwnProperty(d)){var oe=l[d];if(oe!=null)switch(d){case"name":g=oe;break;case"type":E=oe;break;case"checked":z=oe;break;case"defaultChecked":V=oe;break;case"value":b=oe;break;case"defaultValue":N=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,o));break;default:ft(a,o,d,oe,l,null)}}R_(a,b,N,z,V,E,g,!1);return;case"select":We("invalid",a),d=E=b=null;for(g in l)if(l.hasOwnProperty(g)&&(N=l[g],N!=null))switch(g){case"value":b=N;break;case"defaultValue":E=N;break;case"multiple":d=N;default:ft(a,o,g,N,l,null)}o=b,l=E,a.multiple=!!d,o!=null?Jo(a,!!d,o,!1):l!=null&&Jo(a,!!d,l,!0);return;case"textarea":We("invalid",a),b=g=d=null;for(E in l)if(l.hasOwnProperty(E)&&(N=l[E],N!=null))switch(E){case"value":d=N;break;case"defaultValue":g=N;break;case"children":b=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(n(91));break;default:ft(a,o,E,N,l,null)}z_(a,d,g,b);return;case"option":for(z in l)if(l.hasOwnProperty(z)&&(d=l[z],d!=null))switch(z){case"selected":a.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ft(a,o,z,d,l,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(d=0;d<Kl.length;d++)We(Kl[d],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in l)if(l.hasOwnProperty(V)&&(d=l[V],d!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:ft(a,o,V,d,l,null)}return;default:if(lh(o)){for(oe in l)l.hasOwnProperty(oe)&&(d=l[oe],d!==void 0&&Vp(a,o,oe,d,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(d=l[N],d!=null&&ft(a,o,N,d,l,null))}function hR(a,o,l,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,b=null,E=null,N=null,z=null,V=null,oe=null;for(te in l){var fe=l[te];if(l.hasOwnProperty(te)&&fe!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":z=fe;default:d.hasOwnProperty(te)||ft(a,o,te,null,d,fe)}}for(var Z in d){var te=d[Z];if(fe=l[Z],d.hasOwnProperty(Z)&&(te!=null||fe!=null))switch(Z){case"type":b=te;break;case"name":g=te;break;case"checked":V=te;break;case"defaultChecked":oe=te;break;case"value":E=te;break;case"defaultValue":N=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(n(137,o));break;default:te!==fe&&ft(a,o,Z,te,d,fe)}}oh(a,E,N,z,V,oe,b,g);return;case"select":te=E=N=Z=null;for(b in l)if(z=l[b],l.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":te=z;default:d.hasOwnProperty(b)||ft(a,o,b,null,d,z)}for(g in d)if(b=d[g],z=l[g],d.hasOwnProperty(g)&&(b!=null||z!=null))switch(g){case"value":Z=b;break;case"defaultValue":N=b;break;case"multiple":E=b;default:b!==z&&ft(a,o,g,b,d,z)}o=N,l=E,d=te,Z!=null?Jo(a,!!l,Z,!1):!!d!=!!l&&(o!=null?Jo(a,!!l,o,!0):Jo(a,!!l,l?[]:"",!1));return;case"textarea":te=Z=null;for(N in l)if(g=l[N],l.hasOwnProperty(N)&&g!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:ft(a,o,N,null,d,g)}for(E in d)if(g=d[E],b=l[E],d.hasOwnProperty(E)&&(g!=null||b!=null))switch(E){case"value":Z=g;break;case"defaultValue":te=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==b&&ft(a,o,E,g,d,b)}q_(a,Z,te);return;case"option":for(var Ne in l)if(Z=l[Ne],l.hasOwnProperty(Ne)&&Z!=null&&!d.hasOwnProperty(Ne))switch(Ne){case"selected":a.selected=!1;break;default:ft(a,o,Ne,null,d,Z)}for(z in d)if(Z=d[z],te=l[z],d.hasOwnProperty(z)&&Z!==te&&(Z!=null||te!=null))switch(z){case"selected":a.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ft(a,o,z,Z,d,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in l)Z=l[qe],l.hasOwnProperty(qe)&&Z!=null&&!d.hasOwnProperty(qe)&&ft(a,o,qe,null,d,Z);for(V in d)if(Z=d[V],te=l[V],d.hasOwnProperty(V)&&Z!==te&&(Z!=null||te!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,o));break;default:ft(a,o,V,Z,d,te)}return;default:if(lh(o)){for(var mt in l)Z=l[mt],l.hasOwnProperty(mt)&&Z!==void 0&&!d.hasOwnProperty(mt)&&Vp(a,o,mt,void 0,d,Z);for(oe in d)Z=d[oe],te=l[oe],!d.hasOwnProperty(oe)||Z===te||Z===void 0&&te===void 0||Vp(a,o,oe,Z,d,te);return}}for(var F in l)Z=l[F],l.hasOwnProperty(F)&&Z!=null&&!d.hasOwnProperty(F)&&ft(a,o,F,null,d,Z);for(fe in d)Z=d[fe],te=l[fe],!d.hasOwnProperty(fe)||Z===te||Z==null&&te==null||ft(a,o,fe,Z,d,te)}function Uj(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pR(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var g=l[d],b=g.transferSize,E=g.initiatorType,N=g.duration;if(b&&N&&Uj(E)){for(E=0,N=g.responseEnd,d+=1;d<l.length;d++){var z=l[d],V=z.startTime;if(V>N)break;var oe=z.transferSize,fe=z.initiatorType;oe&&Uj(fe)&&(z=z.responseEnd,E+=oe*(z<N?1:(N-V)/(z-V)))}if(--d,o+=8*(b+E)/(g.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var Wp=null,Xp=null;function dd(a){return a.nodeType===9?a:a.ownerDocument}function Bj(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $j(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function Zp(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Qp=null;function vR(){var a=window.event;return a&&a.type==="popstate"?a===Qp?!1:(Qp=a,!0):(Qp=null,!1)}var Hj=typeof setTimeout=="function"?setTimeout:void 0,gR=typeof clearTimeout=="function"?clearTimeout:void 0,Fj=typeof Promise=="function"?Promise:void 0,yR=typeof queueMicrotask=="function"?queueMicrotask:typeof Fj<"u"?function(a){return Fj.resolve(null).then(a).catch(bR)}:Hj;function bR(a){setTimeout(function(){throw a})}function ki(a){return a==="head"}function Kj(a,o){var l=o,d=0;do{var g=l.nextSibling;if(a.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"||l==="/&"){if(d===0){a.removeChild(g),Ds(o);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Gl(a.ownerDocument.documentElement);else if(l==="head"){l=a.ownerDocument.head,Gl(l);for(var b=l.firstChild;b;){var E=b.nextSibling,N=b.nodeName;b[Zo]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=E}}else l==="body"&&Gl(a.ownerDocument.body);l=g}while(l);Ds(o)}function Yj(a,o){var l=a;a=0;do{var d=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(a===0)break;a--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||a++;l=d}while(l)}function Jp(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Jp(l),Qo(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}a.removeChild(l)}}function _R(a,o,l,d){for(;a.nodeType===1;){var g=l;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(d){if(!a[Zo])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(b=a.getAttribute("rel"),b==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(b!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(b=a.getAttribute("src"),(b!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&b&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var b=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===b)return a}else return a;if(a=kn(a.nextSibling),a===null)break}return null}function xR(a,o,l){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!l||(a=kn(a.nextSibling),a===null))return null;return a}function Gj(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=kn(a.nextSibling),a===null))return null;return a}function ev(a){return a.data==="$?"||a.data==="$~"}function tv(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function wR(a,o){var l=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||l.readyState!=="loading")o();else{var d=function(){o(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),a._reactRetry=d}}function kn(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var rv=null;function Vj(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="/$"||l==="/&"){if(o===0)return kn(a.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}a=a.nextSibling}return null}function Wj(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var l=a.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return a;o--}else l!=="/$"&&l!=="/&"||o++}a=a.previousSibling}return null}function Xj(a,o,l){switch(o=dd(l),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Gl(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Qo(a)}var Dn=new Map,Zj=new Set;function fd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var qa=I.d;I.d={f:jR,r:SR,D:ER,C:OR,L:CR,m:AR,X:kR,S:NR,M:DR};function jR(){var a=qa.f(),o=nd();return a||o}function SR(a){var o=fi(a);o!==null&&o.tag===5&&o.type==="form"?hw(o):qa.r(a)}var As=typeof document>"u"?null:document;function Qj(a,o,l){var d=As;if(d&&typeof o=="string"&&o){var g=jn(o);g='link[rel="'+a+'"][href="'+g+'"]',typeof l=="string"&&(g+='[crossorigin="'+l+'"]'),Zj.has(g)||(Zj.add(g),a={rel:a,crossOrigin:l,href:o},d.querySelector(g)===null&&(o=d.createElement("link"),Sr(o,"link",a),ce(o),d.head.appendChild(o)))}}function ER(a){qa.D(a),Qj("dns-prefetch",a,null)}function OR(a,o){qa.C(a,o),Qj("preconnect",a,o)}function CR(a,o,l){qa.L(a,o,l);var d=As;if(d&&a&&o){var g='link[rel="preload"][as="'+jn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(g+='[imagesrcset="'+jn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(g+='[imagesizes="'+jn(l.imageSizes)+'"]')):g+='[href="'+jn(a)+'"]';var b=g;switch(o){case"style":b=Ns(a);break;case"script":b=ks(a)}Dn.has(b)||(a=v({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:a,as:o},l),Dn.set(b,a),d.querySelector(g)!==null||o==="style"&&d.querySelector(Vl(b))||o==="script"&&d.querySelector(Wl(b))||(o=d.createElement("link"),Sr(o,"link",a),ce(o),d.head.appendChild(o)))}}function AR(a,o){qa.m(a,o);var l=As;if(l&&a){var d=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+jn(d)+'"][href="'+jn(a)+'"]',b=g;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=ks(a)}if(!Dn.has(b)&&(a=v({rel:"modulepreload",href:a},o),Dn.set(b,a),l.querySelector(g)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Wl(b)))return}d=l.createElement("link"),Sr(d,"link",a),ce(d),l.head.appendChild(d)}}}function NR(a,o,l){qa.S(a,o,l);var d=As;if(d&&a){var g=K(d).hoistableStyles,b=Ns(a);o=o||"default";var E=g.get(b);if(!E){var N={loading:0,preload:null};if(E=d.querySelector(Vl(b)))N.loading=5;else{a=v({rel:"stylesheet",href:a,"data-precedence":o},l),(l=Dn.get(b))&&nv(a,l);var z=E=d.createElement("link");ce(z),Sr(z,"link",a),z._p=new Promise(function(V,oe){z.onload=V,z.onerror=oe}),z.addEventListener("load",function(){N.loading|=1}),z.addEventListener("error",function(){N.loading|=2}),N.loading|=4,md(E,o,d)}E={type:"stylesheet",instance:E,count:1,state:N},g.set(b,E)}}}function kR(a,o){qa.X(a,o);var l=As;if(l&&a){var d=K(l).hoistableScripts,g=ks(a),b=d.get(g);b||(b=l.querySelector(Wl(g)),b||(a=v({src:a,async:!0},o),(o=Dn.get(g))&&av(a,o),b=l.createElement("script"),ce(b),Sr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function DR(a,o){qa.M(a,o);var l=As;if(l&&a){var d=K(l).hoistableScripts,g=ks(a),b=d.get(g);b||(b=l.querySelector(Wl(g)),b||(a=v({src:a,async:!0,type:"module"},o),(o=Dn.get(g))&&av(a,o),b=l.createElement("script"),ce(b),Sr(b,"link",a),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(g,b))}}function Jj(a,o,l,d){var g=(g=Le.current)?fd(g):null;if(!g)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ns(l.href),l=K(g).hoistableStyles,d=l.get(o),d||(d={type:"style",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){a=Ns(l.href);var b=K(g).hoistableStyles,E=b.get(a);if(E||(g=g.ownerDocument||g,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(a,E),(b=g.querySelector(Vl(a)))&&!b._p&&(E.instance=b,E.state.loading=5),Dn.has(a)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Dn.set(a,l),b||TR(g,a,l,E.state))),o&&d===null)throw Error(n(528,""));return E}if(o&&d!==null)throw Error(n(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ks(l),l=K(g).hoistableScripts,d=l.get(o),d||(d={type:"script",instance:null,count:0,state:null},l.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function Ns(a){return'href="'+jn(a)+'"'}function Vl(a){return'link[rel="stylesheet"]['+a+"]"}function eS(a){return v({},a,{"data-precedence":a.precedence,precedence:null})}function TR(a,o,l,d){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=a.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),Sr(o,"link",l),ce(o),a.head.appendChild(o))}function ks(a){return'[src="'+jn(a)+'"]'}function Wl(a){return"script[async]"+a}function tS(a,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var d=a.querySelector('style[data-href~="'+jn(l.href)+'"]');if(d)return o.instance=d,ce(d),d;var g=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(a.ownerDocument||a).createElement("style"),ce(d),Sr(d,"style",g),md(d,l.precedence,a),o.instance=d;case"stylesheet":g=Ns(l.href);var b=a.querySelector(Vl(g));if(b)return o.state.loading|=4,o.instance=b,ce(b),b;d=eS(l),(g=Dn.get(g))&&nv(d,g),b=(a.ownerDocument||a).createElement("link"),ce(b);var E=b;return E._p=new Promise(function(N,z){E.onload=N,E.onerror=z}),Sr(b,"link",d),o.state.loading|=4,md(b,l.precedence,a),o.instance=b;case"script":return b=ks(l.src),(g=a.querySelector(Wl(b)))?(o.instance=g,ce(g),g):(d=l,(g=Dn.get(b))&&(d=v({},l),av(d,g)),a=a.ownerDocument||a,g=a.createElement("script"),ce(g),Sr(g,"link",d),a.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,md(d,l.precedence,a));return o.instance}function md(a,o,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=d.length?d[d.length-1]:null,b=g,E=0;E<d.length;E++){var N=d[E];if(N.dataset.precedence===o)b=N;else if(b!==g)break}b?b.parentNode.insertBefore(a,b.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(a,o.firstChild))}function nv(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function av(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var hd=null;function rS(a,o,l){if(hd===null){var d=new Map,g=hd=new Map;g.set(l,d)}else g=hd,d=g.get(l),d||(d=new Map,g.set(l,d));if(d.has(a))return d;for(d.set(a,null),l=l.getElementsByTagName(a),g=0;g<l.length;g++){var b=l[g];if(!(b[Zo]||b[Bt]||a==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var E=b.getAttribute(o)||"";E=a+E;var N=d.get(E);N?N.push(b):d.set(E,[b])}}return d}function nS(a,o,l){a=a.ownerDocument||a,a.head.insertBefore(l,o==="title"?a.querySelector("head > title"):null)}function PR(a,o,l){if(l===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function aS(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function MR(a,o,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var g=Ns(d.href),b=o.querySelector(Vl(g));if(b){o=b._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=pd.bind(a),o.then(a,a)),l.state.loading|=4,l.instance=b,ce(b);return}b=o.ownerDocument||o,d=eS(d),(g=Dn.get(g))&&nv(d,g),b=b.createElement("link"),ce(b);var E=b;E._p=new Promise(function(N,z){E.onload=N,E.onerror=z}),Sr(b,"link",d),l.instance=b}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(a.count++,l=pd.bind(a),o.addEventListener("load",l),o.addEventListener("error",l))}}var iv=0;function RR(a,o){return a.stylesheets&&a.count===0&&gd(a,a.stylesheets),0<a.count||0<a.imgCount?function(l){var d=setTimeout(function(){if(a.stylesheets&&gd(a,a.stylesheets),a.unsuspend){var b=a.unsuspend;a.unsuspend=null,b()}},6e4+o);0<a.imgBytes&&iv===0&&(iv=62500*pR());var g=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&gd(a,a.stylesheets),a.unsuspend)){var b=a.unsuspend;a.unsuspend=null,b()}},(a.imgBytes>iv?50:800)+o);return a.unsuspend=l,function(){a.unsuspend=null,clearTimeout(d),clearTimeout(g)}}:null}function pd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gd(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var vd=null;function gd(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,vd=new Map,o.forEach(qR,a),vd=null,pd.call(a))}function qR(a,o){if(!(o.state.loading&4)){var l=vd.get(a);if(l)var d=l.get(null);else{l=new Map,vd.set(a,l);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<g.length;b++){var E=g[b];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(l.set(E.dataset.precedence,E),d=E)}d&&l.set(null,d)}g=o.instance,E=g.getAttribute("data-precedence"),b=l.get(E)||d,b===d&&l.set(null,g),l.set(E,g),this.count++,d=pd.bind(this),g.addEventListener("load",d),g.addEventListener("error",d),b?b.parentNode.insertBefore(g,b.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),o.state.loading|=4}}var Xl={$$typeof:A,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function zR(a,o,l,d,g,b,E,N,z){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Un(0),this.hiddenUpdates=Un(null),this.identifierPrefix=d,this.onUncaughtError=g,this.onCaughtError=b,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function iS(a,o,l,d,g,b,E,N,z,V,oe,fe){return a=new zR(a,o,l,E,z,V,oe,fe,N),o=1,b===!0&&(o|=24),b=rn(3,null,null,o),a.current=b,b.stateNode=a,o=Lh(),o.refCount++,a.pooledCache=o,o.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:o},$h(b),a}function oS(a){return a?(a=ss,a):ss}function sS(a,o,l,d,g,b){g=oS(g),d.context===null?d.context=g:d.pendingContext=g,d=bi(o),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=_i(a,d,o),l!==null&&(Vr(l,a,o),Al(l,a,o))}function lS(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var l=a.retryLane;a.retryLane=l!==0&&l<o?l:o}}function ov(a,o){lS(a,o),(a=a.alternate)&&lS(a,o)}function cS(a){if(a.tag===13||a.tag===31){var o=io(a,67108864);o!==null&&Vr(o,a,67108864),ov(a,67108864)}}function uS(a){if(a.tag===13||a.tag===31){var o=ln();o=ul(o);var l=io(a,o);l!==null&&Vr(l,a,o),ov(a,o)}}var yd=!0;function LR(a,o,l,d){var g=R.T;R.T=null;var b=I.p;try{I.p=2,sv(a,o,l,d)}finally{I.p=b,R.T=g}}function IR(a,o,l,d){var g=R.T;R.T=null;var b=I.p;try{I.p=8,sv(a,o,l,d)}finally{I.p=b,R.T=g}}function sv(a,o,l,d){if(yd){var g=lv(d);if(g===null)Gp(a,o,d,bd,l),fS(a,d);else if(BR(g,a,o,l,d))d.stopPropagation();else if(fS(a,d),o&4&&-1<UR.indexOf(a)){for(;g!==null;){var b=fi(g);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var E=xn(b.pendingLanes);if(E!==0){var N=b;for(N.pendingLanes|=2,N.entangledLanes|=2;E;){var z=1<<31-xt(E);N.entanglements[1]|=z,E&=~z}oa(b),(it&6)===0&&(td=Ye()+500,Fl(0))}}break;case 31:case 13:N=io(b,2),N!==null&&Vr(N,b,2),nd(),ov(b,2)}if(b=lv(d),b===null&&Gp(a,o,d,bd,l),b===g)break;g=b}g!==null&&d.stopPropagation()}else Gp(a,o,d,null,l)}}function lv(a){return a=uh(a),cv(a)}var bd=null;function cv(a){if(bd=null,a=$n(a),a!==null){var o=s(a);if(o===null)a=null;else{var l=o.tag;if(l===13){if(a=c(o),a!==null)return a;a=null}else if(l===31){if(a=u(o),a!==null)return a;a=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return bd=a,null}function dS(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($r()){case bn:return 2;case Pr:return 8;case Ar:case me:return 32;case st:return 268435456;default:return 32}default:return 32}}var uv=!1,Di=null,Ti=null,Pi=null,Zl=new Map,Ql=new Map,Mi=[],UR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fS(a,o){switch(a){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":Ti=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Zl.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(o.pointerId)}}function Jl(a,o,l,d,g,b){return a===null||a.nativeEvent!==b?(a={blockedOn:o,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[g]},o!==null&&(o=fi(o),o!==null&&cS(o)),a):(a.eventSystemFlags|=d,o=a.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),a)}function BR(a,o,l,d,g){switch(o){case"focusin":return Di=Jl(Di,a,o,l,d,g),!0;case"dragenter":return Ti=Jl(Ti,a,o,l,d,g),!0;case"mouseover":return Pi=Jl(Pi,a,o,l,d,g),!0;case"pointerover":var b=g.pointerId;return Zl.set(b,Jl(Zl.get(b)||null,a,o,l,d,g)),!0;case"gotpointercapture":return b=g.pointerId,Ql.set(b,Jl(Ql.get(b)||null,a,o,l,d,g)),!0}return!1}function mS(a){var o=$n(a.target);if(o!==null){var l=s(o);if(l!==null){if(o=l.tag,o===13){if(o=c(l),o!==null){a.blockedOn=o,Ji(a.priority,function(){uS(l)});return}}else if(o===31){if(o=u(l),o!==null){a.blockedOn=o,Ji(a.priority,function(){uS(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){a.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}a.blockedOn=null}function _d(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var l=lv(a.nativeEvent);if(l===null){l=a.nativeEvent;var d=new l.constructor(l.type,l);ch=d,l.target.dispatchEvent(d),ch=null}else return o=fi(l),o!==null&&cS(o),a.blockedOn=l,!1;o.shift()}return!0}function hS(a,o,l){_d(a)&&l.delete(o)}function $R(){uv=!1,Di!==null&&_d(Di)&&(Di=null),Ti!==null&&_d(Ti)&&(Ti=null),Pi!==null&&_d(Pi)&&(Pi=null),Zl.forEach(hS),Ql.forEach(hS)}function xd(a,o){a.blockedOn===o&&(a.blockedOn=null,uv||(uv=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$R)))}var wd=null;function pS(a){wd!==a&&(wd=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){wd===a&&(wd=null);for(var o=0;o<a.length;o+=3){var l=a[o],d=a[o+1],g=a[o+2];if(typeof d!="function"){if(cv(d||l)===null)continue;break}var b=fi(l);b!==null&&(a.splice(o,3),o-=3,lp(b,{pending:!0,data:g,method:l.method,action:d},d,g))}}))}function Ds(a){function o(z){return xd(z,a)}Di!==null&&xd(Di,a),Ti!==null&&xd(Ti,a),Pi!==null&&xd(Pi,a),Zl.forEach(o),Ql.forEach(o);for(var l=0;l<Mi.length;l++){var d=Mi[l];d.blockedOn===a&&(d.blockedOn=null)}for(;0<Mi.length&&(l=Mi[0],l.blockedOn===null);)mS(l),l.blockedOn===null&&Mi.shift();if(l=(a.ownerDocument||a).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var g=l[d],b=l[d+1],E=g[ar]||null;if(typeof b=="function")E||pS(l);else if(E){var N=null;if(b&&b.hasAttribute("formAction")){if(g=b,E=b[ar]||null)N=E.formAction;else if(cv(g)!==null)continue}else N=E.action;typeof N=="function"?l[d+1]=N:(l.splice(d,3),d-=3),pS(l)}}}function vS(){function a(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(E){return g=E})},focusReset:"manual",scroll:"manual"})}function o(){g!==null&&(g(),g=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,g=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),g!==null&&(g(),g=null)}}}function dv(a){this._internalRoot=a}jd.prototype.render=dv.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var l=o.current,d=ln();sS(l,d,a,o,null,null)},jd.prototype.unmount=dv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;sS(a.current,2,null,a,null,null),nd(),o[ra]=null}};function jd(a){this._internalRoot=a}jd.prototype.unstable_scheduleHydration=function(a){if(a){var o=Qi();a={blockedOn:null,target:a,priority:o};for(var l=0;l<Mi.length&&o!==0&&o<Mi[l].priority;l++);Mi.splice(l,0,a),l===0&&mS(a)}};var gS=t.version;if(gS!=="19.2.0")throw Error(n(527,gS,"19.2.0"));I.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(o),a=a!==null?p(a):null,a=a===null?null:a.stateNode,a};var HR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sd.isDisabled&&Sd.supportsFiber)try{Rr=Sd.inject(HR),vt=Sd}catch{}}return tc.createRoot=function(a,o){if(!i(a))throw Error(n(299));var l=!1,d="",g=Sw,b=Ew,E=Ow;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(E=o.onRecoverableError)),o=iS(a,1,!1,null,null,l,d,null,g,b,E,vS),a[ra]=o.current,Yp(a),new dv(o)},tc.hydrateRoot=function(a,o,l){if(!i(a))throw Error(n(299));var d=!1,g="",b=Sw,E=Ew,N=Ow,z=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(z=l.formState)),o=iS(a,1,!0,o,l??null,d,g,z,b,E,N,vS),o.context=oS(null),l=o.current,d=ln(),d=ul(d),g=bi(d),g.callback=null,_i(l,g,d),l=d,o.current.lanes=l,ya(o,l),oa(o),a[ra]=o.current,Yp(a),new jd(o)},tc.version="19.2.0",tc}var OS;function Pq(){if(OS)return mv.exports;OS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),mv.exports=Tq(),mv.exports}var Mq=Pq();const Rq=Qa(Mq);var CS="popstate";function AS(e){return typeof e=="object"&&e!=null&&"pathname"in e&&"search"in e&&"hash"in e&&"state"in e&&"key"in e}function qq(e={}){function t(n,i){let s=i.state?.masked,{pathname:c,search:u,hash:m}=s||n.location;return uy("",{pathname:c,search:u,hash:m},i.state&&i.state.usr||null,i.state&&i.state.key||"default",s?{pathname:n.location.pathname,search:n.location.search,hash:n.location.hash}:void 0)}function r(n,i){return typeof i=="string"?i:xc(i)}return Lq(t,r,null,e)}function Pt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zq(){return Math.random().toString(36).substring(2,10)}function NS(e,t){return{usr:e.state,key:e.key,idx:t,masked:e.unstable_mask?{pathname:e.pathname,search:e.search,hash:e.hash}:void 0}}function uy(e,t,r=null,n,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ws(t):t,state:r,key:t&&t.key||n||zq(),unstable_mask:i}}function xc({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ws(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Lq(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,c=i.history,u="POP",m=null,h=p();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function p(){return(c.state||{idx:null}).idx}function v(){u="POP";let S=p(),O=S==null?null:S-h;h=S,m&&m({action:u,location:j.location,delta:O})}function _(S,O){u="PUSH";let C=AS(S)?S:uy(j.location,S,O);h=p()+1;let A=NS(C,h),k=j.createHref(C.unstable_mask||C);try{c.pushState(A,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(k)}s&&m&&m({action:u,location:j.location,delta:1})}function x(S,O){u="REPLACE";let C=AS(S)?S:uy(j.location,S,O);h=p();let A=NS(C,h),k=j.createHref(C.unstable_mask||C);c.replaceState(A,"",k),s&&m&&m({action:u,location:j.location,delta:0})}function w(S){return Iq(S)}let j={get action(){return u},get location(){return e(i,c)},listen(S){if(m)throw new Error("A history only accepts one active listener");return i.addEventListener(CS,v),m=S,()=>{i.removeEventListener(CS,v),m=null}},createHref(S){return t(i,S)},createURL:w,encodeLocation(S){let O=w(S);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:_,replace:x,go(S){return c.go(S)}};return j}function Iq(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Pt(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:xc(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function tN(e,t,r="/"){return Uq(e,t,r,!1)}function Uq(e,t,r,n){let i=typeof t=="string"?Ws(t):t,s=Fa(i.pathname||"/",r);if(s==null)return null;let c=rN(e);Bq(c);let u=null;for(let m=0;u==null&&m<c.length;++m){let h=Qq(s);u=Xq(c[m],h,n)}return u}function rN(e,t=[],r=[],n="",i=!1){let s=(c,u,m=i,h)=>{let p={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&m)return;Pt(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let v=ua([n,p.relativePath]),_=r.concat(p);c.children&&c.children.length>0&&(Pt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),rN(c.children,t,_,v,m)),!(c.path==null&&!c.index)&&t.push({path:v,score:Vq(v,c.index),routesMeta:_})};return e.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))s(c,u);else for(let m of nN(c.path))s(c,u,!0,m)}),t}function nN(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let c=nN(n.join("/")),u=[];return u.push(...c.map(m=>m===""?s:[s,m].join("/"))),i&&u.push(...c),u.map(m=>e.startsWith("/")&&m===""?"/":m)}function Bq(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Wq(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var $q=/^:[\w-]+$/,Hq=3,Fq=2,Kq=1,Yq=10,Gq=-2,kS=e=>e==="*";function Vq(e,t){let r=e.split("/"),n=r.length;return r.some(kS)&&(n+=Gq),t&&(n+=Fq),r.filter(i=>!kS(i)).reduce((i,s)=>i+($q.test(s)?Hq:s===""?Kq:Yq),n)}function Wq(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Xq(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",c=[];for(let u=0;u<n.length;++u){let m=n[u],h=u===n.length-1,p=s==="/"?t:t.slice(s.length)||"/",v=ff({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},p),_=m.route;if(!v&&h&&r&&!n[n.length-1].route.index&&(v=ff({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},p)),!v)return null;Object.assign(i,v.params),c.push({params:i,pathname:ua([s,v.pathname]),pathnameBase:rz(ua([s,v.pathnameBase])),route:_}),v.pathnameBase!=="/"&&(s=ua([s,v.pathnameBase]))}return c}function ff(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Zq(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],c=s.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((h,{paramName:p,isOptional:v},_)=>{if(p==="*"){let w=u[_]||"";c=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const x=u[_];return v&&!x?h[p]=void 0:h[p]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:s,pathnameBase:c,pattern:e}}function Zq(e,t=!1,r=!0){Zn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,m,h,p)=>{if(n.push({paramName:u,isOptional:m!=null}),m){let v=p.charAt(h+c.length);return v&&v!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Qq(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Fa(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}var Jq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ez(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Ws(e):e,s;return r?(r=r.replace(/\/\/+/g,"/"),r.startsWith("/")?s=DS(r.substring(1),"/"):s=DS(r,t)):s=t,{pathname:s,search:nz(n),hash:az(i)}}function DS(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function vv(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tz(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function jb(e){let t=tz(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function lm(e,t,r,n=!1){let i;typeof e=="string"?i=Ws(e):(i={...e},Pt(!i.pathname||!i.pathname.includes("?"),vv("?","pathname","search",i)),Pt(!i.pathname||!i.pathname.includes("#"),vv("#","pathname","hash",i)),Pt(!i.search||!i.search.includes("#"),vv("#","search","hash",i)));let s=e===""||i.pathname==="",c=s?"/":i.pathname,u;if(c==null)u=r;else{let v=t.length-1;if(!n&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),v-=1;i.pathname=_.join("/")}u=v>=0?t[v]:"/"}let m=ez(i,u),h=c&&c!=="/"&&c.endsWith("/"),p=(s||c===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(h||p)&&(m.pathname+="/"),m}var ua=e=>e.join("/").replace(/\/\/+/g,"/"),rz=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nz=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,az=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,iz=class{constructor(e,t,r,n=!1){this.status=e,this.statusText=t||"",this.internal=n,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}};function oz(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function sz(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function iN(e,t){let r=e;if(typeof r!="string"||!Jq.test(r))return{absoluteURL:void 0,isExternal:!1,to:r};let n=r,i=!1;if(aN)try{let s=new URL(window.location.href),c=r.startsWith("//")?new URL(s.protocol+r):new URL(r),u=Fa(c.pathname,t);c.origin===s.origin&&u!=null?r=u+c.search+c.hash:i=!0}catch{Zn(!1,`<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oN=["POST","PUT","PATCH","DELETE"];new Set(oN);var lz=["GET",...oN];new Set(lz);var Xs=y.createContext(null);Xs.displayName="DataRouter";var cm=y.createContext(null);cm.displayName="DataRouterState";var cz=y.createContext(!1),sN=y.createContext({isTransitioning:!1});sN.displayName="ViewTransition";var uz=y.createContext(new Map);uz.displayName="Fetchers";var dz=y.createContext(null);dz.displayName="Await";var yn=y.createContext(null);yn.displayName="Navigation";var Lc=y.createContext(null);Lc.displayName="Location";var ea=y.createContext({outlet:null,matches:[],isDataRoute:!1});ea.displayName="Route";var Sb=y.createContext(null);Sb.displayName="RouteError";var lN="REACT_ROUTER_ERROR",fz="REDIRECT",mz="ROUTE_ERROR_RESPONSE";function hz(e){if(e.startsWith(`${lN}:${fz}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function pz(e){if(e.startsWith(`${lN}:${mz}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new iz(t.status,t.statusText,t.data)}catch{}}function vz(e,{relative:t}={}){Pt(Zs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(yn),{hash:i,pathname:s,search:c}=Ic(e,{relative:t}),u=s;return r!=="/"&&(u=s==="/"?r:ua([r,s])),n.createHref({pathname:u,search:c,hash:i})}function Zs(){return y.useContext(Lc)!=null}function pa(){return Pt(Zs(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Lc).location}var cN="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uN(e){y.useContext(yn).static||y.useLayoutEffect(e)}function Eb(){let{isDataRoute:e}=y.useContext(ea);return e?Nz():gz()}function gz(){Pt(Zs(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(Xs),{basename:t,navigator:r}=y.useContext(yn),{matches:n}=y.useContext(ea),{pathname:i}=pa(),s=JSON.stringify(jb(n)),c=y.useRef(!1);return uN(()=>{c.current=!0}),y.useCallback((m,h={})=>{if(Zn(c.current,cN),!c.current)return;if(typeof m=="number"){r.go(m);return}let p=lm(m,JSON.parse(s),i,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ua([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,s,i,e])}y.createContext(null);function dN(){let{matches:e}=y.useContext(ea),t=e[e.length-1];return t?t.params:{}}function Ic(e,{relative:t}={}){let{matches:r}=y.useContext(ea),{pathname:n}=pa(),i=JSON.stringify(jb(r));return y.useMemo(()=>lm(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function yz(e,t){return fN(e,t)}function fN(e,t,r){Pt(Zs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=y.useContext(yn),{matches:i}=y.useContext(ea),s=i[i.length-1],c=s?s.params:{},u=s?s.pathname:"/",m=s?s.pathnameBase:"/",h=s&&s.route;{let S=h&&h.path||"";hN(u,!h||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let p=pa(),v;if(t){let S=typeof t=="string"?Ws(t):t;Pt(m==="/"||S.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${S.pathname}" was given in the \`location\` prop.`),v=S}else v=p;let _=v.pathname||"/",x=_;if(m!=="/"){let S=m.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=tN(e,{pathname:x});Zn(h||w!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Zn(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let j=jz(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:ua([m,n.encodeLocation?n.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?m:ua([m,n.encodeLocation?n.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),i,r);return t&&j?y.createElement(Lc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0,...v},navigationType:"POP"}},j):j}function bz(){let e=Az(),t=oz(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:i},r):null,c)}var _z=y.createElement(bz,null),mN=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const r=pz(e.digest);r&&(e=r)}let t=e!==void 0?y.createElement(ea.Provider,{value:this.props.routeContext},y.createElement(Sb.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?y.createElement(xz,{error:e},t):t}};mN.contextType=cz;var gv=new WeakMap;function xz({children:e,error:t}){let{basename:r}=y.useContext(yn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let n=hz(t.digest);if(n){let i=gv.get(t);if(i)throw i;let s=iN(n.location,r);if(aN&&!gv.get(t))if(s.isExternal||n.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:n.replace}));throw gv.set(t,c),c}return y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return e}function wz({routeContext:e,match:t,children:r}){let n=y.useContext(Xs);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(ea.Provider,{value:e},r)}function jz(e,t=[],r){let n=r?.state;if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n?.errors;if(s!=null){let p=i.findIndex(v=>v.route.id&&s?.[v.route.id]!==void 0);Pt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,p+1))}let c=!1,u=-1;if(r&&n){c=n.renderFallback;for(let p=0;p<i.length;p++){let v=i[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(u=p),v.route.id){let{loaderData:_,errors:x}=n,w=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!x||x[v.route.id]===void 0);if(v.route.lazy||w){r.isStatic&&(c=!0),u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}}let m=r?.onError,h=n&&m?(p,v)=>{m(p,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:sz(n.matches),errorInfo:v})}:void 0;return i.reduceRight((p,v,_)=>{let x,w=!1,j=null,S=null;n&&(x=s&&v.route.id?s[v.route.id]:void 0,j=v.route.errorElement||_z,c&&(u<0&&_===0?(hN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):u===_&&(w=!0,S=v.route.hydrateFallbackElement||null)));let O=t.concat(i.slice(0,_+1)),C=()=>{let A;return x?A=j:w?A=S:v.route.Component?A=y.createElement(v.route.Component,null):v.route.element?A=v.route.element:A=p,y.createElement(wz,{match:v,routeContext:{outlet:p,matches:O,isDataRoute:n!=null},children:A})};return n&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?y.createElement(mN,{location:n.location,revalidation:n.revalidation,component:j,error:x,children:C(),routeContext:{outlet:null,matches:O,isDataRoute:!0},onError:h}):C()},null)}function Ob(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sz(e){let t=y.useContext(Xs);return Pt(t,Ob(e)),t}function Ez(e){let t=y.useContext(cm);return Pt(t,Ob(e)),t}function Oz(e){let t=y.useContext(ea);return Pt(t,Ob(e)),t}function Cb(e){let t=Oz(e),r=t.matches[t.matches.length-1];return Pt(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Cz(){return Cb("useRouteId")}function Az(){let e=y.useContext(Sb),t=Ez("useRouteError"),r=Cb("useRouteError");return e!==void 0?e:t.errors?.[r]}function Nz(){let{router:e}=Sz("useNavigate"),t=Cb("useNavigate"),r=y.useRef(!1);return uN(()=>{r.current=!0}),y.useCallback(async(i,s={})=>{Zn(r.current,cN),r.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var TS={};function hN(e,t,r){!t&&!TS[e]&&(TS[e]=!0,Zn(!1,r))}y.memo(kz);function kz({routes:e,future:t,state:r,isStatic:n,onError:i}){return fN(e,void 0,{state:r,isStatic:n,onError:i})}function bo({to:e,replace:t,state:r,relative:n}){Pt(Zs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(yn);Zn(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=y.useContext(ea),{pathname:c}=pa(),u=Eb(),m=lm(e,jb(s),c,n==="path"),h=JSON.stringify(m);return y.useEffect(()=>{u(JSON.parse(h),{replace:t,state:r,relative:n})},[u,h,n,t,r]),null}function dn(e){Pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Dz({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1,unstable_useTransitions:c}){Pt(!Zs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),m=y.useMemo(()=>({basename:u,navigator:i,static:s,unstable_useTransitions:c,future:{}}),[u,i,s,c]);typeof r=="string"&&(r=Ws(r));let{pathname:h="/",search:p="",hash:v="",state:_=null,key:x="default",unstable_mask:w}=r,j=y.useMemo(()=>{let S=Fa(h,u);return S==null?null:{location:{pathname:S,search:p,hash:v,state:_,key:x,unstable_mask:w},navigationType:n}},[u,h,p,v,_,x,n,w]);return Zn(j!=null,`<Router basename="${u}"> is not able to match the URL "${h}${p}${v}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:y.createElement(yn.Provider,{value:m},y.createElement(Lc.Provider,{children:t,value:j}))}function Tz({children:e,location:t}){return yz(dy(e),t)}function dy(e,t=[]){let r=[];return y.Children.forEach(e,(n,i)=>{if(!y.isValidElement(n))return;let s=[...t,i];if(n.type===y.Fragment){r.push.apply(r,dy(n.props.children,s));return}Pt(n.type===dn,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let c={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(c.children=dy(n.props.children,s)),r.push(c)}),r}var Qd="get",Jd="application/x-www-form-urlencoded";function um(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Pz(e){return um(e)&&e.tagName.toLowerCase()==="button"}function Mz(e){return um(e)&&e.tagName.toLowerCase()==="form"}function Rz(e){return um(e)&&e.tagName.toLowerCase()==="input"}function qz(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function zz(e,t){return e.button===0&&(!t||t==="_self")&&!qz(e)}var Ed=null;function Lz(){if(Ed===null)try{new FormData(document.createElement("form"),0),Ed=!1}catch{Ed=!0}return Ed}var Iz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function yv(e){return e!=null&&!Iz.has(e)?(Zn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jd}"`),null):e}function Uz(e,t){let r,n,i,s,c;if(Mz(e)){let u=e.getAttribute("action");n=u?Fa(u,t):null,r=e.getAttribute("method")||Qd,i=yv(e.getAttribute("enctype"))||Jd,s=new FormData(e)}else if(Pz(e)||Rz(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||u.getAttribute("action");if(n=m?Fa(m,t):null,r=e.getAttribute("formmethod")||u.getAttribute("method")||Qd,i=yv(e.getAttribute("formenctype"))||yv(u.getAttribute("enctype"))||Jd,s=new FormData(u,e),!Lz()){let{name:h,type:p,value:v}=e;if(p==="image"){let _=h?`${h}.`:"";s.append(`${_}x`,"0"),s.append(`${_}y`,"0")}else h&&s.append(h,v)}}else{if(um(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Qd,n=null,i=Jd,c=e}return s&&i==="text/plain"&&(c=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ab(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bz(e,t,r,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${n}`:i.pathname=`${i.pathname}.${n}`:i.pathname==="/"?i.pathname=`_root.${n}`:t&&Fa(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function $z(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Hz(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Fz(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let c=await $z(s,r);return c.links?c.links():[]}return[]}));return Vz(n.flat(1).filter(Hz).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function PS(e,t,r,n,i,s){let c=(m,h)=>r[h]?m.route.id!==r[h].route.id:!0,u=(m,h)=>r[h].pathname!==m.pathname||r[h].route.path?.endsWith("*")&&r[h].params["*"]!==m.params["*"];return s==="assets"?t.filter((m,h)=>c(m,h)||u(m,h)):s==="data"?t.filter((m,h)=>{let p=n.routes[m.route.id];if(!p||!p.hasLoader)return!1;if(c(m,h)||u(m,h))return!0;if(m.route.shouldRevalidate){let v=m.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Kz(e,t,{includeHydrateFallback:r}={}){return Yz(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function Yz(e){return[...new Set(e)]}function Gz(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function Vz(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(Gz(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function pN(){let e=y.useContext(Xs);return Ab(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Wz(){let e=y.useContext(cm);return Ab(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Nb=y.createContext(void 0);Nb.displayName="FrameworkContext";function vN(){let e=y.useContext(Nb);return Ab(e,"You must render this element inside a <HydratedRouter> element"),e}function Xz(e,t){let r=y.useContext(Nb),[n,i]=y.useState(!1),[s,c]=y.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:h,onMouseLeave:p,onTouchStart:v}=t,_=y.useRef(null);y.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let j=O=>{O.forEach(C=>{c(C.isIntersecting)})},S=new IntersectionObserver(j,{threshold:.5});return _.current&&S.observe(_.current),()=>{S.disconnect()}}},[e]),y.useEffect(()=>{if(n){let j=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(j)}}},[n]);let x=()=>{i(!0)},w=()=>{i(!1),c(!1)};return r?e!=="intent"?[s,_,{}]:[s,_,{onFocus:rc(u,x),onBlur:rc(m,w),onMouseEnter:rc(h,x),onMouseLeave:rc(p,w),onTouchStart:rc(v,x)}]:[!1,_,{}]}function rc(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Zz({page:e,...t}){let{router:r}=pN(),n=y.useMemo(()=>tN(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(Jz,{page:e,matches:n,...t}):null}function Qz(e){let{manifest:t,routeModules:r}=vN(),[n,i]=y.useState([]);return y.useEffect(()=>{let s=!1;return Fz(e,t,r).then(c=>{s||i(c)}),()=>{s=!0}},[e,t,r]),n}function Jz({page:e,matches:t,...r}){let n=pa(),{future:i,manifest:s,routeModules:c}=vN(),{basename:u}=pN(),{loaderData:m,matches:h}=Wz(),p=y.useMemo(()=>PS(e,t,h,s,n,"data"),[e,t,h,s,n]),v=y.useMemo(()=>PS(e,t,h,s,n,"assets"),[e,t,h,s,n]),_=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,S=!1;if(t.forEach(C=>{let A=s.routes[C.route.id];!A||!A.hasLoader||(!p.some(k=>k.route.id===C.route.id)&&C.route.id in m&&c[C.route.id]?.shouldRevalidate||A.hasClientLoader?S=!0:j.add(C.route.id))}),j.size===0)return[];let O=Bz(e,u,i.unstable_trailingSlashAwareDataRequests,"data");return S&&j.size>0&&O.searchParams.set("_routes",t.filter(C=>j.has(C.route.id)).map(C=>C.route.id).join(",")),[O.pathname+O.search]},[u,i.unstable_trailingSlashAwareDataRequests,m,n,s,p,t,e,c]),x=y.useMemo(()=>Kz(v,s),[v,s]),w=Qz(v);return y.createElement(y.Fragment,null,_.map(j=>y.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),x.map(j=>y.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),w.map(({key:j,link:S})=>y.createElement("link",{key:j,nonce:r.nonce,...S,crossOrigin:S.crossOrigin??r.crossOrigin})))}function eL(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var tL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tL&&(window.__reactRouterVersion="7.13.1")}catch{}function rL({basename:e,children:t,unstable_useTransitions:r,window:n}){let i=y.useRef();i.current==null&&(i.current=qq({window:n,v5Compat:!0}));let s=i.current,[c,u]=y.useState({action:s.action,location:s.location}),m=y.useCallback(h=>{r===!1?u(h):y.startTransition(()=>u(h))},[r]);return y.useLayoutEffect(()=>s.listen(m),[s,m]),y.createElement(Dz,{basename:e,children:t,location:c.location,navigationType:c.action,navigator:s,unstable_useTransitions:r})}var gN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yN=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:c,unstable_mask:u,state:m,target:h,to:p,preventScrollReset:v,viewTransition:_,unstable_defaultShouldRevalidate:x,...w},j){let{basename:S,navigator:O,unstable_useTransitions:C}=y.useContext(yn),A=typeof p=="string"&&gN.test(p),k=iN(p,S);p=k.to;let D=vz(p,{relative:i}),M=pa(),L=null;if(u){let q=lm(u,[],M.unstable_mask?M.unstable_mask.pathname:"/",!0);S!=="/"&&(q.pathname=q.pathname==="/"?S:ua([S,q.pathname])),L=O.createHref(q)}let[X,re,ae]=Xz(n,w),G=oL(p,{replace:c,unstable_mask:u,state:m,target:h,preventScrollReset:v,relative:i,viewTransition:_,unstable_defaultShouldRevalidate:x,unstable_useTransitions:C});function U(q){t&&t(q),q.defaultPrevented||G(q)}let ue=!(k.isExternal||s),ve=y.createElement("a",{...w,...ae,href:(ue?L:void 0)||k.absoluteURL||D,onClick:ue?U:t,ref:eL(j,re),target:h,"data-discover":!A&&r==="render"?"true":void 0});return X&&!A?y.createElement(y.Fragment,null,ve,y.createElement(Zz,{page:D})):ve});yN.displayName="Link";var nL=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:c,viewTransition:u,children:m,...h},p){let v=Ic(c,{relative:h.relative}),_=pa(),x=y.useContext(cm),{navigator:w,basename:j}=y.useContext(yn),S=x!=null&&dL(v)&&u===!0,O=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,C=_.pathname,A=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;r||(C=C.toLowerCase(),A=A?A.toLowerCase():null,O=O.toLowerCase()),A&&j&&(A=Fa(A,j)||A);const k=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let D=C===O||!i&&C.startsWith(O)&&C.charAt(k)==="/",M=A!=null&&(A===O||!i&&A.startsWith(O)&&A.charAt(O.length)==="/"),L={isActive:D,isPending:M,isTransitioning:S},X=D?t:void 0,re;typeof n=="function"?re=n(L):re=[n,D?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let ae=typeof s=="function"?s(L):s;return y.createElement(yN,{...h,"aria-current":X,className:re,ref:p,style:ae,to:c,viewTransition:u},typeof m=="function"?m(L):m)});nL.displayName="NavLink";var aL=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:c=Qd,action:u,onSubmit:m,relative:h,preventScrollReset:p,viewTransition:v,unstable_defaultShouldRevalidate:_,...x},w)=>{let{unstable_useTransitions:j}=y.useContext(yn),S=cL(),O=uL(u,{relative:h}),C=c.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&gN.test(u),k=D=>{if(m&&m(D),D.defaultPrevented)return;D.preventDefault();let M=D.nativeEvent.submitter,L=M?.getAttribute("formmethod")||c,X=()=>S(M||D.currentTarget,{fetcherKey:t,method:L,navigate:r,replace:i,state:s,relative:h,preventScrollReset:p,viewTransition:v,unstable_defaultShouldRevalidate:_});j&&r!==!1?y.startTransition(()=>X()):X()};return y.createElement("form",{ref:w,method:C,action:O,onSubmit:n?m:k,...x,"data-discover":!A&&e==="render"?"true":void 0})});aL.displayName="Form";function iL(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bN(e){let t=y.useContext(Xs);return Pt(t,iL(e)),t}function oL(e,{target:t,replace:r,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m,unstable_useTransitions:h}={}){let p=Eb(),v=pa(),_=Ic(e,{relative:c});return y.useCallback(x=>{if(zz(x,t)){x.preventDefault();let w=r!==void 0?r:xc(v)===xc(_),j=()=>p(e,{replace:w,unstable_mask:n,state:i,preventScrollReset:s,relative:c,viewTransition:u,unstable_defaultShouldRevalidate:m});h?y.startTransition(()=>j()):j()}},[v,p,_,r,n,i,t,e,s,c,u,m,h])}var sL=0,lL=()=>`__${String(++sL)}__`;function cL(){let{router:e}=bN("useSubmit"),{basename:t}=y.useContext(yn),r=Cz(),n=e.fetch,i=e.navigate;return y.useCallback(async(s,c={})=>{let{action:u,method:m,encType:h,formData:p,body:v}=Uz(s,t);if(c.navigate===!1){let _=c.fetcherKey||lL();await n(_,r,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:v,formMethod:c.method||m,formEncType:c.encType||h,flushSync:c.flushSync})}else await i(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:v,formMethod:c.method||m,formEncType:c.encType||h,replace:c.replace,state:c.state,fromRouteId:r,flushSync:c.flushSync,viewTransition:c.viewTransition})},[n,i,t,r])}function uL(e,{relative:t}={}){let{basename:r}=y.useContext(yn),n=y.useContext(ea);Pt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...Ic(e||".",{relative:t})},c=pa();if(e==null){s.search=c.search;let u=new URLSearchParams(s.search),m=u.getAll("index");if(m.some(p=>p==="")){u.delete("index"),m.filter(v=>v).forEach(v=>u.append("index",v));let p=u.toString();s.search=p?`?${p}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:ua([r,s.pathname])),xc(s)}function dL(e,{relative:t}={}){let r=y.useContext(sN);Pt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=bN("useViewTransitionState"),i=Ic(e,{relative:t});if(!r.isTransitioning)return!1;let s=Fa(r.currentLocation.pathname,n)||r.currentLocation.pathname,c=Fa(r.nextLocation.pathname,n)||r.nextLocation.pathname;return ff(i.pathname,c)!=null||ff(i.pathname,s)!=null}var _N=JA();function fL(e,t,r=[]){if(!e||!t)return{hasConflict:!1,conflicts:[]};const n=new Date(e._offlineModifiedAt||e.updated_at||0),i=new Date(t.updated_at||0),s=new Date(e._cachedAt||0);if(i<=s)return{hasConflict:!1,conflicts:[]};const c=[],u=r.length>0?r:Object.keys(e).filter(m=>!m.startsWith("_")&&m!=="id"&&m!=="created_at");for(const m of u){const h=e[m],p=t[m];if(h!==void 0&&p!==void 0&&!ef(h,p)){const v=e._cachedValues?.[m],_=v!==void 0?!ef(h,v):!0,x=v!==void 0?!ef(p,v):!0;_&&x&&c.push({field:m,localValue:h,serverValue:p,cachedValue:v})}}return{hasConflict:c.length>0,conflicts:c,localModifiedAt:n,serverUpdatedAt:i}}function ef(e,t){if(e===t)return!0;if(e==null||t==null)return e===t;if(typeof e!=typeof t)return!1;if(typeof e!="object")return e===t;if(Array.isArray(e)!==Array.isArray(t))return!1;const r=Object.keys(e),n=Object.keys(t);return r.length!==n.length?!1:r.every(i=>ef(e[i],t[i]))}const mL={KEEP_LOCAL:"keep_local",KEEP_SERVER:"keep_server",MERGE:"merge"};function hL(e,t=[]){const r={...e,_cachedAt:new Date().toISOString()};if(t.length>0){r._cachedValues={};for(const n of t)e[n]!==void 0&&(r._cachedValues[n]=JSON.parse(JSON.stringify(e[n])))}return r}function pL(e,t="record"){if(!e.hasConflict)return null;if(e.deletedOnServer)return{title:`${MS(t)} was deleted`,description:`This ${t} was deleted by another user while you were offline.`,severity:"warning",conflictCount:1};const r=e.conflicts.map(n=>n.field).join(", ");return{title:`${MS(t)} was modified`,description:`The following fields were changed by another user: ${r}`,severity:e.conflicts.length>2?"warning":"info",conflictCount:e.conflicts.length,fields:e.conflicts}}function MS(e){return e.charAt(0).toUpperCase()+e.slice(1)}const vL="fieldsync-offline",gL=2,et={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let So=null;const ei=()=>new Promise((e,t)=>{if(So){e(So);return}const r=indexedDB.open(vL,gL);r.onerror=()=>{console.error("Failed to open offline database"),t(r.error)},r.onsuccess=()=>{So=r.result,e(So)},r.onupgradeneeded=n=>{const i=n.target.result;if(i.objectStoreNames.contains(et.PROJECTS)||i.createObjectStore(et.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),i.objectStoreNames.contains(et.AREAS)||i.createObjectStore(et.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(et.CREW_CHECKINS)||i.createObjectStore(et.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(et.TM_TICKETS)||i.createObjectStore(et.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(et.DAILY_REPORTS)||i.createObjectStore(et.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),i.objectStoreNames.contains(et.MESSAGES)||i.createObjectStore(et.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!i.objectStoreNames.contains(et.PENDING_ACTIONS)){const s=i.createObjectStore(et.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});s.createIndex("type","type",{unique:!1}),s.createIndex("created_at","created_at",{unique:!1})}i.objectStoreNames.contains(et.CACHED_DATA)||i.createObjectStore(et.CACHED_DATA,{keyPath:"key"})}}),Fo=(e,t="readonly")=>{if(!So)throw new Error("Database not initialized");return So.transaction(e,t).objectStore(e)},Uc=async(e,t)=>(await ei(),new Promise((r,n)=>{const s=Fo(e,"readwrite").put(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),xN=async(e,t)=>(await ei(),new Promise((r,n)=>{const i=So.transaction(e,"readwrite"),s=i.objectStore(e);t.forEach(c=>s.put(c)),i.oncomplete=()=>r(),i.onerror=()=>n(i.error)})),wN=async(e,t)=>(await ei(),new Promise((r,n)=>{const s=Fo(e).get(t);s.onsuccess=()=>r(s.result),s.onerror=()=>n(s.error)})),jN=async e=>(await ei(),new Promise((t,r)=>{const i=Fo(e).getAll();i.onsuccess=()=>t(i.result||[]),i.onerror=()=>r(i.error)})),kb=async(e,t,r)=>(await ei(),new Promise((n,i)=>{const u=Fo(e).index(t).getAll(r);u.onsuccess=()=>n(u.result||[]),u.onerror=()=>i(u.error)})),yL=async(e,t)=>(await ei(),new Promise((r,n)=>{const s=Fo(e,"readwrite").delete(t);s.onsuccess=()=>r(),s.onerror=()=>n(s.error)})),Wt={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},cn=async(e,t,r={})=>{await ei();const n={type:e,payload:t,metadata:r,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((i,s)=>{const u=Fo(et.PENDING_ACTIONS,"readwrite").add(n);u.onsuccess=()=>{i(u.result)},u.onerror=()=>s(u.error)})},SN=async()=>jN(et.PENDING_ACTIONS),tf=async()=>(await SN()).length,RS=async e=>yL(et.PENDING_ACTIONS,e),bL=async(e,t)=>(await ei(),new Promise((r,n)=>{const i=Fo(et.PENDING_ACTIONS,"readwrite"),s=i.get(e);s.onsuccess=()=>{const c=s.result;if(c){const u={...c,...t},m=i.put(u);m.onsuccess=()=>r(u),m.onerror=()=>n(m.error)}else n(new Error("Action not found"))},s.onerror=()=>n(s.error)})),_L=async e=>xN(et.PROJECTS,e),qS=async e=>e?kb(et.PROJECTS,"company_id",e):jN(et.PROJECTS),xL=async e=>{const t=e.map(r=>hL(r,["status","weight","name"]));return xN(et.AREAS,t)},zS=async e=>kb(et.AREAS,"project_id",e),bv=async(e,t)=>{const r=await wN(et.AREAS,e);return r&&(r.status=t,r.updated_at=new Date().toISOString(),r._offlineModifiedAt=new Date().toISOString(),await Uc(et.AREAS,r)),r},Od=async e=>Uc(et.CREW_CHECKINS,e),LS=async e=>Uc(et.TM_TICKETS,e),Wr=()=>{const e=new Uint8Array(6);crypto.getRandomValues(e);const t=Array.from(e,r=>r.toString(36)).join("");return`temp_${Date.now()}_${t}`},Ts=async e=>Uc(et.DAILY_REPORTS,e),wL=async(e,t)=>(await kb(et.DAILY_REPORTS,"project_id",e)).find(n=>n.report_date===t)||null,IS=async e=>Uc(et.MESSAGES,e);let Db=typeof navigator<"u"?navigator.onLine:!0;const fy=new Set,Tb=e=>(fy.add(e),()=>fy.delete(e)),Rn=()=>Db,US=e=>{Db=e,fy.forEach(t=>t(e))};typeof window<"u"&&(window.addEventListener("online",()=>{US(!0)}),window.addEventListener("offline",()=>{US(!1)}));let _v=!1;const EN=async(e,t={})=>{if(_v||!Db)return{synced:0,failed:0,conflicts:[]};const{onConflict:r}=t;_v=!0;const n={synced:0,failed:0,conflicts:[]};try{const i=await SN();for(const s of i)try{if(s.payload?.id&&s.type===Wt.UPDATE_AREA_STATUS){const c=await jL(e,s.type,s.payload);if(c){const u=await wN(et.AREAS,s.payload.areaId||s.payload.id);if(u){const m=fL(u,c,["status"]);if(m.hasConflict){const h=pL(m,"area");if(n.conflicts.push({action:s,conflict:m,summary:h}),r&&await r({action:s,conflict:m,summary:h})===mL.KEEP_SERVER){await RS(s.id);continue}}}}}await SL(s,e),await RS(s.id),n.synced++}catch(c){n.failed++,await bL(s.id,{attempts:(s.attempts||0)+1,last_error:c.message,last_attempt:new Date().toISOString()})}}finally{_v=!1}return n},jL=async(e,t,r)=>{try{switch(t){case Wt.UPDATE_AREA_STATUS:return e.getArea?await e.getArea(r.areaId):null;default:return null}}catch{return null}},SL=async(e,t)=>{const{type:r,payload:n}=e;switch(r){case Wt.UPDATE_AREA_STATUS:return t.updateAreaStatus(n.areaId,n.status);case Wt.CREATE_TM_TICKET:{const i=await t.createTMTicket(n.ticket);return n.workers?.length>0&&await t.addTMWorkers(i.id,n.workers),n.items?.length>0&&await t.addTMItems(i.id,n.items),i}case Wt.SAVE_CREW_CHECKIN:return t.saveCrewCheckin(n.projectId,n.workers,n.checkInDate);case Wt.SUBMIT_DAILY_REPORT:return await t.saveDailyReport(n.projectId,n.reportData),t.submitDailyReport(n.projectId,n.submittedBy);case Wt.SEND_MESSAGE:return t.sendMessage(n.projectId,n.senderType,n.senderName,n.content);case Wt.CREATE_MATERIAL_REQUEST:return t.createMaterialRequest(n.projectId,n.items,n.requestedBy,n.neededBy,n.priority,n.notes);default:throw new Error(`Unknown action type: ${r}`)}},Pb="",ON="",P=!!Pb,T=P?eN(Pb,ON):null,Cd={slowQueryThreshold:200,enableSupabase:P},Ke={query(e,t){const r={type:"query",operation:e,duration_ms:t.duration,rows_returned:t.rows,company_id:t.company_id||null,project_id:t.project_id||null,user_id:t.user_id||null,timestamp:new Date().toISOString()};Cd.enableSupabase&&t.duration>=Cd.slowQueryThreshold&&xv("query",r)},error(e,t){const r={type:"error",category:e,severity:t.severity||"error",error_code:t.code||null,message:t.message,company_id:t.company_id||null,user_id:t.user_id||null,project_id:t.project_id||null,operation:t.operation||null,context:t.extra||{},timestamp:new Date().toISOString()};Cd.enableSupabase&&xv("error",r)},storage(e,t){const r={type:"storage",operation:e,company_id:t.company_id||null,project_id:t.project_id||null,file_size_bytes:t.size||0,duration_ms:t.duration||0,success:t.success!==!1,error_message:t.error||null,timestamp:new Date().toISOString()};Cd.enableSupabase&&(!r.success||r.duration_ms>5e3)&&xv("storage",r)},activity(e,t){}};async function xv(e,t){if(T)try{e==="error"?await T.rpc("log_error",{p_severity:t.severity,p_category:t.category,p_message:t.message,p_company_id:t.company_id,p_user_id:t.user_id,p_project_id:t.project_id,p_operation:t.operation,p_error_code:t.error_code,p_context:t.context||{}}):e==="query"&&await T.rpc("log_query_metric",{p_operation:t.operation,p_duration_ms:t.duration_ms,p_rows_returned:t.rows_returned,p_company_id:t.company_id,p_project_id:t.project_id,p_user_id:t.user_id,p_context:{}})}catch{}}Ke.wrapQuery=function(e,t){return async function(...r){const n=performance.now();try{const i=await t.apply(this,r),c={duration:Math.round(performance.now()-n),rows:Array.isArray(i)?i.length:void 0};return Ke.query(e,c),i}catch(i){const s=Math.round(performance.now()-n);throw Ke.error("database",{message:i.message,operation:e,severity:"error",extra:{duration:s}}),i}}};Ke.time=async function(e,t){const r=performance.now();try{const n=await t(),i=Math.round(performance.now()-r);return Ke.query(e,{duration:i}),n}catch(n){throw Ke.error("general",{message:n.message,operation:e}),n}};const my="fieldsync_field_session";let pc=null;const Bc=()=>{if(pc)return pc;try{const e=sessionStorage.getItem(my);if(e)return pc=JSON.parse(e),pc}catch{}return null},hy=e=>{pc=e,e?sessionStorage.setItem(my,JSON.stringify(e)):sessionStorage.removeItem(my)},py=async()=>{const e=Bc();if(e?.token&&P)try{await T.rpc("invalidate_field_session",{p_session_token:e.token})}catch{}hy(null)};let nc=null;const Mb=()=>{const e=Bc();return!e?.token||!P?T:((!nc||nc._sessionToken!==e.token)&&(nc=eN(Pb,ON,{global:{headers:{"x-field-session":e.token}}}),nc._sessionToken=e.token),nc)},Ii=()=>Bc()?.token?Mb():T,xe=()=>P?Bc()?.token?Mb():T:null,vy=()=>{const e=Bc();return!!(e?.token&&e?.projectId)},gy="fieldsync_data",mf="fieldsync_user",BS={projects:[],areas:[],users:[],assignments:[]},Oe=()=>{try{const e=localStorage.getItem(gy);return e?JSON.parse(e):BS}catch{return localStorage.removeItem(gy),BS}},Ge=e=>{localStorage.setItem(gy,JSON.stringify(e))},Ad=()=>{try{const e=localStorage.getItem(mf);return e?JSON.parse(e):null}catch{return localStorage.removeItem(mf),null}},Nd=e=>{e?localStorage.setItem(mf,JSON.stringify(e)):localStorage.removeItem(mf)},EL={async createCOR(e,t=0){if(P){let r=e.cor_number;t>0&&(r=await this.getNextCORNumber(e.project_id));const{data:n,error:i}=await T.from("change_orders").insert({company_id:e.company_id,project_id:e.project_id,area_id:e.area_id||null,cor_number:r,title:e.title,description:e.description||"",scope_of_work:e.scope_of_work,period_start:e.period_start,period_end:e.period_end,status:"draft",labor_markup_percent:e.labor_markup_percent??1500,materials_markup_percent:e.materials_markup_percent??1500,equipment_markup_percent:e.equipment_markup_percent??1500,subcontractors_markup_percent:e.subcontractors_markup_percent??500,liability_insurance_percent:e.liability_insurance_percent??144,bond_percent:e.bond_percent??100,license_fee_percent:e.license_fee_percent??10,created_by:e.created_by||null}).select().single();if((i?.code==="23505"||i?.code==="PGRST116"||i?.status===409||i?.message?.includes("duplicate")||i?.message?.includes("unique_cor_number"))&&t<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${t+1})`),this.createCOR(e,t+1);if(i)throw i;return n}return null},async updateCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteCOR(e){if(P){const{error:t}=await T.from("change_orders").delete().eq("id",e);if(t)throw t}},async bulkUpdateCORGroup(e,t){if(P){const{error:r}=await T.from("change_orders").update({group_name:t,updated_at:new Date().toISOString()}).in("id",e);if(r)throw r.message?.includes("group_name")||r.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):r}},async getCORs(e,t={}){if(P){let r=T.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",e);t.status&&(r=r.eq("status",t.status)),t.area_id&&(r=r.eq("area_id",t.area_id)),t.date_start&&(r=r.gte("period_start",t.date_start)),t.date_end&&(r=r.lte("period_end",t.date_end)),r=r.order("created_at",{ascending:!1});const{data:n,error:i}=await r;if(i)throw i;return n}return[]},async getCORById(e){if(P){const{data:t,error:r}=await T.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",e).single();if(r)throw r;return t}return null},async getCORsByArea(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").select("*").eq("project_id",e).eq("area_id",t).order("created_at",{ascending:!1});if(n)throw n;return r}return[]},async getAssignableCORs(e){if(P){const t=xe();if(!t)return[];const{data:r,error:n}=await t.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",e).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(n)throw n;return r||[]}return[]},async getNextCORNumber(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("cor_number").eq("project_id",e);if(r)throw r;if(t&&t.length>0){let n=0;for(const i of t){const s=i.cor_number?.match(/COR #(\d+)/);if(s){const c=parseInt(s[1]);c>n&&(n=c)}}return`COR #${n+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(e,t){if(P){const r=Math.round(t.regular_hours*t.regular_rate),n=Math.round(t.overtime_hours*t.overtime_rate),i=r+n,{data:s,error:c}=await T.from("change_order_labor").insert({change_order_id:e,labor_class:t.labor_class,wage_type:t.wage_type||"standard",regular_hours:t.regular_hours||0,overtime_hours:t.overtime_hours||0,regular_rate:t.regular_rate||0,overtime_rate:t.overtime_rate||0,regular_total:r,overtime_total:n,total:i,sort_order:t.sort_order||0,source_ticket_id:t.source_ticket_id||null}).select().single();if(c)throw c;return s}return null},async updateCORLaborItem(e,t){if(P){let r={...t};if(t.regular_hours!==void 0||t.regular_rate!==void 0||t.overtime_hours!==void 0||t.overtime_rate!==void 0){const{data:s}=await T.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",e).single(),c=t.regular_hours??s?.regular_hours??0,u=t.overtime_hours??s?.overtime_hours??0,m=t.regular_rate??s?.regular_rate??0,h=t.overtime_rate??s?.overtime_rate??0;r.regular_total=Math.round(c*m),r.overtime_total=Math.round(u*h),r.total=r.regular_total+r.overtime_total}const{data:n,error:i}=await T.from("change_order_labor").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORLaborItem(e){if(P){const{error:t}=await T.from("change_order_labor").delete().eq("id",e);if(t)throw t}},async addCORMaterialItem(e,t){if(P){const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_materials").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"each",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCORMaterialItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_materials").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_materials").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORMaterialItem(e){if(P){const{error:t}=await T.from("change_order_materials").delete().eq("id",e);if(t)throw t}},async addCOREquipmentItem(e,t){if(P){const n=["backup_sheet","invoice","custom","field_ticket","rental"].includes(t.source_type)?t.source_type:"custom",i=Math.round(Number(t.unit_cost)||0),s=Number(t.quantity)||1,c=Math.round(s*i),{data:u,error:m}=await T.from("change_order_equipment").insert({change_order_id:e,description:t.description||"",quantity:s,unit:t.unit||"day",unit_cost:i,total:c,source_type:n,source_reference:t.source_reference||null,source_ticket_id:t.source_ticket_id||null,sort_order:t.sort_order||0}).select().single();if(m)throw m;return u}return null},async updateCOREquipmentItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_equipment").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_equipment").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCOREquipmentItem(e){if(P){const{error:t}=await T.from("change_order_equipment").delete().eq("id",e);if(t)throw t}},async addCORSubcontractorItem(e,t){if(P){const r=Math.round(t.quantity*t.unit_cost),{data:n,error:i}=await T.from("change_order_subcontractors").insert({change_order_id:e,description:t.description,quantity:t.quantity||1,unit:t.unit||"lump sum",unit_cost:t.unit_cost||0,total:r,source_type:t.source_type||"custom",source_reference:t.source_reference||null,sort_order:t.sort_order||0}).select().single();if(i)throw i;return n}return null},async updateCORSubcontractorItem(e,t){if(P){let r={...t};if(t.quantity!==void 0||t.unit_cost!==void 0){const{data:s}=await T.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",e).single(),c=t.quantity??s?.quantity??1,u=t.unit_cost??s?.unit_cost??0;r.total=Math.round(c*u)}const{data:n,error:i}=await T.from("change_order_subcontractors").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteCORSubcontractorItem(e){if(P){const{error:t}=await T.from("change_order_subcontractors").delete().eq("id",e);if(t)throw t}},async addBulkLaborItems(e,t){if(P&&t.length>0){const r=xe();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>{const m=Math.round(c.regular_hours*c.regular_rate),h=Math.round(c.overtime_hours*c.overtime_rate);return{change_order_id:e,labor_class:c.labor_class,wage_type:c.wage_type||"standard",regular_hours:c.regular_hours||0,overtime_hours:c.overtime_hours||0,regular_rate:c.regular_rate||0,overtime_rate:c.overtime_rate||0,regular_total:m,overtime_total:h,total:m+h,sort_order:c.sort_order??u,source_ticket_id:c.source_ticket_id||null}}),{data:i,error:s}=await r.from("change_order_labor").insert(n).select();if(s)throw s;return i}return[]},async addBulkMaterialItems(e,t){if(P&&t.length>0){const r=xe();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",p=Math.round(Number(u.unit_cost)||0),v=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:v,unit:u.unit||"each",unit_cost:p,total:Math.round(v*p),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_materials").insert(i).select();if(c)throw c;return s}return[]},async addBulkEquipmentItems(e,t){if(P&&t.length>0){const r=xe();if(!r)throw new Error("Database client not available");const n=["backup_sheet","invoice","custom","field_ticket","rental"],i=t.map((u,m)=>{const h=n.includes(u.source_type)?u.source_type:"custom",p=Math.round(Number(u.unit_cost)||0),v=Number(u.quantity)||1;return{change_order_id:e,description:u.description||"",quantity:v,unit:u.unit||"day",unit_cost:p,total:Math.round(v*p),source_type:h,source_reference:u.source_reference||null,source_ticket_id:u.source_ticket_id||null,sort_order:u.sort_order??m}}),{data:s,error:c}=await r.from("change_order_equipment").insert(i).select();if(c)throw c;return s}return[]},async addBulkSubcontractorItems(e,t){if(P&&t.length>0){const r=xe();if(!r)throw new Error("Database client not available");const n=t.map((c,u)=>({change_order_id:e,company_name:c.company_name||"",description:c.description||"",quantity:c.quantity||1,unit:c.unit||"lump sum",unit_cost:c.unit_cost||c.total||c.amount||0,total:c.total||c.amount||0,source_type:c.source_type||"invoice",source_reference:c.source_reference||null,sort_order:c.sort_order??u})),{data:i,error:s}=await r.from("change_order_subcontractors").insert(n).select();if(s)throw s;return i}return[]},async clearCORLineItems(e){if(!P)return;const t=xe();if(!t)throw new Error("Database client not available");try{const r=await Promise.all([t.from("change_order_labor").delete().eq("change_order_id",e),t.from("change_order_materials").delete().eq("change_order_id",e),t.from("change_order_equipment").delete().eq("change_order_id",e),t.from("change_order_subcontractors").delete().eq("change_order_id",e)]);for(const n of r)if(n.error)throw n.error}catch(r){throw console.error("Error clearing COR line items:",r),r}},async saveCORLineItems(e,{laborItems:t,materialItems:r,equipmentItems:n,subcontractorItems:i}){if(P){await this.clearCORLineItems(e);const s=await Promise.all([t?.length>0?this.addBulkLaborItems(e,t):[],r?.length>0?this.addBulkMaterialItems(e,r):[],n?.length>0?this.addBulkEquipmentItems(e,n):[],i?.length>0?this.addBulkSubcontractorItems(e,i):[]]);return{labor:s[0],materials:s[1],equipment:s[2],subcontractors:s[3]}}return null},async assignTicketToCOR(e,t){if(P){const{error:r}=await T.rpc("assign_ticket_to_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"assignTicketToCOR",extra:{ticketId:e,corId:t}}),r;return{ticket_id:e,change_order_id:t}}return null},async unassignTicketFromCOR(e,t){if(P){const{error:r}=await T.rpc("unassign_ticket_from_cor",{p_ticket_id:e,p_cor_id:t});if(r)throw Ke.error("database",{message:r.message,operation:"unassignTicketFromCOR",extra:{ticketId:e,corId:t}}),r}},async checkTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("check_ticket_cor_integrity");if(t)throw t;return e||[]}return[]},async fixTicketCORIntegrity(){if(P){const{data:e,error:t}=await T.rpc("fix_ticket_cor_integrity");if(t)throw t;return e}return 0},async getTicketsForCOR(e){if(P){const{data:t,error:r}=await T.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",e);if(r)throw r;return t}return[]},async getUnassignedTickets(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(r)throw r;return t}return[]},async importTicketDataToCOR(e,t,r,n,i){if(P){const s=xe();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",e).single();if(u)throw u;const{data:m,error:h}=await s.from("labor_rates").select("*").eq("company_id",r).eq("work_type",n||"demolition").eq("job_type",i||"standard");if(h)throw h;const p={};m?.forEach(S=>{p[S.role.toLowerCase()]=S});const v={};c.t_and_m_workers?.forEach(S=>{const O=(S.role||"laborer").toLowerCase();v[O]||(v[O]={regular_hours:0,overtime_hours:0}),v[O].regular_hours+=parseFloat(S.hours)||0,v[O].overtime_hours+=parseFloat(S.overtime_hours)||0});const _=Object.entries(v).map(([S,O])=>{const C=p[S]||{regular_rate:0,overtime_rate:0},A=Math.round((parseFloat(C.regular_rate)||0)*100),k=Math.round((parseFloat(C.overtime_rate)||0)*100);return{labor_class:S.charAt(0).toUpperCase()+S.slice(1),wage_type:i||"standard",regular_hours:O.regular_hours,overtime_hours:O.overtime_hours,regular_rate:A,overtime_rate:k,source_ticket_id:e}});_.length>0&&await this.addBulkLaborItems(t,_);const x=[],w=[];c.t_and_m_items?.forEach(S=>{const O=S.custom_name||S.materials_equipment?.name||"Unknown Item",C=S.custom_category||S.materials_equipment?.category||"Other",A=S.materials_equipment?.unit||"each",k=Math.round((parseFloat(S.materials_equipment?.cost_per_unit)||0)*100),D={description:O,quantity:S.quantity||1,unit:A,unit_cost:k,source_type:"backup_sheet",source_ticket_id:e};C==="Equipment"?w.push(D):x.push(D)}),x.length>0&&await this.addBulkMaterialItems(t,x),w.length>0&&await this.addBulkEquipmentItems(t,w);const{error:j}=await s.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",t).eq("ticket_id",e);if(j)throw j;return Ke.activity("cor_import_success",{ticket_id:e,cor_id:t,labor_count:_.length,material_count:x.length,equipment_count:w.length}),{laborItems:_,materialItems:x,equipmentItems:w}}return null},async reimportTicketDataToCOR(e,t,r,n,i){if(P){const s=xe();if(!s)throw new Error("Database client not available");return await s.from("change_order_labor").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_materials").delete().eq("change_order_id",t).eq("source_ticket_id",e),await s.from("change_order_equipment").delete().eq("change_order_id",t).eq("source_ticket_id",e),this.importTicketDataToCOR(e,t,r,n,i)}return null},async markImportFailed(e,t,r="Import failed"){if(P){const n=xe();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:r}).eq("change_order_id",t).eq("ticket_id",e);if(i)throw Ke.error("database",{message:i.message,operation:"markImportFailed",extra:{ticketId:e,corId:t}}),i;Ke.error("cor_import_failed",{ticket_id:e,cor_id:t,error:r})}},async getTicketsNeedingImport(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",e).eq("change_order_ticket_associations.import_status","failed");if(r)throw r;return t||[]}return[]},async getTicketImportStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",e).eq("change_order_id",t).single();if(n&&n.code!=="PGRST116")throw n;return r}return null},async recalculateCOR(e){if(P){const{error:t}=await T.rpc("recalculate_cor_totals",{cor_id:e});if(t)throw t;return this.getCORById(e)}return null},async updateCORMarkupPercentages(e,t){if(P){const r={};t.labor!==void 0&&(r.labor_markup_percent=t.labor),t.materials!==void 0&&(r.materials_markup_percent=t.materials),t.equipment!==void 0&&(r.equipment_markup_percent=t.equipment),t.subcontractors!==void 0&&(r.subcontractors_markup_percent=t.subcontractors);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async updateCORFeePercentages(e,t){if(P){const r={};t.liabilityInsurance!==void 0&&(r.liability_insurance_percent=t.liabilityInsurance),t.bond!==void 0&&(r.bond_percent=t.bond),t.licenseFee!==void 0&&(r.license_fee_percent=t.licenseFee);const{data:n,error:i}=await T.from("change_orders").update(r).eq("id",e).select().single();if(i)throw i;return n}return null},async submitCORForApproval(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}return null},async approveCOR(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"approved",approved_by:t,approved_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw n;return r}return null},async rejectCOR(e,t=null){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:"rejected",rejection_reason:t}).eq("id",e).select().single();if(n)throw n;return r}return null},async markCORAsBilled(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"billed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async closeCOR(e){if(P){const{data:t,error:r}=await T.from("change_orders").update({status:"closed"}).eq("id",e).select().single();if(r)throw r;return t}return null},async saveCORSignature(e,t,r){if(P){const{data:n,error:i}=await T.from("change_orders").update({gc_signature_data:t,gc_signature_name:r,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",e).select().single();if(i)throw i;return n}return null},async getCORStats(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("status, cor_total").eq("project_id",e);if(r)throw r;const n={total_cors:t.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return t.forEach(i=>{switch(i.status){case"draft":n.draft_count++;break;case"pending_approval":n.pending_count++,n.total_pending_value+=i.cor_total||0;break;case"approved":n.approved_count++,n.total_approved_value+=i.cor_total||0;break;case"rejected":n.rejected_count++;break;case"billed":case"closed":n.billed_count++,n.total_billed_value+=i.cor_total||0;break}}),n}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(e,t){return P?T.channel(`change_orders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCorTickets(e,t){return P?T.channel(`cor-tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${e}`},t).subscribe():null},async getCORLog(e){if(P){const{data:t,error:r}=await T.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",e).order("log_number",{ascending:!0});if(r)throw console.error("Error fetching COR log:",r),r;return(t||[]).map(n=>({id:n.id,logNumber:n.log_number,dateSentToClient:n.date_sent_to_client,ceNumber:n.ce_number,comments:n.comments,createdAt:n.created_at,updatedAt:n.updated_at,changeOrder:{id:n.change_order?.id,corNumber:n.change_order?.cor_number,title:n.change_order?.title,corTotal:n.change_order?.cor_total,status:n.change_order?.status,createdAt:n.change_order?.created_at,approvedAt:n.change_order?.approved_at,approvedBy:n.change_order?.approved_by}}))}return[]},async updateCORLogEntry(e,t){if(P){const r={updated_at:new Date().toISOString()};t.dateSentToClient!==void 0&&(r.date_sent_to_client=t.dateSentToClient||null),t.ceNumber!==void 0&&(r.ce_number=t.ceNumber||null),t.comments!==void 0&&(r.comments=t.comments||null);const{data:n,error:i}=await T.from("cor_log_entries").update(r).eq("id",e).select().single();if(i)throw console.error("Error updating COR log entry:",i),i;return n}return null},async updateChangeOrderStatus(e,t){if(P){const{data:r,error:n}=await T.from("change_orders").update({status:t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(n)throw console.error("Error updating change order status:",n),n;return r}return null},subscribeToCORLog(e,t){return P?T.channel(`cor-log:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocuments(e,t){return P?T.channel(`documents:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"documents",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDocumentFolders(e,t){return P?T.channel(`document_folders:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"document_folders",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialsEquipment(e,t){return P?T.channel(`materials_equipment:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToLaborRates(e,t){return P?T.channel(`labor_rates:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToProject(e,t){return P?T.channel(`project:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${e}`},t).subscribe():null},subscribeToPunchList(e,t){return P?T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},t).subscribe():null},async createSignatureRequest(e,t,r,n,i=null,s=null){if(P){const c=xe();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.rpc("generate_signature_token");if(m)throw m;const{data:h,error:p}=await c.from("signature_requests").insert({document_type:e,document_id:t,company_id:r,project_id:n,signature_token:u,expires_at:s,created_by:i}).select().single();if(p)throw p;return h}return null},async getSignatureRequestByToken(e){if(P){const t=xe();if(!t)throw new Error("Database client not available");await t.rpc("increment_signature_view_count",{token:e});const{data:r,error:n}=await t.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",e).single();if(n)throw n;return r}return null},async getSignatureRequestsForDocument(e,t){if(P){const r=xe();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",e).eq("document_id",t).order("created_at",{ascending:!1});if(i)throw i;return n||[]}return[]},async addSignature(e,t,r){if(P){const n=xe();if(!n)throw new Error("Database client not available");const{data:i,error:s}=await n.from("signatures").insert({signature_request_id:e,signature_slot:t,signature_image:r.signature,signer_name:r.signerName,signer_title:r.signerTitle||null,signer_company:r.signerCompany||null,signed_at:r.signedAt||new Date().toISOString(),ip_address:r.ipAddress||null,user_agent:r.userAgent||null}).select().single();if(s)throw s;return i}return null},async syncSignatureToDocument(e,t){if(!P)return null;const r=xe();if(!r)throw new Error("Database client not available");const{document_type:n,document_id:i}=t,s=e.signature_slot,c={};s===1?(c.gc_signature_data=e.signature_image,c.gc_signature_name=e.signer_name,c.gc_signature_title=e.signer_title,c.gc_signature_company=e.signer_company,c.gc_signature_date=e.signed_at,c.gc_signature_ip=e.ip_address):s===2&&(c.client_signature_data=e.signature_image,c.client_signature_name=e.signer_name,c.client_signature_title=e.signer_title,c.client_signature_company=e.signer_company,c.client_signature_date=e.signed_at,c.client_signature_ip=e.ip_address);const u=n==="cor"?"change_orders":"t_and_m_tickets",{data:m,error:h}=await r.from(u).update(c).eq("id",i).select().single();if(h)throw h;return m},async revokeSignatureRequest(e){if(P){const t=xe();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("signature_requests").update({status:"revoked"}).eq("id",e).select().single();if(n)throw n;return r}return null},async getDocumentForSigning(e,t){if(!P)return null;const r=xe();if(!r)throw new Error("Database client not available");if(e==="cor"){const{data:n,error:i}=await r.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",t).single();if(i)throw i;return n}else if(e==="tm_ticket"){const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (
              id,
              name,
              unit,
              cost_per_unit,
              category
            )
          )
        `).eq("id",t).single();if(i)throw i;return n}return null},async getProjectCosts(e){if(P){const{data:r,error:n}=await T.from("project_costs").select("*").eq("project_id",e).order("cost_date",{ascending:!1});return n?(console.error("Error fetching project costs:",n),[]):r||[]}return(Oe().projectCosts||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.cost_date)-new Date(r.cost_date))},async addProjectCost(e,t,r){const n={project_id:e,company_id:t,category:r.category,description:r.description,amount:parseFloat(r.amount),cost_date:r.cost_date||new Date().toISOString().split("T")[0],notes:r.notes||null,created_by:r.created_by||null};if(P){const{data:c,error:u}=await T.from("project_costs").insert(n).select().single();if(u)throw console.error("Error adding project cost:",u),u;return c}const i=Oe();i.projectCosts||(i.projectCosts=[]);const s={...n,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i.projectCosts.push(s),Ge(i),s},async updateProjectCost(e,t){const r={category:t.category,description:t.description,amount:parseFloat(t.amount),cost_date:t.cost_date,notes:t.notes||null,updated_at:new Date().toISOString()};if(P){const{data:s,error:c}=await T.from("project_costs").update(r).eq("id",e).select().single();if(c)throw console.error("Error updating project cost:",c),c;return s}const n=Oe();if(!n.projectCosts)return null;const i=n.projectCosts.findIndex(s=>s.id===e);return i===-1?null:(n.projectCosts[i]={...n.projectCosts[i],...r},Ge(n),n.projectCosts[i])},async deleteProjectCost(e){if(P){const{error:r}=await T.from("project_costs").delete().eq("id",e);if(r)throw console.error("Error deleting project cost:",r),r;return!0}const t=Oe();return t.projectCosts&&(t.projectCosts=t.projectCosts.filter(r=>r.id!==e),Ge(t)),!0},async getProjectCostsSummary(e){const t=await this.getProjectCosts(e),r={};let n=0;return t.forEach(i=>{const s=parseFloat(i.amount)||0;n+=s,r[i.category]||(r[i.category]={category:i.category,total:0,count:0,items:[]}),r[i.category].total+=s,r[i.category].count++,r[i.category].items.push(i)}),Object.values(r).forEach(i=>{i.percentage=n>0?i.total/n*100:0}),{totalCost:n,byCategory:r,itemCount:t.length}},async getNextInvoiceNumber(e){if(P){const{data:t,error:r}=await T.rpc("get_next_invoice_number",{p_company_id:e});return r?(console.error("Error getting next invoice number:",r),this._generateLocalInvoiceNumber(e)):t}return this._generateLocalInvoiceNumber(e)},async _generateLocalInvoiceNumber(e){const r=(await this.getCompanyInvoices(e)).reduce((n,i)=>{const s=i.invoice_number?.match(/^INV-(\d+)$/);if(s){const c=parseInt(s[1],10);return c>n?c:n}return n},0);return`INV-${String(r+1).padStart(4,"0")}`},async getBillableItems(e){if(P){const{data:t,error:r}=await T.from("change_orders").select("id, cor_number, title, cor_total, status, approved_at").eq("project_id",e).eq("status","approved").order("cor_number",{ascending:!0});r&&console.error("Error fetching billable CORs:",r);const{data:n,error:i}=await T.from("t_and_m_tickets").select("id, work_date, ce_pco_number, change_order_value, status, client_signature_date").eq("project_id",e).eq("status","approved").not("client_signature_data","is",null).order("work_date",{ascending:!0});return i&&console.error("Error fetching billable T&M tickets:",i),{cors:t||[],tickets:n||[]}}return{cors:[],tickets:[]}},async getProjectInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("project_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching project invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.project_id===e)},async getCompanyInvoices(e){if(P){const{data:r,error:n}=await T.from("invoices").select("*").eq("company_id",e).order("invoice_date",{ascending:!1});if(n)throw console.error("Error fetching company invoices:",n),n;return r||[]}return(Oe().invoices||[]).filter(r=>r.company_id===e)},async createInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").insert({project_id:e.project_id,company_id:e.company_id,invoice_number:e.invoice_number,invoice_date:e.invoice_date,due_date:e.due_date,status:e.status||"draft",retention_percent:e.retention_percent||0,bill_to_name:e.bill_to_name,bill_to_address:e.bill_to_address,bill_to_contact:e.bill_to_contact,notes:e.notes,terms:e.terms||"Net 30",created_by:e.created_by}).select().single();if(s)throw console.error("Error creating invoice:",s),s;if(t&&t.length>0){const c=t.map((m,h)=>({invoice_id:i.id,item_type:m.item_type,reference_id:m.reference_id,reference_number:m.reference_number,description:m.description,amount:m.amount,sort_order:h})),{error:u}=await T.from("invoice_items").insert(c);if(u)throw console.error("Error creating invoice items:",u),await T.from("invoices").delete().eq("id",i.id),u}return this.getInvoice(i.id)}const r=Oe();r.invoices||(r.invoices=[]);const n={...e,id:Wr(),created_at:new Date().toISOString(),invoice_items:t||[]};return r.invoices.push(n),Ge(r),n},async getInvoice(e){if(P){const{data:r,error:n}=await T.from("invoices").select(`
          *,
          invoice_items (*)
        `).eq("id",e).single();if(n)throw console.error("Error fetching invoice:",n),n;return r}return(Oe().invoices||[]).find(r=>r.id===e)},async updateInvoice(e,t){if(P){const{data:i,error:s}=await T.from("invoices").update(t).eq("id",e).select().single();if(s)throw console.error("Error updating invoice:",s),s;return i}const r=Oe(),n=(r.invoices||[]).findIndex(i=>i.id===e);return n>=0?(r.invoices[n]={...r.invoices[n],...t},Ge(r),r.invoices[n]):null},async markInvoiceSent(e){return this.updateInvoice(e,{status:"sent",sent_at:new Date().toISOString()})},async recordInvoicePayment(e,t){const r=await this.getInvoice(e);if(!r)throw new Error("Invoice not found");const n=(r.amount_paid||0)+t,i=n>=r.total;return this.updateInvoice(e,{amount_paid:n,status:i?"paid":"partial",paid_at:i?new Date().toISOString():null})},async deleteInvoice(e){if(P){const{error:r}=await T.from("invoices").delete().eq("id",e).eq("status","draft");if(r)throw console.error("Error deleting invoice:",r),r;return!0}const t=Oe();return t.invoices=(t.invoices||[]).filter(r=>r.id!==e),Ge(t),!0},async markItemsBilled(e=[],t=[]){if(P){if(e.length>0){const{error:r}=await T.from("change_orders").update({status:"billed"}).in("id",e);r&&console.error("Error marking CORs as billed:",r)}if(t.length>0){const{error:r}=await T.from("t_and_m_tickets").update({status:"billed"}).in("id",t);r&&console.error("Error marking T&M tickets as billed:",r)}}}},OL={async getCompanyEquipment(e,t=!0){if(!P)return console.warn("Supabase not configured"),[];let r=T.from("equipment").select("*").eq("company_id",e).order("name");t&&(r=r.eq("is_active",!0));const{data:n,error:i}=await r;return i?(console.error("Error fetching company equipment:",i),[]):n||[]},async createEquipment(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("equipment").insert(e).select().single();if(r)throw console.error("Error creating equipment:",r),r;return t},async updateEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("equipment").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating equipment:",n),n;return r},async deactivateEquipment(e){return this.updateEquipment(e,{is_active:!1})},async getProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).order("start_date",{ascending:!1});return r?(console.error("Error fetching project equipment:",r),[]):t||[]},async getActiveProjectEquipment(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("project_equipment").select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).eq("project_id",e).is("end_date",null).order("start_date",{ascending:!1});return r?(console.error("Error fetching active project equipment:",r),[]):t||[]},async addEquipmentToProject(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("project_equipment").insert(e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(r)throw console.error("Error adding equipment to project:",r),r;return t},async updateProjectEquipment(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("project_equipment").update(t).eq("id",e).select(`
        *,
        equipment:equipment_id (
          id,
          name,
          description,
          is_owned
        )
      `).single();if(n)throw console.error("Error updating project equipment:",n),n;return r},async markEquipmentReturned(e,t=null){return this.updateProjectEquipment(e,{end_date:t||new Date().toISOString().split("T")[0]})},async removeEquipmentFromProject(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("project_equipment").delete().eq("id",e);if(t)throw console.error("Error removing project equipment:",t),t;return!0},calculateProjectEquipmentCost(e){const t=new Date;return t.setHours(0,0,0,0),e.reduce((r,n)=>{const i=new Date(n.start_date);i.setHours(0,0,0,0);let s;n.end_date?(s=new Date(n.end_date),s.setHours(0,0,0,0)):s=t;const c=Math.max(1,Math.floor((s-i)/(1e3*60*60*24))+1);return r+n.daily_rate*c},0)},calculateDaysOnSite(e,t=null){const r=new Date(e);r.setHours(0,0,0,0);let n;return t?n=new Date(t):n=new Date,n.setHours(0,0,0,0),Math.max(1,Math.floor((n-r)/(1e3*60*60*24))+1)}},CL={async getNextDrawNumber(e){if(!P)return console.warn("Supabase not configured"),1;const{data:t,error:r}=await T.from("draw_requests").select("draw_number").eq("project_id",e).order("draw_number",{ascending:!1}).limit(1).single();return r&&r.code!=="PGRST116"&&console.error("Error getting next draw number:",r),(t?.draw_number||0)+1},async getPreviousBillingTotals(e){if(!P)return console.warn("Supabase not configured"),{totalBilled:0,totalRetention:0};const{data:t,error:r}=await T.from("draw_requests").select("current_billing, retention_held").eq("project_id",e).in("status",["submitted","approved","paid"]);if(r)return console.error("Error getting previous billing totals:",r),{totalBilled:0,totalRetention:0};const n=(t||[]).reduce((s,c)=>s+(c.current_billing||0),0),i=t?.length>0?Math.max(...t.map(s=>s.retention_held||0)):0;return{totalBilled:n,totalRetention:i}},async getProjectDrawRequests(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("draw_requests").select("*").eq("project_id",e).order("draw_number",{ascending:!1});return r?(console.error("Error fetching draw requests:",r),[]):t||[]},async getDrawRequest(e){if(!P)return console.warn("Supabase not configured"),null;const{data:t,error:r}=await T.from("draw_requests").select(`
        *,
        draw_request_items (
          *
        )
      `).eq("id",e).single();return r?(console.error("Error fetching draw request:",r),null):t},async createDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").insert(e).select().single();if(n)throw console.error("Error creating draw request:",n),n;if(t&&t.length>0){const i=t.map((c,u)=>({...c,draw_request_id:r.id,sort_order:u})),{error:s}=await T.from("draw_request_items").insert(i);s&&console.error("Error creating draw request items:",s)}return this.getDrawRequest(r.id)},async updateDrawRequest(e,t){if(!P)return console.warn("Supabase not configured"),null;const{data:r,error:n}=await T.from("draw_requests").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating draw request:",n),n;return r},async updateDrawRequestStatus(e,t){const r={status:t};return t==="submitted"?r.submitted_at=new Date().toISOString():t==="approved"?r.approved_at=new Date().toISOString():t==="paid"&&(r.paid_at=new Date().toISOString()),this.updateDrawRequest(e,r)},async updateDrawRequestItems(e,t){if(!P)return console.warn("Supabase not configured"),!1;const{error:r}=await T.from("draw_request_items").delete().eq("draw_request_id",e);if(r)throw console.error("Error deleting old draw request items:",r),r;if(t&&t.length>0){const n=t.map((s,c)=>({...s,draw_request_id:e,sort_order:c})),{error:i}=await T.from("draw_request_items").insert(n);if(i)throw console.error("Error inserting draw request items:",i),i}return!0},async deleteDrawRequest(e){if(!P)return console.warn("Supabase not configured"),!1;const{error:t}=await T.from("draw_requests").delete().eq("id",e);if(t)throw console.error("Error deleting draw request:",t),t;return!0},async getScheduleOfValues(e){if(!P)return console.warn("Supabase not configured"),[];const{data:t,error:r}=await T.from("areas").select("id, name, square_footage, price_per_sqft").eq("project_id",e).order("created_at");return r?(console.error("Error fetching schedule of values:",r),[]):(t||[]).map((n,i)=>({area_id:n.id,item_number:String(i+1),description:n.name,scheduled_value:Math.round((n.square_footage||0)*(n.price_per_sqft||0)*100)}))},async getPreviousDrawItems(e){if(!P)return console.warn("Supabase not configured"),{};const{data:t,error:r}=await T.from("draw_requests").select("id").eq("project_id",e).in("status",["submitted","approved","paid"]).order("draw_number",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")return console.error("Error fetching latest draw:",r),{};if(!t)return{};const{data:n,error:i}=await T.from("draw_request_items").select("area_id, total_percent, total_amount").eq("draw_request_id",t.id);return i?(console.error("Error fetching previous draw items:",i),{}):(n||[]).reduce((s,c)=>(c.area_id&&(s[c.area_id]={previous_percent:c.total_percent||0,previous_amount:c.total_amount||0}),s),{})},calculatePercentFromAmount(e,t){return!t||t===0?0:Math.round(e/t*1e4)},calculateAmountFromPercent(e,t){return Math.round(e/1e4*t)}};typeof window<"u"&&ei().catch(e=>console.error("Failed to init offline DB:",e));const AL=()=>{const e="fieldsync_device_id";let t=localStorage.getItem(e);return t||(t=crypto.randomUUID(),localStorage.setItem(e,t)),t},rf={async signUp(e,t,r,n){if(P){const{data:i,error:s}=await T.auth.signUp({email:e,password:t,options:{data:{name:r,role:n}}});if(s)throw s;return i}else{const i=Oe(),s={id:crypto.randomUUID(),email:e,name:r,role:n,created_at:new Date().toISOString()};return i.users.push(s),Ge(i),Nd(s),{user:s}}},async signIn(e,t){if(P){const{data:r,error:n}=await T.auth.signInWithPassword({email:e,password:t});if(n)throw n;return r}else{const n=Oe().users.find(i=>i.email===e);if(!n)throw new Error("User not found");return Nd(n),{user:n}}},async signOut(){if(P){const{error:e}=await T.auth.signOut();if(e)throw e}else Nd(null)},async getUser(){if(P){const{data:{user:e}}=await T.auth.getUser();return e}else return Ad()},async getProfile(){if(P){const{data:{user:e}}=await T.auth.getUser();if(!e)return null;const{data:t,error:r}=await T.from("users").select("*").eq("id",e.id).single();return r?{id:e.id,email:e.email,name:e.user_metadata?.name||"",role:e.user_metadata?.role||"foreman"}:t}else return Ad()},async updateRole(e,t){if(P){const{data:r,error:n}=await T.from("users").update({role:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.users.find(i=>i.id===e);return n&&(n.role=t,Ge(r),Ad()?.id===e&&Nd(n)),n}},onAuthStateChange(e){if(P)return T.auth.onAuthStateChange(e);{const t=Ad();return e(t?"SIGNED_IN":"SIGNED_OUT",{user:t}),{data:{subscription:{unsubscribe:()=>{}}}}}}},_e={async getProjects(e=null,t=!1){if(P){if(!Rn()){const n=await qS(e);return t?n:n.filter(i=>i.status!=="archived")}const r=performance.now();try{let n=T.from("projects").select("*").order("created_at",{ascending:!1});e&&(n=n.eq("company_id",e)),t||(n=n.eq("status","active"));const{data:i,error:s}=await n,c=Math.round(performance.now()-r);if(Ke.query("getProjects",{duration:c,rows:i?.length,company_id:e}),s){Ke.error("database",{message:s.message,operation:"getProjects",company_id:e});const u=await qS(e);if(u.length>0)return u;throw s}return i?.length>0&&_L(i).catch(u=>console.error("Failed to cache projects:",u)),i}catch(n){throw Ke.error("database",{message:n.message,operation:"getProjects",company_id:e}),n}}else{const r=Oe().projects;return t?r:r.filter(n=>n.status!=="archived")}},async getProjectsPaginated(e,{page:t=0,limit:r=25,status:n="active"}={}){if(P){const c=performance.now();try{let u=T.from("projects").select("*",{count:"exact"}).eq("company_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n!=="all"&&(u=u.eq("status",n));const{data:m,error:h,count:p}=await u,v=Math.round(performance.now()-c);if(Ke.query("getProjectsPaginated",{duration:v,rows:m?.length,page:t,company_id:e}),h)throw h;return{projects:m||[],totalCount:p||0,hasMore:(t+1)*r<(p||0),page:t,limit:r}}catch(u){throw Ke.error("database",{message:u.message,operation:"getProjectsPaginated",company_id:e}),u}}const i=Oe().projects.filter(c=>c.company_id===e&&(n==="all"||c.status===n)),s=t*r;return{projects:i.slice(s,s+r),totalCount:i.length,hasMore:s+r<i.length,page:t,limit:r}},async getProjectsWithSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!1}),i=Math.round(performance.now()-t);if(Ke.query("getProjectsWithSummary",{duration:i,rows:r?.length,company_id:e}),n)throw n;return(r||[]).map(s=>({...s,areaCount:s.areas?.[0]?.count||0,ticketCount:s.tickets?.[0]?.count||0,pendingTicketCount:0,reportCount:s.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,daily_reports:void 0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectsWithSummary",company_id:e}),this.getProjects(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getProjectDashboardSummary(e){if(P){const t=performance.now();try{const{data:r,error:n}=await T.rpc("get_project_dashboard_summary",{p_company_id:e}),i=Math.round(performance.now()-t);if(Ke.query("getProjectDashboardSummary",{duration:i,rows:r?.length,company_id:e}),n){if(n.message?.includes("function")||n.code==="42883")return this.getProjectsWithSummary(e);throw n}return(r||[]).map(s=>({id:s.project_id,name:s.project_name,status:s.project_status,job_number:s.project_number,address:s.project_address,pin:s.project_pin,created_at:s.created_at,start_date:s.start_date,end_date:s.end_date,contract_value:Number(s.contract_value)||0,work_type:s.work_type||"demolition",job_type:s.job_type||"standard",general_contractor:s.general_contractor||"",areaCount:Number(s.total_areas)||0,completedAreas:Number(s.completed_areas)||0,inProgressAreas:Number(s.in_progress_areas)||0,pendingAreas:Number(s.pending_areas)||0,ticketCount:Number(s.total_tickets)||0,pendingTicketCount:Number(s.pending_tickets)||0,submittedTicketCount:Number(s.submitted_tickets)||0,approvedTicketCount:Number(s.approved_tickets)||0,totalLaborHours:Number(s.total_labor_hours)||0,todayLaborHours:Number(s.today_labor_hours)||0,todayWorkerCount:Number(s.today_worker_count)||0,lastActivityAt:s.last_activity_at,dailyReportsThisWeek:Number(s.daily_reports_this_week)||0,corCount:Number(s.cor_count)||0,pendingCorCount:Number(s.pending_cor_count)||0,disposalLoadsToday:Number(s.disposal_loads_today)||0}))}catch(r){return Ke.error("database",{message:r.message,operation:"getProjectDashboardSummary",company_id:e}),this.getProjectsWithSummary(e)}}return Oe().projects.filter(t=>t.company_id===e&&t.status==="active")},async getArchivedProjects(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("company_id",e).eq("status","archived").order("archived_at",{ascending:!1});if(r)throw r;return t}else return Oe().projects.filter(t=>t.status==="archived")},async getProjectCount(e){if(P){const{count:t,error:r}=await T.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",e).in("status",["active","archived"]);if(r)throw r;return t||0}else return Oe().projects.filter(r=>r.company_id===e&&r.status!=="deleted").length},async universalSearch(e,t,r=10){if(!P||!t?.trim())return{projects:[],tickets:[],cors:[],workers:[]};const n=t.trim().toLowerCase(),i={projects:[],tickets:[],cors:[],workers:[]};try{const{data:s}=await T.from("projects").select("id, name, job_number, address, status").eq("company_id",e).eq("status","active").or(`name.ilike.%${n}%,job_number.ilike.%${n}%,address.ilike.%${n}%`).limit(r);i.projects=s||[];const{data:c}=await T.from("t_and_m_tickets").select(`
          id, notes, work_date, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).ilike("notes",`%${n}%`).order("work_date",{ascending:!1}).limit(r);i.tickets=(c||[]).map(p=>({...p,projectName:p.projects?.name||"Unknown Project"}));const{data:u}=await T.from("change_orders").select(`
          id, cor_number, title, status, project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).or(`title.ilike.%${n}%,cor_number.ilike.%${n}%`).order("created_at",{ascending:!1}).limit(r);i.cors=(u||[]).map(p=>({...p,projectName:p.projects?.name||"Unknown Project"}));const{data:m}=await T.from("crew_checkins").select(`
          workers,
          project_id,
          projects!inner(id, name, company_id)
        `).eq("projects.company_id",e).order("check_in_date",{ascending:!1}).limit(50),h=new Map;return(m||[]).forEach(p=>{(p.workers||[]).forEach(v=>{if(v.name.toLowerCase().includes(n)){const _=v.name.toLowerCase();h.has(_)||h.set(_,{name:v.name,role:v.role,projectName:p.projects?.name,lastProject:p.projects})}})}),i.workers=Array.from(h.values()).slice(0,r),i}catch(s){return console.error("Universal search error:",s),i}},async archiveProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="archived",r.archived_at=new Date().toISOString(),Ge(t)),r}},async getProjectStorageStats(e){if(!P)return{photoCount:0,estimatedMB:0};const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);if(r)throw r;let n=0;const i=[];t?.forEach(c=>{c.photos&&Array.isArray(c.photos)&&(n+=c.photos.length,i.push(...c.photos))});const s=n*1.5;return{photoCount:n,estimatedMB:s,photoUrls:i}},async archiveProjectDeep(e,t){if(!P)return null;const{photoUrls:r}=await this.getProjectStorageStats(e);if(r.length>0){const s=r.map(c=>{if(!c)return null;if(c.startsWith("http"))try{const m=new URL(c).pathname.match(/\/tm-photos\/(.+)$/);return m?m[1]:null}catch{return null}return c}).filter(Boolean);if(s.length>0)for(let c=0;c<s.length;c+=100){const u=s.slice(c,c+100);await T.storage.from("tm-photos").remove(u)}}await T.from("t_and_m_tickets").update({photos:[]}).eq("project_id",e);const{data:n,error:i}=await T.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",e).select().single();if(i)throw i;return{...n,photosDeleted:r.length}},async restoreProject(e){if(P){const{data:t,error:r}=await T.from("projects").update({status:"active",archived_at:null}).eq("id",e).select().single();if(r)throw r;return t}else{const t=Oe(),r=t.projects.find(n=>n.id===e);return r&&(r.status="active",r.archived_at=null,Ge(t)),r}},async getProject(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("id",e).single();if(r)throw r;return t}else return Oe().projects.find(t=>t.id===e)},async createProject(e){if(P){const{data:t,error:r}=await T.from("projects").insert({...e,status:"active"}).select().single();if(r)throw console.error("Supabase createProject error:",r.message,r.details,r.hint),r;return t}else{const t=Oe(),r={...e,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return t.projects.push(r),Ge(t),r}},async getProjectByPin(e){if(P){const{data:t,error:r}=await T.from("projects").select("*").eq("pin",e).eq("status","active").single();return r?null:t}else return Oe().projects.find(r=>r.pin===e&&r.status==="active")||null},async getProjectByPinAndCompany(e,t){if(P){const{data:r,error:n}=await T.from("projects").select("*").eq("pin",e).eq("company_id",t).eq("status","active").single();return n?null:r}else return Oe().projects.find(n=>n.pin===e&&n.company_id===t&&n.status==="active")||null},async getProjectByPinSecure(e,t){if(P){const r=`pin_attempts_${t}`,n=`pin_lockout_${t}`,i=5,s=300*1e3,c=localStorage.getItem(n);if(c&&Date.now()<parseInt(c)){const w=parseInt(c)-Date.now(),j=Math.ceil(w/6e4);return{success:!1,rateLimited:!0,project:null,error:`Too many attempts. Please try again in ${j} minute${j>1?"s":""}.`}}const u=AL(),{data:m,error:h}=await T.rpc("validate_pin_and_create_session",{p_pin:e,p_company_code:t,p_device_id:u,p_ip_address:null});if(h)return console.error("[PIN Auth] RPC error"),{success:!1,rateLimited:!1,project:null,error:h.message};if(!m||m.length===0)return{success:!1,rateLimited:!1,project:null};const p=m[0];if(p.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(p.error_code==="INVALID_COMPANY"||p.error_code==="INVALID_PIN"){let w=parseInt(localStorage.getItem(r)||"0");return w++,localStorage.setItem(r,w.toString()),w>=i?(localStorage.setItem(n,(Date.now()+s).toString()),{success:!1,rateLimited:!0,project:null,error:"Too many failed attempts. Please try again in 5 minutes."}):{success:!1,rateLimited:!1,project:null}}if(!p.success||!p.project_id)return{success:!1,rateLimited:!1,project:null};localStorage.removeItem(`pin_attempts_${t}`),localStorage.removeItem(`pin_lockout_${t}`),hy({token:p.session_token,projectId:p.project_id,companyId:p.company_id,projectName:p.project_name,companyName:p.company_name,createdAt:new Date().toISOString()});const v=Mb(),{data:_,error:x}=await v.from("projects").select("*").eq("id",p.project_id).single();return{success:!0,rateLimited:!1,sessionToken:p.session_token,project:_||{id:p.project_id,name:p.project_name,company_id:p.company_id,status:"active"}}}else{const r=Oe(),i=(r.companies||[]).find(c=>c.code===t);if(!i)return{success:!1,rateLimited:!1,project:null};const s=r.projects.find(c=>c.pin===e&&c.company_id===i.id&&c.status==="active");if(s){const c=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;hy({token:c,projectId:s.id,companyId:i.id,projectName:s.name,companyName:i.name,createdAt:new Date().toISOString()})}return{success:!!s,rateLimited:!1,project:s||null}}},async isPinAvailable(e,t=null){if(P){let r=T.from("projects").select("id").eq("pin",e);t&&(r=r.neq("id",t));const{data:n,error:i}=await r;if(i)throw i;return n.length===0}else return!Oe().projects.some(n=>n.pin===e&&n.id!==t)},async updateProjectPin(e,t){if(P){const{data:r,error:n}=await T.from("projects").update({pin:t}).eq("id",e).select().single();if(n)throw n;return r}else{const r=Oe(),n=r.projects.find(i=>i.id===e);return n&&(n.pin=t,Ge(r)),n}},async updateProject(e,t,r=null){if(P){if(!r)throw console.error("[Security] updateProject called without companyId - this is a security risk"),new Error("Company ID is required for security verification");const{data:n,error:i}=await T.from("projects").update(t).eq("id",e).eq("company_id",r).select().single();if(i)throw console.error("Error updating project"),i;return n}else{const n=Oe(),i=n.projects.find(s=>s.id===e);return i&&(Object.assign(i,t),Ge(n)),i}},async deleteProject(e,t=null){if(P){let r=[];try{const{data:c}=await T.from("t_and_m_tickets").select("photos").eq("project_id",e);c?.forEach(u=>{Array.isArray(u.photos)&&u.photos.forEach(m=>{if(m)if(m.startsWith("http"))try{const h=new URL(m).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);h&&r.push(decodeURIComponent(h[1]))}catch{}else r.push(m)})})}catch{}if(r.length>0)try{for(let c=0;c<r.length;c+=100)await T.storage.from("tm-photos").remove(r.slice(c,c+100))}catch{}await T.from("t_and_m_tickets").delete().eq("project_id",e),await T.from("daily_reports").delete().eq("project_id",e);let n=T.from("projects").delete({count:"exact"}).eq("id",e);t&&(n=n.eq("company_id",t));const{error:i,count:s}=await n;if(i)throw i;if(s===0)throw new Error("Project could not be deleted. You may not have permission (admin or owner role required).")}else{const r=Oe();r.projects=r.projects.filter(n=>n.id!==e),r.areas=r.areas.filter(n=>n.project_id!==e),Ge(r)}},async getAreas(e){if(P){if(!Rn())return zS(e);const t=xe(),{data:r,error:n}=await t.from("areas").select("*").eq("project_id",e).order("sort_order",{ascending:!0});if(n){const i=await zS(e);if(i.length>0)return i;throw n}return r?.length>0&&xL(r).catch(i=>console.error("Failed to cache areas:",i)),r}else return Oe().areas.filter(t=>t.project_id===e)},async createArea(e){if(P){const t=xe(),{data:r,error:n}=await t.from("areas").insert(e).select().single();if(n)throw n;return r}else{const t=Oe(),r={...e,id:crypto.randomUUID(),created_at:new Date().toISOString()};return t.areas.push(r),Ge(t),r}},async updateAreaStatus(e,t,r=null){if(P){if(!Rn()){const u=await bv(e,t);return await cn(Wt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}let i=xe().from("areas").update({status:t}).eq("id",e);r&&(i=i.eq("project_id",r));const{data:s,error:c}=await i.select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u=await bv(e,t);return await cn(Wt.UPDATE_AREA_STATUS,{areaId:e,status:t}),u}throw c}return s&&bv(e,t).catch(u=>console.error("Failed to update cached area status:",u)),s}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(i.status=t,i.updated_at=new Date().toISOString()),Ge(n),i}},async updateArea(e,t,r=null){if(P){let n=T.from("areas").update(t).eq("id",e);r&&(n=n.eq("project_id",r));const{data:i,error:s}=await n.select().single();if(s)throw s;return i}else{const n=Oe(),i=n.areas.find(s=>s.id===e);return i&&(Object.assign(i,t),i.updated_at=new Date().toISOString()),Ge(n),i}},async deleteArea(e,t=null){if(P){let r=T.from("areas").delete().eq("id",e);t&&(r=r.eq("project_id",t));const{error:n}=await r;if(n)throw n}else{const r=Oe();r.areas=r.areas.filter(n=>n.id!==e),Ge(r)}},subscribeToAreas(e,t){return P?T.channel(`areas:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMessages(e,t){return P?T.channel(`messages:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToMaterialRequests(e,t){return P?T.channel(`material_requests:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToDailyReports(e,t){return P?T.channel(`daily_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCrewCheckins(e,t){return P?T.channel(`crew_checkins:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToInjuryReports(e,t){return P?T.channel(`injury_reports:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},t).subscribe():null},subscribeToTMTickets(e,t){return P?T.channel(`tm_tickets:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${e}`},t).subscribe():null},subscribeToCompanyActivity(e,t,r){if(!P||!t||t.length===0)return null;const n=T.channel(`company_activity:${e}`);return t.forEach(i=>{n.on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`project_id=eq.${i}`},s=>r.onMessage?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${i}`},s=>r.onMaterialRequest?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${i}`},s=>r.onTMTicket?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${i}`},s=>r.onCrewCheckin?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${i}`},s=>r.onAreaUpdate?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${i}`},s=>r.onCORChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"projects",filter:`id=eq.${i}`},s=>r.onProjectChange?.(s)),n.on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${i}`},s=>r.onPunchListChange?.(s))}),n.on("postgres_changes",{event:"*",schema:"public",table:"injury_reports",filter:`company_id=eq.${e}`},i=>r.onInjuryReport?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"materials_equipment",filter:`company_id=eq.${e}`},i=>r.onMaterialsEquipmentChange?.(i)),n.on("postgres_changes",{event:"*",schema:"public",table:"labor_rates",filter:`company_id=eq.${e}`},i=>r.onLaborRateChange?.(i)),n.subscribe()},unsubscribe(e){e&&P&&T.removeChannel(e)},async getAssignedProjects(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",e);if(r)throw r;return t.map(n=>n.projects)}else{const t=Oe();return(t.assignments?.filter(n=>n.user_id===e)||[]).map(n=>t.projects.find(i=>i.id===n.project_id)).filter(Boolean)}},async assignUserToProject(e,t,r){if(P){const{data:n,error:i}=await T.from("project_assignments").insert({project_id:e,user_id:t,assigned_by:r}).select().single();if(i)throw i;return n}else{const n=Oe();n.assignments||(n.assignments=[]);const i={id:crypto.randomUUID(),project_id:e,user_id:t,assigned_by:r,assigned_at:new Date().toISOString()};return n.assignments.push(i),Ge(n),i}},async removeUserFromProject(e,t){if(P){const{error:r}=await T.from("project_assignments").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}else{const r=Oe();r.assignments=r.assignments?.filter(n=>!(n.project_id===e&&n.user_id===t))||[],Ge(r)}},async getProjectAssignments(e){if(P){const{data:t,error:r}=await T.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",e);if(r)throw r;return t.map(n=>n.users)}else{const t=Oe();return(t.assignments?.filter(n=>n.project_id===e)||[]).map(n=>t.users.find(i=>i.id===n.user_id)).filter(Boolean)}},async getAllUsers(){if(P){const{data:e,error:t}=await T.from("users").select("*").order("name");if(t)throw t;return e}else return Oe().users||[]},async getForemen(){if(P){const{data:e,error:t}=await T.from("users").select("*").eq("role","foreman").order("name");if(t)throw t;return e}else return(Oe().users||[]).filter(e=>e.role==="foreman")},async logActivity(e,t,r,n,i,s){if(P){const{error:c}=await T.from("activity_log").insert({user_id:e,project_id:t,area_id:r,action:n,old_value:i,new_value:s});c&&console.error("Error logging activity:",c)}},async getProjectActivity(e,t=50){if(P){const{data:r,error:n}=await T.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r}return[]},async getMaterialsEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").select("*").eq("company_id",e).eq("active",!0).order("category").order("name");if(r)throw r;return t}return[]},async getMaterialsEquipmentByCategory(e,t){if(P){const r=xe();if(!r)return[];const{data:n,error:i}=await r.from("materials_equipment").select("*").eq("company_id",e).eq("category",t).eq("active",!0).order("name");if(i)throw i;return n}return[]},async getAllMaterialsEquipment(e){if(P){const t=xe();if(!t)return[];const{data:r,error:n}=await t.from("materials_equipment").select("*").eq("company_id",e).order("category").order("name");if(n)throw n;return r}return[]},async createMaterialEquipment(e){if(P){const{data:t,error:r}=await T.from("materials_equipment").insert(e).select().single();if(r)throw r;return t}return null},async updateMaterialEquipment(e,t){if(P){const{data:r,error:n}=await T.from("materials_equipment").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteMaterialEquipment(e){if(P){const{error:t}=await T.from("materials_equipment").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborCategories(e){if(P){const{data:t,error:r}=await T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async createLaborCategory(e,t,r=0){if(P){const{data:n,error:i}=await T.from("labor_categories").insert({company_id:e,name:t,sort_order:r}).select().single();if(i)throw i;return n}return null},async updateLaborCategory(e,t){if(P){const{data:r,error:n}=await T.from("labor_categories").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborCategory(e){if(P){const{error:t}=await T.from("labor_categories").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClasses(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",e).eq("active",!0).order("sort_order").order("name");if(r)throw r;return t||[]}return[]},async getLaborClassesWithCategories(e){if(P){const[t,r]=await Promise.all([T.from("labor_categories").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name"),T.from("labor_classes").select("*").eq("company_id",e).eq("active",!0).order("sort_order").order("name")]);if(t.error)throw t.error;if(r.error)throw r.error;return{categories:t.data||[],classes:r.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(e){if(P){const t=xe();if(!t)return{categories:[],classes:[]};const{data:r,error:n}=await t.rpc("get_labor_classes_for_field",{p_company_id:e});if(n){console.error("Error loading field labor classes:",n);const[c,u]=await Promise.all([t.from("labor_categories").select("id, name").eq("company_id",e).eq("active",!0).order("name"),t.from("labor_classes").select("id, name, category_id").eq("company_id",e).eq("active",!0).order("name")]);return{categories:c.data||[],classes:u.data||[]}}const i=new Map,s=[];for(const c of r||[])c.category_id&&c.category_name&&!i.has(c.category_id)&&i.set(c.category_id,{id:c.category_id,name:c.category_name}),s.push({id:c.id,name:c.name,category_id:c.category_id});return{categories:Array.from(i.values()),classes:s}}return{categories:[],classes:[]}},async createLaborClass(e,t,r,n=0){if(P){const{data:i,error:s}=await T.from("labor_classes").insert({company_id:e,category_id:t,name:r,sort_order:n}).select().single();if(s)throw s;return i}return null},async updateLaborClass(e,t){if(P){const{data:r,error:n}=await T.from("labor_classes").update(t).eq("id",e).select().single();if(n)throw n;return r}return null},async deleteLaborClass(e){if(P){const{error:t}=await T.from("labor_classes").update({active:!1}).eq("id",e);if(t)throw t}},async getLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_class_rates").select("*").eq("labor_class_id",e);if(r)throw r;return t||[]}return[]},async getAllLaborClassRates(e){if(P){const{data:t,error:r}=await T.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",e).eq("active",!0);if(r)throw r;return t||[]}return[]},async saveLaborClassRates(e,t){if(P){const r=t.map(i=>({...i,labor_class_id:e})),{error:n}=await T.from("labor_class_rates").upsert(r,{onConflict:"labor_class_id,work_type,job_type"});if(n)throw n}},async getLaborClassRate(e,t,r){if(P){const{data:n,error:i}=await T.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",e).eq("work_type",t).eq("job_type",r).single();if(i&&i.code!=="PGRST116")throw i;return n||null}return null},async getTMTickets(e){if(P){const t=performance.now(),r=xe(),i=vy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{const{data:s,error:c}=await r.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${i}
            )
          `).eq("project_id",e).order("created_at",{ascending:!1}),u=Math.round(performance.now()-t);if(Ke.query("getTMTickets",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s}catch(s){throw Ke.error("database",{message:s.message,operation:"getTMTickets",project_id:e}),s}}return[]},async getTMTicketsPaginated(e,{page:t=0,limit:r=25,status:n=null}={}){if(P){const i=performance.now(),s=xe(),u=vy()?"materials_equipment (name, unit, category)":"materials_equipment (name, unit, cost_per_unit, category)";try{let m=s.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              ${u}
            )
          `,{count:"exact"}).eq("project_id",e).order("created_at",{ascending:!1}).range(t*r,(t+1)*r-1);n&&(m=m.eq("status",n));const{data:h,error:p,count:v}=await m,_=Math.round(performance.now()-i);if(Ke.query("getTMTicketsPaginated",{duration:_,rows:h?.length,page:t,project_id:e}),p)throw p;return{tickets:h||[],totalCount:v||0,hasMore:(t+1)*r<(v||0),page:t,limit:r}}catch(m){throw Ke.error("database",{message:m.message,operation:"getTMTicketsPaginated",project_id:e}),m}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(e){if(P){const{data:t,error:r}=await T.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",e).not("ce_pco_number","is",null).neq("ce_pco_number","");if(r)throw r;const n={};let i=0,s=0;return t?.forEach(c=>{const u=c.ce_pco_number;if(n[u]||(n[u]={approved:0,pending:0,count:0}),n[u].count++,c.status==="approved"||c.status==="billed"){const m=parseFloat(c.change_order_value)||0;n[u].approved+=m,i+=m}else c.status==="pending"&&s++}),{changeOrders:n,totalApprovedValue:i,pendingCount:s}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(e,t){if(P){const r=xe();if(!r)return[];const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",e).eq("status",t).order("created_at",{ascending:!1});if(i)throw i;return n}return[]},async getCORTickets(e){if(P){const t=xe();if(!t)return[];const{data:r,error:n}=await t.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",e).order("work_date",{ascending:!0});if(n)throw n;return r||[]}return[]},async createTMTicket(e){if(P){if(!Rn()){const i={id:Wr(),project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending_sync",created_by_name:e.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await LS(i),await cn(Wt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}const t=xe();if(!t)throw new Error("Database client not available");const{data:r,error:n}=await t.from("t_and_m_tickets").insert({project_id:e.project_id,work_date:e.work_date,ce_pco_number:e.ce_pco_number||null,assigned_cor_id:e.assigned_cor_id||null,notes:e.notes,photos:e.photos||[],status:"pending",created_by_name:e.created_by_name||"Field User"}).select().single();if(n){if(n.message?.includes("fetch")||n.message?.includes("network")){const i={id:Wr(),...e,status:"pending_sync",_offline:!0};return await LS(i),await cn(Wt.CREATE_TM_TICKET,{ticket:i,workers:e._workers||[],items:e._items||[]}),i}throw n}return r}return null},async addTMWorkers(e,t){if(P){const r=t.map(s=>({ticket_id:e,name:s.name,hours:s.hours,overtime_hours:s.overtime_hours||0,time_started:s.time_started||null,time_ended:s.time_ended||null,role:s.role||"Laborer"})),n=xe();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_workers").insert(r);if(i)throw i}},async addTMItems(e,t){if(P){const r=t.map(s=>({ticket_id:e,material_equipment_id:s.material_equipment_id||null,custom_name:s.custom_name||null,custom_category:s.custom_category||null,quantity:s.quantity})),n=xe();if(!n)throw new Error("Database client not available");const{error:i}=await n.from("t_and_m_items").insert(r);if(i)throw i}},async getPreviousTicketCrew(e,t){if(!P)return null;const r=xe();if(!r)return null;const{data:n,error:i}=await r.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",e).lt("work_date",t).order("work_date",{ascending:!1}).limit(1).maybeSingle();if(i||!n)return null;const s=n.t_and_m_workers||[],c=s.some(v=>v.labor_class_id),u={};c&&s.forEach(v=>{v.labor_class_id&&(u[v.labor_class_id]||(u[v.labor_class_id]=[]),u[v.labor_class_id].push({name:v.name,hours:v.hours?.toString()||"",overtimeHours:v.overtime_hours?.toString()||"",timeStarted:v.time_started||"",timeEnded:v.time_ended||""}))});const m=s.filter(v=>["Foreman","General Foreman","Superintendent"].includes(v.role)).map(v=>({name:v.name,hours:v.hours?.toString()||"",overtimeHours:v.overtime_hours?.toString()||"",timeStarted:v.time_started||"",timeEnded:v.time_ended||"",role:v.role})),h=s.filter(v=>v.role==="Operator").map(v=>({name:v.name,hours:v.hours?.toString()||"",overtimeHours:v.overtime_hours?.toString()||"",timeStarted:v.time_started||"",timeEnded:v.time_ended||""})),p=s.filter(v=>v.role==="Laborer").map(v=>({name:v.name,hours:v.hours?.toString()||"",overtimeHours:v.overtime_hours?.toString()||"",timeStarted:v.time_started||"",timeEnded:v.time_ended||""}));return{workDate:n.work_date,supervision:m.length>0?m:null,operators:h.length>0?h:null,laborers:p.length>0?p:null,dynamicWorkers:Object.keys(u).length>0?u:null,totalWorkers:s.length}},async updateTMTicketStatus(e,t){if(P){const r=xe();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({status:t}).eq("id",e).select().single();if(i)throw i;return n}return null},async approveTMTicket(e,t,r,n=null){if(P){const i={status:"approved",approved_by_user_id:t,approved_by_name:r,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};n!==null&&(i.change_order_value=parseFloat(n)||0);const s=xe();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("t_and_m_tickets").update(i).eq("id",e).select().single();if(u)throw u;return c}return null},async rejectTMTicket(e,t,r,n=""){if(P){const i=xe();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:t,rejected_by_name:r,rejected_at:new Date().toISOString(),rejection_reason:n,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",e).select().single();if(c)throw c;return s}return null},canApproveTickets(e){return["owner","admin","manager"].includes(e)},async updateTMTicketPhotos(e,t){if(P){const r=xe();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({photos:t}).eq("id",e).select().single();if(i)throw i;return n}return null},async saveTMClientSignature(e,t){if(P){const r=xe();if(!r)throw new Error("Database client not available");const{data:n,error:i}=await r.from("t_and_m_tickets").update({client_signature_data:t.signature,client_signature_name:t.signerName,client_signature_title:t.signerTitle,client_signature_company:t.signerCompany,client_signature_date:t.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",e).select().single();if(i)throw i;return n}return null},async deleteTMTicket(e){if(P){const t=xe();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("t_and_m_tickets").delete().eq("id",e);if(r)throw r}},async isTicketEditable(e){if(!e?.assigned_cor_id)return{editable:!0};if(P)try{const{data:t,error:r}=await T.from("change_orders").select("id, status, cor_number").eq("id",e.assigned_cor_id).single();if(r||!t)return{editable:!0};const i=["draft","pending_approval"].includes(t.status);return{editable:i,lockedBy:i?null:t,reason:i?null:`This ticket is linked to ${t.cor_number} which has been ${t.status==="approved"?"approved":t.status}`}}catch(t){return console.error("Error checking ticket editability:",t),{editable:!0}}return{editable:!0}},async getCompanyByCode(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").eq("code",e).single();return r?null:t}return null},async getCompany(e){if(P){const{data:t,error:r}=await T.from("companies").select("*").eq("id",e).single();if(r)throw r;return t}return null},async getUserCompanies(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching user companies:",r),[]):t.map(n=>({id:n.companies.id,name:n.companies.name,code:n.companies.code,access_level:n.access_level}))}return[]},async getUserPendingMemberships(e){if(P){const{count:t,error:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e).eq("status","pending");return r?(console.error("Error fetching pending memberships:",r),0):t||0}return 0},async getCompanyMemberships(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching company memberships:",r),[]):t||[]}return[]},async approveMembership(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:t}).eq("id",e);if(r)throw r}},async approveMembershipWithRole(e,t,r="member"){if(P){const{error:n}=await T.rpc("approve_membership_with_role",{membership_id:e,approved_by_user:t,new_access_level:r});if(n)throw n}},async rejectMembership(e){if(P){const{error:t}=await T.from("user_companies").delete().eq("id",e);if(t)throw t}},async removeMember(e,t){if(P){const{error:r}=await T.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:t}).eq("id",e);if(r)throw r}},async getProjectTeam(e){if(P){const{data:t,error:r}=await T.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",e).order("assigned_at",{ascending:!0});return r?(console.error("Error fetching project team:",r),[]):t||[]}return[]},async getCompanyMembers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",e).eq("status","active").order("created_at",{ascending:!0});return r?(console.error("Error fetching company members:",r),[]):t||[]}return[]},async addProjectMember(e,t,r,n){if(P){const{data:i,error:s}=await T.from("project_users").insert({project_id:e,user_id:t,project_role:r,assigned_by:n}).select().single();if(s)throw s;return i}return null},async updateProjectMemberRole(e,t,r){if(P){const{error:n}=await T.from("project_users").update({project_role:r}).eq("project_id",e).eq("user_id",t);if(n)throw n}},async removeProjectMember(e,t){if(P){const{error:r}=await T.from("project_users").delete().eq("project_id",e).eq("user_id",t);if(r)throw r}},async updateMemberAccessLevel(e,t){if(P){const{error:r}=await T.from("user_companies").update({access_level:t}).eq("id",e);if(r)throw r}},async updateMemberCompanyRole(e,t){if(P){const{error:r}=await T.from("user_companies").update({company_role:t}).eq("id",e);if(r)throw r}},async repairLegacyUser(e,t,r="member"){if(!P||!e||!t)return!1;try{const{data:n,error:i}=await T.rpc("repair_legacy_user",{p_user_id:e,p_company_id:t,p_role:r});return i?(console.error("RPC repair_legacy_user failed:",i),!1):n===!0}catch(n){return console.error("Error repairing legacy user:",n),!1}},async isLegacyUser(e){if(!P)return!1;try{const{data:t}=await T.from("users").select("company_id, role").eq("id",e).single();if(!t?.company_id)return!1;const{count:r}=await T.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",e);return r===0}catch(t){return console.error("Error checking legacy user:",t),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(e,t){if(!P)return[];const r=xe();if(!r)return[];const n=performance.now();try{const{data:i,error:s}=await r.from("disposal_loads").select("*").eq("project_id",e).eq("work_date",t).order("created_at",{ascending:!1}),c=Math.round(performance.now()-n);if(Ke.query("getDisposalLoads",{duration:c,rows:i?.length,project_id:e}),s)throw s;return i||[]}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoads",project_id:e}),i}},async getDisposalLoadsHistory(e,t=14){if(!P)return[];const r=xe();if(!r)return[];const n=performance.now();try{const i=new Date,s=new Date;s.setDate(s.getDate()-t);const{data:c,error:u}=await r.from("disposal_loads").select("*").eq("project_id",e).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",i.toISOString().split("T")[0]).order("work_date",{ascending:!1}),m=Math.round(performance.now()-n);if(Ke.query("getDisposalLoadsHistory",{duration:m,rows:c?.length,project_id:e}),u)throw u;return(c||[]).map(h=>({...h,load_date:h.work_date}))}catch(i){throw Ke.error("database",{message:i.message,operation:"getDisposalLoadsHistory",project_id:e}),i}},async addDisposalLoad(e,t,r,n,i,s=null){if(!P)return null;const c=xe();if(!c)throw new Error("Database client not available");const{data:u,error:m}=await c.from("disposal_loads").insert({project_id:e,user_id:t,work_date:r,load_type:n,load_count:i,notes:s}).select().single();if(m)throw Ke.error("database",{message:m.message,operation:"addDisposalLoad",project_id:e}),m;return u},async updateDisposalLoad(e,t,r,n=null){if(!P)return null;const i=xe();if(!i)throw new Error("Database client not available");const{data:s,error:c}=await i.from("disposal_loads").update({load_type:t,load_count:r,notes:n}).eq("id",e).select().single();if(c)throw Ke.error("database",{message:c.message,operation:"updateDisposalLoad"}),c;return s},async deleteDisposalLoad(e){if(!P)return!1;const t=xe();if(!t)throw new Error("Database client not available");const{error:r}=await t.from("disposal_loads").delete().eq("id",e);if(r)throw Ke.error("database",{message:r.message,operation:"deleteDisposalLoad"}),r;return!0},async getDisposalSummary(e,t=null,r=null){if(!P)return[];const n=xe();if(!n)return[];const i=performance.now();try{const{data:s,error:c}=await n.rpc("get_disposal_summary",{p_project_id:e,p_start_date:t,p_end_date:r}),u=Math.round(performance.now()-i);if(Ke.query("getDisposalSummary",{duration:u,rows:s?.length,project_id:e}),c)throw c;return s||[]}catch(s){return Ke.error("database",{message:s.message,operation:"getDisposalSummary",project_id:e}),this.getDisposalSummaryFallback(e,t,r)}},async getDisposalSummaryFallback(e,t,r){let i=(xe()||T).from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e);t&&(i=i.gte("work_date",t)),r&&(i=i.lte("work_date",r));const{data:s,error:c}=await i;if(c)throw c;const u={};return s?.forEach(m=>{u[m.load_type]||(u[m.load_type]={load_type:m.load_type,total_loads:0,days:new Set}),u[m.load_type].total_loads+=m.load_count,u[m.load_type].days.add(m.work_date)}),Object.values(u).map(m=>({load_type:m.load_type,total_loads:m.total_loads,days_with_activity:m.days.size}))},async getWeeklyDisposalSummary(e,t=4){if(!P)return[];const r=xe();if(!r)return[];const n=new Date,i=new Date;i.setDate(i.getDate()-t*7);const{data:s,error:c}=await r.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",e).gte("work_date",i.toISOString().split("T")[0]).lte("work_date",n.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(c)throw c;const u={};return s?.forEach(m=>{const h=new Date(m.work_date),p=new Date(h);p.setDate(h.getDate()-h.getDay());const v=p.toISOString().split("T")[0];u[v]||(u[v]={week:v,concrete:0,trash:0,metals:0,hazardous_waste:0}),u[v][m.load_type]+=m.load_count}),Object.values(u).sort((m,h)=>m.week.localeCompare(h.week))},async uploadPhoto(e,t,r,n){if(!P)return null;const i=xe();if(!i)throw new Error("Database client not available");const s=performance.now(),c=n.size||0,u=Date.now(),m=new Uint8Array(6);crypto.getRandomValues(m);const h=Array.from(m,x=>x.toString(36)).join(""),p=n.name?.split(".").pop()||"jpg",v=`${u}-${h}.${p}`,_=`${e}/${t}/${r}/${v}`;try{const{data:x,error:w}=await i.storage.from("tm-photos").upload(_,n,{cacheControl:"3600",upsert:!1}),j=Math.round(performance.now()-s);if(Ke.storage("upload",{company_id:e,project_id:t,size:c,duration:j,success:!w}),w)throw w;return _}catch(x){throw Ke.error("storage",{message:x.message,operation:"uploadPhoto",company_id:e,project_id:t}),x}},async uploadPhotoBase64(e,t,r,n,i="photo.jpg"){if(!P)return null;const s=xe();if(!s)throw new Error("Database client not available");const u=await(await fetch(n)).blob(),m=Date.now(),h=new Uint8Array(6);crypto.getRandomValues(h);const p=Array.from(h,S=>S.toString(36)).join(""),v=i.split(".").pop()||"jpg",_=`${m}-${p}.${v}`,x=`${e}/${t}/${r}/${_}`,{data:w,error:j}=await s.storage.from("tm-photos").upload(x,u,{cacheControl:"3600",upsert:!1,contentType:u.type});if(j)throw j;return x},async resolvePhotoUrl(e){if(!e||!P)return e;let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return e;t=decodeURIComponent(n[1])}catch{return e}else t=e;try{const r=Ii(),{data:n,error:i}=await r.storage.from("tm-photos").createSignedUrl(t,3600);return i||!n?.signedUrl?null:n.signedUrl}catch{return null}},async resolvePhotoUrls(e){if(!P||!e?.length)return e||[];const t=[],r=[];for(let n=0;n<e.length;n++){const i=e[n];if(!i)continue;let s;if(i.startsWith("http"))try{const u=new URL(i).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);u&&(s=decodeURIComponent(u[1]))}catch{}else s=i;s&&(t.push(s),r.push(n))}if(!t.length)return e;try{const n=Ii(),{data:i,error:s}=await n.storage.from("tm-photos").createSignedUrls(t,3600);if(s||!i)return e;const c=[...e];return i.forEach((u,m)=>{c[r[m]]=u.signedUrl||null}),c}catch{return e}},async deletePhoto(e){if(!P||!e)return;let t;if(e.startsWith("http"))try{const i=new URL(e).pathname.match(/\/tm-photos\/(.+)$/);if(!i)return;t=i[1]}catch{return}else t=e;const{error:r}=await T.storage.from("tm-photos").remove([t]);if(r)throw r},async verifyPhotoAccessible(e){if(!P||!e)return{accessible:!1,error:"Invalid input"};let t;if(e.startsWith("http"))try{const n=new URL(e).pathname.match(/\/(?:public\/)?tm-photos\/(.+)$/);if(!n)return{accessible:!1,error:"Not a tm-photos URL"};t=decodeURIComponent(n[1])}catch{return{accessible:!1,error:"Invalid URL"}}else t=e;try{const{data:r,error:n}=await T.storage.from("tm-photos").createSignedUrl(t,60);return n?{accessible:!1,error:n.message}:{accessible:!!r?.signedUrl,status:200}}catch(r){return{accessible:!1,error:r.message||"Verification failed"}}},async verifyTicketPhotos(e){if(!P)return{verified:!1,issues:[]};try{const{data:t,error:r}=await T.from("t_and_m_tickets").select("photos").eq("id",e).single();if(r)throw r;if(!t?.photos||t.photos.length===0)return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",e),{verified:!0,status:"empty",issues:[]};const n=[];for(const s of t.photos){const c=await this.verifyPhotoAccessible(s);c.accessible||n.push({url:s,error:c.error})}const i=n.length===0?"verified":"issues";return await T.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:i,photos_issue_count:n.length}).eq("id",e),{verified:n.length===0,status:i,totalPhotos:t.photos.length,issues:n}}catch(t){return console.error("Error verifying ticket photos:",t),{verified:!1,error:t.message,issues:[]}}},async queuePhotoUpload(e,t,r,n){if(!P)return null;const{data:i,error:s}=await T.from("photo_upload_queue").insert({ticket_id:e,temp_id:t,file_name:r,file_size_bytes:n,status:"pending"}).select().single();return s?(console.error("Error queueing photo upload:",s),null):i},async confirmQueuedUpload(e,t,r){if(!P)return!1;const{data:n,error:i}=await T.rpc("confirm_photo_upload",{p_queue_id:e,p_uploaded_url:t,p_storage_path:r});return i?(console.error("Error confirming photo upload:",i),!1):n===!0},async markQueuedUploadFailed(e,t){if(!P)return!1;const{data:r,error:n}=await T.rpc("mark_photo_upload_failed",{p_queue_id:e,p_error:t});return n?(console.error("Error marking photo upload failed:",n),!1):r===!0},async getPendingPhotoUploads(e){if(!P)return[];const{data:t,error:r}=await T.rpc("get_pending_photo_uploads",{p_ticket_id:e});return r?(console.error("Error getting pending photo uploads:",r),[]):t||[]},async logPhotoOperation(e,t,r={}){if(P)try{await T.from("photo_audit_log").insert({ticket_id:e,cor_id:r.corId||null,operation:t,photo_url:r.photoUrl||null,storage_path:r.storagePath||null,details:r.metadata?r.metadata:null,error_message:r.error||null,triggered_by:r.triggeredBy||"system"})}catch(n){console.error("Error logging photo operation:",n)}},async saveExportSnapshot(e,t,r={}){if(!P)return null;const{exportType:n="pdf",exportReason:i=null,clientEmail:s=null,clientName:c=null}=r;try{const{data:u,error:m}=await T.from("cor_export_snapshots").insert({cor_id:e,export_type:n,export_reason:i,cor_data:t.cor_data,tickets_data:t.tickets_data,photos_manifest:t.photos_manifest,totals_snapshot:t.totals_snapshot,checksum:t.checksum,client_email:s,client_name:c}).select().single();if(m)throw m;return u}catch(u){return console.error("Error saving export snapshot:",u),null}},async getExportSnapshots(e){if(!P)return[];const{data:t,error:r}=await T.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",e).order("exported_at",{ascending:!1});return r?(console.error("Error fetching export snapshots:",r),[]):t||[]},async getExportSnapshot(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_snapshots").select("*").eq("id",e).single();return r?(console.error("Error fetching export snapshot:",r),null):t},async requestCORExport(e,t,r={}){if(!P)return null;try{const n=await T.auth.getUser(),{data:i,error:s}=await T.rpc("request_cor_export",{p_cor_id:e,p_idempotency_key:t,p_options:r,p_requested_by:n?.data?.user?.id||null});if(s)throw s;return i?.[0]||null}catch(n){throw Ke.error("database",{message:n.message,operation:"requestCORExport",extra:{corId:e}}),n}},async getExportJob(e){if(!P)return null;const{data:t,error:r}=await T.from("cor_export_jobs").select("*").eq("id",e).single();return r?(console.error("Error fetching export job:",r),null):t},async getExportJobs(e,t=10){if(!P)return[];const{data:r,error:n}=await T.from("cor_export_jobs").select("*").eq("cor_id",e).order("created_at",{ascending:!1}).limit(t);return n?(console.error("Error fetching export jobs:",n),[]):r||[]},async updateExportJobStatus(e,t,r={}){if(!P)return null;try{const{data:n,error:i}=await T.rpc("update_export_job_status",{p_job_id:e,p_status:t,p_snapshot_id:r.snapshotId||null,p_pdf_url:r.pdfUrl||null,p_error:r.error||null,p_error_details:r.errorDetails||null,p_metrics:r.metrics||null});if(i)throw i;return n}catch(n){throw Ke.error("database",{message:n.message,operation:"updateExportJobStatus",extra:{jobId:e,status:t}}),n}},async getCurrentCORSnapshot(e){if(!P)return null;const{data:t}=await T.from("change_orders").select("version, last_snapshot_version").eq("id",e).single();if(!t||t.version!==t.last_snapshot_version)return null;const{data:r}=await T.from("cor_export_snapshots").select("*").eq("cor_id",e).eq("is_current",!0).single();return r||null},async saveCORSnapshot(e,t){if(!P)return null;try{await T.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",e.corId);const r=await T.auth.getUser(),{data:n,error:i}=await T.from("cor_export_snapshots").insert({id:e.snapshotId,cor_id:e.corId,job_id:t,cor_version:e.corVersion,cor_data:e.corData,tickets_data:e.ticketsData,photos_manifest:e.photoManifest,totals_snapshot:e.totals,checksum:e.checksum,is_current:!0,exported_by:r?.data?.user?.id||null}).select().single();if(i)throw i;return await T.from("change_orders").update({last_snapshot_version:e.corVersion}).eq("id",e.corId),n}catch(r){throw Ke.error("database",{message:r.message,operation:"saveCORSnapshot",extra:{corId:e.corId}}),r}},async updateCORAggregatedStats(e){if(P)try{await T.rpc("update_cor_aggregated_stats",{p_cor_id:e})}catch(t){console.error("Error updating COR aggregated stats:",t)}},async getCrewCheckin(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=xe(),{data:i,error:s}=await n.from("crew_checkins").select("*").eq("project_id",e).eq("check_in_date",r).maybeSingle();return s&&console.error("Error fetching crew checkin:",s),i},async saveCrewCheckin(e,t,r=null,n=null){if(!P)return null;const i=n||new Date().toISOString().split("T")[0];if(!Rn()){const m={id:Wr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Od(m),await cn(Wt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const s=xe();if(!s){const m={id:Wr(),project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString(),_offline:!0};return await Od(m),await cn(Wt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}const{data:c,error:u}=await s.from("crew_checkins").upsert({project_id:e,check_in_date:i,workers:t,created_by:r,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Wr(),project_id:e,check_in_date:i,workers:t,_offline:!0};return await Od(m),await cn(Wt.SAVE_CREW_CHECKIN,{projectId:e,workers:t,checkInDate:i}),m}throw console.error("Error saving crew checkin:",u),u}return c&&Od(c).catch(m=>console.error("Failed to cache checkin:",m)),c},async addCrewMember(e,t,r=null){if(!P)return null;const n=await this.getCrewCheckin(e),i=n?.workers||[];return i.find(s=>s.name.toLowerCase()===t.name.toLowerCase())?n:(i.push(t),await this.saveCrewCheckin(e,i,r))},async removeCrewMember(e,t){if(!P)return null;const r=await this.getCrewCheckin(e);if(!r)return null;const n=r.workers.filter(i=>i.name.toLowerCase()!==t.toLowerCase());return await this.saveCrewCheckin(e,n,r.created_by)},async getCrewCheckinHistory(e,t=30){if(!P)return[];const{data:r,error:n}=await T.from("crew_checkins").select("*").eq("project_id",e).order("check_in_date",{ascending:!1}).limit(t);return n?(console.error("Error fetching crew history:",n),[]):r||[]},async getRecentWorkers(e,t=30){if(!P)return[];const r=await this.getCrewCheckinHistory(e,t),n=new Map;return r.forEach(i=>{(i.workers||[]).forEach(s=>{const c=s.name.toLowerCase();n.has(c)||n.set(c,{name:s.name,role:s.role,labor_class_id:s.labor_class_id||null,lastSeen:i.check_in_date})})}),Array.from(n.values()).sort((i,s)=>i.name.localeCompare(s.name))},async getLaborRates(e,t=null,r=null){if(!P)return[];let n=T.from("labor_rates").select("*").eq("company_id",e);t&&(n=n.eq("work_type",t)),r&&(n=n.eq("job_type",r));const{data:i,error:s}=await n;return s?(console.error("Error fetching labor rates:",s),[]):i||[]},async calculateManDayCosts(e,t,r,n){if(!P)return{totalCost:0,totalManDays:0,breakdown:[]};const i=await this.getCrewCheckinHistory(e,365),s=await this.getLaborRates(t,r,n),c={};s.forEach(v=>{c[v.role.toLowerCase()]=parseFloat(v.regular_rate)||0});let u=0,m=0;const h={},p=[];return i.forEach(v=>{const _=v.workers||[];let x=0;const w={};_.forEach(j=>{const S=(j.role||"laborer").toLowerCase(),O=c[S]||0;w[S]||(w[S]={count:0,cost:0}),w[S].count++,w[S].cost+=O,x+=O,h[S]||(h[S]={count:0,cost:0,rate:O}),h[S].count++,h[S].cost+=O}),u+=x,m+=_.length,p.push({date:v.check_in_date,workers:_.length,cost:x,breakdown:w})}),{totalCost:u,totalManDays:m,byRole:h,byDate:p,daysWorked:i.length}},async getDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=xe(),{data:i,error:s}=await n.from("daily_reports").select("*").eq("project_id",e).eq("report_date",r).maybeSingle();return s&&console.error("Error fetching daily report:",s),i},async compileDailyReport(e,t=null){if(!P)return null;const r=t||new Date().toISOString().split("T")[0],n=xe(),[i,s,c]=await Promise.all([this.getCrewCheckin(e,r),n.from("areas").select("*").eq("project_id",e),n.from("t_and_m_tickets").select("*").eq("project_id",e).eq("work_date",r)]),u=s?.data||[],m=c?.data||[],h=u.filter(v=>v.status==="done"&&v.completed_at?.startsWith(r)),p=m.reduce((v,_)=>v+(_.photos?.length||0),0);return{crew_count:i?.workers?.length||0,crew_list:i?.workers||[],tasks_completed:h.length,tasks_total:u.length,completed_tasks:h.map(v=>({name:v.name,group:v.group_name})),tm_tickets_count:m.length,photos_count:p}},async saveDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!Rn()){const u={id:Wr(),project_id:e,report_date:n,...t,updated_at:new Date().toISOString(),_offline:!0};return await Ts(u),u}const i=xe(),{data:s,error:c}=await i.from("daily_reports").upsert({project_id:e,report_date:n,...t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const u={id:Wr(),project_id:e,report_date:n,...t,_offline:!0};return await Ts(u),u}throw console.error("Error saving daily report:",c),c}return s&&Ts(s).catch(u=>console.error("Failed to cache report:",u)),s},async submitDailyReport(e,t,r=null){if(!P)return null;const n=r||new Date().toISOString().split("T")[0];if(!Rn()){const m=await wL(e,n),h={id:Wr(),project_id:e,report_date:n,...m||{},status:"pending_sync",submitted_by:t,submitted_at:new Date().toISOString(),_offline:!0};return await Ts(h),await cn(Wt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:m||{},submittedBy:t}),h}const i=await this.compileDailyReport(e,n),s=xe();if(!s)throw new Error("Database client not available");const{data:c,error:u}=await s.from("daily_reports").upsert({project_id:e,report_date:n,...i,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:t,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Wr(),project_id:e,report_date:n,...i,status:"pending_sync",submitted_by:t,_offline:!0};return await Ts(m),await cn(Wt.SUBMIT_DAILY_REPORT,{projectId:e,reportData:i,submittedBy:t}),m}throw console.error("Error submitting daily report:",u),u}return c&&Ts(c).catch(m=>console.error("Failed to cache report:",m)),c},async getDailyReports(e,t=30){if(!P)return[];const{data:r,error:n}=await T.from("daily_reports").select("*").eq("project_id",e).order("report_date",{ascending:!1}).limit(t);return n?(console.error("Error fetching daily reports:",n),[]):r||[]},async sendMessage(e,t,r,n,i=null,s=null,c="general",u=null){if(!P)return null;if(!Rn()){const p={id:Wr(),project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u,created_at:new Date().toISOString(),_offline:!0};return await IS(p),await cn(Wt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),p}const{data:m,error:h}=await T.from("messages").insert({project_id:e,sender_type:r,sender_name:n,sender_user_id:i,message:t,photo_url:s,message_type:c,parent_message_id:u}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const p={id:Wr(),project_id:e,sender_type:r,sender_name:n,message:t,created_at:new Date().toISOString(),_offline:!0};return await IS(p),await cn(Wt.SEND_MESSAGE,{projectId:e,senderType:r,senderName:n,content:t}),p}throw console.error("Error sending message:",h),h}return m},async getMessages(e,t=50){if(!P)return[];const r=xe(),{data:n,error:i}=await r.from("messages").select("*").eq("project_id",e).order("created_at",{ascending:!1}).limit(t);return i?[]:n||[]},async getUnreadCount(e,t){if(!P)return 0;const r=xe(),n=t==="field"?"office":"field",{count:i,error:s}=await r.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1);return s?0:i||0},async markMessagesRead(e,t){if(!P)return;const r=xe(),n=t==="field"?"office":"field";await r.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",e).eq("sender_type",n).eq("is_read",!1)},async createMaterialRequest(e,t,r,n=null,i="normal",s=null){if(!P)return null;if(!Rn()){const m={id:Wr(),project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await cn(Wt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}const{data:c,error:u}=await T.from("material_requests").insert({project_id:e,items:t,requested_by:r,needed_by:n,priority:i,notes:s}).select().single();if(u){if(u.message?.includes("fetch")||u.message?.includes("network")){const m={id:Wr(),project_id:e,items:t,requested_by:r,status:"pending_sync",_offline:!0};return await cn(Wt.CREATE_MATERIAL_REQUEST,{projectId:e,items:t,requestedBy:r,neededBy:n,priority:i,notes:s}),m}throw console.error("Error creating material request:",u),u}return c},async getMaterialRequests(e,t=null){if(!P)return[];let r=T.from("material_requests").select("*").eq("project_id",e).order("created_at",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching material requests:",i),[]):n||[]},async getPendingRequestsCount(e){if(!P)return 0;const{count:t,error:r}=await T.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",e).eq("status","pending");return r?0:t||0},async updateMaterialRequest(e,t,r,n=null,i=null){if(!P)return null;const s={status:t,responded_by:r,responded_at:new Date().toISOString(),response_notes:n,updated_at:new Date().toISOString()};i&&(s.expected_delivery=i),t==="delivered"&&(s.delivered_at=new Date().toISOString());const{data:c,error:u}=await T.from("material_requests").update(s).eq("id",e).select().single();if(u)throw console.error("Error updating material request:",u),u;return c},generateShareToken(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=new Uint8Array(12);return crypto.getRandomValues(t),Array.from(t,r=>e[r%e.length]).join("")},async createProjectShare(e,t,r,n=null){if(!P){const m=Oe();m.projectShares||(m.projectShares=[]);const h={id:crypto.randomUUID(),project_id:e,share_token:this.generateShareToken(),created_by:t,expires_at:n,is_active:!0,permissions:r,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return m.projectShares.push(h),Ge(m),h}const{data:i,error:s}=await T.rpc("generate_share_token");if(s)throw console.error("Error generating share token:",s),s;const{data:c,error:u}=await T.from("project_shares").insert({project_id:e,share_token:i,created_by:t,expires_at:n,permissions:r}).select().single();if(u)throw console.error("Error creating project share:",u),u;return c},async getShareByToken(e){if(!P){const n=Oe();if(!n.projectShares)return null;const i=n.projectShares.find(s=>s.share_token===e&&s.is_active&&(!s.expires_at||new Date(s.expires_at)>new Date));return i&&(i.view_count++,i.last_viewed_at=new Date().toISOString(),Ge(n)),i}const{data:t,error:r}=await T.from("project_shares").select("*, projects(*)").eq("share_token",e).eq("is_active",!0).single();return r?(console.error("Error fetching share by token:",r),null):t.expires_at&&new Date(t.expires_at)<new Date?null:(await T.rpc("increment_share_view_count",{token:e}),t)},async getProjectShares(e){if(!P){const n=Oe();return n.projectShares?n.projectShares.filter(i=>i.project_id===e):[]}const{data:t,error:r}=await T.from("project_shares").select("*, users(name, email)").eq("project_id",e).order("created_at",{ascending:!1});return r?(console.error("Error fetching project shares:",r),[]):t||[]},async updateProjectShare(e,t){if(!P){const i=Oe();if(!i.projectShares)return null;const s=i.projectShares.findIndex(c=>c.id===e);return s===-1?null:(i.projectShares[s]={...i.projectShares[s],...t,updated_at:new Date().toISOString()},Ge(i),i.projectShares[s])}const{data:r,error:n}=await T.from("project_shares").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating project share:",n),n;return r},async revokeProjectShare(e){return this.updateProjectShare(e,{is_active:!1})},async deleteProjectShare(e){if(!P){const r=Oe();if(!r.projectShares)return;r.projectShares=r.projectShares.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("project_shares").delete().eq("id",e);if(t)throw console.error("Error deleting project share:",t),t},async getPublicProjectData(e){const t=await this.getShareByToken(e);if(!t)return null;const r=t.project_id||t.projects?.id;if(!P){const s=Oe(),c=s.projects.find(v=>v.id===r);if(!c)return null;const u=s.areas.filter(v=>v.project_id===r),m=u.reduce((v,_)=>v+parseFloat(_.weight||0),0),h=u.filter(v=>v.status==="done").reduce((v,_)=>v+parseFloat(_.weight||0),0),p=m>0?Math.round(h/m*100):0;return{share:t,project:c,progress:p,areas:t.permissions.progress?u:[],photos:[],dailyReports:[],tmTickets:[]}}const n=t.projects||await this.getProject(r);if(!n)return null;const i={share:t,project:n,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(t.permissions.progress){i.areas=await this.getAreas(r);const s=i.areas.reduce((u,m)=>u+parseFloat(m.weight||0),0),c=i.areas.filter(u=>u.status==="done").reduce((u,m)=>u+parseFloat(m.weight||0),0);i.progress=s>0?Math.round(c/s*100):0}if(t.permissions.photos){const{data:s}=await T.from("t_and_m_tickets").select("photos, work_date").eq("project_id",r).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);i.photos=s?.flatMap(c=>(c.photos||[]).map(u=>({url:u,date:c.work_date})))||[]}if(t.permissions.daily_reports){const{data:s}=await T.from("daily_reports").select("*").eq("project_id",r).order("report_date",{ascending:!1}).limit(10);i.dailyReports=s||[]}return t.permissions.tm_tickets&&(i.tmTickets=await this.getTMTickets(r)),i},async createInjuryReport(e){if(!P){const n=Oe();n.injuryReports||(n.injuryReports=[]);const i={id:crypto.randomUUID(),...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return n.injuryReports.push(i),Ge(n),i}const{data:t,error:r}=await T.from("injury_reports").insert(e).select().single();if(r)throw console.error("Error creating injury report:",r),r;return t},async getInjuryReports(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.filter(i=>i.project_id===e).sort((i,s)=>new Date(s.incident_date)-new Date(i.incident_date)):[]}const{data:t,error:r}=await T.from("injury_reports").select("*").eq("project_id",e).order("incident_date",{ascending:!1});return r?(console.error("Error fetching injury reports:",r),[]):t||[]},async getCompanyInjuryReports(e,t=null){if(!P){const s=Oe();if(!s.injuryReports)return[];let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>u.status===t)),c.sort((u,m)=>new Date(m.incident_date)-new Date(u.incident_date))}let r=T.from("injury_reports").select("*, projects(name)").eq("company_id",e).order("incident_date",{ascending:!1});t&&(r=r.eq("status",t));const{data:n,error:i}=await r;return i?(console.error("Error fetching company injury reports:",i),[]):n||[]},async getInjuryReport(e){if(!P){const n=Oe();return n.injuryReports?n.injuryReports.find(i=>i.id===e):null}const{data:t,error:r}=await T.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",e).single();return r?(console.error("Error fetching injury report:",r),null):t},async updateInjuryReport(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(c=>c.id===e);return s===-1?null:(i.injuryReports[s]={...i.injuryReports[s],...t,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s])}const{data:r,error:n}=await T.from("injury_reports").update(t).eq("id",e).select().single();if(n)throw console.error("Error updating injury report:",n),n;return r},async closeInjuryReport(e,t){return this.updateInjuryReport(e,{status:"closed",closed_at:new Date().toISOString(),closed_by:t})},async deleteInjuryReport(e){if(!P){const r=Oe();if(!r.injuryReports)return;r.injuryReports=r.injuryReports.filter(n=>n.id!==e),Ge(r);return}const{error:t}=await T.from("injury_reports").delete().eq("id",e);if(t)throw console.error("Error deleting injury report:",t),t},async getInjuryStatistics(e,t=null,r=null){if(!P){const s=Oe();if(!s.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let c=s.injuryReports.filter(u=>u.company_id===e);return t&&(c=c.filter(u=>new Date(u.incident_date)>=new Date(t))),r&&(c=c.filter(u=>new Date(u.incident_date)<=new Date(r))),{total_incidents:c.length,minor_injuries:c.filter(u=>u.injury_type==="minor").length,serious_injuries:c.filter(u=>u.injury_type==="serious").length,critical_injuries:c.filter(u=>u.injury_type==="critical").length,near_misses:c.filter(u=>u.injury_type==="near_miss").length,osha_recordable:c.filter(u=>u.osha_recordable).length,total_days_away:c.reduce((u,m)=>u+(m.days_away_from_work||0),0),total_restricted_days:c.reduce((u,m)=>u+(m.restricted_work_days||0),0)}}const{data:n,error:i}=await T.rpc("get_injury_statistics",{comp_id:e,start_date:t,end_date:r});return i?(console.error("Error fetching injury statistics:",i),null):n[0]||null},async addWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.push(t),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.push(t),this.updateInjuryReport(e,{witnesses:n})},async removeWitness(e,t){if(!P){const i=Oe();if(!i.injuryReports)return null;const s=i.injuryReports.findIndex(m=>m.id===e);if(s===-1)return null;const c=i.injuryReports[s],u=c.witnesses||[];return u.splice(t,1),i.injuryReports[s]={...c,witnesses:u,updated_at:new Date().toISOString()},Ge(i),i.injuryReports[s]}const r=await this.getInjuryReport(e);if(!r)return null;const n=r.witnesses||[];return n.splice(t,1),this.updateInjuryReport(e,{witnesses:n})},async getCompanyUsers(e){if(P){const{data:t,error:r}=await T.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",e);return r?(console.error("Error fetching company users:",r),[]):t?.map(n=>({id:n.user_id,name:n.users?.name||n.users?.email,email:n.users?.email,role:n.role}))||[]}return[]},async getProjectNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",e);return n?(console.error("Error fetching notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.project_id===e):[]},async getUserNotificationPreferences(e){if(P){const{data:r,error:n}=await T.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",e);return n?(console.error("Error fetching user notification preferences:",n),[]):r||[]}const t=Oe();return t.notificationPreferences?t.notificationPreferences.filter(r=>r.user_id===e):[]},async setNotificationPreference(e,t,r){if(P){const{data:c,error:u}=await T.from("notification_preferences").upsert({project_id:e,user_id:t,notification_types:r,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(u)throw console.error("Error setting notification preference:",u),u;return c}const n=Oe();n.notificationPreferences||(n.notificationPreferences=[]);const i=n.notificationPreferences.findIndex(c=>c.project_id===e&&c.user_id===t),s={id:i>=0?n.notificationPreferences[i].id:crypto.randomUUID(),project_id:e,user_id:t,notification_types:r,created_at:i>=0?n.notificationPreferences[i].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return i>=0?n.notificationPreferences[i]=s:n.notificationPreferences.push(s),Ge(n),s},async removeNotificationPreference(e,t){if(P){const{error:n}=await T.from("notification_preferences").delete().eq("project_id",e).eq("user_id",t);if(n)throw console.error("Error removing notification preference:",n),n;return!0}const r=Oe();return r.notificationPreferences&&(r.notificationPreferences=r.notificationPreferences.filter(n=>!(n.project_id===e&&n.user_id===t)),Ge(r)),!0},async setProjectNotificationPreferences(e,t){const r=[];for(const n of t)if(n.notificationTypes&&n.notificationTypes.length>0){const i=await this.setNotificationPreference(e,n.userId,n.notificationTypes);r.push(i)}else await this.removeNotificationPreference(e,n.userId);return r},async getNotificationPresets(e){if(P){const{data:r,error:n}=await T.from("notification_presets").select("*").eq("company_id",e).order("name");return n?(console.error("Error fetching notification presets:",n),[]):r||[]}const t=Oe();return t.notificationPresets?t.notificationPresets.filter(r=>r.company_id===e):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:e},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:e},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:e},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:e}]},async createNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").insert({company_id:e,name:t,notification_types:r}).select().single();if(c)throw console.error("Error creating notification preset:",c),c;return s}const n=Oe();n.notificationPresets||(n.notificationPresets=[]);const i={id:crypto.randomUUID(),company_id:e,name:t,notification_types:r,created_at:new Date().toISOString()};return n.notificationPresets.push(i),Ge(n),i},async updateNotificationPreset(e,t,r){if(P){const{data:s,error:c}=await T.from("notification_presets").update({name:t,notification_types:r,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(c)throw console.error("Error updating notification preset:",c),c;return s}const n=Oe();if(!n.notificationPresets)return null;const i=n.notificationPresets.findIndex(s=>s.id===e);return i===-1?null:(n.notificationPresets[i]={...n.notificationPresets[i],name:t,notification_types:r,updated_at:new Date().toISOString()},Ge(n),n.notificationPresets[i])},async deleteNotificationPreset(e){if(P){const{error:r}=await T.from("notification_presets").delete().eq("id",e);if(r)throw console.error("Error deleting notification preset:",r),r;return!0}const t=Oe();return t.notificationPresets&&(t.notificationPresets=t.notificationPresets.filter(r=>r.id!==e),Ge(t)),!0},async getDumpSites(e){if(P){const{data:r,error:n}=await T.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",e).eq("active",!0).order("name");return n?(console.error("Error fetching dump sites:",n),[]):r||[]}return(Oe().dumpSites||[]).filter(r=>r.company_id===e&&r.active)},async createDumpSite(e,t,r="",n=""){if(P){const{data:c,error:u}=await T.from("dump_sites").insert({company_id:e,name:t,address:r,notes:n,active:!0}).select().single();if(u)throw console.error("Error creating dump site:",u),u;return c}const i=Oe();i.dumpSites||(i.dumpSites=[]);const s={id:crypto.randomUUID(),company_id:e,name:t,address:r,notes:n,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return i.dumpSites.push(s),Ge(i),s},async updateDumpSite(e,t){if(P){const{data:i,error:s}=await T.from("dump_sites").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(s)throw console.error("Error updating dump site:",s),s;return i}const r=Oe();if(!r.dumpSites)return null;const n=r.dumpSites.findIndex(i=>i.id===e);return n===-1?null:(r.dumpSites[n]={...r.dumpSites[n],...t},Ge(r),r.dumpSites[n])},async deleteDumpSite(e){return this.updateDumpSite(e,{active:!1})},async setDumpSiteRate(e,t,r,n="load"){if(P){const{data:u}=await T.from("dump_site_rates").select("id").eq("dump_site_id",e).eq("waste_type",t).maybeSingle();if(u){const{data:m,error:h}=await T.from("dump_site_rates").update({estimated_cost_per_load:r,unit:n}).eq("id",u.id).select().single();if(h)throw console.error("Error updating dump site rate:",h),h;return m}else{const{data:m,error:h}=await T.from("dump_site_rates").insert({dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n}).select().single();if(h)throw console.error("Error inserting dump site rate:",h),h;return m}}const i=Oe();i.dumpSiteRates||(i.dumpSiteRates=[]);const s=i.dumpSiteRates.findIndex(u=>u.dump_site_id===e&&u.waste_type===t),c={id:s>=0?i.dumpSiteRates[s].id:crypto.randomUUID(),dump_site_id:e,waste_type:t,estimated_cost_per_load:r,unit:n,created_at:new Date().toISOString()};return s>=0?i.dumpSiteRates[s]=c:i.dumpSiteRates.push(c),Ge(i),c},async getDumpSiteRates(e){if(P){const{data:r,error:n}=await T.from("dump_site_rates").select("*").eq("dump_site_id",e);return n?(console.error("Error fetching dump site rates:",n),[]):r||[]}return(Oe().dumpSiteRates||[]).filter(r=>r.dump_site_id===e)},async getHaulOffs(e){if(P){const{data:r,error:n}=await T.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",e).order("work_date",{ascending:!1});return n?(console.error("Error fetching haul-offs:",n),[]):r||[]}return(Oe().haulOffs||[]).filter(r=>r.project_id===e).sort((r,n)=>new Date(n.work_date)-new Date(r.work_date))},async createHaulOff(e,t){const r={project_id:e,dump_site_id:t.dumpSiteId,waste_type:t.wasteType,loads:t.loads,hauling_company:t.haulingCompany||"",work_date:t.workDate,notes:t.notes||"",estimated_cost:t.estimatedCost||0,created_by:t.createdBy||""};if(P){const{data:s,error:c}=await T.from("haul_offs").insert(r).select().single();if(c)throw console.error("Error creating haul-off:",c),c;return s}const n=Oe();n.haulOffs||(n.haulOffs=[]);const i={...r,id:crypto.randomUUID(),created_at:new Date().toISOString()};return n.haulOffs.push(i),Ge(n),i},async calculateHaulOffCosts(e){const t=await this.getHaulOffs(e);let r=0,n=0;const i={},s=[],c={};t.forEach(m=>{const h=parseFloat(m.estimated_cost)||0,p=parseInt(m.loads)||0;r+=h,n+=p,i[m.waste_type]||(i[m.waste_type]={loads:0,cost:0}),i[m.waste_type].loads+=p,i[m.waste_type].cost+=h,c[m.work_date]||(c[m.work_date]={date:m.work_date,loads:0,cost:0}),c[m.work_date].loads+=p,c[m.work_date].cost+=h}),Object.values(c).sort((m,h)=>new Date(h.date)-new Date(m.date)).forEach(m=>s.push(m));const u=s.length;return{totalCost:r,totalLoads:n,byWasteType:i,byDate:s,daysWithHaulOff:u,avgDailyHaulOffCost:u>0?r/u:0}},subscribeToHaulOffs(e,t){return P?T.channel(`haul_offs:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${e}`},t).subscribe():null},...EL,async createFolder(e,t,r){const n=xe(),{data:i,error:s}=await n.from("document_folders").insert({company_id:e,project_id:t,name:r.name,description:r.description||null,icon:r.icon||"folder",color:r.color||"blue",sort_order:r.sort_order||0,created_by:(await n.auth.getUser()).data.user?.id}).select().single();if(s)throw s;return i},async getProjectFolders(e){const t=xe(),{data:r,error:n}=await t.from("document_folders").select("*").eq("project_id",e).order("sort_order",{ascending:!0}).order("name",{ascending:!0});if(n)throw n;const i=r.map(s=>s.id);if(i.length>0){const{data:s,error:c}=await t.from("documents").select("folder_id").in("folder_id",i).is("archived_at",null).eq("is_current",!0);if(!c&&s){const u={};s.forEach(m=>{u[m.folder_id]=(u[m.folder_id]||0)+1}),r.forEach(m=>{m.document_count=u[m.id]||0})}}return r},async updateFolder(e,t){const r=xe(),{data:n,error:i}=await r.from("document_folders").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return n},async deleteFolder(e){const t=xe();await t.from("documents").update({folder_id:null}).eq("folder_id",e);const{error:r}=await t.from("document_folders").delete().eq("id",e);if(r)throw r;return!0},async reorderFolders(e,t){const r=xe(),n=t.map(({id:i,sort_order:s})=>r.from("document_folders").update({sort_order:s,updated_at:new Date().toISOString()}).eq("id",i).eq("project_id",e));return await Promise.all(n),!0},async getFolderDocuments(e,t={}){const r=xe(),{page:n=0,limit:i=25}=t;let s=r.from("documents").select("*",{count:"exact"}).eq("folder_id",e).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);const{data:c,error:u,count:m}=await s;if(u)throw u;return{documents:c||[],totalCount:m||0,hasMore:(m||0)>(n+1)*i}},async moveDocumentToFolder(e,t){const r=xe(),{data:n,error:i}=await r.from("documents").update({folder_id:t}).eq("id",e).select().single();if(i)throw i;return n},async getUnfiledDocuments(e,t={}){const r=xe(),{page:n=0,limit:i=25}=t,{data:s,error:c,count:u}=await r.from("documents").select("*",{count:"exact"}).eq("project_id",e).is("folder_id",null).is("archived_at",null).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(n*i,(n+1)*i-1);if(c)throw c;return{documents:s||[],totalCount:u||0,hasMore:(u||0)>(n+1)*i}},async uploadDocument(e,t,r,n={}){const i=xe(),s=Date.now(),c=250*1024*1024,{data:u}=await i.from("documents").select("file_size_bytes").eq("project_id",t).is("archived_at",null),m=u?.reduce((j,S)=>j+(S.file_size_bytes||0),0)||0;if(m+r.size>c){const j=Math.round(m/1024/1024),S=Math.round(c/1024/1024);throw new Error(`Project storage limit reached (${j}/${S} MB). Contact support to upgrade.`)}const h=Date.now(),p=new Uint8Array(6);crypto.getRandomValues(p);const v=Array.from(p,j=>j.toString(36)).join(""),_=r.name.split(".").pop()?.toLowerCase()||"bin",x=`${h}-${v}.${_}`,w=`${e}/${t}/documents/${x}`;try{const{data:j,error:S}=await i.storage.from("project-documents").upload(w,r,{cacheControl:"3600",upsert:!1});if(S)throw S;const{data:O}=i.storage.from("project-documents").getPublicUrl(w),C=O.publicUrl,A=n.category==="contracts"?"pending":"approved",{data:k,error:D}=await i.from("documents").insert({company_id:e,project_id:t,name:n.name||r.name.replace(/\.[^/.]+$/,""),description:n.description||null,file_name:r.name,file_size_bytes:r.size,mime_type:r.type,storage_path:w,folder_id:n.folderId||null,category:n.category||"general",tags:n.tags||[],visibility:n.visibility||"all",approval_status:A,resource_type:n.resourceType||null,resource_id:n.resourceId||null,uploaded_by:(await i.auth.getUser()).data?.user?.id}).select().single();if(D)throw D;const M=Date.now()-s;return Ke.storage("document_upload",{company_id:e,project_id:t,file_size:r.size,mime_type:r.type,duration:M,success:!0}),{...k,url:C}}catch(j){throw Ke.error("storage",{message:j.message,operation:"uploadDocument",company_id:e,project_id:t}),j}},async getProjectDocuments(e,{category:t=null,page:r=0,limit:n=25,includeArchived:i=!1}={}){let c=xe().from("documents").select("*",{count:"exact"}).eq("project_id",e).eq("is_current",!0).order("uploaded_at",{ascending:!1}).range(r*n,(r+1)*n-1);i||(c=c.is("archived_at",null)),t&&t!=="all"&&(c=c.eq("category",t));const{data:u,error:m,count:h}=await c;if(m)throw m;return{documents:u||[],totalCount:h||0,hasMore:(r+1)*n<(h||0),page:r,limit:n}},async getDocument(e){const t=xe(),{data:r,error:n}=await t.from("documents").select("*").eq("id",e).single();if(n)throw n;return r},async getDocumentVersions(e){const t=xe(),{data:r,error:n}=await t.from("documents").select("id, parent_document_id").eq("id",e).single();if(n)throw n;const i=r.parent_document_id||e,{data:s,error:c}=await t.from("documents").select("*").or(`id.eq.${i},parent_document_id.eq.${i}`).order("version",{ascending:!1});if(c)throw c;return s||[]},async uploadDocumentVersion(e,t,r,n,i={}){const s=xe(),{data:c,error:u}=await s.from("documents").select("*").eq("id",e).single();if(u)throw u;const{data:m}=await s.from("documents").select("version").or(`id.eq.${e},parent_document_id.eq.${e}`).order("version",{ascending:!1}).limit(1),h=(m?.[0]?.version||1)+1;await s.from("documents").update({is_current:!1}).or(`id.eq.${e},parent_document_id.eq.${e}`);const p=await this.uploadDocument(t,r,n,{name:i.name||c.name,description:i.description||c.description,category:c.category,visibility:c.visibility,tags:c.tags,resourceType:c.resource_type,resourceId:c.resource_id}),{data:v,error:_}=await s.from("documents").update({version:h,is_current:!0,parent_document_id:e}).eq("id",p.id).select().single();if(_)throw _;return await s.from("document_audit_log").insert({document_id:p.id,project_id:r,company_id:t,operation:"version_created",details:{version:h,parent_id:e},triggered_by:"user",user_id:(await s.auth.getUser()).data?.user?.id}),{...p,...v}},async updateDocument(e,t){const r=xe(),{data:n,error:i}=await r.from("documents").update({name:t.name,description:t.description,category:t.category,visibility:t.visibility,tags:t.tags}).eq("id",e).select().single();if(i)throw i;return n},async archiveDocument(e){const t=xe(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:new Date().toISOString(),archived_by:r}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"deleted",triggered_by:"user",user_id:r}),n},async restoreDocument(e){const t=xe(),r=(await t.auth.getUser()).data?.user?.id,{data:n,error:i}=await t.from("documents").update({archived_at:null,archived_by:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:"restored",triggered_by:"user",user_id:r}),n},async deleteDocumentPermanently(e){const t=xe(),{data:r,error:n}=await t.from("documents").select("storage_path, company_id, project_id").eq("id",e).single();if(n)throw n;r.storage_path&&await t.storage.from("project-documents").remove([r.storage_path]);const{error:i}=await t.from("documents").delete().eq("id",e);if(i)throw i;return!0},async linkDocumentToResource(e,t,r){const n=xe(),{data:i,error:s}=await n.from("documents").update({resource_type:t,resource_id:r}).eq("id",e).select().single();if(s)throw s;return await n.from("document_audit_log").insert({document_id:e,project_id:i.project_id,company_id:i.company_id,operation:"linked",details:{resource_type:t,resource_id:r},triggered_by:"user",user_id:(await n.auth.getUser()).data?.user?.id}),i},async unlinkDocumentFromResource(e){const t=xe(),{data:r}=await t.from("documents").select("resource_type, resource_id, project_id, company_id").eq("id",e).single(),{data:n,error:i}=await t.from("documents").update({resource_type:null,resource_id:null}).eq("id",e).select().single();if(i)throw i;return await t.from("document_audit_log").insert({document_id:e,project_id:r.project_id,company_id:r.company_id,operation:"unlinked",details:{resource_type:r.resource_type,resource_id:r.resource_id},triggered_by:"user",user_id:(await t.auth.getUser()).data?.user?.id}),n},async getResourceDocuments(e,t){const r=xe(),{data:n,error:i}=await r.from("documents").select("*").eq("resource_type",e).eq("resource_id",t).is("archived_at",null).order("uploaded_at",{ascending:!1});if(i)throw i;return n||[]},async approveDocument(e){const t=xe(),{data:r,error:n}=await t.rpc("approve_document",{p_document_id:e});if(n)throw n;return r},async rejectDocument(e,t){const r=xe(),{data:n,error:i}=await r.rpc("reject_document",{p_document_id:e,p_reason:t});if(i)throw i;return n},async getPendingDocuments(e){const t=xe(),{data:r,error:n}=await t.from("documents").select("*, project:projects(name)").eq("company_id",e).eq("approval_status","pending").is("archived_at",null).order("uploaded_at",{ascending:!1});if(n)throw n;return r||[]},async searchDocuments(e,t){const r=xe(),{data:n,error:i}=await r.from("documents").select("*").eq("project_id",e).eq("is_current",!0).is("archived_at",null).or(`name.ilike.%${t}%,description.ilike.%${t}%`).order("uploaded_at",{ascending:!1}).limit(20);if(i)throw i;return n||[]},async logDocumentAccess(e,t="downloaded"){const r=xe(),{data:n}=await r.from("documents").select("project_id, company_id").eq("id",e).single();n&&await r.from("document_audit_log").insert({document_id:e,project_id:n.project_id,company_id:n.company_id,operation:t,triggered_by:"user",user_id:(await r.auth.getUser()).data?.user?.id})}};Tb(async e=>{if(e&&P)try{await EN(_e)}catch(t){console.error("Error syncing pending actions:",t)}});const bZ=Object.freeze(Object.defineProperty({__proto__:null,auth:rf,clearFieldSession:py,db:_e,drawRequestOps:CL,equipmentOps:OL,getConnectionStatus:Rn,getPendingActionCount:tf,getSupabaseClient:Ii,isFieldMode:vy,isSupabaseConfigured:P,onConnectionChange:Tb,supabase:T,syncPendingActions:EN},Symbol.toStringTag,{value:"Module"})),CN=y.createContext(),un={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function kd({children:e,companyId:t}){const[r,n]=y.useState(un),[i,s]=y.useState(!0);y.useEffect(()=>{t?c(t):u()},[t]),y.useEffect(()=>{p(r)},[r]);const c=async w=>{try{if(s(!0),!P){n(un),s(!1);return}const{data:j,error:S}=await T.from("company_branding").select("*").eq("company_id",w).single();S?(S.code==="PGRST116"?await m(w):console.error("Error loading branding:",S),n(un)):n({...un,...j})}catch(j){console.error("Error in loadBranding:",j),n(un)}finally{s(!1)}},u=async()=>{try{s(!0);const w=window.location.hostname;if(w==="localhost"||w==="127.0.0.1"){n(un),s(!1);return}if(!P){n(un),s(!1);return}const{data:j,error:S}=await T.rpc("get_branding_by_domain",{domain_name:w});S||!j||j.length===0?n(un):n({...un,...j[0]})}catch(w){console.error("Error loading branding by domain:",w),n(un)}finally{s(!1)}},m=async w=>{try{const{data:j,error:S}=await T.from("company_branding").insert({company_id:w,...un}).select().single();S&&console.error("Error creating default branding:",S)}catch(j){console.error("Error in createDefaultBranding:",j)}},h=y.useCallback(async w=>{try{if(!P)return n(D=>({...D,...w})),{success:!0};if(!t)return{success:!1,error:"No company ID"};const j={},S=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const D of S)w[D]!==void 0&&(j[D]=w[D]);const{data:O,error:C}=await T.from("company_branding").select("id").eq("company_id",t).single();if(C&&C.code==="PGRST116"){const{data:D,error:M}=await T.from("company_branding").insert({company_id:t,...j}).select().single();return M?(console.error("Error creating branding:",M),{success:!1,error:M.message}):(n({...un,...D}),{success:!0,data:D})}const{data:A,error:k}=await T.from("company_branding").update(j).eq("company_id",t).select().single();return k?(console.error("Error updating branding:",k),{success:!1,error:k.message}):(n({...un,...A}),{success:!0,data:A})}catch(j){return console.error("Error in updateBranding:",j),{success:!1,error:j.message}}},[t]),p=w=>{const j=document.documentElement;if(j.style.setProperty("--primary-color",w.primary_color),j.style.setProperty("--secondary-color",w.secondary_color),w.favicon_url){let S=document.querySelector("link[rel*='icon']");S||(S=document.createElement("link"),S.rel="icon",document.head.appendChild(S)),S.href=w.favicon_url}document.title=w.custom_app_name||"FieldSync"},v=y.useCallback(async(w,j)=>{try{if(!P)return{success:!0,url:URL.createObjectURL(w)};const S=w.name.split(".").pop(),C=`branding/${`${t}/${j}-${Date.now()}.${S}`}`,{data:A,error:k}=await T.storage.from("public").upload(C,w,{cacheControl:"3600",upsert:!0});if(k)return console.error("Error uploading image:",k),{success:!1,error:k.message};const{data:{publicUrl:D}}=T.storage.from("public").getPublicUrl(C);return{success:!0,url:D}}catch(S){return console.error("Error in uploadBrandingImage:",S),{success:!1,error:S.message}}},[t]),_=y.useCallback(()=>{t?c(t):u()},[t]),x=y.useMemo(()=>({branding:r,loading:i,updateBranding:h,uploadBrandingImage:v,refreshBranding:_}),[r,i,h,v,_]);return f.jsx(CN.Provider,{value:x,children:e})}function NL(){const e=y.useContext(CN);if(!e)throw new Error("useBranding must be used within a BrandingProvider");return e}const AN=y.createContext();function wv({children:e}){const[t,r]=y.useState(()=>{const s=localStorage.getItem("fieldsync-theme");return s==="light"||s==="dark"?s:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});y.useEffect(()=>{document.documentElement.setAttribute("data-theme",t),localStorage.setItem("fieldsync-theme",t)},[t]),y.useEffect(()=>{const s=window.matchMedia("(prefers-color-scheme: light)"),c=u=>{localStorage.getItem("fieldsync-theme")||r(u.matches?"light":"dark")};return s.addEventListener("change",c),()=>s.removeEventListener("change",c)},[]);const n=y.useCallback(()=>{r(s=>s==="dark"?"light":"dark")},[]),i=y.useMemo(()=>({theme:t,setTheme:r,toggleTheme:n}),[t,n]);return f.jsx(AN.Provider,{value:i,children:e})}function kL(){const e=y.useContext(AN);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}const DL=y.createContext(null);function TL({children:e}){const[t,r]=y.useState(null),[n,i]=y.useState([]),s=y.useCallback(()=>{r(null)},[]),c=y.useCallback((w,j="info",S=3e3)=>{if(t){i(O=>[...O,{message:w,type:j,duration:S}]);return}r({message:w,type:j,duration:S}),S>0&&setTimeout(()=>{r(null)},S)},[t]),u=y.useCallback(()=>{if(n.length>0){const[w,...j]=n;i(j),setTimeout(()=>{c(w.message,w.type,w.duration)},300)}},[n,c]),m=y.useCallback(()=>{s(),u()},[s,u]),h=y.useCallback((w,j)=>{c(w,"success",j)},[c]),p=y.useCallback((w,j)=>{c(w,"error",j)},[c]),v=y.useCallback((w,j)=>{c(w,"warning",j)},[c]),_=y.useCallback((w,j)=>{c(w,"info",j)},[c]),x=y.useMemo(()=>({toast:t,showToast:c,hideToast:m,success:h,error:p,warning:v,info:_}),[t,c,m,h,p,v,_]);return f.jsxs(DL.Provider,{value:x,children:[e,t&&f.jsx("div",{className:"toast-container",children:f.jsx("div",{className:`toast ${t.type}`,onClick:m,children:t.message})})]})}function zr({className:e="",showPoweredBy:t=!1}){const{branding:r}=NL();return f.jsxs("div",{className:`app-logo ${e}`,children:[r.logo_url?f.jsx("img",{src:r.logo_url,alt:r.custom_app_name||"Logo",className:"custom-logo"}):f.jsxs("div",{className:"logo",children:[r.custom_app_name||"Field",f.jsx("span",{children:"Sync"})]}),t&&!r.hide_fieldsync_branding&&f.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function PL(e){if(!e)return{score:0,label:"",color:""};let t=0;return e.length>=6&&t++,e.length>=8&&t++,/[A-Z]/.test(e)&&/[a-z]/.test(e)&&t++,/\d/.test(e)&&t++,/[^A-Za-z0-9]/.test(e)&&t++,t<=1?{score:1,label:"Weak",color:"var(--accent-red)"}:t<=2?{score:2,label:"Fair",color:"var(--accent-orange)"}:t<=3?{score:3,label:"Good",color:"var(--accent-amber)"}:t<=4?{score:4,label:"Strong",color:"var(--accent-green)"}:{score:5,label:"Very strong",color:"var(--accent-green)"}}function $S(e=6){const t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",r=new Uint32Array(e);return crypto.getRandomValues(r),Array.from(r,n=>t[n%t.length]).join("")}function Ps(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function ac({steps:e,currentStep:t}){return f.jsx("div",{className:"onboarding-step-indicator",children:e.map((r,n)=>{const i=n+1,s=i===t,c=i<t;return f.jsxs("div",{className:"onboarding-step-wrapper",children:[n>0&&f.jsx("div",{className:`onboarding-step-line ${c?"completed":""}`}),f.jsx("div",{className:`onboarding-step-circle ${s?"active":""} ${c?"completed":""}`,children:c?f.jsx($i,{size:14}):i}),f.jsx("span",{className:`onboarding-step-label ${s?"active":""} ${c?"completed":""}`,children:r})]},n)})})}function HS({value:e,onChange:t,placeholder:r,onKeyDown:n,autoFocus:i,showStrength:s}){const[c,u]=y.useState(!1),m=PL(e);return f.jsxs("div",{className:"password-field",children:[f.jsxs("div",{className:"password-input-wrapper",children:[f.jsx("input",{type:c?"text":"password",value:e,onChange:t,placeholder:r||"Password",onKeyDown:n,autoFocus:i}),f.jsx("button",{type:"button",className:"password-toggle",onClick:()=>u(!c),tabIndex:-1,"aria-label":c?"Hide password":"Show password",children:c?f.jsx(GR,{size:18}):f.jsx(VR,{size:18})})]}),s&&e&&f.jsxs("div",{className:"password-strength",children:[f.jsx("div",{className:"password-strength-bar",children:f.jsx("div",{className:"password-strength-fill",style:{width:`${m.score/5*100}%`,background:m.color}})}),f.jsx("span",{className:"password-strength-label",style:{color:m.color},children:m.label})]})]})}function ML({onForemanAccess:e,onOfficeLogin:t,onShowToast:r}){const[n,i]=y.useState(null),[s,c]=y.useState(""),[u,m]=y.useState(null),[h,p]=y.useState(""),[v,_]=y.useState(!1),[x,w]=y.useState(""),[j,S]=y.useState(null),[O,C]=y.useState(()=>{try{return localStorage.getItem("fieldsync_foreman_name")||""}catch{return""}}),A=y.useRef(null),k=y.useRef(null);y.useEffect(()=>()=>{A.current&&clearTimeout(A.current),k.current&&clearTimeout(k.current)},[]);const[D,M]=y.useState(""),[L,X]=y.useState(""),[re,ae]=y.useState(1),[G,U]=y.useState(null),[ue,ve]=y.useState(""),[q,R]=y.useState(""),[I,ee]=y.useState(""),[H,se]=y.useState(""),[Se,J]=y.useState(!1),[$,ge]=y.useState(1),[Pe,Le]=y.useState(""),[pe,ze]=y.useState(""),[Q,Ee]=y.useState(""),[we,ie]=y.useState(""),[Ue,ye]=y.useState(null),ke=me=>{const st=me.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);c(st)},Ce=async()=>{if(s.length<2){r("Enter company code","error");return}_(!0);try{const me=await _e.getCompanyByCode(s);me?m(me):(r("Invalid company code","error"),c(""))}catch{r("Error checking code","error")}finally{_(!1)}},Ct=async me=>{if(me.length===4){_(!0),w("");try{const st=await _e.getProjectByPinSecure(me,u.code);if(st.rateLimited){w("error"),r("Too many attempts. Please wait 15 minutes.","error"),A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{p(""),w("")},800);return}if(st.success&&st.project){S(st.project);return}if(st.error){r("Authentication error. Please try again or contact your administrator.","error"),p("");return}r("Invalid PIN","error"),p("")}catch{r("Error checking PIN. Please check your connection.","error"),p("")}finally{_(!1)}}},Ie=()=>{if(!O.trim()){r("Enter your name to continue","error");return}try{localStorage.setItem("fieldsync_foreman_name",O.trim())}catch{}e(j,O.trim())},It=me=>{if(h.length<4&&!v){const st=h+me;p(st),w(""),st.length===4&&(k.current&&clearTimeout(k.current),k.current=setTimeout(()=>Ct(st),150))}},_t=()=>{v||(p(me=>me.slice(0,-1)),w(""))},At=()=>{m(null),p(""),w("")},Cr=()=>{if(!D.trim()||!L.trim()){r("Enter email and password","error");return}t(D,L)},jt=async()=>{if(s.length<2){r("Enter company code","error");return}_(!0);try{const me=await _e.getCompanyByCode(s);me?(U(me),ae(2)):(r("Invalid company code","error"),c(""))}catch{r("Error checking code","error")}finally{_(!1)}},Ye=async()=>{if(!ue.trim()){r("Enter office code","error");return}_(!0);try{const{data:me,error:st}=await T.rpc("verify_office_code",{company_id:G.id,code:ue.trim()});if(st)throw st;me===!0?ae(3):(r("Invalid office code","error"),ve(""))}catch{r("Error verifying code","error")}finally{_(!1)}},$r=async()=>{if(!v){if(!q.trim()){r("Enter your name","error");return}if(!I.trim()||!Ps(I)){r("Enter a valid email address","error");return}if(H.length<6){r("Password must be 6+ characters","error");return}_(!0);try{const me=I.toLowerCase().trim(),{data:st,error:Jr}=await T.auth.signUp({email:me,password:H});let Mr;if(Jr?.message?.includes("already registered")||st?.user&&st.user.identities?.length===0){const{data:vt,error:Ut}=await T.auth.signInWithPassword({email:me,password:H});if(Ut){r("Account exists with different password. Use your existing password.","error"),_(!1);return}Mr=vt.user.id;const{data:xt}=await T.from("user_companies").select("id, status").eq("user_id",Mr).eq("company_id",G.id).maybeSingle();if(xt){xt.status==="active"?(r("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):xt.status==="pending"?(r("Your request is still pending approval.","error"),await T.auth.signOut()):(r("Your membership was removed. Contact the company admin.","error"),await T.auth.signOut());return}const{error:_n}=await T.from("user_companies").insert({user_id:Mr,company_id:G.id,role:"member",status:"pending"});if(_n)throw console.error("Error adding to user_companies:",_n),await T.auth.signOut(),new Error("Failed to submit join request");await T.auth.signOut(),J(!0)}else{if(Jr)throw Jr;{if(Mr=st.user?.id,!Mr)throw new Error("Failed to create user");const{error:vt}=await T.from("users").insert({id:Mr,email:me,password_hash:"managed_by_supabase_auth",name:q.trim(),company_id:G.id,role:"member",is_active:!0});if(vt)throw vt;const{error:Ut}=await T.from("user_companies").insert({user_id:Mr,company_id:G.id,role:"member",status:"pending"});if(Ut)throw console.error("Error adding to user_companies:",Ut),new Error("Failed to submit join request");await T.auth.signOut(),J(!0)}}}catch(me){console.error("Join error:",me),r(me.message||"Error creating account","error")}finally{_(!1)}}},bn=async()=>{if(!v){if(!pe.trim()){r("Enter your name","error");return}if(!Q.trim()||!Ps(Q)){r("Enter a valid email address","error");return}if(we.length<6){r("Password must be 6+ characters","error");return}_(!0);try{const me=Q.toLowerCase().trim(),st=$S(6),Jr=$S(6),{data:Mr,error:Rr}=await T.auth.signUp({email:me,password:we});if(Rr){if(Rr.message?.includes("already registered"))r("An account with this email already exists. Sign in instead.","error");else throw Rr;return}const vt=Mr.user?.id;if(!vt)throw new Error("Failed to create account");const{data:Ut,error:xt}=await T.from("companies").insert({name:Pe.trim(),code:st,office_code:Jr,subscription_tier:"free",owner_user_id:vt}).select().single();if(xt)throw console.error("Company creation error:",xt),new Error("Failed to create company. Please try again.");const{error:_n}=await T.from("users").insert({id:vt,email:me,password_hash:"managed_by_supabase_auth",name:pe.trim(),company_id:Ut.id,role:"admin",is_active:!0});if(_n)throw console.error("User record error:",_n),new Error("Failed to set up user profile");const{error:li}=await T.from("user_companies").insert({user_id:vt,company_id:Ut.id,role:"admin",access_level:"administrator",status:"active"});if(li)throw console.error("User-company link error:",li),new Error("Failed to link account to company");ye({name:Ut.name,code:st,officeCode:Jr}),ge(3)}catch(me){console.error("Registration error:",me),r(me.message||"Error creating company","error")}finally{_(!1)}}},Pr=()=>{ae(1),U(null),ve(""),R(""),ee(""),se(""),J(!1),c("")},Ar=()=>{ge(1),Le(""),ze(""),Ee(""),ie(""),ye(null)};if(n===null)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in-up",children:[f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsxs("div",{className:"entry-buttons stagger-children",children:[f.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>i("foreman"),children:[f.jsx("span",{className:"entry-mode-icon",children:f.jsx(To,{size:32})}),f.jsx("span",{className:"entry-mode-title",children:"Foreman"}),f.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),f.jsxs("button",{className:"entry-mode-btn office",onClick:()=>i("office"),children:[f.jsx("span",{className:"entry-mode-icon",children:f.jsx(KR,{size:32})}),f.jsx("span",{className:"entry-mode-title",children:"Office"}),f.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(n==="foreman")return j?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("div",{className:"entry-company-badge",children:j.name}),f.jsx("p",{className:"entry-subtitle",children:"Who's checking in?"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:O,onChange:me=>C(me.target.value),placeholder:"Your name",autoFocus:!0,onKeyDown:me=>{me.key==="Enter"&&Ie()},style:{fontSize:"1.1rem",textAlign:"center"}}),f.jsx("button",{className:"entry-login-btn",onClick:Ie,disabled:!O.trim(),children:"Enter Site"})]}),f.jsx("p",{className:"entry-hint",style:{marginTop:"0.75rem"},children:"Your name will appear on reports and submissions"}),f.jsxs("button",{className:"entry-join-link",style:{marginTop:"0.5rem",display:"flex",alignSelf:"center"},onClick:()=>{S(null),p(""),w("")},children:[f.jsx(sr,{size:16}),f.jsx("span",{children:"Back"})]})]})}):u?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:At,children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("div",{className:"entry-company-badge",children:u.name}),f.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),f.jsx("div",{className:`pin-display ${x==="error"?"shake":""}`,children:[0,1,2,3].map(me=>f.jsx("div",{className:`pin-dot ${h.length>me?"filled":""} ${x}`,children:h.length>me?"":""},me))}),f.jsxs("div",{className:"number-pad",role:"group","aria-label":"PIN entry keypad",children:[[1,2,3,4,5,6,7,8,9].map(me=>f.jsx("button",{className:"num-btn",onClick:()=>It(me.toString()),disabled:v,"aria-label":String(me),children:me},me)),f.jsx("button",{className:"num-btn empty",disabled:!0,"aria-hidden":"true"}),f.jsx("button",{className:"num-btn",onClick:()=>It("0"),disabled:v,"aria-label":"0",children:"0"}),f.jsx("button",{className:"num-btn backspace",onClick:_t,disabled:v||h.length===0,"aria-label":"Delete last digit",children:f.jsx(sr,{size:18})})]}),v&&f.jsx("div",{className:"entry-loading",children:f.jsx("div",{className:"spinner"})})]})}):f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>i(null),children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"text",value:s,onChange:me=>ke(me.target.value),placeholder:"Company Code",disabled:v,autoFocus:!0,onKeyDown:me=>{me.key==="Enter"&&Ce()}}),f.jsx("button",{className:"entry-submit-btn",onClick:Ce,disabled:v||s.length<2,children:v?f.jsx("div",{className:"spinner-small"}):f.jsx(yc,{size:20})})]})]})});if(n==="office")return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>i(null),children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"email",value:D,onChange:me=>M(me.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:me=>{me.key==="Enter"&&Cr()}}),f.jsx("input",{type:"password",value:L,onChange:me=>X(me.target.value),placeholder:"Password",onKeyDown:me=>{me.key==="Enter"&&Cr()}}),f.jsx("button",{className:"entry-login-btn",onClick:Cr,children:"Sign In"})]}),f.jsx("div",{className:"entry-signup-hint",children:f.jsxs("div",{className:"entry-signup-options",children:[f.jsxs("button",{className:"entry-join-link",onClick:()=>{Pr(),i("join")},children:[f.jsx(HA,{size:16}),f.jsx("span",{children:"Join your company"})]}),f.jsxs("button",{className:"entry-join-link",onClick:()=>{Ar(),i("register")},children:[f.jsx(YR,{size:16}),f.jsx("span",{children:"Register a new company"})]})]})})]})});if(n==="join")return Se?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-scale-in",children:[f.jsx("div",{className:"entry-success-icon",children:f.jsx($i,{size:32})}),f.jsx("h2",{className:"entry-success-title",children:"Request Submitted"}),f.jsxs("p",{className:"entry-success-message",children:["Your request to join ",f.jsx("strong",{children:G?.name})," has been submitted. A company admin will review and approve your access."]}),f.jsx("p",{className:"entry-success-detail",children:"You'll be able to sign in once approved."}),f.jsx("button",{className:"entry-login-btn",onClick:()=>{Pr(),i("office")},style:{marginTop:"1.5rem"},children:"Back to Sign In"})]})}):re===1?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{Pr(),i("office")},children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Verify","Account"],currentStep:1}),f.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),f.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"text",value:s,onChange:me=>ke(me.target.value),placeholder:"Company Code",disabled:v,autoFocus:!0,onKeyDown:me=>{me.key==="Enter"&&jt()}}),f.jsx("button",{className:"entry-submit-btn",onClick:jt,disabled:v||s.length<2,children:v?f.jsx("div",{className:"spinner-small"}):f.jsx(yc,{size:20})})]})]})}):re===2?f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{ae(1),U(null),ve("")},children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Verify","Account"],currentStep:2}),f.jsx("div",{className:"entry-company-badge",children:G?.name}),f.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),f.jsx("p",{className:"entry-hint",children:"This verifies your office access"}),f.jsxs("div",{className:"entry-input-group",children:[f.jsx("input",{type:"password",value:ue,onChange:me=>ve(me.target.value),placeholder:"Office Code",disabled:v,autoFocus:!0,onKeyDown:me=>{me.key==="Enter"&&Ye()}}),f.jsx("button",{className:"entry-submit-btn",onClick:Ye,disabled:v||!ue.trim(),children:v?f.jsx("div",{className:"spinner-small"}):f.jsx(yc,{size:20})})]})]})}):f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{ae(2),ve("")},children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Verify","Account"],currentStep:3}),f.jsx("div",{className:"entry-company-badge",children:G?.name}),f.jsx("p",{className:"entry-subtitle",children:"Create your account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:q,onChange:me=>R(me.target.value),placeholder:"Your Name",autoFocus:!0}),f.jsx("input",{type:"email",value:I,onChange:me=>ee(me.target.value),placeholder:"Email",className:I&&!Ps(I)?"input-error":""}),f.jsx(HS,{value:H,onChange:me=>se(me.target.value),placeholder:"Password (6+ characters)",onKeyDown:me=>{me.key==="Enter"&&$r()},showStrength:!0}),f.jsx("button",{className:"entry-login-btn",onClick:$r,disabled:v||!q.trim()||!Ps(I)||H.length<6,children:v?f.jsxs("span",{className:"btn-loading",children:[f.jsx("div",{className:"spinner-small"}),"Creating account..."]}):"Join Company"})]}),f.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})});if(n==="register"){if($===3&&Ue)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card entry-card-wide animate-scale-in",children:[f.jsx("div",{className:"entry-success-icon",children:f.jsx($i,{size:32})}),f.jsx("h2",{className:"entry-success-title",children:"Company Created"}),f.jsxs("p",{className:"entry-success-message",children:[f.jsx("strong",{children:Ue.name})," is ready to go. Save these codes to share with your team."]}),f.jsxs("div",{className:"entry-codes-grid",children:[f.jsxs("div",{className:"entry-code-card",children:[f.jsx("span",{className:"entry-code-label",children:"Company Code"}),f.jsx("span",{className:"entry-code-value",children:Ue.code}),f.jsx("span",{className:"entry-code-hint",children:"Share with all employees"})]}),f.jsxs("div",{className:"entry-code-card",children:[f.jsx("span",{className:"entry-code-label",children:"Office Code"}),f.jsx("span",{className:"entry-code-value",children:Ue.officeCode}),f.jsx("span",{className:"entry-code-hint",children:"Office staff only"})]})]}),f.jsx("p",{className:"entry-codes-warning",children:"Save these codes now. You can also find them in your company settings later."}),f.jsx("button",{className:"entry-login-btn",onClick:()=>{window.location.reload()},style:{marginTop:"0.5rem"},children:"Go to Dashboard"})]})});if($===1)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>{Ar(),i("office")},children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Your Account"],currentStep:1}),f.jsx("p",{className:"entry-subtitle",children:"Register your company"}),f.jsx("p",{className:"entry-hint",children:"Set up your company on FieldSync"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:Pe,onChange:me=>Le(me.target.value),placeholder:"Company Name",autoFocus:!0,onKeyDown:me=>{me.key==="Enter"&&Pe.trim()&&ge(2)}}),f.jsx("button",{className:"entry-login-btn",onClick:()=>ge(2),disabled:!Pe.trim(),children:"Continue"})]})]})});if($===2)return f.jsx("div",{className:"entry-container",children:f.jsxs("div",{className:"entry-card animate-fade-in",children:[f.jsx("button",{className:"entry-back",onClick:()=>ge(1),children:f.jsx(sr,{size:20})}),f.jsx(zr,{className:"entry-logo",showPoweredBy:!1}),f.jsx(ac,{steps:["Company","Your Account"],currentStep:2}),f.jsx("div",{className:"entry-company-badge",children:Pe}),f.jsx("p",{className:"entry-subtitle",children:"Create your admin account"}),f.jsxs("div",{className:"entry-form",children:[f.jsx("input",{type:"text",value:pe,onChange:me=>ze(me.target.value),placeholder:"Your Name",autoFocus:!0}),f.jsx("input",{type:"email",value:Q,onChange:me=>Ee(me.target.value),placeholder:"Email",className:Q&&!Ps(Q)?"input-error":""}),f.jsx(HS,{value:we,onChange:me=>ie(me.target.value),placeholder:"Password (6+ characters)",onKeyDown:me=>{me.key==="Enter"&&bn()},showStrength:!0}),f.jsx("button",{className:"entry-login-btn",onClick:bn,disabled:v||!pe.trim()||!Ps(Q)||we.length<6,children:v?f.jsxs("span",{className:"btn-loading",children:[f.jsx("div",{className:"spinner-small"}),"Setting up company..."]}):"Create Company"})]}),f.jsx("p",{className:"entry-join-note",children:"You'll be the administrator. Company and office codes will be generated for you."})]})})}}function NN({message:e,type:t="",onClose:r}){return y.useEffect(()=>{const n=setTimeout(r,3e3);return()=>clearTimeout(n)},[r]),f.jsx("div",{className:"toast-container",children:f.jsx("div",{className:`toast ${t}`,children:e})})}function FS({compact:e=!1}){const{theme:t,toggleTheme:r}=kL();return f.jsx("button",{className:`theme-toggle ${e?"theme-toggle-compact":""}`,onClick:r,title:`Switch to ${t==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${t==="dark"?"light":"dark"} mode`,children:t==="dark"?f.jsxs(f.Fragment,{children:[f.jsx(FA,{size:e?18:16}),!e&&f.jsx("span",{children:"Light"})]}):f.jsxs(f.Fragment,{children:[f.jsx(KA,{size:e?18:16}),!e&&f.jsx("span",{children:"Dark"})]})})}class _o extends y.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){this.setState({error:t,errorInfo:r}),console.error("ErrorBoundary caught an error:",t,r),(t?.message?.includes("Failed to fetch dynamically imported module")||t?.message?.includes("Loading chunk")||t?.message?.includes("Loading CSS chunk"))&&(console.warn("[ErrorBoundary] Chunk load failure detected, clearing cache and reloading..."),"caches"in window?caches.keys().then(i=>{Promise.all(i.map(s=>caches.delete(s))).then(()=>{window.location.reload()})}).catch(i=>{console.warn("[ErrorBoundary] Cache clear failed, reloading anyway:",i.message),window.location.reload()}):window.location.reload())}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?f.jsx("div",{className:"error-boundary",children:f.jsxs("div",{className:"error-boundary-content",children:[f.jsx("div",{className:"error-icon",children:f.jsx(om,{size:48})}),f.jsx("h2",{children:"Something went wrong"}),f.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),f.jsxs("div",{className:"error-actions",children:[f.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),f.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function KS(){const[e,t]=y.useState(Rn()),[r,n]=y.useState(0),[i,s]=y.useState(!1),c=y.useRef(!1),u=y.useRef(null);return y.useEffect(()=>{const m=Tb(async p=>{t(p),p&&c.current&&(s(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>s(!1),3e3),c.current=!1),p||(c.current=!0);const v=await tf();n(v)});tf().then(n);const h=setInterval(async()=>{if(!Rn()){const p=await tf();n(p)}},5e3);return()=>{m(),clearInterval(h),u.current&&clearTimeout(u.current)}},[]),e&&r===0&&!i?null:f.jsxs("div",{className:`offline-indicator ${e?"online":"offline"} ${i?"synced":""}`,children:[f.jsx("div",{className:"offline-indicator-content",children:e?i?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"online-icon",children:f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:f.jsx("polyline",{points:"20 6 9 17 4 12"})})}),f.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):r>0?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"syncing-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("polyline",{points:"23 4 23 10 17 10"}),f.jsx("polyline",{points:"1 20 1 14 7 14"}),f.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),f.jsxs("span",{className:"offline-text",children:["Syncing ",r,"..."]})]}):null:f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"offline-icon",children:f.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[f.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),f.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),f.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),f.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),f.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),f.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),f.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),f.jsxs("span",{className:"offline-text",children:["Offline",r>0&&f.jsxs("span",{className:"pending-badge",children:[r," pending"]})]})]})}),f.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}function RL(){const[e,t]=y.useState(null),[r,n]=y.useState(!1);y.useEffect(()=>{if(window.matchMedia("(display-mode: standalone)").matches)return;const c=localStorage.getItem("pwa-install-dismissed");if(c){const m=parseInt(c,10);if(Date.now()-m<10080*60*1e3)return}const u=m=>{m.preventDefault(),t(m),n(!0)};return window.addEventListener("beforeinstallprompt",u),()=>window.removeEventListener("beforeinstallprompt",u)},[]);const i=async()=>{if(!e)return;e.prompt();const{outcome:c}=await e.userChoice;c==="accepted"&&n(!1),t(null)},s=()=>{n(!1),localStorage.setItem("pwa-install-dismissed",Date.now().toString())};return r?f.jsxs("div",{className:"install-prompt",children:[f.jsxs("div",{className:"install-prompt-content",children:[f.jsx(YA,{size:20}),f.jsxs("div",{className:"install-prompt-text",children:[f.jsx("strong",{children:"Install FieldSync"}),f.jsx("span",{children:"Add to home screen for quick access"})]})]}),f.jsxs("div",{className:"install-prompt-actions",children:[f.jsx("button",{className:"btn btn-primary btn-small",onClick:i,children:"Install"}),f.jsx("button",{className:"install-prompt-dismiss",onClick:s,"aria-label":"Dismiss",children:f.jsx(xb,{size:18})})]})]}):null}function qL({factorId:e,onVerified:t,onCancel:r}){const[n,i]=y.useState(""),[s,c]=y.useState(!1),[u,m]=y.useState(null),h=async()=>{if(n.length===6){c(!0),m(null);try{const{data:v,error:_}=await T.auth.mfa.challenge({factorId:e});if(_)throw _;const{error:x}=await T.auth.mfa.verify({factorId:e,challengeId:v.id,code:n});if(x)throw x;t()}catch{m("Invalid code. Please try again."),i("")}finally{c(!1)}}},p=v=>{v.key==="Enter"&&n.length===6&&h()};return f.jsxs("div",{className:"mfa-challenge",children:[f.jsx("div",{className:"mfa-challenge-icon",children:f.jsx(GA,{size:40})}),f.jsx("h2",{children:"Two-Factor Authentication"}),f.jsx("p",{children:"Enter the 6-digit code from your authenticator app"}),f.jsx("div",{className:"mfa-code-input",children:f.jsx("input",{type:"text",value:n,onChange:v=>i(v.target.value.replace(/\D/g,"").slice(0,6)),onKeyDown:p,placeholder:"000000",maxLength:6,autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*",className:"mfa-input-large","aria-label":"MFA verification code"})}),u&&f.jsx("p",{className:"mfa-error",children:u}),f.jsxs("div",{className:"mfa-challenge-actions",children:[f.jsx("button",{className:"btn btn-secondary",onClick:r,children:"Cancel"}),f.jsx("button",{className:"btn btn-primary",onClick:h,disabled:n.length!==6||s,children:s?f.jsxs(f.Fragment,{children:[f.jsx($s,{size:14,className:"spinner"})," Verifying..."]}):"Verify"})]})]})}function _Z(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e)}function zL(e){if(!e||e.length===0)return 0;let t=0;return e.forEach(r=>{r.status==="done"&&(t+=r.weight||0)}),Math.round(t)}function xZ(e){if(!e||e.length===0)return{progress:0,earnedValue:0,totalValue:0,isValueBased:!1};if(e.some(n=>n.scheduled_value>0)){const n=e.reduce((c,u)=>c+(u.scheduled_value||0),0),i=e.filter(c=>c.status==="done").reduce((c,u)=>c+(u.scheduled_value||0),0);return{progress:n>0?Math.round(i/n*100):0,earnedValue:i,totalValue:n,isValueBased:!0}}const r=e.filter(n=>n.status==="done").reduce((n,i)=>n+(i.weight||0),0);return{progress:Math.round(r),earnedValue:0,totalValue:0,isValueBased:!1}}function LL(e){if(!e||e.length===0)return"not_started";const t=e.some(i=>i.status==="working"),r=e.some(i=>i.status==="done");return e.every(i=>i.status==="done")?"done":t||r?"working":"not_started"}function wZ(e){const t=LL(e);return t==="done"?"Complete":t==="working"?"In Progress":"Not Started"}function jZ(e,t=0){const r=new Date;r.setHours(0,0,0,0);const n={scheduleStatus:"on_track",scheduleVariance:0,scheduleLabel:"On Track",laborStatus:"on_track",laborVariance:0,laborLabel:null,hasScheduleData:!1,hasLaborData:!1};if(e.start_date&&e.end_date){const i=new Date(e.start_date),s=new Date(e.end_date);i.setHours(0,0,0,0),s.setHours(0,0,0,0);const c=Math.max(1,Math.ceil((s-i)/(1e3*60*60*24))),u=Math.max(0,Math.ceil((r-i)/(1e3*60*60*24))),m=Math.min(100,u/c*100),p=(e.progress||0)-m;n.scheduleVariance=Math.round(p),n.hasScheduleData=!0,p>5?(n.scheduleStatus="ahead",n.scheduleLabel=`Ahead of Schedule (+${n.scheduleVariance}%)`):p<-5?(n.scheduleStatus="behind",n.scheduleLabel=`Behind Schedule (${n.scheduleVariance}%)`):(n.scheduleStatus="on_track",n.scheduleLabel="On Track")}if(e.planned_man_days&&e.planned_man_days>0){const s=(e.progress||0)/100*e.planned_man_days;if(s>0&&t>0){const c=(t-s)/s*100;n.laborVariance=Math.round(c),n.hasLaborData=!0,c>10?(n.laborStatus="over",n.laborLabel=`Over Planned (+${n.laborVariance}% man-days)`):c<-10?(n.laborStatus="under",n.laborLabel=`Under Planned (${n.laborVariance}% man-days)`):(n.laborStatus="on_track",n.laborLabel="Labor On Track")}else t>0&&(n.hasLaborData=!0,n.laborLabel=`${t} man-days used`)}return n}function SZ(e,t=30){if(e.status==="archived"||e.progress<100)return!1;const r=e.areas||[];if(r.length===0||!r.every(c=>c.status==="done"))return!1;const i=r.reduce((c,u)=>{const m=new Date(u.updated_at);return m>c?m:c},new Date(0));return i.getTime()===0?!1:Math.floor((Date.now()-i.getTime())/(1e3*60*60*24))>=t}const EZ=e=>{const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[59,130,246]},IL=(e,t=5e3,r=.85)=>new Promise(n=>{if(!e){n(null);return}const i=new Image;i.crossOrigin="anonymous";const s=setTimeout(()=>{i.src="",n(null)},t);i.onload=()=>{clearTimeout(s);try{const c=document.createElement("canvas");c.width=i.width,c.height=i.height,c.getContext("2d").drawImage(i,0,0);const m=c.toDataURL("image/jpeg",r);n(m)}catch{n(null)}},i.onerror=()=>{clearTimeout(s),n(null)},i.src=e}),OZ=async(e,t=5e3,r=.85)=>!e||e.length===0?[]:await Promise.all(e.map(i=>IL(i,t,r)));async function YS(e,t=1920,r=.8){return!e.type.startsWith("image/")||e.size<500*1024?e:new Promise(n=>{const i=document.createElement("canvas"),s=i.getContext("2d"),c=new Image;c.onload=()=>{let{width:u,height:m}=c;u>t&&(m=Math.round(m*t/u),u=t);const h=1920;m>h&&(u=Math.round(u*h/m),m=h),i.width=u,i.height=m,s.imageSmoothingEnabled=!0,s.imageSmoothingQuality="high",s.drawImage(c,0,0,u,m),i.toBlob(p=>{if(p){const v=e.name.replace(/\.[^/.]+$/,""),_=new File([p],`${v}.jpg`,{type:"image/jpeg",lastModified:Date.now()});n(_)}else console.warn("Image compression failed, using original"),n(e)},"image/jpeg",r),URL.revokeObjectURL(c.src)},c.onerror=()=>{console.warn("Failed to load image for compression, using original"),URL.revokeObjectURL(c.src),n(e)},c.src=URL.createObjectURL(e)})}const jv=["Containment","PPE","Disposal","Equipment"],UL={en:{workInfo:"Work Details",crewHours:"Crew & Hours",materialsEquipment:"Materials",evidence:"Evidence",review:"Review",quickActions:"Quick Actions",sameAsYesterday:"Same as Yesterday",setCrewHours:"Set Crew Hours",loading:"Loading...",supervision:"Supervision",operators:"Operators",laborers:"Laborers",addSupervision:"+ Add Supervision",addOperator:"+ Add Operator",addLaborer:"+ Add Laborer",foreman:"Foreman",superintendent:"Superintendent",firstLastName:"First & Last Name",start:"Start",end:"End",regHrs:"Reg Hrs",otHrs:"OT Hrs",selectCategory:"Select a category:",addCustomItem:"+ Add Custom Item",customItem:"Custom Item",itemName:"Item Name",category:"Category",quantity:"Quantity",addItem:"Add Item",cancel:"Cancel",noItemsCategory:"No items in this category yet",workDate:"Work Date",ceNumber:"CE/PCO #",optional:"optional",linkedCOR:"Link to Change Order",selectCOR:"Select COR (optional)",noCORs:"No pending CORs",laborSummary:"Labor Summary",worker:"worker",workers_plural:"workers",totalHours:"Total Hours",regular:"Regular",overtime:"Overtime",materials:"Materials",item:"item",items_plural:"items",noMaterials:"No materials added",notes:"Notes",addNotes:"Add notes about the work performed...",photos:"Photos",addPhotos:"Add Photos",maxPhotos:"max",noPhotos:"No photos added",certification:"Certification",certifyStatement:"I certify that this T&M ticket accurately reflects the work performed.",foremanSignature:"Foreman's Name (Signature)",yourName:"Your name",describeWork:"Describe the work performed",descriptionRequired:"Description is required",whatWorkPerformed:"What work was performed today?",searchMaterials:"Search materials & equipment...",noSearchResults:"No items found",orBrowse:"Or browse by category:",back:"Back",next:"Next",nextCrew:"Next: Crew",nextMaterials:"Next: Materials",reviewItems:"Review",skipNoMaterials:"Skip (no materials)",submitTM:"Submit T&M",submitting:"Submitting...",applySameHours:"Apply Same Hours",batchDescription:"Set start/end time and hours for all workers with names entered.",timeStarted:"Time Started",timeEnded:"Time Ended",regularHours:"Regular Hours",overtimeHours:"Overtime Hours",willApplyTo:"Will apply to",applyToAll:"Apply to All",preset8hr:"8hr Day",preset10hr:"10hr Day",preset4hr:"4hr Day",loadedWorkers:"Loaded {count} workers from {date}",noPreviousCrew:"No previous crew found for this project",appliedHours:"Applied hours to {count} worker(s)",assignedToCOR:"Assigned to COR"},es:{workInfo:"Info del Trabajo",crewHours:"Cuadrilla y Horas",materialsEquipment:"Materiales",evidence:"Evidencia",review:"Revisar",quickActions:"Acciones Rapidas",sameAsYesterday:"Igual que Ayer",setCrewHours:"Poner Horas",loading:"Cargando...",supervision:"Supervision",operators:"Operadores",laborers:"Trabajadores",addSupervision:"+ Agregar Supervision",addOperator:"+ Agregar Operador",addLaborer:"+ Agregar Trabajador",foreman:"Capataz",superintendent:"Superintendente",firstLastName:"Nombre y Apellido",start:"Inicio",end:"Fin",regHrs:"Hrs Reg",otHrs:"Hrs Extra",selectCategory:"Seleccione una categoria:",addCustomItem:"+ Agregar Articulo",customItem:"Articulo Personalizado",itemName:"Nombre del Articulo",category:"Categoria",quantity:"Cantidad",addItem:"Agregar",cancel:"Cancelar",noItemsCategory:"No hay articulos en esta categoria",workDate:"Fecha de Trabajo",ceNumber:"CE/PCO #",optional:"opcional",linkedCOR:"Vincular a Orden de Cambio",selectCOR:"Seleccionar COR (opcional)",noCORs:"No hay CORs pendientes",laborSummary:"Resumen de Mano de Obra",worker:"trabajador",workers_plural:"trabajadores",totalHours:"Horas Totales",regular:"Regular",overtime:"Extra",materials:"Materiales",item:"articulo",items_plural:"articulos",noMaterials:"No se agregaron materiales",notes:"Notas",addNotes:"Agregar notas sobre el trabajo realizado...",photos:"Fotos",addPhotos:"Agregar Fotos",maxPhotos:"max",noPhotos:"No se agregaron fotos",certification:"Certificacion",certifyStatement:"Certifico que este ticket T&M refleja con precision el trabajo realizado.",foremanSignature:"Nombre del Capataz (Firma)",yourName:"Su nombre",describeWork:"Describir el trabajo realizado",descriptionRequired:"Descripcion es requerida",whatWorkPerformed:"Que trabajo se realizo hoy?",searchMaterials:"Buscar materiales y equipo...",noSearchResults:"No se encontraron articulos",orBrowse:"O navegar por categoria:",back:"Atras",next:"Siguiente",nextCrew:"Siguiente: Cuadrilla",nextMaterials:"Siguiente: Materiales",reviewItems:"Revisar",skipNoMaterials:"Saltar (sin materiales)",submitTM:"Enviar T&M",submitting:"Enviando...",applySameHours:"Aplicar Mismas Horas",batchDescription:"Establezca hora de inicio/fin y horas para todos los trabajadores.",timeStarted:"Hora de Inicio",timeEnded:"Hora de Fin",regularHours:"Horas Regulares",overtimeHours:"Horas Extra",willApplyTo:"Se aplicara a",applyToAll:"Aplicar a Todos",preset8hr:"Dia 8hr",preset10hr:"Dia 10hr",preset4hr:"Dia 4hr",loadedWorkers:"Se cargaron {count} trabajadores del {date}",noPreviousCrew:"No se encontro equipo anterior para este proyecto",appliedHours:"Horas aplicadas a {count} trabajador(es)",assignedToCOR:"Asignado a COR"}};function BL({project:e,workDate:t,setWorkDate:r,cePcoNumber:n,setCePcoNumber:i,notes:s,setNotes:c,t:u,lang:m}){return f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-project-info",children:[e.job_number&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Job #"}),f.jsx("span",{className:"tm-project-value",children:e.job_number})]}),f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Project"}),f.jsx("span",{className:"tm-project-value",children:e.name})]}),e.address&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"Address"}),f.jsx("span",{className:"tm-project-value",children:e.address})]}),e.general_contractor&&f.jsxs("div",{className:"tm-project-detail",children:[f.jsx("span",{className:"tm-project-label",children:"GC"}),f.jsx("span",{className:"tm-project-value",children:e.general_contractor})]})]}),f.jsxs("div",{className:"tm-field-row",children:[f.jsxs("div",{className:"tm-field tm-field-half",children:[f.jsx("label",{children:"Date"}),f.jsx("input",{type:"date",value:t,onChange:h=>r(h.target.value),className:"tm-date"})]}),f.jsxs("div",{className:"tm-field tm-field-half",children:[f.jsx("label",{children:"CE / PCO #"}),f.jsx("input",{type:"text",placeholder:"Change Event / PCO",value:n,onChange:h=>i(h.target.value),className:"tm-input"})]})]}),f.jsxs("div",{className:"tm-field tm-description-field",children:[f.jsxs("label",{children:[f.jsx(Ho,{size:16,className:"inline-icon"}),u("describeWork")," ",f.jsx("span",{className:"tm-required",children:"*"})]}),f.jsx("textarea",{placeholder:u("whatWorkPerformed"),value:s,onChange:h=>c(h.target.value),rows:4,className:`tm-description ${s.trim()?"":"tm-field-required"}`})]})]})}const $L=e=>{if(!e)return"empty";const t=e.name&&e.name.trim()!=="",r=parseFloat(e.hours)>0||parseFloat(e.overtimeHours)>0;return t?r?"complete":"incomplete":"empty"},GS=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function ic({worker:e,index:t,onUpdate:r,onRemove:n,t:i,roleSelect:s}){const c=$L(e);return f.jsxs("div",{className:`tm-worker-card-expanded ${c!=="empty"?`worker-${c}`:""}`,children:[f.jsxs("div",{className:"tm-worker-row-top",children:[c==="complete"&&f.jsx("span",{className:"tm-worker-check",children:f.jsx($i,{size:14})}),s,f.jsx("input",{type:"text",placeholder:i("firstLastName"),value:e.name,onChange:u=>r(t,"name",u.target.value),className:"tm-worker-input"}),f.jsx("button",{className:"tm-remove",onClick:()=>n(t),children:""})]}),f.jsxs("div",{className:"tm-worker-row-bottom",children:[f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("start")}),f.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>r(t,"timeStarted",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("end")}),f.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>r(t,"timeEnded",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("regHrs")}),f.jsx("input",{type:"number",placeholder:"0",value:e.hours,onChange:u=>r(t,"hours",u.target.value)})]}),f.jsxs("div",{className:"tm-time-group",children:[f.jsx("label",{children:i("otHrs")}),f.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>r(t,"overtimeHours",u.target.value)})]})]})]})}function HL({batchHours:e,setBatchHours:t,namedWorkerCount:r,onApply:n,onClose:i,t:s}){const c=u=>{let m,h,p,v;switch(u){case"full":m="07:00",h="15:30",p="8",v="";break;case"10hr":m="06:00",h="16:30",p="8",v="2";break;case"half":m="07:00",h="11:00",p="4",v="";break;default:return}t({timeStarted:m,timeEnded:h,hours:p,overtimeHours:v})};return f.jsx("div",{className:"tm-modal-overlay",onClick:i,children:f.jsxs("div",{className:"tm-batch-modal",onClick:u=>u.stopPropagation(),children:[f.jsxs("h3",{children:[f.jsx(Po,{size:18})," ",s("applySameHours")]}),f.jsx("p",{className:"tm-batch-description",children:s("batchDescription")}),f.jsxs("div",{className:"tm-time-presets",children:[f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("full"),children:s("preset8hr")}),f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("10hr"),children:s("preset10hr")}),f.jsx("button",{type:"button",className:"tm-preset-btn",onClick:()=>c("half"),children:s("preset4hr")})]}),f.jsxs("div",{className:"tm-batch-form",children:[f.jsxs("div",{className:"tm-batch-row",children:[f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("timeStarted")}),f.jsx("input",{type:"time",value:e.timeStarted,onChange:u=>{const m=u.target.value,h=GS(m,e.timeEnded);t({...e,timeStarted:m,...h||{}})}})]}),f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("timeEnded")}),f.jsx("input",{type:"time",value:e.timeEnded,onChange:u=>{const m=u.target.value,h=GS(e.timeStarted,m);t({...e,timeEnded:m,...h||{}})}})]})]}),f.jsxs("div",{className:"tm-batch-row",children:[f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("regularHours")}),f.jsx("input",{type:"number",placeholder:"8",value:e.hours,onChange:u=>t({...e,hours:u.target.value})})]}),f.jsxs("div",{className:"tm-batch-field",children:[f.jsx("label",{children:s("overtimeHours")}),f.jsx("input",{type:"number",placeholder:"0",value:e.overtimeHours,onChange:u=>t({...e,overtimeHours:u.target.value})})]})]})]}),f.jsxs("div",{className:"tm-batch-preview",children:[f.jsxs("strong",{children:[s("willApplyTo"),":"]}),f.jsxs("span",{children:[r," ",s("workers_plural")]})]}),f.jsxs("div",{className:"tm-batch-actions",children:[f.jsx("button",{type:"button",className:"btn btn-secondary",onClick:i,children:s("cancel")}),f.jsx("button",{type:"button",className:"btn btn-primary",onClick:n,disabled:!e.hours&&!e.overtimeHours,children:s("applyToAll")})]})]})})}function FL({supervision:e,operators:t,laborers:r,dynamicWorkers:n,activeLaborClassIds:i,setActiveLaborClassIds:s,laborCategories:c,laborClasses:u,hasCustomLaborClasses:m,loadingLaborClasses:h,todaysCrew:p,showBatchHoursModal:v,setShowBatchHoursModal:_,batchHours:x,setBatchHours:w,loadingPreviousCrew:j,namedWorkers:S,workersNeedingHours:O,totalRegHours:C,totalOTHours:A,onLoadPreviousCrew:k,onApplyBatchHours:D,onApplyInlinePreset:M,onAddCrewWorker:L,onActivateLaborClass:X,onDeactivateLaborClass:re,addSupervision:ae,updateSupervision:G,removeSupervision:U,addOperator:ue,updateOperator:ve,removeOperator:q,addLaborer:R,updateLaborer:I,removeLaborer:ee,addDynamicWorker:H,updateDynamicWorker:se,removeDynamicWorker:Se,getInactiveLaborClasses:J,t:$,lang:ge,onShowToast:Pe}){const Le=S.length;return f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-crew-summary-bar",children:[f.jsxs("div",{className:"tm-summary-left",children:[f.jsx("span",{className:"tm-summary-count",children:S.length}),f.jsx("span",{className:"tm-summary-label",children:S.length===1?$("worker"):$("workers_plural")})]}),f.jsxs("div",{className:"tm-summary-middle",children:[f.jsxs("span",{className:"tm-summary-hours",children:[C+A,"h"]}),f.jsx("span",{className:"tm-summary-label",children:"total"})]}),O>0&&f.jsxs("div",{className:"tm-summary-warning",children:[f.jsx(wb,{size:14}),f.jsxs("span",{children:[O," ",ge==="en"?"need hours":"sin horas"]})]})]}),f.jsxs("div",{className:"tm-quick-actions-row",children:[f.jsxs("button",{className:"tm-quick-action",onClick:k,disabled:j,children:[f.jsx(WR,{size:16}),f.jsx("span",{children:j?ge==="en"?"Loading...":"Cargando...":$("sameAsYesterday")})]}),S.length>0&&f.jsxs("div",{className:"tm-time-presets-inline",children:[f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("8hr"),children:"8h"}),f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("10hr"),children:"10h"}),f.jsx("button",{className:"tm-preset-chip",onClick:()=>M("4hr"),children:"4h"}),f.jsx("button",{className:"tm-preset-chip more",onClick:()=>_(!0),title:ge==="en"?"Custom hours":"Horas personalizadas",children:f.jsx(Po,{size:14})})]})]}),p.length>0&&f.jsxs("div",{className:"tm-crew-select-section",children:[f.jsxs("div",{className:"tm-section-header",children:[f.jsxs("h4",{children:[f.jsx(To,{size:16})," ",ge==="en"?"Select T&M Workers":"Seleccionar Trabajadores T&M"]}),f.jsx("span",{className:"tm-section-hint",children:ge==="en"?"Tap to add":"Toca para agregar"})]}),f.jsx("div",{className:"tm-crew-grid",children:p.map((pe,ze)=>{const Q=e.some(ie=>ie.name.toLowerCase()===pe.name.toLowerCase())||t.some(ie=>ie.name.toLowerCase()===pe.name.toLowerCase())||r.some(ie=>ie.name.toLowerCase()===pe.name.toLowerCase()),Ee=Object.values(n).some(ie=>ie.some(Ue=>Ue.name.toLowerCase()===pe.name.toLowerCase())),we=Q||Ee;return f.jsxs("button",{className:`tm-crew-item ${we?"added":""}`,onClick:()=>{we||L(pe)},disabled:we,children:[f.jsx("span",{className:"tm-crew-item-name",children:pe.name}),f.jsx("span",{className:`tm-crew-item-role ${(pe.role||"laborer").toLowerCase()}`,children:pe.role||"Laborer"}),we&&f.jsx("span",{className:"tm-crew-item-check",children:""})]},ze)})})]}),m&&!h&&f.jsxs(f.Fragment,{children:[c.map(pe=>{const ze=u.filter(Q=>Q.category_id===pe.id&&i.has(Q.id));return ze.length===0?null:f.jsxs("div",{className:"tm-labor-category-section",children:[f.jsx("div",{className:"tm-category-header",children:pe.name}),ze.map(Q=>f.jsxs("div",{className:"tm-field",children:[f.jsxs("div",{className:"tm-field-header",children:[f.jsx("label",{children:Q.name}),f.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>re(Q.id),title:ge==="en"?"Remove this labor class":"Eliminar esta clase",children:""})]}),f.jsx("div",{className:"tm-workers-list",children:(n[Q.id]||[]).map((Ee,we)=>f.jsx(ic,{worker:Ee,index:we,onUpdate:(ie,Ue,ye)=>se(Q.id,ie,Ue,ye),onRemove:ie=>Se(Q.id,ie),t:$},we))}),f.jsxs("button",{className:"tm-add-btn",onClick:()=>H(Q.id),children:["+ ",ge==="en"?"Add":"Agregar"," ",Q.name]})]},Q.id))]},pe.id)}),u.filter(pe=>!pe.category_id&&i.has(pe.id)).map(pe=>f.jsxs("div",{className:"tm-field",children:[f.jsxs("div",{className:"tm-field-header",children:[f.jsx("label",{children:pe.name}),f.jsx("button",{type:"button",className:"tm-remove-class-btn",onClick:()=>re(pe.id),title:ge==="en"?"Remove this labor class":"Eliminar esta clase",children:""})]}),f.jsx("div",{className:"tm-workers-list",children:(n[pe.id]||[]).map((ze,Q)=>f.jsx(ic,{worker:ze,index:Q,onUpdate:(Ee,we,ie)=>se(pe.id,Ee,we,ie),onRemove:Ee=>Se(pe.id,Ee),t:$},Q))}),f.jsxs("button",{className:"tm-add-btn",onClick:()=>H(pe.id),children:["+ ",ge==="en"?"Add":"Agregar"," ",pe.name]})]},pe.id)),J().length>0&&f.jsx("div",{className:"tm-add-labor-class-section",children:f.jsxs("select",{className:"tm-add-labor-class-select",value:"",onChange:pe=>{pe.target.value&&X(pe.target.value)},children:[f.jsxs("option",{value:"",children:["+ ",ge==="en"?"Add Labor Class...":"Agregar Clase de Trabajo..."]}),c.map(pe=>{const ze=J().filter(Q=>Q.category_id===pe.id);return ze.length===0?null:f.jsx("optgroup",{label:pe.name,children:ze.map(Q=>f.jsx("option",{value:Q.id,children:Q.name},Q.id))},pe.id)}),J().filter(pe=>!pe.category_id).length>0&&f.jsx("optgroup",{label:ge==="en"?"Other":"Otros",children:J().filter(pe=>!pe.category_id).map(pe=>f.jsx("option",{value:pe.id,children:pe.name},pe.id))})]})}),i.size===0&&f.jsx("div",{className:"tm-no-labor-classes",children:f.jsx("p",{children:ge==="en"?"No labor classes added yet. Select from crew check-in above or add manually:":"No hay clases de trabajo agregadas. Seleccione del check-in o agregue manualmente:"})})]}),h&&f.jsxs("div",{className:"tm-loading-labor-classes",children:[f.jsx($s,{size:20,className:"tm-spinner"}),f.jsx("span",{children:ge==="en"?"Loading labor classes...":"Cargando clases de trabajo..."})]}),!m&&!h&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:$("supervision")}),f.jsx("div",{className:"tm-workers-list",children:e.map((pe,ze)=>f.jsx(ic,{worker:pe,index:ze,onUpdate:G,onRemove:U,t:$,roleSelect:f.jsx("div",{className:"tm-role-select",children:f.jsxs("select",{value:pe.role,onChange:Q=>G(ze,"role",Q.target.value),children:[f.jsx("option",{value:"Foreman",children:$("foreman")}),f.jsx("option",{value:"Superintendent",children:$("superintendent")})]})})},ze))}),f.jsx("button",{className:"tm-add-btn",onClick:ae,children:$("addSupervision")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:$("operators")}),f.jsx("div",{className:"tm-workers-list",children:t.map((pe,ze)=>f.jsx(ic,{worker:pe,index:ze,onUpdate:ve,onRemove:q,t:$},ze))}),f.jsx("button",{className:"tm-add-btn",onClick:ue,children:$("addOperator")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:$("laborers")}),f.jsx("div",{className:"tm-workers-list",children:r.map((pe,ze)=>f.jsx(ic,{worker:pe,index:ze,onUpdate:I,onRemove:ee,t:$},ze))}),f.jsx("button",{className:"tm-add-btn",onClick:R,children:$("addLaborer")})]})]}),v&&f.jsx(HL,{batchHours:x,setBatchHours:w,namedWorkerCount:Le,onApply:D,onClose:()=>_(!1),t:$})]})}function KL({companyId:e,items:t,setItems:r,t:n,lang:i,onShowToast:s}){const[c,u]=y.useState(null),[m,h]=y.useState([]),[p,v]=y.useState(!1),[_,x]=y.useState(""),[w,j]=y.useState([]),[S,O]=y.useState([]),[C,A]=y.useState(!1),[k,D]=y.useState({name:"",category:"",quantity:""}),M=y.useRef(null),L=y.useRef(null);y.useEffect(()=>{c&&e&&X(c)},[c,e]),y.useEffect(()=>(!c&&M.current&&(L.current=setTimeout(()=>{M.current?.focus()},100)),()=>{L.current&&clearTimeout(L.current)}),[c]);const X=async q=>{v(!0);try{const R=await _e.getMaterialsEquipmentByCategory(e,q);h(R)}catch(R){console.error("Error loading items:",R),s("Error loading items","error")}finally{v(!1)}},re=async()=>{if(!(S.length>0))try{const q=[];for(const R of jv){const I=await _e.getMaterialsEquipmentByCategory(e,R);q.push(...I.map(ee=>({...ee,category:R})))}O(q)}catch(q){console.error("Error loading all materials:",q)}},ae=q=>{if(x(q),!q.trim()){j([]);return}const R=q.toLowerCase(),I=S.filter(ee=>ee.name.toLowerCase().includes(R)||ee.category.toLowerCase().includes(R));j(I.slice(0,10))},G=q=>{const R=t.findIndex(I=>I.material_equipment_id===q.id);R>=0?r(t.map((I,ee)=>ee===R?{...I,quantity:I.quantity+1}:I)):r([...t,{material_equipment_id:q.id,name:q.name,unit:q.unit,category:q.category,quantity:1,isCustom:!1}]),s(`Added ${q.name}`,"success")},U=()=>{if(!k.name||!k.category||!k.quantity){s("Fill in all fields","error");return}r([...t,{material_equipment_id:null,custom_name:k.name,custom_category:k.category,name:k.name,category:k.category,quantity:parseFloat(k.quantity),unit:"each",isCustom:!0}]),D({name:"",category:"",quantity:""}),A(!1),u(null),s("Custom item added","success")},ue=(q,R)=>{const I=parseFloat(R)||0;I<=0?r(t.filter((ee,H)=>H!==q)):r(t.map((ee,H)=>H===q?{...ee,quantity:I}:ee))},ve=()=>{C?A(!1):c&&(u(null),A(!1))};return c||C?f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-wizard-header",style:{margin:"-1rem -1rem 1rem -1rem",padding:"0.75rem 1rem"},children:[f.jsx("button",{className:"tm-back-btn",onClick:ve,children:""}),f.jsx("h2",{children:C?"Add Custom Item":c}),f.jsxs("div",{className:"tm-item-count",children:[t.length," items"]})]}),C?f.jsxs("div",{className:"tm-custom-form",children:[f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Item Name"}),f.jsx("input",{type:"text",placeholder:"What did you use?",value:k.name,onChange:q=>D({...k,name:q.target.value}),autoFocus:!0})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Category"}),f.jsx("div",{className:"tm-category-select",children:jv.map(q=>f.jsx("button",{className:`tm-cat-chip ${k.category===q?"active":""}`,onClick:()=>D({...k,category:q}),children:q},q))})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:"Quantity"}),f.jsx("input",{type:"number",placeholder:"How many?",value:k.quantity,onChange:q=>D({...k,quantity:q.target.value})})]}),f.jsx("button",{className:"tm-big-btn primary",onClick:U,children:"Add Custom Item"})]}):f.jsx("div",{className:"tm-item-grid",children:p?f.jsx("div",{className:"tm-loading",children:"Loading..."}):f.jsxs(f.Fragment,{children:[m.map(q=>{const R=t.find(I=>I.material_equipment_id===q.id);return f.jsxs("button",{className:`tm-item-card ${R?"added":""}`,onClick:()=>G(q),children:[f.jsx("span",{className:"tm-item-name",children:q.name}),f.jsx("span",{className:"tm-item-unit",children:q.unit}),R&&f.jsx("span",{className:"tm-item-badge",children:R.quantity})]},q.id)}),f.jsxs("button",{className:"tm-item-card custom",onClick:()=>A(!0),children:[f.jsx("span",{className:"tm-item-name",children:"+ Add Other"}),f.jsx("span",{className:"tm-item-unit",children:"Not on list"})]})]})}),!C&&t.length>0&&f.jsx("div",{className:"tm-wizard-footer",children:f.jsxs("button",{className:"tm-big-btn primary",onClick:()=>u(null),children:["Done Adding (",t.length," items)"]})})]}):f.jsxs("div",{className:"tm-step-content",children:[f.jsxs("div",{className:"tm-field tm-search-field",children:[f.jsxs("div",{className:"tm-search-input-wrapper",children:[f.jsx(XR,{size:18,className:"tm-search-icon"}),f.jsx("input",{ref:M,type:"text",placeholder:n("searchMaterials"),value:_,onChange:q=>ae(q.target.value),onFocus:()=>re(),className:"tm-search-input"}),_&&f.jsx("button",{className:"tm-search-clear",onClick:()=>{x(""),j([])},children:""})]}),_&&w.length>0&&f.jsx("div",{className:"tm-search-results",children:w.map((q,R)=>{const I=t.find(ee=>ee.id===q.id);return f.jsxs("button",{className:`tm-search-result-item ${I?"added":""}`,onClick:()=>{I?ue(t.indexOf(I),I.quantity+1):r([...t,{...q,quantity:1,isCustom:!1}]),x(""),j([])},children:[f.jsx("span",{className:"tm-search-result-name",children:q.name}),f.jsx("span",{className:"tm-search-result-category",children:q.category}),I&&f.jsxs("span",{className:"tm-search-result-qty",children:["",I.quantity]})]},R)})}),_&&w.length===0&&f.jsx("div",{className:"tm-search-no-results",children:n("noSearchResults")})]}),f.jsxs("div",{className:"tm-field",children:[f.jsx("label",{children:n("orBrowse")}),f.jsx("div",{className:"tm-category-grid",children:jv.map(q=>{const R=t.filter(I=>I.category===q);return f.jsxs("button",{className:"tm-category-card",onClick:()=>u(q),children:[f.jsx("span",{className:"tm-cat-name",children:q}),R.length>0&&f.jsx("span",{className:"tm-cat-count",children:R.length})]},q)})})]}),t.length>0&&f.jsxs("div",{className:"tm-field",children:[f.jsxs("label",{children:["Added Items (",t.length,")"]}),f.jsx("div",{className:"tm-added-list",children:t.map((q,R)=>f.jsxs("div",{className:"tm-added-item",children:[f.jsxs("div",{className:"tm-added-info",children:[q.isCustom&&f.jsx("span",{className:"tm-custom-badge",children:"Custom"}),f.jsx("span",{className:"tm-added-name",children:q.name})]}),f.jsxs("div",{className:"tm-added-qty",children:[f.jsx("button",{onClick:()=>ue(R,q.quantity-1),children:""}),f.jsx("span",{children:q.quantity}),f.jsx("button",{onClick:()=>ue(R,q.quantity+1),children:"+"})]})]},R))})]})]})}function YL({photos:e,onPhotoAdd:t,onRemovePhoto:r,maxPhotos:n,selectedCorId:i,setSelectedCorId:s,assignableCORs:c,lang:u}){return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:`tm-action-card-prominent ${e.length>0?"has-content":"needs-action"}`,children:[f.jsxs("div",{className:"tm-action-card-header",children:[f.jsx("div",{className:"tm-action-card-icon",children:f.jsx(cy,{size:24})}),f.jsxs("div",{className:"tm-action-card-title",children:[f.jsx("h4",{children:u==="en"?"Photo Evidence":"Evidencia Fotogrfica"}),f.jsx("span",{className:"tm-action-card-status",children:e.length>0?`${e.length} ${u==="en"?"photo(s) added":"foto(s) agregada(s)"}`:u==="en"?"Recommended for billing":"Recomendado para facturacin"})]})]}),e.length>0&&f.jsx("div",{className:"tm-photo-preview-row",children:e.map(m=>f.jsxs("div",{className:"tm-photo-preview-thumb",children:[f.jsx("img",{src:m.previewUrl,alt:m.name}),f.jsx("button",{className:"tm-photo-remove-x",onClick:()=>r(m.id),children:""})]},m.id))}),f.jsxs("label",{className:`tm-action-card-btn ${e.length===0?"primary":""}`,children:[f.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:t,style:{display:"none"}}),f.jsx(cy,{size:18}),f.jsx("span",{children:e.length>0?u==="en"?"Add More Photos":"Agregar Ms Fotos":u==="en"?"Add Photos":"Agregar Fotos"})]})]}),f.jsxs("div",{className:`tm-action-card-prominent ${i?"has-content":""}`,children:[f.jsxs("div",{className:"tm-action-card-header",children:[f.jsx("div",{className:"tm-action-card-icon cor",children:f.jsx(ZR,{size:24})}),f.jsxs("div",{className:"tm-action-card-title",children:[f.jsx("h4",{children:u==="en"?"Link to Change Order":"Vincular a Orden de Cambio"}),f.jsx("span",{className:"tm-action-card-status",children:i?`${u==="en"?"Linked to":"Vinculado a"}: ${c.find(m=>m.id===i)?.cor_number||""}`:u==="en"?"Optional - Link this T&M to a COR":"Opcional - Vincular este T&M a un COR"})]})]}),f.jsxs("select",{value:i,onChange:m=>s(m.target.value),className:"tm-cor-select-prominent",children:[f.jsx("option",{value:"",children:u==="en"?"-- Select a COR (optional) --":"-- Seleccionar COR (opcional) --"}),c.map(m=>f.jsxs("option",{value:m.id,children:[m.cor_number,": ",m.title||"Untitled"," (",m.status,")"]},m.id))]}),c.length===0&&f.jsx("p",{className:"tm-cor-hint",children:u==="en"?"No active CORs available for this project":"No hay CORs activos para este proyecto"})]})]})}const GL=y.lazy(()=>Ja(()=>import("./SignatureLinkGenerator-DYhfqHgl.js"),__vite__mapDeps([0,1,2,3,4]))),VL=y.lazy(()=>Ja(()=>import("./TMClientSignature-BrpIy0SU.js"),__vite__mapDeps([5,1,2,3,4])));function WL({step:e,setStep:t,project:r,companyId:n,workDate:i,cePcoNumber:s,notes:c,photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:p,selectedCorId:v,setSelectedCorId:_,assignableCORs:x,items:w,hasCustomLaborClasses:j,validDynamicWorkersList:S,validSupervision:O,validOperators:C,validLaborers:A,totalWorkers:k,totalRegHours:D,totalOTHours:M,submittedByName:L,setSubmittedByName:X,submittedTicket:re,submitting:ae,submitProgress:G,clientSigned:U,setClientSigned:ue,showSignatureLinkModal:ve,setShowSignatureLinkModal:q,showOnSiteSignature:R,setShowOnSiteSignature:I,onRetryPhotoUpload:ee,t:H,lang:se,onShowToast:Se}){return e===5&&re?f.jsxs("div",{className:"tm-step-content tm-success-step",children:[f.jsxs("div",{className:"tm-success-header",children:[f.jsx("div",{className:"tm-success-icon",children:f.jsx(Wn,{size:48})}),f.jsx("h2",{children:se==="en"?"T&M Ticket Submitted!":"Ticket T&M Enviado!"}),f.jsx("p",{className:"tm-success-subtitle",children:se==="en"?"Your ticket has been saved and is ready for client signature.":"Su ticket ha sido guardado y est listo para la firma del cliente."})]}),f.jsxs("div",{className:"tm-success-summary",children:[f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:k}),f.jsx("span",{className:"tm-success-stat-label",children:se==="en"?"Workers":"Trabajadores"})]}),f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:D+M}),f.jsx("span",{className:"tm-success-stat-label",children:se==="en"?"Total Hours":"Horas Total"})]}),f.jsxs("div",{className:"tm-success-stat",children:[f.jsx("span",{className:"tm-success-stat-value",children:new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),f.jsx("span",{className:"tm-success-stat-label",children:se==="en"?"Work Date":"Fecha"})]})]}),u.some(J=>J.status==="failed")&&f.jsxs("div",{className:"tm-failed-photos-section",children:[f.jsxs("div",{className:"tm-failed-photos-header",children:[f.jsx(wb,{size:18}),f.jsx("span",{children:se==="en"?`${u.filter(J=>J.status==="failed").length} photo(s) failed to upload`:`${u.filter(J=>J.status==="failed").length} foto(s) no se subieron`})]}),f.jsx("div",{className:"tm-failed-photos-grid",children:u.filter(J=>J.status==="failed").map(J=>f.jsxs("div",{className:"tm-failed-photo-item",children:[f.jsx("img",{src:J.previewUrl,alt:J.name}),f.jsx("div",{className:"tm-failed-photo-overlay",children:f.jsx("button",{className:"tm-retry-photo-btn",onClick:()=>ee(J.id,re.id),disabled:J.status==="uploading"||J.status==="compressing",children:J.status==="uploading"||J.status==="compressing"?f.jsx($s,{size:16,className:"tm-spinner"}):f.jsxs(f.Fragment,{children:[f.jsx(yS,{size:16}),f.jsx("span",{children:se==="en"?"Retry":"Reintentar"})]})})}),J.error&&f.jsxs("div",{className:"tm-failed-photo-error",title:J.error,children:[J.error.substring(0,20),J.error.length>20?"...":""]})]},J.id))}),f.jsxs("button",{className:"tm-retry-all-btn",onClick:async()=>{const J=u.filter($=>$.status==="failed");for(const $ of J)await ee($.id,re.id)},children:[f.jsx(yS,{size:16}),se==="en"?"Retry All Failed Photos":"Reintentar Todas las Fotos"]})]}),u.length>0&&u.every(J=>J.status==="confirmed")&&f.jsxs("div",{className:"tm-photos-success",children:[f.jsx($i,{size:16}),f.jsx("span",{children:se==="en"?`All ${u.length} photo(s) uploaded successfully`:`${u.length} foto(s) subidas exitosamente`})]}),f.jsxs("div",{className:"tm-signature-options",children:[f.jsx("h3",{children:se==="en"?"Get Client Signature":"Obtener Firma del Cliente"}),f.jsx("p",{className:"tm-signature-description",children:se==="en"?"Have the client sign this T&M ticket to verify the work performed.":"Haga que el cliente firme este ticket T&M para verificar el trabajo realizado."}),U?f.jsxs("div",{className:"tm-signed-confirmation",children:[f.jsx(Wn,{size:32,className:"tm-signed-icon"}),f.jsx("span",{children:se==="en"?"Client signature collected!":"Firma del cliente recopilada!"})]}):f.jsxs("div",{className:"tm-signature-buttons",children:[f.jsxs("button",{className:"tm-signature-option-btn primary",onClick:()=>I(!0),children:[f.jsx("div",{className:"tm-signature-option-icon",children:f.jsx(bc,{size:24})}),f.jsxs("div",{className:"tm-signature-option-text",children:[f.jsx("span",{className:"tm-signature-option-title",children:se==="en"?"Sign Now (On-Site)":"Firmar Ahora"}),f.jsx("span",{className:"tm-signature-option-desc",children:se==="en"?"Client signs on this device":"Cliente firma en este dispositivo"})]})]}),f.jsxs("button",{className:"tm-signature-option-btn",onClick:()=>q(!0),children:[f.jsx("div",{className:"tm-signature-option-icon",children:f.jsx(bc,{size:24})}),f.jsxs("div",{className:"tm-signature-option-text",children:[f.jsx("span",{className:"tm-signature-option-title",children:se==="en"?"Send Signature Link":"Enviar Enlace"}),f.jsx("span",{className:"tm-signature-option-desc",children:se==="en"?"Client signs later via link":"Cliente firma despus va enlace"})]})]})]})]}),ve&&f.jsx(y.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading..."}),children:f.jsx(GL,{documentType:"tm_ticket",documentId:re.id,companyId:n,projectId:r.id,project:r,documentTitle:`T&M - ${new Date(i).toLocaleDateString()}`,onClose:()=>q(!1),onShowToast:Se})}),R&&f.jsx(y.Suspense,{fallback:f.jsx("div",{className:"loading",children:"Loading..."}),children:f.jsx(VL,{ticketId:re.id,ticketSummary:{workDate:i,workerCount:k,totalHours:D+M},lang:se,onSave:()=>{I(!1),ue(!0)},onClose:()=>I(!1),onShowToast:Se})})]}):f.jsxs("div",{className:"tm-step-content",children:[f.jsx(YL,{photos:u,onPhotoAdd:m,onRemovePhoto:h,maxPhotos:p,selectedCorId:v,setSelectedCorId:_,assignableCORs:x,lang:se}),f.jsx("div",{className:"tm-review-divider",children:f.jsx("span",{children:se==="en"?"Ticket Summary":"Resumen del Ticket"})}),f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[""," ",H("workDate")]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:se==="en"?"Edit":"Editar"})]}),f.jsxs("div",{className:"tm-review-row",children:[f.jsx("span",{children:new Date(i).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),s&&f.jsxs("span",{children:["CE/PCO: ",s]})]})]}),c&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(Ho,{size:16,className:"inline-icon"})," ",H("notes")]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(1),children:se==="en"?"Edit":"Editar"})]}),f.jsx("div",{className:"tm-review-notes",children:c})]}),j&&S.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(To,{size:16,className:"inline-icon"})," ",se==="en"?"Workers":"Trabajadores"," (",D+M," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:se==="en"?"Edit":"Editar"})]}),f.jsx("div",{className:"tm-review-list",children:S.map((J,$)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsxs("div",{className:"tm-review-worker-name",children:[f.jsx("span",{className:"tm-role-badge",children:J.role})," ",J.name]}),f.jsxs("div",{className:"tm-review-worker-details",children:[J.time_started&&J.time_ended&&f.jsxs("span",{className:"tm-review-time",children:[J.time_started," - ",J.time_ended]}),f.jsxs("span",{className:"tm-review-hours",children:[J.hours||0," reg",J.overtime_hours>0?` + ${J.overtime_hours} OT`:""]})]})]},$))})]}),!j&&O.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(QR,{size:16,className:"inline-icon"})," Supervision (",O.reduce((J,$)=>J+parseFloat($.hours||0)+parseFloat($.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:se==="en"?"Edit":"Editar"})]}),f.jsx("div",{className:"tm-review-list",children:O.map((J,$)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsxs("div",{className:"tm-review-worker-name",children:[f.jsx("span",{className:"tm-role-badge",children:J.role})," ",J.name]}),f.jsxs("div",{className:"tm-review-worker-details",children:[J.timeStarted&&J.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[J.timeStarted," - ",J.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[J.hours||0," reg",parseFloat(J.overtimeHours)>0?` + ${J.overtimeHours} OT`:""]})]})]},$))})]}),!j&&C.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[""," Operators (",C.reduce((J,$)=>J+parseFloat($.hours||0)+parseFloat($.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:se==="en"?"Edit":"Editar"})]}),f.jsx("div",{className:"tm-review-list",children:C.map((J,$)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsx("div",{className:"tm-review-worker-name",children:J.name}),f.jsxs("div",{className:"tm-review-worker-details",children:[J.timeStarted&&J.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[J.timeStarted," - ",J.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[J.hours||0," reg",parseFloat(J.overtimeHours)>0?` + ${J.overtimeHours} OT`:""]})]})]},$))})]}),!j&&A.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(To,{size:16,className:"inline-icon"})," Laborers (",A.reduce((J,$)=>J+parseFloat($.hours||0)+parseFloat($.overtimeHours||0),0)," hrs)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(2),children:se==="en"?"Edit":"Editar"})]}),f.jsx("div",{className:"tm-review-list",children:A.map((J,$)=>f.jsxs("div",{className:"tm-review-row-detailed",children:[f.jsx("div",{className:"tm-review-worker-name",children:J.name}),f.jsxs("div",{className:"tm-review-worker-details",children:[J.timeStarted&&J.timeEnded&&f.jsxs("span",{className:"tm-review-time",children:[J.timeStarted," - ",J.timeEnded]}),f.jsxs("span",{className:"tm-review-hours",children:[J.hours||0," reg",parseFloat(J.overtimeHours)>0?` + ${J.overtimeHours} OT`:""]})]})]},$))})]}),w.length>0&&f.jsxs("div",{className:"tm-review-section",children:[f.jsxs("div",{className:"tm-review-section-header",children:[f.jsxs("h4",{children:[f.jsx(JR,{size:16,className:"inline-icon"})," Materials & Equipment (",w.length," items)"]}),f.jsx("button",{className:"tm-edit-link",onClick:()=>t(3),children:se==="en"?"Edit":"Editar"})]}),f.jsx("div",{className:"tm-review-list",children:w.map((J,$)=>f.jsxs("div",{className:"tm-review-row",children:[f.jsxs("span",{children:[J.isCustom&&f.jsxs(f.Fragment,{children:[f.jsx(eq,{size:14,className:"inline-icon"})," "]}),J.name]}),f.jsxs("span",{children:[J.quantity," ",J.unit]})]},$))})]}),f.jsxs("div",{className:"tm-review-section tm-certification",children:[f.jsx("div",{className:"tm-review-header",children:f.jsxs("span",{children:[f.jsx(bc,{size:16,className:"inline-icon"})," Submitted By"]})}),f.jsx("input",{type:"text",className:"tm-certification-input",placeholder:"Enter your name",value:L,onChange:J=>X(J.target.value)}),f.jsx("p",{className:"tm-certification-note",children:"By submitting, you certify this T&M is accurate."})]})]})}const VS=()=>{const e=new Uint8Array(6);return crypto.getRandomValues(e),Array.from(e,t=>t.toString(36)).join("")},Dd=(e,t)=>{if(!e||!t)return null;const[r,n]=e.split(":").map(Number),[i,s]=t.split(":").map(Number);let c=i*60+s-(r*60+n);c<0&&(c+=1440);const u=c/60,m=Math.min(u,8),h=Math.max(0,u-8);return{hours:m.toFixed(1),overtimeHours:h>0?h.toFixed(1):""}};function XL({project:e,companyId:t,maxPhotos:r=10,onSubmit:n,onCancel:i,onShowToast:s}){const[c,u]=y.useState(1),[m,h]=y.useState(new Date().toISOString().split("T")[0]),[p,v]=y.useState(null),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState(!1),[C,A]=y.useState(""),[k,D]=y.useState(""),[M,L]=y.useState(""),[X,re]=y.useState([]),[ae,G]=y.useState(!1),[U,ue]=y.useState(!1),[ve,q]=y.useState({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),[R,I]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}]),[ee,H]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[se,Se]=y.useState([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]),[J,$]=y.useState([]),[ge,Pe]=y.useState(""),[Le,pe]=y.useState([]),[ze,Q]=y.useState(!1),[Ee,we]=y.useState(""),[ie,Ue]=y.useState([]),[ye,ke]=y.useState(!1),[Ce,Ct]=y.useState("en"),Ie=K=>UL[Ce][K]||K,[It,_t]=y.useState([]),[At,Cr]=y.useState([]),[jt,Ye]=y.useState({}),[$r,bn]=y.useState(!0),[Pr,Ar]=y.useState(new Set),me=At.length>0;y.useEffect(()=>{Rr(),st();const K=_e.subscribeToCORs?.(e.id,()=>{st()});return()=>{K?.unsubscribe?.()}},[e.id]),y.useEffect(()=>{(async()=>{if(!t){bn(!1);return}try{const ce=await _e.getLaborClassesForField(t);_t(ce.categories||[]),Cr(ce.classes||[])}catch(ce){console.error("Error loading labor classes:",ce)}finally{bn(!1)}})()},[t]),y.useEffect(()=>{if($r||At.length===0)return;const K=new Set;ie.forEach(le=>{le.labor_class_id&&K.add(le.labor_class_id)});const ce={},he=new Set;K.forEach(le=>{At.some(ne=>ne.id===le)&&(ce[le]=[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}],he.add(le))}),Ye(le=>Object.keys(le).length===0?ce:le),Ar(le=>le.size===0?he:le)},[At,ie,$r]);const st=async()=>{G(!0);try{const K=await _e.getAssignableCORs(e.id);re(K||[])}catch(K){console.error("Error loading assignable CORs:",K)}finally{G(!1)}},Jr=()=>{const{timeStarted:K,timeEnded:ce,hours:he,overtimeHours:le}=ve;let ne=0;if(me){const je={};Object.entries(jt).forEach(([$e,Fe])=>{je[$e]=Fe.map(gt=>gt&&gt.name&&gt.name.trim()?(ne++,{...gt,timeStarted:K,timeEnded:ce,hours:he,overtimeHours:le}):gt)}),Ye(je)}else I(R.map(je=>je&&je.name&&je.name.trim()?(ne++,{...je,timeStarted:K,timeEnded:ce,hours:he,overtimeHours:le}):je)),H(ee.map(je=>je&&je.name&&je.name.trim()?(ne++,{...je,timeStarted:K,timeEnded:ce,hours:he,overtimeHours:le}):je)),Se(se.map(je=>je&&je.name&&je.name.trim()?(ne++,{...je,timeStarted:K,timeEnded:ce,hours:he,overtimeHours:le}):je));ue(!1),q({timeStarted:"",timeEnded:"",hours:"",overtimeHours:""}),ne>0?s(Ie("appliedHours").replace("{count}",ne),"success"):s(Ce==="en"?"Add workers first":"Agregue trabajadores primero","info")},Mr=K=>{let ce,he,le,ne;switch(K){case"8hr":ce="07:00",he="15:30",le="8",ne="";break;case"10hr":ce="06:00",he="16:30",le="8",ne="2";break;case"4hr":ce="07:00",he="11:00",le="4",ne="";break;default:return}let je=0;if(me){const $e={};Object.entries(jt).forEach(([Fe,gt])=>{$e[Fe]=gt.map(at=>at&&at.name&&at.name.trim()?(je++,{...at,timeStarted:ce,timeEnded:he,hours:le,overtimeHours:ne}):at)}),Ye($e)}else I($e=>$e.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(je++,{...Fe,timeStarted:ce,timeEnded:he,hours:le,overtimeHours:ne}):Fe)),H($e=>$e.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(je++,{...Fe,timeStarted:ce,timeEnded:he,hours:le,overtimeHours:ne}):Fe)),Se($e=>$e.map(Fe=>Fe&&Fe.name&&Fe.name.trim()?(je++,{...Fe,timeStarted:ce,timeEnded:he,hours:le,overtimeHours:ne}):Fe));je>0?s(Ie("appliedHours").replace("{count}",je),"success"):s(Ce==="en"?"Add workers first":"Agregue trabajadores primero","info")},Rr=async()=>{try{const K=await _e.getCrewCheckin(e.id);K?.workers&&Ue(K.workers)}catch(K){console.error("Error loading crew:",K)}},vt=async()=>{ke(!0);try{const K=await _e.getPreviousTicketCrew(e.id,m);if(!K||K.totalWorkers===0){s(Ie("noPreviousCrew"),"info");return}me&&K.dynamicWorkers?Ye(K.dynamicWorkers):(K.supervision&&I(K.supervision),K.operators&&H(K.operators),K.laborers&&Se(K.laborers));const ce=new Date(K.workDate).toLocaleDateString();s(Ie("loadedWorkers").replace("{count}",K.totalWorkers).replace("{date}",ce),"success")}catch(K){console.error("Error loading previous crew:",K),s(Ce==="en"?"Error loading previous crew":"Error cargando equipo anterior","error")}finally{ke(!1)}},Ut=()=>{I([...R,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},xt=(K,ce,he)=>{I(R.map((le,ne)=>{if(ne!==K)return le;const je={...le,[ce]:he};if(ce==="timeStarted"||ce==="timeEnded"){const $e=ce==="timeStarted"?he:le.timeStarted,Fe=ce==="timeEnded"?he:le.timeEnded,gt=Dd($e,Fe);gt&&(je.hours=gt.hours,je.overtimeHours=gt.overtimeHours)}return je}))},_n=K=>{R.length>1?I(R.filter((ce,he)=>he!==K)):I([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:"Foreman"}])},li=()=>{Se([...se,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},Zi=(K,ce,he)=>{Se(se.map((le,ne)=>{if(ne!==K)return le;const je={...le,[ce]:he};if(ce==="timeStarted"||ce==="timeEnded"){const $e=ce==="timeStarted"?he:le.timeStarted,Fe=ce==="timeEnded"?he:le.timeEnded,gt=Dd($e,Fe);gt&&(je.hours=gt.hours,je.overtimeHours=gt.overtimeHours)}return je}))},ci=K=>{se.length>1?Se(se.filter((ce,he)=>he!==K)):Se([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},ui=()=>{H([...ee,{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},va=(K,ce,he)=>{H(ee.map((le,ne)=>{if(ne!==K)return le;const je={...le,[ce]:he};if(ce==="timeStarted"||ce==="timeEnded"){const $e=ce==="timeStarted"?he:le.timeStarted,Fe=ce==="timeEnded"?he:le.timeEnded,gt=Dd($e,Fe);gt&&(je.hours=gt.hours,je.overtimeHours=gt.overtimeHours)}return je}))},xn=K=>{ee.length>1?H(ee.filter((ce,he)=>he!==K)):H([{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])},di=K=>{Ye(ce=>({...ce,[K]:[...ce[K]||[],{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))},ga=(K,ce,he,le)=>{Ye(ne=>({...ne,[K]:(ne[K]||[]).map((je,$e)=>{if($e!==ce)return je;const Fe={...je,[he]:le};if(he==="timeStarted"||he==="timeEnded"){const gt=he==="timeStarted"?le:je.timeStarted,at=he==="timeEnded"?le:je.timeEnded,ir=Dd(gt,at);ir&&(Fe.hours=ir.hours,Fe.overtimeHours=ir.overtimeHours)}return Fe})}))},ll=(K,ce)=>{Ye(he=>{const le=he[K]||[];return le.length>1?{...he,[K]:le.filter((ne,je)=>je!==ce)}:{...he,[K]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}})},be=K=>{K&&(Ar(ce=>new Set([...ce,K])),Ye(ce=>!ce[K]||ce[K].length===0?{...ce,[K]:[{name:"",hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}:ce))},Un=K=>{Ar(ce=>{const he=new Set(ce);return he.delete(K),he}),Ye(ce=>{const he={...ce};return delete he[K],he})},ya=()=>At.filter(K=>!Pr.has(K.id)),cl=()=>{if(!jt||typeof jt!="object")return[];const K=[];return Object.entries(jt).forEach(([ce,he])=>{if(!Array.isArray(he))return;const le=At.find(ne=>ne.id===ce);he.forEach(ne=>{ne&&ne.name&&ne.name.trim()&&(parseFloat(ne.hours)>0||parseFloat(ne.overtimeHours)>0)&&K.push({name:ne.name.trim(),hours:parseFloat(ne.hours)||0,overtime_hours:parseFloat(ne.overtimeHours)||0,time_started:ne.timeStarted||null,time_ended:ne.timeEnded||null,role:le?.name||"Worker",labor_class_id:ce})})}),K},du=K=>{if(K.labor_class_id&&me&&At.some(he=>he.id===K.labor_class_id)){Pr.has(K.labor_class_id)||Ar(ne=>new Set([...ne,K.labor_class_id]));const he=jt[K.labor_class_id]||[],le=he.findIndex(ne=>!ne||!ne.name||!ne.name.trim());if(le>=0){const ne=[...he];ne[le]={...ne[le],name:K.name},Ye(je=>({...je,[K.labor_class_id]:ne}))}else Ye(ne=>({...ne,[K.labor_class_id]:[...ne[K.labor_class_id]||[],{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}else if(me){const le=[...Pr][0]||At[0]?.id;if(le){Pr.has(le)||Ar($e=>new Set([...$e,le]));const ne=jt[le]||[],je=ne.findIndex($e=>!$e||!$e.name||!$e.name.trim());if(je>=0){const $e=[...ne];$e[je]={...$e[je],name:K.name},Ye(Fe=>({...Fe,[le]:$e}))}else Ye($e=>({...$e,[le]:[...$e[le]||[],{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}]}))}}else{const he=(K.role||"").toLowerCase();if(he.includes("foreman")||he.includes("supervisor")||he.includes("superintendent")){const le=R.findIndex(ne=>!ne||!ne.name||!ne.name.trim());le>=0?(xt(le,"name",K.name),xt(le,"role",he.includes("superintendent")?"Superintendent":"Foreman")):I([...R,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:"",role:he.includes("superintendent")?"Superintendent":"Foreman"}])}else if(he.includes("operator")){const le=ee.findIndex(ne=>!ne||!ne.name||!ne.name.trim());le>=0?va(le,"name",K.name):H([...ee,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}else{const le=se.findIndex(ne=>!ne||!ne.name||!ne.name.trim());le>=0?Zi(le,"name",K.name):Se([...se,{name:K.name,hours:"",overtimeHours:"",timeStarted:"",timeEnded:""}])}}s(`Added ${K.name}`,"success")},fu=K=>{const ce=Array.from(K.target.files);if(ce.length===0)return;const he=r===-1?1/0:r-Le.length;if(he<=0){s(`Photo limit reached (${r} max)`,"error"),K.target.value="";return}const le=ce.slice(0,he);le.length<ce.length&&s(`Only ${le.length} photo(s) added (${r} max)`,"error");const ne=10*1024*1024;le.forEach(je=>{if(!je.type.startsWith("image/")){s("Please select an image file","error");return}if(je.size>ne){s(`Photo too large: ${je.name} (max 10MB)`,"error");return}const $e=URL.createObjectURL(je),Fe=`photo-${Date.now()}-${VS()}`;pe(gt=>[...gt,{id:`${Date.now()}-${VS()}`,tempId:Fe,file:je,previewUrl:$e,name:je.name,status:"pending",attempts:0,error:null,uploadedUrl:null}])}),K.target.value=""},Bn=(K,ce)=>{pe(he=>he.map(le=>le.id===K?{...le,...ce}:le))},ul=async(K,ce)=>{const he=Le.find(le=>le.id===K);if(!(!he||he.status!=="failed")){Bn(K,{status:"compressing",error:null});try{let le=he.file;try{le=await YS(he.file)}catch(je){console.warn("Compression failed, using original:",je)}Bn(K,{status:"uploading"});const ne=await _e.uploadPhoto(t,e.id,ce,le);Bn(K,{status:"confirmed",uploadedUrl:ne,attempts:he.attempts+1}),await _e.updateTMTicketPhotos(ce,[...Le.filter(je=>je.uploadedUrl).map(je=>je.uploadedUrl),ne]),s("Photo uploaded successfully","success")}catch(le){console.error("Retry failed:",le),Bn(K,{status:"failed",error:le.message||"Upload failed",attempts:he.attempts+1}),s("Photo retry failed","error")}}},dl=K=>{const ce=Le.find(he=>he.id===K);ce?.previewUrl&&URL.revokeObjectURL(ce.previewUrl),pe(Le.filter(he=>he.id!==K))},Qi=R.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),Ji=ee.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),en=se.filter(K=>K&&K.name&&K.name.trim()&&(parseFloat(K.hours)>0||parseFloat(K.overtimeHours)>0)),Bt=cl(),ar=me?Bt.length:Qi.length+Ji.length+en.length,ra=me?Bt.reduce((K,ce)=>K+(ce.hours||0),0):[...Qi,...Ji,...en].reduce((K,ce)=>K+parseFloat(ce.hours||0),0),eo=me?Bt.reduce((K,ce)=>K+(ce.overtime_hours||0),0):[...Qi,...Ji,...en].reduce((K,ce)=>K+parseFloat(ce.overtimeHours||0),0),mu=me?Object.values(jt||{}).flat().filter(K=>K&&K.name&&K.name.trim()):[...R.filter(K=>K&&K.name&&K.name.trim()),...ee.filter(K=>K&&K.name&&K.name.trim()),...se.filter(K=>K&&K.name&&K.name.trim())],Xo=mu.length-ar,fl=()=>{if(c===1)return ge.trim().length>0;if(c===2){if(me)return cl().length>0;const K=R.some(le=>le&&le.name&&le.name.trim()&&(parseFloat(le.hours)>0||parseFloat(le.overtimeHours)>0)),ce=ee.some(le=>le&&le.name&&le.name.trim()&&(parseFloat(le.hours)>0||parseFloat(le.overtimeHours)>0)),he=se.some(le=>le&&le.name&&le.name.trim()&&(parseFloat(le.hours)>0||parseFloat(le.overtimeHours)>0));return K||ce||he}return!0},Qo=(()=>{const K=[];return c===1&&!ge.trim()&&K.push(Ce==="en"?"Description recommended":"Descripcion recomendada"),c===2&&Xo>0&&K.push(Ce==="en"?`${Xo} worker(s) have no hours entered`:`${Xo} trabajador(es) sin horas`),c===4&&!k.trim()&&K.push(Ce==="en"?"Name required to submit":"Nombre requerido"),K})(),$n=()=>{c<4&&u(c+1)},fi=()=>{c>1?u(c-1):i()},to=async()=>{if(!k.trim()){s("Enter your name to submit","error");return}let K=[];if(me){if(K=cl(),K.length===0){s("Add at least one worker","error");return}}else{const ce=R.filter(ne=>ne&&ne.name&&ne.name.trim()&&(parseFloat(ne.hours)>0||parseFloat(ne.overtimeHours)>0)),he=ee.filter(ne=>ne&&ne.name&&ne.name.trim()&&(parseFloat(ne.hours)>0||parseFloat(ne.overtimeHours)>0)),le=se.filter(ne=>ne&&ne.name&&ne.name.trim()&&(parseFloat(ne.hours)>0||parseFloat(ne.overtimeHours)>0));if(ce.length===0&&he.length===0&&le.length===0){s("Add at least one worker","error");return}K=[...ce.map(ne=>({name:ne.name.trim(),hours:parseFloat(ne.hours)||0,overtime_hours:parseFloat(ne.overtimeHours)||0,time_started:ne.timeStarted||null,time_ended:ne.timeEnded||null,role:ne.role})),...he.map(ne=>({name:ne.name.trim(),hours:parseFloat(ne.hours)||0,overtime_hours:parseFloat(ne.overtimeHours)||0,time_started:ne.timeStarted||null,time_ended:ne.timeEnded||null,role:"Operator"})),...le.map(ne=>({name:ne.name.trim(),hours:parseFloat(ne.hours)||0,overtime_hours:parseFloat(ne.overtimeHours)||0,time_started:ne.timeStarted||null,time_ended:ne.timeEnded||null,role:"Laborer"}))]}Q(!0),we("Creating ticket...");try{const ce=await _e.createTMTicket({project_id:e.id,work_date:m,ce_pco_number:C.trim()||null,assigned_cor_id:M||null,notes:ge.trim()||null,photos:[],created_by_name:k.trim()});if(!ce||!ce.id)throw new Error("Failed to create ticket - no ticket ID returned");let he=[];const le=Le.filter(ne=>ne.status==="pending");if(le.length>0){we(`Compressing ${le.length} photo${le.length>1?"s":""}...`),le.forEach(at=>Bn(at.id,{status:"compressing"}));const ne=await Promise.all(le.map(async at=>{try{const ir=await YS(at.file);return{...at,file:ir}}catch(ir){return console.warn(`Failed to compress photo ${at.name}, using original:`,ir),at}}));we(`Uploading ${le.length} photo${le.length>1?"s":""}...`),le.forEach(at=>Bn(at.id,{status:"uploading"}));let je=0,$e=0;const Fe=ne.map(async at=>{try{const ir=await _e.uploadPhoto(t,e.id,ce.id,at.file);return je++,we(`Uploading ${je}/${le.length} photos...`),Bn(at.id,{status:"confirmed",uploadedUrl:ir,attempts:(at.attempts||0)+1}),{id:at.id,url:ir}}catch(ir){return console.error(`Photo ${at.name} upload failed:`,ir),$e++,Bn(at.id,{status:"failed",error:ir.message||"Upload failed",attempts:(at.attempts||0)+1}),{id:at.id,url:null,error:ir.message}}});he=(await Promise.all(Fe)).filter(at=>at.url!==null).map(at=>at.url),$e>0&&he.length>0?s(`${he.length}/${le.length} photos uploaded. ${$e} failed - can retry later.`,"warning"):$e>0&&he.length===0&&s(`All ${$e} photos failed to upload - can retry after submission.`,"error")}if(he.length>0&&(we("Saving photos..."),await _e.updateTMTicketPhotos(ce.id,he)),we("Saving workers..."),await _e.addTMWorkers(ce.id,K),J.length>0&&(we("Saving materials..."),await _e.addTMItems(ce.id,J.map(ne=>({material_equipment_id:ne.material_equipment_id,custom_name:ne.custom_name||null,custom_category:ne.custom_category||null,quantity:ne.quantity})))),M){we("Importing to COR...");try{await _e.importTicketDataToCOR(ce.id,M,t,e.work_type||"demolition",e.job_type||"standard")}catch(ne){console.error("Error importing to COR:",ne);try{await _e.markImportFailed(ce.id,M,ne?.message||"Import failed")}catch(je){console.error("Error marking import failed:",je)}s("T&M saved. COR data sync failed - retry from ticket list.","warning")}}Le.forEach(ne=>{ne.previewUrl&&URL.revokeObjectURL(ne.previewUrl)}),v(ce),s("T&M submitted!","success"),u(5)}catch(ce){console.error("Error submitting T&M:",ce),s("Error submitting T&M","error")}finally{Q(!1),we("")}};return f.jsxs("div",{className:"tm-wizard",children:[f.jsxs("div",{className:"tm-wizard-header",children:[c<5?f.jsx("button",{className:"tm-back-btn",onClick:fi,children:""}):f.jsx("div",{className:"tm-success-check",children:f.jsx(Wn,{size:24})}),f.jsxs("h2",{children:[c===1&&Ie("workInfo"),c===2&&Ie("crewHours"),c===3&&Ie("materialsEquipment"),c===4&&Ie("review"),c===5&&(Ce==="en"?"Submitted":"Enviado")]}),f.jsxs("div",{className:"tm-header-right",children:[c<4&&f.jsxs("button",{className:"tm-lang-toggle",onClick:()=>Ct(Ce==="en"?"es":"en"),title:Ce==="en"?"Cambiar a Espanol":"Switch to English",children:[f.jsx(tq,{size:16}),Ce==="en"?"ES":"EN"]}),c<5&&f.jsxs("div",{className:"tm-step-dots",children:[f.jsx("span",{className:`tm-dot ${c>=1?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=2?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=3?"active":""}`}),f.jsx("span",{className:`tm-dot ${c>=4?"active":""}`})]})]})]}),c===1&&f.jsx(BL,{project:e,workDate:m,setWorkDate:h,cePcoNumber:C,setCePcoNumber:A,notes:ge,setNotes:Pe,t:Ie,lang:Ce}),c===2&&f.jsx(FL,{supervision:R,operators:ee,laborers:se,dynamicWorkers:jt,activeLaborClassIds:Pr,setActiveLaborClassIds:Ar,laborCategories:It,laborClasses:At,hasCustomLaborClasses:me,loadingLaborClasses:$r,todaysCrew:ie,showBatchHoursModal:U,setShowBatchHoursModal:ue,batchHours:ve,setBatchHours:q,loadingPreviousCrew:ye,namedWorkers:mu,workersNeedingHours:Xo,totalRegHours:ra,totalOTHours:eo,onLoadPreviousCrew:vt,onApplyBatchHours:Jr,onApplyInlinePreset:Mr,onAddCrewWorker:du,onActivateLaborClass:be,onDeactivateLaborClass:Un,addSupervision:Ut,updateSupervision:xt,removeSupervision:_n,addOperator:ui,updateOperator:va,removeOperator:xn,addLaborer:li,updateLaborer:Zi,removeLaborer:ci,addDynamicWorker:di,updateDynamicWorker:ga,removeDynamicWorker:ll,getInactiveLaborClasses:ya,t:Ie,lang:Ce,onShowToast:s}),c===3&&f.jsx(KL,{companyId:t,items:J,setItems:$,t:Ie,lang:Ce,onShowToast:s}),(c===4||c===5)&&f.jsx(WL,{step:c,setStep:u,project:e,companyId:t,workDate:m,cePcoNumber:C,notes:ge,photos:Le,onPhotoAdd:fu,onRemovePhoto:dl,maxPhotos:r,selectedCorId:M,setSelectedCorId:L,assignableCORs:X,items:J,hasCustomLaborClasses:me,validDynamicWorkersList:Bt,validSupervision:Qi,validOperators:Ji,validLaborers:en,totalWorkers:ar,totalRegHours:ra,totalOTHours:eo,submittedByName:k,setSubmittedByName:D,submittedTicket:p,submitting:ze,submitProgress:Ee,clientSigned:S,setClientSigned:O,showSignatureLinkModal:_,setShowSignatureLinkModal:x,showOnSiteSignature:w,setShowOnSiteSignature:j,onRetryPhotoUpload:ul,t:Ie,lang:Ce,onShowToast:s}),c<5&&f.jsxs("div",{className:"tm-wizard-footer",children:[Qo.length>0&&f.jsxs("div",{className:"tm-validation-summary",children:[f.jsx(wb,{size:16}),f.jsx("span",{children:Qo[0]})]}),c===1&&f.jsx("button",{className:"tm-big-btn primary",onClick:$n,disabled:!fl(),children:Ie("nextCrew")}),c===2&&f.jsxs("button",{className:"tm-big-btn primary",onClick:$n,disabled:!fl(),children:[Ie("nextMaterials")," (",ar," ",Ie(ar===1?"worker":"workers_plural"),", ",ra+eo," hrs)"]}),c===3&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{className:"tm-big-btn primary",onClick:$n,children:[Ce==="en"?"Review & Submit":"Revisar y Enviar"," (",J.length," ",J.length===1?Ie("item"):Ie("items_plural"),")"]}),f.jsx("button",{className:"tm-skip-btn",onClick:$n,children:Ie("skipNoMaterials")})]}),c===4&&f.jsx("button",{className:`tm-big-btn submit ${ze?"submitting":""} ${k.trim()?"ready":"needs-name"}`,onClick:to,disabled:ze||!k.trim(),children:ze?f.jsxs(f.Fragment,{children:[f.jsx($s,{size:20,className:"tm-spinner"}),f.jsx("span",{className:"tm-submit-text",children:Ee||Ie("submitting")})]}):k.trim()?f.jsxs(f.Fragment,{children:[f.jsx($i,{size:20}),f.jsx("span",{children:Ie("submitTM")})]}):f.jsxs(f.Fragment,{children:[f.jsx(bc,{size:18}),f.jsx("span",{children:Ce==="en"?"Enter name to submit":"Ingrese nombre"})]})})]}),c===5&&f.jsxs("div",{className:"tm-wizard-footer",children:[f.jsxs("button",{className:"tm-big-btn primary",onClick:n,children:[f.jsx($i,{size:20}),f.jsx("span",{children:Ce==="en"?"Done":"Listo"})]}),f.jsx("button",{className:"tm-skip-btn",onClick:n,children:Ce==="en"?"Skip signature for now":"Saltar firma por ahora"})]})]})}function ZL({project:e,companyId:t,onShowToast:r}){const[n,i]=y.useState([]),[s,c]=y.useState(!0),[u,m]=y.useState(!1),[h,p]=y.useState(!1),[v,_]=y.useState({name:"",role:"",labor_class_id:null}),[x,w]=y.useState([]),[j,S]=y.useState(!0),[O,C]=y.useState([]),[A,k]=y.useState([]),[D,M]=y.useState(!0),L=["Foreman","Laborer","Supervisor","Operator"],X=y.useCallback(async()=>{try{const H=await _e.getCrewCheckin(e.id);H?.workers&&i(H.workers)}catch(H){console.error("Error loading crew:",H),r?.("Error loading today's crew","error")}finally{c(!1)}},[e?.id,r]),re=y.useCallback(async()=>{try{const H=await _e.getRecentWorkers(e.id,30);w(H)}catch(H){console.error("Error loading recent workers:",H)}finally{S(!1)}},[e?.id]),ae=y.useCallback(async()=>{try{const H=await _e.getLaborClassesForField(t);C(H.categories||[]),k(H.classes||[]),H.classes&&H.classes.length>0&&_(se=>({...se,role:H.classes[0].name,labor_class_id:H.classes[0].id}))}catch(H){console.error("Error loading labor classes:",H),r?.("Using default roles - custom labor classes unavailable","info")}finally{M(!1)}},[t,r]);y.useEffect(()=>{e?.id&&(X(),re(),t?ae():M(!1))},[e?.id,t,X,re,ae]);const G=H=>{const se=A.find(Se=>Se.id===H);_(se?{...v,role:se.name,labor_class_id:se.id}:{...v,role:H,labor_class_id:null})},U=async()=>{if(!v.name.trim()){r("Enter worker name","error");return}if(!v.role){r("Select a role","error");return}if(n.find(H=>H.name.toLowerCase()===v.name.trim().toLowerCase())){r("Worker already added","error");return}m(!0);try{const H=[...n,{name:v.name.trim(),role:v.role,labor_class_id:v.labor_class_id}];await _e.saveCrewCheckin(e.id,H),i(H),_({...v,name:""}),p(!1),r("Crew member added","success")}catch(H){console.error("Error adding worker:",H),r("Error adding crew member","error")}finally{m(!1)}},ue=async H=>{m(!0);try{const se=n.filter(Se=>Se.name.toLowerCase()!==H.toLowerCase());await _e.saveCrewCheckin(e.id,se),i(se),r("Crew member removed","success")}catch(se){console.error("Error removing worker:",se),r("Error removing crew member","error")}finally{m(!1)}},ve=async H=>{if(n.find(se=>se.name.toLowerCase()===H.name.toLowerCase())){r("Already checked in","info");return}m(!0);try{const se=[...n,{name:H.name,role:H.role,labor_class_id:H.labor_class_id}];await _e.saveCrewCheckin(e.id,se),i(se),r(`${H.name} checked in`,"success")}catch(se){console.error("Error adding worker:",se),r("Error adding crew member","error")}finally{m(!1)}},q=x.filter(H=>!n.find(se=>se.name.toLowerCase()===H.name.toLowerCase())),R=new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"}),I=()=>{const H={};O.forEach(Se=>{H[Se.id]={name:Se.name,classes:A.filter(J=>J.category_id===Se.id)}});const se=A.filter(Se=>!Se.category_id);return se.length>0&&(H.uncategorized={name:"Other",classes:se}),H},ee=A.length>0;return s||D?f.jsxs("div",{className:"crew-checkin",children:[f.jsxs("div",{className:"crew-header",children:[f.jsxs("h3",{children:[f.jsx(To,{size:18,className:"inline-icon"})," Today's Crew"]}),f.jsx("span",{className:"crew-date",children:R})]}),f.jsx("div",{className:"crew-loading",children:"Loading..."})]}):f.jsxs("div",{className:"crew-checkin",children:[f.jsxs("div",{className:"crew-header",children:[f.jsxs("h3",{children:[f.jsx(To,{size:18,className:"inline-icon"})," Today's Crew"]}),f.jsx("span",{className:"crew-date",children:R})]}),n.length===0?f.jsxs("div",{className:"crew-empty",children:[f.jsx("p",{children:"No crew checked in yet"}),f.jsx("p",{className:"crew-empty-hint",children:"Add your crew for the day"})]}):f.jsx("div",{className:"crew-list",children:n.map(H=>f.jsxs("div",{className:"crew-member",children:[f.jsxs("div",{className:"crew-member-info",children:[f.jsx("span",{className:"crew-member-name",children:H.name}),f.jsx("span",{className:`crew-member-role ${(H.role||"laborer").toLowerCase().replace(/\s+/g,"-")}`,children:H.role})]}),f.jsx("button",{className:"crew-remove-btn",onClick:()=>ue(H.name),disabled:u,children:""})]},H.name))}),!j&&q.length>0&&f.jsxs("div",{className:"crew-quick-add",children:[f.jsx("div",{className:"crew-quick-add-header",children:f.jsx("span",{children:"Tap to add"})}),f.jsx("div",{className:"crew-quick-add-grid",children:q.map(H=>f.jsxs("button",{className:"crew-quick-add-btn",onClick:()=>ve(H),disabled:u,children:[f.jsx("span",{className:"crew-quick-add-name",children:H.name}),f.jsx("span",{className:"crew-quick-add-role",children:H.role})]},H.name))})]}),h?f.jsxs("div",{className:"crew-add-form",children:[f.jsx("input",{type:"text",value:v.name,onChange:H=>_({...v,name:H.target.value}),placeholder:"Name",autoFocus:!0}),f.jsx("select",{value:v.labor_class_id||v.role,onChange:H=>G(H.target.value),children:ee?Object.entries(I()).map(([H,se])=>f.jsx("optgroup",{label:se.name,children:se.classes.map(Se=>f.jsx("option",{value:Se.id,children:Se.name},Se.id))},H)):L.map(H=>f.jsx("option",{value:H,children:H},H))}),f.jsxs("div",{className:"crew-add-buttons",children:[f.jsx("button",{className:"crew-add-confirm",onClick:U,disabled:u,children:u?"...":"Add"}),f.jsx("button",{className:"crew-add-cancel",onClick:()=>{p(!1),_({name:"",role:A[0]?.name||"Laborer",labor_class_id:A[0]?.id||null})},children:"Cancel"})]})]}):f.jsxs("button",{className:"crew-add-btn",onClick:()=>p(!0),children:[f.jsx(HA,{size:18}),f.jsx("span",{children:"Add New Person"})]}),f.jsxs("div",{className:"crew-count",children:[n.length," ",n.length===1?"person":"people"," on site"]})]})}function QL({project:e,onShowToast:t,onClose:r}){const[n,i]=y.useState(!0),[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(""),[v,_]=y.useState("");y.useEffect(()=>{e?.id&&x()},[e?.id]);const x=async()=>{try{const O=await _e.getDailyReport(e.id);if(O)m(O),p(O.field_notes||""),_(O.issues||"");else{const C=await _e.compileDailyReport(e.id);m({...C,status:"draft"})}}catch(O){console.error("Error loading report:",O),t("Error loading report","error")}finally{i(!1)}},w=async()=>{if(!P){t("Demo Mode: Report saved locally only - won't reach office","info"),r();return}c(!0);try{await _e.saveDailyReport(e.id,{field_notes:h,issues:v}),await _e.submitDailyReport(e.id,"Field")?(t("Daily report submitted!","success"),r()):t("Report not sent - check connection","error")}catch(O){console.error("Error submitting report:",O),t("Error submitting report","error")}finally{c(!1)}},j=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});if(n)return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsx("h2",{children:"Daily Report"})]}),f.jsx("div",{className:"daily-report-loading",children:"Compiling report..."})]});if(!u)return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsx("h2",{children:"Daily Report"})]}),f.jsxs("div",{className:"daily-report-error",children:[f.jsx("p",{children:"Unable to load report data."}),f.jsx("button",{className:"btn btn-secondary",onClick:x,children:"Retry"})]})]});const S=u.status==="submitted";return f.jsxs("div",{className:"daily-report",children:[f.jsxs("div",{className:"daily-report-header",children:[f.jsx("button",{className:"back-btn-simple",onClick:r,children:""}),f.jsxs("div",{children:[f.jsx("h2",{children:"Daily Report"}),f.jsx("p",{className:"daily-report-date",children:j})]})]}),S&&f.jsxs("div",{className:"daily-report-submitted-banner",children:[" Submitted ",new Date(u.submitted_at).toLocaleTimeString()]}),f.jsxs("div",{className:"daily-report-content",children:[f.jsxs("div",{className:"daily-report-summary",children:[f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.crew_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"Crew on Site"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.tasks_completed||0}),f.jsx("div",{className:"daily-report-card-label",children:"Tasks Done"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.tm_tickets_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"T&M Tickets"})]}),f.jsxs("div",{className:"daily-report-card",children:[f.jsx("div",{className:"daily-report-card-value",children:u.photos_count||0}),f.jsx("div",{className:"daily-report-card-label",children:"Photos"})]})]}),u.crew_list?.length>0&&f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(To,{size:18,className:"inline-icon"})," Crew"]}),f.jsx("div",{className:"daily-report-crew",children:u.crew_list.map((O,C)=>f.jsxs("div",{className:"daily-report-crew-item",children:[f.jsx("span",{children:O.name}),f.jsx("span",{className:"daily-report-crew-role",children:O.role})]},C))})]}),u.completed_tasks?.length>0&&f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(rq,{size:18,className:"inline-icon"})," Completed Today"]}),f.jsx("ul",{className:"daily-report-tasks",children:u.completed_tasks.map((O,C)=>f.jsxs("li",{children:[O.name,O.group&&f.jsx("span",{className:"daily-report-task-group",children:O.group})]},C))})]}),f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(Ho,{size:18,className:"inline-icon"})," Notes"]}),f.jsx("textarea",{value:h,onChange:O=>p(O.target.value),placeholder:"Any notes about today's work...",rows:3,disabled:S})]}),f.jsxs("div",{className:"daily-report-section",children:[f.jsxs("h3",{children:[f.jsx(om,{size:18,className:"inline-icon"})," Issues / Concerns"]}),f.jsx("textarea",{value:v,onChange:O=>_(O.target.value),placeholder:"Any problems, delays, or concerns...",rows:3,disabled:S})]})]}),!S&&f.jsxs("div",{className:"daily-report-footer",children:[f.jsx("button",{className:"btn btn-primary daily-report-submit",onClick:w,disabled:s,children:s?"Submitting...":f.jsxs(f.Fragment,{children:[f.jsx(nq,{size:16,className:"inline-icon"})," Submit Report"]})}),f.jsx("p",{className:"daily-report-hint",children:"This will be sent to the office"})]})]})}function JL({project:e,companyId:t,user:r,onClose:n,onReportCreated:i}){const[s,c]=y.useState(!1),[u,m]=y.useState(null),[h,p]=y.useState(1),[v,_]=y.useState(new Date().toISOString().split("T")[0]),[x,w]=y.useState(new Date().toTimeString().split(" ")[0].substring(0,5)),[j,S]=y.useState(""),[O,C]=y.useState(""),[A,k]=y.useState("minor"),[D,M]=y.useState(""),[L,X]=y.useState(""),[re,ae]=y.useState(""),[G,U]=y.useState(""),[ue,ve]=y.useState(""),[q,R]=y.useState(""),[I,ee]=y.useState(""),[H,se]=y.useState(r?.name||""),[Se,J]=y.useState(""),[$,ge]=y.useState(""),[Pe,Le]=y.useState(r?.email||""),[pe,ze]=y.useState([]),[Q,Ee]=y.useState(""),[we,ie]=y.useState(""),[Ue,ye]=y.useState(""),[ke,Ce]=y.useState(""),[Ct,Ie]=y.useState(!1),[It,_t]=y.useState(""),[At,Cr]=y.useState(""),[jt,Ye]=y.useState(!1),[$r,bn]=y.useState(""),[Pr,Ar]=y.useState(""),[me,st]=y.useState(""),[Jr,Mr]=y.useState(""),[Rr,vt]=y.useState(!1),[Ut,xt]=y.useState(!1),[_n,li]=y.useState(0),[Zi,ci]=y.useState(0),ui=()=>{if(!Q.trim()){m({type:"error",message:"Please enter witness name"});return}const be={name:Q,phone:we,email:Ue,testimony:ke};ze([...pe,be]),Ee(""),ie(""),ye(""),Ce(""),m({type:"success",message:"Witness added"})},va=be=>{ze(pe.filter((Un,ya)=>ya!==be))},xn=be=>{switch(be){case 1:if(!j.trim()||!O.trim())return m({type:"error",message:"Please fill in all incident details"}),!1;break;case 2:if(!L.trim()||!q.trim())return m({type:"error",message:"Please fill in employee name and job title"}),!1;break;case 3:if(!H.trim()||!Se.trim())return m({type:"error",message:"Please fill in supervisor name and title"}),!1;break}return!0},di=()=>{xn(h)&&p(h+1)},ga=()=>{p(h-1)},ll=async()=>{if(xn(h)){if(!P){m({type:"info",message:"Demo Mode: Report saved locally only - won't reach office"}),setTimeout(()=>{n()},1500);return}c(!0);try{const be={project_id:e.id,company_id:t,incident_date:v,incident_time:x,incident_location:j,incident_description:O,injury_type:A,body_part_affected:D||null,employee_name:L,employee_phone:re||null,employee_email:G||null,employee_address:ue||null,employee_job_title:q,employee_hire_date:I||null,medical_treatment_required:Ct,medical_facility_name:It||null,medical_facility_address:At||null,hospitalized:jt,reported_by_name:H,reported_by_title:Se,reported_by_phone:$||null,reported_by_email:Pe||null,witnesses:pe,immediate_actions_taken:$r||null,corrective_actions_planned:Pr||null,safety_equipment_used:me||null,safety_equipment_failed:Jr||null,osha_recordable:Rr,workers_comp_claim:Ut,days_away_from_work:parseInt(_n)||0,restricted_work_days:parseInt(Zi)||0,status:"reported",created_by:r?.id},Un=await _e.createInjuryReport(be);m({type:"success",message:"Injury report submitted successfully"}),i&&i(Un),setTimeout(()=>{n()},1500)}catch(be){console.error("Error submitting injury report:",be),m({type:"error",message:"Failed to submit injury report"})}finally{c(!1)}}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"modal-overlay",onClick:n,children:f.jsxs("div",{className:"modal-content injury-report-modal",onClick:be=>be.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Workplace Injury/Incident Report"}),f.jsx("button",{className:"close-btn",onClick:n,children:""})]}),f.jsxs("div",{className:"progress-steps",children:[f.jsx("div",{className:`step ${h>=1?"active":""}`,children:"1. Incident"}),f.jsx("div",{className:`step ${h>=2?"active":""}`,children:"2. Employee"}),f.jsx("div",{className:`step ${h>=3?"active":""}`,children:"3. Supervisor"}),f.jsx("div",{className:`step ${h>=4?"active":""}`,children:"4. Witnesses"}),f.jsx("div",{className:`step ${h>=5?"active":""}`,children:"5. Medical & Safety"})]}),f.jsxs("div",{className:"modal-body",children:[h===1&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Incident Details"}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Date of Incident *"}),f.jsx("input",{type:"date",value:v,onChange:be=>_(be.target.value),max:new Date().toISOString().split("T")[0]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Time of Incident *"}),f.jsx("input",{type:"time",value:x,onChange:be=>w(be.target.value)})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Location on Site *"}),f.jsx("input",{type:"text",value:j,onChange:be=>S(be.target.value),placeholder:"e.g., Floor 2, near elevator shaft"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Incident Description *"}),f.jsx("textarea",{value:O,onChange:be=>C(be.target.value),rows:4,placeholder:"Describe what happened in detail..."})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Injury Type *"}),f.jsxs("select",{value:A,onChange:be=>k(be.target.value),children:[f.jsx("option",{value:"minor",children:"Minor Injury"}),f.jsx("option",{value:"serious",children:"Serious Injury"}),f.jsx("option",{value:"critical",children:"Critical Injury"}),f.jsx("option",{value:"near_miss",children:"Near Miss (No Injury)"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Body Part Affected"}),f.jsx("input",{type:"text",value:D,onChange:be=>M(be.target.value),placeholder:"e.g., Left hand, lower back"})]})]})]}),h===2&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Injured Employee Information"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Full Name *"}),f.jsx("input",{type:"text",value:L,onChange:be=>X(be.target.value),placeholder:"First and last name"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Phone Number"}),f.jsx("input",{type:"tel",value:re,onChange:be=>ae(be.target.value),placeholder:"(555) 123-4567"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email Address"}),f.jsx("input",{type:"email",value:G,onChange:be=>U(be.target.value),placeholder:"email@example.com"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Home Address"}),f.jsx("input",{type:"text",value:ue,onChange:be=>ve(be.target.value),placeholder:"Street address, city, state, zip"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Job Title *"}),f.jsx("input",{type:"text",value:q,onChange:be=>R(be.target.value),placeholder:"e.g., Carpenter, Electrician"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Hire Date"}),f.jsx("input",{type:"date",value:I,onChange:be=>ee(be.target.value)})]})]})]}),h===3&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Foreman/Supervisor Making Report"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Name *"}),f.jsx("input",{type:"text",value:H,onChange:be=>se(be.target.value),placeholder:"Full name"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Title *"}),f.jsx("input",{type:"text",value:Se,onChange:be=>J(be.target.value),placeholder:"e.g., Site Foreman, Project Manager"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Phone Number"}),f.jsx("input",{type:"tel",value:$,onChange:be=>ge(be.target.value),placeholder:"(555) 123-4567"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Your Email Address"}),f.jsx("input",{type:"email",value:Pe,onChange:be=>Le(be.target.value),placeholder:"email@example.com"})]})]}),h===4&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Witness Testimonies (Optional)"}),pe.length>0&&f.jsx("div",{className:"witnesses-list",children:pe.map((be,Un)=>f.jsxs("div",{className:"witness-item",children:[f.jsxs("div",{className:"witness-info",children:[f.jsx("strong",{children:be.name}),be.phone&&f.jsxs("span",{children:["  ",be.phone]}),be.testimony&&f.jsxs("p",{className:"witness-testimony",children:['"',be.testimony,'"']})]}),f.jsx("button",{className:"btn-danger btn-small",onClick:()=>va(Un),children:"Remove"})]},Un))}),f.jsxs("div",{className:"add-witness-form",children:[f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Witness Name"}),f.jsx("input",{type:"text",value:Q,onChange:be=>Ee(be.target.value),placeholder:"Full name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Phone Number"}),f.jsx("input",{type:"tel",value:we,onChange:be=>ie(be.target.value),placeholder:"(555) 123-4567"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email Address"}),f.jsx("input",{type:"email",value:Ue,onChange:be=>ye(be.target.value),placeholder:"email@example.com"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Witness Testimony"}),f.jsx("textarea",{value:ke,onChange:be=>Ce(be.target.value),rows:3,placeholder:"What did the witness see or hear?"})]}),f.jsx("button",{className:"btn-secondary",onClick:ui,children:"+ Add Witness"})]})]}),h===5&&f.jsxs("div",{className:"form-step",children:[f.jsx("h3",{children:"Medical Treatment & Safety"}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:Ct,onChange:be=>Ie(be.target.checked)}),"Medical treatment required"]})}),Ct&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Medical Facility Name"}),f.jsx("input",{type:"text",value:It,onChange:be=>_t(be.target.value),placeholder:"Hospital or clinic name"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Medical Facility Address"}),f.jsx("input",{type:"text",value:At,onChange:be=>Cr(be.target.value),placeholder:"Street address"})]}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:jt,onChange:be=>Ye(be.target.checked)}),"Employee was hospitalized"]})})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Immediate Actions Taken"}),f.jsx("textarea",{value:$r,onChange:be=>bn(be.target.value),rows:2,placeholder:"What was done immediately after the incident?"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Corrective Actions Planned"}),f.jsx("textarea",{value:Pr,onChange:be=>Ar(be.target.value),rows:2,placeholder:"What will be done to prevent this in the future?"})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Safety Equipment Used"}),f.jsx("input",{type:"text",value:me,onChange:be=>st(be.target.value),placeholder:"e.g., Hard hat, gloves, harness"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Safety Equipment Failed"}),f.jsx("input",{type:"text",value:Jr,onChange:be=>Mr(be.target.value),placeholder:"Equipment that failed, if any"})]})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Days Away From Work"}),f.jsx("input",{type:"number",min:"0",value:_n,onChange:be=>li(be.target.value)})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Restricted Work Days"}),f.jsx("input",{type:"number",min:"0",value:Zi,onChange:be=>ci(be.target.value)})]})]}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:Rr,onChange:be=>vt(be.target.checked)}),"OSHA Recordable Incident"]})}),f.jsx("div",{className:"form-group checkbox-group",children:f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:Ut,onChange:be=>xt(be.target.checked)}),"Workers' Compensation Claim Filed"]})})]})]}),f.jsx("div",{className:"modal-footer",children:f.jsxs("div",{className:"form-actions",children:[h>1&&f.jsx("button",{className:"btn-secondary",onClick:ga,children:" Back"}),f.jsx("button",{className:"btn-secondary",onClick:n,children:"Cancel"}),h<5?f.jsx("button",{className:"btn-primary",onClick:di,children:"Next "}):f.jsx("button",{className:"btn-primary",onClick:ll,disabled:s,children:s?"Submitting...":"Submit Report"})]})})]})}),u&&f.jsx(NN,{message:u.message,type:u.type,onClose:()=>m(null)}),f.jsx("style",{children:`
        .injury-report-modal {
          max-width: 800px;
          max-height: 90vh;
          overflow-y: auto;
        }

        .progress-steps {
          display: flex;
          justify-content: space-between;
          padding: 1rem 1.5rem;
          border-bottom: 1px solid var(--border-color);
          background-color: var(--bg-elevated);
          overflow-x: auto;
        }

        .progress-steps .step {
          font-size: 0.875rem;
          color: var(--text-muted);
          font-weight: 500;
          white-space: nowrap;
          padding: 0.5rem;
        }

        .progress-steps .step.active {
          color: var(--accent-primary);
          font-weight: 600;
        }

        .form-step h3 {
          margin-top: 0;
          margin-bottom: 1.5rem;
          color: var(--text-primary);
          font-size: 1.25rem;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1rem;
        }

        .form-group {
          margin-bottom: 1rem;
        }

        .form-group label {
          display: block;
          margin-bottom: 0.5rem;
          font-weight: 500;
          color: var(--text-secondary);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
          width: 100%;
          padding: 0.5rem;
          border: 1px solid var(--border-color);
          border-radius: 4px;
          font-size: 1rem;
          background: var(--bg-card);
          color: var(--text-primary);
        }

        .form-group textarea {
          resize: vertical;
        }

        .checkbox-group label {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-weight: normal;
          cursor: pointer;
        }

        .checkbox-group input[type="checkbox"] {
          width: auto;
          margin: 0;
        }

        .witnesses-list {
          margin-bottom: 1.5rem;
        }

        .witness-item {
          border: 1px solid var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          margin-bottom: 0.5rem;
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
        }

        .witness-info {
          flex: 1;
          color: var(--text-primary);
        }

        .witness-testimony {
          margin-top: 0.5rem;
          color: var(--text-secondary);
          font-style: italic;
          font-size: 0.875rem;
        }

        .add-witness-form {
          border: 2px dashed var(--border-color);
          border-radius: 6px;
          padding: 1rem;
          background-color: var(--bg-elevated);
        }

        .modal-footer {
          border-top: 1px solid var(--border-color);
          padding: 1rem 1.5rem;
        }

        .form-actions {
          display: flex;
          justify-content: space-between;
          gap: 0.5rem;
        }

        .btn-primary,
        .btn-secondary,
        .btn-danger {
          padding: 0.5rem 1rem;
          border-radius: 6px;
          font-weight: 500;
          cursor: pointer;
          border: none;
        }

        .btn-primary {
          background-color: var(--primary-color, #3b82f6);
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          opacity: 0.9;
        }

        .btn-primary:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        .btn-secondary {
          background-color: var(--bg-elevated);
          color: var(--text-primary);
          border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
          background-color: var(--bg-tertiary);
        }

        .btn-danger {
          background-color: #ef4444;
          color: white;
        }

        .btn-danger:hover {
          background-color: #dc2626;
        }

        .btn-small {
          padding: 0.25rem 0.75rem;
          font-size: 0.875rem;
        }

        @media (max-width: 768px) {
          .injury-report-modal {
            max-width: 100%;
            height: 100vh;
            max-height: 100vh;
            border-radius: 0;
          }

          .form-row {
            grid-template-columns: 1fr;
          }

          .progress-steps .step {
            font-size: 0.75rem;
            padding: 0.25rem;
          }
        }
      `})]})}const nf=[{value:"concrete",label:"Concrete",icon:""},{value:"trash",label:"Trash",icon:""},{value:"metals",label:"Metals",icon:""},{value:"hazardous_waste",label:"Hazardous",icon:""}],e3=e=>nf.find(t=>t.value===e)||{label:e,icon:""};function t3({project:e,user:t=null,date:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState([]),[m,h]=y.useState(!0),[p,v]=y.useState(!1),[_,x]=y.useState(!1),[w,j]=y.useState(!1),[S,O]=y.useState({type:"concrete",count:1}),C=new Date(r).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});y.useEffect(()=>{A(),k()},[e.id,r]);const A=async()=>{try{h(!0);const U=await _e.getDisposalLoads(e.id,r);s(U||[])}catch(U){console.error("Error loading disposal loads:",U)}finally{h(!1)}},k=async()=>{try{const ue=(await _e.getDisposalLoadsHistory(e.id,14)||[]).filter(q=>q.load_date!==r).reduce((q,R)=>(q[R.load_date]||(q[R.load_date]=[]),q[R.load_date].push(R),q),{}),ve=Object.entries(ue).map(([q,R])=>({date:q,loads:R,totalLoads:R.reduce((I,ee)=>I+ee.load_count,0)})).sort((q,R)=>new Date(R.date)-new Date(q.date));u(ve)}catch(U){console.error("Error loading disposal history:",U)}},D=async()=>{if(!(S.count<1)){v(!0);try{await _e.addDisposalLoad(e.id,t?.id||null,r,S.type,S.count),await A(),O({type:"concrete",count:1}),x(!1),n?.("Disposal load added","success")}catch(U){console.error("Error adding disposal load:",U),n?.("Error adding load","error")}finally{v(!1)}}},M=async U=>{v(!0);try{await _e.deleteDisposalLoad(U),await A(),n?.("Load removed","success")}catch(ue){console.error("Error deleting disposal load:",ue),n?.("Error removing load","error")}finally{v(!1)}},L=async U=>{v(!0);try{await _e.addDisposalLoad(e.id,t?.id||null,r,U,1),await A(),n?.("Load added","success")}catch(ue){console.error("Error adding disposal load:",ue),n?.("Error adding load","error")}finally{v(!1)}},X=async U=>{v(!0);try{await _e.updateDisposalLoad(U.id,U.load_type,U.load_count+1),await A()}catch(ue){console.error("Error updating load:",ue),n?.("Error updating load","error")}finally{v(!1)}},re=async U=>{if(U.load_count<=1){await M(U.id);return}v(!0);try{await _e.updateDisposalLoad(U.id,U.load_type,U.load_count-1),await A()}catch(ue){console.error("Error updating load:",ue),n?.("Error updating load","error")}finally{v(!1)}},ae=i.reduce((U,ue)=>(U[ue.load_type]||(U[ue.load_type]={items:[],total:0}),U[ue.load_type].items.push(ue),U[ue.load_type].total+=ue.load_count,U),{}),G=i.reduce((U,ue)=>U+ue.load_count,0);return m?f.jsxs("div",{className:"disposal-load-input",children:[f.jsxs("div",{className:"disposal-header",children:[f.jsx(uf,{size:20}),f.jsx("span",{children:"Disposal Loads"})]}),f.jsx("div",{className:"disposal-loading",children:"Loading..."})]}):f.jsxs("div",{className:"disposal-load-input",children:[f.jsxs("div",{className:"disposal-header",children:[f.jsxs("div",{className:"disposal-title",children:[f.jsx(uf,{size:20}),f.jsx("span",{children:"Disposal Loads"}),G>0&&f.jsx("span",{className:"disposal-badge",children:G})]}),f.jsx("span",{className:"disposal-date",children:C})]}),f.jsx("div",{className:"disposal-quick-add",children:nf.map(U=>f.jsxs("button",{className:"quick-add-btn",onClick:()=>L(U.value),disabled:p,children:[f.jsx("span",{className:"quick-add-icon",children:U.icon}),f.jsxs("span",{className:"quick-add-label",children:["+ ",U.label]})]},U.value))}),Object.keys(ae).length>0?f.jsx("div",{className:"disposal-loads-list",children:nf.map(U=>{const ue=ae[U.value];return ue?f.jsxs("div",{className:"disposal-load-row",children:[f.jsxs("div",{className:"load-info",children:[f.jsx("span",{className:"load-icon",children:U.icon}),f.jsx("span",{className:"load-label",children:U.label})]}),f.jsxs("div",{className:"load-controls",children:[f.jsx("button",{className:"load-btn decrement",onClick:()=>re(ue.items[0]),disabled:p,children:f.jsx(bS,{size:16})}),f.jsx("span",{className:"load-count",children:ue.total}),f.jsx("button",{className:"load-btn increment",onClick:()=>X(ue.items[0]),disabled:p,children:f.jsx(Zd,{size:16})})]})]},U.value):null})}):f.jsxs("div",{className:"disposal-empty",children:[f.jsxs("p",{children:["No disposal loads recorded for ",C]}),f.jsx("p",{className:"disposal-hint",children:"Tap a button above to add loads"})]}),_&&f.jsxs("div",{className:"disposal-add-form",children:[f.jsxs("div",{className:"add-form-row",children:[f.jsx("select",{value:S.type,onChange:U=>O({...S,type:U.target.value}),className:"load-type-select",children:nf.map(U=>f.jsxs("option",{value:U.value,children:[U.icon," ",U.label]},U.value))}),f.jsxs("div",{className:"count-input-group",children:[f.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:Math.max(1,S.count-1)}),children:f.jsx(bS,{size:16})}),f.jsx("input",{type:"number",min:"1",value:S.count,onChange:U=>O({...S,count:parseInt(U.target.value)||1}),className:"count-input"}),f.jsx("button",{className:"count-btn",onClick:()=>O({...S,count:S.count+1}),children:f.jsx(Zd,{size:16})})]})]}),f.jsxs("div",{className:"add-form-actions",children:[f.jsxs("button",{className:"btn btn-secondary btn-small",onClick:()=>x(!1),children:[f.jsx(xb,{size:16})," Cancel"]}),f.jsxs("button",{className:"btn btn-primary btn-small",onClick:D,disabled:p,children:[f.jsx($i,{size:16})," Add"]})]})]}),!_&&f.jsxs("button",{className:"disposal-add-custom",onClick:()=>x(!0),children:[f.jsx(Zd,{size:16}),"Add multiple loads"]}),G>0&&f.jsxs("div",{className:"disposal-summary",children:[f.jsx("strong",{children:G})," total load",G!==1?"s":""," today"]}),c.length>0&&f.jsxs("div",{className:"disposal-history-section",children:[f.jsxs("button",{className:"disposal-history-toggle",onClick:()=>j(!w),children:[f.jsx(aq,{size:16}),f.jsxs("span",{children:["View History (",c.length," days)"]}),w?f.jsx(VA,{size:16}):f.jsx(df,{size:16})]}),w&&f.jsx("div",{className:"disposal-history-list",children:c.map(U=>{const ue=new Date(U.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),ve=U.loads.reduce((q,R)=>(q[R.load_type]||(q[R.load_type]=0),q[R.load_type]+=R.load_count,q),{});return f.jsxs("div",{className:"disposal-history-day",children:[f.jsxs("div",{className:"disposal-history-header",children:[f.jsx("span",{className:"disposal-history-date",children:ue}),f.jsxs("span",{className:"disposal-history-total",children:[U.totalLoads," load",U.totalLoads!==1?"s":""]})]}),f.jsx("div",{className:"disposal-history-types",children:Object.entries(ve).map(([q,R])=>{const I=e3(q);return f.jsxs("span",{className:"disposal-history-type",children:[I.icon," ",R," ",I.label]},q)})})]},U.date)})})]})]})}const WS={folder:hc,plans:lq,specs:Ho,permits:GA,contracts:sq,submittals:oq,rfis:iq,photos:cy,reports:WA,safety:om},Td={blue:"#3b82f6",green:"#10b981",yellow:"#f59e0b",red:"#ef4444",purple:"#8b5cf6",pink:"#ec4899",gray:"#6b7280",orange:"#f97316"},r3=e=>e?.startsWith("image/")?cq:e?.includes("spreadsheet")||e?.includes("excel")?uq:e?.includes("pdf")?Ho:dq,n3=e=>{if(!e)return"0 B";const t=["B","KB","MB","GB"];let r=e,n=0;for(;r>=1024&&n<t.length-1;)r/=1024,n++;return`${r.toFixed(r<10?1:0)} ${t[n]}`};function a3({projectId:e,onShowToast:t}){const[r,n]=y.useState([]),[i,s]=y.useState(!0),[c,u]=y.useState(null),[m,h]=y.useState([]),[p,v]=y.useState(!1),_=y.useRef(null),x=y.useCallback(async()=>{s(!0);try{const C=await _e.getProjectFolders(e);n(C)}catch(C){console.error("Error loading folders:",C),t?.("Failed to load folders","error")}finally{s(!1)}},[e,t]),w=y.useCallback(async C=>{if(C){v(!0);try{const A=await _e.getFolderDocuments(C);h(A.documents)}catch(A){console.error("Error loading documents:",A),t?.("Failed to load documents","error")}finally{v(!1)}}},[t]);y.useEffect(()=>{x();const C=_e.subscribeToDocumentFolders?.(e,()=>{x()}),A=_e.subscribeToDocuments?.(e,()=>{x(),_.current&&w(_.current.id)});return()=>{C?.unsubscribe?.(),A?.unsubscribe?.()}},[e,x,w]);const j=async C=>{u(C),_.current=C,await w(C.id)},S=async C=>{try{await _e.logDocumentAccess(C.id,"downloaded");const A=C.url||`/storage/v1/object/public/project-documents/${C.storage_path}`;window.open(A,"_blank")}catch(A){console.error("Download error:",A)}},O=()=>{u(null),_.current=null,h([])};if(i)return f.jsx("div",{className:"field-docs",children:f.jsxs("div",{className:"field-docs-loading",children:[f.jsx($s,{size:24,className:"spinner"}),f.jsx("span",{children:"Loading..."})]})});if(c){const C=WS[c.icon]||hc,A=Td[c.color]||Td.blue;return f.jsxs("div",{className:"field-docs",children:[f.jsxs("div",{className:"field-docs-header",children:[f.jsx("button",{className:"field-docs-back",onClick:O,children:f.jsx(sr,{size:20})}),f.jsxs("div",{className:"field-docs-title",children:[f.jsx("div",{className:"field-docs-title-icon",style:{backgroundColor:`${A}15`},children:f.jsx(C,{size:20,style:{color:A}})}),f.jsxs("div",{className:"field-docs-title-text",children:[f.jsx("h2",{children:c.name}),f.jsxs("span",{children:[m.length," files"]})]})]})]}),f.jsx("div",{className:"field-docs-list",children:p?f.jsxs("div",{className:"field-docs-loading",children:[f.jsx($s,{size:24,className:"spinner"}),f.jsx("span",{children:"Loading..."})]}):m.length===0?f.jsxs("div",{className:"field-docs-empty",children:[f.jsx(hc,{size:48,style:{color:A,opacity:.3}}),f.jsx("p",{children:"No documents yet"})]}):m.map(k=>{const D=r3(k.mime_type);return f.jsxs("button",{className:"field-doc-item",onClick:()=>S(k),children:[f.jsx("div",{className:"field-doc-icon",children:f.jsx(D,{size:22})}),f.jsxs("div",{className:"field-doc-info",children:[f.jsx("span",{className:"field-doc-name",children:k.name}),f.jsx("span",{className:"field-doc-size",children:n3(k.file_size_bytes)})]}),f.jsx(YA,{size:20,className:"field-doc-download"})]},k.id)})})]})}return f.jsx("div",{className:"field-docs",children:f.jsx("div",{className:"field-docs-grid",children:r.length===0?f.jsxs("div",{className:"field-docs-empty",children:[f.jsx(hc,{size:56}),f.jsx("h3",{children:"No documents"}),f.jsx("p",{children:"Documents will appear here when added"})]}):r.map(C=>{const A=WS[C.icon]||hc,k=Td[C.color]||Td.blue,D=C.document_count||0;return f.jsxs("button",{className:"field-folder-card",onClick:()=>j(C),children:[f.jsx("div",{className:"field-folder-icon",style:{backgroundColor:`${k}12`},children:f.jsx(A,{size:28,style:{color:k}})}),f.jsxs("div",{className:"field-folder-info",children:[f.jsx("span",{className:"field-folder-name",children:C.name}),f.jsxs("span",{className:"field-folder-count",children:[D," ",D===1?"file":"files"]})]}),f.jsx(yc,{size:20,className:"field-folder-arrow"})]},C.id)})})})}function kN(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=kN(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ot(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=kN(e))&&(n&&(n+=" "),n+=t);return n}var i3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Rb(e){if(typeof e!="string")return!1;var t=i3;return t.includes(e)}var o3=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],s3=new Set(o3);function DN(e){return typeof e!="string"?!1:s3.has(e)}function TN(e){return typeof e=="string"&&e.startsWith("data-")}function vn(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(DN(r)||TN(r))&&(t[r]=e[r]);return t}function Mo(e){if(e==null)return null;if(y.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return vn(t)}return typeof e=="object"&&!Array.isArray(e)?vn(e):null}function Ur(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(DN(r)||TN(r)||Rb(r))&&(t[r]=e[r]);return t}function l3(e){return e==null?null:y.isValidElement(e)?Ur(e.props):typeof e=="object"&&!Array.isArray(e)?Ur(e):null}var c3=["children","width","height","viewBox","className","style","title","desc"];function yy(){return yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yy.apply(null,arguments)}function u3(e,t){if(e==null)return{};var r,n,i=d3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function d3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PN=y.forwardRef((e,t)=>{var{children:r,width:n,height:i,viewBox:s,className:c,style:u,title:m,desc:h}=e,p=u3(e,c3),v=s||{width:n,height:i,x:0,y:0},_=ot("recharts-surface",c);return y.createElement("svg",yy({},Ur(p),{className:_,width:n,height:i,style:u,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height),ref:t}),y.createElement("title",null,m),y.createElement("desc",null,h),r)}),f3=["children","className"];function by(){return by=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},by.apply(null,arguments)}function m3(e,t){if(e==null)return{};var r,n,i=h3(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function h3(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var yr=y.forwardRef((e,t)=>{var{children:r,className:n}=e,i=m3(e,f3),s=ot("recharts-layer",n);return y.createElement("g",by({className:s},Ur(i),{ref:t}),r)}),MN=y.createContext(null),CZ=()=>y.useContext(MN);function wt(e){return function(){return e}}const RN=Math.cos,hf=Math.sin,ta=Math.sqrt,pf=Math.PI,dm=2*pf,_y=Math.PI,xy=2*_y,xo=1e-6,p3=xy-xo;function qN(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function v3(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return qN;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class g3{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?qN:v3(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,c){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+c}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let c=this._x1,u=this._y1,m=n-t,h=i-r,p=c-t,v=u-r,_=p*p+v*v;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(_>xo)if(!(Math.abs(v*m-h*p)>xo)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-c,w=i-u,j=m*m+h*h,S=x*x+w*w,O=Math.sqrt(j),C=Math.sqrt(_),A=s*Math.tan((_y-Math.acos((j+_-S)/(2*O*C)))/2),k=A/C,D=A/O;Math.abs(k-1)>xo&&this._append`L${t+k*p},${r+k*v}`,this._append`A${s},${s},0,0,${+(v*x>p*w)},${this._x1=t+D*m},${this._y1=r+D*h}`}}arc(t,r,n,i,s,c){if(t=+t,r=+r,n=+n,c=!!c,n<0)throw new Error(`negative radius: ${n}`);let u=n*Math.cos(i),m=n*Math.sin(i),h=t+u,p=r+m,v=1^c,_=c?i-s:s-i;this._x1===null?this._append`M${h},${p}`:(Math.abs(this._x1-h)>xo||Math.abs(this._y1-p)>xo)&&this._append`L${h},${p}`,n&&(_<0&&(_=_%xy+xy),_>p3?this._append`A${n},${n},0,1,${v},${t-u},${r-m}A${n},${n},0,1,${v},${this._x1=h},${this._y1=p}`:_>xo&&this._append`A${n},${n},0,${+(_>=_y)},${v},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function qb(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new g3(t)}function zb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zN(e){this._context=e}zN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fm(e){return new zN(e)}function LN(e){return e[0]}function IN(e){return e[1]}function UN(e,t){var r=wt(!0),n=null,i=fm,s=null,c=qb(u);e=typeof e=="function"?e:e===void 0?LN:wt(e),t=typeof t=="function"?t:t===void 0?IN:wt(t);function u(m){var h,p=(m=zb(m)).length,v,_=!1,x;for(n==null&&(s=i(x=c())),h=0;h<=p;++h)!(h<p&&r(v=m[h],h,m))===_&&((_=!_)?s.lineStart():s.lineEnd()),_&&s.point(+e(v,h,m),+t(v,h,m));if(x)return s=null,x+""||null}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:wt(+m),u):e},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:wt(+m),u):t},u.defined=function(m){return arguments.length?(r=typeof m=="function"?m:wt(!!m),u):r},u.curve=function(m){return arguments.length?(i=m,n!=null&&(s=i(n)),u):i},u.context=function(m){return arguments.length?(m==null?n=s=null:s=i(n=m),u):n},u}function Pd(e,t,r){var n=null,i=wt(!0),s=null,c=fm,u=null,m=qb(h);e=typeof e=="function"?e:e===void 0?LN:wt(+e),t=typeof t=="function"?t:wt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?IN:wt(+r);function h(v){var _,x,w,j=(v=zb(v)).length,S,O=!1,C,A=new Array(j),k=new Array(j);for(s==null&&(u=c(C=m())),_=0;_<=j;++_){if(!(_<j&&i(S=v[_],_,v))===O)if(O=!O)x=_,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=_-1;w>=x;--w)u.point(A[w],k[w]);u.lineEnd(),u.areaEnd()}O&&(A[_]=+e(S,_,v),k[_]=+t(S,_,v),u.point(n?+n(S,_,v):A[_],r?+r(S,_,v):k[_]))}if(C)return u=null,C+""||null}function p(){return UN().defined(i).curve(c).context(s)}return h.x=function(v){return arguments.length?(e=typeof v=="function"?v:wt(+v),n=null,h):e},h.x0=function(v){return arguments.length?(e=typeof v=="function"?v:wt(+v),h):e},h.x1=function(v){return arguments.length?(n=v==null?null:typeof v=="function"?v:wt(+v),h):n},h.y=function(v){return arguments.length?(t=typeof v=="function"?v:wt(+v),r=null,h):t},h.y0=function(v){return arguments.length?(t=typeof v=="function"?v:wt(+v),h):t},h.y1=function(v){return arguments.length?(r=v==null?null:typeof v=="function"?v:wt(+v),h):r},h.lineX0=h.lineY0=function(){return p().x(e).y(t)},h.lineY1=function(){return p().x(e).y(r)},h.lineX1=function(){return p().x(n).y(t)},h.defined=function(v){return arguments.length?(i=typeof v=="function"?v:wt(!!v),h):i},h.curve=function(v){return arguments.length?(c=v,s!=null&&(u=c(s)),h):c},h.context=function(v){return arguments.length?(v==null?s=u=null:u=c(s=v),h):s},h}class BN{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function y3(e){return new BN(e,!0)}function b3(e){return new BN(e,!1)}const Lb={draw(e,t){const r=ta(t/pf);e.moveTo(r,0),e.arc(0,0,r,0,dm)}},_3={draw(e,t){const r=ta(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},$N=ta(1/3),x3=$N*2,w3={draw(e,t){const r=ta(t/x3),n=r*$N;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},j3={draw(e,t){const r=ta(t),n=-r/2;e.rect(n,n,r,r)}},S3=.8908130915292852,HN=hf(pf/10)/hf(7*pf/10),E3=hf(dm/10)*HN,O3=-RN(dm/10)*HN,C3={draw(e,t){const r=ta(t*S3),n=E3*r,i=O3*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const c=dm*s/5,u=RN(c),m=hf(c);e.lineTo(m*r,-u*r),e.lineTo(u*n-m*i,m*n+u*i)}e.closePath()}},Sv=ta(3),A3={draw(e,t){const r=-ta(t/(Sv*3));e.moveTo(0,r*2),e.lineTo(-Sv*r,-r),e.lineTo(Sv*r,-r),e.closePath()}},Tn=-.5,Pn=ta(3)/2,wy=1/ta(12),N3=(wy/2+1)*3,k3={draw(e,t){const r=ta(t/N3),n=r/2,i=r*wy,s=n,c=r*wy+r,u=-s,m=c;e.moveTo(n,i),e.lineTo(s,c),e.lineTo(u,m),e.lineTo(Tn*n-Pn*i,Pn*n+Tn*i),e.lineTo(Tn*s-Pn*c,Pn*s+Tn*c),e.lineTo(Tn*u-Pn*m,Pn*u+Tn*m),e.lineTo(Tn*n+Pn*i,Tn*i-Pn*n),e.lineTo(Tn*s+Pn*c,Tn*c-Pn*s),e.lineTo(Tn*u+Pn*m,Tn*m-Pn*u),e.closePath()}};function D3(e,t){let r=null,n=qb(i);e=typeof e=="function"?e:wt(e||Lb),t=typeof t=="function"?t:wt(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:wt(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:wt(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function vf(){}function gf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function FN(e){this._context=e}FN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function T3(e){return new FN(e)}function KN(e){this._context=e}KN.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function P3(e){return new KN(e)}function YN(e){this._context=e}YN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:gf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function M3(e){return new YN(e)}function GN(e){this._context=e}GN.prototype={areaStart:vf,areaEnd:vf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function R3(e){return new GN(e)}function XS(e){return e<0?-1:1}function ZS(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),c=(r-e._y1)/(i||n<0&&-0),u=(s*i+c*n)/(n+i);return(XS(s)+XS(c))*Math.min(Math.abs(s),Math.abs(c),.5*Math.abs(u))||0}function QS(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ev(e,t,r){var n=e._x0,i=e._y0,s=e._x1,c=e._y1,u=(s-n)/3;e._context.bezierCurveTo(n+u,i+u*t,s-u,c-u*r,s,c)}function yf(e){this._context=e}yf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ev(this,this._t0,QS(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ev(this,QS(this,r=ZS(this,e,t)),r);break;default:Ev(this,this._t0,r=ZS(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function VN(e){this._context=new WN(e)}(VN.prototype=Object.create(yf.prototype)).point=function(e,t){yf.prototype.point.call(this,t,e)};function WN(e){this._context=e}WN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function q3(e){return new yf(e)}function z3(e){return new VN(e)}function XN(e){this._context=e}XN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=JS(e),i=JS(t),s=0,c=1;c<r;++s,++c)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[c],t[c]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function JS(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),c=new Array(r);for(i[0]=0,s[0]=2,c[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,c[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,c[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,c[t]-=n*c[t-1];for(i[r-1]=c[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(c[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function L3(e){return new XN(e)}function mm(e,t){this._context=e,this._t=t}mm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function I3(e){return new mm(e,.5)}function U3(e){return new mm(e,0)}function B3(e){return new mm(e,1)}function Ro(e,t){if((c=e.length)>1)for(var r=1,n,i,s=e[t[0]],c,u=s.length;r<c;++r)for(i=s,s=e[t[r]],n=0;n<u;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function jy(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function $3(e,t){return e[t]}function H3(e){const t=[];return t.key=e,t}function F3(){var e=wt([]),t=jy,r=Ro,n=$3;function i(s){var c=Array.from(e.apply(this,arguments),H3),u,m=c.length,h=-1,p;for(const v of s)for(u=0,++h;u<m;++u)(c[u][h]=[0,+n(v,c[u].key,h,s)]).data=v;for(u=0,p=zb(t(c));u<m;++u)c[p[u]].index=u;return r(c,p),c}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:wt(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:wt(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?jy:typeof s=="function"?s:wt(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??Ro,i):r},i}function K3(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,c;i<s;++i){for(c=r=0;r<n;++r)c+=e[r][i][1]||0;if(c)for(r=0;r<n;++r)e[r][i][1]/=c}Ro(e,t)}}function Y3(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var c=0,u=0;c<i;++c)u+=e[c][r][1]||0;n[r][1]+=n[r][0]=-u/2}Ro(e,t)}}function G3(e,t){if(!(!((c=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,c;n<s;++n){for(var u=0,m=0,h=0;u<c;++u){for(var p=e[t[u]],v=p[n][1]||0,_=p[n-1][1]||0,x=(v-_)/2,w=0;w<u;++w){var j=e[t[w]],S=j[n][1]||0,O=j[n-1][1]||0;x+=S-O}m+=v,h+=x*v}i[n-1][1]+=i[n-1][0]=r,m&&(r-=h/m)}i[n-1][1]+=i[n-1][0]=r,Ro(e,t)}}var Ov={},Cv={},e1;function V3(){return e1||(e1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(Cv)),Cv}var Av={},t1;function ZN(){return t1||(t1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Av)),Av}var Nv={},r1;function Ib(){return r1||(r1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t})(Nv)),Nv}var kv={},Dv={},n1;function W3(){return n1||(n1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(Dv)),Dv}var a1;function Ub(){return a1||(a1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W3(),r=Ib();function n(i){if(Array.isArray(i))return i.map(r.toKey);if(typeof i=="symbol")return[i];i=t.toString(i);const s=[],c=i.length;if(c===0)return s;let u=0,m="",h="",p=!1;for(i.charCodeAt(0)===46&&(s.push(""),u++);u<c;){const v=i[u];h?v==="\\"&&u+1<c?(u++,m+=i[u]):v===h?h="":m+=v:p?v==='"'||v==="'"?h=v:v==="]"?(p=!1,s.push(m),m=""):m+=v:v==="["?(p=!0,m&&(s.push(m),m="")):v==="."?m&&(s.push(m),m=""):m+=v,u++}return m&&s.push(m),s}e.toPath=n})(kv)),kv}var i1;function Bb(){return i1||(i1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V3(),r=ZN(),n=Ib(),i=Ub();function s(u,m,h){if(u==null)return h;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return h;const p=u[m];return p===void 0?r.isDeepKey(m)?s(u,i.toPath(m),h):h:p}case"number":case"symbol":{typeof m=="number"&&(m=n.toKey(m));const p=u[m];return p===void 0?h:p}default:{if(Array.isArray(m))return c(u,m,h);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return h;const p=u[m];return p===void 0?h:p}}}function c(u,m,h){if(m.length===0)return h;let p=u;for(let v=0;v<m.length;v++){if(p==null||t.isUnsafeProperty(m[v]))return h;p=p[m[v]]}return p===void 0?h:p}e.get=s})(Ov)),Ov}var Tv,o1;function X3(){return o1||(o1=1,Tv=Bb().get),Tv}var Z3=X3();const qo=Qa(Z3);var Q3=4;function Ui(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q3,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function Ft(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((i,s,c)=>{var u=r[c-1];return typeof u=="string"?i+u+s:u!==void 0?i+Ui(u)+s:i+s},"")}var gr=e=>e===0?0:e>0?1:-1,Qn=e=>typeof e=="number"&&e!=+e,Ka=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,De=e=>(typeof e=="number"||e instanceof Number)&&!Qn(e),fa=e=>De(e)||typeof e=="string",J3=0,wc=e=>{var t=++J3;return"".concat(e||"").concat(t)},Dr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!De(t)&&typeof t!="string")return n;var s;if(Ka(t)){if(r==null)return n;var c=t.indexOf("%");s=r*parseFloat(t.slice(0,c))/100}else s=+t;return Qn(s)&&(s=n),i&&r!=null&&s>r&&(s=r),s},QN=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Dt(e,t,r){return De(e)&&De(t)?Ui(e+r*(t-e)):t}function JN(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):qo(n,t))===r)}var Mt=e=>e===null||typeof e>"u",$c=e=>Mt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function eI(e){return e!=null}function Hc(){}var tI=["type","size","sizeType"];function Sy(){return Sy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sy.apply(null,arguments)}function s1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function l1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s1(Object(r),!0).forEach(function(n){rI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rI(e,t,r){return(t=nI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nI(e){var t=aI(e,"string");return typeof t=="symbol"?t:t+""}function aI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iI(e,t){if(e==null)return{};var r,n,i=oI(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function oI(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ek={symbolCircle:Lb,symbolCross:_3,symbolDiamond:w3,symbolSquare:j3,symbolStar:C3,symbolTriangle:A3,symbolWye:k3},sI=Math.PI/180,lI=e=>{var t="symbol".concat($c(e));return ek[t]||Lb},cI=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*sI;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},uI=(e,t)=>{ek["symbol".concat($c(e))]=t},tk=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=iI(e,tI),s=l1(l1({},i),{},{type:t,size:r,sizeType:n}),c="circle";typeof t=="string"&&(c=t);var u=()=>{var _=lI(c),x=D3().type(_).size(cI(r,n,c)),w=x();if(w!==null)return w},{className:m,cx:h,cy:p}=s,v=Ur(s);return De(h)&&De(p)&&De(r)?y.createElement("path",Sy({},v,{className:ot("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(p,")"),d:u()})):null};tk.registerSymbol=uI;var rk=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,$b=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(y.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(i=>{Rb(i)&&(n[i]=(s=>r[i](r,s)))}),n},dI=(e,t,r)=>n=>(e(t,r,n),null),hm=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(i=>{var s=e[i];Rb(i)&&typeof s=="function"&&(n||(n={}),n[i]=dI(s,t,r))}),n};function c1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function fI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c1(Object(r),!0).forEach(function(n){mI(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mI(e,t,r){return(t=hI(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hI(e){var t=pI(e,"string");return typeof t=="symbol"?t:t+""}function pI(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function br(e,t){var r=fI({},e),n=t,i=Object.keys(t),s=i.reduce((c,u)=>(c[u]===void 0&&n[u]!==void 0&&(c[u]=n[u]),c),r);return s}var Pv={},Mv={},u1;function vI(){return u1||(u1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const i=new Map;for(let s=0;s<r.length;s++){const c=r[s],u=n(c);i.has(u)||i.set(u,c)}return Array.from(i.values())}e.uniqBy=t})(Mv)),Mv}var Rv={},d1;function nk(){return d1||(d1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(Rv)),Rv}var qv={},zv={},Lv={},f1;function gI(){return f1||(f1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(Lv)),Lv}var m1;function Hb(){return m1||(m1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gI();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(zv)),zv}var Iv={},h1;function yI(){return h1||(h1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(Iv)),Iv}var p1;function bI(){return p1||(p1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Hb(),r=yI();function n(i){return r.isObjectLike(i)&&t.isArrayLike(i)}e.isArrayLikeObject=n})(qv)),qv}var Uv={},Bv={},v1;function _I(){return v1||(v1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Bb();function r(n){return function(i){return t.get(i,n)}}e.property=r})(Bv)),Bv}var $v={},Hv={},Fv={},Kv={},g1;function ak(){return g1||(g1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(Kv)),Kv}var Yv={},y1;function ik(){return y1||(y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(Yv)),Yv}var Gv={},b1;function ok(){return b1||(b1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(Gv)),Gv}var _1;function xI(){return _1||(_1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ak(),r=ik(),n=ok();function i(p,v,_){return typeof _!="function"?i(p,v,()=>{}):s(p,v,function x(w,j,S,O,C,A){const k=_(w,j,S,O,C,A);return k!==void 0?!!k:s(w,j,x,A)},new Map)}function s(p,v,_,x){if(v===p)return!0;switch(typeof v){case"object":return c(p,v,_,x);case"function":return Object.keys(v).length>0?s(p,{...v},_,x):n.eq(p,v);default:return t.isObject(p)?typeof v=="string"?v==="":!0:n.eq(p,v)}}function c(p,v,_,x){if(v==null)return!0;if(Array.isArray(v))return m(p,v,_,x);if(v instanceof Map)return u(p,v,_,x);if(v instanceof Set)return h(p,v,_,x);const w=Object.keys(v);if(p==null||r.isPrimitive(p))return w.length===0;if(w.length===0)return!0;if(x?.has(v))return x.get(v)===p;x?.set(v,p);try{for(let j=0;j<w.length;j++){const S=w[j];if(!r.isPrimitive(p)&&!(S in p)||v[S]===void 0&&p[S]!==void 0||v[S]===null&&p[S]!==null||!_(p[S],v[S],S,p,v,x))return!1}return!0}finally{x?.delete(v)}}function u(p,v,_,x){if(v.size===0)return!0;if(!(p instanceof Map))return!1;for(const[w,j]of v.entries()){const S=p.get(w);if(_(S,j,w,p,v,x)===!1)return!1}return!0}function m(p,v,_,x){if(v.length===0)return!0;if(!Array.isArray(p))return!1;const w=new Set;for(let j=0;j<v.length;j++){const S=v[j];let O=!1;for(let C=0;C<p.length;C++){if(w.has(C))continue;const A=p[C];let k=!1;if(_(A,S,j,p,v,x)&&(k=!0),k){w.add(C),O=!0;break}}if(!O)return!1}return!0}function h(p,v,_,x){return v.size===0?!0:p instanceof Set?m([...p],[...v],_,x):!1}e.isMatchWith=i,e.isSetMatch=h})(Fv)),Fv}var x1;function sk(){return x1||(x1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xI();function r(n,i){return t.isMatchWith(n,i,()=>{})}e.isMatch=r})(Hv)),Hv}var Vv={},Wv={},Xv={},w1;function wI(){return w1||(w1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(Xv)),Xv}var Zv={},j1;function lk(){return j1||(j1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(Zv)),Zv}var Qv={},S1;function ck(){return S1||(S1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",i="[object Boolean]",s="[object Arguments]",c="[object Symbol]",u="[object Date]",m="[object Map]",h="[object Set]",p="[object Array]",v="[object Function]",_="[object ArrayBuffer]",x="[object Object]",w="[object Error]",j="[object DataView]",S="[object Uint8Array]",O="[object Uint8ClampedArray]",C="[object Uint16Array]",A="[object Uint32Array]",k="[object BigUint64Array]",D="[object Int8Array]",M="[object Int16Array]",L="[object Int32Array]",X="[object BigInt64Array]",re="[object Float32Array]",ae="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=_,e.arrayTag=p,e.bigInt64ArrayTag=X,e.bigUint64ArrayTag=k,e.booleanTag=i,e.dataViewTag=j,e.dateTag=u,e.errorTag=w,e.float32ArrayTag=re,e.float64ArrayTag=ae,e.functionTag=v,e.int16ArrayTag=M,e.int32ArrayTag=L,e.int8ArrayTag=D,e.mapTag=m,e.numberTag=n,e.objectTag=x,e.regexpTag=t,e.setTag=h,e.stringTag=r,e.symbolTag=c,e.uint16ArrayTag=C,e.uint32ArrayTag=A,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=O})(Qv)),Qv}var Jv={},E1;function jI(){return E1||(E1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(Jv)),Jv}var O1;function uk(){return O1||(O1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wI(),r=lk(),n=ck(),i=ik(),s=jI();function c(p,v){return u(p,void 0,p,new Map,v)}function u(p,v,_,x=new Map,w=void 0){const j=w?.(p,v,_,x);if(j!==void 0)return j;if(i.isPrimitive(p))return p;if(x.has(p))return x.get(p);if(Array.isArray(p)){const S=new Array(p.length);x.set(p,S);for(let O=0;O<p.length;O++)S[O]=u(p[O],O,_,x,w);return Object.hasOwn(p,"index")&&(S.index=p.index),Object.hasOwn(p,"input")&&(S.input=p.input),S}if(p instanceof Date)return new Date(p.getTime());if(p instanceof RegExp){const S=new RegExp(p.source,p.flags);return S.lastIndex=p.lastIndex,S}if(p instanceof Map){const S=new Map;x.set(p,S);for(const[O,C]of p)S.set(O,u(C,O,_,x,w));return S}if(p instanceof Set){const S=new Set;x.set(p,S);for(const O of p)S.add(u(O,void 0,_,x,w));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(p))return p.subarray();if(s.isTypedArray(p)){const S=new(Object.getPrototypeOf(p)).constructor(p.length);x.set(p,S);for(let O=0;O<p.length;O++)S[O]=u(p[O],O,_,x,w);return S}if(p instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&p instanceof SharedArrayBuffer)return p.slice(0);if(p instanceof DataView){const S=new DataView(p.buffer.slice(0),p.byteOffset,p.byteLength);return x.set(p,S),m(S,p,_,x,w),S}if(typeof File<"u"&&p instanceof File){const S=new File([p],p.name,{type:p.type});return x.set(p,S),m(S,p,_,x,w),S}if(typeof Blob<"u"&&p instanceof Blob){const S=new Blob([p],{type:p.type});return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof Error){const S=new p.constructor;return x.set(p,S),S.message=p.message,S.name=p.name,S.stack=p.stack,S.cause=p.cause,m(S,p,_,x,w),S}if(p instanceof Boolean){const S=new Boolean(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof Number){const S=new Number(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(p instanceof String){const S=new String(p.valueOf());return x.set(p,S),m(S,p,_,x,w),S}if(typeof p=="object"&&h(p)){const S=Object.create(Object.getPrototypeOf(p));return x.set(p,S),m(S,p,_,x,w),S}return p}function m(p,v,_=p,x,w){const j=[...Object.keys(v),...t.getSymbols(v)];for(let S=0;S<j.length;S++){const O=j[S],C=Object.getOwnPropertyDescriptor(p,O);(C==null||C.writable)&&(p[O]=u(v[O],O,_,x,w))}}function h(p){switch(r.getTag(p)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=c,e.cloneDeepWithImpl=u,e.copyProperties=m})(Wv)),Wv}var C1;function SI(){return C1||(C1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uk();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(Vv)),Vv}var A1;function EI(){return A1||(A1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sk(),r=SI();function n(i){return i=r.cloneDeep(i),s=>t.isMatch(s,i)}e.matches=n})($v)),$v}var eg={},tg={},rg={},N1;function OI(){return N1||(N1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uk(),r=ck();function n(i,s){return t.cloneDeepWith(i,(c,u,m,h)=>{const p=s?.(c,u,m,h);if(p!==void 0)return p;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case r.numberTag:case r.stringTag:case r.booleanTag:{const v=new i.constructor(i?.valueOf());return t.copyProperties(v,i),v}case r.argumentsTag:{const v={};return t.copyProperties(v,i),v.length=i.length,v[Symbol.iterator]=i[Symbol.iterator],v}default:return}})}e.cloneDeepWith=n})(rg)),rg}var k1;function CI(){return k1||(k1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OI();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(tg)),tg}var ng={},ag={},D1;function dk(){return D1||(D1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,i=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<i;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(ag)),ag}var ig={},T1;function AI(){return T1||(T1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lk();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(ig)),ig}var P1;function NI(){return P1||(P1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ZN(),r=dk(),n=AI(),i=Ub();function s(c,u){let m;if(Array.isArray(u)?m=u:typeof u=="string"&&t.isDeepKey(u)&&c?.[u]==null?m=i.toPath(u):m=[u],m.length===0)return!1;let h=c;for(let p=0;p<m.length;p++){const v=m[p];if((h==null||!Object.hasOwn(h,v))&&!((Array.isArray(h)||n.isArguments(h))&&r.isIndex(v)&&v<h.length))return!1;h=h[v]}return!0}e.has=s})(ng)),ng}var M1;function kI(){return M1||(M1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sk(),r=Ib(),n=CI(),i=Bb(),s=NI();function c(u,m){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=r.toKey(u);break}}return m=n.cloneDeep(m),function(h){const p=i.get(h,u);return p===void 0?s.has(h,u):m===void 0?p===void 0:t.isMatch(p,m)}}e.matchesProperty=c})(eg)),eg}var R1;function DI(){return R1||(R1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nk(),r=_I(),n=EI(),i=kI();function s(c){if(c==null)return t.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?i.matchesProperty(c[0],c[1]):n.matches(c);case"string":case"symbol":case"number":return r.property(c)}}e.iteratee=s})(Uv)),Uv}var q1;function TI(){return q1||(q1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vI(),r=nk(),n=bI(),i=DI();function s(c,u=r.identity){return n.isArrayLikeObject(c)?t.uniqBy(Array.from(c),i.iteratee(u)):[]}e.uniqBy=s})(Pv)),Pv}var og,z1;function PI(){return z1||(z1=1,og=TI().uniqBy),og}var MI=PI();const L1=Qa(MI);function RI(e,t,r){return t===!0?L1(e,r):typeof t=="function"?L1(e,t):e}var sg={exports:{}},lg={},cg={exports:{}},ug={};var I1;function qI(){if(I1)return ug;I1=1;var e=sm();function t(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,s=e.useLayoutEffect,c=e.useDebugValue;function u(v,_){var x=_(),w=n({inst:{value:x,getSnapshot:_}}),j=w[0].inst,S=w[1];return s(function(){j.value=x,j.getSnapshot=_,m(j)&&S({inst:j})},[v,x,_]),i(function(){return m(j)&&S({inst:j}),v(function(){m(j)&&S({inst:j})})},[v]),c(x),x}function m(v){var _=v.getSnapshot;v=v.value;try{var x=_();return!r(v,x)}catch{return!0}}function h(v,_){return _()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return ug.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:p,ug}var U1;function zI(){return U1||(U1=1,cg.exports=qI()),cg.exports}var B1;function LI(){if(B1)return lg;B1=1;var e=sm(),t=zI();function r(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,s=e.useRef,c=e.useEffect,u=e.useMemo,m=e.useDebugValue;return lg.useSyncExternalStoreWithSelector=function(h,p,v,_,x){var w=s(null);if(w.current===null){var j={hasValue:!1,value:null};w.current=j}else j=w.current;w=u(function(){function O(M){if(!C){if(C=!0,A=M,M=_(M),x!==void 0&&j.hasValue){var L=j.value;if(x(L,M))return k=L}return k=M}if(L=k,n(A,M))return L;var X=_(M);return x!==void 0&&x(L,X)?(A=M,L):(A=M,k=X)}var C=!1,A,k,D=v===void 0?null:v;return[function(){return O(p())},D===null?void 0:function(){return O(D())}]},[p,v,_,x]);var S=i(h,w[0],w[1]);return c(function(){j.hasValue=!0,j.value=S},[S]),m(S),S},lg}var $1;function II(){return $1||($1=1,sg.exports=LI()),sg.exports}var UI=II(),Fb=y.createContext(null),BI=e=>e,Rt=()=>{var e=y.useContext(Fb);return e?e.store.dispatch:BI},af=()=>{},$I=()=>af,HI=(e,t)=>e===t;function Te(e){var t=y.useContext(Fb);return UI.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:$I,t?t.store.getState:af,t?t.store.getState:af,t?e:af,HI)}function FI(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function KI(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function YI(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var H1=e=>Array.isArray(e)?e:[e];function GI(e){const t=Array.isArray(e[0])?e[0]:e;return YI(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function VI(e,t){const r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}var WI=class{constructor(e){this.value=e}deref(){return this.value}},XI=typeof WeakRef<"u"?WeakRef:WI,ZI=0,F1=1;function Md(){return{s:ZI,v:void 0,o:null,p:null}}function fk(e,t={}){let r=Md();const{resultEqualityCheck:n}=t;let i,s=0;function c(){let u=r;const{length:m}=arguments;for(let v=0,_=m;v<_;v++){const x=arguments[v];if(typeof x=="function"||typeof x=="object"&&x!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const j=w.get(x);j===void 0?(u=Md(),w.set(x,u)):u=j}else{let w=u.p;w===null&&(u.p=w=new Map);const j=w.get(x);j===void 0?(u=Md(),w.set(x,u)):u=j}}const h=u;let p;if(u.s===F1)p=u.v;else if(p=e.apply(null,arguments),s++,n){const v=i?.deref?.()??i;v!=null&&n(v,p)&&(p=v,s!==0&&s--),i=typeof p=="object"&&p!==null||typeof p=="function"?new XI(p):p}return h.s=F1,h.v=p,p}return c.clearCache=()=>{r=Md(),c.resetResultsCount()},c.resultsCount=()=>s,c.resetResultsCount=()=>{s=0},c}function QI(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...i)=>{let s=0,c=0,u,m={},h=i.pop();typeof h=="object"&&(m=h,h=i.pop()),FI(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const p={...r,...m},{memoize:v,memoizeOptions:_=[],argsMemoize:x=fk,argsMemoizeOptions:w=[]}=p,j=H1(_),S=H1(w),O=GI(i),C=v(function(){return s++,h.apply(null,arguments)},...j),A=x(function(){c++;const D=VI(O,arguments);return u=C.apply(null,D),u},...S);return Object.assign(A,{resultFunc:h,memoizedResultFunc:C,dependencies:O,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:v,argsMemoize:x})};return Object.assign(n,{withTypes:()=>n}),n}var W=QI(fk),JI=Object.assign((e,t=W)=>{KI(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((c,u,m)=>(c[r[m]]=u,c),{}))},{withTypes:()=>JI}),dg={},fg={},mg={},K1;function e4(){return K1||(K1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,i,s)=>{if(n!==i){const c=t(n),u=t(i);if(c===u&&c===0){if(n<i)return s==="desc"?1:-1;if(n>i)return s==="desc"?-1:1}return s==="desc"?u-c:c-u}return 0};e.compareValues=r})(mg)),mg}var hg={},pg={},Y1;function mk(){return Y1||(Y1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(pg)),pg}var G1;function t4(){return G1||(G1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mk(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(s,c){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||c!=null&&Object.hasOwn(c,s)}e.isKey=i})(hg)),hg}var V1;function r4(){return V1||(V1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e4(),r=t4(),n=Ub();function i(s,c,u,m){if(s==null)return[];u=m?void 0:u,Array.isArray(s)||(s=Object.values(s)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(x=>String(x));const h=(x,w)=>{let j=x;for(let S=0;S<w.length&&j!=null;++S)j=j[w[S]];return j},p=(x,w)=>w==null||x==null?w:typeof x=="object"&&"key"in x?Object.hasOwn(w,x.key)?w[x.key]:h(w,x.path):typeof x=="function"?x(w):Array.isArray(x)?h(w,x):typeof w=="object"?w[x]:w,v=c.map(x=>(Array.isArray(x)&&x.length===1&&(x=x[0]),x==null||typeof x=="function"||Array.isArray(x)||r.isKey(x)?x:{key:x,path:n.toPath(x)}));return s.map(x=>({original:x,criteria:v.map(w=>p(w,x))})).slice().sort((x,w)=>{for(let j=0;j<v.length;j++){const S=t.compareValues(x.criteria[j],w.criteria[j],u[j]);if(S!==0)return S}return 0}).map(x=>x.original)}e.orderBy=i})(fg)),fg}var vg={},W1;function n4(){return W1||(W1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const i=[],s=Math.floor(n),c=(u,m)=>{for(let h=0;h<u.length;h++){const p=u[h];Array.isArray(p)&&m<s?c(p,m+1):i.push(p)}};return c(r,0),i}e.flatten=t})(vg)),vg}var gg={},X1;function hk(){return X1||(X1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dk(),r=Hb(),n=ak(),i=ok();function s(c,u,m){return n.isObject(m)&&(typeof u=="number"&&r.isArrayLike(m)&&t.isIndex(u)&&u<m.length||typeof u=="string"&&u in m)?i.eq(m[u],c):!1}e.isIterateeCall=s})(gg)),gg}var Z1;function a4(){return Z1||(Z1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r4(),r=n4(),n=hk();function i(s,...c){const u=c.length;return u>1&&n.isIterateeCall(s,c[0],c[1])?c=[]:u>2&&n.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),t.orderBy(s,r.flatten(c),["asc"])}e.sortBy=i})(dg)),dg}var yg,Q1;function i4(){return Q1||(Q1=1,yg=a4().sortBy),yg}var o4=i4();const pm=Qa(o4);var pk=e=>e.legend.settings,s4=e=>e.legend.size,l4=e=>e.legend.payload,AZ=W([l4,pk],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?pm(n,r):n}),Rd=1;function c4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=y.useState({height:0,left:0,top:0,width:0}),n=y.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),c={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(c.height-t.height)>Rd||Math.abs(c.left-t.left)>Rd||Math.abs(c.top-t.top)>Rd||Math.abs(c.width-t.width)>Rd)&&r({height:c.height,left:c.left,top:c.top,width:c.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Er(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var u4=typeof Symbol=="function"&&Symbol.observable||"@@observable",J1=u4,bg=()=>Math.random().toString(36).substring(7).split("").join("."),d4={INIT:`@@redux/INIT${bg()}`,REPLACE:`@@redux/REPLACE${bg()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bg()}`},bf=d4;function Kb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function vk(e,t,r){if(typeof e!="function")throw new Error(Er(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Er(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Er(1));return r(vk)(e,t)}let n=e,i=t,s=new Map,c=s,u=0,m=!1;function h(){c===s&&(c=new Map,s.forEach((S,O)=>{c.set(O,S)}))}function p(){if(m)throw new Error(Er(3));return i}function v(S){if(typeof S!="function")throw new Error(Er(4));if(m)throw new Error(Er(5));let O=!0;h();const C=u++;return c.set(C,S),function(){if(O){if(m)throw new Error(Er(6));O=!1,h(),c.delete(C),s=null}}}function _(S){if(!Kb(S))throw new Error(Er(7));if(typeof S.type>"u")throw new Error(Er(8));if(typeof S.type!="string")throw new Error(Er(17));if(m)throw new Error(Er(9));try{m=!0,i=n(i,S)}finally{m=!1}return(s=c).forEach(C=>{C()}),S}function x(S){if(typeof S!="function")throw new Error(Er(10));n=S,_({type:bf.REPLACE})}function w(){const S=v;return{subscribe(O){if(typeof O!="object"||O===null)throw new Error(Er(11));function C(){const k=O;k.next&&k.next(p())}return C(),{unsubscribe:S(C)}},[J1](){return this}}}return _({type:bf.INIT}),{dispatch:_,subscribe:v,getState:p,replaceReducer:x,[J1]:w}}function f4(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:bf.INIT})>"u")throw new Error(Er(12));if(typeof r(void 0,{type:bf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Er(13))})}function gk(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const c=t[s];typeof e[c]=="function"&&(r[c]=e[c])}const n=Object.keys(r);let i;try{f4(r)}catch(s){i=s}return function(c={},u){if(i)throw i;let m=!1;const h={};for(let p=0;p<n.length;p++){const v=n[p],_=r[v],x=c[v],w=_(x,u);if(typeof w>"u")throw u&&u.type,new Error(Er(14));h[v]=w,m=m||w!==x}return m=m||n.length!==Object.keys(c).length,m?h:c}}function _f(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function m4(...e){return t=>(r,n)=>{const i=t(r,n);let s=()=>{throw new Error(Er(15))};const c={getState:i.getState,dispatch:(m,...h)=>s(m,...h)},u=e.map(m=>m(c));return s=_f(...u)(i.dispatch),{...i,dispatch:s}}}function yk(e){return Kb(e)&&"type"in e&&typeof e.type=="string"}var bk=Symbol.for("immer-nothing"),eE=Symbol.for("immer-draftable"),Br=Symbol.for("immer-state");function Yn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var hn=Object,Hs=hn.getPrototypeOf,xf="constructor",vm="prototype",Ey="configurable",wf="enumerable",of="writable",jc="value",Ya=e=>!!e&&!!e[Br];function Jn(e){return e?_k(e)||ym(e)||!!e[eE]||!!e[xf]?.[eE]||bm(e)||_m(e):!1}var h4=hn[vm][xf].toString(),tE=new WeakMap;function _k(e){if(!e||!Yb(e))return!1;const t=Hs(e);if(t===null||t===hn[vm])return!0;const r=hn.hasOwnProperty.call(t,xf)&&t[xf];if(r===Object)return!0;if(!zs(r))return!1;let n=tE.get(r);return n===void 0&&(n=Function.toString.call(r),tE.set(r,n)),n===h4}function gm(e,t,r=!0){Fc(e)===0?(r?Reflect.ownKeys(e):hn.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Fc(e){const t=e[Br];return t?t.type_:ym(e)?1:bm(e)?2:_m(e)?3:0}var rE=(e,t,r=Fc(e))=>r===2?e.has(t):hn[vm].hasOwnProperty.call(e,t),Oy=(e,t,r=Fc(e))=>r===2?e.get(t):e[t],jf=(e,t,r,n=Fc(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function p4(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ym=Array.isArray,bm=e=>e instanceof Map,_m=e=>e instanceof Set,Yb=e=>typeof e=="object",zs=e=>typeof e=="function",_g=e=>typeof e=="boolean";function v4(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var za=e=>e.copy_||e.base_,Gb=e=>e.modified_?e.copy_:e.base_;function Cy(e,t){if(bm(e))return new Map(e);if(_m(e))return new Set(e);if(ym(e))return Array[vm].slice.call(e);const r=_k(e);if(t===!0||t==="class_only"&&!r){const n=hn.getOwnPropertyDescriptors(e);delete n[Br];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u[of]===!1&&(u[of]=!0,u[Ey]=!0),(u.get||u.set)&&(n[c]={[Ey]:!0,[of]:!0,[wf]:u[wf],[jc]:e[c]})}return hn.create(Hs(e),n)}else{const n=Hs(e);if(n!==null&&r)return{...e};const i=hn.create(n);return hn.assign(i,e)}}function Vb(e,t=!1){return xm(e)||Ya(e)||!Jn(e)||(Fc(e)>1&&hn.defineProperties(e,{set:qd,add:qd,clear:qd,delete:qd}),hn.freeze(e),t&&gm(e,(r,n)=>{Vb(n,!0)},!1)),e}function g4(){Yn(2)}var qd={[jc]:g4};function xm(e){return e===null||!Yb(e)?!0:hn.isFrozen(e)}var Sf="MapSet",Ay="Patches",nE="ArrayMethods",xk={};function zo(e){const t=xk[e];return t||Yn(0,e),t}var aE=e=>!!xk[e],Sc,wk=()=>Sc,y4=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:aE(Sf)?zo(Sf):void 0,arrayMethodsPlugin_:aE(nE)?zo(nE):void 0});function iE(e,t){t&&(e.patchPlugin_=zo(Ay),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ny(e){ky(e),e.drafts_.forEach(b4),e.drafts_=null}function ky(e){e===Sc&&(Sc=e.parent_)}var oE=e=>Sc=y4(Sc,e);function b4(e){const t=e[Br];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function sE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Br].modified_&&(Ny(t),Yn(4)),Jn(e)&&(e=lE(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[Br].base_,e,t)}else e=lE(t,r);return _4(t,e,!0),Ny(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bk?e:void 0}function lE(e,t){if(xm(t))return t;const r=t[Br];if(!r)return Ef(t,e.handledSet_,e);if(!wm(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);Ek(r,e)}return r.copy_}function _4(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Vb(t,r)}function jk(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var wm=(e,t)=>e.scope_===t,x4=[];function Sk(e,t,r,n){const i=za(e),s=e.type_;if(n!==void 0&&Oy(i,n,s)===t){jf(i,n,r,s);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;gm(i,(m,h)=>{if(Ya(h)){const p=u.get(h)||[];p.push(m),u.set(h,p)}})}const c=e.draftLocations_.get(t)??x4;for(const u of c)jf(i,u,r,s)}function w4(e,t,r){e.callbacks_.push(function(i){const s=t;if(!s||!wm(s,i))return;i.mapSetPlugin_?.fixSetContents(s);const c=Gb(s);Sk(e,s.draft_??s,c,r),Ek(s,i)})}function Ek(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:n}=t;if(n){const i=n.getPath(e);i&&n.generatePatches_(e,i,t)}jk(e)}}function j4(e,t,r){const{scope_:n}=e;if(Ya(r)){const i=r[Br];wm(i,n)&&i.callbacks_.push(function(){sf(e);const c=Gb(i);Sk(e,r,c,t)})}else Jn(r)&&e.callbacks_.push(function(){const s=za(e);e.type_===3?s.has(r)&&Ef(r,n.handledSet_,n):Oy(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Ef(Oy(e.copy_,t,e.type_),n.handledSet_,n)})}function Ef(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ya(e)||t.has(e)||!Jn(e)||xm(e)||(t.add(e),gm(e,(n,i)=>{if(Ya(i)){const s=i[Br];if(wm(s,r)){const c=Gb(s);jf(e,n,c,e.type_),jk(s)}}else Jn(i)&&Ef(i,t,r)})),e}function S4(e,t){const r=ym(e),n={type_:r?1:0,scope_:t?t.scope_:wk(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=Of;r&&(i=[n],s=Ec);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,[u,n]}var Of={get(e,t){if(t===Br)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r?.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=za(e);if(!rE(i,t,e.type_))return E4(e,i,t);const s=i[t];if(e.finalized_||!Jn(s)||n&&e.operationMethod&&r?.isMutatingArrayMethod(e.operationMethod)&&v4(t))return s;if(s===xg(e.base_,t)){sf(e);const c=e.type_===1?+t:t,u=Ty(e.scope_,s,e,c);return e.copy_[c]=u}return s},has(e,t){return t in za(e)},ownKeys(e){return Reflect.ownKeys(za(e))},set(e,t,r){const n=Ok(za(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=xg(za(e),t),s=i?.[Br];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(p4(r,i)&&(r!==void 0||rE(e.base_,t,e.type_)))return!0;sf(e),Dy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),j4(e,t,r)),!0},deleteProperty(e,t){return sf(e),xg(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Dy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=za(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[of]:!0,[Ey]:e.type_!==1||t!=="length",[wf]:n[wf],[jc]:r[t]}},defineProperty(){Yn(11)},getPrototypeOf(e){return Hs(e.base_)},setPrototypeOf(){Yn(12)}},Ec={};for(let e in Of){let t=Of[e];Ec[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}}Ec.deleteProperty=function(e,t){return Ec.set.call(this,e,t,void 0)};Ec.set=function(e,t,r){return Of.set.call(this,e[0],t,r,e[0])};function xg(e,t){const r=e[Br];return(r?za(r):e)[t]}function E4(e,t,r){const n=Ok(t,r);return n?jc in n?n[jc]:n.get?.call(e.draft_):void 0}function Ok(e,t){if(!(t in e))return;let r=Hs(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Hs(r)}}function Dy(e){e.modified_||(e.modified_=!0,e.parent_&&Dy(e.parent_))}function sf(e){e.copy_||(e.assigned_=new Map,e.copy_=Cy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var O4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,i)=>{if(zs(r)&&!zs(n)){const c=n;n=r;const u=this;return function(h=c,...p){return u.produce(h,v=>n.call(this,v,...p))}}zs(n)||Yn(6),i!==void 0&&!zs(i)&&Yn(7);let s;if(Jn(r)){const c=oE(this),u=Ty(c,r,void 0);let m=!0;try{s=n(u),m=!1}finally{m?Ny(c):ky(c)}return iE(c,i),sE(s,c)}else if(!r||!Yb(r)){if(s=n(r),s===void 0&&(s=r),s===bk&&(s=void 0),this.autoFreeze_&&Vb(s,!0),i){const c=[],u=[];zo(Ay).generateReplacementPatches_(r,s,{patches_:c,inversePatches_:u}),i(c,u)}return s}else Yn(1,r)},this.produceWithPatches=(r,n)=>{if(zs(r))return(u,...m)=>this.produceWithPatches(u,h=>r(h,...m));let i,s;return[this.produce(r,n,(u,m)=>{i=u,s=m}),i,s]},_g(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),_g(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),_g(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Jn(t)||Yn(8),Ya(t)&&(t=Xn(t));const r=oE(this),n=Ty(r,t,void 0);return n[Br].isManual_=!0,ky(r),n}finishDraft(t,r){const n=t&&t[Br];(!n||!n.isManual_)&&Yn(9);const{scope_:i}=n;return iE(i,r),sE(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const s=r[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(r=r.slice(n+1));const i=zo(Ay).applyPatches_;return Ya(t)?i(t,r):this.produce(t,s=>i(s,r))}};function Ty(e,t,r,n){const[i,s]=bm(t)?zo(Sf).proxyMap_(t,r):_m(t)?zo(Sf).proxySet_(t,r):S4(t,r);return(r?.scope_??wk()).drafts_.push(i),s.callbacks_=r?.callbacks_??[],s.key_=n,r&&n!==void 0?w4(r,s,n):s.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(s);const{patchPlugin_:h}=m;s.modified_&&h&&h.generatePatches_(s,[],m)}),i}function Xn(e){return Ya(e)||Yn(10,e),Ck(e)}function Ck(e){if(!Jn(e)||xm(e))return e;const t=e[Br];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Cy(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Cy(e,!0);return gm(r,(i,s)=>{jf(r,i,Ck(s))},n),t&&(t.finalized_=!1),r}var C4=new O4,Ak=C4.produce;function Nk(e){return({dispatch:r,getState:n})=>i=>s=>typeof s=="function"?s(r,n,e):i(s)}var A4=Nk(),N4=Nk,k4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_f:_f.apply(null,arguments)};function zn(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(pn(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>yk(n)&&n.type===e,r}var kk=class vc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,vc.prototype)}static get[Symbol.species](){return vc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new vc(...t[0].concat(this)):new vc(...t.concat(this))}};function cE(e){return Jn(e)?Ak(e,()=>{}):e}function zd(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function D4(e){return typeof e=="boolean"}var T4=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let c=new kk;return r&&(D4(r)?c.push(A4):c.push(N4(r.extraArgument))),c},Dk="RTK_autoBatch",kt=()=>e=>({payload:e,meta:{[Dk]:!0}}),uE=e=>t=>{setTimeout(t,e)},Tk=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,c=!1;const u=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:uE(10):e.type==="callback"?e.queueNotification:uE(e.timeout),h=()=>{c=!1,s&&(s=!1,u.forEach(p=>p()))};return Object.assign({},n,{subscribe(p){const v=()=>i&&p(),_=n.subscribe(v);return u.add(p),()=>{_(),u.delete(p)}},dispatch(p){try{return i=!p?.meta?.[Dk],s=!i,s&&(c||(c=!0,m(h))),n.dispatch(p)}finally{i=!0}}})},P4=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new kk(e);return n&&i.push(Tk(typeof n=="object"?n:void 0)),i};function M4(e){const t=T4(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:c=void 0}=e||{};let u;if(typeof r=="function")u=r;else if(Kb(r))u=gk(r);else throw new Error(pn(1));let m;typeof n=="function"?m=n(t):m=t();let h=_f;i&&(h=k4({trace:!1,...typeof i=="object"&&i}));const p=m4(...m),v=P4(p);let _=typeof c=="function"?c(v):v();const x=h(..._);return vk(u,s,x)}function Pk(e){const t={},r=[];let n;const i={addCase(s,c){const u=typeof s=="string"?s:s.type;if(!u)throw new Error(pn(28));if(u in t)throw new Error(pn(29));return t[u]=c,i},addAsyncThunk(s,c){return c.pending&&(t[s.pending.type]=c.pending),c.rejected&&(t[s.rejected.type]=c.rejected),c.fulfilled&&(t[s.fulfilled.type]=c.fulfilled),c.settled&&r.push({matcher:s.settled,reducer:c.settled}),i},addMatcher(s,c){return r.push({matcher:s,reducer:c}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function R4(e){return typeof e=="function"}function q4(e,t){let[r,n,i]=Pk(t),s;if(R4(e))s=()=>cE(e());else{const u=cE(e);s=()=>u}function c(u=s(),m){let h=[r[m.type],...n.filter(({matcher:p})=>p(m)).map(({reducer:p})=>p)];return h.filter(p=>!!p).length===0&&(h=[i]),h.reduce((p,v)=>{if(v)if(Ya(p)){const x=v(p,m);return x===void 0?p:x}else{if(Jn(p))return Ak(p,_=>v(_,m));{const _=v(p,m);if(_===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return p},u)}return c.getInitialState=s,c}var z4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",L4=(e=21)=>{let t="",r=e;for(;r--;)t+=z4[Math.random()*64|0];return t},I4=Symbol.for("rtk-slice-createasyncthunk");function U4(e,t){return`${e}/${t}`}function B4({creators:e}={}){const t=e?.asyncThunk?.[I4];return function(n){const{name:i,reducerPath:s=i}=n;if(!i)throw new Error(pn(11));const c=(typeof n.reducers=="function"?n.reducers(H4()):n.reducers)||{},u=Object.keys(c),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(A,k){const D=typeof A=="string"?A:A.type;if(!D)throw new Error(pn(12));if(D in m.sliceCaseReducersByType)throw new Error(pn(13));return m.sliceCaseReducersByType[D]=k,h},addMatcher(A,k){return m.sliceMatchers.push({matcher:A,reducer:k}),h},exposeAction(A,k){return m.actionCreators[A]=k,h},exposeCaseReducer(A,k){return m.sliceCaseReducersByName[A]=k,h}};u.forEach(A=>{const k=c[A],D={reducerName:A,type:U4(i,A),createNotation:typeof n.reducers=="function"};K4(k)?G4(D,k,h,t):F4(D,k,h)});function p(){const[A={},k=[],D=void 0]=typeof n.extraReducers=="function"?Pk(n.extraReducers):[n.extraReducers],M={...A,...m.sliceCaseReducersByType};return q4(n.initialState,L=>{for(let X in M)L.addCase(X,M[X]);for(let X of m.sliceMatchers)L.addMatcher(X.matcher,X.reducer);for(let X of k)L.addMatcher(X.matcher,X.reducer);D&&L.addDefaultCase(D)})}const v=A=>A,_=new Map,x=new WeakMap;let w;function j(A,k){return w||(w=p()),w(A,k)}function S(){return w||(w=p()),w.getInitialState()}function O(A,k=!1){function D(L){let X=L[A];return typeof X>"u"&&k&&(X=zd(x,D,S)),X}function M(L=v){const X=zd(_,k,()=>new WeakMap);return zd(X,L,()=>{const re={};for(const[ae,G]of Object.entries(n.selectors??{}))re[ae]=$4(G,L,()=>zd(x,L,S),k);return re})}return{reducerPath:A,getSelectors:M,get selectors(){return M(D)},selectSlice:D}}const C={name:i,reducer:j,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...O(s),injectInto(A,{reducerPath:k,...D}={}){const M=k??s;return A.inject({reducerPath:M,reducer:j},D),{...C,...O(M,!0)}}};return C}}function $4(e,t,r,n){function i(s,...c){let u=t(s);return typeof u>"u"&&n&&(u=r()),e(u,...c)}return i.unwrapped=e,i}var Zr=B4();function H4(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function F4({type:e,reducerName:t,createNotation:r},n,i){let s,c;if("reducer"in n){if(r&&!Y4(n))throw new Error(pn(17));s=n.reducer,c=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,c?zn(e,c):zn(e))}function K4(e){return e._reducerDefinitionType==="asyncThunk"}function Y4(e){return e._reducerDefinitionType==="reducerWithPrepare"}function G4({type:e,reducerName:t},r,n,i){if(!i)throw new Error(pn(18));const{payloadCreator:s,fulfilled:c,pending:u,rejected:m,settled:h,options:p}=r,v=i(e,s,p);n.exposeAction(t,v),c&&n.addCase(v.fulfilled,c),u&&n.addCase(v.pending,u),m&&n.addCase(v.rejected,m),h&&n.addMatcher(v.settled,h),n.exposeCaseReducer(t,{fulfilled:c||Ld,pending:u||Ld,rejected:m||Ld,settled:h||Ld})}function Ld(){}var V4="task",Mk="listener",Rk="completed",Wb="cancelled",W4=`task-${Wb}`,X4=`task-${Rk}`,Py=`${Mk}-${Wb}`,Z4=`${Mk}-${Rk}`,jm=class{constructor(e){this.code=e,this.message=`${V4} ${Wb} (reason: ${e})`}name="TaskAbortError";message},Xb=(e,t)=>{if(typeof e!="function")throw new TypeError(pn(32))},Cf=()=>{},qk=(e,t=Cf)=>(e.catch(t),e),zk=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),No=e=>{if(e.aborted)throw new jm(e.reason)};function Lk(e,t){let r=Cf;return new Promise((n,i)=>{const s=()=>i(new jm(e.reason));if(e.aborted){s();return}r=zk(e,s),t.finally(()=>r()).then(n,i)}).finally(()=>{r=Cf})}var Q4=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof jm?"cancelled":"rejected",error:r}}finally{t?.()}},Af=e=>t=>qk(Lk(e,t).then(r=>(No(e),r))),Ik=e=>{const t=Af(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Us}=Object,dE={},Sm="listenerMiddleware",J4=(e,t)=>{const r=n=>zk(e,()=>n.abort(e.reason));return(n,i)=>{Xb(n);const s=new AbortController;r(s);const c=Q4(async()=>{No(e),No(s.signal);const u=await n({pause:Af(s.signal),delay:Ik(s.signal),signal:s.signal});return No(s.signal),u},()=>s.abort(X4));return i?.autoJoin&&t.push(c.catch(Cf)),{result:Af(e)(c),cancel(){s.abort(W4)}}}},e5=(e,t)=>{const r=async(n,i)=>{No(t);let s=()=>{};const u=[new Promise((m,h)=>{let p=e({predicate:n,effect:(v,_)=>{_.unsubscribe(),m([v,_.getState(),_.getOriginalState()])}});s=()=>{p(),h()}})];i!=null&&u.push(new Promise(m=>setTimeout(m,i,null)));try{const m=await Lk(t,Promise.race(u));return No(t),m}finally{s()}};return(n,i)=>qk(r(n,i))},Uk=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=zn(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(pn(21));return Xb(s),{predicate:i,type:t,effect:s}},Bk=Us(e=>{const{type:t,predicate:r,effect:n}=Uk(e);return{id:L4(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(pn(22))}}},{withTypes:()=>Bk}),fE=(e,t)=>{const{type:r,effect:n,predicate:i}=Uk(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},My=e=>{e.pending.forEach(t=>{t.abort(Py)})},t5=(e,t)=>()=>{for(const r of t.keys())My(r);e.clear()},mE=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},$k=Us(zn(`${Sm}/add`),{withTypes:()=>$k}),r5=zn(`${Sm}/removeAll`),Hk=Us(zn(`${Sm}/remove`),{withTypes:()=>Hk}),n5=(...e)=>{console.error(`${Sm}/error`,...e)},Kc=(e={})=>{const t=new Map,r=new Map,n=x=>{const w=r.get(x)??0;r.set(x,w+1)},i=x=>{const w=r.get(x)??1;w===1?r.delete(x):r.set(x,w-1)},{extra:s,onError:c=n5}=e;Xb(c);const u=x=>(x.unsubscribe=()=>t.delete(x.id),t.set(x.id,x),w=>{x.unsubscribe(),w?.cancelActive&&My(x)}),m=x=>{const w=fE(t,x)??Bk(x);return u(w)};Us(m,{withTypes:()=>m});const h=x=>{const w=fE(t,x);return w&&(w.unsubscribe(),x.cancelActive&&My(w)),!!w};Us(h,{withTypes:()=>h});const p=async(x,w,j,S)=>{const O=new AbortController,C=e5(m,O.signal),A=[];try{x.pending.add(O),n(x),await Promise.resolve(x.effect(w,Us({},j,{getOriginalState:S,condition:(k,D)=>C(k,D).then(Boolean),take:C,delay:Ik(O.signal),pause:Af(O.signal),extra:s,signal:O.signal,fork:J4(O.signal,A),unsubscribe:x.unsubscribe,subscribe:()=>{t.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((k,D,M)=>{k!==O&&(k.abort(Py),M.delete(k))})},cancel:()=>{O.abort(Py),x.pending.delete(O)},throwIfCancelled:()=>{No(O.signal)}})))}catch(k){k instanceof jm||mE(c,k,{raisedBy:"effect"})}finally{await Promise.all(A),O.abort(Z4),i(x),x.pending.delete(O)}},v=t5(t,r);return{middleware:x=>w=>j=>{if(!yk(j))return w(j);if($k.match(j))return m(j.payload);if(r5.match(j)){v();return}if(Hk.match(j))return h(j.payload);let S=x.getState();const O=()=>{if(S===dE)throw new Error(pn(23));return S};let C;try{if(C=w(j),t.size>0){const A=x.getState(),k=Array.from(t.values());for(const D of k){let M=!1;try{M=D.predicate(j,A,S)}catch(L){M=!1,mE(c,L,{raisedBy:"predicate"})}M&&p(D,j,x,O)}}}finally{S=dE}return C},startListening:m,stopListening:h,clearListeners:v}};function pn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var a5={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Fk=Zr({name:"chartLayout",initialState:a5,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,s;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(i=t.payload.bottom)!==null&&i!==void 0?i:0,e.margin.left=(s=t.payload.left)!==null&&s!==void 0?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:i5,setLayout:o5,setChartSize:s5,setScale:l5}=Fk.actions,c5=Fk.reducer;function Kk(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function zt(e){return Number.isFinite(e)}function ma(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function hE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ls(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hE(Object(r),!0).forEach(function(n){u5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function u5(e,t,r){return(t=d5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d5(e){var t=f5(e,"string");return typeof t=="symbol"?t:t+""}function f5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pt(e,t,r){return Mt(e)||Mt(t)?r:fa(t)?qo(e,t,r):typeof t=="function"?t(e):r}var m5=(e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:s,verticalAlign:c,layout:u}=t;if((u==="vertical"||u==="horizontal"&&c==="middle")&&s!=="center"&&De(e[s]))return Ls(Ls({},e),{},{[s]:e[s]+(n||0)});if((u==="horizontal"||u==="vertical"&&s==="center")&&c!=="middle"&&De(e[c]))return Ls(Ls({},e),{},{[c]:e[c]+(i||0)})}return e},Vi=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Yk=(e,t,r,n)=>{if(n)return e.map(u=>u.coordinate);var i,s,c=e.map(u=>(u.coordinate===t&&(i=!0),u.coordinate===r&&(s=!0),u.coordinate));return i||c.push(t),s||c.push(r),c},Gk=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:s,scale:c,realScaleType:u,isCategorical:m,categoricalDomain:h,tickCount:p,ticks:v,niceTicks:_,axisType:x}=e;if(!c)return null;var w=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,j=i==="category"&&c.bandwidth?c.bandwidth()/w:0;if(j=x==="angleAxis"&&s&&s.length>=2?gr(s[0]-s[1])*2*j:j,v||_){var S=(v||_||[]).map((O,C)=>{var A=n?n.indexOf(O):O;return{coordinate:c(A)+j,value:O,offset:j,index:C}});return S.filter(O=>!Qn(O.coordinate))}return m&&h?h.map((O,C)=>({coordinate:c(O)+j,value:O,index:C,offset:j})):c.ticks&&p!=null?c.ticks(p).map((O,C)=>({coordinate:c(O)+j,value:O,offset:j,index:C})):c.domain().map((O,C)=>({coordinate:c(O)+j,value:n?n[O]:O,index:C,offset:j}))},pE=1e-4,h5=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),i=Math.min(n[0],n[1])-pE,s=Math.max(n[0],n[1])+pE,c=e(t[0]),u=e(t[r-1]);(c<i||c>s||u<i||u>s)&&e.domain([t[0],t[r-1]])}},p5=(e,t)=>{if(!t||t.length!==2||!De(t[0])||!De(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!De(e[0])||e[0]<r)&&(i[0]=r),(!De(e[1])||e[1]>n)&&(i[1]=n),i[0]>n&&(i[0]=n),i[1]<r&&(i[1]=r),i},v5=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0,u=0;u<r;++u){var m=e[u],h=m?.[i];if(h!=null){var p=h[1],v=h[0],_=Qn(p)?v:p;_>=0?(h[0]=s,h[1]=s+_,s=p):(h[0]=c,h[1]=c+_,c=p)}}}},g5=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var i=0;i<n;++i)for(var s=0,c=0;c<r;++c){var u=e[c],m=u?.[i];if(m!=null){var h=Qn(m[1])?m[0]:m[1];h>=0?(m[0]=s,m[1]=s+h,s=m[1]):(m[0]=0,m[1]=0)}}}},y5={sign:v5,expand:K3,none:Ro,silhouette:Y3,wiggle:G3,positive:g5},b5=(e,t,r)=>{var n,i=(n=y5[r])!==null&&n!==void 0?n:Ro,s=F3().keys(t).value((u,m)=>Number(pt(u,m,0))).order(jy).offset(i),c=s(e);return c.forEach((u,m)=>{u.forEach((h,p)=>{var v=pt(e[p],t[m],0);Array.isArray(v)&&v.length===2&&De(v[0])&&De(v[1])&&(h[0]=v[0],h[1]=v[1])})}),c};function _5(e){return e==null?void 0:String(e)}function vE(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:s,dataKey:c}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Mt(i[t.dataKey])){var u=JN(r,"value",i[t.dataKey]);if(u)return u.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var m=pt(i,Mt(c)?t.dataKey:c);return Mt(m)?null:t.scale(m)}var gE=e=>{var{axis:t,ticks:r,offset:n,bandSize:i,entry:s,index:c}=e;if(t.type==="category")return r[c]?r[c].coordinate+n:null;var u=pt(s,t.dataKey,t.scale.domain()[c]);return Mt(u)?null:t.scale(u)-i/2+n},x5=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return n<=0&&i>=0?0:i<0?i:n}return r[0]},w5=e=>{var t=e.flat(2).filter(De);return[Math.min(...t),Math.max(...t)]},j5=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],S5=(e,t,r)=>{if(e!=null)return j5(Object.keys(e).reduce((n,i)=>{var s=e[i];if(!s)return n;var{stackedData:c}=s,u=c.reduce((m,h)=>{var p=Kk(h,t,r),v=w5(p);return!zt(v[0])||!zt(v[1])?m:[Math.min(m[0],v[0]),Math.max(m[1],v[1])]},[1/0,-1/0]);return[Math.min(u[0],n[0]),Math.max(u[1],n[1])]},[1/0,-1/0]))},yE=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,bE=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Fs=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=pm(t,p=>p.coordinate),s=1/0,c=1,u=i.length;c<u;c++){var m=i[c],h=i[c-1];s=Math.min((m?.coordinate||0)-(h?.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function _E(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:s}=e;return Ls(Ls({},t),{},{dataKey:r,payload:n,value:i,name:s})}function Qs(e,t){if(e)return String(e);if(typeof t=="string")return t}var E5=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},O5=(e,t)=>t==="centric"?e.angle:e.radius,ti=e=>e.layout.width,ri=e=>e.layout.height,C5=e=>e.layout.scale,Vk=e=>e.layout.margin,Em=W(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Om=W(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Wk="data-recharts-item-index",Xk="data-recharts-item-id",Yc=60;function xE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Id(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xE(Object(r),!0).forEach(function(n){A5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A5(e,t,r){return(t=N5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N5(e){var t=k5(e,"string");return typeof t=="symbol"?t:t+""}function k5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D5=e=>e.brush.height;function T5(e){var t=Om(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Yc;return r+i}return r},0)}function P5(e){var t=Om(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var i=typeof n.width=="number"?n.width:Yc;return r+i}return r},0)}function M5(e){var t=Em(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function R5(e){var t=Em(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var cr=W([ti,ri,Vk,D5,T5,P5,M5,R5,pk,s4],(e,t,r,n,i,s,c,u,m,h)=>{var p={left:(r.left||0)+i,right:(r.right||0)+s},v={top:(r.top||0)+c,bottom:(r.bottom||0)+u},_=Id(Id({},v),p),x=_.bottom;_.bottom+=n,_=m5(_,m,h);var w=e-_.left-_.right,j=t-_.top-_.bottom;return Id(Id({brushBottom:x},_),{},{width:Math.max(w,0),height:Math.max(j,0)})}),q5=W(cr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Zb=W(ti,ri,(e,t)=>({x:0,y:0,width:e,height:t})),z5=y.createContext(null),Tr=()=>y.useContext(z5)!=null,Cm=e=>e.brush,Am=W([Cm,cr,Vk],(e,t,r)=>({height:e.height,x:De(e.x)?e.x:t.left,y:De(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:De(e.width)?e.width:t.width})),wg={},jg={},Sg={},wE;function L5(){return wE||(wE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:i,edges:s}={}){let c,u=null;const m=s!=null&&s.includes("leading"),h=s==null||s.includes("trailing"),p=()=>{u!==null&&(r.apply(c,u),c=void 0,u=null)},v=()=>{h&&p(),j()};let _=null;const x=()=>{_!=null&&clearTimeout(_),_=setTimeout(()=>{_=null,v()},n)},w=()=>{_!==null&&(clearTimeout(_),_=null)},j=()=>{w(),c=void 0,u=null},S=()=>{p()},O=function(...C){if(i?.aborted)return;c=this,u=C;const A=_==null;x(),m&&A&&p()};return O.schedule=x,O.cancel=j,O.flush=S,i?.addEventListener("abort",j,{once:!0}),O}e.debounce=t})(Sg)),Sg}var jE;function I5(){return jE||(jE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=L5();function r(n,i=0,s={}){typeof s!="object"&&(s={});const{leading:c=!1,trailing:u=!0,maxWait:m}=s,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let p,v=null;const _=t.debounce(function(...j){p=n.apply(this,j),v=null},i,{edges:h}),x=function(...j){return m!=null&&(v===null&&(v=Date.now()),Date.now()-v>=m)?(p=n.apply(this,j),v=Date.now(),_.cancel(),_.schedule(),p):(_.apply(this,j),p)},w=()=>(_.flush(),p);return x.cancel=_.cancel,x.flush=w,x}e.debounce=r})(jg)),jg}var SE;function U5(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I5();function r(n,i=0,s={}){const{leading:c=!0,trailing:u=!0}=s;return t.debounce(n,i,{leading:c,maxWait:i,trailing:u})}e.throttle=r})(wg)),wg}var Eg,EE;function B5(){return EE||(EE=1,Eg=U5().throttle),Eg}var $5=B5();const H5=Qa($5);var Nf=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=0;console.warn(r.replace(/%s/g,()=>i[c++]))}},Zk=(e,t,r)=>{var{width:n="100%",height:i="100%",aspect:s,maxHeight:c}=r,u=Ka(n)?e:Number(n),m=Ka(i)?t:Number(i);return s&&s>0&&(u?m=u/s:m&&(u=m*s),c&&m!=null&&m>c&&(m=c)),{calculatedWidth:u,calculatedHeight:m}},F5={width:0,height:0,overflow:"visible"},K5={width:0,overflowX:"visible"},Y5={height:0,overflowY:"visible"},G5={},V5=e=>{var{width:t,height:r}=e,n=Ka(t),i=Ka(r);return n&&i?F5:n?K5:i?Y5:G5};function W5(e){var{width:t,height:r,aspect:n}=e,i=t,s=r;return i===void 0&&s===void 0?(i="100%",s="100%"):i===void 0?i=n&&n>0?void 0:"100%":s===void 0&&(s=n&&n>0?void 0:"100%"),{width:i,height:s}}function Ry(){return Ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ry.apply(null,arguments)}function OE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function CE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(r),!0).forEach(function(n){X5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X5(e,t,r){return(t=Z5(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z5(e){var t=Q5(e,"string");return typeof t=="symbol"?t:t+""}function Q5(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qk=y.createContext({width:-1,height:-1});function J5(e){return ma(e.width)&&ma(e.height)}function Jk(e){var{children:t,width:r,height:n}=e,i=y.useMemo(()=>({width:r,height:n}),[r,n]);return J5(i)?y.createElement(Qk.Provider,{value:i},t):null}var Qb=()=>y.useContext(Qk),eU=y.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:i,height:s,minWidth:c=0,minHeight:u,maxHeight:m,children:h,debounce:p=0,id:v,className:_,onResize:x,style:w={}}=e,j=y.useRef(null),S=y.useRef();S.current=x,y.useImperativeHandle(t,()=>j.current);var[O,C]=y.useState({containerWidth:n.width,containerHeight:n.height}),A=y.useCallback((X,re)=>{C(ae=>{var G=Math.round(X),U=Math.round(re);return ae.containerWidth===G&&ae.containerHeight===U?ae:{containerWidth:G,containerHeight:U}})},[]);y.useEffect(()=>{if(j.current==null||typeof ResizeObserver>"u")return Hc;var X=U=>{var ue,{width:ve,height:q}=U[0].contentRect;A(ve,q),(ue=S.current)===null||ue===void 0||ue.call(S,ve,q)};p>0&&(X=H5(X,p,{trailing:!0,leading:!1}));var re=new ResizeObserver(X),{width:ae,height:G}=j.current.getBoundingClientRect();return A(ae,G),re.observe(j.current),()=>{re.disconnect()}},[A,p]);var{containerWidth:k,containerHeight:D}=O;Nf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:M,calculatedHeight:L}=Zk(k,D,{width:i,height:s,aspect:r,maxHeight:m});return Nf(M!=null&&M>0||L!=null&&L>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,M,L,i,s,c,u,r),y.createElement("div",{id:v?"".concat(v):void 0,className:ot("recharts-responsive-container",_),style:CE(CE({},w),{},{width:i,height:s,minWidth:c,minHeight:u,maxHeight:m}),ref:j},y.createElement("div",{style:V5({width:i,height:s})},y.createElement(Jk,{width:M,height:L},h)))}),Og=y.forwardRef((e,t)=>{var r=Qb();if(ma(r.width)&&ma(r.height))return e.children;var{width:n,height:i}=W5({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:s,calculatedHeight:c}=Zk(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return De(s)&&De(c)?y.createElement(Jk,{width:s,height:c},e.children):y.createElement(eU,Ry({},e,{width:n,height:i,ref:t}))});function eD(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Nm=()=>{var e,t=Tr(),r=Te(q5),n=Te(Am),i=(e=Te(Cm))===null||e===void 0?void 0:e.padding;return!t||!n||!i?r:{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}},tU={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},tD=()=>{var e;return(e=Te(cr))!==null&&e!==void 0?e:tU},rD=()=>Te(ti),nD=()=>Te(ri),kZ=()=>Te(e=>e.layout.margin),Je=e=>e.layout.layoutType,Ko=()=>Te(Je),DZ=()=>{var e=Ko();if(e==="horizontal"||e==="vertical")return e},rU=()=>{var e=Ko();return e!==void 0},km=e=>{var t=Rt(),r=Tr(),{width:n,height:i}=e,s=Qb(),c=n,u=i;return s&&(c=s.width>0?s.width:n,u=s.height>0?s.height:i),y.useEffect(()=>{!r&&ma(c)&&ma(u)&&t(s5({width:c,height:u}))},[t,r,c,u]),null},aD=Symbol.for("immer-nothing"),AE=Symbol.for("immer-draftable"),gn=Symbol.for("immer-state");function Gn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Oc=Object.getPrototypeOf;function Ks(e){return!!e&&!!e[gn]}function Lo(e){return e?iD(e)||Array.isArray(e)||!!e[AE]||!!e.constructor?.[AE]||Gc(e)||Tm(e):!1}var nU=Object.prototype.constructor.toString(),NE=new WeakMap;function iD(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=NE.get(r);return n===void 0&&(n=Function.toString.call(r),NE.set(r,n)),n===nU}function kf(e,t,r=!0){Dm(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function Dm(e){const t=e[gn];return t?t.type_:Array.isArray(e)?1:Gc(e)?2:Tm(e)?3:0}function qy(e,t){return Dm(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function oD(e,t,r){const n=Dm(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function aU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Gc(e){return e instanceof Map}function Tm(e){return e instanceof Set}function wo(e){return e.copy_||e.base_}function zy(e,t){if(Gc(e))return new Map(e);if(Tm(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=iD(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[gn];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const c=i[s],u=n[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(n[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[c]})}return Object.create(Oc(e),n)}else{const n=Oc(e);if(n!==null&&r)return{...e};const i=Object.create(n);return Object.assign(i,e)}}function Jb(e,t=!1){return Pm(e)||Ks(e)||!Lo(e)||(Dm(e)>1&&Object.defineProperties(e,{set:Ud,add:Ud,clear:Ud,delete:Ud}),Object.freeze(e),t&&Object.values(e).forEach(r=>Jb(r,!0))),e}function iU(){Gn(2)}var Ud={value:iU};function Pm(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var oU={};function Io(e){const t=oU[e];return t||Gn(0,e),t}var Cc;function sD(){return Cc}function sU(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function kE(e,t){t&&(Io("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ly(e){Iy(e),e.drafts_.forEach(lU),e.drafts_=null}function Iy(e){e===Cc&&(Cc=e.parent_)}function DE(e){return Cc=sU(Cc,e)}function lU(e){const t=e[gn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function TE(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[gn].modified_&&(Ly(t),Gn(4)),Lo(e)&&(e=Df(t,e),t.parent_||Tf(t,e)),t.patches_&&Io("Patches").generateReplacementPatches_(r[gn].base_,e,t.patches_,t.inversePatches_)):e=Df(t,r,[]),Ly(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==aD?e:void 0}function Df(e,t,r){if(Pm(t))return t;const n=e.immer_.shouldUseStrictIteration(),i=t[gn];if(!i)return kf(t,(s,c)=>PE(e,i,t,s,c,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return Tf(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let c=s,u=!1;i.type_===3&&(c=new Set(s),s.clear(),u=!0),kf(c,(m,h)=>PE(e,i,s,m,h,r,u),n),Tf(e,s,!1),r&&e.patches_&&Io("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function PE(e,t,r,n,i,s,c){if(i==null||typeof i!="object"&&!c)return;const u=Pm(i);if(!(u&&!c)){if(Ks(i)){const m=s&&t&&t.type_!==3&&!qy(t.assigned_,n)?s.concat(n):void 0,h=Df(e,i,m);if(oD(r,n,h),Ks(h))e.canAutoFreeze_=!1;else return}else c&&r.add(i);if(Lo(i)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&u)return;Df(e,i),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(Gc(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&Tf(e,i)}}}function Tf(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Jb(t,r)}function cU(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:sD(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,s=e0;r&&(i=[n],s=Ac);const{revoke:c,proxy:u}=Proxy.revocable(i,s);return n.draft_=u,n.revoke_=c,u}var e0={get(e,t){if(t===gn)return e;const r=wo(e);if(!qy(r,t))return uU(e,r,t);const n=r[t];return e.finalized_||!Lo(n)?n:n===Cg(e.base_,t)?(Ag(e),e.copy_[t]=By(n,e)):n},has(e,t){return t in wo(e)},ownKeys(e){return Reflect.ownKeys(wo(e))},set(e,t,r){const n=lD(wo(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=Cg(wo(e),t),s=i?.[gn];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(aU(r,i)&&(r!==void 0||qy(e.base_,t)))return!0;Ag(e),Uy(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Cg(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Ag(e),Uy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=wo(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Gn(11)},getPrototypeOf(e){return Oc(e.base_)},setPrototypeOf(){Gn(12)}},Ac={};kf(e0,(e,t)=>{Ac[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ac.deleteProperty=function(e,t){return Ac.set.call(this,e,t,void 0)};Ac.set=function(e,t,r){return e0.set.call(this,e[0],t,r,e[0])};function Cg(e,t){const r=e[gn];return(r?wo(r):e)[t]}function uU(e,t,r){const n=lD(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function lD(e,t){if(!(t in e))return;let r=Oc(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Oc(r)}}function Uy(e){e.modified_||(e.modified_=!0,e.parent_&&Uy(e.parent_))}function Ag(e){e.copy_||(e.copy_=zy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var dU=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const c=this;return function(m=s,...h){return c.produce(m,p=>r.call(this,p,...h))}}typeof r!="function"&&Gn(6),n!==void 0&&typeof n!="function"&&Gn(7);let i;if(Lo(t)){const s=DE(this),c=By(t,void 0);let u=!0;try{i=r(c),u=!1}finally{u?Ly(s):Iy(s)}return kE(s,n),TE(i,s)}else if(!t||typeof t!="object"){if(i=r(t),i===void 0&&(i=t),i===aD&&(i=void 0),this.autoFreeze_&&Jb(i,!0),n){const s=[],c=[];Io("Patches").generateReplacementPatches_(t,i,s,c),n(s,c)}return i}else Gn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(c,...u)=>this.produceWithPatches(c,m=>t(m,...u));let n,i;return[this.produce(t,r,(c,u)=>{n=c,i=u}),n,i]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Lo(e)||Gn(8),Ks(e)&&(e=fU(e));const t=DE(this),r=By(e,void 0);return r[gn].isManual_=!0,Iy(t),r}finishDraft(e,t){const r=e&&e[gn];(!r||!r.isManual_)&&Gn(9);const{scope_:n}=r;return kE(n,t),TE(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=Io("Patches").applyPatches_;return Ks(e)?n(e,t):this.produce(e,i=>n(i,t))}};function By(e,t){const r=Gc(e)?Io("MapSet").proxyMap_(e,t):Tm(e)?Io("MapSet").proxySet_(e,t):cU(e,t);return(t?t.scope_:sD()).drafts_.push(r),r}function fU(e){return Ks(e)||Gn(10,e),cD(e)}function cD(e){if(!Lo(e)||Pm(e))return e;const t=e[gn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=zy(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=zy(e,!0);return kf(r,(i,s)=>{oD(r,i,cD(s))},n),t&&(t.finalized_=!1),r}var mU=new dU;mU.produce;var hU={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},uD=Zr({name:"legend",initialState:hU,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:kt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Xn(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:kt()},removeLegendPayload:{reducer(e,t){var r=Xn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:kt()}}}),{setLegendSize:TZ,setLegendSettings:PZ,addLegendPayload:dD,replaceLegendPayload:fD,removeLegendPayload:mD}=uD.actions,pU=uD.reducer;function $y(){return $y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$y.apply(null,arguments)}function ME(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ng(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ME(Object(r),!0).forEach(function(n){vU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ME(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vU(e,t,r){return(t=gU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gU(e){var t=yU(e,"string");return typeof t=="symbol"?t:t+""}function yU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bU(e){return Array.isArray(e)&&fa(e[0])&&fa(e[1])?e.join(" ~ "):e}var _U=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:i={},payload:s,formatter:c,itemSorter:u,wrapperClassName:m,labelClassName:h,label:p,labelFormatter:v,accessibilityLayer:_=!1}=e,x=()=>{if(s&&s.length){var D={padding:0,margin:0},M=(u?pm(s,u):s).map((L,X)=>{if(L.type==="none")return null;var re=L.formatter||c||bU,{value:ae,name:G}=L,U=ae,ue=G;if(re){var ve=re(ae,G,L,X,s);if(Array.isArray(ve))[U,ue]=ve;else if(ve!=null)U=ve;else return null}var q=Ng({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},n);return y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(X),style:q},fa(ue)?y.createElement("span",{className:"recharts-tooltip-item-name"},ue):null,fa(ue)?y.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,y.createElement("span",{className:"recharts-tooltip-item-value"},U),y.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return y.createElement("ul",{className:"recharts-tooltip-item-list",style:D},M)}return null},w=Ng({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),j=Ng({margin:0},i),S=!Mt(p),O=S?p:"",C=ot("recharts-default-tooltip",m),A=ot("recharts-tooltip-label",h);S&&v&&s!==void 0&&s!==null&&(O=v(p,s));var k=_?{role:"status","aria-live":"assertive"}:{};return y.createElement("div",$y({className:C,style:w},k),y.createElement("p",{className:A,style:j},y.isValidElement(O)?O:"".concat(O)),x())},oc="recharts-tooltip-wrapper",xU={visibility:"hidden"};function wU(e){var{coordinate:t,translateX:r,translateY:n}=e;return ot(oc,{["".concat(oc,"-right")]:De(r)&&t&&De(t.x)&&r>=t.x,["".concat(oc,"-left")]:De(r)&&t&&De(t.x)&&r<t.x,["".concat(oc,"-bottom")]:De(n)&&t&&De(t.y)&&n>=t.y,["".concat(oc,"-top")]:De(n)&&t&&De(t.y)&&n<t.y})}function RE(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:i,position:s,reverseDirection:c,tooltipDimension:u,viewBox:m,viewBoxDimension:h}=e;if(s&&De(s[n]))return s[n];var p=r[n]-u-(i>0?i:0),v=r[n]+i;if(t[n])return c[n]?p:v;var _=m[n];if(_==null)return 0;if(c[n]){var x=p,w=_;return x<w?Math.max(v,_):Math.max(p,_)}if(h==null)return 0;var j=v+u,S=_+h;return j>S?Math.max(p,_):Math.max(v,_)}function jU(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function SU(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:i,reverseDirection:s,tooltipBox:c,useTranslate3d:u,viewBox:m}=e,h,p,v;return c.height>0&&c.width>0&&r?(p=RE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.width,viewBox:m,viewBoxDimension:m.width}),v=RE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:c.height,viewBox:m,viewBoxDimension:m.height}),h=jU({translateX:p,translateY:v,useTranslate3d:u})):h=xU,{cssProperties:h,cssClasses:wU({translateX:p,translateY:v,coordinate:r})}}function qE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qE(Object(r),!0).forEach(function(n){Hy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hy(e,t,r){return(t=EU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EU(e){var t=OU(e,"string");return typeof t=="symbol"?t:t+""}function OU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class CU extends y.PureComponent{constructor(){super(...arguments),Hy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Hy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:i,children:s,coordinate:c,hasPayload:u,isAnimationActive:m,offset:h,position:p,reverseDirection:v,useTranslate3d:_,viewBox:x,wrapperStyle:w,lastBoundingBox:j,innerRef:S,hasPortalFromProps:O}=this.props,{cssClasses:C,cssProperties:A}=SU({allowEscapeViewBox:r,coordinate:c,offsetTopLeft:h,position:p,reverseDirection:v,tooltipBox:{height:j.height,width:j.width},useTranslate3d:_,viewBox:x}),k=O?{}:Bd(Bd({transition:m&&t?"transform ".concat(n,"ms ").concat(i):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),D=Bd(Bd({},k),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},w);return y.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:D,ref:S},s)}}var hD=()=>{var e;return(e=Te(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Fy(){return Fy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fy.apply(null,arguments)}function zE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function LE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zE(Object(r),!0).forEach(function(n){AU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AU(e,t,r){return(t=NU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NU(e){var t=kU(e,"string");return typeof t=="symbol"?t:t+""}function kU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IE={curveBasisClosed:P3,curveBasisOpen:M3,curveBasis:T3,curveBumpX:y3,curveBumpY:b3,curveLinearClosed:R3,curveLinear:fm,curveMonotoneX:q3,curveMonotoneY:z3,curveNatural:L3,curveStep:I3,curveStepAfter:B3,curveStepBefore:U3},Pf=e=>zt(e.x)&&zt(e.y),UE=e=>e.base!=null&&Pf(e.base)&&Pf(e),sc=e=>e.x,lc=e=>e.y,DU=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat($c(e));return(r==="curveMonotone"||r==="curveBump")&&t?IE["".concat(r).concat(t==="vertical"?"Y":"X")]:IE[r]||fm},TU=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:s=!1}=e,c=DU(t,i),u=s?r.filter(Pf):r,m;if(Array.isArray(n)){var h=r.map((x,w)=>LE(LE({},x),{},{base:n[w]}));i==="vertical"?m=Pd().y(lc).x1(sc).x0(x=>x.base.x):m=Pd().x(sc).y1(lc).y0(x=>x.base.y);var p=m.defined(UE).curve(c),v=s?h.filter(UE):h;return p(v)}i==="vertical"&&De(n)?m=Pd().y(lc).x1(sc).x0(n):De(n)?m=Pd().x(sc).y1(lc).y0(n):m=UN().x(sc).y(lc);var _=m.defined(Pf).curve(c);return _(u)},t0=e=>{var{className:t,points:r,path:n,pathRef:i}=e,s=Ko();if((!r||!r.length)&&!n)return null;var c={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||s,connectNulls:e.connectNulls},u=r&&r.length?TU(c):n;return y.createElement("path",Fy({},vn(e),$b(e),{className:ot("recharts-curve",t),d:u===null?void 0:u,ref:i}))},PU=["x","y","top","left","width","height","className"];function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ky.apply(null,arguments)}function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function MU(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BE(Object(r),!0).forEach(function(n){RU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RU(e,t,r){return(t=qU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qU(e){var t=zU(e,"string");return typeof t=="symbol"?t:t+""}function zU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LU(e,t){if(e==null)return{};var r,n,i=IU(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function IU(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var UU=(e,t,r,n,i,s)=>"M".concat(e,",").concat(i,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),BU=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:s=0,height:c=0,className:u}=e,m=LU(e,PU),h=MU({x:t,y:r,top:n,left:i,width:s,height:c},m);return!De(t)||!De(r)||!De(s)||!De(c)||!De(n)||!De(i)?null:y.createElement("path",Ky({},Ur(h),{className:ot("recharts-cross",u),d:UU(t,r,s,c,n,i)}))};function $U(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function HE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(n){HU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HU(e,t,r){return(t=FU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FU(e){var t=KU(e,"string");return typeof t=="symbol"?t:t+""}function KU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YU=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),pD=(e,t,r)=>e.map(n=>"".concat(YU(n)," ").concat(t,"ms ").concat(r)).join(","),GU=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(i=>n.includes(i))),Nc=(e,t)=>Object.keys(t).reduce((r,n)=>HE(HE({},r),{},{[n]:e(n,t[n])}),{});function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FE(Object(r),!0).forEach(function(n){VU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VU(e,t,r){return(t=WU(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WU(e){var t=XU(e,"string");return typeof t=="symbol"?t:t+""}function XU(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mf=(e,t,r)=>e+(t-e)*r,Yy=e=>{var{from:t,to:r}=e;return t!==r},vD=(e,t,r)=>{var n=Nc((i,s)=>{if(Yy(s)){var[c,u]=e(s.from,s.to,s.velocity);return lr(lr({},s),{},{from:c,velocity:u})}return s},t);return r<1?Nc((i,s)=>Yy(s)&&n[i]!=null?lr(lr({},s),{},{velocity:Mf(s.velocity,n[i].velocity,r),from:Mf(s.from,n[i].from,r)}):s,t):vD(e,n,r-1)};function ZU(e,t,r,n,i,s){var c,u=n.reduce((_,x)=>lr(lr({},_),{},{[x]:{from:e[x],velocity:0,to:t[x]}}),{}),m=()=>Nc((_,x)=>x.from,u),h=()=>!Object.values(u).filter(Yy).length,p=null,v=_=>{c||(c=_);var x=_-c,w=x/r.dt;u=vD(r,u,w),i(lr(lr(lr({},e),t),m())),c=_,h()||(p=s.setTimeout(v))};return()=>(p=s.setTimeout(v),()=>{var _;(_=p)===null||_===void 0||_()})}function QU(e,t,r,n,i,s,c){var u=null,m=i.reduce((v,_)=>{var x=e[_],w=t[_];return x==null||w==null?v:lr(lr({},v),{},{[_]:[x,w]})},{}),h,p=v=>{h||(h=v);var _=(v-h)/n,x=Nc((j,S)=>Mf(...S,r(_)),m);if(s(lr(lr(lr({},e),t),x)),_<1)u=c.setTimeout(p);else{var w=Nc((j,S)=>Mf(...S,r(1)),m);s(lr(lr(lr({},e),t),w))}};return()=>(u=c.setTimeout(p),()=>{var v;(v=u)===null||v===void 0||v()})}const JU=(e,t,r,n,i,s)=>{var c=GU(e,t);return r==null?()=>(i(lr(lr({},e),t)),()=>{}):r.isStepper===!0?ZU(e,t,r,c,i,s):QU(e,t,r,n,c,i,s)};var Rf=1e-4,gD=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],yD=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),KE=(e,t)=>r=>{var n=gD(e,t);return yD(n,r)},e6=(e,t)=>r=>{var n=gD(e,t),i=[...n.map((s,c)=>s*c).slice(1),0];return yD(i,r)},t6=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var i=n.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},r6=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=t6(r[0]);if(i)return i}}return r.length===4?r:[0,0,1,1]},n6=(e,t,r,n)=>{var i=KE(e,r),s=KE(t,n),c=e6(e,r),u=h=>h>1?1:h<0?0:h,m=h=>{for(var p=h>1?1:h,v=p,_=0;_<8;++_){var x=i(v)-p,w=c(v);if(Math.abs(x-p)<Rf||w<Rf)return s(v);v=u(v-x/w)}return s(v)};return m.isStepper=!1,m},YE=function(){return n6(...r6(...arguments))},a6=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:i=17}=t,s=(c,u,m)=>{var h=-(c-u)*r,p=m*n,v=m+(h-p)*i/1e3,_=m*i/1e3+c;return Math.abs(_-u)<Rf&&Math.abs(v)<Rf?[u,0]:[_,v]};return s.isStepper=!0,s.dt=i,s},i6=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return YE(e);case"spring":return a6();default:if(e.split("(")[0]==="cubic-bezier")return YE(e)}return typeof e=="function"?e:null};function o6(e){var t,r=()=>null,n=!1,i=null,s=c=>{if(!n){if(Array.isArray(c)){if(!c.length)return;var u=c,[m,...h]=u;if(typeof m=="number"){i=e.setTimeout(s.bind(null,h),m);return}s(m),i=e.setTimeout(s.bind(null,h));return}typeof c=="string"&&(t=c,r(t)),typeof c=="object"&&(t=c,r(t)),typeof c=="function"&&c()}};return{stop:()=>{n=!0},start:c=>{n=!1,i&&(i(),i=null),s(c)},subscribe:c=>(r=c,()=>{r=()=>null}),getTimeoutController:()=>e}}class s6{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),i=null,s=c=>{c-n>=r?t(c):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function l6(){return o6(new s6)}var c6=y.createContext(l6);function u6(e,t){var r=y.useContext(c6);return y.useMemo(()=>t??r(e),[e,t,r])}var d6=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Mm={isSsr:d6()},f6={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},GE={t:0},kg={t:1};function Vc(e){var t=br(e,f6),{isActive:r,canBegin:n,duration:i,easing:s,begin:c,onAnimationEnd:u,onAnimationStart:m,children:h}=t,p=r==="auto"?!Mm.isSsr:r,v=u6(t.animationId,t.animationManager),[_,x]=y.useState(p?GE:kg),w=y.useRef(null);return y.useEffect(()=>{p||x(kg)},[p]),y.useEffect(()=>{if(!p||!n)return Hc;var j=JU(GE,kg,i6(s),i,x,v.getTimeoutController()),S=()=>{w.current=j()};return v.start([m,c,S,i,u]),()=>{v.stop(),w.current&&w.current(),u()}},[p,n,i,s,c,m,u,v]),h(_.t)}function Wc(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=y.useRef(wc(t)),n=y.useRef(e);return n.current!==e&&(r.current=wc(t),n.current=e),r.current}var m6=["radius"],h6=["radius"],VE,WE,XE,ZE,QE,JE,eO,tO,rO,nO;function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aO(Object(r),!0).forEach(function(n){p6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p6(e,t,r){return(t=v6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v6(e){var t=g6(e,"string");return typeof t=="symbol"?t:t+""}function g6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qf.apply(null,arguments)}function oO(e,t){if(e==null)return{};var r,n,i=y6(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function y6(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var sO=(e,t,r,n,i)=>{var s=Ui(r),c=Ui(n),u=Math.min(Math.abs(s)/2,Math.abs(c)/2),m=c>=0?1:-1,h=s>=0?1:-1,p=c>=0&&s>=0||c<0&&s<0?1:0,v;if(u>0&&i instanceof Array){for(var _=[0,0,0,0],x=0,w=4;x<w;x++)_[x]=i[x]>u?u:i[x];v=Ft(VE||(VE=sa(["M",",",""])),e,t+m*_[0]),_[0]>0&&(v+=Ft(WE||(WE=sa(["A ",",",",0,0,",",",",",""])),_[0],_[0],p,e+h*_[0],t)),v+=Ft(XE||(XE=sa(["L ",",",""])),e+r-h*_[1],t),_[1]>0&&(v+=Ft(ZE||(ZE=sa(["A ",",",",0,0,",`,
        `,",",""])),_[1],_[1],p,e+r,t+m*_[1])),v+=Ft(QE||(QE=sa(["L ",",",""])),e+r,t+n-m*_[2]),_[2]>0&&(v+=Ft(JE||(JE=sa(["A ",",",",0,0,",`,
        `,",",""])),_[2],_[2],p,e+r-h*_[2],t+n)),v+=Ft(eO||(eO=sa(["L ",",",""])),e+h*_[3],t+n),_[3]>0&&(v+=Ft(tO||(tO=sa(["A ",",",",0,0,",`,
        `,",",""])),_[3],_[3],p,e,t+n-m*_[3])),v+="Z"}else if(u>0&&i===+i&&i>0){var j=Math.min(u,i);v=Ft(rO||(rO=sa(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*j,j,j,p,e+h*j,t,e+r-h*j,t,j,j,p,e+r,t+m*j,e+r,t+n-m*j,j,j,p,e+r-h*j,t+n,e+h*j,t+n,j,j,p,e,t+n-m*j)}else v=Ft(nO||(nO=sa(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return v},lO={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bD=e=>{var t=br(e,lO),r=y.useRef(null),[n,i]=y.useState(-1);y.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var I=r.current.getTotalLength();I&&i(I)}catch{}},[]);var{x:s,y:c,width:u,height:m,radius:h,className:p}=t,{animationEasing:v,animationDuration:_,animationBegin:x,isAnimationActive:w,isUpdateAnimationActive:j}=t,S=y.useRef(u),O=y.useRef(m),C=y.useRef(s),A=y.useRef(c),k=y.useMemo(()=>({x:s,y:c,width:u,height:m,radius:h}),[s,c,u,m,h]),D=Wc(k,"rectangle-");if(s!==+s||c!==+c||u!==+u||m!==+m||u===0||m===0)return null;var M=ot("recharts-rectangle",p);if(!j){var L=Ur(t),{radius:X}=L,re=oO(L,m6);return y.createElement("path",qf({},re,{x:Ui(s),y:Ui(c),width:Ui(u),height:Ui(m),radius:typeof h=="number"?h:void 0,className:M,d:sO(s,c,u,m,h)}))}var ae=S.current,G=O.current,U=C.current,ue=A.current,ve="0px ".concat(n===-1?1:n,"px"),q="".concat(n,"px 0px"),R=pD(["strokeDasharray"],_,typeof v=="string"?v:lO.animationEasing);return y.createElement(Vc,{animationId:D,key:D,canBegin:n>0,duration:_,easing:v,isActive:j,begin:x},I=>{var ee=Dt(ae,u,I),H=Dt(G,m,I),se=Dt(U,s,I),Se=Dt(ue,c,I);r.current&&(S.current=ee,O.current=H,C.current=se,A.current=Se);var J;w?I>0?J={transition:R,strokeDasharray:q}:J={strokeDasharray:ve}:J={strokeDasharray:q};var $=Ur(t),{radius:ge}=$,Pe=oO($,h6);return y.createElement("path",qf({},Pe,{radius:typeof h=="number"?h:void 0,className:M,d:sO(se,Se,ee,H,h),ref:r,style:iO(iO({},J),t.style)}))})};function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function uO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(n){b6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b6(e,t,r){return(t=_6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _6(e){var t=x6(e,"string");return typeof t=="symbol"?t:t+""}function x6(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zf=Math.PI/180,w6=e=>e*180/Math.PI,tr=(e,t,r,n)=>({x:e+Math.cos(-zf*n)*r,y:t+Math.sin(-zf*n)*r}),_D=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},j6=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return Math.sqrt((r-i)**2+(n-s)**2)},S6=(e,t)=>{var{x:r,y:n}=e,{cx:i,cy:s}=t,c=j6({x:r,y:n},{x:i,y:s});if(c<=0)return{radius:c,angle:0};var u=(r-i)/c,m=Math.acos(u);return n>s&&(m=2*Math.PI-m),{radius:c,angle:w6(m),angleInRadian:m}},E6=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),i=Math.floor(r/360),s=Math.min(n,i);return{startAngle:t-s*360,endAngle:r-s*360}},O6=(e,t)=>{var{startAngle:r,endAngle:n}=t,i=Math.floor(r/360),s=Math.floor(n/360),c=Math.min(i,s);return e+c*360},C6=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:i,angle:s}=S6({x:r,y:n},t),{innerRadius:c,outerRadius:u}=t;if(i<c||i>u||i===0)return null;var{startAngle:m,endAngle:h}=E6(t),p=s,v;if(m<=h){for(;p>h;)p-=360;for(;p<m;)p+=360;v=p>=m&&p<=h}else{for(;p>m;)p-=360;for(;p<h;)p+=360;v=p>=h&&p<=m}return v?uO(uO({},t),{},{radius:i,angle:O6(p,t)}):null};function xD(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:s}=e,c=tr(t,r,n,i),u=tr(t,r,n,s);return{points:[c,u],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}var dO,fO,mO,hO,pO,vO,gO;function Gy(){return Gy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gy.apply(null,arguments)}function Eo(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var A6=(e,t)=>{var r=gr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},$d=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:s,isExternal:c,cornerRadius:u,cornerIsExternal:m}=e,h=u*(c?1:-1)+n,p=Math.asin(u/h)/zf,v=m?i:i+s*p,_=tr(t,r,h,v),x=tr(t,r,n,v),w=m?i-s*p:i,j=tr(t,r,h*Math.cos(p*zf),w);return{center:_,circleTangency:x,lineTangency:j,theta:p}},wD=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:s,endAngle:c}=e,u=A6(s,c),m=s+u,h=tr(t,r,i,s),p=tr(t,r,i,m),v=Ft(dO||(dO=Eo(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,i,i,+(Math.abs(u)>180),+(s>m),p.x,p.y);if(n>0){var _=tr(t,r,n,s),x=tr(t,r,n,m);v+=Ft(fO||(fO=Eo(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),x.x,x.y,n,n,+(Math.abs(u)>180),+(s<=m),_.x,_.y)}else v+=Ft(mO||(mO=Eo(["L ",","," Z"])),t,r);return v},N6=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:s,forceCornerRadius:c,cornerIsExternal:u,startAngle:m,endAngle:h}=e,p=gr(h-m),{circleTangency:v,lineTangency:_,theta:x}=$d({cx:t,cy:r,radius:i,angle:m,sign:p,cornerRadius:s,cornerIsExternal:u}),{circleTangency:w,lineTangency:j,theta:S}=$d({cx:t,cy:r,radius:i,angle:h,sign:-p,cornerRadius:s,cornerIsExternal:u}),O=u?Math.abs(m-h):Math.abs(m-h)-x-S;if(O<0)return c?Ft(hO||(hO=Eo(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),_.x,_.y,s,s,s*2,s,s,-s*2):wD({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:m,endAngle:h});var C=Ft(pO||(pO=Eo(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),_.x,_.y,s,s,+(p<0),v.x,v.y,i,i,+(O>180),+(p<0),w.x,w.y,s,s,+(p<0),j.x,j.y);if(n>0){var{circleTangency:A,lineTangency:k,theta:D}=$d({cx:t,cy:r,radius:n,angle:m,sign:p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),{circleTangency:M,lineTangency:L,theta:X}=$d({cx:t,cy:r,radius:n,angle:h,sign:-p,isExternal:!0,cornerRadius:s,cornerIsExternal:u}),re=u?Math.abs(m-h):Math.abs(m-h)-D-X;if(re<0&&s===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+=Ft(vO||(vO=Eo(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),L.x,L.y,s,s,+(p<0),M.x,M.y,n,n,+(re>180),+(p>0),A.x,A.y,s,s,+(p<0),k.x,k.y)}else C+=Ft(gO||(gO=Eo(["L",",","Z"])),t,r);return C},k6={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jD=e=>{var t=br(e,k6),{cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:p,className:v}=t;if(s<i||h===p)return null;var _=ot("recharts-sector",v),x=s-i,w=Dr(c,x,0,!0),j;return w>0&&Math.abs(h-p)<360?j=N6({cx:r,cy:n,innerRadius:i,outerRadius:s,cornerRadius:Math.min(w,x/2),forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:p}):j=wD({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:h,endAngle:p}),y.createElement("path",Gy({},Ur(t),{className:_,d:j}))};function D6(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(rk(t)){if(e==="centric"){var{cx:n,cy:i,innerRadius:s,outerRadius:c,angle:u}=t,m=tr(n,i,s,u),h=tr(n,i,c,u);return[{x:m.x,y:m.y},{x:h.x,y:h.y}]}return xD(t)}}var Dg={},Tg={},Pg={},yO;function T6(){return yO||(yO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mk();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(Pg)),Pg}var bO;function P6(){return bO||(bO=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=T6();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(Tg)),Tg}var _O;function M6(){return _O||(_O=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hk(),r=P6();function n(i,s,c){c&&typeof c!="number"&&t.isIterateeCall(i,s,c)&&(s=c=void 0),i=r.toFinite(i),s===void 0?(s=i,i=0):s=r.toFinite(s),c=c===void 0?i<s?1:-1:r.toFinite(c);const u=Math.max(Math.ceil((s-i)/(c||1)),0),m=new Array(u);for(let h=0;h<u;h++)m[h]=i,i+=c;return m}e.range=n})(Dg)),Dg}var Mg,xO;function R6(){return xO||(xO=1,Mg=M6().range),Mg}var q6=R6();const SD=Qa(q6);function Bi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function z6(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function r0(e){let t,r,n;e.length!==2?(t=Bi,r=(u,m)=>Bi(e(u),m),n=(u,m)=>e(u)-m):(t=e===Bi||e===z6?e:L6,r=e,n=e);function i(u,m,h=0,p=u.length){if(h<p){if(t(m,m)!==0)return p;do{const v=h+p>>>1;r(u[v],m)<0?h=v+1:p=v}while(h<p)}return h}function s(u,m,h=0,p=u.length){if(h<p){if(t(m,m)!==0)return p;do{const v=h+p>>>1;r(u[v],m)<=0?h=v+1:p=v}while(h<p)}return h}function c(u,m,h=0,p=u.length){const v=i(u,m,h,p-1);return v>h&&n(u[v-1],m)>-n(u[v],m)?v-1:v}return{left:i,center:c,right:s}}function L6(){return 0}function ED(e){return e===null?NaN:+e}function*I6(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const U6=r0(Bi),Xc=U6.right;r0(ED).center;class wO extends Map{constructor(t,r=H6){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(jO(this,t))}has(t){return super.has(jO(this,t))}set(t,r){return super.set(B6(this,t),r)}delete(t){return super.delete($6(this,t))}}function jO({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function B6({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function $6({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function H6(e){return e!==null&&typeof e=="object"?e.valueOf():e}function F6(e=Bi){if(e===Bi)return OD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function OD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const K6=Math.sqrt(50),Y6=Math.sqrt(10),G6=Math.sqrt(2);function Lf(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),c=s>=K6?10:s>=Y6?5:s>=G6?2:1;let u,m,h;return i<0?(h=Math.pow(10,-i)/c,u=Math.round(e*h),m=Math.round(t*h),u/h<e&&++u,m/h>t&&--m,h=-h):(h=Math.pow(10,i)*c,u=Math.round(e/h),m=Math.round(t/h),u*h<e&&++u,m*h>t&&--m),m<u&&.5<=r&&r<2?Lf(e,t,r*2):[u,m,h]}function Vy(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,c]=n?Lf(t,e,r):Lf(e,t,r);if(!(s>=i))return[];const u=s-i+1,m=new Array(u);if(n)if(c<0)for(let h=0;h<u;++h)m[h]=(s-h)/-c;else for(let h=0;h<u;++h)m[h]=(s-h)*c;else if(c<0)for(let h=0;h<u;++h)m[h]=(i+h)/-c;else for(let h=0;h<u;++h)m[h]=(i+h)*c;return m}function Wy(e,t,r){return t=+t,e=+e,r=+r,Lf(e,t,r)[2]}function Xy(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?Wy(t,e,r):Wy(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function SO(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function EO(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function CD(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?OD:F6(i);n>r;){if(n-r>600){const m=n-r+1,h=t-r+1,p=Math.log(m),v=.5*Math.exp(2*p/3),_=.5*Math.sqrt(p*v*(m-v)/m)*(h-m/2<0?-1:1),x=Math.max(r,Math.floor(t-h*v/m+_)),w=Math.min(n,Math.floor(t+(m-h)*v/m+_));CD(e,t,x,w,i)}const s=e[t];let c=r,u=n;for(cc(e,r,t),i(e[n],s)>0&&cc(e,r,n);c<u;){for(cc(e,c,u),++c,--u;i(e[c],s)<0;)++c;for(;i(e[u],s)>0;)--u}i(e[r],s)===0?cc(e,r,u):(++u,cc(e,u,n)),u<=t&&(r=u+1),t<=u&&(n=u-1)}return e}function cc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function V6(e,t,r){if(e=Float64Array.from(I6(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return EO(e);if(t>=1)return SO(e);var n,i=(n-1)*t,s=Math.floor(i),c=SO(CD(e,s).subarray(0,s+1)),u=EO(e.subarray(s+1));return c+(u-c)*(i-s)}}function W6(e,t,r=ED){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),c=+r(e[s],s,e),u=+r(e[s+1],s+1,e);return c+(u-c)*(i-s)}}function X6(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function In(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ni(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Zy=Symbol("implicit");function n0(){var e=new wO,t=[],r=[],n=Zy;function i(s){let c=e.get(s);if(c===void 0){if(n!==Zy)return n;e.set(s,c=t.push(s)-1)}return r[c%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new wO;for(const c of s)e.has(c)||e.set(c,t.push(c)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return n0(t,r).unknown(n)},In.apply(i,arguments),i}function a0(){var e=n0().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,c,u=!1,m=0,h=0,p=.5;delete e.unknown;function v(){var _=t().length,x=i<n,w=x?i:n,j=x?n:i;s=(j-w)/Math.max(1,_-m+h*2),u&&(s=Math.floor(s)),w+=(j-w-s*(_-m))*p,c=s*(1-m),u&&(w=Math.round(w),c=Math.round(c));var S=X6(_).map(function(O){return w+s*O});return r(x?S.reverse():S)}return e.domain=function(_){return arguments.length?(t(_),v()):t()},e.range=function(_){return arguments.length?([n,i]=_,n=+n,i=+i,v()):[n,i]},e.rangeRound=function(_){return[n,i]=_,n=+n,i=+i,u=!0,v()},e.bandwidth=function(){return c},e.step=function(){return s},e.round=function(_){return arguments.length?(u=!!_,v()):u},e.padding=function(_){return arguments.length?(m=Math.min(1,h=+_),v()):m},e.paddingInner=function(_){return arguments.length?(m=Math.min(1,_),v()):m},e.paddingOuter=function(_){return arguments.length?(h=+_,v()):h},e.align=function(_){return arguments.length?(p=Math.max(0,Math.min(1,_)),v()):p},e.copy=function(){return a0(t(),[n,i]).round(u).paddingInner(m).paddingOuter(h).align(p)},In.apply(v(),arguments)}function AD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return AD(t())},e}function Z6(){return AD(a0.apply(null,arguments).paddingInner(1))}function i0(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ND(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Zc(){}var kc=.7,If=1/kc,Bs="\\s*([+-]?\\d+)\\s*",Dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",da="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Q6=/^#([0-9a-f]{3,8})$/,J6=new RegExp(`^rgb\\(${Bs},${Bs},${Bs}\\)$`),eB=new RegExp(`^rgb\\(${da},${da},${da}\\)$`),tB=new RegExp(`^rgba\\(${Bs},${Bs},${Bs},${Dc}\\)$`),rB=new RegExp(`^rgba\\(${da},${da},${da},${Dc}\\)$`),nB=new RegExp(`^hsl\\(${Dc},${da},${da}\\)$`),aB=new RegExp(`^hsla\\(${Dc},${da},${da},${Dc}\\)$`),OO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};i0(Zc,Tc,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:CO,formatHex:CO,formatHex8:iB,formatHsl:oB,formatRgb:AO,toString:AO});function CO(){return this.rgb().formatHex()}function iB(){return this.rgb().formatHex8()}function oB(){return kD(this).formatHsl()}function AO(){return this.rgb().formatRgb()}function Tc(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Q6.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?NO(t):r===3?new Xr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Hd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Hd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=J6.exec(e))?new Xr(t[1],t[2],t[3],1):(t=eB.exec(e))?new Xr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=tB.exec(e))?Hd(t[1],t[2],t[3],t[4]):(t=rB.exec(e))?Hd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=nB.exec(e))?TO(t[1],t[2]/100,t[3]/100,1):(t=aB.exec(e))?TO(t[1],t[2]/100,t[3]/100,t[4]):OO.hasOwnProperty(e)?NO(OO[e]):e==="transparent"?new Xr(NaN,NaN,NaN,0):null}function NO(e){return new Xr(e>>16&255,e>>8&255,e&255,1)}function Hd(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xr(e,t,r,n)}function sB(e){return e instanceof Zc||(e=Tc(e)),e?(e=e.rgb(),new Xr(e.r,e.g,e.b,e.opacity)):new Xr}function Qy(e,t,r,n){return arguments.length===1?sB(e):new Xr(e,t,r,n??1)}function Xr(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}i0(Xr,Qy,ND(Zc,{brighter(e){return e=e==null?If:Math.pow(If,e),new Xr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?kc:Math.pow(kc,e),new Xr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xr(ko(this.r),ko(this.g),ko(this.b),Uf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kO,formatHex:kO,formatHex8:lB,formatRgb:DO,toString:DO}));function kO(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}`}function lB(){return`#${Oo(this.r)}${Oo(this.g)}${Oo(this.b)}${Oo((isNaN(this.opacity)?1:this.opacity)*255)}`}function DO(){const e=Uf(this.opacity);return`${e===1?"rgb(":"rgba("}${ko(this.r)}, ${ko(this.g)}, ${ko(this.b)}${e===1?")":`, ${e})`}`}function Uf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ko(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Oo(e){return e=ko(e),(e<16?"0":"")+e.toString(16)}function TO(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Vn(e,t,r,n)}function kD(e){if(e instanceof Vn)return new Vn(e.h,e.s,e.l,e.opacity);if(e instanceof Zc||(e=Tc(e)),!e)return new Vn;if(e instanceof Vn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),c=NaN,u=s-i,m=(s+i)/2;return u?(t===s?c=(r-n)/u+(r<n)*6:r===s?c=(n-t)/u+2:c=(t-r)/u+4,u/=m<.5?s+i:2-s-i,c*=60):u=m>0&&m<1?0:c,new Vn(c,u,m,e.opacity)}function cB(e,t,r,n){return arguments.length===1?kD(e):new Vn(e,t,r,n??1)}function Vn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}i0(Vn,cB,ND(Zc,{brighter(e){return e=e==null?If:Math.pow(If,e),new Vn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?kc:Math.pow(kc,e),new Vn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new Xr(Rg(e>=240?e-240:e+120,i,n),Rg(e,i,n),Rg(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Vn(PO(this.h),Fd(this.s),Fd(this.l),Uf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Uf(this.opacity);return`${e===1?"hsl(":"hsla("}${PO(this.h)}, ${Fd(this.s)*100}%, ${Fd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function PO(e){return e=(e||0)%360,e<0?e+360:e}function Fd(e){return Math.max(0,Math.min(1,e||0))}function Rg(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const o0=e=>()=>e;function uB(e,t){return function(r){return e+r*t}}function dB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function fB(e){return(e=+e)==1?DD:function(t,r){return r-t?dB(t,r,e):o0(isNaN(t)?r:t)}}function DD(e,t){var r=t-e;return r?uB(e,r):o0(isNaN(e)?t:e)}const MO=(function e(t){var r=fB(t);function n(i,s){var c=r((i=Qy(i)).r,(s=Qy(s)).r),u=r(i.g,s.g),m=r(i.b,s.b),h=DD(i.opacity,s.opacity);return function(p){return i.r=c(p),i.g=u(p),i.b=m(p),i.opacity=h(p),i+""}}return n.gamma=e,n})(1);function mB(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function hB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pB(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),c;for(c=0;c<n;++c)i[c]=Js(e[c],t[c]);for(;c<r;++c)s[c]=t[c];return function(u){for(c=0;c<n;++c)s[c]=i[c](u);return s}}function vB(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Bf(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function gB(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Js(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var Jy=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qg=new RegExp(Jy.source,"g");function yB(e){return function(){return e}}function bB(e){return function(t){return e(t)+""}}function _B(e,t){var r=Jy.lastIndex=qg.lastIndex=0,n,i,s,c=-1,u=[],m=[];for(e=e+"",t=t+"";(n=Jy.exec(e))&&(i=qg.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),u[c]?u[c]+=s:u[++c]=s),(n=n[0])===(i=i[0])?u[c]?u[c]+=i:u[++c]=i:(u[++c]=null,m.push({i:c,x:Bf(n,i)})),r=qg.lastIndex;return r<t.length&&(s=t.slice(r),u[c]?u[c]+=s:u[++c]=s),u.length<2?m[0]?bB(m[0].x):yB(t):(t=m.length,function(h){for(var p=0,v;p<t;++p)u[(v=m[p]).i]=v.x(h);return u.join("")})}function Js(e,t){var r=typeof t,n;return t==null||r==="boolean"?o0(t):(r==="number"?Bf:r==="string"?(n=Tc(t))?(t=n,MO):_B:t instanceof Tc?MO:t instanceof Date?vB:hB(t)?mB:Array.isArray(t)?pB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?gB:Bf)(e,t)}function s0(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function xB(e,t){t===void 0&&(t=e,e=Js);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(c){var u=Math.max(0,Math.min(n-1,Math.floor(c*=n)));return s[u](c-u)}}function wB(e){return function(){return e}}function $f(e){return+e}var RO=[0,1];function Ir(e){return e}function eb(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:wB(isNaN(t)?NaN:.5)}function jB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function SB(e,t,r){var n=e[0],i=e[1],s=t[0],c=t[1];return i<n?(n=eb(i,n),s=r(c,s)):(n=eb(n,i),s=r(s,c)),function(u){return s(n(u))}}function EB(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),c=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<n;)i[c]=eb(e[c],e[c+1]),s[c]=r(t[c],t[c+1]);return function(u){var m=Xc(e,u,1,n)-1;return s[m](i[m](u))}}function Qc(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Rm(){var e=RO,t=RO,r=Js,n,i,s,c=Ir,u,m,h;function p(){var _=Math.min(e.length,t.length);return c!==Ir&&(c=jB(e[0],e[_-1])),u=_>2?EB:SB,m=h=null,v}function v(_){return _==null||isNaN(_=+_)?s:(m||(m=u(e.map(n),t,r)))(n(c(_)))}return v.invert=function(_){return c(i((h||(h=u(t,e.map(n),Bf)))(_)))},v.domain=function(_){return arguments.length?(e=Array.from(_,$f),p()):e.slice()},v.range=function(_){return arguments.length?(t=Array.from(_),p()):t.slice()},v.rangeRound=function(_){return t=Array.from(_),r=s0,p()},v.clamp=function(_){return arguments.length?(c=_?!0:Ir,p()):c!==Ir},v.interpolate=function(_){return arguments.length?(r=_,p()):r},v.unknown=function(_){return arguments.length?(s=_,v):s},function(_,x){return n=_,i=x,p()}}function l0(){return Rm()(Ir,Ir)}function OB(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Hf(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ys(e){return e=Hf(Math.abs(e)),e?e[1]:NaN}function CB(e,t){return function(r,n){for(var i=r.length,s=[],c=0,u=e[0],m=0;i>0&&u>0&&(m+u+1>n&&(u=Math.max(1,n-m)),s.push(r.substring(i-=u,i+u)),!((m+=u+1)>n));)u=e[c=(c+1)%e.length];return s.reverse().join(t)}}function AB(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var NB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Pc(e){if(!(t=NB.exec(e)))throw new Error("invalid format: "+e);var t;return new c0({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Pc.prototype=c0.prototype;function c0(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}c0.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kB(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var TD;function DB(e,t){var r=Hf(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(TD=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,c=n.length;return s===c?n:s>c?n+new Array(s-c+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Hf(e,Math.max(0,t+s-1))[0]}function qO(e,t){var r=Hf(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const zO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:OB,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qO(e*100,t),r:qO,s:DB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function LO(e){return e}var IO=Array.prototype.map,UO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function TB(e){var t=e.grouping===void 0||e.thousands===void 0?LO:CB(IO.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?LO:AB(IO.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function h(v){v=Pc(v);var _=v.fill,x=v.align,w=v.sign,j=v.symbol,S=v.zero,O=v.width,C=v.comma,A=v.precision,k=v.trim,D=v.type;D==="n"?(C=!0,D="g"):zO[D]||(A===void 0&&(A=12),k=!0,D="g"),(S||_==="0"&&x==="=")&&(S=!0,_="0",x="=");var M=j==="$"?r:j==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",L=j==="$"?n:/[%p]/.test(D)?c:"",X=zO[D],re=/[defgprs%]/.test(D);A=A===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function ae(G){var U=M,ue=L,ve,q,R;if(D==="c")ue=X(G)+ue,G="";else{G=+G;var I=G<0||1/G<0;if(G=isNaN(G)?m:X(Math.abs(G),A),k&&(G=kB(G)),I&&+G==0&&w!=="+"&&(I=!1),U=(I?w==="("?w:u:w==="-"||w==="("?"":w)+U,ue=(D==="s"?UO[8+TD/3]:"")+ue+(I&&w==="("?")":""),re){for(ve=-1,q=G.length;++ve<q;)if(R=G.charCodeAt(ve),48>R||R>57){ue=(R===46?i+G.slice(ve+1):G.slice(ve))+ue,G=G.slice(0,ve);break}}}C&&!S&&(G=t(G,1/0));var ee=U.length+G.length+ue.length,H=ee<O?new Array(O-ee+1).join(_):"";switch(C&&S&&(G=t(H+G,H.length?O-ue.length:1/0),H=""),x){case"<":G=U+G+ue+H;break;case"=":G=U+H+G+ue;break;case"^":G=H.slice(0,ee=H.length>>1)+U+G+ue+H.slice(ee);break;default:G=H+U+G+ue;break}return s(G)}return ae.toString=function(){return v+""},ae}function p(v,_){var x=h((v=Pc(v),v.type="f",v)),w=Math.max(-8,Math.min(8,Math.floor(Ys(_)/3)))*3,j=Math.pow(10,-w),S=UO[8+w/3];return function(O){return x(j*O)+S}}return{format:h,formatPrefix:p}}var Kd,u0,PD;PB({thousands:",",grouping:[3],currency:["$",""]});function PB(e){return Kd=TB(e),u0=Kd.format,PD=Kd.formatPrefix,Kd}function MB(e){return Math.max(0,-Ys(Math.abs(e)))}function RB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ys(t)/3)))*3-Ys(Math.abs(e)))}function qB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ys(t)-Ys(e))+1}function MD(e,t,r,n){var i=Xy(e,t,r),s;switch(n=Pc(n??",f"),n.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=RB(i,c))&&(n.precision=s),PD(n,c)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=qB(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=MB(i))&&(n.precision=s-(n.type==="%")*2);break}}return u0(n)}function Wi(e){var t=e.domain;return e.ticks=function(r){var n=t();return Vy(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return MD(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,c=n[i],u=n[s],m,h,p=10;for(u<c&&(h=c,c=u,u=h,h=i,i=s,s=h);p-- >0;){if(h=Wy(c,u,r),h===m)return n[i]=c,n[s]=u,t(n);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;m=h}return e},e}function RD(){var e=l0();return e.copy=function(){return Qc(e,RD())},In.apply(e,arguments),Wi(e)}function qD(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,$f),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return qD(e).unknown(t)},e=arguments.length?Array.from(e,$f):[0,1],Wi(r)}function zD(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],c;return s<i&&(c=r,r=n,n=c,c=i,i=s,s=c),e[r]=t.floor(i),e[n]=t.ceil(s),e}function BO(e){return Math.log(e)}function $O(e){return Math.exp(e)}function zB(e){return-Math.log(-e)}function LB(e){return-Math.exp(-e)}function IB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function UB(e){return e===10?IB:e===Math.E?Math.exp:t=>Math.pow(e,t)}function BB(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function HO(e){return(t,r)=>-e(-t,r)}function d0(e){const t=e(BO,$O),r=t.domain;let n=10,i,s;function c(){return i=BB(n),s=UB(n),r()[0]<0?(i=HO(i),s=HO(s),e(zB,LB)):e(BO,$O),t}return t.base=function(u){return arguments.length?(n=+u,c()):n},t.domain=function(u){return arguments.length?(r(u),c()):r()},t.ticks=u=>{const m=r();let h=m[0],p=m[m.length-1];const v=p<h;v&&([h,p]=[p,h]);let _=i(h),x=i(p),w,j;const S=u==null?10:+u;let O=[];if(!(n%1)&&x-_<S){if(_=Math.floor(_),x=Math.ceil(x),h>0){for(;_<=x;++_)for(w=1;w<n;++w)if(j=_<0?w/s(-_):w*s(_),!(j<h)){if(j>p)break;O.push(j)}}else for(;_<=x;++_)for(w=n-1;w>=1;--w)if(j=_>0?w/s(-_):w*s(_),!(j<h)){if(j>p)break;O.push(j)}O.length*2<S&&(O=Vy(h,p,S))}else O=Vy(_,x,Math.min(x-_,S)).map(s);return v?O.reverse():O},t.tickFormat=(u,m)=>{if(u==null&&(u=10),m==null&&(m=n===10?"s":","),typeof m!="function"&&(!(n%1)&&(m=Pc(m)).precision==null&&(m.trim=!0),m=u0(m)),u===1/0)return m;const h=Math.max(1,n*u/t.ticks().length);return p=>{let v=p/s(Math.round(i(p)));return v*n<n-.5&&(v*=n),v<=h?m(p):""}},t.nice=()=>r(zD(r(),{floor:u=>s(Math.floor(i(u))),ceil:u=>s(Math.ceil(i(u)))})),t}function LD(){const e=d0(Rm()).domain([1,10]);return e.copy=()=>Qc(e,LD()).base(e.base()),In.apply(e,arguments),e}function FO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function KO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function f0(e){var t=1,r=e(FO(t),KO(t));return r.constant=function(n){return arguments.length?e(FO(t=+n),KO(t)):t},Wi(r)}function ID(){var e=f0(Rm());return e.copy=function(){return Qc(e,ID()).constant(e.constant())},In.apply(e,arguments)}function YO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function $B(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function HB(e){return e<0?-e*e:e*e}function m0(e){var t=e(Ir,Ir),r=1;function n(){return r===1?e(Ir,Ir):r===.5?e($B,HB):e(YO(r),YO(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Wi(t)}function h0(){var e=m0(Rm());return e.copy=function(){return Qc(e,h0()).exponent(e.exponent())},In.apply(e,arguments),e}function FB(){return h0.apply(null,arguments).exponent(.5)}function GO(e){return Math.sign(e)*e*e}function KB(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function UD(){var e=l0(),t=[0,1],r=!1,n;function i(s){var c=KB(e(s));return isNaN(c)?n:r?Math.round(c):c}return i.invert=function(s){return e.invert(GO(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,$f)).map(GO)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return UD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},In.apply(i,arguments),Wi(i)}function BD(){var e=[],t=[],r=[],n;function i(){var c=0,u=Math.max(1,t.length);for(r=new Array(u-1);++c<u;)r[c-1]=W6(e,c/u);return s}function s(c){return c==null||isNaN(c=+c)?n:t[Xc(r,c)]}return s.invertExtent=function(c){var u=t.indexOf(c);return u<0?[NaN,NaN]:[u>0?r[u-1]:e[0],u<r.length?r[u]:e[e.length-1]]},s.domain=function(c){if(!arguments.length)return e.slice();e=[];for(let u of c)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(Bi),i()},s.range=function(c){return arguments.length?(t=Array.from(c),i()):t.slice()},s.unknown=function(c){return arguments.length?(n=c,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return BD().domain(e).range(t).unknown(n)},In.apply(s,arguments)}function $D(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function c(m){return m!=null&&m<=m?i[Xc(n,m,0,r)]:s}function u(){var m=-1;for(n=new Array(r);++m<r;)n[m]=((m+1)*t-(m-r)*e)/(r+1);return c}return c.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,u()):[e,t]},c.range=function(m){return arguments.length?(r=(i=Array.from(m)).length-1,u()):i.slice()},c.invertExtent=function(m){var h=i.indexOf(m);return h<0?[NaN,NaN]:h<1?[e,n[0]]:h>=r?[n[r-1],t]:[n[h-1],n[h]]},c.unknown=function(m){return arguments.length&&(s=m),c},c.thresholds=function(){return n.slice()},c.copy=function(){return $D().domain([e,t]).range(i).unknown(s)},In.apply(Wi(c),arguments)}function HD(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[Xc(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var c=t.indexOf(s);return[e[c-1],e[c]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return HD().domain(e).range(t).unknown(r)},In.apply(i,arguments)}const zg=new Date,Lg=new Date;function ur(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const c=i(s),u=i.ceil(s);return s-c<u-s?c:u},i.offset=(s,c)=>(t(s=new Date(+s),c==null?1:Math.floor(c)),s),i.range=(s,c,u)=>{const m=[];if(s=i.ceil(s),u=u==null?1:Math.floor(u),!(s<c)||!(u>0))return m;let h;do m.push(h=new Date(+s)),t(s,u),e(s);while(h<s&&s<c);return m},i.filter=s=>ur(c=>{if(c>=c)for(;e(c),!s(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;t(c,-1),!s(c););else for(;--u>=0;)for(;t(c,1),!s(c););}),r&&(i.count=(s,c)=>(zg.setTime(+s),Lg.setTime(+c),e(zg),e(Lg),Math.floor(r(zg,Lg))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?c=>n(c)%s===0:c=>i.count(0,c)%s===0):i)),i}const Ff=ur(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Ff.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ur(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Ff);Ff.range;const Ua=1e3,qn=Ua*60,Ba=qn*60,Ga=Ba*24,p0=Ga*7,VO=Ga*30,Ig=Ga*365,Co=ur(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ua)},(e,t)=>(t-e)/Ua,e=>e.getUTCSeconds());Co.range;const v0=ur(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua)},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getMinutes());v0.range;const g0=ur(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*qn)},(e,t)=>(t-e)/qn,e=>e.getUTCMinutes());g0.range;const y0=ur(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ua-e.getMinutes()*qn)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getHours());y0.range;const b0=ur(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ba)},(e,t)=>(t-e)/Ba,e=>e.getUTCHours());b0.range;const Jc=ur(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qn)/Ga,e=>e.getDate()-1);Jc.range;const qm=ur(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ga,e=>e.getUTCDate()-1);qm.range;const FD=ur(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ga,e=>Math.floor(e/Ga));FD.range;function Yo(e){return ur(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*qn)/p0)}const zm=Yo(0),Kf=Yo(1),YB=Yo(2),GB=Yo(3),Gs=Yo(4),VB=Yo(5),WB=Yo(6);zm.range;Kf.range;YB.range;GB.range;Gs.range;VB.range;WB.range;function Go(e){return ur(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/p0)}const Lm=Go(0),Yf=Go(1),XB=Go(2),ZB=Go(3),Vs=Go(4),QB=Go(5),JB=Go(6);Lm.range;Yf.range;XB.range;ZB.range;Vs.range;QB.range;JB.range;const _0=ur(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());_0.range;const x0=ur(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());x0.range;const Va=ur(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Va.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ur(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Va.range;const Wa=ur(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Wa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ur(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Wa.range;function KD(e,t,r,n,i,s){const c=[[Co,1,Ua],[Co,5,5*Ua],[Co,15,15*Ua],[Co,30,30*Ua],[s,1,qn],[s,5,5*qn],[s,15,15*qn],[s,30,30*qn],[i,1,Ba],[i,3,3*Ba],[i,6,6*Ba],[i,12,12*Ba],[n,1,Ga],[n,2,2*Ga],[r,1,p0],[t,1,VO],[t,3,3*VO],[e,1,Ig]];function u(h,p,v){const _=p<h;_&&([h,p]=[p,h]);const x=v&&typeof v.range=="function"?v:m(h,p,v),w=x?x.range(h,+p+1):[];return _?w.reverse():w}function m(h,p,v){const _=Math.abs(p-h)/v,x=r0(([,,S])=>S).right(c,_);if(x===c.length)return e.every(Xy(h/Ig,p/Ig,v));if(x===0)return Ff.every(Math.max(Xy(h,p,v),1));const[w,j]=c[_/c[x-1][2]<c[x][2]/_?x-1:x];return w.every(j)}return[u,m]}const[e$,t$]=KD(Wa,x0,Lm,FD,b0,g0),[r$,n$]=KD(Va,_0,zm,Jc,y0,v0);function Ug(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Bg(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function a$(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,c=e.shortDays,u=e.months,m=e.shortMonths,h=dc(i),p=fc(i),v=dc(s),_=fc(s),x=dc(c),w=fc(c),j=dc(u),S=fc(u),O=dc(m),C=fc(m),A={a:I,A:ee,b:H,B:se,c:null,d:eC,e:eC,f:C$,g:z$,G:I$,H:S$,I:E$,j:O$,L:YD,m:A$,M:N$,p:Se,q:J,Q:nC,s:aC,S:k$,u:D$,U:T$,V:P$,w:M$,W:R$,x:null,X:null,y:q$,Y:L$,Z:U$,"%":rC},k={a:$,A:ge,b:Pe,B:Le,c:null,d:tC,e:tC,f:F$,g:e8,G:r8,H:B$,I:$$,j:H$,L:VD,m:K$,M:Y$,p:pe,q:ze,Q:nC,s:aC,S:G$,u:V$,U:W$,V:X$,w:Z$,W:Q$,x:null,X:null,y:J$,Y:t8,Z:n8,"%":rC},D={a:ae,A:G,b:U,B:ue,c:ve,d:QO,e:QO,f:_$,g:ZO,G:XO,H:JO,I:JO,j:v$,L:b$,m:p$,M:g$,p:re,q:h$,Q:w$,s:j$,S:y$,u:c$,U:u$,V:d$,w:l$,W:f$,x:q,X:R,y:ZO,Y:XO,Z:m$,"%":x$};A.x=M(r,A),A.X=M(n,A),A.c=M(t,A),k.x=M(r,k),k.X=M(n,k),k.c=M(t,k);function M(Q,Ee){return function(we){var ie=[],Ue=-1,ye=0,ke=Q.length,Ce,Ct,Ie;for(we instanceof Date||(we=new Date(+we));++Ue<ke;)Q.charCodeAt(Ue)===37&&(ie.push(Q.slice(ye,Ue)),(Ct=WO[Ce=Q.charAt(++Ue)])!=null?Ce=Q.charAt(++Ue):Ct=Ce==="e"?" ":"0",(Ie=Ee[Ce])&&(Ce=Ie(we,Ct)),ie.push(Ce),ye=Ue+1);return ie.push(Q.slice(ye,Ue)),ie.join("")}}function L(Q,Ee){return function(we){var ie=uc(1900,void 0,1),Ue=X(ie,Q,we+="",0),ye,ke;if(Ue!=we.length)return null;if("Q"in ie)return new Date(ie.Q);if("s"in ie)return new Date(ie.s*1e3+("L"in ie?ie.L:0));if(Ee&&!("Z"in ie)&&(ie.Z=0),"p"in ie&&(ie.H=ie.H%12+ie.p*12),ie.m===void 0&&(ie.m="q"in ie?ie.q:0),"V"in ie){if(ie.V<1||ie.V>53)return null;"w"in ie||(ie.w=1),"Z"in ie?(ye=Bg(uc(ie.y,0,1)),ke=ye.getUTCDay(),ye=ke>4||ke===0?Yf.ceil(ye):Yf(ye),ye=qm.offset(ye,(ie.V-1)*7),ie.y=ye.getUTCFullYear(),ie.m=ye.getUTCMonth(),ie.d=ye.getUTCDate()+(ie.w+6)%7):(ye=Ug(uc(ie.y,0,1)),ke=ye.getDay(),ye=ke>4||ke===0?Kf.ceil(ye):Kf(ye),ye=Jc.offset(ye,(ie.V-1)*7),ie.y=ye.getFullYear(),ie.m=ye.getMonth(),ie.d=ye.getDate()+(ie.w+6)%7)}else("W"in ie||"U"in ie)&&("w"in ie||(ie.w="u"in ie?ie.u%7:"W"in ie?1:0),ke="Z"in ie?Bg(uc(ie.y,0,1)).getUTCDay():Ug(uc(ie.y,0,1)).getDay(),ie.m=0,ie.d="W"in ie?(ie.w+6)%7+ie.W*7-(ke+5)%7:ie.w+ie.U*7-(ke+6)%7);return"Z"in ie?(ie.H+=ie.Z/100|0,ie.M+=ie.Z%100,Bg(ie)):Ug(ie)}}function X(Q,Ee,we,ie){for(var Ue=0,ye=Ee.length,ke=we.length,Ce,Ct;Ue<ye;){if(ie>=ke)return-1;if(Ce=Ee.charCodeAt(Ue++),Ce===37){if(Ce=Ee.charAt(Ue++),Ct=D[Ce in WO?Ee.charAt(Ue++):Ce],!Ct||(ie=Ct(Q,we,ie))<0)return-1}else if(Ce!=we.charCodeAt(ie++))return-1}return ie}function re(Q,Ee,we){var ie=h.exec(Ee.slice(we));return ie?(Q.p=p.get(ie[0].toLowerCase()),we+ie[0].length):-1}function ae(Q,Ee,we){var ie=x.exec(Ee.slice(we));return ie?(Q.w=w.get(ie[0].toLowerCase()),we+ie[0].length):-1}function G(Q,Ee,we){var ie=v.exec(Ee.slice(we));return ie?(Q.w=_.get(ie[0].toLowerCase()),we+ie[0].length):-1}function U(Q,Ee,we){var ie=O.exec(Ee.slice(we));return ie?(Q.m=C.get(ie[0].toLowerCase()),we+ie[0].length):-1}function ue(Q,Ee,we){var ie=j.exec(Ee.slice(we));return ie?(Q.m=S.get(ie[0].toLowerCase()),we+ie[0].length):-1}function ve(Q,Ee,we){return X(Q,t,Ee,we)}function q(Q,Ee,we){return X(Q,r,Ee,we)}function R(Q,Ee,we){return X(Q,n,Ee,we)}function I(Q){return c[Q.getDay()]}function ee(Q){return s[Q.getDay()]}function H(Q){return m[Q.getMonth()]}function se(Q){return u[Q.getMonth()]}function Se(Q){return i[+(Q.getHours()>=12)]}function J(Q){return 1+~~(Q.getMonth()/3)}function $(Q){return c[Q.getUTCDay()]}function ge(Q){return s[Q.getUTCDay()]}function Pe(Q){return m[Q.getUTCMonth()]}function Le(Q){return u[Q.getUTCMonth()]}function pe(Q){return i[+(Q.getUTCHours()>=12)]}function ze(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var Ee=M(Q+="",A);return Ee.toString=function(){return Q},Ee},parse:function(Q){var Ee=L(Q+="",!1);return Ee.toString=function(){return Q},Ee},utcFormat:function(Q){var Ee=M(Q+="",k);return Ee.toString=function(){return Q},Ee},utcParse:function(Q){var Ee=L(Q+="",!0);return Ee.toString=function(){return Q},Ee}}}var WO={"-":"",_:" ",0:"0"},_r=/^\s*\d+/,i$=/^%/,o$=/[\\^$*+?|[\]().{}]/g;function nt(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function s$(e){return e.replace(o$,"\\$&")}function dc(e){return new RegExp("^(?:"+e.map(s$).join("|")+")","i")}function fc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function l$(e,t,r){var n=_r.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function c$(e,t,r){var n=_r.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function u$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function d$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function f$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function XO(e,t,r){var n=_r.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ZO(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function m$(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function h$(e,t,r){var n=_r.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function p$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function QO(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function v$(e,t,r){var n=_r.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function JO(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function g$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function y$(e,t,r){var n=_r.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function b$(e,t,r){var n=_r.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function _$(e,t,r){var n=_r.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function x$(e,t,r){var n=i$.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function w$(e,t,r){var n=_r.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function j$(e,t,r){var n=_r.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function eC(e,t){return nt(e.getDate(),t,2)}function S$(e,t){return nt(e.getHours(),t,2)}function E$(e,t){return nt(e.getHours()%12||12,t,2)}function O$(e,t){return nt(1+Jc.count(Va(e),e),t,3)}function YD(e,t){return nt(e.getMilliseconds(),t,3)}function C$(e,t){return YD(e,t)+"000"}function A$(e,t){return nt(e.getMonth()+1,t,2)}function N$(e,t){return nt(e.getMinutes(),t,2)}function k$(e,t){return nt(e.getSeconds(),t,2)}function D$(e){var t=e.getDay();return t===0?7:t}function T$(e,t){return nt(zm.count(Va(e)-1,e),t,2)}function GD(e){var t=e.getDay();return t>=4||t===0?Gs(e):Gs.ceil(e)}function P$(e,t){return e=GD(e),nt(Gs.count(Va(e),e)+(Va(e).getDay()===4),t,2)}function M$(e){return e.getDay()}function R$(e,t){return nt(Kf.count(Va(e)-1,e),t,2)}function q$(e,t){return nt(e.getFullYear()%100,t,2)}function z$(e,t){return e=GD(e),nt(e.getFullYear()%100,t,2)}function L$(e,t){return nt(e.getFullYear()%1e4,t,4)}function I$(e,t){var r=e.getDay();return e=r>=4||r===0?Gs(e):Gs.ceil(e),nt(e.getFullYear()%1e4,t,4)}function U$(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+nt(t/60|0,"0",2)+nt(t%60,"0",2)}function tC(e,t){return nt(e.getUTCDate(),t,2)}function B$(e,t){return nt(e.getUTCHours(),t,2)}function $$(e,t){return nt(e.getUTCHours()%12||12,t,2)}function H$(e,t){return nt(1+qm.count(Wa(e),e),t,3)}function VD(e,t){return nt(e.getUTCMilliseconds(),t,3)}function F$(e,t){return VD(e,t)+"000"}function K$(e,t){return nt(e.getUTCMonth()+1,t,2)}function Y$(e,t){return nt(e.getUTCMinutes(),t,2)}function G$(e,t){return nt(e.getUTCSeconds(),t,2)}function V$(e){var t=e.getUTCDay();return t===0?7:t}function W$(e,t){return nt(Lm.count(Wa(e)-1,e),t,2)}function WD(e){var t=e.getUTCDay();return t>=4||t===0?Vs(e):Vs.ceil(e)}function X$(e,t){return e=WD(e),nt(Vs.count(Wa(e),e)+(Wa(e).getUTCDay()===4),t,2)}function Z$(e){return e.getUTCDay()}function Q$(e,t){return nt(Yf.count(Wa(e)-1,e),t,2)}function J$(e,t){return nt(e.getUTCFullYear()%100,t,2)}function e8(e,t){return e=WD(e),nt(e.getUTCFullYear()%100,t,2)}function t8(e,t){return nt(e.getUTCFullYear()%1e4,t,4)}function r8(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Vs(e):Vs.ceil(e),nt(e.getUTCFullYear()%1e4,t,4)}function n8(){return"+0000"}function rC(){return"%"}function nC(e){return+e}function aC(e){return Math.floor(+e/1e3)}var Ms,XD,ZD;a8({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function a8(e){return Ms=a$(e),XD=Ms.format,Ms.parse,ZD=Ms.utcFormat,Ms.utcParse,Ms}function i8(e){return new Date(e)}function o8(e){return e instanceof Date?+e:+new Date(+e)}function w0(e,t,r,n,i,s,c,u,m,h){var p=l0(),v=p.invert,_=p.domain,x=h(".%L"),w=h(":%S"),j=h("%I:%M"),S=h("%I %p"),O=h("%a %d"),C=h("%b %d"),A=h("%B"),k=h("%Y");function D(M){return(m(M)<M?x:u(M)<M?w:c(M)<M?j:s(M)<M?S:n(M)<M?i(M)<M?O:C:r(M)<M?A:k)(M)}return p.invert=function(M){return new Date(v(M))},p.domain=function(M){return arguments.length?_(Array.from(M,o8)):_().map(i8)},p.ticks=function(M){var L=_();return e(L[0],L[L.length-1],M??10)},p.tickFormat=function(M,L){return L==null?D:h(L)},p.nice=function(M){var L=_();return(!M||typeof M.range!="function")&&(M=t(L[0],L[L.length-1],M??10)),M?_(zD(L,M)):p},p.copy=function(){return Qc(p,w0(e,t,r,n,i,s,c,u,m,h))},p}function s8(){return In.apply(w0(r$,n$,Va,_0,zm,Jc,y0,v0,Co,XD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function l8(){return In.apply(w0(e$,t$,Wa,x0,Lm,qm,b0,g0,Co,ZD).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Im(){var e=0,t=1,r,n,i,s,c=Ir,u=!1,m;function h(v){return v==null||isNaN(v=+v)?m:c(i===0?.5:(v=(s(v)-r)*i,u?Math.max(0,Math.min(1,v)):v))}h.domain=function(v){return arguments.length?([e,t]=v,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),h):[e,t]},h.clamp=function(v){return arguments.length?(u=!!v,h):u},h.interpolator=function(v){return arguments.length?(c=v,h):c};function p(v){return function(_){var x,w;return arguments.length?([x,w]=_,c=v(x,w),h):[c(0),c(1)]}}return h.range=p(Js),h.rangeRound=p(s0),h.unknown=function(v){return arguments.length?(m=v,h):m},function(v){return s=v,r=v(e),n=v(t),i=r===n?0:1/(n-r),h}}function Xi(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function QD(){var e=Wi(Im()(Ir));return e.copy=function(){return Xi(e,QD())},ni.apply(e,arguments)}function JD(){var e=d0(Im()).domain([1,10]);return e.copy=function(){return Xi(e,JD()).base(e.base())},ni.apply(e,arguments)}function eT(){var e=f0(Im());return e.copy=function(){return Xi(e,eT()).constant(e.constant())},ni.apply(e,arguments)}function j0(){var e=m0(Im());return e.copy=function(){return Xi(e,j0()).exponent(e.exponent())},ni.apply(e,arguments)}function c8(){return j0.apply(null,arguments).exponent(.5)}function tT(){var e=[],t=Ir;function r(n){if(n!=null&&!isNaN(n=+n))return t((Xc(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Bi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>V6(e,s/n))},r.copy=function(){return tT(t).domain(e)},ni.apply(r,arguments)}function Um(){var e=0,t=.5,r=1,n=1,i,s,c,u,m,h=Ir,p,v=!1,_;function x(j){return isNaN(j=+j)?_:(j=.5+((j=+p(j))-s)*(n*j<n*s?u:m),h(v?Math.max(0,Math.min(1,j)):j))}x.domain=function(j){return arguments.length?([e,t,r]=j,i=p(e=+e),s=p(t=+t),c=p(r=+r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x):[e,t,r]},x.clamp=function(j){return arguments.length?(v=!!j,x):v},x.interpolator=function(j){return arguments.length?(h=j,x):h};function w(j){return function(S){var O,C,A;return arguments.length?([O,C,A]=S,h=xB(j,[O,C,A]),x):[h(0),h(.5),h(1)]}}return x.range=w(Js),x.rangeRound=w(s0),x.unknown=function(j){return arguments.length?(_=j,x):_},function(j){return p=j,i=j(e),s=j(t),c=j(r),u=i===s?0:.5/(s-i),m=s===c?0:.5/(c-s),n=s<i?-1:1,x}}function rT(){var e=Wi(Um()(Ir));return e.copy=function(){return Xi(e,rT())},ni.apply(e,arguments)}function nT(){var e=d0(Um()).domain([.1,1,10]);return e.copy=function(){return Xi(e,nT()).base(e.base())},ni.apply(e,arguments)}function aT(){var e=f0(Um());return e.copy=function(){return Xi(e,aT()).constant(e.constant())},ni.apply(e,arguments)}function S0(){var e=m0(Um());return e.copy=function(){return Xi(e,S0()).exponent(e.exponent())},ni.apply(e,arguments)}function u8(){return S0.apply(null,arguments).exponent(.5)}const gc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:a0,scaleDiverging:rT,scaleDivergingLog:nT,scaleDivergingPow:S0,scaleDivergingSqrt:u8,scaleDivergingSymlog:aT,scaleIdentity:qD,scaleImplicit:Zy,scaleLinear:RD,scaleLog:LD,scaleOrdinal:n0,scalePoint:Z6,scalePow:h0,scaleQuantile:BD,scaleQuantize:$D,scaleRadial:UD,scaleSequential:QD,scaleSequentialLog:JD,scaleSequentialPow:j0,scaleSequentialQuantile:tT,scaleSequentialSqrt:c8,scaleSequentialSymlog:eT,scaleSqrt:FB,scaleSymlog:ID,scaleThreshold:HD,scaleTime:s8,scaleUtc:l8,tickFormat:MD},Symbol.toStringTag,{value:"Module"}));var ai=e=>e.chartData,Bm=W([ai],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),E0=(e,t,r,n)=>n?Bm(e):ai(e),d8=(e,t,r)=>r?Bm(e):ai(e);function Hi(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zt(t)&&zt(r))return!0}return!1}function iC(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function iT(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,i,s;if(zt(r))i=r;else if(typeof r=="function")return;if(zt(n))s=n;else if(typeof n=="function")return;var c=[i,s];if(Hi(c))return c}}function f8(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Hi(n))return iC(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[i,s]=e,c,u;if(i==="auto")t!=null&&(c=Math.min(...t));else if(De(i))c=i;else if(typeof i=="function")try{t!=null&&(c=i(t?.[0]))}catch{}else if(typeof i=="string"&&yE.test(i)){var m=yE.exec(i);if(m==null||m[1]==null||t==null)c=void 0;else{var h=+m[1];c=t[0]-h}}else c=t?.[0];if(s==="auto")t!=null&&(u=Math.max(...t));else if(De(s))u=s;else if(typeof s=="function")try{t!=null&&(u=s(t?.[1]))}catch{}else if(typeof s=="string"&&bE.test(s)){var p=bE.exec(s);if(p==null||p[1]==null||t==null)u=void 0;else{var v=+p[1];u=t[1]+v}}else u=t?.[1];var _=[c,u];if(Hi(_))return t==null?_:iC(_,t,r)}}}var el=1e9,m8={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},C0,Tt=!0,Ln="[DecimalError] ",Do=Ln+"Invalid argument: ",O0=Ln+"Exponent out of range: ",tl=Math.floor,jo=Math.pow,h8=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,mn,vr=1e7,Ot=7,oT=9007199254740991,Gf=tl(oT/Ot),Ae={};Ae.absoluteValue=Ae.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ae.comparedTo=Ae.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Ae.decimalPlaces=Ae.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ot;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ae.dividedBy=Ae.div=function(e){return $a(this,new this.constructor(e))};Ae.dividedToIntegerBy=Ae.idiv=function(e){var t=this,r=t.constructor;return bt($a(t,new r(e),0,1),r.precision)};Ae.equals=Ae.eq=function(e){return!this.cmp(e)};Ae.exponent=function(){return nr(this)};Ae.greaterThan=Ae.gt=function(e){return this.cmp(e)>0};Ae.greaterThanOrEqualTo=Ae.gte=function(e){return this.cmp(e)>=0};Ae.isInteger=Ae.isint=function(){return this.e>this.d.length-2};Ae.isNegative=Ae.isneg=function(){return this.s<0};Ae.isPositive=Ae.ispos=function(){return this.s>0};Ae.isZero=function(){return this.s===0};Ae.lessThan=Ae.lt=function(e){return this.cmp(e)<0};Ae.lessThanOrEqualTo=Ae.lte=function(e){return this.cmp(e)<1};Ae.logarithm=Ae.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(mn))throw Error(Ln+"NaN");if(r.s<1)throw Error(Ln+(r.s?"NaN":"-Infinity"));return r.eq(mn)?new n(0):(Tt=!1,t=$a(Mc(r,s),Mc(e,s),s),Tt=!0,bt(t,i))};Ae.minus=Ae.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?cT(t,e):sT(t,(e.s=-e.s,e))};Ae.modulo=Ae.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Ln+"NaN");return r.s?(Tt=!1,t=$a(r,e,0,1).times(e),Tt=!0,r.minus(t)):bt(new n(r),i)};Ae.naturalExponential=Ae.exp=function(){return lT(this)};Ae.naturalLogarithm=Ae.ln=function(){return Mc(this)};Ae.negated=Ae.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ae.plus=Ae.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?sT(t,e):cT(t,(e.s=-e.s,e))};Ae.precision=Ae.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Do+e);if(t=nr(i)+1,n=i.d.length-1,r=n*Ot+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ae.squareRoot=Ae.sqrt=function(){var e,t,r,n,i,s,c,u=this,m=u.constructor;if(u.s<1){if(!u.s)return new m(0);throw Error(Ln+"NaN")}for(e=nr(u),Tt=!1,i=Math.sqrt(+u),i==0||i==1/0?(t=ca(u.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=tl((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new m(t)):n=new m(i.toString()),r=m.precision,i=c=r+3;;)if(s=n,n=s.plus($a(u,s,c+2)).times(.5),ca(s.d).slice(0,c)===(t=ca(n.d)).slice(0,c)){if(t=t.slice(c-3,c+1),i==c&&t=="4999"){if(bt(s,r+1,0),s.times(s).eq(u)){n=s;break}}else if(t!="9999")break;c+=4}return Tt=!0,bt(n,r)};Ae.times=Ae.mul=function(e){var t,r,n,i,s,c,u,m,h,p=this,v=p.constructor,_=p.d,x=(e=new v(e)).d;if(!p.s||!e.s)return new v(0);for(e.s*=p.s,r=p.e+e.e,m=_.length,h=x.length,m<h&&(s=_,_=x,x=s,c=m,m=h,h=c),s=[],c=m+h,n=c;n--;)s.push(0);for(n=h;--n>=0;){for(t=0,i=m+n;i>n;)u=s[i]+x[n]*_[i-n-1]+t,s[i--]=u%vr|0,t=u/vr|0;s[i]=(s[i]+t)%vr|0}for(;!s[--c];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Tt?bt(e,v.precision):e};Ae.toDecimalPlaces=Ae.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(ha(e,0,el),t===void 0?t=n.rounding:ha(t,0,8),bt(r,e+nr(r)+1,t))};Ae.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=Uo(n,!0):(ha(e,0,el),t===void 0?t=i.rounding:ha(t,0,8),n=bt(new i(n),e+1,t),r=Uo(n,!0,e+1)),r};Ae.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?Uo(i):(ha(e,0,el),t===void 0?t=s.rounding:ha(t,0,8),n=bt(new s(i),e+nr(i)+1,t),r=Uo(n.abs(),!1,e+nr(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Ae.toInteger=Ae.toint=function(){var e=this,t=e.constructor;return bt(new t(e),nr(e)+1,t.rounding)};Ae.toNumber=function(){return+this};Ae.toPower=Ae.pow=function(e){var t,r,n,i,s,c,u=this,m=u.constructor,h=12,p=+(e=new m(e));if(!e.s)return new m(mn);if(u=new m(u),!u.s){if(e.s<1)throw Error(Ln+"Infinity");return u}if(u.eq(mn))return u;if(n=m.precision,e.eq(mn))return bt(u,n);if(t=e.e,r=e.d.length-1,c=t>=r,s=u.s,c){if((r=p<0?-p:p)<=oT){for(i=new m(mn),t=Math.ceil(n/Ot+4),Tt=!1;r%2&&(i=i.times(u),sC(i.d,t)),r=tl(r/2),r!==0;)u=u.times(u),sC(u.d,t);return Tt=!0,e.s<0?new m(mn).div(i):bt(i,n)}}else if(s<0)throw Error(Ln+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,u.s=1,Tt=!1,i=e.times(Mc(u,n+h)),Tt=!0,i=lT(i),i.s=s,i};Ae.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=nr(i),n=Uo(i,r<=s.toExpNeg||r>=s.toExpPos)):(ha(e,1,el),t===void 0?t=s.rounding:ha(t,0,8),i=bt(new s(i),e,t),r=nr(i),n=Uo(i,e<=r||r<=s.toExpNeg,e)),n};Ae.toSignificantDigits=Ae.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(ha(e,1,el),t===void 0?t=n.rounding:ha(t,0,8)),bt(new n(r),e,t)};Ae.toString=Ae.valueOf=Ae.val=Ae.toJSON=Ae[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=nr(e),r=e.constructor;return Uo(e,t<=r.toExpNeg||t>=r.toExpPos)};function sT(e,t){var r,n,i,s,c,u,m,h,p=e.constructor,v=p.precision;if(!e.s||!t.s)return t.s||(t=new p(e)),Tt?bt(t,v):t;if(m=e.d,h=t.d,c=e.e,i=t.e,m=m.slice(),s=c-i,s){for(s<0?(n=m,s=-s,u=h.length):(n=h,i=c,u=m.length),c=Math.ceil(v/Ot),u=c>u?c+1:u+1,s>u&&(s=u,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(u=m.length,s=h.length,u-s<0&&(s=u,n=h,h=m,m=n),r=0;s;)r=(m[--s]=m[s]+h[s]+r)/vr|0,m[s]%=vr;for(r&&(m.unshift(r),++i),u=m.length;m[--u]==0;)m.pop();return t.d=m,t.e=i,Tt?bt(t,v):t}function ha(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Do+e)}function ca(e){var t,r,n,i=e.length-1,s="",c=e[0];if(i>0){for(s+=c,t=1;t<i;t++)n=e[t]+"",r=Ot-n.length,r&&(s+=qi(r)),s+=n;c=e[t],n=c+"",r=Ot-n.length,r&&(s+=qi(r))}else if(c===0)return"0";for(;c%10===0;)c/=10;return s+c}var $a=(function(){function e(n,i){var s,c=0,u=n.length;for(n=n.slice();u--;)s=n[u]*i+c,n[u]=s%vr|0,c=s/vr|0;return c&&n.unshift(c),n}function t(n,i,s,c){var u,m;if(s!=c)m=s>c?1:-1;else for(u=m=0;u<s;u++)if(n[u]!=i[u]){m=n[u]>i[u]?1:-1;break}return m}function r(n,i,s){for(var c=0;s--;)n[s]-=c,c=n[s]<i[s]?1:0,n[s]=c*vr+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,c){var u,m,h,p,v,_,x,w,j,S,O,C,A,k,D,M,L,X,re=n.constructor,ae=n.s==i.s?1:-1,G=n.d,U=i.d;if(!n.s)return new re(n);if(!i.s)throw Error(Ln+"Division by zero");for(m=n.e-i.e,L=U.length,D=G.length,x=new re(ae),w=x.d=[],h=0;U[h]==(G[h]||0);)++h;if(U[h]>(G[h]||0)&&--m,s==null?C=s=re.precision:c?C=s+(nr(n)-nr(i))+1:C=s,C<0)return new re(0);if(C=C/Ot+2|0,h=0,L==1)for(p=0,U=U[0],C++;(h<D||p)&&C--;h++)A=p*vr+(G[h]||0),w[h]=A/U|0,p=A%U|0;else{for(p=vr/(U[0]+1)|0,p>1&&(U=e(U,p),G=e(G,p),L=U.length,D=G.length),k=L,j=G.slice(0,L),S=j.length;S<L;)j[S++]=0;X=U.slice(),X.unshift(0),M=U[0],U[1]>=vr/2&&++M;do p=0,u=t(U,j,L,S),u<0?(O=j[0],L!=S&&(O=O*vr+(j[1]||0)),p=O/M|0,p>1?(p>=vr&&(p=vr-1),v=e(U,p),_=v.length,S=j.length,u=t(v,j,_,S),u==1&&(p--,r(v,L<_?X:U,_))):(p==0&&(u=p=1),v=U.slice()),_=v.length,_<S&&v.unshift(0),r(j,v,S),u==-1&&(S=j.length,u=t(U,j,L,S),u<1&&(p++,r(j,L<S?X:U,S))),S=j.length):u===0&&(p++,j=[0]),w[h++]=p,u&&j[0]?j[S++]=G[k]||0:(j=[G[k]],S=1);while((k++<D||j[0]!==void 0)&&C--)}return w[0]||w.shift(),x.e=m,bt(x,c?s+nr(x)+1:s)}})();function lT(e,t){var r,n,i,s,c,u,m=0,h=0,p=e.constructor,v=p.precision;if(nr(e)>16)throw Error(O0+nr(e));if(!e.s)return new p(mn);for(Tt=!1,u=v,c=new p(.03125);e.abs().gte(.1);)e=e.times(c),h+=5;for(n=Math.log(jo(2,h))/Math.LN10*2+5|0,u+=n,r=i=s=new p(mn),p.precision=u;;){if(i=bt(i.times(e),u),r=r.times(++m),c=s.plus($a(i,r,u)),ca(c.d).slice(0,u)===ca(s.d).slice(0,u)){for(;h--;)s=bt(s.times(s),u);return p.precision=v,t==null?(Tt=!0,bt(s,v)):s}s=c}}function nr(e){for(var t=e.e*Ot,r=e.d[0];r>=10;r/=10)t++;return t}function $g(e,t,r){if(t>e.LN10.sd())throw Tt=!0,r&&(e.precision=r),Error(Ln+"LN10 precision limit exceeded");return bt(new e(e.LN10),t)}function qi(e){for(var t="";e--;)t+="0";return t}function Mc(e,t){var r,n,i,s,c,u,m,h,p,v=1,_=10,x=e,w=x.d,j=x.constructor,S=j.precision;if(x.s<1)throw Error(Ln+(x.s?"NaN":"-Infinity"));if(x.eq(mn))return new j(0);if(t==null?(Tt=!1,h=S):h=t,x.eq(10))return t==null&&(Tt=!0),$g(j,h);if(h+=_,j.precision=h,r=ca(w),n=r.charAt(0),s=nr(x),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=ca(x.d),n=r.charAt(0),v++;s=nr(x),n>1?(x=new j("0."+r),s++):x=new j(n+"."+r.slice(1))}else return m=$g(j,h+2,S).times(s+""),x=Mc(new j(n+"."+r.slice(1)),h-_).plus(m),j.precision=S,t==null?(Tt=!0,bt(x,S)):x;for(u=c=x=$a(x.minus(mn),x.plus(mn),h),p=bt(x.times(x),h),i=3;;){if(c=bt(c.times(p),h),m=u.plus($a(c,new j(i),h)),ca(m.d).slice(0,h)===ca(u.d).slice(0,h))return u=u.times(2),s!==0&&(u=u.plus($g(j,h+2,S).times(s+""))),u=$a(u,new j(v),h),j.precision=S,t==null?(Tt=!0,bt(u,S)):u;u=m,i+=2}}function oC(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=tl(r/Ot),e.d=[],n=(r+1)%Ot,r<0&&(n+=Ot),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ot;n<i;)e.d.push(+t.slice(n,n+=Ot));t=t.slice(n),n=Ot-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),Tt&&(e.e>Gf||e.e<-Gf))throw Error(O0+r)}else e.s=0,e.e=0,e.d=[0];return e}function bt(e,t,r){var n,i,s,c,u,m,h,p,v=e.d;for(c=1,s=v[0];s>=10;s/=10)c++;if(n=t-c,n<0)n+=Ot,i=t,h=v[p=0];else{if(p=Math.ceil((n+1)/Ot),s=v.length,p>=s)return e;for(h=s=v[p],c=1;s>=10;s/=10)c++;n%=Ot,i=n-Ot+c}if(r!==void 0&&(s=jo(10,c-i-1),u=h/s%10|0,m=t<0||v[p+1]!==void 0||h%s,m=r<4?(u||m)&&(r==0||r==(e.s<0?3:2)):u>5||u==5&&(r==4||m||r==6&&(n>0?i>0?h/jo(10,c-i):0:v[p-1])%10&1||r==(e.s<0?8:7))),t<1||!v[0])return m?(s=nr(e),v.length=1,t=t-s-1,v[0]=jo(10,(Ot-t%Ot)%Ot),e.e=tl(-t/Ot)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(n==0?(v.length=p,s=1,p--):(v.length=p+1,s=jo(10,Ot-n),v[p]=i>0?(h/jo(10,c-i)%jo(10,i)|0)*s:0),m)for(;;)if(p==0){(v[0]+=s)==vr&&(v[0]=1,++e.e);break}else{if(v[p]+=s,v[p]!=vr)break;v[p--]=0,s=1}for(n=v.length;v[--n]===0;)v.pop();if(Tt&&(e.e>Gf||e.e<-Gf))throw Error(O0+nr(e));return e}function cT(e,t){var r,n,i,s,c,u,m,h,p,v,_=e.constructor,x=_.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new _(e),Tt?bt(t,x):t;if(m=e.d,v=t.d,n=t.e,h=e.e,m=m.slice(),c=h-n,c){for(p=c<0,p?(r=m,c=-c,u=v.length):(r=v,n=h,u=m.length),i=Math.max(Math.ceil(x/Ot),u)+2,c>i&&(c=i,r.length=1),r.reverse(),i=c;i--;)r.push(0);r.reverse()}else{for(i=m.length,u=v.length,p=i<u,p&&(u=i),i=0;i<u;i++)if(m[i]!=v[i]){p=m[i]<v[i];break}c=0}for(p&&(r=m,m=v,v=r,t.s=-t.s),u=m.length,i=v.length-u;i>0;--i)m[u++]=0;for(i=v.length;i>c;){if(m[--i]<v[i]){for(s=i;s&&m[--s]===0;)m[s]=vr-1;--m[s],m[i]+=vr}m[i]-=v[i]}for(;m[--u]===0;)m.pop();for(;m[0]===0;m.shift())--n;return m[0]?(t.d=m,t.e=n,Tt?bt(t,x):t):new _(0)}function Uo(e,t,r){var n,i=nr(e),s=ca(e.d),c=s.length;return t?(r&&(n=r-c)>0?s=s.charAt(0)+"."+s.slice(1)+qi(n):c>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+qi(-i-1)+s,r&&(n=r-c)>0&&(s+=qi(n))):i>=c?(s+=qi(i+1-c),r&&(n=r-i-1)>0&&(s=s+"."+qi(n))):((n=i+1)<c&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-c)>0&&(i+1===c&&(s+="."),s+=qi(n))),e.s<0?"-"+s:s}function sC(e,t){if(e.length>t)return e.length=t,!0}function uT(e){var t,r,n;function i(s){var c=this;if(!(c instanceof i))return new i(s);if(c.constructor=i,s instanceof i){c.s=s.s,c.e=s.e,c.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Do+s);if(s>0)c.s=1;else if(s<0)s=-s,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(s===~~s&&s<1e7){c.e=0,c.d=[s];return}return oC(c,s.toString())}else if(typeof s!="string")throw Error(Do+s);if(s.charCodeAt(0)===45?(s=s.slice(1),c.s=-1):c.s=1,h8.test(s))oC(c,s);else throw Error(Do+s)}if(i.prototype=Ae,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=uT,i.config=i.set=p8,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function p8(e){if(!e||typeof e!="object")throw Error(Ln+"Object expected");var t,r,n,i=["precision",1,el,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if(tl(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(Do+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Do+r+": "+n);return this}var C0=uT(m8);mn=new C0(1);const ut=C0;var v8=e=>e,dT={},fT=e=>e===dT,lC=e=>function t(){return arguments.length===0||arguments.length===1&&fT(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},mT=(e,t)=>e===1?t:lC(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var s=n.filter(c=>c!==dT).length;return s>=e?t(...n):mT(e-s,lC(function(){for(var c=arguments.length,u=new Array(c),m=0;m<c;m++)u[m]=arguments[m];var h=n.map(p=>fT(p)?u.shift():p);return t(...h,...u)}))}),g8=e=>mT(e.length,e),tb=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},y8=g8((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),b8=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return v8;var i=r.reverse(),s=i[0],c=i.slice(1);return function(){return c.reduce((u,m)=>m(u),s(...arguments))}};function hT(e){var t;return e===0?t=1:t=Math.floor(new ut(e).abs().log(10).toNumber())+1,t}function pT(e,t,r){for(var n=new ut(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var vT=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},gT=(e,t,r)=>{if(e.lte(0))return new ut(0);var n=hT(e.toNumber()),i=new ut(10).pow(n),s=e.div(i),c=n!==1?.05:.1,u=new ut(Math.ceil(s.div(c).toNumber())).add(r).mul(c),m=u.mul(i);return t?new ut(m.toNumber()):new ut(Math.ceil(m.toNumber()))},_8=(e,t,r)=>{var n=new ut(1),i=new ut(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new ut(10).pow(hT(e)-1),i=new ut(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new ut(Math.floor(e)))}else e===0?i=new ut(Math.floor((t-1)/2)):r||(i=new ut(Math.floor(e)));var c=Math.floor((t-1)/2),u=b8(y8(m=>i.add(new ut(m-c).mul(n)).toNumber()),tb);return u(0,t)},yT=function(t,r,n,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ut(0),tickMin:new ut(0),tickMax:new ut(0)};var c=gT(new ut(r).sub(t).div(n-1),i,s),u;t<=0&&r>=0?u=new ut(0):(u=new ut(t).add(r).div(2),u=u.sub(new ut(u).mod(c)));var m=Math.ceil(u.sub(t).div(c).toNumber()),h=Math.ceil(new ut(r).sub(u).div(c).toNumber()),p=m+h+1;return p>n?yT(t,r,n,i,s+1):(p<n&&(h=r>0?h+(n-p):h,m=r>0?m:m+(n-p)),{step:c,tickMin:u.sub(new ut(m).mul(c)),tickMax:u.add(new ut(h).mul(c))})},x8=function(t){var[r,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,c=Math.max(i,2),[u,m]=vT([r,n]);if(u===-1/0||m===1/0){var h=m===1/0?[u,...tb(0,i-1).map(()=>1/0)]:[...tb(0,i-1).map(()=>-1/0),m];return r>n?h.reverse():h}if(u===m)return _8(u,i,s);var{step:p,tickMin:v,tickMax:_}=yT(u,m,c,s,0),x=pT(v,_.add(new ut(.1).mul(p)),p);return r>n?x.reverse():x},w8=function(t,r){var[n,i]=t,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[c,u]=vT([n,i]);if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var m=Math.max(r,2),h=gT(new ut(u).sub(c).div(m-1),s,0),p=[...pT(new ut(c),new ut(u),h),u];return s===!1&&(p=p.map(v=>Math.round(v))),n>i?p.reverse():p},bT=e=>e.rootProps.maxBarSize,j8=e=>e.rootProps.barGap,_T=e=>e.rootProps.barCategoryGap,S8=e=>e.rootProps.barSize,eu=e=>e.rootProps.stackOffset,xT=e=>e.rootProps.reverseStackOrder,A0=e=>e.options.chartName,N0=e=>e.rootProps.syncId,wT=e=>e.rootProps.syncMethod,k0=e=>e.options.eventEmitter,MZ=e=>e.rootProps.baseValue,rr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},La={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},fn={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},$m=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},E8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:La.angleAxisId,includeHidden:!1,name:void 0,reversed:La.reversed,scale:La.scale,tick:La.tick,tickCount:void 0,ticks:void 0,type:La.type,unit:void 0},O8={allowDataOverflow:fn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fn.scale,tick:fn.tick,tickCount:fn.tickCount,ticks:void 0,type:fn.type,unit:void 0},C8={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:La.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:La.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:La.scale,tick:La.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},A8={allowDataOverflow:fn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:fn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:fn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:fn.scale,tick:fn.tick,tickCount:fn.tickCount,ticks:void 0,type:"category",unit:void 0},D0=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?C8:E8,T0=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?A8:O8,Hm=e=>e.polarOptions,P0=W([ti,ri,cr],_D),jT=W([Hm,P0],(e,t)=>{if(e!=null)return Dr(e.innerRadius,t,0)}),ST=W([Hm,P0],(e,t)=>{if(e!=null)return Dr(e.outerRadius,t,t*.8)}),N8=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},ET=W([Hm],N8);W([D0,ET],$m);var OT=W([P0,jT,ST],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});W([T0,OT],$m);var CT=W([Je,Hm,jT,ST,ti,ri],(e,t,r,n,i,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:c,cy:u,startAngle:m,endAngle:h}=t;return{cx:Dr(c,i,i/2),cy:Dr(u,s,s/2),innerRadius:r,outerRadius:n,startAngle:m,endAngle:h,clockWise:!1}}}),qt=(e,t)=>t,tu=(e,t,r)=>r;function M0(e){return e?.id}function AT(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=r,c=new Map;return e.forEach(u=>{var m,h=(m=u.data)!==null&&m!==void 0?m:n;if(!(h==null||h.length===0)){var p=M0(u);h.forEach((v,_)=>{var x=s==null||i?_:String(pt(v,s,null)),w=pt(v,u.dataKey,0),j;c.has(x)?j=c.get(x):j={},Object.assign(j,{[p]:w}),c.set(x,j)})}}),Array.from(c.values())}function Fm(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Km=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Ym(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function k8(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var dr=e=>{var t=Je(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},rl=e=>e.tooltip.settings.axisId;function cC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cC(Object(r),!0).forEach(function(n){D8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function D8(e,t,r){return(t=T8(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T8(e){var t=P8(e,"string");return typeof t=="symbol"?t:t+""}function P8(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rb=[0,"auto"],hr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},NT=(e,t)=>e.cartesianAxis.xAxis[t],ii=(e,t)=>{var r=NT(e,t);return r??hr},pr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:rb,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Yc},kT=(e,t)=>e.cartesianAxis.yAxis[t],oi=(e,t)=>{var r=kT(e,t);return r??pr},M8={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},R0=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??M8},Lt=(e,t,r)=>{switch(t){case"xAxis":return ii(e,r);case"yAxis":return oi(e,r);case"zAxis":return R0(e,r);case"angleAxis":return D0(e,r);case"radiusAxis":return T0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},R8=(e,t,r)=>{switch(t){case"xAxis":return ii(e,r);case"yAxis":return oi(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},ru=(e,t,r)=>{switch(t){case"xAxis":return ii(e,r);case"yAxis":return oi(e,r);case"angleAxis":return D0(e,r);case"radiusAxis":return T0(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},DT=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function q0(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var Gm=e=>e.graphicalItems.cartesianItems,q8=W([qt,tu],q0),z0=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),nu=W([Gm,Lt,q8],z0,{memoizeOptions:{resultEqualityCheck:Ym}}),TT=W([nu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Fm)),PT=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),z8=W([nu],PT),L0=e=>e.map(t=>t.data).filter(Boolean).flat(1),L8=W([nu],L0,{memoizeOptions:{resultEqualityCheck:Ym}}),I0=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},U0=W([L8,E0],I0),B0=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:pt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(i=>({value:pt(i,n)}))):e.map(n=>({value:n})),Vm=W([U0,Lt,nu],B0);function MT(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function lf(e){if(fa(e)||e instanceof Date){var t=Number(e);if(zt(t))return t}}function uC(e){if(Array.isArray(e)){var t=[lf(e[0]),lf(e[1])];return Hi(t)?t:void 0}var r=lf(e);if(r!=null)return[r,r]}function Xa(e){return e.map(lf).filter(eI)}function I8(e,t,r){return!r||typeof t!="number"||Qn(t)?[]:r.length?Xa(r.flatMap(n=>{var i=pt(e,n.dataKey),s,c;if(Array.isArray(i)?[s,c]=i:s=c=i,!(!zt(s)||!zt(c)))return[t-s,t+c]})):[]}var fr=e=>{var t=dr(e),r=rl(e);return ru(e,t,r)},au=W([fr],e=>e?.dataKey),U8=W([TT,E0,fr],AT),RT=(e,t,r,n)=>{var i={},s=t.reduce((c,u)=>{if(u.stackId==null)return c;var m=c[u.stackId];return m==null&&(m=[]),m.push(u),c[u.stackId]=m,c},i);return Object.fromEntries(Object.entries(s).map(c=>{var[u,m]=c,h=n?[...m].reverse():m,p=h.map(M0);return[u,{stackedData:b5(e,p,r),graphicalItems:h}]}))},nb=W([U8,TT,eu,xT],RT),qT=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:s}=t;if(n==null&&r!=="zAxis"){var c=S5(e,i,s);if(!(c!=null&&c[0]===0&&c[1]===0))return c}},B8=W([Lt],e=>e.allowDataOverflow),$0=e=>{var t;if(e==null||!("domain"in e))return rb;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=Xa(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:rb},H0=W([Lt],$0),F0=W([H0,B8],iT),$8=W([nb,ai,qt,F0],qT,{memoizeOptions:{resultEqualityCheck:Km}}),Wm=e=>e.errorBars,H8=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>MT(r,n)),Wf=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r.filter(Boolean);if(i.length!==0){var s=i.flat(),c=Math.min(...s),u=Math.max(...s);return[c,u]}},K0=(e,t,r,n,i)=>{var s,c;if(r.length>0&&e.forEach(u=>{r.forEach(m=>{var h,p,v=(h=n[m.id])===null||h===void 0?void 0:h.filter(O=>MT(i,O)),_=pt(u,(p=t.dataKey)!==null&&p!==void 0?p:m.dataKey),x=I8(u,_,v);if(x.length>=2){var w=Math.min(...x),j=Math.max(...x);(s==null||w<s)&&(s=w),(c==null||j>c)&&(c=j)}var S=uC(_);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),c=c==null?S[1]:Math.max(c,S[1]))})}),t?.dataKey!=null&&e.forEach(u=>{var m=uC(pt(u,t.dataKey));m!=null&&(s=s==null?m[0]:Math.min(s,m[0]),c=c==null?m[1]:Math.max(c,m[1]))}),zt(s)&&zt(c))return[s,c]},F8=W([U0,Lt,z8,Wm,qt],K0,{memoizeOptions:{resultEqualityCheck:Km}});function K8(e){var{value:t}=e;if(fa(t)||t instanceof Date)return t}var Y8=(e,t,r)=>{var n=e.map(K8).filter(i=>i!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&QN(n))?SD(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},zT=e=>e.referenceElements.dots,nl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),G8=W([zT,qt,tu],nl),LT=e=>e.referenceElements.areas,V8=W([LT,qt,tu],nl),IT=e=>e.referenceElements.lines,W8=W([IT,qt,tu],nl),UT=(e,t)=>{if(e!=null){var r=Xa(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},X8=W(G8,qt,UT),BT=(e,t)=>{if(e!=null){var r=Xa(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},Z8=W([V8,qt],BT);function Q8(e){var t;if(e.x!=null)return Xa([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Xa(r)}function J8(e){var t;if(e.y!=null)return Xa([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Xa(r)}var $T=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?Q8(n):J8(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},eH=W([W8,qt],$T),tH=W(X8,eH,Z8,(e,t,r)=>Wf(e,r,t)),Y0=(e,t,r,n,i,s,c,u)=>{if(r!=null)return r;var m=c==="vertical"&&u==="xAxis"||c==="horizontal"&&u==="yAxis",h=m?Wf(n,s,i):Wf(s,i);return f8(t,h,e.allowDataOverflow)},rH=W([Lt,H0,F0,$8,F8,tH,Je,qt],Y0,{memoizeOptions:{resultEqualityCheck:Km}}),nH=[0,1],G0=(e,t,r,n,i,s,c)=>{if(!((e==null||r==null||r.length===0)&&c===void 0)){var{dataKey:u,type:m}=e,h=Vi(t,s);if(h&&u==null){var p;return SD(0,(p=r?.length)!==null&&p!==void 0?p:0)}return m==="category"?Y8(n,e,h):i==="expand"?nH:c}},V0=W([Lt,Je,U0,Vm,eu,qt,rH],G0),HT=(e,t,r,n,i)=>{if(e!=null){var{scale:s,type:c}=e;if(s==="auto")return t==="radial"&&i==="radiusAxis"?"band":t==="radial"&&i==="angleAxis"?"linear":c==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":c==="category"?"band":"linear";if(typeof s=="string"){var u="scale".concat($c(s));return u in gc?u:"point"}}},al=W([Lt,Je,DT,A0,qt],HT);function aH(e){if(e!=null){if(e in gc)return gc[e]();var t="scale".concat($c(e));if(t in gc)return gc[t]()}}function W0(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var i=aH(t);if(i!=null){var s=i.domain(r).range(n);return h5(s),s}}}var X0=(e,t,r)=>{var n=$0(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Hi(e))return x8(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Hi(e))return w8(e,t.tickCount,t.allowDecimals)}},Z0=W([V0,ru,al],X0),Q0=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&Hi(t)&&Array.isArray(r)&&r.length>0){var i=t[0],s=r[0],c=t[1],u=r[r.length-1];return[Math.min(i,s),Math.max(c,u)]}return t},iH=W([Lt,V0,Z0,qt],Q0),oH=W(Vm,Lt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Xa(e.map(v=>v.value))).sort((v,_)=>v-_),i=n[0],s=n[n.length-1];if(i==null||s==null)return 1/0;var c=s-i;if(c===0)return 1/0;for(var u=0;u<n.length-1;u++){var m=n[u],h=n[u+1];if(!(m==null||h==null)){var p=h-m;r=Math.min(r,p)}}return r/c}}),FT=W(oH,Je,_T,cr,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!zt(e))return 0;var s=t==="vertical"?n.height:n.width;if(i==="gap")return e*s/2;if(i==="no-gap"){var c=Dr(r,e*s),u=e*s/2;return u-c-(u-c)/s*c}return 0}),sH=(e,t,r)=>{var n=ii(e,t);return n==null||typeof n.padding!="string"?0:FT(e,"xAxis",t,r,n.padding)},lH=(e,t,r)=>{var n=oi(e,t);return n==null||typeof n.padding!="string"?0:FT(e,"yAxis",t,r,n.padding)},cH=W(ii,sH,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:i}=e;return typeof i=="string"?{left:t,right:t}:{left:((r=i.left)!==null&&r!==void 0?r:0)+t,right:((n=i.right)!==null&&n!==void 0?n:0)+t}}),uH=W(oi,lH,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:i}=e;return typeof i=="string"?{top:t,bottom:t}:{top:((r=i.top)!==null&&r!==void 0?r:0)+t,bottom:((n=i.bottom)!==null&&n!==void 0?n:0)+t}}),dH=W([cr,cH,Am,Cm,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:s}=n;return i?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),fH=W([cr,Je,uH,Am,Cm,(e,t,r)=>r],(e,t,r,n,i,s)=>{var{padding:c}=i;return s?[n.height-c.bottom,c.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),iu=(e,t,r,n)=>{var i;switch(t){case"xAxis":return dH(e,r,n);case"yAxis":return fH(e,r,n);case"zAxis":return(i=R0(e,r))===null||i===void 0?void 0:i.range;case"angleAxis":return ET(e);case"radiusAxis":return OT(e,r);default:return}},KT=W([Lt,iu],$m),Xm=W([Lt,al,iH,KT],W0);W([nu,Wm,qt],H8);function YT(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Zm=(e,t)=>t,Qm=(e,t,r)=>r,mH=W(Em,Zm,Qm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(YT)),hH=W(Om,Zm,Qm,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(YT)),GT=(e,t)=>({width:e.width,height:t.height}),pH=(e,t)=>{var r=typeof t.width=="number"?t.width:Yc;return{width:r,height:e.height}},VT=W(cr,ii,GT),vH=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},gH=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},yH=W(ri,cr,mH,Zm,Qm,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=GT(t,u);c==null&&(c=vH(t,n,e));var h=n==="top"&&!i||n==="bottom"&&i;s[u.id]=c-Number(h)*m.height,c+=(h?-1:1)*m.height}),s}),bH=W(ti,cr,hH,Zm,Qm,(e,t,r,n,i)=>{var s={},c;return r.forEach(u=>{var m=pH(t,u);c==null&&(c=gH(t,n,e));var h=n==="left"&&!i||n==="right"&&i;s[u.id]=c-Number(h)*m.width,c+=(h?-1:1)*m.width}),s}),_H=(e,t)=>{var r=ii(e,t);if(r!=null)return yH(e,r.orientation,r.mirror)},xH=W([cr,ii,_H,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:e.left,y:0}:{x:e.left,y:i}}}),wH=(e,t)=>{var r=oi(e,t);if(r!=null)return bH(e,r.orientation,r.mirror)},jH=W([cr,oi,wH,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var i=r?.[n];return i==null?{x:0,y:e.top}:{x:i,y:e.top}}}),WT=W(cr,oi,(e,t)=>{var r=typeof t.width=="number"?t.width:Yc;return{width:r,height:e.height}}),dC=(e,t,r)=>{switch(t){case"xAxis":return VT(e,r).width;case"yAxis":return WT(e,r).height;default:return}},XT=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:i,type:s,dataKey:c}=r,u=Vi(e,n),m=t.map(h=>h.value);if(c&&u&&s==="category"&&i&&QN(m))return m}},J0=W([Je,Vm,Lt,qt],XT),ZT=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:i,scale:s}=r,c=Vi(e,n);if(c&&(i==="number"||s!=="auto"))return t.map(u=>u.value)}},e_=W([Je,Vm,ru,qt],ZT),fC=W([Je,R8,al,Xm,J0,e_,iu,Z0,qt],(e,t,r,n,i,s,c,u,m)=>{if(t!=null){var h=Vi(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:s,duplicateDomain:i,isCategorical:h,niceTicks:u,range:c,realScaleType:r,scale:n}}}),SH=(e,t,r,n,i,s,c,u,m)=>{if(!(t==null||n==null)){var h=Vi(e,m),{type:p,ticks:v,tickCount:_}=t,x=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,w=p==="category"&&n.bandwidth?n.bandwidth()/x:0;w=m==="angleAxis"&&s!=null&&s.length>=2?gr(s[0]-s[1])*2*w:w;var j=v||i;if(j){var S=j.map((O,C)=>{var A=c?c.indexOf(O):O;return{index:C,coordinate:n(A)+w,value:O,offset:w}});return S.filter(O=>zt(O.coordinate))}return h&&u?u.map((O,C)=>({coordinate:n(O)+w,value:O,index:C,offset:w})).filter(O=>zt(O.coordinate)):n.ticks?n.ticks(_).map(O=>({coordinate:n(O)+w,value:O,offset:w})):n.domain().map((O,C)=>({coordinate:n(O)+w,value:c?c[O]:O,index:C,offset:w}))}},QT=W([Je,ru,al,Xm,Z0,iu,J0,e_,qt],SH),EH=(e,t,r,n,i,s,c)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var u=Vi(e,c),{tickCount:m}=t,h=0;return h=c==="angleAxis"&&n?.length>=2?gr(n[0]-n[1])*2*h:h,u&&s?s.map((p,v)=>({coordinate:r(p)+h,value:p,index:v,offset:h})):r.ticks?r.ticks(m).map(p=>({coordinate:r(p)+h,value:p,offset:h})):r.domain().map((p,v)=>({coordinate:r(p)+h,value:i?i[p]:p,index:v,offset:h}))}},Fi=W([Je,ru,Xm,iu,J0,e_,qt],EH),Ki=W(Lt,Xm,(e,t)=>{if(!(e==null||t==null))return Vf(Vf({},e),{},{scale:t})}),OH=W([Lt,al,V0,KT],W0);W((e,t,r)=>R0(e,r),OH,(e,t)=>{if(!(e==null||t==null))return Vf(Vf({},e),{},{scale:t})});var CH=W([Je,Em,Om],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),JT=e=>e.options.defaultTooltipEventType,eP=e=>e.options.validateTooltipEventTypes;function tP(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function t_(e,t){var r=JT(e),n=eP(e);return tP(t,r,n)}function AH(e){return Te(t=>t_(t,e))}var rP=(e,t)=>{var r,n=Number(t);if(!(Qn(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},NH=e=>e.tooltip.settings,Li={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},kH={itemInteraction:{click:Li,hover:Li},axisInteraction:{click:Li,hover:Li},keyboardInteraction:Li,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},nP=Zr({name:"tooltip",initialState:kH,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:kt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Xn(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:kt()},removeTooltipEntrySettings:{reducer(e,t){var r=Xn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:kt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:DH,replaceTooltipEntrySettings:TH,removeTooltipEntrySettings:PH,setTooltipSettingsState:MH,setActiveMouseOverItemIndex:aP,mouseLeaveItem:RH,mouseLeaveChart:iP,setActiveClickItemIndex:qH,setMouseOverAxisIndex:oP,setMouseClickAxisIndex:zH,setSyncInteraction:ab,setKeyboardInteraction:ib}=nP.actions,LH=nP.reducer;function mC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(r),!0).forEach(function(n){IH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IH(e,t,r){return(t=UH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UH(e){var t=BH(e,"string");return typeof t=="symbol"?t:t+""}function BH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $H(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function HH(e){return e.index!=null}var sP=(e,t,r,n)=>{if(t==null)return Li;var i=$H(e,t,r);if(i==null)return Li;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(HH(i)){if(s)return Yd(Yd({},i),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return Yd(Yd({},Li),{},{coordinate:i.coordinate})};function FH(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function KH(e,t){var r=FH(e),n=t[0],i=t[1];if(r===void 0)return!1;var s=Math.min(n,i),c=Math.max(n,i);return r>=s&&r<=c}function YH(e,t,r){if(r==null||t==null)return!0;var n=pt(e,t);return n==null||!Hi(r)?!0:KH(n,r)}var r_=(e,t,r,n)=>{var i=e?.index;if(i==null)return null;var s=Number(i);if(!zt(s))return i;var c=0,u=1/0;t.length>0&&(u=t.length-1);var m=Math.max(c,Math.min(s,u)),h=t[m];return h==null||YH(h,r,n)?String(m):null},lP=(e,t,r,n,i,s,c,u)=>{if(!(s==null||u==null)){var m=c[0],h=m==null?void 0:u(m.positions,s);if(h!=null)return h;var p=i?.[Number(s)];if(p)switch(r){case"horizontal":return{x:p.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:p.coordinate}}}},cP=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var i;if(r==="hover"?i=e.itemInteraction.hover.graphicalItemId:i=e.itemInteraction.click.graphicalItemId,i==null&&n!=null){var s=e.tooltipItemPayloads[0];return s!=null?[s]:[]}return e.tooltipItemPayloads.filter(c=>{var u;return((u=c.settings)===null||u===void 0?void 0:u.graphicalItemId)===i})},ou=e=>e.options.tooltipPayloadSearcher,il=e=>e.tooltip;function hC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function pC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hC(Object(r),!0).forEach(function(n){GH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GH(e,t,r){return(t=VH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VH(e){var t=WH(e,"string");return typeof t=="symbol"?t:t+""}function WH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XH(e,t){return e??t}var uP=(e,t,r,n,i,s,c)=>{if(!(t==null||s==null)){var{chartData:u,computedData:m,dataStartIndex:h,dataEndIndex:p}=r,v=[];return e.reduce((_,x)=>{var w,{dataDefinedOnItem:j,settings:S}=x,O=XH(j,u),C=Array.isArray(O)?Kk(O,h,p):O,A=(w=S?.dataKey)!==null&&w!==void 0?w:n,k=S?.nameKey,D;if(n&&Array.isArray(C)&&!Array.isArray(C[0])&&c==="axis"?D=JN(C,n,i):D=s(C,t,m,k),Array.isArray(D))D.forEach(L=>{var X=pC(pC({},S),{},{name:L.name,unit:L.unit,color:void 0,fill:void 0});_.push(_E({tooltipEntrySettings:X,dataKey:L.dataKey,payload:L.payload,value:pt(L.payload,L.dataKey),name:L.name}))});else{var M;_.push(_E({tooltipEntrySettings:S,dataKey:A,payload:D,value:pt(D,A),name:(M=pt(D,k))!==null&&M!==void 0?M:S?.name}))}return _},v)}},n_=W([fr,Je,DT,A0,dr],HT),ZH=W([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),QH=W([dr,rl],q0),ol=W([ZH,fr,QH],z0,{memoizeOptions:{resultEqualityCheck:Ym}}),JH=W([ol],e=>e.filter(Fm)),e9=W([ol],L0,{memoizeOptions:{resultEqualityCheck:Ym}}),sl=W([e9,ai],I0),t9=W([JH,ai,fr],AT),a_=W([sl,fr,ol],B0),dP=W([fr],$0),r9=W([fr],e=>e.allowDataOverflow),fP=W([dP,r9],iT),n9=W([ol],e=>e.filter(Fm)),a9=W([t9,n9,eu,xT],RT),i9=W([a9,ai,dr,fP],qT),o9=W([ol],PT),s9=W([sl,fr,o9,Wm,dr],K0,{memoizeOptions:{resultEqualityCheck:Km}}),l9=W([zT,dr,rl],nl),c9=W([l9,dr],UT),u9=W([LT,dr,rl],nl),d9=W([u9,dr],BT),f9=W([IT,dr,rl],nl),m9=W([f9,dr],$T),h9=W([c9,m9,d9],Wf),p9=W([fr,dP,fP,i9,s9,h9,Je,dr],Y0),su=W([fr,Je,sl,a_,eu,dr,p9],G0),v9=W([su,fr,n_],X0),g9=W([fr,su,v9,dr],Q0),mP=e=>{var t=dr(e),r=rl(e),n=!1;return iu(e,t,r,n)},hP=W([fr,mP],$m),pP=W([fr,n_,g9,hP],W0),y9=W([Je,a_,fr,dr],XT),b9=W([Je,a_,fr,dr],ZT),_9=(e,t,r,n,i,s,c,u)=>{if(t){var{type:m}=t,h=Vi(e,u);if(n){var p=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,v=m==="category"&&n.bandwidth?n.bandwidth()/p:0;return v=u==="angleAxis"&&i!=null&&i?.length>=2?gr(i[0]-i[1])*2*v:v,h&&c?c.map((_,x)=>({coordinate:n(_)+v,value:_,index:x,offset:v})):n.domain().map((_,x)=>({coordinate:n(_)+v,value:s?s[_]:_,index:x,offset:v}))}}},si=W([Je,fr,n_,pP,mP,y9,b9,dr],_9),i_=W([JT,eP,NH],(e,t,r)=>tP(r.shared,e,t)),vP=e=>e.tooltip.settings.trigger,o_=e=>e.tooltip.settings.defaultIndex,lu=W([il,i_,vP,o_],sP),Yi=W([lu,sl,au,su],r_),gP=W([si,Yi],rP),s_=W([lu],e=>{if(e)return e.dataKey}),x9=W([lu],e=>{if(e)return e.graphicalItemId}),yP=W([il,i_,vP,o_],cP),w9=W([ti,ri,Je,cr,si,o_,yP,ou],lP),j9=W([lu,w9],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),S9=W([lu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),E9=W([yP,Yi,ai,au,gP,ou,i_],uP),O9=W([E9],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function vC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(r),!0).forEach(function(n){C9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function C9(e,t,r){return(t=A9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A9(e){var t=N9(e,"string");return typeof t=="symbol"?t:t+""}function N9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var k9=()=>Te(fr),D9=()=>{var e=k9(),t=Te(si),r=Te(pP);return Fs(!e||!r?void 0:gC(gC({},e),{},{scale:r}),t)};function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(n){T9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T9(e,t,r){return(t=P9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P9(e){var t=M9(e,"string");return typeof t=="symbol"?t:t+""}function M9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R9=(e,t,r,n)=>{var i=t.find(s=>s&&s.index===r);if(i){if(e==="horizontal")return{x:i.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}},q9=(e,t,r,n)=>{var i=t.find(h=>h&&h.index===r);if(i){if(e==="centric"){var s=i.coordinate,{radius:c}=n;return Rs(Rs(Rs({},n),tr(n.cx,n.cy,c,s)),{},{angle:s,radius:c})}var u=i.coordinate,{angle:m}=n;return Rs(Rs(Rs({},n),tr(n.cx,n.cy,u,m)),{},{angle:m,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function z9(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var bP=(e,t,r,n,i)=>{var s,c=(s=t?.length)!==null&&s!==void 0?s:0;if(c<=1||e==null)return 0;if(n==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var m,h,p,v,_,x=u>0?(m=r[u-1])===null||m===void 0?void 0:m.coordinate:(h=r[c-1])===null||h===void 0?void 0:h.coordinate,w=(p=r[u])===null||p===void 0?void 0:p.coordinate,j=u>=c-1?(v=r[0])===null||v===void 0?void 0:v.coordinate:(_=r[u+1])===null||_===void 0?void 0:_.coordinate,S=void 0;if(!(x==null||w==null||j==null))if(gr(w-x)!==gr(j-w)){var O=[];if(gr(j-w)===gr(i[1]-i[0])){S=j;var C=w+i[1]-i[0];O[0]=Math.min(C,(C+x)/2),O[1]=Math.max(C,(C+x)/2)}else{S=x;var A=j+i[1]-i[0];O[0]=Math.min(w,(A+w)/2),O[1]=Math.max(w,(A+w)/2)}var k=[Math.min(w,(S+w)/2),Math.max(w,(S+w)/2)];if(e>k[0]&&e<=k[1]||e>=O[0]&&e<=O[1]){var D;return(D=r[u])===null||D===void 0?void 0:D.index}}else{var M=Math.min(x,j),L=Math.max(x,j);if(e>(M+w)/2&&e<=(L+w)/2){var X;return(X=r[u])===null||X===void 0?void 0:X.index}}}else if(t)for(var re=0;re<c;re++){var ae=t[re];if(ae!=null){var G=t[re+1],U=t[re-1];if(re===0&&G!=null&&e<=(ae.coordinate+G.coordinate)/2||re===c-1&&U!=null&&e>(ae.coordinate+U.coordinate)/2||re>0&&re<c-1&&U!=null&&G!=null&&e>(ae.coordinate+U.coordinate)/2&&e<=(ae.coordinate+G.coordinate)/2)return ae.index}}return-1},L9=()=>Te(A0),l_=(e,t)=>t,_P=(e,t,r)=>r,c_=(e,t,r,n)=>n,I9=W(si,e=>pm(e,t=>t.coordinate)),u_=W([il,l_,_P,c_],sP),d_=W([u_,sl,au,su],r_),U9=(e,t,r)=>{if(t!=null){var n=il(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},xP=W([il,l_,_P,c_],cP),Xf=W([ti,ri,Je,cr,si,c_,xP,ou],lP),B9=W([u_,Xf],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),wP=W([si,d_],rP),$9=W([xP,d_,ai,au,wP,ou,l_],uP),H9=W([u_,d_],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),F9=(e,t,r,n,i,s,c)=>{if(!(!e||!r||!n||!i)&&z9(e,c)){var u=E5(e,t),m=bP(u,s,i,r,n),h=R9(t,i,m,e);return{activeIndex:String(m),activeCoordinate:h}}},K9=(e,t,r,n,i,s,c)=>{if(!(!e||!n||!i||!s||!r)){var u=C6(e,r);if(u){var m=O5(u,t),h=bP(m,c,s,n,i),p=q9(t,s,h,u);return{activeIndex:String(h),activeCoordinate:p}}}},Y9=(e,t,r,n,i,s,c,u)=>{if(!(!e||!t||!n||!i||!s))return t==="horizontal"||t==="vertical"?F9(e,t,n,i,s,c,u):K9(e,t,r,n,i,s,c)},G9=W(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),V9=W(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(rr)),r=Array.from(new Set(t));return r.sort((n,i)=>n-i)},{memoizeOptions:{resultEqualityCheck:k8}});function bC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function _C(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(r),!0).forEach(function(n){W9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function W9(e,t,r){return(t=X9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X9(e){var t=Z9(e,"string");return typeof t=="symbol"?t:t+""}function Z9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Q9={},J9={zIndexMap:Object.values(rr).reduce((e,t)=>_C(_C({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),Q9)},e7=new Set(Object.values(rr));function t7(e){return e7.has(e)}var jP=Zr({name:"zIndex",initialState:J9,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:kt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!t7(r)&&delete e.zIndexMap[r])},prepare:kt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:kt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:kt()}}}),{registerZIndexPortal:r7,unregisterZIndexPortal:n7,registerZIndexPortalElement:a7,unregisterZIndexPortalElement:i7}=jP.actions,o7=jP.reducer;function Qr(e){var{zIndex:t,children:r}=e,n=rU(),i=n&&t!==void 0&&t!==0,s=Tr(),c=Rt();y.useLayoutEffect(()=>i?(c(r7({zIndex:t})),()=>{c(n7({zIndex:t}))}):Hc,[c,t,i]);var u=Te(m=>G9(m,t,s));return i?u?_N.createPortal(r,u):null:r}function ob(){return ob=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ob.apply(null,arguments)}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){s7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s7(e,t,r){return(t=l7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l7(e){var t=c7(e,"string");return typeof t=="symbol"?t:t+""}function c7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function u7(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return y.isValidElement(t)?y.cloneElement(t,n):y.createElement(r,n)}function d7(e){var t,{coordinate:r,payload:n,index:i,offset:s,tooltipAxisBandSize:c,layout:u,cursor:m,tooltipEventType:h,chartName:p}=e,v=r,_=n,x=i;if(!m||!v||p!=="ScatterChart"&&h!=="axis")return null;var w,j,S;if(p==="ScatterChart")w=v,j=BU,S=rr.cursorLine;else if(p==="BarChart")w=$U(u,v,s,c),j=bD,S=rr.cursorRectangle;else if(u==="radial"&&rk(v)){var{cx:O,cy:C,radius:A,startAngle:k,endAngle:D}=xD(v);w={cx:O,cy:C,startAngle:k,endAngle:D,innerRadius:A,outerRadius:A},j=jD,S=rr.cursorLine}else w={points:D6(u,v,s)},j=t0,S=rr.cursorLine;var M=typeof m=="object"&&"className"in m?m.className:void 0,L=Gd(Gd(Gd(Gd({stroke:"#ccc",pointerEvents:"none"},s),w),Mo(m)),{},{payload:_,payloadIndex:x,className:ot("recharts-tooltip-cursor",M)});return y.createElement(Qr,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},y.createElement(u7,{cursor:m,cursorComp:j,cursorProps:L}))}function f7(e){var t=D9(),r=tD(),n=Ko(),i=L9();return t==null||r==null||n==null||i==null?null:y.createElement(d7,ob({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:i}))}var SP=y.createContext(null),m7=()=>y.useContext(SP),Hg={exports:{}},wC;function h7(){return wC||(wC=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(m,h,p){this.fn=m,this.context=h,this.once=p||!1}function s(m,h,p,v,_){if(typeof p!="function")throw new TypeError("The listener must be a function");var x=new i(p,v||m,_),w=r?r+h:h;return m._events[w]?m._events[w].fn?m._events[w]=[m._events[w],x]:m._events[w].push(x):(m._events[w]=x,m._eventsCount++),m}function c(m,h){--m._eventsCount===0?m._events=new n:delete m._events[h]}function u(){this._events=new n,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],p,v;if(this._eventsCount===0)return h;for(v in p=this._events)t.call(p,v)&&h.push(r?v.slice(1):v);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},u.prototype.listeners=function(h){var p=r?r+h:h,v=this._events[p];if(!v)return[];if(v.fn)return[v.fn];for(var _=0,x=v.length,w=new Array(x);_<x;_++)w[_]=v[_].fn;return w},u.prototype.listenerCount=function(h){var p=r?r+h:h,v=this._events[p];return v?v.fn?1:v.length:0},u.prototype.emit=function(h,p,v,_,x,w){var j=r?r+h:h;if(!this._events[j])return!1;var S=this._events[j],O=arguments.length,C,A;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),O){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,p),!0;case 3:return S.fn.call(S.context,p,v),!0;case 4:return S.fn.call(S.context,p,v,_),!0;case 5:return S.fn.call(S.context,p,v,_,x),!0;case 6:return S.fn.call(S.context,p,v,_,x,w),!0}for(A=1,C=new Array(O-1);A<O;A++)C[A-1]=arguments[A];S.fn.apply(S.context,C)}else{var k=S.length,D;for(A=0;A<k;A++)switch(S[A].once&&this.removeListener(h,S[A].fn,void 0,!0),O){case 1:S[A].fn.call(S[A].context);break;case 2:S[A].fn.call(S[A].context,p);break;case 3:S[A].fn.call(S[A].context,p,v);break;case 4:S[A].fn.call(S[A].context,p,v,_);break;default:if(!C)for(D=1,C=new Array(O-1);D<O;D++)C[D-1]=arguments[D];S[A].fn.apply(S[A].context,C)}}return!0},u.prototype.on=function(h,p,v){return s(this,h,p,v,!1)},u.prototype.once=function(h,p,v){return s(this,h,p,v,!0)},u.prototype.removeListener=function(h,p,v,_){var x=r?r+h:h;if(!this._events[x])return this;if(!p)return c(this,x),this;var w=this._events[x];if(w.fn)w.fn===p&&(!_||w.once)&&(!v||w.context===v)&&c(this,x);else{for(var j=0,S=[],O=w.length;j<O;j++)(w[j].fn!==p||_&&!w[j].once||v&&w[j].context!==v)&&S.push(w[j]);S.length?this._events[x]=S.length===1?S[0]:S:c(this,x)}return this},u.prototype.removeAllListeners=function(h){var p;return h?(p=r?r+h:h,this._events[p]&&c(this,p)):(this._events=new n,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u})(Hg)),Hg.exports}var p7=h7();const v7=Qa(p7);var Rc=new v7,sb="recharts.syncEvent.tooltip",jC="recharts.syncEvent.brush";function f_(e,t){if(t){var r=Number.parseInt(t,10);if(!Qn(r))return e?.[r]}}var g7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},EP=Zr({name:"options",initialState:g7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),y7=EP.reducer,{createEventEmitter:b7}=EP.actions;function _7(e){return e.tooltip.syncInteraction}var x7={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},OP=Zr({name:"chartData",initialState:x7,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:SC,setDataStartEndIndexes:w7,setComputedData:RZ}=OP.actions,j7=OP.reducer,S7=["x","y"];function EC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EC(Object(r),!0).forEach(function(n){E7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E7(e,t,r){return(t=O7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O7(e){var t=C7(e,"string");return typeof t=="symbol"?t:t+""}function C7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A7(e,t){if(e==null)return{};var r,n,i=N7(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function N7(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function k7(){var e=Te(N0),t=Te(k0),r=Rt(),n=Te(wT),i=Te(si),s=Ko(),c=Nm(),u=Te(m=>m.rootProps.className);y.useEffect(()=>{if(e==null)return Hc;var m=(h,p,v)=>{if(t!==v&&e===h){if(n==="index"){var _;if(c&&p!==null&&p!==void 0&&(_=p.payload)!==null&&_!==void 0&&_.coordinate&&p.payload.sourceViewBox){var x=p.payload.coordinate,{x:w,y:j}=x,S=A7(x,S7),{x:O,y:C,width:A,height:k}=p.payload.sourceViewBox,D=qs(qs({},S),{},{x:c.x+(A?(w-O)/A:0)*c.width,y:c.y+(k?(j-C)/k:0)*c.height});r(qs(qs({},p),{},{payload:qs(qs({},p.payload),{},{coordinate:D})}))}else r(p);return}if(i!=null){var M;if(typeof n=="function"){var L={activeTooltipIndex:p.payload.index==null?void 0:Number(p.payload.index),isTooltipActive:p.payload.active,activeIndex:p.payload.index==null?void 0:Number(p.payload.index),activeLabel:p.payload.label,activeDataKey:p.payload.dataKey,activeCoordinate:p.payload.coordinate},X=n(i,L);M=i[X]}else n==="value"&&(M=i.find(R=>String(R.value)===p.payload.label));var{coordinate:re}=p.payload;if(M==null||p.payload.active===!1||re==null||c==null){r(ab({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:ae,y:G}=re,U=Math.min(ae,c.x+c.width),ue=Math.min(G,c.y+c.height),ve={x:s==="horizontal"?M.coordinate:U,y:s==="horizontal"?ue:M.coordinate},q=ab({active:p.payload.active,coordinate:ve,dataKey:p.payload.dataKey,index:String(M.index),label:p.payload.label,sourceViewBox:p.payload.sourceViewBox,graphicalItemId:p.payload.graphicalItemId});r(q)}}};return Rc.on(sb,m),()=>{Rc.off(sb,m)}},[u,r,t,e,n,i,s,c])}function D7(){var e=Te(N0),t=Te(k0),r=Rt();y.useEffect(()=>{if(e==null)return Hc;var n=(i,s,c)=>{t!==c&&e===i&&r(w7(s))};return Rc.on(jC,n),()=>{Rc.off(jC,n)}},[r,t,e])}function T7(){var e=Rt();y.useEffect(()=>{e(b7())},[e]),k7(),D7()}function P7(e,t,r,n,i,s){var c=Te(x=>U9(x,e,t)),u=Te(k0),m=Te(N0),h=Te(wT),p=Te(_7),v=p?.active,_=Nm();y.useEffect(()=>{if(!v&&m!=null&&u!=null){var x=ab({active:s,coordinate:r,dataKey:c,index:i,label:typeof n=="number"?String(n):n,sourceViewBox:_,graphicalItemId:void 0});Rc.emit(sb,m,x,u)}},[v,r,c,i,n,u,m,h,s,_])}function OC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function CC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(r),!0).forEach(function(n){M7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M7(e,t,r){return(t=R7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R7(e){var t=q7(e,"string");return typeof t=="symbol"?t:t+""}function q7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z7(e){return e.dataKey}function L7(e,t){return y.isValidElement(e)?y.cloneElement(e,t):typeof e=="function"?y.createElement(e,t):y.createElement(_U,t)}var AC=[],I7={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Fg(e){var t,r,n=br(e,I7),{active:i,allowEscapeViewBox:s,animationDuration:c,animationEasing:u,content:m,filterNull:h,isAnimationActive:p,offset:v,payloadUniqBy:_,position:x,reverseDirection:w,useTranslate3d:j,wrapperStyle:S,cursor:O,shared:C,trigger:A,defaultIndex:k,portal:D,axisId:M}=n,L=Rt(),X=typeof k=="number"?String(k):k;y.useEffect(()=>{L(MH({shared:C,trigger:A,axisId:M,active:i,defaultIndex:X}))},[L,C,A,M,i,X]);var re=Nm(),ae=hD(),G=AH(C),{activeIndex:U,isActive:ue}=(t=Te(pe=>H9(pe,G,A,X)))!==null&&t!==void 0?t:{},ve=Te(pe=>$9(pe,G,A,X)),q=Te(pe=>wP(pe,G,A,X)),R=Te(pe=>B9(pe,G,A,X)),I=ve,ee=m7(),H=(r=i??ue)!==null&&r!==void 0?r:!1,[se,Se]=c4([I,H]),J=G==="axis"?q:void 0;P7(G,A,R,J,U,H);var $=D??ee;if($==null||re==null||G==null)return null;var ge=I??AC;H||(ge=AC),h&&ge.length&&(ge=RI(ge.filter(pe=>pe.value!=null&&(pe.hide!==!0||n.includeHidden)),_,z7));var Pe=ge.length>0,Le=y.createElement(CU,{allowEscapeViewBox:s,animationDuration:c,animationEasing:u,isAnimationActive:p,active:H,coordinate:R,hasPayload:Pe,offset:v,position:x,reverseDirection:w,useTranslate3d:j,viewBox:re,wrapperStyle:S,lastBoundingBox:se,innerRef:Se,hasPortalFromProps:!!D},L7(m,CC(CC({},n),{},{payload:ge,label:J,active:H,activeIndex:U,coordinate:R,accessibilityLayer:ae})));return y.createElement(y.Fragment,null,_N.createPortal(Le,$),H&&y.createElement(f7,{cursor:O,tooltipEventType:G,coordinate:R,payload:ge,index:U}))}var cu=e=>null;cu.displayName="Cell";function U7(e,t,r){return(t=B7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B7(e){var t=$7(e,"string");return typeof t=="symbol"?t:t+""}function $7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class H7{constructor(t){U7(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function NC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function F7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(r),!0).forEach(function(n){K7(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function K7(e,t,r){return(t=Y7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y7(e){var t=G7(e,"string");return typeof t=="symbol"?t:t+""}function G7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var V7={cacheSize:2e3,enableCache:!0},CP=F7({},V7),kC=new H7(CP.cacheSize),W7={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},DC="recharts_measurement_span";function X7(e,t){var r=t.fontSize||"",n=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",c=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(s,"|").concat(c,"|").concat(u)}var TC=(e,t)=>{try{var r=document.getElementById(DC);r||(r=document.createElement("span"),r.setAttribute("id",DC),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,W7,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},_c=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Mm.isSsr)return{width:0,height:0};if(!CP.enableCache)return TC(t,r);var n=X7(t,r),i=kC.get(n);if(i)return i;var s=TC(t,r);return kC.set(n,s),s},AP;function Z7(e,t,r){return(t=Q7(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q7(e){var t=J7(e,"string");return typeof t=="symbol"?t:t+""}function J7(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eF=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tF=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rF={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},nF=["cm","mm","pt","pc","in","Q","px"];function aF(e){return nF.includes(e)}var Is="NaN";function iF(e,t){return e*rF[t]}class Or{static parse(t){var r,[,n,i]=(r=tF.exec(t))!==null&&r!==void 0?r:[];return n==null?Or.NaN:new Or(parseFloat(n),i??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Qn(t)&&(this.unit=""),r!==""&&!eF.test(r)&&(this.num=NaN,this.unit=""),aF(r)&&(this.num=iF(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Or(NaN,""):new Or(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Or(NaN,""):new Or(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Or(NaN,""):new Or(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Or(NaN,""):new Or(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Qn(this.num)}}AP=Or;Z7(Or,"NaN",new AP(NaN,""));function NP(e){if(e==null||e.includes(Is))return Is;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,s]=(r=PC.exec(t))!==null&&r!==void 0?r:[],c=Or.parse(n??""),u=Or.parse(s??""),m=i==="*"?c.multiply(u):c.divide(u);if(m.isNaN())return Is;t=t.replace(PC,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,p,v,_]=(h=MC.exec(t))!==null&&h!==void 0?h:[],x=Or.parse(p??""),w=Or.parse(_??""),j=v==="+"?x.add(w):x.subtract(w);if(j.isNaN())return Is;t=t.replace(MC,j.toString())}return t}var RC=/\(([^()]*)\)/;function oF(e){for(var t=e,r;(r=RC.exec(t))!=null;){var[,n]=r;t=t.replace(RC,NP(n))}return t}function sF(e){var t=e.replace(/\s+/g,"");return t=oF(t),t=NP(t),t}function lF(e){try{return sF(e)}catch{return Is}}function Kg(e){var t=lF(e.slice(5,-1));return t===Is?"":t}var cF=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],uF=["dx","dy","angle","className","breakAll"];function lb(){return lb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lb.apply(null,arguments)}function qC(e,t){if(e==null)return{};var r,n,i=dF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function dF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kP=/[ \f\n\r\t\v\u2028\u2029]+/,DP=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];Mt(t)||(r?i=t.toString().split(""):i=t.toString().split(kP));var s=i.map(u=>({word:u,width:_c(u,n).width})),c=r?0:_c("",n).width;return{wordsWithComputedWidth:s,spaceWidth:c}}catch{return null}};function fF(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var TP=(e,t,r,n)=>e.reduce((i,s)=>{var{word:c,width:u}=s,m=i[i.length-1];if(m&&u!=null&&(t==null||n||m.width+u+r<Number(t)))m.words.push(c),m.width+=u+r;else{var h={words:[c],width:u};i.push(h)}return i},[]),PP=e=>e.reduce((t,r)=>t.width>r.width?t:r),mF="",zC=(e,t,r,n,i,s,c,u)=>{var m=e.slice(0,t),h=DP({breakAll:r,style:n,children:m+mF});if(!h)return[!1,[]];var p=TP(h.wordsWithComputedWidth,s,c,u),v=p.length>i||PP(p).width>Number(s);return[v,p]},hF=(e,t,r,n,i)=>{var{maxLines:s,children:c,style:u,breakAll:m}=e,h=De(s),p=String(c),v=TP(t,n,r,i);if(!h||i)return v;var _=v.length>s||PP(v).width>Number(n);if(!_)return v;for(var x=0,w=p.length-1,j=0,S;x<=w&&j<=p.length-1;){var O=Math.floor((x+w)/2),C=O-1,[A,k]=zC(p,C,m,u,s,n,r,i),[D]=zC(p,O,m,u,s,n,r,i);if(!A&&!D&&(x=O+1),A&&D&&(w=O-1),!A&&D){S=k;break}j++}return S||v},LC=e=>{var t=Mt(e)?[]:e.toString().split(kP);return[{words:t,width:void 0}]},pF=e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:s,maxLines:c}=e;if((t||r)&&!Mm.isSsr){var u,m,h=DP({breakAll:s,children:n,style:i});if(h){var{wordsWithComputedWidth:p,spaceWidth:v}=h;u=p,m=v}else return LC(n);return hF({breakAll:s,children:n,maxLines:c,style:i},u,m,t,!!r)}return LC(n)},MP="#808080",vF={angle:0,breakAll:!1,capHeight:"0.71em",fill:MP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Jm=y.forwardRef((e,t)=>{var r=br(e,vF),{x:n,y:i,lineHeight:s,capHeight:c,fill:u,scaleToFit:m,textAnchor:h,verticalAnchor:p}=r,v=qC(r,cF),_=y.useMemo(()=>pF({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:m,style:v.style,width:v.width}),[v.breakAll,v.children,v.maxLines,m,v.style,v.width]),{dx:x,dy:w,angle:j,className:S,breakAll:O}=v,C=qC(v,uF);if(!fa(n)||!fa(i)||_.length===0)return null;var A=Number(n)+(De(x)?x:0),k=Number(i)+(De(w)?w:0);if(!zt(A)||!zt(k))return null;var D;switch(p){case"start":D=Kg("calc(".concat(c,")"));break;case"middle":D=Kg("calc(".concat((_.length-1)/2," * -").concat(s," + (").concat(c," / 2))"));break;default:D=Kg("calc(".concat(_.length-1," * -").concat(s,")"));break}var M=[];if(m){var L=_[0].width,{width:X}=v;M.push("scale(".concat(De(X)&&De(L)?X/L:1,")"))}return j&&M.push("rotate(".concat(j,", ").concat(A,", ").concat(k,")")),M.length&&(C.transform=M.join(" ")),y.createElement("text",lb({},Ur(C),{ref:t,x:A,y:k,className:ot("recharts-text",S),textAnchor:h,fill:u.includes("url")?MP:u}),_.map((re,ae)=>{var G=re.words.join(O?"":" ");return y.createElement("tspan",{x:A,dy:ae===0?D:s,key:"".concat(G,"-").concat(ae)},G)}))});Jm.displayName="Text";var gF=["labelRef"],yF=["content"];function IC(e,t){if(e==null)return{};var r,n,i=bF(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UC(Object(r),!0).forEach(function(n){_F(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _F(e,t,r){return(t=xF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xF(e){var t=wF(e,"string");return typeof t=="symbol"?t:t+""}function wF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ia(){return Ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ia.apply(null,arguments)}var RP=y.createContext(null),jF=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c,children:u}=e,m=y.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:s,height:c}),[t,r,n,i,s,c]);return y.createElement(RP.Provider,{value:m},u)},qP=()=>{var e=y.useContext(RP),t=Nm();return e||eD(t)},SF=y.createContext(null),EF=()=>{var e=y.useContext(SF),t=Te(CT);return e||t},OF=e=>{var{value:t,formatter:r}=e,n=Mt(e.children)?t:e.children;return typeof r=="function"?r(n):n},m_=e=>e!=null&&typeof e=="function",CF=(e,t)=>{var r=gr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},AF=(e,t,r,n,i)=>{var{offset:s,className:c}=e,{cx:u,cy:m,innerRadius:h,outerRadius:p,startAngle:v,endAngle:_,clockWise:x}=i,w=(h+p)/2,j=CF(v,_),S=j>=0?1:-1,O,C;switch(t){case"insideStart":O=v+S*s,C=x;break;case"insideEnd":O=_-S*s,C=!x;break;case"end":O=_+S*s,C=x;break;default:throw new Error("Unsupported position ".concat(t))}C=j<=0?C:!C;var A=tr(u,m,w,O),k=tr(u,m,w,O+(C?1:-1)*359),D="M".concat(A.x,",").concat(A.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),M=Mt(e.id)?wc("recharts-radial-line-"):e.id;return y.createElement("text",Ia({},n,{dominantBaseline:"central",className:ot("recharts-radial-bar-label",c)}),y.createElement("defs",null,y.createElement("path",{id:M,d:D})),y.createElement("textPath",{xlinkHref:"#".concat(M)},r))},NF=(e,t,r)=>{var{cx:n,cy:i,innerRadius:s,outerRadius:c,startAngle:u,endAngle:m}=e,h=(u+m)/2;if(r==="outside"){var{x:p,y:v}=tr(n,i,c+t,h);return{x:p,y:v,textAnchor:p>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var _=(s+c)/2,{x,y:w}=tr(n,i,_,h);return{x,y:w,textAnchor:"middle",verticalAnchor:"middle"}},cb=e=>"cx"in e&&De(e.cx),kF=(e,t)=>{var{parentViewBox:r,offset:n,position:i}=e,s;r!=null&&!cb(r)&&(s=r);var{x:c,y:u,upperWidth:m,lowerWidth:h,height:p}=t,v=c,_=c+(m-h)/2,x=(v+_)/2,w=(m+h)/2,j=v+m/2,S=p>=0?1:-1,O=S*n,C=S>0?"end":"start",A=S>0?"start":"end",k=m>=0?1:-1,D=k*n,M=k>0?"end":"start",L=k>0?"start":"end";if(i==="top"){var X={x:v+m/2,y:u-O,textAnchor:"middle",verticalAnchor:C};return Vt(Vt({},X),s?{height:Math.max(u-s.y,0),width:m}:{})}if(i==="bottom"){var re={x:_+h/2,y:u+p+O,textAnchor:"middle",verticalAnchor:A};return Vt(Vt({},re),s?{height:Math.max(s.y+s.height-(u+p),0),width:h}:{})}if(i==="left"){var ae={x:x-D,y:u+p/2,textAnchor:M,verticalAnchor:"middle"};return Vt(Vt({},ae),s?{width:Math.max(ae.x-s.x,0),height:p}:{})}if(i==="right"){var G={x:x+w+D,y:u+p/2,textAnchor:L,verticalAnchor:"middle"};return Vt(Vt({},G),s?{width:Math.max(s.x+s.width-G.x,0),height:p}:{})}var U=s?{width:w,height:p}:{};return i==="insideLeft"?Vt({x:x+D,y:u+p/2,textAnchor:L,verticalAnchor:"middle"},U):i==="insideRight"?Vt({x:x+w-D,y:u+p/2,textAnchor:M,verticalAnchor:"middle"},U):i==="insideTop"?Vt({x:v+m/2,y:u+O,textAnchor:"middle",verticalAnchor:A},U):i==="insideBottom"?Vt({x:_+h/2,y:u+p-O,textAnchor:"middle",verticalAnchor:C},U):i==="insideTopLeft"?Vt({x:v+D,y:u+O,textAnchor:L,verticalAnchor:A},U):i==="insideTopRight"?Vt({x:v+m-D,y:u+O,textAnchor:M,verticalAnchor:A},U):i==="insideBottomLeft"?Vt({x:_+D,y:u+p-O,textAnchor:L,verticalAnchor:C},U):i==="insideBottomRight"?Vt({x:_+h-D,y:u+p-O,textAnchor:M,verticalAnchor:C},U):i&&typeof i=="object"&&(De(i.x)||Ka(i.x))&&(De(i.y)||Ka(i.y))?Vt({x:c+Dr(i.x,w),y:u+Dr(i.y,p),textAnchor:"end",verticalAnchor:"end"},U):Vt({x:j,y:u+p/2,textAnchor:"middle",verticalAnchor:"middle"},U)},DF={angle:0,offset:5,zIndex:rr.label,position:"middle",textBreakAll:!1};function zi(e){var t=br(e,DF),{viewBox:r,position:n,value:i,children:s,content:c,className:u="",textBreakAll:m,labelRef:h}=t,p=EF(),v=qP(),_=n==="center"?v:p??v,x,w,j;if(r==null?x=_:cb(r)?x=r:x=eD(r),!x||Mt(i)&&Mt(s)&&!y.isValidElement(c)&&typeof c!="function")return null;var S=Vt(Vt({},t),{},{viewBox:x});if(y.isValidElement(c)){var{labelRef:O}=S,C=IC(S,gF);return y.cloneElement(c,C)}if(typeof c=="function"){var{content:A}=S,k=IC(S,yF);if(w=y.createElement(c,k),y.isValidElement(w))return w}else w=OF(t);var D=Ur(t);if(cb(x)){if(n==="insideStart"||n==="insideEnd"||n==="end")return AF(t,n,w,D,x);j=NF(x,t.offset,t.position)}else j=kF(t,x);return y.createElement(Qr,{zIndex:t.zIndex},y.createElement(Jm,Ia({ref:h,className:ot("recharts-label",u)},D,j,{textAnchor:fF(D.textAnchor)?D.textAnchor:j.textAnchor,breakAll:m}),w))}zi.displayName="Label";var TF=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?y.createElement(zi,Ia({key:"label-implicit"},n)):fa(e)?y.createElement(zi,Ia({key:"label-implicit",value:e},n)):y.isValidElement(e)?e.type===zi?y.cloneElement(e,Vt({key:"label-implicit"},n)):y.createElement(zi,Ia({key:"label-implicit",content:e},n)):m_(e)?y.createElement(zi,Ia({key:"label-implicit",content:e},n)):e&&typeof e=="object"?y.createElement(zi,Ia({},e,{key:"label-implicit"},n)):null};function PF(e){var{label:t,labelRef:r}=e,n=qP();return TF(t,n,r)||null}var Yg={},Gg={},BC;function MF(){return BC||(BC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(Gg)),Gg}var Vg={},$C;function RF(){return $C||($C=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(Vg)),Vg}var HC;function qF(){return HC||(HC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MF(),r=RF(),n=Hb();function i(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=i})(Yg)),Yg}var Wg,FC;function zF(){return FC||(FC=1,Wg=qF().last),Wg}var LF=zF();const IF=Qa(LF);var UF=["valueAccessor"],BF=["dataKey","clockWise","id","textBreakAll","zIndex"];function Zf(){return Zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zf.apply(null,arguments)}function KC(e,t){if(e==null)return{};var r,n,i=$F(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $F(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var HF=e=>Array.isArray(e.value)?IF(e.value):e.value,zP=y.createContext(void 0),LP=zP.Provider,IP=y.createContext(void 0),FF=IP.Provider;function KF(){return y.useContext(zP)}function YF(){return y.useContext(IP)}function cf(e){var{valueAccessor:t=HF}=e,r=KC(e,UF),{dataKey:n,clockWise:i,id:s,textBreakAll:c,zIndex:u}=r,m=KC(r,BF),h=KF(),p=YF(),v=h||p;return!v||!v.length?null:y.createElement(Qr,{zIndex:u??rr.label},y.createElement(yr,{className:"recharts-label-list"},v.map((_,x)=>{var w,j=Mt(n)?t(_,x):pt(_&&_.payload,n),S=Mt(s)?{}:{id:"".concat(s,"-").concat(x)};return y.createElement(zi,Zf({key:"label-".concat(x)},Ur(_),m,S,{fill:(w=r.fill)!==null&&w!==void 0?w:_.fill,parentViewBox:_.parentViewBox,value:j,textBreakAll:c,viewBox:_.viewBox,index:x,zIndex:0}))})))}cf.displayName="LabelList";function h_(e){var{label:t}=e;return t?t===!0?y.createElement(cf,{key:"labelList-implicit"}):y.isValidElement(t)||m_(t)?y.createElement(cf,{key:"labelList-implicit",content:t}):typeof t=="object"?y.createElement(cf,Zf({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function ub(){return ub=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ub.apply(null,arguments)}var UP=e=>{var{cx:t,cy:r,r:n,className:i}=e,s=ot("recharts-dot",i);return De(t)&&De(r)&&De(n)?y.createElement("circle",ub({},vn(e),$b(e),{className:s,cx:t,cy:r,r:n})):null},BP=e=>e.graphicalItems.polarItems,GF=W([qt,tu],q0),eh=W([BP,Lt,GF],z0),VF=W([eh],L0),th=W([VF,Bm],I0),WF=W([th,Lt,eh],B0);W([th,Lt,eh],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(i=>{var s,c=pt(n,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(n=>({value:pt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var YC=()=>{},XF=W([th,Lt,eh,Wm,qt],K0),ZF=W([Lt,H0,F0,YC,XF,YC,Je,qt],Y0),$P=W([Lt,Je,th,WF,eu,qt,ZF],G0),QF=W([$P,Lt,al],X0);W([Lt,$P,QF,qt],Q0);var JF={radiusAxis:{},angleAxis:{}},HP=Zr({name:"polarAxis",initialState:JF,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:qZ,removeRadiusAxis:zZ,addAngleAxis:LZ,removeAngleAxis:IZ}=HP.actions,eK=HP.reducer;function GC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function VC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(r),!0).forEach(function(n){tK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tK(e,t,r){return(t=rK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rK(e){var t=nK(e,"string");return typeof t=="symbol"?t:t+""}function nK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aK=(e,t)=>t,p_=W([BP,aK],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),iK=[],v_=(e,t,r)=>r?.length===0?iK:r,FP=W([Bm,p_,v_],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=n,(!i||!i.length)&&r!=null&&(i=r.map(s=>VC(VC({},t.presentationProps),s.props))),i!=null)return i}}),oK=W([FP,p_,v_],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,i)=>{var s,c=pt(n,t.nameKey,t.name),u;return r!=null&&(s=r[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?u=r[i].props.fill:typeof n=="object"&&n!=null&&"fill"in n?u=n.fill:u=t.fill,{value:Qs(c,t.dataKey),color:u,payload:n,type:t.legendType}})}),sK=W([FP,p_,v_,cr],(e,t,r,n)=>{if(!(t==null||e==null))return cY({offset:n,pieSettings:t,displayedData:e,cells:r})}),Xg={exports:{}},ht={};var WC;function lK(){if(WC)return ht;WC=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),_=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");function w(j){if(typeof j=="object"&&j!==null){var S=j.$$typeof;switch(S){case e:switch(j=j.type,j){case r:case i:case n:case m:case h:case _:return j;default:switch(j=j&&j.$$typeof,j){case c:case u:case v:case p:return j;case s:return j;default:return S}}case t:return S}}}return ht.ContextConsumer=s,ht.ContextProvider=c,ht.Element=e,ht.ForwardRef=u,ht.Fragment=r,ht.Lazy=v,ht.Memo=p,ht.Portal=t,ht.Profiler=i,ht.StrictMode=n,ht.Suspense=m,ht.SuspenseList=h,ht.isContextConsumer=function(j){return w(j)===s},ht.isContextProvider=function(j){return w(j)===c},ht.isElement=function(j){return typeof j=="object"&&j!==null&&j.$$typeof===e},ht.isForwardRef=function(j){return w(j)===u},ht.isFragment=function(j){return w(j)===r},ht.isLazy=function(j){return w(j)===v},ht.isMemo=function(j){return w(j)===p},ht.isPortal=function(j){return w(j)===t},ht.isProfiler=function(j){return w(j)===i},ht.isStrictMode=function(j){return w(j)===n},ht.isSuspense=function(j){return w(j)===m},ht.isSuspenseList=function(j){return w(j)===h},ht.isValidElementType=function(j){return typeof j=="string"||typeof j=="function"||j===r||j===i||j===n||j===m||j===h||typeof j=="object"&&j!==null&&(j.$$typeof===v||j.$$typeof===p||j.$$typeof===c||j.$$typeof===s||j.$$typeof===u||j.$$typeof===x||j.getModuleId!==void 0)},ht.typeOf=w,ht}var XC;function cK(){return XC||(XC=1,Xg.exports=lK()),Xg.exports}var uK=cK(),ZC=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",QC=null,Zg=null,KP=e=>{if(e===QC&&Array.isArray(Zg))return Zg;var t=[];return y.Children.forEach(e,r=>{Mt(r)||(uK.isFragment(r)?t=t.concat(KP(r.props.children)):t.push(r))}),Zg=t,QC=e,t};function g_(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(i=>ZC(i)):n=[ZC(t)],KP(e).forEach(i=>{var s=qo(i,"type.displayName")||qo(i,"type.name");s&&n.indexOf(s)!==-1&&r.push(i)}),r}var YP=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Qg={},JC;function dK(){return JC||(JC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(r,Symbol.toStringTag)?.writable?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Qg)),Qg}var Jg,eA;function fK(){return eA||(eA=1,Jg=dK().isPlainObject),Jg}var mK=fK();const hK=Qa(mK);var tA,rA,nA,aA,iA;function oA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function sA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oA(Object(r),!0).forEach(function(n){pK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pK(e,t,r){return(t=vK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vK(e){var t=gK(e,"string");return typeof t=="symbol"?t:t+""}function gK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qf(){return Qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qf.apply(null,arguments)}function mc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var lA=(e,t,r,n,i)=>{var s=r-n,c;return c=Ft(tA||(tA=mc(["M ",",",""])),e,t),c+=Ft(rA||(rA=mc(["L ",",",""])),e+r,t),c+=Ft(nA||(nA=mc(["L ",",",""])),e+r-s/2,t+i),c+=Ft(aA||(aA=mc(["L ",",",""])),e+r-s/2-n,t+i),c+=Ft(iA||(iA=mc(["L ",","," Z"])),e,t),c},yK={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},bK=e=>{var t=br(e,yK),{x:r,y:n,upperWidth:i,lowerWidth:s,height:c,className:u}=t,{animationEasing:m,animationDuration:h,animationBegin:p,isUpdateAnimationActive:v}=t,_=y.useRef(null),[x,w]=y.useState(-1),j=y.useRef(i),S=y.useRef(s),O=y.useRef(c),C=y.useRef(r),A=y.useRef(n),k=Wc(e,"trapezoid-");if(y.useEffect(()=>{if(_.current&&_.current.getTotalLength)try{var ve=_.current.getTotalLength();ve&&w(ve)}catch{}},[]),r!==+r||n!==+n||i!==+i||s!==+s||c!==+c||i===0&&s===0||c===0)return null;var D=ot("recharts-trapezoid",u);if(!v)return y.createElement("g",null,y.createElement("path",Qf({},Ur(t),{className:D,d:lA(r,n,i,s,c)})));var M=j.current,L=S.current,X=O.current,re=C.current,ae=A.current,G="0px ".concat(x===-1?1:x,"px"),U="".concat(x,"px 0px"),ue=pD(["strokeDasharray"],h,m);return y.createElement(Vc,{animationId:k,key:k,canBegin:x>0,duration:h,easing:m,isActive:v,begin:p},ve=>{var q=Dt(M,i,ve),R=Dt(L,s,ve),I=Dt(X,c,ve),ee=Dt(re,r,ve),H=Dt(ae,n,ve);_.current&&(j.current=q,S.current=R,O.current=I,C.current=ee,A.current=H);var se=ve>0?{transition:ue,strokeDasharray:U}:{strokeDasharray:G};return y.createElement("path",Qf({},Ur(t),{className:D,d:lA(ee,H,q,R,I),ref:_,style:sA(sA({},se),t.style)}))})},_K=["option","shapeType","activeClassName"];function xK(e,t){if(e==null)return{};var r,n,i=wK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function wK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function cA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(r),!0).forEach(function(n){jK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jK(e,t,r){return(t=SK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SK(e){var t=EK(e,"string");return typeof t=="symbol"?t:t+""}function EK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OK(e,t){return Jf(Jf({},t),e)}function CK(e,t){return e==="symbols"}function uA(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return y.createElement(bD,r);case"trapezoid":return y.createElement(bK,r);case"sector":return y.createElement(jD,r);case"symbols":if(CK(t))return y.createElement(tk,r);break;case"curve":return y.createElement(t0,r);default:return null}}function AK(e){return y.isValidElement(e)?e.props:e}function y_(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,i=xK(e,_K),s;if(y.isValidElement(t))s=y.cloneElement(t,Jf(Jf({},i),AK(t)));else if(typeof t=="function")s=t(i,i.index);else if(hK(t)&&typeof t!="boolean"){var c=OK(t,i);s=y.createElement(uA,{shapeType:r,elementProps:c})}else{var u=i;s=y.createElement(uA,{shapeType:r,elementProps:u})}return i.isActive?y.createElement(yr,{className:n},s):s}var b_=(e,t,r)=>{var n=Rt();return(i,s)=>c=>{e?.(i,s,c),n(aP({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}},__=e=>{var t=Rt();return(r,n)=>i=>{e?.(r,n,i),t(RH())}},x_=(e,t,r)=>{var n=Rt();return(i,s)=>c=>{e?.(i,s,c),n(qH({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:r}))}};function w_(e){var{tooltipEntrySettings:t}=e,r=Rt(),n=Tr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(DH(t)):i.current!==t&&r(TH({prev:i.current,next:t})),i.current=t)},[t,r,n]),y.useLayoutEffect(()=>()=>{i.current&&(r(PH(i.current)),i.current=null)},[r]),null}function GP(e){var{legendPayload:t}=e,r=Rt(),n=Tr(),i=y.useRef(null);return y.useLayoutEffect(()=>{n||(i.current===null?r(dD(t)):i.current!==t&&r(fD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(mD(i.current)),i.current=null)},[r]),null}function NK(e){var{legendPayload:t}=e,r=Rt(),n=Te(Je),i=y.useRef(null);return y.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(i.current===null?r(dD(t)):i.current!==t&&r(fD({prev:i.current,next:t})),i.current=t)},[r,n,t]),y.useLayoutEffect(()=>()=>{i.current&&(r(mD(i.current)),i.current=null)},[r]),null}var ey,kK=()=>{var[e]=y.useState(()=>wc("uid-"));return e},DK=(ey=fq.useId)!==null&&ey!==void 0?ey:kK;function TK(e,t){var r=DK();return t||(e?"".concat(e,"-").concat(r):r)}var PK=y.createContext(void 0),j_=e=>{var{id:t,type:r,children:n}=e,i=TK("recharts-".concat(r),t);return y.createElement(PK.Provider,{value:i},n(i))},MK={cartesianItems:[],polarItems:[]},VP=Zr({name:"graphicalItems",initialState:MK,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:kt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=Xn(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:kt()},removeCartesianGraphicalItem:{reducer(e,t){var r=Xn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:kt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:kt()},removePolarGraphicalItem:{reducer(e,t){var r=Xn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:kt()}}}),{addCartesianGraphicalItem:RK,replaceCartesianGraphicalItem:qK,removeCartesianGraphicalItem:zK,addPolarGraphicalItem:LK,removePolarGraphicalItem:IK}=VP.actions,UK=VP.reducer,BK=e=>{var t=Rt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(RK(e)):r.current!==e&&t(qK({prev:r.current,next:e})),r.current=e},[t,e]),y.useLayoutEffect(()=>()=>{r.current&&(t(zK(r.current)),r.current=null)},[t]),null},WP=y.memo(BK);function $K(e){var t=Rt();return y.useLayoutEffect(()=>(t(LK(e)),()=>{t(IK(e))}),[t,e]),null}var HK=["key"],FK=["onMouseEnter","onClick","onMouseLeave"],KK=["id"],YK=["id"];function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dA(Object(r),!0).forEach(function(n){GK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function GK(e,t,r){return(t=VK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VK(e){var t=WK(e,"string");return typeof t=="symbol"?t:t+""}function WK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gi(){return Gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gi.apply(null,arguments)}function rh(e,t){if(e==null)return{};var r,n,i=XK(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function XK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ZK(e){var t=y.useMemo(()=>g_(e.children,cu),[e.children]),r=Te(n=>oK(n,e.id,t));return r==null?null:y.createElement(NK,{legendPayload:r})}var QK=y.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:i,strokeWidth:s,fill:c,name:u,hide:m,tooltipType:h,id:p}=e,v={dataDefinedOnItem:n.map(_=>_.tooltipPayload),positions:n.map(_=>_.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:c,dataKey:t,nameKey:r,name:Qs(u,t),hide:m,type:h,color:c,unit:"",graphicalItemId:p}};return y.createElement(w_,{tooltipEntrySettings:v})}),JK=(e,t)=>e>t?"start":e<t?"end":"middle",eY=(e,t,r)=>Dr(typeof t=="function"?t(e):t,r,r*.8),tY=(e,t,r)=>{var{top:n,left:i,width:s,height:c}=t,u=_D(s,c),m=i+Dr(e.cx,s,s/2),h=n+Dr(e.cy,c,c/2),p=Dr(e.innerRadius,u,0),v=eY(r,e.outerRadius,u),_=e.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:m,cy:h,innerRadius:p,outerRadius:v,maxRadius:_}},rY=(e,t)=>{var r=gr(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function nY(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var aY=(e,t)=>{if(y.isValidElement(e))return y.cloneElement(e,t);if(typeof e=="function")return e(t);var r=ot("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:n}=t,i=rh(t,HK);return y.createElement(t0,Gi({},i,{type:"linear",className:r}))},iY=(e,t,r)=>{if(y.isValidElement(e))return y.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),y.isValidElement(n)))return n;var i=ot("recharts-pie-label-text",nY(e));return y.createElement(Jm,Gi({},t,{alignmentBaseline:"middle",className:i}),n)};function oY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i,labelLine:s,dataKey:c}=r;if(!n||!i||!t)return null;var u=vn(r),m=Mo(i),h=Mo(s),p=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,v=t.map((_,x)=>{var w=(_.startAngle+_.endAngle)/2,j=tr(_.cx,_.cy,_.outerRadius+p,w),S=Kt(Kt(Kt(Kt({},u),_),{},{stroke:"none"},m),{},{index:x,textAnchor:JK(j.x,_.cx)},j),O=Kt(Kt(Kt(Kt({},u),_),{},{fill:"none",stroke:_.fill},h),{},{index:x,points:[tr(_.cx,_.cy,_.outerRadius,w),j],key:"line"});return y.createElement(Qr,{zIndex:rr.label,key:"label-".concat(_.startAngle,"-").concat(_.endAngle,"-").concat(_.midAngle,"-").concat(x)},y.createElement(yr,null,s&&aY(s,O),iY(i,S,pt(_,c))))});return y.createElement(yr,{className:"recharts-pie-labels"},v)}function sY(e){var{sectors:t,props:r,showLabels:n}=e,{label:i}=r;return typeof i=="object"&&i!=null&&"position"in i?y.createElement(h_,{label:i}):y.createElement(oY,{sectors:t,props:r,showLabels:n})}function lY(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:i,shape:s,id:c}=e,u=Te(Yi),m=Te(s_),h=Te(x9),{onMouseEnter:p,onClick:v,onMouseLeave:_}=i,x=rh(i,FK),w=b_(p,i.dataKey,c),j=__(_),S=x_(v,i.dataKey,c);return t==null||t.length===0?null:y.createElement(y.Fragment,null,t.map((O,C)=>{if(O?.startAngle===0&&O?.endAngle===0&&t.length!==1)return null;var A=h==null||h===c,k=String(C)===u&&(m==null||i.dataKey===m)&&A,D=u?n:null,M=r&&k?r:D,L=Kt(Kt({},O),{},{stroke:O.stroke,tabIndex:-1,[Wk]:C,[Xk]:c});return y.createElement(yr,Gi({key:"sector-".concat(O?.startAngle,"-").concat(O?.endAngle,"-").concat(O.midAngle,"-").concat(C),tabIndex:-1,className:"recharts-pie-sector"},hm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),y.createElement(y_,Gi({option:s??M,index:C,shapeType:"sector",isActive:k},L)))}))}function cY(e){var t,{pieSettings:r,displayedData:n,cells:i,offset:s}=e,{cornerRadius:c,startAngle:u,endAngle:m,dataKey:h,nameKey:p,tooltipType:v}=r,_=Math.abs(r.minAngle),x=rY(u,m),w=Math.abs(x),j=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,S=n.filter(M=>pt(M,h,0)!==0).length,O=(w>=360?S:S-1)*j,C=w-S*_-O,A=n.reduce((M,L)=>{var X=pt(L,h,0);return M+(De(X)?X:0)},0),k;if(A>0){var D;k=n.map((M,L)=>{var X=pt(M,h,0),re=pt(M,p,L),ae=tY(r,s,M),G=(De(X)?X:0)/A,U,ue=Kt(Kt({},M),i&&i[L]&&i[L].props);L?U=D.endAngle+gr(x)*j*(X!==0?1:0):U=u;var ve=U+gr(x)*((X!==0?_:0)+G*C),q=(U+ve)/2,R=(ae.innerRadius+ae.outerRadius)/2,I=[{name:re,value:X,payload:ue,dataKey:h,type:v,graphicalItemId:r.id}],ee=tr(ae.cx,ae.cy,R,q);return D=Kt(Kt(Kt(Kt({},r.presentationProps),{},{percent:G,cornerRadius:typeof c=="string"?parseFloat(c):c,name:re,tooltipPayload:I,midAngle:q,middleRadius:R,tooltipPosition:ee},ue),ae),{},{value:X,dataKey:h,startAngle:U,endAngle:ve,payload:ue,paddingAngle:gr(x)*j}),D})}return k}function uY(e){var{showLabels:t,sectors:r,children:n}=e,i=y.useMemo(()=>!t||!r?[]:r.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[r,t]);return y.createElement(FF,{value:t?i:void 0},n)}function dY(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,activeShape:h,inactiveShape:p,onAnimationStart:v,onAnimationEnd:_}=t,x=Wc(t,"recharts-pie-"),w=r.current,[j,S]=y.useState(!1),O=y.useCallback(()=>{typeof _=="function"&&_(),S(!1)},[_]),C=y.useCallback(()=>{typeof v=="function"&&v(),S(!0)},[v]);return y.createElement(uY,{showLabels:!j,sectors:i},y.createElement(Vc,{animationId:x,begin:c,duration:u,isActive:s,easing:m,onAnimationStart:C,onAnimationEnd:O,key:x},A=>{var k=[],D=i&&i[0],M=D?.startAngle;return i?.forEach((L,X)=>{var re=w&&w[X],ae=X>0?qo(L,"paddingAngle",0):0;if(re){var G=Dt(re.endAngle-re.startAngle,L.endAngle-L.startAngle,A),U=Kt(Kt({},L),{},{startAngle:M+ae,endAngle:M+G+ae});k.push(U),M=U.endAngle}else{var{endAngle:ue,startAngle:ve}=L,q=Dt(0,ue-ve,A),R=Kt(Kt({},L),{},{startAngle:M+ae,endAngle:M+q+ae});k.push(R),M=R.endAngle}}),r.current=k,y.createElement(yr,null,y.createElement(lY,{sectors:k,activeShape:h,inactiveShape:p,allOtherPieProps:t,shape:t.shape,id:n}))}),y.createElement(sY,{showLabels:!j,sectors:i,props:t}),t.children)}var fY={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:rr.area};function mY(e){var{id:t}=e,r=rh(e,KK),{hide:n,className:i,rootTabIndex:s}=e,c=y.useMemo(()=>g_(e.children,cu),[e.children]),u=Te(p=>sK(p,t,c)),m=y.useRef(null),h=ot("recharts-pie",i);return n||u==null?(m.current=null,y.createElement(yr,{tabIndex:s,className:h})):y.createElement(Qr,{zIndex:e.zIndex},y.createElement(QK,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:u,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),y.createElement(yr,{tabIndex:s,className:h},y.createElement(dY,{props:Kt(Kt({},r),{},{sectors:u}),previousSectorsRef:m,id:t})))}function XP(e){var t=br(e,fY),{id:r}=t,n=rh(t,YK),i=vn(n);return y.createElement(j_,{id:r,type:"pie"},s=>y.createElement(y.Fragment,null,y.createElement($K,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),y.createElement(ZK,Gi({},n,{id:s})),y.createElement(mY,Gi({},n,{id:s}))))}XP.displayName="Pie";var hY=["points"];function fA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ty(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(r),!0).forEach(function(n){pY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pY(e,t,r){return(t=vY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vY(e){var t=gY(e,"string");return typeof t=="symbol"?t:t+""}function gY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function em(){return em=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},em.apply(null,arguments)}function yY(e,t){if(e==null)return{};var r,n,i=bY(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _Y(e){var{option:t,dotProps:r,className:n}=e;if(y.isValidElement(t))return y.cloneElement(t,r);if(typeof t=="function")return t(r);var i=ot(n,typeof t!="boolean"?t.className:""),s=r??{},{points:c}=s,u=yY(s,hY);return y.createElement(UP,em({},u,{className:i}))}function xY(e,t){return e==null?!1:t?!0:e.length===1}function wY(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:s,baseProps:c,needClip:u,clipPathId:m,zIndex:h=rr.scatter}=e;if(!xY(t,r))return null;var p=YP(r),v=l3(r),_=t.map((w,j)=>{var S,O,C=ty(ty(ty({r:3},c),v),{},{index:j,cx:(S=w.x)!==null&&S!==void 0?S:void 0,cy:(O=w.y)!==null&&O!==void 0?O:void 0,dataKey:s,value:w.value,payload:w.payload,points:t});return y.createElement(_Y,{key:"dot-".concat(j),option:r,dotProps:C,className:i})}),x={};return u&&m!=null&&(x.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(m,")")),y.createElement(Qr,{zIndex:h},y.createElement(yr,em({className:n},x),_))}function mA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(r),!0).forEach(function(n){jY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jY(e,t,r){return(t=SY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SY(e){var t=EY(e,"string");return typeof t=="symbol"?t:t+""}function EY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZP=0,OY={xAxis:{},yAxis:{},zAxis:{}},QP=Zr({name:"cartesianAxis",initialState:OY,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:kt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:kt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:kt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:kt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:kt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:kt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:kt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:kt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:kt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var s=i.widthHistory||[];if(s.length===3&&s[0]===s[2]&&n===s[1]&&n!==i.width&&Math.abs(n-s[0])<=1)return;var c=[...s,n].slice(-3);e.yAxis[r]=hA(hA({},e.yAxis[r]),{},{width:n,widthHistory:c})}}}}),{addXAxis:CY,replaceXAxis:AY,removeXAxis:NY,addYAxis:kY,replaceYAxis:DY,removeYAxis:TY,addZAxis:UZ,replaceZAxis:BZ,removeZAxis:$Z,updateYAxisWidth:PY}=QP.actions,MY=QP.reducer,RY=W([cr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),qY=W([RY,ti,ri],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),S_=()=>Te(qY),zY=()=>Te(O9);function pA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ry(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pA(Object(r),!0).forEach(function(n){LY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LY(e,t,r){return(t=IY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IY(e){var t=UY(e,"string");return typeof t=="symbol"?t:t+""}function UY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var BY=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:i,dataKey:s,clipPath:c}=e;if(i===!1||t.x==null||t.y==null)return null;var u={index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=ry(ry(ry({},u),Mo(i)),$b(i)),h;return y.isValidElement(i)?h=y.cloneElement(i,m):typeof i=="function"?h=i(m):h=y.createElement(UP,m),y.createElement(yr,{className:"recharts-active-dot",clipPath:c},h)};function $Y(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:s,zIndex:c=rr.activeDot}=e,u=Te(Yi),m=zY();if(t==null||m==null)return null;var h=t.find(p=>m.includes(p.payload));return Mt(h)?null:y.createElement(Qr,{zIndex:c},y.createElement(BY,{point:h,childIndex:Number(u),mainColor:r,dataKey:i,activeDot:n,clipPath:s}))}var vA=(e,t,r)=>{var n=r??e;if(!Mt(n))return Dr(n,t,0)},HY=(e,t,r)=>{var n={},i=e.filter(Fm),s=e.filter(h=>h.stackId==null),c=i.reduce((h,p)=>(h[p.stackId]||(h[p.stackId]=[]),h[p.stackId].push(p),h),n),u=Object.entries(c).map(h=>{var[p,v]=h,_=v.map(w=>w.dataKey),x=vA(t,r,v[0].barSize);return{stackId:p,dataKeys:_,barSize:x}}),m=s.map(h=>{var p=[h.dataKey].filter(_=>_!=null),v=vA(t,r,h.barSize);return{stackId:void 0,dataKeys:p,barSize:v}});return[...u,...m]};function gA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gA(Object(r),!0).forEach(function(n){FY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FY(e,t,r){return(t=KY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KY(e){var t=YY(e,"string");return typeof t=="symbol"?t:t+""}function YY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GY(e,t,r,n,i){var s=n.length;if(!(s<1)){var c=Dr(e,r,0,!0),u,m=[];if(zt(n[0].barSize)){var h=!1,p=r/s,v=n.reduce((O,C)=>O+(C.barSize||0),0);v+=(s-1)*c,v>=r&&(v-=(s-1)*c,c=0),v>=r&&p>0&&(h=!0,p*=.9,v=s*p);var _=(r-v)/2>>0,x={offset:_-c,size:0};u=n.reduce((O,C)=>{var A,k={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:x.offset+x.size+c,size:h?p:(A=C.barSize)!==null&&A!==void 0?A:0}},D=[...O,k];return x=D[D.length-1].position,D},m)}else{var w=Dr(t,r,0,!0);r-2*w-(s-1)*c<=0&&(c=0);var j=(r-2*w-(s-1)*c)/s;j>1&&(j>>=0);var S=zt(i)?Math.min(j,i):j;u=n.reduce((O,C,A)=>[...O,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:w+(j+c)*A+(j-S)/2,size:S}}],m)}return u}}var VY=(e,t,r,n,i,s,c)=>{var u=Mt(c)?t:c,m=GY(r,n,i!==s?i:s,e,u);return i!==s&&m!=null&&(m=m.map(h=>Vd(Vd({},h),{},{position:Vd(Vd({},h.position),{},{offset:h.position.offset-i/2})}))),m},WY=(e,t)=>{var r=M0(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var i=e[n];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===r)}}}};function XY(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&zt(e.zIndex)?e.zIndex:t}var JP=e=>{var{chartData:t}=e,r=Rt(),n=Tr();return y.useEffect(()=>n?()=>{}:(r(SC(t)),()=>{r(SC(void 0))}),[t,r,n]),null},yA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},eM=Zr({name:"brush",initialState:yA,reducers:{setBrushSettings(e,t){return t.payload==null?yA:t.payload}}}),{setBrushSettings:HZ}=eM.actions,ZY=eM.reducer;function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(n){tM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tM(e,t,r){return(t=QY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QY(e){var t=JY(e,"string");return typeof t=="symbol"?t:t+""}function JY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eG=(e,t)=>{var{x:r,y:n}=e,{x:i,y:s}=t;return{x:Math.min(r,i),y:Math.min(n,s),width:Math.abs(i-r),height:Math.abs(s-n)}},FZ=e=>{var{x1:t,y1:r,x2:n,y2:i}=e;return eG({x:t,y:r},{x:n,y:i})};class nh{static create(t){return new nh(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+c}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],i=r[r.length-1];return n<=i?t>=n&&t<=i:t>=i&&t<=n}}tM(nh,"EPS",1e-4);var KZ=e=>{var t=Object.keys(e).reduce((r,n)=>Wd(Wd({},r),{},{[n]:nh.create(e[n])}),{});return Wd(Wd({},t),{},{apply(r){var{bandAware:n,position:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.fromEntries(Object.entries(r).map(s=>{var[c,u]=s;return[c,t[c].apply(u,{bandAware:n,position:i})]}))},isInRange(r){return Object.keys(r).every(n=>t[n].isInRange(r[n]))}})};function tG(e){return(e%180+180)%180}var rG=function(t){var{width:r,height:n}=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=tG(i),c=s*Math.PI/180,u=Math.atan(n/r),m=c>u&&c<Math.PI-u?n/Math.sin(c):r/Math.cos(c);return Math.abs(m)},nG={dots:[],areas:[],lines:[]},rM=Zr({name:"referenceElements",initialState:nG,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Xn(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Xn(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Xn(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:YZ,removeDot:GZ,addArea:VZ,removeArea:WZ,addLine:XZ,removeLine:ZZ}=rM.actions,aG=rM.reducer,nM=y.createContext(void 0),iG=e=>{var{children:t}=e,[r]=y.useState("".concat(wc("recharts"),"-clip")),n=S_();if(n==null)return null;var{x:i,y:s,width:c,height:u}=n;return y.createElement(nM.Provider,{value:r},y.createElement("defs",null,y.createElement("clipPath",{id:r},y.createElement("rect",{x:i,y:s,height:u,width:c}))),t)},QZ=()=>y.useContext(nM);function aM(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];i!==void 0&&r.push(i)}return r}function oG(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return rG(n,r)}function sG(e,t,r){var n=r==="width",{x:i,y:s,width:c,height:u}=e;return t===1?{start:n?i:s,end:n?i+c:s+u}:{start:n?i+c:s+u,end:n?i:s}}function qc(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function lG(e,t){return aM(e,t+1)}function cG(e,t,r,n,i){for(var s=(n||[]).slice(),{start:c,end:u}=t,m=0,h=1,p=c,v=function(){var w=n?.[m];if(w===void 0)return{v:aM(n,h)};var j=m,S,O=()=>(S===void 0&&(S=r(w,j)),S),C=w.coordinate,A=m===0||qc(e,C,O,p,u);A||(m=0,p=c,h+=1),A&&(p=C+e*(O()/2+i),m+=h)},_;h<=s.length;)if(_=v(),_)return _.v;return[]}function uG(e,t,r,n,i){var s=(n||[]).slice(),c=s.length;if(c===0)return[];for(var{start:u,end:m}=t,h=1;h<=c;h++){for(var p=(c-1)%h,v=u,_=!0,x=function(){var C=n[w],A=w,k,D=()=>(k===void 0&&(k=r(C,A)),k),M=C.coordinate,L=w===p||qc(e,M,D,v,m);if(!L)return _=!1,1;L&&(v=M+e*(D()/2+i))},w=p;w<c&&!x();w+=h);if(_){for(var j=[],S=p;S<c;S+=h)j.push(n[S]);return j}}return[]}function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Nr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(n){dG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dG(e,t,r){return(t=fG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fG(e){var t=mG(e,"string");return typeof t=="symbol"?t:t+""}function mG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hG(e,t,r,n,i){for(var s=(n||[]).slice(),c=s.length,{start:u}=t,{end:m}=t,h=function(_){var x=s[_],w,j=()=>(w===void 0&&(w=r(x,_)),w);if(_===c-1){var S=e*(x.coordinate+e*j()/2-m);s[_]=x=Nr(Nr({},x),{},{tickCoord:S>0?x.coordinate-S*e:x.coordinate})}else s[_]=x=Nr(Nr({},x),{},{tickCoord:x.coordinate});if(x.tickCoord!=null){var O=qc(e,x.tickCoord,j,u,m);O&&(m=x.tickCoord-e*(j()/2+i),s[_]=Nr(Nr({},x),{},{isShow:!0}))}},p=c-1;p>=0;p--)h(p);return s}function pG(e,t,r,n,i,s){var c=(n||[]).slice(),u=c.length,{start:m,end:h}=t;if(s){var p=n[u-1],v=r(p,u-1),_=e*(p.coordinate+e*v/2-h);if(c[u-1]=p=Nr(Nr({},p),{},{tickCoord:_>0?p.coordinate-_*e:p.coordinate}),p.tickCoord!=null){var x=qc(e,p.tickCoord,()=>v,m,h);x&&(h=p.tickCoord-e*(v/2+i),c[u-1]=Nr(Nr({},p),{},{isShow:!0}))}}for(var w=s?u-1:u,j=function(C){var A=c[C],k,D=()=>(k===void 0&&(k=r(A,C)),k);if(C===0){var M=e*(A.coordinate-e*D()/2-m);c[C]=A=Nr(Nr({},A),{},{tickCoord:M<0?A.coordinate-M*e:A.coordinate})}else c[C]=A=Nr(Nr({},A),{},{tickCoord:A.coordinate});if(A.tickCoord!=null){var L=qc(e,A.tickCoord,D,m,h);L&&(m=A.tickCoord+e*(D()/2+i),c[C]=Nr(Nr({},A),{},{isShow:!0}))}},S=0;S<w;S++)j(S);return c}function E_(e,t,r){var{tick:n,ticks:i,viewBox:s,minTickGap:c,orientation:u,interval:m,tickFormatter:h,unit:p,angle:v}=e;if(!i||!i.length||!n)return[];if(De(m)||Mm.isSsr){var _;return(_=lG(i,De(m)?m:0))!==null&&_!==void 0?_:[]}var x=[],w=u==="top"||u==="bottom"?"width":"height",j=p&&w==="width"?_c(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},S=(A,k)=>{var D=typeof h=="function"?h(A.value,k):A.value;return w==="width"?oG(_c(D,{fontSize:t,letterSpacing:r}),j,v):_c(D,{fontSize:t,letterSpacing:r})[w]},O=i.length>=2?gr(i[1].coordinate-i[0].coordinate):1,C=sG(s,O,w);return m==="equidistantPreserveStart"?cG(O,C,S,i,c):m==="equidistantPreserveEnd"?uG(O,C,S,i,c):(m==="preserveStart"||m==="preserveStartEnd"?x=pG(O,C,S,i,c,m==="preserveStartEnd"):x=hG(O,C,S,i,c),x.filter(A=>A.isShow))}var vG=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:s=0}=e,c=0;if(t){Array.from(t).forEach(p=>{if(p){var v=p.getBoundingClientRect();v.width>c&&(c=v.width)}});var u=r?r.getBoundingClientRect().width:0,m=i+s,h=c+m+u+(r?n:0);return Math.round(h)}return 0},gG=["axisLine","width","height","className","hide","ticks","axisType"];function yG(e,t){if(e==null)return{};var r,n,i=bG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function bG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bo(){return Bo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bo.apply(null,arguments)}function xA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(r),!0).forEach(function(n){_G(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _G(e,t,r){return(t=xG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xG(e){var t=wG(e,"string");return typeof t=="symbol"?t:t+""}function wG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ha={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:rr.axis};function jG(e){var{x:t,y:r,width:n,height:i,orientation:s,mirror:c,axisLine:u,otherSvgProps:m}=e;if(!u)return null;var h=er(er(er({},m),vn(u)),{},{fill:"none"});if(s==="top"||s==="bottom"){var p=+(s==="top"&&!c||s==="bottom"&&c);h=er(er({},h),{},{x1:t,y1:r+p*i,x2:t+n,y2:r+p*i})}else{var v=+(s==="left"&&!c||s==="right"&&c);h=er(er({},h),{},{x1:t+v*n,y1:r,x2:t+v*n,y2:r+i})}return y.createElement("line",Bo({},h,{className:ot("recharts-cartesian-axis-line",qo(u,"className"))}))}function SG(e,t,r,n,i,s,c,u,m){var h,p,v,_,x,w,j=u?-1:1,S=e.tickSize||c,O=De(e.tickCoord)?e.tickCoord:e.coordinate;switch(s){case"top":h=p=e.coordinate,_=r+ +!u*i,v=_-j*S,w=v-j*m,x=O;break;case"left":v=_=e.coordinate,p=t+ +!u*n,h=p-j*S,x=h-j*m,w=O;break;case"right":v=_=e.coordinate,p=t+ +u*n,h=p+j*S,x=h+j*m,w=O;break;default:h=p=e.coordinate,_=r+ +u*i,v=_+j*S,w=v+j*m,x=O;break}return{line:{x1:h,y1:v,x2:p,y2:_},tick:{x,y:w}}}function EG(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function OG(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function CG(e){var{option:t,tickProps:r,value:n}=e,i,s=ot(r.className,"recharts-cartesian-axis-tick-value");if(y.isValidElement(t))i=y.cloneElement(t,er(er({},r),{},{className:s}));else if(typeof t=="function")i=t(er(er({},r),{},{className:s}));else{var c="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(c=ot(c,t?.className)),i=y.createElement(Jm,Bo({},r,{className:c}),n)}return i}var AG=y.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:s,tickFormatter:c,unit:u,padding:m,tickTextProps:h,orientation:p,mirror:v,x:_,y:x,width:w,height:j,tickSize:S,tickMargin:O,fontSize:C,letterSpacing:A,getTicksConfig:k,events:D,axisType:M}=e,L=E_(er(er({},k),{},{ticks:r}),C,A),X=EG(p,v),re=OG(p,v),ae=vn(k),G=Mo(n),U={};typeof i=="object"&&(U=i);var ue=er(er({},ae),{},{fill:"none"},U),ve=L.map(I=>er({entry:I},SG(I,_,x,w,j,p,S,v,O))),q=ve.map(I=>{var{entry:ee,line:H}=I;return y.createElement(yr,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(ee.value,"-").concat(ee.coordinate,"-").concat(ee.tickCoord)},i&&y.createElement("line",Bo({},ue,H,{className:ot("recharts-cartesian-axis-tick-line",qo(i,"className"))})))}),R=ve.map((I,ee)=>{var{entry:H,tick:se}=I,Se=er(er(er(er({textAnchor:X,verticalAnchor:re},ae),{},{stroke:"none",fill:s},G),se),{},{index:ee,payload:H,visibleTicksCount:L.length,tickFormatter:c,padding:m},h);return y.createElement(yr,Bo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(H.value,"-").concat(H.coordinate,"-").concat(H.tickCoord)},hm(D,H,ee)),n&&y.createElement(CG,{option:n,tickProps:Se,value:"".concat(typeof c=="function"?c(H.value,ee):H.value).concat(u||"")}))});return y.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(M,"-ticks")},R.length>0&&y.createElement(Qr,{zIndex:rr.label},y.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(M,"-tick-labels"),ref:t},R)),q.length>0&&y.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(M,"-tick-lines")},q))}),NG=y.forwardRef((e,t)=>{var{axisLine:r,width:n,height:i,className:s,hide:c,ticks:u,axisType:m}=e,h=yG(e,gG),[p,v]=y.useState(""),[_,x]=y.useState(""),w=y.useRef(null);y.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return vG({ticks:w.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var j=y.useCallback(S=>{if(S){var O=S.getElementsByClassName("recharts-cartesian-axis-tick-value");w.current=O;var C=O[0];if(C){var A=window.getComputedStyle(C),k=A.fontSize,D=A.letterSpacing;(k!==p||D!==_)&&(v(k),x(D))}}},[p,_]);return c||n!=null&&n<=0||i!=null&&i<=0?null:y.createElement(Qr,{zIndex:e.zIndex},y.createElement(yr,{className:ot("recharts-cartesian-axis",s)},y.createElement(jG,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:vn(e)}),y.createElement(AG,{ref:j,axisType:m,events:h,fontSize:p,getTicksConfig:e,height:e.height,letterSpacing:_,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),y.createElement(jF,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},y.createElement(PF,{label:e.label,labelRef:e.labelRef}),e.children)))}),O_=y.forwardRef((e,t)=>{var r=br(e,Ha);return y.createElement(NG,Bo({},r,{ref:t}))});O_.displayName="CartesianAxis";var kG=["x1","y1","x2","y2","key"],DG=["offset"],TG=["xAxisId","yAxisId"],PG=["xAxisId","yAxisId"];function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){MG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MG(e,t,r){return(t=RG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RG(e){var t=qG(e,"string");return typeof t=="symbol"?t:t+""}function qG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ao.apply(null,arguments)}function tm(e,t){if(e==null)return{};var r,n,i=zG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function zG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var LG=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:i,width:s,height:c,ry:u}=e;return y.createElement("rect",{x:n,y:i,ry:u,width:s,height:c,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function iM(e){var{option:t,lineItemProps:r}=e,n;if(y.isValidElement(t))n=y.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var i,{x1:s,y1:c,x2:u,y2:m,key:h}=r,p=tm(r,kG),v=(i=vn(p))!==null&&i!==void 0?i:{},{offset:_}=v,x=tm(v,DG);n=y.createElement("line",Ao({},x,{x1:s,y1:c,x2:u,y2:m,fill:"none",key:h}))}return n}function IG(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=tm(e,TG),m=i.map((h,p)=>{var v=kr(kr({},u),{},{x1:t,y1:h,x2:t+r,y2:h,key:"line-".concat(p),index:p});return y.createElement(iM,{key:"line-".concat(p),option:n,lineItemProps:v})});return y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},m)}function UG(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:s,yAxisId:c}=e,u=tm(e,PG),m=i.map((h,p)=>{var v=kr(kr({},u),{},{x1:h,y1:t,x2:h,y2:t+r,key:"line-".concat(p),index:p});return y.createElement(iM,{option:n,lineItemProps:v,key:"line-".concat(p)})});return y.createElement("g",{className:"recharts-cartesian-grid-vertical"},m)}function BG(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:s,height:c,horizontalPoints:u,horizontal:m=!0}=e;if(!m||!t||!t.length||u==null)return null;var h=u.map(v=>Math.round(v+i-i)).sort((v,_)=>v-_);i!==h[0]&&h.unshift(0);var p=h.map((v,_)=>{var x=!h[_+1],w=x?i+c-v:h[_+1]-v;if(w<=0)return null;var j=_%t.length;return y.createElement("rect",{key:"react-".concat(_),y:v,x:n,height:w,width:s,stroke:"none",fill:t[j],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},p)}function $G(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:s,width:c,height:u,verticalPoints:m}=e;if(!t||!r||!r.length)return null;var h=m.map(v=>Math.round(v+i-i)).sort((v,_)=>v-_);i!==h[0]&&h.unshift(0);var p=h.map((v,_)=>{var x=!h[_+1],w=x?i+c-v:h[_+1]-v;if(w<=0)return null;var j=_%r.length;return y.createElement("rect",{key:"react-".concat(_),x:v,y:s,width:w,height:u,stroke:"none",fill:r[j],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},p)}var HG=(e,t)=>{var{xAxis:r,width:n,height:i,offset:s}=e;return Yk(E_(kr(kr(kr({},Ha),r),{},{ticks:Gk(r),viewBox:{x:0,y:0,width:n,height:i}})),s.left,s.left+s.width,t)},FG=(e,t)=>{var{yAxis:r,width:n,height:i,offset:s}=e;return Yk(E_(kr(kr(kr({},Ha),r),{},{ticks:Gk(r),viewBox:{x:0,y:0,width:n,height:i}})),s.top,s.top+s.height,t)},KG={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:rr.grid};function db(e){var t=rD(),r=nD(),n=tD(),i=kr(kr({},br(e,KG)),{},{x:De(e.x)?e.x:n.left,y:De(e.y)?e.y:n.top,width:De(e.width)?e.width:n.width,height:De(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:c,x:u,y:m,width:h,height:p,syncWithTicks:v,horizontalValues:_,verticalValues:x}=i,w=Tr(),j=Te(re=>fC(re,"xAxis",s,w)),S=Te(re=>fC(re,"yAxis",c,w));if(!ma(h)||!ma(p)||!De(u)||!De(m))return null;var O=i.verticalCoordinatesGenerator||HG,C=i.horizontalCoordinatesGenerator||FG,{horizontalPoints:A,verticalPoints:k}=i;if((!A||!A.length)&&typeof C=="function"){var D=_&&_.length,M=C({yAxis:S?kr(kr({},S),{},{ticks:D?_:S.ticks}):void 0,width:t??h,height:r??p,offset:n},D?!0:v);Nf(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof M,"]")),Array.isArray(M)&&(A=M)}if((!k||!k.length)&&typeof O=="function"){var L=x&&x.length,X=O({xAxis:j?kr(kr({},j),{},{ticks:L?x:j.ticks}):void 0,width:t??h,height:r??p,offset:n},L?!0:v);Nf(Array.isArray(X),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof X,"]")),Array.isArray(X)&&(k=X)}return y.createElement(Qr,{zIndex:i.zIndex},y.createElement("g",{className:"recharts-cartesian-grid"},y.createElement(LG,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),y.createElement(BG,Ao({},i,{horizontalPoints:A})),y.createElement($G,Ao({},i,{verticalPoints:k})),y.createElement(IG,Ao({},i,{offset:n,horizontalPoints:A,xAxis:j,yAxis:S})),y.createElement(UG,Ao({},i,{offset:n,verticalPoints:k,xAxis:j,yAxis:S}))))}db.displayName="CartesianGrid";var YG={},oM=Zr({name:"errorBars",initialState:YG,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(s=>s.dataKey===n.dataKey&&s.direction===n.direction?i:s))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(i=>i.dataKey!==n.dataKey||i.direction!==n.direction))}}}),{addErrorBar:JZ,replaceErrorBar:eQ,removeErrorBar:tQ}=oM.actions,GG=oM.reducer,VG=["children"];function WG(e,t){if(e==null)return{};var r,n,i=XG(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function XG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZG={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},QG=y.createContext(ZG);function sM(e){var{children:t}=e,r=WG(e,VG);return y.createElement(QG.Provider,{value:r},t)}function C_(e,t){var r,n,i=Te(h=>ii(h,e)),s=Te(h=>oi(h,t)),c=(r=i?.allowDataOverflow)!==null&&r!==void 0?r:hr.allowDataOverflow,u=(n=s?.allowDataOverflow)!==null&&n!==void 0?n:pr.allowDataOverflow,m=c||u;return{needClip:m,needClipX:c,needClipY:u}}function lM(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=S_(),{needClipX:s,needClipY:c,needClip:u}=C_(t,r);if(!u||!i)return null;var{x:m,y:h,width:p,height:v}=i;return y.createElement("clipPath",{id:"clipPath-".concat(n)},y.createElement("rect",{x:s?m:m-p/2,y:c?h:h-v/2,width:s?p:p*2,height:c?v:v*2}))}var cM=(e,t,r,n)=>Ki(e,"xAxis",t,n),uM=(e,t,r,n)=>Fi(e,"xAxis",t,n),dM=(e,t,r,n)=>Ki(e,"yAxis",r,n),fM=(e,t,r,n)=>Fi(e,"yAxis",r,n),JG=W([Je,cM,dM,uM,fM],(e,t,r,n,i)=>Vi(e,"xAxis")?Fs(t,n,!1):Fs(r,i,!1)),eV=(e,t,r,n,i)=>i;function tV(e){return e.type==="line"}var rV=W([Gm,eV],(e,t)=>e.filter(tV).find(r=>r.id===t)),nV=W([Je,cM,dM,uM,fM,rV,JG,E0],(e,t,r,n,i,s,c,u)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:p}=u;if(!(s==null||t==null||r==null||n==null||i==null||n.length===0||i.length===0||c==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:v,data:_}=s,x;if(_!=null&&_.length>0?x=_:x=m?.slice(h,p+1),x!=null)return FV({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:v,bandSize:c,displayedData:x})}});function aV(e){var t=Mo(e),r=3,n=2;if(t!=null){var{r:i,strokeWidth:s}=t,c=Number(i),u=Number(s);return(Number.isNaN(c)||c<0)&&(c=r),(Number.isNaN(u)||u<0)&&(u=n),{r:c,strokeWidth:u}}return{r,strokeWidth:n}}var ny={exports:{}},ay={};var jA;function iV(){if(jA)return ay;jA=1;var e=sm();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,c=e.useMemo,u=e.useDebugValue;return ay.useSyncExternalStoreWithSelector=function(m,h,p,v,_){var x=i(null);if(x.current===null){var w={hasValue:!1,value:null};x.current=w}else w=x.current;x=c(function(){function S(D){if(!O){if(O=!0,C=D,D=v(D),_!==void 0&&w.hasValue){var M=w.value;if(_(M,D))return A=M}return A=D}if(M=A,r(C,D))return M;var L=v(D);return _!==void 0&&_(M,L)?(C=D,M):(C=D,A=L)}var O=!1,C,A,k=p===void 0?null:p;return[function(){return S(h())},k===null?void 0:function(){return S(k())}]},[h,p,v,_]);var j=n(m,x[0],x[1]);return s(function(){w.hasValue=!0,w.value=j},[j]),u(j),j},ay}var SA;function oV(){return SA||(SA=1,ny.exports=iV()),ny.exports}oV();function sV(e){e()}function lV(){let e=null,t=null;return{clear(){e=null,t=null},notify(){sV(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const i=t={callback:r,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!n||e===null||(n=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var EA={notify(){},get:()=>[]};function cV(e,t){let r,n=EA,i=0,s=!1;function c(j){p();const S=n.subscribe(j);let O=!1;return()=>{O||(O=!0,S(),v())}}function u(){n.notify()}function m(){w.onStateChange&&w.onStateChange()}function h(){return s}function p(){i++,r||(r=e.subscribe(m),n=lV())}function v(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=EA)}function _(){s||(s=!0,p())}function x(){s&&(s=!1,v())}const w={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:m,isSubscribed:h,trySubscribe:_,tryUnsubscribe:x,getListeners:()=>n};return w}var uV=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dV=uV(),fV=()=>typeof navigator<"u"&&navigator.product==="ReactNative",mV=fV(),hV=()=>dV||mV?y.useLayoutEffect:y.useEffect,pV=hV();function OA(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function vV(e,t){if(OA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Object.prototype.hasOwnProperty.call(t,r[i])||!OA(e[r[i]],t[r[i]]))return!1;return!0}var gV=Symbol.for("react-redux-context"),yV=typeof globalThis<"u"?globalThis:{};function bV(){if(!y.createContext)return{};const e=yV[gV]??=new Map;let t=e.get(y.createContext);return t||(t=y.createContext(null),e.set(y.createContext,t)),t}var _V=bV();function xV(e){const{children:t,context:r,serverState:n,store:i}=e,s=y.useMemo(()=>{const m=cV(i);return{store:i,subscription:m,getServerState:n?()=>n:void 0}},[i,n]),c=y.useMemo(()=>i.getState(),[i]);pV(()=>{const{subscription:m}=s;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),c!==i.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[s,c]);const u=r||_V;return y.createElement(u.Provider,{value:s},t)}var wV=xV,jV=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function SV(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function ah(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(jV.has(n)){if(e[n]==null&&t[n]==null)continue;if(!vV(e[n],t[n]))return!1}else if(!SV(e[n],t[n]))return!1;return!0}var EV=["id"],OV=["type","layout","connectNulls","needClip","shape"],CV=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function zc(){return zc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zc.apply(null,arguments)}function CA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function la(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CA(Object(r),!0).forEach(function(n){AV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AV(e,t,r){return(t=NV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NV(e){var t=kV(e,"string");return typeof t=="symbol"?t:t+""}function kV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A_(e,t){if(e==null)return{};var r,n,i=DV(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function DV(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TV=e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Qs(r,t),payload:e}]},PV=y.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:s,name:c,hide:u,unit:m,tooltipType:h,id:p}=e,v={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:void 0,name:Qs(c,t),hide:u,type:h,color:n,unit:m,graphicalItemId:p}};return y.createElement(w_,{tooltipEntrySettings:v})}),mM=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function MV(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}var RV=(e,t,r)=>{var n=r.reduce((v,_)=>v+_);if(!n)return mM(t,e);for(var i=Math.floor(e/n),s=e%n,c=t-e,u=[],m=0,h=0;m<r.length;h+=r[m],++m)if(h+r[m]>s){u=[...r.slice(0,m),s-h];break}var p=u.length%2===0?[0,c]:[c];return[...MV(r,i),...u,...p].map(v=>"".concat(v,"px")).join(", ")};function qV(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:s,needClip:c}=n,{id:u}=n,m=A_(n,EV),h=vn(m);return y.createElement(wY,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:h,needClip:c,clipPathId:t})}function zV(e){var{showLabels:t,children:r,points:n}=e,i=y.useMemo(()=>n?.map(s=>{var c,u,m={x:(c=s.x)!==null&&c!==void 0?c:0,y:(u=s.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return la(la({},m),{},{value:s.value,payload:s.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[n]);return y.createElement(LP,{value:t?i:void 0},r)}function AA(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:s}=e,{type:c,layout:u,connectNulls:m,needClip:h,shape:p}=s,v=A_(s,OV),_=la(la({},Ur(v)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:n,type:c,layout:u,connectNulls:m,strokeDasharray:i??s.strokeDasharray});return y.createElement(y.Fragment,null,n?.length>1&&y.createElement(y_,zc({shapeType:"curve",option:p},_,{pathRef:r})),y.createElement(qV,{points:n,clipPathId:t,props:s}))}function LV(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function IV(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:c,strokeDasharray:u,isAnimationActive:m,animationBegin:h,animationDuration:p,animationEasing:v,animateNewValues:_,width:x,height:w,onAnimationEnd:j,onAnimationStart:S}=r,O=i.current,C=Wc(c,"recharts-line-"),A=y.useRef(C),[k,D]=y.useState(!1),M=!k,L=y.useCallback(()=>{typeof j=="function"&&j(),D(!1)},[j]),X=y.useCallback(()=>{typeof S=="function"&&S(),D(!0)},[S]),re=LV(n.current),ae=y.useRef(0);A.current!==C&&(ae.current=s.current,A.current=C);var G=ae.current;return y.createElement(zV,{points:c,showLabels:M},r.children,y.createElement(Vc,{animationId:C,begin:h,duration:p,isActive:m,easing:v,onAnimationEnd:L,onAnimationStart:X,key:C},U=>{var ue=Dt(G,re+G,U),ve=Math.min(ue,re),q;if(m)if(u){var R="".concat(u).split(/[,\s]+/gim).map(H=>parseFloat(H));q=RV(ve,re,R)}else q=mM(re,ve);else q=u==null?void 0:String(u);if(U>0&&re>0&&(i.current=c,s.current=Math.max(s.current,ve)),O){var I=O.length/c.length,ee=U===1?c:c.map((H,se)=>{var Se=Math.floor(se*I);if(O[Se]){var J=O[Se];return la(la({},H),{},{x:Dt(J.x,H.x,U),y:Dt(J.y,H.y,U)})}return _?la(la({},H),{},{x:Dt(x*2,H.x,U),y:Dt(w/2,H.y,U)}):la(la({},H),{},{x:H.x,y:H.y})});return i.current=ee,y.createElement(AA,{props:r,points:ee,clipPathId:t,pathRef:n,strokeDasharray:q})}return y.createElement(AA,{props:r,points:c,clipPathId:t,pathRef:n,strokeDasharray:q})}),y.createElement(h_,{label:r.label}))}function UV(e){var{clipPathId:t,props:r}=e,n=y.useRef(null),i=y.useRef(0),s=y.useRef(null);return y.createElement(IV,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:s})}var BV=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:pt(e.payload,t)}};class $V extends y.Component{render(){var{hide:t,dot:r,points:n,className:i,xAxisId:s,yAxisId:c,top:u,left:m,width:h,height:p,id:v,needClip:_,zIndex:x}=this.props;if(t)return null;var w=ot("recharts-line",i),j=v,{r:S,strokeWidth:O}=aV(r),C=YP(r),A=S*2+O,k=_?"url(#clipPath-".concat(C?"":"dots-").concat(j,")"):void 0;return y.createElement(Qr,{zIndex:x},y.createElement(yr,{className:w},_&&y.createElement("defs",null,y.createElement(lM,{clipPathId:j,xAxisId:s,yAxisId:c}),!C&&y.createElement("clipPath",{id:"clipPath-dots-".concat(j)},y.createElement("rect",{x:m-A/2,y:u-A/2,width:h+A,height:p+A}))),y.createElement(sM,{xAxisId:s,yAxisId:c,data:n,dataPointFormatter:BV,errorBarOffset:0},y.createElement(UV,{props:this.props,clipPathId:j}))),y.createElement($Y,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:k}))}}var hM={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:rr.line,type:"linear"};function HV(e){var t=br(e,hM),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,connectNulls:u,dot:m,hide:h,isAnimationActive:p,label:v,legendType:_,xAxisId:x,yAxisId:w,id:j}=t,S=A_(t,CV),{needClip:O}=C_(x,w),C=S_(),A=Ko(),k=Tr(),D=Te(ae=>nV(ae,x,w,k,j));if(A!=="horizontal"&&A!=="vertical"||D==null||C==null)return null;var{height:M,width:L,x:X,y:re}=C;return y.createElement($V,zc({},S,{id:j,connectNulls:u,dot:m,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:s,animationEasing:c,isAnimationActive:p,hide:h,label:v,legendType:_,xAxisId:x,yAxisId:w,points:D,layout:A,height:M,width:L,left:X,top:re,needClip:O}))}function FV(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,dataKey:c,bandSize:u,displayedData:m}=e;return m.map((h,p)=>{var v=pt(h,c);if(t==="horizontal"){var _=vE({axis:r,ticks:i,bandSize:u,entry:h,index:p}),x=Mt(v)?null:n.scale(v);return{x:_,y:x,value:v,payload:h}}var w=Mt(v)?null:r.scale(v),j=vE({axis:n,ticks:s,bandSize:u,entry:h,index:p});return w==null||j==null?null:{x:w,y:j,value:v,payload:h}}).filter(Boolean)}function KV(e){var t=br(e,hM),r=Tr();return y.createElement(j_,{id:t.id,type:"line"},n=>y.createElement(y.Fragment,null,y.createElement(GP,{legendPayload:TV(t)}),y.createElement(PV,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),y.createElement(WP,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),y.createElement(HV,zc({},t,{id:n}))))}var pM=y.memo(KV,ah);pM.displayName="Line";function Vo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:ZP}function Wo(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(i=>i.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:ZP}var YV="Invariant failed";function GV(e,t){throw new Error(YV)}function fb(){return fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fb.apply(null,arguments)}function rm(e){return y.createElement(y_,fb({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var VV=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,i)=>{if(De(t))return t;var s=De(n)||Mt(n);return s?t(n,i):(s||GV(),r)}},WV=(e,t,r)=>r,XV=(e,t)=>t,uu=W([Gm,XV],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),ZV=W([uu],e=>e?.maxBarSize),QV=(e,t,r,n)=>n,JV=W([Je,Gm,Vo,Wo,WV],(e,t,r,n,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),eW=(e,t,r)=>{var n=Je(e),i=Vo(e,t),s=Wo(e,t);if(!(i==null||s==null))return n==="horizontal"?nb(e,"yAxis",s,r):nb(e,"xAxis",i,r)},tW=(e,t)=>{var r=Je(e),n=Vo(e,t),i=Wo(e,t);if(!(n==null||i==null))return r==="horizontal"?dC(e,"xAxis",n):dC(e,"yAxis",i)},rW=W([JV,S8,tW],HY),nW=(e,t,r)=>{var n,i,s=uu(e,t);if(s!=null){var c=Vo(e,t),u=Wo(e,t);if(!(c==null||u==null)){var m=Je(e),h=bT(e),{maxBarSize:p}=s,v=Mt(p)?h:p,_,x;return m==="horizontal"?(_=Ki(e,"xAxis",c,r),x=Fi(e,"xAxis",c,r)):(_=Ki(e,"yAxis",u,r),x=Fi(e,"yAxis",u,r)),(n=(i=Fs(_,x,!0))!==null&&i!==void 0?i:v)!==null&&n!==void 0?n:0}}},vM=(e,t,r)=>{var n=Je(e),i=Vo(e,t),s=Wo(e,t);if(!(i==null||s==null)){var c,u;return n==="horizontal"?(c=Ki(e,"xAxis",i,r),u=Fi(e,"xAxis",i,r)):(c=Ki(e,"yAxis",s,r),u=Fi(e,"yAxis",s,r)),Fs(c,u)}},aW=W([rW,bT,j8,_T,nW,vM,ZV],VY),iW=(e,t,r)=>{var n=Vo(e,t);if(n!=null)return Ki(e,"xAxis",n,r)},oW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Ki(e,"yAxis",n,r)},sW=(e,t,r)=>{var n=Vo(e,t);if(n!=null)return Fi(e,"xAxis",n,r)},lW=(e,t,r)=>{var n=Wo(e,t);if(n!=null)return Fi(e,"yAxis",n,r)},cW=W([aW,uu],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),uW=W([eW,uu],WY),dW=W([cr,Zb,iW,oW,sW,lW,cW,Je,d8,vM,uW,uu,QV],(e,t,r,n,i,s,c,u,m,h,p,v,_)=>{var{chartData:x,dataStartIndex:w,dataEndIndex:j}=m;if(!(v==null||c==null||t==null||u!=="horizontal"&&u!=="vertical"||r==null||n==null||i==null||s==null||h==null)){var{data:S}=v,O;if(S!=null&&S.length>0?O=S:O=x?.slice(w,j+1),O!=null)return UW({layout:u,barSettings:v,pos:c,parentViewBox:t,bandSize:h,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:s,stackedData:p,displayedData:O,offset:e,cells:_,dataStartIndex:w})}}),fW=["index"];function mb(){return mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mb.apply(null,arguments)}function mW(e,t){if(e==null)return{};var r,n,i=hW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function hW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var gM=y.createContext(void 0),pW=e=>{var t=y.useContext(gM);if(t!=null)return t.stackId;if(e!=null)return _5(e)},vW=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),gW=e=>{var t=y.useContext(gM);if(t!=null){var{stackId:r}=t;return"url(#".concat(vW(r,e),")")}},yW=e=>{var{index:t}=e,r=mW(e,fW),n=gW(t);return y.createElement(yr,mb({className:"recharts-bar-stack-layer",clipPath:n},r))},bW=["onMouseEnter","onMouseLeave","onClick"],_W=["value","background","tooltipPosition"],xW=["id"],wW=["onMouseEnter","onClick","onMouseLeave"];function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Za.apply(null,arguments)}function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Lr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){jW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jW(e,t,r){return(t=SW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SW(e){var t=EW(e,"string");return typeof t=="symbol"?t:t+""}function EW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nm(e,t){if(e==null)return{};var r,n,i=OW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function OW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var CW=e=>{var{dataKey:t,name:r,fill:n,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:n,value:Qs(r,t),payload:e}]},AW=y.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:i,name:s,hide:c,unit:u,tooltipType:m,id:h}=e,p={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:i,dataKey:t,nameKey:void 0,name:Qs(s,t),hide:c,type:m,color:i,unit:u,graphicalItemId:h}};return y.createElement(w_,{tooltipEntrySettings:p})});function NW(e){var t=Te(Yi),{data:r,dataKey:n,background:i,allOtherBarProps:s}=e,{onMouseEnter:c,onMouseLeave:u,onClick:m}=s,h=nm(s,bW),p=b_(c,n,s.id),v=__(u),_=x_(m,n,s.id);if(!i||r==null)return null;var x=Mo(i);return y.createElement(Qr,{zIndex:XY(i,rr.barBackground)},r.map((w,j)=>{var{value:S,background:O,tooltipPosition:C}=w,A=nm(w,_W);if(!O)return null;var k=p(w,j),D=v(w,j),M=_(w,j),L=Lr(Lr(Lr(Lr(Lr({option:i,isActive:String(j)===t},A),{},{fill:"#eee"},O),x),hm(h,w,j)),{},{onMouseEnter:k,onMouseLeave:D,onClick:M,dataKey:n,index:j,className:"recharts-bar-background-rectangle"});return y.createElement(rm,Za({key:"background-bar-".concat(j)},L))}))}function kW(e){var{showLabels:t,children:r,rects:n}=e,i=n?.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return Lr(Lr({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return y.createElement(LP,{value:t?i:void 0},r)}function DW(e){var{shape:t,activeBar:r,baseProps:n,entry:i,index:s,dataKey:c}=e,u=Te(Yi),m=Te(s_),h=r&&String(s)===u&&(m==null||c===m),p=h?r:t;return h?y.createElement(Qr,{zIndex:rr.activeBar},y.createElement(rm,Za({},n,{name:String(n.name)},i,{isActive:h,option:p,index:s,dataKey:c}))):y.createElement(rm,Za({},n,{name:String(n.name)},i,{isActive:h,option:p,index:s,dataKey:c}))}function TW(e){var{shape:t,baseProps:r,entry:n,index:i,dataKey:s}=e;return y.createElement(rm,Za({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:i,dataKey:s}))}function PW(e){var t,{data:r,props:n}=e,i=(t=vn(n))!==null&&t!==void 0?t:{},{id:s}=i,c=nm(i,xW),{shape:u,dataKey:m,activeBar:h}=n,{onMouseEnter:p,onClick:v,onMouseLeave:_}=n,x=nm(n,wW),w=b_(p,m,s),j=__(_),S=x_(v,m,s);return r?y.createElement(y.Fragment,null,r.map((O,C)=>y.createElement(yW,Za({index:C,key:"rectangle-".concat(O?.x,"-").concat(O?.y,"-").concat(O?.value,"-").concat(C),className:"recharts-bar-rectangle"},hm(x,O,C),{onMouseEnter:w(O,C),onMouseLeave:j(O,C),onClick:S(O,C)}),h?y.createElement(DW,{shape:u,activeBar:h,baseProps:c,entry:O,index:C,dataKey:m}):y.createElement(TW,{shape:u,baseProps:c,entry:O,index:C,dataKey:m})))):null}function MW(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:u,animationEasing:m,onAnimationEnd:h,onAnimationStart:p}=t,v=r.current,_=Wc(t,"recharts-bar-"),[x,w]=y.useState(!1),j=!x,S=y.useCallback(()=>{typeof h=="function"&&h(),w(!1)},[h]),O=y.useCallback(()=>{typeof p=="function"&&p(),w(!0)},[p]);return y.createElement(kW,{showLabels:j,rects:n},y.createElement(Vc,{animationId:_,begin:c,duration:u,isActive:s,easing:m,onAnimationEnd:S,onAnimationStart:O,key:_},C=>{var A=C===1?n:n?.map((k,D)=>{var M=v&&v[D];if(M)return Lr(Lr({},k),{},{x:Dt(M.x,k.x,C),y:Dt(M.y,k.y,C),width:Dt(M.width,k.width,C),height:Dt(M.height,k.height,C)});if(i==="horizontal"){var L=Dt(0,k.height,C),X=Dt(k.stackedBarStart,k.y,C);return Lr(Lr({},k),{},{y:X,height:L})}var re=Dt(0,k.width,C),ae=Dt(k.stackedBarStart,k.x,C);return Lr(Lr({},k),{},{width:re,x:ae})});return C>0&&(r.current=A??null),A==null?null:y.createElement(yr,null,y.createElement(PW,{props:t,data:A}))}),y.createElement(h_,{label:t.label}),t.children)}function RW(e){var t=y.useRef(null);return y.createElement(MW,{previousRectanglesRef:t,props:e})}var yM=0,qW=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:pt(e,t)}};class zW extends y.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:i,xAxisId:s,yAxisId:c,needClip:u,background:m,id:h}=this.props;if(t||r==null)return null;var p=ot("recharts-bar",i),v=h;return y.createElement(yr,{className:p,id:h},u&&y.createElement("defs",null,y.createElement(lM,{clipPathId:v,xAxisId:s,yAxisId:c})),y.createElement(yr,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(v,")"):void 0},y.createElement(NW,{data:r,dataKey:n,background:m,allOtherBarProps:this.props}),y.createElement(RW,this.props)))}}var LW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:yM,xAxisId:0,yAxisId:0,zIndex:rr.bar};function IW(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:p}=e,{needClip:v}=C_(t,r),_=Ko(),x=Tr(),w=g_(e.children,cu),j=Te(C=>dW(C,e.id,x,w));if(_!=="vertical"&&_!=="horizontal")return null;var S,O=j?.[0];return O==null||O.height==null||O.width==null?S=0:S=_==="vertical"?O.height/2:O.width/2,y.createElement(sM,{xAxisId:t,yAxisId:r,data:j,dataPointFormatter:qW,errorBarOffset:S},y.createElement(zW,Za({},e,{layout:_,needClip:v,data:j,xAxisId:t,yAxisId:r,hide:n,legendType:i,minPointSize:s,activeBar:c,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:p})))}function UW(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:i,bandSize:s,xAxis:c,yAxis:u,xAxisTicks:m,yAxisTicks:h,stackedData:p,displayedData:v,offset:_,cells:x,parentViewBox:w,dataStartIndex:j}=e,S=t==="horizontal"?u:c,O=p?S.scale.domain():null,C=x5({numericAxis:S}),A=S.scale(C);return v.map((k,D)=>{var M,L,X,re,ae,G;if(p){var U=p[D+j];if(U==null)return null;M=p5(U,O)}else M=pt(k,r),Array.isArray(M)||(M=[C,M]);var ue=VV(n,yM)(M[1],D);if(t==="horizontal"){var ve,[q,R]=[u.scale(M[0]),u.scale(M[1])];L=gE({axis:c,ticks:m,bandSize:s,offset:i.offset,entry:k,index:D}),X=(ve=R??q)!==null&&ve!==void 0?ve:void 0,re=i.size;var I=q-R;if(ae=Qn(I)?0:I,G={x:L,y:_.top,width:re,height:_.height},Math.abs(ue)>0&&Math.abs(ae)<Math.abs(ue)){var ee=gr(ae||ue)*(Math.abs(ue)-Math.abs(ae));X-=ee,ae+=ee}}else{var[H,se]=[c.scale(M[0]),c.scale(M[1])];if(L=H,X=gE({axis:u,ticks:h,bandSize:s,offset:i.offset,entry:k,index:D}),re=se-H,ae=i.size,G={x:_.left,y:X,width:_.width,height:ae},Math.abs(ue)>0&&Math.abs(re)<Math.abs(ue)){var Se=gr(re||ue)*(Math.abs(ue)-Math.abs(re));re+=Se}}if(L==null||X==null||re==null||ae==null)return null;var J=Lr(Lr({},k),{},{stackedBarStart:A,x:L,y:X,width:re,height:ae,value:p?M:M[1],payload:k,background:G,tooltipPosition:{x:L+re/2,y:X+ae/2},parentViewBox:w},x&&x[D]&&x[D].props);return J}).filter(Boolean)}function BW(e){var t=br(e,LW),r=pW(t.stackId),n=Tr();return y.createElement(j_,{id:t.id,type:"bar"},i=>y.createElement(y.Fragment,null,y.createElement(GP,{legendPayload:CW(t)}),y.createElement(AW,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:i}),y.createElement(WP,{type:"bar",id:i,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),y.createElement(Qr,{zIndex:t.zIndex},y.createElement(IW,Za({},t,{id:i})))))}var bM=y.memo(BW,ah);bM.displayName="Bar";var $W=["domain","range"],HW=["domain","range"];function kA(e,t){if(e==null)return{};var r,n,i=FW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function FW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function DA(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function _M(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=kA(e,$W),{domain:s,range:c}=t,u=kA(t,HW);return!DA(r,s)||!DA(n,c)?!1:ah(i,u)}var KW=["dangerouslySetInnerHTML","ticks","scale"],YW=["id","scale"];function hb(){return hb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hb.apply(null,arguments)}function TA(e,t){if(e==null)return{};var r,n,i=GW(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function GW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function VW(e){var t=Rt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(CY(e)):r.current!==e&&t(AY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(NY(r.current)),r.current=null)},[t]),null}var WW=e=>{var{xAxisId:t,className:r}=e,n=Te(Zb),i=Tr(),s="xAxis",c=Te(O=>QT(O,s,t,i)),u=Te(O=>VT(O,t)),m=Te(O=>xH(O,t)),h=Te(O=>NT(O,t));if(u==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:p,ticks:v,scale:_}=e,x=TA(e,KW),{id:w,scale:j}=h,S=TA(h,YW);return y.createElement(O_,hb({},x,S,{x:m.x,y:m.y,width:u.width,height:u.height,className:ot("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:c,axisType:s}))},XW={allowDataOverflow:hr.allowDataOverflow,allowDecimals:hr.allowDecimals,allowDuplicatedCategory:hr.allowDuplicatedCategory,angle:hr.angle,axisLine:Ha.axisLine,height:hr.height,hide:!1,includeHidden:hr.includeHidden,interval:hr.interval,minTickGap:hr.minTickGap,mirror:hr.mirror,orientation:hr.orientation,padding:hr.padding,reversed:hr.reversed,scale:hr.scale,tick:hr.tick,tickCount:hr.tickCount,tickLine:Ha.tickLine,tickSize:Ha.tickSize,type:hr.type,xAxisId:0},ZW=e=>{var t=br(e,XW);return y.createElement(y.Fragment,null,y.createElement(VW,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),y.createElement(WW,t))},pb=y.memo(ZW,_M);pb.displayName="XAxis";var QW=["dangerouslySetInnerHTML","ticks","scale"],JW=["id","scale"];function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vb.apply(null,arguments)}function PA(e,t){if(e==null)return{};var r,n,i=eX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function eX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function tX(e){var t=Rt(),r=y.useRef(null);return y.useLayoutEffect(()=>{r.current===null?t(kY(e)):r.current!==e&&t(DY({prev:r.current,next:e})),r.current=e},[e,t]),y.useLayoutEffect(()=>()=>{r.current&&(t(TY(r.current)),r.current=null)},[t]),null}var rX=e=>{var{yAxisId:t,className:r,width:n,label:i}=e,s=y.useRef(null),c=y.useRef(null),u=Te(Zb),m=Tr(),h=Rt(),p="yAxis",v=Te(M=>WT(M,t)),_=Te(M=>jH(M,t)),x=Te(M=>QT(M,p,t,m)),w=Te(M=>kT(M,t));if(y.useLayoutEffect(()=>{if(!(n!=="auto"||!v||m_(i)||y.isValidElement(i)||w==null)){var M=s.current;if(M){var L=M.getCalculatedWidth();Math.round(v.width)!==Math.round(L)&&h(PY({id:t,width:L}))}}},[x,v,h,i,t,n,w]),v==null||_==null||w==null)return null;var{dangerouslySetInnerHTML:j,ticks:S,scale:O}=e,C=PA(e,QW),{id:A,scale:k}=w,D=PA(w,JW);return y.createElement(O_,vb({},C,D,{ref:s,labelRef:c,x:_.x,y:_.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:v.width,height:v.height,className:ot("recharts-".concat(p," ").concat(p),r),viewBox:u,ticks:x,axisType:p}))},nX={allowDataOverflow:pr.allowDataOverflow,allowDecimals:pr.allowDecimals,allowDuplicatedCategory:pr.allowDuplicatedCategory,angle:pr.angle,axisLine:Ha.axisLine,hide:!1,includeHidden:pr.includeHidden,interval:pr.interval,minTickGap:pr.minTickGap,mirror:pr.mirror,orientation:pr.orientation,padding:pr.padding,reversed:pr.reversed,scale:pr.scale,tick:pr.tick,tickCount:pr.tickCount,tickLine:Ha.tickLine,tickSize:Ha.tickSize,type:pr.type,width:pr.width,yAxisId:0},aX=e=>{var t=br(e,nX);return y.createElement(y.Fragment,null,y.createElement(tX,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),y.createElement(rX,t))},gb=y.memo(aX,_M);gb.displayName="YAxis";var iX=(e,t)=>t,N_=W([iX,Je,CT,dr,hP,si,I9,cr],Y9),k_=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},xM=zn("mouseClick"),wM=Kc();wM.startListening({actionCreator:xM,effect:(e,t)=>{var r=e.payload,n=N_(t.getState(),k_(r));n?.activeIndex!=null&&t.dispatch(zH({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var yb=zn("mouseMove"),jM=Kc(),Xd=null;jM.startListening({actionCreator:yb,effect:(e,t)=>{var r=e.payload;Xd!==null&&cancelAnimationFrame(Xd);var n=k_(r);Xd=requestAnimationFrame(()=>{var i=t.getState(),s=t_(i,i.tooltip.settings.shared);if(s==="axis"){var c=N_(i,n);c?.activeIndex!=null?t.dispatch(oP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate})):t.dispatch(iP())}Xd=null})}});function oX(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var MA={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},SM=Zr({name:"rootProps",initialState:MA,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:MA.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),sX=SM.reducer,{updateOptions:lX}=SM.actions,EM=Zr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:cX}=EM.actions,uX=EM.reducer,OM=zn("keyDown"),CM=zn("focus"),D_=Kc();D_.startListening({actionCreator:OM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var c=r_(i,sl(r),au(r),su(r)),u=c==null?-1:Number(c);if(!(!Number.isFinite(u)||u<0)){var m=si(r);if(s==="Enter"){var h=Xf(r,"axis","hover",String(i.index));t.dispatch(ib({active:!i.active,activeIndex:i.index,activeCoordinate:h}));return}var p=CH(r),v=p==="left-to-right"?1:-1,_=s==="ArrowRight"?1:-1,x=u+_*v;if(!(m==null||x>=m.length||x<0)){var w=Xf(r,"axis","hover",String(x));t.dispatch(ib({active:!0,activeIndex:x.toString(),activeCoordinate:w}))}}}}}});D_.startListening({actionCreator:CM,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:i}=r.tooltip;if(!i.active&&i.index==null){var s="0",c=Xf(r,"axis","hover",String(s));t.dispatch(ib({active:!0,activeIndex:s,activeCoordinate:c}))}}}});var Mn=zn("externalEvent"),AM=Kc(),iy=new Map;AM.startListening({actionCreator:Mn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var i=n.type,s=iy.get(i);s!==void 0&&cancelAnimationFrame(s);var c=requestAnimationFrame(()=>{try{var u=t.getState(),m={activeCoordinate:j9(u),activeDataKey:s_(u),activeIndex:Yi(u),activeLabel:gP(u),activeTooltipIndex:Yi(u),isTooltipActive:S9(u)};r(m,n)}finally{iy.delete(i)}});iy.set(i,c)}}});var dX=W([il],e=>e.tooltipItemPayloads),fX=W([dX,ou,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var i=e.find(u=>u.settings.graphicalItemId===n);if(i!=null){var{positions:s}=i;if(s!=null){var c=t(s,r);return c}}}),NM=zn("touchMove"),kM=Kc();kM.startListening({actionCreator:NM,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),i=t_(n,n.tooltip.settings.shared);if(i==="axis"){var s=r.touches[0];if(s==null)return;var c=N_(n,k_({clientX:s.clientX,clientY:s.clientY,currentTarget:r.currentTarget}));c?.activeIndex!=null&&t.dispatch(oP({activeIndex:c.activeIndex,activeDataKey:void 0,activeCoordinate:c.activeCoordinate}))}else if(i==="item"){var u,m=r.touches[0];if(document.elementFromPoint==null||m==null)return;var h=document.elementFromPoint(m.clientX,m.clientY);if(!h||!h.getAttribute)return;var p=h.getAttribute(Wk),v=(u=h.getAttribute(Xk))!==null&&u!==void 0?u:void 0,_=ol(n).find(j=>j.id===v);if(p==null||_==null||v==null)return;var{dataKey:x}=_,w=fX(n,p,v);t.dispatch(aP({activeDataKey:x,activeIndex:p,activeCoordinate:w,activeGraphicalItemId:v}))}}}});var mX=gk({brush:ZY,cartesianAxis:MY,chartData:j7,errorBars:GG,graphicalItems:UK,layout:c5,legend:pU,options:y7,polarAxis:eK,polarOptions:uX,referenceElements:aG,rootProps:sX,tooltip:LH,zIndex:o7}),hX=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return M4({reducer:mX,preloadedState:t,middleware:n=>{var i;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([wM.middleware,jM.middleware,D_.middleware,AM.middleware,kM.middleware])},enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(Tk({type:"raf"}))},devTools:{serialize:{replacer:oX},name:"recharts-".concat(r)}})};function DM(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=Tr(),s=y.useRef(null);if(i)return r;s.current==null&&(s.current=hX(t,n));var c=Fb;return y.createElement(wV,{context:c,store:s.current},r)}function pX(e){var{layout:t,margin:r}=e,n=Rt(),i=Tr();return y.useEffect(()=>{i||(n(o5(t)),n(i5(r)))},[n,i,t,r]),null}var TM=y.memo(pX,ah);function PM(e){var t=Rt();return y.useEffect(()=>{t(lX(e))},[t,e]),null}function RA(e){var{zIndex:t,isPanorama:r}=e,n=y.useRef(null),i=Rt();return y.useLayoutEffect(()=>(n.current&&i(a7({zIndex:t,element:n.current,isPanorama:r})),()=>{i(i7({zIndex:t,isPanorama:r}))}),[i,t,r]),y.createElement("g",{tabIndex:-1,ref:n})}function qA(e){var{children:t,isPanorama:r}=e,n=Te(V9);if(!n||n.length===0)return t;var i=n.filter(c=>c<0),s=n.filter(c=>c>0);return y.createElement(y.Fragment,null,i.map(c=>y.createElement(RA,{key:c,zIndex:c,isPanorama:r})),t,s.map(c=>y.createElement(RA,{key:c,zIndex:c,isPanorama:r})))}var vX=["children"];function gX(e,t){if(e==null)return{};var r,n,i=yX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function yX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function am(){return am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},am.apply(null,arguments)}var bX={width:"100%",height:"100%",display:"block"},_X=y.forwardRef((e,t)=>{var r=rD(),n=nD(),i=hD();if(!ma(r)||!ma(n))return null;var{children:s,otherAttributes:c,title:u,desc:m}=e,h,p;return c!=null&&(typeof c.tabIndex=="number"?h=c.tabIndex:h=i?0:void 0,typeof c.role=="string"?p=c.role:p=i?"application":void 0),y.createElement(PN,am({},c,{title:u,desc:m,role:p,tabIndex:h,width:r,height:n,style:bX,ref:t}),s)}),xX=e=>{var{children:t}=e,r=Te(Am);if(!r)return null;var{width:n,height:i,y:s,x:c}=r;return y.createElement(PN,{width:n,height:i,x:c,y:s},t)},zA=y.forwardRef((e,t)=>{var{children:r}=e,n=gX(e,vX),i=Tr();return i?y.createElement(xX,null,y.createElement(qA,{isPanorama:!0},r)):y.createElement(_X,am({ref:t},n),y.createElement(qA,{isPanorama:!1},r))});function wX(){var e=Rt(),[t,r]=y.useState(null),n=Te(C5);return y.useEffect(()=>{if(t!=null){var i=t.getBoundingClientRect(),s=i.width/t.offsetWidth;zt(s)&&s!==n&&e(l5(s))}},[t,e,n]),r}function LA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jX(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LA(Object(r),!0).forEach(function(n){SX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SX(e,t,r){return(t=EX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EX(e){var t=OX(e,"string");return typeof t=="symbol"?t:t+""}function OX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$o.apply(null,arguments)}var CX=()=>(T7(),null);function im(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var AX=y.forwardRef((e,t)=>{var r,n,i=y.useRef(null),[s,c]=y.useState({containerWidth:im((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:im((n=e.style)===null||n===void 0?void 0:n.height)}),u=y.useCallback((h,p)=>{c(v=>{var _=Math.round(h),x=Math.round(p);return v.containerWidth===_&&v.containerHeight===x?v:{containerWidth:_,containerHeight:x}})},[]),m=y.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:p,height:v}=h.getBoundingClientRect();u(p,v);var _=w=>{var{width:j,height:S}=w[0].contentRect;u(j,S)},x=new ResizeObserver(_);x.observe(h),i.current=x}},[t,u]);return y.useEffect(()=>()=>{var h=i.current;h?.disconnect()},[u]),y.createElement(y.Fragment,null,y.createElement(km,{width:s.containerWidth,height:s.containerHeight}),y.createElement("div",$o({ref:m},e)))}),NX=y.forwardRef((e,t)=>{var{width:r,height:n}=e,[i,s]=y.useState({containerWidth:im(r),containerHeight:im(n)}),c=y.useCallback((m,h)=>{s(p=>{var v=Math.round(m),_=Math.round(h);return p.containerWidth===v&&p.containerHeight===_?p:{containerWidth:v,containerHeight:_}})},[]),u=y.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:h,height:p}=m.getBoundingClientRect();c(h,p)}},[t,c]);return y.createElement(y.Fragment,null,y.createElement(km,{width:i.containerWidth,height:i.containerHeight}),y.createElement("div",$o({ref:u},e)))}),kX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return y.createElement(y.Fragment,null,y.createElement(km,{width:r,height:n}),y.createElement("div",$o({ref:t},e)))}),DX=y.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ka(r)||Ka(n)?y.createElement(NX,$o({},e,{ref:t})):y.createElement(kX,$o({},e,{ref:t}))});function TX(e){return e===!0?AX:DX}var PX=y.forwardRef((e,t)=>{var{children:r,className:n,height:i,onClick:s,onContextMenu:c,onDoubleClick:u,onMouseDown:m,onMouseEnter:h,onMouseLeave:p,onMouseMove:v,onMouseUp:_,onTouchEnd:x,onTouchMove:w,onTouchStart:j,style:S,width:O,responsive:C,dispatchTouchEvents:A=!0}=e,k=y.useRef(null),D=Rt(),[M,L]=y.useState(null),[X,re]=y.useState(null),ae=wX(),G=Qb(),U=G?.width>0?G.width:O,ue=G?.height>0?G.height:i,ve=y.useCallback(Q=>{ae(Q),typeof t=="function"&&t(Q),L(Q),re(Q),Q!=null&&(k.current=Q)},[ae,t,L,re]),q=y.useCallback(Q=>{D(xM(Q)),D(Mn({handler:s,reactEvent:Q}))},[D,s]),R=y.useCallback(Q=>{D(yb(Q)),D(Mn({handler:h,reactEvent:Q}))},[D,h]),I=y.useCallback(Q=>{D(iP()),D(Mn({handler:p,reactEvent:Q}))},[D,p]),ee=y.useCallback(Q=>{D(yb(Q)),D(Mn({handler:v,reactEvent:Q}))},[D,v]),H=y.useCallback(()=>{D(CM())},[D]),se=y.useCallback(Q=>{D(OM(Q.key))},[D]),Se=y.useCallback(Q=>{D(Mn({handler:c,reactEvent:Q}))},[D,c]),J=y.useCallback(Q=>{D(Mn({handler:u,reactEvent:Q}))},[D,u]),$=y.useCallback(Q=>{D(Mn({handler:m,reactEvent:Q}))},[D,m]),ge=y.useCallback(Q=>{D(Mn({handler:_,reactEvent:Q}))},[D,_]),Pe=y.useCallback(Q=>{D(Mn({handler:j,reactEvent:Q}))},[D,j]),Le=y.useCallback(Q=>{A&&D(NM(Q)),D(Mn({handler:w,reactEvent:Q}))},[D,A,w]),pe=y.useCallback(Q=>{D(Mn({handler:x,reactEvent:Q}))},[D,x]),ze=TX(C);return y.createElement(SP.Provider,{value:M},y.createElement(MN.Provider,{value:X},y.createElement(ze,{width:U??S?.width,height:ue??S?.height,className:ot("recharts-wrapper",n),style:jX({position:"relative",cursor:"default",width:U,height:ue},S),onClick:q,onContextMenu:Se,onDoubleClick:J,onFocus:H,onKeyDown:se,onMouseDown:$,onMouseEnter:R,onMouseLeave:I,onMouseMove:ee,onMouseUp:ge,onTouchEnd:pe,onTouchMove:Le,onTouchStart:Pe,ref:ve},y.createElement(CX,null),r)))}),MX=["width","height","responsive","children","className","style","compact","title","desc"];function RX(e,t){if(e==null)return{};var r,n,i=qX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function qX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var MM=y.forwardRef((e,t)=>{var{width:r,height:n,responsive:i,children:s,className:c,style:u,compact:m,title:h,desc:p}=e,v=RX(e,MX),_=vn(v);return m?y.createElement(y.Fragment,null,y.createElement(km,{width:r,height:n}),y.createElement(zA,{otherAttributes:_,title:h,desc:p},s)):y.createElement(PX,{className:c,style:u,width:r,height:n,responsive:i??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},y.createElement(zA,{otherAttributes:_,title:h,desc:p,ref:t},y.createElement(iG,null,s)))});function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bb.apply(null,arguments)}var zX={top:5,right:5,bottom:5,left:5},LX={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:zX,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},RM=y.forwardRef(function(t,r){var n,i=br(t.categoricalChartProps,LX),{chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,p={chartName:s,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,eventEmitter:void 0};return y.createElement(DM,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:s},y.createElement(JP,{chartData:h.data}),y.createElement(TM,{layout:i.layout,margin:i.margin}),y.createElement(PM,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(MM,bb({},i,{ref:r})))}),IX=["axis"],UX=y.forwardRef((e,t)=>y.createElement(RM,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:IX,tooltipPayloadSearcher:f_,categoricalChartProps:e,ref:t})),BX=["axis","item"],$X=y.forwardRef((e,t)=>y.createElement(RM,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:BX,tooltipPayloadSearcher:f_,categoricalChartProps:e,ref:t}));function HX(e){var t=Rt();return y.useEffect(()=>{t(cX(e))},[t,e]),null}var FX=["layout"];function _b(){return _b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_b.apply(null,arguments)}function KX(e,t){if(e==null)return{};var r,n,i=YX(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function YX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var GX={top:5,right:5,bottom:5,left:5},qM={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:GX,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},VX=y.forwardRef(function(t,r){var n,i=br(t.categoricalChartProps,qM),{layout:s}=i,c=KX(i,FX),{chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p}=t,v={chartName:u,defaultTooltipEventType:m,validateTooltipEventTypes:h,tooltipPayloadSearcher:p,eventEmitter:void 0};return y.createElement(DM,{preloadedState:{options:v},reduxStoreName:(n=i.id)!==null&&n!==void 0?n:u},y.createElement(JP,{chartData:i.data}),y.createElement(TM,{layout:s,margin:i.margin}),y.createElement(PM,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),y.createElement(HX,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),y.createElement(MM,_b({},c,{ref:r})))});function IA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function UA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IA(Object(r),!0).forEach(function(n){WX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WX(e,t,r){return(t=XX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XX(e){var t=ZX(e,"string");return typeof t=="symbol"?t:t+""}function ZX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QX=["item"],JX=UA(UA({},qM),{},{layout:"centric",startAngle:0,endAngle:360}),eZ=y.forwardRef((e,t)=>{var r=br(e,JX);return y.createElement(VX,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:QX,tooltipPayloadSearcher:f_,categoricalChartProps:r,ref:t})});function tZ({project:e,companyId:t,onBack:r}){const[n,i]=y.useState(!0),[s,c]=y.useState("week"),[u,m]=y.useState({areas:[],tickets:[],crewHistory:[],disposalLoads:[],dailyReports:[]});y.useEffect(()=>{e?.id&&h()},[e?.id,s]);const h=async()=>{i(!0);try{const C=new Date,A=new Date;s==="week"?A.setDate(C.getDate()-7):A.setDate(C.getDate()-30);const k=A.toISOString().split("T")[0],D=s==="week"?7:30,[M,L,X,re]=await Promise.all([_e.getAreas(e.id),_e.getTMTickets?.(e.id)||[],_e.getDisposalLoadsHistory?.(e.id,D)||[],_e.getDailyReports?.(e.id)||[]]),ae=[],G=new Date(A);for(;G<=C;){const U=G.toISOString().split("T")[0];try{const ue=await _e.getCrewCheckin(e.id,U);ae.push({date:U,count:ue?.workers?.length||0,dayName:G.toLocaleDateString("en-US",{weekday:"short"})})}catch{ae.push({date:U,count:0,dayName:G.toLocaleDateString("en-US",{weekday:"short"})})}G.setDate(G.getDate()+1)}m({areas:M,tickets:L.filter(U=>U.work_date>=k),crewHistory:ae,disposalLoads:X,dailyReports:re.filter(U=>U.report_date>=k)})}catch(C){console.error("Error loading metrics:",C)}finally{i(!1)}},p=y.useRef(null),v=y.useCallback(()=>{p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{h()},300)},[e?.id,s]);y.useEffect(()=>{if(!e?.id)return;const C=[],A=_e.subscribeToAreas?.(e.id,v);A&&C.push(A);const k=_e.subscribeToCrewCheckins?.(e.id,v);k&&C.push(k);const D=_e.subscribeToTMTickets?.(e.id,v);D&&C.push(D);const M=_e.subscribeToHaulOffs?.(e.id,v);M&&C.push(M);const L=_e.subscribeToDailyReports?.(e.id,v);return L&&C.push(L),()=>{p.current&&clearTimeout(p.current),C.forEach(X=>_e.unsubscribe?.(X))}},[e?.id,v]);const _=y.useMemo(()=>{const{areas:C,tickets:A,crewHistory:k,disposalLoads:D,dailyReports:M}=u,L=C.length,X=C.filter($=>$.status==="done").length,re=C.filter($=>$.status==="working").length,ae=C.filter($=>$.status==="not_started").length,G=L>0?Math.round(X/L*100):0,U=k.reduce(($,ge)=>$+ge.count,0),ue=k.length>0&&Math.round(U/k.filter($=>$.count>0).length*10)/10||0,ve=k.filter($=>$.count>0).length,q=A.filter($=>$.status==="pending"||$.status==="draft").length,R=A.filter($=>$.status==="signed"||$.status==="approved").length,I=A.reduce(($,ge)=>$+(ge.total_amount||0),0),ee=D.reduce(($,ge)=>$+(ge.load_count||0),0),H=0,se=M.filter($=>$.submitted).length,Se=s==="week"?7:30,J=x(M);return{progress:{totalAreas:L,completedAreas:X,inProgressAreas:re,notStartedAreas:ae,progressPercent:G},crew:{totalManDays:U,avgCrewSize:ue,daysWithCrew:ve,history:k},tickets:{total:A.length,pending:q,signed:R,totalValue:I},disposal:{totalLoads:ee,totalTonnage:H},reports:{submitted:se,due:Se,streak:J}}},[u,s]);function x(C){if(!C.length)return 0;const A=[...new Set(C.filter(L=>L.submitted).map(L=>L.report_date))].sort().reverse();let k=0;const D=new Date().toISOString().split("T")[0];let M=new Date(D);for(let L=0;L<30;L++){const X=M.toISOString().split("T")[0];if(A.includes(X))k++,M.setDate(M.getDate()-1);else break}return k}const w={primary:"#3b82f6",success:"#22c55e",warning:"#f59e0b",muted:"#6b7280",purple:"#8b5cf6"},j=[w.success,w.primary,w.muted],S=[{name:"Completed",value:_.progress.completedAreas},{name:"In Progress",value:_.progress.inProgressAreas},{name:"Not Started",value:_.progress.notStartedAreas}].filter(C=>C.value>0),O=y.useMemo(()=>{const C={};return u.tickets.forEach(A=>{const k=A.work_date;C[k]=(C[k]||0)+1}),_.crew.history.map(A=>({...A,tickets:C[A.date]||0}))},[u.tickets,_.crew.history]);return n?f.jsxs("div",{className:"foreman-metrics loading",children:[f.jsxs("div",{className:"metrics-header",children:[f.jsxs("button",{className:"back-btn",onClick:r,children:[f.jsx(sr,{size:20}),"Back"]}),f.jsx("h2",{children:"Project Metrics"})]}),f.jsxs("div",{className:"loading-state",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:"Loading metrics..."})]})]}):f.jsxs("div",{className:"foreman-metrics",children:[f.jsxs("div",{className:"metrics-header",children:[f.jsxs("button",{className:"back-btn",onClick:r,children:[f.jsx(sr,{size:20}),"Back"]}),f.jsx("h2",{children:"Project Metrics"}),f.jsxs("div",{className:"time-toggle",children:[f.jsx("button",{className:s==="week"?"active":"",onClick:()=>c("week"),children:"7 Days"}),f.jsx("button",{className:s==="month"?"active":"",onClick:()=>c("month"),children:"30 Days"})]})]}),f.jsxs("div",{className:"summary-cards",children:[f.jsxs("div",{className:"summary-card progress-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(XA,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsxs("span",{className:"card-value",children:[_.progress.progressPercent,"%"]}),f.jsx("span",{className:"card-label",children:"Complete"})]}),f.jsxs("div",{className:"card-detail",children:[_.progress.completedAreas,"/",_.progress.totalAreas," areas"]})]}),f.jsxs("div",{className:"summary-card crew-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(ZA,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.crew.totalManDays}),f.jsx("span",{className:"card-label",children:"Man-Days"})]}),f.jsxs("div",{className:"card-detail",children:["Avg ",_.crew.avgCrewSize," workers/day"]})]}),f.jsxs("div",{className:"summary-card tickets-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(Ho,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.tickets.total}),f.jsx("span",{className:"card-label",children:"T&M Tickets"})]}),f.jsxs("div",{className:"card-detail",children:[_.tickets.signed," signed, ",_.tickets.pending," pending"]})]}),f.jsxs("div",{className:"summary-card disposal-card",children:[f.jsx("div",{className:"card-icon",children:f.jsx(uf,{size:24})}),f.jsxs("div",{className:"card-content",children:[f.jsx("span",{className:"card-value",children:_.disposal.totalLoads}),f.jsx("span",{className:"card-label",children:"Disposal Loads"})]}),f.jsxs("div",{className:"card-detail",children:[_.disposal.totalTonnage.toFixed(1)," tons"]})]})]}),f.jsxs("div",{className:"charts-grid",children:[f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"Area Progress"}),S.length>0?f.jsx(Og,{width:"100%",height:200,children:f.jsxs(eZ,{children:[f.jsx(XP,{data:S,cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:2,dataKey:"value",label:({name:C,value:A})=>`${C}: ${A}`,labelLine:!1,children:S.map((C,A)=>f.jsx(cu,{fill:j[A%j.length]},`cell-${A}`))}),f.jsx(Fg,{})]})}):f.jsx("div",{className:"no-data",children:"No area data"})]}),f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"Daily Crew Size"}),f.jsx(Og,{width:"100%",height:200,children:f.jsxs($X,{data:_.crew.history,children:[f.jsx(db,{strokeDasharray:"3 3",opacity:.3}),f.jsx(pb,{dataKey:"dayName",tick:{fontSize:12}}),f.jsx(gb,{tick:{fontSize:12}}),f.jsx(Fg,{formatter:C=>[C,"Workers"],labelFormatter:C=>`Day: ${C}`}),f.jsx(bM,{dataKey:"count",fill:w.primary,radius:[4,4,0,0]})]})})]}),f.jsxs("div",{className:"chart-card",children:[f.jsx("h3",{children:"T&M Tickets by Day"}),f.jsx(Og,{width:"100%",height:200,children:f.jsxs(UX,{data:O,children:[f.jsx(db,{strokeDasharray:"3 3",opacity:.3}),f.jsx(pb,{dataKey:"dayName",tick:{fontSize:12}}),f.jsx(gb,{tick:{fontSize:12}}),f.jsx(Fg,{formatter:C=>[C,"Tickets"]}),f.jsx(pM,{type:"monotone",dataKey:"tickets",stroke:w.success,strokeWidth:2,dot:{fill:w.success,strokeWidth:2}})]})})]}),f.jsxs("div",{className:"chart-card activity-card",children:[f.jsx("h3",{children:"Activity Summary"}),f.jsxs("div",{className:"activity-list",children:[f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.success}20`,color:w.success},children:f.jsx(Wn,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Days with Crew"}),f.jsxs("span",{className:"activity-value",children:[_.crew.daysWithCrew," of ",s==="week"?7:30]})]})]}),f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.primary}20`,color:w.primary},children:f.jsx(mq,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Reports Submitted"}),f.jsx("span",{className:"activity-value",children:_.reports.submitted})]})]}),f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.warning}20`,color:w.warning},children:f.jsx(Po,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"Report Streak"}),f.jsxs("span",{className:"activity-value",children:[_.reports.streak," days"]})]})]}),_.tickets.totalValue>0&&f.jsxs("div",{className:"activity-item",children:[f.jsx("div",{className:"activity-icon",style:{backgroundColor:`${w.purple}20`,color:w.purple},children:f.jsx(hq,{size:20})}),f.jsxs("div",{className:"activity-info",children:[f.jsx("span",{className:"activity-label",children:"T&M Value"}),f.jsxs("span",{className:"activity-value",children:["$",_.tickets.totalValue.toLocaleString()]})]})]})]})]})]}),f.jsx("style",{children:`
        .foreman-metrics {
          padding: 1rem;
          max-width: 100%;
          overflow-x: hidden;
        }

        .foreman-metrics.loading {
          min-height: 400px;
        }

        .loading-state {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 3rem;
          color: var(--text-secondary);
        }

        .metrics-header {
          display: flex;
          align-items: center;
          gap: 1rem;
          margin-bottom: 1.5rem;
          flex-wrap: wrap;
        }

        .metrics-header h2 {
          flex: 1;
          margin: 0;
          font-size: 1.25rem;
          color: var(--text-primary);
        }

        .back-btn {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 0.5rem 1rem;
          background: var(--bg-elevated);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          color: var(--text-primary);
          cursor: pointer;
          font-size: 0.875rem;
        }

        .back-btn:hover {
          background: var(--bg-tertiary);
        }

        .time-toggle {
          display: flex;
          background: var(--bg-elevated);
          border-radius: 8px;
          padding: 4px;
          gap: 4px;
        }

        .time-toggle button {
          padding: 0.5rem 1rem;
          border: none;
          background: transparent;
          border-radius: 6px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.875rem;
          transition: all 0.2s;
        }

        .time-toggle button.active {
          background: var(--primary-color, #3b82f6);
          color: white;
        }

        .summary-cards {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 1rem;
          margin-bottom: 1.5rem;
        }

        @media (min-width: 640px) {
          .summary-cards {
            grid-template-columns: repeat(4, 1fr);
          }
        }

        .summary-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
          display: flex;
          flex-direction: column;
          gap: 0.5rem;
        }

        .card-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .progress-card .card-icon {
          background: #dbeafe;
          color: #3b82f6;
        }

        .crew-card .card-icon {
          background: #dcfce7;
          color: #22c55e;
        }

        .tickets-card .card-icon {
          background: #fef3c7;
          color: #f59e0b;
        }

        .disposal-card .card-icon {
          background: #f3e8ff;
          color: #8b5cf6;
        }

        [data-theme="dark"] .progress-card .card-icon {
          background: #1e3a5f;
        }

        [data-theme="dark"] .crew-card .card-icon {
          background: #14532d;
        }

        [data-theme="dark"] .tickets-card .card-icon {
          background: #451a03;
        }

        [data-theme="dark"] .disposal-card .card-icon {
          background: #3b0764;
        }

        .card-content {
          display: flex;
          flex-direction: column;
        }

        .card-value {
          font-size: 1.5rem;
          font-weight: 700;
          color: var(--text-primary);
          line-height: 1.2;
        }

        .card-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .card-detail {
          font-size: 0.75rem;
          color: var(--text-secondary);
          margin-top: auto;
        }

        .charts-grid {
          display: grid;
          grid-template-columns: 1fr;
          gap: 1rem;
        }

        @media (min-width: 640px) {
          .charts-grid {
            grid-template-columns: repeat(2, 1fr);
          }
        }

        .chart-card {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          padding: 1rem;
        }

        .chart-card h3 {
          margin: 0 0 1rem 0;
          font-size: 0.875rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        .no-data {
          height: 200px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: var(--text-secondary);
          font-size: 0.875rem;
        }

        .activity-card {
          grid-column: 1 / -1;
        }

        @media (min-width: 640px) {
          .activity-card {
            grid-column: auto;
          }
        }

        .activity-list {
          display: flex;
          flex-direction: column;
          gap: 0.75rem;
        }

        .activity-item {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .activity-icon {
          width: 40px;
          height: 40px;
          border-radius: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
        }

        .activity-info {
          display: flex;
          flex-direction: column;
          flex: 1;
        }

        .activity-label {
          font-size: 0.75rem;
          color: var(--text-secondary);
        }

        .activity-value {
          font-size: 1rem;
          font-weight: 600;
          color: var(--text-primary);
        }

        /* Recharts customization */
        .recharts-cartesian-grid-horizontal line,
        .recharts-cartesian-grid-vertical line {
          stroke: var(--border-color);
        }

        .recharts-text {
          fill: var(--text-secondary);
        }

        .recharts-tooltip-wrapper {
          outline: none;
        }

        .recharts-default-tooltip {
          background: var(--bg-card) !important;
          border: 1px solid var(--border-color) !important;
          border-radius: 8px !important;
        }

        .recharts-tooltip-label {
          color: var(--text-primary) !important;
        }

        .recharts-tooltip-item {
          color: var(--text-secondary) !important;
        }
      `})]})}const oy={crew:{id:"crew",label:"Crew Check-in",icon:ZA,description:"Log who's on site today"},tm:{id:"tm",label:"T&M Ticket",icon:Ho,description:"Create time & materials ticket"},report:{id:"report",label:"Daily Report",icon:WA,description:"Submit end-of-day report"},progress:{id:"progress",label:"Update Progress",icon:QA,description:"Mark tasks complete"},disposal:{id:"disposal",label:"Disposal Loads",icon:uf,description:"Log haul-off loads"},docs:{id:"docs",label:"Documents",icon:gq,description:"View project files"},metrics:{id:"metrics",label:"Project Metrics",icon:vq,description:"View charts & trends"},punchlist:{id:"punchlist",label:"Punch List",icon:pq,description:"View & resolve punch items"},injury:{id:"injury",label:"Report Injury",icon:om,description:"Log safety incident",isDanger:!0}},BA=["crew","tm","report","progress"],$A=e=>`fm_pinned_${e}`;function rZ({project:e,todayStatus:t,progress:r,areasWorking:n,areasDone:i,areasRemaining:s,punchListOpenCount:c,onNavigate:u,onShowToast:m}){const[h,p]=y.useState(()=>{try{const k=localStorage.getItem($A(e?.id));return k?JSON.parse(k):BA}catch{return BA}}),[v,_]=y.useState(!1),[x,w]=y.useState(!0);y.useEffect(()=>{if(e?.id)try{localStorage.setItem($A(e.id),JSON.stringify(h))}catch{}},[h,e?.id]);const j=y.useCallback(k=>{p(D=>D.includes(k)?D.length<=1?(m?.("Keep at least one pinned action","info"),D):D.filter(M=>M!==k):D.length>=5?(m?.("Maximum 5 pinned actions","info"),D):[...D,k])},[m]),S=y.useMemo(()=>Object.keys(oy).filter(k=>!h.includes(k)),[h]),O=y.useCallback(k=>{switch(k){case"crew":return{done:t.crewCheckedIn,badge:t.crewCheckedIn?`${t.crewCount} on site`:null,status:t.crewCheckedIn?"Done today":"Not started"};case"tm":return{done:!1,badge:t.tmTicketsToday>0?`${t.tmTicketsToday} today`:null,status:t.tmTicketsToday>0?`${t.tmTicketsToday} created`:"Create new"};case"report":return{done:t.dailyReportDone,badge:null,status:t.dailyReportDone?"Submitted":"Not submitted"};case"progress":return{done:s===0,badge:s>0?`${s} left`:null,status:`${r}% complete`};case"disposal":return{done:!1,badge:t.disposalLoadsToday>0?`${t.disposalLoadsToday} today`:null,status:t.disposalLoadsToday>0?`${t.disposalLoadsToday} logged`:"Log loads"};case"punchlist":return{done:c===0&&c!==void 0,badge:c>0?`${c} open`:null,status:c>0?`${c} items open`:"All clear"};default:return{done:!1,badge:null,status:null}}},[t,r,s]),C=k=>{const D=oy[k];if(!D)return null;const M=D.icon,L=O(k);return f.jsxs("div",{className:"fm-pinned-card-wrapper",children:[f.jsxs("button",{className:`fm-pinned-card ${L.done?"completed":""} ${D.isDanger?"danger":""}`,onClick:()=>!v&&u(k),disabled:v,children:[f.jsx("div",{className:"fm-pinned-icon",children:f.jsx(M,{size:28})}),f.jsx("span",{className:"fm-pinned-label",children:D.label}),L.badge&&!v&&f.jsx("span",{className:"fm-pinned-badge",children:L.badge}),L.done&&!v&&f.jsx("div",{className:"fm-pinned-check",children:f.jsx(Wn,{size:18})})]}),v&&f.jsx("button",{className:"fm-pin-toggle pinned",onClick:()=>j(k),"aria-label":`Unpin ${D.label}`,children:f.jsx(bq,{size:16})})]},k)},A=k=>{const D=oy[k];if(!D)return null;const M=D.icon,L=O(k);return f.jsxs("div",{className:"fm-action-row-wrapper",children:[f.jsxs("button",{className:`fm-action-row ${D.isDanger?"danger":""}`,onClick:()=>!v&&u(k),disabled:v,children:[f.jsx(M,{size:20}),f.jsx("span",{className:"fm-action-label",children:D.label}),L.badge&&!v&&f.jsx("span",{className:"fm-action-badge",children:L.badge})]}),v&&f.jsx("button",{className:"fm-pin-toggle",onClick:()=>j(k),"aria-label":`Pin ${D.label}`,children:f.jsx(_q,{size:16})})]},k)};return f.jsxs("div",{className:"fm-landing",children:[f.jsxs("button",{className:"fm-metrics-snapshot",onClick:()=>u("metrics"),"aria-label":"View full project metrics",children:[f.jsxs("div",{className:"fm-snapshot-header",children:[f.jsx(XA,{size:18}),f.jsx("span",{children:"Project Overview"}),f.jsx(df,{size:16,className:"fm-snapshot-arrow"})]}),f.jsxs("div",{className:"fm-snapshot-stats",children:[f.jsxs("div",{className:"fm-snapshot-stat main",children:[f.jsxs("span",{className:"fm-snapshot-value",children:[r,"%"]}),f.jsx("span",{className:"fm-snapshot-label",children:"Complete"})]}),f.jsx("div",{className:"fm-snapshot-divider"}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:n}),f.jsx("span",{className:"fm-snapshot-label",children:"In Progress"})]}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:i}),f.jsx("span",{className:"fm-snapshot-label",children:"Done"})]}),f.jsxs("div",{className:"fm-snapshot-stat",children:[f.jsx("span",{className:"fm-snapshot-value",children:s}),f.jsx("span",{className:"fm-snapshot-label",children:"Remaining"})]})]}),t.crewCheckedIn&&f.jsxs("div",{className:"fm-snapshot-today",children:[f.jsx(Po,{size:14}),f.jsxs("span",{children:[t.crewCount," crew on site today"]})]})]}),f.jsxs("div",{className:"fm-section-header",children:[f.jsx("h2",{children:"Quick Actions"}),f.jsx("button",{className:`fm-edit-btn ${v?"active":""}`,onClick:()=>_(!v),"aria-label":v?"Done editing":"Customize actions",children:v?"Done":f.jsx(yq,{size:18})})]}),v&&f.jsx("p",{className:"fm-edit-hint",children:"Tap icons to pin/unpin actions"}),f.jsx("div",{className:"fm-pinned-grid",children:h.map(C)}),S.length>0&&f.jsxs("div",{className:"fm-more-section",children:[f.jsxs("button",{className:"fm-more-header",onClick:()=>w(!x),"aria-expanded":!x,children:[f.jsx("span",{children:"More Actions"}),x?f.jsx(df,{size:20}):f.jsx(VA,{size:20})]}),!x&&f.jsx("div",{className:"fm-more-content",children:S.map(A)})]}),f.jsx("style",{children:`
        .fm-landing {
          padding: 0 1rem 2rem;
        }

        /* Metrics Snapshot */
        .fm-metrics-snapshot {
          width: 100%;
          background: linear-gradient(135deg, var(--primary-color, #3b82f6) 0%, #2563eb 100%);
          border: none;
          border-radius: 16px;
          padding: 1rem;
          color: white;
          text-align: left;
          cursor: pointer;
          margin-bottom: 1.5rem;
          transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        .fm-metrics-snapshot:active {
          transform: scale(0.98);
        }

        .fm-snapshot-header {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-size: 0.875rem;
          opacity: 0.9;
          margin-bottom: 0.75rem;
        }

        .fm-snapshot-arrow {
          margin-left: auto;
          opacity: 0.7;
        }

        .fm-snapshot-stats {
          display: flex;
          align-items: center;
          gap: 0.75rem;
        }

        .fm-snapshot-stat {
          display: flex;
          flex-direction: column;
          align-items: center;
          flex: 1;
        }

        .fm-snapshot-stat.main {
          flex: 1.5;
          align-items: flex-start;
        }

        .fm-snapshot-value {
          font-size: 1.5rem;
          font-weight: 700;
          line-height: 1.2;
        }

        .fm-snapshot-stat.main .fm-snapshot-value {
          font-size: 2rem;
        }

        .fm-snapshot-label {
          font-size: 0.7rem;
          opacity: 0.85;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .fm-snapshot-divider {
          width: 1px;
          height: 40px;
          background: rgba(255,255,255,0.3);
        }

        .fm-snapshot-today {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          margin-top: 0.75rem;
          padding-top: 0.75rem;
          border-top: 1px solid rgba(255,255,255,0.2);
          font-size: 0.8rem;
          opacity: 0.9;
        }

        /* Section Header */
        .fm-section-header {
          display: flex;
          align-items: center;
          justify-content: space-between;
          margin-bottom: 0.75rem;
        }

        .fm-section-header h2 {
          font-size: 1rem;
          font-weight: 600;
          color: var(--text-primary);
          margin: 0;
        }

        .fm-edit-btn {
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0.5rem;
          background: var(--bg-elevated);
          border: 1px solid var(--border-color);
          border-radius: 8px;
          color: var(--text-secondary);
          cursor: pointer;
          font-size: 0.8rem;
          min-width: 36px;
          min-height: 36px;
          transition: all 0.15s ease;
        }

        .fm-edit-btn.active {
          background: var(--primary-color, #3b82f6);
          border-color: var(--primary-color, #3b82f6);
          color: white;
          padding: 0.5rem 1rem;
        }

        .fm-edit-hint {
          font-size: 0.8rem;
          color: var(--text-secondary);
          margin: 0 0 0.75rem;
          text-align: center;
        }

        /* Pinned Actions Grid */
        .fm-pinned-grid {
          display: grid;
          grid-template-columns: repeat(2, 1fr);
          gap: 0.75rem;
          margin-bottom: 1.5rem;
        }

        .fm-pinned-card-wrapper {
          position: relative;
        }

        .fm-pinned-card {
          width: 100%;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 1.25rem 1rem;
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          cursor: pointer;
          transition: all 0.15s ease;
          min-height: 110px;
          position: relative;
        }

        .fm-pinned-card:active:not(:disabled) {
          transform: scale(0.97);
          background: var(--bg-elevated);
        }

        .fm-pinned-card:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-pinned-card.completed {
          border-color: #22c55e;
          background: rgba(34, 197, 94, 0.08);
        }

        .fm-pinned-card.danger {
          border-color: #f59e0b;
        }

        .fm-pinned-card.danger .fm-pinned-icon {
          color: #f59e0b;
        }

        .fm-pinned-icon {
          color: var(--primary-color, #3b82f6);
          margin-bottom: 0.5rem;
        }

        .fm-pinned-label {
          font-size: 0.875rem;
          font-weight: 500;
          color: var(--text-primary);
          text-align: center;
        }

        .fm-pinned-badge {
          position: absolute;
          top: 8px;
          right: 8px;
          background: var(--primary-color, #3b82f6);
          color: white;
          font-size: 0.7rem;
          font-weight: 600;
          padding: 0.2rem 0.5rem;
          border-radius: 10px;
        }

        .fm-pinned-check {
          position: absolute;
          top: 8px;
          right: 8px;
          color: #22c55e;
        }

        .fm-pin-toggle {
          position: absolute;
          top: -8px;
          right: -8px;
          width: 28px;
          height: 28px;
          border-radius: 50%;
          background: var(--bg-card);
          border: 2px solid var(--border-color);
          display: flex;
          align-items: center;
          justify-content: center;
          cursor: pointer;
          color: var(--text-secondary);
          transition: all 0.15s ease;
          z-index: 10;
        }

        .fm-pin-toggle:hover {
          background: var(--bg-elevated);
        }

        .fm-pin-toggle.pinned {
          background: #ef4444;
          border-color: #ef4444;
          color: white;
        }

        /* More Actions Section */
        .fm-more-section {
          background: var(--bg-card);
          border: 1px solid var(--border-color);
          border-radius: 12px;
          overflow: hidden;
        }

        .fm-more-header {
          width: 100%;
          display: flex;
          align-items: center;
          justify-content: space-between;
          padding: 1rem;
          background: transparent;
          border: none;
          cursor: pointer;
          font-size: 0.9rem;
          font-weight: 500;
          color: var(--text-primary);
        }

        .fm-more-header:active {
          background: var(--bg-elevated);
        }

        .fm-more-content {
          border-top: 1px solid var(--border-color);
        }

        .fm-action-row-wrapper {
          position: relative;
          display: flex;
          align-items: center;
        }

        .fm-action-row-wrapper .fm-pin-toggle {
          position: static;
          margin-right: 0.75rem;
          flex-shrink: 0;
        }

        .fm-action-row {
          flex: 1;
          display: flex;
          align-items: center;
          gap: 0.75rem;
          padding: 1rem;
          background: transparent;
          border: none;
          border-bottom: 1px solid var(--border-color);
          cursor: pointer;
          text-align: left;
          color: var(--text-primary);
          transition: background 0.15s ease;
        }

        .fm-action-row:last-child {
          border-bottom: none;
        }

        .fm-action-row:active:not(:disabled) {
          background: var(--bg-elevated);
        }

        .fm-action-row:disabled {
          opacity: 0.7;
          cursor: default;
        }

        .fm-action-row.danger {
          color: #f59e0b;
        }

        .fm-action-label {
          flex: 1;
          font-size: 0.9rem;
        }

        .fm-action-badge {
          font-size: 0.75rem;
          color: var(--text-secondary);
          background: var(--bg-elevated);
          padding: 0.25rem 0.5rem;
          border-radius: 6px;
        }

        /* Dark mode adjustments */
        [data-theme="dark"] .fm-metrics-snapshot {
          background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%);
        }

        [data-theme="dark"] .fm-pinned-card.completed {
          background: rgba(34, 197, 94, 0.15);
        }
      `})]})}const sy=[{value:"high",label:"High",color:"#ef4444"},{value:"medium",label:"Medium",color:"#f59e0b"},{value:"low",label:"Low",color:"#6b7280"}],ly=[{value:"open",label:"Open",icon:wq,color:"#ef4444"},{value:"in_progress",label:"In Progress",icon:Po,color:"#f59e0b"},{value:"complete",label:"Complete",icon:Wn,color:"#10b981"}];function zM({projectId:e,areas:t=[],companyId:r,onShowToast:n}){const[i,s]=y.useState([]),[c,u]=y.useState(!0),[m,h]=y.useState(!1),[p,v]=y.useState(null),[_,x]=y.useState("all"),[w,j]=y.useState("all"),[S,O]=y.useState(!1),[C,A]=y.useState({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),k=y.useCallback(async()=>{if(!e||!P){u(!1);return}try{const q=Ii(),{data:R,error:I}=await q.from("punch_list_items").select("*").eq("project_id",e).order("created_at",{ascending:!1});if(I)throw I;s(R||[])}catch(q){console.error("Error loading punch list:",q),s([])}finally{u(!1)}},[e]);y.useEffect(()=>{k()},[k]),y.useEffect(()=>{if(!e||!P)return;const q=T.channel(`punch_list:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"punch_list_items",filter:`project_id=eq.${e}`},()=>k()).subscribe();return()=>{T.removeChannel(q)}},[e,k]);const D=y.useMemo(()=>i.filter(q=>!(_!=="all"&&q.status!==_||w!=="all"&&q.area_id!==w)),[i,_,w]),M=y.useMemo(()=>{const q=i.filter(ee=>ee.status==="open").length,R=i.filter(ee=>ee.status==="in_progress").length,I=i.filter(ee=>ee.status==="complete").length;return{open:q,inProgress:R,complete:I,total:i.length}},[i]),L=()=>{A({description:"",area_id:"",assigned_to:"",priority:"medium",notes:"",photo_url:""}),v(null),h(!1)},X=async q=>{if(q.preventDefault(),!C.description.trim()){n?.("Please enter a description","error");return}O(!0);try{const R=Ii();if(p){const{error:I}=await R.from("punch_list_items").update({description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,updated_at:new Date().toISOString()}).eq("id",p.id);if(I)throw I;n?.("Punch item updated","success")}else{const{error:I}=await R.from("punch_list_items").insert({project_id:e,company_id:r,description:C.description.trim(),area_id:C.area_id||null,assigned_to:C.assigned_to.trim()||null,priority:C.priority,notes:C.notes.trim()||null,photo_url:C.photo_url||null,status:"open"});if(I)throw I;n?.("Punch item added","success")}L(),k()}catch(R){console.error("Error saving punch item:",R),n?.(R.message||"Error saving item","error")}finally{O(!1)}},re=async(q,R)=>{try{const I={status:R,updated_at:new Date().toISOString()};R==="complete"?I.completed_at=new Date().toISOString():I.completed_at=null;const{error:ee}=await Ii().from("punch_list_items").update(I).eq("id",q);if(ee)throw ee;k()}catch(I){console.error("Error updating status:",I),n?.("Error updating status","error")}},ae=async q=>{if(confirm("Delete this punch item?"))try{const{error:R}=await Ii().from("punch_list_items").delete().eq("id",q);if(R)throw R;n?.("Item deleted","success"),k()}catch(R){console.error("Error deleting item:",R),n?.("Error deleting item","error")}},G=q=>{A({description:q.description,area_id:q.area_id||"",assigned_to:q.assigned_to||"",priority:q.priority||"medium",notes:q.notes||"",photo_url:q.photo_url||""}),v(q),h(!0)},U=q=>q&&t.find(I=>I.id===q)?.name||null,ue=q=>sy.find(R=>R.value===q)||sy[1],ve=q=>ly.find(R=>R.value===q)||ly[0];return f.jsxs("div",{className:"punch-list-card",children:[f.jsxs("div",{className:"punch-list-header",children:[f.jsxs("div",{className:"punch-list-title",children:[f.jsx(Wn,{size:18}),f.jsx("h3",{children:"Punch List"}),M.total>0&&f.jsxs("span",{className:"punch-stats-inline",children:[f.jsxs("span",{className:"punch-stat-open",children:[M.open," open"]}),M.inProgress>0&&f.jsxs("span",{className:"punch-stat-progress",children:[M.inProgress," in progress"]}),f.jsxs("span",{className:"punch-stat-complete",children:[M.complete,"/",M.total," complete"]})]})]}),f.jsxs("button",{className:"punch-add-btn",onClick:()=>{L(),h(!0)},children:[f.jsx(Zd,{size:16}),"Add Item"]})]}),M.total>0&&f.jsxs("div",{className:"punch-progress-bar",children:[f.jsx("div",{className:"punch-progress-fill",style:{width:`${M.complete/M.total*100}%`}}),f.jsxs("span",{className:"punch-progress-label",children:[Math.round(M.complete/M.total*100),"% complete"]})]}),M.total>0&&f.jsxs("div",{className:"punch-filters",children:[f.jsxs("div",{className:"punch-filter-group",children:[f.jsx(xq,{size:14}),f.jsxs("select",{value:_,onChange:q=>x(q.target.value),className:"punch-filter-select",children:[f.jsx("option",{value:"all",children:"All Status"}),ly.map(q=>f.jsx("option",{value:q.value,children:q.label},q.value))]})]}),t.length>0&&f.jsxs("div",{className:"punch-filter-group",children:[f.jsx(_S,{size:14}),f.jsxs("select",{value:w,onChange:q=>j(q.target.value),className:"punch-filter-select",children:[f.jsx("option",{value:"all",children:"All Areas"}),t.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]})]}),m&&f.jsxs("form",{className:"punch-form",onSubmit:X,children:[f.jsxs("div",{className:"punch-form-header",children:[f.jsx("h4",{children:p?"Edit Item":"New Punch Item"}),f.jsx("button",{type:"button",className:"punch-form-close",onClick:L,children:f.jsx(xb,{size:16})})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Description *"}),f.jsx("textarea",{value:C.description,onChange:q=>A(R=>({...R,description:q.target.value})),placeholder:"What needs to be fixed or completed?",rows:2,required:!0})]}),f.jsxs("div",{className:"punch-form-row",children:[f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Area"}),f.jsxs("select",{value:C.area_id,onChange:q=>A(R=>({...R,area_id:q.target.value})),children:[f.jsx("option",{value:"",children:"No area"}),t.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Assigned To"}),f.jsx("input",{type:"text",value:C.assigned_to,onChange:q=>A(R=>({...R,assigned_to:q.target.value})),placeholder:"Name or company"})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Priority"}),f.jsx("select",{value:C.priority,onChange:q=>A(R=>({...R,priority:q.target.value})),children:sy.map(q=>f.jsx("option",{value:q.value,children:q.label},q.value))})]})]}),f.jsxs("div",{className:"punch-form-field",children:[f.jsx("label",{children:"Notes"}),f.jsx("textarea",{value:C.notes,onChange:q=>A(R=>({...R,notes:q.target.value})),placeholder:"Additional details...",rows:2})]}),f.jsxs("div",{className:"punch-form-actions",children:[f.jsx("button",{type:"button",className:"punch-btn-cancel",onClick:L,children:"Cancel"}),f.jsxs("button",{type:"submit",className:"punch-btn-save",disabled:S,children:[f.jsx(jq,{size:14}),S?"Saving...":p?"Update":"Add Item"]})]})]}),c?f.jsx("div",{className:"punch-loading",children:"Loading punch list..."}):D.length===0?f.jsxs("div",{className:"punch-empty",children:[f.jsx(Wn,{size:32,style:{opacity:.3}}),f.jsx("p",{children:i.length===0?"No punch items yet":"No items match filters"}),i.length===0&&f.jsx("span",{children:"Add items that need attention before project closeout"})]}):f.jsx("div",{className:"punch-items-list",children:D.map(q=>{const R=ve(q.status),I=ue(q.priority),ee=R.icon;return f.jsxs("div",{className:`punch-item punch-item-${q.status}`,children:[f.jsx("button",{className:"punch-item-status-btn",onClick:()=>{const H=q.status==="open"?"in_progress":q.status==="in_progress"?"complete":"open";re(q.id,H)},title:`Click to change status (current: ${R.label})`,children:f.jsx(ee,{size:18,style:{color:R.color}})}),f.jsxs("div",{className:"punch-item-content",children:[f.jsxs("div",{className:"punch-item-top",children:[f.jsx("span",{className:`punch-item-desc ${q.status==="complete"?"completed":""}`,children:q.description}),f.jsx("div",{className:"punch-item-badges",children:f.jsx("span",{className:"punch-priority-badge",style:{color:I.color,borderColor:`${I.color}40`},children:I.label})})]}),f.jsxs("div",{className:"punch-item-meta",children:[U(q.area_id)&&f.jsxs("span",{className:"punch-meta-tag",children:[f.jsx(_S,{size:11}),U(q.area_id)]}),q.assigned_to&&f.jsxs("span",{className:"punch-meta-tag",children:[f.jsx(Sq,{size:11}),q.assigned_to]}),q.completed_at&&f.jsxs("span",{className:"punch-meta-tag completed",children:[f.jsx(Wn,{size:11}),"Done ",new Date(q.completed_at).toLocaleDateString()]})]}),q.notes&&f.jsx("div",{className:"punch-item-notes",children:q.notes})]}),f.jsxs("div",{className:"punch-item-actions",children:[f.jsx("button",{className:"punch-action-btn",onClick:()=>G(q),title:"Edit",children:f.jsx(bc,{size:14})}),f.jsx("button",{className:"punch-action-btn delete",onClick:()=>ae(q.id),title:"Delete",children:f.jsx(Eq,{size:14})})]})]},q.id)})})]})}const rQ=Object.freeze(Object.defineProperty({__proto__:null,default:zM},Symbol.toStringTag,{value:"Module"}));function nZ({project:e,companyId:t,foremanName:r,onShowToast:n,onExit:i}){const[s,c]=y.useState([]),[u,m]=y.useState(!0),[h,p]=y.useState(null),[v,_]=y.useState({}),[x,w]=y.useState("home"),[j,S]=y.useState(!1),[O,C]=y.useState(0),[A,k]=y.useState({crewCheckedIn:!1,crewCount:0,tmTicketsToday:0,dailyReportDone:!1,disposalLoadsToday:0}),[D,M]=y.useState(()=>typeof window<"u"?document.documentElement.getAttribute("data-theme")==="dark":!1);new Date().getHours(),y.useEffect(()=>{e?.id&&(G(),L(),X())},[e?.id]);const L=async()=>{try{const $=new Date().toISOString().split("T")[0],Pe=(await _e.getCrewCheckin(e.id,$))?.workers||[],Le=Pe.length>0,ze=(await _e.getTMTickets?.(e.id)||[]).filter(Ee=>Ee.work_date===$),Q=await _e.getDisposalLoads?.(e.id,$)||[];k({crewCheckedIn:Le,crewCount:Pe.length,tmTicketsToday:ze.length,dailyReportDone:!1,disposalLoadsToday:Q.reduce((Ee,we)=>Ee+(we.load_count||1),0)})}catch($){console.error("Error loading today status:",$)}},X=async()=>{if(!(!e?.id||!P))try{const{count:$}=await Ii().from("punch_list_items").select("*",{count:"exact",head:!0}).eq("project_id",e.id).eq("status","open");C($||0)}catch{}},re=y.useRef(null),ae=y.useCallback(()=>{re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{G(),L()},300)},[e?.id]);y.useEffect(()=>{if(!e?.id)return;const $=[],ge=_e.subscribeToAreas?.(e.id,ae);ge&&$.push(ge);const Pe=_e.subscribeToCrewCheckins?.(e.id,ae);Pe&&$.push(Pe);const Le=_e.subscribeToTMTickets?.(e.id,ae);Le&&$.push(Le);const pe=_e.subscribeToHaulOffs?.(e.id,ae);pe&&$.push(pe);const ze=_e.subscribeToDailyReports?.(e.id,ae);ze&&$.push(ze);const Q=_e.subscribeToCORs?.(e.id,ae);Q&&$.push(Q);const Ee=_e.subscribeToMaterialRequests?.(e.id,ae);Ee&&$.push(Ee);const we=_e.subscribeToProject?.(e.id,ae);we&&$.push(we);const ie=_e.subscribeToPunchList?.(e.id,()=>{X(),ae()});if(ie&&$.push(ie),t){const Ue=_e.subscribeToMaterialsEquipment?.(t,ae);Ue&&$.push(Ue);const ye=_e.subscribeToLaborRates?.(t,ae);ye&&$.push(ye)}return()=>{re.current&&clearTimeout(re.current),$.forEach(Ue=>_e.unsubscribe?.(Ue))}},[e?.id,ae]);const G=async()=>{try{const $=await _e.getAreas(e.id);c($);const ge=[...new Set($.map(Le=>Le.group_name||"General"))],Pe={};ge.forEach(Le=>Pe[Le]=!1),_(Pe)}catch($){console.error("Error loading areas:",$),n?.("Error loading areas","error")}finally{m(!1)}},U=async($,ge)=>{const Pe=s.find(pe=>pe.id===$);if(!Pe)return;const Le=Pe.status===ge?"not_started":ge;p($);try{await _e.updateAreaStatus($,Le),c(pe=>pe.map(ze=>ze.id===$?{...ze,status:Le}:ze))}catch(pe){console.error("Error updating status:",pe),n?.("Error updating","error")}finally{p(null)}},ue=$=>{_(ge=>({...ge,[$]:!ge[$]}))},ve=()=>{const $=D?"light":"dark";document.documentElement.setAttribute("data-theme",$),localStorage.setItem("theme",$),M(!D)},q=zL(s),R=s.filter($=>$.status==="done").length,I=s.filter($=>$.status==="working").length,ee=s.length-R,H=s.reduce(($,ge)=>{const Pe=ge.group_name||"General";return $[Pe]||($[Pe]=[]),$[Pe].push(ge),$},{}),se=Object.keys(H).length>1||Object.keys(H).length===1&&!H.General,Se=$=>`${$.filter(Pe=>Pe.status==="done").length}/${$.length}`,J=y.useCallback($=>{w($)},[]);return x==="tm"?f.jsx("div",{className:"fm-view",children:f.jsx(XL,{project:e,companyId:t,onSubmit:()=>w("home"),onCancel:()=>w("home"),onShowToast:n})}):x==="report"?f.jsx(QL,{project:e,onShowToast:n,onClose:()=>w("home")}):x==="injury"?f.jsx("div",{className:"fm-view",children:f.jsx(JL,{project:e,companyId:t,onClose:()=>w("home"),onReportCreated:()=>{w("home"),n?.("Injury report submitted","success")}})}):x==="crew"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Crew Check-in"})]}),f.jsx(ZL,{project:e,companyId:t,onShowToast:n})]}):x==="disposal"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Disposal Loads"})]}),f.jsx(t3,{project:e,date:new Date().toISOString().split("T")[0],onShowToast:n})]}):x==="docs"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Documents"})]}),f.jsx(a3,{projectId:e.id,onShowToast:n})]}):x==="metrics"?f.jsx(tZ,{project:e,companyId:t,onBack:()=>w("home")}):x==="punchlist"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>{w("home"),X()},children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Punch List"})]}),f.jsx(zM,{projectId:e.id,areas:s,companyId:t,onShowToast:n})]}):x==="progress"?f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-subheader",children:[f.jsx("button",{className:"fm-back",onClick:()=>w("home"),children:f.jsx(sr,{size:20})}),f.jsx("h2",{children:"Progress"}),f.jsxs("span",{className:"fm-subheader-badge",children:[q,"%"]})]}),f.jsx("div",{className:"fm-progress-content",children:u?f.jsxs("div",{className:"fm-loading",children:[f.jsx("div",{className:"spinner"}),f.jsx("span",{children:"Loading..."})]}):s.length===0?f.jsxs("div",{className:"fm-empty",children:[f.jsx(QA,{size:48}),f.jsx("h3",{children:"No tasks yet"}),f.jsx("p",{children:"Office will add tasks to this project"})]}):se?Object.entries(H).map(([$,ge])=>f.jsxs("div",{className:"fm-group",children:[f.jsxs("button",{className:"fm-group-header",onClick:()=>ue($),children:[f.jsxs("div",{className:"fm-group-left",children:[v[$]?f.jsx(df,{size:18}):f.jsx(yc,{size:18}),f.jsx("span",{children:$})]}),f.jsx("span",{className:"fm-group-count",children:Se(ge)})]}),v[$]&&f.jsx("div",{className:"fm-group-items",children:ge.map(Pe=>f.jsxs("div",{className:`fm-task ${Pe.status}`,children:[f.jsx("span",{className:"fm-task-name",children:Pe.name}),f.jsxs("div",{className:"fm-task-btns",children:[f.jsx("button",{className:`fm-status-btn working ${Pe.status==="working"?"active":""}`,onClick:()=>U(Pe.id,"working"),disabled:h===Pe.id,children:f.jsx(Po,{size:14})}),f.jsx("button",{className:`fm-status-btn done ${Pe.status==="done"?"active":""}`,onClick:()=>U(Pe.id,"done"),disabled:h===Pe.id,children:f.jsx(Wn,{size:14})})]})]},Pe.id))})]},$)):f.jsx("div",{className:"fm-task-list",children:s.map($=>f.jsxs("div",{className:`fm-task ${$.status}`,children:[f.jsx("span",{className:"fm-task-name",children:$.name}),f.jsxs("div",{className:"fm-task-btns",children:[f.jsx("button",{className:`fm-status-btn working ${$.status==="working"?"active":""}`,onClick:()=>U($.id,"working"),disabled:h===$.id,children:f.jsx(Po,{size:14})}),f.jsx("button",{className:`fm-status-btn done ${$.status==="done"?"active":""}`,onClick:()=>U($.id,"done"),disabled:h===$.id,children:f.jsx(Wn,{size:14})})]})]},$.id))})})]}):f.jsxs("div",{className:"fm-view",children:[f.jsxs("div",{className:"fm-header",children:[f.jsx("button",{className:"fm-exit",onClick:i,children:f.jsx(sr,{size:20})}),f.jsxs("div",{className:"fm-header-center",children:[f.jsx("h1",{className:"fm-project-name",children:e.name}),r&&f.jsx("span",{className:"fm-foreman-name",children:r}),f.jsx("button",{className:"fm-info-toggle",onClick:()=>S(!j),children:f.jsx(Oq,{size:16})})]}),f.jsx("button",{className:"fm-theme",onClick:ve,children:D?f.jsx(FA,{size:20}):f.jsx(KA,{size:20})})]}),j&&f.jsxs("div",{className:"fm-project-info",children:[e.job_number&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Job #"}),f.jsx("span",{children:e.job_number})]}),e.address&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Address"}),f.jsx("span",{children:e.address})]}),e.general_contractor&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"GC"}),f.jsx("span",{children:e.general_contractor})]}),e.client_phone&&f.jsxs("div",{className:"fm-info-item",children:[f.jsx("span",{children:"Phone"}),f.jsx("a",{href:`tel:${e.client_phone}`,children:e.client_phone})]})]}),f.jsx(rZ,{project:e,todayStatus:A,progress:q,areasWorking:I,areasDone:R,areasRemaining:ee,punchListOpenCount:O,onNavigate:J,onShowToast:n})]})}const aZ=y.lazy(()=>Ja(()=>import("./Dashboard-BOjW6Ixi.js").then(e=>e.D),__vite__mapDeps([6,3,1,2,7]))),iZ=y.lazy(()=>Ja(()=>import("./Setup-BRIgrYsL.js"),__vite__mapDeps([8,3,1,2,4]))),oZ=y.lazy(()=>Ja(()=>import("./BrandingSettings-B9YY2xa0.js"),__vite__mapDeps([9,1,2,3,4]))),sZ=y.lazy(()=>Ja(()=>import("./PricingManager-DgKmgLQO.js"),__vite__mapDeps([10,1,2,3,4]))),lZ=y.lazy(()=>Ja(()=>import("./PublicView-C6_x2TPn.js"),__vite__mapDeps([11,1,2,3,4]))),cZ=y.lazy(()=>Ja(()=>import("./SignaturePage-Cc8lbkQN.js"),__vite__mapDeps([12,1,2,7,3,13,4]))),uZ=y.lazy(()=>Ja(()=>import("./MembershipManager-DdxclAoc.js"),__vite__mapDeps([14,1,2,3,4])));function T_(){return f.jsxs("div",{className:"page-loader",children:[f.jsx(zr,{className:"loading-logo"}),f.jsx("div",{className:"spinner"})]})}function dZ({pendingCompanyName:e,userName:t,onCheckStatus:r,onLogout:n}){const[i,s]=y.useState(!1);y.useEffect(()=>{const u=setInterval(()=>{r()},3e4);return()=>clearInterval(u)},[r]);const c=async()=>{s(!0),await r(),setTimeout(()=>s(!1),1e3)};return f.jsxs("div",{className:"pending-approval-screen",children:[f.jsx(zr,{className:"pending-logo"}),f.jsx("div",{className:"pending-pulse-ring",children:f.jsx("div",{className:"pending-pulse-dot"})}),f.jsx("h2",{children:"Awaiting Approval"}),e&&f.jsx("div",{className:"pending-company-name",children:e}),f.jsxs("p",{className:"pending-message",children:[t?`Hi ${t.split(" ")[0]}, your`:"Your"," membership request has been submitted. A company administrator will review and approve your access."]}),f.jsx("p",{className:"pending-auto-check",children:"We'll automatically check for updates"}),f.jsxs("div",{className:"pending-actions",children:[f.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Sign Out"}),f.jsx("button",{className:"btn btn-primary",onClick:c,disabled:i,children:i?"Checking...":"Check Status"})]})]})}function fZ(){const{token:e}=dN();return f.jsx(y.Suspense,{fallback:f.jsx(T_,{}),children:f.jsx(lZ,{shareToken:e})})}function mZ(){const{token:e}=dN();return f.jsx(y.Suspense,{fallback:f.jsx(T_,{}),children:f.jsx(cZ,{signatureToken:e})})}function hZ(){const e=Eb(),t=pa(),[r,n]=y.useState(null),[i,s]=y.useState(null),[c,u]=y.useState([]),[,m]=y.useState([]),[h,p]=y.useState(null),[v,_]=y.useState(""),[x,w]=y.useState(!0),[j,S]=y.useState(null),[O,C]=y.useState(!1),[A,k]=y.useState(!1),[D,M]=y.useState(null),[L,X]=y.useState(0),[re,ae]=y.useState(!1),[G,U]=y.useState(null),[ue,ve]=y.useState(""),[q,R]=y.useState(!1),I=y.useCallback((ye,ke="")=>{S({message:ye,type:ke})},[]),ee=y.useCallback(async()=>{try{if(!P){w(!1);return}const{data:{user:ye}}=await T.auth.getUser();if(!ye){w(!1);return}const{data:ke}=await T.from("users").select("*").eq("id",ye.id).single();if(ke){n(ke);let Ce=await _e.getUserCompanies(ye.id);if(Ce.length===0&&ke.company_id&&await _e.repairLegacyUser(ye.id,ke.company_id,ke.role||"member")&&(Ce=await _e.getUserCompanies(ye.id)),u(Ce),Ce.length===0){if(await _e.getUserPendingMemberships(ye.id)>0){try{const{data:_t}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",ye.id).eq("status","pending").limit(1);_t?.[0]?.companies?.name&&ve(_t[0].companies.name)}catch{}e("/pending",{replace:!0});return}S({message:"No company access. Join a company to continue.",type:"error"}),await rf.signOut();return}const Ct=localStorage.getItem("selectedCompanyId");let Ie=null;if(Ct&&Ce.find(It=>It.id===Ct)?Ie=Ce.find(It=>It.id===Ct):Ce.length>0&&(Ie=Ce[0]),Ie){const{data:It}=await T.from("companies").select("*").eq("id",Ie.id).single();s(It),R(!0);const _t=t.pathname,At=_t.startsWith("/view/")||_t.startsWith("/sign/"),Cr=["/dashboard","/projects/new","/pricing","/branding","/team"].includes(_t);!At&&!Cr&&_t!=="/field"&&e("/dashboard",{replace:!0})}}}catch(ye){console.error("Auth check error:",ye)}finally{w(!1)}},[e,t.pathname]);y.useEffect(()=>{const ye=t.pathname;ye.startsWith("/view/")||ye.startsWith("/sign/")?w(!1):ee()},[]),y.useEffect(()=>{if(!P)return;const{data:{subscription:ye}}=T.auth.onAuthStateChange(async ke=>{if(ke==="SIGNED_OUT"||ke==="USER_DELETED"){const Ce=t.pathname;if(Ce.startsWith("/sign/")||Ce.startsWith("/view/"))return;n(null),s(null),u([]),R(!1),e("/login",{replace:!0})}else if(ke==="SIGNED_IN"&&!r){const Ce=t.pathname;!Ce.startsWith("/sign/")&&!Ce.startsWith("/view/")&&ee()}});return()=>{ye?.unsubscribe()}},[r,ee,e,t.pathname]);const H=(ye,ke="")=>{p(ye),_(ke),e("/field")},se=async(ye,ke)=>{try{await py();const{data:Ce,error:Ct}=await T.auth.signInWithPassword({email:ye,password:ke});if(Ct){I(Ct.message||"Invalid credentials","error");return}const{data:Ie,error:It}=await T.from("users").select("*").eq("id",Ce.user.id).single();if(It){console.error("User fetch error:",It),I("Error loading profile","error");return}if(Ie){n(Ie);let _t=await _e.getUserCompanies(Ce.user.id);_t.length===0&&Ie.company_id&&await _e.repairLegacyUser(Ce.user.id,Ie.company_id,Ie.role||"member")&&(_t=await _e.getUserCompanies(Ce.user.id)),u(_t);const At=localStorage.getItem("selectedCompanyId");let Cr=null;if(At&&_t.find(jt=>jt.id===At)?Cr=_t.find(jt=>jt.id===At):_t.length>0&&(Cr=_t[0]),Cr){const{data:jt}=await T.from("companies").select("*").eq("id",Cr.id).single();s(jt),R(!0);const{data:Ye}=await T.auth.mfa.listFactors(),$r=Ye?.totp?.find(bn=>bn.status==="verified");$r?(U($r.id),ae(!0)):e("/dashboard")}else if(await _e.getUserPendingMemberships(Ce.user.id)>0){try{const{data:Ye}=await T.from("user_companies").select("company_id, companies(name)").eq("user_id",Ce.user.id).eq("status","pending").limit(1);Ye?.[0]?.companies?.name&&ve(Ye[0].companies.name)}catch{}e("/pending")}else I("No company access. Please contact admin.","error")}else I("Profile not found. Please contact admin.","error")}catch(Ce){console.error("Login error:",Ce),I("Login failed","error")}},Se=async ye=>{try{const{data:ke}=await T.from("companies").select("*").eq("id",ye).single();ke&&(s(ke),localStorage.setItem("selectedCompanyId",ye),C(!1),e("/dashboard"),I(`Switched to ${ke.name}`,"success"))}catch(ke){console.error("Switch company error:",ke),I("Error switching company","error")}},J=async()=>{try{await rf.signOut(),n(null),s(null),u([]),R(!1),localStorage.removeItem("selectedCompanyId"),e("/login")}catch(ye){console.error("Logout error:",ye),I("Error signing out","error")}},$=async()=>{await py(),p(null),_(""),e("/login")},ge=()=>{e("/dashboard"),i?.id&&Pe()},Pe=async()=>{if(i?.id)try{const ye=await _e.getProjects(i.id);m(ye)}catch(ye){console.error("Error loading projects:",ye)}};y.useEffect(()=>{i?.id&&q&&(Pe(),Le())},[i?.id,q]);const Le=async()=>{if(i?.id)try{const ke=(await _e.getCompanyMemberships(i.id)).filter(Ce=>Ce.status==="pending").length;X(ke)}catch(ye){console.error("Error loading pending count:",ye)}},pe=y.useCallback(()=>{M(null)},[]),Ee=c.find(ye=>ye.id===i?.id)?.access_level==="administrator"||i?.owner_user_id===r?.id,we=j&&f.jsx(NN,{message:j.message,type:j.type,onClose:()=>S(null)});if(x)return f.jsx(wv,{children:f.jsx(kd,{companyId:i?.id,children:f.jsxs("div",{className:"loading-screen",children:[f.jsx(zr,{className:"loading-logo"}),f.jsx("div",{className:"spinner"})]})})});if(re)return f.jsx(wv,{children:f.jsxs(kd,{companyId:i?.id,children:[f.jsx(_o,{children:f.jsx(qL,{factorId:G,onVerified:()=>{ae(!1),e("/dashboard")},onCancel:async()=>{ae(!1),U(null),await rf.signOut(),n(null),s(null),u([]),R(!1),e("/login")}})}),we]})});const ie=ye=>!r||!i||!q?f.jsx(bo,{to:"/login",replace:!0}):ye,Ue=ye=>f.jsx(TL,{children:f.jsxs("div",{children:[!P&&f.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),f.jsx("nav",{className:"nav",children:f.jsxs("div",{className:"nav-content",children:[f.jsx(zr,{}),f.jsxs("div",{className:"nav-tabs nav-tabs-desktop",children:[f.jsx("button",{className:`nav-tab ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>e("/dashboard"),children:"Dashboard"}),f.jsx("button",{className:`nav-tab ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>e("/projects/new"),children:"+ New Project"}),f.jsx("button",{className:`nav-tab ${t.pathname==="/pricing"?"active":""}`,onClick:()=>e("/pricing"),children:"Pricing"}),Ee&&f.jsx("button",{className:`nav-tab ${t.pathname==="/branding"?"active":""}`,onClick:()=>e("/branding"),children:"Branding"}),Ee&&f.jsxs("button",{className:`nav-tab ${t.pathname==="/team"?"active":""}`,onClick:()=>e("/team"),children:["Team",L>0&&f.jsx("span",{className:"nav-tab-badge",children:L})]})]}),f.jsxs("div",{className:"nav-user nav-user-desktop",children:[f.jsx(FS,{compact:!0}),f.jsxs("div",{className:"mobile-menu",children:[f.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!A),"aria-label":"User menu",children:""}),A&&f.jsxs("div",{className:"mobile-menu-dropdown",children:[f.jsxs("div",{className:"mobile-menu-info",children:[f.jsx("div",{className:"mobile-menu-user",children:r?.name||r?.email}),i&&f.jsx("div",{className:"mobile-menu-company",children:i.name})]}),f.jsx("button",{className:"mobile-menu-logout",onClick:()=>{k(!1),J()},children:"Sign Out"})]})]}),c.length>1&&f.jsxs("div",{className:"company-switcher",children:[f.jsxs("button",{className:"company-switcher-btn",onClick:()=>C(!O),children:[i?.name||"Select Company",f.jsx("span",{className:"switcher-arrow",children:""})]}),O&&f.jsx("div",{className:"company-dropdown",children:c.map(ke=>f.jsxs("button",{className:`company-option ${ke.id===i?.id?"active":""}`,onClick:()=>Se(ke.id),children:[ke.name,ke.id===i?.id&&f.jsx("span",{className:"check",children:""})]},ke.id))})]}),c.length<=1&&i&&f.jsx("span",{className:"nav-company-name",children:i.name}),f.jsx("span",{className:"nav-user-name",children:r?.name||r?.email}),f.jsx("button",{className:"nav-logout",onClick:J,children:"Sign Out"})]}),f.jsx("button",{className:"mobile-menu-btn",onClick:()=>k(!0),"aria-label":"Open menu",children:f.jsxs("span",{className:"hamburger-icon",children:[f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{})]})})]})}),A&&f.jsx("div",{className:"mobile-drawer-overlay",onClick:()=>k(!1),children:f.jsxs("div",{className:"mobile-drawer",onClick:ke=>ke.stopPropagation(),children:[f.jsxs("div",{className:"mobile-drawer-header",children:[f.jsx(zr,{}),f.jsx("button",{className:"mobile-drawer-close",onClick:()=>k(!1),"aria-label":"Close menu",children:""})]}),f.jsxs("div",{className:"mobile-drawer-user",children:[f.jsx("div",{className:"mobile-user-avatar",children:(r?.name||r?.email||"U")[0].toUpperCase()}),f.jsxs("div",{className:"mobile-user-info",children:[f.jsx("span",{className:"mobile-user-name",children:r?.name||r?.email}),f.jsx("span",{className:"mobile-user-company",children:i?.name})]})]}),c.length>1&&f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Switch Company"}),f.jsx("div",{className:"mobile-company-list",children:c.map(ke=>f.jsxs("button",{className:`mobile-company-option ${ke.id===i?.id?"active":""}`,onClick:()=>{Se(ke.id),k(!1)},children:[f.jsx("span",{className:"mobile-company-name",children:ke.name}),ke.id===i?.id&&f.jsx("span",{className:"mobile-company-check",children:""})]},ke.id))})]}),f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Navigation"}),f.jsxs("div",{className:"mobile-nav-list",children:[f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/dashboard"?"active":""}`,onClick:()=>{e("/dashboard"),k(!1)},children:"Dashboard"}),f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/projects/new"?"active":""}`,onClick:()=>{e("/projects/new"),k(!1)},children:"+ New Project"}),f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/pricing"?"active":""}`,onClick:()=>{e("/pricing"),k(!1)},children:"Pricing"}),Ee&&f.jsx("button",{className:`mobile-nav-item ${t.pathname==="/branding"?"active":""}`,onClick:()=>{e("/branding"),k(!1)},children:"Branding"}),Ee&&f.jsxs("button",{className:`mobile-nav-item ${t.pathname==="/team"?"active":""}`,onClick:()=>{e("/team"),k(!1)},children:["Team",L>0&&f.jsx("span",{className:"mobile-nav-badge",children:L})]})]})]}),f.jsxs("div",{className:"mobile-drawer-section",children:[f.jsx("div",{className:"mobile-section-title",children:"Appearance"}),f.jsx("div",{className:"mobile-theme-toggle",children:f.jsx(FS,{})})]}),f.jsx("div",{className:"mobile-drawer-footer",children:f.jsx("button",{className:"mobile-logout-btn",onClick:()=>{J(),k(!1)},children:"Sign Out"})})]})}),f.jsx(_o,{children:f.jsx(y.Suspense,{fallback:f.jsx(T_,{}),children:f.jsx("div",{className:"container",children:ye},i?.id)})}),f.jsx(KS,{}),we,f.jsx(RL,{})]})});return f.jsx(wv,{children:f.jsx(kd,{companyId:i?.id,children:f.jsxs(Tz,{children:[f.jsx(dn,{path:"/view/:token",element:f.jsxs(_o,{children:[f.jsx(fZ,{}),we]})}),f.jsx(dn,{path:"/sign/:token",element:f.jsxs(_o,{children:[f.jsx(mZ,{}),we]})}),f.jsx(dn,{path:"/login",element:r&&i&&q?f.jsx(bo,{to:"/dashboard",replace:!0}):f.jsxs(_o,{children:[f.jsx(ML,{onForemanAccess:H,onOfficeLogin:se,onShowToast:I}),we]})}),f.jsx(dn,{path:"/pending",element:f.jsxs(_o,{children:[f.jsx(dZ,{pendingCompanyName:ue,userName:r?.name,onCheckStatus:ee,onLogout:J}),we]})}),f.jsx(dn,{path:"/field",element:h?f.jsxs(kd,{companyId:h.company_id,children:[f.jsx(_o,{children:f.jsx(nZ,{project:h,companyId:h.company_id,foremanName:v,onShowToast:I,onExit:$})}),f.jsx(KS,{}),we]}):f.jsx(bo,{to:"/login",replace:!0})}),f.jsx(dn,{path:"/dashboard",element:ie(Ue(f.jsx(aZ,{company:i,user:r,isAdmin:Ee,onShowToast:I,navigateToProjectId:D,onProjectNavigated:pe})))}),f.jsx(dn,{path:"/projects/new",element:ie(Ue(f.jsx(iZ,{company:i,user:r,onProjectCreated:ge,onShowToast:I})))}),f.jsx(dn,{path:"/pricing",element:ie(Ue(f.jsx(sZ,{company:i,onShowToast:I})))}),f.jsx(dn,{path:"/branding",element:ie(Ue(f.jsx(oZ,{company:i,onShowToast:I})))}),f.jsx(dn,{path:"/team",element:ie(Ee?Ue(f.jsx(uZ,{company:i,user:r,onShowToast:I})):f.jsx(bo,{to:"/dashboard",replace:!0}))}),f.jsx(dn,{path:"/",element:r&&i&&q?f.jsx(bo,{to:"/dashboard",replace:!0}):f.jsx(bo,{to:"/login",replace:!0})}),f.jsx(dn,{path:"*",element:f.jsx(bo,{to:"/",replace:!0})})]})})})}Rq.createRoot(document.getElementById("root")).render(f.jsx(Cq.StrictMode,{children:f.jsx(rL,{children:f.jsx(hZ,{})})}));"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{setInterval(()=>{e.update().catch(t=>console.debug("[SW] Update check failed:",t.message))},3e5)}).catch(e=>{console.debug("[SW] Registration failed:",e.message)})}),navigator.serviceWorker.addEventListener("message",e=>{e.data?.type==="SW_UPDATED"&&(console.log("[App] Service worker updated, reloading for fresh assets..."),window.location.reload()),e.data?.type==="ASSET_NOT_FOUND"&&(console.warn("[App] Asset not found:",e.data.url,"- reloading..."),"caches"in window?caches.keys().then(t=>{t.forEach(r=>caches.delete(r))}).finally(()=>{window.location.reload()}):window.location.reload())}));export{WP as $,Ur as A,PF as B,jF as C,rr as D,zt as E,fa as F,Qn as G,FZ as H,W as I,Je as J,Ki as K,yr as L,Fi as M,d8 as N,MZ as O,Vo as P,Wo as Q,nb as R,PN as S,M0 as T,Vi as U,Fs as V,Gm as W,ah as X,j_ as Y,Qr as Z,GP as _,hm as a,_5 as a0,Qs as a1,w_ as a2,Ko as a3,L9 as a4,C_ as a5,S_ as a6,aV as a7,YP as a8,lM as a9,eZ as aA,XP as aB,cu as aC,OL as aD,CL as aE,NL as aF,EZ as aG,IL as aH,JL as aI,NN as aJ,T as aK,_Z as aL,UX as aM,pM as aN,xZ as aO,SZ as aP,LL as aQ,wZ as aR,jZ as aS,zr as aT,OZ as aU,a3 as aV,P as aW,bZ as aX,rQ as aY,$Y as aa,pt as ab,vE as ac,Wc as ad,DZ as ae,Vc as af,Dt as ag,Mt as ah,h_ as ai,LP as aj,vn as ak,t0 as al,wY as am,Mm as an,RM as ao,f_ as ap,Ke as aq,_e as ar,f as as,Og as at,$X as au,db as av,pb as aw,gb as ax,Fg as ay,bM as az,tk as b,ot as c,CZ as d,kZ as e,c4 as f,rD as g,nD as h,_N as i,De as j,Rt as k,PZ as l,TZ as m,RI as n,XZ as o,ZZ as p,Tr as q,br as r,AZ as s,QZ as t,Te as u,ii as v,oi as w,Xm as x,Nm as y,KZ as z};
//# sourceMappingURL=index-BwoZSx-_.js.map
