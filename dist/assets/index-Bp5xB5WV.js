const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ForemanView-CgBRAnWS.js","assets/InjuryReportForm-D_S90-0D.js","assets/x-CQhBLa59.js","assets/imageUtils-B6M-8mGd.js","assets/wrench-gpWaNYPC.js","assets/user-CRpjtrtv.js","assets/chevron-down-C17pDAIN.js","assets/react-DXGY7bZi.js","assets/pdf-ChZ1zkDw.js","assets/supabase-VuevzHjS.js","assets/Dashboard-CLbjTeSQ.js","assets/users-CEr2U_11.js","assets/pencil-BRf4QkDx.js","assets/xlsx-BvJTHLik.js","assets/corCalculations-yEj5f5-P.js","assets/chevron-right-CrDqkp06.js","assets/user-minus-BqvUDoyT.js","assets/Setup-CK_xKCUa.js","assets/BrandingSettings-Ducr_B85.js","assets/PricingManager-D8ToUnss.js","assets/PublicView-Cen1bbza.js","assets/SignaturePage-WXx5nEHI.js","assets/MembershipManager-r1rIF7IX.js"])))=>i.map(i=>d[i]);
import{r as hm,a as pm,b as Ph}from"./react-DXGY7bZi.js";import{_ as Xa}from"./pdf-ChZ1zkDw.js";import{c as gm}from"./supabase-VuevzHjS.js";function Ih(i,r){for(var c=0;c<r.length;c++){const s=r[c];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in i)){const d=Object.getOwnPropertyDescriptor(s,o);d&&Object.defineProperty(i,o,d.get?d:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function c(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(o){if(o.ep)return;o.ep=!0;const d=c(o);fetch(o.href,d)}})();var Ru={exports:{}},Kl={};var tm;function ep(){if(tm)return Kl;tm=1;var i=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function c(s,o,d){var h=null;if(d!==void 0&&(h=""+d),o.key!==void 0&&(h=""+o.key),"key"in o){d={};for(var y in o)y!=="key"&&(d[y]=o[y])}else d=o;return o=d.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:d}}return Kl.Fragment=r,Kl.jsx=c,Kl.jsxs=c,Kl}var am;function tp(){return am||(am=1,Ru.exports=ep()),Ru.exports}var g=tp(),U=hm();const ym=pm(U),ug=Ih({__proto__:null,default:ym},[U]);var Uu={exports:{}},Jl={},Bu={exports:{}},ku={};var nm;function ap(){return nm||(nm=1,(function(i){function r(T,B){var L=T.length;T.push(B);e:for(;0<L;){var ge=L-1>>>1,ye=T[ge];if(0<o(ye,B))T[ge]=B,T[L]=ye,L=ge;else break e}}function c(T){return T.length===0?null:T[0]}function s(T){if(T.length===0)return null;var B=T[0],L=T.pop();if(L!==B){T[0]=L;e:for(var ge=0,ye=T.length,He=ye>>>1;ge<He;){var je=2*(ge+1)-1,N=T[je],ne=je+1,it=T[ne];if(0>o(N,L))ne<ye&&0>o(it,N)?(T[ge]=it,T[ne]=L,ge=ne):(T[ge]=N,T[je]=L,ge=je);else if(ne<ye&&0>o(it,L))T[ge]=it,T[ne]=L,ge=ne;else break e}}return B}function o(T,B){var L=T.sortIndex-B.sortIndex;return L!==0?L:T.id-B.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;i.unstable_now=function(){return d.now()}}else{var h=Date,y=h.now();i.unstable_now=function(){return h.now()-y}}var w=[],M=[],k=1,z=null,X=3,Z=!1,V=!1,H=!1,F=!1,me=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function P(T){for(var B=c(M);B!==null;){if(B.callback===null)s(M);else if(B.startTime<=T)s(M),B.sortIndex=B.expirationTime,r(w,B);else break;B=c(M)}}function be(T){if(H=!1,P(T),!V)if(c(w)!==null)V=!0,ke||(ke=!0,R());else{var B=c(M);B!==null&&te(be,B.startTime-T)}}var ke=!1,Xe=-1,Fe=5,Pe=-1;function Lt(){return F?!0:!(i.unstable_now()-Pe<Fe)}function rt(){if(F=!1,ke){var T=i.unstable_now();Pe=T;var B=!0;try{e:{V=!1,H&&(H=!1,re(Xe),Xe=-1),Z=!0;var L=X;try{t:{for(P(T),z=c(w);z!==null&&!(z.expirationTime>T&&Lt());){var ge=z.callback;if(typeof ge=="function"){z.callback=null,X=z.priorityLevel;var ye=ge(z.expirationTime<=T);if(T=i.unstable_now(),typeof ye=="function"){z.callback=ye,P(T),B=!0;break t}z===c(w)&&s(w),P(T)}else s(w);z=c(w)}if(z!==null)B=!0;else{var He=c(M);He!==null&&te(be,He.startTime-T),B=!1}}break e}finally{z=null,X=L,Z=!1}B=void 0}}finally{B?R():ke=!1}}}var R;if(typeof I=="function")R=function(){I(rt)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,x=J.port2;J.port1.onmessage=rt,R=function(){x.postMessage(null)}}else R=function(){me(rt,0)};function te(T,B){Xe=me(function(){T(i.unstable_now())},B)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(T){T.callback=null},i.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Fe=0<T?Math.floor(1e3/T):5},i.unstable_getCurrentPriorityLevel=function(){return X},i.unstable_next=function(T){switch(X){case 1:case 2:case 3:var B=3;break;default:B=X}var L=X;X=B;try{return T()}finally{X=L}},i.unstable_requestPaint=function(){F=!0},i.unstable_runWithPriority=function(T,B){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=X;X=T;try{return B()}finally{X=L}},i.unstable_scheduleCallback=function(T,B,L){var ge=i.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?ge+L:ge):L=ge,T){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=L+ye,T={id:k++,callback:B,priorityLevel:T,startTime:L,expirationTime:ye,sortIndex:-1},L>ge?(T.sortIndex=L,r(M,T),c(w)===null&&T===c(M)&&(H?(re(Xe),Xe=-1):H=!0,te(be,L-ge))):(T.sortIndex=ye,r(w,T),V||Z||(V=!0,ke||(ke=!0,R()))),T},i.unstable_shouldYield=Lt,i.unstable_wrapCallback=function(T){var B=X;return function(){var L=X;X=B;try{return T.apply(this,arguments)}finally{X=L}}}})(ku)),ku}var lm;function np(){return lm||(lm=1,Bu.exports=ap()),Bu.exports}var rm;function lp(){if(rm)return Jl;rm=1;var i=np(),r=hm(),c=Ph();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function d(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function w(e){if(d(e)!==e)throw Error(s(188))}function M(e){var t=e.alternate;if(!t){if(t=d(e),t===null)throw Error(s(188));return t!==e?null:e}for(var a=e,n=t;;){var l=a.return;if(l===null)break;var u=l.alternate;if(u===null){if(n=l.return,n!==null){a=n;continue}break}if(l.child===u.child){for(u=l.child;u;){if(u===a)return w(l),e;if(u===n)return w(l),t;u=u.sibling}throw Error(s(188))}if(a.return!==n.return)a=l,n=u;else{for(var f=!1,m=l.child;m;){if(m===a){f=!0,a=l,n=u;break}if(m===n){f=!0,n=l,a=u;break}m=m.sibling}if(!f){for(m=u.child;m;){if(m===a){f=!0,a=u,n=l;break}if(m===n){f=!0,n=u,a=l;break}m=m.sibling}if(!f)throw Error(s(189))}}if(a.alternate!==n)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:t}function k(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=k(e),t!==null)return t;e=e.sibling}return null}var z=Object.assign,X=Symbol.for("react.element"),Z=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),I=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),be=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),Xe=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),Pe=Symbol.for("react.activity"),Lt=Symbol.for("react.memo_cache_sentinel"),rt=Symbol.iterator;function R(e){return e===null||typeof e!="object"?null:(e=rt&&e[rt]||e["@@iterator"],typeof e=="function"?e:null)}var J=Symbol.for("react.client.reference");function x(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===J?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case me:return"Profiler";case F:return"StrictMode";case be:return"Suspense";case ke:return"SuspenseList";case Pe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case I:return e.displayName||"Context";case re:return(e._context.displayName||"Context")+".Consumer";case P:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xe:return t=e.displayName||null,t!==null?t:x(e.type)||"Memo";case Fe:t=e._payload,e=e._init;try{return x(e(t))}catch{}}return null}var te=Array.isArray,T=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=c.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},ge=[],ye=-1;function He(e){return{current:e}}function je(e){0>ye||(e.current=ge[ye],ge[ye]=null,ye--)}function N(e,t){ye++,ge[ye]=e.current,e.current=t}var ne=He(null),it=He(null),Re=He(null),W=He(null);function oe(e,t){switch(N(Re,t),N(it,e),N(ne,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Ed(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Ed(t),e=qd(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}je(ne),N(ne,e)}function De(){je(ne),je(it),je(Re)}function Ze(e){e.memoizedState!==null&&N(W,e);var t=ne.current,a=qd(t,e.type);t!==a&&(N(it,e),N(ne,a))}function Ie(e){it.current===e&&(je(ne),je(it)),W.current===e&&(je(W),Ql._currentValue=L)}var Yt,Ke;function Gt(e){if(Yt===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Yt=t&&t[1]||"",Ke=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Yt+e+Ke}var ya=!1;function Qt(e,t){if(!e||ya)return"";ya=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var O=function(){throw Error()};if(Object.defineProperty(O.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(O,[])}catch(A){var q=A}Reflect.construct(e,[],O)}else{try{O.call()}catch(A){q=A}e.call(O.prototype)}}else{try{throw Error()}catch(A){q=A}(O=e())&&typeof O.catch=="function"&&O.catch(function(){})}}catch(A){if(A&&q&&typeof A.stack=="string")return[A.stack,q.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var l=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");l&&l.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=n.DetermineComponentFrameRoot(),f=u[0],m=u[1];if(f&&m){var v=f.split(`
`),E=m.split(`
`);for(l=n=0;n<v.length&&!v[n].includes("DetermineComponentFrameRoot");)n++;for(;l<E.length&&!E[l].includes("DetermineComponentFrameRoot");)l++;if(n===v.length||l===E.length)for(n=v.length-1,l=E.length-1;1<=n&&0<=l&&v[n]!==E[l];)l--;for(;1<=n&&0<=l;n--,l--)if(v[n]!==E[l]){if(n!==1||l!==1)do if(n--,l--,0>l||v[n]!==E[l]){var D=`
`+v[n].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=n&&0<=l);break}}}finally{ya=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Gt(a):""}function Cm(e,t){switch(e.tag){case 26:case 27:case 5:return Gt(e.type);case 16:return Gt("Lazy");case 13:return e.child!==t&&t!==null?Gt("Suspense Fallback"):Gt("Suspense");case 19:return Gt("SuspenseList");case 0:case 15:return Qt(e.type,!1);case 11:return Qt(e.type.render,!1);case 1:return Qt(e.type,!0);case 31:return Gt("Activity");default:return""}}function Iu(e){try{var t="",a=null;do t+=Cm(e,a),a=e,e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var bi=Object.prototype.hasOwnProperty,Si=i.unstable_scheduleCallback,wi=i.unstable_cancelCallback,Om=i.unstable_shouldYield,Nm=i.unstable_requestPaint,ht=i.unstable_now,Mm=i.unstable_getCurrentPriorityLevel,es=i.unstable_ImmediatePriority,ts=i.unstable_UserBlockingPriority,Pl=i.unstable_NormalPriority,zm=i.unstable_LowPriority,as=i.unstable_IdlePriority,xm=i.log,Rm=i.unstable_setDisableYieldValue,tl=null,pt=null;function va(e){if(typeof xm=="function"&&Rm(e),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(tl,e)}catch{}}var gt=Math.clz32?Math.clz32:km,Um=Math.log,Bm=Math.LN2;function km(e){return e>>>=0,e===0?32:31-(Um(e)/Bm|0)|0}var Il=256,er=262144,tr=4194304;function Za(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ar(e,t,a){var n=e.pendingLanes;if(n===0)return 0;var l=0,u=e.suspendedLanes,f=e.pingedLanes;e=e.warmLanes;var m=n&134217727;return m!==0?(n=m&~u,n!==0?l=Za(n):(f&=m,f!==0?l=Za(f):a||(a=m&~e,a!==0&&(l=Za(a))))):(m=n&~u,m!==0?l=Za(m):f!==0?l=Za(f):a||(a=n&~e,a!==0&&(l=Za(a)))),l===0?0:t!==0&&t!==l&&(t&u)===0&&(u=l&-l,a=t&-t,u>=a||u===32&&(a&4194048)!==0)?t:l}function al(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Hm(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ns(){var e=tr;return tr<<=1,(tr&62914560)===0&&(tr=4194304),e}function ji(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function nl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Lm(e,t,a,n,l,u){var f=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var m=e.entanglements,v=e.expirationTimes,E=e.hiddenUpdates;for(a=f&~a;0<a;){var D=31-gt(a),O=1<<D;m[D]=0,v[D]=-1;var q=E[D];if(q!==null)for(E[D]=null,D=0;D<q.length;D++){var A=q[D];A!==null&&(A.lane&=-536870913)}a&=~O}n!==0&&ls(e,n,0),u!==0&&l===0&&e.tag!==0&&(e.suspendedLanes|=u&~(f&~t))}function ls(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-gt(t);e.entangledLanes|=t,e.entanglements[n]=e.entanglements[n]|1073741824|a&261930}function rs(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var n=31-gt(a),l=1<<n;l&t|e[n]&t&&(e[n]|=t),a&=~l}}function is(e,t){var a=t&-t;return a=(a&42)!==0?1:Ei(a),(a&(e.suspendedLanes|t))!==0?0:a}function Ei(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function qi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function cs(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:Jd(e.type))}function us(e,t){var a=B.p;try{return B.p=e,t()}finally{B.p=a}}var ba=Math.random().toString(36).slice(2),et="__reactFiber$"+ba,ut="__reactProps$"+ba,_n="__reactContainer$"+ba,Ti="__reactEvents$"+ba,Ym="__reactListeners$"+ba,Gm="__reactHandles$"+ba,ss="__reactResources$"+ba,ll="__reactMarker$"+ba;function Ai(e){delete e[et],delete e[ut],delete e[Ti],delete e[Ym],delete e[Gm]}function hn(e){var t=e[et];if(t)return t;for(var a=e.parentNode;a;){if(t=a[_n]||a[et]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Md(e);e!==null;){if(a=e[et])return a;e=Md(e)}return t}e=a,a=e.parentNode}return null}function pn(e){if(e=e[et]||e[_n]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function rl(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function gn(e){var t=e[ss];return t||(t=e[ss]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Je(e){e[ll]=!0}var os=new Set,fs={};function Va(e,t){yn(e,t),yn(e+"Capture",t)}function yn(e,t){for(fs[e]=t,e=0;e<t.length;e++)os.add(t[e])}var Qm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ds={},ms={};function Xm(e){return bi.call(ms,e)?!0:bi.call(ds,e)?!1:Qm.test(e)?ms[e]=!0:(ds[e]=!0,!1)}function nr(e,t,a){if(Xm(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var n=t.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function lr(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function It(e,t,a,n){if(n===null)e.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+n)}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _s(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zm(e,t,a){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,u=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(f){a=""+f,u.call(this,f)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(f){a=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Di(e){if(!e._valueTracker){var t=_s(e)?"checked":"value";e._valueTracker=Zm(e,t,""+e[t])}}function hs(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),n="";return e&&(n=_s(e)?e.checked?"true":"false":e.value),e=n,e!==a?(t.setValue(e),!0):!1}function rr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Vm=/[\n"\\]/g;function Dt(e){return e.replace(Vm,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Ci(e,t,a,n,l,u,f,m){e.name="",f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"?e.type=f:e.removeAttribute("type"),t!=null?f==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+At(t)):e.value!==""+At(t)&&(e.value=""+At(t)):f!=="submit"&&f!=="reset"||e.removeAttribute("value"),t!=null?Oi(e,f,At(t)):a!=null?Oi(e,f,At(a)):n!=null&&e.removeAttribute("value"),l==null&&u!=null&&(e.defaultChecked=!!u),l!=null&&(e.checked=l&&typeof l!="function"&&typeof l!="symbol"),m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.name=""+At(m):e.removeAttribute("name")}function ps(e,t,a,n,l,u,f,m){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||a!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Di(e);return}a=a!=null?""+At(a):"",t=t!=null?""+At(t):a,m||t===e.value||(e.value=t),e.defaultValue=t}n=n??l,n=typeof n!="function"&&typeof n!="symbol"&&!!n,e.checked=m?e.checked:!!n,e.defaultChecked=!!n,f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.name=f),Di(e)}function Oi(e,t,a){t==="number"&&rr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function vn(e,t,a,n){if(e=e.options,t){t={};for(var l=0;l<a.length;l++)t["$"+a[l]]=!0;for(a=0;a<e.length;a++)l=t.hasOwnProperty("$"+e[a].value),e[a].selected!==l&&(e[a].selected=l),l&&n&&(e[a].defaultSelected=!0)}else{for(a=""+At(a),t=null,l=0;l<e.length;l++){if(e[l].value===a){e[l].selected=!0,n&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function gs(e,t,a){if(t!=null&&(t=""+At(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+At(a):""}function ys(e,t,a,n){if(t==null){if(n!=null){if(a!=null)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}a=n}a==null&&(a=""),t=a}a=At(t),e.defaultValue=a,n=e.textContent,n===a&&n!==""&&n!==null&&(e.value=n),Di(e)}function bn(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Km=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vs(e,t,a){var n=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?n?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":n?e.setProperty(t,a):typeof a!="number"||a===0||Km.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function bs(e,t,a){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,a!=null){for(var n in a)!a.hasOwnProperty(n)||t!=null&&t.hasOwnProperty(n)||(n.indexOf("--")===0?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="");for(var l in t)n=t[l],t.hasOwnProperty(l)&&a[l]!==n&&vs(e,l,n)}else for(var u in t)t.hasOwnProperty(u)&&vs(e,u,t[u])}function Ni(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$m=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ir(e){return $m.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ea(){}var Mi=null;function zi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Sn=null,wn=null;function Ss(e){var t=pn(e);if(t&&(e=t.stateNode)){var a=e[ut]||null;e:switch(e=t.stateNode,t.type){case"input":if(Ci(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Dt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var n=a[t];if(n!==e&&n.form===e.form){var l=n[ut]||null;if(!l)throw Error(s(90));Ci(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name)}}for(t=0;t<a.length;t++)n=a[t],n.form===e.form&&hs(n)}break e;case"textarea":gs(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&vn(e,!!a.multiple,t,!1)}}}var xi=!1;function ws(e,t,a){if(xi)return e(t,a);xi=!0;try{var n=e(t);return n}finally{if(xi=!1,(Sn!==null||wn!==null)&&(Kr(),Sn&&(t=Sn,e=wn,wn=Sn=null,Ss(t),e)))for(t=0;t<e.length;t++)Ss(e[t])}}function il(e,t){var a=e.stateNode;if(a===null)return null;var n=a[ut]||null;if(n===null)return null;a=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,t,typeof a));return a}var ta=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ri=!1;if(ta)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{Ri=!1}var Sa=null,Ui=null,cr=null;function js(){if(cr)return cr;var e,t=Ui,a=t.length,n,l="value"in Sa?Sa.value:Sa.textContent,u=l.length;for(e=0;e<a&&t[e]===l[e];e++);var f=a-e;for(n=1;n<=f&&t[a-n]===l[u-n];n++);return cr=l.slice(e,1<n?1-n:void 0)}function ur(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function sr(){return!0}function Es(){return!1}function st(e){function t(a,n,l,u,f){this._reactName=a,this._targetInst=l,this.type=n,this.nativeEvent=u,this.target=f,this.currentTarget=null;for(var m in e)e.hasOwnProperty(m)&&(a=e[m],this[m]=a?a(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?sr:Es,this.isPropagationStopped=Es,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=sr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=sr)},persist:function(){},isPersistent:sr}),t}var Ka={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},or=st(Ka),ul=z({},Ka,{view:0,detail:0}),Wm=st(ul),Bi,ki,sl,fr=z({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sl&&(sl&&e.type==="mousemove"?(Bi=e.screenX-sl.screenX,ki=e.screenY-sl.screenY):ki=Bi=0,sl=e),Bi)},movementY:function(e){return"movementY"in e?e.movementY:ki}}),qs=st(fr),Fm=z({},fr,{dataTransfer:0}),Pm=st(Fm),Im=z({},ul,{relatedTarget:0}),Hi=st(Im),e_=z({},Ka,{animationName:0,elapsedTime:0,pseudoElement:0}),t_=st(e_),a_=z({},Ka,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),n_=st(a_),l_=z({},Ka,{data:0}),Ts=st(l_),r_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},c_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function u_(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=c_[e])?!!t[e]:!1}function Li(){return u_}var s_=z({},ul,{key:function(e){if(e.key){var t=r_[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ur(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i_[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?ur(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ur(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),o_=st(s_),f_=z({},fr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),As=st(f_),d_=z({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),m_=st(d_),__=z({},Ka,{propertyName:0,elapsedTime:0,pseudoElement:0}),h_=st(__),p_=z({},fr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),g_=st(p_),y_=z({},Ka,{newState:0,oldState:0}),v_=st(y_),b_=[9,13,27,32],Yi=ta&&"CompositionEvent"in window,ol=null;ta&&"documentMode"in document&&(ol=document.documentMode);var S_=ta&&"TextEvent"in window&&!ol,Ds=ta&&(!Yi||ol&&8<ol&&11>=ol),Cs=" ",Os=!1;function Ns(e,t){switch(e){case"keyup":return b_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ms(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var jn=!1;function w_(e,t){switch(e){case"compositionend":return Ms(t);case"keypress":return t.which!==32?null:(Os=!0,Cs);case"textInput":return e=t.data,e===Cs&&Os?null:e;default:return null}}function j_(e,t){if(jn)return e==="compositionend"||!Yi&&Ns(e,t)?(e=js(),cr=Ui=Sa=null,jn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ds&&t.locale!=="ko"?null:t.data;default:return null}}var E_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!E_[e.type]:t==="textarea"}function xs(e,t,a,n){Sn?wn?wn.push(n):wn=[n]:Sn=n,t=ei(t,"onChange"),0<t.length&&(a=new or("onChange","change",null,a,n),e.push({event:a,listeners:t}))}var fl=null,dl=null;function q_(e){yd(e,0)}function dr(e){var t=rl(e);if(hs(t))return e}function Rs(e,t){if(e==="change")return t}var Us=!1;if(ta){var Gi;if(ta){var Qi="oninput"in document;if(!Qi){var Bs=document.createElement("div");Bs.setAttribute("oninput","return;"),Qi=typeof Bs.oninput=="function"}Gi=Qi}else Gi=!1;Us=Gi&&(!document.documentMode||9<document.documentMode)}function ks(){fl&&(fl.detachEvent("onpropertychange",Hs),dl=fl=null)}function Hs(e){if(e.propertyName==="value"&&dr(dl)){var t=[];xs(t,dl,e,zi(e)),ws(q_,t)}}function T_(e,t,a){e==="focusin"?(ks(),fl=t,dl=a,fl.attachEvent("onpropertychange",Hs)):e==="focusout"&&ks()}function A_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dr(dl)}function D_(e,t){if(e==="click")return dr(t)}function C_(e,t){if(e==="input"||e==="change")return dr(t)}function O_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yt=typeof Object.is=="function"?Object.is:O_;function ml(e,t){if(yt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var l=a[n];if(!bi.call(t,l)||!yt(e[l],t[l]))return!1}return!0}function Ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ys(e,t){var a=Ls(e);e=0;for(var n;a;){if(a.nodeType===3){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ls(a)}}function Gs(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Gs(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qs(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=rr(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=rr(e.document)}return t}function Xi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var N_=ta&&"documentMode"in document&&11>=document.documentMode,En=null,Zi=null,_l=null,Vi=!1;function Xs(e,t,a){var n=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Vi||En==null||En!==rr(n)||(n=En,"selectionStart"in n&&Xi(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_l&&ml(_l,n)||(_l=n,n=ei(Zi,"onSelect"),0<n.length&&(t=new or("onSelect","select",null,t,a),e.push({event:t,listeners:n}),t.target=En)))}function Ja(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var qn={animationend:Ja("Animation","AnimationEnd"),animationiteration:Ja("Animation","AnimationIteration"),animationstart:Ja("Animation","AnimationStart"),transitionrun:Ja("Transition","TransitionRun"),transitionstart:Ja("Transition","TransitionStart"),transitioncancel:Ja("Transition","TransitionCancel"),transitionend:Ja("Transition","TransitionEnd")},Ki={},Zs={};ta&&(Zs=document.createElement("div").style,"AnimationEvent"in window||(delete qn.animationend.animation,delete qn.animationiteration.animation,delete qn.animationstart.animation),"TransitionEvent"in window||delete qn.transitionend.transition);function $a(e){if(Ki[e])return Ki[e];if(!qn[e])return e;var t=qn[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Zs)return Ki[e]=t[a];return e}var Vs=$a("animationend"),Ks=$a("animationiteration"),Js=$a("animationstart"),M_=$a("transitionrun"),z_=$a("transitionstart"),x_=$a("transitioncancel"),$s=$a("transitionend"),Ws=new Map,Ji="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ji.push("scrollEnd");function Xt(e,t){Ws.set(e,t),Va(t,[e])}var mr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ct=[],Tn=0,$i=0;function _r(){for(var e=Tn,t=$i=Tn=0;t<e;){var a=Ct[t];Ct[t++]=null;var n=Ct[t];Ct[t++]=null;var l=Ct[t];Ct[t++]=null;var u=Ct[t];if(Ct[t++]=null,n!==null&&l!==null){var f=n.pending;f===null?l.next=l:(l.next=f.next,f.next=l),n.pending=l}u!==0&&Fs(a,l,u)}}function hr(e,t,a,n){Ct[Tn++]=e,Ct[Tn++]=t,Ct[Tn++]=a,Ct[Tn++]=n,$i|=n,e.lanes|=n,e=e.alternate,e!==null&&(e.lanes|=n)}function Wi(e,t,a,n){return hr(e,t,a,n),pr(e)}function Wa(e,t){return hr(e,null,null,t),pr(e)}function Fs(e,t,a){e.lanes|=a;var n=e.alternate;n!==null&&(n.lanes|=a);for(var l=!1,u=e.return;u!==null;)u.childLanes|=a,n=u.alternate,n!==null&&(n.childLanes|=a),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(l=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,l&&t!==null&&(l=31-gt(a),e=u.hiddenUpdates,n=e[l],n===null?e[l]=[t]:n.push(t),t.lane=a|536870912),u):null}function pr(e){if(50<Ul)throw Ul=0,ru=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var An={};function R_(e,t,a,n){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(e,t,a,n){return new R_(e,t,a,n)}function Fi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function aa(e,t){var a=e.alternate;return a===null?(a=vt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Ps(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function gr(e,t,a,n,l,u){var f=0;if(n=e,typeof e=="function")Fi(e)&&(f=1);else if(typeof e=="string")f=Lh(e,a,ne.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Pe:return e=vt(31,a,t,l),e.elementType=Pe,e.lanes=u,e;case H:return Fa(a.children,l,u,t);case F:f=8,l|=24;break;case me:return e=vt(12,a,t,l|2),e.elementType=me,e.lanes=u,e;case be:return e=vt(13,a,t,l),e.elementType=be,e.lanes=u,e;case ke:return e=vt(19,a,t,l),e.elementType=ke,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I:f=10;break e;case re:f=9;break e;case P:f=11;break e;case Xe:f=14;break e;case Fe:f=16,n=null;break e}f=29,a=Error(s(130,e===null?"null":typeof e,"")),n=null}return t=vt(f,a,t,l),t.elementType=e,t.type=n,t.lanes=u,t}function Fa(e,t,a,n){return e=vt(7,e,n,t),e.lanes=a,e}function Pi(e,t,a){return e=vt(6,e,null,t),e.lanes=a,e}function Is(e){var t=vt(18,null,null,0);return t.stateNode=e,t}function Ii(e,t,a){return t=vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var eo=new WeakMap;function Ot(e,t){if(typeof e=="object"&&e!==null){var a=eo.get(e);return a!==void 0?a:(t={value:e,source:t,stack:Iu(t)},eo.set(e,t),t)}return{value:e,source:t,stack:Iu(t)}}var Dn=[],Cn=0,yr=null,hl=0,Nt=[],Mt=0,wa=null,Jt=1,$t="";function na(e,t){Dn[Cn++]=hl,Dn[Cn++]=yr,yr=e,hl=t}function to(e,t,a){Nt[Mt++]=Jt,Nt[Mt++]=$t,Nt[Mt++]=wa,wa=e;var n=Jt;e=$t;var l=32-gt(n)-1;n&=~(1<<l),a+=1;var u=32-gt(t)+l;if(30<u){var f=l-l%5;u=(n&(1<<f)-1).toString(32),n>>=f,l-=f,Jt=1<<32-gt(t)+l|a<<l|n,$t=u+e}else Jt=1<<u|a<<l|n,$t=e}function ec(e){e.return!==null&&(na(e,1),to(e,1,0))}function tc(e){for(;e===yr;)yr=Dn[--Cn],Dn[Cn]=null,hl=Dn[--Cn],Dn[Cn]=null;for(;e===wa;)wa=Nt[--Mt],Nt[Mt]=null,$t=Nt[--Mt],Nt[Mt]=null,Jt=Nt[--Mt],Nt[Mt]=null}function ao(e,t){Nt[Mt++]=Jt,Nt[Mt++]=$t,Nt[Mt++]=wa,Jt=t.id,$t=t.overflow,wa=e}var tt=null,Ce=null,fe=!1,ja=null,zt=!1,ac=Error(s(519));function Ea(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(Ot(t,e)),ac}function no(e){var t=e.stateNode,a=e.type,n=e.memoizedProps;switch(t[et]=e,t[ut]=n,a){case"dialog":ce("cancel",t),ce("close",t);break;case"iframe":case"object":case"embed":ce("load",t);break;case"video":case"audio":for(a=0;a<kl.length;a++)ce(kl[a],t);break;case"source":ce("error",t);break;case"img":case"image":case"link":ce("error",t),ce("load",t);break;case"details":ce("toggle",t);break;case"input":ce("invalid",t),ps(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":ce("invalid",t);break;case"textarea":ce("invalid",t),ys(t,n.value,n.defaultValue,n.children)}a=n.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||n.suppressHydrationWarning===!0||wd(t.textContent,a)?(n.popover!=null&&(ce("beforetoggle",t),ce("toggle",t)),n.onScroll!=null&&ce("scroll",t),n.onScrollEnd!=null&&ce("scrollend",t),n.onClick!=null&&(t.onclick=ea),t=!0):t=!1,t||Ea(e,!0)}function lo(e){for(tt=e.return;tt;)switch(tt.tag){case 5:case 31:case 13:zt=!1;return;case 27:case 3:zt=!0;return;default:tt=tt.return}}function On(e){if(e!==tt)return!1;if(!fe)return lo(e),fe=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||bu(e.type,e.memoizedProps)),a=!a),a&&Ce&&Ea(e),lo(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ce=Nd(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ce=Nd(e)}else t===27?(t=Ce,ka(e.type)?(e=qu,qu=null,Ce=e):Ce=t):Ce=tt?Rt(e.stateNode.nextSibling):null;return!0}function Pa(){Ce=tt=null,fe=!1}function nc(){var e=ja;return e!==null&&(mt===null?mt=e:mt.push.apply(mt,e),ja=null),e}function pl(e){ja===null?ja=[e]:ja.push(e)}var lc=He(null),Ia=null,la=null;function qa(e,t,a){N(lc,t._currentValue),t._currentValue=a}function ra(e){e._currentValue=lc.current,je(lc)}function rc(e,t,a){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===a)break;e=e.return}}function ic(e,t,a,n){var l=e.child;for(l!==null&&(l.return=e);l!==null;){var u=l.dependencies;if(u!==null){var f=l.child;u=u.firstContext;e:for(;u!==null;){var m=u;u=l;for(var v=0;v<t.length;v++)if(m.context===t[v]){u.lanes|=a,m=u.alternate,m!==null&&(m.lanes|=a),rc(u.return,a,e),n||(f=null);break e}u=m.next}}else if(l.tag===18){if(f=l.return,f===null)throw Error(s(341));f.lanes|=a,u=f.alternate,u!==null&&(u.lanes|=a),rc(f,a,e),f=null}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===e){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}}function Nn(e,t,a,n){e=null;for(var l=t,u=!1;l!==null;){if(!u){if((l.flags&524288)!==0)u=!0;else if((l.flags&262144)!==0)break}if(l.tag===10){var f=l.alternate;if(f===null)throw Error(s(387));if(f=f.memoizedProps,f!==null){var m=l.type;yt(l.pendingProps.value,f.value)||(e!==null?e.push(m):e=[m])}}else if(l===W.current){if(f=l.alternate,f===null)throw Error(s(387));f.memoizedState.memoizedState!==l.memoizedState.memoizedState&&(e!==null?e.push(Ql):e=[Ql])}l=l.return}e!==null&&ic(t,e,a,n),t.flags|=262144}function vr(e){for(e=e.firstContext;e!==null;){if(!yt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function en(e){Ia=e,la=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function at(e){return ro(Ia,e)}function br(e,t){return Ia===null&&en(e),ro(e,t)}function ro(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},la===null){if(e===null)throw Error(s(308));la=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else la=la.next=t;return a}var U_=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},B_=i.unstable_scheduleCallback,k_=i.unstable_NormalPriority,Le={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cc(){return{controller:new U_,data:new Map,refCount:0}}function gl(e){e.refCount--,e.refCount===0&&B_(k_,function(){e.controller.abort()})}var yl=null,uc=0,Mn=0,zn=null;function H_(e,t){if(yl===null){var a=yl=[];uc=0,Mn=fu(),zn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return uc++,t.then(io,io),t}function io(){if(--uc===0&&yl!==null){zn!==null&&(zn.status="fulfilled");var e=yl;yl=null,Mn=0,zn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function L_(e,t){var a=[],n={status:"pending",value:null,reason:null,then:function(l){a.push(l)}};return e.then(function(){n.status="fulfilled",n.value=t;for(var l=0;l<a.length;l++)(0,a[l])(t)},function(l){for(n.status="rejected",n.reason=l,l=0;l<a.length;l++)(0,a[l])(void 0)}),n}var co=T.S;T.S=function(e,t){Vf=ht(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&H_(e,t),co!==null&&co(e,t)};var tn=He(null);function sc(){var e=tn.current;return e!==null?e:Ae.pooledCache}function Sr(e,t){t===null?N(tn,tn.current):N(tn,t.pool)}function uo(){var e=sc();return e===null?null:{parent:Le._currentValue,pool:e}}var xn=Error(s(460)),oc=Error(s(474)),wr=Error(s(542)),jr={then:function(){}};function so(e){return e=e.status,e==="fulfilled"||e==="rejected"}function oo(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(ea,ea),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mo(e),e;default:if(typeof t.status=="string")t.then(ea,ea);else{if(e=Ae,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(n){if(t.status==="pending"){var l=t;l.status="fulfilled",l.value=n}},function(n){if(t.status==="pending"){var l=t;l.status="rejected",l.reason=n}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,mo(e),e}throw nn=t,xn}}function an(e){try{var t=e._init;return t(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(nn=a,xn):a}}var nn=null;function fo(){if(nn===null)throw Error(s(459));var e=nn;return nn=null,e}function mo(e){if(e===xn||e===wr)throw Error(s(483))}var Rn=null,vl=0;function Er(e){var t=vl;return vl+=1,Rn===null&&(Rn=[]),oo(Rn,e,t)}function bl(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function qr(e,t){throw t.$$typeof===X?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function _o(e){function t(S,b){if(e){var j=S.deletions;j===null?(S.deletions=[b],S.flags|=16):j.push(b)}}function a(S,b){if(!e)return null;for(;b!==null;)t(S,b),b=b.sibling;return null}function n(S){for(var b=new Map;S!==null;)S.key!==null?b.set(S.key,S):b.set(S.index,S),S=S.sibling;return b}function l(S,b){return S=aa(S,b),S.index=0,S.sibling=null,S}function u(S,b,j){return S.index=j,e?(j=S.alternate,j!==null?(j=j.index,j<b?(S.flags|=67108866,b):j):(S.flags|=67108866,b)):(S.flags|=1048576,b)}function f(S){return e&&S.alternate===null&&(S.flags|=67108866),S}function m(S,b,j,C){return b===null||b.tag!==6?(b=Pi(j,S.mode,C),b.return=S,b):(b=l(b,j),b.return=S,b)}function v(S,b,j,C){var K=j.type;return K===H?D(S,b,j.props.children,C,j.key):b!==null&&(b.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Fe&&an(K)===b.type)?(b=l(b,j.props),bl(b,j),b.return=S,b):(b=gr(j.type,j.key,j.props,null,S.mode,C),bl(b,j),b.return=S,b)}function E(S,b,j,C){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Ii(j,S.mode,C),b.return=S,b):(b=l(b,j.children||[]),b.return=S,b)}function D(S,b,j,C,K){return b===null||b.tag!==7?(b=Fa(j,S.mode,C,K),b.return=S,b):(b=l(b,j),b.return=S,b)}function O(S,b,j){if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return b=Pi(""+b,S.mode,j),b.return=S,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Z:return j=gr(b.type,b.key,b.props,null,S.mode,j),bl(j,b),j.return=S,j;case V:return b=Ii(b,S.mode,j),b.return=S,b;case Fe:return b=an(b),O(S,b,j)}if(te(b)||R(b))return b=Fa(b,S.mode,j,null),b.return=S,b;if(typeof b.then=="function")return O(S,Er(b),j);if(b.$$typeof===I)return O(S,br(S,b),j);qr(S,b)}return null}function q(S,b,j,C){var K=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return K!==null?null:m(S,b,""+j,C);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:return j.key===K?v(S,b,j,C):null;case V:return j.key===K?E(S,b,j,C):null;case Fe:return j=an(j),q(S,b,j,C)}if(te(j)||R(j))return K!==null?null:D(S,b,j,C,null);if(typeof j.then=="function")return q(S,b,Er(j),C);if(j.$$typeof===I)return q(S,b,br(S,j),C);qr(S,j)}return null}function A(S,b,j,C,K){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return S=S.get(j)||null,m(b,S,""+C,K);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Z:return S=S.get(C.key===null?j:C.key)||null,v(b,S,C,K);case V:return S=S.get(C.key===null?j:C.key)||null,E(b,S,C,K);case Fe:return C=an(C),A(S,b,j,C,K)}if(te(C)||R(C))return S=S.get(j)||null,D(b,S,C,K,null);if(typeof C.then=="function")return A(S,b,j,Er(C),K);if(C.$$typeof===I)return A(S,b,j,br(b,C),K);qr(b,C)}return null}function Y(S,b,j,C){for(var K=null,_e=null,Q=b,ae=b=0,se=null;Q!==null&&ae<j.length;ae++){Q.index>ae?(se=Q,Q=null):se=Q.sibling;var he=q(S,Q,j[ae],C);if(he===null){Q===null&&(Q=se);break}e&&Q&&he.alternate===null&&t(S,Q),b=u(he,b,ae),_e===null?K=he:_e.sibling=he,_e=he,Q=se}if(ae===j.length)return a(S,Q),fe&&na(S,ae),K;if(Q===null){for(;ae<j.length;ae++)Q=O(S,j[ae],C),Q!==null&&(b=u(Q,b,ae),_e===null?K=Q:_e.sibling=Q,_e=Q);return fe&&na(S,ae),K}for(Q=n(Q);ae<j.length;ae++)se=A(Q,S,ae,j[ae],C),se!==null&&(e&&se.alternate!==null&&Q.delete(se.key===null?ae:se.key),b=u(se,b,ae),_e===null?K=se:_e.sibling=se,_e=se);return e&&Q.forEach(function(Qa){return t(S,Qa)}),fe&&na(S,ae),K}function $(S,b,j,C){if(j==null)throw Error(s(151));for(var K=null,_e=null,Q=b,ae=b=0,se=null,he=j.next();Q!==null&&!he.done;ae++,he=j.next()){Q.index>ae?(se=Q,Q=null):se=Q.sibling;var Qa=q(S,Q,he.value,C);if(Qa===null){Q===null&&(Q=se);break}e&&Q&&Qa.alternate===null&&t(S,Q),b=u(Qa,b,ae),_e===null?K=Qa:_e.sibling=Qa,_e=Qa,Q=se}if(he.done)return a(S,Q),fe&&na(S,ae),K;if(Q===null){for(;!he.done;ae++,he=j.next())he=O(S,he.value,C),he!==null&&(b=u(he,b,ae),_e===null?K=he:_e.sibling=he,_e=he);return fe&&na(S,ae),K}for(Q=n(Q);!he.done;ae++,he=j.next())he=A(Q,S,ae,he.value,C),he!==null&&(e&&he.alternate!==null&&Q.delete(he.key===null?ae:he.key),b=u(he,b,ae),_e===null?K=he:_e.sibling=he,_e=he);return e&&Q.forEach(function(Fh){return t(S,Fh)}),fe&&na(S,ae),K}function Te(S,b,j,C){if(typeof j=="object"&&j!==null&&j.type===H&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Z:e:{for(var K=j.key;b!==null;){if(b.key===K){if(K=j.type,K===H){if(b.tag===7){a(S,b.sibling),C=l(b,j.props.children),C.return=S,S=C;break e}}else if(b.elementType===K||typeof K=="object"&&K!==null&&K.$$typeof===Fe&&an(K)===b.type){a(S,b.sibling),C=l(b,j.props),bl(C,j),C.return=S,S=C;break e}a(S,b);break}else t(S,b);b=b.sibling}j.type===H?(C=Fa(j.props.children,S.mode,C,j.key),C.return=S,S=C):(C=gr(j.type,j.key,j.props,null,S.mode,C),bl(C,j),C.return=S,S=C)}return f(S);case V:e:{for(K=j.key;b!==null;){if(b.key===K)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){a(S,b.sibling),C=l(b,j.children||[]),C.return=S,S=C;break e}else{a(S,b);break}else t(S,b);b=b.sibling}C=Ii(j,S.mode,C),C.return=S,S=C}return f(S);case Fe:return j=an(j),Te(S,b,j,C)}if(te(j))return Y(S,b,j,C);if(R(j)){if(K=R(j),typeof K!="function")throw Error(s(150));return j=K.call(j),$(S,b,j,C)}if(typeof j.then=="function")return Te(S,b,Er(j),C);if(j.$$typeof===I)return Te(S,b,br(S,j),C);qr(S,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,b!==null&&b.tag===6?(a(S,b.sibling),C=l(b,j),C.return=S,S=C):(a(S,b),C=Pi(j,S.mode,C),C.return=S,S=C),f(S)):a(S,b)}return function(S,b,j,C){try{vl=0;var K=Te(S,b,j,C);return Rn=null,K}catch(Q){if(Q===xn||Q===wr)throw Q;var _e=vt(29,Q,null,S.mode);return _e.lanes=C,_e.return=S,_e}finally{}}}var ln=_o(!0),ho=_o(!1),Ta=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Da(e,t,a){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(ve&2)!==0){var l=n.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),n.pending=t,t=pr(e),Fs(e,null,a),t}return hr(e,n,t,a),pr(e)}function Sl(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,rs(e,a)}}function mc(e,t){var a=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var l=null,u=null;if(a=a.firstBaseUpdate,a!==null){do{var f={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};u===null?l=u=f:u=u.next=f,a=a.next}while(a!==null);u===null?l=u=t:u=u.next=t}else l=u=t;a={baseState:n.baseState,firstBaseUpdate:l,lastBaseUpdate:u,shared:n.shared,callbacks:n.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var _c=!1;function wl(){if(_c){var e=zn;if(e!==null)throw e}}function jl(e,t,a,n){_c=!1;var l=e.updateQueue;Ta=!1;var u=l.firstBaseUpdate,f=l.lastBaseUpdate,m=l.shared.pending;if(m!==null){l.shared.pending=null;var v=m,E=v.next;v.next=null,f===null?u=E:f.next=E,f=v;var D=e.alternate;D!==null&&(D=D.updateQueue,m=D.lastBaseUpdate,m!==f&&(m===null?D.firstBaseUpdate=E:m.next=E,D.lastBaseUpdate=v))}if(u!==null){var O=l.baseState;f=0,D=E=v=null,m=u;do{var q=m.lane&-536870913,A=q!==m.lane;if(A?(ue&q)===q:(n&q)===q){q!==0&&q===Mn&&(_c=!0),D!==null&&(D=D.next={lane:0,tag:m.tag,payload:m.payload,callback:null,next:null});e:{var Y=e,$=m;q=t;var Te=a;switch($.tag){case 1:if(Y=$.payload,typeof Y=="function"){O=Y.call(Te,O,q);break e}O=Y;break e;case 3:Y.flags=Y.flags&-65537|128;case 0:if(Y=$.payload,q=typeof Y=="function"?Y.call(Te,O,q):Y,q==null)break e;O=z({},O,q);break e;case 2:Ta=!0}}q=m.callback,q!==null&&(e.flags|=64,A&&(e.flags|=8192),A=l.callbacks,A===null?l.callbacks=[q]:A.push(q))}else A={lane:q,tag:m.tag,payload:m.payload,callback:m.callback,next:null},D===null?(E=D=A,v=O):D=D.next=A,f|=q;if(m=m.next,m===null){if(m=l.shared.pending,m===null)break;A=m,m=A.next,A.next=null,l.lastBaseUpdate=A,l.shared.pending=null}}while(!0);D===null&&(v=O),l.baseState=v,l.firstBaseUpdate=E,l.lastBaseUpdate=D,u===null&&(l.shared.lanes=0),za|=f,e.lanes=f,e.memoizedState=O}}function po(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function go(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)po(a[e],t)}var Un=He(null),Tr=He(0);function yo(e,t){e=_a,N(Tr,e),N(Un,t),_a=e|t.baseLanes}function hc(){N(Tr,_a),N(Un,Un.current)}function pc(){_a=Tr.current,je(Un),je(Tr)}var bt=He(null),xt=null;function Ca(e){var t=e.alternate;N(Ue,Ue.current&1),N(bt,e),xt===null&&(t===null||Un.current!==null||t.memoizedState!==null)&&(xt=e)}function gc(e){N(Ue,Ue.current),N(bt,e),xt===null&&(xt=e)}function vo(e){e.tag===22?(N(Ue,Ue.current),N(bt,e),xt===null&&(xt=e)):Oa()}function Oa(){N(Ue,Ue.current),N(bt,bt.current)}function St(e){je(bt),xt===e&&(xt=null),je(Ue)}var Ue=He(0);function Ar(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ju(a)||Eu(a)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ia=0,ee=null,Ee=null,Ye=null,Dr=!1,Bn=!1,rn=!1,Cr=0,El=0,kn=null,Y_=0;function Me(){throw Error(s(321))}function yc(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!yt(e[a],t[a]))return!1;return!0}function vc(e,t,a,n,l,u){return ia=u,ee=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,T.H=e===null||e.memoizedState===null?af:xc,rn=!1,u=a(n,l),rn=!1,Bn&&(u=So(t,a,n,l)),bo(e),u}function bo(e){T.H=Al;var t=Ee!==null&&Ee.next!==null;if(ia=0,Ye=Ee=ee=null,Dr=!1,El=0,kn=null,t)throw Error(s(300));e===null||Ge||(e=e.dependencies,e!==null&&vr(e)&&(Ge=!0))}function So(e,t,a,n){ee=e;var l=0;do{if(Bn&&(kn=null),El=0,Bn=!1,25<=l)throw Error(s(301));if(l+=1,Ye=Ee=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}T.H=nf,u=t(a,n)}while(Bn);return u}function G_(){var e=T.H,t=e.useState()[0];return t=typeof t.then=="function"?ql(t):t,e=e.useState()[0],(Ee!==null?Ee.memoizedState:null)!==e&&(ee.flags|=1024),t}function bc(){var e=Cr!==0;return Cr=0,e}function Sc(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function wc(e){if(Dr){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Dr=!1}ia=0,Ye=Ee=ee=null,Bn=!1,El=Cr=0,kn=null}function ct(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?ee.memoizedState=Ye=e:Ye=Ye.next=e,Ye}function Be(){if(Ee===null){var e=ee.alternate;e=e!==null?e.memoizedState:null}else e=Ee.next;var t=Ye===null?ee.memoizedState:Ye.next;if(t!==null)Ye=t,Ee=e;else{if(e===null)throw ee.alternate===null?Error(s(467)):Error(s(310));Ee=e,e={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Ye===null?ee.memoizedState=Ye=e:Ye=Ye.next=e}return Ye}function Or(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(e){var t=El;return El+=1,kn===null&&(kn=[]),e=oo(kn,e,t),t=ee,(Ye===null?t.memoizedState:Ye.next)===null&&(t=t.alternate,T.H=t===null||t.memoizedState===null?af:xc),e}function Nr(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ql(e);if(e.$$typeof===I)return at(e)}throw Error(s(438,String(e)))}function jc(e){var t=null,a=ee.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var n=ee.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(t={data:n.data.map(function(l){return l.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Or(),ee.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),n=0;n<e;n++)a[n]=Lt;return t.index++,a}function ca(e,t){return typeof t=="function"?t(e):t}function Mr(e){var t=Be();return Ec(t,Ee,e)}function Ec(e,t,a){var n=e.queue;if(n===null)throw Error(s(311));n.lastRenderedReducer=a;var l=e.baseQueue,u=n.pending;if(u!==null){if(l!==null){var f=l.next;l.next=u.next,u.next=f}t.baseQueue=l=u,n.pending=null}if(u=e.baseState,l===null)e.memoizedState=u;else{t=l.next;var m=f=null,v=null,E=t,D=!1;do{var O=E.lane&-536870913;if(O!==E.lane?(ue&O)===O:(ia&O)===O){var q=E.revertLane;if(q===0)v!==null&&(v=v.next={lane:0,revertLane:0,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null}),O===Mn&&(D=!0);else if((ia&q)===q){E=E.next,q===Mn&&(D=!0);continue}else O={lane:0,revertLane:E.revertLane,gesture:null,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},v===null?(m=v=O,f=u):v=v.next=O,ee.lanes|=q,za|=q;O=E.action,rn&&a(u,O),u=E.hasEagerState?E.eagerState:a(u,O)}else q={lane:O,revertLane:E.revertLane,gesture:E.gesture,action:E.action,hasEagerState:E.hasEagerState,eagerState:E.eagerState,next:null},v===null?(m=v=q,f=u):v=v.next=q,ee.lanes|=O,za|=O;E=E.next}while(E!==null&&E!==t);if(v===null?f=u:v.next=m,!yt(u,e.memoizedState)&&(Ge=!0,D&&(a=zn,a!==null)))throw a;e.memoizedState=u,e.baseState=f,e.baseQueue=v,n.lastRenderedState=u}return l===null&&(n.lanes=0),[e.memoizedState,n.dispatch]}function qc(e){var t=Be(),a=t.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var n=a.dispatch,l=a.pending,u=t.memoizedState;if(l!==null){a.pending=null;var f=l=l.next;do u=e(u,f.action),f=f.next;while(f!==l);yt(u,t.memoizedState)||(Ge=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),a.lastRenderedState=u}return[u,n]}function wo(e,t,a){var n=ee,l=Be(),u=fe;if(u){if(a===void 0)throw Error(s(407));a=a()}else a=t();var f=!yt((Ee||l).memoizedState,a);if(f&&(l.memoizedState=a,Ge=!0),l=l.queue,Dc(qo.bind(null,n,l,e),[e]),l.getSnapshot!==t||f||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Hn(9,{destroy:void 0},Eo.bind(null,n,l,a,t),null),Ae===null)throw Error(s(349));u||(ia&127)!==0||jo(n,t,a)}return a}function jo(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=ee.updateQueue,t===null?(t=Or(),ee.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Eo(e,t,a,n){t.value=a,t.getSnapshot=n,To(t)&&Ao(e)}function qo(e,t,a){return a(function(){To(t)&&Ao(e)})}function To(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!yt(e,a)}catch{return!0}}function Ao(e){var t=Wa(e,2);t!==null&&_t(t,e,2)}function Tc(e){var t=ct();if(typeof e=="function"){var a=e;if(e=a(),rn){va(!0);try{a()}finally{va(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:e},t}function Do(e,t,a,n){return e.baseState=a,Ec(e,Ee,typeof n=="function"?n:ca)}function Q_(e,t,a,n,l){if(Rr(e))throw Error(s(485));if(e=t.action,e!==null){var u={payload:l,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(f){u.listeners.push(f)}};T.T!==null?a(!0):u.isTransition=!1,n(u),a=t.pending,a===null?(u.next=t.pending=u,Co(t,u)):(u.next=a.next,t.pending=a.next=u)}}function Co(e,t){var a=t.action,n=t.payload,l=e.state;if(t.isTransition){var u=T.T,f={};T.T=f;try{var m=a(l,n),v=T.S;v!==null&&v(f,m),Oo(e,t,m)}catch(E){Ac(e,t,E)}finally{u!==null&&f.types!==null&&(u.types=f.types),T.T=u}}else try{u=a(l,n),Oo(e,t,u)}catch(E){Ac(e,t,E)}}function Oo(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){No(e,t,n)},function(n){return Ac(e,t,n)}):No(e,t,a)}function No(e,t,a){t.status="fulfilled",t.value=a,Mo(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Co(e,a)))}function Ac(e,t,a){var n=e.pending;if(e.pending=null,n!==null){n=n.next;do t.status="rejected",t.reason=a,Mo(t),t=t.next;while(t!==n)}e.action=null}function Mo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function zo(e,t){return t}function xo(e,t){if(fe){var a=Ae.formState;if(a!==null){e:{var n=ee;if(fe){if(Ce){t:{for(var l=Ce,u=zt;l.nodeType!==8;){if(!u){l=null;break t}if(l=Rt(l.nextSibling),l===null){l=null;break t}}u=l.data,l=u==="F!"||u==="F"?l:null}if(l){Ce=Rt(l.nextSibling),n=l.data==="F!";break e}}Ea(n)}n=!1}n&&(t=a[0])}}return a=ct(),a.memoizedState=a.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:t},a.queue=n,a=Io.bind(null,ee,n),n.dispatch=a,n=Tc(!1),u=zc.bind(null,ee,!1,n.queue),n=ct(),l={state:t,dispatch:null,action:e,pending:null},n.queue=l,a=Q_.bind(null,ee,l,u,a),l.dispatch=a,n.memoizedState=e,[t,a,!1]}function Ro(e){var t=Be();return Uo(t,Ee,e)}function Uo(e,t,a){if(t=Ec(e,t,zo)[0],e=Mr(ca)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var n=ql(t)}catch(f){throw f===xn?wr:f}else n=t;t=Be();var l=t.queue,u=l.dispatch;return a!==t.memoizedState&&(ee.flags|=2048,Hn(9,{destroy:void 0},X_.bind(null,l,a),null)),[n,u,e]}function X_(e,t){e.action=t}function Bo(e){var t=Be(),a=Ee;if(a!==null)return Uo(t,a,e);Be(),t=t.memoizedState,a=Be();var n=a.queue.dispatch;return a.memoizedState=e,[t,n,!1]}function Hn(e,t,a,n){return e={tag:e,create:a,deps:n,inst:t,next:null},t=ee.updateQueue,t===null&&(t=Or(),ee.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(n=a.next,a.next=e,e.next=n,t.lastEffect=e),e}function ko(){return Be().memoizedState}function zr(e,t,a,n){var l=ct();ee.flags|=e,l.memoizedState=Hn(1|t,{destroy:void 0},a,n===void 0?null:n)}function xr(e,t,a,n){var l=Be();n=n===void 0?null:n;var u=l.memoizedState.inst;Ee!==null&&n!==null&&yc(n,Ee.memoizedState.deps)?l.memoizedState=Hn(t,u,a,n):(ee.flags|=e,l.memoizedState=Hn(1|t,u,a,n))}function Ho(e,t){zr(8390656,8,e,t)}function Dc(e,t){xr(2048,8,e,t)}function Z_(e){ee.flags|=4;var t=ee.updateQueue;if(t===null)t=Or(),ee.updateQueue=t,t.events=[e];else{var a=t.events;a===null?t.events=[e]:a.push(e)}}function Lo(e){var t=Be().memoizedState;return Z_({ref:t,nextImpl:e}),function(){if((ve&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function Yo(e,t){return xr(4,2,e,t)}function Go(e,t){return xr(4,4,e,t)}function Qo(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xo(e,t,a){a=a!=null?a.concat([e]):null,xr(4,4,Qo.bind(null,t,e),a)}function Cc(){}function Zo(e,t){var a=Be();t=t===void 0?null:t;var n=a.memoizedState;return t!==null&&yc(t,n[1])?n[0]:(a.memoizedState=[e,t],e)}function Vo(e,t){var a=Be();t=t===void 0?null:t;var n=a.memoizedState;if(t!==null&&yc(t,n[1]))return n[0];if(n=e(),rn){va(!0);try{e()}finally{va(!1)}}return a.memoizedState=[n,t],n}function Oc(e,t,a){return a===void 0||(ia&1073741824)!==0&&(ue&261930)===0?e.memoizedState=t:(e.memoizedState=a,e=Jf(),ee.lanes|=e,za|=e,a)}function Ko(e,t,a,n){return yt(a,t)?a:Un.current!==null?(e=Oc(e,a,n),yt(e,t)||(Ge=!0),e):(ia&42)===0||(ia&1073741824)!==0&&(ue&261930)===0?(Ge=!0,e.memoizedState=a):(e=Jf(),ee.lanes|=e,za|=e,t)}function Jo(e,t,a,n,l){var u=B.p;B.p=u!==0&&8>u?u:8;var f=T.T,m={};T.T=m,zc(e,!1,t,a);try{var v=l(),E=T.S;if(E!==null&&E(m,v),v!==null&&typeof v=="object"&&typeof v.then=="function"){var D=L_(v,n);Tl(e,t,D,Et(e))}else Tl(e,t,n,Et(e))}catch(O){Tl(e,t,{then:function(){},status:"rejected",reason:O},Et())}finally{B.p=u,f!==null&&m.types!==null&&(f.types=m.types),T.T=f}}function V_(){}function Nc(e,t,a,n){if(e.tag!==5)throw Error(s(476));var l=$o(e).queue;Jo(e,l,t,L,a===null?V_:function(){return Wo(e),a(n)})}function $o(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:L},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Wo(e){var t=$o(e);t.next===null&&(t=e.alternate.memoizedState),Tl(e,t.next.queue,{},Et())}function Mc(){return at(Ql)}function Fo(){return Be().memoizedState}function Po(){return Be().memoizedState}function K_(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Et();e=Aa(a);var n=Da(t,e,a);n!==null&&(_t(n,t,a),Sl(n,t,a)),t={cache:cc()},e.payload=t;return}t=t.return}}function J_(e,t,a){var n=Et();a={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Rr(e)?ef(t,a):(a=Wi(e,t,a,n),a!==null&&(_t(a,e,n),tf(a,t,n)))}function Io(e,t,a){var n=Et();Tl(e,t,a,n)}function Tl(e,t,a,n){var l={lane:n,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rr(e))ef(t,l);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var f=t.lastRenderedState,m=u(f,a);if(l.hasEagerState=!0,l.eagerState=m,yt(m,f))return hr(e,t,l,0),Ae===null&&_r(),!1}catch{}finally{}if(a=Wi(e,t,l,n),a!==null)return _t(a,e,n),tf(a,t,n),!0}return!1}function zc(e,t,a,n){if(n={lane:2,revertLane:fu(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Rr(e)){if(t)throw Error(s(479))}else t=Wi(e,a,n,2),t!==null&&_t(t,e,2)}function Rr(e){var t=e.alternate;return e===ee||t!==null&&t===ee}function ef(e,t){Bn=Dr=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function tf(e,t,a){if((a&4194048)!==0){var n=t.lanes;n&=e.pendingLanes,a|=n,t.lanes=a,rs(e,a)}}var Al={readContext:at,use:Nr,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useLayoutEffect:Me,useInsertionEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useSyncExternalStore:Me,useId:Me,useHostTransitionStatus:Me,useFormState:Me,useActionState:Me,useOptimistic:Me,useMemoCache:Me,useCacheRefresh:Me};Al.useEffectEvent=Me;var af={readContext:at,use:Nr,useCallback:function(e,t){return ct().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:Ho,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,zr(4194308,4,Qo.bind(null,t,e),a)},useLayoutEffect:function(e,t){return zr(4194308,4,e,t)},useInsertionEffect:function(e,t){zr(4,2,e,t)},useMemo:function(e,t){var a=ct();t=t===void 0?null:t;var n=e();if(rn){va(!0);try{e()}finally{va(!1)}}return a.memoizedState=[n,t],n},useReducer:function(e,t,a){var n=ct();if(a!==void 0){var l=a(t);if(rn){va(!0);try{a(t)}finally{va(!1)}}}else l=t;return n.memoizedState=n.baseState=l,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:l},n.queue=e,e=e.dispatch=J_.bind(null,ee,e),[n.memoizedState,e]},useRef:function(e){var t=ct();return e={current:e},t.memoizedState=e},useState:function(e){e=Tc(e);var t=e.queue,a=Io.bind(null,ee,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Cc,useDeferredValue:function(e,t){var a=ct();return Oc(a,e,t)},useTransition:function(){var e=Tc(!1);return e=Jo.bind(null,ee,e.queue,!0,!1),ct().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var n=ee,l=ct();if(fe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=t(),Ae===null)throw Error(s(349));(ue&127)!==0||jo(n,t,a)}l.memoizedState=a;var u={value:a,getSnapshot:t};return l.queue=u,Ho(qo.bind(null,n,u,e),[e]),n.flags|=2048,Hn(9,{destroy:void 0},Eo.bind(null,n,u,a,t),null),a},useId:function(){var e=ct(),t=Ae.identifierPrefix;if(fe){var a=$t,n=Jt;a=(n&~(1<<32-gt(n)-1)).toString(32)+a,t="_"+t+"R_"+a,a=Cr++,0<a&&(t+="H"+a.toString(32)),t+="_"}else a=Y_++,t="_"+t+"r_"+a.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Mc,useFormState:xo,useActionState:xo,useOptimistic:function(e){var t=ct();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=zc.bind(null,ee,!0,a),a.dispatch=t,[e,t]},useMemoCache:jc,useCacheRefresh:function(){return ct().memoizedState=K_.bind(null,ee)},useEffectEvent:function(e){var t=ct(),a={impl:e};return t.memoizedState=a,function(){if((ve&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},xc={readContext:at,use:Nr,useCallback:Zo,useContext:at,useEffect:Dc,useImperativeHandle:Xo,useInsertionEffect:Yo,useLayoutEffect:Go,useMemo:Vo,useReducer:Mr,useRef:ko,useState:function(){return Mr(ca)},useDebugValue:Cc,useDeferredValue:function(e,t){var a=Be();return Ko(a,Ee.memoizedState,e,t)},useTransition:function(){var e=Mr(ca)[0],t=Be().memoizedState;return[typeof e=="boolean"?e:ql(e),t]},useSyncExternalStore:wo,useId:Fo,useHostTransitionStatus:Mc,useFormState:Ro,useActionState:Ro,useOptimistic:function(e,t){var a=Be();return Do(a,Ee,e,t)},useMemoCache:jc,useCacheRefresh:Po};xc.useEffectEvent=Lo;var nf={readContext:at,use:Nr,useCallback:Zo,useContext:at,useEffect:Dc,useImperativeHandle:Xo,useInsertionEffect:Yo,useLayoutEffect:Go,useMemo:Vo,useReducer:qc,useRef:ko,useState:function(){return qc(ca)},useDebugValue:Cc,useDeferredValue:function(e,t){var a=Be();return Ee===null?Oc(a,e,t):Ko(a,Ee.memoizedState,e,t)},useTransition:function(){var e=qc(ca)[0],t=Be().memoizedState;return[typeof e=="boolean"?e:ql(e),t]},useSyncExternalStore:wo,useId:Fo,useHostTransitionStatus:Mc,useFormState:Bo,useActionState:Bo,useOptimistic:function(e,t){var a=Be();return Ee!==null?Do(a,Ee,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:jc,useCacheRefresh:Po};nf.useEffectEvent=Lo;function Rc(e,t,a,n){t=e.memoizedState,a=a(n,t),a=a==null?t:z({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Uc={enqueueSetState:function(e,t,a){e=e._reactInternals;var n=Et(),l=Aa(n);l.payload=t,a!=null&&(l.callback=a),t=Da(e,l,n),t!==null&&(_t(t,e,n),Sl(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var n=Et(),l=Aa(n);l.tag=1,l.payload=t,a!=null&&(l.callback=a),t=Da(e,l,n),t!==null&&(_t(t,e,n),Sl(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Et(),n=Aa(a);n.tag=2,t!=null&&(n.callback=t),t=Da(e,n,a),t!==null&&(_t(t,e,a),Sl(t,e,a))}};function lf(e,t,a,n,l,u,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,u,f):t.prototype&&t.prototype.isPureReactComponent?!ml(a,n)||!ml(l,u):!0}function rf(e,t,a,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,n),t.state!==e&&Uc.enqueueReplaceState(t,t.state,null)}function cn(e,t){var a=t;if("ref"in t){a={};for(var n in t)n!=="ref"&&(a[n]=t[n])}if(e=e.defaultProps){a===t&&(a=z({},a));for(var l in e)a[l]===void 0&&(a[l]=e[l])}return a}function cf(e){mr(e)}function uf(e){console.error(e)}function sf(e){mr(e)}function Ur(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function of(e,t,a){try{var n=e.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(l){setTimeout(function(){throw l})}}function Bc(e,t,a){return a=Aa(a),a.tag=3,a.payload={element:null},a.callback=function(){Ur(e,t)},a}function ff(e){return e=Aa(e),e.tag=3,e}function df(e,t,a,n){var l=a.type.getDerivedStateFromError;if(typeof l=="function"){var u=n.value;e.payload=function(){return l(u)},e.callback=function(){of(t,a,n)}}var f=a.stateNode;f!==null&&typeof f.componentDidCatch=="function"&&(e.callback=function(){of(t,a,n),typeof l!="function"&&(xa===null?xa=new Set([this]):xa.add(this));var m=n.stack;this.componentDidCatch(n.value,{componentStack:m!==null?m:""})})}function $_(e,t,a,n,l){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(t=a.alternate,t!==null&&Nn(t,a,l,!0),a=bt.current,a!==null){switch(a.tag){case 31:case 13:return xt===null?Jr():a.alternate===null&&ze===0&&(ze=3),a.flags&=-257,a.flags|=65536,a.lanes=l,n===jr?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([n]):t.add(n),uu(e,n,l)),!1;case 22:return a.flags|=65536,n===jr?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([n]):a.add(n)),uu(e,n,l)),!1}throw Error(s(435,a.tag))}return uu(e,n,l),Jr(),!1}if(fe)return t=bt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=l,n!==ac&&(e=Error(s(422),{cause:n}),pl(Ot(e,a)))):(n!==ac&&(t=Error(s(423),{cause:n}),pl(Ot(t,a))),e=e.current.alternate,e.flags|=65536,l&=-l,e.lanes|=l,n=Ot(n,a),l=Bc(e.stateNode,n,l),mc(e,l),ze!==4&&(ze=2)),!1;var u=Error(s(520),{cause:n});if(u=Ot(u,a),Rl===null?Rl=[u]:Rl.push(u),ze!==4&&(ze=2),t===null)return!0;n=Ot(n,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=l&-l,a.lanes|=e,e=Bc(a.stateNode,n,e),mc(a,e),!1;case 1:if(t=a.type,u=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(xa===null||!xa.has(u))))return a.flags|=65536,l&=-l,a.lanes|=l,l=ff(l),df(l,e,a,n),mc(a,l),!1}a=a.return}while(a!==null);return!1}var kc=Error(s(461)),Ge=!1;function nt(e,t,a,n){t.child=e===null?ho(t,null,a,n):ln(t,e.child,a,n)}function mf(e,t,a,n,l){a=a.render;var u=t.ref;if("ref"in n){var f={};for(var m in n)m!=="ref"&&(f[m]=n[m])}else f=n;return en(t),n=vc(e,t,a,f,u,l),m=bc(),e!==null&&!Ge?(Sc(e,t,l),ua(e,t,l)):(fe&&m&&ec(t),t.flags|=1,nt(e,t,n,l),t.child)}function _f(e,t,a,n,l){if(e===null){var u=a.type;return typeof u=="function"&&!Fi(u)&&u.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=u,hf(e,t,u,n,l)):(e=gr(a.type,null,n,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!Vc(e,l)){var f=u.memoizedProps;if(a=a.compare,a=a!==null?a:ml,a(f,n)&&e.ref===t.ref)return ua(e,t,l)}return t.flags|=1,e=aa(u,n),e.ref=t.ref,e.return=t,t.child=e}function hf(e,t,a,n,l){if(e!==null){var u=e.memoizedProps;if(ml(u,n)&&e.ref===t.ref)if(Ge=!1,t.pendingProps=n=u,Vc(e,l))(e.flags&131072)!==0&&(Ge=!0);else return t.lanes=e.lanes,ua(e,t,l)}return Hc(e,t,a,n,l)}function pf(e,t,a,n){var l=n.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|a:a,e!==null){for(n=t.child=e.child,l=0;n!==null;)l=l|n.lanes|n.childLanes,n=n.sibling;n=l&~u}else n=0,t.child=null;return gf(e,t,u,a,n)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Sr(t,u!==null?u.cachePool:null),u!==null?yo(t,u):hc(),vo(t);else return n=t.lanes=536870912,gf(e,t,u!==null?u.baseLanes|a:a,a,n)}else u!==null?(Sr(t,u.cachePool),yo(t,u),Oa(),t.memoizedState=null):(e!==null&&Sr(t,null),hc(),Oa());return nt(e,t,l,a),t.child}function Dl(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function gf(e,t,a,n,l){var u=sc();return u=u===null?null:{parent:Le._currentValue,pool:u},t.memoizedState={baseLanes:a,cachePool:u},e!==null&&Sr(t,null),hc(),vo(t),e!==null&&Nn(e,t,n,!0),t.childLanes=l,null}function Br(e,t){return t=Hr({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function yf(e,t,a){return ln(t,e.child,null,a),e=Br(t,t.pendingProps),e.flags|=2,St(t),t.memoizedState=null,e}function W_(e,t,a){var n=t.pendingProps,l=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(fe){if(n.mode==="hidden")return e=Br(t,n),t.lanes=536870912,Dl(null,e);if(gc(t),(e=Ce)?(e=Od(e,zt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wa!==null?{id:Jt,overflow:$t}:null,retryLane:536870912,hydrationErrors:null},a=Is(e),a.return=t,t.child=a,tt=t,Ce=null)):e=null,e===null)throw Ea(t);return t.lanes=536870912,null}return Br(t,n)}var u=e.memoizedState;if(u!==null){var f=u.dehydrated;if(gc(t),l)if(t.flags&256)t.flags&=-257,t=yf(e,t,a);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Ge||Nn(e,t,a,!1),l=(a&e.childLanes)!==0,Ge||l){if(n=Ae,n!==null&&(f=is(n,a),f!==0&&f!==u.retryLane))throw u.retryLane=f,Wa(e,f),_t(n,e,f),kc;Jr(),t=yf(e,t,a)}else e=u.treeContext,Ce=Rt(f.nextSibling),tt=t,fe=!0,ja=null,zt=!1,e!==null&&ao(t,e),t=Br(t,n),t.flags|=4096;return t}return e=aa(e.child,{mode:n.mode,children:n.children}),e.ref=t.ref,t.child=e,e.return=t,e}function kr(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Hc(e,t,a,n,l){return en(t),a=vc(e,t,a,n,void 0,l),n=bc(),e!==null&&!Ge?(Sc(e,t,l),ua(e,t,l)):(fe&&n&&ec(t),t.flags|=1,nt(e,t,a,l),t.child)}function vf(e,t,a,n,l,u){return en(t),t.updateQueue=null,a=So(t,n,a,l),bo(e),n=bc(),e!==null&&!Ge?(Sc(e,t,u),ua(e,t,u)):(fe&&n&&ec(t),t.flags|=1,nt(e,t,a,u),t.child)}function bf(e,t,a,n,l){if(en(t),t.stateNode===null){var u=An,f=a.contextType;typeof f=="object"&&f!==null&&(u=at(f)),u=new a(n,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Uc,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=n,u.state=t.memoizedState,u.refs={},fc(t),f=a.contextType,u.context=typeof f=="object"&&f!==null?at(f):An,u.state=t.memoizedState,f=a.getDerivedStateFromProps,typeof f=="function"&&(Rc(t,a,f,n),u.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(f=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),f!==u.state&&Uc.enqueueReplaceState(u,u.state,null),jl(t,n,u,l),wl(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!0}else if(e===null){u=t.stateNode;var m=t.memoizedProps,v=cn(a,m);u.props=v;var E=u.context,D=a.contextType;f=An,typeof D=="object"&&D!==null&&(f=at(D));var O=a.getDerivedStateFromProps;D=typeof O=="function"||typeof u.getSnapshotBeforeUpdate=="function",m=t.pendingProps!==m,D||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m||E!==f)&&rf(t,u,n,f),Ta=!1;var q=t.memoizedState;u.state=q,jl(t,n,u,l),wl(),E=t.memoizedState,m||q!==E||Ta?(typeof O=="function"&&(Rc(t,a,O,n),E=t.memoizedState),(v=Ta||lf(t,a,v,n,q,E,f))?(D||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=E),u.props=n,u.state=E,u.context=f,n=v):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{u=t.stateNode,dc(e,t),f=t.memoizedProps,D=cn(a,f),u.props=D,O=t.pendingProps,q=u.context,E=a.contextType,v=An,typeof E=="object"&&E!==null&&(v=at(E)),m=a.getDerivedStateFromProps,(E=typeof m=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(f!==O||q!==v)&&rf(t,u,n,v),Ta=!1,q=t.memoizedState,u.state=q,jl(t,n,u,l),wl();var A=t.memoizedState;f!==O||q!==A||Ta||e!==null&&e.dependencies!==null&&vr(e.dependencies)?(typeof m=="function"&&(Rc(t,a,m,n),A=t.memoizedState),(D=Ta||lf(t,a,D,n,q,A,v)||e!==null&&e.dependencies!==null&&vr(e.dependencies))?(E||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(n,A,v),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(n,A,v)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=A),u.props=n,u.state=A,u.context=v,n=D):(typeof u.componentDidUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||f===e.memoizedProps&&q===e.memoizedState||(t.flags|=1024),n=!1)}return u=n,kr(e,t),n=(t.flags&128)!==0,u||n?(u=t.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&n?(t.child=ln(t,e.child,null,l),t.child=ln(t,null,a,l)):nt(e,t,a,l),t.memoizedState=u.state,e=t.child):e=ua(e,t,l),e}function Sf(e,t,a,n){return Pa(),t.flags|=256,nt(e,t,a,n),t.child}var Lc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yc(e){return{baseLanes:e,cachePool:uo()}}function Gc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=jt),e}function wf(e,t,a){var n=t.pendingProps,l=!1,u=(t.flags&128)!==0,f;if((f=u)||(f=e!==null&&e.memoizedState===null?!1:(Ue.current&2)!==0),f&&(l=!0,t.flags&=-129),f=(t.flags&32)!==0,t.flags&=-33,e===null){if(fe){if(l?Ca(t):Oa(),(e=Ce)?(e=Od(e,zt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wa!==null?{id:Jt,overflow:$t}:null,retryLane:536870912,hydrationErrors:null},a=Is(e),a.return=t,t.child=a,tt=t,Ce=null)):e=null,e===null)throw Ea(t);return Eu(e)?t.lanes=32:t.lanes=536870912,null}var m=n.children;return n=n.fallback,l?(Oa(),l=t.mode,m=Hr({mode:"hidden",children:m},l),n=Fa(n,l,a,null),m.return=t,n.return=t,m.sibling=n,t.child=m,n=t.child,n.memoizedState=Yc(a),n.childLanes=Gc(e,f,a),t.memoizedState=Lc,Dl(null,n)):(Ca(t),Qc(t,m))}var v=e.memoizedState;if(v!==null&&(m=v.dehydrated,m!==null)){if(u)t.flags&256?(Ca(t),t.flags&=-257,t=Xc(e,t,a)):t.memoizedState!==null?(Oa(),t.child=e.child,t.flags|=128,t=null):(Oa(),m=n.fallback,l=t.mode,n=Hr({mode:"visible",children:n.children},l),m=Fa(m,l,a,null),m.flags|=2,n.return=t,m.return=t,n.sibling=m,t.child=n,ln(t,e.child,null,a),n=t.child,n.memoizedState=Yc(a),n.childLanes=Gc(e,f,a),t.memoizedState=Lc,t=Dl(null,n));else if(Ca(t),Eu(m)){if(f=m.nextSibling&&m.nextSibling.dataset,f)var E=f.dgst;f=E,n=Error(s(419)),n.stack="",n.digest=f,pl({value:n,source:null,stack:null}),t=Xc(e,t,a)}else if(Ge||Nn(e,t,a,!1),f=(a&e.childLanes)!==0,Ge||f){if(f=Ae,f!==null&&(n=is(f,a),n!==0&&n!==v.retryLane))throw v.retryLane=n,Wa(e,n),_t(f,e,n),kc;ju(m)||Jr(),t=Xc(e,t,a)}else ju(m)?(t.flags|=192,t.child=e.child,t=null):(e=v.treeContext,Ce=Rt(m.nextSibling),tt=t,fe=!0,ja=null,zt=!1,e!==null&&ao(t,e),t=Qc(t,n.children),t.flags|=4096);return t}return l?(Oa(),m=n.fallback,l=t.mode,v=e.child,E=v.sibling,n=aa(v,{mode:"hidden",children:n.children}),n.subtreeFlags=v.subtreeFlags&65011712,E!==null?m=aa(E,m):(m=Fa(m,l,a,null),m.flags|=2),m.return=t,n.return=t,n.sibling=m,t.child=n,Dl(null,n),n=t.child,m=e.child.memoizedState,m===null?m=Yc(a):(l=m.cachePool,l!==null?(v=Le._currentValue,l=l.parent!==v?{parent:v,pool:v}:l):l=uo(),m={baseLanes:m.baseLanes|a,cachePool:l}),n.memoizedState=m,n.childLanes=Gc(e,f,a),t.memoizedState=Lc,Dl(e.child,n)):(Ca(t),a=e.child,e=a.sibling,a=aa(a,{mode:"visible",children:n.children}),a.return=t,a.sibling=null,e!==null&&(f=t.deletions,f===null?(t.deletions=[e],t.flags|=16):f.push(e)),t.child=a,t.memoizedState=null,a)}function Qc(e,t){return t=Hr({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Hr(e,t){return e=vt(22,e,null,t),e.lanes=0,e}function Xc(e,t,a){return ln(t,e.child,null,a),e=Qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jf(e,t,a){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),rc(e.return,t,a)}function Zc(e,t,a,n,l,u){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:l,treeForkCount:u}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=n,f.tail=a,f.tailMode=l,f.treeForkCount=u)}function Ef(e,t,a){var n=t.pendingProps,l=n.revealOrder,u=n.tail;n=n.children;var f=Ue.current,m=(f&2)!==0;if(m?(f=f&1|2,t.flags|=128):f&=1,N(Ue,f),nt(e,t,n,a),n=fe?hl:0,!m&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&jf(e,a,t);else if(e.tag===19)jf(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(l){case"forwards":for(a=t.child,l=null;a!==null;)e=a.alternate,e!==null&&Ar(e)===null&&(l=a),a=a.sibling;a=l,a===null?(l=t.child,t.child=null):(l=a.sibling,a.sibling=null),Zc(t,!1,l,a,u,n);break;case"backwards":case"unstable_legacy-backwards":for(a=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ar(e)===null){t.child=l;break}e=l.sibling,l.sibling=a,a=l,l=e}Zc(t,!0,a,null,u,n);break;case"together":Zc(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function ua(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),za|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(Nn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,a=aa(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=aa(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Vc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&vr(e)))}function F_(e,t,a){switch(t.tag){case 3:oe(t,t.stateNode.containerInfo),qa(t,Le,e.memoizedState.cache),Pa();break;case 27:case 5:Ze(t);break;case 4:oe(t,t.stateNode.containerInfo);break;case 10:qa(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,gc(t),null;break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ca(t),t.flags|=128,null):(a&t.child.childLanes)!==0?wf(e,t,a):(Ca(t),e=ua(e,t,a),e!==null?e.sibling:null);Ca(t);break;case 19:var l=(e.flags&128)!==0;if(n=(a&t.childLanes)!==0,n||(Nn(e,t,a,!1),n=(a&t.childLanes)!==0),l){if(n)return Ef(e,t,a);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),N(Ue,Ue.current),n)break;return null;case 22:return t.lanes=0,pf(e,t,a,t.pendingProps);case 24:qa(t,Le,e.memoizedState.cache)}return ua(e,t,a)}function qf(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ge=!0;else{if(!Vc(e,a)&&(t.flags&128)===0)return Ge=!1,F_(e,t,a);Ge=(e.flags&131072)!==0}else Ge=!1,fe&&(t.flags&1048576)!==0&&to(t,hl,t.index);switch(t.lanes=0,t.tag){case 16:e:{var n=t.pendingProps;if(e=an(t.elementType),t.type=e,typeof e=="function")Fi(e)?(n=cn(e,n),t.tag=1,t=bf(null,t,e,n,a)):(t.tag=0,t=Hc(null,t,e,n,a));else{if(e!=null){var l=e.$$typeof;if(l===P){t.tag=11,t=mf(null,t,e,n,a);break e}else if(l===Xe){t.tag=14,t=_f(null,t,e,n,a);break e}}throw t=x(e)||e,Error(s(306,t,""))}}return t;case 0:return Hc(e,t,t.type,t.pendingProps,a);case 1:return n=t.type,l=cn(n,t.pendingProps),bf(e,t,n,l,a);case 3:e:{if(oe(t,t.stateNode.containerInfo),e===null)throw Error(s(387));n=t.pendingProps;var u=t.memoizedState;l=u.element,dc(e,t),jl(t,n,null,a);var f=t.memoizedState;if(n=f.cache,qa(t,Le,n),n!==u.cache&&ic(t,[Le],a,!0),wl(),n=f.element,u.isDehydrated)if(u={element:n,isDehydrated:!1,cache:f.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Sf(e,t,n,a);break e}else if(n!==l){l=Ot(Error(s(424)),t),pl(l),t=Sf(e,t,n,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ce=Rt(e.firstChild),tt=t,fe=!0,ja=null,zt=!0,a=ho(t,null,n,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Pa(),n===l){t=ua(e,t,a);break e}nt(e,t,n,a)}t=t.child}return t;case 26:return kr(e,t),e===null?(a=Ud(t.type,null,t.pendingProps,null))?t.memoizedState=a:fe||(a=t.type,e=t.pendingProps,n=ti(Re.current).createElement(a),n[et]=t,n[ut]=e,lt(n,a,e),Je(n),t.stateNode=n):t.memoizedState=Ud(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Ze(t),e===null&&fe&&(n=t.stateNode=zd(t.type,t.pendingProps,Re.current),tt=t,zt=!0,l=Ce,ka(t.type)?(qu=l,Ce=Rt(n.firstChild)):Ce=l),nt(e,t,t.pendingProps.children,a),kr(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&fe&&((l=n=Ce)&&(n=Ah(n,t.type,t.pendingProps,zt),n!==null?(t.stateNode=n,tt=t,Ce=Rt(n.firstChild),zt=!1,l=!0):l=!1),l||Ea(t)),Ze(t),l=t.type,u=t.pendingProps,f=e!==null?e.memoizedProps:null,n=u.children,bu(l,u)?n=null:f!==null&&bu(l,f)&&(t.flags|=32),t.memoizedState!==null&&(l=vc(e,t,G_,null,null,a),Ql._currentValue=l),kr(e,t),nt(e,t,n,a),t.child;case 6:return e===null&&fe&&((e=a=Ce)&&(a=Dh(a,t.pendingProps,zt),a!==null?(t.stateNode=a,tt=t,Ce=null,e=!0):e=!1),e||Ea(t)),null;case 13:return wf(e,t,a);case 4:return oe(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ln(t,null,n,a):nt(e,t,n,a),t.child;case 11:return mf(e,t,t.type,t.pendingProps,a);case 7:return nt(e,t,t.pendingProps,a),t.child;case 8:return nt(e,t,t.pendingProps.children,a),t.child;case 12:return nt(e,t,t.pendingProps.children,a),t.child;case 10:return n=t.pendingProps,qa(t,t.type,n.value),nt(e,t,n.children,a),t.child;case 9:return l=t.type._context,n=t.pendingProps.children,en(t),l=at(l),n=n(l),t.flags|=1,nt(e,t,n,a),t.child;case 14:return _f(e,t,t.type,t.pendingProps,a);case 15:return hf(e,t,t.type,t.pendingProps,a);case 19:return Ef(e,t,a);case 31:return W_(e,t,a);case 22:return pf(e,t,a,t.pendingProps);case 24:return en(t),n=at(Le),e===null?(l=sc(),l===null&&(l=Ae,u=cc(),l.pooledCache=u,u.refCount++,u!==null&&(l.pooledCacheLanes|=a),l=u),t.memoizedState={parent:n,cache:l},fc(t),qa(t,Le,l)):((e.lanes&a)!==0&&(dc(e,t),jl(t,null,null,a),wl()),l=e.memoizedState,u=t.memoizedState,l.parent!==n?(l={parent:n,cache:n},t.memoizedState=l,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=l),qa(t,Le,n)):(n=u.cache,qa(t,Le,n),n!==l.cache&&ic(t,[Le],a,!0))),nt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function sa(e){e.flags|=4}function Kc(e,t,a,n,l){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(l&335544128)===l)if(e.stateNode.complete)e.flags|=8192;else if(Pf())e.flags|=8192;else throw nn=jr,oc}else e.flags&=-16777217}function Tf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Yd(t))if(Pf())e.flags|=8192;else throw nn=jr,oc}function Lr(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ns():536870912,e.lanes|=t,Qn|=t)}function Cl(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,n=0;if(t)for(var l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags&65011712,n|=l.flags&65011712,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)a|=l.lanes|l.childLanes,n|=l.subtreeFlags,n|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=n,e.childLanes=a,t}function P_(e,t,a){var n=t.pendingProps;switch(tc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return Oe(t),null;case 3:return a=t.stateNode,n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ra(Le),De(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(On(t)?sa(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,nc())),Oe(t),null;case 26:var l=t.type,u=t.memoizedState;return e===null?(sa(t),u!==null?(Oe(t),Tf(t,u)):(Oe(t),Kc(t,l,null,n,a))):u?u!==e.memoizedState?(sa(t),Oe(t),Tf(t,u)):(Oe(t),t.flags&=-16777217):(e=e.memoizedProps,e!==n&&sa(t),Oe(t),Kc(t,l,e,n,a)),null;case 27:if(Ie(t),a=Re.current,l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&sa(t);else{if(!n){if(t.stateNode===null)throw Error(s(166));return Oe(t),null}e=ne.current,On(t)?no(t):(e=zd(l,n,a),t.stateNode=e,sa(t))}return Oe(t),null;case 5:if(Ie(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==n&&sa(t);else{if(!n){if(t.stateNode===null)throw Error(s(166));return Oe(t),null}if(u=ne.current,On(t))no(t);else{var f=ti(Re.current);switch(u){case 1:u=f.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:u=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":u=f.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":u=f.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":u=f.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof n.is=="string"?f.createElement("select",{is:n.is}):f.createElement("select"),n.multiple?u.multiple=!0:n.size&&(u.size=n.size);break;default:u=typeof n.is=="string"?f.createElement(l,{is:n.is}):f.createElement(l)}}u[et]=t,u[ut]=n;e:for(f=t.child;f!==null;){if(f.tag===5||f.tag===6)u.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}t.stateNode=u;e:switch(lt(u,l,n),l){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&sa(t)}}return Oe(t),Kc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,a),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==n&&sa(t);else{if(typeof n!="string"&&t.stateNode===null)throw Error(s(166));if(e=Re.current,On(t)){if(e=t.stateNode,a=t.memoizedProps,n=null,l=tt,l!==null)switch(l.tag){case 27:case 5:n=l.memoizedProps}e[et]=t,e=!!(e.nodeValue===a||n!==null&&n.suppressHydrationWarning===!0||wd(e.nodeValue,a)),e||Ea(t,!0)}else e=ti(e).createTextNode(n),e[et]=t,t.stateNode=e}return Oe(t),null;case 31:if(a=t.memoizedState,e===null||e.memoizedState!==null){if(n=On(t),a!==null){if(e===null){if(!n)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[et]=t}else Pa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Oe(t),e=!1}else a=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return t.flags&256?(St(t),t):(St(t),null);if((t.flags&128)!==0)throw Error(s(558))}return Oe(t),null;case 13:if(n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(l=On(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(s(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(s(317));l[et]=t}else Pa(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Oe(t),l=!1}else l=nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),l=!0;if(!l)return t.flags&256?(St(t),t):(St(t),null)}return St(t),(t.flags&128)!==0?(t.lanes=a,t):(a=n!==null,e=e!==null&&e.memoizedState!==null,a&&(n=t.child,l=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(l=n.alternate.memoizedState.cachePool.pool),u=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(u=n.memoizedState.cachePool.pool),u!==l&&(n.flags|=2048)),a!==e&&a&&(t.child.flags|=8192),Lr(t,t.updateQueue),Oe(t),null);case 4:return De(),e===null&&hu(t.stateNode.containerInfo),Oe(t),null;case 10:return ra(t.type),Oe(t),null;case 19:if(je(Ue),n=t.memoizedState,n===null)return Oe(t),null;if(l=(t.flags&128)!==0,u=n.rendering,u===null)if(l)Cl(n,!1);else{if(ze!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Ar(e),u!==null){for(t.flags|=128,Cl(n,!1),e=u.updateQueue,t.updateQueue=e,Lr(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)Ps(a,e),a=a.sibling;return N(Ue,Ue.current&1|2),fe&&na(t,n.treeForkCount),t.child}e=e.sibling}n.tail!==null&&ht()>Zr&&(t.flags|=128,l=!0,Cl(n,!1),t.lanes=4194304)}else{if(!l)if(e=Ar(u),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Lr(t,e),Cl(n,!0),n.tail===null&&n.tailMode==="hidden"&&!u.alternate&&!fe)return Oe(t),null}else 2*ht()-n.renderingStartTime>Zr&&a!==536870912&&(t.flags|=128,l=!0,Cl(n,!1),t.lanes=4194304);n.isBackwards?(u.sibling=t.child,t.child=u):(e=n.last,e!==null?e.sibling=u:t.child=u,n.last=u)}return n.tail!==null?(e=n.tail,n.rendering=e,n.tail=e.sibling,n.renderingStartTime=ht(),e.sibling=null,a=Ue.current,N(Ue,l?a&1|2:a&1),fe&&na(t,n.treeForkCount),e):(Oe(t),null);case 22:case 23:return St(t),pc(),n=t.memoizedState!==null,e!==null?e.memoizedState!==null!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?(a&536870912)!==0&&(t.flags&128)===0&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),a=t.updateQueue,a!==null&&Lr(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==a&&(t.flags|=2048),e!==null&&je(tn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ra(Le),Oe(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function I_(e,t){switch(tc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ra(Le),De(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ie(t),null;case 31:if(t.memoizedState!==null){if(St(t),t.alternate===null)throw Error(s(340));Pa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(St(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));Pa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return je(Ue),null;case 4:return De(),null;case 10:return ra(t.type),null;case 22:case 23:return St(t),pc(),e!==null&&je(tn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ra(Le),null;case 25:return null;default:return null}}function Af(e,t){switch(tc(t),t.tag){case 3:ra(Le),De();break;case 26:case 27:case 5:Ie(t);break;case 4:De();break;case 31:t.memoizedState!==null&&St(t);break;case 13:St(t);break;case 19:je(Ue);break;case 10:ra(t.type);break;case 22:case 23:St(t),pc(),e!==null&&je(tn);break;case 24:ra(Le)}}function Ol(e,t){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var l=n.next;a=l;do{if((a.tag&e)===e){n=void 0;var u=a.create,f=a.inst;n=u(),f.destroy=n}a=a.next}while(a!==l)}}catch(m){we(t,t.return,m)}}function Na(e,t,a){try{var n=t.updateQueue,l=n!==null?n.lastEffect:null;if(l!==null){var u=l.next;n=u;do{if((n.tag&e)===e){var f=n.inst,m=f.destroy;if(m!==void 0){f.destroy=void 0,l=t;var v=a,E=m;try{E()}catch(D){we(l,v,D)}}}n=n.next}while(n!==u)}}catch(D){we(t,t.return,D)}}function Df(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{go(t,a)}catch(n){we(e,e.return,n)}}}function Cf(e,t,a){a.props=cn(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(n){we(e,t,n)}}function Nl(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;case 30:n=e.stateNode;break;default:n=e.stateNode}typeof a=="function"?e.refCleanup=a(n):a.current=n}}catch(l){we(e,t,l)}}function Wt(e,t){var a=e.ref,n=e.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(l){we(e,t,l)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(l){we(e,t,l)}else a.current=null}function Of(e){var t=e.type,a=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break e;case"img":a.src?n.src=a.src:a.srcSet&&(n.srcset=a.srcSet)}}catch(l){we(e,e.return,l)}}function Jc(e,t,a){try{var n=e.stateNode;Sh(n,e.type,a,t),n[ut]=t}catch(l){we(e,e.return,l)}}function Nf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ka(e.type)||e.tag===4}function $c(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Nf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ka(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wc(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ea));else if(n!==4&&(n===27&&ka(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Wc(e,t,a),e=e.sibling;e!==null;)Wc(e,t,a),e=e.sibling}function Yr(e,t,a){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(n!==4&&(n===27&&ka(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Yr(e,t,a),e=e.sibling;e!==null;)Yr(e,t,a),e=e.sibling}function Mf(e){var t=e.stateNode,a=e.memoizedProps;try{for(var n=e.type,l=t.attributes;l.length;)t.removeAttributeNode(l[0]);lt(t,n,a),t[et]=e,t[ut]=a}catch(u){we(e,e.return,u)}}var oa=!1,Qe=!1,Fc=!1,zf=typeof WeakSet=="function"?WeakSet:Set,$e=null;function eh(e,t){if(e=e.containerInfo,yu=ui,e=Qs(e),Xi(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var n=a.getSelection&&a.getSelection();if(n&&n.rangeCount!==0){a=n.anchorNode;var l=n.anchorOffset,u=n.focusNode;n=n.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var f=0,m=-1,v=-1,E=0,D=0,O=e,q=null;t:for(;;){for(var A;O!==a||l!==0&&O.nodeType!==3||(m=f+l),O!==u||n!==0&&O.nodeType!==3||(v=f+n),O.nodeType===3&&(f+=O.nodeValue.length),(A=O.firstChild)!==null;)q=O,O=A;for(;;){if(O===e)break t;if(q===a&&++E===l&&(m=f),q===u&&++D===n&&(v=f),(A=O.nextSibling)!==null)break;O=q,q=O.parentNode}O=A}a=m===-1||v===-1?null:{start:m,end:v}}else a=null}a=a||{start:0,end:0}}else a=null;for(vu={focusedElem:e,selectionRange:a},ui=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){switch(t=$e,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)l=e[a],l.ref.impl=l.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,a=t,l=u.memoizedProps,u=u.memoizedState,n=a.stateNode;try{var Y=cn(a.type,l);e=n.getSnapshotBeforeUpdate(Y,u),n.__reactInternalSnapshotBeforeUpdate=e}catch($){we(a,a.return,$)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)wu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":wu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}}function xf(e,t,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:da(e,a),n&4&&Ol(5,a);break;case 1:if(da(e,a),n&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(f){we(a,a.return,f)}else{var l=cn(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(l,t,e.__reactInternalSnapshotBeforeUpdate)}catch(f){we(a,a.return,f)}}n&64&&Df(a),n&512&&Nl(a,a.return);break;case 3:if(da(e,a),n&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{go(e,t)}catch(f){we(a,a.return,f)}}break;case 27:t===null&&n&4&&Mf(a);case 26:case 5:da(e,a),t===null&&n&4&&Of(a),n&512&&Nl(a,a.return);break;case 12:da(e,a);break;case 31:da(e,a),n&4&&Bf(e,a);break;case 13:da(e,a),n&4&&kf(e,a),n&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=sh.bind(null,a),Ch(e,a))));break;case 22:if(n=a.memoizedState!==null||oa,!n){t=t!==null&&t.memoizedState!==null||Qe,l=oa;var u=Qe;oa=n,(Qe=t)&&!u?ma(e,a,(a.subtreeFlags&8772)!==0):da(e,a),oa=l,Qe=u}break;case 30:break;default:da(e,a)}}function Rf(e){var t=e.alternate;t!==null&&(e.alternate=null,Rf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ai(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ne=null,ot=!1;function fa(e,t,a){for(a=a.child;a!==null;)Uf(e,t,a),a=a.sibling}function Uf(e,t,a){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(tl,a)}catch{}switch(a.tag){case 26:Qe||Wt(a,t),fa(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Qe||Wt(a,t);var n=Ne,l=ot;ka(a.type)&&(Ne=a.stateNode,ot=!1),fa(e,t,a),Ll(a.stateNode),Ne=n,ot=l;break;case 5:Qe||Wt(a,t);case 6:if(n=Ne,l=ot,Ne=null,fa(e,t,a),Ne=n,ot=l,Ne!==null)if(ot)try{(Ne.nodeType===9?Ne.body:Ne.nodeName==="HTML"?Ne.ownerDocument.body:Ne).removeChild(a.stateNode)}catch(u){we(a,t,u)}else try{Ne.removeChild(a.stateNode)}catch(u){we(a,t,u)}break;case 18:Ne!==null&&(ot?(e=Ne,Dd(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Fn(e)):Dd(Ne,a.stateNode));break;case 4:n=Ne,l=ot,Ne=a.stateNode.containerInfo,ot=!0,fa(e,t,a),Ne=n,ot=l;break;case 0:case 11:case 14:case 15:Na(2,a,t),Qe||Na(4,a,t),fa(e,t,a);break;case 1:Qe||(Wt(a,t),n=a.stateNode,typeof n.componentWillUnmount=="function"&&Cf(a,t,n)),fa(e,t,a);break;case 21:fa(e,t,a);break;case 22:Qe=(n=Qe)||a.memoizedState!==null,fa(e,t,a),Qe=n;break;default:fa(e,t,a)}}function Bf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Fn(e)}catch(a){we(t,t.return,a)}}}function kf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Fn(e)}catch(a){we(t,t.return,a)}}function th(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new zf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new zf),t;default:throw Error(s(435,e.tag))}}function Gr(e,t){var a=th(e);t.forEach(function(n){if(!a.has(n)){a.add(n);var l=oh.bind(null,e,n);n.then(l,l)}})}function ft(e,t){var a=t.deletions;if(a!==null)for(var n=0;n<a.length;n++){var l=a[n],u=e,f=t,m=f;e:for(;m!==null;){switch(m.tag){case 27:if(ka(m.type)){Ne=m.stateNode,ot=!1;break e}break;case 5:Ne=m.stateNode,ot=!1;break e;case 3:case 4:Ne=m.stateNode.containerInfo,ot=!0;break e}m=m.return}if(Ne===null)throw Error(s(160));Uf(u,f,l),Ne=null,ot=!1,u=l.alternate,u!==null&&(u.return=null),l.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Hf(t,e),t=t.sibling}var Zt=null;function Hf(e,t){var a=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ft(t,e),dt(e),n&4&&(Na(3,e,e.return),Ol(3,e),Na(5,e,e.return));break;case 1:ft(t,e),dt(e),n&512&&(Qe||a===null||Wt(a,a.return)),n&64&&oa&&(e=e.updateQueue,e!==null&&(n=e.callbacks,n!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:var l=Zt;if(ft(t,e),dt(e),n&512&&(Qe||a===null||Wt(a,a.return)),n&4){var u=a!==null?a.memoizedState:null;if(n=e.memoizedState,a===null)if(n===null)if(e.stateNode===null){e:{n=e.type,a=e.memoizedProps,l=l.ownerDocument||l;t:switch(n){case"title":u=l.getElementsByTagName("title")[0],(!u||u[ll]||u[et]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=l.createElement(n),l.head.insertBefore(u,l.querySelector("head > title"))),lt(u,n,a),u[et]=e,Je(u),n=u;break e;case"link":var f=Hd("link","href",l).get(n+(a.href||""));if(f){for(var m=0;m<f.length;m++)if(u=f[m],u.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&u.getAttribute("rel")===(a.rel==null?null:a.rel)&&u.getAttribute("title")===(a.title==null?null:a.title)&&u.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){f.splice(m,1);break t}}u=l.createElement(n),lt(u,n,a),l.head.appendChild(u);break;case"meta":if(f=Hd("meta","content",l).get(n+(a.content||""))){for(m=0;m<f.length;m++)if(u=f[m],u.getAttribute("content")===(a.content==null?null:""+a.content)&&u.getAttribute("name")===(a.name==null?null:a.name)&&u.getAttribute("property")===(a.property==null?null:a.property)&&u.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&u.getAttribute("charset")===(a.charSet==null?null:a.charSet)){f.splice(m,1);break t}}u=l.createElement(n),lt(u,n,a),l.head.appendChild(u);break;default:throw Error(s(468,n))}u[et]=e,Je(u),n=u}e.stateNode=n}else Ld(l,e.type,e.stateNode);else e.stateNode=kd(l,n,e.memoizedProps);else u!==n?(u===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):u.count--,n===null?Ld(l,e.type,e.stateNode):kd(l,n,e.memoizedProps)):n===null&&e.stateNode!==null&&Jc(e,e.memoizedProps,a.memoizedProps)}break;case 27:ft(t,e),dt(e),n&512&&(Qe||a===null||Wt(a,a.return)),a!==null&&n&4&&Jc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ft(t,e),dt(e),n&512&&(Qe||a===null||Wt(a,a.return)),e.flags&32){l=e.stateNode;try{bn(l,"")}catch(Y){we(e,e.return,Y)}}n&4&&e.stateNode!=null&&(l=e.memoizedProps,Jc(e,l,a!==null?a.memoizedProps:l)),n&1024&&(Fc=!0);break;case 6:if(ft(t,e),dt(e),n&4){if(e.stateNode===null)throw Error(s(162));n=e.memoizedProps,a=e.stateNode;try{a.nodeValue=n}catch(Y){we(e,e.return,Y)}}break;case 3:if(li=null,l=Zt,Zt=ai(t.containerInfo),ft(t,e),Zt=l,dt(e),n&4&&a!==null&&a.memoizedState.isDehydrated)try{Fn(t.containerInfo)}catch(Y){we(e,e.return,Y)}Fc&&(Fc=!1,Lf(e));break;case 4:n=Zt,Zt=ai(e.stateNode.containerInfo),ft(t,e),dt(e),Zt=n;break;case 12:ft(t,e),dt(e);break;case 31:ft(t,e),dt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Gr(e,n)));break;case 13:ft(t,e),dt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xr=ht()),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Gr(e,n)));break;case 22:l=e.memoizedState!==null;var v=a!==null&&a.memoizedState!==null,E=oa,D=Qe;if(oa=E||l,Qe=D||v,ft(t,e),Qe=D,oa=E,dt(e),n&8192)e:for(t=e.stateNode,t._visibility=l?t._visibility&-2:t._visibility|1,l&&(a===null||v||oa||Qe||un(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){v=a=t;try{if(u=v.stateNode,l)f=u.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none";else{m=v.stateNode;var O=v.memoizedProps.style,q=O!=null&&O.hasOwnProperty("display")?O.display:null;m.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(Y){we(v,v.return,Y)}}}else if(t.tag===6){if(a===null){v=t;try{v.stateNode.nodeValue=l?"":v.memoizedProps}catch(Y){we(v,v.return,Y)}}}else if(t.tag===18){if(a===null){v=t;try{var A=v.stateNode;l?Cd(A,!0):Cd(v.stateNode,!1)}catch(Y){we(v,v.return,Y)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}n&4&&(n=e.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Gr(e,a))));break;case 19:ft(t,e),dt(e),n&4&&(n=e.updateQueue,n!==null&&(e.updateQueue=null,Gr(e,n)));break;case 30:break;case 21:break;default:ft(t,e),dt(e)}}function dt(e){var t=e.flags;if(t&2){try{for(var a,n=e.return;n!==null;){if(Nf(n)){a=n;break}n=n.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var l=a.stateNode,u=$c(e);Yr(e,u,l);break;case 5:var f=a.stateNode;a.flags&32&&(bn(f,""),a.flags&=-33);var m=$c(e);Yr(e,m,f);break;case 3:case 4:var v=a.stateNode.containerInfo,E=$c(e);Wc(e,E,v);break;default:throw Error(s(161))}}catch(D){we(e,e.return,D)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Lf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Lf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function da(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)xf(e,t.alternate,t),t=t.sibling}function un(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Na(4,t,t.return),un(t);break;case 1:Wt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Cf(t,t.return,a),un(t);break;case 27:Ll(t.stateNode);case 26:case 5:Wt(t,t.return),un(t);break;case 22:t.memoizedState===null&&un(t);break;case 30:un(t);break;default:un(t)}e=e.sibling}}function ma(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var n=t.alternate,l=e,u=t,f=u.flags;switch(u.tag){case 0:case 11:case 15:ma(l,u,a),Ol(4,u);break;case 1:if(ma(l,u,a),n=u,l=n.stateNode,typeof l.componentDidMount=="function")try{l.componentDidMount()}catch(E){we(n,n.return,E)}if(n=u,l=n.updateQueue,l!==null){var m=n.stateNode;try{var v=l.shared.hiddenCallbacks;if(v!==null)for(l.shared.hiddenCallbacks=null,l=0;l<v.length;l++)po(v[l],m)}catch(E){we(n,n.return,E)}}a&&f&64&&Df(u),Nl(u,u.return);break;case 27:Mf(u);case 26:case 5:ma(l,u,a),a&&n===null&&f&4&&Of(u),Nl(u,u.return);break;case 12:ma(l,u,a);break;case 31:ma(l,u,a),a&&f&4&&Bf(l,u);break;case 13:ma(l,u,a),a&&f&4&&kf(l,u);break;case 22:u.memoizedState===null&&ma(l,u,a),Nl(u,u.return);break;case 30:break;default:ma(l,u,a)}t=t.sibling}}function Pc(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&gl(a))}function Ic(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gl(e))}function Vt(e,t,a,n){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yf(e,t,a,n),t=t.sibling}function Yf(e,t,a,n){var l=t.flags;switch(t.tag){case 0:case 11:case 15:Vt(e,t,a,n),l&2048&&Ol(9,t);break;case 1:Vt(e,t,a,n);break;case 3:Vt(e,t,a,n),l&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&gl(e)));break;case 12:if(l&2048){Vt(e,t,a,n),e=t.stateNode;try{var u=t.memoizedProps,f=u.id,m=u.onPostCommit;typeof m=="function"&&m(f,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(v){we(t,t.return,v)}}else Vt(e,t,a,n);break;case 31:Vt(e,t,a,n);break;case 13:Vt(e,t,a,n);break;case 23:break;case 22:u=t.stateNode,f=t.alternate,t.memoizedState!==null?u._visibility&2?Vt(e,t,a,n):Ml(e,t):u._visibility&2?Vt(e,t,a,n):(u._visibility|=2,Ln(e,t,a,n,(t.subtreeFlags&10256)!==0||!1)),l&2048&&Pc(f,t);break;case 24:Vt(e,t,a,n),l&2048&&Ic(t.alternate,t);break;default:Vt(e,t,a,n)}}function Ln(e,t,a,n,l){for(l=l&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,f=t,m=a,v=n,E=f.flags;switch(f.tag){case 0:case 11:case 15:Ln(u,f,m,v,l),Ol(8,f);break;case 23:break;case 22:var D=f.stateNode;f.memoizedState!==null?D._visibility&2?Ln(u,f,m,v,l):Ml(u,f):(D._visibility|=2,Ln(u,f,m,v,l)),l&&E&2048&&Pc(f.alternate,f);break;case 24:Ln(u,f,m,v,l),l&&E&2048&&Ic(f.alternate,f);break;default:Ln(u,f,m,v,l)}t=t.sibling}}function Ml(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,n=t,l=n.flags;switch(n.tag){case 22:Ml(a,n),l&2048&&Pc(n.alternate,n);break;case 24:Ml(a,n),l&2048&&Ic(n.alternate,n);break;default:Ml(a,n)}t=t.sibling}}var zl=8192;function Yn(e,t,a){if(e.subtreeFlags&zl)for(e=e.child;e!==null;)Gf(e,t,a),e=e.sibling}function Gf(e,t,a){switch(e.tag){case 26:Yn(e,t,a),e.flags&zl&&e.memoizedState!==null&&Yh(a,Zt,e.memoizedState,e.memoizedProps);break;case 5:Yn(e,t,a);break;case 3:case 4:var n=Zt;Zt=ai(e.stateNode.containerInfo),Yn(e,t,a),Zt=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=zl,zl=16777216,Yn(e,t,a),zl=n):Yn(e,t,a));break;default:Yn(e,t,a)}}function Qf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function xl(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];$e=n,Zf(n,e)}Qf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xf(e),e=e.sibling}function Xf(e){switch(e.tag){case 0:case 11:case 15:xl(e),e.flags&2048&&Na(9,e,e.return);break;case 3:xl(e);break;case 12:xl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Qr(e)):xl(e);break;default:xl(e)}}function Qr(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var n=t[a];$e=n,Zf(n,e)}Qf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Na(8,t,t.return),Qr(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Qr(t));break;default:Qr(t)}e=e.sibling}}function Zf(e,t){for(;$e!==null;){var a=$e;switch(a.tag){case 0:case 11:case 15:Na(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:gl(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,$e=n;else e:for(a=e;$e!==null;){n=$e;var l=n.sibling,u=n.return;if(Rf(n),n===a){$e=null;break e}if(l!==null){l.return=u,$e=l;break e}$e=u}}}var ah={getCacheForType:function(e){var t=at(Le),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a},cacheSignal:function(){return at(Le).controller.signal}},nh=typeof WeakMap=="function"?WeakMap:Map,ve=0,Ae=null,ie=null,ue=0,Se=0,wt=null,Ma=!1,Gn=!1,eu=!1,_a=0,ze=0,za=0,sn=0,tu=0,jt=0,Qn=0,Rl=null,mt=null,au=!1,Xr=0,Vf=0,Zr=1/0,Vr=null,xa=null,Ve=0,Ra=null,Xn=null,ha=0,nu=0,lu=null,Kf=null,Ul=0,ru=null;function Et(){return(ve&2)!==0&&ue!==0?ue&-ue:T.T!==null?fu():cs()}function Jf(){if(jt===0)if((ue&536870912)===0||fe){var e=er;er<<=1,(er&3932160)===0&&(er=262144),jt=e}else jt=536870912;return e=bt.current,e!==null&&(e.flags|=32),jt}function _t(e,t,a){(e===Ae&&(Se===2||Se===9)||e.cancelPendingCommit!==null)&&(Zn(e,0),Ua(e,ue,jt,!1)),nl(e,a),((ve&2)===0||e!==Ae)&&(e===Ae&&((ve&2)===0&&(sn|=a),ze===4&&Ua(e,ue,jt,!1)),Ft(e))}function $f(e,t,a){if((ve&6)!==0)throw Error(s(327));var n=!a&&(t&127)===0&&(t&e.expiredLanes)===0||al(e,t),l=n?ih(e,t):cu(e,t,!0),u=n;do{if(l===0){Gn&&!n&&Ua(e,t,0,!1);break}else{if(a=e.current.alternate,u&&!lh(a)){l=cu(e,t,!1),u=!1;continue}if(l===2){if(u=t,e.errorRecoveryDisabledLanes&u)var f=0;else f=e.pendingLanes&-536870913,f=f!==0?f:f&536870912?536870912:0;if(f!==0){t=f;e:{var m=e;l=Rl;var v=m.current.memoizedState.isDehydrated;if(v&&(Zn(m,f).flags|=256),f=cu(m,f,!1),f!==2){if(eu&&!v){m.errorRecoveryDisabledLanes|=u,sn|=u,l=4;break e}u=mt,mt=l,u!==null&&(mt===null?mt=u:mt.push.apply(mt,u))}l=f}if(u=!1,l!==2)continue}}if(l===1){Zn(e,0),Ua(e,t,0,!0);break}e:{switch(n=e,u=l,u){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Ua(n,t,jt,!Ma);break e;case 2:mt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(l=Xr+300-ht(),10<l)){if(Ua(n,t,jt,!Ma),ar(n,0,!0)!==0)break e;ha=t,n.timeoutHandle=Td(Wf.bind(null,n,a,mt,Vr,au,t,jt,sn,Qn,Ma,u,"Throttled",-0,0),l);break e}Wf(n,a,mt,Vr,au,t,jt,sn,Qn,Ma,u,null,-0,0)}}break}while(!0);Ft(e)}function Wf(e,t,a,n,l,u,f,m,v,E,D,O,q,A){if(e.timeoutHandle=-1,O=t.subtreeFlags,O&8192||(O&16785408)===16785408){O={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ea},Gf(t,u,O);var Y=(u&62914560)===u?Xr-ht():(u&4194048)===u?Vf-ht():0;if(Y=Gh(O,Y),Y!==null){ha=u,e.cancelPendingCommit=Y(ld.bind(null,e,t,u,a,n,l,f,m,v,D,O,null,q,A)),Ua(e,u,f,!E);return}}ld(e,t,u,a,n,l,f,m,v)}function lh(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var l=a[n],u=l.getSnapshot;l=l.value;try{if(!yt(u(),l))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ua(e,t,a,n){t&=~tu,t&=~sn,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var l=t;0<l;){var u=31-gt(l),f=1<<u;n[u]=-1,l&=~f}a!==0&&ls(e,a,t)}function Kr(){return(ve&6)===0?(Bl(0),!1):!0}function iu(){if(ie!==null){if(Se===0)var e=ie.return;else e=ie,la=Ia=null,wc(e),Rn=null,vl=0,e=ie;for(;e!==null;)Af(e.alternate,e),e=e.return;ie=null}}function Zn(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Eh(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),ha=0,iu(),Ae=e,ie=a=aa(e.current,null),ue=t,Se=0,wt=null,Ma=!1,Gn=al(e,t),eu=!1,Qn=jt=tu=sn=za=ze=0,mt=Rl=null,au=!1,(t&8)!==0&&(t|=t&32);var n=e.entangledLanes;if(n!==0)for(e=e.entanglements,n&=t;0<n;){var l=31-gt(n),u=1<<l;t|=e[l],n&=~u}return _a=t,_r(),a}function Ff(e,t){ee=null,T.H=Al,t===xn||t===wr?(t=fo(),Se=3):t===oc?(t=fo(),Se=4):Se=t===kc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,wt=t,ie===null&&(ze=1,Ur(e,Ot(t,e.current)))}function Pf(){var e=bt.current;return e===null?!0:(ue&4194048)===ue?xt===null:(ue&62914560)===ue||(ue&536870912)!==0?e===xt:!1}function If(){var e=T.H;return T.H=Al,e===null?Al:e}function ed(){var e=T.A;return T.A=ah,e}function Jr(){ze=4,Ma||(ue&4194048)!==ue&&bt.current!==null||(Gn=!0),(za&134217727)===0&&(sn&134217727)===0||Ae===null||Ua(Ae,ue,jt,!1)}function cu(e,t,a){var n=ve;ve|=2;var l=If(),u=ed();(Ae!==e||ue!==t)&&(Vr=null,Zn(e,t)),t=!1;var f=ze;e:do try{if(Se!==0&&ie!==null){var m=ie,v=wt;switch(Se){case 8:iu(),f=6;break e;case 3:case 2:case 9:case 6:bt.current===null&&(t=!0);var E=Se;if(Se=0,wt=null,Vn(e,m,v,E),a&&Gn){f=0;break e}break;default:E=Se,Se=0,wt=null,Vn(e,m,v,E)}}rh(),f=ze;break}catch(D){Ff(e,D)}while(!0);return t&&e.shellSuspendCounter++,la=Ia=null,ve=n,T.H=l,T.A=u,ie===null&&(Ae=null,ue=0,_r()),f}function rh(){for(;ie!==null;)td(ie)}function ih(e,t){var a=ve;ve|=2;var n=If(),l=ed();Ae!==e||ue!==t?(Vr=null,Zr=ht()+500,Zn(e,t)):Gn=al(e,t);e:do try{if(Se!==0&&ie!==null){t=ie;var u=wt;t:switch(Se){case 1:Se=0,wt=null,Vn(e,t,u,1);break;case 2:case 9:if(so(u)){Se=0,wt=null,ad(t);break}t=function(){Se!==2&&Se!==9||Ae!==e||(Se=7),Ft(e)},u.then(t,t);break e;case 3:Se=7;break e;case 4:Se=5;break e;case 7:so(u)?(Se=0,wt=null,ad(t)):(Se=0,wt=null,Vn(e,t,u,7));break;case 5:var f=null;switch(ie.tag){case 26:f=ie.memoizedState;case 5:case 27:var m=ie;if(f?Yd(f):m.stateNode.complete){Se=0,wt=null;var v=m.sibling;if(v!==null)ie=v;else{var E=m.return;E!==null?(ie=E,$r(E)):ie=null}break t}}Se=0,wt=null,Vn(e,t,u,5);break;case 6:Se=0,wt=null,Vn(e,t,u,6);break;case 8:iu(),ze=6;break e;default:throw Error(s(462))}}ch();break}catch(D){Ff(e,D)}while(!0);return la=Ia=null,T.H=n,T.A=l,ve=a,ie!==null?0:(Ae=null,ue=0,_r(),ze)}function ch(){for(;ie!==null&&!Om();)td(ie)}function td(e){var t=qf(e.alternate,e,_a);e.memoizedProps=e.pendingProps,t===null?$r(e):ie=t}function ad(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=vf(a,t,t.pendingProps,t.type,void 0,ue);break;case 11:t=vf(a,t,t.pendingProps,t.type.render,t.ref,ue);break;case 5:wc(t);default:Af(a,t),t=ie=Ps(t,_a),t=qf(a,t,_a)}e.memoizedProps=e.pendingProps,t===null?$r(e):ie=t}function Vn(e,t,a,n){la=Ia=null,wc(t),Rn=null,vl=0;var l=t.return;try{if($_(e,l,t,a,ue)){ze=1,Ur(e,Ot(a,e.current)),ie=null;return}}catch(u){if(l!==null)throw ie=l,u;ze=1,Ur(e,Ot(a,e.current)),ie=null;return}t.flags&32768?(fe||n===1?e=!0:Gn||(ue&536870912)!==0?e=!1:(Ma=e=!0,(n===2||n===9||n===3||n===6)&&(n=bt.current,n!==null&&n.tag===13&&(n.flags|=16384))),nd(t,e)):$r(t)}function $r(e){var t=e;do{if((t.flags&32768)!==0){nd(t,Ma);return}e=t.return;var a=P_(t.alternate,t,_a);if(a!==null){ie=a;return}if(t=t.sibling,t!==null){ie=t;return}ie=t=e}while(t!==null);ze===0&&(ze=5)}function nd(e,t){do{var a=I_(e.alternate,e);if(a!==null){a.flags&=32767,ie=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ie=e;return}ie=e=a}while(e!==null);ze=6,ie=null}function ld(e,t,a,n,l,u,f,m,v){e.cancelPendingCommit=null;do Wr();while(Ve!==0);if((ve&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(u=t.lanes|t.childLanes,u|=$i,Lm(e,a,u,f,m,v),e===Ae&&(ie=Ae=null,ue=0),Xn=t,Ra=e,ha=a,nu=u,lu=l,Kf=n,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,fh(Pl,function(){return sd(),null})):(e.callbackNode=null,e.callbackPriority=0),n=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||n){n=T.T,T.T=null,l=B.p,B.p=2,f=ve,ve|=4;try{eh(e,t,a)}finally{ve=f,B.p=l,T.T=n}}Ve=1,rd(),id(),cd()}}function rd(){if(Ve===1){Ve=0;var e=Ra,t=Xn,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=T.T,T.T=null;var n=B.p;B.p=2;var l=ve;ve|=4;try{Hf(t,e);var u=vu,f=Qs(e.containerInfo),m=u.focusedElem,v=u.selectionRange;if(f!==m&&m&&m.ownerDocument&&Gs(m.ownerDocument.documentElement,m)){if(v!==null&&Xi(m)){var E=v.start,D=v.end;if(D===void 0&&(D=E),"selectionStart"in m)m.selectionStart=E,m.selectionEnd=Math.min(D,m.value.length);else{var O=m.ownerDocument||document,q=O&&O.defaultView||window;if(q.getSelection){var A=q.getSelection(),Y=m.textContent.length,$=Math.min(v.start,Y),Te=v.end===void 0?$:Math.min(v.end,Y);!A.extend&&$>Te&&(f=Te,Te=$,$=f);var S=Ys(m,$),b=Ys(m,Te);if(S&&b&&(A.rangeCount!==1||A.anchorNode!==S.node||A.anchorOffset!==S.offset||A.focusNode!==b.node||A.focusOffset!==b.offset)){var j=O.createRange();j.setStart(S.node,S.offset),A.removeAllRanges(),$>Te?(A.addRange(j),A.extend(b.node,b.offset)):(j.setEnd(b.node,b.offset),A.addRange(j))}}}}for(O=[],A=m;A=A.parentNode;)A.nodeType===1&&O.push({element:A,left:A.scrollLeft,top:A.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<O.length;m++){var C=O[m];C.element.scrollLeft=C.left,C.element.scrollTop=C.top}}ui=!!yu,vu=yu=null}finally{ve=l,B.p=n,T.T=a}}e.current=t,Ve=2}}function id(){if(Ve===2){Ve=0;var e=Ra,t=Xn,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=T.T,T.T=null;var n=B.p;B.p=2;var l=ve;ve|=4;try{xf(e,t.alternate,t)}finally{ve=l,B.p=n,T.T=a}}Ve=3}}function cd(){if(Ve===4||Ve===3){Ve=0,Nm();var e=Ra,t=Xn,a=ha,n=Kf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Ve=5:(Ve=0,Xn=Ra=null,ud(e,e.pendingLanes));var l=e.pendingLanes;if(l===0&&(xa=null),qi(a),t=t.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(tl,t,void 0,(t.current.flags&128)===128)}catch{}if(n!==null){t=T.T,l=B.p,B.p=2,T.T=null;try{for(var u=e.onRecoverableError,f=0;f<n.length;f++){var m=n[f];u(m.value,{componentStack:m.stack})}}finally{T.T=t,B.p=l}}(ha&3)!==0&&Wr(),Ft(e),l=e.pendingLanes,(a&261930)!==0&&(l&42)!==0?e===ru?Ul++:(Ul=0,ru=e):Ul=0,Bl(0)}}function ud(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,gl(t)))}function Wr(){return rd(),id(),cd(),sd()}function sd(){if(Ve!==5)return!1;var e=Ra,t=nu;nu=0;var a=qi(ha),n=T.T,l=B.p;try{B.p=32>a?32:a,T.T=null,a=lu,lu=null;var u=Ra,f=ha;if(Ve=0,Xn=Ra=null,ha=0,(ve&6)!==0)throw Error(s(331));var m=ve;if(ve|=4,Xf(u.current),Yf(u,u.current,f,a),ve=m,Bl(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(tl,u)}catch{}return!0}finally{B.p=l,T.T=n,ud(e,t)}}function od(e,t,a){t=Ot(a,t),t=Bc(e.stateNode,t,2),e=Da(e,t,2),e!==null&&(nl(e,2),Ft(e))}function we(e,t,a){if(e.tag===3)od(e,e,a);else for(;t!==null;){if(t.tag===3){od(t,e,a);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(xa===null||!xa.has(n))){e=Ot(a,e),a=ff(2),n=Da(t,a,2),n!==null&&(df(a,n,t,e),nl(n,2),Ft(n));break}}t=t.return}}function uu(e,t,a){var n=e.pingCache;if(n===null){n=e.pingCache=new nh;var l=new Set;n.set(t,l)}else l=n.get(t),l===void 0&&(l=new Set,n.set(t,l));l.has(a)||(eu=!0,l.add(a),e=uh.bind(null,e,t,a),t.then(e,e))}function uh(e,t,a){var n=e.pingCache;n!==null&&n.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Ae===e&&(ue&a)===a&&(ze===4||ze===3&&(ue&62914560)===ue&&300>ht()-Xr?(ve&2)===0&&Zn(e,0):tu|=a,Qn===ue&&(Qn=0)),Ft(e)}function fd(e,t){t===0&&(t=ns()),e=Wa(e,t),e!==null&&(nl(e,t),Ft(e))}function sh(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),fd(e,a)}function oh(e,t){var a=0;switch(e.tag){case 31:case 13:var n=e.stateNode,l=e.memoizedState;l!==null&&(a=l.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(s(314))}n!==null&&n.delete(t),fd(e,a)}function fh(e,t){return Si(e,t)}var Fr=null,Kn=null,su=!1,Pr=!1,ou=!1,Ba=0;function Ft(e){e!==Kn&&e.next===null&&(Kn===null?Fr=Kn=e:Kn=Kn.next=e),Pr=!0,su||(su=!0,mh())}function Bl(e,t){if(!ou&&Pr){ou=!0;do for(var a=!1,n=Fr;n!==null;){if(e!==0){var l=n.pendingLanes;if(l===0)var u=0;else{var f=n.suspendedLanes,m=n.pingedLanes;u=(1<<31-gt(42|e)+1)-1,u&=l&~(f&~m),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(a=!0,hd(n,u))}else u=ue,u=ar(n,n===Ae?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(u&3)===0||al(n,u)||(a=!0,hd(n,u));n=n.next}while(a);ou=!1}}function dh(){dd()}function dd(){Pr=su=!1;var e=0;Ba!==0&&jh()&&(e=Ba);for(var t=ht(),a=null,n=Fr;n!==null;){var l=n.next,u=md(n,t);u===0?(n.next=null,a===null?Fr=l:a.next=l,l===null&&(Kn=a)):(a=n,(e!==0||(u&3)!==0)&&(Pr=!0)),n=l}Ve!==0&&Ve!==5||Bl(e),Ba!==0&&(Ba=0)}function md(e,t){for(var a=e.suspendedLanes,n=e.pingedLanes,l=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var f=31-gt(u),m=1<<f,v=l[f];v===-1?((m&a)===0||(m&n)!==0)&&(l[f]=Hm(m,t)):v<=t&&(e.expiredLanes|=m),u&=~m}if(t=Ae,a=ue,a=ar(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n=e.callbackNode,a===0||e===t&&(Se===2||Se===9)||e.cancelPendingCommit!==null)return n!==null&&n!==null&&wi(n),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||al(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(n!==null&&wi(n),qi(a)){case 2:case 8:a=ts;break;case 32:a=Pl;break;case 268435456:a=as;break;default:a=Pl}return n=_d.bind(null,e),a=Si(a,n),e.callbackPriority=t,e.callbackNode=a,t}return n!==null&&n!==null&&wi(n),e.callbackPriority=2,e.callbackNode=null,2}function _d(e,t){if(Ve!==0&&Ve!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Wr()&&e.callbackNode!==a)return null;var n=ue;return n=ar(e,e===Ae?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),n===0?null:($f(e,n,t),md(e,ht()),e.callbackNode!=null&&e.callbackNode===a?_d.bind(null,e):null)}function hd(e,t){if(Wr())return null;$f(e,t,!0)}function mh(){qh(function(){(ve&6)!==0?Si(es,dh):dd()})}function fu(){if(Ba===0){var e=Mn;e===0&&(e=Il,Il<<=1,(Il&261888)===0&&(Il=256)),Ba=e}return Ba}function pd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ir(""+e)}function gd(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function _h(e,t,a,n,l){if(t==="submit"&&a&&a.stateNode===l){var u=pd((l[ut]||null).action),f=n.submitter;f&&(t=(t=f[ut]||null)?pd(t.formAction):f.getAttribute("formAction"),t!==null&&(u=t,f=null));var m=new or("action","action",null,n,l);e.push({event:m,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(Ba!==0){var v=f?gd(l,f):new FormData(l);Nc(a,{pending:!0,data:v,method:l.method,action:u},null,v)}}else typeof u=="function"&&(m.preventDefault(),v=f?gd(l,f):new FormData(l),Nc(a,{pending:!0,data:v,method:l.method,action:u},u,v))},currentTarget:l}]})}}for(var du=0;du<Ji.length;du++){var mu=Ji[du],hh=mu.toLowerCase(),ph=mu[0].toUpperCase()+mu.slice(1);Xt(hh,"on"+ph)}Xt(Vs,"onAnimationEnd"),Xt(Ks,"onAnimationIteration"),Xt(Js,"onAnimationStart"),Xt("dblclick","onDoubleClick"),Xt("focusin","onFocus"),Xt("focusout","onBlur"),Xt(M_,"onTransitionRun"),Xt(z_,"onTransitionStart"),Xt(x_,"onTransitionCancel"),Xt($s,"onTransitionEnd"),yn("onMouseEnter",["mouseout","mouseover"]),yn("onMouseLeave",["mouseout","mouseover"]),yn("onPointerEnter",["pointerout","pointerover"]),yn("onPointerLeave",["pointerout","pointerover"]),Va("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Va("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Va("onBeforeInput",["compositionend","keypress","textInput","paste"]),Va("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Va("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kl));function yd(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var n=e[a],l=n.event;n=n.listeners;e:{var u=void 0;if(t)for(var f=n.length-1;0<=f;f--){var m=n[f],v=m.instance,E=m.currentTarget;if(m=m.listener,v!==u&&l.isPropagationStopped())break e;u=m,l.currentTarget=E;try{u(l)}catch(D){mr(D)}l.currentTarget=null,u=v}else for(f=0;f<n.length;f++){if(m=n[f],v=m.instance,E=m.currentTarget,m=m.listener,v!==u&&l.isPropagationStopped())break e;u=m,l.currentTarget=E;try{u(l)}catch(D){mr(D)}l.currentTarget=null,u=v}}}}function ce(e,t){var a=t[Ti];a===void 0&&(a=t[Ti]=new Set);var n=e+"__bubble";a.has(n)||(vd(t,e,2,!1),a.add(n))}function _u(e,t,a){var n=0;t&&(n|=4),vd(a,e,n,t)}var Ir="_reactListening"+Math.random().toString(36).slice(2);function hu(e){if(!e[Ir]){e[Ir]=!0,os.forEach(function(a){a!=="selectionchange"&&(gh.has(a)||_u(a,!1,e),_u(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ir]||(t[Ir]=!0,_u("selectionchange",!1,t))}}function vd(e,t,a,n){switch(Jd(t)){case 2:var l=Zh;break;case 8:l=Vh;break;default:l=Ou}a=l.bind(null,t,a,e),l=void 0,!Ri||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),n?l!==void 0?e.addEventListener(t,a,{capture:!0,passive:l}):e.addEventListener(t,a,!0):l!==void 0?e.addEventListener(t,a,{passive:l}):e.addEventListener(t,a,!1)}function pu(e,t,a,n,l){var u=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var f=n.tag;if(f===3||f===4){var m=n.stateNode.containerInfo;if(m===l)break;if(f===4)for(f=n.return;f!==null;){var v=f.tag;if((v===3||v===4)&&f.stateNode.containerInfo===l)return;f=f.return}for(;m!==null;){if(f=hn(m),f===null)return;if(v=f.tag,v===5||v===6||v===26||v===27){n=u=f;continue e}m=m.parentNode}}n=n.return}ws(function(){var E=u,D=zi(a),O=[];e:{var q=Ws.get(e);if(q!==void 0){var A=or,Y=e;switch(e){case"keypress":if(ur(a)===0)break e;case"keydown":case"keyup":A=o_;break;case"focusin":Y="focus",A=Hi;break;case"focusout":Y="blur",A=Hi;break;case"beforeblur":case"afterblur":A=Hi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=qs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=Pm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=m_;break;case Vs:case Ks:case Js:A=t_;break;case $s:A=h_;break;case"scroll":case"scrollend":A=Wm;break;case"wheel":A=g_;break;case"copy":case"cut":case"paste":A=n_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=As;break;case"toggle":case"beforetoggle":A=v_}var $=(t&4)!==0,Te=!$&&(e==="scroll"||e==="scrollend"),S=$?q!==null?q+"Capture":null:q;$=[];for(var b=E,j;b!==null;){var C=b;if(j=C.stateNode,C=C.tag,C!==5&&C!==26&&C!==27||j===null||S===null||(C=il(b,S),C!=null&&$.push(Hl(b,C,j))),Te)break;b=b.return}0<$.length&&(q=new A(q,Y,null,a,D),O.push({event:q,listeners:$}))}}if((t&7)===0){e:{if(q=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",q&&a!==Mi&&(Y=a.relatedTarget||a.fromElement)&&(hn(Y)||Y[_n]))break e;if((A||q)&&(q=D.window===D?D:(q=D.ownerDocument)?q.defaultView||q.parentWindow:window,A?(Y=a.relatedTarget||a.toElement,A=E,Y=Y?hn(Y):null,Y!==null&&(Te=d(Y),$=Y.tag,Y!==Te||$!==5&&$!==27&&$!==6)&&(Y=null)):(A=null,Y=E),A!==Y)){if($=qs,C="onMouseLeave",S="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&($=As,C="onPointerLeave",S="onPointerEnter",b="pointer"),Te=A==null?q:rl(A),j=Y==null?q:rl(Y),q=new $(C,b+"leave",A,a,D),q.target=Te,q.relatedTarget=j,C=null,hn(D)===E&&($=new $(S,b+"enter",Y,a,D),$.target=j,$.relatedTarget=Te,C=$),Te=C,A&&Y)t:{for($=yh,S=A,b=Y,j=0,C=S;C;C=$(C))j++;C=0;for(var K=b;K;K=$(K))C++;for(;0<j-C;)S=$(S),j--;for(;0<C-j;)b=$(b),C--;for(;j--;){if(S===b||b!==null&&S===b.alternate){$=S;break t}S=$(S),b=$(b)}$=null}else $=null;A!==null&&bd(O,q,A,$,!1),Y!==null&&Te!==null&&bd(O,Te,Y,$,!0)}}e:{if(q=E?rl(E):window,A=q.nodeName&&q.nodeName.toLowerCase(),A==="select"||A==="input"&&q.type==="file")var _e=Rs;else if(zs(q))if(Us)_e=C_;else{_e=A_;var Q=T_}else A=q.nodeName,!A||A.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?E&&Ni(E.elementType)&&(_e=Rs):_e=D_;if(_e&&(_e=_e(e,E))){xs(O,_e,a,D);break e}Q&&Q(e,q,E),e==="focusout"&&E&&q.type==="number"&&E.memoizedProps.value!=null&&Oi(q,"number",q.value)}switch(Q=E?rl(E):window,e){case"focusin":(zs(Q)||Q.contentEditable==="true")&&(En=Q,Zi=E,_l=null);break;case"focusout":_l=Zi=En=null;break;case"mousedown":Vi=!0;break;case"contextmenu":case"mouseup":case"dragend":Vi=!1,Xs(O,a,D);break;case"selectionchange":if(N_)break;case"keydown":case"keyup":Xs(O,a,D)}var ae;if(Yi)e:{switch(e){case"compositionstart":var se="onCompositionStart";break e;case"compositionend":se="onCompositionEnd";break e;case"compositionupdate":se="onCompositionUpdate";break e}se=void 0}else jn?Ns(e,a)&&(se="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(se="onCompositionStart");se&&(Ds&&a.locale!=="ko"&&(jn||se!=="onCompositionStart"?se==="onCompositionEnd"&&jn&&(ae=js()):(Sa=D,Ui="value"in Sa?Sa.value:Sa.textContent,jn=!0)),Q=ei(E,se),0<Q.length&&(se=new Ts(se,e,null,a,D),O.push({event:se,listeners:Q}),ae?se.data=ae:(ae=Ms(a),ae!==null&&(se.data=ae)))),(ae=S_?w_(e,a):j_(e,a))&&(se=ei(E,"onBeforeInput"),0<se.length&&(Q=new Ts("onBeforeInput","beforeinput",null,a,D),O.push({event:Q,listeners:se}),Q.data=ae)),_h(O,e,E,a,D)}yd(O,t)})}function Hl(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ei(e,t){for(var a=t+"Capture",n=[];e!==null;){var l=e,u=l.stateNode;if(l=l.tag,l!==5&&l!==26&&l!==27||u===null||(l=il(e,a),l!=null&&n.unshift(Hl(e,l,u)),l=il(e,t),l!=null&&n.push(Hl(e,l,u))),e.tag===3)return n;e=e.return}return[]}function yh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bd(e,t,a,n,l){for(var u=t._reactName,f=[];a!==null&&a!==n;){var m=a,v=m.alternate,E=m.stateNode;if(m=m.tag,v!==null&&v===n)break;m!==5&&m!==26&&m!==27||E===null||(v=E,l?(E=il(a,u),E!=null&&f.unshift(Hl(a,E,v))):l||(E=il(a,u),E!=null&&f.push(Hl(a,E,v)))),a=a.return}f.length!==0&&e.push({event:t,listeners:f})}var vh=/\r\n?/g,bh=/\u0000|\uFFFD/g;function Sd(e){return(typeof e=="string"?e:""+e).replace(vh,`
`).replace(bh,"")}function wd(e,t){return t=Sd(t),Sd(e)===t}function qe(e,t,a,n,l,u){switch(a){case"children":typeof n=="string"?t==="body"||t==="textarea"&&n===""||bn(e,n):(typeof n=="number"||typeof n=="bigint")&&t!=="body"&&bn(e,""+n);break;case"className":lr(e,"class",n);break;case"tabIndex":lr(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(e,a,n);break;case"style":bs(e,n,u);break;case"data":if(t!=="object"){lr(e,"data",n);break}case"src":case"href":if(n===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=ir(""+n),e.setAttribute(a,n);break;case"action":case"formAction":if(typeof n=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(a==="formAction"?(t!=="input"&&qe(e,t,"name",l.name,l,null),qe(e,t,"formEncType",l.formEncType,l,null),qe(e,t,"formMethod",l.formMethod,l,null),qe(e,t,"formTarget",l.formTarget,l,null)):(qe(e,t,"encType",l.encType,l,null),qe(e,t,"method",l.method,l,null),qe(e,t,"target",l.target,l,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){e.removeAttribute(a);break}n=ir(""+n),e.setAttribute(a,n);break;case"onClick":n!=null&&(e.onclick=ea);break;case"onScroll":n!=null&&ce("scroll",e);break;case"onScrollEnd":n!=null&&ce("scrollend",e);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(s(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":e.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){e.removeAttribute("xlink:href");break}a=ir(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""+n):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":n===!0?e.setAttribute(a,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?e.setAttribute(a,n):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?e.setAttribute(a,n):e.removeAttribute(a);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?e.removeAttribute(a):e.setAttribute(a,n);break;case"popover":ce("beforetoggle",e),ce("toggle",e),nr(e,"popover",n);break;case"xlinkActuate":It(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":It(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":It(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":It(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":It(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":It(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":It(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":It(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":It(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":nr(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Jm.get(a)||a,nr(e,a,n))}}function gu(e,t,a,n,l,u){switch(a){case"style":bs(e,n,u);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(s(61));if(a=n.__html,a!=null){if(l.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof n=="string"?bn(e,n):(typeof n=="number"||typeof n=="bigint")&&bn(e,""+n);break;case"onScroll":n!=null&&ce("scroll",e);break;case"onScrollEnd":n!=null&&ce("scrollend",e);break;case"onClick":n!=null&&(e.onclick=ea);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fs.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(l=a.endsWith("Capture"),t=a.slice(2,l?a.length-7:void 0),u=e[ut]||null,u=u!=null?u[a]:null,typeof u=="function"&&e.removeEventListener(t,u,l),typeof n=="function")){typeof u!="function"&&u!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,n,l);break e}a in e?e[a]=n:n===!0?e.setAttribute(a,""):nr(e,a,n)}}}function lt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ce("error",e),ce("load",e);var n=!1,l=!1,u;for(u in a)if(a.hasOwnProperty(u)){var f=a[u];if(f!=null)switch(u){case"src":n=!0;break;case"srcSet":l=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:qe(e,t,u,f,a,null)}}l&&qe(e,t,"srcSet",a.srcSet,a,null),n&&qe(e,t,"src",a.src,a,null);return;case"input":ce("invalid",e);var m=u=f=l=null,v=null,E=null;for(n in a)if(a.hasOwnProperty(n)){var D=a[n];if(D!=null)switch(n){case"name":l=D;break;case"type":f=D;break;case"checked":v=D;break;case"defaultChecked":E=D;break;case"value":u=D;break;case"defaultValue":m=D;break;case"children":case"dangerouslySetInnerHTML":if(D!=null)throw Error(s(137,t));break;default:qe(e,t,n,D,a,null)}}ps(e,u,m,v,E,f,l,!1);return;case"select":ce("invalid",e),n=f=u=null;for(l in a)if(a.hasOwnProperty(l)&&(m=a[l],m!=null))switch(l){case"value":u=m;break;case"defaultValue":f=m;break;case"multiple":n=m;default:qe(e,t,l,m,a,null)}t=u,a=f,e.multiple=!!n,t!=null?vn(e,!!n,t,!1):a!=null&&vn(e,!!n,a,!0);return;case"textarea":ce("invalid",e),u=l=n=null;for(f in a)if(a.hasOwnProperty(f)&&(m=a[f],m!=null))switch(f){case"value":n=m;break;case"defaultValue":l=m;break;case"children":u=m;break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:qe(e,t,f,m,a,null)}ys(e,n,l,u);return;case"option":for(v in a)if(a.hasOwnProperty(v)&&(n=a[v],n!=null))switch(v){case"selected":e.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:qe(e,t,v,n,a,null)}return;case"dialog":ce("beforetoggle",e),ce("toggle",e),ce("cancel",e),ce("close",e);break;case"iframe":case"object":ce("load",e);break;case"video":case"audio":for(n=0;n<kl.length;n++)ce(kl[n],e);break;case"image":ce("error",e),ce("load",e);break;case"details":ce("toggle",e);break;case"embed":case"source":case"link":ce("error",e),ce("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(E in a)if(a.hasOwnProperty(E)&&(n=a[E],n!=null))switch(E){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:qe(e,t,E,n,a,null)}return;default:if(Ni(t)){for(D in a)a.hasOwnProperty(D)&&(n=a[D],n!==void 0&&gu(e,t,D,n,a,void 0));return}}for(m in a)a.hasOwnProperty(m)&&(n=a[m],n!=null&&qe(e,t,m,n,a,null))}function Sh(e,t,a,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var l=null,u=null,f=null,m=null,v=null,E=null,D=null;for(A in a){var O=a[A];if(a.hasOwnProperty(A)&&O!=null)switch(A){case"checked":break;case"value":break;case"defaultValue":v=O;default:n.hasOwnProperty(A)||qe(e,t,A,null,n,O)}}for(var q in n){var A=n[q];if(O=a[q],n.hasOwnProperty(q)&&(A!=null||O!=null))switch(q){case"type":u=A;break;case"name":l=A;break;case"checked":E=A;break;case"defaultChecked":D=A;break;case"value":f=A;break;case"defaultValue":m=A;break;case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(s(137,t));break;default:A!==O&&qe(e,t,q,A,n,O)}}Ci(e,f,m,v,E,D,u,l);return;case"select":A=f=m=q=null;for(u in a)if(v=a[u],a.hasOwnProperty(u)&&v!=null)switch(u){case"value":break;case"multiple":A=v;default:n.hasOwnProperty(u)||qe(e,t,u,null,n,v)}for(l in n)if(u=n[l],v=a[l],n.hasOwnProperty(l)&&(u!=null||v!=null))switch(l){case"value":q=u;break;case"defaultValue":m=u;break;case"multiple":f=u;default:u!==v&&qe(e,t,l,u,n,v)}t=m,a=f,n=A,q!=null?vn(e,!!a,q,!1):!!n!=!!a&&(t!=null?vn(e,!!a,t,!0):vn(e,!!a,a?[]:"",!1));return;case"textarea":A=q=null;for(m in a)if(l=a[m],a.hasOwnProperty(m)&&l!=null&&!n.hasOwnProperty(m))switch(m){case"value":break;case"children":break;default:qe(e,t,m,null,n,l)}for(f in n)if(l=n[f],u=a[f],n.hasOwnProperty(f)&&(l!=null||u!=null))switch(f){case"value":q=l;break;case"defaultValue":A=l;break;case"children":break;case"dangerouslySetInnerHTML":if(l!=null)throw Error(s(91));break;default:l!==u&&qe(e,t,f,l,n,u)}gs(e,q,A);return;case"option":for(var Y in a)if(q=a[Y],a.hasOwnProperty(Y)&&q!=null&&!n.hasOwnProperty(Y))switch(Y){case"selected":e.selected=!1;break;default:qe(e,t,Y,null,n,q)}for(v in n)if(q=n[v],A=a[v],n.hasOwnProperty(v)&&q!==A&&(q!=null||A!=null))switch(v){case"selected":e.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:qe(e,t,v,q,n,A)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $ in a)q=a[$],a.hasOwnProperty($)&&q!=null&&!n.hasOwnProperty($)&&qe(e,t,$,null,n,q);for(E in n)if(q=n[E],A=a[E],n.hasOwnProperty(E)&&q!==A&&(q!=null||A!=null))switch(E){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,t));break;default:qe(e,t,E,q,n,A)}return;default:if(Ni(t)){for(var Te in a)q=a[Te],a.hasOwnProperty(Te)&&q!==void 0&&!n.hasOwnProperty(Te)&&gu(e,t,Te,void 0,n,q);for(D in n)q=n[D],A=a[D],!n.hasOwnProperty(D)||q===A||q===void 0&&A===void 0||gu(e,t,D,q,n,A);return}}for(var S in a)q=a[S],a.hasOwnProperty(S)&&q!=null&&!n.hasOwnProperty(S)&&qe(e,t,S,null,n,q);for(O in n)q=n[O],A=a[O],!n.hasOwnProperty(O)||q===A||q==null&&A==null||qe(e,t,O,q,n,A)}function jd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function wh(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,a=performance.getEntriesByType("resource"),n=0;n<a.length;n++){var l=a[n],u=l.transferSize,f=l.initiatorType,m=l.duration;if(u&&m&&jd(f)){for(f=0,m=l.responseEnd,n+=1;n<a.length;n++){var v=a[n],E=v.startTime;if(E>m)break;var D=v.transferSize,O=v.initiatorType;D&&jd(O)&&(v=v.responseEnd,f+=D*(v<m?1:(m-E)/(v-E)))}if(--n,t+=8*(u+f)/(l.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var yu=null,vu=null;function ti(e){return e.nodeType===9?e:e.ownerDocument}function Ed(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qd(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function bu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Su=null;function jh(){var e=window.event;return e&&e.type==="popstate"?e===Su?!1:(Su=e,!0):(Su=null,!1)}var Td=typeof setTimeout=="function"?setTimeout:void 0,Eh=typeof clearTimeout=="function"?clearTimeout:void 0,Ad=typeof Promise=="function"?Promise:void 0,qh=typeof queueMicrotask=="function"?queueMicrotask:typeof Ad<"u"?function(e){return Ad.resolve(null).then(e).catch(Th)}:Td;function Th(e){setTimeout(function(){throw e})}function ka(e){return e==="head"}function Dd(e,t){var a=t,n=0;do{var l=a.nextSibling;if(e.removeChild(a),l&&l.nodeType===8)if(a=l.data,a==="/$"||a==="/&"){if(n===0){e.removeChild(l),Fn(t);return}n--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")n++;else if(a==="html")Ll(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ll(a);for(var u=a.firstChild;u;){var f=u.nextSibling,m=u.nodeName;u[ll]||m==="SCRIPT"||m==="STYLE"||m==="LINK"&&u.rel.toLowerCase()==="stylesheet"||a.removeChild(u),u=f}}else a==="body"&&Ll(e.ownerDocument.body);a=l}while(a);Fn(t)}function Cd(e,t){var a=e;e=0;do{var n=a.nextSibling;if(a.nodeType===1?t?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(t?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=n}while(a)}function wu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":wu(a),Ai(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Ah(e,t,a,n){for(;e.nodeType===1;){var l=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(n){if(!e[ll])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==l.rel||e.getAttribute("href")!==(l.href==null||l.href===""?null:l.href)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin)||e.getAttribute("title")!==(l.title==null?null:l.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(l.src==null?null:l.src)||e.getAttribute("type")!==(l.type==null?null:l.type)||e.getAttribute("crossorigin")!==(l.crossOrigin==null?null:l.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=l.name==null?null:""+l.name;if(l.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Rt(e.nextSibling),e===null)break}return null}function Dh(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Rt(e.nextSibling),e===null))return null;return e}function Od(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Rt(e.nextSibling),e===null))return null;return e}function ju(e){return e.data==="$?"||e.data==="$~"}function Eu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ch(e,t){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||a.readyState!=="loading")t();else{var n=function(){t(),a.removeEventListener("DOMContentLoaded",n)};a.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}function Rt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var qu=null;function Nd(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(t===0)return Rt(e.nextSibling);t--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(t===0)return e;t--}else a!=="/$"&&a!=="/&"||t++}e=e.previousSibling}return null}function zd(e,t,a){switch(t=ti(a),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Ll(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ai(e)}var Ut=new Map,xd=new Set;function ai(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pa=B.d;B.d={f:Oh,r:Nh,D:Mh,C:zh,L:xh,m:Rh,X:Bh,S:Uh,M:kh};function Oh(){var e=pa.f(),t=Kr();return e||t}function Nh(e){var t=pn(e);t!==null&&t.tag===5&&t.type==="form"?Wo(t):pa.r(e)}var Jn=typeof document>"u"?null:document;function Rd(e,t,a){var n=Jn;if(n&&typeof t=="string"&&t){var l=Dt(t);l='link[rel="'+e+'"][href="'+l+'"]',typeof a=="string"&&(l+='[crossorigin="'+a+'"]'),xd.has(l)||(xd.add(l),e={rel:e,crossOrigin:a,href:t},n.querySelector(l)===null&&(t=n.createElement("link"),lt(t,"link",e),Je(t),n.head.appendChild(t)))}}function Mh(e){pa.D(e),Rd("dns-prefetch",e,null)}function zh(e,t){pa.C(e,t),Rd("preconnect",e,t)}function xh(e,t,a){pa.L(e,t,a);var n=Jn;if(n&&e&&t){var l='link[rel="preload"][as="'+Dt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(l+='[imagesrcset="'+Dt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(l+='[imagesizes="'+Dt(a.imageSizes)+'"]')):l+='[href="'+Dt(e)+'"]';var u=l;switch(t){case"style":u=$n(e);break;case"script":u=Wn(e)}Ut.has(u)||(e=z({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Ut.set(u,e),n.querySelector(l)!==null||t==="style"&&n.querySelector(Yl(u))||t==="script"&&n.querySelector(Gl(u))||(t=n.createElement("link"),lt(t,"link",e),Je(t),n.head.appendChild(t)))}}function Rh(e,t){pa.m(e,t);var a=Jn;if(a&&e){var n=t&&typeof t.as=="string"?t.as:"script",l='link[rel="modulepreload"][as="'+Dt(n)+'"][href="'+Dt(e)+'"]',u=l;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=Wn(e)}if(!Ut.has(u)&&(e=z({rel:"modulepreload",href:e},t),Ut.set(u,e),a.querySelector(l)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Gl(u)))return}n=a.createElement("link"),lt(n,"link",e),Je(n),a.head.appendChild(n)}}}function Uh(e,t,a){pa.S(e,t,a);var n=Jn;if(n&&e){var l=gn(n).hoistableStyles,u=$n(e);t=t||"default";var f=l.get(u);if(!f){var m={loading:0,preload:null};if(f=n.querySelector(Yl(u)))m.loading=5;else{e=z({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Ut.get(u))&&Tu(e,a);var v=f=n.createElement("link");Je(v),lt(v,"link",e),v._p=new Promise(function(E,D){v.onload=E,v.onerror=D}),v.addEventListener("load",function(){m.loading|=1}),v.addEventListener("error",function(){m.loading|=2}),m.loading|=4,ni(f,t,n)}f={type:"stylesheet",instance:f,count:1,state:m},l.set(u,f)}}}function Bh(e,t){pa.X(e,t);var a=Jn;if(a&&e){var n=gn(a).hoistableScripts,l=Wn(e),u=n.get(l);u||(u=a.querySelector(Gl(l)),u||(e=z({src:e,async:!0},t),(t=Ut.get(l))&&Au(e,t),u=a.createElement("script"),Je(u),lt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(l,u))}}function kh(e,t){pa.M(e,t);var a=Jn;if(a&&e){var n=gn(a).hoistableScripts,l=Wn(e),u=n.get(l);u||(u=a.querySelector(Gl(l)),u||(e=z({src:e,async:!0,type:"module"},t),(t=Ut.get(l))&&Au(e,t),u=a.createElement("script"),Je(u),lt(u,"link",e),a.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},n.set(l,u))}}function Ud(e,t,a,n){var l=(l=Re.current)?ai(l):null;if(!l)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=$n(a.href),a=gn(l).hoistableStyles,n=a.get(t),n||(n={type:"style",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=$n(a.href);var u=gn(l).hoistableStyles,f=u.get(e);if(f||(l=l.ownerDocument||l,f={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,f),(u=l.querySelector(Yl(e)))&&!u._p&&(f.instance=u,f.state.loading=5),Ut.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ut.set(e,a),u||Hh(l,e,a,f.state))),t&&n===null)throw Error(s(528,""));return f}if(t&&n!==null)throw Error(s(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Wn(a),a=gn(l).hoistableScripts,n=a.get(t),n||(n={type:"script",instance:null,count:0,state:null},a.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function $n(e){return'href="'+Dt(e)+'"'}function Yl(e){return'link[rel="stylesheet"]['+e+"]"}function Bd(e){return z({},e,{"data-precedence":e.precedence,precedence:null})}function Hh(e,t,a,n){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?n.loading=1:(t=e.createElement("link"),n.preload=t,t.addEventListener("load",function(){return n.loading|=1}),t.addEventListener("error",function(){return n.loading|=2}),lt(t,"link",a),Je(t),e.head.appendChild(t))}function Wn(e){return'[src="'+Dt(e)+'"]'}function Gl(e){return"script[async]"+e}function kd(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+Dt(a.href)+'"]');if(n)return t.instance=n,Je(n),n;var l=z({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return n=(e.ownerDocument||e).createElement("style"),Je(n),lt(n,"style",l),ni(n,a.precedence,e),t.instance=n;case"stylesheet":l=$n(a.href);var u=e.querySelector(Yl(l));if(u)return t.state.loading|=4,t.instance=u,Je(u),u;n=Bd(a),(l=Ut.get(l))&&Tu(n,l),u=(e.ownerDocument||e).createElement("link"),Je(u);var f=u;return f._p=new Promise(function(m,v){f.onload=m,f.onerror=v}),lt(u,"link",n),t.state.loading|=4,ni(u,a.precedence,e),t.instance=u;case"script":return u=Wn(a.src),(l=e.querySelector(Gl(u)))?(t.instance=l,Je(l),l):(n=a,(l=Ut.get(u))&&(n=z({},a),Au(n,l)),e=e.ownerDocument||e,l=e.createElement("script"),Je(l),lt(l,"link",n),e.head.appendChild(l),t.instance=l);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(n=t.instance,t.state.loading|=4,ni(n,a.precedence,e));return t.instance}function ni(e,t,a){for(var n=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),l=n.length?n[n.length-1]:null,u=l,f=0;f<n.length;f++){var m=n[f];if(m.dataset.precedence===t)u=m;else if(u!==l)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Tu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Au(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var li=null;function Hd(e,t,a){if(li===null){var n=new Map,l=li=new Map;l.set(a,n)}else l=li,n=l.get(a),n||(n=new Map,l.set(a,n));if(n.has(e))return n;for(n.set(e,null),a=a.getElementsByTagName(e),l=0;l<a.length;l++){var u=a[l];if(!(u[ll]||u[et]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var f=u.getAttribute(t)||"";f=e+f;var m=n.get(f);m?m.push(u):n.set(f,[u])}}return n}function Ld(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Lh(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Yd(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Yh(e,t,a,n){if(a.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var l=$n(n.href),u=t.querySelector(Yl(l));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=ri.bind(e),t.then(e,e)),a.state.loading|=4,a.instance=u,Je(u);return}u=t.ownerDocument||t,n=Bd(n),(l=Ut.get(l))&&Tu(n,l),u=u.createElement("link"),Je(u);var f=u;f._p=new Promise(function(m,v){f.onload=m,f.onerror=v}),lt(u,"link",n),a.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,t),(t=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ri.bind(e),t.addEventListener("load",a),t.addEventListener("error",a))}}var Du=0;function Gh(e,t){return e.stylesheets&&e.count===0&&ci(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var n=setTimeout(function(){if(e.stylesheets&&ci(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Du===0&&(Du=62500*wh());var l=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&ci(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Du?50:800)+t);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(l)}}:null}function ri(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ci(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ii=null;function ci(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ii=new Map,t.forEach(Qh,e),ii=null,ri.call(e))}function Qh(e,t){if(!(t.state.loading&4)){var a=ii.get(e);if(a)var n=a.get(null);else{a=new Map,ii.set(e,a);for(var l=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<l.length;u++){var f=l[u];(f.nodeName==="LINK"||f.getAttribute("media")!=="not all")&&(a.set(f.dataset.precedence,f),n=f)}n&&a.set(null,n)}l=t.instance,f=l.getAttribute("data-precedence"),u=a.get(f)||n,u===n&&a.set(null,l),a.set(f,l),this.count++,n=ri.bind(this),l.addEventListener("load",n),l.addEventListener("error",n),u?u.parentNode.insertBefore(l,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(l,e.firstChild)),t.state.loading|=4}}var Ql={$$typeof:I,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Xh(e,t,a,n,l,u,f,m,v){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ji(0),this.hiddenUpdates=ji(null),this.identifierPrefix=n,this.onUncaughtError=l,this.onCaughtError=u,this.onRecoverableError=f,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=v,this.incompleteTransitions=new Map}function Gd(e,t,a,n,l,u,f,m,v,E,D,O){return e=new Xh(e,t,a,f,v,E,D,O,m),t=1,u===!0&&(t|=24),u=vt(3,null,null,t),e.current=u,u.stateNode=e,t=cc(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:n,isDehydrated:a,cache:t},fc(u),e}function Qd(e){return e?(e=An,e):An}function Xd(e,t,a,n,l,u){l=Qd(l),n.context===null?n.context=l:n.pendingContext=l,n=Aa(t),n.payload={element:a},u=u===void 0?null:u,u!==null&&(n.callback=u),a=Da(e,n,t),a!==null&&(_t(a,e,t),Sl(a,e,t))}function Zd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Cu(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function Vd(e){if(e.tag===13||e.tag===31){var t=Wa(e,67108864);t!==null&&_t(t,e,67108864),Cu(e,67108864)}}function Kd(e){if(e.tag===13||e.tag===31){var t=Et();t=Ei(t);var a=Wa(e,t);a!==null&&_t(a,e,t),Cu(e,t)}}var ui=!0;function Zh(e,t,a,n){var l=T.T;T.T=null;var u=B.p;try{B.p=2,Ou(e,t,a,n)}finally{B.p=u,T.T=l}}function Vh(e,t,a,n){var l=T.T;T.T=null;var u=B.p;try{B.p=8,Ou(e,t,a,n)}finally{B.p=u,T.T=l}}function Ou(e,t,a,n){if(ui){var l=Nu(n);if(l===null)pu(e,t,n,si,a),$d(e,n);else if(Jh(l,e,t,a,n))n.stopPropagation();else if($d(e,n),t&4&&-1<Kh.indexOf(e)){for(;l!==null;){var u=pn(l);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var f=Za(u.pendingLanes);if(f!==0){var m=u;for(m.pendingLanes|=2,m.entangledLanes|=2;f;){var v=1<<31-gt(f);m.entanglements[1]|=v,f&=~v}Ft(u),(ve&6)===0&&(Zr=ht()+500,Bl(0))}}break;case 31:case 13:m=Wa(u,2),m!==null&&_t(m,u,2),Kr(),Cu(u,2)}if(u=Nu(n),u===null&&pu(e,t,n,si,a),u===l)break;l=u}l!==null&&n.stopPropagation()}else pu(e,t,n,null,a)}}function Nu(e){return e=zi(e),Mu(e)}var si=null;function Mu(e){if(si=null,e=hn(e),e!==null){var t=d(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===31){if(e=y(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return si=e,null}function Jd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mm()){case es:return 2;case ts:return 8;case Pl:case zm:return 32;case as:return 268435456;default:return 32}default:return 32}}var zu=!1,Ha=null,La=null,Ya=null,Xl=new Map,Zl=new Map,Ga=[],Kh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $d(e,t){switch(e){case"focusin":case"focusout":Ha=null;break;case"dragenter":case"dragleave":La=null;break;case"mouseover":case"mouseout":Ya=null;break;case"pointerover":case"pointerout":Xl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(t.pointerId)}}function Vl(e,t,a,n,l,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:a,eventSystemFlags:n,nativeEvent:u,targetContainers:[l]},t!==null&&(t=pn(t),t!==null&&Vd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Jh(e,t,a,n,l){switch(t){case"focusin":return Ha=Vl(Ha,e,t,a,n,l),!0;case"dragenter":return La=Vl(La,e,t,a,n,l),!0;case"mouseover":return Ya=Vl(Ya,e,t,a,n,l),!0;case"pointerover":var u=l.pointerId;return Xl.set(u,Vl(Xl.get(u)||null,e,t,a,n,l)),!0;case"gotpointercapture":return u=l.pointerId,Zl.set(u,Vl(Zl.get(u)||null,e,t,a,n,l)),!0}return!1}function Wd(e){var t=hn(e.target);if(t!==null){var a=d(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,us(e.priority,function(){Kd(a)});return}}else if(t===31){if(t=y(a),t!==null){e.blockedOn=t,us(e.priority,function(){Kd(a)});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=Nu(e.nativeEvent);if(a===null){a=e.nativeEvent;var n=new a.constructor(a.type,a);Mi=n,a.target.dispatchEvent(n),Mi=null}else return t=pn(a),t!==null&&Vd(t),e.blockedOn=a,!1;t.shift()}return!0}function Fd(e,t,a){oi(e)&&a.delete(t)}function $h(){zu=!1,Ha!==null&&oi(Ha)&&(Ha=null),La!==null&&oi(La)&&(La=null),Ya!==null&&oi(Ya)&&(Ya=null),Xl.forEach(Fd),Zl.forEach(Fd)}function fi(e,t){e.blockedOn===t&&(e.blockedOn=null,zu||(zu=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$h)))}var di=null;function Pd(e){di!==e&&(di=e,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){di===e&&(di=null);for(var t=0;t<e.length;t+=3){var a=e[t],n=e[t+1],l=e[t+2];if(typeof n!="function"){if(Mu(n||a)===null)continue;break}var u=pn(a);u!==null&&(e.splice(t,3),t-=3,Nc(u,{pending:!0,data:l,method:a.method,action:n},n,l))}}))}function Fn(e){function t(v){return fi(v,e)}Ha!==null&&fi(Ha,e),La!==null&&fi(La,e),Ya!==null&&fi(Ya,e),Xl.forEach(t),Zl.forEach(t);for(var a=0;a<Ga.length;a++){var n=Ga[a];n.blockedOn===e&&(n.blockedOn=null)}for(;0<Ga.length&&(a=Ga[0],a.blockedOn===null);)Wd(a),a.blockedOn===null&&Ga.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(n=0;n<a.length;n+=3){var l=a[n],u=a[n+1],f=l[ut]||null;if(typeof u=="function")f||Pd(a);else if(f){var m=null;if(u&&u.hasAttribute("formAction")){if(l=u,f=u[ut]||null)m=f.formAction;else if(Mu(l)!==null)continue}else m=f.action;typeof m=="function"?a[n+1]=m:(a.splice(n,3),n-=3),Pd(a)}}}function Id(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(f){return l=f})},focusReset:"manual",scroll:"manual"})}function t(){l!==null&&(l(),l=null),n||setTimeout(a,20)}function a(){if(!n&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,l=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(a,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),l!==null&&(l(),l=null)}}}function xu(e){this._internalRoot=e}mi.prototype.render=xu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var a=t.current,n=Et();Xd(a,n,e,t,null,null)},mi.prototype.unmount=xu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xd(e.current,2,null,e,null,null),Kr(),t[_n]=null}};function mi(e){this._internalRoot=e}mi.prototype.unstable_scheduleHydration=function(e){if(e){var t=cs();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ga.length&&t!==0&&t<Ga[a].priority;a++);Ga.splice(a,0,e),a===0&&Wd(e)}};var em=r.version;if(em!=="19.2.0")throw Error(s(527,em,"19.2.0"));B.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=M(t),e=e!==null?k(e):null,e=e===null?null:e.stateNode,e};var Wh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _i=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_i.isDisabled&&_i.supportsFiber)try{tl=_i.inject(Wh),pt=_i}catch{}}return Jl.createRoot=function(e,t){if(!o(e))throw Error(s(299));var a=!1,n="",l=cf,u=uf,f=sf;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onUncaughtError!==void 0&&(l=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(f=t.onRecoverableError)),t=Gd(e,1,!1,null,null,a,n,null,l,u,f,Id),e[_n]=t.current,hu(e),new xu(t)},Jl.hydrateRoot=function(e,t,a){if(!o(e))throw Error(s(299));var n=!1,l="",u=cf,f=uf,m=sf,v=null;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(l=a.identifierPrefix),a.onUncaughtError!==void 0&&(u=a.onUncaughtError),a.onCaughtError!==void 0&&(f=a.onCaughtError),a.onRecoverableError!==void 0&&(m=a.onRecoverableError),a.formState!==void 0&&(v=a.formState)),t=Gd(e,1,!0,t,a??null,n,l,v,u,f,m,Id),t.context=Qd(null),a=t.current,n=Et(),n=Ei(n),l=Aa(n),l.callback=null,Da(a,l,n),a=n,t.current.lanes=a,nl(t,a),Ft(t),e[_n]=t.current,hu(e),new mi(t)},Jl.version="19.2.0",Jl}var im;function rp(){if(im)return Uu.exports;im=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),Uu.exports=lp(),Uu.exports}var ip=rp();const cp=pm(ip),up="fieldsync-offline",sp=2,pe={PROJECTS:"projects",AREAS:"areas",CREW_CHECKINS:"crew_checkins",TM_TICKETS:"tm_tickets",DAILY_REPORTS:"daily_reports",MESSAGES:"messages",PENDING_ACTIONS:"pending_actions",CACHED_DATA:"cached_data"};let dn=null;const ga=()=>new Promise((i,r)=>{if(dn){i(dn);return}const c=indexedDB.open(up,sp);c.onerror=()=>{console.error("Failed to open offline database"),r(c.error)},c.onsuccess=()=>{dn=c.result,i(dn)},c.onupgradeneeded=s=>{const o=s.target.result;if(o.objectStoreNames.contains(pe.PROJECTS)||o.createObjectStore(pe.PROJECTS,{keyPath:"id"}).createIndex("company_id","company_id",{unique:!1}),o.objectStoreNames.contains(pe.AREAS)||o.createObjectStore(pe.AREAS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),o.objectStoreNames.contains(pe.CREW_CHECKINS)||o.createObjectStore(pe.CREW_CHECKINS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),o.objectStoreNames.contains(pe.TM_TICKETS)||o.createObjectStore(pe.TM_TICKETS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),o.objectStoreNames.contains(pe.DAILY_REPORTS)||o.createObjectStore(pe.DAILY_REPORTS,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),o.objectStoreNames.contains(pe.MESSAGES)||o.createObjectStore(pe.MESSAGES,{keyPath:"id"}).createIndex("project_id","project_id",{unique:!1}),!o.objectStoreNames.contains(pe.PENDING_ACTIONS)){const d=o.createObjectStore(pe.PENDING_ACTIONS,{keyPath:"id",autoIncrement:!0});d.createIndex("type","type",{unique:!1}),d.createIndex("created_at","created_at",{unique:!1})}o.objectStoreNames.contains(pe.CACHED_DATA)||o.createObjectStore(pe.CACHED_DATA,{keyPath:"key"})}}),mn=(i,r="readonly")=>{if(!dn)throw new Error("Database not initialized");return dn.transaction(i,r).objectStore(i)},Fl=async(i,r)=>(await ga(),new Promise((c,s)=>{const d=mn(i,"readwrite").put(r);d.onsuccess=()=>c(d.result),d.onerror=()=>s(d.error)})),vm=async(i,r)=>(await ga(),new Promise((c,s)=>{const o=dn.transaction(i,"readwrite"),d=o.objectStore(i);r.forEach(h=>d.put(h)),o.oncomplete=()=>c(),o.onerror=()=>s(o.error)})),op=async(i,r)=>(await ga(),new Promise((c,s)=>{const d=mn(i).get(r);d.onsuccess=()=>c(d.result),d.onerror=()=>s(d.error)})),bm=async i=>(await ga(),new Promise((r,c)=>{const o=mn(i).getAll();o.onsuccess=()=>r(o.result||[]),o.onerror=()=>c(o.error)})),Ju=async(i,r,c)=>(await ga(),new Promise((s,o)=>{const y=mn(i).index(r).getAll(c);y.onsuccess=()=>s(y.result||[]),y.onerror=()=>o(y.error)})),fp=async(i,r)=>(await ga(),new Promise((c,s)=>{const d=mn(i,"readwrite").delete(r);d.onsuccess=()=>c(),d.onerror=()=>s(d.error)})),We={UPDATE_AREA_STATUS:"UPDATE_AREA_STATUS",CREATE_TM_TICKET:"CREATE_TM_TICKET",SAVE_CREW_CHECKIN:"SAVE_CREW_CHECKIN",SUBMIT_DAILY_REPORT:"SUBMIT_DAILY_REPORT",SEND_MESSAGE:"SEND_MESSAGE",CREATE_MATERIAL_REQUEST:"CREATE_MATERIAL_REQUEST"},Bt=async(i,r,c={})=>{await ga();const s={type:i,payload:r,metadata:c,created_at:new Date().toISOString(),attempts:0,last_error:null};return new Promise((o,d)=>{const y=mn(pe.PENDING_ACTIONS,"readwrite").add(s);y.onsuccess=()=>{o(y.result)},y.onerror=()=>d(y.error)})},Sm=async()=>bm(pe.PENDING_ACTIONS),yi=async()=>(await Sm()).length,dp=async i=>fp(pe.PENDING_ACTIONS,i),mp=async(i,r)=>(await ga(),new Promise((c,s)=>{const o=mn(pe.PENDING_ACTIONS,"readwrite"),d=o.get(i);d.onsuccess=()=>{const h=d.result;if(h){const y={...h,...r},w=o.put(y);w.onsuccess=()=>c(y),w.onerror=()=>s(w.error)}else s(new Error("Action not found"))},d.onerror=()=>s(d.error)})),_p=async i=>vm(pe.PROJECTS,i),cm=async i=>i?Ju(pe.PROJECTS,"company_id",i):bm(pe.PROJECTS),hp=async i=>vm(pe.AREAS,i),um=async i=>Ju(pe.AREAS,"project_id",i),Hu=async(i,r)=>{const c=await op(pe.AREAS,i);return c&&(c.status=r,c.updated_at=new Date().toISOString(),await Fl(pe.AREAS,c)),c},Lu=async i=>Fl(pe.CREW_CHECKINS,i),sm=async i=>Fl(pe.TM_TICKETS,i),kt=()=>{const i=new Uint8Array(6);crypto.getRandomValues(i);const r=Array.from(i,c=>c.toString(36)).join("");return`temp_${Date.now()}_${r}`},Pn=async i=>Fl(pe.DAILY_REPORTS,i),pp=async(i,r)=>(await Ju(pe.DAILY_REPORTS,"project_id",i)).find(s=>s.report_date===r)||null,om=async i=>Fl(pe.MESSAGES,i);let $u=navigator.onLine;const Qu=new Set,Wu=i=>(Qu.add(i),()=>Qu.delete(i)),Ht=()=>$u,fm=i=>{$u=i,Qu.forEach(r=>r(i))};typeof window<"u"&&(window.addEventListener("online",()=>{fm(!0)}),window.addEventListener("offline",()=>{fm(!1)}));let Yu=!1;const wm=async i=>{if(Yu||!$u)return{synced:0,failed:0};Yu=!0;const r={synced:0,failed:0};try{const c=await Sm();for(const s of c)try{await gp(s,i),await dp(s.id),r.synced++}catch(o){console.error(`Failed to sync action ${s.type}:`,o),r.failed++,await mp(s.id,{attempts:(s.attempts||0)+1,last_error:o.message,last_attempt:new Date().toISOString()})}}finally{Yu=!1}return r},gp=async(i,r)=>{const{type:c,payload:s}=i;switch(c){case We.UPDATE_AREA_STATUS:return r.updateAreaStatus(s.areaId,s.status);case We.CREATE_TM_TICKET:const o=await r.createTMTicket(s.ticket);return s.workers?.length>0&&await r.addTMWorkers(o.id,s.workers),s.items?.length>0&&await r.addTMItems(o.id,s.items),o;case We.SAVE_CREW_CHECKIN:return r.saveCrewCheckin(s.projectId,s.workers,s.checkInDate);case We.SUBMIT_DAILY_REPORT:return await r.saveDailyReport(s.projectId,s.reportData),r.submitDailyReport(s.projectId,s.submittedBy);case We.SEND_MESSAGE:return r.sendMessage(s.projectId,s.senderType,s.senderName,s.content);case We.CREATE_MATERIAL_REQUEST:return r.createMaterialRequest(s.projectId,s.items,s.requestedBy,s.neededBy,s.priority,s.notes);default:throw new Error(`Unknown action type: ${c}`)}},yp={slowQueryThreshold:200},le={query(i,r){const c={type:"query",operation:i,duration_ms:r.duration,rows_returned:r.rows,company_id:r.company_id||null,project_id:r.project_id||null,user_id:r.user_id||null,timestamp:new Date().toISOString()};r.duration>=yp.slowQueryThreshold&&Gu("query",c)},error(i,r){const c={type:"error",category:i,severity:r.severity||"error",error_code:r.code||null,message:r.message,company_id:r.company_id||null,user_id:r.user_id||null,project_id:r.project_id||null,operation:r.operation||null,context:r.extra||{},timestamp:new Date().toISOString()};Gu("error",c)},storage(i,r){const c={type:"storage",operation:i,company_id:r.company_id||null,project_id:r.project_id||null,file_size_bytes:r.size||0,duration_ms:r.duration||0,success:r.success!==!1,error_message:r.error||null,timestamp:new Date().toISOString()};(!c.success||c.duration_ms>5e3)&&Gu("storage",c)},activity(i,r){}};async function Gu(i,r){try{i==="error"?await _.rpc("log_error",{p_severity:r.severity,p_category:r.category,p_message:r.message,p_company_id:r.company_id,p_user_id:r.user_id,p_project_id:r.project_id,p_operation:r.operation,p_error_code:r.error_code,p_context:r.context||{}}):i==="query"&&await _.rpc("log_query_metric",{p_operation:r.operation,p_duration_ms:r.duration_ms,p_rows_returned:r.rows_returned,p_company_id:r.company_id,p_project_id:r.project_id,p_user_id:r.user_id,p_context:{}})}catch{}}le.wrapQuery=function(i,r){return async function(...c){const s=performance.now();try{const o=await r.apply(this,c),h={duration:Math.round(performance.now()-s),rows:Array.isArray(o)?o.length:void 0};return le.query(i,h),o}catch(o){const d=Math.round(performance.now()-s);throw le.error("database",{message:o.message,operation:i,severity:"error",extra:{duration:d}}),o}}};le.time=async function(i,r){const c=performance.now();try{const s=await r(),o=Math.round(performance.now()-c);return le.query(i,{duration:o}),s}catch(s){throw le.error("general",{message:s.message,operation:i}),s}};const jm="https://cegifnrcwdilromcyouq.supabase.co",Fu="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNlZ2lmbnJjd2RpbHJvbWN5b3VxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ2NTQ5OTAsImV4cCI6MjA4MDIzMDk5MH0.qAiBG5XaB0C1E0U2tQbQkrhpm1iUhM6A2MXngEHhX4A",p=!!Fu;ga().catch(i=>console.error("Failed to init offline DB:",i));const _=p?gm(jm,Fu):null,Xu="fieldsync_field_session";let Wl=null;const Pu=()=>{if(Wl)return Wl;try{const i=sessionStorage.getItem(Xu);if(i)return Wl=JSON.parse(i),Wl}catch{}return null},Zu=i=>{Wl=i,i?sessionStorage.setItem(Xu,JSON.stringify(i)):sessionStorage.removeItem(Xu)},Em=async()=>{const i=Pu();if(i?.token&&p)try{await _.rpc("invalidate_field_session",{p_session_token:i.token})}catch{}Zu(null)};let $l=null;const qm=()=>{const i=Pu();return!i?.token||!p?_:((!$l||$l._sessionToken!==i.token)&&($l=gm(jm,Fu,{global:{headers:{"x-field-session":i.token}}}),$l._sessionToken=i.token),$l)},qt=()=>p?Pu()?.token?qm():_:null,Vu="fieldsync_data",vi="fieldsync_user",vp=()=>{const i="fieldsync_device_id";let r=localStorage.getItem(i);return r||(r=crypto.randomUUID(),localStorage.setItem(i,r)),r},dm={projects:[],areas:[],users:[],assignments:[]},G=()=>{try{const i=localStorage.getItem(Vu);return i?JSON.parse(i):dm}catch{return localStorage.removeItem(Vu),dm}},de=i=>{localStorage.setItem(Vu,JSON.stringify(i))},hi=()=>{try{const i=localStorage.getItem(vi);return i?JSON.parse(i):null}catch{return localStorage.removeItem(vi),null}},pi=i=>{i?localStorage.setItem(vi,JSON.stringify(i)):localStorage.removeItem(vi)},Ku={async signUp(i,r,c,s){if(p){const{data:o,error:d}=await _.auth.signUp({email:i,password:r,options:{data:{name:c,role:s}}});if(d)throw d;return o}else{const o=G(),d={id:crypto.randomUUID(),email:i,name:c,role:s,created_at:new Date().toISOString()};return o.users.push(d),de(o),pi(d),{user:d}}},async signIn(i,r){if(p){const{data:c,error:s}=await _.auth.signInWithPassword({email:i,password:r});if(s)throw s;return c}else{const s=G().users.find(o=>o.email===i);if(!s)throw new Error("User not found");return pi(s),{user:s}}},async signOut(){if(p){const{error:i}=await _.auth.signOut();if(i)throw i}else pi(null)},async getUser(){if(p){const{data:{user:i}}=await _.auth.getUser();return i}else return hi()},async getProfile(){if(p){const{data:{user:i}}=await _.auth.getUser();if(!i)return null;const{data:r,error:c}=await _.from("users").select("*").eq("id",i.id).single();return c?{id:i.id,email:i.email,name:i.user_metadata?.name||"",role:i.user_metadata?.role||"foreman"}:r}else return hi()},async updateRole(i,r){if(p){const{data:c,error:s}=await _.from("users").update({role:r}).eq("id",i).select().single();if(s)throw s;return c}else{const c=G(),s=c.users.find(o=>o.id===i);return s&&(s.role=r,de(c),hi()?.id===i&&pi(s)),s}},onAuthStateChange(i){if(p)return _.auth.onAuthStateChange(i);{const r=hi();return i(r?"SIGNED_IN":"SIGNED_OUT",{user:r}),{data:{subscription:{unsubscribe:()=>{}}}}}}},xe={async getProjects(i=null,r=!1){if(p){if(!Ht()){const s=await cm(i);return r?s:s.filter(o=>o.status!=="archived")}const c=performance.now();try{let s=_.from("projects").select("*").order("created_at",{ascending:!1});i&&(s=s.eq("company_id",i)),r||(s=s.eq("status","active"));const{data:o,error:d}=await s,h=Math.round(performance.now()-c);if(le.query("getProjects",{duration:h,rows:o?.length,company_id:i}),d){le.error("database",{message:d.message,operation:"getProjects",company_id:i});const y=await cm(i);if(y.length>0)return y;throw d}return o?.length>0&&_p(o).catch(y=>console.error("Failed to cache projects:",y)),o}catch(s){throw le.error("database",{message:s.message,operation:"getProjects",company_id:i}),s}}else{const c=G().projects;return r?c:c.filter(s=>s.status!=="archived")}},async getProjectsPaginated(i,{page:r=0,limit:c=25,status:s="active"}={}){if(p){const h=performance.now();try{let y=_.from("projects").select("*",{count:"exact"}).eq("company_id",i).order("created_at",{ascending:!1}).range(r*c,(r+1)*c-1);s!=="all"&&(y=y.eq("status",s));const{data:w,error:M,count:k}=await y,z=Math.round(performance.now()-h);if(le.query("getProjectsPaginated",{duration:z,rows:w?.length,page:r,company_id:i}),M)throw M;return{projects:w||[],totalCount:k||0,hasMore:(r+1)*c<(k||0),page:r,limit:c}}catch(y){throw le.error("database",{message:y.message,operation:"getProjectsPaginated",company_id:i}),y}}const o=G().projects.filter(h=>h.company_id===i&&(s==="all"||h.status===s)),d=r*c;return{projects:o.slice(d,d+c),totalCount:o.length,hasMore:d+c<o.length,page:r,limit:c}},async getProjectsWithSummary(i){if(p){const r=performance.now();try{const{data:c,error:s}=await _.from("projects").select(`
            *,
            areas:areas(count),
            tickets:t_and_m_tickets(count),
            pending_tickets:t_and_m_tickets(count),
            daily_reports:daily_reports(count)
          `).eq("company_id",i).eq("status","active").eq("pending_tickets.status","pending").order("created_at",{ascending:!1}),o=Math.round(performance.now()-r);if(le.query("getProjectsWithSummary",{duration:o,rows:c?.length,company_id:i}),s)throw s;return(c||[]).map(d=>({...d,areaCount:d.areas?.[0]?.count||0,ticketCount:d.tickets?.[0]?.count||0,pendingTicketCount:d.pending_tickets?.[0]?.count||0,reportCount:d.daily_reports?.[0]?.count||0,areas:void 0,tickets:void 0,pending_tickets:void 0,daily_reports:void 0}))}catch(c){return le.error("database",{message:c.message,operation:"getProjectsWithSummary",company_id:i}),this.getProjects(i)}}return G().projects.filter(r=>r.company_id===i&&r.status==="active")},async getProjectDashboardSummary(i){if(p){const r=performance.now();try{const{data:c,error:s}=await _.rpc("get_project_dashboard_summary",{p_company_id:i}),o=Math.round(performance.now()-r);if(le.query("getProjectDashboardSummary",{duration:o,rows:c?.length,company_id:i}),s){if(s.message?.includes("function")||s.code==="42883")return this.getProjectsWithSummary(i);throw s}return(c||[]).map(d=>({id:d.project_id,name:d.project_name,status:d.project_status,job_number:d.project_number,address:d.project_address,pin:d.project_pin,created_at:d.created_at,start_date:d.start_date,end_date:d.end_date,contract_value:Number(d.contract_value)||0,work_type:d.work_type||"demolition",job_type:d.job_type||"standard",general_contractor:d.general_contractor||"",areaCount:Number(d.total_areas)||0,completedAreas:Number(d.completed_areas)||0,inProgressAreas:Number(d.in_progress_areas)||0,pendingAreas:Number(d.pending_areas)||0,ticketCount:Number(d.total_tickets)||0,pendingTicketCount:Number(d.pending_tickets)||0,submittedTicketCount:Number(d.submitted_tickets)||0,approvedTicketCount:Number(d.approved_tickets)||0,totalLaborHours:Number(d.total_labor_hours)||0,todayLaborHours:Number(d.today_labor_hours)||0,todayWorkerCount:Number(d.today_worker_count)||0,lastActivityAt:d.last_activity_at,dailyReportsThisWeek:Number(d.daily_reports_this_week)||0,corCount:Number(d.cor_count)||0,pendingCorCount:Number(d.pending_cor_count)||0,disposalLoadsToday:Number(d.disposal_loads_today)||0}))}catch(c){return le.error("database",{message:c.message,operation:"getProjectDashboardSummary",company_id:i}),this.getProjectsWithSummary(i)}}return G().projects.filter(r=>r.company_id===i&&r.status==="active")},async getArchivedProjects(i){if(p){const{data:r,error:c}=await _.from("projects").select("*").eq("company_id",i).eq("status","archived").order("archived_at",{ascending:!1});if(c)throw c;return r}else return G().projects.filter(r=>r.status==="archived")},async getProjectCount(i){if(p){const{count:r,error:c}=await _.from("projects").select("*",{count:"exact",head:!0}).eq("company_id",i).in("status",["active","archived"]);if(c)throw c;return r||0}else return G().projects.filter(c=>c.company_id===i&&c.status!=="deleted").length},async archiveProject(i){if(p){const{data:r,error:c}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString()}).eq("id",i).select().single();if(c)throw c;return r}else{const r=G(),c=r.projects.find(s=>s.id===i);return c&&(c.status="archived",c.archived_at=new Date().toISOString(),de(r)),c}},async getProjectStorageStats(i){if(!p)return{photoCount:0,estimatedMB:0};const{data:r,error:c}=await _.from("t_and_m_tickets").select("photos").eq("project_id",i);if(c)throw c;let s=0;const o=[];r?.forEach(h=>{h.photos&&Array.isArray(h.photos)&&(s+=h.photos.length,o.push(...h.photos))});const d=s*1.5;return{photoCount:s,estimatedMB:d,photoUrls:o}},async archiveProjectDeep(i,r){if(!p)return null;const{photoUrls:c}=await this.getProjectStorageStats(i);if(c.length>0){const d=c.map(h=>{try{const w=new URL(h).pathname.match(/\/tm-photos\/(.+)$/);return w?w[1]:null}catch{return null}}).filter(Boolean);if(d.length>0)for(let h=0;h<d.length;h+=100){const y=d.slice(h,h+100);await _.storage.from("tm-photos").remove(y)}}await _.from("t_and_m_tickets").update({photos:[]}).eq("project_id",i);const{data:s,error:o}=await _.from("projects").update({status:"archived",archived_at:new Date().toISOString(),photos:[],storage_cleaned:!0}).eq("id",i).select().single();if(o)throw o;return{...s,photosDeleted:c.length}},async restoreProject(i){if(p){const{data:r,error:c}=await _.from("projects").update({status:"active",archived_at:null}).eq("id",i).select().single();if(c)throw c;return r}else{const r=G(),c=r.projects.find(s=>s.id===i);return c&&(c.status="active",c.archived_at=null,de(r)),c}},async getProject(i){if(p){const{data:r,error:c}=await _.from("projects").select("*").eq("id",i).single();if(c)throw c;return r}else return G().projects.find(r=>r.id===i)},async createProject(i){if(p){const{data:r,error:c}=await _.from("projects").insert({...i,status:"active"}).select().single();if(c)throw console.error("Supabase createProject error:",c.message,c.details,c.hint),c;return r}else{const r=G(),c={...i,id:crypto.randomUUID(),status:"active",created_at:new Date().toISOString()};return r.projects.push(c),de(r),c}},async getProjectByPin(i){if(p){const{data:r,error:c}=await _.from("projects").select("*").eq("pin",i).eq("status","active").single();return c?null:r}else return G().projects.find(c=>c.pin===i&&c.status==="active")||null},async getProjectByPinAndCompany(i,r){if(p){const{data:c,error:s}=await _.from("projects").select("*").eq("pin",i).eq("company_id",r).eq("status","active").single();return s?null:c}else return G().projects.find(s=>s.pin===i&&s.company_id===r&&s.status==="active")||null},async getProjectByPinSecure(i,r){if(p){const c=vp(),{data:s,error:o}=await _.rpc("validate_pin_and_create_session",{p_pin:i,p_company_code:r,p_device_id:c,p_ip_address:null});if(o)return{success:!1,rateLimited:!1,project:null,error:o.message};if(!s||s.length===0)return{success:!1,rateLimited:!1,project:null};const d=s[0];if(d.error_code==="RATE_LIMITED")return{success:!1,rateLimited:!0,project:null};if(d.error_code==="INVALID_COMPANY"||d.error_code==="INVALID_PIN")return{success:!1,rateLimited:!1,project:null};if(!d.success||!d.project_id)return{success:!1,rateLimited:!1,project:null};Zu({token:d.session_token,projectId:d.project_id,companyId:d.company_id,projectName:d.project_name,companyName:d.company_name,createdAt:new Date().toISOString()});const h=qm(),{data:y}=await h.from("projects").select("*").eq("id",d.project_id).single();return{success:!0,rateLimited:!1,sessionToken:d.session_token,project:y||{id:d.project_id,name:d.project_name,company_id:d.company_id,status:"active"}}}else{const c=G(),o=(c.companies||[]).find(h=>h.code===r);if(!o)return{success:!1,rateLimited:!1,project:null};const d=c.projects.find(h=>h.pin===i&&h.company_id===o.id&&h.status==="active");if(d){const h=`demo_${Date.now()}_${Math.random().toString(36).slice(2)}`;Zu({token:h,projectId:d.id,companyId:o.id,projectName:d.name,companyName:o.name,createdAt:new Date().toISOString()})}return{success:!!d,rateLimited:!1,project:d||null}}},async isPinAvailable(i,r=null){if(p){let c=_.from("projects").select("id").eq("pin",i);r&&(c=c.neq("id",r));const{data:s,error:o}=await c;if(o)throw o;return s.length===0}else return!G().projects.some(s=>s.pin===i&&s.id!==r)},async updateProjectPin(i,r){if(p){const{data:c,error:s}=await _.from("projects").update({pin:r}).eq("id",i).select().single();if(s)throw s;return c}else{const c=G(),s=c.projects.find(o=>o.id===i);return s&&(s.pin=r,de(c)),s}},async updateProject(i,r){if(p){const{data:c,error:s}=await _.from("projects").update(r).eq("id",i).select().single();if(s)throw console.error("Error updating project:",s),s;return c}else{const c=G(),s=c.projects.find(o=>o.id===i);return s&&(Object.assign(s,r),de(c)),s}},async deleteProject(i){if(p){const{error:r}=await _.from("projects").delete().eq("id",i);if(r)throw r}else{const r=G();r.projects=r.projects.filter(c=>c.id!==i),r.areas=r.areas.filter(c=>c.project_id!==i),de(r)}},async getAreas(i){if(p){if(!Ht())return um(i);const r=qt(),{data:c,error:s}=await r.from("areas").select("*").eq("project_id",i).order("sort_order",{ascending:!0});if(s){const o=await um(i);if(o.length>0)return o;throw s}return c?.length>0&&hp(c).catch(o=>console.error("Failed to cache areas:",o)),c}else return G().areas.filter(r=>r.project_id===i)},async createArea(i){if(p){const r=qt(),{data:c,error:s}=await r.from("areas").insert(i).select().single();if(s)throw s;return c}else{const r=G(),c={...i,id:crypto.randomUUID(),created_at:new Date().toISOString()};return r.areas.push(c),de(r),c}},async updateAreaStatus(i,r){if(p){if(!Ht()){const d=await Hu(i,r);return await Bt(We.UPDATE_AREA_STATUS,{areaId:i,status:r}),d}const c=qt(),{data:s,error:o}=await c.from("areas").update({status:r}).eq("id",i).select().single();if(o){if(o.message?.includes("fetch")||o.message?.includes("network")){const d=await Hu(i,r);return await Bt(We.UPDATE_AREA_STATUS,{areaId:i,status:r}),d}throw o}return s&&Hu(i,r).catch(d=>console.error("Failed to update cached area:",d)),s}else{const c=G(),s=c.areas.find(o=>o.id===i);return s&&(s.status=r,s.updated_at=new Date().toISOString()),de(c),s}},async updateArea(i,r){if(p){const{data:c,error:s}=await _.from("areas").update(r).eq("id",i).select().single();if(s)throw s;return c}else{const c=G(),s=c.areas.find(o=>o.id===i);return s&&(Object.assign(s,r),s.updated_at=new Date().toISOString()),de(c),s}},async deleteArea(i){if(p){const{error:r}=await _.from("areas").delete().eq("id",i);if(r)throw r}else{const r=G();r.areas=r.areas.filter(c=>c.id!==i),de(r)}},subscribeToAreas(i,r){return p?_.channel(`areas:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"areas",filter:`project_id=eq.${i}`},r).subscribe():null},subscribeToMessages(i,r){return p?_.channel(`messages:${i}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${i}`},r).subscribe():null},subscribeToMaterialRequests(i,r){return p?_.channel(`material_requests:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"material_requests",filter:`project_id=eq.${i}`},r).subscribe():null},subscribeToDailyReports(i,r){return p?_.channel(`daily_reports:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"daily_reports",filter:`project_id=eq.${i}`},r).subscribe():null},subscribeToCrewCheckins(i,r){return p?_.channel(`crew_checkins:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"crew_checkins",filter:`project_id=eq.${i}`},r).subscribe():null},subscribeToInjuryReports(i,r){return p?_.channel(`injury_reports:${i}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${i}`},r).subscribe():null},subscribeToTMTickets(i,r){return p?_.channel(`tm_tickets:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${i}`},r).subscribe():null},subscribeToCompanyActivity(i,r,c){if(!p||!r||r.length===0)return null;const s=_.channel(`company_activity:${i}`);return r.forEach(o=>{s.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`project_id=eq.${o}`},d=>c.onMessage?.(d)),s.on("postgres_changes",{event:"INSERT",schema:"public",table:"material_requests",filter:`project_id=eq.${o}`},d=>c.onMaterialRequest?.(d)),s.on("postgres_changes",{event:"INSERT",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${o}`},d=>c.onTMTicket?.(d)),s.on("postgres_changes",{event:"UPDATE",schema:"public",table:"t_and_m_tickets",filter:`project_id=eq.${o}`},d=>c.onTMTicket?.(d)),s.on("postgres_changes",{event:"INSERT",schema:"public",table:"crew_checkins",filter:`project_id=eq.${o}`},d=>c.onCrewCheckin?.(d)),s.on("postgres_changes",{event:"UPDATE",schema:"public",table:"crew_checkins",filter:`project_id=eq.${o}`},d=>c.onCrewCheckin?.(d)),s.on("postgres_changes",{event:"UPDATE",schema:"public",table:"areas",filter:`project_id=eq.${o}`},d=>c.onAreaUpdate?.(d)),s.on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${o}`},d=>c.onCORChange?.(d))}),s.on("postgres_changes",{event:"INSERT",schema:"public",table:"injury_reports",filter:`company_id=eq.${i}`},o=>c.onInjuryReport?.(o)),s.subscribe()},unsubscribe(i){i&&p&&_.removeChannel(i)},async getAssignedProjects(i){if(p){const{data:r,error:c}=await _.from("project_assignments").select(`
          project_id,
          projects (*)
        `).eq("user_id",i);if(c)throw c;return r.map(s=>s.projects)}else{const r=G();return(r.assignments?.filter(s=>s.user_id===i)||[]).map(s=>r.projects.find(o=>o.id===s.project_id)).filter(Boolean)}},async assignUserToProject(i,r,c){if(p){const{data:s,error:o}=await _.from("project_assignments").insert({project_id:i,user_id:r,assigned_by:c}).select().single();if(o)throw o;return s}else{const s=G();s.assignments||(s.assignments=[]);const o={id:crypto.randomUUID(),project_id:i,user_id:r,assigned_by:c,assigned_at:new Date().toISOString()};return s.assignments.push(o),de(s),o}},async removeUserFromProject(i,r){if(p){const{error:c}=await _.from("project_assignments").delete().eq("project_id",i).eq("user_id",r);if(c)throw c}else{const c=G();c.assignments=c.assignments?.filter(s=>!(s.project_id===i&&s.user_id===r))||[],de(c)}},async getProjectAssignments(i){if(p){const{data:r,error:c}=await _.from("project_assignments").select(`
          user_id,
          users (id, email, name, role)
        `).eq("project_id",i);if(c)throw c;return r.map(s=>s.users)}else{const r=G();return(r.assignments?.filter(s=>s.project_id===i)||[]).map(s=>r.users.find(o=>o.id===s.user_id)).filter(Boolean)}},async getAllUsers(){if(p){const{data:i,error:r}=await _.from("users").select("*").order("name");if(r)throw r;return i}else return G().users||[]},async getForemen(){if(p){const{data:i,error:r}=await _.from("users").select("*").eq("role","foreman").order("name");if(r)throw r;return i}else return(G().users||[]).filter(i=>i.role==="foreman")},async logActivity(i,r,c,s,o,d){if(p){const{error:h}=await _.from("activity_log").insert({user_id:i,project_id:r,area_id:c,action:s,old_value:o,new_value:d});h&&console.error("Error logging activity:",h)}},async getProjectActivity(i,r=50){if(p){const{data:c,error:s}=await _.from("activity_log").select(`
          *,
          users (name, email),
          areas (name)
        `).eq("project_id",i).order("created_at",{ascending:!1}).limit(r);if(s)throw s;return c}return[]},async getMaterialsEquipment(i){if(p){const{data:r,error:c}=await _.from("materials_equipment").select("*").eq("company_id",i).eq("active",!0).order("category").order("name");if(c)throw c;return r}return[]},async getMaterialsEquipmentByCategory(i,r){if(p){const{data:c,error:s}=await _.from("materials_equipment").select("*").eq("company_id",i).eq("category",r).eq("active",!0).order("name");if(s)throw s;return c}return[]},async getAllMaterialsEquipment(i){if(p){const{data:r,error:c}=await _.from("materials_equipment").select("*").eq("company_id",i).order("category").order("name");if(c)throw c;return r}return[]},async createMaterialEquipment(i){if(p){const{data:r,error:c}=await _.from("materials_equipment").insert(i).select().single();if(c)throw c;return r}return null},async updateMaterialEquipment(i,r){if(p){const{data:c,error:s}=await _.from("materials_equipment").update(r).eq("id",i).select().single();if(s)throw s;return c}return null},async deleteMaterialEquipment(i){if(p){const{error:r}=await _.from("materials_equipment").update({active:!1}).eq("id",i);if(r)throw r}},async getLaborCategories(i){if(p){const{data:r,error:c}=await _.from("labor_categories").select("*").eq("company_id",i).eq("active",!0).order("sort_order").order("name");if(c)throw c;return r||[]}return[]},async createLaborCategory(i,r,c=0){if(p){const{data:s,error:o}=await _.from("labor_categories").insert({company_id:i,name:r,sort_order:c}).select().single();if(o)throw o;return s}return null},async updateLaborCategory(i,r){if(p){const{data:c,error:s}=await _.from("labor_categories").update(r).eq("id",i).select().single();if(s)throw s;return c}return null},async deleteLaborCategory(i){if(p){const{error:r}=await _.from("labor_categories").update({active:!1}).eq("id",i);if(r)throw r}},async getLaborClasses(i){if(p){const{data:r,error:c}=await _.from("labor_classes").select(`
          *,
          labor_categories (id, name)
        `).eq("company_id",i).eq("active",!0).order("sort_order").order("name");if(c)throw c;return r||[]}return[]},async getLaborClassesWithCategories(i){if(p){const[r,c]=await Promise.all([_.from("labor_categories").select("*").eq("company_id",i).eq("active",!0).order("sort_order").order("name"),_.from("labor_classes").select("*").eq("company_id",i).eq("active",!0).order("sort_order").order("name")]);if(r.error)throw r.error;if(c.error)throw c.error;return{categories:r.data||[],classes:c.data||[]}}return{categories:[],classes:[]}},async getLaborClassesForField(i){if(p){const{data:r,error:c}=await _.rpc("get_labor_classes_for_field",{p_company_id:i});if(c){console.error("Error loading field labor classes:",c);const[d,h]=await Promise.all([_.from("labor_categories").select("id, name").eq("company_id",i).eq("active",!0).order("name"),_.from("labor_classes").select("id, name, category_id").eq("company_id",i).eq("active",!0).order("name")]);return{categories:d.data||[],classes:h.data||[]}}const s=new Map,o=[];for(const d of r||[])d.category_id&&d.category_name&&!s.has(d.category_id)&&s.set(d.category_id,{id:d.category_id,name:d.category_name}),o.push({id:d.id,name:d.name,category_id:d.category_id});return{categories:Array.from(s.values()),classes:o}}return{categories:[],classes:[]}},async createLaborClass(i,r,c,s=0){if(p){const{data:o,error:d}=await _.from("labor_classes").insert({company_id:i,category_id:r,name:c,sort_order:s}).select().single();if(d)throw d;return o}return null},async updateLaborClass(i,r){if(p){const{data:c,error:s}=await _.from("labor_classes").update(r).eq("id",i).select().single();if(s)throw s;return c}return null},async deleteLaborClass(i){if(p){const{error:r}=await _.from("labor_classes").update({active:!1}).eq("id",i);if(r)throw r}},async getLaborClassRates(i){if(p){const{data:r,error:c}=await _.from("labor_class_rates").select("*").eq("labor_class_id",i);if(c)throw c;return r||[]}return[]},async getAllLaborClassRates(i){if(p){const{data:r,error:c}=await _.from("labor_classes").select(`
          id,
          name,
          labor_class_rates (*)
        `).eq("company_id",i).eq("active",!0);if(c)throw c;return r||[]}return[]},async saveLaborClassRates(i,r){if(p){const c=r.map(o=>({...o,labor_class_id:i})),{error:s}=await _.from("labor_class_rates").upsert(c,{onConflict:"labor_class_id,work_type,job_type"});if(s)throw s}},async getLaborClassRate(i,r,c){if(p){const{data:s,error:o}=await _.from("labor_class_rates").select("regular_rate, overtime_rate").eq("labor_class_id",i).eq("work_type",r).eq("job_type",c).single();if(o&&o.code!=="PGRST116")throw o;return s||null}return null},async getTMTickets(i){if(p){const r=performance.now(),c=qt();try{const{data:s,error:o}=await c.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `).eq("project_id",i).order("created_at",{ascending:!1}),d=Math.round(performance.now()-r);if(le.query("getTMTickets",{duration:d,rows:s?.length,project_id:i}),o)throw o;return s}catch(s){throw le.error("database",{message:s.message,operation:"getTMTickets",project_id:i}),s}}return[]},async getTMTicketsPaginated(i,{page:r=0,limit:c=25,status:s=null}={}){if(p){const o=performance.now(),d=qt();try{let h=d.from("t_and_m_tickets").select(`
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          `,{count:"exact"}).eq("project_id",i).order("created_at",{ascending:!1}).range(r*c,(r+1)*c-1);s&&(h=h.eq("status",s));const{data:y,error:w,count:M}=await h,k=Math.round(performance.now()-o);if(le.query("getTMTicketsPaginated",{duration:k,rows:y?.length,page:r,project_id:i}),w)throw w;return{tickets:y||[],totalCount:M||0,hasMore:(r+1)*c<(M||0),page:r,limit:c}}catch(h){throw le.error("database",{message:h.message,operation:"getTMTicketsPaginated",project_id:i}),h}}return{tickets:[],totalCount:0,hasMore:!1,page:0,limit:25}},async getChangeOrderTotals(i){if(p){const{data:r,error:c}=await _.from("t_and_m_tickets").select("ce_pco_number, change_order_value, status").eq("project_id",i).not("ce_pco_number","is",null).neq("ce_pco_number","");if(c)throw c;const s={};let o=0,d=0;return r?.forEach(h=>{const y=h.ce_pco_number;if(s[y]||(s[y]={approved:0,pending:0,count:0}),s[y].count++,h.status==="approved"||h.status==="billed"){const w=parseFloat(h.change_order_value)||0;s[y].approved+=w,o+=w}else h.status==="pending"&&d++}),{changeOrders:s,totalApprovedValue:o,pendingCount:d}}return{changeOrders:{},totalApprovedValue:0,pendingCount:0}},async getTMTicketsByStatus(i,r){if(p){const{data:c,error:s}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",i).eq("status",r).order("created_at",{ascending:!1});if(s)throw s;return c}return[]},async getCORTickets(i){if(p){const{data:r,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("assigned_cor_id",i).order("work_date",{ascending:!0});if(c)throw c;return r||[]}return[]},async createTMTicket(i){if(p){if(!Ht()){const s={id:kt(),project_id:i.project_id,work_date:i.work_date,ce_pco_number:i.ce_pco_number||null,assigned_cor_id:i.assigned_cor_id||null,notes:i.notes,photos:i.photos||[],status:"pending_sync",created_by_name:i.created_by_name||"Field User",created_at:new Date().toISOString(),_offline:!0};return await sm(s),await Bt(We.CREATE_TM_TICKET,{ticket:s,workers:i._workers||[],items:i._items||[]}),s}const{data:r,error:c}=await _.from("t_and_m_tickets").insert({project_id:i.project_id,work_date:i.work_date,ce_pco_number:i.ce_pco_number||null,assigned_cor_id:i.assigned_cor_id||null,notes:i.notes,photos:i.photos||[],status:"pending",created_by_name:i.created_by_name||"Field User"}).select().single();if(c){if(c.message?.includes("fetch")||c.message?.includes("network")){const s={id:kt(),...i,status:"pending_sync",_offline:!0};return await sm(s),await Bt(We.CREATE_TM_TICKET,{ticket:s,workers:i._workers||[],items:i._items||[]}),s}throw c}return r}return null},async addTMWorkers(i,r){if(p){const c=r.map(o=>({ticket_id:i,name:o.name,hours:o.hours,overtime_hours:o.overtime_hours||0,time_started:o.time_started||null,time_ended:o.time_ended||null,role:o.role||"Laborer"})),{error:s}=await _.from("t_and_m_workers").insert(c);if(s)throw s}},async addTMItems(i,r){if(p){const c=r.map(o=>({ticket_id:i,material_equipment_id:o.material_equipment_id||null,custom_name:o.custom_name||null,custom_category:o.custom_category||null,quantity:o.quantity})),{error:s}=await _.from("t_and_m_items").insert(c);if(s)throw s}},async getPreviousTicketCrew(i,r){if(!p)return null;const{data:c,error:s}=await _.from("t_and_m_tickets").select(`
        id,
        work_date,
        t_and_m_workers (*)
      `).eq("project_id",i).lt("work_date",r).order("work_date",{ascending:!1}).limit(1).single();if(s||!c)return null;const o=c.t_and_m_workers||[],d=o.filter(w=>["Foreman","General Foreman","Superintendent"].includes(w.role)).map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||"",role:w.role})),h=o.filter(w=>w.role==="Operator").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""})),y=o.filter(w=>w.role==="Laborer").map(w=>({name:w.name,hours:w.hours?.toString()||"",overtimeHours:w.overtime_hours?.toString()||"",timeStarted:w.time_started||"",timeEnded:w.time_ended||""}));return{workDate:c.work_date,supervision:d.length>0?d:null,operators:h.length>0?h:null,laborers:y.length>0?y:null,totalWorkers:o.length}},async updateTMTicketStatus(i,r){if(p){const{data:c,error:s}=await _.from("t_and_m_tickets").update({status:r}).eq("id",i).select().single();if(s)throw s;return c}return null},async approveTMTicket(i,r,c,s=null){if(p){const o={status:"approved",approved_by_user_id:r,approved_by_name:c,approved_at:new Date().toISOString(),rejected_by_user_id:null,rejected_by_name:null,rejected_at:null,rejection_reason:null};s!==null&&(o.change_order_value=parseFloat(s)||0);const{data:d,error:h}=await _.from("t_and_m_tickets").update(o).eq("id",i).select().single();if(h)throw h;return d}return null},async rejectTMTicket(i,r,c,s=""){if(p){const{data:o,error:d}=await _.from("t_and_m_tickets").update({status:"rejected",rejected_by_user_id:r,rejected_by_name:c,rejected_at:new Date().toISOString(),rejection_reason:s,approved_by_user_id:null,approved_by_name:null,approved_at:null}).eq("id",i).select().single();if(d)throw d;return o}return null},canApproveTickets(i){return["owner","admin","manager"].includes(i)},async updateTMTicketPhotos(i,r){if(p){const{data:c,error:s}=await _.from("t_and_m_tickets").update({photos:r}).eq("id",i).select().single();if(s)throw s;return c}return null},async saveTMClientSignature(i,r){if(p){const{data:c,error:s}=await _.from("t_and_m_tickets").update({client_signature_data:r.signature,client_signature_name:r.signerName,client_signature_title:r.signerTitle,client_signature_company:r.signerCompany,client_signature_date:r.signedAt,client_signature_ip:null,status:"client_signed"}).eq("id",i).select().single();if(s)throw s;return c}return null},async deleteTMTicket(i){if(p){const{error:r}=await _.from("t_and_m_tickets").delete().eq("id",i);if(r)throw r}},async isTicketEditable(i){if(!i?.assigned_cor_id)return{editable:!0};if(p)try{const{data:r,error:c}=await _.from("change_orders").select("id, status, cor_number").eq("id",i.assigned_cor_id).single();if(c||!r)return{editable:!0};const o=["draft","pending_approval"].includes(r.status);return{editable:o,lockedBy:o?null:r,reason:o?null:`This ticket is linked to ${r.cor_number} which has been ${r.status==="approved"?"approved":r.status}`}}catch(r){return console.error("Error checking ticket editability:",r),{editable:!0}}return{editable:!0}},async getCompanyByCode(i){if(p){const{data:r,error:c}=await _.from("companies").select("*").eq("code",i).single();return c?null:r}return null},async getCompany(i){if(p){const{data:r,error:c}=await _.from("companies").select("*").eq("id",i).single();if(c)throw c;return r}return null},async getUserCompanies(i){if(p){const{data:r,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_id,
          status,
          companies (
            id,
            name,
            code
          )
        `).eq("user_id",i).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching user companies:",c),[]):r.map(s=>({id:s.companies.id,name:s.companies.name,code:s.companies.code,access_level:s.access_level}))}return[]},async getUserPendingMemberships(i){if(p){const{count:r,error:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",i).eq("status","pending");return c?(console.error("Error fetching pending memberships:",c),0):r||0}return 0},async getCompanyMemberships(i){if(p){const{data:r,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          company_role,
          status,
          created_at,
          approved_at,
          approved_by,
          removed_at,
          removed_by,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",i).order("created_at",{ascending:!1});return c?(console.error("Error fetching company memberships:",c),[]):r||[]}return[]},async approveMembership(i,r){if(p){const{error:c}=await _.from("user_companies").update({status:"active",approved_at:new Date().toISOString(),approved_by:r}).eq("id",i);if(c)throw c}},async approveMembershipWithRole(i,r,c="member"){if(p){const{error:s}=await _.rpc("approve_membership_with_role",{membership_id:i,approved_by_user:r,new_access_level:c});if(s)throw s}},async rejectMembership(i){if(p){const{error:r}=await _.from("user_companies").delete().eq("id",i);if(r)throw r}},async removeMember(i,r){if(p){const{error:c}=await _.from("user_companies").update({status:"removed",removed_at:new Date().toISOString(),removed_by:r}).eq("id",i);if(c)throw c}},async getProjectTeam(i){if(p){const{data:r,error:c}=await _.from("project_users").select(`
          id,
          project_role,
          assigned_at,
          notes,
          users!project_users_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("project_id",i).order("assigned_at",{ascending:!0});return c?(console.error("Error fetching project team:",c),[]):r||[]}return[]},async getCompanyMembers(i){if(p){const{data:r,error:c}=await _.from("user_companies").select(`
          id,
          access_level,
          users!user_companies_user_id_fkey (
            id,
            name,
            email
          )
        `).eq("company_id",i).eq("status","active").order("created_at",{ascending:!0});return c?(console.error("Error fetching company members:",c),[]):r||[]}return[]},async addProjectMember(i,r,c,s){if(p){const{data:o,error:d}=await _.from("project_users").insert({project_id:i,user_id:r,project_role:c,assigned_by:s}).select().single();if(d)throw d;return o}return null},async updateProjectMemberRole(i,r,c){if(p){const{error:s}=await _.from("project_users").update({project_role:c}).eq("project_id",i).eq("user_id",r);if(s)throw s}},async removeProjectMember(i,r){if(p){const{error:c}=await _.from("project_users").delete().eq("project_id",i).eq("user_id",r);if(c)throw c}},async updateMemberAccessLevel(i,r){if(p){const{error:c}=await _.from("user_companies").update({access_level:r}).eq("id",i);if(c)throw c}},async updateMemberCompanyRole(i,r){if(p){const{error:c}=await _.from("user_companies").update({company_role:r}).eq("id",i);if(c)throw c}},async repairLegacyUser(i,r,c="member"){if(!p||!i||!r)return!1;try{const{data:s,error:o}=await _.rpc("repair_legacy_user",{p_user_id:i,p_company_id:r,p_role:c});return o?(console.error("RPC repair_legacy_user failed:",o),!1):s===!0}catch(s){return console.error("Error repairing legacy user:",s),!1}},async isLegacyUser(i){if(!p)return!1;try{const{data:r}=await _.from("users").select("company_id, role").eq("id",i).single();if(!r?.company_id)return!1;const{count:c}=await _.from("user_companies").select("*",{count:"exact",head:!0}).eq("user_id",i);return c===0}catch(r){return console.error("Error checking legacy user:",r),!1}},DISPOSAL_LOAD_TYPES:[{value:"concrete",label:"Concrete"},{value:"trash",label:"Trash"},{value:"metals",label:"Metals"},{value:"hazardous_waste",label:"Hazardous Waste"}],async getDisposalLoads(i,r){if(!p)return[];const c=performance.now();try{const{data:s,error:o}=await _.from("disposal_loads").select("*").eq("project_id",i).eq("work_date",r).order("created_at",{ascending:!1}),d=Math.round(performance.now()-c);if(le.query("getDisposalLoads",{duration:d,rows:s?.length,project_id:i}),o)throw o;return s||[]}catch(s){throw le.error("database",{message:s.message,operation:"getDisposalLoads",project_id:i}),s}},async getDisposalLoadsHistory(i,r=14){if(!p)return[];const c=performance.now();try{const s=new Date,o=new Date;o.setDate(o.getDate()-r);const{data:d,error:h}=await _.from("disposal_loads").select("*").eq("project_id",i).gte("work_date",o.toISOString().split("T")[0]).lte("work_date",s.toISOString().split("T")[0]).order("work_date",{ascending:!1}),y=Math.round(performance.now()-c);if(le.query("getDisposalLoadsHistory",{duration:y,rows:d?.length,project_id:i}),h)throw h;return(d||[]).map(w=>({...w,load_date:w.work_date}))}catch(s){throw le.error("database",{message:s.message,operation:"getDisposalLoadsHistory",project_id:i}),s}},async addDisposalLoad(i,r,c,s,o,d=null){if(!p)return null;const{data:h,error:y}=await _.from("disposal_loads").insert({project_id:i,user_id:r,work_date:c,load_type:s,load_count:o,notes:d}).select().single();if(y)throw le.error("database",{message:y.message,operation:"addDisposalLoad",project_id:i}),y;return h},async updateDisposalLoad(i,r,c,s=null){if(!p)return null;const{data:o,error:d}=await _.from("disposal_loads").update({load_type:r,load_count:c,notes:s}).eq("id",i).select().single();if(d)throw le.error("database",{message:d.message,operation:"updateDisposalLoad"}),d;return o},async deleteDisposalLoad(i){if(!p)return!1;const{error:r}=await _.from("disposal_loads").delete().eq("id",i);if(r)throw le.error("database",{message:r.message,operation:"deleteDisposalLoad"}),r;return!0},async getDisposalSummary(i,r=null,c=null){if(!p)return[];const s=performance.now();try{const{data:o,error:d}=await _.rpc("get_disposal_summary",{p_project_id:i,p_start_date:r,p_end_date:c}),h=Math.round(performance.now()-s);if(le.query("getDisposalSummary",{duration:h,rows:o?.length,project_id:i}),d)throw d;return o||[]}catch(o){return le.error("database",{message:o.message,operation:"getDisposalSummary",project_id:i}),this.getDisposalSummaryFallback(i,r,c)}},async getDisposalSummaryFallback(i,r,c){let s=_.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",i);r&&(s=s.gte("work_date",r)),c&&(s=s.lte("work_date",c));const{data:o,error:d}=await s;if(d)throw d;const h={};return o?.forEach(y=>{h[y.load_type]||(h[y.load_type]={load_type:y.load_type,total_loads:0,days:new Set}),h[y.load_type].total_loads+=y.load_count,h[y.load_type].days.add(y.work_date)}),Object.values(h).map(y=>({load_type:y.load_type,total_loads:y.total_loads,days_with_activity:y.days.size}))},async getWeeklyDisposalSummary(i,r=4){if(!p)return[];const c=new Date,s=new Date;s.setDate(s.getDate()-r*7);const{data:o,error:d}=await _.from("disposal_loads").select("load_type, load_count, work_date").eq("project_id",i).gte("work_date",s.toISOString().split("T")[0]).lte("work_date",c.toISOString().split("T")[0]).order("work_date",{ascending:!0});if(d)throw d;const h={};return o?.forEach(y=>{const w=new Date(y.work_date),M=new Date(w);M.setDate(w.getDate()-w.getDay());const k=M.toISOString().split("T")[0];h[k]||(h[k]={week:k,concrete:0,trash:0,metals:0,hazardous_waste:0}),h[k][y.load_type]+=y.load_count}),Object.values(h).sort((y,w)=>y.week.localeCompare(w.week))},async uploadPhoto(i,r,c,s){if(!p)return null;const o=performance.now(),d=s.size||0,h=Date.now(),y=new Uint8Array(6);crypto.getRandomValues(y);const w=Array.from(y,X=>X.toString(36)).join(""),M=s.name?.split(".").pop()||"jpg",k=`${h}-${w}.${M}`,z=`${i}/${r}/${c}/${k}`;try{const{data:X,error:Z}=await _.storage.from("tm-photos").upload(z,s,{cacheControl:"3600",upsert:!1}),V=Math.round(performance.now()-o);if(le.storage("upload",{company_id:i,project_id:r,size:d,duration:V,success:!Z}),Z)throw Z;const{data:H}=_.storage.from("tm-photos").getPublicUrl(z);return H.publicUrl}catch(X){throw le.error("storage",{message:X.message,operation:"uploadPhoto",company_id:i,project_id:r}),X}},async uploadPhotoBase64(i,r,c,s,o="photo.jpg"){if(!p)return null;const h=await(await fetch(s)).blob(),y=Date.now(),w=new Uint8Array(6);crypto.getRandomValues(w);const M=Array.from(w,F=>F.toString(36)).join(""),k=o.split(".").pop()||"jpg",z=`${y}-${M}.${k}`,X=`${i}/${r}/${c}/${z}`,{data:Z,error:V}=await _.storage.from("tm-photos").upload(X,h,{cacheControl:"3600",upsert:!1,contentType:h.type});if(V)throw V;const{data:H}=_.storage.from("tm-photos").getPublicUrl(X);return H.publicUrl},async deletePhoto(i){if(!p)return;const c=new URL(i).pathname.match(/\/tm-photos\/(.+)$/);if(!c)return;const s=c[1],{error:o}=await _.storage.from("tm-photos").remove([s]);if(o)throw o},async verifyPhotoAccessible(i){if(!p||!i)return{accessible:!1,error:"Invalid URL"};try{const r=await fetch(i,{method:"HEAD"});return{accessible:r.ok,status:r.status,error:r.ok?null:`HTTP ${r.status}`}}catch(r){return{accessible:!1,error:r.message||"Network error"}}},async verifyTicketPhotos(i){if(!p)return{verified:!1,issues:[]};try{const{data:r,error:c}=await _.from("t_and_m_tickets").select("photos").eq("id",i).single();if(c)throw c;if(!r?.photos||r.photos.length===0)return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:"empty",photos_issue_count:0}).eq("id",i),{verified:!0,status:"empty",issues:[]};const s=[];for(const d of r.photos){const h=await this.verifyPhotoAccessible(d);h.accessible||s.push({url:d,error:h.error})}const o=s.length===0?"verified":"issues";return await _.from("t_and_m_tickets").update({photos_verified_at:new Date().toISOString(),photos_verification_status:o,photos_issue_count:s.length}).eq("id",i),{verified:s.length===0,status:o,totalPhotos:r.photos.length,issues:s}}catch(r){return console.error("Error verifying ticket photos:",r),{verified:!1,error:r.message,issues:[]}}},async queuePhotoUpload(i,r,c,s){if(!p)return null;const{data:o,error:d}=await _.from("photo_upload_queue").insert({ticket_id:i,temp_id:r,file_name:c,file_size_bytes:s,status:"pending"}).select().single();return d?(console.error("Error queueing photo upload:",d),null):o},async confirmQueuedUpload(i,r,c){if(!p)return!1;const{data:s,error:o}=await _.rpc("confirm_photo_upload",{p_queue_id:i,p_uploaded_url:r,p_storage_path:c});return o?(console.error("Error confirming photo upload:",o),!1):s===!0},async markQueuedUploadFailed(i,r){if(!p)return!1;const{data:c,error:s}=await _.rpc("mark_photo_upload_failed",{p_queue_id:i,p_error:r});return s?(console.error("Error marking photo upload failed:",s),!1):c===!0},async getPendingPhotoUploads(i){if(!p)return[];const{data:r,error:c}=await _.rpc("get_pending_photo_uploads",{p_ticket_id:i});return c?(console.error("Error getting pending photo uploads:",c),[]):r||[]},async logPhotoOperation(i,r,c={}){if(p)try{await _.from("photo_audit_log").insert({ticket_id:i,cor_id:c.corId||null,operation:r,photo_url:c.photoUrl||null,storage_path:c.storagePath||null,details:c.metadata?c.metadata:null,error_message:c.error||null,triggered_by:c.triggeredBy||"system"})}catch(s){console.error("Error logging photo operation:",s)}},async saveExportSnapshot(i,r,c={}){if(!p)return null;const{exportType:s="pdf",exportReason:o=null,clientEmail:d=null,clientName:h=null}=c;try{const{data:y,error:w}=await _.from("cor_export_snapshots").insert({cor_id:i,export_type:s,export_reason:o,cor_data:r.cor_data,tickets_data:r.tickets_data,photos_manifest:r.photos_manifest,totals_snapshot:r.totals_snapshot,checksum:r.checksum,client_email:d,client_name:h}).select().single();if(w)throw w;return y}catch(y){return console.error("Error saving export snapshot:",y),null}},async getExportSnapshots(i){if(!p)return[];const{data:r,error:c}=await _.from("cor_export_snapshots").select("id, exported_at, export_type, export_reason, client_name, client_email, checksum").eq("cor_id",i).order("exported_at",{ascending:!1});return c?(console.error("Error fetching export snapshots:",c),[]):r||[]},async getExportSnapshot(i){if(!p)return null;const{data:r,error:c}=await _.from("cor_export_snapshots").select("*").eq("id",i).single();return c?(console.error("Error fetching export snapshot:",c),null):r},async requestCORExport(i,r,c={}){if(!p)return null;try{const s=await _.auth.getUser(),{data:o,error:d}=await _.rpc("request_cor_export",{p_cor_id:i,p_idempotency_key:r,p_options:c,p_requested_by:s?.data?.user?.id||null});if(d)throw d;return o?.[0]||null}catch(s){throw le.error("database",{message:s.message,operation:"requestCORExport",extra:{corId:i}}),s}},async getExportJob(i){if(!p)return null;const{data:r,error:c}=await _.from("cor_export_jobs").select("*").eq("id",i).single();return c?(console.error("Error fetching export job:",c),null):r},async getExportJobs(i,r=10){if(!p)return[];const{data:c,error:s}=await _.from("cor_export_jobs").select("*").eq("cor_id",i).order("created_at",{ascending:!1}).limit(r);return s?(console.error("Error fetching export jobs:",s),[]):c||[]},async updateExportJobStatus(i,r,c={}){if(!p)return null;try{const{data:s,error:o}=await _.rpc("update_export_job_status",{p_job_id:i,p_status:r,p_snapshot_id:c.snapshotId||null,p_pdf_url:c.pdfUrl||null,p_error:c.error||null,p_error_details:c.errorDetails||null,p_metrics:c.metrics||null});if(o)throw o;return s}catch(s){throw le.error("database",{message:s.message,operation:"updateExportJobStatus",extra:{jobId:i,status:r}}),s}},async getCurrentCORSnapshot(i){if(!p)return null;const{data:r}=await _.from("change_orders").select("version, last_snapshot_version").eq("id",i).single();if(!r||r.version!==r.last_snapshot_version)return null;const{data:c}=await _.from("cor_export_snapshots").select("*").eq("cor_id",i).eq("is_current",!0).single();return c||null},async saveCORSnapshot(i,r){if(!p)return null;try{await _.from("cor_export_snapshots").update({is_current:!1}).eq("cor_id",i.corId);const c=await _.auth.getUser(),{data:s,error:o}=await _.from("cor_export_snapshots").insert({id:i.snapshotId,cor_id:i.corId,job_id:r,cor_version:i.corVersion,cor_data:i.corData,tickets_data:i.ticketsData,photos_manifest:i.photoManifest,totals_snapshot:i.totals,checksum:i.checksum,is_current:!0,exported_by:c?.data?.user?.id||null}).select().single();if(o)throw o;return await _.from("change_orders").update({last_snapshot_version:i.corVersion}).eq("id",i.corId),s}catch(c){throw le.error("database",{message:c.message,operation:"saveCORSnapshot",extra:{corId:i.corId}}),c}},async updateCORAggregatedStats(i){if(p)try{await _.rpc("update_cor_aggregated_stats",{p_cor_id:i})}catch(r){console.error("Error updating COR aggregated stats:",r)}},async getCrewCheckin(i,r=null){if(!p)return null;const c=r||new Date().toISOString().split("T")[0],s=qt(),{data:o,error:d}=await s.from("crew_checkins").select("*").eq("project_id",i).eq("check_in_date",c).single();return d&&d.code,o},async saveCrewCheckin(i,r,c=null,s=null){if(!p)return null;const o=s||new Date().toISOString().split("T")[0];if(!Ht()){const w={id:kt(),project_id:i,check_in_date:o,workers:r,created_by:c,updated_at:new Date().toISOString(),_offline:!0};return await Lu(w),await Bt(We.SAVE_CREW_CHECKIN,{projectId:i,workers:r,checkInDate:o}),w}const d=qt(),{data:h,error:y}=await d.from("crew_checkins").upsert({project_id:i,check_in_date:o,workers:r,created_by:c,updated_at:new Date().toISOString()},{onConflict:"project_id,check_in_date"}).select().single();if(y){if(y.message?.includes("fetch")||y.message?.includes("network")){const w={id:kt(),project_id:i,check_in_date:o,workers:r,_offline:!0};return await Lu(w),await Bt(We.SAVE_CREW_CHECKIN,{projectId:i,workers:r,checkInDate:o}),w}throw console.error("Error saving crew checkin:",y),y}return h&&Lu(h).catch(w=>console.error("Failed to cache checkin:",w)),h},async addCrewMember(i,r,c=null){if(!p)return null;const s=await this.getCrewCheckin(i),o=s?.workers||[];return o.find(d=>d.name.toLowerCase()===r.name.toLowerCase())?s:(o.push(r),await this.saveCrewCheckin(i,o,c))},async removeCrewMember(i,r){if(!p)return null;const c=await this.getCrewCheckin(i);if(!c)return null;const s=c.workers.filter(o=>o.name.toLowerCase()!==r.toLowerCase());return await this.saveCrewCheckin(i,s,c.created_by)},async getCrewCheckinHistory(i,r=30){if(!p)return[];const{data:c,error:s}=await _.from("crew_checkins").select("*").eq("project_id",i).order("check_in_date",{ascending:!1}).limit(r);return s?(console.error("Error fetching crew history:",s),[]):c||[]},async getLaborRates(i,r=null,c=null){if(!p)return[];let s=_.from("labor_rates").select("*").eq("company_id",i);r&&(s=s.eq("work_type",r)),c&&(s=s.eq("job_type",c));const{data:o,error:d}=await s;return d?(console.error("Error fetching labor rates:",d),[]):o||[]},async calculateManDayCosts(i,r,c,s){if(!p)return{totalCost:0,totalManDays:0,breakdown:[]};const o=await this.getCrewCheckinHistory(i,365),d=await this.getLaborRates(r,c,s),h={};d.forEach(z=>{h[z.role.toLowerCase()]=parseFloat(z.regular_rate)||0});let y=0,w=0;const M={},k=[];return o.forEach(z=>{const X=z.workers||[];let Z=0;const V={};X.forEach(H=>{const F=(H.role||"laborer").toLowerCase(),me=h[F]||0;V[F]||(V[F]={count:0,cost:0}),V[F].count++,V[F].cost+=me,Z+=me,M[F]||(M[F]={count:0,cost:0,rate:me}),M[F].count++,M[F].cost+=me}),y+=Z,w+=X.length,k.push({date:z.check_in_date,workers:X.length,cost:Z,breakdown:V})}),{totalCost:y,totalManDays:w,byRole:M,byDate:k,daysWorked:o.length}},async getDailyReport(i,r=null){if(!p)return null;const c=r||new Date().toISOString().split("T")[0],s=qt(),{data:o,error:d}=await s.from("daily_reports").select("*").eq("project_id",i).eq("report_date",c).single();return d&&d.code,o},async compileDailyReport(i,r=null){if(!p)return null;const c=r||new Date().toISOString().split("T")[0],s=qt(),o=await this.getCrewCheckin(i,c),{data:d}=await s.from("areas").select("*").eq("project_id",i),h=d?.filter(M=>M.status==="done"&&M.completed_at?.startsWith(c))||[],{data:y}=await s.from("t_and_m_tickets").select("*").eq("project_id",i).eq("work_date",c),w=y?.reduce((M,k)=>M+(k.photos?.length||0),0)||0;return{crew_count:o?.workers?.length||0,crew_list:o?.workers||[],tasks_completed:h.length,tasks_total:d?.length||0,completed_tasks:h.map(M=>({name:M.name,group:M.group_name})),tm_tickets_count:y?.length||0,photos_count:w}},async saveDailyReport(i,r,c=null){if(!p)return null;const s=c||new Date().toISOString().split("T")[0];if(!Ht()){const y={id:kt(),project_id:i,report_date:s,...r,updated_at:new Date().toISOString(),_offline:!0};return await Pn(y),y}const o=qt(),{data:d,error:h}=await o.from("daily_reports").upsert({project_id:i,report_date:s,...r,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const y={id:kt(),project_id:i,report_date:s,...r,_offline:!0};return await Pn(y),y}throw console.error("Error saving daily report:",h),h}return d&&Pn(d).catch(y=>console.error("Failed to cache report:",y)),d},async submitDailyReport(i,r,c=null){if(!p)return null;const s=c||new Date().toISOString().split("T")[0];if(!Ht()){const y=await pp(i,s),w={id:kt(),project_id:i,report_date:s,...y||{},status:"pending_sync",submitted_by:r,submitted_at:new Date().toISOString(),_offline:!0};return await Pn(w),await Bt(We.SUBMIT_DAILY_REPORT,{projectId:i,reportData:y||{},submittedBy:r}),w}const o=await this.compileDailyReport(i,s),{data:d,error:h}=await _.from("daily_reports").upsert({project_id:i,report_date:s,...o,status:"submitted",submitted_at:new Date().toISOString(),submitted_by:r,updated_at:new Date().toISOString()},{onConflict:"project_id,report_date"}).select().single();if(h){if(h.message?.includes("fetch")||h.message?.includes("network")){const y={id:kt(),project_id:i,report_date:s,...o,status:"pending_sync",submitted_by:r,_offline:!0};return await Pn(y),await Bt(We.SUBMIT_DAILY_REPORT,{projectId:i,reportData:o,submittedBy:r}),y}throw console.error("Error submitting daily report:",h),h}return d&&Pn(d).catch(y=>console.error("Failed to cache report:",y)),d},async getDailyReports(i,r=30){if(!p)return[];const{data:c,error:s}=await _.from("daily_reports").select("*").eq("project_id",i).order("report_date",{ascending:!1}).limit(r);return s?(console.error("Error fetching daily reports:",s),[]):c||[]},async sendMessage(i,r,c,s,o=null,d=null,h="general",y=null){if(!p)return null;if(!Ht()){const k={id:kt(),project_id:i,sender_type:c,sender_name:s,sender_user_id:o,message:r,photo_url:d,message_type:h,parent_message_id:y,created_at:new Date().toISOString(),_offline:!0};return await om(k),await Bt(We.SEND_MESSAGE,{projectId:i,senderType:c,senderName:s,content:r}),k}const{data:w,error:M}=await _.from("messages").insert({project_id:i,sender_type:c,sender_name:s,sender_user_id:o,message:r,photo_url:d,message_type:h,parent_message_id:y}).select().single();if(M){if(M.message?.includes("fetch")||M.message?.includes("network")){const k={id:kt(),project_id:i,sender_type:c,sender_name:s,message:r,created_at:new Date().toISOString(),_offline:!0};return await om(k),await Bt(We.SEND_MESSAGE,{projectId:i,senderType:c,senderName:s,content:r}),k}throw console.error("Error sending message:",M),M}return w},async getMessages(i,r=50){if(!p)return[];const c=qt(),{data:s,error:o}=await c.from("messages").select("*").eq("project_id",i).order("created_at",{ascending:!1}).limit(r);return o?[]:s||[]},async getUnreadCount(i,r){if(!p)return 0;const c=qt(),s=r==="field"?"office":"field",{count:o,error:d}=await c.from("messages").select("*",{count:"exact",head:!0}).eq("project_id",i).eq("sender_type",s).eq("is_read",!1);return d?0:o||0},async markMessagesRead(i,r){if(!p)return;const c=qt(),s=r==="field"?"office":"field";await c.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("project_id",i).eq("sender_type",s).eq("is_read",!1)},async createMaterialRequest(i,r,c,s=null,o="normal",d=null){if(!p)return null;if(!Ht()){const w={id:kt(),project_id:i,items:r,requested_by:c,needed_by:s,priority:o,notes:d,status:"pending_sync",created_at:new Date().toISOString(),_offline:!0};return await Bt(We.CREATE_MATERIAL_REQUEST,{projectId:i,items:r,requestedBy:c,neededBy:s,priority:o,notes:d}),w}const{data:h,error:y}=await _.from("material_requests").insert({project_id:i,items:r,requested_by:c,needed_by:s,priority:o,notes:d}).select().single();if(y){if(y.message?.includes("fetch")||y.message?.includes("network")){const w={id:kt(),project_id:i,items:r,requested_by:c,status:"pending_sync",_offline:!0};return await Bt(We.CREATE_MATERIAL_REQUEST,{projectId:i,items:r,requestedBy:c,neededBy:s,priority:o,notes:d}),w}throw console.error("Error creating material request:",y),y}return h},async getMaterialRequests(i,r=null){if(!p)return[];let c=_.from("material_requests").select("*").eq("project_id",i).order("created_at",{ascending:!1});r&&(c=c.eq("status",r));const{data:s,error:o}=await c;return o?(console.error("Error fetching material requests:",o),[]):s||[]},async getPendingRequestsCount(i){if(!p)return 0;const{count:r,error:c}=await _.from("material_requests").select("*",{count:"exact",head:!0}).eq("project_id",i).eq("status","pending");return c?0:r||0},async updateMaterialRequest(i,r,c,s=null,o=null){if(!p)return null;const d={status:r,responded_by:c,responded_at:new Date().toISOString(),response_notes:s,updated_at:new Date().toISOString()};o&&(d.expected_delivery=o),r==="delivered"&&(d.delivered_at=new Date().toISOString());const{data:h,error:y}=await _.from("material_requests").update(d).eq("id",i).select().single();if(y)throw console.error("Error updating material request:",y),y;return h},generateShareToken(){const i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=new Uint8Array(12);return crypto.getRandomValues(r),Array.from(r,c=>i[c%i.length]).join("")},async createProjectShare(i,r,c,s=null){if(!p){const w=G();w.projectShares||(w.projectShares=[]);const M={id:crypto.randomUUID(),project_id:i,share_token:this.generateShareToken(),created_by:r,expires_at:s,is_active:!0,permissions:c,view_count:0,last_viewed_at:null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return w.projectShares.push(M),de(w),M}const{data:o,error:d}=await _.rpc("generate_share_token");if(d)throw console.error("Error generating share token:",d),d;const{data:h,error:y}=await _.from("project_shares").insert({project_id:i,share_token:o,created_by:r,expires_at:s,permissions:c}).select().single();if(y)throw console.error("Error creating project share:",y),y;return h},async getShareByToken(i){if(!p){const s=G();if(!s.projectShares)return null;const o=s.projectShares.find(d=>d.share_token===i&&d.is_active&&(!d.expires_at||new Date(d.expires_at)>new Date));return o&&(o.view_count++,o.last_viewed_at=new Date().toISOString(),de(s)),o}const{data:r,error:c}=await _.from("project_shares").select("*, projects(*)").eq("share_token",i).eq("is_active",!0).single();return c?(console.error("Error fetching share by token:",c),null):r.expires_at&&new Date(r.expires_at)<new Date?null:(await _.rpc("increment_share_view_count",{token:i}),r)},async getProjectShares(i){if(!p){const s=G();return s.projectShares?s.projectShares.filter(o=>o.project_id===i):[]}const{data:r,error:c}=await _.from("project_shares").select("*, users(name, email)").eq("project_id",i).order("created_at",{ascending:!1});return c?(console.error("Error fetching project shares:",c),[]):r||[]},async updateProjectShare(i,r){if(!p){const o=G();if(!o.projectShares)return null;const d=o.projectShares.findIndex(h=>h.id===i);return d===-1?null:(o.projectShares[d]={...o.projectShares[d],...r,updated_at:new Date().toISOString()},de(o),o.projectShares[d])}const{data:c,error:s}=await _.from("project_shares").update(r).eq("id",i).select().single();if(s)throw console.error("Error updating project share:",s),s;return c},async revokeProjectShare(i){return this.updateProjectShare(i,{is_active:!1})},async deleteProjectShare(i){if(!p){const c=G();if(!c.projectShares)return;c.projectShares=c.projectShares.filter(s=>s.id!==i),de(c);return}const{error:r}=await _.from("project_shares").delete().eq("id",i);if(r)throw console.error("Error deleting project share:",r),r},async getPublicProjectData(i){const r=await this.getShareByToken(i);if(!r)return null;const c=r.project_id||r.projects?.id;if(!p){const d=G(),h=d.projects.find(z=>z.id===c);if(!h)return null;const y=d.areas.filter(z=>z.project_id===c),w=y.reduce((z,X)=>z+parseFloat(X.weight||0),0),M=y.filter(z=>z.status==="done").reduce((z,X)=>z+parseFloat(X.weight||0),0),k=w>0?Math.round(M/w*100):0;return{share:r,project:h,progress:k,areas:r.permissions.progress?y:[],photos:[],dailyReports:[],tmTickets:[]}}const s=r.projects||await this.getProject(c);if(!s)return null;const o={share:r,project:s,areas:[],photos:[],dailyReports:[],tmTickets:[]};if(r.permissions.progress){o.areas=await this.getAreas(c);const d=o.areas.reduce((y,w)=>y+parseFloat(w.weight||0),0),h=o.areas.filter(y=>y.status==="done").reduce((y,w)=>y+parseFloat(w.weight||0),0);o.progress=d>0?Math.round(h/d*100):0}if(r.permissions.photos){const{data:d}=await _.from("t_and_m_tickets").select("photos, work_date").eq("project_id",c).not("photos","is",null).order("work_date",{ascending:!1}).limit(20);o.photos=d?.flatMap(h=>(h.photos||[]).map(y=>({url:y,date:h.work_date})))||[]}if(r.permissions.daily_reports){const{data:d}=await _.from("daily_reports").select("*").eq("project_id",c).order("report_date",{ascending:!1}).limit(10);o.dailyReports=d||[]}return r.permissions.tm_tickets&&(o.tmTickets=await this.getTMTickets(c)),o},async createInjuryReport(i){if(!p){const s=G();s.injuryReports||(s.injuryReports=[]);const o={id:crypto.randomUUID(),...i,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return s.injuryReports.push(o),de(s),o}const{data:r,error:c}=await _.from("injury_reports").insert(i).select().single();if(c)throw console.error("Error creating injury report:",c),c;return r},async getInjuryReports(i){if(!p){const s=G();return s.injuryReports?s.injuryReports.filter(o=>o.project_id===i).sort((o,d)=>new Date(d.incident_date)-new Date(o.incident_date)):[]}const{data:r,error:c}=await _.from("injury_reports").select("*").eq("project_id",i).order("incident_date",{ascending:!1});return c?(console.error("Error fetching injury reports:",c),[]):r||[]},async getCompanyInjuryReports(i,r=null){if(!p){const d=G();if(!d.injuryReports)return[];let h=d.injuryReports.filter(y=>y.company_id===i);return r&&(h=h.filter(y=>y.status===r)),h.sort((y,w)=>new Date(w.incident_date)-new Date(y.incident_date))}let c=_.from("injury_reports").select("*, projects(name)").eq("company_id",i).order("incident_date",{ascending:!1});r&&(c=c.eq("status",r));const{data:s,error:o}=await c;return o?(console.error("Error fetching company injury reports:",o),[]):s||[]},async getInjuryReport(i){if(!p){const s=G();return s.injuryReports?s.injuryReports.find(o=>o.id===i):null}const{data:r,error:c}=await _.from("injury_reports").select("*, projects(name, pin), users(name, email)").eq("id",i).single();return c?(console.error("Error fetching injury report:",c),null):r},async updateInjuryReport(i,r){if(!p){const o=G();if(!o.injuryReports)return null;const d=o.injuryReports.findIndex(h=>h.id===i);return d===-1?null:(o.injuryReports[d]={...o.injuryReports[d],...r,updated_at:new Date().toISOString()},de(o),o.injuryReports[d])}const{data:c,error:s}=await _.from("injury_reports").update(r).eq("id",i).select().single();if(s)throw console.error("Error updating injury report:",s),s;return c},async closeInjuryReport(i,r){return this.updateInjuryReport(i,{status:"closed",closed_at:new Date().toISOString(),closed_by:r})},async deleteInjuryReport(i){if(!p){const c=G();if(!c.injuryReports)return;c.injuryReports=c.injuryReports.filter(s=>s.id!==i),de(c);return}const{error:r}=await _.from("injury_reports").delete().eq("id",i);if(r)throw console.error("Error deleting injury report:",r),r},async getInjuryStatistics(i,r=null,c=null){if(!p){const d=G();if(!d.injuryReports)return{total_incidents:0,minor_injuries:0,serious_injuries:0,critical_injuries:0,near_misses:0,osha_recordable:0,total_days_away:0,total_restricted_days:0};let h=d.injuryReports.filter(y=>y.company_id===i);return r&&(h=h.filter(y=>new Date(y.incident_date)>=new Date(r))),c&&(h=h.filter(y=>new Date(y.incident_date)<=new Date(c))),{total_incidents:h.length,minor_injuries:h.filter(y=>y.injury_type==="minor").length,serious_injuries:h.filter(y=>y.injury_type==="serious").length,critical_injuries:h.filter(y=>y.injury_type==="critical").length,near_misses:h.filter(y=>y.injury_type==="near_miss").length,osha_recordable:h.filter(y=>y.osha_recordable).length,total_days_away:h.reduce((y,w)=>y+(w.days_away_from_work||0),0),total_restricted_days:h.reduce((y,w)=>y+(w.restricted_work_days||0),0)}}const{data:s,error:o}=await _.rpc("get_injury_statistics",{comp_id:i,start_date:r,end_date:c});return o?(console.error("Error fetching injury statistics:",o),null):s[0]||null},async addWitness(i,r){if(!p){const o=G();if(!o.injuryReports)return null;const d=o.injuryReports.findIndex(w=>w.id===i);if(d===-1)return null;const h=o.injuryReports[d],y=h.witnesses||[];return y.push(r),o.injuryReports[d]={...h,witnesses:y,updated_at:new Date().toISOString()},de(o),o.injuryReports[d]}const c=await this.getInjuryReport(i);if(!c)return null;const s=c.witnesses||[];return s.push(r),this.updateInjuryReport(i,{witnesses:s})},async removeWitness(i,r){if(!p){const o=G();if(!o.injuryReports)return null;const d=o.injuryReports.findIndex(w=>w.id===i);if(d===-1)return null;const h=o.injuryReports[d],y=h.witnesses||[];return y.splice(r,1),o.injuryReports[d]={...h,witnesses:y,updated_at:new Date().toISOString()},de(o),o.injuryReports[d]}const c=await this.getInjuryReport(i);if(!c)return null;const s=c.witnesses||[];return s.splice(r,1),this.updateInjuryReport(i,{witnesses:s})},async getCompanyUsers(i){if(p){const{data:r,error:c}=await _.from("user_companies").select(`
          user_id,
          role,
          users (
            id,
            name,
            email
          )
        `).eq("company_id",i);return c?(console.error("Error fetching company users:",c),[]):r?.map(s=>({id:s.user_id,name:s.users?.name||s.users?.email,email:s.users?.email,role:s.role}))||[]}return[]},async getProjectNotificationPreferences(i){if(p){const{data:c,error:s}=await _.from("notification_preferences").select(`
          *,
          users (
            id,
            name,
            email
          )
        `).eq("project_id",i);return s?(console.error("Error fetching notification preferences:",s),[]):c||[]}const r=G();return r.notificationPreferences?r.notificationPreferences.filter(c=>c.project_id===i):[]},async getUserNotificationPreferences(i){if(p){const{data:c,error:s}=await _.from("notification_preferences").select(`
          *,
          projects (
            id,
            name
          )
        `).eq("user_id",i);return s?(console.error("Error fetching user notification preferences:",s),[]):c||[]}const r=G();return r.notificationPreferences?r.notificationPreferences.filter(c=>c.user_id===i):[]},async setNotificationPreference(i,r,c){if(p){const{data:h,error:y}=await _.from("notification_preferences").upsert({project_id:i,user_id:r,notification_types:c,updated_at:new Date().toISOString()},{onConflict:"project_id,user_id"}).select().single();if(y)throw console.error("Error setting notification preference:",y),y;return h}const s=G();s.notificationPreferences||(s.notificationPreferences=[]);const o=s.notificationPreferences.findIndex(h=>h.project_id===i&&h.user_id===r),d={id:o>=0?s.notificationPreferences[o].id:crypto.randomUUID(),project_id:i,user_id:r,notification_types:c,created_at:o>=0?s.notificationPreferences[o].created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return o>=0?s.notificationPreferences[o]=d:s.notificationPreferences.push(d),de(s),d},async removeNotificationPreference(i,r){if(p){const{error:s}=await _.from("notification_preferences").delete().eq("project_id",i).eq("user_id",r);if(s)throw console.error("Error removing notification preference:",s),s;return!0}const c=G();return c.notificationPreferences&&(c.notificationPreferences=c.notificationPreferences.filter(s=>!(s.project_id===i&&s.user_id===r)),de(c)),!0},async setProjectNotificationPreferences(i,r){const c=[];for(const s of r)if(s.notificationTypes&&s.notificationTypes.length>0){const o=await this.setNotificationPreference(i,s.userId,s.notificationTypes);c.push(o)}else await this.removeNotificationPreference(i,s.userId);return c},async getNotificationPresets(i){if(p){const{data:c,error:s}=await _.from("notification_presets").select("*").eq("company_id",i).order("name");return s?(console.error("Error fetching notification presets:",s),[]):c||[]}const r=G();return r.notificationPresets?r.notificationPresets.filter(c=>c.company_id===i):[{id:"preset-1",name:"Project Manager",notification_types:["message","material_request","injury_report","tm_ticket"],company_id:i},{id:"preset-2",name:"Safety Officer",notification_types:["injury_report"],company_id:i},{id:"preset-3",name:"Purchasing",notification_types:["material_request"],company_id:i},{id:"preset-4",name:"Accounting",notification_types:["tm_ticket"],company_id:i}]},async createNotificationPreset(i,r,c){if(p){const{data:d,error:h}=await _.from("notification_presets").insert({company_id:i,name:r,notification_types:c}).select().single();if(h)throw console.error("Error creating notification preset:",h),h;return d}const s=G();s.notificationPresets||(s.notificationPresets=[]);const o={id:crypto.randomUUID(),company_id:i,name:r,notification_types:c,created_at:new Date().toISOString()};return s.notificationPresets.push(o),de(s),o},async updateNotificationPreset(i,r,c){if(p){const{data:d,error:h}=await _.from("notification_presets").update({name:r,notification_types:c,updated_at:new Date().toISOString()}).eq("id",i).select().single();if(h)throw console.error("Error updating notification preset:",h),h;return d}const s=G();if(!s.notificationPresets)return null;const o=s.notificationPresets.findIndex(d=>d.id===i);return o===-1?null:(s.notificationPresets[o]={...s.notificationPresets[o],name:r,notification_types:c,updated_at:new Date().toISOString()},de(s),s.notificationPresets[o])},async deleteNotificationPreset(i){if(p){const{error:c}=await _.from("notification_presets").delete().eq("id",i);if(c)throw console.error("Error deleting notification preset:",c),c;return!0}const r=G();return r.notificationPresets&&(r.notificationPresets=r.notificationPresets.filter(c=>c.id!==i),de(r)),!0},async getDumpSites(i){if(p){const{data:c,error:s}=await _.from("dump_sites").select(`
          *,
          dump_site_rates (*)
        `).eq("company_id",i).eq("active",!0).order("name");return s?(console.error("Error fetching dump sites:",s),[]):c||[]}return(G().dumpSites||[]).filter(c=>c.company_id===i&&c.active)},async createDumpSite(i,r,c="",s=""){if(p){const{data:h,error:y}=await _.from("dump_sites").insert({company_id:i,name:r,address:c,notes:s,active:!0}).select().single();if(y)throw console.error("Error creating dump site:",y),y;return h}const o=G();o.dumpSites||(o.dumpSites=[]);const d={id:crypto.randomUUID(),company_id:i,name:r,address:c,notes:s,active:!0,created_at:new Date().toISOString(),dump_site_rates:[]};return o.dumpSites.push(d),de(o),d},async updateDumpSite(i,r){if(p){const{data:o,error:d}=await _.from("dump_sites").update({...r,updated_at:new Date().toISOString()}).eq("id",i).select().single();if(d)throw console.error("Error updating dump site:",d),d;return o}const c=G();if(!c.dumpSites)return null;const s=c.dumpSites.findIndex(o=>o.id===i);return s===-1?null:(c.dumpSites[s]={...c.dumpSites[s],...r},de(c),c.dumpSites[s])},async deleteDumpSite(i){return this.updateDumpSite(i,{active:!1})},async setDumpSiteRate(i,r,c,s="load"){if(p){const{data:y}=await _.from("dump_site_rates").select("id").eq("dump_site_id",i).eq("waste_type",r).maybeSingle();if(y){const{data:w,error:M}=await _.from("dump_site_rates").update({estimated_cost_per_load:c,unit:s}).eq("id",y.id).select().single();if(M)throw console.error("Error updating dump site rate:",M),M;return w}else{const{data:w,error:M}=await _.from("dump_site_rates").insert({dump_site_id:i,waste_type:r,estimated_cost_per_load:c,unit:s}).select().single();if(M)throw console.error("Error inserting dump site rate:",M),M;return w}}const o=G();o.dumpSiteRates||(o.dumpSiteRates=[]);const d=o.dumpSiteRates.findIndex(y=>y.dump_site_id===i&&y.waste_type===r),h={id:d>=0?o.dumpSiteRates[d].id:crypto.randomUUID(),dump_site_id:i,waste_type:r,estimated_cost_per_load:c,unit:s,created_at:new Date().toISOString()};return d>=0?o.dumpSiteRates[d]=h:o.dumpSiteRates.push(h),de(o),h},async getDumpSiteRates(i){if(p){const{data:c,error:s}=await _.from("dump_site_rates").select("*").eq("dump_site_id",i);return s?(console.error("Error fetching dump site rates:",s),[]):c||[]}return(G().dumpSiteRates||[]).filter(c=>c.dump_site_id===i)},async getHaulOffs(i){if(p){const{data:c,error:s}=await _.from("haul_offs").select(`
          *,
          dump_sites (name)
        `).eq("project_id",i).order("work_date",{ascending:!1});return s?(console.error("Error fetching haul-offs:",s),[]):c||[]}return(G().haulOffs||[]).filter(c=>c.project_id===i).sort((c,s)=>new Date(s.work_date)-new Date(c.work_date))},async createHaulOff(i,r){const c={project_id:i,dump_site_id:r.dumpSiteId,waste_type:r.wasteType,loads:r.loads,hauling_company:r.haulingCompany||"",work_date:r.workDate,notes:r.notes||"",estimated_cost:r.estimatedCost||0,created_by:r.createdBy||""};if(p){const{data:d,error:h}=await _.from("haul_offs").insert(c).select().single();if(h)throw console.error("Error creating haul-off:",h),h;return d}const s=G();s.haulOffs||(s.haulOffs=[]);const o={...c,id:crypto.randomUUID(),created_at:new Date().toISOString()};return s.haulOffs.push(o),de(s),o},async calculateHaulOffCosts(i){const r=await this.getHaulOffs(i);let c=0,s=0;const o={},d=[],h={};r.forEach(w=>{const M=parseFloat(w.estimated_cost)||0,k=parseInt(w.loads)||0;c+=M,s+=k,o[w.waste_type]||(o[w.waste_type]={loads:0,cost:0}),o[w.waste_type].loads+=k,o[w.waste_type].cost+=M,h[w.work_date]||(h[w.work_date]={date:w.work_date,loads:0,cost:0}),h[w.work_date].loads+=k,h[w.work_date].cost+=M}),Object.values(h).sort((w,M)=>new Date(M.date)-new Date(w.date)).forEach(w=>d.push(w));const y=d.length;return{totalCost:c,totalLoads:s,byWasteType:o,byDate:d,daysWithHaulOff:y,avgDailyHaulOffCost:y>0?c/y:0}},subscribeToHaulOffs(i,r){return p?_.channel(`haul_offs:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"haul_offs",filter:`project_id=eq.${i}`},r).subscribe():null},async createCOR(i,r=0){if(p){let c=i.cor_number;r>0&&(c=await this.getNextCORNumber(i.project_id));const{data:s,error:o}=await _.from("change_orders").insert({company_id:i.company_id,project_id:i.project_id,area_id:i.area_id||null,cor_number:c,title:i.title,description:i.description||"",scope_of_work:i.scope_of_work,period_start:i.period_start,period_end:i.period_end,status:"draft",labor_markup_percent:i.labor_markup_percent??1500,materials_markup_percent:i.materials_markup_percent??1500,equipment_markup_percent:i.equipment_markup_percent??1500,subcontractors_markup_percent:i.subcontractors_markup_percent??500,liability_insurance_percent:i.liability_insurance_percent??144,bond_percent:i.bond_percent??100,license_fee_percent:i.license_fee_percent??10,created_by:i.created_by||null}).select().single();if((o?.code==="23505"||o?.code==="PGRST116"||o?.status===409||o?.message?.includes("duplicate")||o?.message?.includes("unique_cor_number"))&&r<3)return console.warn(`COR number conflict, retrying with fresh number (attempt ${r+1})`),this.createCOR(i,r+1);if(o)throw o;return s}return null},async updateCOR(i,r){if(p){const{data:c,error:s}=await _.from("change_orders").update({...r,updated_at:new Date().toISOString()}).eq("id",i).select().single();if(s)throw s;return c}return null},async deleteCOR(i){if(p){const{error:r}=await _.from("change_orders").delete().eq("id",i);if(r)throw r}},async bulkUpdateCORGroup(i,r){if(p){const{error:c}=await _.from("change_orders").update({group_name:r,updated_at:new Date().toISOString()}).in("id",i);if(c)throw c.message?.includes("group_name")||c.code==="PGRST204"?new Error("COR grouping requires a database migration. Please run database/migration_cor_enhancements.sql in Supabase SQL Editor."):c}},async getCORs(i,r={}){if(p){let c=_.from("change_orders").select(`
          *,
          areas (id, name),
          labor_count:change_order_labor(count),
          materials_count:change_order_materials(count),
          equipment_count:change_order_equipment(count),
          subcontractors_count:change_order_subcontractors(count),
          tickets_count:change_order_ticket_associations(count)
        `).eq("project_id",i);r.status&&(c=c.eq("status",r.status)),r.area_id&&(c=c.eq("area_id",r.area_id)),r.date_start&&(c=c.gte("period_start",r.date_start)),r.date_end&&(c=c.lte("period_end",r.date_end)),c=c.order("created_at",{ascending:!1});const{data:s,error:o}=await c;if(o)throw o;return s}return[]},async getCORById(i){if(p){const{data:r,error:c}=await _.from("change_orders").select(`
          *,
          areas (id, name),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*),
          change_order_ticket_associations (
            *,
            t_and_m_tickets (
              *,
              t_and_m_workers (*),
              t_and_m_items (
                *,
                materials_equipment (name, unit, cost_per_unit, category)
              )
            )
          )
        `).eq("id",i).single();if(c)throw c;return r}return null},async getCORsByArea(i,r){if(p){const{data:c,error:s}=await _.from("change_orders").select("*").eq("project_id",i).eq("area_id",r).order("created_at",{ascending:!1});if(s)throw s;return c}return[]},async getAssignableCORs(i){if(p){const{data:r,error:c}=await _.from("change_orders").select("id, cor_number, title, status, cor_total").eq("project_id",i).in("status",["draft","pending_approval","approved"]).order("cor_number",{ascending:!0});if(c)throw c;return r||[]}return[]},async getNextCORNumber(i){if(p){const{data:r,error:c}=await _.from("change_orders").select("cor_number").eq("project_id",i);if(c)throw c;if(r&&r.length>0){let s=0;for(const o of r){const d=o.cor_number?.match(/COR #(\d+)/);if(d){const h=parseInt(d[1]);h>s&&(s=h)}}return`COR #${s+1}`}return"COR #1"}return"COR #1"},async addCORLaborItem(i,r){if(p){const c=Math.round(r.regular_hours*r.regular_rate),s=Math.round(r.overtime_hours*r.overtime_rate),o=c+s,{data:d,error:h}=await _.from("change_order_labor").insert({change_order_id:i,labor_class:r.labor_class,wage_type:r.wage_type||"standard",regular_hours:r.regular_hours||0,overtime_hours:r.overtime_hours||0,regular_rate:r.regular_rate||0,overtime_rate:r.overtime_rate||0,regular_total:c,overtime_total:s,total:o,sort_order:r.sort_order||0,source_ticket_id:r.source_ticket_id||null}).select().single();if(h)throw h;return d}return null},async updateCORLaborItem(i,r){if(p){let c={...r};if(r.regular_hours!==void 0||r.regular_rate!==void 0||r.overtime_hours!==void 0||r.overtime_rate!==void 0){const{data:d}=await _.from("change_order_labor").select("regular_hours, overtime_hours, regular_rate, overtime_rate").eq("id",i).single(),h=r.regular_hours??d?.regular_hours??0,y=r.overtime_hours??d?.overtime_hours??0,w=r.regular_rate??d?.regular_rate??0,M=r.overtime_rate??d?.overtime_rate??0;c.regular_total=Math.round(h*w),c.overtime_total=Math.round(y*M),c.total=c.regular_total+c.overtime_total}const{data:s,error:o}=await _.from("change_order_labor").update(c).eq("id",i).select().single();if(o)throw o;return s}return null},async deleteCORLaborItem(i){if(p){const{error:r}=await _.from("change_order_labor").delete().eq("id",i);if(r)throw r}},async addCORMaterialItem(i,r){if(p){const s=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"].includes(r.source_type)?r.source_type:"custom",o=Math.round(Number(r.unit_cost)||0),d=Number(r.quantity)||1,h=Math.round(d*o),{data:y,error:w}=await _.from("change_order_materials").insert({change_order_id:i,description:r.description||"",quantity:d,unit:r.unit||"each",unit_cost:o,total:h,source_type:s,source_reference:r.source_reference||null,source_ticket_id:r.source_ticket_id||null,sort_order:r.sort_order||0}).select().single();if(w)throw w;return y}return null},async updateCORMaterialItem(i,r){if(p){let c={...r};if(r.quantity!==void 0||r.unit_cost!==void 0){const{data:d}=await _.from("change_order_materials").select("quantity, unit_cost").eq("id",i).single(),h=r.quantity??d?.quantity??1,y=r.unit_cost??d?.unit_cost??0;c.total=Math.round(h*y)}const{data:s,error:o}=await _.from("change_order_materials").update(c).eq("id",i).select().single();if(o)throw o;return s}return null},async deleteCORMaterialItem(i){if(p){const{error:r}=await _.from("change_order_materials").delete().eq("id",i);if(r)throw r}},async addCOREquipmentItem(i,r){if(p){const s=["backup_sheet","invoice","custom","field_ticket","rental"].includes(r.source_type)?r.source_type:"custom",o=Math.round(Number(r.unit_cost)||0),d=Number(r.quantity)||1,h=Math.round(d*o),{data:y,error:w}=await _.from("change_order_equipment").insert({change_order_id:i,description:r.description||"",quantity:d,unit:r.unit||"day",unit_cost:o,total:h,source_type:s,source_reference:r.source_reference||null,source_ticket_id:r.source_ticket_id||null,sort_order:r.sort_order||0}).select().single();if(w)throw w;return y}return null},async updateCOREquipmentItem(i,r){if(p){let c={...r};if(r.quantity!==void 0||r.unit_cost!==void 0){const{data:d}=await _.from("change_order_equipment").select("quantity, unit_cost").eq("id",i).single(),h=r.quantity??d?.quantity??1,y=r.unit_cost??d?.unit_cost??0;c.total=Math.round(h*y)}const{data:s,error:o}=await _.from("change_order_equipment").update(c).eq("id",i).select().single();if(o)throw o;return s}return null},async deleteCOREquipmentItem(i){if(p){const{error:r}=await _.from("change_order_equipment").delete().eq("id",i);if(r)throw r}},async addCORSubcontractorItem(i,r){if(p){const c=Math.round(r.quantity*r.unit_cost),{data:s,error:o}=await _.from("change_order_subcontractors").insert({change_order_id:i,description:r.description,quantity:r.quantity||1,unit:r.unit||"lump sum",unit_cost:r.unit_cost||0,total:c,source_type:r.source_type||"custom",source_reference:r.source_reference||null,sort_order:r.sort_order||0}).select().single();if(o)throw o;return s}return null},async updateCORSubcontractorItem(i,r){if(p){let c={...r};if(r.quantity!==void 0||r.unit_cost!==void 0){const{data:d}=await _.from("change_order_subcontractors").select("quantity, unit_cost").eq("id",i).single(),h=r.quantity??d?.quantity??1,y=r.unit_cost??d?.unit_cost??0;c.total=Math.round(h*y)}const{data:s,error:o}=await _.from("change_order_subcontractors").update(c).eq("id",i).select().single();if(o)throw o;return s}return null},async deleteCORSubcontractorItem(i){if(p){const{error:r}=await _.from("change_order_subcontractors").delete().eq("id",i);if(r)throw r}},async addBulkLaborItems(i,r){if(p&&r.length>0){const c=r.map((d,h)=>{const y=Math.round(d.regular_hours*d.regular_rate),w=Math.round(d.overtime_hours*d.overtime_rate);return{change_order_id:i,labor_class:d.labor_class,wage_type:d.wage_type||"standard",regular_hours:d.regular_hours||0,overtime_hours:d.overtime_hours||0,regular_rate:d.regular_rate||0,overtime_rate:d.overtime_rate||0,regular_total:y,overtime_total:w,total:y+w,sort_order:d.sort_order??h,source_ticket_id:d.source_ticket_id||null}}),{data:s,error:o}=await _.from("change_order_labor").insert(c).select();if(o)throw o;return s}return[]},async addBulkMaterialItems(i,r){if(p&&r.length>0){const c=["backup_sheet","invoice","mobilization","custom","field_ticket","rental"],s=r.map((h,y)=>{const w=c.includes(h.source_type)?h.source_type:"custom",M=Math.round(Number(h.unit_cost)||0),k=Number(h.quantity)||1;return{change_order_id:i,description:h.description||"",quantity:k,unit:h.unit||"each",unit_cost:M,total:Math.round(k*M),source_type:w,source_reference:h.source_reference||null,source_ticket_id:h.source_ticket_id||null,sort_order:h.sort_order??y}}),{data:o,error:d}=await _.from("change_order_materials").insert(s).select();if(d)throw d;return o}return[]},async addBulkEquipmentItems(i,r){if(p&&r.length>0){const c=["backup_sheet","invoice","custom","field_ticket","rental"],s=r.map((h,y)=>{const w=c.includes(h.source_type)?h.source_type:"custom",M=Math.round(Number(h.unit_cost)||0),k=Number(h.quantity)||1;return{change_order_id:i,description:h.description||"",quantity:k,unit:h.unit||"day",unit_cost:M,total:Math.round(k*M),source_type:w,source_reference:h.source_reference||null,source_ticket_id:h.source_ticket_id||null,sort_order:h.sort_order??y}}),{data:o,error:d}=await _.from("change_order_equipment").insert(s).select();if(d)throw d;return o}return[]},async addBulkSubcontractorItems(i,r){if(p&&r.length>0){const c=r.map((d,h)=>({change_order_id:i,company_name:d.company_name||"",description:d.description||"",quantity:d.quantity||1,unit:d.unit||"lump sum",unit_cost:d.unit_cost||d.total||d.amount||0,total:d.total||d.amount||0,source_type:d.source_type||"invoice",source_reference:d.source_reference||null,sort_order:d.sort_order??h})),{data:s,error:o}=await _.from("change_order_subcontractors").insert(c).select();if(o)throw o;return s}return[]},async clearCORLineItems(i){p&&(await _.from("change_order_labor").delete().eq("change_order_id",i),await _.from("change_order_materials").delete().eq("change_order_id",i),await _.from("change_order_equipment").delete().eq("change_order_id",i),await _.from("change_order_subcontractors").delete().eq("change_order_id",i))},async saveCORLineItems(i,{laborItems:r,materialItems:c,equipmentItems:s,subcontractorItems:o}){if(p){await this.clearCORLineItems(i);const d=await Promise.all([r?.length>0?this.addBulkLaborItems(i,r):[],c?.length>0?this.addBulkMaterialItems(i,c):[],s?.length>0?this.addBulkEquipmentItems(i,s):[],o?.length>0?this.addBulkSubcontractorItems(i,o):[]]);return{labor:d[0],materials:d[1],equipment:d[2],subcontractors:d[3]}}return null},async assignTicketToCOR(i,r){if(p){const{error:c}=await _.rpc("assign_ticket_to_cor",{p_ticket_id:i,p_cor_id:r});if(c)throw le.error("database",{message:c.message,operation:"assignTicketToCOR",extra:{ticketId:i,corId:r}}),c;return{ticket_id:i,change_order_id:r}}return null},async unassignTicketFromCOR(i,r){if(p){const{error:c}=await _.rpc("unassign_ticket_from_cor",{p_ticket_id:i,p_cor_id:r});if(c)throw le.error("database",{message:c.message,operation:"unassignTicketFromCOR",extra:{ticketId:i,corId:r}}),c}},async checkTicketCORIntegrity(){if(p){const{data:i,error:r}=await _.rpc("check_ticket_cor_integrity");if(r)throw r;return i||[]}return[]},async fixTicketCORIntegrity(){if(p){const{data:i,error:r}=await _.rpc("fix_ticket_cor_integrity");if(r)throw r;return i}return 0},async getTicketsForCOR(i){if(p){const{data:r,error:c}=await _.from("change_order_ticket_associations").select(`
          *,
          t_and_m_tickets (
            *,
            t_and_m_workers (*),
            t_and_m_items (
              *,
              materials_equipment (name, unit, cost_per_unit, category)
            )
          )
        `).eq("change_order_id",i);if(c)throw c;return r}return[]},async getUnassignedTickets(i){if(p){const{data:r,error:c}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("project_id",i).is("assigned_cor_id",null).order("work_date",{ascending:!1});if(c)throw c;return r}return[]},async importTicketDataToCOR(i,r,c,s,o){if(p){const{data:d,error:h}=await _.from("t_and_m_tickets").select(`
          *,
          t_and_m_workers (*),
          t_and_m_items (
            *,
            materials_equipment (name, unit, cost_per_unit, category)
          )
        `).eq("id",i).single();if(h)throw h;const{data:y,error:w}=await _.from("labor_rates").select("*").eq("company_id",c).eq("work_type",s||"demolition").eq("job_type",o||"standard");if(w)throw w;const M={};y?.forEach(H=>{M[H.role.toLowerCase()]=H});const k={};d.t_and_m_workers?.forEach(H=>{const F=(H.role||"laborer").toLowerCase();k[F]||(k[F]={regular_hours:0,overtime_hours:0}),k[F].regular_hours+=parseFloat(H.hours)||0,k[F].overtime_hours+=parseFloat(H.overtime_hours)||0});const z=Object.entries(k).map(([H,F])=>{const me=M[H]||{regular_rate:0,overtime_rate:0},re=Math.round((parseFloat(me.regular_rate)||0)*100),I=Math.round((parseFloat(me.overtime_rate)||0)*100);return{labor_class:H.charAt(0).toUpperCase()+H.slice(1),wage_type:o||"standard",regular_hours:F.regular_hours,overtime_hours:F.overtime_hours,regular_rate:re,overtime_rate:I,source_ticket_id:i}});z.length>0&&await this.addBulkLaborItems(r,z);const X=[],Z=[];d.t_and_m_items?.forEach(H=>{const F=H.custom_name||H.materials_equipment?.name||"Unknown Item",me=H.custom_category||H.materials_equipment?.category||"Other",re=H.materials_equipment?.unit||"each",I=Math.round((parseFloat(H.materials_equipment?.cost_per_unit)||0)*100),P={description:F,quantity:H.quantity||1,unit:re,unit_cost:I,source_type:"backup_sheet",source_ticket_id:i};me==="Equipment"?Z.push(P):X.push(P)}),X.length>0&&await this.addBulkMaterialItems(r,X),Z.length>0&&await this.addBulkEquipmentItems(r,Z);const{error:V}=await _.from("change_order_ticket_associations").update({data_imported:!0,imported_at:new Date().toISOString(),import_status:"completed",import_failed_at:null,import_error:null}).eq("change_order_id",r).eq("ticket_id",i);if(V)throw V;return le.activity("cor_import_success",{ticket_id:i,cor_id:r,labor_count:z.length,material_count:X.length,equipment_count:Z.length}),{laborItems:z,materialItems:X,equipmentItems:Z}}return null},async reimportTicketDataToCOR(i,r,c,s,o){return p?(await _.from("change_order_labor").delete().eq("change_order_id",r).eq("source_ticket_id",i),await _.from("change_order_materials").delete().eq("change_order_id",r).eq("source_ticket_id",i),await _.from("change_order_equipment").delete().eq("change_order_id",r).eq("source_ticket_id",i),this.importTicketDataToCOR(i,r,c,s,o)):null},async markImportFailed(i,r,c="Import failed"){if(p){const{error:s}=await _.from("change_order_ticket_associations").update({import_status:"failed",import_failed_at:new Date().toISOString(),import_error:c}).eq("change_order_id",r).eq("ticket_id",i);if(s)throw le.error("database",{message:s.message,operation:"markImportFailed",extra:{ticketId:i,corId:r}}),s;le.error("cor_import_failed",{ticket_id:i,cor_id:r,error:c})}},async getTicketsNeedingImport(i){if(p){const{data:r,error:c}=await _.from("t_and_m_tickets").select(`
          id,
          work_date,
          ce_pco_number,
          assigned_cor_id,
          change_order_ticket_associations!inner (
            change_order_id,
            import_status,
            import_failed_at,
            import_error
          )
        `).eq("project_id",i).eq("change_order_ticket_associations.import_status","failed");if(c)throw c;return r||[]}return[]},async getTicketImportStatus(i,r){if(p){const{data:c,error:s}=await _.from("change_order_ticket_associations").select("import_status, import_failed_at, import_error, data_imported").eq("ticket_id",i).eq("change_order_id",r).single();if(s&&s.code!=="PGRST116")throw s;return c}return null},async recalculateCOR(i){if(p){const{error:r}=await _.rpc("recalculate_cor_totals",{cor_id:i});if(r)throw r;return this.getCORById(i)}return null},async updateCORMarkupPercentages(i,r){if(p){const c={};r.labor!==void 0&&(c.labor_markup_percent=r.labor),r.materials!==void 0&&(c.materials_markup_percent=r.materials),r.equipment!==void 0&&(c.equipment_markup_percent=r.equipment),r.subcontractors!==void 0&&(c.subcontractors_markup_percent=r.subcontractors);const{data:s,error:o}=await _.from("change_orders").update(c).eq("id",i).select().single();if(o)throw o;return s}return null},async updateCORFeePercentages(i,r){if(p){const c={};r.liabilityInsurance!==void 0&&(c.liability_insurance_percent=r.liabilityInsurance),r.bond!==void 0&&(c.bond_percent=r.bond),r.licenseFee!==void 0&&(c.license_fee_percent=r.licenseFee);const{data:s,error:o}=await _.from("change_orders").update(c).eq("id",i).select().single();if(o)throw o;return s}return null},async submitCORForApproval(i){if(p){const{data:r,error:c}=await _.from("change_orders").update({status:"pending_approval",submitted_at:new Date().toISOString()}).eq("id",i).select().single();if(c)throw c;return r}return null},async approveCOR(i,r){if(p){const{data:c,error:s}=await _.from("change_orders").update({status:"approved",approved_by:r,approved_at:new Date().toISOString()}).eq("id",i).select().single();if(s)throw s;return c}return null},async rejectCOR(i,r=null){if(p){const{data:c,error:s}=await _.from("change_orders").update({status:"rejected",rejection_reason:r}).eq("id",i).select().single();if(s)throw s;return c}return null},async markCORAsBilled(i){if(p){const{data:r,error:c}=await _.from("change_orders").update({status:"billed"}).eq("id",i).select().single();if(c)throw c;return r}return null},async closeCOR(i){if(p){const{data:r,error:c}=await _.from("change_orders").update({status:"closed"}).eq("id",i).select().single();if(c)throw c;return r}return null},async saveCORSignature(i,r,c){if(p){const{data:s,error:o}=await _.from("change_orders").update({gc_signature_data:r,gc_signature_name:c,gc_signature_date:new Date().toISOString(),status:"approved"}).eq("id",i).select().single();if(o)throw o;return s}return null},async getCORStats(i){if(p){const{data:r,error:c}=await _.from("change_orders").select("status, cor_total").eq("project_id",i);if(c)throw c;const s={total_cors:r.length,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0};return r.forEach(o=>{switch(o.status){case"draft":s.draft_count++;break;case"pending_approval":s.pending_count++,s.total_pending_value+=o.cor_total||0;break;case"approved":s.approved_count++,s.total_approved_value+=o.cor_total||0;break;case"rejected":s.rejected_count++;break;case"billed":case"closed":s.billed_count++,s.total_billed_value+=o.cor_total||0;break}}),s}return{total_cors:0,draft_count:0,pending_count:0,approved_count:0,rejected_count:0,billed_count:0,total_approved_value:0,total_pending_value:0,total_billed_value:0}},subscribeToCORs(i,r){return p?_.channel(`change_orders:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"change_orders",filter:`project_id=eq.${i}`},r).subscribe():null},subscribeToCorTickets(i,r){return p?_.channel(`cor-tickets:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"change_order_ticket_associations",filter:`change_order_id=eq.${i}`},r).subscribe():null},async getCORLog(i){if(p){const{data:r,error:c}=await _.from("cor_log_entries").select(`
          id,
          log_number,
          date_sent_to_client,
          ce_number,
          comments,
          created_at,
          updated_at,
          change_order:change_orders (
            id,
            cor_number,
            title,
            cor_total,
            status,
            created_at,
            approved_at,
            approved_by
          )
        `).eq("project_id",i).order("log_number",{ascending:!0});if(c)throw console.error("Error fetching COR log:",c),c;return(r||[]).map(s=>({id:s.id,logNumber:s.log_number,dateSentToClient:s.date_sent_to_client,ceNumber:s.ce_number,comments:s.comments,createdAt:s.created_at,updatedAt:s.updated_at,changeOrder:{id:s.change_order?.id,corNumber:s.change_order?.cor_number,title:s.change_order?.title,corTotal:s.change_order?.cor_total,status:s.change_order?.status,createdAt:s.change_order?.created_at,approvedAt:s.change_order?.approved_at,approvedBy:s.change_order?.approved_by}}))}return[]},async updateCORLogEntry(i,r){if(p){const c={updated_at:new Date().toISOString()};r.dateSentToClient!==void 0&&(c.date_sent_to_client=r.dateSentToClient||null),r.ceNumber!==void 0&&(c.ce_number=r.ceNumber||null),r.comments!==void 0&&(c.comments=r.comments||null);const{data:s,error:o}=await _.from("cor_log_entries").update(c).eq("id",i).select().single();if(o)throw console.error("Error updating COR log entry:",o),o;return s}return null},async updateChangeOrderStatus(i,r){if(p){const{data:c,error:s}=await _.from("change_orders").update({status:r,updated_at:new Date().toISOString()}).eq("id",i).select().single();if(s)throw console.error("Error updating change order status:",s),s;return c}return null},subscribeToCORLog(i,r){return p?_.channel(`cor-log:${i}`).on("postgres_changes",{event:"*",schema:"public",table:"cor_log_entries",filter:`project_id=eq.${i}`},r).subscribe():null},async createSignatureRequest(i,r,c,s,o=null,d=null){if(p){const{data:h,error:y}=await _.rpc("generate_signature_token");if(y)throw y;const{data:w,error:M}=await _.from("signature_requests").insert({document_type:i,document_id:r,company_id:c,project_id:s,signature_token:h,expires_at:d,created_by:o}).select().single();if(M)throw M;return w}return null},async getSignatureRequestByToken(i){if(p){await _.rpc("increment_signature_view_count",{token:i});const{data:r,error:c}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("signature_token",i).single();if(c)throw c;return r}return null},async getSignatureRequestsForDocument(i,r){if(p){const{data:c,error:s}=await _.from("signature_requests").select(`
          *,
          signatures (*)
        `).eq("document_type",i).eq("document_id",r).order("created_at",{ascending:!1});if(s)throw s;return c||[]}return[]},async addSignature(i,r,c){if(p){const{data:s,error:o}=await _.from("signatures").insert({signature_request_id:i,signature_slot:r,signature_image:c.signature,signer_name:c.signerName,signer_title:c.signerTitle||null,signer_company:c.signerCompany||null,signed_at:c.signedAt||new Date().toISOString(),ip_address:c.ipAddress||null,user_agent:c.userAgent||null}).select().single();if(o)throw o;return s}return null},async syncSignatureToDocument(i,r){if(!p)return null;const{document_type:c,document_id:s}=r,o=i.signature_slot,d={};o===1?(d.gc_signature_data=i.signature_image,d.gc_signature_name=i.signer_name,d.gc_signature_title=i.signer_title,d.gc_signature_company=i.signer_company,d.gc_signature_date=i.signed_at,d.gc_signature_ip=i.ip_address):o===2&&(d.client_signature_data=i.signature_image,d.client_signature_name=i.signer_name,d.client_signature_title=i.signer_title,d.client_signature_company=i.signer_company,d.client_signature_date=i.signed_at,d.client_signature_ip=i.ip_address);const h=c==="cor"?"change_orders":"t_and_m_tickets",{data:y,error:w}=await _.from(h).update(d).eq("id",s).select().single();if(w)throw w;return y},async revokeSignatureRequest(i){if(p){const{data:r,error:c}=await _.from("signature_requests").update({status:"revoked"}).eq("id",i).select().single();if(c)throw c;return r}return null},async getDocumentForSigning(i,r){if(!p)return null;if(i==="cor"){const{data:c,error:s}=await _.from("change_orders").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          change_order_labor (*),
          change_order_materials (*),
          change_order_equipment (*),
          change_order_subcontractors (*)
        `).eq("id",r).single();if(s)throw s;return c}else if(i==="tm_ticket"){const{data:c,error:s}=await _.from("t_and_m_tickets").select(`
          *,
          projects (
            id,
            name,
            job_number,
            companies (
              id,
              name,
              logo_url
            )
          ),
          t_and_m_workers (*),
          t_and_m_items (*)
        `).eq("id",r).single();if(s)throw s;return c}return null},async getProjectCosts(i){if(p){const{data:c,error:s}=await _.from("project_costs").select("*").eq("project_id",i).order("cost_date",{ascending:!1});return s?(console.error("Error fetching project costs:",s),[]):c||[]}return(G().projectCosts||[]).filter(c=>c.project_id===i).sort((c,s)=>new Date(s.cost_date)-new Date(c.cost_date))},async addProjectCost(i,r,c){const s={project_id:i,company_id:r,category:c.category,description:c.description,amount:parseFloat(c.amount),cost_date:c.cost_date||new Date().toISOString().split("T")[0],notes:c.notes||null,created_by:c.created_by||null};if(p){const{data:h,error:y}=await _.from("project_costs").insert(s).select().single();if(y)throw console.error("Error adding project cost:",y),y;return h}const o=G();o.projectCosts||(o.projectCosts=[]);const d={...s,id:crypto.randomUUID(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return o.projectCosts.push(d),de(o),d},async updateProjectCost(i,r){const c={category:r.category,description:r.description,amount:parseFloat(r.amount),cost_date:r.cost_date,notes:r.notes||null,updated_at:new Date().toISOString()};if(p){const{data:d,error:h}=await _.from("project_costs").update(c).eq("id",i).select().single();if(h)throw console.error("Error updating project cost:",h),h;return d}const s=G();if(!s.projectCosts)return null;const o=s.projectCosts.findIndex(d=>d.id===i);return o===-1?null:(s.projectCosts[o]={...s.projectCosts[o],...c},de(s),s.projectCosts[o])},async deleteProjectCost(i){if(p){const{error:c}=await _.from("project_costs").delete().eq("id",i);if(c)throw console.error("Error deleting project cost:",c),c;return!0}const r=G();return r.projectCosts&&(r.projectCosts=r.projectCosts.filter(c=>c.id!==i),de(r)),!0},async getProjectCostsSummary(i){const r=await this.getProjectCosts(i),c={};let s=0;return r.forEach(o=>{const d=parseFloat(o.amount)||0;s+=d,c[o.category]||(c[o.category]={category:o.category,total:0,count:0,items:[]}),c[o.category].total+=d,c[o.category].count++,c[o.category].items.push(o)}),Object.values(c).forEach(o=>{o.percentage=s>0?o.total/s*100:0}),{totalCost:s,byCategory:c,itemCount:r.length}}};Wu(async i=>{if(i&&p)try{await wm(xe)}catch(r){console.error("Error syncing pending actions:",r)}});const sg=Object.freeze(Object.defineProperty({__proto__:null,auth:Ku,clearFieldSession:Em,db:xe,getConnectionStatus:Ht,getPendingActionCount:yi,isSupabaseConfigured:p,onConnectionChange:Wu,supabase:_,syncPendingActions:wm},Symbol.toStringTag,{value:"Module"})),Tm=U.createContext(),Tt={logo_url:null,favicon_url:null,login_background_url:null,primary_color:"#3B82F6",secondary_color:"#1E40AF",custom_app_name:"FieldSync",hide_fieldsync_branding:!1,email_from_name:"FieldSync",email_from_address:null,custom_domain:null,domain_verified:!1};function on({children:i,companyId:r}){const[c,s]=U.useState(Tt),[o,d]=U.useState(!0);U.useEffect(()=>{r?h(r):y()},[r]),U.useEffect(()=>{k(c)},[c]);const h=async Z=>{try{if(d(!0),!p){s(Tt),d(!1);return}const{data:V,error:H}=await _.from("company_branding").select("*").eq("company_id",Z).single();H?(H.code==="PGRST116"?await w(Z):console.error("Error loading branding:",H),s(Tt)):s({...Tt,...V})}catch(V){console.error("Error in loadBranding:",V),s(Tt)}finally{d(!1)}},y=async()=>{try{d(!0);const Z=window.location.hostname;if(Z==="localhost"||Z==="127.0.0.1"){s(Tt),d(!1);return}if(!p){s(Tt),d(!1);return}const{data:V,error:H}=await _.rpc("get_branding_by_domain",{domain_name:Z});H||!V||V.length===0?s(Tt):s({...Tt,...V[0]})}catch(Z){console.error("Error loading branding by domain:",Z),s(Tt)}finally{d(!1)}},w=async Z=>{try{const{data:V,error:H}=await _.from("company_branding").insert({company_id:Z,...Tt}).select().single();H&&console.error("Error creating default branding:",H)}catch(V){console.error("Error in createDefaultBranding:",V)}},M=async Z=>{try{if(!p)return s(P=>({...P,...Z})),{success:!0};if(!r)return{success:!1,error:"No company ID"};const V={},H=["logo_url","favicon_url","login_background_url","primary_color","secondary_color","custom_app_name","hide_fieldsync_branding","email_from_name","email_from_address","custom_domain","domain_verified"];for(const P of H)Z[P]!==void 0&&(V[P]=Z[P]);const{data:F,error:me}=await _.from("company_branding").select("id").eq("company_id",r).single();if(me&&me.code==="PGRST116"){const{data:P,error:be}=await _.from("company_branding").insert({company_id:r,...V}).select().single();return be?(console.error("Error creating branding:",be),{success:!1,error:be.message}):(s({...Tt,...P}),{success:!0,data:P})}const{data:re,error:I}=await _.from("company_branding").update(V).eq("company_id",r).select().single();return I?(console.error("Error updating branding:",I),{success:!1,error:I.message}):(s({...Tt,...re}),{success:!0,data:re})}catch(V){return console.error("Error in updateBranding:",V),{success:!1,error:V.message}}},k=Z=>{const V=document.documentElement;if(V.style.setProperty("--primary-color",Z.primary_color),V.style.setProperty("--secondary-color",Z.secondary_color),Z.favicon_url){let H=document.querySelector("link[rel*='icon']");H||(H=document.createElement("link"),H.rel="icon",document.head.appendChild(H)),H.href=Z.favicon_url}document.title=Z.custom_app_name||"FieldSync"},X={branding:c,loading:o,updateBranding:M,uploadBrandingImage:async(Z,V)=>{try{if(!p)return{success:!0,url:URL.createObjectURL(Z)};const H=Z.name.split(".").pop(),me=`branding/${`${r}/${V}-${Date.now()}.${H}`}`,{data:re,error:I}=await _.storage.from("public").upload(me,Z,{cacheControl:"3600",upsert:!0});if(I)return console.error("Error uploading image:",I),{success:!1,error:I.message};const{data:{publicUrl:P}}=_.storage.from("public").getPublicUrl(me);return{success:!0,url:P}}catch(H){return console.error("Error in uploadBrandingImage:",H),{success:!1,error:H.message}}},refreshBranding:()=>r?h(r):y()};return g.jsx(Tm.Provider,{value:X,children:i})}function bp(){const i=U.useContext(Tm);if(!i)throw new Error("useBranding must be used within a BrandingProvider");return i}const Am=U.createContext();function fn({children:i}){const[r,c]=U.useState(()=>{const o=localStorage.getItem("fieldsync-theme");return o==="light"||o==="dark"?o:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark"});U.useEffect(()=>{document.documentElement.setAttribute("data-theme",r),localStorage.setItem("fieldsync-theme",r)},[r]),U.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: light)"),d=h=>{localStorage.getItem("fieldsync-theme")||c(h.matches?"light":"dark")};return o.addEventListener("change",d),()=>o.removeEventListener("change",d)},[]);const s=()=>{c(o=>o==="dark"?"light":"dark")};return g.jsx(Am.Provider,{value:{theme:r,setTheme:c,toggleTheme:s},children:i})}function Sp(){const i=U.useContext(Am);if(!i)throw new Error("useTheme must be used within a ThemeProvider");return i}const wp=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jp=i=>i.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,c,s)=>s?s.toUpperCase():c.toLowerCase()),mm=i=>{const r=jp(i);return r.charAt(0).toUpperCase()+r.slice(1)},Dm=(...i)=>i.filter((r,c,s)=>!!r&&r.trim()!==""&&s.indexOf(r)===c).join(" ").trim(),Ep=i=>{for(const r in i)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var qp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Tp=U.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:c=2,absoluteStrokeWidth:s,className:o="",children:d,iconNode:h,...y},w)=>U.createElement("svg",{ref:w,...qp,width:r,height:r,stroke:i,strokeWidth:s?Number(c)*24/Number(r):c,className:Dm("lucide",o),...!d&&!Ep(y)&&{"aria-hidden":"true"},...y},[...h.map(([M,k])=>U.createElement(M,k)),...Array.isArray(d)?d:[d]]));const Pt=(i,r)=>{const c=U.forwardRef(({className:s,...o},d)=>U.createElement(Tp,{ref:d,iconNode:r,className:Dm(`lucide-${wp(mm(i))}`,`lucide-${i}`,s),...o}));return c.displayName=mm(i),c};const Ap=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Dp=Pt("bell",Ap);const Cp=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Op=Pt("briefcase",Cp);const Np=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Mp=Pt("circle-alert",Np);const zp=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],xp=Pt("clipboard-list",zp);const Rp=[["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M14 6a6 6 0 0 1 6 6v3",key:"1hnv84"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6",key:"9ciidu"}],["rect",{x:"2",y:"15",width:"20",height:"4",rx:"1",key:"g3x8cw"}]],Up=Pt("hard-hat",Rp);const Bp=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],kp=Pt("message-square",Bp);const Hp=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Lp=Pt("moon",Hp);const Yp=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Gp=Pt("package",Yp);const Qp=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Xp=Pt("sun",Qp);const Zp=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Vp=Pt("triangle-alert",Zp);function Kt({className:i="",showPoweredBy:r=!1}){const{branding:c}=bp();return g.jsxs("div",{className:`app-logo ${i}`,children:[c.logo_url?g.jsx("img",{src:c.logo_url,alt:c.custom_app_name||"Logo",className:"custom-logo"}):g.jsxs("div",{className:"logo",children:[c.custom_app_name||"Field",g.jsx("span",{children:"Sync"})]}),r&&!c.hide_fieldsync_branding&&g.jsx("div",{className:"powered-by",children:"Powered by FieldSync"})]})}function Kp({onForemanAccess:i,onOfficeLogin:r,onShowToast:c}){const[s,o]=U.useState(null),[d,h]=U.useState(""),[y,w]=U.useState(null),[M,k]=U.useState(""),[z,X]=U.useState(!1),[Z,V]=U.useState(""),[H,F]=U.useState(""),[me,re]=U.useState(1),[I,P]=U.useState(null),[be,ke]=U.useState(""),[Xe,Fe]=U.useState(""),[Pe,Lt]=U.useState(""),[rt,R]=U.useState(""),J=N=>{const ne=N.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,20);h(ne)},x=async()=>{if(d.length<2){c("Enter company code","error");return}X(!0);try{const N=await xe.getCompanyByCode(d);N?w(N):(c("Invalid company code","error"),h(""))}catch{c("Error checking code","error")}finally{X(!1)}},te=async N=>{if(N.length===4){X(!0);try{const ne=await xe.getProjectByPinSecure(N,y.code);if(ne.rateLimited){c("Too many attempts. Please wait 15 minutes.","error"),k("");return}ne.success&&ne.project?i(ne.project):(c("Invalid PIN","error"),k(""))}catch{c("Error checking PIN","error")}finally{X(!1)}}},T=N=>{if(M.length<4){const ne=M+N;k(ne),ne.length===4&&setTimeout(()=>te(ne),200)}},B=()=>{k(N=>N.slice(0,-1))},L=()=>{w(null),k("")},ge=()=>{if(!Z.trim()||!H.trim()){c("Enter email and password","error");return}r(Z,H)},ye=async()=>{if(d.length<2){c("Enter company code","error");return}X(!0);try{const N=await xe.getCompanyByCode(d);N?(P(N),re(2)):(c("Invalid company code","error"),h(""))}catch{c("Error checking code","error")}finally{X(!1)}},He=async()=>{if(!be.trim()){c("Enter office code","error");return}X(!0);try{const{data:N,error:ne}=await _.rpc("verify_office_code",{company_id:I.id,code:be.trim()});if(ne)throw ne;N===!0?re(3):(c("Invalid office code","error"),ke(""))}catch{c("Error verifying code","error")}finally{X(!1)}},je=async()=>{if(!Xe.trim()){c("Enter your name","error");return}if(!Pe.trim()||!Pe.includes("@")){c("Enter valid email","error");return}if(rt.length<6){c("Password must be 6+ characters","error");return}X(!0);try{const N=Pe.toLowerCase().trim(),{data:ne,error:it}=await _.auth.signUp({email:N,password:rt});let Re;if(it?.message?.includes("already registered")||ne?.user&&ne.user.identities?.length===0){const{data:oe,error:De}=await _.auth.signInWithPassword({email:N,password:rt});if(De){c("Account exists with different password. Use your existing password.","error"),X(!1);return}Re=oe.user.id;const{data:Ze}=await _.from("user_companies").select("id, status").eq("user_id",Re).eq("company_id",I.id).maybeSingle();if(Ze){Ze.status==="active"?(c("You already belong to this company. Logging you in...","success"),setTimeout(()=>window.location.reload(),1e3)):Ze.status==="pending"?(c("Your request is still pending approval.","error"),await _.auth.signOut()):(c("Your membership was removed. Contact the company admin.","error"),await _.auth.signOut());return}const{error:Ie}=await _.from("user_companies").insert({user_id:Re,company_id:I.id,role:"member",status:"pending"});if(Ie)throw console.error("Error adding to user_companies:",Ie),await _.auth.signOut(),new Error("Failed to submit join request");await _.auth.signOut(),c("Request to join submitted! Awaiting admin approval.","success")}else{if(it)throw it;{if(Re=ne.user?.id,!Re)throw new Error("Failed to create user");const{error:oe}=await _.from("users").insert({id:Re,email:N,password_hash:"managed_by_supabase_auth",name:Xe.trim(),company_id:I.id,role:"member",is_active:!0});if(oe)throw oe;const{error:De}=await _.from("user_companies").insert({user_id:Re,company_id:I.id,role:"member",status:"pending"});if(De)throw console.error("Error adding to user_companies:",De),new Error("Failed to submit join request");await _.auth.signOut(),c("Account created! Awaiting admin approval.","success")}}}catch(N){console.error("Join error:",N),c(N.message||"Error creating account","error")}finally{X(!1)}};if(s===null)return g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx(Kt,{className:"entry-logo",showPoweredBy:!1}),g.jsxs("div",{className:"entry-buttons",children:[g.jsxs("button",{className:"entry-mode-btn foreman",onClick:()=>o("foreman"),children:[g.jsx("span",{className:"entry-mode-icon",children:g.jsx(Up,{size:32})}),g.jsx("span",{className:"entry-mode-title",children:"Foreman"}),g.jsx("span",{className:"entry-mode-desc",children:"Enter project PIN"})]}),g.jsxs("button",{className:"entry-mode-btn office",onClick:()=>o("office"),children:[g.jsx("span",{className:"entry-mode-icon",children:g.jsx(Op,{size:32})}),g.jsx("span",{className:"entry-mode-title",children:"Office"}),g.jsx("span",{className:"entry-mode-desc",children:"Sign in to dashboard"})]})]})]})});if(s==="foreman")return y?g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:L,children:""}),g.jsx(Kt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("div",{className:"entry-company-badge",children:y.name}),g.jsx("p",{className:"entry-subtitle",children:"Enter project PIN"}),g.jsx("div",{className:"pin-display",children:[0,1,2,3].map(N=>g.jsx("div",{className:`pin-dot ${M.length>N?"filled":""}`,children:M.length>N?"":""},N))}),g.jsxs("div",{className:"number-pad",children:[[1,2,3,4,5,6,7,8,9].map(N=>g.jsx("button",{className:"num-btn",onClick:()=>T(N.toString()),disabled:z,children:N},N)),g.jsx("button",{className:"num-btn empty",disabled:!0}),g.jsx("button",{className:"num-btn",onClick:()=>T("0"),disabled:z,children:"0"}),g.jsx("button",{className:"num-btn backspace",onClick:B,disabled:z||M.length===0,children:""})]}),z&&g.jsx("div",{className:"entry-loading",children:g.jsx("div",{className:"spinner"})})]})}):g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>o(null),children:""}),g.jsx(Kt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("p",{className:"entry-subtitle",children:"Enter company code"}),g.jsxs("div",{className:"entry-input-group",children:[g.jsx("input",{type:"text",value:d,onChange:N=>J(N.target.value),placeholder:"Company Code",disabled:z,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&x()}}),g.jsx("button",{className:"entry-submit-btn",onClick:x,disabled:z||d.length<2,children:z?"...":""})]})]})});if(s==="office")return g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>o(null),children:""}),g.jsx(Kt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("p",{className:"entry-subtitle",children:"Sign in to your account"}),g.jsxs("div",{className:"entry-form",children:[g.jsx("input",{type:"email",value:Z,onChange:N=>V(N.target.value),placeholder:"Email",autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&ge()}}),g.jsx("input",{type:"password",value:H,onChange:N=>F(N.target.value),placeholder:"Password",onKeyDown:N=>{N.key==="Enter"&&ge()}}),g.jsx("button",{className:"entry-login-btn",onClick:ge,children:"Sign In"})]}),g.jsxs("div",{className:"entry-signup-hint",children:[g.jsx("p",{children:"New employee?"}),g.jsx("button",{className:"entry-join-link",onClick:()=>o("join"),children:"Join your company"})]})]})});if(s==="join")return me===1?g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>o("office"),children:""}),g.jsx(Kt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("p",{className:"entry-subtitle",children:"Enter your company code"}),g.jsx("p",{className:"entry-hint",children:"Ask your manager or admin for the code"}),g.jsxs("div",{className:"entry-input-group",children:[g.jsx("input",{type:"text",value:d,onChange:N=>J(N.target.value),placeholder:"Company Code",disabled:z,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&ye()}}),g.jsx("button",{className:"entry-submit-btn",onClick:ye,disabled:z||d.length<2,children:z?"...":""})]})]})}):me===2?g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>{re(1),P(null),ke("")},children:""}),g.jsx(Kt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("div",{className:"entry-company-badge",children:I?.name}),g.jsx("p",{className:"entry-subtitle",children:"Enter office code"}),g.jsx("p",{className:"entry-hint",children:"This code is only for office staff"}),g.jsxs("div",{className:"entry-input-group",children:[g.jsx("input",{type:"password",value:be,onChange:N=>ke(N.target.value),placeholder:"Office Code",disabled:z,autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&He()}}),g.jsx("button",{className:"entry-submit-btn",onClick:He,disabled:z||!be.trim(),children:z?"...":""})]})]})}):g.jsx("div",{className:"entry-container",children:g.jsxs("div",{className:"entry-card",children:[g.jsx("button",{className:"entry-back",onClick:()=>{re(2),ke("")},children:""}),g.jsx(Kt,{className:"entry-logo",showPoweredBy:!1}),g.jsx("div",{className:"entry-company-badge",children:I?.name}),g.jsx("p",{className:"entry-subtitle",children:"Create your account"}),g.jsxs("div",{className:"entry-form",children:[g.jsx("input",{type:"text",value:Xe,onChange:N=>Fe(N.target.value),placeholder:"Your Name",autoFocus:!0}),g.jsx("input",{type:"email",value:Pe,onChange:N=>Lt(N.target.value),placeholder:"Email"}),g.jsx("input",{type:"password",value:rt,onChange:N=>R(N.target.value),placeholder:"Password (6+ characters)",onKeyDown:N=>{N.key==="Enter"&&je()}}),g.jsx("button",{className:"entry-login-btn",onClick:je,disabled:z,children:z?"Creating...":"Join Company"})]}),g.jsx("p",{className:"entry-join-note",children:"You'll join as a team member. Your admin can update your role."})]})})}function In({message:i,type:r="",onClose:c}){return U.useEffect(()=>{const s=setTimeout(c,3e3);return()=>clearTimeout(s)},[c]),g.jsx("div",{className:"toast-container",children:g.jsx("div",{className:`toast ${r}`,children:i})})}function Jp({company:i,projects:r,userId:c,onNotificationClick:s,onShowToast:o}){const[d,h]=U.useState([]),[y,w]=U.useState(0),[M,k]=U.useState(!1),[z,X]=U.useState(!1),[Z,V]=U.useState({}),H=U.useRef(null);U.useRef(null);const F=U.useRef(null);U.useEffect(()=>{c&&me()},[c]);const me=async()=>{try{const R=await xe.getUserNotificationPreferences(c),J={};R.forEach(x=>{J[x.project_id]=x.notification_types||[]}),V(J)}catch(R){console.error("Error loading user preferences:",R)}},re=(R,J)=>Z[R]?Z[R].length===0?!1:Z[R].includes(J):!0;U.useEffect(()=>{if(!i?.id||!r||r.length===0)return;I();const R=P();return()=>{R&&xe.unsubscribe(R)}},[i?.id,r,Z]),U.useEffect(()=>()=>{F.current&&(F.current.close().catch(()=>{}),F.current=null)},[]),U.useEffect(()=>{function R(J){H.current&&!H.current.contains(J.target)&&k(!1)}return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const I=async()=>{if(!r||r.length===0)return;const R=[];for(const J of r)try{re(J.id,"message")&&(await xe.getMessages(J.id,20)).filter(T=>T.sender_type==="field"&&!T.is_read).forEach(T=>{R.push({id:`msg-${T.id}`,type:"message",title:"New Message",message:T.message?.slice(0,50)+(T.message?.length>50?"...":""),projectId:J.id,projectName:J.name,senderName:T.sender_name,createdAt:T.created_at,isRead:T.is_read,data:T})}),re(J.id,"material_request")&&(await xe.getMaterialRequests(J.id,"pending")).forEach(te=>{R.push({id:`req-${te.id}`,type:"material_request",title:"Material Request",message:`${te.items?.length||0} items requested`,projectId:J.id,projectName:J.name,senderName:te.requested_by,priority:te.priority,createdAt:te.created_at,isRead:!1,data:te})})}catch(x){console.error("Error loading notifications for project:",J.id,x)}try{(await xe.getCompanyInjuryReports(i.id,"open")).slice(0,5).forEach(x=>{if(re(x.project_id,"injury_report")){const te=r.find(T=>T.id===x.project_id);R.push({id:`injury-${x.id}`,type:"injury_report",title:"Safety Report",message:`${x.injury_type} - ${x.injured_person_name}`,projectId:x.project_id,projectName:te?.name||"Unknown Project",senderName:x.reported_by_name,createdAt:x.created_at,isRead:x.status!=="open",data:x})}})}catch(J){console.error("Error loading injury reports:",J)}R.sort((J,x)=>new Date(x.createdAt)-new Date(J.createdAt)),h(R.slice(0,50)),w(R.filter(J=>!J.isRead).length)},P=()=>{if(!i?.id||!r||r.length===0)return null;const R=r.map(x=>x.id),J=xe.subscribeToCompanyActivity(i.id,R,{onMessage:x=>{if(x.new?.sender_type==="field"){if(!re(x.new.project_id,"message"))return;be({id:`msg-${x.new.id}`,type:"message",title:"New Message",message:x.new.message?.slice(0,50)+(x.new.message?.length>50?"...":""),projectId:x.new.project_id,projectName:r.find(te=>te.id===x.new.project_id)?.name||"Project",senderName:x.new.sender_name,createdAt:x.new.created_at,isRead:!1,data:x.new})}},onMaterialRequest:x=>{re(x.new.project_id,"material_request")&&be({id:`req-${x.new.id}`,type:"material_request",title:"Material Request",message:`${x.new.items?.length||0} items requested`,projectId:x.new.project_id,projectName:r.find(te=>te.id===x.new.project_id)?.name||"Project",senderName:x.new.requested_by,priority:x.new.priority,createdAt:x.new.created_at,isRead:!1,data:x.new})},onTMTicket:x=>{if(x.eventType==="INSERT"){if(!re(x.new.project_id,"tm_ticket"))return;be({id:`tm-${x.new.id}`,type:"tm_ticket",title:"New T&M Ticket",message:`Submitted by ${x.new.created_by_name||"Field"}`,projectId:x.new.project_id,projectName:r.find(te=>te.id===x.new.project_id)?.name||"Project",senderName:x.new.created_by_name,createdAt:x.new.created_at,isRead:!1,data:x.new})}},onInjuryReport:x=>{re(x.new.project_id,"injury_report")&&be({id:`injury-${x.new.id}`,type:"injury_report",title:"Safety Report",message:`${x.new.injury_type} - ${x.new.injured_person_name}`,projectId:x.new.project_id,projectName:r.find(te=>te.id===x.new.project_id)?.name||"Project",senderName:x.new.reported_by_name,createdAt:x.new.created_at,isRead:!1,data:x.new})}});return J&&X(!0),J},be=R=>{h(x=>[R,...x.slice(0,49)]),w(x=>x+1),ke();const J=Xe(R.type);o?.(`${J} ${R.title}: ${R.message}`,"info")},ke=()=>{try{(!F.current||F.current.state==="closed")&&(F.current=new(window.AudioContext||window.webkitAudioContext));const R=F.current;R.state==="suspended"&&R.resume();const J=R.createOscillator(),x=R.createGain();J.connect(x),x.connect(R.destination),J.frequency.value=800,J.type="sine",x.gain.value=.3,J.start(),J.stop(R.currentTime+.15),setTimeout(()=>{if(!F.current||F.current.state==="closed")return;const te=F.current.createOscillator(),T=F.current.createGain();te.connect(T),T.connect(F.current.destination),te.frequency.value=1e3,te.type="sine",T.gain.value=.3,te.start(),te.stop(F.current.currentTime+.15)},150)}catch{}},Xe=R=>{switch(R){case"message":return g.jsx(kp,{size:16});case"material_request":return g.jsx(Gp,{size:16});case"injury_report":return g.jsx(Mp,{size:16});case"tm_ticket":return g.jsx(xp,{size:16});default:return g.jsx(Dp,{size:16})}},Fe=R=>{switch(R){case"message":return"blue";case"material_request":return"orange";case"injury_report":return"red";case"tm_ticket":return"green";default:return"gray"}},Pe=R=>{h(J=>J.map(x=>x.id===R.id?{...x,isRead:!0}:x)),w(J=>Math.max(0,J-1)),k(!1),s?.(R)},Lt=async()=>{for(const R of r)try{await xe.markMessagesRead(R.id,"office")}catch{}h(R=>R.map(J=>({...J,isRead:!0}))),w(0)},rt=R=>{const J=new Date(R),te=new Date-J,T=Math.floor(te/6e4),B=Math.floor(te/36e5),L=Math.floor(te/864e5);return T<1?"Just now":T<60?`${T}m ago`:B<24?`${B}h ago`:L<7?`${L}d ago`:J.toLocaleDateString()};return g.jsxs("div",{className:"notification-center",ref:H,children:[g.jsxs("button",{className:`notification-bell ${y>0?"has-notifications":""}`,onClick:()=>k(!M),title:`${y} unread notifications`,children:[g.jsx("span",{className:"bell-icon",children:""}),y>0&&g.jsx("span",{className:"notification-badge",children:y>99?"99+":y}),z&&g.jsx("span",{className:"connection-dot"})]}),M&&g.jsxs("div",{className:"notification-dropdown",children:[g.jsxs("div",{className:"notification-header",children:[g.jsx("h4",{children:"Notifications"}),y>0&&g.jsx("button",{className:"mark-all-read",onClick:Lt,children:"Mark all read"})]}),g.jsx("div",{className:"notification-list",children:d.length===0?g.jsxs("div",{className:"notification-empty",children:[g.jsx("span",{className:"empty-icon",children:""}),g.jsx("p",{children:"No notifications yet"}),g.jsx("small",{children:"You'll see updates from the field here"})]}):d.map(R=>g.jsxs("div",{className:`notification-item ${R.isRead?"read":"unread"} ${Fe(R.type)}`,onClick:()=>Pe(R),children:[g.jsx("div",{className:"notification-icon",children:Xe(R.type)}),g.jsxs("div",{className:"notification-content",children:[g.jsxs("div",{className:"notification-title",children:[R.title,R.priority==="urgent"&&g.jsx("span",{className:"priority-badge urgent",children:"URGENT"})]}),g.jsx("div",{className:"notification-message",children:R.message}),g.jsxs("div",{className:"notification-meta",children:[g.jsx("span",{className:"notification-project",children:R.projectName}),g.jsx("span",{className:"notification-time",children:rt(R.createdAt)})]})]}),!R.isRead&&g.jsx("div",{className:"unread-dot"})]},R.id))}),d.length>0&&g.jsx("div",{className:"notification-footer",children:g.jsx("button",{className:"view-all-btn",onClick:()=>{k(!1),s?.({type:"view_all"})},children:"View All Activity"})})]})]})}function $p({compact:i=!1}){const{theme:r,toggleTheme:c}=Sp();return g.jsx("button",{className:`theme-toggle ${i?"theme-toggle-compact":""}`,onClick:c,title:`Switch to ${r==="dark"?"light":"dark"} mode`,"aria-label":`Switch to ${r==="dark"?"light":"dark"} mode`,children:r==="dark"?g.jsxs(g.Fragment,{children:[g.jsx(Xp,{size:i?18:16}),!i&&g.jsx("span",{children:"Light"})]}):g.jsxs(g.Fragment,{children:[g.jsx(Lp,{size:i?18:16}),!i&&g.jsx("span",{children:"Dark"})]})})}class el extends U.Component{constructor(r){super(r),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0}}componentDidCatch(r,c){this.setState({error:r,errorInfo:c}),console.error("ErrorBoundary caught an error:",r,c)}handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};render(){return this.state.hasError?g.jsx("div",{className:"error-boundary",children:g.jsxs("div",{className:"error-boundary-content",children:[g.jsx("div",{className:"error-icon",children:g.jsx(Vp,{size:48})}),g.jsx("h2",{children:"Something went wrong"}),g.jsx("p",{children:"We're sorry, but something unexpected happened. Please try again."}),g.jsxs("div",{className:"error-actions",children:[g.jsx("button",{className:"btn btn-primary",onClick:this.handleRetry,children:"Try Again"}),g.jsx("button",{className:"btn btn-secondary",onClick:this.handleReload,children:"Reload Page"})]}),!1]})}):this.props.children}}function _m(){const[i,r]=U.useState(Ht()),[c,s]=U.useState(0),[o,d]=U.useState(!1),[h,y]=U.useState(!1);return U.useEffect(()=>{const w=Wu(async k=>{r(k),k&&h&&(d(!0),setTimeout(()=>d(!1),3e3)),k||y(!0);const z=await yi();s(z)});yi().then(s);const M=setInterval(async()=>{if(!Ht()){const k=await yi();s(k)}},5e3);return()=>{w(),clearInterval(M)}},[h]),i&&c===0&&!o?null:g.jsxs("div",{className:`offline-indicator ${i?"online":"offline"} ${o?"synced":""}`,children:[g.jsx("div",{className:"offline-indicator-content",children:i?o?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"online-icon",children:g.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:g.jsx("polyline",{points:"20 6 9 17 4 12"})})}),g.jsx("span",{className:"offline-text",children:"Changes synced!"})]}):c>0?g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"syncing-icon",children:g.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("polyline",{points:"23 4 23 10 17 10"}),g.jsx("polyline",{points:"1 20 1 14 7 14"}),g.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})]})}),g.jsxs("span",{className:"offline-text",children:["Syncing ",c,"..."]})]}):null:g.jsxs(g.Fragment,{children:[g.jsx("span",{className:"offline-icon",children:g.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[g.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),g.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),g.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),g.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),g.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),g.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),g.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]})}),g.jsxs("span",{className:"offline-text",children:["Offline",c>0&&g.jsxs("span",{className:"pending-badge",children:[c," pending"]})]})]})}),g.jsx("style",{children:`
        .offline-indicator {
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          z-index: 9999;
          padding: 10px 16px;
          border-radius: 24px;
          font-size: 14px;
          font-weight: 500;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
          from {
            transform: translateX(-50%) translateY(20px);
            opacity: 0;
          }
          to {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
          }
        }

        .offline-indicator.offline {
          background: #1f2937;
          color: #fbbf24;
        }

        .offline-indicator.online {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator.synced {
          background: #065f46;
          color: #d1fae5;
        }

        .offline-indicator-content {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .offline-icon,
        .online-icon,
        .syncing-icon {
          display: flex;
          align-items: center;
        }

        .syncing-icon svg {
          animation: spin 1s linear infinite;
        }

        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }

        .offline-text {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .pending-badge {
          background: rgba(251, 191, 36, 0.2);
          padding: 2px 8px;
          border-radius: 12px;
          font-size: 12px;
        }

        @media (max-width: 480px) {
          .offline-indicator {
            bottom: 70px; /* Above mobile nav */
            left: 16px;
            right: 16px;
            transform: none;
          }
        }
      `})]})}const Wp=U.lazy(()=>Xa(()=>import("./ForemanView-CgBRAnWS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),Fp=U.lazy(()=>Xa(()=>import("./Dashboard-CLbjTeSQ.js"),__vite__mapDeps([10,1,2,3,4,11,12,7,13,8,14,6,15,16,9]))),Pp=U.lazy(()=>Xa(()=>import("./Setup-CK_xKCUa.js"),__vite__mapDeps([17,13,7,8,9]))),Ip=U.lazy(()=>Xa(()=>import("./BrandingSettings-Ducr_B85.js"),__vite__mapDeps([18,7,8,9]))),eg=U.lazy(()=>Xa(()=>import("./PricingManager-D8ToUnss.js"),__vite__mapDeps([19,4,6,15,2,12,7,8,9]))),tg=U.lazy(()=>Xa(()=>import("./PublicView-Cen1bbza.js"),__vite__mapDeps([20,7,8,9]))),ag=U.lazy(()=>Xa(()=>import("./SignaturePage-WXx5nEHI.js"),__vite__mapDeps([21,14,8,3,2,11,6,15,7,9]))),ng=U.lazy(()=>Xa(()=>import("./MembershipManager-r1rIF7IX.js"),__vite__mapDeps([22,11,5,6,16,7,8,9])));function gi(){return g.jsxs("div",{className:"page-loader",children:[g.jsx(Kt,{className:"loading-logo"}),g.jsx("div",{className:"spinner"})]})}function lg(){const[i,r]=U.useState("entry"),[c,s]=U.useState(null),[o,d]=U.useState(null),[h,y]=U.useState([]),[w,M]=U.useState([]),[k,z]=U.useState(null),[X,Z]=U.useState(null),[V,H]=U.useState(null),[F,me]=U.useState(!0),[re,I]=U.useState("dashboard"),[P,be]=U.useState(null),[ke,Xe]=U.useState(!1),[Fe,Pe]=U.useState(null),[Lt,rt]=U.useState(0);U.useEffect(()=>{const W=window.location.pathname,oe=W.match(/^\/view\/([a-zA-Z0-9_-]+)$/),De=W.match(/^\/sign\/([a-zA-Z0-9_-]+)$/);oe?(Z(oe[1]),r("public"),me(!1)):De?(H(De[1]),r("signature"),me(!1)):R()},[]),U.useEffect(()=>{if(!p)return;const{data:{subscription:W}}=_.auth.onAuthStateChange(async(oe,De)=>{oe==="SIGNED_OUT"||oe==="USER_DELETED"?(s(null),d(null),y([]),r("entry")):oe==="TOKEN_REFRESHED"||oe==="SIGNED_IN"&&!c&&R()});return()=>{W?.unsubscribe()}},[c]);const R=async()=>{try{const{data:{user:W}}=await _.auth.getUser();if(!W){me(!1);return}const{data:oe,error:De}=await _.from("users").select("*").eq("id",W.id).single();if(oe){s(oe);let Ze=await xe.getUserCompanies(W.id);if(Ze.length===0&&oe.company_id&&await xe.repairLegacyUser(W.id,oe.company_id,oe.role||"member")&&(Ze=await xe.getUserCompanies(W.id)),y(Ze),Ze.length===0){if(await xe.getUserPendingMemberships(W.id)>0){r("pending");return}L("No company access. Join a company to continue.","error"),await Ku.signOut();return}const Ie=localStorage.getItem("selectedCompanyId");let Yt=null;if(Ie&&Ze.find(Ke=>Ke.id===Ie)?Yt=Ze.find(Ke=>Ke.id===Ie):Ze.length>0&&(Yt=Ze[0]),Yt){const{data:Ke}=await _.from("companies").select("*").eq("id",Yt.id).single();d(Ke),r("office")}}}catch(W){console.error("Auth check error:",W)}finally{me(!1)}},J=W=>{z(W),r("foreman")},x=async(W,oe)=>{try{const{data:De,error:Ze}=await _.auth.signInWithPassword({email:W,password:oe});if(Ze){L(Ze.message||"Invalid credentials","error");return}const{data:Ie,error:Yt}=await _.from("users").select("*").eq("id",De.user.id).single();if(Yt){console.error("User fetch error:",Yt),L("Error loading profile","error");return}if(Ie){s(Ie);let Ke=await xe.getUserCompanies(De.user.id);Ke.length===0&&Ie.company_id&&await xe.repairLegacyUser(De.user.id,Ie.company_id,Ie.role||"member")&&(Ke=await xe.getUserCompanies(De.user.id)),y(Ke);const Gt=localStorage.getItem("selectedCompanyId");let ya=null;if(Gt&&Ke.find(Qt=>Qt.id===Gt)?ya=Ke.find(Qt=>Qt.id===Gt):Ke.length>0&&(ya=Ke[0]),ya){const{data:Qt}=await _.from("companies").select("*").eq("id",ya.id).single();d(Qt),r("office")}else await xe.getUserPendingMemberships(De.user.id)>0?r("pending"):L("No company access. Please contact admin.","error")}else L("Profile not found. Please contact admin.","error")}catch(De){console.error("Login error:",De),L("Login failed","error")}},te=async W=>{try{const{data:oe}=await _.from("companies").select("*").eq("id",W).single();oe&&(d(oe),localStorage.setItem("selectedCompanyId",W),Xe(!1),I("dashboard"),L(`Switched to ${oe.name}`,"success"))}catch(oe){console.error("Switch company error:",oe),L("Error switching company","error")}},T=async()=>{try{await Ku.signOut(),s(null),d(null),y([]),r("entry"),I("dashboard"),localStorage.removeItem("selectedCompanyId")}catch(W){console.error("Logout error:",W),L("Error signing out","error")}},B=async()=>{await Em(),z(null),r("entry")},L=(W,oe="")=>{be({message:W,type:oe})},ge=()=>{I("dashboard"),o?.id&&ye()},ye=async()=>{if(o?.id)try{const W=await xe.getProjects(o.id);M(W)}catch(W){console.error("Error loading projects:",W)}};U.useEffect(()=>{o?.id&&i==="office"&&(ye(),He())},[o?.id,i]);const He=async()=>{if(o?.id)try{const oe=(await xe.getCompanyMemberships(o.id)).filter(De=>De.status==="pending").length;rt(oe)}catch(W){console.error("Error loading pending count:",W)}},je=W=>{if(W.type==="view_all"){I("dashboard"),Pe(null);return}I("dashboard"),W.projectId&&Pe(W.projectId)},N=()=>{Pe(null)};if(F)return g.jsx(fn,{children:g.jsx(on,{companyId:o?.id,children:g.jsxs("div",{className:"loading-screen",children:[g.jsx(Kt,{className:"loading-logo"}),g.jsx("div",{className:"spinner"})]})})});if(i==="entry")return g.jsx(fn,{children:g.jsxs(on,{children:[g.jsx(el,{children:g.jsx(Kp,{onForemanAccess:J,onOfficeLogin:x,onShowToast:L})}),P&&g.jsx(In,{message:P.message,type:P.type,onClose:()=>be(null)})]})});if(i==="public"&&X)return g.jsx(fn,{children:g.jsxs(on,{children:[g.jsx(el,{children:g.jsx(U.Suspense,{fallback:g.jsx(gi,{}),children:g.jsx(tg,{shareToken:X})})}),P&&g.jsx(In,{message:P.message,type:P.type,onClose:()=>be(null)})]})});if(i==="signature"&&V)return g.jsx(fn,{children:g.jsxs(on,{children:[g.jsx(el,{children:g.jsx(U.Suspense,{fallback:g.jsx(gi,{}),children:g.jsx(ag,{signatureToken:V})})}),P&&g.jsx(In,{message:P.message,type:P.type,onClose:()=>be(null)})]})});if(i==="pending")return g.jsx(fn,{children:g.jsxs(on,{children:[g.jsx(el,{children:g.jsxs("div",{className:"pending-approval-screen",children:[g.jsx(Kt,{className:"pending-logo"}),g.jsx("h2",{children:"Awaiting Approval"}),g.jsx("p",{children:"Your membership request has been submitted."}),g.jsx("p",{children:"A company admin will review your request."}),g.jsxs("div",{className:"pending-actions",children:[g.jsx("button",{className:"btn btn-secondary",onClick:T,children:"Sign Out"}),g.jsx("button",{className:"btn btn-primary",onClick:R,children:"Check Status"})]})]})}),P&&g.jsx(In,{message:P.message,type:P.type,onClose:()=>be(null)})]})});if(i==="foreman"&&k)return g.jsx(fn,{children:g.jsxs(on,{companyId:k.company_id,children:[g.jsx(el,{children:g.jsx(U.Suspense,{fallback:g.jsx(gi,{}),children:g.jsx(Wp,{project:k,companyId:k.company_id,onShowToast:L,onExit:B})})}),g.jsx(_m,{}),P&&g.jsx(In,{message:P.message,type:P.type,onClose:()=>be(null)})]})});const Re=h.find(W=>W.id===o?.id)?.access_level==="administrator"||o?.owner_user_id===c?.id;return g.jsx(fn,{children:g.jsx(on,{companyId:o?.id,children:g.jsxs("div",{children:[!p&&g.jsx("div",{className:"demo-banner",children:"Demo Mode - Data saved locally in your browser"}),g.jsx("nav",{className:"nav",children:g.jsxs("div",{className:"nav-content",children:[g.jsx(Kt,{}),g.jsxs("div",{className:"nav-tabs",children:[g.jsx("button",{className:`nav-tab ${re==="dashboard"?"active":""}`,onClick:()=>I("dashboard"),children:"Dashboard"}),g.jsx("button",{className:`nav-tab ${re==="setup"?"active":""}`,onClick:()=>I("setup"),children:"+ New Project"}),g.jsx("button",{className:`nav-tab ${re==="pricing"?"active":""}`,onClick:()=>I("pricing"),children:"Pricing"}),Re&&g.jsx("button",{className:`nav-tab ${re==="branding"?"active":""}`,onClick:()=>I("branding"),children:"Branding"}),Re&&g.jsxs("button",{className:`nav-tab ${re==="team"?"active":""}`,onClick:()=>I("team"),children:["Team",Lt>0&&g.jsx("span",{className:"nav-tab-badge",children:Lt})]})]}),g.jsxs("div",{className:"nav-user",children:[g.jsx($p,{compact:!0}),g.jsx(Jp,{company:o,projects:w,userId:c?.id,onNotificationClick:je,onShowToast:L}),h.length>1&&g.jsxs("div",{className:"company-switcher",children:[g.jsxs("button",{className:"company-switcher-btn",onClick:()=>Xe(!ke),children:[o?.name||"Select Company",g.jsx("span",{className:"switcher-arrow",children:""})]}),ke&&g.jsx("div",{className:"company-dropdown",children:h.map(W=>g.jsxs("button",{className:`company-option ${W.id===o?.id?"active":""}`,onClick:()=>te(W.id),children:[W.name,W.id===o?.id&&g.jsx("span",{className:"check",children:""})]},W.id))})]}),h.length<=1&&o&&g.jsx("span",{className:"nav-company-name",children:o.name}),g.jsx("span",{className:"nav-user-name",children:c?.name||c?.email}),g.jsx("button",{className:"nav-logout",onClick:T,children:"Sign Out"})]})]})}),g.jsx(el,{children:g.jsx(U.Suspense,{fallback:g.jsx(gi,{}),children:g.jsxs("div",{className:"container",children:[re==="dashboard"&&g.jsx(Fp,{company:o,user:c,isAdmin:Re,onShowToast:L,navigateToProjectId:Fe,onProjectNavigated:N}),re==="setup"&&g.jsx(Pp,{company:o,user:c,onProjectCreated:ge,onShowToast:L}),re==="pricing"&&g.jsx(eg,{company:o,onShowToast:L}),re==="branding"&&g.jsx(Ip,{company:o,onShowToast:L}),re==="team"&&Re&&g.jsx(ng,{company:o,user:c,onShowToast:L})]},o?.id)})}),g.jsx(_m,{}),P&&g.jsx(In,{message:P.message,type:P.type,onClose:()=>be(null)})]})})})}cp.createRoot(document.getElementById("root")).render(g.jsx(ym.StrictMode,{children:g.jsx(lg,{})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(i=>{setInterval(()=>{i.update().catch(()=>{})},3e5)}).catch(()=>{})});export{Op as B,Mp as C,Up as H,Kt as L,kp as M,Gp as P,ug as R,Vp as T,$p as a,xp as b,Pt as c,xe as d,In as e,sg as f,p as i,g as j,le as o,U as r,_ as s,bp as u};
